<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/our-aller-plus-loin-41.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 07:13:10 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/our-aller-plus-loin-41.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:18:02 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Pour aller plus loin...</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/pour-aller-plus-loin-41.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Pour aller plus loin...</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Pourallerplusloin...">Pour aller plus loin...</a><br/><a href="#AvantdecommencerutilisationdelaconsoleMySQL">Avant de commencer : utilisation de la console MySQL</a><br/><a href="#Lancerleclient">Lancer le client</a><br/><a href="#Testsest-cequeamarche">Tests : est-ce que ça marche ?</a><br/><a href="#Quelquesexplications...">Quelques explications...</a><br/><a href="#Slectionnerunevaleur...neprovenantpasd039unetable">Sélectionner une valeur... ne provenant pas d&#039;une table !</a><br/><a href="#Quelquesbases...">Quelques bases...</a><br/><a href="#LesfonctionsMySQL">Les fonctions MySQL</a><br/><a href="#Lesfonctionsutilisateur">Les fonctions utilisateur</a><br/><a href="#Lesvariablesutilisateur">Les variables utilisateur</a><br/><a href="#Variablesutilisateur">Variables utilisateur ?</a><br/><a href="#Dclareretutiliserunevariable">Déclarer et utiliser une variable</a><br/><a href="#Mini-TPunclassement">Mini-TP : un classement</a><br/><a href="#Unautreexempleslectionauhasard">Un autre exemple : sélection au hasard</a><br/><a href="#TraitementdesquotNULLquots">Traitement des &quot;NULL&quot;s</a><br/><a href="#Spcificitsdesvaleursnulles">Spécificités des valeurs nulles</a><br/><a href="#Lesfonctionsdetraitementdesvaleursnulles">Les fonctions de traitement des valeurs nulles</a><br/><a href="#Lesystmedeclassementenuneseulerequte">Le système de classement en une seule requête !</a><br/><a href="#Lesconditions">Les conditions</a><br/><a href="#DesconditionsenSQLDiffrencesentreMySQLetlanorme">Des conditions en SQL ? Différences entre MySQL et la norme</a><br/><a href="#UtilisationdeCASE">Utilisation de CASE</a><br/><a href="#Lesautresstructuresconditionnelles">Les autres structures conditionnelles</a><br/><a href="#ProblmeSQLSommedesnombressileurnombrecorrespondunnombre...">[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...</a><br/><a href="#EtsionfaisaitunpeudeSQL...">Et si on faisait un peu de SQL ? ...</a><br/><a href="#LanormeSQL">La norme SQL ?</a><br/><a href="#Quelquesdonnesdetest">Quelques données de test</a><br/><a href="#Enfinunerequteconforme">Enfin une requête conforme !</a><br/><a href="#SELECT...FROMSELECT...FROM...">SELECT ... FROM ( SELECT ... FROM ... )</a><br/><a href="#DISTINCT">DISTINCT</a><br/><a href="#FiltrerlesdonnesavecWHERE">Filtrer les données avec WHERE</a><br/><a href="#AproposdelaclauseWHERE...">A propos de la clause WHERE...</a><br/><a href="#Lesoprateursdecomparaison">Les opérateurs de comparaison</a><br/><a href="#NOTBETWEENINetLIKE">(NOT) BETWEEN, IN et LIKE</a><br/><a href="#ProblmeSQLQuiestplusgrandqueledernierplusgrand">[Problème SQL] Qui est plus grand que le dernier plus grand ?</a><br/><a href="#UnpeudestatsavecGROUPBY1_2">Un peu de stats avec GROUP BY ( 1 / 2 )</a><br/><a href="#LesfonctionsstatistiquesdeMySQL">Les fonctions statistiques de MySQL</a><br/><a href="#GrouperlesdonnesavecGROUPBY">Grouper les données avec GROUP BY</a><br/><a href="#Lesfonctionsstatistiquesagissentsurdesgroupes">Les fonctions statistiques agissent sur des groupes !!</a><br/><a href="#UnpeudestatsavecGROUPBY2_2">Un peu de stats avec GROUP BY ( 2 / 2 )</a><br/><a href="#Fonctionnalitsmoinsconnues">Fonctionnalités moins connues</a><br/></div>
<a name="Pourallerplusloin..."></a><h2>Pour aller plus loin...</h2><div class="content" role="article">
<div id="r-505926" data-claire-element-id="505926" data-claire-semantic="question"><p id="r-505925" data-claire-element-id="505925">C'est quoi tous ces trucs que je vois sur les forums et auxquels je ne comprends rien à rien ?? J'en ai marre de passer pour un idiot, que quelqu'un m'expliiiique !!</p></div><p id="r-505927" data-claire-element-id="505927">Tiens ben ça tombe bien : c'est justement pour ça que ce tutorial est conçu :p .<br/> Comme pour tous les cours de ce site, on part de Zér0, ici je considérerai que Zér0, c'est le cours à M@teo... Donc avant de vous lancer, allez au moins relire <a href="http://www.siteduzero.com/tuto-3-4-0-un-site-dynamique-avec-php.html#part_20">ceci</a> si votre cerveau vous paraît embrouillé sur certains points ;) .</p><p id="r-505928" data-claire-element-id="505928">Je vous conseille également fortement de lire les chapitres dans l'ordre, la plupart s'appuient sur des concepts vus précédemment. Mais si vous êtes attentif et que vous vous appliquez, vous vous demanderez bientôt pourquoi tous les Zér0s n'utilisent pas les techniques citées ici :D .</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="AvantdecommencerutilisationdelaconsoleMySQL"></a><h2>Avant de commencer : utilisation de la console MySQL</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
<span class="next">Lancer le client</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-505930" data-claire-element-id="505930">Dans ce chapitre, vous allez apprendre à vous servir du client en ligne de commande de MySQL, c'est pour moi le moyen le plus simple et le plus rapide d'effectuer des tests avec MySQL.</p>
</div><a name="Lancerleclient"></a><h2>Lancer le client</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">
<span class="arrow"></span>
<span class="next">Avant de commencer : utilisation de la console MySQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
<span class="next">Tests : est-ce que ça marche ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-lancer-le-client" data-claire-element-id="505961">Lancer le client</h4><p id="r-505931" data-claire-element-id="505931">Notez que quand je dis &quot;lancer le client&quot;, celà n'est possible qu'en local sur votre machine. En effet pas question de lancer ce client sur une machine distante telle que celle de votre hébergeur, à moins que vous n'y ayez un accès sécurisé (<a href="http://fr.wikipedia.org/wiki/SSH">SSH</a>)</p><h5 id="r-sous-windows-wampserver" data-claire-element-id="505939">Sous Windows - WampServer</h5><p id="r-505932" data-claire-element-id="505932">Lancer le client sous Windows avec WampServer, il n'y a rien de plus simple : dans la dernière version, soit WAMP5 1.6.0, il suffit de cliquer sur l'icône du systray (en supposant bien sur que WAMP5 est lancé), puis de cliquer sur <em>MySQL console</em> du menu <em>MySQL</em>. Entrez ensuite votre mot de passe (par défaut, appuyez simplement sur ENTRÉE). Voici ce que vous devriez obtenir (sous WAMP5 1.6.0) :</p><figure id="r-505934" data-claire-element-id="505935"><img id="r-505933" data-claire-element-id="505933" src="medias/uploads.siteduzero.com_files_10001_11000_10216.png" alt="Image utilisateur"/></figure><figure id="r-505937" data-claire-element-id="505938"><img id="r-505936" data-claire-element-id="505936" src="medias/uploads.siteduzero.com_files_10001_11000_10218.png" alt="Image utilisateur"/></figure><h5 id="r-sous-windows-autres" data-claire-element-id="505953">Sous Windows - Autres</h5><p id="r-505940" data-claire-element-id="505940">Si vous n'utilisez pas Wamp, ou que vous n'aimez pas son menu ( :p ), il y a une autre solution : lancer le client avec la ligne de commande de Windows.</p><p id="r-505941" data-claire-element-id="505941">Pour commencer, il faut repérer le fichier mysql du dossier d'installation de mysql. Ca pourrait être : &quot;C:\Program Files\EsayPHP1-8\mysql\bin\mysql.exe&quot;.</p><p id="r-505942" data-claire-element-id="505942">Appuyez simultanément sur la touche &quot;Windows&quot; du clavier (entre &quot;ctrl&quot; et &quot;alt&quot; en bas à gauche) et sur R pour lancer l'exécuteur Windows. Tapez ensuite &quot;cmd&quot; puis ENTER.</p><p id="r-505943" data-claire-element-id="505943">Ensuite, il faut commencer par aller dans le répertoire où se trouve mysql.exe grâce à la commande &quot;cd&quot;. Enfin, pour lancer le client, il faut faire &quot;mysql.exe --user=root --password=<em>mot_de_passe</em>. Ce qui donne :</p><pre id="r-505944" data-claire-element-id="505944"><code data-claire-semantic="console">cd &quot;C:\Program Files\EasyPHP1-8\mysql\bin&quot;
mysql.exe --user=root</code></pre><p id="r-505945" data-claire-element-id="505945">Généralement, vous pouvez remplacer utilisateur par root et omettre la clause --password.</p><p id="r-505946" data-claire-element-id="505946">En images : (remarquez que j'exécute directement la commande dans l'exécuteur de Windows, si vous n'y arrivez pas de cette façon, reprenez la méthode du dessus).</p><figure id="r-505948" data-claire-element-id="505949"><img id="r-505947" data-claire-element-id="505947" src="medias/uploads.siteduzero.com_files_10001_11000_10220.png" alt="Image utilisateur"/></figure><figure id="r-505951" data-claire-element-id="505952"><img id="r-505950" data-claire-element-id="505950" src="medias/uploads.siteduzero.com_files_10001_11000_10222.png" alt="Image utilisateur"/></figure><h5 id="r-sous-unix-linux-bsd" data-claire-element-id="505960">Sous Unix ( Linux, BSD,...)</h5><p id="r-505954" data-claire-element-id="505954">Sous Unix, lancez une console et tapez mysql -u root (Et ça fait une belle claque pour tous ceux qui disent que Windows est plus simple que Linux ^^).</p><figure id="r-505956" data-claire-element-id="505957"><img id="r-505955" data-claire-element-id="505955" src="medias/uploads.siteduzero.com_files_10001_11000_10224.png" alt="Image utilisateur"/></figure><p id="r-505958" data-claire-element-id="505958">A noter que si la console vous répond quelque chose du genre <em>ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)</em>, ajouter l'option -p pourra vous permettre d'indiquer un mot de passe :)</p><pre id="r-505959" data-claire-element-id="505959"><code data-claire-semantic="console">mysql -u root -p</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">
<span class="arrow"></span>
<span class="next">Avant de commencer : utilisation de la console MySQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
<span class="next">Tests : est-ce que ça marche ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Testsest-cequeamarche"></a><h2>Tests : est-ce que ça marche ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
<span class="arrow"></span>
<span class="next">Lancer le client</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
<span class="next">Quelques explications...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-tests-est-ce-que-ca-marche" data-claire-element-id="505979">Tests : est-ce que ça marche ?</h4><p id="r-505962" data-claire-element-id="505962">On va maintenant voir si tout marche bien sur notre installation de MySQL.</p><h5 id="r-test-1-test-des-fonctionnalites" data-claire-element-id="505969">Test 1 : test des fonctionnalités</h5><p id="r-505963" data-claire-element-id="505963">Lancez cette commande :</p><pre id="r-505964" data-claire-element-id="505964"><code data-claire-semantic="sql">SELECT 'essai' AS test;</code></pre><p id="r-505965" data-claire-element-id="505965">Vous devriez voir ceci (ou quelque chose qui y ressemble en tout cas, dans le cas contraire, bah postez un message sur le forum :p ) :</p><figure id="r-505967" data-claire-element-id="505968"><img id="r-505966" data-claire-element-id="505966" src="medias/uploads.siteduzero.com_files_10001_11000_10225.png" alt="Image utilisateur"/></figure><h5 id="r-test-2-test-des-droits" data-claire-element-id="505978">Test 2 : test des droits</h5><p id="r-505970" data-claire-element-id="505970">Normalement, vous devriez être logué en tant que root : sous Windows, c'est fait automatiquement la plupart du temps, et je vous ai expliqué sous linux comment vous loguer en tant que tel.</p><p id="r-505971" data-claire-element-id="505971">Nous allons, histoire d'être sûrs, tester que nous avons bien les droits create et drop, logiquement, si vous avez ces deux là, vous devriez tous les avoir.</p><p id="r-505972" data-claire-element-id="505972">Lancez donc ces deux commandes l'une après l'autre et regardez si vous obtenez à peu près le même résultat que moi :</p><pre id="r-505973" data-claire-element-id="505973"><code data-claire-semantic="sql">SHOW DATABASES;
CREATE DATABASE abcxtest;
SHOW DATABASES;
DROP DATABASE abcxtest;
SHOW DATABASES;</code></pre><figure id="r-505975" data-claire-element-id="505976"><img id="r-505974" data-claire-element-id="505974" src="medias/uploads.siteduzero.com_files_10001_11000_10226.png" alt="Image utilisateur"/></figure><p id="r-505977" data-claire-element-id="505977">Si vous avez le même que moi, c'est bon ! Sinon vous n'êtes probablement pas connecté en tant que root, auquel cas je vous conseille, sous linux, de relire la sous-partie précédente, et sous Windows, de vérifier vos paramètres de connexion, et, pourquoi pas, d'ajouter <strong>-u root</strong> à votre ligne de commande (<strong>-u root -p</strong> si vous avez configuré un mot de passe pour root).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
<span class="arrow"></span>
<span class="next">Lancer le client</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
<span class="next">Quelques explications...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quelquesexplications..."></a><h2>Quelques explications...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
<span class="arrow"></span>
<span class="next">Tests : est-ce que ça marche ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">
<span class="next">Sélectionner une valeur... ne provenant pas d&#039;une table !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-explications-16" data-claire-element-id="505988">Quelques explications...</h4><p id="r-505980" data-claire-element-id="505980">Bon, c'est bien beau tout ça : ça fonctionne, ça va vite, ça fait pro, c'est beau,...</p><p id="r-505981" data-claire-element-id="505981">Oui mais pourquoi quand je fais ça : SELECT 'bonjour', ça m'affiche deux fois &quot;bonjour&quot; dans un tableau ?</p><p id="r-505982" data-claire-element-id="505982">En fait, la première ligne du tableau comporte les noms des différentes colonnes, tandis que les lignes suivantes comportent les données. Reprenons l'exemple précédent :</p><figure id="r-505984" data-claire-element-id="505985"><img id="r-505983" data-claire-element-id="505983" src="medias/uploads.siteduzero.com_files_10001_11000_10226.png" alt="Image utilisateur"/></figure><p id="r-505986" data-claire-element-id="505986">On voit bien, dans le résultat de la dernière requête par exemple, que &quot;Database&quot; est le nom de la colonne, et que &quot;information_schema&quot;, &quot;mysql&quot; et &quot;test&quot; sont les données contenues dans cette colonne (en l'occurence les noms des différentes bases de données présentes sur le serveur).</p><p id="r-505987" data-claire-element-id="505987">Comme vous avez pu le constater, la console MySQL est très pratique pour effectuer quelques tests avant de mettre la requête dans PHP. De plus elle répond trés rapidement par rapport au chargement d'une page PHP.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
<span class="arrow"></span>
<span class="next">Tests : est-ce que ça marche ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">
<span class="next">Sélectionner une valeur... ne provenant pas d&#039;une table !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Slectionnerunevaleur...neprovenantpasd039unetable"></a><h2>Sélectionner une valeur... ne provenant pas d&#039;une table !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
<span class="arrow"></span>
<span class="next">Quelques explications...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
<span class="next">Quelques bases...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-505990" data-claire-element-id="505990">Un premier chapitre peut-être pas des plus attractifs mais nécessaire pour la suite.</p><p id="r-505991" data-claire-element-id="505991">Vous vous demandez plus que certainement à quoi peut bien servir une requête appelant des données ne provenant pas d'une table. Je vous le dis tout de suite, pas à énormément de choses, mais dans certains cas, ça peut être très pratique.</p><p id="r-505992" data-claire-element-id="505992">Nous verrons plusieurs cas : simplement sélectionner une valeur, sélectionner une valeur ayant subi des &quot;transformations&quot;, les variables utilisateur et enfin les fonctions utilisateur (qui n'existent qu'à partir de MySQL 5).</p><p id="r-505993" data-claire-element-id="505993">Allez, c'est parti !</p>
</div><a name="Quelquesbases..."></a><h2>Quelques bases...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">
<span class="arrow"></span>
<span class="next">Sélectionner une valeur... ne provenant pas d&#039;une table !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
<span class="next">Les fonctions MySQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-bases-2" data-claire-element-id="506069">Quelques bases...</h4><h5 id="r-selectionner-une-valeur" data-claire-element-id="506000">Sélectionner une valeur</h5><p id="r-505994" data-claire-element-id="505994">Essayez donc d'exécuter la requête suivante :</p><pre id="r-505995" data-claire-element-id="505995"><code data-claire-semantic="sql">SELECT 'bonjour';</code></pre><figure id="r-505997" data-claire-element-id="505998"><img id="r-505996" data-claire-element-id="505996" src="medias/uploads.siteduzero.com_files_10001_11000_10125.png" alt="Image utilisateur"/></figure><p id="r-505999" data-claire-element-id="505999">Vous vous demandez peut-être pourquoi je vous montre ça, et bien juste parce que beaucoup d'entre vous ne savez pas que la clause FROM n'est <strong>pas</strong> obligatoire dans une requête SELECT ! Vous vous en doutez certainement vu le titre de ce chapitre : la plupart des requêtes qui suivent seront basées sur le même modèle... :p</p><h5 id="r-utilisation-des-apostrophes" data-claire-element-id="506023">Utilisation des apostrophes</h5><p id="r-506001" data-claire-element-id="506001">A propos, faisons une petite mise au point à propos de l'utilisation des apostrophes autour des valeurs ...</p><ul id="r-506014" data-claire-element-id="506014"><li id="r-506004" data-claire-element-id="506004"><p id="r-506002" data-claire-element-id="506002">Pour les valeurs numériques, les apostrophes ne sont pas obligatoires :</p><pre id="r-506003" data-claire-element-id="506003"><code data-claire-semantic="sql">SELECT 5;</code></pre></li><li id="r-506007" data-claire-element-id="506007"><p id="r-506005" data-claire-element-id="506005">Pour les valeurs littérales, les apostrophes sont obligatoires :</p><pre id="r-506006" data-claire-element-id="506006"><code data-claire-semantic="sql">SELECT 'bonjour';</code></pre></li><li id="r-506010" data-claire-element-id="506010"><p id="r-506008" data-claire-element-id="506008">Pour les valeurs horodataires, les apostrophes sont obligatoires :</p><pre id="r-506009" data-claire-element-id="506009"><code data-claire-semantic="sql">SELECT '01:13:54';</code></pre></li><li id="r-506013" data-claire-element-id="506013"><p id="r-506011" data-claire-element-id="506011">Les valeurs TRUE, FALSE et NULL ( on en reparlera plus tard ) s'écrivent sans apostrophe :</p><pre id="r-506012" data-claire-element-id="506012"><code data-claire-semantic="sql">SELECT NULL;</code></pre></li></ul><aside id="r-506016" data-claire-element-id="506016" data-claire-semantic="information"><p id="r-506015" data-claire-element-id="506015">Il est fortement conseillé d'utiliser les apostrophes et non pas les guillemets car la norme SQL prévoit l'utilisation des apostrophes et non des guillemets. Respecter la norme vous permettra d'éviter bien des déboires si vous décidez un jour de changer de moteur de gestion de base de données (PostGreSQL, SQLite,... )</p></aside><p id="r-506017" data-claire-element-id="506017">Pour écrire une apostrophe, il suffit de la doubler :</p><pre id="r-506018" data-claire-element-id="506018"><code data-claire-semantic="sql">SELECT 'On m''appelle Shepard';</code></pre><figure id="r-506020" data-claire-element-id="506021"><img id="r-506019" data-claire-element-id="506019" src="medias/uploads.siteduzero.com_files_10001_11000_10126.png" alt="Image utilisateur"/></figure><p id="r-506022" data-claire-element-id="506022">Il est fortement recommandé de toujours terminer ses requêtes par un point-virgule. Pourquoi ? Parce que quand on en arrivera au chapitre sur les transactions, si vous n'avez pas encore pris cette habitude, vous risquez d'être confrontés à quelques ennuis. Retenez simplement ceci : toute requête SQL doit se terminer par un point-virgule.</p><h5 id="r-le-renommage-de-colonnes-avec-as" data-claire-element-id="506042">Le renommage de colonnes avec AS</h5><p id="r-506024" data-claire-element-id="506024">Bien sûr, on peut sélectionner plusieurs valeurs en les séparant par des virgules :</p><pre id="r-506025" data-claire-element-id="506025"><code data-claire-semantic="sql">SELECT 'bonjour', 1, '01:25:18';</code></pre><p id="r-506026" data-claire-element-id="506026">Qui renvoie :</p><figure id="r-506028" data-claire-element-id="506029"><img id="r-506027" data-claire-element-id="506027" src="medias/uploads.siteduzero.com_files_10001_11000_10127.png" alt="Image utilisateur"/></figure><p id="r-506030" data-claire-element-id="506030">Vous remarquez que les noms de colonnes ne sont pas vraiment... pratiques. C'est pour ça qu'existe le renommage de colonnes. Exemple :</p><pre id="r-506031" data-claire-element-id="506031"><code data-claire-semantic="sql">SELECT 'bonjour' AS exemple_texte, 1 AS exemple_nombre, '01:25:18' AS exemple_heure;</code></pre><p id="r-506032" data-claire-element-id="506032">Résultat :</p><figure id="r-506034" data-claire-element-id="506035"><img id="r-506033" data-claire-element-id="506033" src="medias/uploads.siteduzero.com_files_10001_11000_10128.png" alt="Image utilisateur"/></figure><p id="r-506036" data-claire-element-id="506036">On peut aussi mettre des noms plus exotiques grâce aux accents :</p><pre id="r-506037" data-claire-element-id="506037"><code data-claire-semantic="sql">SELECT 'bonjour' AS `Du texte`, 1 AS `Un chiffre`, '01:25:18' AS `De l'horodatage`;</code></pre><figure id="r-506039" data-claire-element-id="506040"><img id="r-506038" data-claire-element-id="506038" src="medias/uploads.siteduzero.com_files_10001_11000_10129.png" alt="Image utilisateur"/></figure><p id="r-506041" data-claire-element-id="506041">Remarquez les espaces et l'apostrophe dans le nom. Il est toutefois vivement contre-indiqué d'utiliser des noms pareils car le traitement PHP s'en trouvera fortement pénalisé.</p><h5 id="r-les-operateurs-mathematiques-1" data-claire-element-id="506068">Les opérateurs mathématiques</h5><p id="r-506043" data-claire-element-id="506043">Il existe 7 opérateurs principaux sous MySQL:</p><ul id="r-506058" data-claire-element-id="506058"><li id="r-506045" data-claire-element-id="506045"><p id="r-506044" data-claire-element-id="506044">L'addition: &quot;+&quot;</p></li><li id="r-506047" data-claire-element-id="506047"><p id="r-506046" data-claire-element-id="506046">La soustraction: &quot;-&quot;</p></li><li id="r-506049" data-claire-element-id="506049"><p id="r-506048" data-claire-element-id="506048">La multiplication: &quot;*&quot;</p></li><li id="r-506051" data-claire-element-id="506051"><p id="r-506050" data-claire-element-id="506050">La division: &quot;/&quot;</p></li><li id="r-506053" data-claire-element-id="506053"><p id="r-506052" data-claire-element-id="506052">La division entière &quot;DIV&quot;</p></li><li id="r-506055" data-claire-element-id="506055"><p id="r-506054" data-claire-element-id="506054">Le reste d'une division ( Modulo ): &quot;%&quot; ou &quot;MOD&quot;</p></li><li id="r-506057" data-claire-element-id="506057"><p id="r-506056" data-claire-element-id="506056">La puissance: &quot;^&quot;</p></li></ul><p id="r-506059" data-claire-element-id="506059">La division entière retourne toujours un nombre <strong>arrondi à l'unité inférieure</strong> ! Ne vous étonnez pas si vos calculs sont incorrects si vous utilisez à un moment ou à un autre des nombres décimaux et que vous utilisez DIV plutôt que /.</p><p id="r-506060" data-claire-element-id="506060">Toutefois, il est préférable, pour des raisons d'optimisation, d'utiliser 5 DIV 4 que ROUND( 5 / 4 ). (Vous apprendrez l'utilisation de ROUND dans quelques minutes).</p><h6 id="r-exemple-149" data-claire-element-id="506067">Exemple</h6><pre id="r-506061" data-claire-element-id="506061"><code data-claire-semantic="sql">SELECT ( 1.0 + 5.0 * 6.0 MOD ( 4.0 % 3.0 ) ) / ( 2.0 / 0.25 ), 0.12 DIV 1;</code></pre><figure id="r-506063" data-claire-element-id="506064"><img id="r-506062" data-claire-element-id="506062" src="medias/uploads.siteduzero.com_files_10001_11000_10130.png" alt="Image utilisateur"/></figure><aside id="r-506066" data-claire-element-id="506066" data-claire-semantic="information"><p id="r-506065" data-claire-element-id="506065">Notez que tout ce que j'ai dit dans cette sous-partie ne concerne pas uniquement MySQL. Tous les SGBDR (Système de Gestion de Base de Données Relationnelle) utilisent le doublage de l'apostrophe, le point-virgule final,... ou du moins tous les SGBDR respectant la norme.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">
<span class="arrow"></span>
<span class="next">Sélectionner une valeur... ne provenant pas d&#039;une table !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
<span class="next">Les fonctions MySQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesfonctionsMySQL"></a><h2>Les fonctions MySQL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
<span class="arrow"></span>
<span class="next">Quelques bases...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
<span class="next">Les fonctions utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fonctions-mysql" data-claire-element-id="506254">Les fonctions MySQL</h4><p id="r-506070" data-claire-element-id="506070">C'est peut-être assez con à dire, mais M@teo ne dit à aucun moment qu'il existe des fonctions aussi dans MySQL. Le seul soupçon que vous pourriez avoir par rapport à leur existence était le moment où vous avez appris à compter le nombre de lignes avec COUNT(col).</p><p id="r-506071" data-claire-element-id="506071">Il existe une floppée de fonctions MySQL telles que COUNT, certaines agissant sur des chaînes de caractères, d'autres sur des nombres, d'autres sur des dates, certaines sur les colonnes d'une table,...</p><p id="r-506072" data-claire-element-id="506072">Comme nous ne travaillons pas sur des tables, nous nous passerons pour le moment de la dernière catégorie, je vous apprendrai dans cette sous-partie les fonctions principales ainsi que leur utilité. Bonne lecture !</p><h5 id="r-upper-lower" data-claire-element-id="506087">UPPER / LOWER</h5><h6 id="r-exemple-150" data-claire-element-id="506077">Exemple</h6><pre id="r-506073" data-claire-element-id="506073"><code data-claire-semantic="sql">SELECT UPPER('C''est un assassinat !!') AS majs, LOWER('NON ?') AS mins;</code></pre><figure id="r-506075" data-claire-element-id="506076"><img id="r-506074" data-claire-element-id="506074" src="medias/uploads.siteduzero.com_files_10001_11000_10131.png" alt="Image utilisateur"/></figure><h6 id="r-effets-2" data-claire-element-id="506079">Effets</h6><p id="r-506078" data-claire-element-id="506078">UPPER met une chaîne en majuscules et LOWER met une chaîne en minuscules. Seuls les caractères alphabétiques sont pris en compte.</p><h6 id="r-utilisation-63" data-claire-element-id="506086">Utilisation</h6><p id="r-506080" data-claire-element-id="506080">Plusieurs utilisations, dont certaines sont contre-indiquées :</p><ul id="r-506085" data-claire-element-id="506085"><li id="r-506082" data-claire-element-id="506082"><p id="r-506081" data-claire-element-id="506081">On utilise souvent UPPER() ou LOWER() pour comparer deux chaînes quand on ne veut pas faire attention à la casse (c'est à dire ne pas tenir compte des minuscules / majuscules). Mais il est préférable d'utiliser un autre charset se terminant par _ci (case insensitive). La plupart du temps c'est déjà le cas et vous ne devez même pas vous en préoccuper.</p></li><li id="r-506084" data-claire-element-id="506084"><p id="r-506083" data-claire-element-id="506083">UPPER et LOWER sont aussi parfois utilisés pour uniformiser des chaînes de caractères (par exemple NOM Prénom). L'exemple le plus courant étant de mettre un nom en majuscules et un prénom en minuscules sauf la première lettre en majuscule.</p></li></ul><h5 id="r-char-length" data-claire-element-id="506099">CHAR_LENGTH</h5><h6 id="r-exemple-151" data-claire-element-id="506092">Exemple</h6><pre id="r-506088" data-claire-element-id="506088"><code data-claire-semantic="sql">SELECT CHAR_LENGTH('Bonjour tout le monde !!');
SELECT CHAR_LENGTH('Il l''a');</code></pre><figure id="r-506090" data-claire-element-id="506091"><img id="r-506089" data-claire-element-id="506089" src="medias/uploads.siteduzero.com_files_10001_11000_10132.png" alt="Image utilisateur"/></figure><h6 id="r-effets-3" data-claire-element-id="506096">Effets</h6><p id="r-506093" data-claire-element-id="506093">CHAR_LENGTH renvoie le nombre de caractères contenus dans une chaîne.</p><aside id="r-506095" data-claire-element-id="506095" data-claire-semantic="information"><p id="r-506094" data-claire-element-id="506094">La fonction LENGTH sert à la même chose mais tient compte des caractères codés sur 2 octets ! Attention donc aux surprises avec LENGTH que je vous déconseille d'utiliser !</p></aside><h6 id="r-utilisation-64" data-claire-element-id="506098">Utilisation</h6><p id="r-506097" data-claire-element-id="506097">CHAR_LENGTH peut être utilisé comme une vérification (vérifier qu'un pseudo ne contient pas plus de n caractères, etc). Vous allez me dire qu'on peut faire ça du côté PHP, mais moi je trouve ça plus facile du côté SQL, on va dire : &quot;Chacun ses goûts&quot; ;) .</p><h5 id="r-concat-et-concat-ws" data-claire-element-id="506116">CONCAT et CONCAT_WS</h5><h6 id="r-exemple-152" data-claire-element-id="506104">Exemple</h6><pre id="r-506100" data-claire-element-id="506100"><code data-claire-semantic="sql">SELECT CONCAT('Bon', 'jour'), CONCAT_WS(' - ', 1, 2, 3, 4, 5);</code></pre><figure id="r-506102" data-claire-element-id="506103"><img id="r-506101" data-claire-element-id="506101" src="medias/uploads.siteduzero.com_files_10001_11000_10133.png" alt="Image utilisateur"/></figure><h6 id="r-effets-4" data-claire-element-id="506112">Effets</h6><p id="r-506105" data-claire-element-id="506105">Joindre deux chaînes :p .</p><p id="r-506106" data-claire-element-id="506106">La norme SQL prévoit deux moyens pour concaténer : CONCATENATE et l'opérateur || (l'opérateur étant plus largement utilisé). Par exemple, sous PostGreSQL :</p><figure id="r-506108" data-claire-element-id="506109"><img id="r-506107" data-claire-element-id="506107" src="medias/uploads.siteduzero.com_files_10001_11000_10134.png" alt="Image utilisateur"/></figure><p id="r-506110" data-claire-element-id="506110">MySQL ne suit pas la norme et crée une autre fonction : CONCAT.</p><p id="r-506111" data-claire-element-id="506111">L'opérateur || n'existe tout simplement pas en MySQL, enfin si il existe, mais il ne sert pas du tout à concaténer :p .</p><h6 id="r-utilisation-65" data-claire-element-id="506115">Utilisation</h6><p id="r-506113" data-claire-element-id="506113">Imaginez que vous avez créé un forum où on peut entrer son nom et son prénom. Vous avez stocké ces données dans deux champs distincts. Dans un tableau HTML, vous n'allez tout de même pas écrire le nom et le prénom dans deux colonnes différentes :p . Donc vous utilisez CONCAT.</p><p id="r-506114" data-claire-element-id="506114">CONCAT_WS est moins connu mais parfois très utile ! Il permet de concaténer des chaînes mais d'insérer entre chaque chaîne des caractères. On en reparlera dans le chapitre sur les variables utilisateur :) .</p><h5 id="r-left-right-substring" data-claire-element-id="506132">LEFT / RIGHT / SUBSTRING</h5><h6 id="r-exemple-153" data-claire-element-id="506121">Exemple</h6><pre id="r-506117" data-claire-element-id="506117"><code data-claire-semantic="sql">SELECT LEFT('bonjour', 3) AS gauche3, RIGHT('bonjour', 1) AS droite1, SUBSTRING('Bonjour' FROM 2 FOR 3) AS souschaine23;</code></pre><figure id="r-506119" data-claire-element-id="506120"><img id="r-506118" data-claire-element-id="506118" src="medias/uploads.siteduzero.com_files_10001_11000_10136.png" alt="Image utilisateur"/></figure><h6 id="r-effets-5" data-claire-element-id="506123">Effets</h6><p id="r-506122" data-claire-element-id="506122"><strong>LEFT('chaine', n)</strong> prend n caractères de 'chaine' en partant de la gauche.<br/><strong>RIGHT('chaine', n)</strong> prend n caractères de 'chaine' en partant de la droite.<br/><strong>SUBSTRING('chaine' FROM m FOR n)</strong> prend n caractères de 'chaine' en partant du caractère m.</p><h6 id="r-utilisations-2" data-claire-element-id="506131">Utilisations</h6><p id="r-506124" data-claire-element-id="506124">Vous vous souvenez de ce qu'on a dit avec UPPER et LOWER à propos du formatage de nom / prénom ? Eh bien maintenant vous savez le faire :p :) .</p><p id="r-506125" data-claire-element-id="506125">Essayez de trouver la requête vous-même, puis regardez la solution ;) .<br/> Note : les données sont dans deux champs différents, rassemblez-les en un seul histoire d'augmenter un (tout petit) peu la difficulté :diable: . Résultat à obtenir : NOM Prénom à partir de Nom prenoM :) .</p><p id="r-506126" data-claire-element-id="506126"></p><div id="r-506130" data-claire-element-id="506130"><div id="r-506128" data-claire-element-id="506129"><img id="r-506129" data-claire-element-id="506128" src="medias/uploads.siteduzero.com_files_10001_11000_10137.png" alt="Image utilisateur"/><pre id="r-506127" data-claire-element-id="506127"><code data-claire-semantic="sql">SELECT CONCAT(UPPER('nom'), ' ', UPPER(LEFT('prenoM', 1)), LOWER(SUBSTRING('prenoM' FROM 2)));</code></pre></div></div><h5 id="r-quelques-fonctions-mathematiques-3" data-claire-element-id="506214">Quelques fonctions mathématiques...</h5><p id="r-506133" data-claire-element-id="506133">Les fonctions mathématiques s'utilisent pour faire des mathématiques, qui sont des outils universels et utilisables presque partout. Inutile de vous faire une liste de toutes les possibilités qu'elles offrent. Voici un tableau assez éloquent selon moi :</p><table id="r-506213" data-claire-element-id="506213"><thead id="r-506141" data-claire-element-id="506141"><tr id="r-506140" data-claire-element-id="506140"><th id="r-506135" data-claire-element-id="506135"><p id="r-506134" data-claire-element-id="506134">Fonction</p></th><th id="r-506137" data-claire-element-id="506137"><p id="r-506136" data-claire-element-id="506136">Description</p></th><th id="r-506139" data-claire-element-id="506139"><p id="r-506138" data-claire-element-id="506138">Résultat</p></th></tr></thead><tbody id="r-506212" data-claire-element-id="506212"><tr id="r-506148" data-claire-element-id="506148"><td id="r-506143" data-claire-element-id="506143"><p id="r-506142" data-claire-element-id="506142">CEIL(2.318)</p></td><td id="r-506145" data-claire-element-id="506145"><p id="r-506144" data-claire-element-id="506144">Arrondit à l'entier supérieur</p></td><td id="r-506147" data-claire-element-id="506147"><p id="r-506146" data-claire-element-id="506146">3</p></td></tr><tr id="r-506155" data-claire-element-id="506155"><td id="r-506150" data-claire-element-id="506150"><p id="r-506149" data-claire-element-id="506149">FLOOR(1.942)</p></td><td id="r-506152" data-claire-element-id="506152"><p id="r-506151" data-claire-element-id="506151">Arrondit à l'entier inférieur</p></td><td id="r-506154" data-claire-element-id="506154"><p id="r-506153" data-claire-element-id="506153">1</p></td></tr><tr id="r-506162" data-claire-element-id="506162"><td id="r-506157" data-claire-element-id="506157"><p id="r-506156" data-claire-element-id="506156">ROUND(1.452, 2)</p></td><td id="r-506159" data-claire-element-id="506159"><p id="r-506158" data-claire-element-id="506158">Arrondit 1.452 à 2 décimales. On peut arrondir un nombre négatif.</p></td><td id="r-506161" data-claire-element-id="506161"><p id="r-506160" data-claire-element-id="506160">1.45</p></td></tr><tr id="r-506169" data-claire-element-id="506169"><td id="r-506164" data-claire-element-id="506164"><p id="r-506163" data-claire-element-id="506163">SIN(0), COS(0), TAN(0), COT(0)</p></td><td id="r-506166" data-claire-element-id="506166"><p id="r-506165" data-claire-element-id="506165">Donne les sinus, cosinus, tangente et cotangente de 0 (angle exprimé en radians).</p></td><td id="r-506168" data-claire-element-id="506168"><p id="r-506167" data-claire-element-id="506167">0, 1, 0, NULL</p></td></tr><tr id="r-506176" data-claire-element-id="506176"><td id="r-506171" data-claire-element-id="506171"><p id="r-506170" data-claire-element-id="506170">ASIN(0), ACOS(0), ATAN(0)</p></td><td id="r-506173" data-claire-element-id="506173"><p id="r-506172" data-claire-element-id="506172">Donne les arcsinus,... de 0 (l'intervalle va de -1 à 1 pour ASIN et ACOS).</p></td><td id="r-506175" data-claire-element-id="506175"><p id="r-506174" data-claire-element-id="506174">0, 1.5707963267949, 0</p></td></tr><tr id="r-506183" data-claire-element-id="506183"><td id="r-506178" data-claire-element-id="506178"><p id="r-506177" data-claire-element-id="506177">PI()</p></td><td id="r-506180" data-claire-element-id="506180"><p id="r-506179" data-claire-element-id="506179">Donne la valeur de Pi.</p></td><td id="r-506182" data-claire-element-id="506182"><p id="r-506181" data-claire-element-id="506181">3.141593</p></td></tr><tr id="r-506190" data-claire-element-id="506190"><td id="r-506185" data-claire-element-id="506185"><p id="r-506184" data-claire-element-id="506184">DEGREES(1)</p></td><td id="r-506187" data-claire-element-id="506187"><p id="r-506186" data-claire-element-id="506186">Convertit 1 radian en degrés</p></td><td id="r-506189" data-claire-element-id="506189"><p id="r-506188" data-claire-element-id="506188">57.295779513082</p></td></tr><tr id="r-506197" data-claire-element-id="506197"><td id="r-506192" data-claire-element-id="506192"><p id="r-506191" data-claire-element-id="506191">RADIANS(60)</p></td><td id="r-506194" data-claire-element-id="506194"><p id="r-506193" data-claire-element-id="506193">Convertit 60 degrés en radians</p></td><td id="r-506196" data-claire-element-id="506196"><p id="r-506195" data-claire-element-id="506195">1.0471975511966</p></td></tr><tr id="r-506204" data-claire-element-id="506204"><td id="r-506199" data-claire-element-id="506199"><p id="r-506198" data-claire-element-id="506198">RAND()</p></td><td id="r-506201" data-claire-element-id="506201"><p id="r-506200" data-claire-element-id="506200">Renvoie un nombre aléatoire entre 0 et 1</p></td><td id="r-506203" data-claire-element-id="506203"><p id="r-506202" data-claire-element-id="506202">0.54017342584224</p></td></tr><tr id="r-506211" data-claire-element-id="506211"><td id="r-506206" data-claire-element-id="506206"><p id="r-506205" data-claire-element-id="506205">SQRT(4)</p></td><td id="r-506208" data-claire-element-id="506208"><p id="r-506207" data-claire-element-id="506207">Renvoie la racine carrée de 4</p></td><td id="r-506210" data-claire-element-id="506210"><p id="r-506209" data-claire-element-id="506209">2</p></td></tr></tbody></table><h5 id="r-now-current-time-current-date" data-claire-element-id="506224">NOW() / CURRENT_TIME() / CURRENT DATE()</h5><h6 id="r-exemple-154" data-claire-element-id="506219">Exemple</h6><pre id="r-506215" data-claire-element-id="506215"><code data-claire-semantic="sql">SELECT NOW(), CURRENT_DATE(), CURRENT_TIME();</code></pre><figure id="r-506217" data-claire-element-id="506218"><img id="r-506216" data-claire-element-id="506216" src="medias/uploads.siteduzero.com_files_10001_11000_10138.png" alt="Image utilisateur"/></figure><h6 id="r-effets-6" data-claire-element-id="506221">Effets</h6><p id="r-506220" data-claire-element-id="506220">NOW() renvoie le timestamp (pas le timestamp UNIX) actuel, CURRENT_TIME() renvoie l'heure et CURRENT_DATE() la date.</p><h6 id="r-utilisations-3" data-claire-element-id="506223">Utilisations</h6><p id="r-506222" data-claire-element-id="506222">Ces valeurs sont très utiles dans les valeurs par défaut de certains champs dans certaines tables. Par exemple, si vous faites un script de news et que vous stockez la date à laquelle a été postée la news, mettre NOW() comme valeur par défaut du champ concerné est une technique fortement conseillée :) .</p><h5 id="r-from-unixtime-unix-timestamp" data-claire-element-id="506235">FROM_UNIXTIME() / UNIX_TIMESTAMP()</h5><h6 id="r-exemple-155" data-claire-element-id="506229">Exemple</h6><pre id="r-506225" data-claire-element-id="506225"><code data-claire-semantic="sql">SELECT FROM_UNIXTIME(1144835054), UNIX_TIMESTAMP(NOW()), UNIX_TIMESTAMP();</code></pre><figure id="r-506227" data-claire-element-id="506228"><img id="r-506226" data-claire-element-id="506226" src="medias/uploads.siteduzero.com_files_10001_11000_10139.png" alt="Image utilisateur"/></figure><h6 id="r-effets-7" data-claire-element-id="506232">Effets</h6><p id="r-506230" data-claire-element-id="506230">FROM_UNIXTIME() vous permet de passer d'un timestamp UNIX (par exemple obtenu par PHP) à un timestamp SQL (mieux adapté aux bases de données). Il est déconseillé de stocker des timestamps UNIX dans une BDD, c'est pourquoi ces fonctions existent pour permettre une conversion simple et efficace.</p><p id="r-506231" data-claire-element-id="506231">UNIX_TIMESTAMP() vous permet de revenir à un format UNIX ou d'obtenir le timestamp UNIX actuel si aucune date n'est spécifiée en argument. Normalement, cette fonction ne devrait jamais être utilisée : PHP ne devrait plus avoir à traiter des variables de type DATETIME après une requête SQL ; il vaut mieux traiter les dates dans la requête SQL via DATE_FORMAT(), GET_FORMAT() et EXTRACT() (voir juste en dessous).</p><h6 id="r-utilisation-66" data-claire-element-id="506234">Utilisation</h6><p id="r-506233" data-claire-element-id="506233">Ces fonctions servent à stocker une date provenant de PHP dans une BDD au format date SQL. Elles permettent également de revenir à un timestamp UNIX, mais comme ça a déjà été dit, il vaut mieux ne plus traiter de dates du côté de PHP.</p><h5 id="r-date-format-get-format-extract" data-claire-element-id="506253">DATE_FORMAT() / GET_FORMAT() / EXTRACT()</h5><h6 id="r-exemple-156" data-claire-element-id="506240">Exemple</h6><pre id="r-506236" data-claire-element-id="506236"><code data-claire-semantic="sql">SELECT DATE_FORMAT(CURRENT_DATE(), GET_FORMAT(DATE, 'EUR')) AS today,
DATE_FORMAT(NOW(), '%d.%m.%Y') AS today2,
CONCAT_WS('.', EXTRACT(DAY FROM NOW()), EXTRACT(MONTH FROM NOW()), EXTRACT(YEAR FROM NOW())) AS today3;</code></pre><figure id="r-506238" data-claire-element-id="506239"><img id="r-506237" data-claire-element-id="506237" src="medias/uploads.siteduzero.com_files_10001_11000_10140.png" alt="Image utilisateur"/></figure><h6 id="r-effets-8" data-claire-element-id="506249">Effets</h6><p id="r-506241" data-claire-element-id="506241">DATE_FORMAT() permet de formater une date selon divers formats fournis soit par vous-même (le truc bizarre avec les signes %), soit par GET_FORMAT(). Toutes les options disponibles pour ces deux options peuvent être trouvées sur cette page (je vais pas copier la doc non plus ^^ :p ) :</p><ul id="r-506248" data-claire-element-id="506248"><li id="r-506243" data-claire-element-id="506243"><p id="r-506242" data-claire-element-id="506242"><a href="http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#id2683872">DATE_FORMAT</a></p></li><li id="r-506245" data-claire-element-id="506245"><p id="r-506244" data-claire-element-id="506244"><a href="http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#id2685320">GET_FORMAT</a></p></li><li id="r-506247" data-claire-element-id="506247"><p id="r-506246" data-claire-element-id="506246"><a href="http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#id2684975">GET_FORMAT</a></p></li></ul><h6 id="r-utilisation-67" data-claire-element-id="506252">Utilisation</h6><p id="r-506250" data-claire-element-id="506250">Ces fonctions sont utilisées pour rendre des dates au format français, c'est très pratique et ça permet de ne pas devoir intervenir du côté PHP. A préférer aux fonctions UNIX (et donc au traitement du côté PHP).</p><p id="r-506251" data-claire-element-id="506251">Et voilà, bien sûr, il existe beaucoup plus de fonctions dans MySQL, mais je crois vous avoir donné les principales, et en tout cas les plus utiles ;) :) .</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
<span class="arrow"></span>
<span class="next">Quelques bases...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
<span class="next">Les fonctions utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesfonctionsutilisateur"></a><h2>Les fonctions utilisateur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
<span class="arrow"></span>
<span class="next">Les fonctions MySQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">
<span class="next">Les variables utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fonctions-utilisateur" data-claire-element-id="506273">Les fonctions utilisateur</h4><p id="r-506255" data-claire-element-id="506255">Saviez-vous que, en plus des fonctions préexistantes fournies par MySQL, vous pouviez créer vos propres fonctions à partir de MySQL 5 ?</p><p id="r-506256" data-claire-element-id="506256">Dans cette partie, je ne vais pas vous expliquer comment créer vos propres fonctions, on n'a pas encore le niveau, mais je voulais juste vous dire que ça existait, et vous donner un petit exemple :p :) .</p><p id="r-506257" data-claire-element-id="506257">Les fonctions utilisateur ont des utilités multiples, de plus, elles peuvent retourner des valeurs qui pourraient être utilisées directement dans une requête. Une seule contrainte : l'appel de la fonction, admettons que vous ayez créé une fonction nommée 'f_format_nom_prenom' qui prend deux arguments (nom et prenom), vous ne pourriez lancer une requête de ce style (ça ne marcherait pas) :</p><pre id="r-506258" data-claire-element-id="506258"><code data-claire-semantic="sql">f_format_nom_prenom('pijcke', 'fabiaN');</code></pre><p id="r-506259" data-claire-element-id="506259">Le SELECT est <strong>obligatoire</strong> ! Voici ce qu'il aurait fallu faire :</p><pre id="r-506260" data-claire-element-id="506260"><code data-claire-semantic="sql">SELECT f_format_nom_prenom('pijcke', 'fabiaN');</code></pre><p id="r-506261" data-claire-element-id="506261">Encore une fois, la clause FROM est absente, pourtant dans la fonction, il peut très bien y avoir des SELECT sur des tables, mais on n'en a pas besoin dans la requête qui appelle la fonction :) .</p><p id="r-506262" data-claire-element-id="506262">Juste pour vous montrer à quoi ça ressemble, voici comment on aurait pu coder la fonction f_format_nom_prenom :</p><pre id="r-506263" data-claire-element-id="506263"><code data-claire-semantic="sql">CREATE FUNCTION
        f_format_nom_prenom ( nom VARCHAR(25), prenom VARCHAR(25) )
        RETURNS VARCHAR(50) LANGUAGE SQL READS SQL DATA
RETURN CONCAT(UPPER(nom), ' ', UPPER(LEFT(prenom, 1)), LOWER(SUBSTRING(prenom FROM 2)));</code></pre><p id="r-506264" data-claire-element-id="506264">Bien sûr, une fonction peut contenir beaucoup plus de lignes, on ajoute alors les mots-clefs BEGIN et END, mais on verra tout ça plus tard...</p><p id="r-506265" data-claire-element-id="506265">Voici comment on utilise cette fonction :</p><pre id="r-506266" data-claire-element-id="506266"><code data-claire-semantic="sql">SELECT f_format_nom_prenom('pijcke', 'fabian') AS shepard;</code></pre><figure id="r-506268" data-claire-element-id="506269"><img id="r-506267" data-claire-element-id="506267" src="medias/uploads.siteduzero.com_files_10001_11000_10173.png" alt="Image utilisateur"/></figure><p id="r-506270" data-claire-element-id="506270">Pas si mal pour 4 petites lignes de code ^^ :p .</p><p id="r-506271" data-claire-element-id="506271">C'était pas trop dur ? :p</p><p id="r-506272" data-claire-element-id="506272">Bon comme je vous l'avais dit, ce chapitre est doté d'un pouvoir assez... soporifique, j'espère au moins que vous avez eu 20 / 20 au Q.C.M. ! :ange:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
<span class="arrow"></span>
<span class="next">Les fonctions MySQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">
<span class="next">Les variables utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesvariablesutilisateur"></a><h2>Les variables utilisateur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
<span class="arrow"></span>
<span class="next">Les fonctions utilisateur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
<span class="next">Variables utilisateur ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-506275" data-claire-element-id="506275">Voici un chapitre qui devrait en intéresser plus d'un !</p><p id="r-506276" data-claire-element-id="506276">Ce chapitre vous permettra de faire plein de trucs géniaux, de plus, très peu savent ce que sont les variables utilisateur, donc profitez en : même M@teo ne savait pas ce que c'était avant de lire ce tuto :D :p (pour ceux qui voudraient savoir comment moi je l'ai appris, dites-vous simplement que je me suis farci toute la doc ^^ ).</p><p id="r-506277" data-claire-element-id="506277">Bon amusement !</p>
</div><a name="Variablesutilisateur"></a><h2>Variables utilisateur ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">
<span class="arrow"></span>
<span class="next">Les variables utilisateur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
<span class="next">Déclarer et utiliser une variable</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-variables-utilisateur-1" data-claire-element-id="506291">Variables utilisateur ?</h4><p id="r-506278" data-claire-element-id="506278">Vous vous demandez sans doute ce que c'est :p .</p><p id="r-506279" data-claire-element-id="506279">En fait il s'agit simplement de variables, exactement comme dans PHP, à quelques différences près :</p><ul id="r-506290" data-claire-element-id="506290"><li id="r-506281" data-claire-element-id="506281"><p id="r-506280" data-claire-element-id="506280">Une variable commence par @ et est composée de caractères alphanumériques et de tirets bas &quot;_&quot; (on peut également utiliser $ et . mais je vous déconseille d'utiliser ces deux signes car ils créent des confusions).</p></li><li id="r-506283" data-claire-element-id="506283"><p id="r-506282" data-claire-element-id="506282">Les variables ne doivent pas être déclarées : elles valent NULL par défaut.</p></li><li id="r-506285" data-claire-element-id="506285"><p id="r-506284" data-claire-element-id="506284">Les variables peuvent être définies grâce à SET ou à l'aide de l'opérateur :=</p></li><li id="r-506287" data-claire-element-id="506287"><p id="r-506286" data-claire-element-id="506286">Une variable peut contenir un entier, un réel ou une chaîne de caractères.</p></li><li id="r-506289" data-claire-element-id="506289"><p id="r-506288" data-claire-element-id="506288">Toute variable est automatiquement fermée à la fin d'une session.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">
<span class="arrow"></span>
<span class="next">Les variables utilisateur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
<span class="next">Déclarer et utiliser une variable</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Dclareretutiliserunevariable"></a><h2>Déclarer et utiliser une variable</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
<span class="arrow"></span>
<span class="next">Variables utilisateur ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
<span class="next">Mini-TP : un classement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-declarer-et-utiliser-une-variable" data-claire-element-id="506332">Déclarer et utiliser une variable</h4><p id="r-506292" data-claire-element-id="506292">Il y a plusieurs façons de définir une variable, il n'y en a pas une &quot;meilleure&quot; que l'autre, on utilise l'une dans certains cas, et l'autre dans d'autres.</p><h5 id="r-declarer-une-variable-avec-set" data-claire-element-id="506301">Déclarer une variable avec SET</h5><p id="r-506293" data-claire-element-id="506293">SET permet de déclarer une variable. Par exemple :</p><pre id="r-506294" data-claire-element-id="506294"><code data-claire-semantic="sql">SET @une_variable = 1;</code></pre><p id="r-506295" data-claire-element-id="506295">On peut également utiliser une requête comme valeur de cette variable (en fait ce qu'on va faire s'appelle une sous-requête, mais on apprendra ça un peu plus tard :) ).</p><p id="r-506296" data-claire-element-id="506296">Ne vous préoccupez pas trop de ce code, essayez juste de le comprendre, nous apprendrons plus tard la signification de chacunes de ces lignes.</p><pre id="r-506297" data-claire-element-id="506297"><code data-claire-semantic="sql">CREATE DATABASE tests;
USE tests;
CREATE TABLE test ( a int );
INSERT INTO test VALUES (1), (2), (3), (4), (6), (9), (19), (34), (72);

SET @a := ( SELECT COUNT(*) FROM test ); -- Définition d'une variable grâce à une sous-requête</code></pre><figure id="r-506299" data-claire-element-id="506300"><img id="r-506298" data-claire-element-id="506298" src="medias/uploads.siteduzero.com_files_10001_11000_10260.png" alt="Image utilisateur"/></figure><h5 id="r-selectionner-une-variable-avec-select" data-claire-element-id="506316">Sélectionner une variable avec SELECT</h5><p id="r-506302" data-claire-element-id="506302">Pour sélectionner une variable, rien de plus simple, il suffit de faire :</p><pre id="r-506303" data-claire-element-id="506303"><code data-claire-semantic="sql">SELECT @mavariable;</code></pre><p id="r-506304" data-claire-element-id="506304">Nous venons de définir deux variables : @une_variable et @a, regardons maintenant ce qu'elles contiennent ...</p><pre id="r-506305" data-claire-element-id="506305"><code data-claire-semantic="sql">SELECT @une_variable, @a;</code></pre><figure id="r-506307" data-claire-element-id="506308"><img id="r-506306" data-claire-element-id="506306" src="medias/uploads.siteduzero.com_files_10001_11000_10261.png" alt="Image utilisateur"/></figure><p id="r-506309" data-claire-element-id="506309">Mais que vaut une variable non définie, par exemple @aetuo (pour ceux qui se demandent d'où ça vient, c'est azertyuiop en tirant une lettre sur deux :D ) :</p><pre id="r-506310" data-claire-element-id="506310"><code data-claire-semantic="sql">SELECT @aetuo;</code></pre><figure id="r-506312" data-claire-element-id="506313"><img id="r-506311" data-claire-element-id="506311" src="medias/uploads.siteduzero.com_files_10001_11000_10262.png" alt="Image utilisateur"/></figure><p id="r-506314" data-claire-element-id="506314">Comme vous le voyez, ça ne renvoie pas d'erreur, ça ne renvoie tout simplement... rien. o_O</p><p id="r-506315" data-claire-element-id="506315">En fait une valeur est bien renvoyée : la valeur NULL, cette valeur est l'objet du prochain chapitre, donc je ne détaillerai pas plus ce phénomène ici. ;)</p><h5 id="r-re-definir-une-variable-avec-select" data-claire-element-id="506331">(re)Définir une variable avec SELECT</h5><p id="r-506317" data-claire-element-id="506317">On peut également donner une valeur à une variable grâce à SELECT (ou UPDATE ou INSERT ou DELETE mais nous ne parlerons que de SELECT, sachez juste que c'est possible).</p><p id="r-506318" data-claire-element-id="506318">On définit une variable grâce à l'opérateur := (comme en Delphi pour ceux qui connaissent). La plupart du temps, les variables sont définies la première fois avec SET puis manipulées avec SELECT, mais il n'est pas rare que des exceptions enfreignent cette règle.</p><p id="r-506319" data-claire-element-id="506319">Définissons @a à 4:</p><pre id="r-506320" data-claire-element-id="506320"><code data-claire-semantic="sql">SELECT @a := 4;</code></pre><figure id="r-506322" data-claire-element-id="506323"><img id="r-506321" data-claire-element-id="506321" src="medias/uploads.siteduzero.com_files_10001_11000_10263.png" alt="Image utilisateur"/></figure><p id="r-506324" data-claire-element-id="506324">Comme vous le voyez, SELECT renvoie directement la valeur vu que @a := 4 est considéré comme une colonne. On aurait très bien pu rajouter un AS pour redéfinir le nom de cette colonne.</p><p id="r-506325" data-claire-element-id="506325">Tiens à votre avis, est-il possible de donner à une colonne un nom contenu dans une variable ? Faisons le test :</p><pre id="r-506326" data-claire-element-id="506326"><code data-claire-semantic="sql">SET @nom = &quot;colonne&quot;;
SELECT 4 AS @nom;</code></pre><figure id="r-506328" data-claire-element-id="506329"><img id="r-506327" data-claire-element-id="506327" src="medias/uploads.siteduzero.com_files_10001_11000_10264.png" alt="Image utilisateur"/></figure><p id="r-506330" data-claire-element-id="506330">Comme vous le voyez, ça ne fonctionne malheureusement pas. C'est dommage, car ça aurait ouvert des voies pour la linéarisation de données (lignes en colonnes ou colonnes en lignes). Si toutefois quelqu'un trouve une astuce pour contourner ce problème, je lui serais fortement reconnaissant de me dire comment faire.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
<span class="arrow"></span>
<span class="next">Variables utilisateur ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
<span class="next">Mini-TP : un classement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Mini-TPunclassement"></a><h2>Mini-TP : un classement</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
<span class="arrow"></span>
<span class="next">Déclarer et utiliser une variable</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
<span class="next">Un autre exemple : sélection au hasard</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-mini-tp-un-classement" data-claire-element-id="506358">Mini-TP : un classement</h4><h5 id="r-le-probleme-17" data-claire-element-id="506348">Le problème ...</h5><p id="r-506333" data-claire-element-id="506333">Enormément de choses sont possibles grâce aux variables utilisateur ! Cependant la plupart des applications possibles demandent plus de connaissances que ce que vous êtes censé savoir. Il y a cependant une chose que vous devriez être capable de faire en cherchant un peu : un système de classement !</p><p id="r-506334" data-claire-element-id="506334">Le but ? Je vous donne une table avec des pseudos associés à des points, vous devez réussir à donner une place à chacun de ces pseudos en fonction de son nombre de points. Chaque pseudo a un nombre de points différents (pas d'égalité donc), en effet la gestion des ex-aequos rendrait l'exercice bien trop difficile pour votre niveau actuel. :p</p><p id="r-506335" data-claire-element-id="506335">Quelques indices supplémentaires :</p><ul id="r-506340" data-claire-element-id="506340"><li id="r-506337" data-claire-element-id="506337"><p id="r-506336" data-claire-element-id="506336">Pensez à ORDER BY que vous avez appris à utiliser dans le cours de M@teo.</p></li><li id="r-506339" data-claire-element-id="506339"><p id="r-506338" data-claire-element-id="506338">SET et l'opérateur := vous seront normalement nécessaires.</p></li></ul><p id="r-506341" data-claire-element-id="506341">Voici les requêtes pour la création de la table :</p><pre id="r-506342" data-claire-element-id="506342"><code data-claire-semantic="sql">CREATE TABLE joueurs ( pseudo VARCHAR(30), points INT );
INSERT INTO joueurs ( pseudo, points ) VALUES ( 'Shepard', 13854 ), ( 'Alexi', 4251 ), ( 'Janne', 11245 ), ( 'Shagrath', 1248 ), ( 'Fred', 42857 );</code></pre><p id="r-506343" data-claire-element-id="506343">Vous devez obtenir ce tableau :</p><figure id="r-506345" data-claire-element-id="506346"><img id="r-506344" data-claire-element-id="506344" src="medias/uploads.siteduzero.com_files_10001_11000_10271.png" alt="Image utilisateur"/></figure><p id="r-506347" data-claire-element-id="506347">Il ne me reste plus qu'à vous souhaiter bonne chance !</p><h5 id="r-une-solution-8" data-claire-element-id="506357">Une solution</h5><p id="r-506349" data-claire-element-id="506349">En SQL, il n'y a jamais qu'un seul moyen de faire, ce qu'il y a dans la case secrète représente donc une solution, peut-être que la vôtre est radicalement différente (ça m'étonnerait un peu quand même mais bon :p ), mais ce qui compte à ce niveau, c'est que ça <strong>fonctionne</strong> ! Le principal c'est d'avoir cherché et d'être tombé sur quelque chose de potable, si vous n'y êtes pas arrivé, ne vous inquiétez pas : c'était le premier et il y en aura sans doute d'autres. ;) :)</p><p id="r-506350" data-claire-element-id="506350">Bon, assez blablaté. ^^</p><p id="r-506351" data-claire-element-id="506351"></p><div id="r-506356" data-claire-element-id="506356"><div id="r-506354" data-claire-element-id="506355"><img id="r-506355" data-claire-element-id="506354" src="medias/uploads.siteduzero.com_files_10001_11000_10272.png" alt="Image utilisateur"/><pre id="r-506352" data-claire-element-id="506352"><code data-claire-semantic="sql">SET @place = 0;
SELECT @place := @place + 1 AS place, pseudo, points FROM joueurs ORDER BY points DESC;</code></pre><p id="r-506353" data-claire-element-id="506353">Comme vous le voyez, les requêtes ne sont pas longues du tout (ce n'est pas pour rien que je disais que c'était de votre niveau :-° ), néanmoins il fallait y penser ! Je félicite ceux qui ont trouvé, mine de rien ce n'était pas si facile !</p></div></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
<span class="arrow"></span>
<span class="next">Déclarer et utiliser une variable</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
<span class="next">Un autre exemple : sélection au hasard</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unautreexempleslectionauhasard"></a><h2>Un autre exemple : sélection au hasard</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
<span class="arrow"></span>
<span class="next">Mini-TP : un classement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">
<span class="next">Traitement des &quot;NULL&quot;s</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-un-autre-exemple-selection-au-hasard" data-claire-element-id="506421">Un autre exemple : sélection au hasard</h4><p id="r-506359" data-claire-element-id="506359">J'ai hésité à ajouter cette sous-partie à ce chapitre. En effet, elle fait appel à des notions dont vous n'avez certainement jamais entendu parler, je l'ai ajoutée quand même, dites-vous qu'il ne s'agit que d'un exemple, si vous ne comprenez pas tout à fait, ne vous inquiétez pas, on reviendra plus tard dans le cours sur tout ce qui sera montré ici. ;)</p><h5 id="r-le-probleme-18" data-claire-element-id="506367">Le problème</h5><p id="r-506360" data-claire-element-id="506360">On a une table nommée livreor (id, auteur, message) qui contient des messages contenus dans un livre d'or, on aimerait sélectionner un message au hasard. Chaque message a un identifiant unique.</p><p id="r-506361" data-claire-element-id="506361">On peut distinguer deux cas à ce stade :</p><ul id="r-506366" data-claire-element-id="506366"><li id="r-506363" data-claire-element-id="506363"><p id="r-506362" data-claire-element-id="506362">Les identifiants sont continus (1, 2, 3, 4,...). Dans ce cas il est très facile de résoudre notre problème, mais en fait il est très rare que les identifiants soient continus. La plupart du temps, des messages ont été supprimés par un administrateur (messages de test lors du développement du site, messages malvenus, etc).</p></li><li id="r-506365" data-claire-element-id="506365"><p id="r-506364" data-claire-element-id="506364">On voit donc apparaître le deuxième cas : les identifiants ne sont pas continus (2, 3, 6, 8,...) dans ce cas le problème devient plus compliqué à résoudre, et c'est là que les variables de MySQL entreront en jeu. :)</p></li></ul><h5 id="r-cas-1-les-identifiants-sont-continus" data-claire-element-id="506391">Cas 1 : les identifiants sont continus</h5><pre id="r-506368" data-claire-element-id="506368"><code data-claire-semantic="sql">CREATE TABLE livreor ( id INT AUTO_INCREMENT, auteur VARCHAR(30), message TEXT, PRIMARY KEY(id) );
INSERT INTO livreor ( auteur, message )
VALUES 
        ( 'Shepard', 'Tres bon site :p' ),
        ( 'Alexi', 'Vive Children of Bodom !' ),
        ( 'Shepard', 'Entierement d''acord, Alexi :)' ),
        ( 'Janne', 'Vive le synthe :-°' ),
        ( 'Alexi','N''importe quoi ! C''est la guitare qui est mieux :D' );</code></pre><p id="r-506369" data-claire-element-id="506369">Rien que dans ce cas-là, les variables MySQL sont déjà très utiles, je vous conseille de bien comprendre ce cas-ci car sinon vous risquez de vraiment avoir du mal pour le second... :p</p><p id="r-506370" data-claire-element-id="506370">En fait, il suffit de trouver un nombre au hasard pris entre 1 et n, n étant le nombre de messages.</p><p id="r-506371" data-claire-element-id="506371">On peut récupérer très facilement n grâce à la requête suivante :</p><pre id="r-506372" data-claire-element-id="506372"><code data-claire-semantic="sql">SELECT COUNT(*) FROM livreor;</code></pre><p id="r-506373" data-claire-element-id="506373">Ensuite on va utiliser la fonction RAND() pour prendre un nombre au hasard entre 0 et n - 0.000(...)01 :</p><pre id="r-506374" data-claire-element-id="506374"><code data-claire-semantic="sql">SELECT RAND() * COUNT(*) FROM livreor;</code></pre><p id="r-506375" data-claire-element-id="506375">Utilisons maintenant la fonction FLOOR pour arrondir à l'entier inférieur. On aura alors un nombre entre 0 et n - 1. Il faudra donc ajouter un au résultat pour avoir un nombre entre 1 et n :</p><pre id="r-506376" data-claire-element-id="506376"><code data-claire-semantic="sql">SELECT FLOOR( RAND() * COUNT(*) ) + 1 FROM livreor;</code></pre><p id="r-506377" data-claire-element-id="506377">Il suffit maintenant de prendre le message ayant pour identifiant le résultat de cette requête :</p><pre id="r-506378" data-claire-element-id="506378"><code data-claire-semantic="sql">SELECT auteur, message FROM livreor WHERE id = FLOOR( RAND() * ( SELECT COUNT(*) FROM livreor ) ) + 1;</code></pre><p id="r-506379" data-claire-element-id="506379">Oui mais non ! Il y a un petit problème... RAND() est réévalué à chaque ligne, ce qui fait qu'avec cette requête, on peut avoir des bizarreries de ce genre là :</p><figure id="r-506381" data-claire-element-id="506382"><img id="r-506380" data-claire-element-id="506380" src="medias/uploads.siteduzero.com_files_10001_11000_10273.png" alt="Image utilisateur"/></figure><p id="r-506383" data-claire-element-id="506383">Comme vous le voyez, ça ne marche pas toujours, des fois on a 3 lignes, et des fois on n'en a pas du tout !</p><p id="r-506384" data-claire-element-id="506384">Pour y remédier, il suffit de stocker RAND() quelque part... Où ça ? Dans une variable pardi ! Sauf qu'au lieu de juste stocker le RAND(), on va y mettre tout le FLOOR(...) + 1. Ainsi on aura un nombre entier (plus rapide à stocker) et la requête sera simplifiée :</p><pre id="r-506385" data-claire-element-id="506385"><code data-claire-semantic="sql">SET @id_hasard = FLOOR( RAND() * ( SELECT COUNT(*) FROM livreor ) ) + 1;
SELECT auteur, message FROM livreor WHERE id = @id_hasard;</code></pre><figure id="r-506387" data-claire-element-id="506388"><img id="r-506386" data-claire-element-id="506386" src="medias/uploads.siteduzero.com_files_10001_11000_10274.png" alt="Image utilisateur"/></figure><p id="r-506389" data-claire-element-id="506389">Bien sûr, il faut réexécuter le SET avant chaque SELECT, sinon @id_hasard garde la même valeur et on obtient toujours le même message.</p><p id="r-506390" data-claire-element-id="506390">Et le tour est joué ! (J'espère que jusque là vous avez suivi parce que les choses vont se compliquer à partir de maintenant :p ).</p><h5 id="r-cas-2-les-identifiants-sont-discontinus" data-claire-element-id="506420">Cas 2 : les identifiants sont discontinus</h5><pre id="r-506392" data-claire-element-id="506392"><code data-claire-semantic="sql">DROP TABLE livreor;
CREATE TABLE livreor ( id INT AUTO_INCREMENT, auteur VARCHAR(30), message TEXT, PRIMARY KEY(id) );
INSERT INTO livreor ( id, auteur, message )
VALUES 
        ( 2, 'Shepard', 'Tres bon site :p' ),
        ( 3, 'Alexi', 'Vive Children of Bodom !' ),
        ( 6, 'Shepard', 'Entierement d''acord, Alexi :)' ),
        ( 9, 'Janne', 'Vive le synthe :-°' ),
        ( 12, 'Alexi','N''importe quoi ! C''est la guitare qui est mieux :D' );</code></pre><p id="r-506393" data-claire-element-id="506393">Là ça se complique un peu : si on prend un nombre au hasard entre 1 et le nombre de lignes, toutes les dernières lignes ne seront pas prises en compte et les &quot;trous&quot; pourraient être sélectionnés, donc ça ne va vraiment pas.</p><p id="r-506394" data-claire-element-id="506394">Une autre solution serait de prendre un nombre au hasard entre 1 et le dernier id de la table, puis de prendre l'id en dessous de ce nombre qui se rapproche le plus de ce nombre, mais je n'aime pas cette technique, tout d'abord parce que s'il y a des &quot;gros&quot; trous (suppression de 2000 messages d'affilée par exemple), le message juste avant ce trou reviendra plus souvent que les autres, et ensuite parce que cette méthode est plus compliquée que celle que je vais vous montrer. :p</p><p id="r-506395" data-claire-element-id="506395">Il y a une astuce : créer une table temporaire (donc qui ne dure que le temps de la session) avec une colonne contenant des chiffres continus (donc on retombe dans le premier cas), plus une autre colonne contenant les &quot;vrais&quot; id.</p><p id="r-506396" data-claire-element-id="506396">Pour créer cette table, rien de plus simple : on se base sur le principe du classement, sauf qu'il n'est plus nécessaire de préciser le ORDER BY :</p><pre id="r-506397" data-claire-element-id="506397"><code data-claire-semantic="sql">SET @place = 0;
CREATE TEMPORARY TABLE temp_livreor AS SELECT @place := @place + 1 AS place, id FROM livreor;</code></pre><p id="r-506398" data-claire-element-id="506398">Histoire de nous assurer que tout fonctionne bien ...</p><pre id="r-506399" data-claire-element-id="506399"><code data-claire-semantic="sql">SELECT * FROM temp_livreor;</code></pre><figure id="r-506401" data-claire-element-id="506402"><img id="r-506400" data-claire-element-id="506400" src="medias/uploads.siteduzero.com_files_10001_11000_10275.png" alt="Image utilisateur"/></figure><p id="r-506403" data-claire-element-id="506403">Remarquez qu'en général, je n'utilise jamais l'étoile qui permet de sélectionner tous les champs d'un coup, si je le fait ici, c'est parce que je veux m'assurer qu'il n'y ait rien en trop. :)</p><p id="r-506404" data-claire-element-id="506404">A partir de maintenant c'est facile : il suffit d'utiliser la même technique que tout à l'heure pour choisir une entrée de la table temp_livreor, puis de prendre le &quot;vrai&quot; id qui lui correspond, et d'afficher les infos correspondant à cet id. :)</p><p id="r-506405" data-claire-element-id="506405">Par exemple :</p><pre id="r-506406" data-claire-element-id="506406"><code data-claire-semantic="sql">SET @place_hasard = ( SELECT FLOOR( RAND() * ( SELECT COUNT(*) FROM temp_livreor ) ) + 1 );
SET @id_hasard = ( SELECT id FROM temp_livreor WHERE place = @place_hasard );
SELECT auteur, message FROM livreor WHERE id = @id_hasard;</code></pre><p id="r-506407" data-claire-element-id="506407">Ou encore :</p><pre id="r-506408" data-claire-element-id="506408"><code data-claire-semantic="sql">SET @place_hasard = ( SELECT FLOOR( RAND() * ( SELECT COUNT(*) FROM temp_livreor ) ) + 1 );
SELECT auteur, message FROM livreor WHERE id = ( SELECT id FROM temp_livreor WHERE place = @place_hasard );</code></pre><p id="r-506409" data-claire-element-id="506409">Il est également possible de le faire avec une jointure :</p><pre id="r-506410" data-claire-element-id="506410"><code data-claire-semantic="sql">SET @place_hasard = ( SELECT FLOOR( RAND() * ( SELECT COUNT(*) FROM temp_livreor ) ) + 1 );
SELECT auteur, message FROM livreor NATURAL JOIN temp_livreor WHERE place = @place_hasard;</code></pre><p id="r-506411" data-claire-element-id="506411">La meilleure solution est la dernière, mais les deux autres sont évidemment tout à fait valables :) (ne vous inquiétez pas si vous ne comprenez pas les deux dernières requêtes : c'est normal ^^ ).</p><p id="r-506412" data-claire-element-id="506412">Les trois techniques fonctionnent et renvoient le même message si on ne modifie pas @place_hasard (évidemment). Voici ce que ça donne dans la console :</p><figure id="r-506414" data-claire-element-id="506415"><img id="r-506413" data-claire-element-id="506413" src="medias/uploads.siteduzero.com_files_10001_11000_10276.png" alt="Image utilisateur"/></figure><p id="r-506416" data-claire-element-id="506416">Voilà, j'admet que cette sous-partie était ardue et impossible à comprendre en entier si vous n'aviez lu que le cours de M@teo. Je ne peux que vous conseiller de venir le relire une fois que vous saurez ce que sont les jointures, les sous-requêtes et les tables temporaires. ;) :)</p><p id="r-506417" data-claire-element-id="506417">Alors ? C'était sympa comme matière non ?</p><p id="r-506418" data-claire-element-id="506418">Bien qu'on n'ait vu que quelques utilisations de ces variables, il faut bien vous rendre compte que les possibilités sont <strong>énormes</strong> ! MySQL est l'un des seuls SGBDR à inclure ce type de fonctionnalité, donc faites attention si vous comptez changer de moteur par la suite : vos requêtes ne seront pas compatibles !</p><p id="r-506419" data-claire-element-id="506419">Pour moi, les variables utilisateur sont l'une des choses qu'il manque à la norme SQL, bien sûr il faudrait les améliorer un peu (pouvoir renommer une colonne selon la valeur d'une variable par exemple :p ), mais ce serait sans aucun doute une forte avancée pour le monde de SQL. Je trouve dommage qu'elles soient si peu utilisées, leur potentiel est sous-estimé, j'espère que bientôt, les développeurs se rendront compte des fonctionnalités qu'elles permettent !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
<span class="arrow"></span>
<span class="next">Mini-TP : un classement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">
<span class="next">Traitement des &quot;NULL&quot;s</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TraitementdesquotNULLquots"></a><h2>Traitement des &quot;NULL&quot;s</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
<span class="arrow"></span>
<span class="next">Un autre exemple : sélection au hasard</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
<span class="next">Spécificités des valeurs nulles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-506423" data-claire-element-id="506423">Voici un autre chapitre intéressant : le traitement des valeurs nulles, autrement dit le traitement d'une absence de valeurs !</p><p id="r-506424" data-claire-element-id="506424">Encore une fois, peu de développeurs se servent de cette fonctionnalité ! Pourtant les valeurs nulles sont pratiquement indispensables dans une base de données. L'exemple le plus flagrant est un profil dans un espace membre : la plupart des codeurs mettent une chaîne vide ( '' ) pour indiquer qu'il n'y a pas de valeur, alors qu'il serait plus simple de mettre un simple NULL, qui peut être traité beaucoup plus facilement par la suite dans les requêtes SELECT grâce aux fonctions que nous verrons dans ce chapitre. :)</p><p id="r-506425" data-claire-element-id="506425">Je vous laisse lire tout ça, bonne lecture !</p>
</div><a name="Spcificitsdesvaleursnulles"></a><h2>Spécificités des valeurs nulles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">
<span class="arrow"></span>
<span class="next">Traitement des &quot;NULL&quot;s</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
<span class="next">Les fonctions de traitement des valeurs nulles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-specificites-des-valeurs-nulles" data-claire-element-id="506449">Spécificités des valeurs nulles</h4><p id="r-506426" data-claire-element-id="506426">La valeur NULL n'est pas une valeur comme les autres. En général, on la considère comme une valeur à problèmes, mais en fait elle est très pratique à partir du moment où on sait l'utiliser.</p><aside id="r-506428" data-claire-element-id="506428" data-claire-semantic="information"><p id="r-506427" data-claire-element-id="506427">Notamment, ceux qui utilisent les jointures se plaignent qu'on ne peut récupérer les lignes où la réfèrence est nulle, c'est simplement parce qu'ils utilisent LEFT JOIN au lieu de RIGHT JOIN, mais ça c'est l'objet d'un autre chapitre. ^^</p></aside><p id="r-506429" data-claire-element-id="506429">Les valeurs NULL, comme je vous le disais, sont spéciales. Par exemple, on ne peut pas les comparer. Pour comprendre ce principe, créons une table exemple :</p><pre id="r-506430" data-claire-element-id="506430"><code data-claire-semantic="sql">CREATE TABLE ex_null ( id INT AUTO_INCREMENT, points INT DEFAULT NULL, PRIMARY KEY ( id ) );
INSERT INTO ex_null ( points ) VALUES ( 135 ), ( 3484 ), ( DEFAULT ), ( DEFAULT ), ( 0 ), ( DEFAULT );</code></pre><p id="r-506431" data-claire-element-id="506431">Dans cette table, les NULL représentent ceux qui n'ont jamais gagné ni perdu de points. Les 0 représentent ceux qui ont déjà gagné des points, mais les ont reperdus.</p><p id="r-506432" data-claire-element-id="506432">Un autre façon de faire cette table aurait été d'ajouter une colonne &quot;a_deja_joue&quot;, mais elle est totalement inutile dans le sens où un NULL nous permet d'avoir cette information plus facilement sans colonne supplémentaire.</p><p id="r-506433" data-claire-element-id="506433">Essayons de récupérer les lignes de ceux qui n'ont jamais joué:</p><pre id="r-506434" data-claire-element-id="506434"><code data-claire-semantic="sql">SELECT id, points FROM ex_null WHERE points = NULL;</code></pre><figure id="r-506436" data-claire-element-id="506437"><img id="r-506435" data-claire-element-id="506435" src="medias/uploads.siteduzero.com_files_10001_11000_10280.png" alt="Image utilisateur"/></figure><div id="r-506439" data-claire-element-id="506439" data-claire-semantic="question"><p id="r-506438" data-claire-element-id="506438">Euh... o_O MySQL est devenu bigleu ?? :waw:</p></div><p id="r-506440" data-claire-element-id="506440">Non, c'est juste que les NULL ne peuvent pas être comparés à l'aide du signe &quot;=&quot;. Et encore, MySQL est gentil : tout autre SGBDR aurait renvoyé une erreur (ou le devrait, tout comme MySQL).</p><p id="r-506441" data-claire-element-id="506441">Pour savoir si une valeur est nulle, il faut utiliser l'opérateur IS NULL :</p><pre id="r-506442" data-claire-element-id="506442"><code data-claire-semantic="sql">SELECT id, points FROM ex_null WHERE points IS NULL;</code></pre><figure id="r-506444" data-claire-element-id="506445"><img id="r-506443" data-claire-element-id="506443" src="medias/uploads.siteduzero.com_files_10001_11000_10281.png" alt="Image utilisateur"/></figure><p id="r-506446" data-claire-element-id="506446">C'est déjà mieux, non ? :p :)</p><aside id="r-506448" data-claire-element-id="506448" data-claire-semantic="warning"><p id="r-506447" data-claire-element-id="506447">Attention également aux opérations comprenant des valeurs nulles : 1 + NULL = NULL en SQL !<br/> A noter les opérations avec OR : x OR NULL = x <strong>SAUF SI</strong> x = NULL ou x = 0 !</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">
<span class="arrow"></span>
<span class="next">Traitement des &quot;NULL&quot;s</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
<span class="next">Les fonctions de traitement des valeurs nulles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesfonctionsdetraitementdesvaleursnulles"></a><h2>Les fonctions de traitement des valeurs nulles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
<span class="arrow"></span>
<span class="next">Spécificités des valeurs nulles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
<span class="next">Le système de classement en une seule requête !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fonctions-de-traitement-des-valeurs-nulles" data-claire-element-id="506498">Les fonctions de traitement des valeurs nulles</h4><h5 id="r-coalesce" data-claire-element-id="506464">COALESCE</h5><p id="r-506450" data-claire-element-id="506450">Fonction très pratique : COALESCE prend une liste d'arguments aussi longue que l'on veut (pas trop quand même :p ), et renvoie la première valeur non nulle passée en argument :</p><pre id="r-506451" data-claire-element-id="506451"><code data-claire-semantic="sql">SELECT COALESCE(NULL, 0);</code></pre><p id="r-506452" data-claire-element-id="506452">Renvoie 0.</p><p id="r-506453" data-claire-element-id="506453">Donc dans notre table d'essai, pour renvoyer 0 au lieu de NULL, on pourrait faire comme ça :</p><pre id="r-506454" data-claire-element-id="506454"><code data-claire-semantic="sql">SELECT id, COALESCE(points, 0) FROM ex_null;</code></pre><figure id="r-506456" data-claire-element-id="506457"><img id="r-506455" data-claire-element-id="506455" src="medias/uploads.siteduzero.com_files_10001_11000_10282.png" alt="Image utilisateur"/></figure><p id="r-506458" data-claire-element-id="506458">Un exemple de la praticité de la fonction COALESCE :</p><pre id="r-506459" data-claire-element-id="506459"><code data-claire-semantic="sql">SELECT id, COALESCE(points, 'N''a jamais joue') AS points FROM ex_null;</code></pre><figure id="r-506461" data-claire-element-id="506462"><img id="r-506460" data-claire-element-id="506460" src="medias/uploads.siteduzero.com_files_6001_7000_6046.png" alt="Image utilisateur"/></figure><p id="r-506463" data-claire-element-id="506463">Essayez donc d'obtenir un tel résultat si facilement avec une colonne &quot;a_deja_joue&quot; supplémentaire. ;) :)</p><h5 id="r-ifnull" data-claire-element-id="506497">IFNULL</h5><p id="r-506465" data-claire-element-id="506465">IFNULL est une fonction assez... spéciale et plutôt compliquée à comprendre au début, mais rassurez-vous : on s'y fait tous. :p :)</p><p id="r-506466" data-claire-element-id="506466">IFNULL prend deux paramètres.</p><p id="r-506467" data-claire-element-id="506467">Si le premier paramètre est NULL, alors le deuxième paramètre est renvoyé.<br/> Si le premier paramètre n'est pas NULL, alors c'est lui-même qui est renvoyé.</p><p id="r-506468" data-claire-element-id="506468">Compris ? :p</p><p id="r-506469" data-claire-element-id="506469">Relisez ça une paire de fois, et passez à la suite une fois que vous serez sûr d'avoir compris. :)</p><p id="r-506470" data-claire-element-id="506470">On va simuler une colonne a_deja_joue qui vaudra 0 si les points sont égaux à NULL, sinon 1.</p><p id="r-506471" data-claire-element-id="506471">Pour cela, on va commencer par utiliser IFNULL(points, 0)</p><pre id="r-506472" data-claire-element-id="506472"><code data-claire-semantic="sql">SELECT id, IFNULL(points, 0) AS a_deja_joue FROM ex_null;</code></pre><figure id="r-506474" data-claire-element-id="506475"><img id="r-506473" data-claire-element-id="506473" src="medias/uploads.siteduzero.com_files_10001_11000_10283.png" alt="Image utilisateur"/></figure><p id="r-506476" data-claire-element-id="506476">Ainsi, si points est NULL, on aura 0, sinon on aura [points].</p><p id="r-506477" data-claire-element-id="506477">Pour le 0, c'est bon, mais nous, on veut 1, on ne veut pas points, car si points vaut 0 (comme l'enregistrement ayant pour id 5), notre système ne fonctionnera pas. On va donc diviser le résultat du IFNULL par COALESCE(points, 1). Ainsi on aura soit 1 (points &lt;&gt; 0 =&gt; points/points = 1), soit 0 (points = NULL =&gt; 0 / 1 = 0), soit NULL (points = 0 =&gt; 0 / 0 = NULL en SQL).</p><pre id="r-506478" data-claire-element-id="506478"><code data-claire-semantic="sql">SELECT id, IFNULL(points, 0) / COALESCE(points, 1) AS a_deja_joue FROM ex_null;</code></pre><figure id="r-506480" data-claire-element-id="506481"><img id="r-506479" data-claire-element-id="506479" src="medias/uploads.siteduzero.com_files_6001_7000_6047.png" alt="Image utilisateur"/></figure><p id="r-506482" data-claire-element-id="506482">Ici, on peut améliorer un truc : comme vous le voyez, on obtient 1.0000 et 0.0000, pas super joli, pour obtenir 1 et 0 il suffit d'utiliser l'opérateur DIV vu au second chapitre. :)</p><pre id="r-506483" data-claire-element-id="506483"><code data-claire-semantic="sql">SELECT id, IFNULL(points, 0) DIV COALESCE(points, 1) AS a_deja_joue FROM ex_null;</code></pre><figure id="r-506485" data-claire-element-id="506486"><img id="r-506484" data-claire-element-id="506484" src="medias/uploads.siteduzero.com_files_10001_11000_10284.png" alt="Image utilisateur"/></figure><p id="r-506487" data-claire-element-id="506487">Il reste un tout petit problème : les NULL (points = 0) doivent être transformés en 1. Pour cela, évidemment, rien de plus simple, il suffit d'utiliser, une fois de plus, la fonction COALESCE qui englobera cette fois toute la division :</p><pre id="r-506488" data-claire-element-id="506488"><code data-claire-semantic="sql">SELECT id, points, COALESCE(IFNULL(points, 0) DIV COALESCE(points, 1), 1) AS a_deja_joue FROM ex_null;</code></pre><figure id="r-506490" data-claire-element-id="506491"><img id="r-506489" data-claire-element-id="506489" src="medias/uploads.siteduzero.com_files_10001_11000_10285.png" alt="Image utilisateur"/></figure><p id="r-506492" data-claire-element-id="506492">Assez sympa non ? Bon j'admets que ce n'était peut-être pas super super simple à comprendre, mais en y allant étape par étape, ça a du bien se passer, enfin j'espère. :)</p><aside id="r-506496" data-claire-element-id="506496" data-claire-semantic="information"><p id="r-506493" data-claire-element-id="506493">En fait, il existe une méthode <strong>beaucoup</strong> plus simple pour obtenir cela, l'inconvénient, c'est qu'elle n'est valable qu'avec MySQL. :( Je vous déconseille vraiment de l'utiliser, surtout si vous faites des calculs à base du résultat, voici cette autre requête :</p><pre id="r-506494" data-claire-element-id="506494"><code data-claire-semantic="sql">SELECT id, points IS NULL AS a_deja_joue FROM ex_null;</code></pre><p id="r-506495" data-claire-element-id="506495">Dans le prochain chapitre, nous verrons une méthode plus &quot;standard&quot; pour obtenir le même résultat, ne vous inquiétez pas : vous n'êtes pas condamné à utiliser IFNULL qui en fait n'est que très rarement utilisé et assez peu pratique... ^^</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
<span class="arrow"></span>
<span class="next">Spécificités des valeurs nulles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
<span class="next">Le système de classement en une seule requête !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesystmedeclassementenuneseulerequte"></a><h2>Le système de classement en une seule requête !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
<span class="arrow"></span>
<span class="next">Les fonctions de traitement des valeurs nulles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">
<span class="next">Les conditions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-systeme-de-classement-en-une-seule-requete" data-claire-element-id="506509">Le système de classement en une seule requête !</h4><p id="r-506499" data-claire-element-id="506499">Vous vous souvenez du système de classement vu dans le chapitre précédent ? (j'espère que oui sinon mon enseignement ne serait pas d'une grande utilité :D ). Voici les requêtes que je vous avais données :</p><pre id="r-506500" data-claire-element-id="506500"><code data-claire-semantic="sql">SET @place = 0;
SELECT @place := @place + 1 AS place, pseudo, points FROM joueurs ORDER BY points DESC;</code></pre><p id="r-506501" data-claire-element-id="506501">Et bien grâce aux fonctions que nous venons de voir, nous pouvons maintenant tout rassembler sur une seule ligne !</p><p id="r-506502" data-claire-element-id="506502">En fait, ça ne sert à strictement rien et ça ralentit un peu la requête, mais c'est toujours intéressant de le savoir car peut-être que vous serez confrontés à des cas où vous serez obligés d'utiliser la technique suivante :</p><pre id="r-506503" data-claire-element-id="506503"><code data-claire-semantic="sql">SELECT @place := COALESCE(@place, @place := 0) + 1 AS place, pseudo, points FROM joueurs ORDER BY points DESC;</code></pre><figure id="r-506505" data-claire-element-id="506506"><img id="r-506504" data-claire-element-id="506504" src="medias/uploads.siteduzero.com_files_10001_11000_10307.png" alt="Image utilisateur"/></figure><p id="r-506507" data-claire-element-id="506507">Pratique non ? On peut également vérifier facilement si une variable a déjà été déclarée grâce à la fonction IFNULL. Comme vous le constatez, les fonctions de traitement des valeurs NULL sont relativement pratiques couplées aux variables utilisateur. Elles permettent aussi de compacter les requêtes et d'éviter un CASE (on verra ça dans le prochain chapitre) ou un IF (prochain chapitre également :p ), bien que parfois, ces fonctions (particulièrement IFNULL) font tout sauf compacter la requête. :D :p</p><p id="r-506508" data-claire-element-id="506508">Voilà, j'espère que ça vous a plu et que vous vous rendez compte de l'erreur que font les développeurs qui préfèrent travailler avec des chaînes vides plutôt qu'avec des valeurs nulles puis qui doivent se farcir des IF au lieu d'un simple COALESCE ou IFNULL. :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
<span class="arrow"></span>
<span class="next">Les fonctions de traitement des valeurs nulles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">
<span class="next">Les conditions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesconditions"></a><h2>Les conditions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
<span class="arrow"></span>
<span class="next">Le système de classement en une seule requête !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
<span class="next">Des conditions en SQL ? Différences entre MySQL et la norme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-506511" data-claire-element-id="506511">Les conditions SQL ne sont pas forcément importantes pour l'optimisation mais sont extrêmement pratiques pour obtenir des données tirées d'autres données très rapidement. Elles permettent de renvoyer une valeur si une expression est vraie, ou une autre valeur si elle est fausse...</p><p id="r-506512" data-claire-element-id="506512">Enfin, je vous laisse découvrir ça, vous vous rendrez vite compte de leur utilité. ;) :)</p>
</div><a name="DesconditionsenSQLDiffrencesentreMySQLetlanorme"></a><h2>Des conditions en SQL ? Différences entre MySQL et la norme</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">
<span class="arrow"></span>
<span class="next">Les conditions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
<span class="next">Utilisation de CASE</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-conditions-en-sql-differences-entre-mysql-et-la-norme" data-claire-element-id="506528">Des conditions en SQL ? Différences entre MySQL et la norme</h4><p id="r-506513" data-claire-element-id="506513">La norme SQL prévoit ce qu'on appelle des structures conditionnelles qui permettent de dire &quot;SI telle valeur vaut ça, faire ça, sinon si cette valeur vaut ça, faire ça, sinon faire ça&quot;.</p><p id="r-506514" data-claire-element-id="506514">Ce n'est bien sûr qu'un exemple, mais c'est le principe. Une structure conditionnelle permet d'énoncer... Des conditions. :p</p><p id="r-506515" data-claire-element-id="506515">Dans MySQL, il existe 4 structures conditionnelles :</p><ul id="r-506524" data-claire-element-id="506524"><li id="r-506517" data-claire-element-id="506517"><p id="r-506516" data-claire-element-id="506516">CASE</p></li><li id="r-506519" data-claire-element-id="506519"><p id="r-506518" data-claire-element-id="506518">NULLIF</p></li><li id="r-506521" data-claire-element-id="506521"><p id="r-506520" data-claire-element-id="506520">IF</p></li><li id="r-506523" data-claire-element-id="506523"><p id="r-506522" data-claire-element-id="506522">IFNULL</p></li></ul><p id="r-506525" data-claire-element-id="506525">Les deux dernières structures peuvent très facilement être obtenues à partir des deux premières et sont plus limitées. En fait, elles sont spécifiques à MySQL et n'existent pas dans la norme.</p><p id="r-506526" data-claire-element-id="506526">Il est notamment déconseillé d'utiliser IF car si un jour vous passez à PostGreSQL (par exemple), vous allez devoir restructurer toutes vos requêtes... :(</p><p id="r-506527" data-claire-element-id="506527">IFNULL, même s'il n'est pas repris par la norme, est implémenté dans la plupart des SGBDR (notamment MySQL, PostGreSQL et SQL Server), cela est donc moins grave si vous l'utilisez, mais c'est déconseillé quand même...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">
<span class="arrow"></span>
<span class="next">Les conditions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
<span class="next">Utilisation de CASE</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UtilisationdeCASE"></a><h2>Utilisation de CASE</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
<span class="arrow"></span>
<span class="next">Des conditions en SQL ? Différences entre MySQL et la norme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
<span class="next">Les autres structures conditionnelles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utilisation-de-case" data-claire-element-id="506571">Utilisation de CASE</h4><p id="r-506529" data-claire-element-id="506529">CASE est la structure conditionnelle la plus répandue parmis les SGBDR. Et c'est également la plus complète ! Les autres structures sont toutes dérivées de celle-ci.<br/> Pour toutes les structures conditionnelles suivantes, je vous montrerais à chaque fois le rapport entre la structure et CASE.</p><div id="r-506531" data-claire-element-id="506531" data-claire-semantic="question"><p id="r-506530" data-claire-element-id="506530">Bon alors comment on l'utilise, ce CASE ?</p></div><p id="r-506532" data-claire-element-id="506532">C'est assez simple, voici tout d'abord une structure générale :</p><pre id="r-506533" data-claire-element-id="506533"><code data-claire-semantic="sql">CASE [colonne]
WHEN condition THEN valeur
WHEN condition THEN valeur
[...]
ELSE valeur
END</code></pre><p id="r-506534" data-claire-element-id="506534">Bon, peut-être qu'à première vue, comme ça, ça ne vous parle pas trop, mais avec les exemples ça rentrera tout seul. ;) :)</p><aside id="r-506536" data-claire-element-id="506536" data-claire-semantic="error"><p id="r-506535" data-claire-element-id="506535">Faites attention à ne pas oublier le END à la fin du CASE, sinon vous aurez droit à une belle erreur d'exécution ! :colere2:</p></aside><p id="r-506537" data-claire-element-id="506537">Voici un premier exemple :</p><pre id="r-506538" data-claire-element-id="506538"><code data-claire-semantic="sql">SELECT @a, CASE
        WHEN @a &gt; 0 THEN 'positif'
        WHEN @a &lt; 0 THEN 'negatif'
        WHEN @a = 0 THEN 'nul'
        ELSE 'NULL'
        END AS signe_a;
SET @a = -5;
SELECT @a, CASE
        WHEN @a &gt; 0 THEN 'positif'
        WHEN @a &lt; 0 THEN 'negatif'
        WHEN @a = 0 THEN 'nul'
        ELSE 'NULL'
        END AS signe_a;</code></pre><figure id="r-506540" data-claire-element-id="506541"><img id="r-506539" data-claire-element-id="506539" src="medias/uploads.siteduzero.com_files_10001_11000_10357.png" alt="Image utilisateur"/></figure><p id="r-506542" data-claire-element-id="506542">Je crois que l'exemple se passe de commentaire : le code veut dire ce qu'il veut dire. :p</p><p id="r-506543" data-claire-element-id="506543">Imaginons maintenant un autre cas : on fait un script de news et on a une colonne dans la table des news qui s'appelle 'validee' et qui indique si la news a été validée par un admin ou pas.</p><p id="r-506544" data-claire-element-id="506544">Dans le panel d'administration, on affiche toutes les news dans un tableau, et dans la colonne &quot;Validée ?&quot;, on aimerait indiquer &quot;validée&quot;, ou &quot;en attente de validation&quot; plutôt que 0 ou 1...</p><p id="r-506545" data-claire-element-id="506545">Rien de plus simple avec CASE ! Voici une table fictive :</p><pre id="r-506546" data-claire-element-id="506546"><code data-claire-semantic="sql">CREATE TABLE news (
id int NOT NULL AUTO_INCREMENT,
titre varchar(100) NOT NULL,
validee tinyint NOT NULL DEFAULT 0,
PRIMARY KEY(id)
);
 
INSERT INTO news (titre, validee) VALUES ('news 1', 1);
INSERT INTO news (titre, validee) VALUES ('news 2', 0);
INSERT INTO news (titre, validee) VALUES ('news 3', 0);
INSERT INTO news (titre, validee) VALUES ('news 4', 2);
INSERT INTO news (titre, validee) VALUES ('news 5', 1);
INSERT INTO news (titre, validee) VALUES ('news 6', 0);</code></pre><p id="r-506547" data-claire-element-id="506547">Essayez de trouver une requête qui renverra :</p><ul id="r-506554" data-claire-element-id="506554"><li id="r-506549" data-claire-element-id="506549"><p id="r-506548" data-claire-element-id="506548">L'id de la news</p></li><li id="r-506551" data-claire-element-id="506551"><p id="r-506550" data-claire-element-id="506550">Le titre de la news</p></li><li id="r-506553" data-claire-element-id="506553"><p id="r-506552" data-claire-element-id="506552">Si la colonne validee vaut 1, 'Validee', si la colonne vaut 0, 'En attente de validation', sinon 'Etat inconnu' dans une colonne nommée validee_txt</p></li></ul><p id="r-506555" data-claire-element-id="506555">Quand vous penserez avoir trouvé la requête, comparez votre code au mien :</p><p id="r-506556" data-claire-element-id="506556"></p><div id="r-506560" data-claire-element-id="506560"><div id="r-506558" data-claire-element-id="506559"><img id="r-506559" data-claire-element-id="506558" src="medias/uploads.siteduzero.com_files_10001_11000_10358.png" alt="Image utilisateur"/><pre id="r-506557" data-claire-element-id="506557"><code data-claire-semantic="sql">SELECT id, titre, CASE WHEN validee = 1 THEN 'Validee' WHEN validee = 0 THEN 'En attente de validation' ELSE 'Etat inconnu' END AS validee_txt FROM news;</code></pre></div></div><p id="r-506561" data-claire-element-id="506561">Bon, normalement c'était pas trop dur. :D</p><div id="r-506563" data-claire-element-id="506563" data-claire-semantic="question"><p id="r-506562" data-claire-element-id="506562">Oui mais attend, tantôt en nous montrant la structure de base, j'ai vu qu'elle commençait comme ça : <strong>CASE [colonne] WHEN ...</strong> A quoi correspond ce [colonne] ?</p></div><p id="r-506564" data-claire-element-id="506564">Bien vu, en fait l'exemple que je viens de vous montrer peut être simplifié grâce à ce [colonne]. Comme un exemple vaut mieux qu'un long discours, voici le code qu'on aurait pu aussi utiliser :</p><pre id="r-506565" data-claire-element-id="506565"><code data-claire-semantic="sql">SELECT id, titre, CASE validee WHEN 1 THEN 'Validee' WHEN 0 THEN 'En attente de validation' ELSE 'Etat inconnu' END AS validee_txt FROM news;</code></pre><figure id="r-506567" data-claire-element-id="506568"><img id="r-506566" data-claire-element-id="506566" src="medias/uploads.siteduzero.com_files_10001_11000_10359.png" alt="Image utilisateur"/></figure><p id="r-506569" data-claire-element-id="506569">Pratique aussi non ? Le seul problème avec cette syntaxe c'est qu'elle ne s'applique pas à tous les cas, par exemple notre premier exemple (savoir si @a était positif, négatif, nul (0) ou NULL) ne pourrait utiliser cette syntaxe car on ne peut pas mettre le signe &quot;&gt;&quot; ou &quot;&lt;&quot;.</p><p id="r-506570" data-claire-element-id="506570">Vous suivez toujours ? Tant mieux parce qu'on a fait le plus dur. :D :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
<span class="arrow"></span>
<span class="next">Des conditions en SQL ? Différences entre MySQL et la norme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
<span class="next">Les autres structures conditionnelles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesautresstructuresconditionnelles"></a><h2>Les autres structures conditionnelles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
<span class="arrow"></span>
<span class="next">Utilisation de CASE</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
<span class="next">[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-autres-structures-conditionnelles" data-claire-element-id="506609">Les autres structures conditionnelles</h4><p id="r-506572" data-claire-element-id="506572">Comme je vous l'ai dit, il existe trois autres structures conditionnelles en dehors de CASE en MySQL : IF, NULLIF et IFNULL.</p><p id="r-506573" data-claire-element-id="506573">Nous avons déjà vu l'utilité de IFNULL mais je vais en reparler juste pour vous montrer le lien avec CASE et la facilité de ce dernier.</p><h5 id="r-une-alternative-simplifiee-if" data-claire-element-id="506592">Une alternative simplifiée : IF</h5><p id="r-506574" data-claire-element-id="506574">IF est en fait une fonction. Voici comment on l'utilise :</p><pre id="r-506575" data-claire-element-id="506575"><code data-claire-semantic="sql">SELECT IF(condition, operation_si_vrai, operation_si_faux);</code></pre><p id="r-506576" data-claire-element-id="506576">Comme vous le constatez, IF est beaucoup plus limité que CASE, voici comment on pourrait reproduire IF dans un CASE :</p><pre id="r-506577" data-claire-element-id="506577"><code data-claire-semantic="sql">SELECT CASE WHEN condition THEN operation_si_vrai ELSE operation_si_faux END;</code></pre><p id="r-506578" data-claire-element-id="506578">Vous vous souvenez de ce qu'on a vu au chapitre précédent ? La table ex_null qui contenait des scores ou NULL si le joueur n'avait joué aucune partie...</p><p id="r-506579" data-claire-element-id="506579">Et bien le IF se prête bien à cette situation, nous avions utilisé cette requête :</p><pre id="r-506580" data-claire-element-id="506580"><code data-claire-semantic="sql">SELECT id, COALESCE(IFNULL(points, 0) / COALESCE(points, 1), 1) AS a_deja_joue FROM ex_null;</code></pre><figure id="r-506582" data-claire-element-id="506583"><img id="r-506581" data-claire-element-id="506581" src="medias/uploads.siteduzero.com_files_10001_11000_10285.png" alt="Image utilisateur"/></figure><p id="r-506584" data-claire-element-id="506584">Et bien avec le IF, voici ce qui suffirait :</p><pre id="r-506585" data-claire-element-id="506585"><code data-claire-semantic="sql">SELECT id, IF(points IS NULL, 0, 1) AS a_deja_joue FROM ex_null;</code></pre><p id="r-506586" data-claire-element-id="506586">On peut même l'améliorer en mettant oui / non à la place de 1 / 0. :)</p><pre id="r-506587" data-claire-element-id="506587"><code data-claire-semantic="sql">SELECT id, IF(points IS NULL, 'non', 'oui') AS a_deja_joue FROM ex_null;</code></pre><figure id="r-506589" data-claire-element-id="506590"><img id="r-506588" data-claire-element-id="506588" src="medias/uploads.siteduzero.com_files_10001_11000_10360.png" alt="Image utilisateur"/></figure><p id="r-506591" data-claire-element-id="506591">Comme vous le voyez, c'est beaucoup plus pratique et plus simple que notre solution à base de COALESCE / IFNULL. :D :p</p><h5 id="r-nullif" data-claire-element-id="506598">NULLIF</h5><pre id="r-506593" data-claire-element-id="506593"><code data-claire-semantic="sql">SELECT NULLIF(expr1, expr2) AS resultat;</code></pre><p id="r-506594" data-claire-element-id="506594">SI expr1 = expr2 ALORS resultat vaudra NULL<br/> SINON resultat vaudra expr1.</p><p id="r-506595" data-claire-element-id="506595">Avec CASE :</p><pre id="r-506596" data-claire-element-id="506596"><code data-claire-semantic="sql">SELECT CASE WHEN expr1 = expr2 THEN NULL ELSE expr1 END AS resultat;</code></pre><p id="r-506597" data-claire-element-id="506597">Bon, en fait l'utilité de cette fonction est assez... réduite. :-° Rarissimes sont les cas où elle vous servira, donc je ne détaille pas. ^^</p><h5 id="r-ifnull-1" data-claire-element-id="506608">IFNULL</h5><p id="r-506599" data-claire-element-id="506599">On a déjà vu l'utilité de cette fonction, qui s'utilise comme cela :</p><pre id="r-506600" data-claire-element-id="506600"><code data-claire-semantic="sql">SELECT IFNULL(expr1, expr2) AS resultat;</code></pre><p id="r-506601" data-claire-element-id="506601">SI expr1 est NULL ALORS renvoyer expr2<br/> SINON renvoyer expr1</p><p id="r-506602" data-claire-element-id="506602">Avec CASE :</p><pre id="r-506603" data-claire-element-id="506603"><code data-claire-semantic="sql">SELECT CASE WHEN expr1 IS NULL THEN expr2 ELSE expr1 END AS resultat;</code></pre><p id="r-506604" data-claire-element-id="506604">Personnellement, je trouve cette fonction tout autant inutile que la précédente, dans la plupart des cas, un CASE (voir même un IF, comme nous l'avons vu) fait parfaitement l'affaire !</p><p id="r-506605" data-claire-element-id="506605">Si j'étais vous, je n'encombrerais pas mon cerveau des deux dernières fonctions (NULLIF et IFNULL)...</p><aside id="r-506607" data-claire-element-id="506607" data-claire-semantic="information"><p id="r-506606" data-claire-element-id="506606">J'ai dit que le IF était à éviter pour prévenir les ennuis lors d'un changement de SGBDR, toutefois la plupart de ces derniers supportent les fonctions utilisateur, qui permettent de recréer une fonction IF sans encombre, ne vous privez donc pas du IF s'il peut vraiment vous être utile, mais évitez absolument les imbrications de IF et préférez le CASE, créé pour gérer le ELSEIF. :)</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
<span class="arrow"></span>
<span class="next">Utilisation de CASE</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
<span class="next">[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ProblmeSQLSommedesnombressileurnombrecorrespondunnombre..."></a><h2>[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
<span class="arrow"></span>
<span class="next">Les autres structures conditionnelles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">
<span class="next">Et si on faisait un peu de SQL ? ...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre" data-claire-element-id="506649">[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...</h4><p id="r-506610" data-claire-element-id="506610">Voici le premier problème SQL que je vous propose, d'autres suivront, en fait un problème SQL ressemble à un mini-TP sauf qu'un mini-TP vous servira peut-être un jour, tandis que les problèmes sont totalement loufoques et ne vous serviront certainement jamais. :D</p><p id="r-506611" data-claire-element-id="506611">J'espère que vous trouvez le titre accrocheur. o_O</p><p id="r-506612" data-claire-element-id="506612">Voici le problème : on a une table de 7 colonnes dont une &quot;id&quot; :</p><pre id="r-506613" data-claire-element-id="506613"><code data-claire-semantic="sql">CREATE TABLE probleme1 (
        id int NOT NULL AUTO_INCREMENT,
        i1 int DEFAULT NULL,
        i2 int DEFAULT NULL,
        i3 int DEFAULT NULL,
        i4 int DEFAULT NULL,
        i5 int DEFAULT NULL,
        i6 int DEFAULT NULL,
        PRIMARY KEY(id)
);
 
INSERT INTO probleme1 (i1, i2, i3, i4, i5, i6) VALUES
(NULL, NULL, 5, NULL, 4, 3),
(3, NULL, NULL, 8, NULL, NULL),
(NULL, NULL, NULL, NULL, 5, 6),
(NULL, NULL, NULL, NULL, NULL, NULL),
(8, -4, 3, NULL, NULL, NULL),
(1, 1, 1, 1, 1, 1),
(9, NULL, 2, NULL, NULL, 0),
(-8, 2, -1, NULL, 4, 1),
(-1, 1, -1, 1, -1, 1),
(0, 0, 0, NULL, NULL, 0);</code></pre><aside id="r-506622" data-claire-element-id="506622" data-claire-semantic="warning"><p id="r-506614" data-claire-element-id="506614">Rappel :</p><ul id="r-506621" data-claire-element-id="506621"><li id="r-506616" data-claire-element-id="506616"><p id="r-506615" data-claire-element-id="506615">1 + NULL = NULL</p></li><li id="r-506618" data-claire-element-id="506618"><p id="r-506617" data-claire-element-id="506617">0 OR NULL = NULL</p></li><li id="r-506620" data-claire-element-id="506620"><p id="r-506619" data-claire-element-id="506619">1 OR NULL = 1</p></li></ul></aside><p id="r-506623" data-claire-element-id="506623">On veut obtenir :</p><ul id="r-506632" data-claire-element-id="506632"><li id="r-506625" data-claire-element-id="506625"><p id="r-506624" data-claire-element-id="506624">Une colonne id contenant simplement l'id de la ligne.</p></li><li id="r-506627" data-claire-element-id="506627"><p id="r-506626" data-claire-element-id="506626">Une colonne somme contenant la somme des colonnes i1, i2, i3, i4, i5 et i6 ou NULL lorsque toutes ces colonnes valent NULL.</p></li><li id="r-506629" data-claire-element-id="506629"><p id="r-506628" data-claire-element-id="506628">Une colonne nb_cols qui contiendra le nombre de colonnes non-nulles.</p></li><li id="r-506631" data-claire-element-id="506631"><p id="r-506630" data-claire-element-id="506630">Les colonnes i1 à i6.</p></li></ul><aside id="r-506634" data-claire-element-id="506634" data-claire-semantic="information"><p id="r-506633" data-claire-element-id="506633">Il est possible de créer la colonne nb_cols sans aucune condition. :D</p></aside><p id="r-506635" data-claire-element-id="506635">Voici ce que vous devriez arriver à obtenir :</p><figure id="r-506637" data-claire-element-id="506638"><img id="r-506636" data-claire-element-id="506636" src="medias/uploads.siteduzero.com_files_10001_11000_10362.png" alt="Image utilisateur"/></figure><aside id="r-506640" data-claire-element-id="506640" data-claire-semantic="information"><p id="r-506639" data-claire-element-id="506639">Je sais très bien que ce que je vous demande est loin d'être facile, mais en SQL, rares seront les cas où tout sera facile et viendra du premier coup ! Croyez moi ce problème est un bon entrainement, essayez de le faire sérieusement et ne vous découragez pas, si vous n'y arrivez pas ne regardez pas la solution ! Demander un indice sur le forum PHP / MySQL serait une bien meilleure idée !</p></aside><p id="r-506641" data-claire-element-id="506641"></p><div id="r-506647" data-claire-element-id="506647"><div id="r-506645" data-claire-element-id="506646"><img id="r-506646" data-claire-element-id="506645" src="medias/uploads.siteduzero.com_files_10001_11000_10363.png" alt="Image utilisateur"/><pre id="r-506642" data-claire-element-id="506642"><code data-claire-semantic="sql">SELECT
        id, @somme := CASE
                WHEN (((((i1 + 1 OR i2 + 1) OR i3 + 1) OR i4 + 1) OR i5 + 1) OR i6 + 1) IS NULL THEN 'NULL'
                ELSE COALESCE(i1, 0) + COALESCE(i2, 0) + COALESCE(i3, 0) + COALESCE(i4, 0) + COALESCE(i5, 0) + COALESCE(i6, 0) END AS somme,
        6 + @somme - COALESCE(i1, 1) - COALESCE(i2, 1) - COALESCE(i3, 1) - COALESCE(i4, 1) - COALESCE(i5, 1) - COALESCE(i6, 1) AS nb_cols,
        i1, i2, i3, i4, i5, i6
FROM probleme1;</code></pre><p id="r-506643" data-claire-element-id="506643">:waw:</p><p id="r-506644" data-claire-element-id="506644">Bien sûr, il serait tout à fait surprenant que vous ayez trouvé exactement le même que moi, mais ce qui compte pour le moment, c'est que ça fonctionne, pas que ce soit optimisé et supersonique ! :p Ma requête est de votre niveau, mais sachez qu'il existe d'autres façons de faire encore plus rapides et pratiques ! Mais notre niveau n'est pas encore assez élevé pour ce type de requêtes et on s'en tiendra à la mienne pour le moment. :p <br/> Si vous n'avez pas la même requête que moi c'est normal, mais essayez de comprendre la mienne, c'est important !</p></div></div><p id="r-506648" data-claire-element-id="506648">Comme vous le constatez, les structures et fonctions conditionnelles de MySQL permettent d'éviter facilement du traitement du côté de PHP. Toutefois, il ne faut pas non plus utiliser les conditions pour tout et n'importe quoi, certains traitements sont plus rapides du côté de PHP que du côté de MySQL, mais en général le mieux est de les faire du côté de SQL qui a l'avantage de mettre en cache les résultats des requêtes souvent appelées, contrairement à PHP. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
<span class="arrow"></span>
<span class="next">Les autres structures conditionnelles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">
<span class="next">Et si on faisait un peu de SQL ? ...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="EtsionfaisaitunpeudeSQL..."></a><h2>Et si on faisait un peu de SQL ? ...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
<span class="arrow"></span>
<span class="next">[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
<span class="next">La norme SQL ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-506651" data-claire-element-id="506651">Un petit chapitre qui commencera par faire le point sur la norme SQL dont je vous parle souvent mais que je ne vous ai jamais vraiment expliquée, et qui passera ensuite à nos premières requêtes MySQL armées de la clause FROM qui permet de récupérer (enfin !) des données qui proviennent de quelque part et non pas qu'on crée nous-mêmes dans la requête. :)</p>
</div><a name="LanormeSQL"></a><h2>La norme SQL ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">
<span class="arrow"></span>
<span class="next">Et si on faisait un peu de SQL ? ...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
<span class="next">Quelques données de test</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-norme-sql" data-claire-element-id="506664">La norme SQL ?</h4><p id="r-506652" data-claire-element-id="506652">Je vous en parle souvent, en vous disant généralement &quot;Il faut savoir que ce n'est pas la norme, à éviter donc ...&quot;, mais au fait c'est quoi ?</p><p id="r-506653" data-claire-element-id="506653">Une sous-partie un peu théorique, pas forcément nécessaire mais c'est toujours bon à savoir, ce ne sera pas très détaillé, le but est juste de vous faire une idée de ce qu'est cette fameuse norme. :)</p><p id="r-506654" data-claire-element-id="506654">Tout d'abord il faut vous rappeler que MySQL est un programme, ou un SGBDR qui a donc été développé par des gens comme vous et moi.</p><p id="r-506655" data-claire-element-id="506655">Ces développeurs ne sont pas partis de rien, une étape importante lorsqu'on programme est de bien établir ce à quoi on veut arriver au final, et ce n'est franchement pas simple !</p><p id="r-506656" data-claire-element-id="506656">La norme SQL est en fait un document, rien de plus, qui contient toutes les fonctions qu'un SGBDR devrait implémenter, autrement dit la liste des fonctionnalités d'un SGBDR.</p><p id="r-506657" data-claire-element-id="506657">Bien sûr les développeurs ne sont pas obligés de suivre à la lettre ce document, c'est pourquoi plusieurs programmes faisant du SQL sont apparus. Vous connaissez déjà MySQL qui respecte une partie conséquente de cette norme (on va dire 60%), mais il en existe d'autres. Le plus connu étant certainement Oracle, très ancien et prévu pour les très gros volumes de données (plusieurs teras, c'est à dire plusieurs milliers de gigas !).</p><p id="r-506658" data-claire-element-id="506658">Mais on pourrait également citer PostGreSQL, que j'affecte particulièrement et qui respecte plus de 95% de cette norme !</p><h5 id="r-une-norme-plusieurs-documents" data-claire-element-id="506663">Une norme, plusieurs documents...</h5><p id="r-506659" data-claire-element-id="506659">Je vous ai dit que la norme est un document, ce qui est vrai mais il faut encore savoir que plusieurs versions de SQL existent, les 2 dont on parle actuellement sont les normes SQL-92 (ou SQL2) et SQL-99 (SQL3).</p><p id="r-506660" data-claire-element-id="506660">On parle encore beaucoup de SQL-92 puisque c'est la norme que respecte la plupart des SGBDR actuellement (ils n'ont pas encore eu le temps de s'adapter à la dernière version, tout de même relativement récente).</p><p id="r-506661" data-claire-element-id="506661">Vous vous demandez sans doute ce qu'apporte SQL-99, vous répondre ici serait trop long, mais en deux mots, tous les concepts de triggers, UDF, UDT, vues, schémas et autres facettes de SQL que nous n'avons pas encore abordées, mais nous le ferons en temps voulu :) (sauf pour les UDT ou User Defined Types qui ne sont pas (encore ?) gérés par MySQL).</p><p id="r-506662" data-claire-element-id="506662">Si vous voulez voir le document en question, je suis disposé à vous l'envoyer, contactez moi par MP, après tout vous me supportez depuis 5 chapitres, je vous dois bien ça. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">
<span class="arrow"></span>
<span class="next">Et si on faisait un peu de SQL ? ...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
<span class="next">Quelques données de test</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quelquesdonnesdetest"></a><h2>Quelques données de test</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
<span class="arrow"></span>
<span class="next">La norme SQL ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
<span class="next">Enfin une requête conforme !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-donnees-de-test" data-claire-element-id="506673">Quelques données de test</h4><p id="r-506665" data-claire-element-id="506665">Normalement cette sous-partie n'est pas trop dure à suivre. :p</p><p id="r-506666" data-claire-element-id="506666">Copiez-collez le code ci-dessous dans une console MySQL, c'est tout ! :)</p><pre id="r-506667" data-claire-element-id="506667"><code data-claire-semantic="sql">-- Données de test pour le tutoriel du SdZ
-- Base de données &quot;news_test&quot;
-- 2 tables

CREATE DATABASE news_test;

USE news_test;

CREATE TABLE t_categorie (
        cat_id TINYINT(3) UNSIGNED NOT NULL AUTO_INCREMENT,
        cat_nom VARCHAR(30) NOT NULL,
        PRIMARY KEY ( cat_id )
) MAX_ROWS = 30;

CREATE TABLE t_news (
        nws_id SMALLINT(5) UNSIGNED NOT NULL AUTO_INCREMENT,
        nws_catid TINYINT(3) UNSIGNED NOT NULL,
        nws_titre VARCHAR(100) NOT NULL,
        nws_auteur VARCHAR(30) NOT NULL,
        nws_date DATETIME NOT NULL,
        nws_nb_vues INT(10) NOT NULL DEFAULT 0,
        nws_texte TEXT NOT NULL,
        PRIMARY KEY ( nws_id ),
        INDEX i_nws_catid ( nws_catid )
);

CREATE TABLE t_commentaire (
        cmt_id INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
        cmt_nwsid SMALLINT(5) UNSIGNED NOT NULL,
        cmt_auteur VARCHAR(30) DEFAULT NULL,
        cmt_date DATETIME NOT NULL,
        cmt_texte TEXT NOT NULL,
        PRIMARY KEY ( cmt_id ),
        INDEX i_cmt_nwsid ( cmt_nwsid )
);

INSERT INTO t_categorie ( cat_id, cat_nom ) VALUES
        ( 1, 'Site du Zér0' ),
        ( 2, 'Musique' ),
        ( 3, '(My)SQL' );

INSERT INTO t_news ( nws_id, nws_catid, nws_titre, nws_auteur, nws_date, nws_nb_vues, nws_texte ) VALUES
        ( 1, 2, 'Vive la guitare', 'Alexi Laiho', '2007-06-02 02:18:32', 837, 'Ya pas à dire, la guitare c''est vraiment le pied !!' ),
        ( 2, 1, 'test', 'karamilo', '2007-06-05 20:58:23', 139, 'test' ),
        ( 3, 1, 'test', 'karamilo', '2007-06-05 21:19:08', 42, 'test' ),
        ( 4, 2, 'Bientôt le Graspop', 'Alexi Laiho', '2007-06-08 18:51:26', 1235, 'Salut tout le monde, je suppose que vous êtes tous au courant du fait que cette année le Graspop accueille Children of Bodom, Dimmu Borgir, AeroSmith, Blind Guardian, Iron Maiden, Amon Amarth, ... En bref que du bon !!' ),
        ( 5, 1, '50 000 visiteurs', 'karamilo', '2007-06-18 23:15:18', 2154, 'Grand jour pour le SdZ: la barre des 50 000 visiteurs a été franchie aujourd''hui ! Félicitations à toute la team !' );
INSERT INTO t_news ( nws_catid, nws_titre, nws_auteur, nws_texte ) VALUES ( 1, 'Insertion des données de test', 'visiteur avide de savoir', 'tadaaaaam ! ^^' );

INSERT INTO t_commentaire ( cmt_nwsid, cmt_auteur, cmt_date, cmt_texte ) VALUES
        ( 1, 'Shepard', '2007-06-02 10:18:20', 'Tout à fait d''accord !! Mais comment tu fais pour te réveiller si tôt ?' ),
        ( 1, 'Alexi Laiho', '2007-06-02 12:11:52', 'Facile: je ne dors pas ^^' ),
        ( 1, 'Shepard', '2007-06-02 13:11:18', 'Et tu ne manges pas non plus ? Je savais que t''étais pas humain' ),
        ( 1, 'Alexi Laiho', '2007-06-02 15:18:22', ':p' ),
        ( 2, 'karamilo', '2007-06-05 20:59:59', 'test' ),
        ( 2, 'karamilo', '2007-06-05 21:13:15', 'test' ),
        ( 2, 'karamilo', '2007-06-05 21:18:32', 'test' ),
        ( 3, 'karamilo', '2007-06-05 21:19:23', 'test' ),
        ( 1, 'Janne Warman', '2007-06-06 23:19:08', 'Bah tu pourras le voir en chair et en os ( ou en métal et en électrons ) au Graspop le 24 :p :)' ),
        ( 1, 'Shepard', '2007-06-07 10:17:55', 'Non je n''y vais pas ... :( ( pas trouvé les sous :s )' ),
        ( 1, 'Janne Warman', '2007-06-07 18:48:15', 'Ah flûte, désolé ...' ),
        ( 4, 'Janne Warman', '2007-06-08 20:18:32', 'Vas t''entrainer plutôt que de te vanter et d''emmerder Shep :p' ),
        ( 1, 'Shepard', '2007-06-08 23:11:26', 'T''inquiète ;)' ),
        ( 4, 'Shepard', '2007-06-08 23:13:51', 'Il n''en a pas besoin, enfin seulement la disquette ^^' );
INSERT INTO t_commentaire ( cmt_nwsid, cmt_date, cmt_texte ) VALUES ( 5, '2007-06-19 10:18:21', 'Chapeau bas ! ^^' );
INSERT INTO t_commentaire ( cmt_nwsid, cmt_auteur, cmt_date, cmt_texte ) VALUES ( 5, 'Shepard', '2007-06-19 10:23:21', 'Je confirme :p ( comment ça moi floodeur ? )');

-- End of File ^^</code></pre><p id="r-506668" data-claire-element-id="506668">N'essayez pas de comprendre le code, ce n'est pas l'objet de ce chapitre, ni même de cette partie du cours, nous verrons les requêtes de création / d'insertion plus tard. :)</p><aside id="r-506672" data-claire-element-id="506672" data-claire-semantic="information"><p id="r-506669" data-claire-element-id="506669">Juste une chose importante : avant d'effectuer des requêtes sur l'une de ces tables, n'oubliez pas de vous connecter à la base news_test via la requête :</p><pre id="r-506670" data-claire-element-id="506670"><code data-claire-semantic="sql">USE news_test;</code></pre><p id="r-506671" data-claire-element-id="506671">C'est pas compliqué mais essentiel si on ne veut pas que MySQL nous jette un &quot;<em>ERROR 1046 (3D000): No database selected</em>&quot; en pleine figure. :p</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
<span class="arrow"></span>
<span class="next">La norme SQL ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
<span class="next">Enfin une requête conforme !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Enfinunerequteconforme"></a><h2>Enfin une requête conforme !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
<span class="arrow"></span>
<span class="next">Quelques données de test</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
<span class="next">SELECT ... FROM ( SELECT ... FROM ... )</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-enfin-une-requete-conforme" data-claire-element-id="506706">Enfin une requête conforme !</h4><p id="r-506674" data-claire-element-id="506674">Derrière ce titre un peu racoleur se cache une vérité assez frustrante : toutes les requêtes effectuées dans les chapitres précédents n'étaient pas des requêtes SQL...</p><p id="r-506675" data-claire-element-id="506675">[Là ça devrait être le moment où vous vous énervez sur moi, m'attachez, me versez du miel dans les oreilles et lachez les fourmis rouges...]</p><p id="r-506676" data-claire-element-id="506676">Pas de bol vous ne savez pas où j'habite. :p</p><p id="r-506677" data-claire-element-id="506677">Bon je vous explique quand même : la norme SQL dont je vous ai parlé plus tôt définit l'ordre SELECT comme ceci :</p><pre id="r-506678" data-claire-element-id="506678"><code data-claire-semantic="sql">SELECT [DISTINCT|ALL] { * | liste }
        FROM TABLE
        [WHERE conditions]
        [GROUP BY liste_groupage]
        [HAVING conditions]
        [ORDER BY liste_ordre]</code></pre><aside id="r-506680" data-claire-element-id="506680" data-claire-semantic="information"><p id="r-506679" data-claire-element-id="506679">Merci à Frédéric Brouard ( <a href="http://sqlpro.developpez.com/">http://sqlpro.developpez.com</a>, au passage je vous recommande son excellent livre ^^ ) à qui j'ai honteusement &quot;pompé&quot; la requête.</p></aside><p id="r-506681" data-claire-element-id="506681">Les éléments entre crochets sont facultatifs; les éléments entre accolades et séparés par des | sont au choix.</p><p id="r-506682" data-claire-element-id="506682">La chose que je voulais vous montrer, c'est que la clause FROM n'est <strong>pas</strong> facultative. :p D'où la non-validité de toutes les requêtes que nous avons exécutées jusqu'à présent. ^^</p><p id="r-506683" data-claire-element-id="506683">Enfin finalement ce n'est qu'un détail...</p><p id="r-506684" data-claire-element-id="506684">Bon je propose qu'on s'amuse un peu à faire des requêtes conformes. :p Pour voir si vous n'avez pas tout oublié du cours de M@teo21, je vous propose d'essayer de trouver les requêtes demandées par vous-mêmes puis de regarder les solutions, c'est vraiment basique ne vous en faites pas. ;)</p><p id="r-506685" data-claire-element-id="506685">Il n'y a jamais de WHERE ou de ORDER BY ou quoi que ce soit d'autre dans la requête, juste SELECT ... FROM ... :p</p><ul id="r-506694" data-claire-element-id="506694"><li id="r-506687" data-claire-element-id="506687"><p id="r-506686" data-claire-element-id="506686">Récupérer toutes les colonnes de la table t_categorie</p></li><li id="r-506689" data-claire-element-id="506689"><p id="r-506688" data-claire-element-id="506688">Récupérer les colonnes nws_id et nws_auteur de la table t_news</p></li><li id="r-506691" data-claire-element-id="506691"><p id="r-506690" data-claire-element-id="506690">Récupérer les colonnes cmt_id et cmt_auteur de la table t_commentaire et vérifier que tous les id sont bien présents (il suffit de regarder qu'il n'y ait pas de trou, normalement il y en aura un, sauf si vous connaissez l'astuce :p )</p></li><li id="r-506693" data-claire-element-id="506693"><p id="r-506692" data-claire-element-id="506692">Même chose qu'au dessus mais faites disparaître ce NULL et remplacez-le par &quot;Visiteur&quot; si vous y arrivez :)</p></li></ul><p id="r-506695" data-claire-element-id="506695">Et maintenant les solutions :</p><pre id="r-506696" data-claire-element-id="506696"><code data-claire-semantic="sql">-- Tout d'abord, se connecter à news_test
USE test_news;

-- toutes les colonnes de t_categorie
SELECT * FROM t_categorie;

-- nws_id et nws_auteur de t_news
SELECT nws_id, nws_auteur FROM t_news;

-- cmt_id et cmt_auteur de t_commentaire
SELECT cmt_id, cmt_auteur FROM t_commentaire;

-- même chose mais NULL =&gt; &quot;Visiteur&quot;
SELECT cmt_id, COALESCE(cmt_auteur, 'Visiteur') AS cmt_auteur FROM t_commentaire;

-- Ou, si on veut tout afficher en une requête ...
SELECT cmt_id, cmt_auteur, COALESCE(cmt_auteur, 'Visiteur') AS cmt_auteur2 FROM t_commentaire;</code></pre><p id="r-506697" data-claire-element-id="506697">Le résultat de cette dernière requête en image :</p><figure id="r-506699" data-claire-element-id="506700"><img id="r-506698" data-claire-element-id="506698" src="medias/uploads.siteduzero.com_files_75001_76000_75014.png" alt="Les 2 dernières requêtes demandées en une :p"/></figure><p id="r-506701" data-claire-element-id="506701">(Regardez la ligne 15)</p><p id="r-506702" data-claire-element-id="506702">La dernière requête que je vous demandais, c'était juste pour voir si vous aviez compris le principe des fonctions et retenu l'utilité de COALESCE, j'avoue que c'était peut-être un peu sadique de ma part. :-°</p><p id="r-506703" data-claire-element-id="506703">Tiens, tant qu'on parle de requêtes valides, je vous ai déniché un petit validateur de requêtes (à la manière du validateur (x)HTML du W3C :p , vous tapez votre requête et... ça passe ou ça casse ^^ ).</p><p id="r-506704" data-claire-element-id="506704"><a href="http://developer.mimer.se/validator/">http://developer.mimer.se/validator/</a></p><p id="r-506705" data-claire-element-id="506705">Choisissez votre version de SQL, entrez votre requête et &quot;Test SQL&quot; !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
<span class="arrow"></span>
<span class="next">Quelques données de test</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
<span class="next">SELECT ... FROM ( SELECT ... FROM ... )</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="SELECT...FROMSELECT...FROM..."></a><h2>SELECT ... FROM ( SELECT ... FROM ... )</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
<span class="arrow"></span>
<span class="next">Enfin une requête conforme !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
<span class="next">DISTINCT</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-select-from-select-from" data-claire-element-id="506718">SELECT ... FROM ( SELECT ... FROM ... )</h4><p id="r-506707" data-claire-element-id="506707">On va avoir besoin ici d'une petite subtilité du langage SQL :</p><p id="r-506708" data-claire-element-id="506708"><em>Tout ordre SELECT renvoie une table (généralement temporaire).</em></p><p id="r-506709" data-claire-element-id="506709">Maintenant vous comprenez certainement le sens du titre de cette sous-partie. :p On peut faire un SELECT ... sur un SELECT ^^</p><p id="r-506710" data-claire-element-id="506710">Un exemple :</p><pre id="r-506711" data-claire-element-id="506711"><code data-claire-semantic="sql">SELECT cmt_auteur FROM ( SELECT * FROM t_commentaire ) AS t</code></pre><p id="r-506712" data-claire-element-id="506712">Notez que le <em>AS t</em> est obligatoire, sinon le client MySQL vous dira joyeusement <em>ERROR 1248 (42000): Every derived table must have its own alias</em>.</p><figure id="r-506714" data-claire-element-id="506715"><img id="r-506713" data-claire-element-id="506713" src="medias/uploads.siteduzero.com_files_75001_76000_75016.png" alt="SELECT ... FROM ( SELECT ... FROM ) AS ..."/></figure><p id="r-506716" data-claire-element-id="506716">Vous avez sans doute envie de dire &quot;ça sert à rien&quot; et vous avez probablement raison. Non seulement cette technique a la réputation d'être très gourmande au niveau temps d'exécution, mais en plus il y a toujours moyen de faire autrement, nous verrons cela plus tard... Si ça peut vous rassurer, je ne me suis jamais servi de cette fonctionnalité, par conséquent je ne vous en voudrai pas si lorsque je vous croise sur le forum (je vous poserai évidemment 30 questions sur l'ensemble du cours comme d'habitude), vous ne savez pas répondre à <em>Peut-on utiliser une requête SELECT comme argument d'une clause FROM ?</em></p><p id="r-506717" data-claire-element-id="506717">Nous verrons plus tard que ce que nous avons fait s'appelle en fait une sous-requête, mais en attendant, je propose qu'on passe à quelque chose de plus intéressant. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
<span class="arrow"></span>
<span class="next">Enfin une requête conforme !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
<span class="next">DISTINCT</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="DISTINCT"></a><h2>DISTINCT</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
<span class="arrow"></span>
<span class="next">SELECT ... FROM ( SELECT ... FROM ... )</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">
<span class="next">Filtrer les données avec WHERE</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-distinct" data-claire-element-id="506737">DISTINCT</h4><p id="r-506719" data-claire-element-id="506719">Plus haut je vous ai montré ceci :</p><pre id="r-506720" data-claire-element-id="506720"><code data-claire-semantic="sql">SELECT [DISTINCT|ALL] { * | liste }
        FROM TABLE
        [WHERE conditions]
        [GROUP BY liste_groupage]
        [HAVING conditions]
        [ORDER BY liste_ordre]</code></pre><p id="r-506721" data-claire-element-id="506721">Vous vous êtes probablement posé des questions auxquelles je ne peux pas encore répondre, du moins pas à toutes, mais je peux éclaircir les deux mots-clefs juste après le SELECT: DISTINCT et ALL.</p><p id="r-506722" data-claire-element-id="506722">Prenons cette requête :</p><pre id="r-506723" data-claire-element-id="506723"><code data-claire-semantic="sql">SELECT cmt_auteur FROM t_commentaire;</code></pre><p id="r-506724" data-claire-element-id="506724">MySQL vous renvoie une liste de 16 pseudos, la plupart apparaissent au moins 2 fois, ce n'est pratique... Imaginez que votre boss vous demande une liste de tous les pseudos des membres qui ont laissé au moins un commentaire sur les news du site, vous ne pouvez pas lui remettre ça...</p><p id="r-506725" data-claire-element-id="506725">C'est ici, vous vous en doutiez, que DISTINCT intervient ! Il permet simplement de supprimer ce que dans le jargon, on appelle vulgairement &quot;doublons&quot;. Ainsi, la requête suivante vous donnera une liste non-redondante :</p><pre id="r-506726" data-claire-element-id="506726"><code data-claire-semantic="sql">SELECT DISTINCT cmt_auteur FROM t_commentaire;</code></pre><figure id="r-506728" data-claire-element-id="506729"><img id="r-506727" data-claire-element-id="506727" src="medias/uploads.siteduzero.com_files_75001_76000_75017.png" alt="utilisation du mot-clef DISTINCT"/></figure><p id="r-506730" data-claire-element-id="506730">Voilà. :)</p><div id="r-506732" data-claire-element-id="506732" data-claire-semantic="question"><p id="r-506731" data-claire-element-id="506731">Et le mot-clef ALL alors ??</p></div><p id="r-506733" data-claire-element-id="506733">C'est très simple : ce mot-clef est en fait utilisé par défaut, le mettre ou ne rien mettre revient donc au même : récupérer toutes les données, même redondantes !</p><aside id="r-506735" data-claire-element-id="506735" data-claire-semantic="warning"><p id="r-506734" data-claire-element-id="506734">DISTINCT est un mot-clef, <strong>pas une fonction !</strong> J'ai vu souvent des <em>SELECT DISTINCT ( colonne1 ), colonne2, ... FROM table</em> ce qui est faux ! Le DISTINCT portera sur toute la ligne, pas seulement sur colonne1, et heureusement, sinon comment MySQL choisirait-il que mettre dans les colonnes 2 et 3 ?</p></aside><p id="r-506736" data-claire-element-id="506736">Voilà, un chapitre un peu plus théorique c'est certain, j'ai fait de mon mieux pour qu'il soit un minimum agréable à lire quand même, bon amusement jusqu'au prochain chapitre, on se servira des mêmes données de test pendant un certain temps, inutile donc de supprimer tout de suite la base de données &quot;news_test&quot;. ^^ :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
<span class="arrow"></span>
<span class="next">SELECT ... FROM ( SELECT ... FROM ... )</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">
<span class="next">Filtrer les données avec WHERE</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="FiltrerlesdonnesavecWHERE"></a><h2>Filtrer les données avec WHERE</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
<span class="arrow"></span>
<span class="next">DISTINCT</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
<span class="next">A propos de la clause WHERE...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-506739" data-claire-element-id="506739">Vous connaissez déjà la clause WHERE, vous l'avez survolée dans le cours de M@teo (si vous pensez que je suis méchant en disant survoler, je ne veux pas l'être, et je sais fort bien que le cours de M@teo21 sur MySQL n'est qu'une brève initiation en la matière, sinon mon tuto n'aurait pas de raison d'être :p ).</p><p id="r-506740" data-claire-element-id="506740">Nous allons aller un peu plus loin dans ce chapitre en apprenant des techniques de filtrage et en vous épargnant de tout apprendre sur le tas au fur et à mesure de recherches sur le net &gt;_ .</p><p id="r-506741" data-claire-element-id="506741">Dans le chapitre, je pars du principe que vous connaissez déjà les opérateurs AND ( &amp;&amp; ) et OR ( || ) qui permettent d'utiliser plusieurs conditions dans la même requête.</p><p id="r-506742" data-claire-element-id="506742">Tant qu'on y est, je vous dis 2 mots sur l'opérateur XOR que vous connaissez peut-être également et qui exprime le &quot;Ou exclusif&quot;, c'est-à-dire que c'est l'un <strong>ou</strong> c'est l'autre, mais pas les 2 en même temps (contrairement à OR qui admet que les 2 puissent être vrais).</p>
</div><a name="AproposdelaclauseWHERE..."></a><h2>A propos de la clause WHERE...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">
<span class="arrow"></span>
<span class="next">Filtrer les données avec WHERE</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
<span class="next">Les opérateurs de comparaison</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-a-propos-de-la-clause-where" data-claire-element-id="506759">A propos de la clause WHERE...</h4><p id="r-506743" data-claire-element-id="506743">Avant de nous lancer dans le listage des fonctions et opérateurs intéressants à utiliser dans la clause WHERE, j'aimerais vous expliquer (très) rapidement son fonctionnement...</p><p id="r-506744" data-claire-element-id="506744">Il faut savoir que MySQL trie les données <strong>avant</strong> de les récupérer. ^^</p><p id="r-506745" data-claire-element-id="506745">Vous ne comprenez pas ce que je veux dire ? C'est assez simple : MySQL regarde les lignes qui correspondent à la clause WHERE en ne récupérant que les données nécessaire au triage. Par exemple dans la requête :</p><pre id="r-506746" data-claire-element-id="506746"><code data-claire-semantic="sql">SELECT * FROM t_news WHERE nws_auteur = 'karamilo';</code></pre><p id="r-506747" data-claire-element-id="506747">MySQL ne récupère d'abord que la colonne nws_auteur (et l'index PRIMARY, qui correspond ici à nws_id), pour voir quelles lignes correspondent (c'est-à-dire dans ce cas-ci les lignes où nws_id vaut 2, 3 ou 5).</p><p id="r-506748" data-claire-element-id="506748">Ensuite, il va chercher les autres données comprises entre SELECT et FROM et effectue toutes les fonctions demandées.</p><div id="r-506750" data-claire-element-id="506750" data-claire-semantic="question"><p id="r-506749" data-claire-element-id="506749">D'accord, mais concrètement, à quoi ça nous sert de savoir ça ? o_O</p></div><p id="r-506751" data-claire-element-id="506751">Je voulais vous amener au fait qu'il est impossible d'utiliser des colonnes calculées entre SELECT et FROM dans le WHERE. Ainsi la requête suivante vous renverra une erreur (la fonction YEAR(<em>date</em>) renvoie l'année de <em>date</em>) :</p><pre id="r-506752" data-claire-element-id="506752"><code data-claire-semantic="sql">SELECT nws_id, YEAR(nws_date) AS annee FROM t_news WHERE annee = 2007;</code></pre><aside id="r-506754" data-claire-element-id="506754" data-claire-semantic="error"><p id="r-506753" data-claire-element-id="506753">ERROR 1054 (42S22): Unknown column 'annee' in 'where clause'</p></aside><p id="r-506755" data-claire-element-id="506755">La requête suivante par contre est correcte :</p><pre id="r-506756" data-claire-element-id="506756"><code data-claire-semantic="sql">SELECT nws_id, YEAR(nws_date) AS annee FROM t_news WHERE YEAR(nws_date) = 2007;</code></pre><p id="r-506757" data-claire-element-id="506757">Vous vous dites sans doute que c'est dommage de devoir utiliser 2 fois la fonction YEAR : on fait perdre du temps au serveur MySQL... Dans ce cas-ci, il est très simple d'optimiser la requête, par exemple comme ceci :</p><pre id="r-506758" data-claire-element-id="506758"><code data-claire-semantic="sql">SELECT nws_id, 2007 AS annee FROM t_news WHERE YEAR(nws_date) = 2007;</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">
<span class="arrow"></span>
<span class="next">Filtrer les données avec WHERE</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
<span class="next">Les opérateurs de comparaison</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesoprateursdecomparaison"></a><h2>Les opérateurs de comparaison</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
<span class="arrow"></span>
<span class="next">A propos de la clause WHERE...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
<span class="next">(NOT) BETWEEN, IN et LIKE</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-operateurs-de-comparaison-8" data-claire-element-id="506818">Les opérateurs de comparaison</h4><h5 id="r-7-operateurs" data-claire-element-id="506804">7 opérateurs...</h5><p id="r-506760" data-claire-element-id="506760">MySQL en admet 7, vous connaissez certainement déjà la plupart :</p><table id="r-506803" data-claire-element-id="506803"><thead id="r-506766" data-claire-element-id="506766"><tr id="r-506765" data-claire-element-id="506765"><th id="r-506762" data-claire-element-id="506762"><p id="r-506761" data-claire-element-id="506761">Opérateur</p></th><th id="r-506764" data-claire-element-id="506764"><p id="r-506763" data-claire-element-id="506763">Signification</p></th></tr></thead><tbody id="r-506802" data-claire-element-id="506802"><tr id="r-506771" data-claire-element-id="506771"><td id="r-506768" data-claire-element-id="506768"><p id="r-506767" data-claire-element-id="506767">a = b</p></td><td id="r-506770" data-claire-element-id="506770"><p id="r-506769" data-claire-element-id="506769"><em>a</em> et <em>b</em> ont la même valeur</p></td></tr><tr id="r-506776" data-claire-element-id="506776"><td id="r-506773" data-claire-element-id="506773"><p id="r-506772" data-claire-element-id="506772">a &lt;&gt; b</p></td><td id="r-506775" data-claire-element-id="506775"><p id="r-506774" data-claire-element-id="506774"><em>a</em> et <em>b</em> ont des valeurs différentes</p></td></tr><tr id="r-506781" data-claire-element-id="506781"><td id="r-506778" data-claire-element-id="506778"><p id="r-506777" data-claire-element-id="506777">a &lt; b</p></td><td id="r-506780" data-claire-element-id="506780"><p id="r-506779" data-claire-element-id="506779"><em>a</em> est strictement plus petit que <em>b</em></p></td></tr><tr id="r-506786" data-claire-element-id="506786"><td id="r-506783" data-claire-element-id="506783"><p id="r-506782" data-claire-element-id="506782">a &lt;= b</p></td><td id="r-506785" data-claire-element-id="506785"><p id="r-506784" data-claire-element-id="506784"><em>a</em> est plus petit ou égal à <em>b</em></p></td></tr><tr id="r-506791" data-claire-element-id="506791"><td id="r-506788" data-claire-element-id="506788"><p id="r-506787" data-claire-element-id="506787">a &gt; b</p></td><td id="r-506790" data-claire-element-id="506790"><p id="r-506789" data-claire-element-id="506789"><em>a</em> est strictement plus grand que <em>b</em></p></td></tr><tr id="r-506796" data-claire-element-id="506796"><td id="r-506793" data-claire-element-id="506793"><p id="r-506792" data-claire-element-id="506792">a &gt;= b</p></td><td id="r-506795" data-claire-element-id="506795"><p id="r-506794" data-claire-element-id="506794"><em>a</em> est plus grand ou égal à <em>b</em></p></td></tr><tr id="r-506801" data-claire-element-id="506801"><td id="r-506798" data-claire-element-id="506798"><p id="r-506797" data-claire-element-id="506797">a &lt;=&gt; b</p></td><td id="r-506800" data-claire-element-id="506800"><p id="r-506799" data-claire-element-id="506799">Idem que <strong>=</strong> mais <em>NULL &lt;=&gt; NULL vaut 1</em> (au lieu de NULL) et <em>NULL &lt;=&gt; 1 vaut 0</em> (au lieu de NULL)</p></td></tr></tbody></table><h5 id="r-quelques-notes" data-claire-element-id="506817">Quelques notes...</h5><h6 id="r-506811" data-claire-element-id="506811">&lt;=&gt;</h6><p id="r-506805" data-claire-element-id="506805">Tout d'abord par rapport au dernier opérateur (oui je suis un grand désordonné... :p ). Il est nécessaire de revenir sur le premier opérateur pour comprendre pourquoi il est là :o :</p><p id="r-506806" data-claire-element-id="506806">Quand on compare quelque chose à une valeur NULL avec l'opérateur =, peu importe ce quelque chose, le résultat sera NULL. Et quand on fait une requête avec WHERE NULL, on ne reçoit rien...</p><p id="r-506807" data-claire-element-id="506807">Rien de grave apparemment, si c'est NULL, c'est NULL, pas de données à récupérer. ^^</p><p id="r-506808" data-claire-element-id="506808">Oui mais voilà, si on a le cas NULL = NULL, on aimerait que les données soient récupérées quand même (logique...), or avec l'opérateur =, la ligne sera ignorée, alors qu'on en a besoin !</p><p id="r-506809" data-claire-element-id="506809">C'est pour ça que l'opérateur &quot;NULL-safe equal&quot; (jargon...) a été créé. <em>NULL &lt;=&gt; NULL</em> renvoie 1 (true), et donc la ligne est récupérée quand même. :)</p><p id="r-506810" data-claire-element-id="506810">Attention toutefois à ce que la valeur 0 n'est pas la valeur NULL ! <em>0 &lt;=&gt; NULL</em> renvoie 0 (false).</p><h6 id="r-506816" data-claire-element-id="506816">&lt;&gt;</h6><p id="r-506812" data-claire-element-id="506812">Je vous ai dit que MySQL admettait 7 opérateurs, je vous ai encore menti, en fait il en admet 8. :p</p><p id="r-506813" data-claire-element-id="506813">Vous connaissez bien sûr l'opérateur de comparaison PHP <strong>!=</strong> qui permet de vérifier que 2 valeurs ne sont pas égales. Cet opérateur existe également en MySQL.</p><p id="r-506814" data-claire-element-id="506814">Toutefois je ne peux que vous déconseiller de l'utiliser. Tout d'abord parce que PHP et MySQL sont 2 langages différents et qu'il est inutile de chercher à faire en sorte qu'ils se ressemblent, et ensuite parce que ce n'est pas normalisé, donc si vous passez un jour à PostGreSQL (même si j'admet qu'en France il n'est pas encore très intégré aux sites web, imaginons que vous déménagiez aux States ^^ ), vous serez bon pour réécrire la plupart de vos requêtes... (on ne peut pas dire que l'opérateur d'inégalité soit rare dans les requêtes ^^ ).</p><p id="r-506815" data-claire-element-id="506815">Enfin en bref je vous conseille de jeter != à la poubelle pour les requêtes SQL et d'utiliser exclusivement <strong>&lt;&gt;</strong>.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
<span class="arrow"></span>
<span class="next">A propos de la clause WHERE...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
<span class="next">(NOT) BETWEEN, IN et LIKE</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="NOTBETWEENINetLIKE"></a><h2>(NOT) BETWEEN, IN et LIKE</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
<span class="arrow"></span>
<span class="next">Les opérateurs de comparaison</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
<span class="next">[Problème SQL] Qui est plus grand que le dernier plus grand ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-not-between-in-et-like" data-claire-element-id="506844">(NOT) BETWEEN, IN et LIKE</h4><p id="r-506819" data-claire-element-id="506819">Voici quelques mots-clefs qu'il est vraiment intéressant de connaitre. :p</p><h5 id="r-not-between" data-claire-element-id="506827">(NOT) BETWEEN</h5><p id="r-506820" data-claire-element-id="506820">Celui-ci vous permet de vérifier qu'une valeur est comprise entre 2 valeurs données. Ca fonctionne évidemment pour les nombres mais également pour les chaînes de caractères. :)</p><p id="r-506821" data-claire-element-id="506821">Quelques exemples...</p><pre id="r-506822" data-claire-element-id="506822"><code data-claire-semantic="sql">SELECT nws_id, nws_nb_vues FROM t_news WHERE nws_nb_vues BETWEEN 0 AND 1000;
SELECT nws_id, nws_auteur FROM t_news WHERE nws_auteur BETWEEN 'h' AND 'w';
SELECT nws_id, nws_date FROM t_news WHERE nws_date BETWEEN '2007-06-03' AND '2007-06-13'; -- Ma date d'anniversaire et celle de mon filleul :-° :p</code></pre><figure id="r-506824" data-claire-element-id="506825"><img id="r-506823" data-claire-element-id="506823" src="medias/uploads.siteduzero.com_files_75001_76000_75041.png" alt="Utilisation du mot-clef BETWEEN"/></figure><p id="r-506826" data-claire-element-id="506826">Evidemment, ajouter le mot-clef NOT devant BETWEEN permet de vérifier que les valeurs <strong>ne sont pas</strong> comprises entre les 2 arguments reçus par BETWEEN.</p><h5 id="r-not-in-1" data-claire-element-id="506834">(NOT) IN</h5><p id="r-506828" data-claire-element-id="506828">Très pratique également, surtout en conjonction avec PHP, ce mot-clef permet de vérifier qu'une valeur se trouve dans une liste d'arguments reçus par IN (NOT IN permet de vérifier qu'elle ne s'y trouve pas ^^ ).</p><p id="r-506829" data-claire-element-id="506829">On passe directement aux exemples, rien de compliqué. ^^</p><pre id="r-506830" data-claire-element-id="506830"><code data-claire-semantic="sql">SELECT DISTINCT cmt_auteur FROM t_commentaire WHERE cmt_auteur NOT IN ( 'shepard', 'karamilo' );
SELECT nws_id, nws_date FROM t_news WHERE DAY(nws_date) IN ( 5, 8 );
SELECT nws_id, nws_catid FROM t_news WHERE nws_catid IN ( 2, 3 );</code></pre><figure id="r-506832" data-claire-element-id="506833"><img id="r-506831" data-claire-element-id="506831" src="medias/uploads.siteduzero.com_files_75001_76000_75045.png" alt="utilisation du mot-clef IN"/></figure><h5 id="r-not-like" data-claire-element-id="506843">(NOT) LIKE</h5><p id="r-506835" data-claire-element-id="506835">C'est certainement le plus connu des 3... LIKE permet de vérifier une expression régulière simple, c'est à dire par exemple qu'une chaîne commence par &quot;abc&quot; ou termine par &quot;xyz&quot;...</p><p id="r-506836" data-claire-element-id="506836">LIKE admet 2 &quot;jokers&quot; : % et _.</p><p id="r-506837" data-claire-element-id="506837"><strong>%</strong> remplace n'importe quelle chaîne de caractères (y compris une chaine vide).<br/><strong>_</strong> remplace un seul caractère.</p><p id="r-506838" data-claire-element-id="506838">On passe aux exemples :</p><pre id="r-506839" data-claire-element-id="506839"><code data-claire-semantic="sql">SELECT DISTINCT nws_auteur FROM t_news WHERE nws_auteur LIKE '%k%'; -- Tous les auteurs qui ont au moins un &quot;k&quot; dans leur pseudo
SELECT DISTINCT nws_auteur FROM t_news WHERE nws_auteur LIKE '%o'; -- Tous les auteurs dont le pseudo se termine par &quot;o&quot;
SELECT DISTINCT cmt_auteur FROM t_commentaire WHERE cmt_auteur NOT LIKE '%r%'; -- Tous les auteurs dont le pseudo ne contient pas de &quot;r&quot;</code></pre><figure id="r-506841" data-claire-element-id="506842"><img id="r-506840" data-claire-element-id="506840" src="medias/uploads.siteduzero.com_files_75001_76000_75054.png" alt="Utilisation du mot-clef LIKE"/></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
<span class="arrow"></span>
<span class="next">Les opérateurs de comparaison</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
<span class="next">[Problème SQL] Qui est plus grand que le dernier plus grand ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ProblmeSQLQuiestplusgrandqueledernierplusgrand"></a><h2>[Problème SQL] Qui est plus grand que le dernier plus grand ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
<span class="arrow"></span>
<span class="next">(NOT) BETWEEN, IN et LIKE</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">
<span class="next">Un peu de stats avec GROUP BY ( 1 / 2 )</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand" data-claire-element-id="506909">[Problème SQL] Qui est plus grand que le dernier plus grand ?</h4><p id="r-506845" data-claire-element-id="506845">Ce problème utilise 2 fonctions SQL que vous ne connaissez pas encore : il s'agit de GREATEST() et LEAST().</p><p id="r-506846" data-claire-element-id="506846">GREATEST renvoie l'argument le plus grand qu'il reçoit, tandis que LEAST() renvoie l'argument le plus petit.</p><p id="r-506847" data-claire-element-id="506847">Exemples :</p><pre id="r-506848" data-claire-element-id="506848"><code data-claire-semantic="sql">SELECT GREATEST(1, 85, 49, 20, 92, 10); -- Renvoie 92
SELECT LEAST(1, 85, 49, 20, 92, 10); -- Renvoie 1</code></pre><h5 id="r-le-probleme-mouahah-vous-allez-souffrir" data-claire-element-id="506868">Le problème (mouahah vous allez souffrir ^^ )</h5><p id="r-506849" data-claire-element-id="506849">On se sert exclusivement de la table t_news.</p><p id="r-506850" data-claire-element-id="506850">Le but : afficher un tableau qui donne :</p><ul id="r-506855" data-claire-element-id="506855"><li id="r-506852" data-claire-element-id="506852"><p id="r-506851" data-claire-element-id="506851">l'id de la news (nws_id) ;</p></li><li id="r-506854" data-claire-element-id="506854"><p id="r-506853" data-claire-element-id="506853">le nombre de vues de la news (nws_nb_vues).</p></li></ul><p id="r-506856" data-claire-element-id="506856">Bon évidemment ce n'est pas tout. :D</p><p id="r-506857" data-claire-element-id="506857">Il faut afficher uniquement les lignes où nws_nb_vues est plus grand que l'élément précédent.</p><p id="r-506858" data-claire-element-id="506858">Vous devrez donc obtenir ce résultat :</p><figure id="r-506860" data-claire-element-id="506861"><img id="r-506859" data-claire-element-id="506859" src="medias/uploads.siteduzero.com_files_75001_76000_75056.png" alt="Résultat attendu pour le problème 2"/></figure><p id="r-506862" data-claire-element-id="506862">En effet la première est de toute façon affichée (837), la seconde a 139, c'est moins que 837, donc on ne l'affiche pas, pareil pour la troisième (42 &lt; 837). La quatrième a 1235 vues, c'est plus que 837, donc on l'affiche, idem pour la cinquième (2154 &gt; 1235), la dernière a 0 vue, donc on ne l'affiche pas.</p><p id="r-506863" data-claire-element-id="506863">Un petit indice :</p><div id="r-506866" data-claire-element-id="506866"><div id="r-506865" data-claire-element-id="506865"><p id="r-506864" data-claire-element-id="506864">Utilisez les variables utilisateur (il vous faudra donc une (ou des) requêtes pour initialiser cette (ces) variable(s)).</p></div></div><p id="r-506867" data-claire-element-id="506867">Si vous y arrivez, essayez ensuite de le faire en utilisant une des deux fonctions que je vous ai présentées plus haut, c'est assez rigolo. ^^</p><h5 id="r-la-solution-16" data-claire-element-id="506908">La solution</h5><p id="r-506869" data-claire-element-id="506869">Vous avez réussi ? Si pas ce n'est pas grave, 50 pompes et on n'en parles plus je comprends parfaitement que ces problèmes soient loin d'être faciles à réaliser, disons que je trouve ça pratique pour se rendre compte qu'il existe des tonnes de façons de faire une requête SQL ! De plus si vous parvenez à les résoudre, vous serez aptes à surmonter la plupart des difficultés que vous rencontrerez lorsque vous programmerez &quot;pour de vrai&quot; ! :)</p><p id="r-506870" data-claire-element-id="506870">Voilà la solution :</p><p id="r-506871" data-claire-element-id="506871"></p><div id="r-506877" data-claire-element-id="506877"><div id="r-506875" data-claire-element-id="506876"><img id="r-506876" data-claire-element-id="506875" src="medias/uploads.siteduzero.com_files_75001_76000_75060.png" alt="Solution au problème"/><pre id="r-506872" data-claire-element-id="506872"><code data-claire-semantic="sql">SET @a := 1; SET @b := 0; SELECT @a := nws_id AS nws_id, @b := nws_nb_vues AS nws_nb_vues FROM t_news WHERE nws_nb_vues &gt; @b;

-- Avec GREATEST:
SET @a := 1; SET @b := 0; SELECT @a := nws_id AS nws_id, @b := nws_nb_vues AS nws_nb_vues FROM t_news WHERE nws_nb_vues = GREATEST(@b, nws_nb_vues);</code></pre><p id="r-506873" data-claire-element-id="506873">Encore une fois, ce n'est vraiment pas un problème si vous ne l'avez pas trouvée par vous-mêmes. ;)</p><p id="r-506874" data-claire-element-id="506874">En passant, remarquez que la variable @b vaut maintenant le maximum de vues qu'une news peut avoir. :p</p></div></div><p id="r-506878" data-claire-element-id="506878">Une variante : faites la même chose mais en ordre décroissant. :p</p><p id="r-506879" data-claire-element-id="506879">Vous devez obtenir le résultat suivant :</p><figure id="r-506881" data-claire-element-id="506882"><img id="r-506880" data-claire-element-id="506880" src="medias/uploads.siteduzero.com_files_75001_76000_75061.png" alt="Problème 2 - Résultat attendu pour la variante :p"/></figure><p id="r-506883" data-claire-element-id="506883">Good luck ! La solution est juste en dessous. :p</p><p id="r-506884" data-claire-element-id="506884"></p><div id="r-506891" data-claire-element-id="506891"><div id="r-506889" data-claire-element-id="506890"><img id="r-506890" data-claire-element-id="506889" src="medias/uploads.siteduzero.com_files_75001_76000_75062.png" alt="Solution de la variante"/><p id="r-506885" data-claire-element-id="506885">Ici un petit problème se pose : la valeur initiale de @b ne peut pas être 0 mais doit être plus grand que le nombre de vues de la première news (d'où le <em>+ 1</em>).</p><p id="r-506886" data-claire-element-id="506886">Avec LEAST, il suffit de donner à @b le nombre de vues de la première news. :)</p><pre id="r-506887" data-claire-element-id="506887"><code data-claire-semantic="sql">SET @a := 1; SET @b := ( SELECT nws_nb_vues + 1 FROM t_news WHERE nws_id = 1 ); SELECT @a := nws_id AS nws_id, @b := nws_nb_vues AS nws_nb_vues FROM t_news WHERE nws_nb_vues &lt; @b;
SET @a := 1; SET @b := ( SELECT nws_nb_vues FROM t_news WHERE nws_id = 1 ); SELECT @a := nws_id AS nws_id, @b := nws_nb_vues AS nws_nb_vues FROM t_news WHERE nws_nb_vues = LEAST(@b, nws_nb_vues);</code></pre><p id="r-506888" data-claire-element-id="506888">Voilà, cette fois-ci @b vaut le plus petit nombre de vues qu'une news possède. :)</p></div></div><p id="r-506892" data-claire-element-id="506892">J'espère que ça vous a plu, en gros on vient de réinventer les fonctions MIN et MAX que vous connaissiez peut-être déjà, et que vous connaitrez certainement (du moins je l'espère) d'ici le prochain chapitre. :) :p</p><p id="r-506893" data-claire-element-id="506893">Un petit résumé de ce chapitre :</p><ul id="r-506906" data-claire-element-id="506906"><li id="r-506895" data-claire-element-id="506895"><p id="r-506894" data-claire-element-id="506894">Les opérateurs de comparaison : =, &lt;=&gt;, &lt;&gt;, &lt;, &lt;=, &gt;, &gt;=</p></li><li id="r-506897" data-claire-element-id="506897"><p id="r-506896" data-claire-element-id="506896">SELECT ... FROM ... WHERE ... BETWEEN x AND y;</p></li><li id="r-506899" data-claire-element-id="506899"><p id="r-506898" data-claire-element-id="506898">SELECT ... FROM ... WHERE ... IN ( a, b, c, d, ... );</p></li><li id="r-506901" data-claire-element-id="506901"><p id="r-506900" data-claire-element-id="506900">SELECT ... FROM ... WHERE ... LIKE 'expression'; ( %: chaine | _: caractère )</p></li><li id="r-506903" data-claire-element-id="506903"><p id="r-506902" data-claire-element-id="506902">GREATEST(x, y, z) renvoie le plus grand nombre (ou chaîne de caractères ou date)</p></li><li id="r-506905" data-claire-element-id="506905"><p id="r-506904" data-claire-element-id="506904">LEAST(x, y, z) fait la même chose avec le plus petit.</p></li></ul><p id="r-506907" data-claire-element-id="506907">Voilà, ya plus qu'à attendre la suite. :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
<span class="arrow"></span>
<span class="next">(NOT) BETWEEN, IN et LIKE</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">
<span class="next">Un peu de stats avec GROUP BY ( 1 / 2 )</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UnpeudestatsavecGROUPBY1_2"></a><h2>Un peu de stats avec GROUP BY ( 1 / 2 )</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
<span class="arrow"></span>
<span class="next">[Problème SQL] Qui est plus grand que le dernier plus grand ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
<span class="next">Les fonctions statistiques de MySQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-506911" data-claire-element-id="506911">Entrons enfin dans le vif du sujet. :)</p><p id="r-506912" data-claire-element-id="506912">Si vous avez juste suivi le cours de M@teo21, ce que vous allez apprendre dans les 2 prochains chapitres sera totalement nouveau pour vous, c'est pourquoi j'essaierai d'être aussi clair et concis que possible. :)</p><p id="r-506913" data-claire-element-id="506913">J'ai décidé de diviser ce point en 2 chapitres puisqu'il est assez conséquent. Ce premier chapitre sera consacré à mettre en place les bases des fonctions d'aggrégation et de la clause GROUP BY. Tandis que le second fouillera les fonctionnalités un peu plus avancées de toutes ces notions. :)</p>
</div><a name="LesfonctionsstatistiquesdeMySQL"></a><h2>Les fonctions statistiques de MySQL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">
<span class="arrow"></span>
<span class="next">Un peu de stats avec GROUP BY ( 1 / 2 )</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
<span class="next">Grouper les données avec GROUP BY</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fonctions-statistiques-de-mysql" data-claire-element-id="507067">Les fonctions statistiques de MySQL</h4><p id="r-506914" data-claire-element-id="506914">MySQL propose toute une série de fonctions qui permettent de faire des stats sur vos tables, en résumé... :)</p><h5 id="r-les-fonctions-courantes" data-claire-element-id="506972">Les fonctions courantes</h5><table id="r-506971" data-claire-element-id="506971"><thead id="r-506924" data-claire-element-id="506924"><tr id="r-506923" data-claire-element-id="506923"><th id="r-506916" data-claire-element-id="506916"><p id="r-506915" data-claire-element-id="506915">Fonction</p></th><th id="r-506918" data-claire-element-id="506918"><p id="r-506917" data-claire-element-id="506917">Explication</p></th><th id="r-506920" data-claire-element-id="506920"><p id="r-506919" data-claire-element-id="506919">Exemple</p></th><th id="r-506922" data-claire-element-id="506922"><p id="r-506921" data-claire-element-id="506921">Résultat</p></th></tr></thead><tbody id="r-506970" data-claire-element-id="506970"><tr id="r-506933" data-claire-element-id="506933"><td id="r-506926" data-claire-element-id="506926"><p id="r-506925" data-claire-element-id="506925">COUNT()</p></td><td id="r-506928" data-claire-element-id="506928"><p id="r-506927" data-claire-element-id="506927">Nombre de lignes</p></td><td id="r-506930" data-claire-element-id="506930"><pre id="r-506929" data-claire-element-id="506929"><code data-claire-semantic="sql">SELECT COUNT(nws_id) FROM t_news;</code></pre></td><td id="r-506932" data-claire-element-id="506932"><p id="r-506931" data-claire-element-id="506931">6</p></td></tr><tr id="r-506942" data-claire-element-id="506942"><td id="r-506935" data-claire-element-id="506935"><p id="r-506934" data-claire-element-id="506934">MAX()</p></td><td id="r-506937" data-claire-element-id="506937"><p id="r-506936" data-claire-element-id="506936">Renvoie la valeur maximale</p></td><td id="r-506939" data-claire-element-id="506939"><pre id="r-506938" data-claire-element-id="506938"><code data-claire-semantic="sql">SELECT MAX(nws_nb_vues) FROM t_news;</code></pre></td><td id="r-506941" data-claire-element-id="506941"><p id="r-506940" data-claire-element-id="506940">2154</p></td></tr><tr id="r-506951" data-claire-element-id="506951"><td id="r-506944" data-claire-element-id="506944"><p id="r-506943" data-claire-element-id="506943">MIN()</p></td><td id="r-506946" data-claire-element-id="506946"><p id="r-506945" data-claire-element-id="506945">Renvoie la valeur minimale</p></td><td id="r-506948" data-claire-element-id="506948"><pre id="r-506947" data-claire-element-id="506947"><code data-claire-semantic="sql">SELECT MIN(nws_nb_vues) FROM t_news;</code></pre></td><td id="r-506950" data-claire-element-id="506950"><p id="r-506949" data-claire-element-id="506949">0</p></td></tr><tr id="r-506960" data-claire-element-id="506960"><td id="r-506953" data-claire-element-id="506953"><p id="r-506952" data-claire-element-id="506952">SUM()</p></td><td id="r-506955" data-claire-element-id="506955"><p id="r-506954" data-claire-element-id="506954">Renvoie la somme des valeurs</p></td><td id="r-506957" data-claire-element-id="506957"><pre id="r-506956" data-claire-element-id="506956"><code data-claire-semantic="sql">SELECT SUM(nws_nb_vues) FROM t_news;</code></pre></td><td id="r-506959" data-claire-element-id="506959"><p id="r-506958" data-claire-element-id="506958">4407</p></td></tr><tr id="r-506969" data-claire-element-id="506969"><td id="r-506962" data-claire-element-id="506962"><p id="r-506961" data-claire-element-id="506961">AVG()</p></td><td id="r-506964" data-claire-element-id="506964"><p id="r-506963" data-claire-element-id="506963">Renvoie la moyenne (Average) des valeurs</p></td><td id="r-506966" data-claire-element-id="506966"><pre id="r-506965" data-claire-element-id="506965"><code data-claire-semantic="sql">SELECT AVG(nws_nb_vues) FROM t_news;</code></pre></td><td id="r-506968" data-claire-element-id="506968"><p id="r-506967" data-claire-element-id="506967">734.5000</p></td></tr></tbody></table><h5 id="r-les-fonctions-de-linearisation" data-claire-element-id="507026">Les fonctions de linéarisation</h5><p id="r-506973" data-claire-element-id="506973">Il existe également d'autres fonctions permettant de calculer la variance et l'écart-type d'une population ou d'un échantillon (pour ceux qui sont allergiques aux maths, je propose que vous évitiez d'essayer de comprendre ce paragraphe :D ).</p><p id="r-506974" data-claire-element-id="506974">Ce sera certainement utile à quelques uns d'entre vous, donc je vous mets ces fonctions au nombre de 4 si on ne compte pas les dérivés non-standards créés par MySQL (on se demande pourquoi d'ailleurs...).</p><table id="r-507022" data-claire-element-id="507022"><thead id="r-506984" data-claire-element-id="506984"><tr id="r-506983" data-claire-element-id="506983"><th id="r-506976" data-claire-element-id="506976"><p id="r-506975" data-claire-element-id="506975">Fonction</p></th><th id="r-506978" data-claire-element-id="506978"><p id="r-506977" data-claire-element-id="506977">Explication</p></th><th id="r-506980" data-claire-element-id="506980"><p id="r-506979" data-claire-element-id="506979">Exemple</p></th><th id="r-506982" data-claire-element-id="506982"><p id="r-506981" data-claire-element-id="506981">Résultat</p></th></tr></thead><tbody id="r-507021" data-claire-element-id="507021"><tr id="r-506993" data-claire-element-id="506993"><td id="r-506986" data-claire-element-id="506986"><p id="r-506985" data-claire-element-id="506985">VAR_POP</p></td><td id="r-506988" data-claire-element-id="506988"><p id="r-506987" data-claire-element-id="506987">Variance d'une population</p></td><td id="r-506990" data-claire-element-id="506990"><pre id="r-506989" data-claire-element-id="506989"><code data-claire-semantic="sql">SELECT VAR_POP(nws_nb_vues) FROM t_news;</code></pre></td><td id="r-506992" data-claire-element-id="506992"><p id="r-506991" data-claire-element-id="506991">608275.5833</p></td></tr><tr id="r-507002" data-claire-element-id="507002"><td id="r-506995" data-claire-element-id="506995"><p id="r-506994" data-claire-element-id="506994">STDDEV_POP</p></td><td id="r-506997" data-claire-element-id="506997"><p id="r-506996" data-claire-element-id="506996">Ecart-type d'une population</p></td><td id="r-506999" data-claire-element-id="506999"><pre id="r-506998" data-claire-element-id="506998"><code data-claire-semantic="sql">SELECT STDDEV_POP(nws_nb_vues) FROM t_news;</code></pre></td><td id="r-507001" data-claire-element-id="507001"><p id="r-507000" data-claire-element-id="507000">779.9202</p></td></tr><tr id="r-507011" data-claire-element-id="507011"><td id="r-507004" data-claire-element-id="507004"><p id="r-507003" data-claire-element-id="507003">VAR_SAMP</p></td><td id="r-507006" data-claire-element-id="507006"><p id="r-507005" data-claire-element-id="507005">Variance d'un échantillon</p></td><td id="r-507008" data-claire-element-id="507008"><pre id="r-507007" data-claire-element-id="507007"><code data-claire-semantic="sql">SELECT VAR_SAMP(nws_nb_vues) FROM t_news;</code></pre></td><td id="r-507010" data-claire-element-id="507010"><p id="r-507009" data-claire-element-id="507009">729930.7000</p></td></tr><tr id="r-507020" data-claire-element-id="507020"><td id="r-507013" data-claire-element-id="507013"><p id="r-507012" data-claire-element-id="507012">STDDEV_SAMP</p></td><td id="r-507015" data-claire-element-id="507015"><p id="r-507014" data-claire-element-id="507014">Ecart-type d'un échantillon</p></td><td id="r-507017" data-claire-element-id="507017"><pre id="r-507016" data-claire-element-id="507016"><code data-claire-semantic="sql">SELECT STDDEV_SAMP(nws_nb_vues) FROM t_news;</code></pre></td><td id="r-507019" data-claire-element-id="507019"><p id="r-507018" data-claire-element-id="507018">854.3598</p></td></tr></tbody></table><p id="r-507023" data-claire-element-id="507023">Évidemment, comme nous avons des données qui ne se prêtent pas vraiment à la linéarité, les variances et écarts-types sont absolument... anarchiques. :p Avec des vraies données vous aurez bien sûr des résultats plus raisonnables. :)</p><p id="r-507024" data-claire-element-id="507024">Pour ceux qui commencent à attraper des boutons, rassurez-vous, les maths c'est à peu près terminé. :D :p</p><p id="r-507025" data-claire-element-id="507025">Quelques notes par rapport à tout ça...</p><h5 id="r-count-distinct-champ" data-claire-element-id="507048">COUNT(DISTINCT <em>champ</em>)</h5><p id="r-507027" data-claire-element-id="507027">Je vous ai présenté la fonction COUNT() sous sa forme la plus simple, il y a plusieurs subtilités relativement intéressantes. :)</p><p id="r-507028" data-claire-element-id="507028">A commencer par le fait d'ajouter DISTINCT avant le nom de la colonne, ce qui permet, vous vous en doutez certainement, de ne pas prendre en compte les doublons. :)</p><p id="r-507029" data-claire-element-id="507029">Un petit exemple :</p><pre id="r-507030" data-claire-element-id="507030"><code data-claire-semantic="sql">SELECT COUNT(nws_auteur) AS nbr_tot, COUNT(DISTINCT nws_auteur) AS nbr_distinct FROM t_news;</code></pre><p id="r-507031" data-claire-element-id="507031">Pour rappel on a 6 news écrites par Alexi, karamilo, karamilo, alexi, karamilo et visiteur.</p><p id="r-507032" data-claire-element-id="507032">Le résultat de notre requête :</p><figure id="r-507034" data-claire-element-id="507035"><img id="r-507033" data-claire-element-id="507033" src="medias/uploads.siteduzero.com_files_75001_76000_75501.png" alt="COUNT avec le mot-clef DISTINCT"/></figure><p id="r-507036" data-claire-element-id="507036">Autre possibilité qui, même si elle peut paraître évidente pour certains, ne l'est pas pour d'autres : on peut utiliser des fonctions à l'intérieur de COUNT. Par exemple avec un IF :</p><pre id="r-507037" data-claire-element-id="507037"><code data-claire-semantic="sql">SELECT COUNT(DISTINCT IF(nws_auteur='karamilo', 'Alexi Laiho', nws_auteur)) FROM t_news;</code></pre><figure id="r-507039" data-claire-element-id="507040"><img id="r-507038" data-claire-element-id="507038" src="medias/uploads.siteduzero.com_files_75001_76000_75505.png" alt="Utilisation de COUNT avec une fonction"/></figure><p id="r-507041" data-claire-element-id="507041">Notez enfin que la fonction COUNT() <strong>ne prend pas en compte la valeur NULL</strong>. Ainsi, la requête suivante renverra 3 :</p><pre id="r-507042" data-claire-element-id="507042"><code data-claire-semantic="sql">SELECT COUNT(NULLIF(nws_auteur, 'karamilo')) FROM t_news;</code></pre><aside id="r-507044" data-claire-element-id="507044" data-claire-semantic="information"><p id="r-507043" data-claire-element-id="507043">NULLIF(a1, a2) renvoie NULL si a1 = a2, sinon elle renvoie a1.</p></aside><figure id="r-507046" data-claire-element-id="507047"><img id="r-507045" data-claire-element-id="507045" src="medias/uploads.siteduzero.com_files_75001_76000_75506.png" alt="COUNT ne prend pas en compte les valeurs NULL"/></figure><h5 id="r-count-et-avg-ne-prennent-pas-null-en-compte-mais-bien-les-0" data-claire-element-id="507058">COUNT et AVG ne prennent pas NULL en compte, mais bien les 0 !</h5><p id="r-507049" data-claire-element-id="507049">C'est vrai également mais moins important pour les fonctions SUM, MIN et MAX.</p><p id="r-507050" data-claire-element-id="507050">On vient de voir de quoi il en retourne pour la fonction COUNT.</p><p id="r-507051" data-claire-element-id="507051">Pour la fonction AVG, c'est important également de le savoir puisque la valeur 0 influe très fortement une moyenne. Ainsi, si on veut la moyenne du nombre de vues par news sans compter les news où ce nombre vaut 0, la requête suivante ferait l'affaire :</p><pre id="r-507052" data-claire-element-id="507052"><code data-claire-semantic="sql">SELECT AVG(NULLIF(nws_nb_vues, 0)) FROM t_news;</code></pre><figure id="r-507054" data-claire-element-id="507055"><img id="r-507053" data-claire-element-id="507053" src="medias/uploads.siteduzero.com_files_75001_76000_75507.png" alt="AVG et sa gestion des valeurs NULL"/></figure><aside id="r-507057" data-claire-element-id="507057" data-claire-semantic="information"><p id="r-507056" data-claire-element-id="507056">AVG() est strictement la même chose que SUM() / COUNT(), même si COUNT() renvoie 0 (c'est-à-dire qu'il n'y a pas de ligne à traiter), le résultat sera 0, c'est une exception qui permet de ne pas devoir prévoir d'exception quand il n'y a aucune ligne dans la table traitée. :p</p></aside><h5 id="r-count-pour-compter-toutes-les-entrees-de-la-table-d-un-coup" data-claire-element-id="507066">COUNT(*) pour compter toutes les entrées de la table d'un coup</h5><pre id="r-507059" data-claire-element-id="507059"><code data-claire-semantic="sql">SELECT COUNT(*) FROM t_news;</code></pre><p id="r-507060" data-claire-element-id="507060">En général, l'étoile c'est mal, mais voici un des rare cas où... C'est bien. :p</p><p id="r-507061" data-claire-element-id="507061">En effet si vous utilisez COUNT(*) sur une table, MySQL ira chercher directement la valeur dans ses statistiques à lui et vous enverra ce nombre en un temps record : il ne devra pas parcourir toute la table. :)</p><p id="r-507062" data-claire-element-id="507062">Bien sûr, COUNT(DISTINCT *) ne rime à rien et vous renverra une erreur. ^^</p><p id="r-507063" data-claire-element-id="507063">Enfin, à moins que toute la ligne ne soit NULL, COUNT(*) prend cette ligne en compte (vous pouvez vérifier avec la table <em>t_commentaire</em>).</p><p id="r-507064" data-claire-element-id="507064">Hop ! Fin de la sous-partie. :)</p><p id="r-507065" data-claire-element-id="507065">C'était le plus simple ^^ (à expliquer du moins :p ). Normalement vous commencez à comprendre pourquoi j'ai décidé de diviser ce chapitre en 2 parties. :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">
<span class="arrow"></span>
<span class="next">Un peu de stats avec GROUP BY ( 1 / 2 )</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
<span class="next">Grouper les données avec GROUP BY</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="GrouperlesdonnesavecGROUPBY"></a><h2>Grouper les données avec GROUP BY</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
<span class="arrow"></span>
<span class="next">Les fonctions statistiques de MySQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
<span class="next">Les fonctions statistiques agissent sur des groupes !!</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-grouper-les-donnees-avec-group-by" data-claire-element-id="507111">Grouper les données avec GROUP BY</h4><p id="r-507068" data-claire-element-id="507068">Voici un concept relativement complexe à introduire et pourtant relativement fondamental et vraiment très puissant !</p><p id="r-507069" data-claire-element-id="507069">Pour la partie théorique, GROUP BY permet de grouper les données selon un certain critère, mais cela ne vous aide guère... C'est pourquoi je vous propose de voir celà avec un exemple. :)</p><p id="r-507070" data-claire-element-id="507070">Prenons l'éternelle table t_news, nous ne nous intéressons qu'aux champs nws_id, nws_catid, nws_auteur et nws_titre.</p><p id="r-507071" data-claire-element-id="507071">A l'intérieur de la table, il y a 6 éléments, composés entre autres des 4 champs précités :</p><figure id="r-507073" data-claire-element-id="507074"><img id="r-507072" data-claire-element-id="507072" src="medias/uploads.siteduzero.com_files_75001_76000_75543.png" alt="La table dans son état initial"/></figure><p id="r-507075" data-claire-element-id="507075">Intéressons-nous plus particulièrement au champ nws_auteur :</p><figure id="r-507077" data-claire-element-id="507078"><img id="r-507076" data-claire-element-id="507076" src="medias/uploads.siteduzero.com_files_75001_76000_75541.png" alt="Le critère selon lequel nous allons grouper"/></figure><p id="r-507079" data-claire-element-id="507079">On constate qu'il y a 3 auteurs différents : karamilo, Alexi Laiho et un visiteur en quête du savoir absolu. :p On pourrait donc imaginer (soyons fous !) diviser notre table en 3 groupes, comme ceci :</p><figure id="r-507081" data-claire-element-id="507082"><img id="r-507080" data-claire-element-id="507080" src="medias/uploads.siteduzero.com_files_75001_76000_75542.png" alt="On divise la table en 3 groupes"/></figure><p id="r-507083" data-claire-element-id="507083">Vous avez compris ce qu'on a fait ? Si oui vous avez compris ce que GROUP BY fait. :) C'est <strong>exactement la même chose</strong>. Il prend des données, regarde une certaine colonne et fait des groupes en fonction de cette colonne.</p><p id="r-507084" data-claire-element-id="507084">Voilà. :)</p><div id="r-507086" data-claire-element-id="507086" data-claire-semantic="question"><p id="r-507085" data-claire-element-id="507085">Euh... Tu rigoles de nous là ?? Tu nous avait dit que GROUP BY était très puissant !!</p></div><p id="r-507087" data-claire-element-id="507087">Tout d'abord je vous parle de GROUP BY sans arrêt mais vous ne savez toujours pas comment on l'intègre dans une requête SQL... Si l'on considère qu'on groupe selon la colonne nws_auteur, le GROUP BY se ferait comme ceci :</p><pre id="r-507088" data-claire-element-id="507088"><code data-claire-semantic="sql">SELECT champs FROM t_news GROUP BY nws_auteur;</code></pre><p id="r-507089" data-claire-element-id="507089">Ensuite, c'est vrai que tout seul, GROUP BY ne sert pas à grand chose... L'énorme utilité de GROUP BY, c'est qu'on peut faire des requêtes SELECT sur chaque groupe individuellement : il faut voir votre table non plus comme une table de 6 lignes mais comme une table de 3 groupes : <strong>SELECT agit sur un groupe, plus sur une ligne !!!</strong></p><figure id="r-507091" data-claire-element-id="507092"><img id="r-507090" data-claire-element-id="507090" src="medias/uploads.siteduzero.com_files_75001_76000_75544.png" alt="SELECT agit sur un groupe en entier"/></figure><p id="r-507093" data-claire-element-id="507093">Je vous explique un peu ce que je veux dire :</p><p id="r-507094" data-claire-element-id="507094">Quand vous faites un SELECT normal, MySQL vous renvoie des infos <strong>ligne par ligne</strong>. En général il s'agit de données simples.</p><p id="r-507095" data-claire-element-id="507095">Par contre, quand vous faites un SELECT contenant une clause GROUP BY, MySQL vous renvoie des infos <strong>groupe par groupe</strong> ! Et ce concept est très important. En effet, ça veut dire par exemple que ça n'a plus de sens de demander le nws_id de ce groupe puisque ce groupe possède plusieurs champs nws_id différents !</p><p id="r-507096" data-claire-element-id="507096">Ainsi la requête suivante:</p><pre id="r-507097" data-claire-element-id="507097"><code data-claire-semantic="sql">SELECT nws_id FROM t_news GROUP BY nws_auteur;</code></pre><p id="r-507098" data-claire-element-id="507098">n'a aucun sens ! MySQL pourrait aussi bien nous renvoyer 2, 3 ou 5 !</p><aside id="r-507100" data-claire-element-id="507100" data-claire-semantic="information"><p id="r-507099" data-claire-element-id="507099">Si vous essayez d'exécuter cette requête, MySQL vous renverra l'un des trois, généralement le premier du groupe, mais ne prenez <strong>jamais</strong> le risque de faire ce genre de suppositions dans un script supposé fonctionnel !!</p></aside><p id="r-507101" data-claire-element-id="507101">Par contre, il est tout à fait sensé de récupérer la colonne selon laquelle on a effectué le groupage, à savoir dans ce cas-ci nws_auteur :</p><pre id="r-507102" data-claire-element-id="507102"><code data-claire-semantic="sql">SELECT nws_auteur FROM t_news GROUP BY nws_auteur;</code></pre><figure id="r-507104" data-claire-element-id="507105"><img id="r-507103" data-claire-element-id="507103" src="medias/uploads.siteduzero.com_files_75001_76000_75552.png" alt="Récupérer la colonne référencée dans la clause GROUP BY a forcément du sens"/></figure><p id="r-507106" data-claire-element-id="507106">Tiens c'est rigolo, ça fait le même qu'avec un DISTINCT. :p</p><p id="r-507107" data-claire-element-id="507107">N'oubliez jamais qu'avec GROUP BY, SELECT agit sur un ensemble de lignes et non plus sur une ligne précise !</p><div id="r-507109" data-claire-element-id="507109" data-claire-semantic="question"><p id="r-507108" data-claire-element-id="507108">Mais dans ce cas, à quoi ça sert ?? C'est quand même pas juste une façon loufoque de faire un SELECT DISTINCT ???</p></div><p id="r-507110" data-claire-element-id="507110">Je vous propose de lire la prochaine sous-partie qui vous éclairera sans doute sur ce point. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
<span class="arrow"></span>
<span class="next">Les fonctions statistiques de MySQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
<span class="next">Les fonctions statistiques agissent sur des groupes !!</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesfonctionsstatistiquesagissentsurdesgroupes"></a><h2>Les fonctions statistiques agissent sur des groupes !!</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
<span class="arrow"></span>
<span class="next">Grouper les données avec GROUP BY</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">
<span class="next">Un peu de stats avec GROUP BY ( 2 / 2 )</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fonctions-statistiques-agissent-sur-des-groupes" data-claire-element-id="507146">Les fonctions statistiques agissent sur des groupes !!</h4><p id="r-507112" data-claire-element-id="507112">Et là... C'est la révélation, vous avez tout compris maintenant non ? :p</p><p id="r-507113" data-claire-element-id="507113">La principale utilité de GROUP BY, c'est de diviser une table en groupes, et ensuite, sur ces groupes, on peut appliquer les fonctions MIN(), MAX(), SUM(), COUNT(), AVG(), ... vues juste avant. :)</p><p id="r-507114" data-claire-element-id="507114">Ainsi, si on veut connaître le nombre total de vues pour chaque auteur, on peut faire :</p><pre id="r-507115" data-claire-element-id="507115"><code data-claire-semantic="sql">SELECT nws_auteur, SUM(nws_nb_vues) AS nb_vues_tot FROM t_news GROUP BY nws_auteur;</code></pre><p id="r-507116" data-claire-element-id="507116">Si on veut le nombre moyen de vues pour les news de chaque auteur, on fait :</p><pre id="r-507117" data-claire-element-id="507117"><code data-claire-semantic="sql">SELECT nws_auteur, AVG(nws_nb_vues) AS nb_vues_tot FROM t_news GROUP BY nws_auteur;</code></pre><p id="r-507118" data-claire-element-id="507118">Le résultat semble presque magique...</p><figure id="r-507120" data-claire-element-id="507121"><img id="r-507119" data-claire-element-id="507119" src="medias/uploads.siteduzero.com_files_75001_76000_75553.png" alt="Des stats par groupe avec GROUP BY !"/></figure><p id="r-507122" data-claire-element-id="507122">Comme ce concept est très important pour la suite, je vous propose de trouver les requêtes qui permettront de...</p><ul id="r-507135" data-claire-element-id="507135"><li id="r-507124" data-claire-element-id="507124"><p id="r-507123" data-claire-element-id="507123">Compter le nombre de news par auteur ;</p></li><li id="r-507126" data-claire-element-id="507126"><p id="r-507125" data-claire-element-id="507125">Trouver le nombre de vues le plus grand pour chaque auteur ;</p></li><li id="r-507128" data-claire-element-id="507128"><p id="r-507127" data-claire-element-id="507127">Trouver la date de la news la plus récente de chaque auteur ;</p></li><li id="r-507130" data-claire-element-id="507130"><p id="r-507129" data-claire-element-id="507129">Trouver la date de la première news de chaque auteur ;</p></li><li id="r-507132" data-claire-element-id="507132"><p id="r-507131" data-claire-element-id="507131">Compter le nombre de news dans chaque catégorie ;</p></li><li id="r-507134" data-claire-element-id="507134"><p id="r-507133" data-claire-element-id="507133">Compter le nombre de news qui ont été lues au moins une fois et celles qui n'ont jamais été lues (vous devez obtenir 5 et 1).</p></li></ul><aside id="r-507137" data-claire-element-id="507137" data-claire-semantic="information"><p id="r-507136" data-claire-element-id="507136">On peut utiliser les alias des colonnes calculées entre SELECT et FROM dans la clause GROUP BY.</p></aside><p id="r-507138" data-claire-element-id="507138">Les réponses :</p><p id="r-507139" data-claire-element-id="507139"></p><div id="r-507142" data-claire-element-id="507142"><div id="r-507141" data-claire-element-id="507141"><pre id="r-507140" data-claire-element-id="507140"><code data-claire-semantic="sql">SELECT nws_auteur, COUNT(nws_id) AS nb_news FROM t_news GROUP BY nws_auteur;
SELECT nws_auteur, MAX(nws_nb_vues) AS max_vues FROM t_news GROUP BY nws_auteur;
SELECT nws_auteur, MAX(nws_date) AS date_derniere_news FROM t_news GROUP BY nws_auteur;
SELECT nws_auteur, MIN(nws_date) AS date_premiere_news FROM t_news GROUP BY nws_auteur;
SELECT nws_catid, COUNT(nws_id) AS nb_news FROM t_news GROUP BY nws_catid;
SELECT IF(nws_nb_vues=0,'jamais lues','lues au moins une fois') AS est_lue, COUNT(nws_id) FROM t_news GROUP BY est_lue;</code></pre></div></div><aside id="r-507144" data-claire-element-id="507144" data-claire-semantic="warning"><p id="r-507143" data-claire-element-id="507143">Remarquez qu'ici je n'utilise pas COUNT(*) dont j'avais fait l'éloge tout à l'heure mais COUNT(nws_id). En effet COUNT(*) n'est efficace que sur une table entière, il devient (très) lourd lorsque vous travaillez sur des groupes.</p></aside><p id="r-507145" data-claire-element-id="507145">Voilà voilà, soyez sûrs de bien comprendre la base de la clause GROUP BY avant de passer au chapitre suivant, sinon vous risquez d'être perdu... Et au risque de me répéter, n'oubliez pas que tout ce que fait GROUP BY, c'est diviser la table en groupes sur lesquels SELECT va agir directement, et donc qu'on ne peut pas récupérer une autre colonne que celle qui forme le groupe dans ce groupe ...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
<span class="arrow"></span>
<span class="next">Grouper les données avec GROUP BY</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">
<span class="next">Un peu de stats avec GROUP BY ( 2 / 2 )</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UnpeudestatsavecGROUPBY2_2"></a><h2>Un peu de stats avec GROUP BY ( 2 / 2 )</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
<span class="arrow"></span>
<span class="next">Les fonctions statistiques agissent sur des groupes !!</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
<span class="next">Fonctionnalités moins connues</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-507148" data-claire-element-id="507148">Vous ne savez pas encore tout sur le clause GROUP BY ! A moi de vous le prouver avec ce chapitre qui, je l'espère, en intéressera plus d'un.</p><p id="r-507149" data-claire-element-id="507149">Au programme: Particularités de GROUP BY, la fonction GROUP_CONCAT, l'imbrication d'aggrégation et le problème très fréquent de la récupération de la dernière ligne.</p><p id="r-507150" data-claire-element-id="507150">Bonne lecture !</p>
</div><a name="Fonctionnalitsmoinsconnues"></a><h2>Fonctionnalités moins connues</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">
<span class="arrow"></span>
<span class="next">Un peu de stats avec GROUP BY ( 2 / 2 )</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-fonctionnalites-moins-connues" data-claire-element-id="507236">Fonctionnalités moins connues</h4><p id="r-507151" data-claire-element-id="507151">Dans cette sous-partie, on va parler de fonctionnalités de la clause GROUP BY qui sont moins connues et spécifiques à MySQL pour la plupart.</p><h5 id="r-group-by-et-order-by" data-claire-element-id="507165">GROUP BY et ORDER BY</h5><p id="r-507152" data-claire-element-id="507152">Nous n'avons pas encore vraiment parlé de la clause ORDER BY, bien que vous l'ayez déjà abordée avec M@teo21.</p><p id="r-507153" data-claire-element-id="507153">Les plus perspicaces d'entre vous s'en sont peut-être déjà rendus compte: MySQL trie les résultats selon la colonne groupée. En fait, faire <em>GROUP BY nom_de_colonne</em> revient non seulement à grouper mais également à faire <em>ORDER BY nom_de_colonne</em> (je rappelle que ce comportement est spécifique à MySQL). Il est possible d'empêcher ce comportement par défaut en ajoutant la clause ORDER BY qui est prioritaire par rapport à GROUP BY.</p><p id="r-507154" data-claire-element-id="507154">Notez également qu'on peut ajouter les mots-clefs ASC et DESC après le nom d'une colonne spécifiée dans GROUP BY.</p><pre id="r-507155" data-claire-element-id="507155"><code data-claire-semantic="sql">SELECT nws_auteur FROM t_news GROUP BY nws_auteur DESC;</code></pre><figure id="r-507157" data-claire-element-id="507158"><img id="r-507156" data-claire-element-id="507156" src="medias/uploads.siteduzero.com_files_148001_149000_148090.png" alt="On peut indiquer le sens de l'ordonnancement dans la clause GROUP BY"/></figure><p id="r-507159" data-claire-element-id="507159">Sachez enfin que ce tri a un coût au niveau du temps d'exécution, faible par rapport au coût du GROUP BY lui-même mais présent. Si vous voulez éviter ce qu'on pourrait parfois appeler une perte de temps (dans certains cas le tri n'est pas nécessaire), vous pouvez spécifier <em>ORDER BY NULL</em>, ainsi MySQL ne triera pas les données.</p><p id="r-507160" data-claire-element-id="507160">Pour illustrer ceci je commence par updater la première entrée (nws_auteur = 'karamilo') afin de désordonner l'ordre établi par la clef primaire par défaut par MySQL, ensuite j'exécute le <em>GROUP BY</em> avec et sans <em>ORDER BY NULL</em>.</p><pre id="r-507161" data-claire-element-id="507161"><code data-claire-semantic="sql">UPDATE t_news SET nws_auteur = 'karamilo' WHERE nws_id = 1;
SELECT nws_auteur FROM t_news GROUP BY nws_auteur ORDER BY NULL;
SELECT nws_auteur FROM t_news GROUP BY nws_auteur;
UPDATE t_news SET nws_auteur = 'Alexi Laiho' WHERE nws_id = 1;</code></pre><figure id="r-507163" data-claire-element-id="507164"><img id="r-507162" data-claire-element-id="507162" src="medias/uploads.siteduzero.com_files_148001_149000_148091.png" alt="Éviter l'ordonnancement automatique du GROUP BY"/></figure><h5 id="r-utilisations-d-expressions" data-claire-element-id="507169">Utilisations d'expressions</h5><p id="r-507166" data-claire-element-id="507166">Il est tout à fait possible d'utiliser des expressions à la place de noms (ou alias) de colonnes avec GROUP BY. Ainsi, les deux requêtes suivantes sont équivalentes:</p><pre id="r-507167" data-claire-element-id="507167"><code data-claire-semantic="sql">SELECT WEEK(nws_date) AS semaine FROM t_news GROUP BY semaine;
SELECT WEEK(nws_date) AS semaine FROM t_news GROUP BY WEEK(nws_date);</code></pre><p id="r-507168" data-claire-element-id="507168">Personnellement je n'ai jamais utilisé d'expressions directement dans le GROUP BY (Sans doute parce que ce n'est pas autorisé par la norme), mais peut-être serez-vous un jour confronté à un cas où vous n'aurez pas le choix ... ?</p><h5 id="r-group-by-col1-col2" data-claire-element-id="507176">GROUP BY col1, col2</h5><p id="r-507170" data-claire-element-id="507170">Vous avez appris à grouper selon une colonne, pourquoi ne pas faire de sous-groupes dans ces groupes ? Par exemple grouper les commentaires d'abord par id de news, puis par commentateur, et compter le nombre d'entrées pour chaque cas :p</p><p id="r-507171" data-claire-element-id="507171">C'est possible et même très simple en SQL, il suffit de mettre les noms des colonnes selon lesquelles grouper dans le GROUP BY, séparées par des virgules :) Exemple:</p><pre id="r-507172" data-claire-element-id="507172"><code data-claire-semantic="sql">SELECT cmt_nwsid, cmt_auteur, COUNT(*) AS nb_cmts FROM t_commentaire GROUP BY cmt_nwsid, cmt_auteur;</code></pre><figure id="r-507174" data-claire-element-id="507175"><img id="r-507173" data-claire-element-id="507173" src="medias/uploads.siteduzero.com_files_148001_149000_148092.png" alt="Il est possible de grouper selon plusieurs colonnes, la table est alors divisée en sous-groupes"/></figure><h5 id="r-with-rollup" data-claire-element-id="507208">WITH ROLLUP</h5><p id="r-507177" data-claire-element-id="507177">Les choses risquent bien de se compliquer un peu ici ...</p><p id="r-507178" data-claire-element-id="507178">Commençons par le plus simple: s'il n'y a qu'un nom de colonne dans le GROUP BY, ajouter WITH ROLLUP après GROUP BY col [ASC|DESC] aura pour effet d'ajouter une ligne avec pour valeur de col &quot;NULL&quot; et pour valeur de vos colonnes d'aggrégat la valeur maximale / minimale / somme / moyenne / compte de toutes les lignes.</p><p id="r-507179" data-claire-element-id="507179">Un exemple vaut mieux qu'un long discours n'est-ce pas ? :p En gros WITH ROLLUP ajoute une ligne qui agit sur l'ensemble de la table:</p><pre id="r-507180" data-claire-element-id="507180"><code data-claire-semantic="sql">SELECT cmt_nwsid, COUNT(*) FROM t_commentaire GROUP BY cmt_nwsid WITH ROLLUP;</code></pre><figure id="r-507182" data-claire-element-id="507183"><img id="r-507181" data-claire-element-id="507181" src="medias/uploads.siteduzero.com_files_148001_149000_148093.png" alt="WITH ROLLUP ajoute une ligne qui contient le résultat de la fonction d'aggrégation sur le groupe 'supérieur'"/></figure><p id="r-507184" data-claire-element-id="507184">Si vous voulez renommer ce vilain &quot;NULL&quot; en &quot;Total&quot; par exemple, il suffit d'ajouter un COALESCE sur cmt_nwsid :)</p><pre id="r-507185" data-claire-element-id="507185"><code data-claire-semantic="sql">SELECT COALESCE(cmt_nwsid, 'Total') AS cmt_nwsid, COUNT(*) AS nb_cmts FROM t_commentaire GROUP BY cmt_nwsid WITH ROLLUP;</code></pre><figure id="r-507187" data-claire-element-id="507188"><img id="r-507186" data-claire-element-id="507186" src="medias/uploads.siteduzero.com_files_148001_149000_148094.png" alt="On peut renommer aisément l'identifiant de la ligne résultante du WITH ROLLUP"/></figure><p id="r-507189" data-claire-element-id="507189">Passons aux choses sérieuses: s'il y a plusieurs noms de colonnes dans le GROUP BY, WITH ROLLUP ajoutera à la fin de chaque &quot;sous-groupe&quot; une ligne NULL qui contiendra l'aggrégat total de ce sous-groupe.</p><p id="r-507190" data-claire-element-id="507190">On reprend l'exemple avec les nombre de commentaires par auteur par news + WITH ROLLUP:</p><pre id="r-507191" data-claire-element-id="507191"><code data-claire-semantic="sql">SELECT cmt_nwsid, cmt_auteur, COUNT(*) AS nb_cmts FROM t_commentaire GROUP BY cmt_nwsid, cmt_auteur WITH ROLLUP;</code></pre><figure id="r-507193" data-claire-element-id="507194"><img id="r-507192" data-claire-element-id="507192" src="medias/uploads.siteduzero.com_files_148001_149000_148095.png" alt="WITH ROLLUP avec plusieurs colonnes dans le GROUP BY"/></figure><div id="r-507196" data-claire-element-id="507196" data-claire-semantic="question"><p id="r-507195" data-claire-element-id="507195">Eh mais il y a un bug dans ton machin, là ! Dans l'une des ligne le nom de l'auteur n'était pas spécifié, comment faire pour savoir quelle ligne représente le nombre de commentaires du visiteur anonyme ou le nombre de commentaires total pour la news ? (cmt_nwsid = 5)</p></div><p id="r-507197" data-claire-element-id="507197">En effet c'est assez gênant, et le fait de mettre un COALESCE sur la colonne change évidemment les deux lignes ...</p><pre id="r-507198" data-claire-element-id="507198"><code data-claire-semantic="sql">SELECT cmt_nwsid, COALESCE(cmt_auteur, 'Total'), COUNT(*) AS nb_cmts FROM t_commentaire GROUP BY cmt_nwsid, cmt_auteur WITH ROLLUP;</code></pre><figure id="r-507200" data-claire-element-id="507201"><img id="r-507199" data-claire-element-id="507199" src="medias/uploads.siteduzero.com_files_148001_149000_148096.png" alt="Problème: Comment différencier les vraies données contenant un NULL de celles générées par WITH ROLLUP ?"/></figure><p id="r-507202" data-claire-element-id="507202">Comment faire dès lors ?</p><p id="r-507203" data-claire-element-id="507203">La solution la plus simple consiste à utiliser ce qu'on appelle les sous-requêtes, que nous avons déjà rencontrées mais pas encore étudiées, nous ne le ferons pas encore maintenant. Je vous en parle juste pour pointer la solution à ce problème. La requête suivante fonctionnera:</p><pre id="r-507204" data-claire-element-id="507204"><code data-claire-semantic="sql">SELECT cmt_nwsid, cmt_auteur, COUNT(*) AS nb_cmts
FROM (SELECT cmt_nwsid, COALESCE(cmt_auteur, 'inconnu') AS cmt_auteur FROM t_commentaire) t
GROUP BY cmt_nwsid, cmt_auteur WITH ROLLUP;</code></pre><figure id="r-507206" data-claire-element-id="507207"><img id="r-507205" data-claire-element-id="507205" src="medias/uploads.siteduzero.com_files_148001_149000_148097.png" alt="Il faut qu'à la base les données ne contiennent pas de NULL, on transforme donc les données au préalable dans une sous-requête"/></figure><h5 id="r-only-full-group-by" data-claire-element-id="507235">ONLY_FULL_GROUP_BY</h5><p id="r-507209" data-claire-element-id="507209">Je ne sais pas si vous vous en rappelez, mais je vous avais parlé plus tôt du fait qu'il ne fallait jamais sélectionner une colonne qui n'était pas reprise dans le GROUP BY, que cela n'avait absolument aucun sens.</p><p id="r-507210" data-claire-element-id="507210">Rassurez-vous, je ne vais pas vous dire maintenant que je vous ai encore menti :p</p><p id="r-507211" data-claire-element-id="507211">Il faut juste savoir que, même si ça n'a pas de sens, MySQL autorise la récupération d'une colonne non reprise dans le GROUP BY, et prend alors la valeur d'une des lignes présentes dans le groupe. A priori la première, mais on n'en a pas la certitude ...</p><div id="r-507213" data-claire-element-id="507213" data-claire-semantic="question"><p id="r-507212" data-claire-element-id="507212">Oui tu nous as déjà dit tout ça ... Et alors ? On sait bien qu'il ne faut pas faire ça !</p></div><p id="r-507214" data-claire-element-id="507214">Oui vous le savez bien, mais parfois on sait que certaines valeurs sont uniques dans notre groupe, par exemple, imaginez qu'on fasse un GROUP BY sur la table t_news selon la colonne nws_id (Oui c'est totallement stupide, ça nous donnera des groupes d'une ligne à chaque fois, n'empêche que dans chaque groupe, on n'a qu'un seul auteur, un seul nombre de vues, etc ...).</p><p id="r-507215" data-claire-element-id="507215">Dans ce cas précis, est-il vraiment mal de vouloir récupérer une autre colonne que nws_id ?</p><p id="r-507216" data-claire-element-id="507216">Autre exemple: Dans notre table t_news, chaque auteur n'a posté de news que dans une seule catégorie. Dès lors, si on veut récupérer les auteurs et la catégorie dans laquelle ils ont posté, est-il bien nécessaire de mettre nws_catid dans le GROUP BY ?</p><p id="r-507217" data-claire-element-id="507217">Regardez les deux requêtes suivantes, la quelle est la plus pratique selon vous ? Et l'une d'elle est-elle plus illogique que l'autre ?</p><pre id="r-507218" data-claire-element-id="507218"><code data-claire-semantic="sql">SELECT nws_catid, nws_auteur FROM t_news GROUP BY nws_auteur;
SELECT nws_catid, nws_auteur FROM t_news GROUP BY nws_catid, nws_auteur;</code></pre><p id="r-507219" data-claire-element-id="507219">Les deux requêtes renvoient évidemment exactement le même résultat, vu que MySQL n'a pas de choix plus ou moins arbitraire à faire. Nous verrons lors du chapitre sur les jointures que grouper selon un id unique n'est pas si farfelu que ça en a l'air ... Ca arrive même relativement fréquemment.</p><p id="r-507220" data-claire-element-id="507220">Pourtant, si vous exécutez la première requête sur un autre SGBDR, il y a fort à parier qu'il ne l'exécutera pas et vous renverra une erreur. Comment dès lors éviter ce genre de &quot;bêtise&quot; ? A savoir demander à MySQL de ne pas exécuter une requête si elle tente de récupérer des colonnes non présentes dans la clause GROUP BY.</p><p id="r-507221" data-claire-element-id="507221">C'est possible, et assez facilement en modifiant une <strong>variable de configuration</strong> de MySQL. Voilà comment il faut faire:</p><pre id="r-507222" data-claire-element-id="507222"><code data-claire-semantic="sql">SET @@sql_mode = CONCAT_WS(',', @@sql_mode, 'ONLY_FULL_GROUP_BY');</code></pre><p id="r-507223" data-claire-element-id="507223">Si vous vous rappelez de la fonction CONCAT_WS et du chapitre sur les variables utilisateur, alors vous aurez compris que la commande ci-dessus affecte la variable @@sql_mode en lui ajoutant ONLY_FULL_GROUP_BY avec une virgule si nécessaire.</p><p id="r-507224" data-claire-element-id="507224">@@sql_mode supporte beaucoup d'autres valeurs, cette variable sert en fait à déterminer comment MySQL réagit.</p><p id="r-507225" data-claire-element-id="507225">Revenons à notre ONLY_FULL_GROUP_BY. Vous l'avez compris, il sert à empêcher toute forme de &quot;comportement à risque&quot; au niveau du GROUP BY.</p><p id="r-507226" data-claire-element-id="507226">Ainsi, en activant cette option et en retestant les deux requêtes du dessus, on obtient:</p><pre id="r-507227" data-claire-element-id="507227"><code data-claire-semantic="sql">SELECT nws_catid, nws_auteur FROM t_news GROUP BY nws_auteur;
SET @@sql_mode = CONCAT_WS(',', @@sql_mode, 'ONLY_FULL_GROUP_BY');
SELECT nws_catid, nws_auteur FROM t_news GROUP BY nws_auteur;
SELECT nws_catid, nws_auteur FROM t_news GROUP BY nws_auteur, nws_catid;</code></pre><figure id="r-507229" data-claire-element-id="507230"><img id="r-507228" data-claire-element-id="507228" src="medias/uploads.siteduzero.com_files_148001_149000_148118.png" alt="Eviter les erreurs avec ONLY_FULL_GROUP_BY"/></figure><p id="r-507231" data-claire-element-id="507231">Si vous voulez en savoir plus sur la variable @@sql_mode, je vous laisse le lien vers la doc en ce qui la concerne, en français en plus ^^ <a href="http://dev.mysql.com/doc/refman/5.0/fr/server-sql-mode.html">Par ici</a></p><p id="r-507232" data-claire-element-id="507232">Je suis au regret de vous annoncer qu'il est probable que GROUP BY vous réserve encore quelques surprises ... Néanmoins vous en savez assez pour vous tirer d'affaire dans la plupart des problèmes que cette clause pourrait vous opposer :)</p><p id="r-507233" data-claire-element-id="507233">GROUP BY n'est pas forcément simple à appréhender, mais une fois que vous avez compris le truc, vous ne devriez plus avoir de soucis de ce côté là :p</p><p id="r-507234" data-claire-element-id="507234">A la prochaine !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41">Pour aller plus loin...</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
SELECT: Une puissance négligée
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/avant-de-commencer-utilisation-de-la-console-mysql">Avant de commencer : utilisation de la console MySQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/lancer-le-client">
Lancer le client
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/tests-est-ce-que-ca-marche">
Tests : est-ce que ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-explications-16">
Quelques explications...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/selectionner-une-valeur-ne-provenant-pas-d-une-table">Sélectionner une valeur... ne provenant pas d&#039;une table !</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-bases-2">
Quelques bases...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-mysql">
Les fonctions MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-utilisateur">
Les fonctions utilisateur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-variables-utilisateur">Les variables utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/variables-utilisateur-1">
Variables utilisateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/declarer-et-utiliser-une-variable">
Déclarer et utiliser une variable
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/mini-tp-un-classement">
Mini-TP : un classement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-autre-exemple-selection-au-hasard">
Un autre exemple : sélection au hasard
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/traitement-des-null-s">Traitement des &quot;NULL&quot;s</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/specificites-des-valeurs-nulles">
Spécificités des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-de-traitement-des-valeurs-nulles">
Les fonctions de traitement des valeurs nulles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/le-systeme-de-classement-en-une-seule-requete">
Le système de classement en une seule requête !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-conditions-30">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/des-conditions-en-sql-differences-entre-mysql-et-la-norme">
Des conditions en SQL ? Différences entre MySQL et la norme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/utilisation-de-case">
Utilisation de CASE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-autres-structures-conditionnelles">
Les autres structures conditionnelles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-somme-des-nombres-si-leur-nombre-correspond-a-un-nombre">
[Problème SQL] Somme des nombres si leur nombre correspond à un nombre...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/et-si-on-faisait-un-peu-de-sql">Et si on faisait un peu de SQL ? ...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/la-norme-sql">
La norme SQL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/quelques-donnees-de-test">
Quelques données de test
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/enfin-une-requete-conforme">
Enfin une requête conforme !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/select-from-select-from">
SELECT ... FROM ( SELECT ... FROM ... )
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/distinct">
DISTINCT
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/filtrer-les-donnees-avec-where">Filtrer les données avec WHERE</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/a-propos-de-la-clause-where">
A propos de la clause WHERE...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-operateurs-de-comparaison-8">
Les opérateurs de comparaison
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/not-between-in-et-like">
(NOT) BETWEEN, IN et LIKE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/probleme-sql-qui-est-plus-grand-que-le-dernier-plus-grand">
[Problème SQL] Qui est plus grand que le dernier plus grand ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-1-2">Un peu de stats avec GROUP BY ( 1 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-de-mysql">
Les fonctions statistiques de MySQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/grouper-les-donnees-avec-group-by">
Grouper les données avec GROUP BY
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/les-fonctions-statistiques-agissent-sur-des-groupes">
Les fonctions statistiques agissent sur des groupes !!
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">Un peu de stats avec GROUP BY ( 2 / 2 )</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/fonctionnalites-moins-connues">
Fonctionnalités moins connues
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/pour-aller-plus-loin-41/un-peu-de-stats-avec-group-by-2-2">
<span class="arrow"></span>
<span class="next">Un peu de stats avec GROUP BY ( 2 / 2 )</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/our-aller-plus-loin-41.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 07:14:20 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/our-aller-plus-loin-41.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:18:19 GMT -->
</html>