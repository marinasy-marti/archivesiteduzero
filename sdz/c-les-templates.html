<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/c-les-templates.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:50:07 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/c-les-templates.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:02:04 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : [C++] Les templates</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/c-les-templates.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : [C++] Les templates</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#CLestemplates">[C++] Les templates</a><br/><a href="#Pourbiencomprendre...">Pour bien comprendre...</a><br/><a href="#Crerunpatron">Créer un patron</a><br/><a href="#Lesparamtres">Les paramètres</a><br/><a href="#Surchargerunpatron">Surcharger un patron</a><br/><a href="#Spcialisation">Spécialisation</a><br/></div>
<a name="CLestemplates"></a><h2>[C++] Les templates</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/pour-bien-comprendre">
<span class="next">Pour bien comprendre...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-448657" data-claire-element-id="448657">Un patron, au sens mathématique du terme est la projection planaire du &quot;dépliage&quot; d'un objet en 3 dimensions (appelé polyèdre).<br/> On peut donc l'apparenter à un modèle sur lequel on peut se baser afin de construire un objet.</p><p id="r-448658" data-claire-element-id="448658">En C++, un patron de fonction (encore appelé <strong><em>template</em></strong>), est le modèle d'une fonction, dont le type de retour et le type des arguments n'est pas fixé.</p><p id="r-448659" data-claire-element-id="448659">J'utiliserais ici le terme de patron de fonction, mais ne perdez pas de vue que ce sont les templates!</p><p id="r-448660" data-claire-element-id="448660">C'est une alternative à la surcharge (ou surdéfinition) de fonction, qui permet donc de gagner en performances, en temps de codage, et surtout en clarté.</p><p id="r-448661" data-claire-element-id="448661">Pour suivre ce tutoriel, vous devez:<br/><a href="http://www.siteduzero.com/tuto-3-5395-0-apprenez-a-programmer-en-c.html#part_3863">&gt; Avoir lu le tutoriel de C++ de M@teo21 (au moins la partie 1)</a><br/><a href="http://www.siteduzero.com/tuto-3-13047-1-nouveautes-pour-les-fonctions.html#ss_part_2">&gt; Avoir bien compris le fonctionnement de la surcharge de fonctions</a></p>
</div><a name="Pourbiencomprendre..."></a><h2>Pour bien comprendre...</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/creer-un-patron">
<span class="next">Créer un patron</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-448662" data-claire-element-id="448662">Afin de bien vous faire comprendre, nous allons baser ce tutoriel sur un exemple très simple.<br/> Ecrivons une fonction qui nous permettra de calculer la somme de deux nombres (de type <strong><em>int</em></strong>), puis de renvoyer la valeur du résultat.</p><p id="r-448663" data-claire-element-id="448663">Pour faire simple (car ce n'est pas très compliqué quand même ^^ ), voici comment on pourrait écrire cette fonction:</p><pre id="r-448664" data-claire-element-id="448664"><code data-claire-semantic="cpp">int calculerSomme(int operande1, int operande2)
{
    int resultat = operande1 + operande2;
    return resultat;
}</code></pre><p id="r-448665" data-claire-element-id="448665">Cette fonction marche très bien (chez moi du moins ^^ ), mais pose le problème suivant: les deux valeurs envoyées en arguments a la fonction doivent être de type <em><strong>int</strong></em></p><aside id="r-448667" data-claire-element-id="448667" data-claire-semantic="information"><p id="r-448666" data-claire-element-id="448666">En réalité, la conversion de type rend l'envoi de variables <em><strong>double</strong></em> possible.<br/> Une conversion <strong><em>double</em></strong>-&gt;<strong><em>int</em></strong>, bien que dégradante serait automatiquement effectuée.</p></aside><p id="r-448668" data-claire-element-id="448668">Donc si je veux ajouter 2.5 à 3.2, cette fonction ne convient pas!<br/> Heureusement, grâce à M@teo21, nous savons surcharger cette fonction, pour nous permettre d'ajouter non plus des <em><strong>int</strong></em> mais des <em><strong>double</strong></em>.</p><p id="r-448669" data-claire-element-id="448669">La fonction surchargée pour les <em><strong>double</strong></em> serait:</p><pre id="r-448670" data-claire-element-id="448670"><code data-claire-semantic="cpp">double calculerSomme(double operande1, double operande2)
{
    double resultat = operande1 + operande2;
    return resultat;
}</code></pre><p id="r-448671" data-claire-element-id="448671">Il en irait évidemment de même pour tous les types (<strong><em>float</em></strong>, <strong><em>long</em></strong>, ...).</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates">[C++] Les templates</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/pour-bien-comprendre">
Pour bien comprendre...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/creer-un-patron">
Créer un patron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/les-parametres-8">
Les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/surcharger-un-patron">
Surcharger un patron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/specialisation">
Spécialisation
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/creer-un-patron">
<span class="next">Créer un patron</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Crerunpatron"></a><h2>Créer un patron</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/pour-bien-comprendre">
<span class="arrow"></span>
<span class="next">Pour bien comprendre...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/les-parametres-8">
<span class="next">Les paramètres</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-definir-le-modele" data-claire-element-id="448676">Definir le modèle</h2><p id="r-448673" data-claire-element-id="448673">Dans l'exemple précédent, on peut facilement se rendre compte que les fonctions sont formées sur le même modèle.<br/> Ce modèle ressemble à ceci:</p><pre id="r-448674" data-claire-element-id="448674"><code data-claire-semantic="cpp">type calculerSomme(type operande1, type operande2)
{
    type resultat = operande1 + operande2;
    return resultat;
}</code></pre><p id="r-448675" data-claire-element-id="448675">C'est cette ressemblance, qui va nous permettre de créer un patron de fonction.</p><h2 id="r-le-patron" data-claire-element-id="448700">Le patron</h2><h3 id="r-declarer-un-patron" data-claire-element-id="448681">Déclarer un patron</h3><p id="r-448677" data-claire-element-id="448677">Nous allons désormais déclarer notre patron de fonction, afin de remplacer la fonction <strong><em>calculerSomme</em></strong>, sous toutes ses formes (surchargées ou non).</p><pre id="r-448678" data-claire-element-id="448678"><code data-claire-semantic="cpp">template&lt;class Type&gt; Type calculerSomme(Type operande1, Type operande2)
{
    Type resultat = operande1 + operande2;
    return resultat;
}</code></pre><aside id="r-448680" data-claire-element-id="448680" data-claire-semantic="information"><p id="r-448679" data-claire-element-id="448679">La norme prévoit que l'on puisse utiliser le mot-clé <em><strong>typename</strong></em> au lieu de <strong><em>class</em></strong> dans la déclaration de notre patron.<br/> Cela évite les confusions :) .</p></aside><h3 id="r-utiliser-le-patron" data-claire-element-id="448692">Utiliser le patron</h3><p id="r-448682" data-claire-element-id="448682">Maintenant que notre patron est déclaré, nous pouvons l'utiliser, comme une fonction classique.</p><aside id="r-448684" data-claire-element-id="448684" data-claire-semantic="warning"><p id="r-448683" data-claire-element-id="448683"><strong><em>operande1</em></strong> et <strong><em>operande2</em></strong> n'ont pas un type défini.<br/> Il doit cependant être le même pour les deux.<br/> On ne peut donc pas envoyer un <strong><em>int</em></strong> et un <strong><em>float</em></strong> à notre fonction.</p></aside><pre id="r-448685" data-claire-element-id="448685"><code data-claire-semantic="cpp">#include &lt;iostream&gt;

using namespace std;

// On utilise typename et non pas classe pour eviter les confusions
template&lt;typename Type&gt; Type calculerSomme(Type operande1, Type operande2)
{
    Type resultat = operande1 + operande2;
    return resultat;
}

int main()
{
	int n = 4, p = 12, q = 0;
        // On appelle notre fonction calculerSomme comme une fonction normale
	q = calculerSomme(n, p);
	cout &lt;&lt; &quot;Le resultat est : &quot; &lt;&lt; q &lt;&lt; endl;
	
	return 0;
}</code></pre><p id="r-448686" data-claire-element-id="448686">Ce code fonctionne très bien et donne comme résultat:</p><pre id="r-448687" data-claire-element-id="448687"><code data-claire-semantic="console">Le résultat est : 16</code></pre><p id="r-448688" data-claire-element-id="448688">L'avantage désormais et que vous pouvez calculer la somme de deux <strong><em>float</em></strong>, en remplaçant juste ceci:</p><pre id="r-448689" data-claire-element-id="448689"><code data-claire-semantic="cpp">int n = 4, p = 12, q = 0;
q = calculerSomme(n, p);</code></pre><p id="r-448690" data-claire-element-id="448690">par cela:</p><pre id="r-448691" data-claire-element-id="448691"><code data-claire-semantic="cpp">float n = 4.2, p = 12.8, q = 0;
q = calculerSomme(n, p);</code></pre><h3 id="r-les-exceptions-7" data-claire-element-id="448699">Les exceptions</h3><p id="r-448693" data-claire-element-id="448693">On pourrait penser que ce code fonctionnerait:</p><pre id="r-448694" data-claire-element-id="448694"><code data-claire-semantic="cpp">#include &lt;iostream&gt;

using namespace std;

// On utilise typename et non pas classe pour eviter les confusions
template&lt;typename Type&gt; Type calculerSomme(Type operande1, Type operande2)
{
    Type resultat = operande1 + operande2;
    return resultat;
}

int main()
{
	int n = 4, q = 0;
        unsigned int p = 12;
	q = calculerSomme(n, p);
	cout &lt;&lt; &quot;Le resultat est : &quot; &lt;&lt; q &lt;&lt; endl;
	
	return 0;
}</code></pre><p id="r-448695" data-claire-element-id="448695">Mais il ne fonctionne pas. Ceci est dû au fait que le compilateur considère les type <strong><em>unsigned int</em></strong> et <strong><em>int</em></strong> comme étant différents.</p><p id="r-448696" data-claire-element-id="448696">Il en va de même pour un type <strong><em>const int</em></strong> et <strong><em>int</em></strong>.</p><aside id="r-448698" data-claire-element-id="448698" data-claire-semantic="information"><p id="r-448697" data-claire-element-id="448697">Ce n'est pas valable uniquement pour les <strong><em>int</em></strong>, mais pour tous les types qui sont concernés par <strong><em>unsigned</em></strong> et <em>const</em>.</p></aside>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates">[C++] Les templates</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/pour-bien-comprendre">
Pour bien comprendre...
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/creer-un-patron">
Créer un patron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/les-parametres-8">
Les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/surcharger-un-patron">
Surcharger un patron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/specialisation">
Spécialisation
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/pour-bien-comprendre">
<span class="arrow"></span>
<span class="next">Pour bien comprendre...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/les-parametres-8">
<span class="next">Les paramètres</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesparamtres"></a><h2>Les paramètres</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/creer-un-patron">
<span class="arrow"></span>
<span class="next">Créer un patron</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/surcharger-un-patron">
<span class="next">Surcharger un patron</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-theorie-14" data-claire-element-id="448711">Théorie</h2><p id="r-448702" data-claire-element-id="448702">Jusqu'à maintenant, nous avons utilisé le même type pour tous les arguments de notre patron.<br/> Or il peut arriver que l'on ai besoin d'envoyer des arguments dont le type ne sera pas le même.</p><p id="r-448703" data-claire-element-id="448703">Si l'on reprend l'exemple utilisé jusque là, et qu'on le modifie pour pouvoir additionner un <strong><em>int</em></strong> avec un <strong><em>double</em></strong>, on obtient ceci:</p><pre id="r-448704" data-claire-element-id="448704"><code data-claire-semantic="cpp">double calculerSomme(int operande1, double operande2)
{
    double resultat = operande1 + operande2;
    return resultat;
}</code></pre><p id="r-448705" data-claire-element-id="448705">On pourrait le surcharger comme ceci:</p><pre id="r-448706" data-claire-element-id="448706"><code data-claire-semantic="cpp">double calculerSomme(double operande1, int operande2)
{
    double resultat = operande1 + operande2;
    return resultat;
}</code></pre><p id="r-448707" data-claire-element-id="448707">ou même si l'on avait besoin:</p><pre id="r-448708" data-claire-element-id="448708"><code data-claire-semantic="cpp">float calculerSomme(int operande1, float operande2)
{
    float resultat = operande1 + operande2;
    return resultat;
}</code></pre><p id="r-448709" data-claire-element-id="448709">Et bien pour cela, on va utiliser plusieurs type d'arguments dans notre patron.<br/> On va faire comme ci (modèle):</p><pre id="r-448710" data-claire-element-id="448710"><code data-claire-semantic="cpp">template&lt;typename Type1, typename Type2&gt; Type2 calculerSomme(Type1 operande1, Type2 operande2)
{
    Type2 resultat = operande1 + operande2;
    return resultat;
}</code></pre><h2 id="r-exemples-25" data-claire-element-id="448718">Exemples</h2><pre id="r-448712" data-claire-element-id="448712"><code data-claire-semantic="cpp">#include &lt;iostream&gt;
using namespace std ;

template&lt;typename Type1, typename Type2&gt; Type2 calculerSomme(Type1 operande1, Type2 operande2)
{
    Type2 resultat = operande1 + operande2;
    return resultat;
}

int main()
{
	int a = 20;
	float b = 10.2;
	cout &lt;&lt; &quot;La somme vaut &quot; &lt;&lt; calculerSomme(a, b) &lt;&lt; endl;
	
	system(&quot;PAUSE&quot;);
	return 0;
}</code></pre><p id="r-448713" data-claire-element-id="448713">Ce code renvoie 30.2 :) <br/> Vous pouvez bien sur inverser <strong><em>a</em></strong> et <strong><em>b</em></strong> lors de l'appel de <strong><em>calculerSomme</em></strong>.</p><aside id="r-448715" data-claire-element-id="448715" data-claire-semantic="warning"><p id="r-448714" data-claire-element-id="448714">Notre fonction patron renvoie une donnée de type <strong><em>Type2</em></strong>.<br/> Si l'on envoie a en deuxième argument, le type de retour devient donc <strong><em>int</em></strong>.<br/> Ainsi la valeur de <strong><em>b</em></strong> est transformée en <strong><em>int</em></strong> (au lieu de <strong><em>float</em></strong>).</p></aside><p id="r-448716" data-claire-element-id="448716">Vous pouvez aussi envoyer deux arguments du même type. La déclaration de notre patron n'oblige pas à utiliser 2 types différents, mais le permet simplement :) . Ainsi le code suivant fonctionne:</p><pre id="r-448717" data-claire-element-id="448717"><code data-claire-semantic="cpp">#include &lt;iostream&gt;
using namespace std ;

template&lt;typename Type1, typename Type2&gt; Type2 calculerSomme(Type1 operande1, Type2 operande2)
{
    Type2 resultat = operande1 + operande2;
    return resultat;
}

int main()
{
	int a = 20;
	int b = 10;
	cout &lt;&lt; &quot;La somme vaut &quot; &lt;&lt; calculerSomme(b, a) &lt;&lt; endl;
	
	system(&quot;PAUSE&quot;);
	return 0;
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates">[C++] Les templates</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/pour-bien-comprendre">
Pour bien comprendre...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/creer-un-patron">
Créer un patron
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/les-parametres-8">
Les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/surcharger-un-patron">
Surcharger un patron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/specialisation">
Spécialisation
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/creer-un-patron">
<span class="arrow"></span>
<span class="next">Créer un patron</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/surcharger-un-patron">
<span class="next">Surcharger un patron</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Surchargerunpatron"></a><h2>Surcharger un patron</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/les-parametres-8">
<span class="arrow"></span>
<span class="next">Les paramètres</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/specialisation">
<span class="next">Spécialisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-448720" data-claire-element-id="448720">Les fonctions patrons sont avant tout des fonctions, ce qui induit qu'elles peuvent être surchargées.</p><p id="r-448721" data-claire-element-id="448721">Si l'on reprend notre bonne vieille fonction <strong><em>calculerSomme</em></strong>, il nous est possible de la surcharger par exemple comme ceci:</p><pre id="r-448722" data-claire-element-id="448722"><code data-claire-semantic="cpp">int calculerSomme(int operande1, int operande2, int operande3)
{
    int resultat = operande1 + operande2 + operande3;
    return resultat;
}</code></pre><p id="r-448723" data-claire-element-id="448723">Et bien il est possible d'en faire autant avec les fonctions patrons. Notre <a href="http://www.siteduzero.com/tuto-3-32984-1-c-les-patrons-de-fonctions.html#ss_part_2">fonction patron précédente</a> peut être surchargée ainsi:</p><pre id="r-448724" data-claire-element-id="448724"><code data-claire-semantic="cpp">template&lt;class Type&gt; Type calculerSomme(Type operande1, Type operande2, Type operande3)
{
    Type resultat = operande1 + operande2 + operande3;
    return resultat;
}</code></pre><p id="r-448725" data-claire-element-id="448725">Le principe est donc exactement le même que pour une fonction lambda.<br/> Vous ne devriez donc pas être surpris, ni avoir de problème de compréhension ici :)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates">[C++] Les templates</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/pour-bien-comprendre">
Pour bien comprendre...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/creer-un-patron">
Créer un patron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/les-parametres-8">
Les paramètres
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/surcharger-un-patron">
Surcharger un patron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/specialisation">
Spécialisation
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/les-parametres-8">
<span class="arrow"></span>
<span class="next">Les paramètres</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/specialisation">
<span class="next">Spécialisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Spcialisation"></a><h2>Spécialisation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/surcharger-un-patron">
<span class="arrow"></span>
<span class="next">Surcharger un patron</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-448727" data-claire-element-id="448727">Vous l'avez désormais compris, une fonction patron est une sorte d'ensemble de fonctions, pouvant avoir des arguments différents en nombre et en type.</p><p id="r-448728" data-claire-element-id="448728">Par contre, quelque soit le type des arguments, les calculs qui sont réalisés dans la fonction sont identiques. On dira que les algorithmes sont identiques. Cela peut parfois poser des problèmes, dans le cas ou vous voulez changer l'algorithme pour un type spécifique.</p><h2 id="r-comprendre-le-compilateur" data-claire-element-id="448736">Comprendre le compilateur</h2><p id="r-448729" data-claire-element-id="448729">Lors de l'appel d'une fonction, le compilateur va chercher en premier les fonctions qui correspondent complètement à ce que l'utilisateur demande.<br/> En d'autres termes, si le compilateur rencontre la ligne:</p><pre id="r-448730" data-claire-element-id="448730"><code data-claire-semantic="cpp">calculerSomme(int a, int b);</code></pre><p id="r-448731" data-claire-element-id="448731">Il va chercher la fonction dont le prototype est de la forme:</p><pre id="r-448732" data-claire-element-id="448732"><code data-claire-semantic="cpp">type calculerSomme(int, int);</code></pre><p id="r-448733" data-claire-element-id="448733">Il peut arriver que le compilateur ne trouve pas exactement ce qu'il recherche. Dans ce cas là, il va alors chercher les fonctions qui correspondent en utilisant les conversions de type.<br/> Une conversion de type est la transformation d'une variable de type <strong><em>Type1</em></strong> en la même variable de type <strong><em>Type2</em></strong>.</p><aside id="r-448735" data-claire-element-id="448735" data-claire-semantic="information"><p id="r-448734" data-claire-element-id="448734">Il existe de nombreuses conversions de types.<br/> Retenez juste que le compilateur est capable transformer une variable numérique en n'importe quelle variable numérique d'un autre type (même si celle-ci est dégradante).</p></aside><h2 id="r-ruser-pour-mieux-compiler" data-claire-element-id="448750">Ruser pour mieux compiler</h2><p id="r-448737" data-claire-element-id="448737">Il est alors simple de comprendre comment spécialiser sa fonction pour un type spécial de données.</p><p id="r-448738" data-claire-element-id="448738">Prenons le code suivant:</p><pre id="r-448739" data-claire-element-id="448739"><code data-claire-semantic="cpp">#include &lt;iostream&gt;
#include &lt;string&gt;

using namespace std;

template&lt;typename Type&gt; Type calculerSomme(Type operande1, Type operande2)
{
    Type resultat = operande1 + operande2;
    return resultat;
}

int calculerSomme(string operande1, string operande2)
{
    int resultat;
    resultat = operande1.size() + operande2.size();
    cout &lt;&lt; &quot;Utilisation de la spécialisation&quot; &lt;&lt; endl;
    return resultat;
}

int main()
{
    int a = 20, b = 10;
    string c = &quot;Bonjour&quot;;
    string d = &quot; les zéros!&quot;;
    
    cout &lt;&lt; &quot;La somme vaut &quot; &lt;&lt; calculerSomme(a, b) &lt;&lt; endl;

    cout &lt;&lt; &quot;La somme vaut &quot; &lt;&lt; calculerSomme(c, d) &lt;&lt; endl;
	
    system(&quot;PAUSE&quot;);
    return 0;
}</code></pre><p id="r-448740" data-claire-element-id="448740">Ce code va nous afficher ceci:</p><pre id="r-448741" data-claire-element-id="448741"><code data-claire-semantic="console">La somme vaut 30
Utilisation de la specialisation
La somme vaut 18</code></pre><p id="r-448742" data-claire-element-id="448742">Ici, on veut pouvoir calculer la taille de deux chaînes et en renvoyer la somme.<br/> Mais notre fonction patron n'a pas un algorithme adapté à cette opération.</p><p id="r-448743" data-claire-element-id="448743">On écrit donc à nouveau la fonction <strong><em>calculerSomme</em></strong>, adaptée à l'envoi de <strong><em>string</em></strong>. Ainsi lors de <code>calculerSomme(c, d)</code>, le compilateur recherche les fonctions qui correspondent exactement à l'appel. C'est ainsi qu'elle trouve notre nouvelle fonction, et pas notre fonction patron :)</p><aside id="r-448745" data-claire-element-id="448745" data-claire-semantic="information"><p id="r-448744" data-claire-element-id="448744">Ici, le compilateur <strong>pourrait</strong> utiliser notre fonction patron.<br/> Cependant il rencontre notre autre fonction <strong><em>calculerSomme</em></strong>, qui correspond exactement à ce qu'il recherche.<br/> Il va donc utiliser cette fonction en priorité.</p></aside><p id="r-448746" data-claire-element-id="448746">Pour ne pas faire risquer de faire des erreurs dans la surcharge et l'utilisation de vos fonctions patrons, je vous recommande de vous renseignez sur les conversions de type.<br/> Je ferais peut-être un tutoriel à ce sujet, plus tard.</p><p id="r-448747" data-claire-element-id="448747">En attendant, j'espère que ce tutoriel vous a aidé.</p><p id="r-448748" data-claire-element-id="448748">Merci de votre <em>écoute</em>.</p><p id="r-448749" data-claire-element-id="448749">FoeSteR `</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates">[C++] Les templates</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/pour-bien-comprendre">
Pour bien comprendre...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/creer-un-patron">
Créer un patron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/les-parametres-8">
Les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/surcharger-un-patron">
Surcharger un patron
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/c-les-templates/specialisation">
Spécialisation
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/c-les-templates/surcharger-un-patron">
<span class="arrow"></span>
<span class="next">Surcharger un patron</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/c-les-templates.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:50:07 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/c-les-templates.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:02:04 GMT -->
</html>