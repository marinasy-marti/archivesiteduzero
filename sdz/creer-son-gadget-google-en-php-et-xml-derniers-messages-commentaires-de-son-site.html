<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 05:39:40 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:00:13 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Créer son Gadget Google en PHP et XML − Derniers messages/commentaires de son site</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Créer son Gadget Google en PHP et XML − Derniers messages/commentaires de son site</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#CrersonGadgetGoogleenPHPetXMLDerniersmessages_commentairesdesonsite">Créer son Gadget Google en PHP et XML − Derniers messages/commentaires de son site</a><br/><a href="#Unpeudedissection...">Un peu de dissection...</a><br/><a href="#Diffrentesfaonsdecoder">Différentes façons de coder</a><br/><a href="#CronsnotreGadget">Créons notre Gadget</a><br/></div>
<a name="CrersonGadgetGoogleenPHPetXMLDerniersmessages_commentairesdesonsite"></a><h2>Créer son Gadget Google en PHP et XML − Derniers messages/commentaires de son site</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/un-peu-de-dissection">
<span class="next">Un peu de dissection...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-341319" data-claire-element-id="341319">Oh qu'il est beau, le lavabo le Gadget Google. :D</p><p id="r-341320" data-claire-element-id="341320">Eh oui, ils sont bien sympathiques ces petits gadgets que l’on peut mettre dans notre accueil personnalisé, non ? De plus, certains peuvent être très pratiques. :)</p><p id="r-341321" data-claire-element-id="341321">Et c'est pourquoi nous allons voir ici comment créer notre propre Gadget Google que l'on pourra fièrement intégrer à notre page d'accueil super-chouette. :p <br/> Je vais donc vous montrer un gadget qui affichera le nom des personnes ayant posté les derniers commentaires sur votre site, les derniers messages dans votre livre d'or et les derniers messages dans votre <em>shoutbox</em>. ^^</p><p id="r-341322" data-claire-element-id="341322">Pour ceux qui auraient peur de se lancer dans la création d'un gadget, qu'ils se rassurent, ce n'est pas bien compliqué. Il suffit de connaître un minimum le langage que l'on veut utiliser. Ici le PHP, bien que l'on pourrait utiliser du Java, Python, etc.<br/> Il existe cependant plusieurs façons de faire un gadget, mais nous n'en verrons qu'une seule ici, celle utilisant un fichier externe.</p><p id="r-341323" data-claire-element-id="341323">À l'assauuuut ! :pirate:</p>
</div><a name="Unpeudedissection..."></a><h2>Un peu de dissection...</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/differentes-facons-de-coder">
<span class="next">Différentes façons de coder</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-341324" data-claire-element-id="341324">... pour voir de quoi se compose un gadget. :p</p><h2 id="r-structure-globale-1" data-claire-element-id="341329">Structure globale</h2><p id="r-341325" data-claire-element-id="341325">La base de tout gadget repose sur l'API Google Gadget et s'appuie sur l'utilisation de trois langages : XML, XHTML et JavaScript (bien que d'autres peuvent être utilisés).</p><p id="r-341326" data-claire-element-id="341326">Le XML va nous servir à structurer notre gadget afin que Google sache comment l'interpréter. Il s'agira donc d'un simple fichier XML qu'il vous faudra héberger quelque part (sauf sur votre ordinateur évidemment, sinon il sera impossible que Google et d'autres usagers puissent y accéder :p ).<br/> Ce fichier XML pourra soit comporter tout le code de notre gadget (ce qui ne sera pas le cas dans ce tutoriel), soit faire appel à d'autres pages pour recevoir des informations.</p><p id="r-341327" data-claire-element-id="341327">Le XHTML va servir à mettre en place la partie « statique » du gadget, laissant le PHP, le JavaScript, le Python se charger de la partie « dynamique ».</p><p id="r-341328" data-claire-element-id="341328">Voici un exemple bien connu du « Hello World », que l'on peut trouver <a href="http://www.google.com/ig/modules/hello.xml">quelque part</a> dans les méandres de Google. Examinons-le d'un peu plus près.</p><h2 id="r-structure-interne" data-claire-element-id="341338">Structure interne</h2><p id="r-341330" data-claire-element-id="341330">On peut donc voir que ce fichier XML est relativement simple.</p><pre id="r-341331" data-claire-element-id="341331"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
   &lt;Module&gt;
      &lt;ModulePrefs title=&quot;hello world example&quot; /&gt;
      &lt;Content type=&quot;html&quot;&gt;
         &lt;![CDATA[Hello, world!]]&gt;
      &lt;/Content&gt;
   &lt;/Module&gt;</code></pre><p id="r-341332" data-claire-element-id="341332">Examinons ce fichier petit à petit.</p><p id="r-341333" data-claire-element-id="341333">La première ligne indique le type de document (XML) ainsi que son encodage (UTF-8).<br/> La seconde ligne est la balise Module, celle qui englobera tout notre gadget (un peu comme la balise html en XHTML :p ).</p><div id="r-341335" data-claire-element-id="341335" data-claire-semantic="question"><p id="r-341334" data-claire-element-id="341334">Simplement pour l'histoire, si c'est la balise Module qui a été choisie, c'est simplement parce qu'avant, un gadget était appelé <em>Module</em>.</p></div><p id="r-341336" data-claire-element-id="341336">La ligne suivante va contenir les préférences de notre gadget (on ne s'en serait pas douté ^^ ). Ici, il y aura donc le titre du module par exemple.<br/> Vient ensuite la balise Content qui va contenir le code de notre gadget. Il est ici suivi de l'attribut type qui va spécifier le langage utilisé, en l'occurrence le HTML.<br/> L'élément qui vient juste après permet de dire au XML qu'il ne doit pas interpréter son code comme du XML. On retrouve donc du XHTML ou du JavaScript dans cet élément la plupart du temps.<br/> Ensuite on ferme la balise Content.<br/> Et enfin la balise Module.</p><p id="r-341337" data-claire-element-id="341337">Plutôt simple quand on y regarde bien, non ? ;)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site">Créer son Gadget Google en PHP et XML − Derniers messages/commentaires de son site</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/un-peu-de-dissection">
Un peu de dissection...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/differentes-facons-de-coder">
Différentes façons de coder
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/creons-notre-gadget">
Créons notre Gadget
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/differentes-facons-de-coder">
<span class="next">Différentes façons de coder</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Diffrentesfaonsdecoder"></a><h2>Différentes façons de coder</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/un-peu-de-dissection">
<span class="arrow"></span>
<span class="next">Un peu de dissection...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/creons-notre-gadget">
<span class="next">Créons notre Gadget</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-341340" data-claire-element-id="341340">Voici une sous-partie très courte qui va brièvement expliquer les différentes façons de coder un gadget.</p><p id="r-341341" data-claire-element-id="341341">Comme je l'ai dit plus tôt, il y a plusieurs façons de faire son gadget grâce à l'attribut type :</p><ul id="r-341348" data-claire-element-id="341348"><li id="r-341343" data-claire-element-id="341343"><p id="r-341342" data-claire-element-id="341342">type html &gt; coder tout dans le fichier XML ;</p></li><li id="r-341345" data-claire-element-id="341345"><p id="r-341344" data-claire-element-id="341344">type html-inline &gt; comme le type html, sauf que le code pourra modifier le contenu de la page parente ;</p></li><li id="r-341347" data-claire-element-id="341347"><p id="r-341346" data-claire-element-id="341346">type url &gt; permet d'utiliser un script extérieur (en PHP par exemple).</p></li></ul><h2 id="r-le-type-html" data-claire-element-id="341350">Le type html</h2><p id="r-341349" data-claire-element-id="341349">C'est le plus utilisé et le plus souple. Tout le contenu du code sera donc en (X)HTML, et pourra être accompagné de JavaScript, Flash, ActiveX et autres objets d'agents utilisateurs incorporés.</p><h2 id="r-le-type-html-inline" data-claire-element-id="341352">Le type html-inline</h2><p id="r-341351" data-claire-element-id="341351">Étant donné que ce type permet de modifier la page parente, il y a beaucoup de restrictions quant à son utilisation. En effet, il ne sera pas considéré comme une IFRAME mais fera partie intégrante de la page qui le contient. C'est pourquoi pour des raisons de sécurité, ce type de gadget ne peut être utilisé sur la page d'accueil personnalisée de Google, ni dans les pages Google, ni dans l'annuaire de contenus, ni sur une page web tierce.</p><h2 id="r-le-type-url" data-claire-element-id="341355">Le type url</h2><p id="r-341353" data-claire-element-id="341353">Comme déjà dit précédemment, avec ce type, le code du gadget se trouvera sur une page externe, indiquée par une URL. Cette page pourra bien entendu contenir du (X)HTML, JavaScript et autres, mais pourra également contenir du PHP, du Python... Le fichier XML ne contiendra alors aucun code XHTML ou JavaScript.</p><p id="r-341354" data-claire-element-id="341354">Voilà, c'est à peu près ce qu'il faut savoir. Il y a d'autres spécificités, mais je ne suis pas là pour entrer plus dans les détails. :) <br/> Nous allons donc enfin passer à la création de notre gadget ! :magicien:</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site">Créer son Gadget Google en PHP et XML − Derniers messages/commentaires de son site</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/un-peu-de-dissection">
Un peu de dissection...
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/differentes-facons-de-coder">
Différentes façons de coder
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/creons-notre-gadget">
Créons notre Gadget
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/un-peu-de-dissection">
<span class="arrow"></span>
<span class="next">Un peu de dissection...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/creons-notre-gadget">
<span class="next">Créons notre Gadget</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CronsnotreGadget"></a><h2>Créons notre Gadget</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/differentes-facons-de-coder">
<span class="arrow"></span>
<span class="next">Différentes façons de coder</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-341357" data-claire-element-id="341357">Alors, que j'explique la façon de faire.</p><ul id="r-341366" data-claire-element-id="341366"><li id="r-341359" data-claire-element-id="341359"><p id="r-341358" data-claire-element-id="341358">Création du fichier XML (ultra simple :p ).</p></li><li id="r-341361" data-claire-element-id="341361"><p id="r-341360" data-claire-element-id="341360">Création de la page PHP.</p></li><li id="r-341363" data-claire-element-id="341363"><p id="r-341362" data-claire-element-id="341362">Décorons notre gadget.</p></li><li id="r-341365" data-claire-element-id="341365"><p id="r-341364" data-claire-element-id="341364">Mise en place du gadget.</p></li></ul><h2 id="r-fichier-gadget-xml" data-claire-element-id="341374">Fichier : gadget.xml</h2><p id="r-341367" data-claire-element-id="341367">Commençons donc par la création du fichier XML. Comme je l'ai dit juste avant, ce fichier sera très simple et ne fera que quelques lignes.<br/> Il suffit de prendre la structure montrée précédemment et de modifier le type utilisé.<br/> Nous passons donc de ça :</p><pre id="r-341368" data-claire-element-id="341368"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
   &lt;Module&gt;
      &lt;ModulePrefs title=&quot;hello world example&quot; /&gt;
      &lt;Content type=&quot;html&quot;&gt;
         &lt;![CDATA[Hello, world!]]&gt;
      &lt;/Content&gt;
   &lt;/Module&gt;</code></pre><p id="r-341369" data-claire-element-id="341369">à ça :</p><pre id="r-341370" data-claire-element-id="341370"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
   &lt;Module&gt;
      &lt;ModulePrefs title=&quot;Mon super Gadget !&quot; /&gt;
      &lt;Content type=&quot;url&quot; href=&quot;lien/de/notre/gadget.php&quot; /&gt;
   &lt;/Module&gt;</code></pre><aside id="r-341372" data-claire-element-id="341372" data-claire-semantic="warning"><p id="r-341371" data-claire-element-id="341371">Comme vous l'aurez peut-être remarqué, avec le type url, la balise Content se ferme sous forme agrégée.</p></aside><p id="r-341373" data-claire-element-id="341373">Et voilà, c’en est fini de notre fichier XML : simple, n'est-ce pas ? :p</p><h2 id="r-page-gadget-php" data-claire-element-id="341392">Page : gadget.php</h2><p id="r-341375" data-claire-element-id="341375">Notre page PHP sera plutôt simple, elle aussi. Il suffira de se connecter à notre base de données, d'effectuer les requêtes nécessaires, et d'afficher les résultats.</p><p id="r-341376" data-claire-element-id="341376">On commence donc par se connecter à notre base de données :</p><pre id="r-341377" data-claire-element-id="341377"><code data-claire-semantic="html+php">&lt;?php
   mysql_connect(&quot;localhost&quot;, &quot;root&quot;, &quot;&quot;);
   mysql_select_db(&quot;perso&quot;);
?&gt;</code></pre><p id="r-341378" data-claire-element-id="341378">Ensuite, on structure notre page grâce au XHTML :</p><pre id="r-341379" data-claire-element-id="341379"><code data-claire-semantic="html+php">&lt;?php
   mysql_connect(&quot;localhost&quot;, &quot;root&quot;, &quot;&quot;);
   mysql_select_db(&quot;perso&quot;);
?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; lang=&quot;fr&quot;&gt;
&lt;head&gt;
   &lt;link rel=&quot;stylesheet&quot; href=&quot;gadget.css&quot; type=&quot;text/css&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;conteneur&quot;&gt;
   &lt;h1&gt;Commentaires&lt;/h1&gt;
      &lt;ul&gt;
         &lt;!-- 
            On introduira ici une boucle qui ira chercher les informations
            concernant les derniers commentaires postés. 
         --&gt;
      &lt;/ul&gt;
   &lt;h1&gt;Livre d'Or&lt;/h1&gt;
      &lt;ul&gt;
         &lt;!-- 
            On introduira ici une boucle qui ira chercher les informations
            concernant les derniers messages postés dans le livre d'or. 
         --&gt;
      &lt;/ul&gt;
   &lt;h1&gt;Shoutbox&lt;/h1&gt;
      &lt;ul&gt;
         &lt;!-- 
            On introduira ici une boucle qui affichera les derniers
            messages postés dans la Shoutbox. 
         --&gt;
      &lt;/ul&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;?php
   mysql_close();
?&gt;</code></pre><p id="r-341380" data-claire-element-id="341380">Rien de bien méchant là-dedans. J'en ai simplement profité pour fermer la connexion à la base de données et pour indiquer le chemin d'accès à un fichier CSS qui nous permettra de mettre en forme le rendu. ^^</p><p id="r-341381" data-claire-element-id="341381">Passons maintenant à la partie dynamique de notre gadget. Pour cela, nous allons effectuer des requêtes suivies de boucles qui afficheront ce que l'on veut. Je ne recopierai pas tout le code à chaque fois, simplement la partie qui nous intéresse...</p><p id="r-341382" data-claire-element-id="341382">Commençons par les commentaires. Ma base contient divers champs, dont un comportant le pseudo de la personne et l'autre le titre de la news à laquelle le commentaire se rattache. Utilisons donc ces deux informations pour lister… disons… les 5 dernières entrées de la base.</p><pre id="r-341383" data-claire-element-id="341383"><code data-claire-semantic="html+php">&lt;h1&gt;Commentaires&lt;/h1&gt;
&lt;ul&gt;
   &lt;?php
   $infos = mysql_query('SELECT commentaires.id_news, commentaires.pseudo, news.titre, news.id AS news_id FROM commentaires, news WHERE news.id = commentaires.id_news ORDER BY commentaires.id DESC LIMIT 0,5');
   while ($donnees = mysql_fetch_array($infos))
   { ?&gt;
      &lt;li&gt;
         &lt;?php echo stripslashes($donnees['pseudo']); ?&gt; dans &lt;?php echo stripslashes($donnees['titre']); ?&gt;					
      &lt;/li&gt;					
   &lt;?php
   } ?&gt;
&lt;/ul&gt;</code></pre><p id="r-341384" data-claire-element-id="341384">Normalement, ce code ne devrait pas vous poser de problèmes si vous avez lu le tutoriel de M@teo21. :-°</p><p id="r-341385" data-claire-element-id="341385">Seconde étape, les informations concernant les messages du livre d'or. Encore plus simple, j'hésite même à le mettre. :lol: <br/> Ici, seul le pseudo de la personne est utilisé.</p><pre id="r-341386" data-claire-element-id="341386"><code data-claire-semantic="html+php">&lt;h1&gt;Livre d'Or&lt;/h1&gt;
&lt;ul&gt;
   &lt;?php
   $infos = mysql_query('SELECT * FROM livreor ORDER BY id DESC LIMIT 0,5');
   while ($donnees = mysql_fetch_array($infos))
   { ?&gt;
      &lt;li&gt;
         Message de &lt;?php echo stripslashes($donnees['pseudo']); ?&gt;					
      &lt;/li&gt;					
   &lt;?php
   } ?&gt;
&lt;/ul&gt;</code></pre><p id="r-341387" data-claire-element-id="341387">Dernière partie, les messages de la shoutbox. Ici encore, rien d'extraordinaire, on fait dans le simple. :p</p><pre id="r-341388" data-claire-element-id="341388"><code data-claire-semantic="html+php">&lt;h1&gt;Shoutbox&lt;/h1&gt;
&lt;ul&gt;
   &lt;?php
   $reponse = mysql_query(&quot;SELECT * FROM chat ORDER BY ID DESC LIMIT 0,5&quot;);
   while ($donnees = mysql_fetch_array($reponse) )
   {
      $date = $donnees['timestamp']; ?&gt;
      &lt;li&gt;
         &lt;strong&gt;&lt;?php echo $donnees['pseudo']; ?&gt;&lt;/strong&gt; le &lt;?php echo date('d\/m\/Y \à H:i', $date); ?&gt; : 
         &lt;br /&gt;&lt;?php echo nl2br($donnees['message']); ?&gt;
      &lt;/li&gt; 
   &lt;?php
   } ?&gt;
&lt;/ul&gt;</code></pre><p id="r-341389" data-claire-element-id="341389">Et voilà ! C'est tout ! ;)</p><p id="r-341390" data-claire-element-id="341390">Un petit résumé pour ceux qui n'auraient pas bien suivi. ^^</p><pre id="r-341391" data-claire-element-id="341391"><code data-claire-semantic="html+php">&lt;?php
   mysql_connect(&quot;localhost&quot;, &quot;root&quot;, &quot;&quot;);
   mysql_select_db(&quot;perso&quot;);
?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; lang=&quot;fr&quot;&gt;
&lt;head&gt;
   &lt;link rel=&quot;stylesheet&quot; href=&quot;gadget.css&quot; type=&quot;text/css&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;conteneur&quot;&gt;
&lt;h1&gt;Commentaires&lt;/h1&gt;
&lt;ul&gt;
   &lt;?php
   $infos = mysql_query('SELECT commentaires.id_news, commentaires.pseudo, news.titre, news.id AS news_id FROM commentaires, news WHERE news.id = commentaires.id_news ORDER BY commentaires.id DESC LIMIT 0,5');
   while ($donnees = mysql_fetch_array($infos))
   { ?&gt;
      &lt;li&gt;
         &lt;?php echo stripslashes($donnees['pseudo']); ?&gt; dans &lt;?php echo stripslashes($donnees['titre']); ?&gt;					
      &lt;/li&gt;					
   &lt;?php
   } ?&gt;
&lt;/ul&gt;
&lt;h1&gt;Livre d'Or&lt;/h1&gt;
&lt;ul&gt;
   &lt;?php
   $infos = mysql_query('SELECT * FROM livreor ORDER BY id DESC LIMIT 0,5');
   while ($donnees = mysql_fetch_array($infos))
   { ?&gt;
      &lt;li&gt;
         Message de &lt;?php echo stripslashes($donnees['pseudo']); ?&gt;					
      &lt;/li&gt;					
   &lt;?php
   } ?&gt;
&lt;/ul&gt;
&lt;h1&gt;Shoutbox&lt;/h1&gt;
&lt;ul&gt;
   &lt;?php
   $reponse = mysql_query(&quot;SELECT * FROM chat ORDER BY ID DESC LIMIT 0,5&quot;);
   while ($donnees = mysql_fetch_array($reponse) )
   {
      $date = $donnees['timestamp']; ?&gt;
      &lt;li&gt;
         &lt;strong&gt;&lt;?php echo $donnees['pseudo']; ?&gt;&lt;/strong&gt; le &lt;?php echo date('d\/m\/Y \à H:i', $date); ?&gt; : 
         &lt;br /&gt;&lt;?php echo nl2br($donnees['message']); ?&gt;
      &lt;/li&gt; 
   &lt;?php
   } ?&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;?php
   mysql_close();
?&gt;</code></pre><h2 id="r-page-gadget-css" data-claire-element-id="341399">Page : gadget.css</h2><p id="r-341393" data-claire-element-id="341393">Bon allez, on passe à la déco. :p <br/> Je vous le dis tout de suite, je ne suis pas très doué niveau décoration, donc je me contenterai du minimum. :-°</p><p id="r-341394" data-claire-element-id="341394">Tout d'abord, il faut délimiter la taille de notre gadget. Pour cela, on va appliquer un style au div qui englobe tout notre code. Pour ceux qui ne l'auraient pas vu, il s'agit de conteneur.</p><pre id="r-341395" data-claire-element-id="341395"><code data-claire-semantic="css">#conteneur {
   max-width: 350px; /* On définit une largeur maximale */
   max-height: 180px; /* On définit une hauteur maximale */
   overflow: auto; /* On dit au navigateur d'utiliser des 
                   barres de défilement pour que le contenu puisse être totalement visible */
}</code></pre><p id="r-341396" data-claire-element-id="341396">Ensuite, je modifie la taille des titres et du texte se trouvant entre les balises &lt;li&gt;&lt;/li&gt;.</p><pre id="r-341397" data-claire-element-id="341397"><code data-claire-semantic="css">h1 {
   font-size: 1em;
   }

li {
   font-size: 0.8em;
   }</code></pre><p id="r-341398" data-claire-element-id="341398">Bon bah voilà, ça va être bon, là. :-°</p><h2 id="r-mise-en-place-du-gadget" data-claire-element-id="341417">Mise en place du gadget</h2><p id="r-341400" data-claire-element-id="341400">Il ne nous reste plus qu'à envoyer tout ça sur un FTP. :p <br/> Nous avons donc trois fichiers : gadget.xml, gadget.php et gadget.css.<br/> Il vous suffit d'envoyer ces trois fichiers sur un serveur (dans un dossier gadget par exemple, histoire de vous y retrouver :-° ).</p><p id="r-341401" data-claire-element-id="341401">Ensuite, direction l'accueil personnalisé de Google.</p><p id="r-341402" data-claire-element-id="341403"><a href="medias/uploads.siteduzero.com_files_116001_117000_116749.png"><img id="r-341403" data-claire-element-id="341402" src="medias/uploads.siteduzero.com_thb_116001_117000_116749.png" alt="ajout_module"/></a>Un petit clic sur Ajouter des modules.</p><p id="r-341404" data-claire-element-id="341405"><a href="medias/uploads.siteduzero.com_files_116001_117000_116750.png"><img id="r-341405" data-claire-element-id="341404" src="medias/uploads.siteduzero.com_thb_116001_117000_116750.png" alt="adr_mod"/></a>Un clic sur Ajouter un flux ou un gadget.<br/> On met l'adresse de notre gadget.<br/> On clique sur Ajouter.</p><p id="r-341406" data-claire-element-id="341407"><a href="medias/uploads.siteduzero.com_files_116001_117000_116751.png"><img id="r-341407" data-claire-element-id="341406" src="medias/uploads.siteduzero.com_thb_116001_117000_116751.png" alt="resultat"/></a>Et voilà le résultat sur notre page d'accueil. ^^</p><p id="r-341408" data-claire-element-id="341408">On a enfin terminé notre premier Gadget Google !<br/> La classe, nan ? :soleil:</p><p id="r-341409" data-claire-element-id="341409">Bien entendu, vous pouvez (et devez ? :p ) modifier le CSS pour que ça soit plus joli, car là, ce n'est pas terrible, faut avouer. :-° <br/> J'espère en tout cas que cela vous aura donné quelques idées pour créer votre propre gadget, utile ou non, et que vous pourrez en faire profiter les autres ;) (je n'ai pas indiqué comment faire pour rendre le gadget public, car je ne me suis jamais posé la question ; peut-être qu’une annexe viendra l'indiquer plus tard :) ).</p><p id="r-341410" data-claire-element-id="341410">Je tiens à signaler que j'ai utilisé un livre fort sympathique pour apprendre tout ça, et m'en suis inspiré par moments. Il s'agit de <em>HTML - Le guide complet</em> de Fabrice Lemainque, aux éditions Micro Application.</p><p id="r-341411" data-claire-element-id="341411">Sur ce, bonne programmation à toutes et à tous, et surtout bonne nuit.<br/> :magicien: *pouf, disparaît* :magicien:</p><aside id="r-341413" data-claire-element-id="341413" data-claire-semantic="information"><p id="r-341412" data-claire-element-id="341412">Merci à peupeu et ptipilou pour la zCorrection qu'ils ont effectuée. :)</p></aside><figure id="r-341415" data-claire-element-id="341416"><img id="r-341414" data-claire-element-id="341414" src="medias/www.zcorrecteurs.fr_ext_badge.png" alt="Image utilisateur"/></figure>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site">Créer son Gadget Google en PHP et XML − Derniers messages/commentaires de son site</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/un-peu-de-dissection">
Un peu de dissection...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/differentes-facons-de-coder">
Différentes façons de coder
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/creons-notre-gadget">
Créons notre Gadget
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site/differentes-facons-de-coder">
<span class="arrow"></span>
<span class="next">Différentes façons de coder</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 05:39:43 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-son-gadget-google-en-php-et-xml-derniers-messages-commentaires-de-son-site.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:00:14 GMT -->
</html>