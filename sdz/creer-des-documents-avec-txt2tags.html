<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-des-documents-avec-txt2tags.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 07:13:08 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-des-documents-avec-txt2tags.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:18:00 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Créer des documents avec txt2tags</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/creer-des-documents-avec-txt2tags.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Créer des documents avec txt2tags</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Crerdesdocumentsavectxt2tags">Créer des documents avec txt2tags</a><br/><a href="#Prsentationdetxt2tags">Présentation de txt2tags</a><br/><a href="#Installertxt2tags">Installer txt2tags</a><br/><a href="#Utilisationdebase">Utilisation de base</a><br/><a href="#Utilisationavance">Utilisation avancée</a><br/></div>
<a name="Crerdesdocumentsavectxt2tags"></a><h2>Créer des documents avec txt2tags</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/presentation-de-txt2tags">
<span class="next">Présentation de txt2tags</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-373340" data-claire-element-id="373340"><strong>Txt2tags</strong> est une syntaxe wiki, un générateur de documents et un pré-processeur de textes très pratique, écrit par <em>Aurélio Marinho Jargas</em>.</p><p id="r-373341" data-claire-element-id="373341">Ce logiciel ressemble à ce qu'on peut avoir avec reStructuredText, la syntaxe MediaWiki (celle utilisé par wikipedia) ou à Markdown, mais en plus puissant grâce à son système de macros utilisant pré-processeur et post-processeur, permettant de personnaliser et d'étendre à l'infini la syntaxe de base de txt2tags. C'est donc une véritable alternative à ces projets, mais aussi un outil qui va bien au-delà des fonctionnalités de ce qu'on peut trouver ailleurs.</p><p id="r-373342" data-claire-element-id="373342">Txt2tags permet d'ailleurs d'exporter dans de nombreux autres langages à balises :<br/> HTML, XHTML, SGML, LaTeX, Lout, Man page, Wikipedia / MediaWiki, Google Code Wiki, DokuWiki, MoinMoin, MagicPoint, PageMaker, Plein texte (texte brut)</p><p id="r-373343" data-claire-element-id="373343">Ainsi dans les utilisations possibles de txt2tags, on trouve la génération de pages internet statiques (et valides W3C), mais également la possibilité de générer des pages PHP, la création d'articles ou de livres en LaTeX destinés à être exportés en pdf ou imprimés, des documentations devant être converties dans divers formats... c'est aussi pour cela qu'un tutoriel complet nous semble nécessaire pour en appréhender les concepts et l'utilisation.</p><p id="r-373344" data-claire-element-id="373344">Multiplateforme, de par son code composé d'un unique script python, il a également été empaqueté pour de nombreuses distributions Linux, pour Mac OS X, et pour Windows, ce qui permet de l'installer rapidement au coeur de son ordinateur.</p><p id="r-373345" data-claire-element-id="373345">Nous apprendrons donc dans ce tutoriel comment installer txt2tags et en faire une utilisation basique, puis nous verrons quelques exemples concrets d'utilisation avancée des directives de remplacement, pour réellement exploiter toute la puissance de cet étonnant outil multi-fonctions.</p>
</div><a name="Prsentationdetxt2tags"></a><h2>Présentation de txt2tags</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/installer-txt2tags">
<span class="next">Installer txt2tags</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-373346" data-claire-element-id="373346">On peut tout d'abord se demander ce qui peut nous pousser à encourager l'utilisation de txt2tags. Qu'est-ce que ça cache ? :lol:</p><p id="r-373347" data-claire-element-id="373347">Premièrement, c'est un outil tellement pratique qu'on ne comprend pas pourquoi il n'est pas plus connu. Ainsi on veut en faire profiter le maximum d'utilisateurs potentiels, car il gagne vraiment à être découvert. L'essayer, c'est l'adopter !</p><p id="r-373348" data-claire-element-id="373348">Ensuite, on se dit que si cet outil et sa syntaxe se généralisent et se démocratisent, cela voudra dire également que l'on trouvera par la suite de plus en plus de projets et de logiciels annexes compatibles avec txt2tags, ce qui profitera donc à tout le monde en retour, avec un meilleur support de la syntaxe dans les éditeurs de texte, dans les projets type wordpress ou autre CMS. Même le site du zéro ne propose pas le code txt2tags dans les exemples de code, aussi ce tutoriel restera un peu gris...</p><aside id="r-373350" data-claire-element-id="373350" data-claire-semantic="information"><p id="r-373349" data-claire-element-id="373349">Certains peuvent également s'interroger : &quot;mais pourquoi encore un nouveau langage de balise alors qu'il existe déjà Markdown ou MediaWiki ?&quot;. Et pourtant, txt2tags fait figure de vétéran car il existe déjà depuis 2001 : la première version étant sortie le 26 juillet 2001 !</p></aside><h2 id="r-le-concept-de-txt2tags" data-claire-element-id="373380">Le concept de txt2tags</h2><h3 id="r-benefices" data-claire-element-id="373363">Bénéfices</h3><p id="r-373351" data-claire-element-id="373351">Txt2tags, c'est 3 aspects (et avantages) à la fois :</p><ul id="r-373354" data-claire-element-id="373354"><li id="r-373353" data-claire-element-id="373353"><p id="r-373352" data-claire-element-id="373352">Une syntaxe simple et dépouillée, de type wiki, plus agréable à utiliser que celle de html, LaTeX ou même wikipedia. Quelques règles à apprendre permettant de traiter la plupart des cas souhaitées en publication (<strong>gras</strong>, <em>italiques</em>, souligné, listes à puce...), et leur expressivité même rend un code source écrit en txt2tags lisible et utilisable tel quel.</p></li></ul><ul id="r-373357" data-claire-element-id="373357"><li id="r-373356" data-claire-element-id="373356"><p id="r-373355" data-claire-element-id="373355">La possibilité d'exporter dans les formats de création de documents et de publication les plus courants, ainsi que d'ajouter facilement de nouveaux formats d'exportation à la liste déjà grande des formats supportés.</p></li></ul><ul id="r-373360" data-claire-element-id="373360"><li id="r-373359" data-claire-element-id="373359"><p id="r-373358" data-claire-element-id="373358">Son système de macros peut lever n'importe quelle limitation de la syntaxe initiale et l'étendre quasiment à l'infini, on n'est donc jamais bloqué dans son expression avec txt2tags.</p></li></ul><p id="r-373361" data-claire-element-id="373361">S'il n'y avait que les deux premiers points, cela aurait été déjà très bien, mais txt2tags n'aurait pas été aussi génial sans le dernier aspect évoqué, en effet, en ce qui concerne ce système de macros avec le pré-processeur et post-processeur, il permettra de remplacer les parties de code que l'on souhaite, y compris en utilisant des expressions régulières complexes.</p><p id="r-373362" data-claire-element-id="373362">Le tout est servi dans un soucis de simplicité, propre à la <a href="http://fr.wikipedia.org/wiki/Keep_it_Simple%2C_Stupid">philosophie KISS</a>.</p><h3 id="r-critiques" data-claire-element-id="373379">Critiques</h3><p id="r-373364" data-claire-element-id="373364">Si j'avais quelques critiques à faire envers txt2tags, c'est que :</p><ul id="r-373367" data-claire-element-id="373367"><li id="r-373366" data-claire-element-id="373366"><p id="r-373365" data-claire-element-id="373365">lorsqu'on fait un seul retour à la ligne, il n'est pas pris en compte : il faut passer 1 ligne pour faire un saut de ligne, mais il n'est pas possible de base d'afficher un simple retour à la ligne sans sauter une ligne et sans rajouter de marque spéciale (type &lt;br/&gt; ou autre). Malgré tout il est possible avec une directive du préprocesseur (postproc(xhtml): &quot;$&quot; '&lt;br/&gt;') de modifier le comportement par défaut, mais étant donné que txt2tags n'est pas prévu pour cela, on peut obtenir des résultats parfois non souhaités.</p></li></ul><ul id="r-373370" data-claire-element-id="373370"><li id="r-373369" data-claire-element-id="373369"><p id="r-373368" data-claire-element-id="373368">l'insertion de texte de type verbatim (c'est à dire de parties qui devront figurer telles quelles, qui ne seront pas interprétées) n'est pas toujours très pratique, du fait des possibilités avancées de txt2tags : en effet, si on demande au postprocesseur de remplacer une portion de texte lors de l'exportation vers du html, même si on a placé cette portion dans les marques adéquates (entre ``` ou entre &quot;&quot;&quot;), cela sera quand même modifié par le postprocesseur, en revanche le formatage de base ne sera pas interprété.</p></li></ul><ul id="r-373373" data-claire-element-id="373373"><li id="r-373372" data-claire-element-id="373372"><p id="r-373371" data-claire-element-id="373371">Les directives du pre/post-processeur ne fonctionnent que sur une seule et même ligne, on ne peut pas faire un filtre qui prend en compte en entrée les retour à la ligne. Néanmoins on peut bien entendu rajouter des retours à la ligne après le passage dans un filtre pre/post-processeur (soit avec , soit avec &lt;br/&gt; etc.).</p></li></ul><p id="r-373374" data-claire-element-id="373374">Malgré tout, sachez bien que l'on peut faire presque tout avec txt2tags, donc ce qui peut sembler une limitation pourra toujours être contourné à un moment ou un autre par votre esprit astucieux ! ;)</p><ul id="r-373377" data-claire-element-id="373377"><li id="r-373376" data-claire-element-id="373376"><p id="r-373375" data-claire-element-id="373375">La dernière critique, c'est que comme c'est implémenté en python, cela n'est pas aussi accessible que si c'était en php, pour une utilisation en ligne chez les hébergeurs traditionnels.</p></li></ul><p id="r-373378" data-claire-element-id="373378">Mais voyons comment l'installer sur notre ordinateur maintenant.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags">Créer des documents avec txt2tags</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/presentation-de-txt2tags">
Présentation de txt2tags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/installer-txt2tags">
Installer txt2tags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-de-base">
Utilisation de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-avancee-1">
Utilisation avancée
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/installer-txt2tags">
<span class="next">Installer txt2tags</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Installertxt2tags"></a><h2>Installer txt2tags</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/presentation-de-txt2tags">
<span class="arrow"></span>
<span class="next">Présentation de txt2tags</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-de-base">
<span class="next">Utilisation de base</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h3 id="r-windows-8" data-claire-element-id="373385">Windows</h3><p id="r-373382" data-claire-element-id="373382">Pour utiliser txt2tags sous Microsoft Windows, à moins que vous ne l'ayez déjà, il vous faudra installer Python depuis le site <a href="http://www.python.org/">http://www.python.org/</a><br/> Il s'agit d'un langage de programmation et de bibliothèques permettant de faire tourner le script de txt2tags.</p><p id="r-373383" data-claire-element-id="373383">La source de txt2tags étant dans une archive tar.gz pas très pratique à manipuler depuis windows, nous vous conseillons de simplement récupérer le code txt2tags à cette adresse <a href="http://txt2tags.googlecode.com/svn/trunk/txt2tags">http://txt2tags.googlecode.com/svn/trunk/txt2tags</a> et de le sauvegarder sous le nom txt2tags.py</p><p id="r-373384" data-claire-element-id="373384">En double cliquant sur ce fichier, vous accéderez à son interface graphique, mais vous pourrez également l'utiliser dans un fichier batch (.bat) ou en ligne de commande (cmd.exe).</p><h3 id="r-linux-bsd" data-claire-element-id="373396">Linux/BSD</h3><p id="r-373386" data-claire-element-id="373386">Sous Linux ou BSD, vous avez déjà python d'installé, et txt2tags est prévu dans la plupart des dépôts des distributions les plus courantes, aussi sur la majorité des systèmes vous n'aurez qu'à faire :</p><ul id="r-373395" data-claire-element-id="373395"><li id="r-373388" data-claire-element-id="373388"><p id="r-373387" data-claire-element-id="373387">Fedora : <em>yum install txt2tags</em></p></li><li id="r-373390" data-claire-element-id="373390"><p id="r-373389" data-claire-element-id="373389">Ubuntu, Debian : <em>sudo apt-get install txt2tags</em></p></li><li id="r-373392" data-claire-element-id="373392"><p id="r-373391" data-claire-element-id="373391">Archlinux : <em>pacman -S txt2tags</em></p></li><li id="r-373394" data-claire-element-id="373394"><p id="r-373393" data-claire-element-id="373393">FreeBSD : <em>pkg_add -r txt2tags</em></p></li></ul><h3 id="r-mac-os-x-2" data-claire-element-id="373399">Mac OS X</h3><p id="r-373397" data-claire-element-id="373397">Il existe un paquet disponible ici : <a href="http://txt2tags.sourceforge.net/download.html">http://txt2tags.sourceforge.net/download.html</a><em>(le créateur de txt2tags utilise d'ailleurs Mac OS X régulièrement.)</em></p><p id="r-373398" data-claire-element-id="373398">Ce paquet permet d'installer le script txt2tags ainsi que le manuel et les exemples, mais il n'utilise pas de lanceur adapté pour Mac OS X, il faudra donc passer par le terminal pour l'utiliser. Il existe malgré tout une interface graphique, que nous verrons bientôt.</p><h3 id="r-autres-systemes-d-exploitation" data-claire-element-id="373404">Autres systèmes d'exploitation</h3><aside id="r-373402" data-claire-element-id="373402" data-claire-semantic="information"><p id="r-373400" data-claire-element-id="373400">De façon générale, txt2tags étant un simple script python composé d'un seul fichier, vous pouvez récupérer l'archive (qui contient en plus le manuel, des outils, colorations syntaxique et des exemples) ici : <a href="http://txt2tags.sourceforge.net/download.html">http://txt2tags.sourceforge.net/download.html</a>.</p><p id="r-373401" data-claire-element-id="373401">La dernière version en cours de développement de ce script est directement téléchargeable ici : <a href="http://txt2tags.googlecode.com/svn/trunk/txt2tags">http://txt2tags.googlecode.com/svn/trunk/txt2tags</a>.</p></aside><p id="r-373403" data-claire-element-id="373403">Il est enfin possible d'utiliser txt2tags directement en ligne, depuis son site internet : <br/><a href="http://txt2tags.sourceforge.net/online.php">http://txt2tags.sourceforge.net/online.php</a></p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags">Créer des documents avec txt2tags</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/presentation-de-txt2tags">
Présentation de txt2tags
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/installer-txt2tags">
Installer txt2tags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-de-base">
Utilisation de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-avancee-1">
Utilisation avancée
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/presentation-de-txt2tags">
<span class="arrow"></span>
<span class="next">Présentation de txt2tags</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-de-base">
<span class="next">Utilisation de base</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisationdebase"></a><h2>Utilisation de base</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/installer-txt2tags">
<span class="arrow"></span>
<span class="next">Installer txt2tags</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-avancee-1">
<span class="next">Utilisation avancée</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-avec-l-interface-graphique" data-claire-element-id="373410">Avec l'interface graphique</h2><figure id="r-373407" data-claire-element-id="373408"><img id="r-373406" data-claire-element-id="373406" src="medias/uploads.siteduzero.com_files_233001_234000_233332.png" alt="t2tgui.png"/></figure><p id="r-373409" data-claire-element-id="373409">Cette interface graphique rudimentaire et optionnelle fonctionne sur toutes les plateformes, du moment que le module tkinter de python est installé. Nous ne nous étendrons pas dessus, il suffit juste de choisir le fichier à convertir, les options et le format d'exportation souhaités. Dans le cas où l'entête contient déjà des directives sur les options et le format d'exportation, ils seront déjà prédéfinis dans l'interface.</p><h2 id="r-en-ligne-de-commande-1" data-claire-element-id="373425">En ligne de commande</h2><p id="r-373411" data-claire-element-id="373411">L'utilisation de la ligne de commande est bien plus rapide pour traiter rapidement des conversions de documents.</p><h3 id="r-sous-windows-25" data-claire-element-id="373418">Sous Windows</h3><p id="r-373412" data-claire-element-id="373412">Un petit fichier nommé convertir.bat contenant le code :</p><pre id="r-373413" data-claire-element-id="373413"><code>python txt2tags.py mon_document.t2t</code></pre><p id="r-373414" data-claire-element-id="373414">permettra de générer directement votre document sous windows.</p><p id="r-373415" data-claire-element-id="373415">Vous pouvez également créer un convertisseur automatique, qui vous permettra de glisser-déposer un document txt2tags sur le fichier .bat, et de le convertir au format souhaité (défini dans son entête, comme on verra juste ensuite).</p><p id="r-373416" data-claire-element-id="373416">Le code du fichier batch, à adapter selon votre cas, sera :</p><pre id="r-373417" data-claire-element-id="373417"><code>Set CURRENTDIR=%CD%  
python.exe &quot;C:\Documents and Settings\Utilisateur\Mes documents\Chemin_vers_txt2tags\txt2tags.py&quot; %1 
pause</code></pre><h3 id="r-sous-unix-linux-bsd-mac-os-x" data-claire-element-id="373424">Sous Unix (Linux, BSD, Mac OS X)</h3><p id="r-373419" data-claire-element-id="373419">Nous vous recommandons d'utiliser un makefile, bien qu'il soit tout à fait possible d'invoquer simplement une conversion avec la commande :</p><pre id="r-373420" data-claire-element-id="373420"><code>txt2tags mon_document.t2t</code></pre><p id="r-373421" data-claire-element-id="373421">Un makefile simple pourra être de cette forme :</p><pre id="r-373422" data-claire-element-id="373422"><code>DOCUMENT = mon_document
   
TXT2TAGS = txt2tags
    
html: 
          $(TXT2TAGS) -t xhtml --toc --outfile $(DOCUMENT).html $(DOCUMENT).t2t
     
pdf: 
          $(TXT2TAGS) -t tex --outfile $(DOCUMENT).tex $(DOCUMENT).t2t
          -pdflatex -interaction batchmode $(DOCUMENT).tex</code></pre><p id="r-373423" data-claire-element-id="373423"><em>make html</em> générera donc le document html, tandis que <em>make pdf</em>, exportera en fichier .tex puis en pdf via la commande pdflatex.</p><h2 id="r-syntaxe-26" data-claire-element-id="373490">Syntaxe</h2><h3 id="r-la-structure-du-document" data-claire-element-id="373436">La structure du document</h3><p id="r-373426" data-claire-element-id="373426">À de rares exceptions près, les documents txt2tags sont structurés sous cette forme :</p><ul id="r-373433" data-claire-element-id="373433"><li id="r-373428" data-claire-element-id="373428"><p id="r-373427" data-claire-element-id="373427">Entêtes (3 lignes contenant le titre, l'auteur, et éventuellement un sous-titre)</p></li><li id="r-373430" data-claire-element-id="373430"><p id="r-373429" data-claire-element-id="373429">Configuration (options)</p></li><li id="r-373432" data-claire-element-id="373432"><p id="r-373431" data-claire-element-id="373431">Corps du text</p></li></ul><p id="r-373434" data-claire-element-id="373434">Ce qui donne :</p><pre id="r-373435" data-claire-element-id="373435"><code>Le titre du document 
L'auteur   
Dernière mise à jour (ligne optionnelle) : %%mtime(%c)  
   
%!target  : html   
%!style   : mon_style.css 
%!encoding: utf-8 
%!options : --toc --outfile mon_document.html 
   
   
Ceci est le début de mon document, le corps de texte. 
Bonne continuation avec txt2tags...</code></pre><h3 id="r-les-balises-4" data-claire-element-id="373464">Les balises</h3><p id="r-373437" data-claire-element-id="373437">Dans txt2tags, la plupart des balises sont créées avec des symboles encadrant le texte, ce qui est très pratique. De plus, toutes les balises pour la mise en forme de base (gras, souligné, barré, italique) vont toujours par paire de 2 symboles.</p><p id="r-373438" data-claire-element-id="373438">Mettre en forme :</p><p id="r-373439" data-claire-element-id="373439">D'autres wiki concurrents utilisent pour toutes les mises en forme un symbole unique (par exemple l'apostrophe), mais répétés de façon différente à chaque fois, par exemple :</p><p id="r-373440" data-claire-element-id="373440">'''gras (pas valable pour txt2tags)''' et ''italique (pas valable non plus pour txt2tags)''</p><p id="r-373441" data-claire-element-id="373441">'''''Gras et italique (heureusement pas utilisé dans txt2tags)'''''</p><p id="r-373442" data-claire-element-id="373442">Des choses amusantes se passent si on utilise en plus de vrais apostrophes dans son texte, cela devient rapidement l'''anarchie''... Et dire que cette syntaxe est utilisée sur un des sites les plus consultés au monde...</p><p id="r-373443" data-claire-element-id="373443">La règle est donc que dans txt2tags, tout ce qui est <strong>**gras**</strong>, __souligné__, --barré-- ou <em>//italique//</em> se trouve toujours entre 2 paires de symboles.</p><p id="r-373444" data-claire-element-id="373444">Hiérarchiser &gt; Les titres :</p><p id="r-373445" data-claire-element-id="373445">On a également d'autres wiki qui utilisent pour la mise en forme des entêtes un soulignement du texte, par exemple :</p><p id="r-373446" data-claire-element-id="373446">Exemple de titre niveau 1 que l'on ne trouvera pas dans txt2tags <br/> =========================================================</p><p id="r-373447" data-claire-element-id="373447">Et le titre niveau 2 qui va avec (pas valable non plus pour txt2tags) <br/> ----------------------------</p><p id="r-373448" data-claire-element-id="373448">ou encore en précédant uniquement le titre avec des symboles d'un seul côté :</p><p id="r-373449" data-claire-element-id="373449">++ Titre niveau 2 (pas valable pour txt2tags) <br/> +++ Titre niveau 3 (pas valable pour txt2tags)</p><p id="r-373450" data-claire-element-id="373450">Cela rend malheureusement les documents utilisant cette syntaxe wiki plus difficiles à analyser syntaxiquement (pour modifier du texte lors de l'exportation par exemple).</p><p id="r-373451" data-claire-element-id="373451">Évoquons rapidement certains qui font cela à l'envers :</p><p id="r-373452" data-claire-element-id="373452">====== Titre 1 (pas avec txt2tags) ====== <br/> ===== Titre 2 (pas avec txt2tags) =====</p><p id="r-373453" data-claire-element-id="373453">Cela peut sembler plus pratique pour mieux voir un titre (il a plus d'importance, donc il prend plus de signes), mais ce n'est pas très logique ni facile à retenir (titre 1 c'est 6 ou 5 signes déjà ?)</p><p id="r-373454" data-claire-element-id="373454">Dans txt2tags, le nombre de = pour qualifier un titre est en fonction du niveau de ce titre (titre niveau 2 implique 2 signes <em>égal</em> de chaque côté du titre). Il est également possible de rajouter un nom à la suite de ce titre, entre crochets et collé au dernier signe =, et cela sera utilisé pour la création d'ancres pour les liens nommés, par exemple un titre simple == Titre niveau 2 == pourra être indiqué == Titre niveau 2 : la compilation du code ==[compil]</p><p id="r-373455" data-claire-element-id="373455">Hiérarchiser &gt; Les listes :</p><p id="r-373456" data-claire-element-id="373456">Les listes dans txt2tags dérogent à la règle des symboles qui entourent le formatage, mais les éléments de celles-ci on rarement besoin d'être reformatés avant d'être exportés, et au pire des cas on peut toujours faire précéder et suivre la liste entière avec des marquages spéciaux si nécessaire. On débute chaque élément par un tiret (-) ou un plus (+), selon que l'on souhaite une liste non ordonnée ou ordonnée. On peut rajouter des tirets avec un décalage d'un espace pour créer des sous-éléments.</p><p id="r-373457" data-claire-element-id="373457">Lier au monde extérieur :</p><p id="r-373458" data-claire-element-id="373458">Enfin, pour les liens, ceux-ci suivent tout le temps la partie à mettre en lien, et là aussi c'est plus pratique et logique lors de la relecture, car au lieu de [http://fr.wikipedia.org/wiki/Utilisabilit%C3%A9 buter sur un lien comme sur certains wiki], d'aller au bout du lien, et de continuer la lecture pour voir ce à quoi il se rapporte, on a directement le texte, [dans une forme immédiatement accessible http://fr.wikipedia.org/wiki/Utilisabilit%C3%A9], même si on rajoute des choses après ce lien.</p><p id="r-373459" data-claire-element-id="373459">Autres possibilités (images, tableaux) :</p><p id="r-373460" data-claire-element-id="373460">Il est possible de rajouter des images (nom du fichier entre crochets, comme un lien, par exemple [zozor.png]), d'entrer du texte tel quel (verbatim ou raw text), entre `` ou &quot;&quot;.</p><p id="r-373461" data-claire-element-id="373461">Pour les tableaux, cela se fait à l'aide du symbole &quot;pipe&quot; |, comme ceci :</p><pre id="r-373462" data-claire-element-id="373462"><code>|| Titre de colonne  | Titre de l'autre colonne |
| contenu de tableau |   encore du texte        |
| lorem ipsum        |  etc...                  |
| etc...             |  etc...                  |</code></pre><p id="r-373463" data-claire-element-id="373463">Il existe encore d'autres subtilités, mais vous devriez plutôt vous référer au <a href="http://txt2tags.sourceforge.net/userguide/PartVMasteringMarks.html#6">manuel complet en ligne</a> pour cela, car cela dépasse le cadre de ce tutoriel qui se focalise plutôt sur la création de documents.</p><h3 id="r-memo" data-claire-element-id="373489">Mémo</h3><p id="r-373465" data-claire-element-id="373465">Voici donc un résumé des points les plus important de la syntaxe :</p><ul id="r-373488" data-claire-element-id="373488"><li id="r-373467" data-claire-element-id="373467"><p id="r-373466" data-claire-element-id="373466">**gras** : <strong>gras</strong></p></li><li id="r-373469" data-claire-element-id="373469"><p id="r-373468" data-claire-element-id="373468">//italique// : <em>italique</em></p></li><li id="r-373471" data-claire-element-id="373471"><p id="r-373470" data-claire-element-id="373470">__soulignage__ : soulignage</p></li><li id="r-373473" data-claire-element-id="373473"><p id="r-373472" data-claire-element-id="373472">--barré-- : barré</p></li><li id="r-373475" data-claire-element-id="373475"><p id="r-373474" data-claire-element-id="373474">= titre = (à différents niveaux, on a ainsi == titre 2 ==, === titre 3 === etc)</p></li><li id="r-373477" data-claire-element-id="373477"><p id="r-373476" data-claire-element-id="373476">- liste</p></li><li id="r-373479" data-claire-element-id="373479"><p id="r-373478" data-claire-element-id="373478">+ liste numérotée</p></li><li id="r-373481" data-claire-element-id="373481"><p id="r-373480" data-claire-element-id="373480">``code``</p></li><li id="r-373483" data-claire-element-id="373483"><p id="r-373482" data-claire-element-id="373482">[image.jpg]</p></li><li id="r-373485" data-claire-element-id="373485"><p id="r-373484" data-claire-element-id="373484">[lien vers un site <a href="http://www.site.com%5d/">http://www.site.com]</a> : <a href="http://www.site.com/">lien vers un site</a></p></li><li id="r-373487" data-claire-element-id="373487"><p id="r-373486" data-claire-element-id="373486">| table |</p></li></ul><h2 id="r-premier-exemple-de-remplacements" data-claire-element-id="373520">Premier exemple de remplacements</h2><p id="r-373491" data-claire-element-id="373491">On peut d'ailleurs même tester txt2tags directement depuis son site internet.</p><p id="r-373492" data-claire-element-id="373492">Copiez donc ce code dans le formulaire en ligne <a href="http://txt2tags.sourceforge.net/online.php">http://txt2tags.sourceforge.net/online.php</a> :</p><pre id="r-373493" data-claire-element-id="373493"><code>%!preproc: 'MYBESTFRIEND' 'Nathalie'
   
Ce matin j'ai fait la rencontre de MYBESTFRIEND en me baladant dans le parc.
MYBESTFRIEND y faisait du footing.</code></pre><p id="r-373494" data-claire-element-id="373494">Le résultat sera donc :</p><pre id="r-373495" data-claire-element-id="373495"><code data-claire-semantic="console">Ce matin j'ai fait la rencontre de Nathalie en me baladant dans le parc. Nathalie y faisait du footing.</code></pre><p id="r-373496" data-claire-element-id="373496">Ici je mets exprès de côté le formatage en gras, italique, souligné, qui est facile à comprendre et que vous pouvez tester avec la page par défaut du formulaire en ligne.</p><p id="r-373497" data-claire-element-id="373497">Ainsi on a vu la manière la plus basique de créer un remplacement de texte. Si dans un document on a de nombreuses références à un mot (voire même un lien internet) appelé à changer ou à être modifié par la suite, on peut créer cette sorte de variable pour la remplacer au dernier moment.</p><aside id="r-373499" data-claire-element-id="373499" data-claire-semantic="information"><p id="r-373498" data-claire-element-id="373498">Il n'est pour le moment pas possible d'entrer des lettres accentuées dans ce formulaire de test, c'est un bug dans la conception de la page, et non pas dans txt2tags.</p></aside><p id="r-373500" data-claire-element-id="373500">L'indication preproc signifie que le texte sera remplacé avant tout autre remplacement habituel de la syntaxe txt2tags (avant d'être converti en html par exemple), tandis que postproc permet de remplacer le texte après qu'il ait été converti par txt2tags. En utilisant ces 2 possibilités, cela permet de jongler avec tous les cas de figure possible, comme on va le voir ensuite.</p><p id="r-373501" data-claire-element-id="373501">Le schéma de remplacements de txt2tags est donc :</p><p id="r-373502" data-claire-element-id="373502"><strong>tous les remplacements preproc (dans l'ordre d'apparition, et ligne par ligne) <br/> ⇓<br/> conversion html (ou tex, ou mediawiki etc) <br/> ⇓<br/> tous les remplacements postproc (dans l'ordre d'apparition, et ligne par ligne)</strong></p><p id="r-373503" data-claire-element-id="373503">Maintenant, on va par exemple vouloir remplacer un mot, mais également l'entourer avec un effet de texte (titre visible lorsqu'on passe la souris au-dessus), et cela uniquement lors d'une exportation en html (on indique donc html entre parenthèses après le preproc). Pour cela, tapez :</p><pre id="r-373504" data-claire-element-id="373504"><code>%!preproc(html): 'MYBESTFRIEND' &lt;span title=&quot;Oui, MYBESTFRIEND c'est ma meilleure amie !&quot;&gt;MYBESTFRIEND&lt;/span&gt;
   
%!preproc: 'MYBESTFRIEND' 'Natacha'
   
Ce matin j'ai fait la rencontre de MYBESTFRIEND en me baladant dans le parc.
MYBESTFRIEND y faisait du footing.</code></pre><p id="r-373505" data-claire-element-id="373505">Petit problème, car on obtient maintenant :</p><pre id="r-373506" data-claire-element-id="373506"><code data-claire-semantic="console">Ce matin j'ai fait la rencontre de &lt;span title=&quot;Oui, Natacha c'est ma meilleure amie !&quot;&gt;Natacha&lt;/span&gt; 
en me baladant dans le parc. 
&lt;span title=&quot;Oui, Natacha c'est ma meilleure amie !&quot;&gt;Natacha&lt;/span&gt; y faisait du footing.</code></pre><p id="r-373507" data-claire-element-id="373507">En effet, dans ce que l'on a généré, txt2tags a compris que l'on voulait vraiment obtenir l'affichage des caractères &lt; et &gt;, et il a donc remplacé &lt; par &amp;lt; et &gt; par &amp;gt;</p><p id="r-373508" data-claire-element-id="373508">On pourrait donc résoudre cela simplement en indiquant une nouvelle balise qui signifierait &quot;je veux que ce qui se trouve à l'intérieur de cette balise soit remplacé par un titre dans un span&quot;. Mais cela fait appel à des expressions régulières que je ne veux pas encore expliquer pour le moment.</p><p id="r-373509" data-claire-element-id="373509">On peut donc plus simplement remplacer après coup tous les symboles d'affichage html &amp;lt; et &amp;gt; par le véritable symbole &lt; et &gt;, en utilisant la directive postproc.</p><aside id="r-373511" data-claire-element-id="373511" data-claire-semantic="warning"><p id="r-373510" data-claire-element-id="373510">Malgré tout c'est un peu moins rigoureux comme méthode, c'est à dire qu'en 'bidouillant' cela, cela peut se retourner contre nous à un moment ou un autre, si par exemple on veut justement afficher un &lt; ou &gt; à un autre endroit du texte. Mais dans la majorité des cas, cette astuce va quand même fonctionner correctement.</p></aside><pre id="r-373512" data-claire-element-id="373512"><code>%!preproc(html): 'MYBESTFRIEND' &lt;span title=&quot;Oui, MYBESTFRIEND c'est ma meilleure amie !&quot;&gt;MYBESTFRIEND&lt;/span&gt;
   
%!preproc: 'MYBESTFRIEND' 'Natacha'
   
%!postproc(html): '&amp;lt;' '&lt;'
%!postproc(html): '&amp;gt;' '&gt;'
   
Ce matin j'ai fait la rencontre de MYBESTFRIEND en me baladant dans le parc.
MYBESTFRIEND y faisait du footing.</code></pre><p id="r-373513" data-claire-element-id="373513">Ainsi avec le nouveau postproc (qui ne touche ici que l'exportation html), lorsque tout a été remplacé dans la conversion html, txt2tags passe encore une fois pour faire les derniers remplacements.</p><p id="r-373514" data-claire-element-id="373514">Pour information, voici la méthode avec des expressions régulières (regex), que nous verrons en détail au chapitre suivant :</p><pre id="r-373515" data-claire-element-id="373515"><code>%!preproc: 'MYBESTFRIEND' 'Natacha'
%!postproc: '@@titre@@([^ ].*?)@@/titre@@' &lt;i&gt;&lt;span title=&quot;Oui, c'est ma meilleure amie !&quot;&gt;\1&lt;/span&gt;&lt;/i&gt;
   
Ce matin j'ai fait la rencontre de @@titre@@MYBESTFRIEND@@/titre@@ en me baladant dans le parc.
@@titre@@MYBESTFRIEND@@/titre@@ y faisait du footing.</code></pre><p id="r-373516" data-claire-element-id="373516">Ici on a donc créé les nouvelles balises :</p><pre id="r-373517" data-claire-element-id="373517"><code>@@titre@@ et @@/titre@@</code></pre><p id="r-373518" data-claire-element-id="373518">qui servent à définir notre nouvelle syntaxe. J'utilise souvent ces 2 arobases (@) lorsque je veux créer de nouvelles balises, car cela a l'avantage de ressortir du reste du texte tout en restant facile et rapide à écrire. On aurait pu l'indiquer entre &lt; &gt; mais on se retrouvait dans le cas de figure évoqué plus haut, avec le remplacement des &lt; &gt; par '&amp;lt;' et '&amp;gt;'</p><p id="r-373519" data-claire-element-id="373519">Mais cessons donc nos balades et courses dans le parc, et revenons à notre sujet.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags">Créer des documents avec txt2tags</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/presentation-de-txt2tags">
Présentation de txt2tags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/installer-txt2tags">
Installer txt2tags
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-de-base">
Utilisation de base
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-avancee-1">
Utilisation avancée
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/installer-txt2tags">
<span class="arrow"></span>
<span class="next">Installer txt2tags</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-avancee-1">
<span class="next">Utilisation avancée</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisationavance"></a><h2>Utilisation avancée</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-de-base">
<span class="arrow"></span>
<span class="next">Utilisation de base</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-373522" data-claire-element-id="373522">L'utilisation de base de txt2tags permet de rédiger un grand nombre de documents, mais on peut également vouloir le maîtriser pour créer des choses encore plus complexes, que cela soit pour utiliser dans un site internet ou un document LaTeX final. Nous verrons ainsi dans cette section des astuces supplémentaires pour étendre les possibilités de txt2tags.</p><h2 id="r-les-expressions-regulieres-1" data-claire-element-id="373535">Les expressions régulières</h2><p id="r-373523" data-claire-element-id="373523">Ce qu'il est bon de savoir, c'est que txt2tags peut et doit abuser des expressions régulières (regex), son auteur Aurélio ayant d'ailleurs écrit des outils et des livres sur le sujet.</p><p id="r-373524" data-claire-element-id="373524">Je vous renvoie à <a href="http://www.siteduzero.com/tutoriel-3-14608-les-expressions-regulieres-partie-1-2.html">ce tutoriel sur le sujet</a> pour en apprendre plus sur les expressions régulières.</p><p id="r-373525" data-claire-element-id="373525">Le premier type de regex que l'on peut utiliser, c'est ce que l'on a vu lors de notre footing plus haut dans ce tutoriel, pour simplifier :</p><pre id="r-373526" data-claire-element-id="373526"><code>%!postproc: 'ABC([^ ].*?)JKL' 'ZZZ\1YYY'</code></pre><p id="r-373527" data-claire-element-id="373527">Ce qui signifie que n'importe quel texte (chaîne de caractères, nombres...), symbolisé par le bloc ([^ ].*?), se trouvant entre les chaînes de caractères ABC et JKL (sans retour à la ligne), sera maintenu : on replacera cette partie de texte filtrée par ([^ ].*?), dans la seconde partie symbolisée par le \1, mais celui-ci sera inséré à la place entre les chaînes ZZZ et YYY.</p><p id="r-373528" data-claire-element-id="373528">Ainsi dans cet exemple <strong>ABC</strong><em>DEFG</em><strong>JKL</strong> sera remplacé par <strong>ZZZ</strong><em>DEFG</em><strong>YYY</strong>.</p><p id="r-373529" data-claire-element-id="373529">On pourra même avoir plusieurs remplacements successifs, par exemple :</p><pre id="r-373530" data-claire-element-id="373530"><code>%!postproc: 'ABC([^ ].*?)JKL([^ ].*?)PLOUM' 'ZZZ\1YYY\2BOOOM'</code></pre><p id="r-373531" data-claire-element-id="373531"><strong>ABC</strong><em>DEFG</em><strong>JKL</strong><em>MNO</em><strong>PLOUM</strong> deviendra <strong>ZZZ</strong><em>DEFG</em><strong>YYY</strong><em>MNO</em><strong>BOOOM</strong></p><p id="r-373532" data-claire-element-id="373532">On peut bien entendu inverser le placement des \1 et \2 selon l'ordre que l'on veut donner aux remplacements. Le site de txt2tags donne quelques exemples intéressants de remplacements à étudier, <a href="http://txt2tags.sourceforge.net/tips.html">ici</a> et <a href="http://txt2tags.sourceforge.net/userguide/PartVIIIBlackMagic.html">ici</a>.</p><p id="r-373533" data-claire-element-id="373533">Sur le même modèle, la regex (\d+) ne remplacera que des nombres, ^ sera pour signifier le début d'une ligne, et $ la fin d'une ligne.<br/> Il est parfois nécessaire de penser à rajouter des séquences d'échappement avec un antislash \ devant certains caractères que l'on veut afficher, comme [, ( etc.</p><p id="r-373534" data-claire-element-id="373534">Nous allons maintenant présenter quelques cas concrets de substitutions de textes, utilisables pour faciliter l'utilisation de technologies courantes (phpBB, zcode, xhtml).</p><h2 id="r-phpbb" data-claire-element-id="373539">phpBB</h2><p id="r-373536" data-claire-element-id="373536">En exemple simple de remplacement, on peut donner celui de phpBB : imaginons que l'on ait rédigé un certain nombre de messages ou d'articles sur un forum phpBB, et que l'on veuille récupérer ces messages pour les inclure dans un autre document, par exemple un article wikipedia ou une publication avec LaTeX en pdf. On pourrait bidouiller avec le rendu en html, mais plus simplement on peut éditer les messages phpBB et récupérer le code source avec sa syntaxe assez simple.</p><p id="r-373537" data-claire-element-id="373537">Ainsi si on écrit en phpBB dans notre source en txt2tags, le code spécifique à phpBB sera détecté en premier, et converti en syntaxe txt2tags avant de convertir ensuite dans le langage ciblé. Il suffit donc de rajouter simplement ces directives de remplacement dans sa source txt2tags ou dans un fichier de configuration inclus :</p><pre id="r-373538" data-claire-element-id="373538"><code>%!preproc: '\[b\]([^ ].*?)\[/b\]' '**\1**'    
%!preproc: '\[u\]([^ ].*?)\[/u\]' '__\1__' 
%!preproc: '\[i\]([^ ].*?)\[/i\]' '//\1//'  
  
%!preproc: '\[code\]$' '```\n'      
%!preproc:  '^\[/code\]' '```\n'    
            
%!preproc: '\[code\]([^ ].*?)\[/code\]' '``\1``'  
            
%!preproc: '\[quote\]$' '```\n'      
%!preproc:  '^\[/quote\]' '```\n'     
            
%!preproc: '\[url=([^ ].*?)\]([^ ].*?)\[/url\]' '[\2 \1]'      
%!preproc: '\[img\]([^ ].*?)\[/img\]' '[\1]'</code></pre><h2 id="r-xhtml-strict" data-claire-element-id="373544">xhtml strict</h2><p id="r-373540" data-claire-element-id="373540">Le xhtml généré par txt2tags n'est pas encore en xhtml strict. Si on souhaite cela, il suffit de rajouter ce code :</p><pre id="r-373541" data-claire-element-id="373541"><code>%!postproc: '&lt;i&gt;' '&lt;em&gt;'
%!postproc: '&lt;/i&gt;' '&lt;/em&gt;'
%!postproc: '&lt;b&gt;' '&lt;strong&gt;'
%!postproc: '&lt;/b&gt;' '&lt;/strong&gt;'</code></pre><p id="r-373542" data-claire-element-id="373542">sur le même modèle on peut même faire :</p><pre id="r-373543" data-claire-element-id="373543"><code>%!postproc: '&lt;u&gt;' '&lt;span class=&quot;underline&quot;&gt;'</code></pre><h2 id="r-zcode" data-claire-element-id="373549">zcode</h2><p id="r-373545" data-claire-element-id="373545">Même le site du zéro peut bénéficier de cet outil ! Par exemple pour rédiger ce document destiné au tutoriel, je le fais dans un fichier en texte simple, en utilisant la syntaxe txt2tags que j'affectionne. Je pourrai ainsi exporter mon tutoriel en zcode à la fin de la rédaction, ainsi qu'en xhtml pour mon site, et en pdf.</p><pre id="r-373546" data-claire-element-id="373546"><code>%!postproc(html):        '&lt;B&gt;' &lt;gras&gt;
%!postproc(html):        '&lt;/B&gt;' &lt;/gras&gt;
  
%!postproc(html):        '&lt;I&gt;' &lt;italique&gt;
%!postproc(html):        '&lt;/I&gt;' &lt;/italique&gt;
  
%!postproc(html):        '&lt;U&gt;' &lt;souligne&gt;
%!postproc(html):        '&lt;/U&gt;' &lt;/souligne&gt;
  
%!postproc(html):        '&lt;S&gt;' &lt;barre&gt;
%!postproc(html):        '&lt;/S&gt;' &lt;/barre&gt;
  
%!postproc(html):        '&lt;UL&gt;' &lt;liste&gt;
%!postproc(html):        '&lt;/UL&gt;' &lt;/liste&gt;
  
%!postproc(html):        '&lt;LI&gt;([^ ].*?)$' &lt;puce&gt;\1&lt;/puce&gt;
%!postproc(html):        '&lt;LI&gt;' &lt;puce&gt;
%!postproc(html):        '&lt;/LI&gt;' &lt;/puce&gt;
  
%!postproc(html):        '&lt;IMG ALIGN=&quot;middle&quot; SRC=&quot;([^ ].*?)&quot; BORDER=&quot;0&quot; ALT=&quot;&quot;&gt;' &lt;image legende=&quot;\1&quot;&gt;\1&lt;/image&gt;
  
%!postproc(html):        '&lt;P&gt;' ''
%!postproc(html):        '&lt;/P&gt;' ''
  
%!postproc(html):        '&lt;A NAME=&quot;([^ ].*?)&quot;&gt;&lt;/A&gt;' ''
%!postproc(html):        '&lt;A HREF=&quot;([^ ].*?)&quot;&gt;([^ ].*?)&lt;/A&gt;' '&lt;lien url=&quot;\1&quot;&gt;\2&lt;/lien&gt;'
  
%!postproc(html):        '&lt;PRE&gt;' '&lt;code&gt;'
%!postproc(html):        '&lt;/PRE&gt;' '&lt;/code&gt;'
  
%!postproc(html):        '&lt;H3&gt;([^ ].*?)&lt;/H3&gt;' '&lt;titre1&gt;\1&lt;/titre1&gt;'
%!postproc(html):        '&lt;H2&gt;([^ ].*?)&lt;/H2&gt;' '&lt;titre1&gt;\1&lt;/titre1&gt;'
%!postproc(html):        '&lt;H1&gt;([^ ].*?)&lt;/H1&gt;' '&lt;titre0&gt;\1&lt;/titre0&gt;'
  
%%% Colors for xhtml
%!postproc(xhtml): '@@COLOR@@([^ ].*?)@@'  '&lt;span style=&quot;color:\1&quot;&gt;'
%!postproc(xhtml): '@@/COLOR@@'  '&lt;/span&gt;'
  
  
%%% Colors for LaTeX
%!postproc(tex): '@@COLOR@@([^ ].*?)@@'  '\\color{\1}{'
%!postproc(tex): '@@/COLOR@@'  '}'
  
  
%!preproc(xhtml):        '&lt;information&gt;' '//@@COLOR@@#6D7D2E@@**(i)** '
%!preproc(xhtml):        '&lt;/information&gt;' @@/COLOR@@//
  
%!preproc(tex):        '&lt;information&gt;' '//@@COLOR@@OliveGreen@@**(i)** '
%!preproc(tex):        '&lt;/information&gt;' @@/COLOR@@//
  
%!preproc(xhtml):        '&lt;attention&gt;' '//@@COLOR@@#835639@@**&lt;!&gt;** '
%!preproc(xhtml):        '&lt;/attention&gt;' @@/COLOR@@//
  
%!preproc(tex):        '&lt;attention&gt;' '//@@COLOR@@BrickRed@@**&lt;!&gt;** '
%!preproc(tex):        '&lt;/attention&gt;' @@/COLOR@@//
  
%!preproc(xhtml):      '&lt;taille valeur=&quot;([^ ].*?)&quot;&gt;' '**'
%!preproc(xhtml):      '&lt;/taille&gt;' '**'</code></pre><aside id="r-373548" data-claire-element-id="373548" data-claire-semantic="information"><p id="r-373547" data-claire-element-id="373547">j'ai utilisé ici l'export html simple pour signifier l'export en zcode.</p></aside><h2 id="r-images-et-latex" data-claire-element-id="373558">Images et LaTeX</h2><p id="r-373550" data-claire-element-id="373550">Les fonctions avancées d'inclusion d'images avec LaTeX ne sont pas prises en compte dans txt2tags. Mais si on veut par exemple entourer une image avec du texte, il est possible d'ajouter dans le fichier cette macro :</p><pre id="r-373551" data-claire-element-id="373551"><code>%!postproc(tex): 'wrap=([^ ].*?)=wrap' '\\begin{wrapfigure}{l}{0\\textwidth} \\vspace{-00mm} \1 \\vspace{-00mm} \\end{wrapfigure}'</code></pre><p id="r-373552" data-claire-element-id="373552">ce qui aura pour effet de remplacer toutes les occurences du simplicime <em>wrap=[images.png]=wrap</em> par <em>\begin{wrapfigure}{l}{0 extwidth} \vspace{-00mm} \includegraphics[height=4cm]{image.png} \vspace{-00mm} \end{wrapfigure}</em></p><p id="r-373553" data-claire-element-id="373553">On va ensuite faire la même chose pour le (x)html :</p><pre id="r-373554" data-claire-element-id="373554"><code>%!postproc(xhtml): 'wrap=&lt;img ([^ ].*?)/&gt;=wrap' '&lt;img class=&quot;wrap&quot; \1/&gt;'</code></pre><p id="r-373555" data-claire-element-id="373555">en utilisant un appel à une classe de css qui sera par exemple :</p><pre id="r-373556" data-claire-element-id="373556"><code>.wrap {             
          float: left;       
          margin-top: 0;       
          margin-right: 20px;       
          margin-bottom: 10px;       
          margin-left: 0;       
          border: 1px solid #000;       
          padding: 2px;       
  }</code></pre><p id="r-373557" data-claire-element-id="373557">On vient ainsi d'inventer la convention d'écriture <em>wrap= =wrap</em>, mais on aurait pu créer n'importe quelle autre syntaxe similaire, par exemple <em>#= =#</em> si on préfère.</p><h2 id="r-txt2cyoa" data-claire-element-id="373582">Txt2cyoa</h2><p id="r-373559" data-claire-element-id="373559">Il s'agit d'un système de création de &quot;livres dont vous êtes le héros&quot; en ligne, via un navigateur, avec des liens à faire pointer vers des paragraphes, selon les choix du joueur.</p><p id="r-373560" data-claire-element-id="373560">On voulait que cela ait une syntaxe simple à utiliser pour l'auteur. Simple comme du txt2tags par exemple !</p><p id="r-373561" data-claire-element-id="373561">On s'était donc donné comme contrainte que les choix soient du type :</p><pre id="r-373562" data-claire-element-id="373562"><code>- Que l'aventure commence : 2
- Non, finalement, je préfère rester chez moi : 14</code></pre><p id="r-373563" data-claire-element-id="373563">tandis que les paragraphes vers lesquels ces choix pointeront seront simplement créés avec la syntaxe habituelle de txt2tags :</p><pre id="r-373564" data-claire-element-id="373564"><code>== 2 ==
   
Description du paragraphe 2
   
  /.../
   
== 14 ==
   
Description du paragraphe 14</code></pre><p id="r-373565" data-claire-element-id="373565">Sur les principes expliqués plus haut, on a donc créé un fichier txt2tags à inclure dans l'histoire, utilisant notamment ces directives de préprocesseur :</p><ul id="r-373568" data-claire-element-id="373568"><li id="r-373567" data-claire-element-id="373567"><p id="r-373566" data-claire-element-id="373566">Faire en sorte que le dernier nombre d'une ligne soit transformé en lien nommé (named link), vers le même nom que lui-même :</p></li></ul><pre id="r-373569" data-claire-element-id="373569"><code>%!preproc: '(\d+)$'  '**[\1 #\1]**'</code></pre><li id="r-373571" data-claire-element-id="373571"><p id="r-373570" data-claire-element-id="373570">Faire en sorte qu'un titre puisse avoir une ancre avec son propre nom :</p></li><pre id="r-373572" data-claire-element-id="373572"><code>%!preproc: '^== (\d+) =='  '==\1==[\1]'</code></pre><ul id="r-373575" data-claire-element-id="373575"><li id="r-373574" data-claire-element-id="373574"><p id="r-373573" data-claire-element-id="373573">On a également prévu l'inclusion de blocs de textes au format GBL, qui est un système similaire, mais qui utilise plutôt ce genre de syntaxe :</p></li></ul><pre id="r-373576" data-claire-element-id="373576"><code>&gt;Que l'aventure commence !=2</code></pre><p id="r-373577" data-claire-element-id="373577">Notre code de remplacement est donc :</p><pre id="r-373578" data-claire-element-id="373578"><code>%!preproc: '^&gt;([^ ].*?)=(\d+)' '- \1 rendez-vous au \2'</code></pre><p id="r-373579" data-claire-element-id="373579">et ensuite notre texte sera traité comme si on avait tapé dans la source, au lieu du code GBL, notre propre syntaxe : <em>- Que l'aventure commence ! rendez-vous au 2</em></p><p id="r-373580" data-claire-element-id="373580">On peut également créer avec graphviz un organigramme de la structure de l'aventure, toujours avec txt2tags !</p><p id="r-373581" data-claire-element-id="373581">Vous pouvez obtenir les sources de cet outil, et éventuellement l'étudier, sur le site de <a href="http://anamnese.online.fr/site2/txt2cyoa/samples/sample.html">txt2cyoa</a>.</p><h2 id="r-le-textallion" data-claire-element-id="373591">Le Textallion</h2><p id="r-373583" data-claire-element-id="373583">Le Textallion est une archive d'outils et de scripts pour permettre de faciliter la création de documents divers (fichier pdf, code html, livre électronique epub...) à partir d'une même source, en txt2tags bien entendu. Cela étend donc la syntaxe basique de txt2tags, en utilisant le pré ou post-processeur de txt2tags, par exemple pour créer des lettrines en LaTeX et html, juste en rajoutant le symbole -**- en début d'un paragraphe :</p><pre id="r-373584" data-claire-element-id="373584"><code>%!postproc(tex): &quot;-\*\*-(.)(.*?) &quot; &quot;\n\n\\lettrine[lines=2, lhang=0.33, loversize=0.25]{\1}{\2} &quot;
%!postproc(xhtml): '-\*\*-(.)' '&lt;span style=&quot;font-size: 200%; vertical-align: baseline&quot;&gt;\1&lt;/span&gt;'</code></pre><p id="r-373585" data-claire-element-id="373585">Par la suite, je me suis rendu compte que -**- n'était pas la syntaxe idéale pour cela, ne serait-ce que parce les 2 étoiles affichent ce qui suit comme si c'était en gras, avec certains éditeurs de textes. J'ai donc préféré définir tous ces symboles additionnels entre accolades, et j'ai choisi pour la lettrine le symbole {*~~~}. Mais au lieu de modifier les 2 lignes postproc plus haut, on peut simplement rajouter avant celles-ci la directive :</p><pre id="r-373586" data-claire-element-id="373586"><code>%!preproc: '\{\*~~~\}' '-**-'</code></pre><p id="r-373587" data-claire-element-id="373587">Comme cela la nouvelle syntaxe sera prise en compte, mais elle sera reconvertie en interne selon l'ancienne convention avant d'être transformée en lettrine pour les modes tex ou xhtml. De plus les textes plus anciens utilisant l'ancienne syntaxe -**- seront toujours valables sans avoir à les retoucher.</p><p id="r-373588" data-claire-element-id="373588"><a href="http://anamnese.online.fr/site2/textallion/samples/sample_fr.html">Le Textallion est disponible ici</a>.</p><p id="r-373589" data-claire-element-id="373590"><a href="medias/uploads.siteduzero.com_files_245001_246000_245085.png"><img id="r-373590" data-claire-element-id="373589" src="medias/uploads.siteduzero.com_thb_245001_246000_245085.png" alt="Image utilisateur"/></a>Une session de travail avec à gauche de code source édité dans geany, à droite le rendu exporté en pdf.</p><h2 id="r-autres-astuces" data-claire-element-id="373607">Autres astuces</h2><ul id="r-373594" data-claire-element-id="373594"><li id="r-373593" data-claire-element-id="373593"><p id="r-373592" data-claire-element-id="373592">Inclure un include en php avec la syntaxe @@include&quot;mon_fichier.php&quot; :</p></li></ul><pre id="r-373595" data-claire-element-id="373595"><code>%!postproc:  '@@include&quot;([^ ].*?)&quot;'  '&lt;?\n   include(&quot;\1&quot;)\n ?&gt;'</code></pre><ul id="r-373598" data-claire-element-id="373598"><li id="r-373597" data-claire-element-id="373597"><p id="r-373596" data-claire-element-id="373596">Faire une note de bas de page en LaTeX, en entourant la note avec des °° °°. Le même document exporté en html donnera le contenu de la note entre de simples parenthèses.</p></li></ul><pre id="r-373599" data-claire-element-id="373599"><code>%!postproc(tex): '°°(.*?)°°' '\\footnote{\1}'
%!postproc(xhtml): '°°(.*?)°°' ' (\1)'</code></pre><ul id="r-373603" data-claire-element-id="373603"><li id="r-373601" data-claire-element-id="373601"><p id="r-373600" data-claire-element-id="373600">Indiquer des notes de révisions et les faire disparaître ensuite.</p></li><p id="r-373602" data-claire-element-id="373602">J'avais besoin de signifier dans un texte des notes pour des parties amenées à être remaniées ou disparaître. J'ai décidé de les mettre entre double parenthèses, et que cela serait transformé dans la version LaTeX en notes de bas de page, barrées. Voici la directive de remplacement à faire pour cela :</p></ul><pre id="r-373604" data-claire-element-id="373604"><code>%!preproc(tex): '\(\((.*?)\)\)' '*°°--\1--°°'</code></pre><p id="r-373605" data-claire-element-id="373605">Par la suite, il suffit d'indiquer dans l'entête du fichier cette nouvelle directive et de commenter la précédente pour faire disparaître totalement ces notes du document pdf final :</p><pre id="r-373606" data-claire-element-id="373606"><code>%!preproc(tex): '\(\((.*?)\)\)' ''</code></pre><h2 id="r-outils-compatibles" data-claire-element-id="373613">Outils compatibles</h2><p id="r-373608" data-claire-element-id="373608">Il existe de nombreux outils pour aider le rédacteur utilisant txt2tags, on pourra citer des colorations syntaxiques pour vim, emacs, kate, gedit, scintilla (scite, geany)..., un module Apache pour la conversion à la volée en HTML, une interface KDE, des scripts shell ou Ruby, un module d'aide à la rédaction pour Openoffice.org, un script vim permettant de convertir du HTML en txt2tags etc.</p><figure id="r-373610" data-claire-element-id="373611"><img id="r-373609" data-claire-element-id="373609" src="medias/uploads.siteduzero.com_files_240001_241000_240405.png" alt="geany"/></figure><p id="r-373612" data-claire-element-id="373612">Et si on peut exporter depuis txt2tags vers d'autres langages de balisage léger, on peut également faire l'inverse, et importer directement la syntaxe txt2tags dans des wiki existants, comme par exemple pmwiki :<br/><a href="http://www.pmwiki.org/wiki/Cookbook/Txt2tags">http://www.pmwiki.org/wiki/Cookbook/Txt2tags</a></p><h2 id="r-liens-additionnels" data-claire-element-id="373625">Liens additionnels</h2><ul id="r-373622" data-claire-element-id="373622"><li id="r-373615" data-claire-element-id="373615"><p id="r-373614" data-claire-element-id="373614"><a href="http://txt2tags.sourceforge.net/">Site internet officiel de txt2tags</a></p></li><li id="r-373617" data-claire-element-id="373617"><p id="r-373616" data-claire-element-id="373616"><a href="http://txt2tags.sourceforge.net/fr/userguide-fr.pdf">Un autre tutoriel sur txt2tags (issu du site officiel)</a></p></li><li id="r-373619" data-claire-element-id="373619"><p id="r-373618" data-claire-element-id="373618"><a href="http://txt2tags.sourceforge.net/fr/writing-book-fr.html">Manuel &quot;Écrire des livres avec txt2tags&quot;<br/> par l'auteur de txt2tags</a> (Intéressant mais le contenu est un peu vieillissant, et il n'évoque pas la possibilité d'édition avancée avec des notes de bas de page par exemple)</p></li><li id="r-373621" data-claire-element-id="373621"><p id="r-373620" data-claire-element-id="373620"><a href="http://mostlylinux.wordpress.com/textanddocument/txt2tagscheatsheet/">Astuces supplémentaires pour txt2tags</a></p></li></ul><p id="r-373623" data-claire-element-id="373623">En conclusion, nous espérons que ce tutoriel vous aura intéressé, sinon convaincu, de la valeur de txt2tags comme outil polyvalent pour le webdesigner, pour l'écrivain, pour le rédacteur. <br/> Ce n'est donc pas uniquement &quot;encore un autre système de wiki&quot;, ou &quot;bien trop limité par rapport à LaTeX&quot; comme on l'entend parfois dire, mais un système qui se suffit à lui-même pour de nombreuses activités.</p><p id="r-373624" data-claire-element-id="373624">Ainsi avec finalement peu d'investissement et de sacrifices, vous pourrez passer à txt2tags pour vous faciliter la vie et produire avec aisance des documents variés et complets.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags">Créer des documents avec txt2tags</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/presentation-de-txt2tags">
Présentation de txt2tags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/installer-txt2tags">
Installer txt2tags
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-de-base">
Utilisation de base
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-avancee-1">
Utilisation avancée
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-des-documents-avec-txt2tags/utilisation-de-base">
<span class="arrow"></span>
<span class="next">Utilisation de base</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-des-documents-avec-txt2tags.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 07:13:09 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-des-documents-avec-txt2tags.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:18:01 GMT -->
</html>