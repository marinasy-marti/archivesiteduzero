<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/aller-plus-loin-dans-le-developpement-android.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 01:25:49 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/aller-plus-loin-dans-le-developpement-android.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:25:35 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Aller plus loin dans le développement Android</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Aller plus loin dans le développement Android</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#AllerplusloindansledveloppementAndroid">Aller plus loin dans le développement Android</a><br/><a href="#Fragment">Fragment</a><br/><a href="#Introductionauxfragments">Introduction aux fragments</a><br/><a href="#Utiliserdesfragmentsfixes">Utiliser des fragments fixes</a><br/><a href="#Utiliserdesfragmentsdynamiques">Utiliser des fragments dynamiques</a><br/><a href="#ListFragment">ListFragment</a><br/><a href="#Utilisationsimpledeslistes">Utilisation simple des listes</a><br/><a href="#Intgrerunevuepersonnalise">Intégrer une vue personnalisée</a><br/><a href="#Versdeslistesdynamiques">Vers des listes dynamiques</a><br/><a href="#PreferenceFragment">PreferenceFragment</a><br/><a href="#Paramtrisersonapplication">Paramétriser son application</a><br/><a href="#Affinersesparamtresaveclesen-ttes">Affiner ses paramètres avec les en-têtes</a><br/><a href="#Lirelesprfrences">Lire les préférences</a><br/><a href="#DialogFragment">DialogFragment</a><br/><a href="#CrerunDIalogFragment">Créer un DIalogFragment</a><br/><a href="#CrerunAlertDialog">Créer un AlertDialog</a><br/><a href="#Afficheruneboitededialogue">Afficher une boite de dialogue</a><br/><a href="#Labarred039actiondesapplications">La barre d&#039;action des applications</a><br/><a href="#Intgrerunmenu">Intégrer un menu</a><br/><a href="#Possibilitsavances">Possibilités avancées</a><br/><a href="#Menucontextuel">Menu contextuel</a><br/><a href="#Slidertraversdescrans">Slider à travers des écrans</a><br/><a href="#Passerdesinformationslacrationd039unfragment">Passer des informations à la création d&#039;un fragment</a><br/><a href="#UtilisationduwidgetViewPager">Utilisation du widget ViewPager</a><br/><a href="#Ajoutd039unindicateurdelapage">Ajout d&#039;un indicateur de la page</a><br/><a href="#Notifierl039utilisateur">Notifier l&#039;utilisateur</a><br/><a href="#Basique">Basique</a><br/><a href="#Lesdiffrentsstyles">Les différents styles</a><br/><a href="#Ajouterdesboutonsd039action">Ajouter des boutons d&#039;action</a><br/><a href="#LepartageparNFC">Le partage par NFC</a><br/><a href="#Lesdiffrentstagsexistants">Les différents tags existants</a><br/><a href="#Lectured039untag">Lecture d&#039;un tag</a><br/><a href="#EchangeparBeam">Echange par Beam</a><br/></div>
<a name="AllerplusloindansledveloppementAndroid"></a><h2>Aller plus loin dans le développement Android</h2><div class="content" role="article">
<p id="r-739815" data-claire-element-id="739815"><strong>Bonjour amis Zéros,</strong></p><p id="r-739816" data-claire-element-id="739816">Si créer des applications Android est devenue une passion pour vous grâce à l'excellent <a href="http://www.siteduzero.com/tutoriel-3-554364-creez-des-applications-pour-android.html">tutoriel de Apollidore</a> qui aborde les bases du développement Android, vous êtes au bon endroit. La valeur ajoutée de ce tutoriel est de vous permettre d'apprendre des notions sont parfois difficiles à acquérir tant les ouvrages sont peu nombreux sur les nouvelles technologies intégrées au système.</p><p id="r-739817" data-claire-element-id="739817">L'objectif de ce tutoriel est d'aborder des notions avancées sur le développement Android en restant accessible pour les débutants. Tout ce qui figurera sera consciencieusement expliqué afin de vous permettre d'en comprendre les concepts et de pouvoir les mettre en pratique directement, à travers des travaux pratiques sérieux.</p><p id="r-739818" data-claire-element-id="739818">Pour parvenir à atteindre cet objectif, nous aborderons :</p><ul id="r-739831" data-claire-element-id="739831"><li id="r-739820" data-claire-element-id="739820"><p id="r-739819" data-claire-element-id="739819">L'utilisation de fragments pour confectionner des interfaces souples et avancées.</p></li><li id="r-739822" data-claire-element-id="739822"><p id="r-739821" data-claire-element-id="739821">Les derniers composants ajoutées dans les dernières versions d'Android.</p></li><li id="r-739824" data-claire-element-id="739824"><p id="r-739823" data-claire-element-id="739823">La mise en place d'un serveur pour nous permettre d'alimenter nos applications par après.</p></li><li id="r-739826" data-claire-element-id="739826"><p id="r-739825" data-claire-element-id="739825">La gestion de données partagées avec, entre autre, la récupération des données sur une base de données distantes.</p></li><li id="r-739828" data-claire-element-id="739828"><p id="r-739827" data-claire-element-id="739827">L'intégration d'une Google Map de la génération de la clé API aux marqueurs à placer sur la map.</p></li><li id="r-739830" data-claire-element-id="739830"><p id="r-739829" data-claire-element-id="739829">L'utilisation de librairies communautaires pour vous aider dans le développement Android.</p></li></ul><p id="r-739832" data-claire-element-id="739832">Si ce menu vous parait intéressant à suivre, attendez de lire le tutoriel et d'en apprendre plus.</p><aside id="r-739834" data-claire-element-id="739834" data-claire-semantic="information"><p id="r-739833" data-claire-element-id="739833">Vous pouvez retrouver tous les codes sources de ce tutoriel sur ce <a href="https://github.com/AndroWiiid/SdZAndroid">projet GitHub</a>.</p></aside>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Fragment"></a><h2>Fragment</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
<span class="next">Introduction aux fragments</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
</div><a name="Introductionauxfragments"></a><h2>Introduction aux fragments</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">
<span class="arrow"></span>
<span class="next">Fragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
<span class="next">Utiliser des fragments fixes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-introduction-aux-fragments" data-claire-element-id="739854">Introduction aux fragments</h4><h5 id="r-les-fragments-kezako" data-claire-element-id="739841">Les fragments, kézako ?</h5><p id="r-739837" data-claire-element-id="739837">La notion de fragment est souvent confuse pour les débutants et pas toujours bien comprise par ceux qui commencent à programmer assez régulièrement sur la plateforme Android. Les fragments sont à mi-chemin entre l'activité et la vue ; c'est-à-dire qu'il ne s'agit ni de l'un, ni de l'autre mais qu'ils sont étroitement liés. Votre fragment consiste à définir un morceau d'interface que vous pourrez attacher à plusieurs endroits, sur des activités.</p><p id="r-739838" data-claire-element-id="739838">Par exemple, dans le cas où vous désirez rendre compatible votre application sur smartphone et sur tablette, vous n'aurez pas spécialement envie avoir la même interface. La taille d'écran des tablettes étant largement plus grande que celles des smartphones, il serait dommage de ne pas en profiter. L'idée consiste de définir des fragments que vous afficherez un à un sur un smartphone et à plusieurs sur tablette.</p><p id="r-739839" data-claire-element-id="739839">Si vous avez une liste de news (par hasard ? :-° ). Sur votre smartphone, vous afficherez cette liste et une fois que l'utilisateur aura effectué une pression sur l'un des items de la liste, vous lancerez un autre écran avec les détails de la news sélectionnée. Quant à la version tablette, vous afficherez la liste des news à gauche et directement à droite les détails de la news sélectionnée, sans changer d'écran.</p><p id="r-739840" data-claire-element-id="739840">Ce genre de chose est possible grâce aux fragments !</p><h5 id="r-le-cycle-de-vie-des-fragments" data-claire-element-id="739847">Le cycle de vie des fragments</h5><p id="r-739842" data-claire-element-id="739842">Vous connaissez certainement les activités (j'espère en tout cas sinon il y a du souci à se faire ^^ ) et leurs cycles de vie. Celui des fragments est très similaire et en même temps étroitement lié avec l'activité à laquelle est attaché. Vous retrouvez toutes les méthodes callback d'une activité, à savoir onCreate, onStart, onResume, onPause, onStop et onDestroy. Ces méthodes ont exactement le même but dans les fragments que dans les activités.</p><p id="r-739843" data-claire-element-id="739843">Cependant, il en rajoute quand même qui sont appelés par l'activité hôte du fragment. Nous verrons l'utilité de ces nouvelles méthodes dans la suite de ce chapitre. Vous pouvez voir l'ensemble des méthodes via le schéma ci-dessous disponible sur le <a href="http://developer.android.com/guide/components/fragments.html">portail des développeurs Android</a>.</p><figure id="r-cycle-de-vie-des-fragments-disponible-a-partir-du-site-des-developpeurs-android" data-claire-element-id="739846"><img id="r-739844" data-claire-element-id="739844" src="medias/uploads.siteduzero.com_files_404001_405000_404830.png" alt="Cycle de vie des fragments disponible à partir du site des développeurs Android"/><figcaption>Cycle de vie des fragments disponible à partir du site des développeurs Android</figcaption></figure><h5 id="r-la-bibliotheque-de-compatibilite" data-claire-element-id="739853">La bibliothèque de compatibilité</h5><p id="r-739848" data-claire-element-id="739848">C'est bien beau n'est-ce pas ? Un monde où vous pouvez librement placer des fragments aux endroits que vous désirez pour optimiser vos applications sur le plus d'appareil possible. Malheureusement, ce n'est pas si simple. Au début, Android était dédié uniquement aux smartphones ; c'est-à-dire à des écrans de moins de 4 pouces (les smartphones de plus de 4 pouces ne sont arrivés que très récemment à l'heure où j'écris ces lignes). Par après, Google a étendu son système aux tablettes avec la version 3 (les versions 2 et moins étaient donc destinés aux smartphones) et la version 4 qui unifie les 2 types.</p><aside id="r-739850" data-claire-element-id="739850" data-claire-semantic="information"><p id="r-739849" data-claire-element-id="739849">Aujourd'hui, on commence de plus en plus à voir des TV avec Android comme système. Il est tout à fait possible de développer pour ce genre d'appareil mais les bonnes pratiques d'ergonomie sont encore un peu vague. C'est pourquoi nous ne verrons pas d'exemple concret pour les TV mais les techniques que vous apprendrez dans ce tutoriel vous permettront d'en développer.</p></aside><p id="r-739851" data-claire-element-id="739851">C'est avec cette version 3, HoneyComb, qu'est apparu les fragments. Techniquement, ce composant (et les autres que nous verrons dans la suite de cette première partie) n'est pas disponible en dessous de cette version. Comment pouvons-nous donc développer notre application sans devoir créer deux projets (un pour les versions 2 et antérieur et un autre pour la version 3 et supérieur) ?</p><p id="r-739852" data-claire-element-id="739852">Je vous ai déjà dit que Google était une boite formidable ? Maintenant, je vous le dis. Google est une boite <strong>formidable</strong> ! Ils ont développé une librairie de compatibilité qui vous permettra d'utiliser une très grande partie des fonctionnalités disponibles à partir de la version 3 d'Android dès la version 2.1. Soit regrouper environ 95% du marché des appareils tournant avec Android. Nous apprendrons à l'utiliser et à aller plus loin grâce à un projet communautaire de compatibilité que nous verrons plus loin dans ce tutoriel.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">
<span class="arrow"></span>
<span class="next">Fragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
<span class="next">Utiliser des fragments fixes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utiliserdesfragmentsfixes"></a><h2>Utiliser des fragments fixes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
<span class="arrow"></span>
<span class="next">Introduction aux fragments</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
<span class="next">Utiliser des fragments dynamiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utiliser-des-fragments-fixes" data-claire-element-id="739883">Utiliser des fragments fixes</h4><p id="r-739855" data-claire-element-id="739855">Vous savez maintenant ce que sont des fragments. Vous n'avez peut-être pas saisi complètement son utilité mais vous comprendrez vite. Il existe deux manières d'intégrer des fragments dans une activité : de manière fixe en spécifiant vos fragments directement dans un fichier XML d'affichage ou dynamiquement avec l'aide d'outils mis à disposition aux développeurs par Android. Nous aborderons d'abord le plus simple, les fragments fixes, et dans la suite de ce chapitre, la manière dynamique.</p><h5 id="r-creation-d-un-fragment" data-claire-element-id="739874">Création d'un fragment</h5><p id="r-739856" data-claire-element-id="739856">Avant de pouvoir utiliser des fragments, il va falloir savoir comment nous pouvons en créer. Pour ce faire, c'est très simple. Avec un peu de réflexion, vous pourriez parvenir à le faire vous même parce que c'est quasiment identique aux activités. Il vous suffit de définir une portion d'interface dans un fichier XML d'affichage et de l'attacher à un <code data-claire-semantic="java">Fragment</code>, à quelques différences près. A savoir que nous ne désérialisons pas notre fichier XML dans la méthode <code data-claire-semantic="java">public void onCreate (Bundle savedInstanceState)</code> mais à partir de la méthode <code data-claire-semantic="java">public View onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</code> dont le premier paramètre vous permettra de le faire.</p><p id="r-739857" data-claire-element-id="739857">De plus, et chose importante, Eclipse vous proposera d'importer deux paquetages pour avoir accès à <code data-claire-semantic="java">Fragment</code> (<code data-claire-semantic="java">android.app.Fragment</code> et <code data-claire-semantic="java">android.support.v4.app.Fragment</code>). Quel est la différence entre ces 2 fragments ? Le premier redirige vers le <code data-claire-semantic="java">Fragment</code> de la version d'Android que vous avez délimité dans le manifest de votre projet ; c'est-à-dire que vous n'aurez pas accès à cet import si vous n'êtes pas à une version 3 et plus puisque Android 2 ne connait normalement pas les fragments. Le deuxième redirige vers le <code data-claire-semantic="java">Fragment</code> du projet de compatibilité Google (bibliothèque inclut automatiquement lors de la création d'un nouveau projet dans les récents ADT). Sauf si vous ne désirez pas rendre vos futurs programmes compatibles avec les anciens terminaux, nous utiliserons à chaque fois les imports de la bibliothèque de compatibilité.</p><aside id="r-739859" data-claire-element-id="739859" data-claire-semantic="warning"><p id="r-739858" data-claire-element-id="739858">Il faudra constamment faire attention aux imports dans vos projets. C'est une erreur commune chez les développeurs débutants mais aussi expérimentés. Google a tenté de rendre l'utilisation de la bibliothèque le plus proche de son utilisation normal. Mise à part quelques méthodes, elles auront globalement les mêmes signatures.</p></aside><p id="r-739860" data-claire-element-id="739860">Pour notre exemple, nous allons faire quelque chose de simple. Nous allons simplement placer un <code data-claire-semantic="java">TextView</code> au centre du fichier XML d'affichage que nous attacherons à un <code data-claire-semantic="java">Fragment</code> qui sera lui même attaché à une <code data-claire-semantic="java">Activity</code>. Nous allons nommer notre fichier XML d'affichage <strong>fragment_fixe</strong> et nous placerons dedans :</p><pre id="r-739861" data-claire-element-id="739861"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; &gt;

    &lt;TextView
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_centerVertical=&quot;true&quot;
        android:text=&quot;@string/title_fragment_fixe&quot; /&gt;

&lt;/RelativeLayout&gt;</code></pre><p id="r-739862" data-claire-element-id="739862">Nous désérialisons ce fichier XML d'affichage dans un fragment que nous nommerons <strong>FixeFragment</strong> :</p><pre id="r-739863" data-claire-element-id="739863"><code data-claire-semantic="java">package com.siteduzero.android.fragments.fixe;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

import com.siteduzero.android.R;

public class FixeFragment extends Fragment {
	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container,
			Bundle savedInstanceState) {
		return inflater.inflate(R.layout.fragment_fixe, container, false);
	}
}</code></pre><aside id="r-739865" data-claire-element-id="739865" data-claire-semantic="information"><p id="r-739864" data-claire-element-id="739864">Vous remarquerez que je spécifie exprès la définition du paquetage et les imports. C'est une chose importante dans les fragments, cela sera une habitude prise dans ce tutoriel pour que vous ne soyez jamais perdu.</p></aside><p id="r-739866" data-claire-element-id="739866">Vous pouvez vous rendre compte de la simplicité déconcertante de la création d'un fragment. Son utilisation est tout aussi simple lorsque vous l'attachez fixement à une activité. Dans chaque activité, nous allons créer un autre fichier XML d'affichage, que nous nommerons <strong>activity_fragment_fixe</strong>, et dans lequel nous allons déclarer un widget <code data-claire-semantic="xml">Fragment</code> qui spécifie dans son attribut <code data-claire-semantic="xml">android:name</code> notre <strong>FixeFragment</strong>.</p><pre id="r-739867" data-claire-element-id="739867"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;fragment xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:name=&quot;com.siteduzero.android.fragments.fixe.FixeFragment&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; /&gt;</code></pre><p id="r-739868" data-claire-element-id="739868">Dans le code de l'activité, <strong>FixeActivity</strong>, il nous suffit simplement de désérialiser le fichier XML d'affichage que nous venons de créer pour attacher notre <code data-claire-semantic="java">Fragment</code> et d'étendre la classe <code data-claire-semantic="java">FragmentActivity</code> à la place de <code data-claire-semantic="java">Activity</code> pour notifier Android que nous utilisons des <code data-claire-semantic="java">Fragment</code>.</p><pre id="r-739869" data-claire-element-id="739869"><code data-claire-semantic="java">package com.siteduzero.android.fragments.fixe;

import com.siteduzero.android.R;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class FixeActivity extends FragmentActivity {
	@Override
	protected void onCreate(Bundle arg0) {
		super.onCreate(arg0);
		setContentView(R.layout.activity_fragment_fixe);
	}
}</code></pre><p id="r-739870" data-claire-element-id="739870">Qu'est ce que nous pouvons en dire ? Vous pouvez vous rendre compte que l'activité est vide, peu importe ce que vous placez dans un fragment. C'est l'une des forces de l'utilisation des fragments. Habituellement, les activités jouent le rôle des contrôleurs dans une architecture MVC (patron architectural sur lequel Android se base dans le développement d'application). Dans notre cas, les fragments joueront le rôle de contrôleurs pour les vues qu'ils instancient. Cela permet de maintenir plus aisément le code et de séparer les responsabilités entre différentes classes.</p><figure id="r-resultat-de-l-execution-de-l-activite-fixeactivity" data-claire-element-id="739873"><img id="r-739871" data-claire-element-id="739871" src="medias/uploads.siteduzero.com_files_406001_407000_406911.png" alt="Résultat de l'exécution de l'activité FixeActivity"/><figcaption>Résultat de l'exécution de l'activité FixeActivity</figcaption></figure><h5 id="r-rearranger-les-fragments-en-paysage" data-claire-element-id="739882">Réarranger les fragments en paysage</h5><p id="r-739875" data-claire-element-id="739875">Cependant, ce n'est pas parce que nous définissons des diagrammes fixes que nous ne pouvons pas faire des choses intéressantes. C'est pourquoi je vais vous expliquer comment réarranger vos fragments lorsque vous basculez votre appareil en mode paysage. L'idée est la suivante. Nous voulons afficher <strong>FixeFragment</strong> lorsque nous sommes en mode portrait et deux fois l'un à côté de l'autre en mode paysage. Vous êtes censé avoir une petite idée de la marche à suivre si vous avez déjà développé sur Android ou si vous avez suivi le <a href="http://www.siteduzero.com/tutoriel-3-554364-creez-des-applications-pour-android.html">tutoriel officiel d'Android pour débutant du Site du Zéro</a>. C'est pourquoi je vais vous laisser réfléchir sur le problème pour parvenir à ce résultat :</p><figure id="r-resultat-de-l-execution-de-l-activite-fixeactivity-en-paysage" data-claire-element-id="739878"><img id="r-739876" data-claire-element-id="739876" src="medias/uploads.siteduzero.com_files_406001_407000_406917.png" alt="Résultat de l'exécution de l'activité FixeActivity en paysage"/><figcaption>Résultat de l'exécution de l'activité FixeActivity en paysage</figcaption></figure><h6 id="r-correction-85" data-claire-element-id="739881">Correction</h6><p id="r-739879" data-claire-element-id="739879">Vous avez réussi à trouver quelque chose ? Si vous êtes parvenu à un résultat similaire au mien, c'est déjà pas mal. Si vous avez la même solution que moi, c'est encore mieux. Pourquoi ? Simplement parce que la solution la plus simple pour parvenir à mon résultat est de créer un nouveau fichier XML d'affichage du même nom que celui de l'activité qui se trouve dans le dossier layout mais dans le layout-land et en définissant les deux <code data-claire-semantic="java">Fragment</code> dans ce fichier. Le système se rendra automatiquement dans ce dossier pour récupérer le bon fichier XML et tout sera fait automatiquement !</p><pre id="r-739880" data-claire-element-id="739880"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:orientation=&quot;horizontal&quot; &gt;

    &lt;fragment
        android:name=&quot;com.siteduzero.android.fragments.fixe.FixeFragment&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_weight=&quot;1&quot; /&gt;

    &lt;fragment
        android:name=&quot;com.siteduzero.android.fragments.fixe.FixeFragment&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_weight=&quot;1&quot; /&gt;

&lt;/LinearLayout&gt;</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
<span class="arrow"></span>
<span class="next">Introduction aux fragments</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
<span class="next">Utiliser des fragments dynamiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utiliserdesfragmentsdynamiques"></a><h2>Utiliser des fragments dynamiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
<span class="arrow"></span>
<span class="next">Utiliser des fragments fixes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">
<span class="next">ListFragment</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utiliser-des-fragments-dynamiques" data-claire-element-id="739916">Utiliser des fragments dynamiques</h4><p id="r-739884" data-claire-element-id="739884">On va faire quelque chose d'encore plus intéressant. Habituellement, lorsque vous développez vos applications, vous définissez des écrans fixes. J'entends par là que rien ne change pendant son exécution. Cliquez sur un bouton ouvre une nouvelle activité qui affiche les widgets déclarés dans son fichier XML d'affichage. Il est bien possible de masquer des portions d'interface mais ce n'est jamais très performant (voire joli). Les fragments apportent une solution simple et performant pour modifier dynamiquement l'interface de nos écrans.</p><h5 id="r-gerer-ses-fragments" data-claire-element-id="739889">Gérer ses fragments</h5><p id="r-739885" data-claire-element-id="739885">Android met à disposition des développeurs une interface indispensable pour gérer ses fragments dynamiquement, <code data-claire-semantic="java">FragmentManager</code>. Cette interface offre plusieurs services dont un qui nous intéresse tout particulièrement : gérer des transactions. Comment ça fonctionne ? Chaque opération sur les fragments doivent être regroupée dans une transaction accessible à partir du <code data-claire-semantic="java">FragmentManager</code>.</p><p id="r-739886" data-claire-element-id="739886">Utiliser ces services est très simple mais il ne faut pas oublier que nous utilisons la bibliothèque de compatibilité de Google. L'initialisation du manager est donc un peu différente. Vous aurez sans doute remarqué le mot clé &quot;support&quot; dans l'importation de la classe <code data-claire-semantic="java">Fragment</code>. Ce mot clé n'est pas un hasard et se retrouvera un peu partout dans l'utilisation des classes venant de la bibliothèque. Ainsi, pour initialiser, vous utiliserez non pas la méthode <code data-claire-semantic="java">public FragmentManager getFragmentManager()</code> mais la méthode <code data-claire-semantic="java">public FragmentManager getSupportFragmentManager()</code>.</p><aside id="r-739888" data-claire-element-id="739888" data-claire-semantic="warning"><p id="r-739887" data-claire-element-id="739887">Si vous utilisez des fragments qui viennent du paquetage <code data-claire-semantic="java">android.app.Fragment</code> mais que vous utilisez <code data-claire-semantic="java">FragmentManager</code> de la bibliothèque de compatibilité (ou inversement), vous aurez une erreur. Vous êtes obligé de faire un choix !</p></aside><h5 id="r-le-controleur-des-fragments" data-claire-element-id="739911">Le contrôleur des fragments</h5><p id="r-739890" data-claire-element-id="739890">Vous vous souvenez ce que je vous ai dit au sous-chapitre précédent ? Les activités ne servent plus de contrôleurs des vues qu'elles contiennent. Cependant, elles deviennent contrôleurs des fragments qu'elles contiennent, encore plus lorsqu'elles doivent les gérer dynamiquement. C'est la responsabilité de l'activité de gérer l'affichage du fragment qu'on désire. Qu'allons-nous faire ? Nous allons créer deux fragments qui afficheront, pour les deux, un <code data-claire-semantic="java">TextView</code> et un <code data-claire-semantic="java">Button</code>. Cela nous permettra de switcher d'un fragment à l'autre en appuyant sur le bouton. Je pars du principe que la création d'un fragment est quelque chose d'acquis maintenant. Je vous laisse à votre bon soin de créer les fragments <code data-claire-semantic="java">Dynamic1Fragment</code> et <code data-claire-semantic="java">Dynamic2Fragment</code>.</p><p id="r-739891" data-claire-element-id="739891">Le réel changement sera dans notre activité, <code data-claire-semantic="java">DynamicActivity</code>. Première chose, son fichier XML d'affichage ne comportera aucun fragment mais un <code data-claire-semantic="java">FrameLayout</code>. Il servira de conteneur pour nos fragments. Vous comprendrez bien assez vite. Sachez simplement que vous devrez lui donner un identifiant afin de pouvoir remplacer son contenu par un autre.</p><p id="r-739892" data-claire-element-id="739892">Seconde chose, nous allons devoir structurer notre code. A partir de la méthode <code data-claire-semantic="java">public void onCreate(Bundle savedInstanceState)</code>, nous appelerons deux méthodes : <code data-claire-semantic="java">private void setupFragments()</code> et <code data-claire-semantic="java">private void showFragment(final Fragment fragment)</code>. La première méthode initialisera les différents fragments et ne sera appelé qu'à partir de la méthode onCreate. La seconde méthode se chargera d'afficher le fragment qu'on passe en paramètre à l'écran. Elle pourra être appelé à partir des boutons.</p><h6 id="r-initialisation-des-fragments" data-claire-element-id="739896">Initialisation des fragments</h6><p id="r-739893" data-claire-element-id="739893">Si je vous demandais d'initialiser les fragments, je sais ce que vous feriez. Sans doute quelque chose qui ressemble à <code data-claire-semantic="java">this.mDynamic1Fragment = new Dynamic1Fragment();</code>. Vous n'avez pas tout à fait tord mais il ne faut jamais perdre à l'esprit que nous développons sur des appareils mobiles et il n'y a pas de petites économies. Si Android parvient à sauvegarder en cache nos fragments, cela serait bien de pouvoir les récupérer. Il existe deux manières d'y parvenir, par identifiant ou par tag. Comme nous avons des classes fragments, le plus simple est d'utiliser les tags. Il suffit de rajouter une constante publique dans nos fragments pour leur donné un nom <strong>unique</strong>.</p><p id="r-739894" data-claire-element-id="739894">Pour utiliser ces tags, nous récupérerons le <code data-claire-semantic="java">FragmentManager</code> pour appeler dessus la méthode <code data-claire-semantic="java">public abstract Fragment findFragmentByTag (String tag)</code>. Avant d'initialiser nos fragments, nous essayerons de les récupérer par le biais de cette méthode afin d'économiser de la mémoire ! Voici à quoi ressemble notre méthode avec nos deux fragments :</p><pre id="r-739895" data-claire-element-id="739895"><code data-claire-semantic="java">private void setupFragments() {
	final FragmentManager fm = getSupportFragmentManager();

	this.mDynamic1Fragment = (Dynamic1Fragment) fm
			.findFragmentByTag(Dynamic1Fragment.TAG);
	if (this.mDynamic1Fragment == null) {
		this.mDynamic1Fragment = new Dynamic1Fragment();
	}

	this.mDynamic2Fragment = (Dynamic2Fragment) fm
			.findFragmentByTag(Dynamic2Fragment.TAG);
	if (this.mDynamic2Fragment == null) {
		this.mDynamic2Fragment = new Dynamic2Fragment();
	}
}</code></pre><h6 id="r-remplacer-les-fragments" data-claire-element-id="739901">Remplacer les fragments</h6><p id="r-739897" data-claire-element-id="739897">La seconde méthode consistera simplement à afficher le fragment passé en paramètre sur l'écran en remplaçant le contenu du <code data-claire-semantic="java">FrameLayout</code>. Pour ce faire, nous avons besoin d'une transaction sur laquelle nous allons devoir appeler la méthode <code data-claire-semantic="java">public abstract FragmentTransaction replace (int containerViewId, Fragment fragment)</code>. Son utilisation est simple, donner l'identifiant du layout conteneur et le fragment à remplacer. On implémentera la méthode de la manière suivante :</p><pre id="r-739898" data-claire-element-id="739898"><code data-claire-semantic="java">private void showFragment(final Fragment fragment) {
	if (fragment == null)
		return;

	final FragmentManager fm = getSupportFragmentManager();
	final FragmentTransaction ft = fm.beginTransaction();
	// We can also animate the changing of fragment
	ft.setCustomAnimations(android.R.anim.slide_in_left,
			android.R.anim.slide_out_right);

	ft.replace(R.id.frameLayoutListView, fragment);

	ft.commit();
}</code></pre><aside id="r-739900" data-claire-element-id="739900" data-claire-semantic="warning"><p id="r-739899" data-claire-element-id="739899">Chaque transaction doit appeler la méthode commit() pour voir ses opérations s'effectuer. En cas contraire, aucune erreur ne sera lancée mais rien ne se passera.</p></aside><h6 id="r-resultat-final-3" data-claire-element-id="739910">Résultat final</h6><div id="r-739903" data-claire-element-id="739903" data-claire-semantic="question"><p id="r-739902" data-claire-element-id="739902">Mais attends une seconde. C'est bien beau tout ça mais je fais comment pour appeler la méthode <code data-claire-semantic="java">private void showFragment(final Fragment fragment)</code> lorsque je clique sur mes boutons ? Mes fragments ne connaissent pas forcément l'activité précise dans lequel il se trouve.</p></div><p id="r-739904" data-claire-element-id="739904">Vous n'avez pas tord mais Google a apporté une réponse à ce léger problème. L'un des attributs que vous pouvez donner à vos boutons est le suivant : <code data-claire-semantic="xml">android:onClick</code>. La valeur que vous donnez à cet attribut vous oblige à implémenter une méthode du même nom dans l'activité dans laquelle il est désérialisé. Du coup, dans le fichier XML d'affichage de fragment 1 et 2, nous avons donné les valeurs respective goToFragment2 et goToFragment1. Par conséquent, nous implémentons notre activité de la manière suivante :</p><pre id="r-739905" data-claire-element-id="739905"><code data-claire-semantic="java">public class DynamicActivity extends FragmentActivity {
	private String mFragment;
	private Dynamic1Fragment mDynamic1Fragment;
	private Dynamic2Fragment mDynamic2Fragment;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_fragment_dynamic);

		mFragment = getIntent().getStringExtra(&quot;fragment&quot;);
		setupFragments();
		if (mFragment.equals(&quot;Dynamic1Fragment&quot;)) {
			showFragment(this.mDynamic1Fragment);
		} else if (mFragment.equals(&quot;Dynamic2Fragment&quot;)) {
			showFragment(this.mDynamic2Fragment);
		}
	}

	private void setupFragments() {
		final FragmentManager fm = getSupportFragmentManager();

		this.mDynamic1Fragment = (Dynamic1Fragment) fm
				.findFragmentByTag(Dynamic1Fragment.TAG);
		if (this.mDynamic1Fragment == null) {
			this.mDynamic1Fragment = new Dynamic1Fragment();
		}

		this.mDynamic2Fragment = (Dynamic2Fragment) fm
				.findFragmentByTag(Dynamic2Fragment.TAG);
		if (this.mDynamic2Fragment == null) {
			this.mDynamic2Fragment = new Dynamic2Fragment();
		}
	}

	private void showFragment(final Fragment fragment) {
		if (fragment == null)
			return;

		final FragmentManager fm = getSupportFragmentManager();
		final FragmentTransaction ft = fm.beginTransaction();
		// We can also animate the changing of fragment
		ft.setCustomAnimations(android.R.anim.slide_in_left,
				android.R.anim.slide_out_right);

		ft.replace(R.id.frameLayoutListView, fragment);

		ft.commit();
	}

	public void goToFragment1(View v) {
		showFragment(this.mDynamic1Fragment);
	}

	public void goToFragment2(View v) {
		showFragment(this.mDynamic2Fragment);
	}
}</code></pre><p id="r-739906" data-claire-element-id="739906">Si vous exécutez notre application, lorsque vous cliquez sur l'un des boutons des fragments, le fragment courant s'animera en se déplaçant vers la droite pour laisser place à notre second fragment. Vous constatez qu'en plus de pouvoir facilement de fragment, il est simple d'effectuer quelques animations sur le changement.</p><figure id="r-resultat-de-l-execution-de-l-activite-dynamicactivity" data-claire-element-id="739909"><img id="r-739907" data-claire-element-id="739907" src="medias/uploads.siteduzero.com_files_406001_407000_406970.png" alt="Résultat de l'exécution de l'activité DynamicActivity"/><figcaption>Résultat de l'exécution de l'activité DynamicActivity</figcaption></figure><h5 id="r-retenir-sa-position-dans-les-fragments" data-claire-element-id="739915">Retenir sa position dans les fragments</h5><p id="r-739912" data-claire-element-id="739912">Tiens, je ne sais pas si vous l'avez remarqué mais, par exemple, si vous changez l'orientation de votre smartphone, vous retournez au point initial. N'y aurait-il pas moyen de sauvegarder cette information ? Vous êtes censé savoir comment faire ce genre de chose, c'est pourquoi je vais vous laisser réfléchir sur la question. Vous trouverez ma correction juste après.</p><h6 id="r-correction-86" data-claire-element-id="739914">Correction</h6><pre id="r-739913" data-claire-element-id="739913"><code data-claire-semantic="java">package com.siteduzero.android.fragments.dynamic;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.view.View;

import com.siteduzero.android.R;

public class DynamicActivity extends FragmentActivity {
	private String mFragment;
	private Dynamic1Fragment mDynamic1Fragment;
	private Dynamic2Fragment mDynamic2Fragment;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_fragment_dynamic);

		if (savedInstanceState != null)
			mFragment = savedInstanceState.getString(&quot;fragment&quot;);
		else
			mFragment = getIntent().getStringExtra(&quot;fragment&quot;);

		setupFragments();
		if (mFragment != null) {
			if (mFragment.equals(&quot;Dynamic1Fragment&quot;)) {
				showFragment(this.mDynamic1Fragment);
			} else if (mFragment.equals(&quot;Dynamic2Fragment&quot;)) {
				showFragment(this.mDynamic2Fragment);
			}
		}
	}

	@Override
	protected void onSaveInstanceState(Bundle outState) {
		outState.putString(&quot;fragment&quot;, mFragment != null ? mFragment : &quot;&quot;);
		super.onSaveInstanceState(outState);
	}

	private void setupFragments() {
		final FragmentManager fm = getSupportFragmentManager();

		this.mDynamic1Fragment = (Dynamic1Fragment) fm
				.findFragmentByTag(Dynamic1Fragment.TAG);
		if (this.mDynamic1Fragment == null) {
			this.mDynamic1Fragment = new Dynamic1Fragment();
		}

		this.mDynamic2Fragment = (Dynamic2Fragment) fm
				.findFragmentByTag(Dynamic2Fragment.TAG);
		if (this.mDynamic2Fragment == null) {
			this.mDynamic2Fragment = new Dynamic2Fragment();
		}
	}

	private void showFragment(final Fragment fragment) {
		if (fragment == null)
			return;

		final FragmentManager fm = getSupportFragmentManager();
		final FragmentTransaction ft = fm.beginTransaction();
		// We can also animate the changing of fragment
		ft.setCustomAnimations(android.R.anim.slide_in_left,
				android.R.anim.slide_out_right);

		ft.replace(R.id.frameLayoutListView, fragment);

		ft.commit();
	}

	public void goToFragment1(View v) {
		showFragment(this.mDynamic1Fragment);
	}

	public void goToFragment2(View v) {
		showFragment(this.mDynamic2Fragment);
	}
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
<span class="arrow"></span>
<span class="next">Utiliser des fragments fixes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">
<span class="next">ListFragment</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ListFragment"></a><h2>ListFragment</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
<span class="arrow"></span>
<span class="next">Utiliser des fragments dynamiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
<span class="next">Utilisation simple des listes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-739918" data-claire-element-id="739918">Le widget <code data-claire-semantic="java">ListView</code> est sans aucun doute l'un des composants graphiques les plus utilisés dans les applications Android, au même titre que le <code data-claire-semantic="java">ViewPager</code> ou le <code data-claire-semantic="java">GridView</code>. Il permet d'afficher facilement des informations l'un à la suite de l'autre verticalement avec des vues personnalisées ou non.</p><p id="r-739919" data-claire-element-id="739919">Dans un premier temps, nous allons voir comment utiliser ce composant mêlé à la puissance des fragments. Nous compliquerons rapidement les choses en intégrant des vues personnalisées à chaque item de nos listes. Pour finir, nous rendrons l'affichage de cette liste dynamique avec l'apparition de vues différentes.</p>
</div><a name="Utilisationsimpledeslistes"></a><h2>Utilisation simple des listes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">
<span class="arrow"></span>
<span class="next">ListFragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
<span class="next">Intégrer une vue personnalisée</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utilisation-simple-des-listes" data-claire-element-id="739937">Utilisation simple des listes</h4><p id="r-739920" data-claire-element-id="739920">Puisque les listes sont largement utilisées dans les applications Android, nous allons partir du principe que les listes avec les <code data-claire-semantic="java">Activity</code> n'ont pas de secret pour vous. Vous êtes censé savoir que vous pouvez en définir directement dans vos fichiers XML d'affichage ou via la classe <code data-claire-semantic="java">ListActivity</code>.</p><p id="r-739921" data-claire-element-id="739921">Cependant, nous reviendrons plus en détail sur les adaptateurs que vous devez créer lorsque vous en créez un vous même. Il existe une manière simple et efficace de gérer le cycle de vie des vues qu'ils gèrent mais trop peu connue de certains développeurs. Bien entendu, l'adaptation aux fragments sera un point important de ce chapitre et l'utilisation, parfois méconnue, de certaines choses pour rendre vos applications plus agréable.</p><h5 id="r-declarer-sa-liste-dans-des-fichiers-xml" data-claire-element-id="739928">Déclarer sa liste dans des fichiers XML</h5><p id="r-739922" data-claire-element-id="739922">Nous sommes partis du principe que vous saviez comment déclarer une liste à partir d'un fichier XML d'affichage. Ce que vous ne savez peut-être pas, c'est qu'il est possible de définir un fichier XML d'affichage avec des <code data-claire-semantic="java">ListFragment</code>. Si nous nous penchons sur le problème 30 secondes, cela pourrait vous semblez curieux. Pourquoi attacher un fichier XML à une classe qui va créer automatiquement notre liste ? C'est très simple. Par exemple, pour lui demander d'afficher quelque chose lorsque nous n'avons rien dans la liste.</p><p id="r-739923" data-claire-element-id="739923">Ce que nous allons faire consiste à déclarer une liste lorsqu'il y aura des éléments à afficher ou du texte pour indiquer à l'utilisateur que la liste est vide. Pour nous permettre d'arriver à ce résultat, nous allons nous servir des « id » que le framework Android met à disposition des développeurs. En effet, il existe deux identifiants un peu spéciaux contenu dans <code data-claire-semantic="xml">@android:id</code>. Il donne accès soit à <code data-claire-semantic="xml">list</code> soit à <code data-claire-semantic="xml">empty</code>. Il permettra d'indiquer à Android le composant à afficher lorsqu'il y a une raison d'afficher une liste ou lorsqu'il n'y a rien dedans.</p><aside id="r-739925" data-claire-element-id="739925" data-claire-semantic="information"><p id="r-739924" data-claire-element-id="739924">Dans notre exemple, nous avons choisi d'afficher que du texte mais cela peut être infiniment plus complet. Vous pourriez vouloir afficher une image et du texte en dessous. Dans ce cas là, il vous faudra mettre votre image et votre texte dans un layout que vous identifierez par la valeur <code data-claire-semantic="xml">empty</code>.</p></aside><p id="r-739926" data-claire-element-id="739926">Si nous restons simple, le fichier XML ressemblera à quelque chose comme ceci :</p><pre id="r-739927" data-claire-element-id="739927"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; &gt;

    &lt;ListView
        android:id=&quot;@android:id/list&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_alignParentLeft=&quot;true&quot;
        android:layout_alignParentTop=&quot;true&quot; /&gt;

    &lt;TextView
        android:id=&quot;@android:id/empty&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:layout_centerHorizontal=&quot;true&quot;
        android:layout_centerVertical=&quot;true&quot;
        android:text=&quot;@string/text_empty&quot; /&gt;

&lt;/RelativeLayout&gt;</code></pre><h5 id="r-creation-de-la-listfragment" data-claire-element-id="739936">Création de la ListFragment</h5><p id="r-739929" data-claire-element-id="739929">A la différence du chapitre précédent, notre fragment ne va pas étendre la classe <code data-claire-semantic="java">Fragment</code> mais <code data-claire-semantic="java">ListFragment</code> qui est le parfait équivalent de la classe <code data-claire-semantic="java">ListActivity</code>. De la même manière que les fragments basiques, nous allons désérialiser notre fichier XML d'affichage dans sa méthode <code data-claire-semantic="java">public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</code> (chose qui n'est pas obligatoire. Vous pouvez ne pas vouloir afficher quelque chose lorsque la liste est vide. Dans ce cas, il vous suffit de ne créer aucun fichier XML et de ne pas redéfinir la méthode précédemment citée).</p><p id="r-739930" data-claire-element-id="739930">De la même manière qu'une <code data-claire-semantic="java">ListActivity</code>, nous devons récupérer notre liste pour lui attacher un adaptateur (que nous ne créerons pas pour le moment). L'unique subtilité dans ce cas présent est la méthode à redéfinir. En effet, nous aurons accès à notre liste qu'une fois l'activité dans laquelle le fragment est hébergé sera construite. Nous faisons toutes les manipulations destinées à la gestion de la liste dans la méthode <code data-claire-semantic="java">public void onActivityCreated(Bundle savedInstanceState)</code>.</p><p id="r-739931" data-claire-element-id="739931">Ce qui nous donne le code et le résultat suivant :</p><pre id="r-739932" data-claire-element-id="739932"><code data-claire-semantic="java">package com.siteduzero.android.lists;

import com.siteduzero.android.R;

import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

public class SimpleListViewFragment extends ListFragment {
	public static final String TAG = &quot;ListViewFragment&quot;;

	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container,
			Bundle savedInstanceState) {
		return inflater.inflate(R.layout.fragment_listview, container, false);
	}

	@Override
	public void onActivityCreated(Bundle savedInstanceState) {
		super.onActivityCreated(savedInstanceState);

		String[] items = getResources().getStringArray(R.array.list_examples);

		ArrayAdapter&lt;String&gt; aa = new ArrayAdapter&lt;String&gt;(getActivity(),
				android.R.layout.simple_list_item_1, items);
		setListAdapter(aa);
	}
}</code></pre><figure id="r-resultat-de-l-execution-d-une-liste-simple" data-claire-element-id="739935"><img id="r-739933" data-claire-element-id="739933" src="medias/uploads.siteduzero.com_files_409001_410000_409168.png" alt="Résultat de l'exécution d'une liste simple"/><figcaption>Résultat de l'exécution d'une liste simple</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">
<span class="arrow"></span>
<span class="next">ListFragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
<span class="next">Intégrer une vue personnalisée</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Intgrerunevuepersonnalise"></a><h2>Intégrer une vue personnalisée</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
<span class="arrow"></span>
<span class="next">Utilisation simple des listes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
<span class="next">Vers des listes dynamiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-integrer-une-vue-personnalisee" data-claire-element-id="739956">Intégrer une vue personnalisée</h4><p id="r-739938" data-claire-element-id="739938">Une liste remplie de texte est plutôt rare dans les applications Android. En général, chaque item est une vue que vous avez vous même confectionnée pour afficher de l'information. Nous partons toujours du principe que vous savez faire ce genre de chose mais cela sera un peu différent cette fois. Je vais vous expliquer ma façon de faire pour que vous puissiez mettre en place une jolie architecture à la fois souple et puissante.</p><h5 id="r-creer-une-vue-personnalisee" data-claire-element-id="739945">Créer une vue personnalisée</h5><p id="r-739939" data-claire-element-id="739939">J'ose quand même espérer que vous savez comment vous y prendre pour créer une vue (sinon, je vous redirige vers le <a href="http://www.siteduzero.com/tutoriel-3-554364-creez-des-applications-pour-android.html">tutoriel de Apollidore</a> !). Pour notre exemple, nous allons faire quelque chose de très simple : un petit bloc avec un ombrage qui contient du texte. Je vous rassure, vous n'allez pas devoir jouer avec 9-patch. Android vous fournit déjà quelques ombrages que vous pouvez utiliser comme bon vous semble.</p><p id="r-739940" data-claire-element-id="739940">Notre fichier XML destiné à devenir notre vue ressemblera donc à quelque chose comme ceci :</p><pre id="r-739941" data-claire-element-id="739941"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:background=&quot;@android:drawable/dialog_holo_light_frame&quot;
    android:orientation=&quot;vertical&quot; &gt;

    &lt;TextView
        android:id=&quot;@+id/textView&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:padding=&quot;15dp&quot;
        android:text=&quot;@string/default_lorem&quot; /&gt;

&lt;/LinearLayout&gt;</code></pre><p id="r-739942" data-claire-element-id="739942">Pour rester simple, notre classe Java, qui va désérialiser notre fichier XML d'affichage, redéfiniera simplement les constructeurs nécessaires pour appeler la super classe (<code data-claire-semantic="java">LinearLayout</code>) et offrira une méthode à notre adaptateur pour attacher du texte à notre <code data-claire-semantic="java">TextView</code>.</p><p id="r-739943" data-claire-element-id="739943">Ainsi, nous obtenons le code suivant :</p><pre id="r-739944" data-claire-element-id="739944"><code data-claire-semantic="java">package com.siteduzero.android.lists;

import com.siteduzero.android.R;

import android.content.Context;
import android.util.AttributeSet;
import android.widget.LinearLayout;
import android.widget.TextView;

public class CustomListViewView extends LinearLayout {
	private TextView mTextView;

	public CustomListViewView(Context context, AttributeSet attrs, int defStyle) {
		super(context, attrs, defStyle);
		init();
	}

	public CustomListViewView(Context context, AttributeSet attrs) {
		super(context, attrs);
		init();
	}

	public CustomListViewView(Context context) {
		super(context);
		init();
	}

	private void init() {
		inflate(getContext(), R.layout.view_custom_listview, this);
		mTextView = (TextView) findViewById(R.id.textView);
	}

	public void bind(int text) {
		mTextView.setText(getResources().getString(text));
	}
}</code></pre><h5 id="r-creer-son-adaptateur" data-claire-element-id="739955">Créer son adaptateur</h5><p id="r-739946" data-claire-element-id="739946">Maintenant que nous avons une vue personnalisée, la création d'un adaptateur prend tout son sens. Mais nous allons faire ça proprement. Il héritera de la classe <code data-claire-semantic="java">BaseAdapter</code> et offrira une méthode pour attacher les textes à nos vues (vous l'aurez compris, c'est notre fragment qui se chargera de fournir tous les textes qui s'afficheront sur nos vues). Nous retiendrons donc une liste qui sera utilisé par les méthodes que nous avons été forcé de redéfinir. Jusque là, rien de bien nouveau.</p><p id="r-739947" data-claire-element-id="739947">Cependant, en plus de ça, notre méthode <code data-claire-semantic="java">public View getView(int position, View convertView, ViewGroup parent)</code> ne se contentera pas de construire les vues. Il récupèrera au plus possible les vues déjà construites et attachera le texte correspondant à la ligne en cours le bon texte présent dans notre liste.</p><p id="r-739948" data-claire-element-id="739948">Vous devriez être capable de concevoir cet adaptateur seul. C'est pourquoi je vous laisse y réfléchir (et je vous conseil de le faire pour bien progresser). Après quoi, je vous invite à consulter ma solution (que vous retrouverez cacher ci-dessous) pour vous corrigez.</p><p id="r-739949" data-claire-element-id="739949"></p><pre id="r-739950" data-claire-element-id="739950"><code data-claire-semantic="java">package com.siteduzero.android.lists;

import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;

public class CustomListViewAdapter extends BaseAdapter {
	private List&lt;Integer&gt; mModel = new ArrayList&lt;Integer&gt;();
	private Context mContext;

	public CustomListViewAdapter(Context context) {
		mContext = context;
	}

	@Override
	public int getCount() {
		return mModel.size();
	}

	@Override
	public Integer getItem(int position) {
		return mModel.get(position);
	}

	@Override
	public long getItemId(int position) {
		return position;
	}

	@Override
	public View getView(int position, View convertView, ViewGroup parent) {
		CustomListViewView v = null;
		// Notre vue n'a pas encore été construite, nous le faisons
		if (convertView == null) {
			v = new CustomListViewView(mContext);
		} // Notre vue peut être récupérée, nous le faisons
		else {
			v = (CustomListViewView) convertView;
		}
		v.bind(getItem(position));
		return v;
	}

	public void bind(List&lt;Integer&gt; model) {
		mModel = model;
	}
}</code></pre><p id="r-739951" data-claire-element-id="739951">Notre fragment sera exactement identique au précédent sous-chapitre à l'exception près que nous n'utilisons plus <code data-claire-semantic="java">ArrayAdapter</code> mais notre propre adaptateur (<code data-claire-semantic="java">CustomListViewAdapter</code> dans mon cas). Vous devriez alors avoir le même résultat que moi avec une belle fluidité puisque notre adaptateur est optimisé au niveau de la gestion de la mémoire.</p><figure id="r-resultat-de-l-execution-d-une-liste-avec-une-vue-personnalisee" data-claire-element-id="739954"><img id="r-739952" data-claire-element-id="739952" src="medias/uploads.siteduzero.com_files_409001_410000_409179.png" alt="Résultat de l'exécution d'une liste avec une vue personnalisée"/><figcaption>Résultat de l'exécution d'une liste avec une vue personnalisée</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
<span class="arrow"></span>
<span class="next">Utilisation simple des listes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
<span class="next">Vers des listes dynamiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Versdeslistesdynamiques"></a><h2>Vers des listes dynamiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
<span class="arrow"></span>
<span class="next">Intégrer une vue personnalisée</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">
<span class="next">PreferenceFragment</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-vers-des-listes-dynamiques" data-claire-element-id="739979">Vers des listes dynamiques</h4><p id="r-739957" data-claire-element-id="739957">Maintenant que nous avons appris l'intégration de vues personnalisées dans nos listes, nous allons voir une dernière chose encore plus importante qui clôturera ce chapitre : rajouter du dynamisme dans sa liste. Vous vous rendrez vite compte que nous avons rarement envie d'afficher toujours la même chose sous la même forme. Android a pensé à ce cas et nous permet facilement d'afficher plusieurs vues personnalisées en fonction de nos désirs.</p><h5 id="r-modification-de-l-adaptateur" data-claire-element-id="739978">Modification de l'adaptateur</h5><p id="r-739958" data-claire-element-id="739958">Le but de notre nouveau adaptateur est de construire plusieurs types de vues avec une seule méthode (je vous laisse deviner laquelle ;) ). Pour cet exemple, nous construisons deux vues que je nommerai <strong>DynamicHeaderListViewView</strong> et <strong>DynamicBodyListViewView</strong>. La première affiche une image à gauche et du texte à droite, la seconde affiche simplement du texte (comme la vue pour le sous-chapitre précédent). Je vous laisse le bon soin de créer ses vues comme nous l'avons fait précédemment. Cela ne devrait pas vous posez de problème.</p><p id="r-739959" data-claire-element-id="739959">Le véritable changement se situe au niveau de notre adaptateur. Nous étendrons toujours <code data-claire-semantic="java">BaseAdapter</code> mais nous allons redéfinir deux méthodes supplémentaires qui sont facultatives (j'entends par là qu'il n'est pas nécessaire de toujours les redéfinir, seulement quand cela est nécessaire) : <code data-claire-semantic="java">public int getViewTypeCount()</code> et <code data-claire-semantic="java">public int getItemViewType(int position)</code>. A quoi servent ces méthodes ?</p><ul id="r-739964" data-claire-element-id="739964"><li id="r-739961" data-claire-element-id="739961"><p id="r-739960" data-claire-element-id="739960">La première nous demande combien de vues différentes seront présentes dans notre liste.</p></li><li id="r-739963" data-claire-element-id="739963"><p id="r-739962" data-claire-element-id="739962">La seconde nous demande le type de vues pour la position courante dans la liste.</p></li></ul><p id="r-739965" data-claire-element-id="739965">Pour pouvoir compléter ces méthodes, nous aurons besoin de constantes représentants les types de vues et une liste faisant correspondre chaque ligne de la liste avec son type associé. Si nous continuons notre exemple, avec le « header » et le « body », nous aurons quelque chose qui ressemble à ceci :</p><pre id="r-739966" data-claire-element-id="739966"><code data-claire-semantic="java">public class DynamicListViewAdapter extends BaseAdapter {
	private static final int TYPE_HEADER = 0;
	private static final int TYPE_BODY = 1;
	private static final int TYPE_MAX = 2;
	private List&lt;Integer&gt; mTypes = new ArrayList&lt;Integer&gt;();

	// Autres attributs

	@Override
	public int getViewTypeCount() {
		return TYPE_MAX;
	}

	@Override
	public int getItemViewType(int position) {
		return mTypes.get(position);
	}
	
	// Autres méthodes
}</code></pre><p id="r-739967" data-claire-element-id="739967">La mise en place est aussi simple que cela. Il va maintenant falloir remplir la liste des types avec les lignes de la liste. Cela se fait naturellement dans les méthodes d'attachement. Nous en aurons deux : l'une pour l'en-tête de la liste et une seconde pour le corps de la liste. La première méthode prend en paramètre un modèle qui se trouve être une classe confectionné par mes soins avec seulement 2 attributs représentant une image et un texte. La seconde méthode est identique à la méthode vue au sous-chapitre précédent, elle prendra une liste de chaînes de caractères. Pour chacune de ces méthodes, nous ajouterons au fur et à mesure les types dans la liste des types. Cela nous dera quelque chose comme ceci :</p><pre id="r-739968" data-claire-element-id="739968"><code data-claire-semantic="java">public class DynamicListViewAdapter extends BaseAdapter {
	// Autres attributs et méthodes

	public void bindHeader(DynamicListViewModel model) {
		mModelHeader = model;
		mTypes.add(TYPE_HEADER);
	}

	public void bindBody(List&lt;Integer&gt; model) {
		mModelBody = model;
		for (int i = 0; i &lt; model.size(); i++) {
			mTypes.add(TYPE_BODY);
		}
	}
}</code></pre><p id="r-739969" data-claire-element-id="739969">Nous avons aussi besoin de retoucher un peu nos anciennes méthodes. La taille de notre liste ne correspond plus à la taille de notre liste de données. Il faut donc prévoir qu'un en-tête (ou pas) soit placé quelque part dans notre liste. Ainsi, nous modifions nos méthodes de la manière suivante :</p><pre id="r-739970" data-claire-element-id="739970"><code data-claire-semantic="java">public class DynamicListViewAdapter extends BaseAdapter {
	// Autres attributs et méthodes

	@Override
	public int getCount() {
		if (mModelHeader == null)
			return mModelBody.size();
		return 1 + mModelBody.size();
	}

	@Override
	public Object getItem(int position) {
		int type = getItemViewType(position);
		return type == TYPE_HEADER ? mModelHeader : mModelBody
				.get(position - 1);
	}
	
	// Autres méthodes
}</code></pre><p id="r-739971" data-claire-element-id="739971">Pour finir, nous avons notre méthode <code data-claire-semantic="java">public View getView(int position, View convertView, ViewGroup parent)</code> sur laquelle je vais vous laisser cogiter. Vous disposez de toutes les méthodes nécessaires pour mener à bien sa confection. Si vous avez bien compris l'exemple précédent avec une seule vue personnalisée pour toute la liste, vous ne devriez pas avoir de mal à en faire de même pour plusieurs vues personnalisées. Pensez simplement que les méthodes que nous avons redéfinies ne sont sans doute pas là pour rien. Bien sûr, ma solution se trouve cachée ci-dessous.</p><p id="r-739972" data-claire-element-id="739972"></p><pre id="r-739973" data-claire-element-id="739973"><code data-claire-semantic="java">package com.siteduzero.android.lists;

import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;

public class DynamicListViewAdapter extends BaseAdapter {
	private static final int TYPE_HEADER = 0;
	private static final int TYPE_BODY = 1;
	private static final int TYPE_MAX = 2;
	private List&lt;Integer&gt; mTypes = new ArrayList&lt;Integer&gt;();
	private DynamicListViewModel mModelHeader = null;
	private List&lt;Integer&gt; mModelBody = new ArrayList&lt;Integer&gt;();
	private Context mContext;

	public DynamicListViewAdapter(Context context) {
		mContext = context;
	}

	@Override
	public int getViewTypeCount() {
		return TYPE_MAX;
	}

	@Override
	public int getItemViewType(int position) {
		return mTypes.get(position);
	}

	@Override
	public int getCount() {
		if (mModelHeader == null)
			return mModelBody.size();
		return 1 + mModelBody.size();
	}

	@Override
	public Object getItem(int position) {
		int type = getItemViewType(position);
		return type == TYPE_HEADER ? mModelHeader : mModelBody
				.get(position - 1);
	}

	@Override
	public long getItemId(int position) {
		return position;
	}

	@Override
	public View getView(int position, View convertView, ViewGroup parent) {
		View v = null;
		int type = getItemViewType(position);

		if (convertView == null) {
			switch (type) {
			case TYPE_HEADER:
				v = new DynamicHeaderListViewView(mContext);
				break;
			case TYPE_BODY:
				v = new DynamicBodyListViewView(mContext);
				break;
			}
		} else {
			switch (type) {
			case TYPE_HEADER:
				v = (DynamicHeaderListViewView) convertView;
				break;
			case TYPE_BODY:
				v = (DynamicBodyListViewView) convertView;
				break;
			}
		}

		switch (type) {
		case TYPE_HEADER:
			DynamicListViewModel model1 = (DynamicListViewModel) getItem(position);
			((DynamicHeaderListViewView) v).bind(model1.getImageRessource(),
					model1.getTextRessource());
			break;
		case TYPE_BODY:
			Integer model2 = (Integer) getItem(position);
			((DynamicBodyListViewView) v).bind(model2);
			break;
		}

		return v;
	}

	public void bindHeader(DynamicListViewModel model) {
		mModelHeader = model;
		mTypes.add(TYPE_HEADER);
	}

	public void bindBody(List&lt;Integer&gt; model) {
		mModelBody = model;
		for (int i = 0; i &lt; model.size(); i++) {
			mTypes.add(TYPE_BODY);
		}
	}
}</code></pre><p id="r-739974" data-claire-element-id="739974">Il n'en faut pas plus pour concevoir une liste dynamique. Il vous suffit ensuite d'intégrer ce nouvel adaptateur à votre activité, en n'oubliant pas d'appeler les méthodes d'attachement pour remplir votre liste et vous devriez obtenir un résultat similaire au mien :</p><figure id="r-resultat-de-l-execution-d-une-liste-avec-plusieurs-vues-personnalisees" data-claire-element-id="739977"><img id="r-739975" data-claire-element-id="739975" src="medias/uploads.siteduzero.com_files_409001_410000_409182.png" alt="Résultat de l'exécution d'une liste avec plusieurs vues personnalisées"/><figcaption>Résultat de l'exécution d'une liste avec plusieurs vues personnalisées</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
<span class="arrow"></span>
<span class="next">Intégrer une vue personnalisée</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">
<span class="next">PreferenceFragment</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="PreferenceFragment"></a><h2>PreferenceFragment</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
<span class="arrow"></span>
<span class="next">Vers des listes dynamiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
<span class="next">Paramétriser son application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-739981" data-claire-element-id="739981">Depuis la version 3, Android met à disposition des développeurs des outils permettant de paramétriser facilement son application. En quoi consiste cette paramétrisation ? C'est simple. Il s'agit ni plus ni moins que des données partagées dans toute l'application (que vous avez déjà certainement utilisé) mais intégrer dans une conception toute fait. Nous confectionnerons des fragments (ou des activités) qui auront comme seul objectif l'affichage des paramètres de la même manière que ceux de votre smartphone.</p><p id="r-739982" data-claire-element-id="739982">Cela va vous facilitez la vie mais je vous met en garde sur une petite chose. Nous utilisons depuis le début de ce tutoriel la bibliothèque de compatibilité développé par Google. Les préférences ont également été intégrées dans cette bibliothèque mais n'est pas très performante (ou du moins, pas à une grande échelle). Parce que le code est quand même assez différent et pour ne pas être limité, nous ne l'utiliserons pas pour ce chapitre. Mais sachez qu'il est possible de l'utiliser. Il faudra juste se renseigner un peu sur la façon de s'y prendre.</p>
</div><a name="Paramtrisersonapplication"></a><h2>Paramétriser son application</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">
<span class="arrow"></span>
<span class="next">PreferenceFragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
<span class="next">Affiner ses paramètres avec les en-têtes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-parametriser-son-application" data-claire-element-id="740010">Paramétriser son application</h4><p id="r-739983" data-claire-element-id="739983">Paramétriser son application par les préférences du système n'est pas obligatoire. Votre application n'a peut-être pas besoin de sauvegarder quelque chose ou l'affichage des préférences d'Android ne vous conviendra pas dans le design de votre application. Toutes ces choses sont vraies et en même temps, c'est quelque chose de très efficace et surtout qui ne déstabilisera pas l'utilisateur Android. Explications.</p><p id="r-739984" data-claire-element-id="739984">Un utilisateur Android a l'habitude de se rendre dans les paramètres de son téléphone pour activer le Wi-Fi, le Bluetooth, le NFC, gérer le son, la luminosité, etc. Toutes ces choses sont « standardisées » (je mets cela entre guillemet parce que ce n'est pas vraiment le cas, c'est juste l'affichage normal sur les terminaux Android). Peu importe le lanceur d'application, le fond d'écran ou les widgets que vous placerez sur vos bureaux, les paramètres auront toujours le même design. Il pourra en être de même pour votre application. L'utilisera saura directement comment l'utiliser et pour vous, cela sera du temps de développement en moins. :)</p><h5 id="r-definir-ses-preferences" data-claire-element-id="740005">Définir ses préférences</h5><p id="r-739985" data-claire-element-id="739985">La déclaration des composants d'un écran de préférences est très simple et se fait en grande partie à partir d'un fichier XML. Ce fichier doit se trouver dans le dossier xml des ressources du projet et doit avoir comme racine un noeud de type <code data-claire-semantic="xml">PreferenceScreen</code>. A partir de là, deux choix s'offrent à vous. Soit vous déclarez des <code data-claire-semantic="xml">PreferenceCategory</code>, dans ce cas, vous pourrez regrouper des préférences. Soit vous déclarez directement des préférences au risque d'être brouillon si vous en avez beaucoup.</p><aside id="r-739987" data-claire-element-id="739987" data-claire-semantic="information"><p id="r-739986" data-claire-element-id="739986"><code data-claire-semantic="xml">PreferenceCategory</code> doit contenir les attributs <code data-claire-semantic="xml">android:key</code> et <code data-claire-semantic="xml">android:title</code> pour pouvoir l'identifier et lui donner un titre.</p></aside><p id="r-739988" data-claire-element-id="739988">Il existe plusieurs types de préférence. Avant tout, notez que vous devrez toujours donner une valeur aux attributs suivants : <code data-claire-semantic="xml">android:key</code> pour pouvoir identifier les préférences et en récupérer sa valeur par la mémoire partagée, <code data-claire-semantic="xml">android:title</code> pour donner un nom à la préférence, <code data-claire-semantic="xml">android:summary</code> pour donner des précisions supplémentaires sur la préférence et <code data-claire-semantic="xml">android:defaultValue</code> pour donner une valeur par défaut à la préférence. On retrouvera :</p><ul id="r-739999" data-claire-element-id="739999"><li id="r-739990" data-claire-element-id="739990"><p id="r-739989" data-claire-element-id="739989"><code data-claire-semantic="xml">CheckBoxPreference</code> et <code data-claire-semantic="xml">SwitchPreference</code> pour retenir un boolean en cochant la case créée ou non.</p></li><li id="r-739992" data-claire-element-id="739992"><p id="r-739991" data-claire-element-id="739991"><code data-claire-semantic="xml">EditTextPreference</code> pour sauvegarder une chaîne de caractères. Il peut également</p></li><li id="r-739994" data-claire-element-id="739994"><p id="r-739993" data-claire-element-id="739993"><code data-claire-semantic="xml">RingtonePreference</code> pour saisir une sonnerie à partir de votre terminal ou d'une application qui vous permet d'en télécharger.</p></li><li id="r-739996" data-claire-element-id="739996"><p id="r-739995" data-claire-element-id="739995"><code data-claire-semantic="xml">Preference</code> qui est une valeur non éditable par l'utilisateur. Cette préférence change par une autre préférence. Raison pour laquelle vous devez déclarer l'attribut <code data-claire-semantic="xml">android:dependency</code> qui contiendra, comme valeur, la clé d'une autre préférence.</p></li><li id="r-739998" data-claire-element-id="739998"><p id="r-739997" data-claire-element-id="739997"><code data-claire-semantic="xml">ListPreference</code> est un peu spécial. Vous devez définir une liste de valeur dans lequel l'utilisateur pourra faire son choix. Pour ce faire, c'est simple. Il faut donner une valeur pour deux nouveaux attributs : <code data-claire-semantic="xml">android:entries</code> pour donner un tableau de valeur qui sera affiché à l'utilisateur et <code data-claire-semantic="xml">android:entryValues</code> pour afficher le code des valeurs de chaque ligne de ce tableau.</p></li></ul><p id="r-740000" data-claire-element-id="740000">Pour vous aidez à mieux comprendre, ci-dessous se trouve un exemple complet pour définir ses préférences reprenant toutes les notions que nous avons vu juste avant.</p><pre id="r-740001" data-claire-element-id="740001"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;PreferenceScreen xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;

    &lt;PreferenceCategory
        android:key=&quot;pref_key_category_1&quot;
        android:title=&quot;@string/title_category_1&quot; &gt;
        &lt;CheckBoxPreference
            android:defaultValue=&quot;false&quot;
            android:key=&quot;pref_key_pref_1&quot;
            android:summary=&quot;@string/summary_pref_1&quot;
            android:title=&quot;@string/title_pref_1&quot; /&gt;

        &lt;Preference
            android:dependency=&quot;pref_key_pref_1&quot;
            android:key=&quot;pref_key_pref_2&quot;
            android:summary=&quot;@string/summary_pref_2&quot;
            android:title=&quot;@string/title_pref_2&quot; /&gt;

        &lt;SwitchPreference
            android:key=&quot;pref_key_pref_3&quot;
            android:summary=&quot;@string/summary_pref_3&quot;
            android:switchTextOff=&quot;@string/switch_off_pref_3&quot;
            android:switchTextOn=&quot;@string/switch_on_pref_3&quot;
            android:title=&quot;@string/title_pref_3&quot; /&gt;
    &lt;/PreferenceCategory&gt;
    &lt;PreferenceCategory
        android:key=&quot;pref_key_category_2&quot;
        android:title=&quot;@string/title_category_2&quot; &gt;
        &lt;EditTextPreference
            android:key=&quot;pref_key_pref_4&quot;
            android:summary=&quot;@string/summary_pref_4&quot;
            android:title=&quot;@string/title_pref_4&quot; /&gt;

        &lt;ListPreference
            android:entries=&quot;@array/list_pref_5&quot;
            android:entryValues=&quot;@array/list_pref_5&quot;
            android:key=&quot;pref_key_pref_5&quot;
            android:summary=&quot;@string/summary_pref_5&quot;
            android:title=&quot;@string/title_pref_5&quot; /&gt;

        &lt;RingtonePreference
            android:key=&quot;pref_key_pref_6&quot;
            android:ringtoneType=&quot;ringtone&quot;
            android:summary=&quot;@string/summary_pref_6&quot;
            android:title=&quot;@string/title_pref_6&quot; /&gt;
    &lt;/PreferenceCategory&gt;

&lt;/PreferenceScreen&gt;</code></pre><figure id="r-affichage-des-parametres" data-claire-element-id="740004"><img id="r-740002" data-claire-element-id="740002" src="medias/uploads.siteduzero.com_files_411001_412000_411181.png" alt="Affichage des paramètres"/><figcaption>Affichage des paramètres</figcaption></figure><h5 id="r-creer-son-fragment-avec-son-activite" data-claire-element-id="740009">Créer son fragment avec son activité</h5><p id="r-740006" data-claire-element-id="740006">Il existe un fragment spécialement prévu pour accueillir les préférences de votre application, <code data-claire-semantic="java">PreferenceFragment</code>. Il est alors enfantin de lui attacher notre fichier xml par un simple appel de méthode dans la méthode <code data-claire-semantic="java">public void onCreate(Bundle savedInstanceState)</code> : <code data-claire-semantic="java">public void addPreferencesFromResource (int preferencesResId)</code>. Cette méthode prends une ressource en paramètre correspondant aux préférences que vous voulez liées.</p><p id="r-740007" data-claire-element-id="740007">En toute simplicité, notre fragment ressemblera à :</p><pre id="r-740008" data-claire-element-id="740008"><code data-claire-semantic="java">package com.siteduzero.android.settings;

import android.os.Bundle;
import android.preference.PreferenceFragment;

import com.siteduzero.android.R;

public class MyPreferenceFragment extends PreferenceFragment {
	public static final String TAG = &quot;MyPreferenceFragment&quot;;

	@Override
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);

		addPreferencesFromResource(R.xml.preferences);
	}
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">
<span class="arrow"></span>
<span class="next">PreferenceFragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
<span class="next">Affiner ses paramètres avec les en-têtes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Affinersesparamtresaveclesen-ttes"></a><h2>Affiner ses paramètres avec les en-têtes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
<span class="arrow"></span>
<span class="next">Paramétriser son application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
<span class="next">Lire les préférences</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-affiner-ses-parametres-avec-les-en-tetes" data-claire-element-id="740035">Affiner ses paramètres avec les en-têtes</h4><p id="r-740011" data-claire-element-id="740011">Tout comme les catégories, les en-têtes ont pour objectif de rassembler des préférences et de les structurer mais à plus grande échelle. Une petite application aura rarement besoin d'utiliser le concept que je vais vous enseigner maintenant mais c'est une bonne chose à connaitre parce que vous n'aurez peut-être pas toujours des petites applications à développer. En fait, vous avez déjà vu plusieurs fois des en-têtes. L'écran des paramètres de votre smartphone utilise les en-têtes simplement pour structurer la très grande quantité de chose à pouvoir paramétrer.</p><figure id="r-affichage-des-parametres-du-smartphone" data-claire-element-id="740014"><img id="r-740012" data-claire-element-id="740012" src="medias/uploads.siteduzero.com_files_411001_412000_411234.png" alt="Affichage des paramètres du smartphone"/><figcaption>Affichage des paramètres du smartphone</figcaption></figure><h5 id="r-definir-les-en-tetes" data-claire-element-id="740030">Définir les en-têtes</h5><p id="r-740015" data-claire-element-id="740015">Je vous soupçonne de penser que définir tous ces en-têtes est quelque chose de long, compliqué et fastidieux. Je vous répondrai à cela que c'est quelque chose de rapide, simple et enfantin. Si vous avez déjà des écrans de préférence et que vous voulez rajouter des en-têtes en cours de développement, c'est tout aussi simple que de vouloir les rajouter dès le début du développement de votre application. Tout comme la définition des préférences, l'essentiel se passe dans un fichier XML qui se trouve toujours dans le dossier xml des ressources du projet et qui possède comme racine <code data-claire-semantic="xml">preference-headers</code>.</p><p id="r-740016" data-claire-element-id="740016">Après cela, il suffit de déclarer autant d'élèment <code data-claire-semantic="xml">header</code> que vous voulez d'en-tête. Celui-ci peut et doit déclarer remplir certains attributs :</p><ul id="r-740025" data-claire-element-id="740025"><li id="r-740018" data-claire-element-id="740018"><p id="r-740017" data-claire-element-id="740017"><code data-claire-semantic="xml">android:fragment</code> pour donner le chemin vers le fragment représentant l'écran de préférence.</p></li><li id="r-740020" data-claire-element-id="740020"><p id="r-740019" data-claire-element-id="740019"><code data-claire-semantic="xml">android:icon</code> pour ajouter une icone à gauche de la préférence (facultatif).</p></li><li id="r-740022" data-claire-element-id="740022"><p id="r-740021" data-claire-element-id="740021"><code data-claire-semantic="xml">android:summary</code> pour ajouter des précisions sur l'en-tête.</p></li><li id="r-740024" data-claire-element-id="740024"><p id="r-740023" data-claire-element-id="740023"><code data-claire-semantic="xml">android:title</code> pour donner un titre à l'en-tête.</p></li></ul><p id="r-740026" data-claire-element-id="740026">Un exemple simple exemple concret se trouve ci-dessous avec son résultat à l'exécution de l'application.</p><figure id="r-resultat-de-l-execution-des-en-tetes" data-claire-element-id="740029"><img id="r-740027" data-claire-element-id="740027" src="medias/uploads.siteduzero.com_files_411001_412000_411237.png" alt="Résultat de l'exécution des en-têtes"/><figcaption>Résultat de l'exécution des en-têtes</figcaption></figure><h5 id="r-attacher-a-une-activite" data-claire-element-id="740034">Attacher à une activité</h5><p id="r-740031" data-claire-element-id="740031">Les en-têtes sont attachés à des activités qui héritent de <code data-claire-semantic="java">PreferenceActivity</code> mais elle ne redéfinit pas la méthode <code data-claire-semantic="java">public void onCreate(Bundle savedInstanceState)</code> comme le ferait toutes les autres activités. A la place, nous devrons redéfinir la méthode <code data-claire-semantic="java">public void onBuildHeaders(List&lt;Header&gt; target)</code> pour y appeler la méthode suivante : <code data-claire-semantic="java">public void loadHeadersFromResource (int resid, List&lt;PreferenceActivity.Header&gt; target)</code>. Cette méthode s'attend à recevoir l'identifiant de la ressource des déclarations de vos en-têtes et la cible donné en paramètre à votre méthode.</p><p id="r-740032" data-claire-element-id="740032">En toute simplicité, nous arrivons au code suivant :</p><pre id="r-740033" data-claire-element-id="740033"><code data-claire-semantic="java">package com.siteduzero.android.settings;

import java.util.List;

import android.preference.PreferenceActivity;

import com.siteduzero.android.R;

public class SettingsActivity extends PreferenceActivity {
	@Override
	public void onBuildHeaders(List&lt;Header&gt; target) {
		loadHeadersFromResource(R.xml.header_preferences, target);
	}
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
<span class="arrow"></span>
<span class="next">Paramétriser son application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
<span class="next">Lire les préférences</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lirelesprfrences"></a><h2>Lire les préférences</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
<span class="arrow"></span>
<span class="next">Affiner ses paramètres avec les en-têtes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">
<span class="next">DialogFragment</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-lire-les-preferences" data-claire-element-id="740043">Lire les préférences</h4><p id="r-740036" data-claire-element-id="740036">Nous avons mis en place nos préférences mais si nous n'utilisons pas les valeurs que nous paramétrisons, tout cela perdrait de son intérêt. Android nous fournit un manager. Vous vous souvenez de ces managers dans le <a href="http://www.siteduzero.com/tutoriel-3-554364-creez-des-applications-pour-android.html">tutoriel de Apollidore</a> où vous devez appeler la méthode <code data-claire-semantic="java">public abstract Object getSystemService(String name)</code> pour récupérer le manager dont vous avez besoin pour faire des manipulations sur une certaine fonctionnalité ? Et bien, malheureusement pour vous, ce n'est pas la même chose cette fois-ci ! :p</p><p id="r-740037" data-claire-element-id="740037">En fait, c'est encore plus simple. Le manager est <code data-claire-semantic="java">PreferenceManager</code> et pour l'initialiser, vous aurez besoin d'appeler la méthode static <code data-claire-semantic="java">public static SharedPreferences getDefaultSharedPreferences(Context context)</code> qui renvoi un <code data-claire-semantic="java">SharedPreferences</code> (chose que vous devrez connaître). A partir de là, vous pourrez appeler des getters pour récupérer les valeurs de vos préférences à partir des clés que vous avez donné.</p><p id="r-740038" data-claire-element-id="740038">Un exemple très simple ci-dessous avec son résultat :</p><pre id="r-740039" data-claire-element-id="740039"><code data-claire-semantic="java">SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
boolean pref1 = prefs.getBoolean(&quot;pref_key_pref_1&quot;, false);
mTextViewPref1.setText(&quot;&quot; + pref1);
String pref2 = prefs.getString(&quot;pref_key_pref_2&quot;, &quot;Nothing&quot;);
mTextViewPref2.setText(&quot;&quot; + pref2);
boolean pref3 = prefs.getBoolean(&quot;pref_key_pref_3&quot;, false);
mTextViewPref3.setText(&quot;&quot; + pref3);
String pref4 = prefs.getString(&quot;pref_key_pref_4&quot;, &quot;Nothing&quot;);
mTextViewPref4.setText(&quot;&quot; + pref4);
String pref5 = prefs.getString(&quot;pref_key_pref_5&quot;, &quot;Nothing&quot;);
mTextViewPref5.setText(&quot;&quot; + pref5);
String pref6 = prefs.getString(&quot;pref_key_pref_6&quot;, &quot;Nothing&quot;);
mTextViewPref6.setText(&quot;&quot; + pref6);</code></pre><figure id="r-affichage-des-valeurs-des-parametres" data-claire-element-id="740042"><img id="r-740040" data-claire-element-id="740040" src="medias/uploads.siteduzero.com_files_411001_412000_411291.png" alt="Affichage des valeurs des paramètres"/><figcaption>Affichage des valeurs des paramètres</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
<span class="arrow"></span>
<span class="next">Affiner ses paramètres avec les en-têtes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">
<span class="next">DialogFragment</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="DialogFragment"></a><h2>DialogFragment</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
<span class="arrow"></span>
<span class="next">Lire les préférences</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
<span class="next">Créer un DIalogFragment</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-740045" data-claire-element-id="740045">Nous allons aborder la dernière notion utilisant les fragments à partir de la version 3 d'Android, les <code data-claire-semantic="java">DialogFragment</code>. Ce composant nous permettra d'afficher une boite de dialogue à l'utilisateur de manière beaucoup plus souple et plus complet que vous auriez pu le faire avec les anciens composants des versions inférieurs à la 3.</p>
</div><a name="CrerunDIalogFragment"></a><h2>Créer un DIalogFragment</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">
<span class="arrow"></span>
<span class="next">DialogFragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
<span class="next">Créer un AlertDialog</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-creer-un-dialogfragment" data-claire-element-id="740060">Créer un DIalogFragment</h4><p id="r-740046" data-claire-element-id="740046">Vous avez sans doute déjà utiliser des <code data-claire-semantic="java">AlertDialog</code> ou des <code data-claire-semantic="java">Dialog</code> (surtout si vous avez lu le <a href="http://www.siteduzero.com/tutoriel-3-554364-creez-des-applications-pour-android.html">tutoriel d'Applidore</a>). L'idée est de ré-utiliser ce type de composant mais en lui attachant des fragments. C'est une pratique qui vous permettra de concevoir des boites de dialogue infiniment plus complexe et plus puissante que vos anciennes boites de dialogue.</p><p id="r-740047" data-claire-element-id="740047"><code data-claire-semantic="java">DialogFragment</code> servira de conteneur à notre fragment pour le transformer en boite de dialogue et ainsi fournir le style et la structure de la boite. Cette classe fournit tous les contrôles nécessaires pour créer la boite et gérer son apparence. Chose que nous apprendrons à faire tout au long de ce chapitre ainsi que l'intégration de builder pour un autre type de boite. :)</p><p id="r-740048" data-claire-element-id="740048">Pour commencer, nous allons procéder comme à chaque création d'un type de fragment ; c'est-à-dire que nous allons étendre notre classe à <code data-claire-semantic="java">DialogFragment</code> et redéfinir un certains nombre de méthodes utiles à l'intégration de notre fragment dans la boite et à sa gestion. Pour ce faire, nous allons redéfinir et définir les 2 méthodes suivantes :</p><ul id="r-740053" data-claire-element-id="740053"><li id="r-740050" data-claire-element-id="740050"><p id="r-740049" data-claire-element-id="740049"><code data-claire-semantic="java">public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</code> : Pour désérialiser le fichier XML représentant notre fragment et pour donner un titre à notre boite de dialogue (ce dernier étant optionnel).</p></li><li id="r-740052" data-claire-element-id="740052"><p id="r-740051" data-claire-element-id="740051"><code data-claire-semantic="java">public static MyDialogFragment newInstance()</code> : Je reviendrais dans la seconde partie de ce tutoriel sur ce type de méthode mais sachez qu'elle nous permet d'encapsuler la création de notre fragment et d'en connaitre des potentielles données. Ne vous tracassez pas la tête avec ça maintenant, vous comprendrez bien assez tôt son utilité.</p></li></ul><p id="r-740054" data-claire-element-id="740054">Nous obtenons donc le résultat suivant :</p><pre id="r-740055" data-claire-element-id="740055"><code data-claire-semantic="java">package com.siteduzero.android.dialog;

import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.Button;

import com.siteduzero.android.R;

public class MyDialogFragment extends DialogFragment {
	public static MyDialogFragment newInstance(int title) {
		MyDialogFragment dialog = new MyDialogFragment();
		Bundle args = new Bundle();
		args.putInt(&quot;title&quot;, title);
		dialog.setArguments(args);
		return dialog;
	}

	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container,
			Bundle savedInstanceState) {
		View v = inflater.inflate(R.layout.fragment_dialog, container, false);

		Button button = (Button) v.findViewById(R.id.buttonShow);
		button.setOnClickListener(new OnClickListener() {
			public void onClick(View v) {
				((DialogActivity) getActivity())
						.showDialogType(DialogActivity.TYPE_ALERT_DIALOG);
			}
		});

		getDialog().setTitle(getArguments().getInt(&quot;title&quot;));

		return v;
	}
}</code></pre><p id="r-740056" data-claire-element-id="740056">Chez moi (vous n'aurez pas le même résultat si le fichier XML est différent), le résultat final intégré dans une FragmentActivity donnera le résultat suivant :</p><figure id="r-resultat-de-l-execution-des-boites-de-dialogue-dialogfragment" data-claire-element-id="740059"><img id="r-740057" data-claire-element-id="740057" src="medias/uploads.siteduzero.com_files_412001_413000_412821.png" alt="Résultat de l'exécution des boîtes de dialogue DialogFragment"/><figcaption>Résultat de l'exécution des boîtes de dialogue DialogFragment</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">
<span class="arrow"></span>
<span class="next">DialogFragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
<span class="next">Créer un AlertDialog</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CrerunAlertDialog"></a><h2>Créer un AlertDialog</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
<span class="arrow"></span>
<span class="next">Créer un DIalogFragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
<span class="next">Afficher une boite de dialogue</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-creer-un-alertdialog" data-claire-element-id="740071">Créer un AlertDialog</h4><p id="r-740061" data-claire-element-id="740061">Vous êtes censé savoir comment créer un <code data-claire-semantic="java">AlertDialog</code>. Je ne rentrerais donc pas dans les détails en ce qui concerne sa création mais beaucoup plus en ce qui concerne son intégration dans un fragment. En fait, c'est vraiment très semblable au <code data-claire-semantic="java">DialogFragment</code> et vous devrez avoir une petite idée de la manière de s'y prendre avec les connaissances que je viens de vous enseigner et vos connaissances précédentes sur sa simple création dans une <code data-claire-semantic="java">Activity</code>.</p><p id="r-740062" data-claire-element-id="740062">Bien entendu, ce n'est pas exactement la même chose. Nous n'allons pas devoir redéfinir la méthode <code data-claire-semantic="java">public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</code> mais <code data-claire-semantic="java">public Dialog onCreateDialog(Bundle savedInstanceState)</code>. A partir de là, il nous suffit de retourner une <code data-claire-semantic="java">AlertDialog</code> avec l'aide d'un builder.</p><p id="r-740063" data-claire-element-id="740063">La redéfinition de la méthode donnera quelque chose comme :</p><pre id="r-740064" data-claire-element-id="740064"><code data-claire-semantic="java">@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
	int title = getArguments().getInt(&quot;title&quot;);

	return new AlertDialog.Builder(getActivity())
			.setIcon(android.R.drawable.ic_dialog_alert)
			.setTitle(title)
			.setNegativeButton(R.string.alert_dialog_cancel,
					new DialogInterface.OnClickListener() {
						public void onClick(DialogInterface dialog,
								int whichButton) {
							((DialogActivity) getActivity())
									.doNegativeClick();
						}
					})
			.setPositiveButton(R.string.alert_dialog_ok,
					new DialogInterface.OnClickListener() {
						public void onClick(DialogInterface dialog,
								int whichButton) {
							((DialogActivity) getActivity())
									.doPositiveClick();
						}
					}).create();
}</code></pre><aside id="r-740066" data-claire-element-id="740066" data-claire-semantic="warning"><p id="r-740065" data-claire-element-id="740065">N'oubliez pas d'implémenter la méthode static pour créer une instance comme nous l'avons fait avec <code data-claire-semantic="java">DialogFragment</code>.</p></aside><p id="r-740067" data-claire-element-id="740067">Ainsi, nous obtenons le résultat suivant :</p><figure id="r-resultat-de-l-execution-des-boites-de-dialogue-alertdialog" data-claire-element-id="740070"><img id="r-740068" data-claire-element-id="740068" src="medias/uploads.siteduzero.com_files_412001_413000_412830.png" alt="Résultat de l'exécution des boîtes de dialogue AlertDialog"/><figcaption>Résultat de l'exécution des boîtes de dialogue AlertDialog</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
<span class="arrow"></span>
<span class="next">Créer un DIalogFragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
<span class="next">Afficher une boite de dialogue</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Afficheruneboitededialogue"></a><h2>Afficher une boite de dialogue</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
<span class="arrow"></span>
<span class="next">Créer un AlertDialog</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">
<span class="next">La barre d&#039;action des applications</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-afficher-une-boite-de-dialogue-3" data-claire-element-id="740091">Afficher une boite de dialogue</h4><p id="r-740072" data-claire-element-id="740072">Dernière petite chose avant de terminer notre chapitre, nous allons rapidement voir comment intégrer nos boites de dialogue dans une activité. Vous comprendrez que ce n'est vraiment pas compliqué puisqu'il s'agit d'un fragment comme un autre. C'est la raison pour laquelle je vais vous laisser réfléchir à la question. Si vous avez bien compris la matière que je vous ai enseigné dans les chapitres précédents, cela ne devrait pas vous prendre trop longtemps.</p><p id="r-740073" data-claire-element-id="740073">Sachez simplement que vous devez implémenter un certain nombre de méthode :</p><ul id="r-740084" data-claire-element-id="740084"><li id="r-740075" data-claire-element-id="740075"><p id="r-740074" data-claire-element-id="740074"><code data-claire-semantic="java">public void doNegativeClick()</code> : Appelé lorsqu'on clique sur le bouton négatif de l'<code data-claire-semantic="java">AlertDialog</code>.</p></li><li id="r-740077" data-claire-element-id="740077"><p id="r-740076" data-claire-element-id="740076"><code data-claire-semantic="java">public void doPositiveClick()</code> : Appelé lorsqu'on clique sur le bouton positif de <code data-claire-semantic="java">l'AlertDialog</code>.</p></li><li id="r-740079" data-claire-element-id="740079"><p id="r-740078" data-claire-element-id="740078"><code data-claire-semantic="java">public void showAlertDialog(View v)</code> : Appelé au clique de l'utilisateur sur le bouton de notre activité destiné à l'affichage de l'<code data-claire-semantic="java">AlertDialog</code>.</p></li><li id="r-740081" data-claire-element-id="740081"><p id="r-740080" data-claire-element-id="740080"><code data-claire-semantic="java">public void showDialogFragment(View v)</code> : Appelé au clique de l'utilisateur sur le bouton de notre activité destiné à l'affichage de <code data-claire-semantic="java">DialogFragment</code>.</p></li><li id="r-740083" data-claire-element-id="740083"><p id="r-740082" data-claire-element-id="740082"><code data-claire-semantic="java">protected void showDialogType(int type)</code> : Pour switcher dynamiquement entre les différentes boîtes de dialogue.</p></li></ul><p id="r-740085" data-claire-element-id="740085">Je vous laisse à vos lignes de codes. Vous trouverez ma solution et son résultat à la suite de ce chapitre.</p><h5 id="r-correction-87" data-claire-element-id="740090">Correction</h5><pre id="r-740086" data-claire-element-id="740086"><code data-claire-semantic="java">package com.siteduzero.android.dialog;

import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.view.View;

import com.siteduzero.android.R;
import com.siteduzero.android.dialog.alert.MyAlertDialog;

public class DialogActivity extends FragmentActivity {
	public static final int TYPE_DIALOG_FRAGMENT = 1;
	public static final int TYPE_ALERT_DIALOG = 2;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_dialog);
	}

	protected void showDialogType(int type) {
		FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
		Fragment prev = getSupportFragmentManager().findFragmentByTag(&quot;dialog&quot;);
		if (prev != null) {
			ft.remove(prev);
		}
		ft.addToBackStack(null);

		DialogFragment newFragment = null;
		switch (type) {
		case TYPE_DIALOG_FRAGMENT:
			newFragment = MyDialogFragment
					.newInstance(R.string.title_fragment_dialog);
			break;
		case TYPE_ALERT_DIALOG:
			newFragment = MyAlertDialog
					.newInstance(R.string.title_fragment_dialog_alert);
			break;
		}
		newFragment.show(ft, &quot;dialog&quot;);
	}

	public void showDialogFragment(View v) {
		showDialogType(TYPE_DIALOG_FRAGMENT);
	}

	public void showAlertDialog(View v) {
		showDialogType(TYPE_ALERT_DIALOG);
	}

	public void doPositiveClick() {
		// TODO Do something
	}

	public void doNegativeClick() {
		// TODO Do something
	}
}</code></pre><figure id="r-resultat-de-l-execution-de-l-activite-pour-afficher-nos-boites-de-dialogue" data-claire-element-id="740089"><img id="r-740087" data-claire-element-id="740087" src="medias/uploads.siteduzero.com_files_412001_413000_412835.png" alt="Résultat de l'exécution de l'activité pour afficher nos boîtes de dialogue"/><figcaption>Résultat de l'exécution de l'activité pour afficher nos boîtes de dialogue</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
<span class="arrow"></span>
<span class="next">Créer un AlertDialog</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">
<span class="next">La barre d&#039;action des applications</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Labarred039actiondesapplications"></a><h2>La barre d&#039;action des applications</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
<span class="arrow"></span>
<span class="next">Afficher une boite de dialogue</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
<span class="next">Intégrer un menu</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-740096" data-claire-element-id="740096">La barre d'action d'une application est accessible qu'à partir de la version 3 d'Android. Elle se caractérise par l'affichage d'un bandeau en haut de l'écran regroupant un certain nombre d'informations et pour y intégrer les menus. En fait, Google tente de diminuer les boutons physiques sur les terminaux le plus possible. Sur le marché actuel, nous pouvons presque affirmer cette généralité : les terminaux bas de prix possèdent des touches physiques parce qu'ils tournent sur Android 2.3 et inférieur et les terminaux haut de gamme tournant sur Android 3 et plus ne possèdent plus aucun bouton physique sur la face avant (ou très peu). A la place, ils sont remplacés par des boutons tactiles en bas de l'écran et le menu est directement intégré dans le haut de l'écran dans les applications. C'est un choix auquel on adhère ou non. Personnellement, je préfère cette méthode.</p>
</div><a name="Intgrerunmenu"></a><h2>Intégrer un menu</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">
<span class="arrow"></span>
<span class="next">La barre d&#039;action des applications</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
<span class="next">Possibilités avancées</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-integrer-un-menu" data-claire-element-id="740119">Intégrer un menu</h4><p id="r-740097" data-claire-element-id="740097">J'ai une bonne nouvelle pour vous, intégrer un menu dans une barre d'action est extrêmement simple. Comme vous êtes censé savoir comment créer des menus (sinon, je vous renvoie sur le <a href="http://www.siteduzero.com/tutoriel-3-603631-gestion-des-menus-de-l-application.html">tutoriel d'Apollidore sur les gestion des menus</a>), il nous faudra que quelques modifications à faire dans le fichier XML, c'est tout ! En effet, le système détectera automatiquement que vous lancez votre application sur un système avec une version 3 ou supérieur d'Android et l'intègrera par défaut. C'est plutôt pratique !</p><p id="r-740098" data-claire-element-id="740098">Voici ce que nous allons faire : Nous allons créer un menu avec 4 items qui auront un identifiant, un titre et une icone. Cependant, nous allons rajouter une notion très importante dans ces nouveaux menus, son affichage. En effet, un nouvel attribut est utilisable dans ces menus <code data-claire-semantic="xml">android:showAsAction</code>. Cet attribut peut prendre une ou plusieurs valeurs parmi cette liste :</p><ul id="r-740109" data-claire-element-id="740109"><li id="r-740100" data-claire-element-id="740100"><p id="r-740099" data-claire-element-id="740099">ifRoom : Affichera l'item dans la barre d'action uniquement s'il y a encore de la place.</p></li><li id="r-740102" data-claire-element-id="740102"><p id="r-740101" data-claire-element-id="740101">withText : Affichera le texte du menu si le téléphone se trouve en mode paysage.</p></li><li id="r-740104" data-claire-element-id="740104"><p id="r-740103" data-claire-element-id="740103">never : N'affichera jamais l'item dans la barre d'action.</p></li><li id="r-740106" data-claire-element-id="740106"><p id="r-740105" data-claire-element-id="740105">always : Affichera l'item dans la barre d'action dans tous les cas.</p></li><li id="r-740108" data-claire-element-id="740108"><p id="r-740107" data-claire-element-id="740107">collapseActionView : Nous reviendrons sur cet attribut un peu plus tard dans ce chapitre.</p></li></ul><p id="r-740110" data-claire-element-id="740110">Vous devez savoir qu'il est possible de sélectionner plusieurs des valeurs grâce au pipeline « | ». Bien entendu, ne lui demander pas l'impossible, par exemple : never|always.</p><p id="r-740111" data-claire-element-id="740111">Un exemple d'utilisation tout simple de nos 4 items se trouve à la suite :</p><pre id="r-740112" data-claire-element-id="740112"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;menu xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;

    &lt;item
        android:id=&quot;@+id/menu_search&quot;
        android:actionViewClass=&quot;android.widget.SearchView&quot;
        android:icon=&quot;@android:drawable/ic_menu_search&quot;
        android:showAsAction=&quot;always&quot;
        android:title=&quot;@string/menu_search&quot;/&gt;
    &lt;item
        android:id=&quot;@+id/menu_add&quot;
        android:icon=&quot;@android:drawable/ic_menu_add&quot;
        android:showAsAction=&quot;ifRoom|withText&quot;
        android:title=&quot;@string/menu_add&quot;/&gt;
    &lt;item
        android:id=&quot;@+id/menu_save&quot;
        android:icon=&quot;@android:drawable/ic_menu_save&quot;
        android:showAsAction=&quot;ifRoom|withText&quot;
        android:title=&quot;@string/menu_save&quot;/&gt;
    &lt;item
        android:id=&quot;@+id/menu_crop&quot;
        android:icon=&quot;@android:drawable/ic_menu_crop&quot;
        android:showAsAction=&quot;never&quot;
        android:title=&quot;@string/menu_crop&quot;/&gt;

&lt;/menu&gt;</code></pre><p id="r-740113" data-claire-element-id="740113">Nous afficherons donc dans tous les cas le menu de recherche, s'il y a de la place et avec son texte le menu d'ajout et de sauvegarde et nous n'afficherons jamais le redimensionnement dans la barre d'action mais dans un menu à part qui s'affichera à l'extrème droite de la barre.</p><p id="r-740114" data-claire-element-id="740114">Du côté Java, rien ne change ! Vous continuez à redéfinir la méthode <code data-claire-semantic="java">public boolean onCreateOptionsMenu(Menu menu)</code> pour désérialiser votre menu et <code data-claire-semantic="java">public boolean onOptionsItemSelected(MenuItem item)</code> pour réagir au clique sur l'un ou l'autre item du menu. Ceci nous donnera alors le résultat suivant :</p><figure id="r-affichage-des-items-du-menu" data-claire-element-id="740117"><img id="r-740115" data-claire-element-id="740115" src="medias/uploads.siteduzero.com_files_414001_415000_414636.png" alt="Affichage des items du menu"/><figcaption>Affichage des items du menu</figcaption></figure><p id="r-740118" data-claire-element-id="740118">Comme vous pouvez le constater, Android affiche notre item de recherche et d'ajout mais comme il n'y a plus de place pour la sauvegarde, il le place dans le sous menu accesible à l'extrème droite de la barre.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">
<span class="arrow"></span>
<span class="next">La barre d&#039;action des applications</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
<span class="next">Possibilités avancées</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Possibilitsavances"></a><h2>Possibilités avancées</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
<span class="arrow"></span>
<span class="next">Intégrer un menu</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
<span class="next">Menu contextuel</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-possibilites-avancees" data-claire-element-id="740155">Possibilités avancées</h4><p id="r-740120" data-claire-element-id="740120">La barre d'action, c'est sympa mais il est possible d'aller encore plus loin dans son utilisation. Nous ne verrons pas comment customiser cette barre. Cela prendrait un nouveau chapitre entier à ce sujet et le design n'est pas le but de ce tutoriel. Cependant, si vous êtes curieux à ce sujet, Google a mis en place un site accessible via ce <a href="http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html">lien</a> qui vous permettra de générer des styles tout faits. Il suffit alors de les intégrer à vos projets. Vous devriez avoir les compétences pour le faire tout seul.</p><h5 id="r-barre-de-recherche-1" data-claire-element-id="740135">Barre de recherche</h5><p id="r-740121" data-claire-element-id="740121">Dans un premier temps, nous allons voir comment rendre notre item, destiné à effectuer une recherche, mieux intégré à notre barre d'action (et ainsi comprendre à quoi servira la dernière valeur du nouvel attribut sur les items du menu). L'idée est la suivante : Lorsque nous cliquerons sur la loupe, un champ de recherche prendra toute la place de la barre d'action (cachant les autres items du menu au passage) et affichant le clavier pour permettre à l'utilisateur d'effectuer sa recherche dans votre application.</p><p id="r-740122" data-claire-element-id="740122">Pour ce faire, nous aurons besoin d'effectuer des changements à la fois du côté de l'XML et du côté Java. Du côté XML, nous allons rajouter un nouvel attribut <code data-claire-semantic="xml">android:actionViewClass</code>. Il nous permet de spécifier un layout ou un widget à utiliser. Dans notre cas, nous allons utiliser un widget déjà integré au système que nous ré-utilisons. Nous modifions aussi <code data-claire-semantic="xml">android:showAsAction</code> en rajoutant la valeur collapseActionView pour rendre notre vue « pliable » dans l'item du menu et ainsi la dépliée tout le long de notre barre lorsque nous cliquons dessus. Ainsi, nous obtenons :</p><pre id="r-740123" data-claire-element-id="740123"><code data-claire-semantic="xml">&lt;item
    android:id=&quot;@+id/menu_search&quot;
    android:actionViewClass=&quot;android.widget.SearchView&quot;
    android:icon=&quot;@android:drawable/ic_menu_search&quot;
    android:showAsAction=&quot;ifRoom|collapseActionView&quot;
    android:title=&quot;@string/menu_search&quot;/&gt;</code></pre><p id="r-740124" data-claire-element-id="740124">La modification du côté Java n'est pas nécessaire puisque si vous testez l'application comme ça, vous aurez l'effet escompté. Cependant, il est fort utile de connaitre un listener qui s'attache à ce type de vue <code data-claire-semantic="java">OnQueryTextListener</code>. Ce listener vous demandera d'implémenter deux méthodes :</p><ul id="r-740129" data-claire-element-id="740129"><li id="r-740126" data-claire-element-id="740126"><p id="r-740125" data-claire-element-id="740125"><code data-claire-semantic="java">public boolean onQueryTextSubmit(String query)</code> pour récupérer la chaîne de caractère que l'utilisateur aura rentré lorsqu'il aura envoyé la requête.</p></li><li id="r-740128" data-claire-element-id="740128"><p id="r-740127" data-claire-element-id="740127"><code data-claire-semantic="java">public boolean onQueryTextChange(String newText)</code> pour récupérer la chaîne de caractère en cours lorsque l'utilisateur rentre un nouveau caractère ou en supprime.</p></li></ul><p id="r-740130" data-claire-element-id="740130">Ainsi, nous devons récupérer notre item lors de la désérialisation de notre menu et lui attacher notre listener via sa méthode <code data-claire-semantic="java">public void setOnQueryTextListener (SearchView.OnQueryTextListener listener)</code>. Vous obtiendrez un résultat similaire à celui-ci :</p><pre id="r-740131" data-claire-element-id="740131"><code data-claire-semantic="java">@Override
public boolean onCreateOptionsMenu(Menu menu) {
	MenuInflater inflater = getMenuInflater();
	inflater.inflate(R.menu.menu_actionbar, menu);

	// SearchView
	MenuItem itemSearch = menu.findItem(R.id.menu_search);
	mSearchView = (SearchView) itemSearch.getActionView();
	mSearchView.setOnQueryTextListener(new OnQueryTextListener() {

		@Override
		public boolean onQueryTextSubmit(String query) {
			Toast.makeText(getApplicationContext(),
					R.string.toast_search_submit, Toast.LENGTH_SHORT)
					.show();
			return true;
		}

		@Override
		public boolean onQueryTextChange(String newText) {
			return false;
		}
	});

	return true;
}</code></pre><figure id="r-affichage-de-la-barre-de-recherche-dans-la-barre-d-action" data-claire-element-id="740134"><img id="r-740132" data-claire-element-id="740132" src="medias/uploads.siteduzero.com_files_414001_415000_414678.png" alt="Affichage de la barre de recherche dans la barre d'action"/><figcaption>Affichage de la barre de recherche dans la barre d'action</figcaption></figure><h5 id="r-partage-a-travers-le-systeme" data-claire-element-id="740143">Partage à travers le système</h5><p id="r-740136" data-claire-element-id="740136">Une autre astuce avec la barre d'action est le partage à travers le système. Vous le savez maintenant, l'une des forces d'Android est la possibilité aux applications de dialoguer un minimum entre elles. Du coup, il est normal pour les applications de vouloir partager du contenu avec toutes les applications du système susceptibles de pouvoir faire l'affaire. Google a pensé à cela en intégrant une solution toute faite qui convient parfaitement à se retrouver dans la barre d'action, le ShareActionProvider.</p><p id="r-740137" data-claire-element-id="740137">Cette fois-ci, la majeur partie se ferra du côté Java. Nous avons simplement besoin, du côté XML, de rajouter un item destiné au partage avec un attribut <code data-claire-semantic="xml">android:actionProviderClass</code> qui renseigne la valeur android.widget.ShareActionProvider. Après quoi, nous pouvons récupérer l'item dans la méthode qui désérialise notre menu pour lui dire quoi faire.</p><p id="r-740138" data-claire-element-id="740138">Ce que nous voulons est très simple. Récupérer l'item et lui demander quoi partager avec l'aide de la méthode <code data-claire-semantic="java">public void setShareIntent (Intent shareIntent)</code>. Dans l'exemple qui suit, nous avons decider de partager simplement du texte mais cela aurait pu être n'importe quoi d'autres qu'un Intent supporte (image, fichier, etc.). Nous obtenons alors la méthode suivante :</p><pre id="r-740139" data-claire-element-id="740139"><code data-claire-semantic="java">@Override
public boolean onCreateOptionsMenu(Menu menu) {
	MenuInflater inflater = getMenuInflater();
	inflater.inflate(R.menu.menu_actionbar, menu);

	// ShareActionProvider
	MenuItem itemProvider = menu.findItem(R.id.menu_share);
	mShareActionProvider = (ShareActionProvider) itemProvider.getActionProvider();

	Intent intent = new Intent(Intent.ACTION_SEND);
	intent.setType(&quot;text/plain&quot;);
	intent.putExtra(Intent.EXTRA_TEXT, &quot;Message&quot;);
	mShareActionProvider.setShareIntent(shareIntent);

	return true;
}</code></pre><figure id="r-affichage-des-fournisseurs-de-partage" data-claire-element-id="740142"><img id="r-740140" data-claire-element-id="740140" src="medias/uploads.siteduzero.com_files_414001_415000_414679.png" alt="Affichage des fournisseurs de partage"/><figcaption>Affichage des fournisseurs de partage</figcaption></figure><h5 id="r-spliter-le-menu" data-claire-element-id="740149">« Spliter » le menu</h5><p id="r-740144" data-claire-element-id="740144">Vous savez sans doute de quoi je parle, l'application de messagerie du système Android l'utilise dans son application. L'idée est de séparer le menu de la barre d'action dans une nouvelle barre situé en bas de l'écran. Cela nous permettra de mettre plus d'item visible à l'utilisateur et de dissocier la barre d'action du menu. En contre partie, nous perdons de la place sur l'écran.</p><p id="r-740145" data-claire-element-id="740145">Sa mise en place est extrêmement simple puisqu'il suffit de rajouter l'attribut et la valeur <code data-claire-semantic="xml">android:uiOptions=&quot;splitActionBarWhenNarrow&quot;</code> dans l'activité contenant le menu que vous voulez diviser dans le fichier Manifest.</p><figure id="r-affichage-de-la-division-du-menu-a-la-barre-d-action" data-claire-element-id="740148"><img id="r-740146" data-claire-element-id="740146" src="medias/uploads.siteduzero.com_files_414001_415000_414680.png" alt="Affichage de la division du menu à la barre d'action"/><figcaption>Affichage de la division du menu à la barre d'action</figcaption></figure><h5 id="r-bouton-home" data-claire-element-id="740154">Bouton home</h5><p id="r-740150" data-claire-element-id="740150">Dernière petite chose, l'icone en haut à gauche de votre écran peut également servir comme un bouton. Il est généralement utilisé pour revenir en arrière (comme un bouton back) ou à l'écran d'accueil de votre application (justement pour ne pas être redondant au bouton back) mais vous pouvez l'utiliser comme bon vous semble. Je vous conseil quand même de l'utiliser à cet usage afin que les utilisateurs Android ne soient pas débousollés lorsqu'ils utilisent votre application.</p><p id="r-740151" data-claire-element-id="740151">Pour ce faire, vous devez récupérer la barre d'action grâce à la méthode <code data-claire-semantic="java">public ActionBar getActionBar()</code> et apperler la méthode <code data-claire-semantic="java">public abstract void setDisplayHomeAsUpEnabled (boolean showHomeAsUp)</code> dessus en lui donnant la valeur <code data-claire-semantic="java">true</code>. Votre icone aura alors une petite flèche à gauche de l'icone qui vous indiquera que vous pouvez cliquer dessus (voire les captures d'écran ci-dessus).</p><pre id="r-740152" data-claire-element-id="740152"><code data-claire-semantic="java">@Override
protected void onCreate(Bundle savedInstanceState) {
	super.onCreate(savedInstanceState);

	ActionBar actionBar = getActionBar();
	actionBar.setDisplayHomeAsUpEnabled(true);
}</code></pre><p id="r-740153" data-claire-element-id="740153">Un identifiant lui est automatiquement assigné par le système que vous pourrez tester dans la méthode <code data-claire-semantic="java">public boolean onOptionsItemSelected(MenuItem item)</code> et qui es <code data-claire-semantic="java">R.id.home</code>.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
<span class="arrow"></span>
<span class="next">Intégrer un menu</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
<span class="next">Menu contextuel</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Menucontextuel"></a><h2>Menu contextuel</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
<span class="arrow"></span>
<span class="next">Possibilités avancées</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">
<span class="next">Slider à travers des écrans</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-menu-contextuel-2" data-claire-element-id="740180">Menu contextuel</h4><p id="r-740156" data-claire-element-id="740156">Vous vous rappelez des anciens menus contextuels ? Malheureusement, c'est une pratique qui peut encore être utilisée dans les applications actuelles mais qui ne sont pas du tout ergonomiques. Vous êtes obligé de presser un certain temps sur un élément avec votre doigt pour voir apparaitre votre menu. Google a réfléchi à cette problématique et a trouvé une solution plutôt élégante.</p><p id="r-740157" data-claire-element-id="740157">Nous allons profiter de la barre d'action pour afficher un menu intermédiaire qui apparaitra quand bon vous semble (j'entends par là qu'il n'est pas nécessaire de rester appuyé sur un élément pour faire apparaitre le menu). D'ailleurs, dans notre exemple, nous l'afficherons lorsque l'utilisateur cliquera sur un bouton pour bien différencier ce type de menu avec l'ancien mais sachez qu'il est toujours possible de le faire avec l'ancienne méthode. :)</p><p id="r-740158" data-claire-element-id="740158">Nous déclarons un nouveau fichier XML destiné à être notre menu intermédiaire. Nous le déclarons comme un menu normal, nous n'avons rien à faire en plus de ce côté. Tout se jouera dans la partie Java. Vous êtes maintenant censé savoir comment déclarer ce genre de choses, je vous laisse donc ce plaisir. Dans notre fichier XML d'affichage, nous déclarons un bouton avec un attribut <code data-claire-semantic="xml">android:onClick</code> qui prendra la valeur <code data-claire-semantic="xml">changeContextual</code>.</p><aside id="r-740160" data-claire-element-id="740160" data-claire-semantic="information"><p id="r-740159" data-claire-element-id="740159">Si vous ne connaissez pas cet attribut, il vous permet d'assigner une méthode de votre <code data-claire-semantic="java">Activity</code> à votre bouton que vous avez spécifié. La méthode désignée par cet attribut doit être sous la sous la forme <code data-claire-semantic="java">public void nomDeLaMethode(View view)</code>. Sinon, votre application plantera.</p></aside><p id="r-740161" data-claire-element-id="740161">Nous voulons simplement afficher le menu contextuel, nous allons donc appeler la méthode <code data-claire-semantic="java">public ActionMode startActionMode (ActionMode.Callback callback)</code> sur l'activité. Cette méthode lancera l'affichage du menu grâce au paramètre que vous lui donnez en paramètre. Ce paramètre prend une implémentation d'une interface <code data-claire-semantic="java">Callback</code> appartenant à <code data-claire-semantic="java">ActionMode</code>. Son implémentation exige 4 méthodes à redéfinir :</p><ul id="r-740170" data-claire-element-id="740170"><li id="r-740163" data-claire-element-id="740163"><p id="r-740162" data-claire-element-id="740162"><code data-claire-semantic="java">public boolean onActionItemClicked(ActionMode mode, MenuItem item)</code> pour récupérer l'item sur lequel l'utilisateur a cliqué.</p></li><li id="r-740165" data-claire-element-id="740165"><p id="r-740164" data-claire-element-id="740164"><code data-claire-semantic="java">public boolean onCreateActionMode(ActionMode mode, Menu menu)</code> pour désérialiser votre fichier XML contenant votre menu.</p></li><li id="r-740167" data-claire-element-id="740167"><p id="r-740166" data-claire-element-id="740166"><code data-claire-semantic="java">public void onDestroyActionMode(ActionMode mode)</code> appelé lorsque votre menu est détruit (lorsqu'il n'est plus affiché à l'écran).</p></li><li id="r-740169" data-claire-element-id="740169"><p id="r-740168" data-claire-element-id="740168"><code data-claire-semantic="java">public boolean onPrepareActionMode(ActionMode mode, Menu menu)</code> appelé lorsqu'on tente de rafraichir le menu avec une méthode invalidate.</p></li></ul><p id="r-740171" data-claire-element-id="740171">Pour rester simple, nous allons simplement donner une implémentation aux deux premières méthodes qui fonctionnent exactement comme les menus normaux !</p><p id="r-740172" data-claire-element-id="740172">Nous obtenons alors une <code data-claire-semantic="java">Activity</code> semble au code ci-dessous et au résultat suivant :</p><pre id="r-740173" data-claire-element-id="740173"><code data-claire-semantic="java">package com.siteduzero.android.actionbar;

import android.app.Activity;
import android.os.Bundle;
import android.view.ActionMode;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.Toast;

import com.siteduzero.android.R;

public class ActionBarContextualActivity extends Activity {

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_contextual);
	}

	public void changeContextual(View view) {
		startActionMode(new ActionMode.Callback() {

			@Override
			public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
				switch (item.getItemId()) {
				case R.id.menu_trash:
					Toast.makeText(getApplicationContext(),
							R.string.toast_trash, Toast.LENGTH_SHORT).show();
					return true;
				}
				return false;
			}

			@Override
			public boolean onCreateActionMode(ActionMode mode, Menu menu) {
				MenuInflater inflater = mode.getMenuInflater();
				inflater.inflate(R.menu.menu_contextual, menu);
				return true;
			}

			@Override
			public void onDestroyActionMode(ActionMode mode) {
			}

			@Override
			public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
				return false;
			}
		});
	}
}</code></pre><figure id="r-affichage-du-menu-contextuel" data-claire-element-id="740176"><img id="r-740174" data-claire-element-id="740174" src="medias/uploads.siteduzero.com_files_414001_415000_414723.png" alt="Affichage du menu contextuel"/><figcaption>Affichage du menu contextuel</figcaption></figure><div id="r-740178" data-claire-element-id="740178" data-claire-semantic="question"><p id="r-740177" data-claire-element-id="740177">Mais alors, cela voudrait dire que nous pouvons créer plusieurs menus contextuels pour une seule classe ?</p></div><p id="r-740179" data-claire-element-id="740179">Vous avez tout compris. Vous pourriez créer plusieurs menus contextuels en fonction de la situation. C'est l'une des forces de ce type de menu et une excellente alternative à l'ancienne manière de faire !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
<span class="arrow"></span>
<span class="next">Possibilités avancées</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">
<span class="next">Slider à travers des écrans</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Slidertraversdescrans"></a><h2>Slider à travers des écrans</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
<span class="arrow"></span>
<span class="next">Menu contextuel</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
<span class="next">Passer des informations à la création d&#039;un fragment</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-740182" data-claire-element-id="740182">Maintenant que nous savons comment utiliser les fragments, nous allons pouvoir nous amuser un peu ! Confectionner des interfaces ergonomiques et originales. Si vous vous rappelez de notre première utilisation des fragments dynamiques, nous avons simulé le slide d'un écran à l'autre lancé par un bouton. C'était pas mal mais nous allons maintenant voir le slide à travers vos écrans grâce à un swipe. Vous verrez, Android nous simplifie grandement la tâche grâce au widget <code data-claire-semantic="java">ViewPager</code>.</p><aside id="r-740184" data-claire-element-id="740184" data-claire-semantic="information"><p id="r-740183" data-claire-element-id="740183">Le swipe est une gesture. C'est l'action de passer votre doigt de gauche à droite et inversement sur l'écran de votre terminal.</p></aside>
</div><a name="Passerdesinformationslacrationd039unfragment"></a><h2>Passer des informations à la création d&#039;un fragment</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">
<span class="arrow"></span>
<span class="next">Slider à travers des écrans</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
<span class="next">Utilisation du widget ViewPager</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-passer-des-informations-a-la-creation-d-un-fragment" data-claire-element-id="740201">Passer des informations à la création d'un fragment</h4><p id="r-740185" data-claire-element-id="740185">Avant de commencer à utiliser le widget <code data-claire-semantic="java">ViewPager</code>, nous allons voir comment passer des informations à la création d'un fragment via un <code data-claire-semantic="java">Bundle</code>. C'est quelque chose de nécessaire pour ce chapitre. Même si vous êtes censé savoir comment on manipule des <code data-claire-semantic="java">Bundle</code> grâce aux <code data-claire-semantic="java">Intent</code>, son utilisation est légèrement différente avec les fragments.</p><aside id="r-740187" data-claire-element-id="740187" data-claire-semantic="warning"><p id="r-740186" data-claire-element-id="740186">Si vous ne savez plus comment confectionner des fragments, je vous renvoie au <a href="http://www.siteduzero.com/tutoriel-3-746272-fragment.html">premier chapitre de la partie 1</a> où les fragments sont abordés de manière détaillés.</p></aside><p id="r-740188" data-claire-element-id="740188">Vous savez comment confectionner des fragments et jusqu'à présent, il vous a fallu les déclarer soit dans un fichier XML d'affichage que vous désérialisez dans une classe <code data-claire-semantic="java">Fragment</code> soit créer des instances de vos fragments que vous affichez dynamiquement via l'API destiné à la gestion des fragments. Mais qu'arriverait-il si vous deviez à chaque fois passez un <code data-claire-semantic="java">Bundle</code> à la création d'un <code data-claire-semantic="java">Fragment</code>. Vous devriez répéter constamment la manipulation partout dans votre code. Est-ce qu'il n'y aurait pas moyen d'encapsuler cette pratique quelque part pour une meilleur maintenance de votre code et pouvoir le modifier de manière plus efficace (sinon, vous devriez changer à chaque endroit où vous créez vos instances. Tant que cela reste un petit projet, ça va mais cela pourrait vite grimper).</p><p id="r-740189" data-claire-element-id="740189">Qu'allons-nous faire ? Nous allons rajouter une méthode <code data-claire-semantic="java">static</code> dans notre <code data-claire-semantic="java">Fragment</code>. Cette dernière nous permettra de créer une instance de notre fragment et d'encapsuler toutes les informations que nous aurons besoin dans notre fragment. Cette méthode sera donc sous la forme du code ci-dessous pour un <code data-claire-semantic="java">Fragment</code> portant le nom <code data-claire-semantic="java">DummyFragment</code>.</p><pre id="r-740190" data-claire-element-id="740190"><code data-claire-semantic="java">public static DummyFragment newInstance(/* informations que je veux donner à mon fragment */) {
	// renvoie une instance de mon fragment
}</code></pre><aside id="r-740192" data-claire-element-id="740192" data-claire-semantic="information"><p id="r-740191" data-claire-element-id="740191">Je vous rappelle que <code data-claire-semantic="java">static</code> signifie que la méthode n'est pas directement attachée aux instances que vous créez de la classe dans laquelle la méthode est retenue. Par exemple, vous pouvez donc y créer des instances de la classe dans laquelle vous êtes.</p></aside><p id="r-740193" data-claire-element-id="740193">Maintenant, imaginons que nous voulons donner une chaîne de caractères à notre <code data-claire-semantic="java">Fragment</code> pour l'afficher dans un <code data-claire-semantic="java">TextView</code> qu'il contient. L'idée est de créer un <code data-claire-semantic="java">Bundle</code> qui va contenir une chaîne de caractères avec une clé que nous définirons pour le récupérer par la suite dans la création de l'interface du fragment ; c'est-à-dire dans sa méthode <code data-claire-semantic="java">public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</code>.</p><p id="r-740194" data-claire-element-id="740194">Dans un premier temps, nous allons remplir notre méthode <code data-claire-semantic="java">static</code> pour attacher un Bundle à notre fragment. Cela se fait très simplement avec la méthode <code data-claire-semantic="java">public void setArguments(Bundle args)</code> :</p><pre id="r-740195" data-claire-element-id="740195"><code data-claire-semantic="java">public static DummyFragment newInstance(String chaine) {
	DummyFragment fragment = new DummyFragment();
	Bundle args = new Bundle();
	args.putString(&quot;KEY_STRING&quot;, chaine);
	fragment.setArguments(args);
	return fragment;
}</code></pre><p id="r-740196" data-claire-element-id="740196">C'est aussi simple que cela. Nous créer une instance de notre <code data-claire-semantic="java">Fragment</code>, on crée un bundle dans lequel nous placons notre chaîne de caractères, nous l'attachons à notre <code data-claire-semantic="java">Fragment</code> et nous le renvoyons. Pour récupérer ce <code data-claire-semantic="java">Bundle</code>, c'est tout aussi simple. Le setter des arguments de notre fragment possède également un getter. Nous pouvons donc très simplement récupérer le <code data-claire-semantic="java">Bundle</code> grâce à la méthode <code data-claire-semantic="java">public final Bundle getArguments()</code>. Ainsi, notre méthode <code data-claire-semantic="java">public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)</code> ressemblera à :</p><pre id="r-740197" data-claire-element-id="740197"><code data-claire-semantic="java">@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
	TextView textView = new TextView(getActivity());
	textView.setGravity(Gravity.CENTER);
	Bundle args = getArguments();
	textView.setText(args.getString(&quot;KEY_STRING&quot;));
	return textView;
}</code></pre><aside id="r-740199" data-claire-element-id="740199" data-claire-semantic="information"><p id="r-740198" data-claire-element-id="740198">Vous l'avez sans doute remarqué mais je n'ai pas utilisé de fichier XML d'affichage pour mon <code data-claire-semantic="java">Fragment</code>. L'XML est une pratique que j'encourage mais dans le cadre de cet exemple, pour rester simple, j'ai préféré créer dynamiquement un <code data-claire-semantic="java">TextView</code> pour afficher notre chaîne de caractères.</p></aside><p id="r-740200" data-claire-element-id="740200">C'est tout ! Grâce à cette méthode, vous créez vos fragments grâce à la méthode <code data-claire-semantic="java">static</code> et à l'affichage de ce dernier, vous verrez la chaîne de caractères (ou n'importe quelle information que vous lui avez donné) à l'écran.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">
<span class="arrow"></span>
<span class="next">Slider à travers des écrans</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
<span class="next">Utilisation du widget ViewPager</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UtilisationduwidgetViewPager"></a><h2>Utilisation du widget ViewPager</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
<span class="arrow"></span>
<span class="next">Passer des informations à la création d&#039;un fragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
<span class="next">Ajout d&#039;un indicateur de la page</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utilisation-du-widget-viewpager" data-claire-element-id="740231">Utilisation du widget ViewPager</h4><h5 id="r-l-adaptateur-du-viewpager" data-claire-element-id="740222">L'adaptateur du ViewPager</h5><p id="r-740202" data-claire-element-id="740202">Bien, nous allons pouvoir commencer les choses sérieuses ! <code data-claire-semantic="java">ViewPager</code> est en fait un conteneur comme <code data-claire-semantic="java">ListView</code>, <code data-claire-semantic="java">GridView</code>, etc. sauf qu'il ne s'utilise pas avec le même type d'adaptateur. Le <code data-claire-semantic="java">ViewPager</code> est conçu pour fonctionner seulement avec des <code data-claire-semantic="java">Fragment</code> et rien d'autres. Ainsi, son adaptateur ne possède pas une méthode <code data-claire-semantic="java">View getView(...)</code> qui renvoie une <code data-claire-semantic="java">View</code> avec votre conteneur. C'est beaucoup plus simple que cela !</p><p id="r-740203" data-claire-element-id="740203">Notre adaptateur devra étendre <code data-claire-semantic="java">FragmentPagerAdapter</code>. Cette classe nous imposera d'implémenter 1 constructeur et 2 méthodes :</p><ul id="r-740210" data-claire-element-id="740210"><li id="r-740205" data-claire-element-id="740205"><p id="r-740204" data-claire-element-id="740204"><code data-claire-semantic="java">public ViewPagerAdapter(FragmentManager fm)</code> est le constructeur imposé puisque votre adaptateur devra renvoyer à la super classe une instance d'un <code data-claire-semantic="java">FragmentManager</code>.</p></li><li id="r-740207" data-claire-element-id="740207"><p id="r-740206" data-claire-element-id="740206"><code data-claire-semantic="java">public Fragment getItem(int pos)</code> pour récupérer une instance du fragment en cours.</p></li><li id="r-740209" data-claire-element-id="740209"><p id="r-740208" data-claire-element-id="740208"><code data-claire-semantic="java">public int getCount()</code> pour connaître le nombre de fragments que devra contenir notre <code data-claire-semantic="java">ViewPager</code>.</p></li></ul><p id="r-740211" data-claire-element-id="740211">Si vous avez bien compris le sous-chapitre précédent, vous aurez compris que nous appellerons les méthodes <code data-claire-semantic="java">static</code> de nos fragments dans la méthode <code data-claire-semantic="java">public Fragment getItem(int pos)</code>. C'est lui qui est chargé de renvoyer les instances des fragments contenus dans notre conteneur. Je vais maintenant vous laissez réfléchir à la réalisation de notre adaptateur. Je veux que :</p><ul id="r-740218" data-claire-element-id="740218"><li id="r-740213" data-claire-element-id="740213"><p id="r-740212" data-claire-element-id="740212">Vous utilisez le fragment que nous avons utilisé dans le sous-chapitre précédent;</p></li><li id="r-740215" data-claire-element-id="740215"><p id="r-740214" data-claire-element-id="740214">Vous affichez 3 fois le même fragment;</p></li><li id="r-740217" data-claire-element-id="740217"><p id="r-740216" data-claire-element-id="740216">Vous attachez 3 chaînes de caractères différentes en fonction de la position.</p></li></ul><p id="r-740219" data-claire-element-id="740219">Comme d'habitude, vous retrouverez ma correction ci-dessous.</p><h6 id="r-correction-88" data-claire-element-id="740221">Correction</h6><pre id="r-740220" data-claire-element-id="740220"><code data-claire-semantic="java">package com.siteduzero.android.viewpager;

import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;

import com.siteduzero.android.R;

public class ViewPagerAdapter extends FragmentPagerAdapter {
	public ViewPagerAdapter(FragmentManager fm) {
		super(fm);
	}

	@Override
	public Fragment getItem(int pos) {
		switch(pos) {
		case 1: return DummyFragment.newInstance(&quot;Je suis le premier écran !&quot;);
		case 2: return DummyFragment.newInstance(&quot;Je suis le second écran !&quot;);
		case 3: return DummyFragment.newInstance(&quot;Je suis le troisième écran !&quot;);
		}
		return null;
	}
	
	@Override
	public int getCount() {
		return 3;
	}
}</code></pre><h5 id="r-activite-du-viewpager" data-claire-element-id="740230">Activité du ViewPager</h5><p id="r-740223" data-claire-element-id="740223">Nous avons notre <code data-claire-semantic="java">Fragment</code>, notre adaptateur, il nous manque plus que notre activité. Pour une fois, notre fichier XML d'affichage aura une petite particularité. Nous allons déclarer simplement un <code data-claire-semantic="xml">ViewPager</code> à sa racine mais pour des soucis de compatibilité, notre conteneur est également redéfini dans le projet v4 que nous utilisons depuis le début de ce tutoriel. Pour ce faire, le nom de l'élement sera accessible par le chemin <code data-claire-semantic="xml">android.support.v4.view</code> et nous donnera donc la déclaration suivante :</p><pre id="r-740224" data-claire-element-id="740224"><code data-claire-semantic="xml">&lt;android.support.v4.view.ViewPager xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:tools=&quot;http://schemas.android.com/tools&quot;
    android:id=&quot;@+id/viewPager&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot; /&gt;</code></pre><p id="r-740225" data-claire-element-id="740225">Du côté de notre <code data-claire-semantic="java">Activity</code>, c'est exactement pareil qu'avec les autres conteneurs. A la différence que nous n'étendrons pas <code data-claire-semantic="java">Activity</code> mais <code data-claire-semantic="java">FragmentActivity</code>. Cela nous donnera donc le code et le résultat suivant :</p><pre id="r-740226" data-claire-element-id="740226"><code data-claire-semantic="java">package com.siteduzero.android.viewpager;

import android.app.FragmentTransaction;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;

import com.siteduzero.android.R;

public class ViewPagerActivity extends FragmentActivity {
	private ViewPagerAdapter mSectionsPagerAdapter;
	private ViewPager mViewPager;

	@Override
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_viewpager);
		// Set up the adapter.
		mSectionsPagerAdapter = new ViewPagerAdapter(getSupportFragmentManager());

		// Set up the ViewPager with the sections adapter.
		mViewPager = (ViewPager) findViewById(R.id.viewPager);
		mViewPager.setAdapter(mSectionsPagerAdapter);
	}
}</code></pre><figure id="r-affichage-du-premier-ecran-de-notre-viewpager" data-claire-element-id="740229"><img id="r-740227" data-claire-element-id="740227" src="medias/uploads.siteduzero.com_files_415001_416000_415428.png" alt="Affichage du premier écran de notre ViewPager"/><figcaption>Affichage du premier écran de notre ViewPager</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
<span class="arrow"></span>
<span class="next">Passer des informations à la création d&#039;un fragment</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
<span class="next">Ajout d&#039;un indicateur de la page</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Ajoutd039unindicateurdelapage"></a><h2>Ajout d&#039;un indicateur de la page</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
<span class="arrow"></span>
<span class="next">Utilisation du widget ViewPager</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">
<span class="next">Notifier l&#039;utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-ajout-d-un-indicateur-de-la-page" data-claire-element-id="740296">Ajout d'un indicateur de la page</h4><p id="r-740232" data-claire-element-id="740232">Nous savons maintenant comment mettre en place un <code data-claire-semantic="java">ViewPager</code> mais il arrive que nous voulons savoir à quelle page nous nous trouvons. Pour cela, Android a prévu une solution très élégante integré directement dans la barre d'action de votre application. Pour ce faire, nous ne devrons pas toucher du tout à nos fragment, à notre adaptateur ni à notre fichier XML d'affichage. Tout se passe uniquement dans l'activité qui désérialise votre <code data-claire-semantic="java">ViewPager</code>.</p><p id="r-740233" data-claire-element-id="740233">L'idée est la suivante :</p><ul id="r-740240" data-claire-element-id="740240"><li id="r-740235" data-claire-element-id="740235"><p id="r-740234" data-claire-element-id="740234">Nous allons indiquer à notre barre d'action qu'il navigera via des « Tabs ».</p></li><li id="r-740237" data-claire-element-id="740237"><p id="r-740236" data-claire-element-id="740236">A chaque changement de page, il faut indiquer à notre indicateur de changer le focus.</p></li><li id="r-740239" data-claire-element-id="740239"><p id="r-740238" data-claire-element-id="740238">Lorsqu'on sélectionne une tab, nous devons changer la page du <code data-claire-semantic="java">ViewPager</code>.</p></li></ul><p id="r-740241" data-claire-element-id="740241">Voici comment procéder :</p><h5 id="r-navigation-en-tab" data-claire-element-id="740252">Navigation en tab</h5><p id="r-740242" data-claire-element-id="740242">Pour indique que nous comptons utiliser les tabs de la barre d'action, nous devons récupérer notre barre d'action et appeler dessus la méthode <code data-claire-semantic="java">public abstract void setNavigationMode(int mode)</code>. Cette méthode prend en paramètre un mode qui se retrouve comme constante dans la classe <code data-claire-semantic="java">ActionBar</code> :</p><ul id="r-740249" data-claire-element-id="740249"><li id="r-740244" data-claire-element-id="740244"><p id="r-740243" data-claire-element-id="740243">NAVIGATION_MODE_STANDARD : Valeur par défaut de votre barre d'action. Consiste à afficher votre logo ou icone et le texte avec un sous titre optionnel dans la barre d'action.</p></li><li id="r-740246" data-claire-element-id="740246"><p id="r-740245" data-claire-element-id="740245">NAVIGATION_MODE_LIST : Change le titre présent dans la barre d'action en une liste déroulante que vous pouvez dérouler lorsque vous cliquez dessus.</p></li><li id="r-740248" data-claire-element-id="740248"><p id="r-740247" data-claire-element-id="740247">NAVIGATION_MODE_TABS : Vous permettra d'utiliser des tabs dans votre barre d'action.</p></li></ul><p id="r-740250" data-claire-element-id="740250">Ainsi, dans notre méthode <code data-claire-semantic="java">public void onCreate(Bundle savedInstanceState)</code> de notre <code data-claire-semantic="java">Activity</code>, nous faisons la manipulation suivante :</p><pre id="r-740251" data-claire-element-id="740251"><code data-claire-semantic="java">@Override
public void onCreate(Bundle savedInstanceState) {
	super.onCreate(savedInstanceState);
	// Set up others things

	// Set up the action bar.
	final ActionBar actionBar = getActionBar();
	actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

	// Set up others things
}</code></pre><h5 id="r-modifier-l-indicateur" data-claire-element-id="740265">Modifier l'indicateur</h5><p id="r-740253" data-claire-element-id="740253">Pour modifier l'indicateur en fonction de la page courante de l'utilisateur sur le <code data-claire-semantic="java">ViewPager</code>, nous allons devoir attacher un listener à notre conteneur via la méthode <code data-claire-semantic="java">public void setOnPageChangeListener(ViewPager.OnPageChangeListener listener)</code>. Le lisener <code data-claire-semantic="java">OnPageChangeListener</code> impose d'implémenter 3 méthodes :</p><ul id="r-740260" data-claire-element-id="740260"><li id="r-740255" data-claire-element-id="740255"><p id="r-740254" data-claire-element-id="740254"><code data-claire-semantic="java">public abstract void onPageScrollStateChanged(int state)</code>: Appelé lorsque l'état du défilement change.</p></li><li id="r-740257" data-claire-element-id="740257"><p id="r-740256" data-claire-element-id="740256"><code data-claire-semantic="java">public abstract void onPageScrolled(int position, float positionOffset, int positionOffsetPixels)</code> : Appelé lorsque la page courante est en train d'être modifié.</p></li><li id="r-740259" data-claire-element-id="740259"><p id="r-740258" data-claire-element-id="740258"><code data-claire-semantic="java">public abstract void onPageSelected(int position)</code> : Appelé lorsqu'une nouvelle page est sélectionnée.</p></li></ul><p id="r-740261" data-claire-element-id="740261">La dernière méthode est celle qui nous intéresse puisqu'elle nous indique la position dans laquelle nous nous trouvons dans le conteneur. Ainsi, nous pouvons appeler la méthode <code data-claire-semantic="java">public abstract void setSelectedNavigationItem(int position)</code> sur la barre d'action et obtenir le résultat suivant :</p><pre id="r-740262" data-claire-element-id="740262"><code data-claire-semantic="java">@Override
public void onCreate(Bundle savedInstanceState) {
	super.onCreate(savedInstanceState);
	setContentView(R.layout.activity_viewpager);
	// Set up others things

	// Set up the gesture to swipe between tab.
	mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
		@Override
		public void onPageSelected(int position) {
			actionBar.setSelectedNavigationItem(position);
		}
	});

	// Set up others things
}</code></pre><aside id="r-740264" data-claire-element-id="740264" data-claire-semantic="information"><p id="r-740263" data-claire-element-id="740263">Vous remarquez sans doute que je n'implémente pas les 3 méthodes. C'est simplement grâce à <code data-claire-semantic="java">ViewPager.SimpleOnPageChangeListener</code> qui est un listener alternatif qui me permet de redéfinir uniquement les méthodes que je veux redéfinir. C'est bien pratique mais il est nécessaire d'avoir une petite idée des méthodes accessibles.</p></aside><h5 id="r-modifier-la-page" data-claire-element-id="740295">Modifier la page</h5><p id="r-740266" data-claire-element-id="740266">Pour finir, nous voulons faire l'inverse, nous voulons modifier la page courante du conteneur lorsque nous cliquons sur l'un des tabs de notre activité. Pour ce faire, nous devons faire plusieurs choses : A la déclaration de nos tabs, nous allons attacher à chaque tab le même listener qui va s'occuper de changer la page courante de notre <code data-claire-semantic="java">ViewPager</code>. Pour ce faire, nous allons implémenter au niveau de l'activité, la classe <code data-claire-semantic="java">ActionBar.TabListener</code>. Elle nous oblige alors à implémenter 3 méthodes :</p><ul id="r-740273" data-claire-element-id="740273"><li id="r-740268" data-claire-element-id="740268"><p id="r-740267" data-claire-element-id="740267"><code data-claire-semantic="java">public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)</code> : Appelé lorsqu'un tab n'est plus sélectionné.</p></li><li id="r-740270" data-claire-element-id="740270"><p id="r-740269" data-claire-element-id="740269"><code data-claire-semantic="java">public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)</code> : Appelé lorsqu'un tab est sélectionné.</p></li><li id="r-740272" data-claire-element-id="740272"><p id="r-740271" data-claire-element-id="740271"><code data-claire-semantic="java">public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction)</code> : Appelé lorsqu'un tab est resélectionné.</p></li></ul><p id="r-740274" data-claire-element-id="740274">On implémentera donc la seconde méthode de la manière suivante :</p><pre id="r-740275" data-claire-element-id="740275"><code data-claire-semantic="java">@Override
public void onTabSelected(ActionBar.Tab tab,
		FragmentTransaction fragmentTransaction) {
	mViewPager.setCurrentItem(tab.getPosition());
}</code></pre><p id="r-740276" data-claire-element-id="740276">Nous pouvons maintenant créer nos tabs grâce à trois méthodes que nous appellerons sur une instance de notre barre d'action :</p><ul id="r-740283" data-claire-element-id="740283"><li id="r-740278" data-claire-element-id="740278"><p id="r-740277" data-claire-element-id="740277"><code data-claire-semantic="java">public abstract void addTab(ActionBar.Tab tab) : Méthode pour ajouter un tab à l'activité.</code></p></li><li id="r-740280" data-claire-element-id="740280"><p id="r-740279" data-claire-element-id="740279"><code data-claire-semantic="java">public abstract ActionBar.Tab newTab()</code> : Méthode pour créer un tab.</p></li><li id="r-740282" data-claire-element-id="740282"><p id="r-740281" data-claire-element-id="740281"><code data-claire-semantic="java">public abstract ActionBar.Tab setTabListener (ActionBar.TabListener listener)</code> : Méthode pour attacher un listener à notre tab.</p></li></ul><p id="r-740284" data-claire-element-id="740284">Nous utiliserons donc ces méthodes de la manière suivante :</p><pre id="r-740285" data-claire-element-id="740285"><code data-claire-semantic="java">@Override
public void onCreate(Bundle savedInstanceState) {
	super.onCreate(savedInstanceState);
	setContentView(R.layout.activity_viewpager);
	// Set up other things
	
	// For each of the sections in the app, add a tab to the action bar.
	for (int i = 0; i &lt; mSectionsPagerAdapter.getCount(); i++) {
		actionBar.addTab(actionBar.newTab().setText(mSectionsPagerAdapter.getPageTitle(i)).setTabListener(this));
	}
}</code></pre><aside id="r-740287" data-claire-element-id="740287" data-claire-semantic="information"><p id="r-740286" data-claire-element-id="740286">Vous avez sans doute remarqué la méthode <code data-claire-semantic="java">public CharSequence getPageTitle(int position)</code> appelé sur notre adaptateur. Cette méthode est en fait une méthode optionnel à implémenter qui nous permettra de contenir l' « intelligence » pour le choix du titre de nos pages. Vous n'êtes pas obligé de recourir à cette méthode, c'est juste un plus que je vous offre.</p></aside><p id="r-740288" data-claire-element-id="740288">Ceci nous donnera alors le résultat suivant en mode portrait et paysage :</p><figure id="r-affichage-du-viewpager-avec-une-barre-d-indicateur-en-portrait" data-claire-element-id="740291"><img id="r-740289" data-claire-element-id="740289" src="medias/uploads.siteduzero.com_files_415001_416000_415434.png" alt="Affichage du ViewPager avec une barre d'indicateur en portrait"/><figcaption>Affichage du ViewPager avec une barre d'indicateur en portrait</figcaption></figure><figure id="r-affichage-du-viewpager-avec-une-barre-d-indicateur-en-paysage" data-claire-element-id="740294"><img id="r-740292" data-claire-element-id="740292" src="medias/uploads.siteduzero.com_files_415001_416000_415435.png" alt="Affichage du ViewPager avec une barre d'indicateur en paysage"/><figcaption>Affichage du ViewPager avec une barre d'indicateur en paysage</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
<span class="arrow"></span>
<span class="next">Utilisation du widget ViewPager</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">
<span class="next">Notifier l&#039;utilisateur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Notifierl039utilisateur"></a><h2>Notifier l&#039;utilisateur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
<span class="arrow"></span>
<span class="next">Ajout d&#039;un indicateur de la page</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
<span class="next">Basique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-740298" data-claire-element-id="740298">Les notifications, cela ne devrait pas être un nouveau concept. Vous en avez déjà développé et cela vous à certainement bien servi dans vos applications. Cependant, la construction des notifications a changé depuis Android 3 et de nouvelles notifications sont apparus avec Android 4.1. Ce chapitre est donc destiné uniquement à vous enseignez comment construire ces nouvelles notifications sans parler de services et autres endroits où vous êtes censé lancer vos notifications. Ces choses ont été abordées dans le <a href="http://www.siteduzero.com/tutoriel-3-735204-les-services.html">tutoriel de Apollidore</a>.</p>
</div><a name="Basique"></a><h2>Basique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">
<span class="arrow"></span>
<span class="next">Notifier l&#039;utilisateur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
<span class="next">Les différents styles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-basique" data-claire-element-id="740322">Basique</h4><p id="r-740299" data-claire-element-id="740299">La création de notifications se fait maintenant par l'intermédiaire d'un service système, chose que vous devriez bien connaître puisqu'une grande partie des services du système sont gérés de cette manière. Il vous faudra donc en récupérer une instance grâce à l'instruction suivante :</p><pre id="r-740300" data-claire-element-id="740300"><code data-claire-semantic="java">mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);</code></pre><p id="r-740301" data-claire-element-id="740301">Maintenant que vous savez cela, nous pouvons commencer l'apprentissage de notre première notification basique. Ce type de notification est la seule pouvant être lancée sur les terminaux Android 3 et plus. Après cela, tous les autres types plus complexes seront apparus avec la version 4.1 d'Android. Cependant, grâce au projet de compatibilité v4 que nous utilisons constamment dans ce tutoriel, ce procédé est accessible aux versions plus anciennes que la version 3. Par contre, les nouveaux concepts de la version 4.1 seront ignorés si vous construisez ces types de notifications ; c'est-à-dire que vous pouvez construire des notifications complexes qui s'afficheront correctement sur la version 4.1 et supérieur mais qui paraitront comme de simples notifications sur les autres versions. C'est un bon compromis pour rester compatible avec les anciennes versions mais il faut garder cet aspect à l'esprit.</p><p id="r-740302" data-claire-element-id="740302">Dans un premier temps, nous aurons besoin d'un <code data-claire-semantic="java">Builder</code> spécifique aux notifications. Il est accessible par la classe <code data-claire-semantic="java">Notification</code> et s'initialise avec son constructeur en lui passant un contexte en paramètre :</p><pre id="r-740303" data-claire-element-id="740303"><code data-claire-semantic="java">Builder builder = new NotificationCompat.Builder(this);</code></pre><p id="r-740304" data-claire-element-id="740304">A partir de cette instance, nous allons construire et récupérer une instance de la classe <code data-claire-semantic="java">Notification</code>. Pour la construire, nous avons accès à une petite série de méthodes :</p><ul id="r-740313" data-claire-element-id="740313"><li id="r-740306" data-claire-element-id="740306"><p id="r-740305" data-claire-element-id="740305"><code data-claire-semantic="java">public NotificationCompat.Builder setContentTitle(CharSequence title)</code> : Donne un titre à votre notification.</p></li><li id="r-740308" data-claire-element-id="740308"><p id="r-740307" data-claire-element-id="740307"><code data-claire-semantic="java">public NotificationCompat.Builder setContentText(CharSequence text)</code> : Donne un texte à votre notification.</p></li><li id="r-740310" data-claire-element-id="740310"><p id="r-740309" data-claire-element-id="740309"><code data-claire-semantic="java">public NotificationCompat.Builder setSmallIcon(int icon)</code> : Donne une icône à votre notification.</p></li><li id="r-740312" data-claire-element-id="740312"><p id="r-740311" data-claire-element-id="740311"><code data-claire-semantic="java">public NotificationCompat.Builder setWhen(long when)</code> : Donne un timestamp pour l'affichage de votre notification.</p></li></ul><aside id="r-740315" data-claire-element-id="740315" data-claire-semantic="information"><p id="r-740314" data-claire-element-id="740314">Ce n'est pas toutes les méthodes possibles disponibles à partir d'Android 3, elles sont trop nombreuses et ce tutoriel n'est pas destiné à devenir une documentation. Si vous voulez en savoir plus, je vous renvoie sur la <a href="http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html">documentation Android</a>.</p></aside><p id="r-740316" data-claire-element-id="740316">Après quoi, nous initialiserons les flags comme vous le faisiez avec les précédentes notifications et nous la lançons grâce à la méthode <code data-claire-semantic="java">public void notify(int id, Notification notification)</code> sur notre service système. Ce dernier prenant en paramètre l'identifiant de la notification et l'object comportant votre notification.</p><p id="r-740317" data-claire-element-id="740317">Nous obtenons donc le code source et le résultat suivant :</p><pre id="r-740318" data-claire-element-id="740318"><code data-claire-semantic="java">Builder builder = new NotificationCompat.Builder(this);
Notification notification = builder
		.setContentTitle(getResources().getText(R.string.basic_title))
		.setContentText(getResources().getText(R.string.basic_text))
		.setSmallIcon(R.drawable.ic_launcher)
		.setWhen(System.currentTimeMillis()).build();
notification.flags |= Notification.FLAG_AUTO_CANCEL;
mNotificationManager.notify(0, notification);</code></pre><figure id="r-execution-de-la-notification-basique" data-claire-element-id="740321"><img id="r-740319" data-claire-element-id="740319" src="medias/uploads.siteduzero.com_files_415001_416000_415639.png" alt="Exécution de la notification basique"/><figcaption>Exécution de la notification basique</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">
<span class="arrow"></span>
<span class="next">Notifier l&#039;utilisateur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
<span class="next">Les différents styles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesdiffrentsstyles"></a><h2>Les différents styles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
<span class="arrow"></span>
<span class="next">Basique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
<span class="next">Ajouter des boutons d&#039;action</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-differents-styles" data-claire-element-id="740366">Les différents styles</h4><p id="r-740323" data-claire-element-id="740323">Les nouvelles notifications sont vues comme des nouveaux styles. Au nombre de 3, vous aurez la possibilité de :</p><ul id="r-740330" data-claire-element-id="740330"><li id="r-740325" data-claire-element-id="740325"><p id="r-740324" data-claire-element-id="740324">Afficher un grand texte dans votre notification.</p></li><li id="r-740327" data-claire-element-id="740327"><p id="r-740326" data-claire-element-id="740326">Afficher une grande image dans votre notification.</p></li><li id="r-740329" data-claire-element-id="740329"><p id="r-740328" data-claire-element-id="740328">Afficher une liste de chaînes de caractères dans votre notification.</p></li></ul><h5 id="r-grand-texte" data-claire-element-id="740350">Grand texte</h5><p id="r-740331" data-claire-element-id="740331">Abordons les nouvelles notifications avec un grand texte. Il faut savoir que vous êtes limité en caractères si vous utilisez la méthode <code data-claire-semantic="java">public NotificationCompat.Builder setContentText(CharSequence text)</code>. Elle s'affichera toujours sur une seule ligne uniquement. Ce n'est donc pas du tout optimisé si, pour une raison X ou Y, vous désirez écrire plus. Cette nouvelle notification règle le problème très facilement et par l'intermédiaire d'une nouvelle classe, <code data-claire-semantic="java">NotificationCompat.BigTextStyle</code>, que vous devrez initialiser en passant un <code data-claire-semantic="java">NotificationCompat.Builder</code> en paramètre.</p><p id="r-740332" data-claire-element-id="740332">Vous construisez donc votre builder de la même manière que la notification basique, en omettant la méthode <code data-claire-semantic="java">public NotificationCompat.Builder setContentText(CharSequence text)</code> naturellement, et vous récupérez un objet <code data-claire-semantic="java">NotificationCompat.BigTextStyle</code> en lui passant ce builder en paramètre de son constructeur.</p><p id="r-740333" data-claire-element-id="740333">A partir de cet objet, vous pouvez appelez 3 méthodes différentes :</p><ul id="r-740340" data-claire-element-id="740340"><li id="r-740335" data-claire-element-id="740335"><p id="r-740334" data-claire-element-id="740334"><code data-claire-semantic="java">public NotificationCompat.BigTextStyle bigText(CharSequence cs)</code> : Afficher un grand texte pour votre notification.</p></li><li id="r-740337" data-claire-element-id="740337"><p id="r-740336" data-claire-element-id="740336"><code data-claire-semantic="java">public NotificationCompat.BigTextStyle setBigContentTitle(CharSequence title)</code> : Afficher un grand titre pour votre notification.</p></li><li id="r-740339" data-claire-element-id="740339"><p id="r-740338" data-claire-element-id="740338"><code data-claire-semantic="java">public NotificationCompat.BigTextStyle setSummaryText(CharSequence cs)</code> : Afficher un petit texte à la fin de votre notification destiné à la résumé.</p></li></ul><aside id="r-740342" data-claire-element-id="740342" data-claire-semantic="information"><p id="r-740341" data-claire-element-id="740341">Sachez que dans les 3 styles, les deux dernières méthodes seront toujours disponibles.</p></aside><p id="r-740343" data-claire-element-id="740343">Une fois terminé, vous appelez la méthode <code data-claire-semantic="java">public Notification build ()</code> qui vous construira la notification que vous pourrez lancer. Ainsi, nous obtenons le code source et le résultat suivant en utilisant simplement la première des 3 méthodes disponibles pour <code data-claire-semantic="java">NotificationCompat.BigTextStyle</code> :</p><pre id="r-740344" data-claire-element-id="740344"><code data-claire-semantic="java">Builder builder = new NotificationCompat.Builder(this);
builder.setContentTitle(getResources().getText(R.string.big_text_title))
		.setSmallIcon(R.drawable.ic_launcher);
BigTextStyle bigTextStyle = new NotificationCompat.BigTextStyle(builder);
bigTextStyle.bigText(getResources().getText(R.string.big_text));
Notification notification = bigTextStyle.build();
notification.flags |= Notification.FLAG_AUTO_CANCEL;
mNotificationManager.notify(0, notification);</code></pre><figure id="r-execution-de-la-notification-affichant-un-grand-texte" data-claire-element-id="740347"><img id="r-740345" data-claire-element-id="740345" src="medias/uploads.siteduzero.com_files_415001_416000_415642.png" alt="Exécution de la notification affichant un grand texte"/><figcaption>Exécution de la notification affichant un grand texte</figcaption></figure><aside id="r-740349" data-claire-element-id="740349" data-claire-semantic="information"><p id="r-740348" data-claire-element-id="740348">Remarquez que j'ai utilisé le même indice pour cette notification et celle de la sous-partie précédente. Cela permettra à Android de récupérer une notification (si elle est construite) plutôt que d'en créer une nouvelle. C'est une bonne pratique lorsque vous concevez des applications Android. Tentez de la respecter le plus possible.</p></aside><h5 id="r-grande-image" data-claire-element-id="740358">Grande image</h5><p id="r-740351" data-claire-element-id="740351">La grande image est très similaire à la notification avec un grand texte, c'est pourquoi je vais vous laisser réfléchir à la façon de faire pour lancer ce type de notifications. Sachez simplement que vous allez devoir utiliser la classe <code data-claire-semantic="java"><a href="http://developer.android.com/reference/android/support/v4/app/NotificationCompat.BigPictureStyle.html">NotificationCompat.BigPictureStyle</a></code>. Vous devriez avoir un résultat similaire au mien (sachant que je vous demande pas de trouver l'image exacte que j'utilise ^^ ).</p><figure id="r-execution-de-la-notification-affichant-une-grande-image" data-claire-element-id="740354"><img id="r-740352" data-claire-element-id="740352" src="medias/uploads.siteduzero.com_files_415001_416000_415645.png" alt="Exécution de la notification affichant une grande image"/><figcaption>Exécution de la notification affichant une grande image</figcaption></figure><h6 id="r-correction-89" data-claire-element-id="740357">Correction</h6><p id="r-740355" data-claire-element-id="740355">Sans surprise, je pense que vous êtes arrivé aisément au même résultat que moi :</p><pre id="r-740356" data-claire-element-id="740356"><code data-claire-semantic="java">Builder builder = new NotificationCompat.Builder(this);
builder.setContentTitle(getResources().getText(R.string.big_pic_title))
		.setSmallIcon(R.drawable.ic_launcher);
BigPictureStyle bigPic = new NotificationCompat.BigPictureStyle(builder);
Notification notification = bigPic.bigPicture(
		BitmapFactory.decodeResource(getResources(),
				R.drawable.notif_big_pic)).build();
notification.flags |= Notification.FLAG_AUTO_CANCEL;
mNotificationManager.notify(0, notification);</code></pre><h5 id="r-liste-de-chaines-de-caracteres" data-claire-element-id="740365">Liste de chaînes de caractères</h5><p id="r-740359" data-claire-element-id="740359">Continuons sur notre lancée puisque le dernier style est aussi très similaire aux deux autres. Nous allons confectionner une notification qui va afficher deux lignes et un message en fin de notification qui va récapituler le nombre de lignes dans la notification. Sachez simplement que vous allez devoir utiliser la classe <code data-claire-semantic="java"><a href="http://developer.android.com/reference/android/support/v4/app/NotificationCompat.InboxStyle.html">NotificationCompat.InboxStyle</a></code>. Nous aurons donc le résultat suivant :</p><figure id="r-execution-de-la-notification-affichant-une-liste" data-claire-element-id="740362"><img id="r-740360" data-claire-element-id="740360" src="medias/uploads.siteduzero.com_files_415001_416000_415650.png" alt="Exécution de la notification affichant une liste"/><figcaption>Exécution de la notification affichant une liste</figcaption></figure><h6 id="r-correction-216" data-claire-element-id="740364">Correction</h6><pre id="r-740363" data-claire-element-id="740363"><code data-claire-semantic="java">Builder builder = new NotificationCompat.Builder(this);
builder.setContentTitle(getResources().getText(R.string.inbox_title))
		.setSmallIcon(R.drawable.ic_launcher);
InboxStyle inbox = new NotificationCompat.InboxStyle(builder);
Notification notification = inbox.addLine(&quot;Line 1&quot;).addLine(&quot;Line 2&quot;)
		.setSummaryText(&quot;You have 2 messages&quot;).build();
notification.flags |= Notification.FLAG_AUTO_CANCEL;
mNotificationManager.notify(0, notification);</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
<span class="arrow"></span>
<span class="next">Basique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
<span class="next">Ajouter des boutons d&#039;action</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Ajouterdesboutonsd039action"></a><h2>Ajouter des boutons d&#039;action</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
<span class="arrow"></span>
<span class="next">Les différents styles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">
<span class="next">Le partage par NFC</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-ajouter-des-boutons-d-action" data-claire-element-id="740384">Ajouter des boutons d'action</h4><p id="r-740367" data-claire-element-id="740367">Une chose qui n'est pas integrée dans les exemples précédents est la possibilité de rajouter des boutons d'action à vos notifications. C'est-à-dire qu'il est possible d'ajouter des boutons sous votre notification qui vous permettra de les rendre encore plus complètes. Actuellement, le seul bouton que vous pouvez contrôler est la notification elle-même, lorsque l'utilisateur clique dessus. Même si c'est une pratique maintenant bien integré chez les utilisateurs, ce n'est pas le plus ergonomique.</p><p id="r-740368" data-claire-element-id="740368">Imaginez que vous recevez un e-mail. Vous pourriez donner la possibilité à l'utilisateur de le lire ou de l'archiver directement. Avec les anciennes notifications, cela n'aurait pas été possible. Dorénavant, il existe la méthode <code data-claire-semantic="java">public NotificationCompat.Builder addAction(int icon, CharSequence title, PendingIntent intent)</code> que vous appelez sur votre <code data-claire-semantic="java">NotificationCompat.Builder</code>. Les paramètres correspondent :</p><ul id="r-740375" data-claire-element-id="740375"><li id="r-740370" data-claire-element-id="740370"><p id="r-740369" data-claire-element-id="740369"><code data-claire-semantic="java">icon</code> est l'icône qui s'affichera à gauche de votre bouton.</p></li><li id="r-740372" data-claire-element-id="740372"><p id="r-740371" data-claire-element-id="740371"><code data-claire-semantic="java">title</code> est le texte qui s'affichera à droite de votre bouton.</p></li><li id="r-740374" data-claire-element-id="740374"><p id="r-740373" data-claire-element-id="740373"><code data-claire-semantic="java">intent</code> est l'intent qui sera lancé lorsque vous cliquerez sur le bouton, c'est bien entendu un <code data-claire-semantic="java">PendingIntent</code>.</p></li></ul><aside id="r-740377" data-claire-element-id="740377" data-claire-semantic="information"><p id="r-740376" data-claire-element-id="740376">Vous êtes censé savoir comment créer des <code data-claire-semantic="java">PendingIntent</code>, je passerai donc par l'intermédiaire d'une méthode <code data-claire-semantic="java">private PendingIntent getPendingIntent()</code> qui s'occupera de lancer un intent sur l'activité courante dans laquelle je me trouve. Cependant, vous pourrez retrouver son implémentation sur le <a href="https://github.com/AndroWiiid/SdZAndroid">projet GitHub</a> du tutoriel.</p></aside><p id="r-740378" data-claire-element-id="740378">Si nous devons compléter le builder du style de la grande image de notre exemple précedent, nous aurons quelque chose semblable à ceci en rajoutant deux boutons d'action :</p><pre id="r-740379" data-claire-element-id="740379"><code data-claire-semantic="java">builder.setContentTitle(getResources().getText(R.string.big_pic_title))
	.setSmallIcon(R.drawable.ic_launcher)
	.addAction(android.R.drawable.ic_menu_camera,
			getResources().getText(R.string.notification_action_2),
			getPendingIntent())
	.addAction(android.R.drawable.ic_menu_send,
			getResources().getText(R.string.notification_action_1),
			getPendingIntent()).setWhen(System.currentTimeMillis());</code></pre><p id="r-740380" data-claire-element-id="740380">Cela nous donnera le <strong>beau</strong> résultat suivant :</p><figure id="r-execution-de-la-notification-affichant-une-grande-image-et-deux-boutons" data-claire-element-id="740383"><img id="r-740381" data-claire-element-id="740381" src="medias/uploads.siteduzero.com_files_415001_416000_415667.png" alt="Exécution de la notification affichant une grande image et deux boutons"/><figcaption>Exécution de la notification affichant une grande image et deux boutons</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
<span class="arrow"></span>
<span class="next">Les différents styles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">
<span class="next">Le partage par NFC</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LepartageparNFC"></a><h2>Le partage par NFC</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
<span class="arrow"></span>
<span class="next">Ajouter des boutons d&#039;action</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
<span class="next">Les différents tags existants</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-740386" data-claire-element-id="740386">Malgré ce qu'un grand nombre d'utilisateurs penseraient, la technologie NFC (Nier Field Communication, ou en français Communication en Champ Proche) n'est pas neuve. Depuis quelques années seulement, on en entend parler de plus en plus. Notamment grâce aux smartphones qui démocratisent à grande vitesse cette technologie. Elle vous permettra d'échanger des données à une fréquence faible et à courte distance (moins de 10cm).</p><p id="r-740387" data-claire-element-id="740387">Nous n'allons pas rentrer dans les détails techniques de cette technologie dans ce chapitre. Android a prévu une API pour nous permettre de rester, plus ou moins, à un haut niveau d'abstraction. Cependant, il vous faudra peut-être relire à deux fois certaines explications puisque nous allons devoir directement jouer avec des bits sur certains points.</p>
</div><a name="Lesdiffrentstagsexistants"></a><h2>Les différents tags existants</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">
<span class="arrow"></span>
<span class="next">Le partage par NFC</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
<span class="next">Lecture d&#039;un tag</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-differents-tags-existants" data-claire-element-id="740423">Les différents tags existants</h4><h5 id="r-identification-des-differents-tags" data-claire-element-id="740402">Identification des différents tags</h5><p id="r-740388" data-claire-element-id="740388">Avant de vous lancez dans l'apprentissage du NFC, il serait sans doute utile de savoir si votre appareil dans votre poche le possède. Pour ce faire, vous devrez le vérifier dans la catégorie « Sans fil et réseaux » des paramètres de votre smartphone. A partir de là, vous pouvez activer votre NFC et Android Beam. Ce dernier sera également vu en dernière partie de ce chapitre. Vous pouvez dès maintenant l'activer en prévision de la suite. A partir de maintenant, votre smartphone sera constamment à la recherche d'un tag NFC, même lorsque vous serez sur l'écran de verrouillage.</p><p id="r-740389" data-claire-element-id="740389">Une fois que votre appareil captera un tag NFC, il tentera de le traiter le mieux possible. Il encapsulera le tag dans un intent regroupant toutes les informations nécessaires et l'enverra au système qui cherchera une activité parmi l'une de vos applications qui filtre le type de tag qui a été identifié. Vous devez donc savoir qu'il existe plusieurs sortes de tag étant donné que cette technologie n'a pas été standardisée dès sa sortie (et qu'elle ne l'est pas encore tout à fait). Nous pouvons donc filtrer sur 3 niveaux de priorités :</p><ul id="r-740396" data-claire-element-id="740396"><li id="r-740391" data-claire-element-id="740391"><p id="r-740390" data-claire-element-id="740390">ACTION_NDEF_DISCOVERED est le plus grand niveau de propriété dans tout le système. Le système d'identification des tags tentera de lancer une activité avec cet intent plutôt que d'autres intents en attente dans votre système. Si le système ne trouve aucune activité qui gère cet intent, il passera au type suivant.</p></li><li id="r-740393" data-claire-element-id="740393"><p id="r-740392" data-claire-element-id="740392">ACTION_TECH_DISCOVERED est un niveau de propriété juste en dessous du précédent. Il sera lancé si le message du tag n'est pas formatté par le standard NDEF.</p></li><li id="r-740395" data-claire-element-id="740395"><p id="r-740394" data-claire-element-id="740394">ACTION_TAG_DISCOVERED est l'intent qui sera lancé si aucune autre activité n'a été trouvé dans le système pour gérer le tag découvert.</p></li></ul><aside id="r-740398" data-claire-element-id="740398" data-claire-semantic="information"><p id="r-740397" data-claire-element-id="740397">Les messages NDEF sont la tentative de standardisations des forums NFC qui est un consortium international créé pour promouvoir la technologie NFC. Le problème c'est que cette standardisation n'est pas suivie par tout le monde. Chose pour laquelle Android possède 3 types différents de tag NFC pour couvrir un large nombre de tag.</p></aside><figure id="r-systeme-d-identification-du-tag" data-claire-element-id="740401"><img id="r-740399" data-claire-element-id="740399" src="medias/uploads.siteduzero.com_files_417001_418000_417388.png" alt="Système d'identification du tag"/><figcaption>Système d'identification du tag</figcaption></figure><h5 id="r-structure-d-un-message-ndef-1" data-claire-element-id="740408">Structure d'un message NDEF</h5><p id="r-740403" data-claire-element-id="740403">Avant d'aller plus loin, il est utile de savoir comment est structurer un message NDEF. Voici un petit schéma qui l'explique assez simplement :</p><figure id="r-structure-d-un-message-ndef" data-claire-element-id="740406"><img id="r-740404" data-claire-element-id="740404" src="medias/uploads.siteduzero.com_files_417001_418000_417416.png" alt="Structure d'un message NDEF"/><figcaption>Structure d'un message NDEF</figcaption></figure><p id="r-740407" data-claire-element-id="740407">Qu'avons-nous là ? Tout simplement un message qui comporte un tableau de record, d'enregistrement, avec un header (comportant des informations comme son identifiant et autres et un payload qui est la donnée en elle-même). Chaque record possède un espace mémoire assez réduit. Il faut donc penser à les répartir sur plusieurs records si nous implémentons une application qui écrit des NDEF messages sur des tags ou à bien récupérer chaque record si nous implémentons un lecteur. Chose que nous allons faire dans la suite de ce chapitre.</p><h5 id="r-implementation-dans-notre-application" data-claire-element-id="740422">Implémentation dans notre application</h5><p id="r-740409" data-claire-element-id="740409">Comment concrétiser ce filtre dans notre application ? C'est très simple, tout se passe dans notre fichier manifest. Nous allons spécifier plusieurs petite chose dans le noeud <code data-claire-semantic="xml">&lt;manifest&gt;</code>:</p><ul id="r-740416" data-claire-element-id="740416"><li id="r-740411" data-claire-element-id="740411"><p id="r-740410" data-claire-element-id="740410">La version minimum du SDK que doit spécifier votre application pour accéder à l'entièreté de l'API NFC.</p></li><li id="r-740413" data-claire-element-id="740413"><p id="r-740412" data-claire-element-id="740412">La permission du NFC pour signaler à l'utilisateur que nous utiliserons cette fonctionnalité et pour permettre au Play Store de filtrer les terminaux compatibles.</p></li><li id="r-740415" data-claire-element-id="740415"><p id="r-740414" data-claire-element-id="740414">Si le NFC doit être activé ou non lors de l'exécution de notre application.</p></li></ul><p id="r-740417" data-claire-element-id="740417">Au niveau du noeud racine , nous rajouterons :</p><pre id="r-740418" data-claire-element-id="740418"><code data-claire-semantic="xml">&lt;uses-sdk android:minSdkVersion=&quot;10&quot;/&gt;

&lt;uses-permission android:name=&quot;android.permission.NFC&quot; /&gt;

&lt;uses-feature
    android:name=&quot;android.hardware.nfc&quot;
    android:required=&quot;boolean&quot; /&gt;</code></pre><p id="r-740419" data-claire-element-id="740419">Maintenant, pour les activités qui seront destinées à gérer le NFC, nous devrons ajouter un noeud <code data-claire-semantic="xml">&lt;intent-filter&gt;</code> avec un élément <code data-claire-semantic="xml">&lt;action&gt;</code> qui indiquera le type de tag que nous traitons et la catégorie du filtre avec un élément <code data-claire-semantic="xml">&lt;category&gt;</code>. Nous aurons donc quelque chose comme ceci :</p><pre id="r-740420" data-claire-element-id="740420"><code data-claire-semantic="xml">&lt;intent-filter&gt;
    &lt;action android:name=&quot;android.nfc.action.NDEF_DISCOVERED&quot; /&gt;

    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
&lt;/intent-filter&gt;</code></pre><p id="r-740421" data-claire-element-id="740421">Avec ce filtre, le système sera que nous traitons les tags NDEF et pourra proposer notre activité lorsqu'il captera un tag de ce type.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">
<span class="arrow"></span>
<span class="next">Le partage par NFC</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
<span class="next">Lecture d&#039;un tag</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lectured039untag"></a><h2>Lecture d&#039;un tag</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
<span class="arrow"></span>
<span class="next">Les différents tags existants</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
<span class="next">Echange par Beam</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-lecture-d-un-tag" data-claire-element-id="740458">Lecture d'un tag</h4><h5 id="r-activite-destine-a-gerer-la-lecture-du-tag" data-claire-element-id="740445">Activité destiné à gérer la lecture du tag</h5><p id="r-740424" data-claire-element-id="740424">Bien, on va enfin commencer à s'amuser ! Cependant, nous allons nous limiter aux messages NDEF pour tenter de supporter cette standardisation que Google et d'autres acteurs comme SONY ou Philips tentent de répandre. De plus, il est bien plus simple d'utiliser les messages NDEF pour apprendre puisque Android offre une API spécialement prévue pour ce type de messages.</p><p id="r-740425" data-claire-element-id="740425">Pour ce faire, nous n'aurons pas besoin de grand chose. Dans une activité quelconque, nous lui attacherons un fichier XML d'affichage pour afficher simplement un texte qui sera modifier par le texte que nous enverrons par un tag (ou par une méthode expliquée plus loin pour simuler un tag). Quant à notre activité, nous nous contenterons de désérialiser ce fichier XML et de jouer avec l'adaptateur NFC, <code data-claire-semantic="java">NfcAdapter</code>. Son initialisation se fait avec la méthode <code data-claire-semantic="java">public static NfcAdapter getDefaultAdapter(Context context)</code> qui est une méthode statique pouvant être appelé à partir de la classe précédemment citée.</p><p id="r-740426" data-claire-element-id="740426">Dès que c'est chose faite, nous devons vérifier que l'appareil qui tente de lancer l'activité a bien le NFC ou s'il est bien activé. Pensez qu'il est toujours possible pour un utilisateur de télécharger une application qui ne lui est pas destinée initialement. Il pourrait donc installer une application qui ne figure pas sur son Play Store parce que ses appareils enregistrés ne sont pas compatibles. Nous vérifierons que notre adaptateur est bien différent de <code data-claire-semantic="java">null</code> ou s'il est bien activé par la méthode <code data-claire-semantic="java">public boolean isEnabled()</code>.</p><p id="r-740427" data-claire-element-id="740427">Notre méthode <code data-claire-semantic="java">public void onCreate(Bundle savedInstanceState)</code> ressemblera donc à quelque chose comme le code ci-dessous.</p><pre id="r-740428" data-claire-element-id="740428"><code data-claire-semantic="java">@Override
public void onCreate(Bundle savedInstanceState) {
	super.onCreate(savedInstanceState);
	setContentView(R.layout.activity_nfc);
	this.mTextView = (TextView) findViewById(R.id.textView1);
	this.mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

	if (mNfcAdapter == null || !mNfcAdapter.isEnabled()) {
		Toast.makeText(this, R.string.text_no_nfc, Toast.LENGTH_SHORT).show();
		finish();
		return;
	}
}</code></pre><p id="r-740429" data-claire-element-id="740429">Maintenant, pour que notre activité puisse gérer la découverte d'un TAG au premier plan, il est nécessaire de redéfinir la méthode <code data-claire-semantic="java">protected void onResume()</code> et la méthode <code data-claire-semantic="java">protected void onPause()</code>. Dans la première méthode, nous activerons la possibilité d'identifier le tag passé dans un <code data-claire-semantic="java">Intent</code> via la méthode <code data-claire-semantic="java">public void enableForegroundDispatch(Activity activity, PendingIntent intent, IntentFilter[] filters, String[][] techLists)</code>. A quoi correspondent tous ces paramètres ?</p><ul id="r-740438" data-claire-element-id="740438"><li id="r-740431" data-claire-element-id="740431"><p id="r-740430" data-claire-element-id="740430">Le paramètre <code data-claire-semantic="java">Activity</code> est bien entendu destiné à renseigner l'activité sur lequel vous vous trouvez.</p></li><li id="r-740433" data-claire-element-id="740433"><p id="r-740432" data-claire-element-id="740432">Le paramètre <code data-claire-semantic="java">PendingIntent</code> renseigne un intent à exécuter plus tard pour indiquer l'activité qui se charge du traitement du tag.</p></li><li id="r-740435" data-claire-element-id="740435"><p id="r-740434" data-claire-element-id="740434">Le paramètre <code data-claire-semantic="java">IntentFilter[]</code> pour affiner le traitement des messages, mettre <code data-claire-semantic="java">null</code> si vous acceptez tout.</p></li><li id="r-740437" data-claire-element-id="740437"><p id="r-740436" data-claire-element-id="740436">Le paramètre <code data-claire-semantic="java">String[][]</code> est renseigné pour exécuter un matching de traitement avec le type de tag de priorité inférieur, mettre <code data-claire-semantic="java">null</code> si vous ne voulez rien matcher.</p></li></ul><p id="r-740439" data-claire-element-id="740439">Quant à la seconde méthode, nous devons désactiver cette possibilité de traitement des tags sur l'activité au premier plan par la méthode <code data-claire-semantic="java">public void disableForegroundDispatch(Activity activity)</code> en renseignant simplement l'activité courante. Vous aurez donc une implémentation similaire au code suivant :</p><pre id="r-740440" data-claire-element-id="740440"><code data-claire-semantic="java">@Override
protected void onResume() {
	super.onResume();
	Intent intent = new Intent(this, this.getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
	PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, 0);
	IntentFilter[] filters = null;
	String[][] techListArray = null;
	mNfcAdapter.enableForegroundDispatch(this, pIntent, filters, techListArray);
}

@Override
protected void onPause() {
	super.onPause();
	mNfcAdapter.disableForegroundDispatch(this);
}</code></pre><p id="r-740441" data-claire-element-id="740441">Pour finir, nous allons voir comment traiter notre intent qui comporte notre NDEF message. Nous allons donc créer une méthode avec la signature <code data-claire-semantic="java">private void resolveIntent(Intent intent)</code> qui récupérera un tableau de Parcelable correspondant aux données extensions placés par le tag, et ce via la méthode <code data-claire-semantic="java">public Parcelable[] getParcelableArrayExtra(String name)</code> en lui passant en paramètre la constante <code data-claire-semantic="java">NfcAdapter.EXTRA_NDEF_MESSAGES</code>. A partir de là, nous pourrons recopier son contenu dans un tableau du type <code data-claire-semantic="java">NdefMessage</code> et traiter les données comme bon nous semble.</p><p id="r-740442" data-claire-element-id="740442">Si nous prenons un exemple simple où il existe simplement des données dans le premier enregistrement du message NDEF, on aura une méthode similaire à :</p><pre id="r-740443" data-claire-element-id="740443"><code data-claire-semantic="java">private void resolveIntent(Intent intent) {
	String action = intent.getAction();
	if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)) {
		Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
		if (rawMsgs != null) {
			NdefMessage[] messages = new NdefMessage[rawMsgs.length];
			for (int i = 0; i &lt; rawMsgs.length; i++) {
				messages[i] = (NdefMessage) rawMsgs[i];
			}
			// Exemple basique de récupération des données dans le tableau
			String str = new String(messages[0].getRecords()[0].getPayload());
			mTextView.setText(str);
		}
	}
}</code></pre><p id="r-740444" data-claire-element-id="740444">Il vous suffit alors d'appeler cette méthode à la fin de la méthode <code data-claire-semantic="java">public void onCreate(Bundle savedInstanceState)</code> de votre activité pour gérer l'intent que vous recevrez dans votre activité lorsque votre système captera un tag NDEF. Votre application est maintenant capable d'intercepter les messages NDEF découvert par votre système et proposera donc votre activité pour les lire.</p><h5 id="r-un-emulateur-de-tag-ndef" data-claire-element-id="740457">Un émulateur de tag NDEF</h5><p id="r-740446" data-claire-element-id="740446">C'est bien beau tout ça mais comment pouvons-nous tester notre application si nous ne disposons pas de tag NFC comportant des NDEF messages ? C'est très simple. Pour ce faire, nous aurons besoin de 2 méthodes assez générique que vous n'aurez pas forcément besoin de comprende (c'est un peu technique puisque c'est de la manipulation de bits) et d'une autre activité (c'est important sinon ça ne fonctionnera pas).</p><p id="r-740447" data-claire-element-id="740447">Nous aurons donc besoin des deux méthodes suivantes permettant la création d'un message NDEF et de ses records :</p><pre id="r-740448" data-claire-element-id="740448"><code data-claire-semantic="java">public static NdefMessage createMessage(String text, boolean encode) {
	NdefRecord[] records = new NdefRecord[1];
	records[0] = createRecord(text, Locale.FRENCH, encode);
	return new NdefMessage(records);
}

public static NdefRecord createRecord(String text, Locale locale,
		boolean encode) {
	byte[] langBytes = locale.getLanguage().getBytes(
			Charset.forName(&quot;US-ASCII&quot;));
	Charset utfEncoding = encode ? Charset.forName(&quot;UTF-8&quot;) : Charset
			.forName(&quot;UTF-16&quot;);
	byte[] textBytes = text.getBytes(utfEncoding);
	int utfBit = encode ? 0 : (1 &lt;&lt; 7);
	char status = (char) (utfBit + langBytes.length);
	byte[] data = new byte[langBytes.length + textBytes.length + 1];
	data[0] = (byte) status;
	System.arraycopy(langBytes, 0, data, 1, langBytes.length);
	System.arraycopy(textBytes, 0, data, 1 + langBytes.length,
			textBytes.length);
	return new NdefRecord(NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD_TEXT,
			new byte[0], data);
}</code></pre><aside id="r-740450" data-claire-element-id="740450" data-claire-semantic="information"><p id="r-740449" data-claire-element-id="740449">Pour des soucis de facilité, j'ai placé ces méthodes en <code data-claire-semantic="java">static</code> dans une classe utilitaire <code data-claire-semantic="java">NFCUtils</code>.</p></aside><p id="r-740451" data-claire-element-id="740451">Dans notre activité, nous utiliserons la méthode <code data-claire-semantic="java">public static NdefMessage createMessage(String text, boolean encode)</code> que nous appellerons lorsqu'un utilisera cliquera sur un bouton pour lancer un intent test comportant un message que nous avons défini de la manière suivante :</p><pre id="r-740452" data-claire-element-id="740452"><code data-claire-semantic="java">public void sendTag(View v) {
	Intent i = new Intent(NfcAdapter.ACTION_NDEF_DISCOVERED);
	NdefMessage[] messages = new NdefMessage[1];
	messages[0] = NFCUtils.createMessage(&quot;Simule message NDEF&quot;, true);
	i.putExtra(NfcAdapter.EXTRA_NDEF_MESSAGES, messages);
	startActivity(i);
}</code></pre><p id="r-740453" data-claire-element-id="740453">Ainsi, lorsque nous cliquerons sur le bouton, notre système nous proposera notre première activité qui offre la possibilité de gérer des NDEF messages.</p><figure id="r-execution-de-l-emulateur-de-messages-ndef" data-claire-element-id="740456"><img id="r-740454" data-claire-element-id="740454" src="medias/uploads.siteduzero.com_files_417001_418000_417414.png" alt="Exécution de l'émulateur de messages NDEF"/><figcaption>Exécution de l'émulateur de messages NDEF</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
<span class="arrow"></span>
<span class="next">Les différents tags existants</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
<span class="next">Echange par Beam</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="EchangeparBeam"></a><h2>Echange par Beam</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
<span class="arrow"></span>
<span class="next">Lecture d&#039;un tag</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-echange-par-beam" data-claire-element-id="740480">Echange par Beam</h4><p id="r-740459" data-claire-element-id="740459">Nous abordons maintenant la dernière partie de ce chapitre avec une utilisation du NFC très intéressante. Vous connaissez tous les connectivités comme le Bluetooth ou le WiFi qui vous permettent d'échanger des données entre deux terminaux. Le problème, c'est que ce ne sont pas les technologies les plus rapides et les plus facile à utiliser pour transférer de l'information. C'est là que le NFC arrive pour palier avec une facilité déconcertante. L'idée est de lancer le partage juste en rapprochant deux smartphones dos à dos, rien de plus. Cependant, pour les développeurs, c'est une chose de plus à implémenter.</p><p id="r-740460" data-claire-element-id="740460">Cette fois-ci, cela va être un peu différent que le lecteur de tag que nous avons développé. Nous allons devoir ici être récepteur et envoyeur. Vous êtes censé pouvoir recevoir de l'information et en envoyer. Pour ce faire, Android offre une API légèrement différente pour que cela soit plus simple pour les développeurs d'envoyer des données.</p><p id="r-740461" data-claire-element-id="740461">Commençons par implémenter une interface dans notre activité, <code data-claire-semantic="java">CreateNdefMessageCallback</code>. Comme vous pouvez le deviner, cette interface servira à implémenter les méthodes pour créer les messages NDEF lorsque nous envoyons des données à un autre terminal.Nous implémentons donc la méthode <code data-claire-semantic="java">public NdefMessage createNdefMessage(NfcEvent event)</code> de façon très similaire à notre émulateur, à quelques exceptions près. Nous aurons besoin de la méthode suivante pour créer un mime :</p><pre id="r-740462" data-claire-element-id="740462"><code data-claire-semantic="java">public static NdefRecord createMimeRecord(String mimeType, byte[] payload) {
	byte[] mimeBytes = mimeType.getBytes(Charset.forName(&quot;US-ASCII&quot;));
	NdefRecord mimeRecord = new NdefRecord(NdefRecord.TNF_MIME_MEDIA,
			mimeBytes, new byte[0], payload);
	return mimeRecord;
}</code></pre><p id="r-740463" data-claire-element-id="740463">Le mime nous permettra d'indiquer le chemin vers le paquetage contenant l'activité qui permettra de traiter le transfert Beam. Nous devrons donc initialiser un tableau de record qui comporte l'enregistrement mime et le payload représentant la donnée à transférer. Empaqueter le tout dans un <code data-claire-semantic="java">NdefMessage</code> pour ensuite le retourner dans la méthode. Nous obtenons donc simplement le code suivant :</p><pre id="r-740464" data-claire-element-id="740464"><code data-claire-semantic="java">@Override
public NdefMessage createNdefMessage(NfcEvent event) {
	String text = &quot;Message share by Beam !&quot;;
	NdefRecord[] records = new NdefRecord[] { NFCUtils.createMimeRecord(
			&quot;application/com.siteduzero.android.nfc&quot;, text.getBytes()) };
	NdefMessage msg = new NdefMessage(records);
	return msg;
}</code></pre><p id="r-740465" data-claire-element-id="740465">Maintenant, pour rendre actif l'appel à cette méthode, nous allons appeler, dans la méthode <code data-claire-semantic="java">protected void onCreate(Bundle savedInstanceState)</code>, la méthode <code data-claire-semantic="java">public void setNdefPushMessageCallback (NfcAdapter.CreateNdefMessageCallback callback, Activity activity, Activity... activities)</code> sur l'adaptateur NFC que nous avons initialisé juste avant. Nous lui donnons donc l'instance du callback en paramètre et l'activité courante dans laquelle il se trouve pour rendre opérationnel notre code.</p><p id="r-740466" data-claire-element-id="740466">La réception des messages se fait exactement de la même façon que précédent sauf qu'il vous faudra redéfinir une méthode supplémentaire <code data-claire-semantic="java">public void onNewIntent(Intent intent)</code> pour appeler la méthode <code data-claire-semantic="java">private void resolveIntent(Intent intent)</code> développée dans la sous partie précédente de ce chapitre. A partir de là, si vous exécutez votre code et que vous mettez dos à dos deux terminaux avec la technologie Beam, vous arrivez au resultat suivant :</p><figure id="r-execution-du-programme-android-beam" data-claire-element-id="740469"><img id="r-740467" data-claire-element-id="740467" src="medias/uploads.siteduzero.com_files_417001_418000_417460.png" alt="Exécution du programme Android Beam"/><figcaption>Exécution du programme Android Beam</figcaption></figure><aside id="r-740471" data-claire-element-id="740471" data-claire-semantic="warning"><p id="r-740470" data-claire-element-id="740470">Bien entendu, ce tutoriel est très loin d'être terminé. Vous pourrez retrouver ce même tutoriel en bêta via ce <a href="http://www.siteduzero.com/tutoriel-3-704884-1-aller-plus-loin-dans-le-developpement-android.html">lien</a>. N'hésitez pas à me donner votre avis pour faire évoluer ce tutoriel. Il a pour but d'être le plus communautaire possible. Je suis donc ouvert à toutes vos critiques, questions et remarques constructives !</p></aside><h6 id="r-remerciements-7" data-claire-element-id="740479">Remerciements</h6><ul id="r-740478" data-claire-element-id="740478"><li id="r-740473" data-claire-element-id="740473"><p id="r-740472" data-claire-element-id="740472">Aux lecteurs et bêta-testeurs qui me font des critiques constructives sur le contenu de mon tutoriel.</p></li><li id="r-740475" data-claire-element-id="740475"><p id="r-740474" data-claire-element-id="740474"><a href="http://www.siteduzero.com/membres-294-131068.html">Fumble</a> pour la validation de mon tutoriel.</p></li><li id="r-740477" data-claire-element-id="740477"><p id="r-740476" data-claire-element-id="740476"><a href="https://twitter.com/bluekicks_">Bluekicks</a> pour l'icône de mon tutoriel.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android">Aller plus loin dans le développement Android</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Fragmenter vos projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/fragment">Fragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/introduction-aux-fragments">
Introduction aux fragments
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-fixes">
Utiliser des fragments fixes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utiliser-des-fragments-dynamiques">
Utiliser des fragments dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/listfragment">ListFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-simple-des-listes">
Utilisation simple des listes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-une-vue-personnalisee">
Intégrer une vue personnalisée
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/vers-des-listes-dynamiques">
Vers des listes dynamiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/preferencefragment">PreferenceFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/parametriser-son-application">
Paramétriser son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/affiner-ses-parametres-avec-les-en-tetes">
Affiner ses paramètres avec les en-têtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lire-les-preferences">
Lire les préférences
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/dialogfragment">DialogFragment</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-dialogfragment">
Créer un DIalogFragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/creer-un-alertdialog">
Créer un AlertDialog
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/afficher-une-boite-de-dialogue-3">
Afficher une boite de dialogue
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Des nouveaux composants
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/la-barre-d-action-des-applications">La barre d&#039;action des applications</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/integrer-un-menu">
Intégrer un menu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/possibilites-avancees">
Possibilités avancées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/menu-contextuel-2">
Menu contextuel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/slider-a-travers-des-ecrans">Slider à travers des écrans</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/passer-des-informations-a-la-creation-d-un-fragment">
Passer des informations à la création d&#039;un fragment
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/utilisation-du-widget-viewpager">
Utilisation du widget ViewPager
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajout-d-un-indicateur-de-la-page">
Ajout d&#039;un indicateur de la page
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/notifier-l-utilisateur">Notifier l&#039;utilisateur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/basique">
Basique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-styles">
Les différents styles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/ajouter-des-boutons-d-action">
Ajouter des boutons d&#039;action
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/le-partage-par-nfc">Le partage par NFC</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/les-differents-tags-existants">
Les différents tags existants
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
Lecture d&#039;un tag
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/echange-par-beam">
Echange par Beam
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/aller-plus-loin-dans-le-developpement-android/lecture-d-un-tag">
<span class="arrow"></span>
<span class="next">Lecture d&#039;un tag</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/aller-plus-loin-dans-le-developpement-android.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 01:27:34 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/aller-plus-loin-dans-le-developpement-android.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:25:42 GMT -->
</html>