<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/les-pointeurs-sur-fonctions-1.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:59:11 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/les-pointeurs-sur-fonctions-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:39:00 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Les pointeurs sur fonctions</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/les-pointeurs-sur-fonctions-1.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Les pointeurs sur fonctions</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Lespointeurssurfonctions">Les pointeurs sur fonctions</a><br/><a href="#Lepointeurgnriquevoid">Le pointeur générique (void *)</a><br/><a href="#Fonctionssansretourprocdures">Fonctions sans retour (procédures)</a><br/><a href="#Fonctionsavecretour">Fonctions avec retour</a><br/><a href="#Appelsdefonctionsenutilisantleursadresses">Appels de fonctions en utilisant leurs adresses</a><br/><a href="#Tableaudepointeurssurfonctions">Tableau de pointeurs sur fonctions</a><br/><a href="#Retournerunpointeursurfonctions">Retourner un pointeur sur fonctions</a><br/><a href="#Passagedepointeurdefonctionsenparamtre">Passage de pointeur de fonctions en paramètre</a><br/><a href="#Utilitdespointeurssurfonction">Utilité des pointeurs sur fonction</a><br/></div>
<a name="Lespointeurssurfonctions"></a><h2>Les pointeurs sur fonctions</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
<span class="next">Le pointeur générique (void *)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-461115" data-claire-element-id="461115">Votre histoire avec les pointeurs continue :) , et cette fois-ci c'est de fonctions qu'il s'agit.<br/> La compréhension de ce tutoriel exigera un minimum de connaissances des pointeurs (à ne pas confondre avec les allocations dynamiques).</p><p id="r-461116" data-claire-element-id="461116">Bonne lecture.</p>
</div><a name="Lepointeurgnriquevoid"></a><h2>Le pointeur générique (void *)</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
<span class="next">Fonctions sans retour (procédures)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-461117" data-claire-element-id="461117">Bonne nouvelle :) , je vais vous faire un petit rappel sur les pointeurs :</p><p id="r-461118" data-claire-element-id="461118">Quand on déclare une variable, une place mémoire lui sera attribuée. Cette place mémoire va servir pour contenir les valeurs qu'on affectera à notre variable. Et cet espace sera connu par une adresse.</p><p id="r-461119" data-claire-element-id="461119">Ainsi chaque objet créé en mémoire, a une adresse propre à lui. Cette adresse peut être stockée dans un type qu'on appelle <strong><em>pointeur</em></strong>.</p><pre id="r-461120" data-claire-element-id="461120"><code data-claire-semantic="c">int * pointeur;</code></pre><p id="r-461121" data-claire-element-id="461121">Jusqu'ici vous avez connu, plusieurs types de pointeurs (sur <code data-claire-semantic="c">char, int, float</code>...) :</p><pre id="r-461122" data-claire-element-id="461122"><code data-claire-semantic="c">int * ptrint;
float * ptrfloat;
char * ptrchar;
double * ptrdouble;</code></pre><p id="r-461123" data-claire-element-id="461123">Vous avez également appris que les types de pointeurs n'étaient pas pareil et qu'il ne fallait pas les mélanger (un pointeur sur <code data-claire-semantic="c">int</code>, doit contenir une adresse d'une variable <code data-claire-semantic="c">int</code>, par exemple), ce qui est une chose vraie. Cependant, il existe un type de pointeur compatible avec tous les autres types de pointeurs sur objets qu'on appelle le pointeur générique (désigné par <code data-claire-semantic="c">void *</code>).</p><pre id="r-461124" data-claire-element-id="461124"><code data-claire-semantic="c">void * pointeurGenerique;</code></pre><div id="r-461126" data-claire-element-id="461126" data-claire-semantic="question"><p id="r-461125" data-claire-element-id="461125">Quel est le rapport avec les fonctions ?</p></div><p id="r-461127" data-claire-element-id="461127">Une fonction, comme tout autre objet dans un programme, a également une adresse mémoire et donc un pointeur capable de sauvegarder cette adresse mémoire. Pour qu'elle soit utilisée par la suite. Cependant, cette adresse ne pourrait pas être stockée dans le pointeur générique de façon entièrement portable.</p><div id="r-461129" data-claire-element-id="461129" data-claire-semantic="question"><p id="r-461128" data-claire-element-id="461128">Comment peut-on avoir l'adresse d'une fonction ?</p></div><p id="r-461130" data-claire-element-id="461130">Identiquement aux variables ordinaires que vous connaissez si bien, on peut utiliser l'opérateur '&amp;', suivi du nom de la fonction pour avoir son adresse.</p><p id="r-461131" data-claire-element-id="461131">Exemple :</p><p id="r-461132" data-claire-element-id="461132">Si j'ai la fonction 'ma_fonction' comme ceci :</p><pre id="r-461133" data-claire-element-id="461133"><code data-claire-semantic="c">void ma_fonction(void)
{
     //instructions...
}</code></pre><p id="r-461134" data-claire-element-id="461134">En faisant :</p><pre id="r-461135" data-claire-element-id="461135"><code data-claire-semantic="c">pointeurSurFonction = &amp;(ma_fonction);</code></pre><p id="r-461136" data-claire-element-id="461136">Cela stockera l'adresse de notre fonction dans la variable 'pointeurSurFonction'.</p><p id="r-461137" data-claire-element-id="461137">Il existe une autre façon plus simple pour avoir l'adresse d'une fonction, j'ai préféré commencer par la plus dure :p .</p><aside id="r-461139" data-claire-element-id="461139" data-claire-semantic="information"><p id="r-461138" data-claire-element-id="461138">Le nom d'une fonction est un pointeur dit statique dessus (pour les maniaques du langage, j'utiliserai les termes &quot;le nom de fonction est évalué en pointeur dessus&quot;).</p></aside><p id="r-461140" data-claire-element-id="461140">En conséquence, l'utilisation de l'opérateur '&amp;' est donc facultative, ainsi seulement par l'utilisation du nom de la fonction on récupère son adresse.<br/> Une nouvelle fois vous ne serez pas perdant en utilisant des expressions explicites, et le '&amp;' devant est explicite.</p><pre id="r-461141" data-claire-element-id="461141"><code data-claire-semantic="c">pointeurSurFonction = ma_fonction;</code></pre><p id="r-461142" data-claire-element-id="461142">Maintenant nous savons comment déclarer un pointeur générique, et nous savons également lire l'adresse d'une fonction, alors si on combine les deux notions ceci nous donne un code comme ceci :</p><pre id="r-461143" data-claire-element-id="461143"><code data-claire-semantic="c">void ma_fonction (void)
{
     printf(&quot;Hello world!\n&quot;);
}

void * pointeurGenerique = ma_fonction ;</code></pre><p id="r-461144" data-claire-element-id="461144">Ainsi on a gardé l'adresse de notre fonction dans le pointeur générique.<br/> Notez que ce pointeur <code data-claire-semantic="c">void*</code> ne vous permettra pas d'appeler votre fonction.</p><aside id="r-461146" data-claire-element-id="461146" data-claire-semantic="warning"><p id="r-461145" data-claire-element-id="461145">Attention :<br/> Comportement non standard! un grand nombre d'extensions de compilateurs supportent qu'on affecte un pointeur sur fonction au type void *, mais il reste <strong>non-portable</strong>.</p></aside><div id="r-461148" data-claire-element-id="461148" data-claire-semantic="question"><p id="r-461147" data-claire-element-id="461147">chouette, et ça nous sert à quoi ?</p></div><p id="r-461149" data-claire-element-id="461149">à rien pour l'instant, c'était juste une petite introduction à notre sujet qui a pour but arriver à appeler une fonction par son adresse.</p><p id="r-461150" data-claire-element-id="461150">Avant de passer à la suite, je tiens à vous dire que les pointeurs de fonctions ont aussi des types, liés aux arguments de la fonction (nombre, et types) et aussi à son type de retour.<br/> C'est un détail qui fait toute la différence, et qu'il faudra respecter pour parvenir à appeler notre fonction.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1">Les pointeurs sur fonctions</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
Le pointeur générique (void *)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
Fonctions sans retour (procédures)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
Fonctions avec retour
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
Appels de fonctions en utilisant leurs adresses
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
Tableau de pointeurs sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
Retourner un pointeur sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
Passage de pointeur de fonctions en paramètre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
Utilité des pointeurs sur fonction
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
<span class="next">Fonctions sans retour (procédures)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Fonctionssansretourprocdures"></a><h2>Fonctions sans retour (procédures)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
<span class="arrow"></span>
<span class="next">Le pointeur générique (void *)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
<span class="next">Fonctions avec retour</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-461152" data-claire-element-id="461152">Généralement, un pointeur sur fonction est déclaré suivant la syntaxe :</p><p id="r-461153" data-claire-element-id="461153"><strong>type_de_retour</strong><code data-claire-semantic="c">(* nom_du_pointeur_sur_la_fonction )</code> ( <strong>liste_des_arguments</strong> );</p><p id="r-461154" data-claire-element-id="461154">Ainsi ces pointeurs sont déclarés en respectant le prototype de la fonction sur laquelle ils vont pointer. Ce qui est logique :) , non ?</p><h2 id="r-fonction-sans-parametres-sans-arguments" data-claire-element-id="461165">Fonction sans paramètres (sans arguments)</h2><p id="r-461155" data-claire-element-id="461155">On appelle procédure ou fonction sans retour, toutes fonctions ayant le type <code data-claire-semantic="c">void</code> comme type de retour.</p><p id="r-461156" data-claire-element-id="461156">Exemple :</p><pre id="r-461157" data-claire-element-id="461157"><code data-claire-semantic="c">void ma_fonction(....);</code></pre><p id="r-461158" data-claire-element-id="461158">Et on appelle fonction sans arguments (ou sans paramètres), toutes fonctions ayant le type <code data-claire-semantic="c">void</code> en argument.</p><p id="r-461159" data-claire-element-id="461159">Exemple:</p><pre id="r-461160" data-claire-element-id="461160"><code data-claire-semantic="c">void ma_fonction(void);</code></pre><p id="r-461161" data-claire-element-id="461161">Ainsi la déclaration d'un pointeur sur ce type de fonctions, à savoir sans arguments et sans retour, est comme ceci :</p><pre id="r-461162" data-claire-element-id="461162"><code data-claire-semantic="c">void (*pointeurSurFonction)(void);</code></pre><p id="r-461163" data-claire-element-id="461163">Le void à gauche est le type de retour, et celui entre parenthèses (à droite) est le type d'arguments. On a donc déclaré un pointeur sur fonction du type décrit ci-dessus. Et qui peut être utilisé comme ceci :</p><pre id="r-461164" data-claire-element-id="461164"><code data-claire-semantic="c">void ma_fonction(void);                 /*Prototype*/

void ma_fonction(void)                  /*La fonction*/
{
    printf(&quot;Hello world!\n&quot;);
}

int main(void)
{
    void (*pointeurSurFonction)(void);  /*Déclaration du pointeur*/

    pointeurSurFonction = ma_fonction;  /*Sauvegarde de l'adresse de la fonction dans le pointeur adéquat*/

    return 0;
}</code></pre><h2 id="r-fonction-avec-parametres-avec-arguments" data-claire-element-id="461176">Fonction avec paramètres (avec arguments)</h2><p id="r-461166" data-claire-element-id="461166">Une fonction est dite avec argument si dans la liste de ses arguments, il y en a, au moins un, différent du type <code data-claire-semantic="c">void</code>. Donc une fonction comme ceci :</p><pre id="r-461167" data-claire-element-id="461167"><code data-claire-semantic="c">void ma_fonction(int argint);</code></pre><p id="r-461168" data-claire-element-id="461168">Dans ce cas de figure, et par analogie au prototype de la fonction, la déclaration d'un pointeur sur ce type de fonctions est comme ceci :</p><pre id="r-461169" data-claire-element-id="461169"><code data-claire-semantic="c">void (*pointeurSurFonction)(int)</code></pre><p id="r-461170" data-claire-element-id="461170">En ce qui est des fonctions à plusieurs arguments, c'est le même principe. Donc pour une fonction comme ceci :</p><pre id="r-461171" data-claire-element-id="461171"><code data-claire-semantic="c">void ma_fonction(int argint,char * argchar,size_t leng);</code></pre><p id="r-461172" data-claire-element-id="461172">La déclaration de notre pointeur est :</p><pre id="r-461173" data-claire-element-id="461173"><code data-claire-semantic="c">void (*pointeurSurFonction)(int,char *,size_t);</code></pre><p id="r-461174" data-claire-element-id="461174">La sauvegarde de l'adresse de la fonction quant à elle, reste la même que dans le cas précédent :) (ce sera toujours le cas d'ailleurs). A savoir :</p><pre id="r-461175" data-claire-element-id="461175"><code data-claire-semantic="c">pointeurSurFonction = ma_fonction;</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1">Les pointeurs sur fonctions</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
Le pointeur générique (void *)
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
Fonctions sans retour (procédures)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
Fonctions avec retour
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
Appels de fonctions en utilisant leurs adresses
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
Tableau de pointeurs sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
Retourner un pointeur sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
Passage de pointeur de fonctions en paramètre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
Utilité des pointeurs sur fonction
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
<span class="arrow"></span>
<span class="next">Le pointeur générique (void *)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
<span class="next">Fonctions avec retour</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Fonctionsavecretour"></a><h2>Fonctions avec retour</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
<span class="arrow"></span>
<span class="next">Fonctions sans retour (procédures)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
<span class="next">Appels de fonctions en utilisant leurs adresses</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-461178" data-claire-element-id="461178">Une fonction est dite &quot;avec retour&quot; quand le type de retour est différent du <code data-claire-semantic="c">void </code>.</p><h2 id="r-fonctions-sans-arguments" data-claire-element-id="461181">Fonctions sans arguments</h2><p id="r-461179" data-claire-element-id="461179">La déclaration d'un pointeur sur une fonction du genre <code data-claire-semantic="c">int ma_fonction(void) </code> est de la forme :</p><pre id="r-461180" data-claire-element-id="461180"><code data-claire-semantic="c">int (*pointeurSurFonction)(void);</code></pre><h2 id="r-fonctions-avec-arguments" data-claire-element-id="461184">Fonctions avec arguments</h2><p id="r-461182" data-claire-element-id="461182">La déclaration d'un pointeur sur une fonction du genre <code data-claire-semantic="c">int * ma_fonction(double * f,int n) </code> est de la forme :</p><pre id="r-461183" data-claire-element-id="461183"><code data-claire-semantic="c">int * (*pointeurSurFonction)(double*,int);</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1">Les pointeurs sur fonctions</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
Le pointeur générique (void *)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
Fonctions sans retour (procédures)
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
Fonctions avec retour
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
Appels de fonctions en utilisant leurs adresses
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
Tableau de pointeurs sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
Retourner un pointeur sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
Passage de pointeur de fonctions en paramètre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
Utilité des pointeurs sur fonction
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
<span class="arrow"></span>
<span class="next">Fonctions sans retour (procédures)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
<span class="next">Appels de fonctions en utilisant leurs adresses</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Appelsdefonctionsenutilisantleursadresses"></a><h2>Appels de fonctions en utilisant leurs adresses</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
<span class="arrow"></span>
<span class="next">Fonctions avec retour</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
<span class="next">Tableau de pointeurs sur fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-notion-de-callback" data-claire-element-id="461190">Notion de callback</h2><p id="r-461186" data-claire-element-id="461186">J'ouvre une parenthèse pour parler un peu du concept callback :</p><p id="r-461187" data-claire-element-id="461187">C'est un concept qui consiste à attacher une fonction à un objet, je m'explique :<br/> On peut imaginer que l'on a un objet du genre un bouton, et que l'on souhaite lui associer une fonction, qui sera appelée lorsqu'on appuie sur ce bouton. C'est ce qu'on appelle une fonction de rappel (callback).</p><p id="r-461188" data-claire-element-id="461188">Ceci ne peut être fait, que par utilisation des pointeurs de fonctions.</p><p id="r-461189" data-claire-element-id="461189">En champ d'applications classiques, on pourrait citer les threads, qui lors de la création, se voient attribuer une fonction qui sera appelée suite à leur activation.</p><h2 id="r-operateur-d-appel-de-fonctions" data-claire-element-id="461212">Opérateur d'appel de fonctions</h2><p id="r-461191" data-claire-element-id="461191">Comme vous avez pu le connaitre (ou pas :p ), l'appel aux fonctions est caractérisé par la présence de parenthèses '()'. Dans le cas général, on appellera une fonction à partir de son pointeur ainsi :</p><p id="r-461192" data-claire-element-id="461192">(*<code data-claire-semantic="c">nom_du_pointeur_sur_fonction</code>)( <strong>liste_d'arguments</strong> )</p><p id="r-461193" data-claire-element-id="461193">La valeur de retour peut être récupérée ainsi :</p><p id="r-461194" data-claire-element-id="461194"><strong>variable_receptrice</strong> = (*<code data-claire-semantic="c">nom_du_pointeur_sur_fonction</code>)( <strong>liste_d'arguments</strong> )</p><aside id="r-461196" data-claire-element-id="461196" data-claire-semantic="information"><p id="r-461195" data-claire-element-id="461195">Il est possible d'utiliser l'appel d'une fonction sous la forme &quot;classique&quot; à savoir <strong>pointeurSurFonction(argument)</strong> (sans les parenthèses et l'astérisque '*'), mais un tel appel n'explicite pas qu'il s'agit d'un pointeur sur fonction. Donc je ne le conseillerai pas dans le cas général.</p></aside><p id="r-461197" data-claire-element-id="461197">Exemple 1 : Fonction sans retour et sans arguments</p><p id="r-461198" data-claire-element-id="461198">Soit la fonction :</p><pre id="r-461199" data-claire-element-id="461199"><code data-claire-semantic="c">void afficherBonjour(void)
{
     printf(&quot;Bonjour\n&quot;);
}</code></pre><p id="r-461200" data-claire-element-id="461200">Afin d'appeler la fonction afficherBonjour à partir de son pointeur, il faut faire comme ceci :</p><pre id="r-461201" data-claire-element-id="461201"><code data-claire-semantic="c">int main (void)
{
     void (*pointeurSurFonction)(void);       /*déclaration du pointeur*/
     pointeurSurFonction = afficherBonjour;   /*Initialisation*/

     (*pointeurSurFonction)();                /*Appel de la fonction*/

     return 0;
}</code></pre><p id="r-461202" data-claire-element-id="461202">Résultat :</p><pre id="r-461203" data-claire-element-id="461203"><code data-claire-semantic="console">Bonjour</code></pre><p id="r-461204" data-claire-element-id="461204">Exemple 2 : Fonction sans retour et avec arguments</p><pre id="r-461205" data-claire-element-id="461205"><code data-claire-semantic="c">void afficherBonjour(char * nom)
{
     printf(&quot;Bonjour %s\n&quot;,nom);
}

int main (void)
{
     void (*pointeurSurFonction)(char *);         /*déclaration du pointeur*/
     pointeurSurFonction = afficherBonjour;       /*Initialisation*/

     (*pointeurSurFonction)(&quot;zero&quot;);              /*Appel de la fonction*/

     return 0;
}</code></pre><p id="r-461206" data-claire-element-id="461206">Résultat :</p><pre id="r-461207" data-claire-element-id="461207"><code data-claire-semantic="console">Bonjour zero</code></pre><p id="r-461208" data-claire-element-id="461208">Exemple 3 : Fonction avec retour et sans arguments</p><pre id="r-461209" data-claire-element-id="461209"><code data-claire-semantic="c">int saisirNombre(void)
{
     int n;

     printf(&quot;Saisissez un nombre entier : &quot;);
     scanf(&quot;%d&quot;,&amp;n);

     return n;
}

int main (void)
{
     int (*pointeurSurFonction)(void);       /*déclaration du pointeur*/
     int nombre;

     pointeurSurFonction = saisirNombre;     /*Initialisation*/

     nombre = (*pointeurSurFonction)();      /*Appel de la fonction*/

     return 0;
}</code></pre><p id="r-461210" data-claire-element-id="461210">Exemple 4 : Fonction avec retour et avec arguments</p><pre id="r-461211" data-claire-element-id="461211"><code data-claire-semantic="c">int saisirNombre(char * nom)
{
     int n;

     printf(&quot;Bonjour %s saisie un nombre entier : &quot;,nom);
     scanf(&quot;%d&quot;,&amp;n);

     return n;
}

int main (void)
{
     int (*pointeurSurFonction)(char *);          /*déclaration du pointeur*/
     int nombre;

     pointeurSurFonction = saisirNombre;          /*Initialisation*/

     nombre = (*pointeurSurFonction)(&quot;zero&quot;);     /*Appel de la fonction*/

     return 0;
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1">Les pointeurs sur fonctions</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
Le pointeur générique (void *)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
Fonctions sans retour (procédures)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
Fonctions avec retour
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
Appels de fonctions en utilisant leurs adresses
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
Tableau de pointeurs sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
Retourner un pointeur sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
Passage de pointeur de fonctions en paramètre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
Utilité des pointeurs sur fonction
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
<span class="arrow"></span>
<span class="next">Fonctions avec retour</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
<span class="next">Tableau de pointeurs sur fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Tableaudepointeurssurfonctions"></a><h2>Tableau de pointeurs sur fonctions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
<span class="arrow"></span>
<span class="next">Appels de fonctions en utilisant leurs adresses</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
<span class="next">Retourner un pointeur sur fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-461214" data-claire-element-id="461214">La déclaration d'un tableau de pointeurs sur fonction se fait généralement sous la forme suivante :</p><p id="r-461215" data-claire-element-id="461215"><strong>type_de_retour</strong> (* <code data-claire-semantic="c">nom_du_tableau_de_pointeurs_sur_fonctions</code> [ <strong>taille_du_tableau</strong> ] ) ( <strong>liste_des_arguments</strong> );</p><p id="r-461216" data-claire-element-id="461216">Comme vous pouvez le remarquer, c'est complètement identique à ce qu'a été présenté avant (sauf les [] pour préciser que c'est un tableau).</p><p id="r-461217" data-claire-element-id="461217">Son utilisation est soumise à toutes les règles d'utilisation des tableaux ordinaires que vous connaissez (ou êtes censé connaître), à savoir le premier indice est <em>0</em> et le dernier est <em>taille - 1</em> , tous les pointeurs qui seront stockés dedans doivent avoir le même type (les fonctions qu'on mettra dedans doivent avoir <strong>le même prototype</strong>, autrement dit, le même type de retour et les mêmes arguments).</p><p id="r-461218" data-claire-element-id="461218"><em>Un exemple est en dernière partie du tutoriel.</em></p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1">Les pointeurs sur fonctions</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
Le pointeur générique (void *)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
Fonctions sans retour (procédures)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
Fonctions avec retour
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
Appels de fonctions en utilisant leurs adresses
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
Tableau de pointeurs sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
Retourner un pointeur sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
Passage de pointeur de fonctions en paramètre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
Utilité des pointeurs sur fonction
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
<span class="arrow"></span>
<span class="next">Appels de fonctions en utilisant leurs adresses</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
<span class="next">Retourner un pointeur sur fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Retournerunpointeursurfonctions"></a><h2>Retourner un pointeur sur fonctions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
<span class="arrow"></span>
<span class="next">Tableau de pointeurs sur fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
<span class="next">Passage de pointeur de fonctions en paramètre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-methode-normale" data-claire-element-id="461226">Méthode normale</h2><p id="r-461220" data-claire-element-id="461220">Si l'on souhaite retourner un pointeur sur fonctions dans une de nos fonctions, nous pouvons utiliser le pointeur générique présenté tout au début du tutoriel (rappelez-vous :) ) cependant une telle pratique relève du non-portable. c'est pourquoi nous allons utiliser le pointeur type sur fonctions ainsi :</p><p id="r-461221" data-claire-element-id="461221"><strong>type_de_retour_de_la_fonction_pointee</strong> (* nom_de_la_fonction_de_renvoi (<strong>liste_arguments</strong>))(<strong>liste_arguments_fonction_pointee</strong>)</p><p id="r-461222" data-claire-element-id="461222">Exemple pour une fonction sans arguments :</p><pre id="r-461223" data-claire-element-id="461223"><code data-claire-semantic="c">int fonction1(void)
{
     return 1;
}

int (* fonction2(void))(void)
{
     return fonction1;        /*Ici le retour d'un pointeur sur fonction*/
}</code></pre><p id="r-461224" data-claire-element-id="461224">Exemple de fonction avec arguments :</p><pre id="r-461225" data-claire-element-id="461225"><code data-claire-semantic="c">int fonction1(double,double)
{
     return 1;
}

int (* fonction2(char str[]))(double,double)
{
     printf(&quot;%s&quot;,str);       /*Affichage de la chaine passée en paramètre*/

     return fonction1;       /*Ici le retour d'un pointeur sur fonction*/
}</code></pre><h2 id="r-utilisation-d-un-typedef" data-claire-element-id="461234">Utilisation d'un typedef</h2><p id="r-461227" data-claire-element-id="461227">Avec cette méthode, on va pouvoir déclarer un pointeur sur fonction tel que nous l'avons appris plus haut :) , mais cette fois ci en mettant <code data-claire-semantic="c">typedef</code> à sa gauche, comme ceci :</p><p id="r-461228" data-claire-element-id="461228"><strong>typedef</strong><strong>type_retour</strong> (* nom_du_pointeur) (<strong>liste_arguments</strong>)</p><p id="r-461229" data-claire-element-id="461229">Et ceci dans le champ des déclarations globales (c'est-à-dire en dehors des fonctions).</p><p id="r-461230" data-claire-element-id="461230">Exemple de fonction sans arguments :</p><pre id="r-461231" data-claire-element-id="461231"><code data-claire-semantic="c">typedef int (*ptrFonction)(void); 

int fonction1(void)
{
     return 1;
}

ptrFonction fonction2(void)
{
     return fonction1;        /*Ici le retour d'un pointeur sur fonction*/
}</code></pre><p id="r-461232" data-claire-element-id="461232">Exemple de fonction avec arguments :</p><pre id="r-461233" data-claire-element-id="461233"><code data-claire-semantic="c">typedef int (*ptrFonction)(double,double);

int fonction1(double,double)
{
     return 1;
}

ptrFonction fonction2(char str[])
{
     printf(&quot;%s&quot;,str);       /*Affichage de la chaine passée en paramètre*/

     return fonction1;       /*Ici le retour d'un pointeur sur fonction*/
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1">Les pointeurs sur fonctions</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
Le pointeur générique (void *)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
Fonctions sans retour (procédures)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
Fonctions avec retour
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
Appels de fonctions en utilisant leurs adresses
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
Tableau de pointeurs sur fonctions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
Retourner un pointeur sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
Passage de pointeur de fonctions en paramètre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
Utilité des pointeurs sur fonction
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
<span class="arrow"></span>
<span class="next">Tableau de pointeurs sur fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
<span class="next">Passage de pointeur de fonctions en paramètre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Passagedepointeurdefonctionsenparamtre"></a><h2>Passage de pointeur de fonctions en paramètre</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
<span class="arrow"></span>
<span class="next">Retourner un pointeur sur fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
<span class="next">Utilité des pointeurs sur fonction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-461236" data-claire-element-id="461236">Ici nous allons voir qu'il est possible de passer un pointeur sur fonction en paramètre à une autre fonction.</p><p id="r-461237" data-claire-element-id="461237">Deux méthodes existent, on peut citer en premier celle qu'on a utilisé jusqu'ici (la déclaration void (*ptr)(void)). La deuxième étant utiliser un <code data-claire-semantic="c">typedef</code> (d'ailleurs je vous la conseille vivement :) ).</p><h2 id="r-methode-classique" data-claire-element-id="461244">Méthode classique</h2><p id="r-461238" data-claire-element-id="461238">Voici comment dire que c'est un pointeur sur fonction qu'on passe en paramètre :</p><pre id="r-461239" data-claire-element-id="461239"><code data-claire-semantic="c">void fonction1(int n)
{
    printf(&quot;fonction 1 appel N° %d\n&quot;,n);
}

void fonction2(int n, void (*ptrfonction)(int))
{
     (*ptrfonction)(n);       /*Appel de la fonction pointée par ptrfonction*/
}</code></pre><p id="r-461240" data-claire-element-id="461240">On peut donc appeler notre fonction ainsi :</p><pre id="r-461241" data-claire-element-id="461241"><code data-claire-semantic="c">fonction2(13,fonction1);</code></pre><p id="r-461242" data-claire-element-id="461242">Ainsi le résultat sera :</p><pre id="r-461243" data-claire-element-id="461243"><code data-claire-semantic="console">fonction 1 appel N° 13</code></pre><h2 id="r-utilisation-de-typedef" data-claire-element-id="461250">Utilisation de typedef</h2><p id="r-461245" data-claire-element-id="461245">Bien que la méthode ci-dessus soit correcte, la deuxième que je vais vous présenter ici, va vous permettre d'utiliser le pointeur de fonction comme n'importe quel autre type :) .</p><p id="r-461246" data-claire-element-id="461246">Et pour cela il nous suffirait de déclarer notre pointeur en typedef (comme vue dans la partie juste avant) :</p><pre id="r-461247" data-claire-element-id="461247"><code data-claire-semantic="c">typedef void (*ptrfonction)(int);</code></pre><p id="r-461248" data-claire-element-id="461248">Et si je reprends le même exemple, ceci donnerait :</p><pre id="r-461249" data-claire-element-id="461249"><code data-claire-semantic="c">void fonction1(int n)
{
    printf(&quot;fonction 1 appel N° %d\n&quot;,n);
}

void fonction2(int n, ptrfonction ptr)
{
     (*ptr)(n);      /*Appel de la fonction pointée par ptrfonction*/
}

int main(void)
{
     fonction2(13,fonction1);
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1">Les pointeurs sur fonctions</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
Le pointeur générique (void *)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
Fonctions sans retour (procédures)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
Fonctions avec retour
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
Appels de fonctions en utilisant leurs adresses
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
Tableau de pointeurs sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
Retourner un pointeur sur fonctions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
Passage de pointeur de fonctions en paramètre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
Utilité des pointeurs sur fonction
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
<span class="arrow"></span>
<span class="next">Retourner un pointeur sur fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
<span class="next">Utilité des pointeurs sur fonction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilitdespointeurssurfonction"></a><h2>Utilité des pointeurs sur fonction</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
<span class="arrow"></span>
<span class="next">Passage de pointeur de fonctions en paramètre</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-461252" data-claire-element-id="461252">Dans le cas d'un programmeur débutant ou même intermédiaire, il est très rare qu'on se retrouve dans la nécessité d'utiliser ce genre de pointeurs.</p><p id="r-461253" data-claire-element-id="461253">Cependant, dans certaines architectures on peut être amené à faire le choix d'utiliser de tels appels de fonctions (à partir de leurs pointeurs), qui permettent d'avoir une flexibilité. contrairement aux autres appels statiques qui rigidifie notre architecture.</p><p id="r-461254" data-claire-element-id="461254">Dans la difficulté de trouver un exemple adéquat avec la difficulté de ce tutoriel, j'ai finalement choisi de vous présenter la version <em>callback</em> pour l'exercice de la calculatrice :) (vous vous en rappelez ? )</p><p id="r-461255" data-claire-element-id="461255">Pour ceux qui ne l'ont pas fait, j'en rappelle l'énoncé :</p><p id="r-461256" data-claire-element-id="461256"><cite>Citation : Exercice calculatrice</cite></p><blockquote id="r-461258" data-claire-element-id="461258"><p id="r-461257" data-claire-element-id="461257">Il faut écrire un programme qui affiche un menu avec les calculs d'addition, soustraction, multiplication et division à l'utilisateur, et lui demande d'en choisir un. Ensuite il lui demande de saisir les opérandes.<br/> Le programme devra faire le calcul choisi avec les opérandes entrées, et afficher le résultat.</p></blockquote><p id="r-461259" data-claire-element-id="461259">Voici l'explication de la solution :) :</p><h2 id="r-les-fonctions-de-calcul" data-claire-element-id="461262">Les fonctions de calcul</h2><p id="r-461260" data-claire-element-id="461260">Nous allons dans un premier temps écrire 4 fonctions traitants les différents calculs (addition, soustraction, multiplication et division) :</p><pre id="r-461261" data-claire-element-id="461261"><code data-claire-semantic="c">double addition(double n1,double n2)
{
    return n1 + n2;
}
double soustraction(double n1,double n2)
{
    return n1 - n2;
}
double multiplication(double n1,double n2)
{
    return n1 * n2;
}
double division(double n1,double n2)
{
    return n1 / n2;
}</code></pre><h2 id="r-declaration-et-initialisation-d-un-tableau-de-pointeurs-sur-fonctions" data-claire-element-id="461267">Déclaration et initialisation d'un tableau de pointeurs sur fonctions</h2><p id="r-461263" data-claire-element-id="461263">Maintenant nous allons créer un tableau de pointeurs sur fonctions, qu'on initialisera avec les fonctions de calcul qu'on vient d'écrire :</p><pre id="r-461264" data-claire-element-id="461264"><code data-claire-semantic="c">double (*listeFonctions[4])(double,double) = {addition,soustraction,multiplication,division};</code></pre><p id="r-461265" data-claire-element-id="461265">Rappelez-vous, la déclaration d'un pointeur est <code data-claire-semantic="c">double (*listeFonctions)(double,double)</code>.<br/> Donc la déclaration d'un tableau est de la forme <code data-claire-semantic="c">double (*listeFonctions[4])(double,double)</code><br/> Ce tableau est ensuite initialisé avec : <code data-claire-semantic="c">{addition,soustraction,multiplication,division};</code></p><p id="r-461266" data-claire-element-id="461266">(Cet exemple nous a permis de voir comment utiliser un tableau de pointeurs de fonctions :) chouette non ?).</p><h2 id="r-affichage-du-menu" data-claire-element-id="461271">Affichage du menu</h2><p id="r-461268" data-claire-element-id="461268">Ensuite nous allons créer une fonction qui va afficher un menu, proposant à l'utilisateur de choisir une opération :</p><pre id="r-461269" data-claire-element-id="461269"><code data-claire-semantic="c">double (* affichMenu(void))(double,double)       /*Le retour correspondant à un pointeur sur fonction*/
{
    int choix;                                   /*La variable pour le choix*/
    do{
         printf(&quot;-------------------------------MENU--------------------------------------\n&quot;);
         printf(&quot;Veuillez choisir une operation (en choisissant un nombre entre 1 et 4) :\n&quot;);
         printf(&quot;1 pour addition\n&quot;);
         printf(&quot;2 pour soustraction\n&quot;);
         printf(&quot;3 pour multiplication\n&quot;);
         printf(&quot;4 pour division\n&quot;);
         printf(&quot;Votre choix : &quot;);
         scanf(&quot;%d&quot;,&amp;choix);

    }while(choix &lt; 1 || choix &gt; 4 );            /*En cas d'erreur de saisie*/

    return listeFonctions[choix - 1];           /*On renvoi le pointeur sur la fonction de calcul choisie*/
}</code></pre><p id="r-461270" data-claire-element-id="461270">Cette même fonction contrôle la saisie, si elle est correcte, elle envoie un pointeur sur la fonction choisie.</p><h2 id="r-la-fonction-main-1" data-claire-element-id="461274">La fonction main</h2><p id="r-461272" data-claire-element-id="461272">Maintenant il ne nous reste plus que remplir la fonction main :</p><pre id="r-461273" data-claire-element-id="461273"><code data-claire-semantic="c">int main (void)
{
     double (*fonctionDeCalcul)(double,double);       /*déclaration du pointeur*/
     double n1,n2;

     fonctionDeCalcul = affichMenu();                 /*On charge la fonction de calcul choisie*/

     printf(&quot;Saisissez les operandes : &quot;);            /*On lit les opérandes de notre calcul*/
     scanf(&quot;%lf&quot;,&amp;n1);
     scanf(&quot;%lf&quot;,&amp;n2);

     printf(&quot;le resultat du calcul est : %f\n&quot;,(*fonctionDeCalcul)(n1,n2));  /*On appelle la fonction choisie et on affiche le résultat.*/
     return 0;
}</code></pre><h2 id="r-le-programme-complet-1" data-claire-element-id="461286">Le programme complet :</h2><div id="r-461276" data-claire-element-id="461276"><pre id="r-461275" data-claire-element-id="461275"><code data-claire-semantic="c">#include &lt;stdio.h&gt;
//---------Les prototypes-----------
double addition(double n1,double n2);
double soustraction(double n1,double n2);
double multiplication(double n1,double n2);
double division(double n1,double n2);
double (* affichMenu(void))(double,double);

//------Les fonctions de calcul-------
double addition(double n1,double n2)
{
    return n1 + n2;
}
double soustraction(double n1,double n2)
{
    return n1 - n2;
}
double multiplication(double n1,double n2)
{
    return n1 * n2;
}
double division(double n1,double n2)
{
    return n1 / n2;
}

//------Le tableau de pointeur sur fonctions (global)------
double (*listeFonctions[4])(double,double) = {addition,soustraction,multiplication,division};

//--------Fonction du menu--------
double (* affichMenu(void))(double,double)       /*Le retour correspondant à un pointeur sur fonction*/
{
    int choix;                                   /*La variable pour le choix*/
    do{
         printf(&quot;-------------------------------MENU--------------------------------------\n&quot;);
         printf(&quot;Veuillez choisir une operation (en choisissant un nombre entre 1 et 4) :\n&quot;);
         printf(&quot;1 pour addition\n&quot;);
         printf(&quot;2 pour soustraction\n&quot;);
         printf(&quot;3 pour multiplication\n&quot;);
         printf(&quot;4 pour division\n&quot;);
         printf(&quot;Votre choix : &quot;);
         scanf(&quot;%d&quot;,&amp;choix);

    }while(choix &lt; 1 || choix &gt; 4 );        /*En cas d'erreur de saisie*/

    return listeFonctions[choix - 1];       /*On renvoi le pointeur sur la fonction de calcul choisie*/
}

//--------Le main----------
int main(void)
{
     double (*fonctionDeCalcul)(double,double);       /*déclaration du pointeur*/
     double n1,n2;                                    /*Les opérandes*/

     fonctionDeCalcul = affichMenu();                 /*On lit la fonction choisie*/

     printf(&quot;Saisissez les operandes : &quot;);            /*On demande la saisie des opérandes*/
     scanf(&quot;%lf&quot;,&amp;n1);
     scanf(&quot;%lf&quot;,&amp;n2);

     printf(&quot;le resultat du calcul est : %f\n&quot;,(*fonctionDeCalcul)(n1,n2));   /*On affiche le résultat*/

     return 0;
}</code></pre></div><p id="r-461277" data-claire-element-id="461277">Pour résumer, nous allons retenir les choses suivantes :</p><ul id="r-461284" data-claire-element-id="461284"><li id="r-461279" data-claire-element-id="461279"><p id="r-461278" data-claire-element-id="461278">Le pointeur void ne peut pas contenir l'adresse d'une fonction de manière portable et sans pertes.</p></li><li id="r-461281" data-claire-element-id="461281"><p id="r-461280" data-claire-element-id="461280">Le nom d'une fonction permet d'avoir un pointeur sur cette fonction.</p></li><li id="r-461283" data-claire-element-id="461283"><p id="r-461282" data-claire-element-id="461282">La déclaration d'un pointeur de fonction doit respecter le prototype de la fonction sur laquelle il va pointer.</p></li></ul><p id="r-461285" data-claire-element-id="461285">Vous savez à présent à quoi correspond un pointeur sur fonction, alors faites-en bon usage :) .</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1">Les pointeurs sur fonctions</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/le-pointeur-generique-void">
Le pointeur générique (void *)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-sans-retour-procedures">
Fonctions sans retour (procédures)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/fonctions-avec-retour">
Fonctions avec retour
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/appels-de-fonctions-en-utilisant-leurs-adresses">
Appels de fonctions en utilisant leurs adresses
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/tableau-de-pointeurs-sur-fonctions">
Tableau de pointeurs sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/retourner-un-pointeur-sur-fonctions">
Retourner un pointeur sur fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
Passage de pointeur de fonctions en paramètre
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/utilite-des-pointeurs-sur-fonction">
Utilité des pointeurs sur fonction
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/les-pointeurs-sur-fonctions-1/passage-de-pointeur-de-fonctions-en-parametre">
<span class="arrow"></span>
<span class="next">Passage de pointeur de fonctions en paramètre</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/les-pointeurs-sur-fonctions-1.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:59:11 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/les-pointeurs-sur-fonctions-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:39:01 GMT -->
</html>