<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/developper-sous-os-x-avec-cocoa.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 04:04:43 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/developper-sous-os-x-avec-cocoa.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:48:06 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Développer sous OS X avec Cocoa</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/developper-sous-os-x-avec-cocoa.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Développer sous OS X avec Cocoa</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#DveloppersousOSXavecCocoa">Développer sous OS X avec Cocoa</a><br/><a href="#Prsentationd039Objective-C">Présentation d&#039;Objective-C</a><br/><a href="#Objective-C">Objective-C</a><br/><a href="#Principesetsyntaxedulangage">Principes et syntaxe du langage</a><br/><a href="#LesoutilsApple">Les outils Apple</a><br/><a href="#VotrepremierprogrammeObjective-C">Votre premier programme Objective-C</a><br/><a href="#Uneinterfacegraphique">Une interface graphique</a><br/><a href="#Unmodled039organisationducodeleMVC">Un modèle d&#039;organisation du code : le MVC</a><br/><a href="#Crationduprojetetdel039interface">Création du projet et de l&#039;interface</a><br/><a href="#Lecontrleur">Le contrôleur</a><br/><a href="#ditionducode">Édition du code</a><br/><a href="#Deuxstructuresdedonnespratiques">Deux structures de données pratiques</a><br/><a href="#Lestableaux">Les tableaux</a><br/><a href="#Lesdictionnaires">Les dictionnaires</a><br/><a href="#ParcourirdescollectionsNSEnumerator">Parcourir des collections : NSEnumerator</a><br/><a href="#Uncarnetdecommandes">Un carnet de commandes</a><br/><a href="#Crationdenotreinterface">Création de notre interface</a><br/><a href="#Dtaildufichierd039interface">Détail du fichier d&#039;interface</a><br/><a href="#Implmentation">Implémentation</a><br/><a href="#Despetitsajoutsquifonttoutlecharme">Des petits ajouts qui font tout le charme !</a><br/></div>
<a name="DveloppersousOSXavecCocoa"></a><h2>Développer sous OS X avec Cocoa</h2><div class="content" role="article">
<p id="r-451128" data-claire-element-id="451128">Bonjour à tous. ;) Si le Site du Zéro est parfait pour les Windowsiens et Linuxiens qui souhaitent apprendre à développer de vraies applications sous leur système, les &quot;OS X-iens&quot; sont, eux, un peu pénalisés. En effet, Java comme Qt permettent de développer pour OS X, mais il est très difficile de faire en sorte que les applications réalisées avec ces technologies ressemblent à quelque chose sous OS X.</p><p id="r-451129" data-claire-element-id="451129">Si vous avez <a href="http://www.siteduzero.com/tutoriel-3-14189-apprenez-a-programmer-en-c.html">appris le C avec le tutoriel officiel</a>, au moins les deux premières parties (ni SDL ni C++ ne sont requis), alors vous pouvez maintenant apprendre à développer spécifiquement pour OS X, avec XCode, Interface Builder, et tous les outils Apple, pour créer des applications 100 % Mac. ;)</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Prsentationd039Objective-C"></a><h2>Présentation d&#039;Objective-C</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
<span class="next">Objective-C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-451132" data-claire-element-id="451132">Si vous connaissez Qt, Objective-C joue le même rôle que C++ : Cocoa est écrite dans ce langage, et c'est le plus utilisé pour développer avec cette API. Il n'est théoriquement pas spécifique à OS X, mais est très peu utilisé ailleurs. Rassurez-vous, il n'est pas particulièrement compliqué si vous connaissez déjà un petit peu le C. ;)</p>
</div><a name="Objective-C"></a><h2>Objective-C</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">
<span class="arrow"></span>
<span class="next">Présentation d&#039;Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
<span class="next">Principes et syntaxe du langage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-objective-c" data-claire-element-id="451136">Objective-C</h4><p id="r-451133" data-claire-element-id="451133">Le langage Objective-C, abrégé en ObjC, est un sur-ensemble strict du langage C, dans le sens où il ne modifie rien de ce qui touche au C, il ajoute simplement des concepts : lorsque vous écrirez du code pour Cocoa, vous mélangerez en fait les deux, en retrouvant les instructions conditionnelles, les boucles <code data-claire-semantic="c">while </code> et <code data-claire-semantic="c">for </code>, les pointeurs, etc., que vous connaissiez jusqu'à présent. Rassurez-vous cependant : la vie sera nettement facilitée par les objets proposés par Objective-C. :D</p><p id="r-451134" data-claire-element-id="451134">En effet, si ce langage est défini par dessus C, c'est pour introduire des concepts de haut niveau, moins techniques et permettant plus d'abstraction (on se préoccupe moins du fonctionnement de la machine que de la réalisation de l'application ; par exemple, vous n'utiliserez jamais <code>malloc</code> sur des objets ObjC). Parmi ces concepts se trouve la fameuse POO, celle à laquelle vous croyiez peut-être échapper en n'apprenant pas C++ !</p><p id="r-451135" data-claire-element-id="451135">Mais rassurez-vous, tout se passera bien, et il sera sans doute plus facile pour vous d'apprendre Objective-C si vous ignorez encore tout de la POO. Il y a en effet quelques petites différences entre Objective-C et C++. Le premier s'inspire en fait du langage SmallTalk (dont je reparlerai probablement dans quelques mois ( :D ) à la suite de ce tutoriel). En tant que tel, les concepts développés par Objective-C sont simples à comprendre et à mettre en œuvre.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">
<span class="arrow"></span>
<span class="next">Présentation d&#039;Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
<span class="next">Principes et syntaxe du langage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Principesetsyntaxedulangage"></a><h2>Principes et syntaxe du langage</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
<span class="arrow"></span>
<span class="next">Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
<span class="next">Les outils Apple</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-principes-et-syntaxe-du-langage" data-claire-element-id="451153">Principes et syntaxe du langage</h4><p id="r-451137" data-claire-element-id="451137">Voici quelques principes théoriques (et la syntaxe correspondant à leur mise en œuvre) qu'il vous faudra retenir.</p><h5 id="r-les-objets-3" data-claire-element-id="451142">Les objets</h5><p id="r-451138" data-claire-element-id="451138">Les applications développées en Objective-C sont un ensemble d'instructions C classiques, que vous connaissez, et d'objets appartenant à Objective-C. Ces objets vous sont probablement inconnus, mais leur concept est plutôt simple : ce sont des éléments du programme qui contiennent des données qui leur sont propres, capables de recevoir des messages pour interagir avec ces données.</p><p id="r-451139" data-claire-element-id="451139">Ils peuvent servir à représenter n'importe quoi. On peut imaginer des objets de type tableau qui peuvent recevoir des messages &quot;donne l'élément en position X&quot;, ce qui les fait alors renvoyer un tel élément comme résultat, ou bien &quot;supprime l'élément en position Y&quot;, qui ne renvoie pas de résultat mais qui modifie le tableau.</p><p id="r-451140" data-claire-element-id="451140">Les objets sont le jour et la nuit du langage Objective-C. Une application Cocoa n'est rien d'autre qu'un ensemble d'objets interagissant en s'envoyant des messages et en exécutant du code qui leur est propre. Par exemple, quand un utilisateur clique sur un bouton d'une interface graphique, celle-ci envoie un message à un objet appelé &quot;contrôleur de l'application&quot; qui réagit alors d'une certaine façon (il exécute un code qui lui appartient, qui fait intervenir du code C et d'autres objets Objective-C), puis qui peut envoyer à son tour un message à l'interface graphique pour afficher ce résultat.</p><p id="r-451141" data-claire-element-id="451141">La syntaxe pour envoyer un message à un objet en Objective-C est élémentaire : on écrit <code>[objet message];</code>. Notez le point-virgule : envoyer un objet peut représenter une instruction comme les autres. Nous verrons un exemple plus loin dans ce chapitre.</p><h5 id="r-les-classes-8" data-claire-element-id="451152">Les classes</h5><p id="r-451143" data-claire-element-id="451143">Le code correspondant aux objets est écrit dans ce que l'on appelle des classes. Les classes correspondent en fait à un moule dont on peut sortir plusieurs objets (appelés instances). Par exemple, les nombres dans un programme écrit pour Cocoa peuvent être représentés à l'aide des types <code data-claire-semantic="c">int </code>, <code data-claire-semantic="c">long </code>, qui ne sont pas des objets puisqu'ils appartiennent au C, ou à l'aide de la classe <code>NSNumber</code>.</p><p id="r-451144" data-claire-element-id="451144">Notez la ressemblance type / classe : il existe <em>des</em> valeurs de type <code data-claire-semantic="c">int </code>, par exemple 2, 3, 42, qui sont toutes du même type. De même avec NSNumber, on pourrait instancier NSNumber pour obtenir un objet représentant le 2, un représentant le 3, mais tous les objets obtenus auraient la même classe : NSNumber. C'est un peu flou pour l'instant ? Ne vous inquiétez pas, comme je vous l'ai dit nous concrétiserons cela au moyen d'un exemple d'utilisation d'une classe, et dès le chapitre suivant nous définirons nos propres classes.</p><p id="r-451145" data-claire-element-id="451145">Pour l'instant, citons aussi le fait que les objets peuvent posséder ce que l'on appelle des champs, attributs ou encore variables d'instance (abrégé en &quot;ivar&quot;), qui sont des variables internes à chaque objet contenant des informations qui lui sont propres. Par exemple, on peut créer une classe Personne contenant les champs &quot;prénom&quot; et &quot;âge&quot;, et à partir de là instancier des personnes : on peut créer une personne de prénom &quot;Jean&quot; et d'âge 21 (ans), une autre nommée &quot;Paul&quot; et d'âge 35 (ans aussi).</p><p id="r-451146" data-claire-element-id="451146">De plus, comme nous l'avons dit, les objets doivent répondre à des messages, qui sont en fait définis sous forme de méthodes au sein des classes. Les méthodes ressemblent aux fonctions définies en C, sauf qu'elles appartiennent à la classe qui les contient. On peut par exemple ajouter une méthode &quot;direAge&quot; à la classe Personne, dans laquelle on écrira un code correspondant à l'affichage de l'âge sur l'écran (via printf par exemple), et alors nos deux objets correspondant à Jean et Paul sauront dire leur âge : si une variable <code>jean</code> contient le premier objet, on pourra par exemple écrire <code>[jean direAge]</code>.</p><p id="r-451147" data-claire-element-id="451147">Naturellement les méthodes peuvent recevoir des paramètres, qui viennent alors après deux points. Par exemple, certains objets (de la classe NSFileManager) peuvent déplacer des fichiers grâce à la méthode <code>movePath:toPath:handler:</code>. Sous cette notation barbare, il faut voir que 3 arguments sont attendus : le chemin de départ (une chaîne), le chemin d'arrivée (une chaîne aussi), et un objet <em>handler</em> chargé de gérer le déplacement en cas d'erreur (par exemple ce serait à cet objet qu'il incomberait de demander son mot de passe à l'utilisateur). Et cela s'utilise alors comme ceci (nous reviendrons sur la notation @&quot;&quot; pour les chaînes, ainsi que sur le mot <code>nil</code>) :</p><pre id="r-451148" data-claire-element-id="451148"><code data-claire-semantic="objective-c">[unManager movePath:@&quot;/Users/poulet/fichier&quot; toPath:@&quot;/Users/poulet/nouveau&quot; handler:nil];</code></pre><p id="r-451149" data-claire-element-id="451149">Voici un exemple de code permettant de définir et d'utiliser un objet qui est une instance de la classe MaClasse. Notez que, du côté du C, on manipule un pointeur, mais que la syntaxe Objective-C d'envoi des messages ne fait pas apparaître ce pointeur :</p><pre id="r-451150" data-claire-element-id="451150"><code data-claire-semantic="objective-c">MaClasse * unObjet = [[MaClasse alloc] init]; /* On alloue un objet en envoyant un message à la classe. */
                                             /* L'objet renvoyé par [MaClasse alloc] reçoit alors le message &quot;init&quot;. */
[unObjet setIntValue:3];  /* Supposons que les objets de MaClasse aient une méthode setIntValue qui stocke un int. */
int foo = [unObjet intValue]; /* Et que cet int puisse être récupéré à l'aide de la méthode intValue. :) */</code></pre><p id="r-451151" data-claire-element-id="451151">Dans ce code, le sens des messages peut vous échapper pour l'instant. Nous reviendrons sur le chaînage alloc/init : comprenez juste que le premier message a été envoyé à la classe pour créer un nouvel objet, et qu'on a tout de suite envoyé le message init au résultat pour disposer d'un objet utilisable.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
<span class="arrow"></span>
<span class="next">Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
<span class="next">Les outils Apple</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesoutilsApple"></a><h2>Les outils Apple</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
<span class="arrow"></span>
<span class="next">Principes et syntaxe du langage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
<span class="next">Votre premier programme Objective-C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-outils-apple" data-claire-element-id="451164">Les outils Apple</h4><p id="r-451154" data-claire-element-id="451154">Pour développer efficacement avec Cocoa, il convient d'utiliser les outils développeurs proposés par Apple sur le DVD d'installation de votre système, ou éventuellement sur le site officiel d'Apple. Il est plus que probable que vous l'ayez déjà utilisé pour installer le compilateur GCC, mais on ne sait jamais. Si vous n'aviez pas fait d'installation complète, faites-le maintenant, nous aurons besoin de la quasi-totalité des outils Apple.</p><p id="r-451155" data-claire-element-id="451155">La liste des principaux outils que nous utiliserons se trouve ci-dessous.</p><ul id="r-451162" data-claire-element-id="451162"><li id="r-451157" data-claire-element-id="451157"><p id="r-451156" data-claire-element-id="451156">XCode : l'IDE développé par Apple nous permettra de gérer nos différents fichiers source, ainsi que de régler un certain nombre de paramètres qui seraient plus que pénibles à définir à la main. Par exemple, il permet simplement de faire des applications tournant à la fois sur processeurs Intel (macintoshs récents) ou PPC (modèles plus anciens).</p></li><li id="r-451159" data-claire-element-id="451159"><p id="r-451158" data-claire-element-id="451158">L'outil de documentation : accessible depuis le menu &quot;Help&quot; de XCode, il vous permettra de naviguer dans la documentation sobre mais plutôt complète installée avec les outils développeurs. Vous y trouverez l'ensemble des classes intégrées à Cocoa, avec à chaque fois une description de l'ensemble des méthodes supportées par les classes.</p></li><li id="r-451161" data-claire-element-id="451161"><p id="r-451160" data-claire-element-id="451160">Interface Builder : cet outil nous servira à dessiner les interfaces de nos applications, ainsi qu'à relier ces interfaces au code écrit dans XCode. Écrire le code d'une interface graphique est plus qu'agaçant : Interface Builder nous permettra de simplifier cette tâche ingrate.</p></li></ul><p id="r-451163" data-claire-element-id="451163">Vous avez peut-être déjà utilisé XCode pour écrire du C. Nous allons découvrir Objective-C au moyen d'un exemple en ligne de commande, ce qui vous rappellera certainement des souvenirs du cours de M@teo21.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
<span class="arrow"></span>
<span class="next">Principes et syntaxe du langage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
<span class="next">Votre premier programme Objective-C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="VotrepremierprogrammeObjective-C"></a><h2>Votre premier programme Objective-C</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
<span class="arrow"></span>
<span class="next">Les outils Apple</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">
<span class="next">Une interface graphique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-votre-premier-programme-objective-c" data-claire-element-id="451186">Votre premier programme Objective-C</h4><h5 id="r-pas-un-hello-world-mais-presque" data-claire-element-id="451173">Pas un hello world, mais presque</h5><p id="r-451165" data-claire-element-id="451165">Vous allez être déçu : pour l'instant, notre premier programme en Objective-C sera encore en ligne de commande, et il ne fera pas grand chose. Nous verrons dès le chapitre suivant comment créer et piloter une interface graphique, mais restons modestes pour le moment.</p><p id="r-451166" data-claire-element-id="451166">Lancez XCode, faites un nouveau projet (File -&gt; New Project), et sélectionnez &quot;Foundation Tool&quot; dans la liste des types de projets disponibles. Sous Tiger, le menu ressemble à :</p><figure id="r-451168" data-claire-element-id="451169"><img id="r-451167" data-claire-element-id="451167" src="medias/uploads.siteduzero.com_files_195001_196000_195094.png" alt="Image utilisateur"/></figure><p id="r-451170" data-claire-element-id="451170">XCode vous demande ensuite un nom et un chemin où enregistrer votre projet ; mettez par exemple &quot;PremierProgramme&quot;. Une fenêtre représentant votre projet s'affiche alors, dans laquelle sont listés plusieurs fichiers. Celui qui nous intéresse ici est &quot;PremierProgramme.m&quot; : les codes source Objective-C se terminent par <em>.m</em>.</p><p id="r-451171" data-claire-element-id="451171">Double-cliquez sur ce fichier pour afficher l'éditeur. Un début de code est déjà présent : vous reconnaîtrez des instructions C, et aussi du code correspondant à Objective-C. Éditez le code de façon à ce qu'il soit le suivant :</p><pre id="r-451172" data-claire-element-id="451172"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

int main (int argc, const char * argv[]) {
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    NSDate * jour = [NSDate date];

    NSLog(@&quot;Nous sommes aujourd\'hui %@&quot;, jour);

    [pool release];
    return 0;
}</code></pre><h5 id="r-explications-34" data-claire-element-id="451185">Explications</h5><p id="r-451174" data-claire-element-id="451174">Ceci n'est pas du code C habituel. Vous reconnaîtrez d'abord une sorte de directive <code data-claire-semantic="c">#include </code> qui n'en est pas une. Cette directive-ci vise à éviter les inclusions multiples, et est utilisée pour les en-tête concernant Objective-C. Notez que l'on inclut encore un .h, ça n'a pas changé. Par contre, on inclut ici l'en-tête de la &quot;Foundation&quot;, qui sert à faire des programmes Objective-C en ligne de commande. Nous en reparlerons peut-être dans un annexe, pour des raisons culturelles. :)</p><p id="r-451175" data-claire-element-id="451175">Notez la définition de deux objets : un de la classe NSAutoreleasePool, qui était déjà là lorsque vous avez ouvert le .m généré par XCode, et un de la classe NSDate. Le premier sert à gérer la mémoire à notre place, nous ne nous y intéresserons pas pour l'instant. Le second, c'est à vous de le rajouter : la classe NSDate sert à représenter des dates. Envoyer le message date à la classe NSDate elle-même provoque la création d'une nouvelle instance contenant la date actuelle.</p><p id="r-451176" data-claire-element-id="451176">Remarquez aussi la fonction C NSLog, appartenant à la Foundation. Cette fonction ressemble à <code>printf</code>, et sert à écrire des logs (c'est-à-dire des journaux, pour suivre le déroulement du programme lorsqu'il est encore susceptible de planter) utiles au développeur (qui seront affichés sur la sortie d'erreur standard). Elle prend en premier argument obligatoire non pas un <code>char *</code> comme en C, mais une NSString. C'est pour cette raison que le code contient non pas des guillemets doubles comme en C, mais des guillemets doubles précédés d'un arobase, notation raccourcie pour les instances de la classe NSString. Pour le reste, le fonctionnement de NSLog est le même que printf.</p><p id="r-451177" data-claire-element-id="451177">On passe alors à NSLog une chaîne de format contenant le symbole &quot;%@&quot; : ce symbole bien pratique sert à afficher des informations sur les objets passés à la suite de la NSString. En fait, il envoie simplement le message <code>description</code> à ces objets, et attends le résultat qui sera une NSString.</p><p id="r-451178" data-claire-element-id="451178">Vous pouvez alors compiler et lancer ce programme grâce à au bouton &quot;Build and run&quot;. Comme il ne contient normalement pas d'erreurs, il devrait alors se lancer, éventuellement en même temps que le débuggeur GDB. Ce dernier ne nous intéresse pas pour l'instant. Vous obtenez alors quelque chose comme :</p><pre id="r-451179" data-claire-element-id="451179"><code data-claire-semantic="console">[Session started at 2009-06-16 23:43:29 +0200.]
2009-06-16 23:43:30.170 PremierProgramme[3206] Nous sommes aujourd'hui 2009-06-16 23:43:30 +0200

PremierProgramme has exited with status 0.</code></pre><aside id="r-451182" data-claire-element-id="451182" data-claire-semantic="warning"><p id="r-451180" data-claire-element-id="451180">Si le programme ne se lance pas (vous obtenez seulement la fenêtre du débuggueur), vous pouvez régler les préférences en passant par Xcode --&gt; Preferences --&gt; Debugging --&gt; On Start: --&gt; Show Console &amp; Debugger, ou bien retourner dans la fenêtre XCode et double-cliquer sur l'exécutable (c'est le fichier qui porte le nom de votre projet, sans extension).</p><p id="r-451181" data-claire-element-id="451181">Cela n'a toutefois pas grande importance puisque dans les prochains chapitres nous réaliserons des programmes graphiques. ;) .</p></aside><p id="r-451183" data-claire-element-id="451183">La date récupérée est naturellement presque la même que celle affichée par NSLog, puisque l'objet date est créé un tout petit peu avant. L'essentiel est que vous ayez compris ce qui se passait. ;) Naturellement, l'affichage renvoyé par la méthode <code>description</code> n'est pas très &quot;humain&quot;. Vous pourriez chercher dans l'aide sur la classe NSDate quelle méthode correspondrait à un formatage plus agréable de la date.</p><p id="r-451184" data-claire-element-id="451184">Vous venez de réaliser votre premier programme en Objective-C ! Celui-ci n'utilisait qu'une petite partie de Cocoa, et n'était pas vraiment génial, mais bon, il faut bien commencer quelque part. Dès le chapitre suivant, nous réutiliserons ce que nous avons appris sur les classes, les objets et les messages pour faire un programme graphique. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
<span class="arrow"></span>
<span class="next">Les outils Apple</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">
<span class="next">Une interface graphique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Uneinterfacegraphique"></a><h2>Une interface graphique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
<span class="arrow"></span>
<span class="next">Votre premier programme Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
<span class="next">Un modèle d&#039;organisation du code : le MVC</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-451188" data-claire-element-id="451188">Nous allons maintenant créer une application graphique, avec une vraie fenêtre et de vrais boutons. Rien d'exceptionnel : nous proposerons juste à l'utilisateur de taper du texte dans un champ approprié, puis de cliquer sur un bouton pour l'afficher en majuscules ou en minuscules. Mais derrière la simplicité de cette application se cachent de nombreux concepts avec lesquels vous devrez vous familiariser car ils vous suivront partout. :)</p>
</div><a name="Unmodled039organisationducodeleMVC"></a><h2>Un modèle d&#039;organisation du code : le MVC</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">
<span class="arrow"></span>
<span class="next">Une interface graphique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
<span class="next">Création du projet et de l&#039;interface</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-un-modele-d-organisation-du-code-le-mvc-1" data-claire-element-id="451198">Un modèle d'organisation du code : le MVC</h4><h5 id="r-principe-de-l-architecture-mvc" data-claire-element-id="451193">Principe de l'architecture MVC</h5><p id="r-451189" data-claire-element-id="451189">Lorsque nous écrirons le code d'une application, il faudra concevoir son code et son allure à différents niveaux. Il y aura ce que notre application fera, et ce de quoi elle aura l'air, et, entre les deux, la façon de relier ces deux concepts. Nous distinguerons donc plusieurs logiques dans la conception et l'organisation de nos applications.</p><p id="r-451190" data-claire-element-id="451190">Cette façon de faire s'appelle le MVC, pour Modèle, Vue, Contrôleur. Notre modèle est ce que l'application fait, les données qu'elle manipule, et ainsi de suite. La vue est une interface pour l'utilisateur, celle sur laquelle il clique ou lit des résultats. C'est le contrôleur qui relie alors ces deux concepts, en recevant des messages de l'interface et en interrogeant le modèle pour ensuite envoyer le résultat à la première.</p><p id="r-451191" data-claire-element-id="451191">On obtient alors plusieurs couches de code qui sont le plus possible indépendantes : a priori, si l'architecture MVC est bien respectée, on peut alors changer par exemple la façon dont l'application gère le format des fichiers (qui doit se trouver dans la partie &quot;Modèle&quot;) sans toucher ni au code de l'interface, ni au code du contrôleur. De plus, séparer le modèle du reste permet également d'y accéder à l'aide d'interfaces différentes de l'interface graphique : par exemple, le logiciel Automator proposé par Apple est capable d'accéder à différentes fonctionnalités proposées par les applications. Ces fonctionnalités sont bien proposées par le modèle, et certainement pas par la vue ni le contrôleur. :)</p><p id="r-451192" data-claire-element-id="451192">L'origine de l'organisation MVC remonte aux origines du langage Smalltalk, donc dans la fin des années 70. Il est donc normal de retrouver ce concept au sein de Cocoa, qui est un héritier de Smalltalk.</p><h5 id="r-au-sein-de-cocoa" data-claire-element-id="451197">Au sein de Cocoa</h5><p id="r-451194" data-claire-element-id="451194">Nous allons, avant de passer à l'exemple de ce chapitre, tenter de prévoir tout ce que nous allons faire. J'ai décrit l'interface de l'application dans l'introduction ; tout ce qu'il nous restera à faire, cela sera de la dessiner en utilisant Interface Builder. Dans ce dernier, nous découvrirons alors la possibilité de créer un objet contrôleur, puis de tracer (à la souris !) des connexions entre l'interface et cet objet.</p><p id="r-451195" data-claire-element-id="451195">Nous obtiendrons alors (Interface Builder les génère pour nous, en partie) du code sous la forme d'un .h et d'un .m, décrivant la classe dont sera issu notre objet contrôleur. :)</p><p id="r-451196" data-claire-element-id="451196">Notre application est ici trop simple pour disposer d'un vrai modèle clairement séparé du contrôleur. Tout ce que nous allons faire, c'est mettre en majuscules ou en minuscules ce qu'un utilisateur vient d'entrer !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">
<span class="arrow"></span>
<span class="next">Une interface graphique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
<span class="next">Création du projet et de l&#039;interface</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Crationduprojetetdel039interface"></a><h2>Création du projet et de l&#039;interface</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
<span class="arrow"></span>
<span class="next">Un modèle d&#039;organisation du code : le MVC</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
<span class="next">Le contrôleur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-creation-du-projet-et-de-l-interface-1" data-claire-element-id="451208">Création du projet et de l'interface</h4><p id="r-451199" data-claire-element-id="451199">Lancez XCode, ou fermez le projet que vous étiez en train d'éditer, et lancez un nouveau projet. Cette fois-ci, sélectionnez &quot;Application&gt;Cocoa Application&quot;. Donnez un nom à votre application, par exemple &quot;Perroquet&quot; (pourquoi pas ?), et observez la fenêtre XCode qui s'affiche. Elle contient davantage de fichiers que la dernière fois : d'une part, de nouveaux frameworks sont inclus dans l'application. D'autre part, l'exécutable est cette fois-ci présenté sous forme de .app. Enfin, et surtout, XCode liste un fichier dont le nom ressemble à &quot;MainMenu.nib&quot;, ou à partir de Leopard &quot;MainMenu.xib&quot; ; ouvrez ce fichier.</p><p id="r-451200" data-claire-element-id="451200">C'est le fichier de notre interface. Le &quot;.nib&quot; correspond à &quot;NeXT Interface Builder&quot;, pour des raisons historiques. Cocoa est une API descendant en effet de celle du système NeXTStep, dont le développement était dirigé par Steve Jobs pendant la période qu'il a passée hors d'Apple, après son licenciement. Lors de son retour à la tête d'Apple à la fin des années 90, il a alors racheté NeXT et ses technologies pour lancer le développement de Mac OS X. Le &quot;.xib&quot;, c'est la même chose, simplement le format a évolué au fil du temps. ;)</p><p id="r-451201" data-claire-element-id="451201">Vous obtenez 4 ou 5 fenêtres, dont une totalement vide, qui attend que vous dessiniez l'interface. Il y a quelques petites différences entre la version Leopard (que je n'ai pas) et la version Tiger (ou les précédentes). La première se situe au niveau du dessin de l'interface : sous Leopard, vous disposez d'un outil de recherche qui vous permet de trouver facilement les widgets (ce sont les composants de l'interface graphique) dans la fenêtre qui les répertorie. En effet, normalement une petite fenêtre que l'on nomme &quot;Palette&quot;, accessible via le menu &quot;Tools&gt;Palettes&gt;Show Palette&quot;, contient un ensemble de widgets que vous pouvez faire glisser sur la fenêtre vide placée au milieu de votre écran.</p><p id="r-451202" data-claire-element-id="451202">Faites glisser des widgets depuis la palette jusque sur la fenêtre vide. Vous pouvez les redimensionner, et si vous les déplacez lentement Interface Builder affiche des traits pointillés bleus pour vous aider à les aligner les uns avec les autres, ou à les placer à &quot;bonne distance&quot; (celle définie dans les conventions publiées par Apple) des bords de la fenêtre. Vous pouvez également changer le texte affiché dans les différents widgets. Essayez d'obtenir le résultat suivant :</p><figure id="r-451204" data-claire-element-id="451205"><img id="r-451203" data-claire-element-id="451203" src="medias/uploads.siteduzero.com_files_180001_181000_180500.png" alt="Image utilisateur"/></figure><p id="r-451206" data-claire-element-id="451206">Ici vous voyez 5 widgets : 2 NSButton, 2 NSTextField servant à afficher du texte et 1 NSTextField pour la saisie. Faites maintenant &quot;Tool&gt;Show inspector&quot; pour afficher l'outil inspecteur. En sélectionnant différents éléments de votre interface puis en réglant leurs paramètres dans cet inspecteur vous pouvez configurer à loisir votre application. Notamment, vous pouvez aller dans le menu Size et cliquer sur les fils situés en bas de cette partie de l'inspecteur, dans la boîte nommée &quot;Autosizing&quot;. Des ressorts apparaissent ; ils correspondent au comportement de vos widgets les uns par rapport aux autres lorsque l'utilisateur redimensionne la fenêtre.</p><p id="r-451207" data-claire-element-id="451207">Vous pouvez essayer d'en activer quelques-uns, puis tester votre interface en faisant Cmd+r. Interface Builder lance alors votre interface comme s'il s'agissait d'une vraie application, que vous pouvez quitter en faisant Cmd+q. Mais assez joué.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
<span class="arrow"></span>
<span class="next">Un modèle d&#039;organisation du code : le MVC</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
<span class="next">Le contrôleur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lecontrleur"></a><h2>Le contrôleur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
<span class="arrow"></span>
<span class="next">Création du projet et de l&#039;interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
<span class="next">Édition du code</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-controleur-20" data-claire-element-id="451222">Le contrôleur</h4><p id="r-451209" data-claire-element-id="451209">Il est temps maintenant de définir dans Interface Builder notre contrôleur, qui permettra à notre application d'être vraiment utilisable. Selon votre version d'Interface Builder, suivez l'une de ces deux démarches.</p><h5 id="r-si-vous-etes-sous-tiger" data-claire-element-id="451219">Si vous êtes sous Tiger</h5><p id="r-451210" data-claire-element-id="451210">Dans la fenêtre intitulée &quot;MainMenu.nib&quot;, allez dans l'onglet &quot;Classes&quot;. Remontez l'arborescence de classes vers la racine (à gauche) et sélectionnez puis ctrl-cliquez sur NSObject pour sélectionner la commande &quot;Subclass NSObject&quot;. Une classe nommée &quot;MyObject&quot; est alors définie, renommez-la en &quot;Controller&quot;. Sélectionnez maintenant le menu &quot;Attributes&quot; dans l'inspecteur. Nous pouvons définir deux choses : les actions (messages) susceptibles d'être reçus par le contrôleur, et les outlets (éléments de l'interface connus par le contrôleur) auxquels il pourra envoyer des messages. C'est vraiment un intermédiaire entre deux mondes que nous définissons ici. :)</p><p id="r-451211" data-claire-element-id="451211">Nous voulons définir deux actions : clicmin, envoyé lorsque l'utilisateur cliquera sur le bouton des minuscules, et clicmaj, envoyé lorsqu'il cliquera sur l'autre bouton. Sélectionnez l'onglet &quot;Action&quot; dans le panneau &quot;Attributes&quot; de l'inspecteur, et ajoutez deux actions grâce au bouton &quot;Add&quot;. Renommez-les en &quot;clicmin:&quot; et &quot;clicmaj:&quot; pour obtenir ceci :</p><figure id="r-451213" data-claire-element-id="451214"><img id="r-451212" data-claire-element-id="451212" src="medias/uploads.siteduzero.com_files_180001_181000_180501.png" alt="Image utilisateur"/></figure><p id="r-451215" data-claire-element-id="451215">De même, définissez trois outlets : &quot;entry&quot;, &quot;champmin&quot; et &quot;champmaj&quot;, tous trois de type NSTextField. Le premier sera le champ de saisie du texte. Les deux autres seront respectivement les champs d'affichage du texte en minuscules et en majuscules.</p><p id="r-451216" data-claire-element-id="451216">Retournez dans la fenêtre &quot;MainMenu.nib&quot; et faites un ctrl-clic à nouveau pour choisir &quot;Instantiate Controller&quot;. Interface Builder vous ramène à l'onglet &quot;Instances&quot;, dans lequel vous pouvez sélectionner le cube nommé Controller, puis afficher le menu &quot;Connections&quot; dans l'inspecteur. Nous instancions en fait notre classe Controller pour avoir le contrôleur de notre application. Graphiquement, nous allons relier les actions et les outlets pour que tout fonctionne.</p><p id="r-451217" data-claire-element-id="451217">Ceci se fait par ctrl-clic glissé. En fait, en maintenant la touche ctrl enfoncée, cliquez par exemple sur le bouton &quot;Majuscules&quot; et glissez en maintenant le bouton de votre souris enfoncé jusqu'au cube représentant votre instance de Controller. Lorsque vous y êtes, relâchez : dans l'inspecteur, Interface Builder vous demande alors de choisir une action. Naturellement, vous choisissez l'action &quot;clicmaj:&quot;. ;) Faites de même pour le bouton &quot;Minuscules&quot;, en le reliant à l'action &quot;clicmin:&quot;.</p><p id="r-451218" data-claire-element-id="451218">Pour relier le contrôleur aux outlets, il faut procéder dans l'autre sens. Faites un ctrl-clic maintenu du contrôleur jusqu'au NSTextField qui servira à entrer du texte, et relâchez : Interface Builder vous propose de choisir un des trois outlets que nous avions définis. Choisissez celui qui s'appelle &quot;entry&quot;, et cliquez sur &quot;Connect&quot;. Je vous laisse relier les deux champs restants, je pense que vous avez deviné ce qu'ils désignaient et ce que vous deviez en faire. ;)</p><h5 id="r-si-vous-etes-sous-leopard" data-claire-element-id="451221">Si vous êtes sous Leopard</h5><p id="r-451220" data-claire-element-id="451220">Comme je vous l'ai dit, je n'ai pas Leopard chez moi. J'apprécierais donc des retours de votre part quant à la mise en place du contrôleur sous ce système. Il est probable que cela fonctionne presque comme sous Tiger, à deux ou trois détails près. Si vous vous sentez l'âme d'un explorateur, c'est à vous de jouer ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
<span class="arrow"></span>
<span class="next">Création du projet et de l&#039;interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
<span class="next">Édition du code</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ditionducode"></a><h2>Édition du code</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
<span class="arrow"></span>
<span class="next">Le contrôleur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">
<span class="next">Deux structures de données pratiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-edition-du-code-1" data-claire-element-id="451242">Édition du code</h4><p id="r-451223" data-claire-element-id="451223">Repassez dans l'onglet &quot;Classes&quot;, faites un ctrl-clic sur notre classe &quot;Controller&quot; et sélectionnez &quot;Create files for Controller&quot;. Ceci va générer dans XCode deux fichiers : un Controller.h et un Controller.m qui correspondent à l'objet Controller que nous voulons définir. Sauvegardez le fichier .nib et fermez Interface Builder, avant de revenir dans XCode. Les deux nouveaux fichiers sont là.</p><h5 id="r-fichier-d-interface" data-claire-element-id="451229">Fichier d'interface</h5><p id="r-451224" data-claire-element-id="451224">Si vous ouvrez Controller.h, vous lirez la déclaration de notre classe : elle commence avec le mot clef <code>@interface</code>. On lit ensuite <code>Controller : NSObject</code>, qui explique que la classe Controller hérite de la classe NSObject (si vous ne savez pas ce que cela veut dire, nous y reviendrons plus tard, ici cela n'a aucune importance). Entre les accolades sont définies trois variables d'instance ; ce sont les trois NSTextField que notre contrôleur doit connaître pour pouvoir communiquer avec l'interface. ;) Notez le mot clef <code>IBOutlet</code>, qui est là pour préciser que ce sont des éléments de l'interface.</p><p id="r-451225" data-claire-element-id="451225">Après les accolades viennent les déclarations des deux méthodes que nous avions évoquées précédemment. La syntaxe est la suivante :</p><pre id="r-451226" data-claire-element-id="451226"><code data-claire-semantic="objective-c">- (Type de retour) nomDeLaMethode;   /* Si la méthode ne prend pas d'argument */
- (Type de retour) nomDeLaMethode:(Type argument 1)arg1;  /* Si elle en prend un */
- (Type de retour) nomDeLaMethode:(Type argument 1)arg1 quiPrendPlusieursArguments:(Type argument 2)arg2; /* Si la méthode en prend deux, etc. */</code></pre><p id="r-451227" data-claire-element-id="451227">Ici, le type de retour est <code>IBAction</code> : c'est une indication, la méthode est invoquée par l'interface graphique et n'est pas censée renvoyer quoi que ce soit. Elle prend un seul argument, à savoir le widget qui a déclenché l'action (par exemple ici les deux actions seront envoyées par les boutons : un objet désignant le bouton sur lequel l'utilisateur a cliqué sera envoyé à chaque fois). Son type est noté <code>id</code>, c'est une façon de dire &quot;tous les types sont possibles&quot; ; nous y reviendrons plus tard.</p><p id="r-451228" data-claire-element-id="451228">Ce fichier ne correspond qu'à une déclaration de certaines propriétés vérifiées par notre objet. Nous devons maintenant écrire le code des deux méthodes listées ici (et éventuellement d'autres, la liste contenue dans le .h n'est pas nécessairement exhaustive).</p><h5 id="r-fichier-d-implementation" data-claire-element-id="451241">Fichier d'implémentation</h5><p id="r-451230" data-claire-element-id="451230">Si vous ouvrez Controller.m, vous lirez l'implémentation de notre classe : elle commence avec le mot clef <code>@implementation</code>. Les deux méthodes à implémenter attendent ensuite que vous écriviez leur code. Lorsque l'utilisateur clique sur un bouton, c'est qu'il a (théoriquement) entré du texte dans la case <code>entry</code>. Nous pouvons donc récupérer le contenu de cette case. Nous le stockerons dans une variable temporaire (locale), puis nous le mettrons en majuscules ou en minuscules avant de l'afficher au bon endroit.</p><p id="r-451231" data-claire-element-id="451231">Voici le code que je vous propose pour cette tâche :</p><pre id="r-451232" data-claire-element-id="451232"><code data-claire-semantic="objective-c">- (IBAction)clicmaj:(id)sender
{
    NSString * s = [entry stringValue];
    [champmaj setStringValue:[s uppercaseString]];
}</code></pre><p id="r-451233" data-claire-element-id="451233">La première ligne déclare une NSString qui demande (via le message <code>stringValue</code>) au champ <code>entry</code> ce qu'il contient. La deuxième ligne est plus compliquée (j'ai fait exprès !) : lisez d'abord le contenu des crochets qui sont à l'intérieur de l'autre message, à savoir <code>[s uppercaseString]</code>. Le message <code>uppercaseString</code>, envoyé à une NSString, renvoie la chaîne en majuscules. Par exemple, le code</p><pre id="r-451234" data-claire-element-id="451234"><code data-claire-semantic="objective-c">NSString * foo = @&quot;Salut&quot;;
NSLog(@&quot;%@&quot;, [NSString uppercaseString]);</code></pre><p id="r-451235" data-claire-element-id="451235">affichera &quot;SALUT&quot; à l'écran.</p><p id="r-451236" data-claire-element-id="451236">Mais le résultat n'est pas stocké dans une quelconque variable ; il est directement utilisé comme argument d'un message envoyé à <code>champmaj</code>, qui demande au NSTextField d'afficher l'argument donné (donc la chaîne mise en majuscules). On évite ici de passer par une variable intermédiaire sans trop sacrifier à la lisibilité.</p><aside id="r-451238" data-claire-element-id="451238" data-claire-semantic="information"><p id="r-451237" data-claire-element-id="451237">On aurait même pu se passer de la variable <code>s</code> en faisant <code>[champmaj setStringValue:[entry stringValue] uppercaseString]]</code>, car la chaîne retournée par <code>[entry stringValue]</code> peut, après tout, recevoir directement le message <code>uppercaseString</code>. Mais c'est moins lisible :D .</p></aside><p id="r-451239" data-claire-element-id="451239">Je vous laisse écrire le code de l'autre méthode. Petit indice : le message à utiliser pour mettre une chaîne en minuscules est <code>lowercaseString</code>. ;) Ne vous trompez pas de champ !</p><p id="r-451240" data-claire-element-id="451240">Ça n'était pas trop difficile, si ?</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
<span class="arrow"></span>
<span class="next">Le contrôleur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">
<span class="next">Deux structures de données pratiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Deuxstructuresdedonnespratiques"></a><h2>Deux structures de données pratiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
<span class="arrow"></span>
<span class="next">Édition du code</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
<span class="next">Les tableaux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-451244" data-claire-element-id="451244">Avec Cocoa, il nous faudra bien sûr savoir stocker des données de différentes natures au sein du modèle, pour pouvoir effectuer des opérations dessus ou tout simplement savoir les restituer à l'utilisateur. Objective-C nous offre deux façons différentes de réaliser cet objectif, les tableaux (NSArray) et les dictionnaires (NSDictionary). Comme nous aurons à les utiliser toutes les deux, autant les décrire dès maintenant, et expliquer à quoi elles servent. ;)</p><p id="r-451245" data-claire-element-id="451245">Ce chapitre est plus théorique que pratique, même si nous aurons l'occasion d'utiliser ce qu'il contient dès le chapitre suivant. Les codes que je donne sont là à titre d'exemples, mais vous pourriez avoir envie de les modifier, de les compléter et de les tester, auquel cas je vous conseille de relire le chapitre 1 pour savoir comment faire. :)</p><aside id="r-451247" data-claire-element-id="451247" data-claire-semantic="warning"><p id="r-451246" data-claire-element-id="451246">Vous n'êtes pas obligé de retenir l'intégralité de ce que je vais raconter. Connaître l'intégralité de Cocoa est impossible, et inutile : il vaut mieux que vous compreniez le principe, puis que vous appreniez à chercher par vous même dans la documentation Apple quels objets utiliser, et comment ils fonctionnent, plutôt que de vouloir retenir des listes de centaines de méthodes !</p></aside>
</div><a name="Lestableaux"></a><h2>Les tableaux</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">
<span class="arrow"></span>
<span class="next">Deux structures de données pratiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
<span class="next">Les dictionnaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-tableaux-31" data-claire-element-id="451276">Les tableaux</h4><h5 id="r-nsarray" data-claire-element-id="451269">NSArray</h5><h6 id="r-le-principe-20" data-claire-element-id="451251">Le principe</h6><p id="r-451248" data-claire-element-id="451248">Souvent, nous n'aurons envie que de ranger des objets dans un certain ordre, pour les conserver. Il faut alors utiliser une structure dite de tableau (array en anglais). Cela correspond à la classe NSArray en Objective-C. Cette structure de données reprend le schéma que vous connaissez déjà grâce au tutoriel de M@teo21, à savoir stocker des éléments en leur attribuant à chacun un index, qui est un nombre entier.</p><p id="r-451249" data-claire-element-id="451249">Pourquoi alors utiliser une nouvelle structure de données, me demanderez-vous ? Tout simplement parce que la structure de tableaux du C est une structure de bas niveau, dont l'utilisation avec les types de données d'Objective-C serait complexe. Notamment, il faudrait se demander comment les objets d'Objective-C sont représentés du côté du C, ce qui est bien au-delà de nos préoccupations pour l'instant.</p><p id="r-451250" data-claire-element-id="451250">La classe NSArray nous donne donc la possibilité de gérer simplement des tableaux d'objets Objective-C. Attention, les valeurs habituelles du C ne seront pas autorisées, pour des raisons que nous verrons au chapitre 5. Les NSArray sont de taille fixe, comme les tableaux C, mais comme ceux-ci ils peuvent être réalloués pour contenir un nombre différent d'éléments. La classe NSArray propose en outre des méthodes permettant d'interagir avec les éléments du tableau, et, ce qui est non-négligeable, un même NSArray peut contenir des objets de plusieurs classes différentes.</p><h6 id="r-creer-un-nsarray" data-claire-element-id="451260">Créer un NSArray</h6><p id="r-451252" data-claire-element-id="451252">Pour créer une nouvelle instance de NSArray, il faut procéder comme toujours : déclarer un pointeur vers un NSArray, et instancier l'objet en envoyant le bon message à la classe, qui renverra alors un nouvel NSArray contenant ce que nous voulions. Le message le plus simple est <code data-claire-semantic="objective-c">array </code>, qui retourne un nouvel objet NSArray vide. Pas très utile, a priori, puisque celui-ci ne pourra pas être modifié pour que l'on y ajoute de nouveaux éléments. :D Si vous avez déjà une petite expérience de la programmation orientée objet, sachez que ce message est là pour être réimplémenté par les classes héritant de NSArray. ;)</p><p id="r-451253" data-claire-element-id="451253">Il existe donc d'autres messages que <code data-claire-semantic="objective-c">array </code>. Commençons par citer <code data-claire-semantic="objective-c">arrayWithObject: </code>, qui prend en argument un objet à stocker. C'est un peu mieux, mais à peine. Alors, pour créer un tableau de <em>plusieurs</em> objets, il existe <code data-claire-semantic="objective-c">arrayWithObjects: </code> (notez le s), qui attend <em>plusieurs</em> arguments, le dernier étant la valeur spéciale <code data-claire-semantic="objective-c">nil </code>. Par exemple :</p><pre id="r-451254" data-claire-element-id="451254"><code data-claire-semantic="objective-c">NSArray *myArray;
    NSDate *uneDate = [NSDate date];
    NSValue *uneValeur = [NSNumber numberWithInt:5];
    NSString *uneChaine = @&quot;une chaîne&quot;;
 
    myArray = [NSArray arrayWithObjects:uneDate, uneValeur, uneChaine, nil];
    NSLog(@&quot;%@&quot;, myArray);</code></pre><p id="r-451255" data-claire-element-id="451255">Ici, la déclaration et l'instanciation du tableau sont séparées, ce qui ne pose aucun problème. Le tableau contient tous les éléments souhaités, même si leurs types diffèrent.</p><p id="r-451256" data-claire-element-id="451256">Si votre tableau a déjà été créé (en envoyant le message <code data-claire-semantic="objective-c">alloc </code> à la classe NSArray) mais qu'il n'a pas encore été initialisé, vous pouvez le faire en lui envoyant le messages <code data-claire-semantic="objective-c">initWithArray: </code> (à partir d'un autre NSArray) ou <code data-claire-semantic="objective-c">initWithObjects: </code> (qui fonctionne comme <code data-claire-semantic="objective-c">arrayWithObjects: </code>). Il existe d'autres façons d'initialiser un tableau, notamment à partir d'un fichier ou d'un URL, mais je vous invite à consulter <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/Reference/Reference.html">la documentation Apple sur les NSArray</a> pour en savoir plus. ;)</p><p id="r-451257" data-claire-element-id="451257">On peut également créer un NSArray à partir d'un autre à l'aide de <code data-claire-semantic="objective-c">arrayByAddingObject: </code>, qui renvoie un nouveau tableau contenant l'objet passé en argument en plus des anciens, ou <code data-claire-semantic="objective-c">arrayByAddingObjectsFromArray: </code> qui renvoie un nouveau tableau qui est la fusion des deux tableaux. Par exemple :</p><pre id="r-451258" data-claire-element-id="451258"><code data-claire-semantic="objective-c">NSArray *array1, *array2, *array3;
   
    NSValue *val1 = [NSNumber numberWithInt:4];
    NSValue *val2 = [NSNumber numberWithInt:5];
    NSValue *val3 = [NSNumber numberWithInt:6];
 
    array1 = [NSArray arrayWithObject:val1];
    array2 = [array1 arrayByAddingObject:val2];
    array3 = [[NSArray arrayWithObject:val3] arrayByAddingObjectsFromArray:array2];
    
    NSLog(@&quot;%@&quot;, array3);</code></pre><p id="r-451259" data-claire-element-id="451259">Ce code affiche à l'écran quelque chose comme <code data-claire-semantic="console">2009-07-13 09:11:36.576 NSArray[13976] (6, 4, 5)</code> (rappelez-vous que NSLog sert à afficher des messages horodatés pour le débuggage, et qu'il attend une NSString, d'où le @&quot;?&quot;). Remarquez que nous construisons le troisième tableau à partir d'un tableau intermédiaire qui ne contient que la NSValue 6, et auquel nous concaténons le tableau array2 : l'ordre des éléments est préservé. D'ailleurs, comment accéder à nos éléments une fois rangés ?</p><h6 id="r-acceder-aux-elements-2" data-claire-element-id="451268">Accéder aux éléments</h6><p id="r-451261" data-claire-element-id="451261">De même que les tableaux du langage C que vous connaissez, les NSArray attendent que vous leur passiez un index (sous la forme d'entier) désignant un de leurs objets, pour renvoyer l'objet désigné. Vous pouvez accéder à l'objet rangé en position N grâce à la méthode <code data-claire-semantic="objective-c">objectAtIndex: </code> qui attend un <code data-claire-semantic="c">int </code>. Le premier objet est rangé à l'index 0. Attention, si l'index fourni est trop grand, une exception NSRangeException sera générée - et comme vous ne savez pour l'instant pas gérer les exceptions, cela veut dire que votre programme plantera. :p Pour éviter ce désastreux cas de figure, les NSArray disposent d'une méthode <code data-claire-semantic="objective-c">count </code> qui permet de connaître le nombre d'éléments qu'ils contiennent. Ce qui nous permet par exemple d'écrire</p><pre id="r-451262" data-claire-element-id="451262"><code data-claire-semantic="objective-c">for(i = 0; i &lt; [array3 count]; i++)
        NSLog(@&quot;%@\n&quot;, [array3 objectAtIndex:i]);</code></pre><p id="r-451263" data-claire-element-id="451263">pour parcourir un NSArray. Cependant, nous verrons un moyen plus astucieux pour réaliser cette opération. ;)</p><p id="r-451264" data-claire-element-id="451264">On peut également obtenir l'index d'un élément si on connaît l'élément mais pas sa position, à l'aide du message <code data-claire-semantic="objective-c">indexOfObject: </code>, qui attend bien sûr l'objet à chercher. S'il n'est pas trouvé, la constante NSNotFound est renvoyée. Si vous souhaitez juste tester la présence d'un objet dans un NSArray, utilisez le message <code data-claire-semantic="objective-c">containsObject: </code>, qui renverra YES ou NO, soit l'une des deux valeurs booléennes d'Objective-C.</p><p id="r-451265" data-claire-element-id="451265">Enfin, signalons le message <code data-claire-semantic="objective-c">lastObject </code> pour récupérer le dernier objet d'un tableau.</p><aside id="r-451267" data-claire-element-id="451267" data-claire-semantic="information"><p id="r-451266" data-claire-element-id="451266">Vous commencez à le remarquer, Objective-C définit de nouveaux types de données ou de nouvelles constantes avec lesquels vous n'êtes pas forcément familiers. Ne vous inquiétez pas : Apple propose une API extrêmement riche et complète, et même si vous retenez tout ce que je vous dis, cela ne constituera que la surface de l'iceberg Cocoa. Il est possible qu'en plus vous ne reteniez pas tout, mais soyez tranquille : les chapitres de mise en pratique comme le suivant sont là pour vous donner des exemples complets et détaillés ! ;)</p></aside><h5 id="r-nsmutablearray" data-claire-element-id="451275">NSMutableArray</h5><p id="r-451270" data-claire-element-id="451270">Les NSArray sont pratiques pour stocker un nombre fixe (ou qui change assez peu souvent) d'objets, et effectuer des traitements dessus. Mais quand le nombre d'éléments à stocker est susceptible de changer fréquemment, devoir recréer un nouvel NSArray à chaque fois est fastidieux. Objective-C propose alors une classe qui ajoute quelques fonctionnalités à NSArray, la classe NSMutableArray. Les NSMutableArray sont dits &quot;mutables&quot;, ou &quot;modifiables&quot;, précisément parce qu'ils peuvent changer de taille, accueillir de nouveaux éléments ou en perdre d'anciens, etc.</p><p id="r-451271" data-claire-element-id="451271">NSMutableArray forme ce que l'on appelle une sous-classe de NSArray (on dit qu'elle hérite de cette classe mère). Cela veut dire qu'elle supporte les mêmes fonctionnalités, et en ajoute de nouvelles. Ainsi, les messages que nous avons déjà vus sont toujours valables, ils renverront simplement des instance de NSMutableArray plutôt que de NSArray. De nouvelles méthodes sont également disponibles.</p><p id="r-451272" data-claire-element-id="451272">Ainsi, <code data-claire-semantic="objective-c">addObject: </code> permet d'insérer un nouvel objet dans un NSMutableArray (à la fin de celui-ci). Notez que cet appel de méthode ne provoque aucune valeur de retour : le tableau est modifié définitivement. De même, <code data-claire-semantic="objective-c">addObjectsFromArray: </code> ajoute à la fin du tableau qui reçoit le message l'ensemble des éléments contenus dans le tableau passé en argument. Il existe aussi une méthode <code data-claire-semantic="objective-c">insertObject:atIndex: </code> qui prend en argument un objet à insérer, à une place passée en argument.</p><p id="r-451273" data-claire-element-id="451273">À l'inverse, pour supprimer un objet on peut utiliser la méthode <code data-claire-semantic="objective-c">removeObject: </code> qui supprime la première occurrence d'un objet dans un NSMutableArray (ici encore, elle le fait <em>sur place</em>, c'est-à-dire sans renvoyer de nouveau tableau mais plutôt en modifiant l'ancien), ou bien <code data-claire-semantic="objective-c">removeObjectAtIndex: </code> qui attend en argument l'index de l'objet à détruire. Il y a encore ici de nombreuses variantes, que je vous invite encore une fois à aller voir sur <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsmutablearray_Class/Reference/Reference.html">la page de documentation de la classe NSMutableArray</a>.</p><p id="r-451274" data-claire-element-id="451274">Notez que si vous souhaitez remplacer un objet dans un tableau par un autre, il est plus conseillé d'utiliser <code data-claire-semantic="objective-c">replaceObjectsAtIndex:withObject: </code> pour cela.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">
<span class="arrow"></span>
<span class="next">Deux structures de données pratiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
<span class="next">Les dictionnaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesdictionnaires"></a><h2>Les dictionnaires</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
<span class="arrow"></span>
<span class="next">Les tableaux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
<span class="next">Parcourir des collections : NSEnumerator</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-dictionnaires-3" data-claire-element-id="451303">Les dictionnaires</h4><h5 id="r-nsdictionary" data-claire-element-id="451296">NSDictionary</h5><h6 id="r-le-principe-21" data-claire-element-id="451280">Le principe</h6><p id="r-451277" data-claire-element-id="451277">Nous allons maintenant nous intéresser à une structure de données de plus haut niveau que les tableaux : les dictionnaires. Il existe des situations dans lesquelles on n'a pas besoin d'avoir des données rangées dans un ordre particulier, par exemple des préférences utilisateur. Dans une telle situation, chaque préférence est associée avec sa valeur ; par exemple, dans le cas de Safari, vous pouvez définir une page d'accueil quand vous ouvrez une nouvelle fenêtre, dont l'URL sera sauvegardée.</p><p id="r-451278" data-claire-element-id="451278">Celui-ci, dans le répertoire Bibliothèque/Préférences/ sera alors stocké avec les autres préférences dans un fichier .plist. Nous reviendrons sur la gestion des préférences utilisateurs au sein d'une application Cocoa, mais retenez pour l'instant que c'est une association de noms et de valeurs particulières : par exemple la page d'accueil correspond au réglage nommé &quot;HomePage&quot;. C'est également une chaîne de caractère, qui contient l'URL de la page. Ici, peu importe l'ordre dans lequel ce paramètre a été défini par rapport aux autres, ce qui compte c'est qu'à la question &quot;Quelle est la page d'accueil ?&quot; on puisse répondre facilement par le bon URL.</p><p id="r-451279" data-claire-element-id="451279">Les fichiers .plist sont des dictionnaires : comme les tableaux, ils servent à stocker des objets Objective-C. Cependant, là où un NSArray associe ces objets à un entier pour les retrouver, un dictionnaire permet d'associer quasiment n'importe quel objet Objective-C - une NSString par exemple. Les objets qui servent à en stocker d'autres sont appelés &quot;clefs&quot;, et ils sont associés à des objets appelés &quot;valeurs&quot;. La classe des dictionnaires en Objective-C est NSDictionary.</p><h6 id="r-creer-un-nsdictionary" data-claire-element-id="451284">Créer un NSDictionary</h6><p id="r-451281" data-claire-element-id="451281">De même que pour les NSArray, nous retrouvons ici des messages simples servant à créer un nouveau dictionnaire. Il y a tout d'abord le message <code data-claire-semantic="objective-c">dictionary </code>, qui renvoie un dictionnaire vide. On retrouve également <code data-claire-semantic="objective-c">dictionaryWithObject:forKey: </code>, qui est le pendant de <code data-claire-semantic="objective-c">arrayWithObject: </code> : vous créez ici un nouveau dictionnaire avec une clef et une valeur, comme quand vous vouliez créer un tableau avec un seul élément. Et enfin, on retrouve <code data-claire-semantic="objective-c">dictionaryWithObjects:forKeys: </code>, les deux arguments étant cette-fois des NSArray, contenant à chaque fois les clefs à associer aux valeurs.</p><p id="r-451282" data-claire-element-id="451282">Cette méthode parcourt les deux NSArray passés en argument, en faisant correspondre les clefs et les valeurs une à une. Attention, si les deux tableaux n'ont pas la même taille, une exception NSInvalidArgumentException sera levée. :)</p><p id="r-451283" data-claire-element-id="451283">On retrouve également les messages à envoyer à des instances pour lesquelles la mémoire a déjà été allouée, à savoir <code data-claire-semantic="objective-c">initWithDictionary: </code> et <code data-claire-semantic="objective-c">iniWithObjects:forKeys: </code>.</p><h6 id="r-acceder-aux-elements-3" data-claire-element-id="451295">Accéder aux éléments</h6><p id="r-451285" data-claire-element-id="451285">Il existe naturellement plus d'opérations possibles que dans le cas des NSArray. À partir d'un NSDictionary déjà existant, on peut :</p><ul id="r-451294" data-claire-element-id="451294"><li id="r-451287" data-claire-element-id="451287"><p id="r-451286" data-claire-element-id="451286">récupérer l'ensemble des clefs avec le message <code data-claire-semantic="objective-c">allKeys </code> sous forme de NSArray ;</p></li><li id="r-451289" data-claire-element-id="451289"><p id="r-451288" data-claire-element-id="451288">récupérer l'ensemble des valeurs avec le message <code data-claire-semantic="objective-c">allValues </code> sous forme de NSArray ;</p></li><li id="r-451291" data-claire-element-id="451291"><p id="r-451290" data-claire-element-id="451290">récupérer l'ensemble des clefs désignant un même objet avec le message <code data-claire-semantic="objective-c">allKeysForObject: </code> sous forme de NSArray ;</p></li><li id="r-451293" data-claire-element-id="451293"><p id="r-451292" data-claire-element-id="451292">enfin, récupérer l'objet stocké pour une clef donnée avec le message <code data-claire-semantic="objective-c">objectForKey: </code>. Si la clef n'existe pas, vous n'obtenez pas une erreur mais l'élément spécial nil, dont nous reparlerons plus en détail sous peu (c'est le pendant du NULL défini en C).</p></li></ul><h5 id="r-nsmutabledictionary" data-claire-element-id="451302">NSMutableDictionary</h5><p id="r-451297" data-claire-element-id="451297">De même que précédemment pour les tableaux, on peut parfois avoir besoin de dictionnaires modifiables. Dans ce cas, il faut utiliser la classe NSMutableDictionary, qui hérite de NSDictionary et donc possède les mêmes méthodes que sa classe mère, et en implémente de nouvelles.</p><p id="r-451298" data-claire-element-id="451298">Citons notamment <code data-claire-semantic="objective-c">setObject:forKey: </code> qui permet de rajouter une entrée clef / valeur dans le dictionnaire. Naturellement, si clef est déjà prise pour un autre objet, celui-ci sera remplacé par le nouveau.</p><p id="r-451299" data-claire-element-id="451299">À l'inverse, on peut supprimer les objets stockés pour une clef particulière, avec <code data-claire-semantic="objective-c">removeObjectForKey: </code>, ou bien pour un tableau de clefs, avec <code data-claire-semantic="objective-c">removeObjectsForKeys: </code>.</p><p id="r-451300" data-claire-element-id="451300">Et enfin, pour ajouter à un NSMutableDictionary les entrées d'un NSDictionary déjà existant, utilisez <code data-claire-semantic="objective-c">addEntriesFromDictionary: </code>. ;)</p><p id="r-451301" data-claire-element-id="451301">Ici encore, ça fait beaucoup de notions. Il en reste encore une petite à voir, puis nous pourrons revenir à la pratique, ce qui nous permettra de bien comprendre et retenir tout cela.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
<span class="arrow"></span>
<span class="next">Les tableaux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
<span class="next">Parcourir des collections : NSEnumerator</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ParcourirdescollectionsNSEnumerator"></a><h2>Parcourir des collections : NSEnumerator</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
<span class="arrow"></span>
<span class="next">Les dictionnaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">
<span class="next">Un carnet de commandes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-parcourir-des-collections-nsenumerator" data-claire-element-id="451320">Parcourir des collections : NSEnumerator</h4><h6 id="r-parcourir-des-donnees" data-claire-element-id="451306">Parcourir des données</h6><p id="r-451304" data-claire-element-id="451304">Ce concept est certainement nouveau pour vous : les collections (on appelle ainsi les objets qui en contiennent d'autres, comme les tableaux et les dictionnaires) peuvent être parcourus d'une façon que vous ne connaissez pas encore, en <em>énumérant</em> leurs éléments. En effet, parcourir un NSArray se fait facilement à l'aide d'une boucle for, mais parcourir un NSDictionary demanderait, a priori, de récupérer d'abord le tableau des clefs, puis de le parcourir lui avec une boucle en récupérant à chaque fois l'objet associé à la clef dans le dictionnaire, ce qui est moins simple. Ça n'a rien de compliqué, mais cela manque seulement d'uniformité : on voudrait un moyen de parcourir les deux de la même façon, ou presque.</p><p id="r-451305" data-claire-element-id="451305">Pour cela, les concepteurs des premiers langages objets comme Smalltalk ont inventé les énumérateurs : ce sont des objets que l'on initialise à partir d'une collection comme un tableau, et qui vont nous passer successivement toutes les valeurs proposées par cette collection, jusqu'à valoir <code data-claire-semantic="objective-c">nil </code> (moment où l'itération sera terminée).</p><h6 id="r-le-principe-22" data-claire-element-id="451310">Le principe</h6><p id="r-451307" data-claire-element-id="451307">Un objet de classe NSEnumerator est donc très simple : la seule méthode qu'on utilise est <code data-claire-semantic="objective-c">nextObject </code>, qui à chaque appel renvoie un nouvel objet de la collection énumérée. Il faut donc utiliser une boucle pour parcourir tout l'objet, mais au moins toutes les boucles ont la même forme : on boucle jusqu'à tomber sur <code data-claire-semantic="objective-c">nil </code>.</p><p id="r-451308" data-claire-element-id="451308">Pour obtenir un énumérateur à partir d'un NSArray on peut utiliser <code data-claire-semantic="objective-c">objectEnumerator </code> ou <code data-claire-semantic="objective-c">reverseObjectEnumerator </code>, selon qu'on veut parcourir le tableau du premier au dernier élément, ou l'inverse. À partir d'un NSDictionary, il faut utiliser <code data-claire-semantic="objective-c">objectEnumerator </code> également, ou bien <code data-claire-semantic="objective-c">keyEnumerator </code> selon qu'on veut parcourir les objets ou les clefs pour les repérer.</p><p id="r-451309" data-claire-element-id="451309">Et tout l'intérêt est là : une fois l'énumérateur généré, on accède aux objets de façon uniforme, sans plus se préoccuper de la nature de la collection. Il suffit d'appeler la méthode <code data-claire-semantic="objective-c">nextObject </code> jusqu'à obtenir <code data-claire-semantic="objective-c">nil </code> ! ;)</p><h6 id="r-epuiser-l-enumerateur" data-claire-element-id="451319">Épuiser l'énumérateur</h6><div id="r-451312" data-claire-element-id="451312" data-claire-semantic="question"><p id="r-451311" data-claire-element-id="451311">Sachant qu'un NSArray peut contenir des valeurs de types différents en même temps, quel type donner à l'objet renvoyé par la méthode <code>nextObject</code> de l'énumérateur ?</p></div><p id="r-451313" data-claire-element-id="451313">Lorsque nous allons utiliser l'énumérateur, nous répéterons une instruction de la forme <code data-claire-semantic="objective-c">object = [enumerateur nextObject]; </code>. Quel peut bien être le type de la variable object dans une telle situation ? Il faudrait qu'elle ait plusieurs types à la fois ! La seule possibilité est d'utiliser un type spécial, nommé <code data-claire-semantic="objective-c">id </code>, qui veut dire que l'on n'a pas de renseignements sur le type de la variable au moment de la compilation.</p><p id="r-451314" data-claire-element-id="451314">Prenons un exemple tout simple, sachant que nous serons amenés à recroiser des NSEnumerator dès le chapitre suivant. Dans le code qui suit, on construit un NSArray puis on l'énumère :</p><pre id="r-451315" data-claire-element-id="451315"><code data-claire-semantic="objective-c">NSEnumerator *enume;
    id object;
    NSValue *a = [NSNumber numberWithInt:3];
    NSValue *b = [NSNumber numberWithInt:4];
    NSArray * tabl = [NSArray arrayWithObjects:a,b,[NSDate date],nil];
    
    enume = [tabl objectEnumerator];
    
    while(object = [enume nextObject]) {
        NSLog(@&quot;Objet : %@\n&quot;, object);
    }</code></pre><p id="r-451316" data-claire-element-id="451316">Notez l'astuce qui consiste à placer <code data-claire-semantic="objective-c">object = [enume nextObject] </code> dans la partie conditionnelle du while : ça marche parce que dès que nous arrivons à la fin, <code data-claire-semantic="objective-c">nextObject </code> renvoie nil, qui est équivalent à NO dans une condition. ;)</p><p id="r-451317" data-claire-element-id="451317">Voilà une façon pratique et élégante de parcourir une collection !</p><p id="r-451318" data-claire-element-id="451318">Ce chapitre était peut-être un peu long, et pas très intéressant. Mais nous allons maintenant utiliser nos connaissances pour jouer avec un widget très important dans Mac OS X, la table de données !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
<span class="arrow"></span>
<span class="next">Les dictionnaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">
<span class="next">Un carnet de commandes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Uncarnetdecommandes"></a><h2>Un carnet de commandes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
<span class="arrow"></span>
<span class="next">Parcourir des collections : NSEnumerator</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
<span class="next">Création de notre interface</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-451322" data-claire-element-id="451322">Ça y'est, vous êtes enfin capables de réaliser de petits utilitaires <em>vraiment</em> utiles, et votre site perso regorge de louanges sur vous écrites par vous-mêmes, vantant vos mérites en tant que développeur. Incroyable ! Vous venez de recevoir un e-mail de M. Ed Redon, propriétaire du magasin de literie Redon &amp; Fils, qui vous passe commande d'une application et... attendez ! Revenez ! Je prédis juste votre avenir, pour le moment vous n'avez encore rien reçu. :D</p><p id="r-451323" data-claire-element-id="451323">Mais ne soyez pas déçu, nous allons quand même rêver un peu. Bien : M. Redon, vendeur de lits, voudrait donc que vous l'aidiez à gérer ses commandes en programmant une application qui l'assiste dans cette tâche. L'application devra être assez simple : composée majoritairement d'un tableau listant les commandes, les clients, et les délais, elle devra naturellement permettre la saisie de nouvelles entrées - et même les sauvegarder.</p><p id="r-451324" data-claire-element-id="451324">Vous vous en sentez capable ? ;)</p>
</div><a name="Crationdenotreinterface"></a><h2>Création de notre interface</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">
<span class="arrow"></span>
<span class="next">Un carnet de commandes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
<span class="next">Détail du fichier d&#039;interface</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-creation-de-notre-interface" data-claire-element-id="451340">Création de notre interface</h4><h5 id="r-une-nstableview-et-ses-colonnes" data-claire-element-id="451330">Une NSTableView et ses colonnes !</h5><p id="r-451325" data-claire-element-id="451325">Nous allons commencer par le plus simple : le dessin de l'interface. Faites un nouveau projet dans XCode, une application Cocoa pour être plus précis (comme au chapitre 2). Ouvrez directement le fichier .nib (ou .xib), et rajoutez deux boutons, ainsi qu'un widget NSTableView (je vous laisse le chercher), puis redimensionnez le tout jusqu'à obtenir une interface comme celle qui suit. Pour rajouter une colonne, passez par l'inspecteur, et allez dans Attributes.</p><figure id="r-451327" data-claire-element-id="451328"><img id="r-451326" data-claire-element-id="451326" src="medias/uploads.siteduzero.com_files_180001_181000_180502.png" alt="Image utilisateur"/></figure><p id="r-451329" data-claire-element-id="451329">Double-cliquez maintenant sur le titre des colonnes pour nommer une colonne &quot;N°&quot;, une autre &quot;Client&quot; et la troisième &quot;Date&quot;. Remarquez bien que la façon dont la table est sélectionnée change : vous ne manipulez plus la NSTableView, mais une NSTableColumn. Tant que nous y sommes, cherchez un objet de type NSDateFormatter dans la palette, et faites-le glisser sur la colonne &quot;Date&quot;. Dans l'inspecteur, sélectionnez le format de date qui vous convient le plus (je vous conseille de rentrer le vôtre, du style &quot;%d/%m/%y&quot;). Ne choisissez pas n'importe quel NSDateFormatter, parce qu'il contraint l'utilisateur à rentrer des dates sous le même format à chaque fois. Toujours dans l'inspecteur, retournez dans le menu &quot;Attributes&quot; et entrez, comme &quot;Identifier&quot;, le mot &quot;date&quot;. De même pour la colonne Client entrez &quot;client&quot;, et enfin &quot;num&quot; pour la première colonne. Ces noms nous serviront à accéder à nos colonnes depuis notre code, vous comprendrez pourquoi.</p><h5 id="r-les-sources-de-donnees-datasource" data-claire-element-id="451336">Les sources de données (datasource)</h5><p id="r-451331" data-claire-element-id="451331">Avant de poursuivre, vous devez comprendre un nouveau concept : celui de source de données. L'une des principales préoccupations des bons programmeurs est souvent d'écrire le moins de code possible. :D On dit souvent que les programmeurs sont fainéants, et c'est souvent vrai, mais on pourrait dire aussi qu'ils sont malins : ils cherchent à se simplifier la vie, en écrivant du code assez souple et bien pensé pour être réutilisé au maximum - ainsi ce qui est fait ne sera pas à refaire. ;)</p><p id="r-451332" data-claire-element-id="451332">C'est encore plus vrai dans le cas d'une API de la taille de Cocoa, qui doit être complète de façon à faciliter le développement d'applications. Ainsi, il est toujours plus souhaitable de réutiliser les widgets proposés par le système plutôt que de concevoir les siens, pour des soucis de simplicité autant que de cohérence entre les applications - si tout le monde utilise les mêmes widgets, toutes les interfaces peuvent être utilisées de la même façon (même si nous verrons un jour comment programmer les nôtres quand cela devient vraiment indispensable). Cependant un widget doit pouvoir être adapté à une application particulière, sans quoi toutes les applications seraient systématiquement les mêmes.</p><p id="r-451333" data-claire-element-id="451333">Dans un certain nombre d'API orientées objet, on utiliserait probablement la table en lui donnant des ordres successifs, comme &quot;affiche telle valeur à telle ligne, telle colonne&quot;. Mais cela vous ferait écrire beaucoup de code, et cela compliquerait d'éventuelles opérations comme le rajout d'une colonne, la réorganisation de celles-ci ou simplement la mise à jour des données. Dans d'autres API, on sous-classerait carrément la table pour modifier son comportement, ce qui demanderait d'écrire beaucoup de code.</p><p id="r-451334" data-claire-element-id="451334">Les concepteurs de Cocoa ont donc choisi une autre approche : un objet (dans notre cas, celui du modèle/contrôleur, ici encore il n'y aura pas de vraie distinction) du programme est particularisé, et servira de source de données pour la table. En quelque sorte, c'est lui qui dira à cette dernière ce qu'elle doit afficher. L'instance de NSTableView que nous avons placée sur notre fenêtre ne fera qu'interroger notre contrôleur, en lui envoyant des messages bien particuliers comme &quot;qu'est-ce qu'il y a à cet endroit du tableau ?&quot;.</p><p id="r-451335" data-claire-element-id="451335">Cette façon de faire s'appelle, de manière générale, la délégation. Ici, c'est un cas particulier où l'objet qui délègue demande des données à l'objet délégué (on parle de &quot;source de données&quot;), mais nous retrouverons ce comportement assez souvent dans Cocoa, qui l'utilise beaucoup.</p><h5 id="r-les-connexions-1" data-claire-element-id="451339">Les connexions</h5><p id="r-451337" data-claire-element-id="451337">De même qu'au chapitre 2, faites un contrôleur (créez une sous-classe de NSObject nommée &quot;Controller&quot;, par exemple) et déclarez deux actions &quot;ajouter:&quot; et &quot;supprimer:&quot; (qui correspondront à nos deux boutons) ainsi que deux outlets &quot;boutonSupprimer&quot; et &quot;table&quot;. Instanciez le contrôleur (avec un clic-droit), puis reliez les deux boutons au contrôleur comme nous le faisions au chapitre 2, puis reliez le contrôleur au bouton de suppression en cochant le bon outlet (il faut qu'il corresponde à &quot;boutonSupprimer&quot;, naturellement). Ensuite, faites attention : lorsque vous essayez de sélectionner la table (qui est une instance de NSTableView), il est probable que vous sélectionniez une instance d'un autre objet qui se trouve &quot;par dessus&quot;, une instance de NSScrollView. Nous reviendrons plus tard sur ces objets : pour vous assurer que vous sélectionnez bien la table, regardez le titre de la fenêtre de l'inspecteur.</p><p id="r-451338" data-claire-element-id="451338">Une fois que vous avez sélectionné la table, reliez-la à l'instance de votre contrôleur : au moment où vous relâchez le clic, vous avez la possibilité de choisir une option &quot;dataSource&quot;, qui correspond à ce que j'expliquais précédemment. ;) Rappelez-vous que dans un projet un peu plus gros, votre &quot;dataSource&quot; ne serait sûrement pas le contrôleur de l'application - mais ici, ça pose peu de problèmes. Générez ensuite les fichiers de la classe Controller, sauvegardez votre .nib, et repassons dans XCode.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">
<span class="arrow"></span>
<span class="next">Un carnet de commandes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
<span class="next">Détail du fichier d&#039;interface</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Dtaildufichierd039interface"></a><h2>Détail du fichier d&#039;interface</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
<span class="arrow"></span>
<span class="next">Création de notre interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
<span class="next">Implémentation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-detail-du-fichier-d-interface" data-claire-element-id="451354">Détail du fichier d'interface</h4><p id="r-451341" data-claire-element-id="451341">Nous allons commencer par nous intéresser à &quot;Controller.h&quot;, le fichier d'interface, pour nous mettre d'accord sur ce dont nous avons besoin. Comme je vous l'ai expliqué, notre objet sera interrogé fréquemment par la NSTableView de la vue, qui lui demandera quoi faire. En interne, nous allons donc devoir stocker tous les éléments qui seront affichés, c'est-à-dire toutes les commandes de notre vendeur de lits. Or une commande, c'est juste un objet qui a trois propriétés : un numéro, un client et une date. Pour ça, rien de tel que d'utiliser un dictionnaire pour chaque commande ! Et nous stockerons tous les dictionnaires dans un tableau ! Vous voyez que je ne vous ai pas bassinés avec ces structures de données pour rien. :p</p><p id="r-451342" data-claire-element-id="451342">Ce tableau stockant les commandes appartiendra directement à notre contrôleur-modèle, qui le manipulera en interne. Nous choisissons la classe NSMutableArray plutôt que NSArray, parce que nous ajouterons des commandes, en enlèverons d'autres, ainsi de suite. De plus, il faut que nous implémentions au moins trois méthodes pour être un objet délégué utilisable par notre NSTableView. Je les liste ici en donnant les types des valeurs de retour et des arguments :</p><ul id="r-451349" data-claire-element-id="451349"><li id="r-451344" data-claire-element-id="451344"><p id="r-451343" data-claire-element-id="451343"><code data-claire-semantic="objective-c">- (int) numberOfRowsInTableView:(NSTableView *) ; </code> qui servira à renvoyer le nombre d'objets de la table ;</p></li><li id="r-451346" data-claire-element-id="451346"><p id="r-451345" data-claire-element-id="451345"><code data-claire-semantic="objective-c">- (id) tableView:(NSTableView *) objectValueForTableColumn:(NSTableColumn *) row:(int) ; </code> qui sera appelée par la table pour savoir quel objet doit être affiché dans telle colonne, à telle ligne ;</p></li><li id="r-451348" data-claire-element-id="451348"><p id="r-451347" data-claire-element-id="451347"><code data-claire-semantic="objective-c">- (void) tableView:(NSTableView *) setObjectValue:(id) forTableColumn:(NSTableColumn *) row:(int) ; </code> qui sera appelée quand l'utilisateur modifiera un objet dans telle colonne, à telle ligne.</p></li></ul><p id="r-451350" data-claire-element-id="451350">Nous déclarons aussi une méthode <code data-claire-semantic="objective-c">- (void) miseAJour </code> qui sera à appeler pour mettre l'interface à jour, lorsqu'une modification aura été effectuée. Finalement, voilà le code de notre fichier Controller.h :</p><pre id="r-451351" data-claire-element-id="451351"><code data-claire-semantic="objective-c">#import &lt;Cocoa/Cocoa.h&gt;

@interface Controller : NSObject
{
    IBOutlet id boutonSupprimer;
    IBOutlet id table;
    NSMutableArray * commandes;
}
- (IBAction)ajouter:(id)sender;
- (IBAction)supprimer:(id)sender;

- (int) numberOfRowsInTableView:(NSTableView *)uneTable;
- (id) tableView:(NSTableView *)uneTable objectValueForTableColumn:(NSTableColumn *)uneColonne row:(int)i ;
- (void) tableView:(NSTableView *)uneTable setObjectValue:(id)objet forTableColumn:(NSTableColumn *)uneColonne row:(int)i ;

- (void) miseAJour;

@end</code></pre><aside id="r-451353" data-claire-element-id="451353" data-claire-semantic="information"><p id="r-451352" data-claire-element-id="451352">Pour le moment, vous vous demandez peut-être pourquoi je vous ai fait ajouter la table et le bouton de suppression en tant qu'outlets. Vous le découvrirez par la suite : nous aurons besoin de leur envoyer des messages !</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
<span class="arrow"></span>
<span class="next">Création de notre interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
<span class="next">Implémentation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Implmentation"></a><h2>Implémentation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
<span class="arrow"></span>
<span class="next">Détail du fichier d&#039;interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
<span class="next">Des petits ajouts qui font tout le charme !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-implementation-20" data-claire-element-id="451383">Implémentation</h4><h5 id="r-initialisation-du-controleur" data-claire-element-id="451361">Initialisation du contrôleur</h5><p id="r-451355" data-claire-element-id="451355">Il nous faut maintenant écrire le code proprement dit du contrôleur. La première chose à faire est d'initialiser notre variable d'instance nommée &quot;commandes&quot;, qui restera définie dans la suite du programme. Si vous n'avez aucune expérience de la programmation orientée objet, retenez ceci : cette variable sera accessible de n'importe quel point de notre programme, ou plus exactement nous pouvons utiliser le NSArray <code>commandes</code> dans le code de n'importe quelle méthode. Si nous utilisions d'autres classes que Controller, celles-ci ne pourraient pas accéder aux variables d'instances de Controller. Mais en interne, nous pouvons tout nous permettre.</p><p id="r-451356" data-claire-element-id="451356">Au lancement de notre application, cependant, cette variable est définie mais n'a aucune valeur. En fait, à ce moment là de l'exécution, notre contrôleur est instancié (l'objet est créé pour de vrai), et il reçoit le message <code data-claire-semantic="objective-c">init </code> (même si dans le chapitre 2 nous ne l'avions pas implémenté). Après seulement l'application est utilisable. Nous allons donc profiter de la méthode <code data-claire-semantic="objective-c">init </code> pour initialiser notre tableau. :) Pour l'instant, nous nous contenterons d'un NSMutableArray vide. Voici le code de la méthode <code data-claire-semantic="objective-c">init </code> :</p><pre id="r-451357" data-claire-element-id="451357"><code data-claire-semantic="objective-c">- (id) init 
{
    [super init];
    commandes = [[NSMutableArray alloc] init];
    
    return self;
}</code></pre><p id="r-451358" data-claire-element-id="451358">Nous reparlerons de l'héritage, mais voici un premier contact avec le concept : l'objet <code data-claire-semantic="objective-c">super </code> fait référence au parent de notre contrôleur. D'après ce qu'il y a écrit dans le fichier d'interface (le .h), le parent est ici NSObject. On réutilise sa méthode <code data-claire-semantic="objective-c">init </code> pour que les opérations d'initialisation contenues dans cette classe soient effectives. On initialise ensuite notre NSMutableArray. Enfin, on renvoie <code data-claire-semantic="objective-c">self </code>, qui représente l'instance de notre contrôleur - une méthode <code data-claire-semantic="objective-c">init </code> doit toujours renvoyer un objet utilisable.</p><aside id="r-451360" data-claire-element-id="451360" data-claire-semantic="warning"><p id="r-451359" data-claire-element-id="451359">Pourquoi utilisons-nous deux messages, à savoir <code data-claire-semantic="objective-c">[[NSMutableArray alloc] init] </code> au lieu d'un simple message <code>array</code> pour créer un tableau vide ? Cela a un rapport avec la gestion de la mémoire, que nous étudierons au chapitre suivant. Pour l'instant, retenez que quand on veut créer une variable qui soit accessible même après la fin d'une méthode, il faut l'avoir créée comme ça, à moins de la ranger dans une autre structure de données. Vous verrez, ça n'est pas très compliqué, mais pour comprendre l'intérêt de la gestion de la mémoire en Objective-C, il faut d'abord que vous ayez une idée de la structure d'une application !</p></aside><h5 id="r-methodes-liees-a-l-interface" data-claire-element-id="451368">Méthodes liées à l'interface</h5><p id="r-451362" data-claire-element-id="451362">Nous allons maintenant écrire le code des méthodes <code data-claire-semantic="objective-c">ajouter </code> et <code data-claire-semantic="objective-c">supprimer </code>, appelées par la vue. Lorsqu'un utilisateur clique sur &quot;Ajouter une commande&quot;, nous voulons juste que cela crée une nouvelle entrée dans la table. Ainsi, comme notre table et notre tableau correspondent directement, il suffit de créer une nouvelle entrée dans ce dernier, pour y rajouter un NSMutableDictionary vide (il sera selon toute probabilité modifié par l'utilisateur). Ensuite, il suffit de mettre à jour l'interface.</p><p id="r-451363" data-claire-element-id="451363">Le code associé au bouton de suppression est à peine plus compliqué. Plaçons-nous dans le contexte : l'utilisateur sélectionnera une ligne de la table avant de cliquer sur le bouton correspondant à sa suppression. Il faut donc interroger la table pour savoir quelle ligne est actuellement sélectionnée, ce qui nous donne un entier correspondant en fait à l'emplacement qui doit être supprimé dans notre tableau. C'est vraiment simple ! Voici donc le code de ces deux méthodes :</p><pre id="r-451364" data-claire-element-id="451364"><code data-claire-semantic="objective-c">- (IBAction)ajouter:(id)sender
{
    NSMutableDictionary * commande = [NSMutableDictionary dictionary];
    [commandes addObject:commande];
    [self miseAJour];   /* self, parce que nous appelons une de *nos* methodes */
}

- (IBAction)supprimer:(id)sender
{
    int ligne = [table selectedRow];
    [commandes removeObjectAtIndex:ligne];
    [self miseAJour];
}</code></pre><p id="r-451365" data-claire-element-id="451365">Tant que nous y sommes, écrivons le code de notre méthode <code>miseAJour</code>. Pour le moment ce sera simplement</p><pre id="r-451366" data-claire-element-id="451366"><code data-claire-semantic="objective-c">- (void) miseAJour
{
    [table reloadData];
}</code></pre><p id="r-451367" data-claire-element-id="451367">Il suffit de mettre à jour la table en lui disant de recharger ses données. Le deuxième exercice vous fera faire un petit peu plus, mais revenons à nos moutons. En recevant un tel message, la table va redéfinir son affichage, donc demander à notre objet ce qu'elle doit afficher. Il est temps de s'occuper des trois méthodes liées à la délégation.</p><h5 id="r-remplir-notre-contrat-d-objet-delegue" data-claire-element-id="451382">Remplir notre contrat d'objet délégué</h5><p id="r-451369" data-claire-element-id="451369">La première, <code data-claire-semantic="objective-c">- (int) numberOfRowsInTableView: </code>, demande juste combien de lignes doivent être affichées dans la table. À votre avis, comment faire, sachant que chaque ligne de la table correspond à un objet du tableau <code>commandes</code> ? :p Il suffit de compter le nombre d'éléments du tableau, à l'aide du message <code>count</code> !</p><pre id="r-451370" data-claire-element-id="451370"><code data-claire-semantic="objective-c">- (int) numberOfRowsInTableView:(NSTableView *)uneTable
{
    return [commandes count];
}</code></pre><p id="r-451371" data-claire-element-id="451371">La deuxième méthode nous demande juste de regarder quelle valeur doit être affichée à telle case du tableau. Nous allons ruser : pour l'instant, nous n'avons pas parlé de la structure des dictionnaires contenus dans le tableau <code>commandes</code>. Quelles clefs allons-nous utiliser ? C'est très simple : dans la méthode que nous allons écrire, nous aurons à chaque fois la colonne et la ligne de la case demandant l'affichage. Vous souvenez-vous des &quot;Identifiers&quot; que nous avons donnés aux colonnes de la NSTableView ? De gauche à droite, il y avait &quot;num&quot;, &quot;client&quot; et &quot;date&quot;. Ces trois noms seront disponibles en tant que NSString, et ils feront de parfaites clefs pour nos dictionnaires !</p><p id="r-451372" data-claire-element-id="451372">Voilà donc la méthode :</p><pre id="r-451373" data-claire-element-id="451373"><code data-claire-semantic="objective-c">- (id) tableView:(NSTableView *)uneTable 
       objectValueForTableColumn:(NSTableColumn *)uneColonne 
       row:(int)i     /* Désigne un objet dans notre tableau */
{
    NSString * identifier = [uneColonne identifier];
    return [[commandes objectAtIndex:i] objectForKey:identifier];
}</code></pre><p id="r-451374" data-claire-element-id="451374">Ainsi, quand la table demandera une valeur pour la colonne &quot;Date&quot; par exemple, l'&quot;Identifier&quot; sera &quot;date&quot; et on cherchera la valeur associée à la clef &quot;date&quot; dans le dictionnaire. Naturellement, pour ça il faut que notre dictionnaire soit bien construit, et qu'on range à chaque fois les bonnes valeurs avec les bonnes clefs - c'est ce que nous allons faire tout de suite. Au chapitre suivant, je vous ai dit que pour ajouter un objet dans un dictionnaire, associé à une certaine clef, il fallait utiliser le message <code data-claire-semantic="objective-c">setObject: forKey: </code>. Cela nous donne le code</p><pre id="r-451375" data-claire-element-id="451375"><code data-claire-semantic="objective-c">- (void) tableView:(NSTableView *)uneTable 
         setObjectValue:(id)objet 
         forTableColumn:(NSTableColumn *)uneColonne 
         row:(int)i
{
    NSString * identifier = [uneColonne identifier];
    NSMutableDictionary * commande = [commandes objectAtIndex:i];
    
    [commande setObject:objet forKey:identifier];
}</code></pre><p id="r-451376" data-claire-element-id="451376">Lorsque l'utilisateur modifie une case, la table nous envoie ce message, accompagné de l'objet colonne et du nombre entier représentant la ligne. Ce nombre entier correspond à une position dans le tableau, position à laquelle est déjà rangé un NSMutableDictionary. Il suffit de le récupérer, et de le mettre à jour. :)</p><p id="r-451377" data-claire-element-id="451377">Remarquez que les deux dernières méthodes correspondent à une modification de l'interface, mais ne contiennent pas d'appel à la méthode <code>miseAJour</code>. Pourquoi ?</p><p id="r-451378" data-claire-element-id="451378"></p><div id="r-451380" data-claire-element-id="451380"><p id="r-451379" data-claire-element-id="451379">Parce que si on appelait <code>miseAJour</code> dans la première méthode, la table tenterait de recharger son affichage, et pour cela elle appellerait la première de ces deux méthodes ! Ainsi cela ferait comme une boucle infinie d'appels de méthodes, ce qui planterait l'application. Si on appelait <code>miseAJour</code> dans la deuxième méthode, ça serait moins grave, mais parfaitement inutile, puisque cette méthode est également appelée par la table quand elle sait déjà que son affichage a été modifié !</p></div><p id="r-451381" data-claire-element-id="451381">Désormais, votre application devrait fonctionner lorsque vous cliquez sur &quot;Build &amp; Run&quot;.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
<span class="arrow"></span>
<span class="next">Détail du fichier d&#039;interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
<span class="next">Des petits ajouts qui font tout le charme !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Despetitsajoutsquifonttoutlecharme"></a><h2>Des petits ajouts qui font tout le charme !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
<span class="arrow"></span>
<span class="next">Implémentation</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-petits-ajouts-qui-font-tout-le-charme" data-claire-element-id="451409">Des petits ajouts qui font tout le charme !</h4><p id="r-451384" data-claire-element-id="451384">Notre application fonctionne bien, et vous pouvez la tester un petit peu pour obtenir ceci :</p><figure id="r-451386" data-claire-element-id="451387"><img id="r-451385" data-claire-element-id="451385" src="medias/uploads.siteduzero.com_files_180001_181000_180504.png" alt="Image utilisateur"/></figure><p id="r-451388" data-claire-element-id="451388">Très amusant n'est-ce pas ? :-°</p><h5 id="r-rendre-l-application-plus-intuitive" data-claire-element-id="451394">Rendre l'application plus intuitive</h5><p id="r-451389" data-claire-element-id="451389">Cependant, elle est loin d'être prête à envoyer à notre client, Ed Redon. Avant cela, il y a encore quelques améliorations à faire. Notamment, si vous avez essayé l'application, vous avez dû cliquer sur &quot;Ajouter une commande&quot;, et avoir l'impression que rien ne se passait (alors qu'une ligne est bel et bien créée dans la table). Vous pouvez changer cela, en envoyant le message <code data-claire-semantic="objective-c">- (void) selectRowIndexes:(NSIndexSet *) byExtendingSelection:(BOOL) </code> à la table lors de la création d'une ligne.</p><p id="r-451390" data-claire-element-id="451390">Cette méthode prend deux arguments, dont le deuxième sert juste à dire si l'on doit sélectionner la nouvelle ligne en plus des lignes éventuellement déjà sélectionnées (si l'on clique sur le bouton alors que deux lignes sont déjà sélectionnées, est-ce que ces lignes resteront sélectionnées en plus de la nouvelle). La valeur attendue est de type BOOL, c'est donc YES ou NO. Le premier argument est un ensemble d'index, ceux des lignes à sélectionner. Pour créer un tel ensemble avec un seul index, il suffit de faire <code data-claire-semantic="objective-c">[NSIndexSet indexSetWithIndex:(l'index)] </code>. Je vous laisse réfléchir pour trouver l'index en question. ;)</p><p id="r-451391" data-claire-element-id="451391">Une autre amélioration possible consiste à proposer, à l'affichage, des valeurs par défaut pour les cases vides, du style &quot;0&quot; pour le numéro de commande, &quot;Nouveau client&quot; pour la case client, et une date du style &quot;00/00/00&quot; pour la troisième case. Plus simplement pour ne pas avoir à modifier trop de code, vous pouvez chercher à afficher le mot &quot;Vide&quot; lorsqu'une valeur est effectivement vide. Vous n'êtes pas obligés de stocker ces modifications, juste de les renvoyer lorsque la table demande leur valeur et que celle-ci est <code data-claire-semantic="objective-c">nil </code>, je n'en dis pas plus. :p</p><p id="r-451392" data-claire-element-id="451392">Tant qu'à faire, vous pouvez modifier le code de <code>miseAJour</code> de façon à ce que le bouton de suppression soit inaccessible lorsque la table est vide. Pour le rendre gris, il suffit de lui envoyer le message <code data-claire-semantic="objective-c">setEnabled:NO </code>. Pour le rendre à nouveau accessible, remplacez NO par YES. De même, lorsque l'utilisateur clique sur le bouton de suppression mais qu'aucune ligne de la table n'est sélectionnée, le message <code data-claire-semantic="objective-c">[table selectedRow] </code> renvoie l'entier -1 . Vous pouvez alors émettre un petit son de protestation, à l'aide de la fonction NSBeep !</p><p id="r-451393" data-claire-element-id="451393">Tous ces exercices n'ont l'air de rien, mais ils vous permettront de vérifier que vous comprenez comment le code est structuré. En cas de problème, n'hésitez pas à venir poster sur le forum <a href="http://www.siteduzero.com/forum-81-127-autres-langages.html">Autres Langages</a>. Bien sûr, il y a des risques que votre question touche également au langage C, mais vous ne pouvez malheureusement pas poster sur deux forums à la fois. De plus, soyez patient, les utilisateurs de Cocoa sont encore peu nombreux sur le forum. Mais nous finirons bien par remarquer votre message, surtout si vous placez le tag [Objective-C] ou [Cocoa] dans le titre de votre message. ;)</p><h5 id="r-personnaliser-l-interface" data-claire-element-id="451397">Personnaliser l'interface</h5><p id="r-451395" data-claire-element-id="451395">Dans Interface Builder, vous pouvez chercher à améliorer l'interface en renommant la fenêtre, ou bien en jetant un œil du côté de cette drôle de petite fenêtre qui représente le menu de votre application. Vous pouvez double-cliquer sur les menus ou sur les éléments pour les éditer. Vous pouvez également supprimer des menus en utilisant la touche &quot;suppr&quot; de votre clavier, ou en rajouter depuis la palette à l'aide d'un glissé-déposé.</p><p id="r-451396" data-claire-element-id="451396">Notez cependant que, pour que les applications natives Mac OS X restent cohérentes dans leur utilisation, il est important que les menus soient au maximum structurés de la même façon. Ne vous permettez pas toutes les fantaisies. ;)</p><h5 id="r-sauvegarde-et-chargement-du-tableau" data-claire-element-id="451408">Sauvegarde et chargement du tableau</h5><p id="r-451398" data-claire-element-id="451398">Si l'utilisateur quitte l'application, ses données seront perdues. Nous allons donc chercher à les enregistrer automatiquement lors de la fermeture du logiciel. Pour cela, nous allons utiliser le fait que, lorsque le programme ferme, l'objet de classe NSApplication (qui représente notre application) qui a été créé à l'ouverture du logiciel envoie le message <code>applicationWillTerminate:</code> à son objet délégué (s'il existe). Nous implémenterons donc également cette méthode de façon à sauvegarder nos données au dernier moment.</p><p id="r-451399" data-claire-element-id="451399">Toutefois, il faut également prévenir l'application que nous acceptons d'être son objet délégué. Pour cela, il faut envoyer le message <code data-claire-semantic="objective-c">setDelegate:self </code> à cet objet. Mais comment s'appelle-t-il ? Comme je vous l'ai dit, au lancement de l'application, la fonction <code>main</code> du fichier main.m s'exécute, et appelle une autre fonction, NSApplicationMain. Celle-ci crée une unique instance de la classe NSApplication, appelée singleton. C'est un objet qui est le seul de sa classe (à l'intérieur d'un programme), et qui peut, dans Cocoa, être récupéré lorsque l'on envoie le message <code>sharedApplication</code> à NSApplication. Il faut donc rajouter, à l'intérieur de la méthode <code>init</code> de notre contrôleur, la ligne</p><pre id="r-451400" data-claire-element-id="451400"><code data-claire-semantic="objective-c">[[NSApplication sharedApplication] setDelegate:self];</code></pre><p id="r-451401" data-claire-element-id="451401">pour pouvoir ensuite implémenter <code>applicationWillTerminate</code>. ;) Dans cette méthode, nous allons créer une NSString représentant le chemin &quot;~/commandes sauvegardées&quot;. Le tilde ~ représente votre dossier principal. Chez moi, mon nom de login étant &quot;alexandre&quot;, c'est &quot;/Users/alexandre&quot;, mais nous ne pouvons pas savoir à l'avance ce que ça sera chez monsieur Redon. Nous utilisons donc cette notation générale, et nous récupérons le chemin complet au moment de l'exécution, à l'aide de la méthode <code>stringByExpandingTildeInPath</code> de la classe NSString. Nous utilisons ensuite la méthode <code>writeToFile: atomically:</code> qui attend en arguments un chemin sous forme de NSString, et un booléen précisant si des précautions doivent être prises lors de l'écriture du fichier (mettons YES, tant qu'à faire.).</p><pre id="r-451402" data-claire-element-id="451402"><code data-claire-semantic="objective-c">- (void) applicationWillTerminate:(NSNotification *)notification 
{
    NSString * chemin = [@&quot;~/commandes sauvegardées&quot; stringByExpandingTildeInPath];
    [commandes writeToFile:chemin atomically:YES];
}</code></pre><p id="r-451403" data-claire-element-id="451403">Nous devons alors également modifier notre méthode <code>init</code> de façon à ce qu'elle initialise le tableau &quot;commandes&quot; correctement.</p><pre id="r-451404" data-claire-element-id="451404"><code data-claire-semantic="objective-c">- (id) init 
{
    [super init];
    NSString *chemin = [@&quot;~/commandes sauvegardées&quot; stringByExpandingTildeInPath];
    NSArray * contenu = [NSArray arrayWithContentsOfFile:chemin];
    
    commandes = [NSMutableArray alloc];
    
    if(!contenu) /* Si on n'a pas pu charger de données */
        commandes = [commandes init]; /* Tableau vide */
    else
        commandes = [commandes initWithArray:contenu];  /* Sinon, les données ont été lues */
    
    [[NSApplication sharedApplication] setDelegate:self];
    
    return self;
}</code></pre><p id="r-451405" data-claire-element-id="451405">Nous commençons par tenter lire un NSArray au chemin indiqué. Si ce chemin est inaccessible, ou le fichier illisible pour une raison ou pour une autre (données corrompues par exemple), alors la méthode <code>arrayWithContentsOfFile:</code> renverra <code>nil</code>, et on placera dans commandes un tableau vide. Sinon, on recopiera les valeurs lues. ;)</p><p id="r-451406" data-claire-element-id="451406">Et voilà, au bout de ce long chapitre vous avez appris un certain nombre de choses sur la façon de concevoir des applications avec Cocoa. Même si vous n'êtes pas encore tout à fait prêts à voler de vos propres ailes en explorant la documentation par vous-même (en effet, il nous faut encore étudier la gestion de la mémoire en Objective-C, ce que nous ferons dès le chapitre suivant), vous devez certainement mieux cerner des principes-clés comme la métaphore des messages : les applications Cocoa sont vraiment des assemblages d'objets qui communiquent d'une façon ou d'une autre lorsqu'ils ont quelque chose à faire.</p><p id="r-451407" data-claire-element-id="451407">Je voudrais remercier : Psy| pour ses conseils, Marvin Bentiste pour sa relecture, Pwasson pour ses jeux de mots.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa">Développer sous OS X avec Cocoa</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Premiers pas avec Objective-C et Cocoa
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/presentation-d-objective-c">Présentation d&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/objective-c">
Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/principes-et-syntaxe-du-langage">
Principes et syntaxe du langage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-outils-apple">
Les outils Apple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/votre-premier-programme-objective-c">
Votre premier programme Objective-C
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/une-interface-graphique-1">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-modele-d-organisation-du-code-le-mvc-1">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-du-projet-et-de-l-interface-1">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/le-controleur-20">
Le contrôleur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/edition-du-code-1">
Édition du code
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/deux-structures-de-donnees-pratiques">Deux structures de données pratiques</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-tableaux-31">
Les tableaux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/les-dictionnaires-3">
Les dictionnaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/parcourir-des-collections-nsenumerator">
Parcourir des collections : NSEnumerator
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/un-carnet-de-commandes">Un carnet de commandes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/creation-de-notre-interface">
Création de notre interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/detail-du-fichier-d-interface">
Détail du fichier d&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
Implémentation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/des-petits-ajouts-qui-font-tout-le-charme">
Des petits ajouts qui font tout le charme !
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developper-sous-os-x-avec-cocoa/implementation-20">
<span class="arrow"></span>
<span class="next">Implémentation</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/developper-sous-os-x-avec-cocoa.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 04:04:49 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/developper-sous-os-x-avec-cocoa.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:48:07 GMT -->
</html>