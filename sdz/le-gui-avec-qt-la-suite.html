<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/le-gui-avec-qt-la-suite.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:05:55 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/le-gui-avec-qt-la-suite.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:16:12 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Le GUI avec Qt, la suite</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/le-gui-avec-qt-la-suite.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Le GUI avec Qt, la suite</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#LeGUIavecQtlasuite">Le GUI avec Qt, la suite</a><br/><a href="#GestionavancedesQPushButton">Gestion avancée des QPushButton</a><br/><a href="#CequevoussavezdjdesQPushButton">Ce que vous savez déjà des QPushButton</a><br/><a href="#PersonnalisersesQPushButton">Personnaliser ses QPushButton</a><br/><a href="#Lesboutons-menusuncasassezrare">Les boutons-menus, un cas assez rare</a><br/><a href="#Lamanipulationdesfichiers">La manipulation des fichiers</a><br/><a href="#Pourquoilireetcriredanslesfichiers">Pourquoi lire et écrire dans les fichiers ?</a><br/><a href="#Lalectureetlesdiffrentsmodesd039ouverture">La lecture et les différents modes d&#039;ouverture</a><br/><a href="#L039crituredanslesfichiers">L&#039;écriture dans les fichiers</a><br/><a href="#Allerencoreplusloin...">Aller encore plus loin...</a><br/><a href="#LarcuprationdesparamtresdelafonctionmainavecQt">La récupération des paramètres de la fonction main avec Qt</a><br/><a href="#Unpeudeculture">Un peu de culture</a><br/><a href="#Thorie">Théorie</a><br/><a href="#Pratique">Pratique</a><br/><a href="#Annexe">Annexe</a><br/><a href="#Apprendrecrerunstyleentirementpersonnalis">Apprendre à créer un style entièrement personnalisé</a><br/><a href="#Premireapprochedesstylespersonnaliss">Première approche des styles personnalisés</a><br/><a href="#Quelquesfonctionssupplmentaires">Quelques fonctions supplémentaires</a><br/><a href="#Pourensavoirplus...">Pour en savoir plus...</a><br/><a href="#Commenons...">Commençons...</a><br/><a href="#Prsentationrapidedesclasses">Présentation rapide des classes</a><br/><a href="#LetraditionnelquotHelloWorldquot">Le traditionnel &quot;Hello World !&quot;</a><br/><a href="#Formesgomtriquesetautres">Formes géométriques et autres</a><br/><a href="#Desfiguresgomtriquesennombre">Des figures géométriques en nombre</a><br/><a href="#Letextelesimagesetl039enregistrementdevotrescne">Le texte, les images et l&#039;enregistrement de votre scène</a><br/><a href="#QGraphicsItemetautreshistoires...">QGraphicsItem et autres histoires...</a><br/><a href="#Notionssupplmentaires">Notions supplémentaires</a><br/><a href="#LesGraphicsItem">Les GraphicsItem</a><br/><a href="#TPCrationd039unrveil">TP : Création d&#039;un réveil</a><br/><a href="#Prparatifs">Préparatifs</a><br/><a href="#Correction">Correction</a><br/><a href="#Idesd039amlioration">Idées d&#039;amélioration</a><br/></div>
<a name="LeGUIavecQtlasuite"></a><h2>Le GUI avec Qt, la suite</h2><div class="content" role="article">
<p id="r-376524" data-claire-element-id="376524"><strong>Ce cours est la suite de la partie « <a href="http://www.siteduzero.com/tutoriel-3-11406-apprenez-a-programmer-en-c.html#part_11407">Créez vos propres fenêtres avec Qt</a> » du tutoriel officiel de M@teo21 sur le C++</strong></p><p id="r-376525" data-claire-element-id="376525">Il est nécessaire d'avoir lu au moins jusqu'au chapitre :<br/> « <a href="http://www.siteduzero.com/tutoriel-3-11384-l-architecture-mvc-avec-les-widgets-complexes.html">L'architecture MVC avec les widgets complexes</a> »</p><figure id="r-376527" data-claire-element-id="376528"><img id="r-376526" data-claire-element-id="376526" src="medias/uploads.siteduzero.com_files_160001_161000_160966.png" alt="Logo"/></figure><p id="r-376529" data-claire-element-id="376529">Le framework Qt propose encore énormément de fonctionnalités et de classes très intéressantes que vous n'avez pas encore appris à maîtriser. Ainsi, si vous voulez développer des programmes robustes et complets ou tout simplement des programmes &quot;de pros&quot;, il vous faut étudier Qt sous toutes ses facettes.</p><p id="r-376530" data-claire-element-id="376530">Comme tous les cours, le tutoriel de M@teo21 n'est pas exhaustif, reste superficiel (ce qui est une bonne chose ici) et donc vous enseigne les bases de la programmation GUI avec Qt. Ces bases sont indispensables.</p><p id="r-376531" data-claire-element-id="376531">Le but de ce tutoriel est d'aller encore plus loin et d'enrichir vos connaissances. Ce cours vient donc compléter (et approfondir) celui de M@teo21. Nous aborderons des notions plus poussées comme la gestion avancée des principaux widgets, la gestion des données et sans oublier les nouvelles notions comme la 2D gérée par Qt !</p><p id="r-376532" data-claire-element-id="376532">Histoire de vous maintenir en haleine, au menu de ce tuto : accès aux bases de données, gestion adaptée des données, gestion de la date, de l'heure et du chrono, etc.</p><p id="r-376533" data-claire-element-id="376533">Comme c'est un peu le cas pour tous les tutoriels sur un sujet aussi vaste que Qt, notre objectif n'est pas d'être exhaustif, chose qui serait impossible à moins d'y passer un temps fou. Il faudra donc de temps en temps aller chercher les informations dont vous avez besoin dans la fameuse <a href="http://qt.nokia.com/doc/latest/index.html">documentation Qt</a>.</p><p id="r-376534" data-claire-element-id="376534">Dans ce cours, nous tenterons dans la mesure du possible de présenter les nouvelles notions en partant de zér0. À présent, je vous souhaite à tous une bonne lecture !</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="GestionavancedesQPushButton"></a><h2>Gestion avancée des QPushButton</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
<span class="next">Ce que vous savez déjà des QPushButton</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-376536" data-claire-element-id="376536">Peut-être vous êtes-vous déjà demandé comment personnaliser, de manière plus spécifique que dans le cadre du tuto de M@teo21, vos QPushButton comme je me le suis demandé il y a quelque temps.<br/> Eh bien si c'est le cas (ou non d'ailleurs) vous êtes au bon endroit !</p><p id="r-376537" data-claire-element-id="376537">Nous verrons les boutons invisibles, pouvant être cochés, les boutons-menus,... de manière à ce que vous puissiez vous en servir à tout moment dans vos programmes.</p><p id="r-376538" data-claire-element-id="376538">Il faut noter que ce chapitre est extrêmement simple et n'a qu'un seul but : refamiliariser le lecteur à Qt et le préparer à des notions plus poussées. Dit de manière plus poussée, ce chapitre n'est pas à considérer comme important ni comme s'il était primordial.</p>
</div><a name="CequevoussavezdjdesQPushButton"></a><h2>Ce que vous savez déjà des QPushButton</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">
<span class="arrow"></span>
<span class="next">Gestion avancée des QPushButton</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
<span class="next">Personnaliser ses QPushButton</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-ce-que-vous-savez-deja-des-qpushbutton" data-claire-element-id="376563">Ce que vous savez déjà des QPushButton</h4><p id="r-376539" data-claire-element-id="376539"><cite>Citation : un zéro qui se reconnaîtra peut-être...</cite></p><blockquote id="r-376541" data-claire-element-id="376541"><p id="r-376540" data-claire-element-id="376540">Que sais-tu des QPushButton ?</p></blockquote><p id="r-376542" data-claire-element-id="376542">C'est ce que m'a un jour demandé un zéro lorsque je débutais dans la programmation avec Qt.<br/> Sur le coup, je me suis dit que je ne savais pas grand chose, mis à part comment les définir et comment les placer dans une fenêtre, ainsi que s'en servir avec un slot nommé <code data-claire-semantic="cpp">ouvrir_Dialogue </code> si vous voyez de quoi je veux parler. :-° <br/> Dit autrement, on croit souvent savoir énormément de choses mais par moment, ce n'est pas le cas. Je ne suis pas passé au travers de cela. Logiquement, ce chapitre aura pour objectif de renforcer vos connaissances en la matière des QPushButton.</p><p id="r-376543" data-claire-element-id="376543">Comme un peu de révision n'a jamais fait de mal à personne (enfin, je crois :-°) nous allons donc récapituler ici tout ce que nous savons des QPushButton, maintenant que nous avons fini de travailler sur le tuto de M@teo21.</p><h5 id="r-definir-un-qpushbutton-le-redimensionner-et-le-placer-dans-la-fenetre" data-claire-element-id="376552">Définir un QPushButton, le redimensionner et le placer dans la fenêtre</h5><aside id="r-376545" data-claire-element-id="376545" data-claire-semantic="warning"><p id="r-376544" data-claire-element-id="376544">J'espère vraiment que ce que je vais vous dire ne vous apprendra rien.<br/> Si vous découvrez des choses, je vous conseille vivement de retourner voir le <a href="http://www.siteduzero.com/tutoriel-3-11406-apprenez-a-programmer-en-c.html#part_11407">tuto de M@teo21 sur Qt</a>, ce n'est pas une blague !</p></aside><p id="r-376546" data-claire-element-id="376546">Pour créer un bouton, nous nous servons du code suivant :</p><pre id="r-376547" data-claire-element-id="376547"><code data-claire-semantic="cpp">QPushButton *nomDuBouton = new QPushButton(&quot;Texte de votre bouton&quot;, this);</code></pre><p id="r-376548" data-claire-element-id="376548">Je ne prendrai même pas la peine de vous expliquer ce code puisque vous le connaissez déjà...<br/> Il est tout de même peut-être nécessaire, bien que j'en doute, de vous rappeler que le this sert à voir apparaître le bouton dans votre fenêtre, dans le cas où le widget concerné par une telle déclaration ne serait pas englobé par un autre widget qui aurait reçu cela (comme un layout par exemple).</p><p id="r-376549" data-claire-element-id="376549">Pour placer votre bouton, on se sert de <code data-claire-semantic="cpp">move(abscisse, ordonnee); </code> et pour le placer et le dimensionner, on se sert de <code data-claire-semantic="cpp">setGeometry(abscisse, ordonnee, largeur, hauteur); </code>, et ce de la manière suivante :</p><pre id="r-376550" data-claire-element-id="376550"><code data-claire-semantic="cpp">nomDuBouton-&gt;setGeometry(abscisse, ordonnee, largeur, hauteur); // On remplace bien sur abscisses, ordonnees,... par des dimensions en chiffres comme par exemple 20.</code></pre><p id="r-376551" data-claire-element-id="376551">Comme autres types de placement, vous devez aussi connaître les layouts. Vous savez également vous servir de <code>show()</code>, qu'on a tous vu au début du tuto sur Qt.</p><h5 id="r-les-signaux-associes-aux-boutons" data-claire-element-id="376562">Les signaux associés aux boutons</h5><p id="r-376553" data-claire-element-id="376553">Vous devez aussi déjà connaître les signaux suivants (au minimum le premier) :</p><ul id="r-376560" data-claire-element-id="376560"><li id="r-376555" data-claire-element-id="376555"><p id="r-376554" data-claire-element-id="376554">clicked() : c'est le plus courant et le plus utilisé des signaux des QPushButton ;</p></li><li id="r-376557" data-claire-element-id="376557"><p id="r-376556" data-claire-element-id="376556">pressed() : signal déclenché quand le bouton est enfoncé ;</p></li><li id="r-376559" data-claire-element-id="376559"><p id="r-376558" data-claire-element-id="376558">released() : signal déclenché quand le bouton est relâché.</p></li></ul><p id="r-376561" data-claire-element-id="376561">Eh bien jusque là c'était une pure perte de temps de la rigolade pour vous. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">
<span class="arrow"></span>
<span class="next">Gestion avancée des QPushButton</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
<span class="next">Personnaliser ses QPushButton</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="PersonnalisersesQPushButton"></a><h2>Personnaliser ses QPushButton</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
<span class="arrow"></span>
<span class="next">Ce que vous savez déjà des QPushButton</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
<span class="next">Les boutons-menus, un cas assez rare</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-personnaliser-ses-qpushbutton" data-claire-element-id="376641">Personnaliser ses QPushButton</h4><p id="r-376564" data-claire-element-id="376564">Maintenant que nous en avons fini des révisions, nous pouvons passer à la phase la plus intéressante : la personnalisation des QPushButton ! Bien sûr, nous n'entrerons pas trop dans les détails pour éviter de partir dans des cas de figure trop rares. ;) <br/> Cette seconde partie du chapitre sur les QPushButton aura sûrement beaucoup de petites choses à vous apprendre. Ne vous mettez donc pas dans la tête que cette partie est inutile pour vous, ce serait une grossière erreur.</p><h5 id="r-setenabled" data-claire-element-id="376581">setEnabled()</h5><p id="r-376565" data-claire-element-id="376565">La fonction <code data-claire-semantic="cpp">setEnabled() </code> est assez importante. Pour être franc, c'est de celle-ci que dépendent en partie les autres fonctions, les signaux en particuliers. Pour être plus précis, <code data-claire-semantic="cpp">setEnabled </code> est une fonction de QWidget : QPushButton <strong>hérite</strong> donc de cette fonction.</p><h6 id="r-setenabled-true" data-claire-element-id="376572">setEnabled(true)</h6><p id="r-376566" data-claire-element-id="376566">Imaginons que nous avons créé un projet avec dedans uniquement un <em>main.cpp</em> pour simplifier les choses.<br/> Nous y mettons ce code pour faire en sorte que notre bouton soit utilisable :</p><pre id="r-376567" data-claire-element-id="376567"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QPushButton&gt;

int main(int argc, char *argv[])
{
	QApplication app(argc, argv);
	QPushButton *bouton = new QPushButton(&quot;Exemple de bouton utilisant la fonction setEnabled(true)&quot;);
	bouton-&gt;setEnabled(true);
	bouton-&gt;show();
	return app.exec();
}</code></pre><p id="r-376568" data-claire-element-id="376568">Voici ce que ça donne :</p><figure id="r-376570" data-claire-element-id="376571"><img id="r-376569" data-claire-element-id="376569" src="medias/uploads.siteduzero.com_files_145001_146000_145238.jpg" alt="Image utilisateur"/></figure><h6 id="r-setenabled-false" data-claire-element-id="376580">setEnabled(false)</h6><p id="r-376573" data-claire-element-id="376573">Dans un autre cas, nous avons un QGroupBox cochable contenant notre bouton. Nous faisons en sorte qu'il ne soit pas coché et donc que le bouton ne soit pas utilisable (on va faire simple pour ne pas s'embarrasser avec des slots et on utilise la même fonction pour le bouton et pour le QGroupBox) :</p><pre id="r-376574" data-claire-element-id="376574"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QtGui&gt;

int main(int argc, char *argv[])
{
	QApplication app(argc, argv);

	QWidget fenetre;

	QGroupBox *groupe = new QGroupBox(&quot;Exemple de groupe non coché&quot;);
	groupe-&gt;setCheckable(true);
	groupe-&gt;setChecked(false);
	groupe-&gt;setEnabled(false);

	QPushButton *bouton = new QPushButton(&quot;Exemple de bouton utilisant la fonction setEnabled(false)&quot;);
	bouton-&gt;setEnabled(false);

	QVBoxLayout *vbox = new QVBoxLayout;
	vbox-&gt;addWidget(bouton);
	groupe-&gt;setLayout(vbox);

	QVBoxLayout *vboxPrincipal = new QVBoxLayout(&amp;fenetre);
	vboxPrincipal-&gt;addWidget(groupe);

	fenetre.show();
	return app.exec();
}</code></pre><p id="r-376575" data-claire-element-id="376575">Et voici le résultat :</p><figure id="r-376577" data-claire-element-id="376578"><img id="r-376576" data-claire-element-id="376576" src="medias/uploads.siteduzero.com_files_145001_146000_145239.jpg" alt="Image utilisateur"/></figure><p id="r-376579" data-claire-element-id="376579">En bref, vous souhaitez que votre bouton soit utilisable, utilisez <code data-claire-semantic="cpp">setEnabled(true) </code>, bien que dans le cas d'une utilisation toute simple comme ici, ce ne soit pas utile de mettre ce code. Si vous souhaitez qu'il ne le soit pas, utilisez <code data-claire-semantic="cpp">setEnabled(false) </code>.</p><h5 id="r-setflat" data-claire-element-id="376590">setFlat()</h5><p id="r-376582" data-claire-element-id="376582"><code>setFlat()</code> est une fonction permettant de retirer les bordures d'un bouton, laissant visible le texte seulement.<br/> Pour <code>setFlat(true)</code>, le bouton n'aura pas de bordures, tandis que pour <code>false</code>, il s'affichera normalement.</p><p id="r-376583" data-claire-element-id="376583">Voici un exemple de code illustrant ce que je viens de dire :</p><pre id="r-376584" data-claire-element-id="376584"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QPushButton&gt;

int main(int argc, char *argv[])
{
	QApplication app(argc, argv);
	QPushButton *bouton = new QPushButton(&quot;Exemple de bouton utilisant la fonction setFlat(true)&quot;);
	bouton-&gt;setFlat(true);
	bouton-&gt;show();
	return app.exec();
}</code></pre><p id="r-376585" data-claire-element-id="376585">Et le résultat :</p><figure id="r-376587" data-claire-element-id="376588"><img id="r-376586" data-claire-element-id="376586" src="medias/uploads.siteduzero.com_files_145001_146000_145240.jpg" alt="Image utilisateur"/></figure><p id="r-376589" data-claire-element-id="376589">Il y a tout de même un défaut : si on veut vraiment planquer le bouton, il faut désactiver l'animation car lorsqu'on clique sur le bouton, on le voit apparaître pour s'animer. Nous allons voir tout de suite cette fonction qui est la suivante. ;)</p><h5 id="r-setupdatesenabled" data-claire-element-id="376603">setUpdatesEnabled()</h5><p id="r-376591" data-claire-element-id="376591"><code data-claire-semantic="cpp">setFlat() </code> servait à rendre le bouton transparent mais, d'un point de vue esthétique, voir un bouton transparent apparaître pour s'enfoncer et se relâcher puis disparaître n'est pas très professionnel. :p</p><p id="r-376592" data-claire-element-id="376592">Heureusement, <code data-claire-semantic="cpp">setUpdatesEnabled() </code> existe.<br/> Nous allons donc immédiatement corriger ce petit défaut avec cette fonction mais juste avant, j'ai une petite remarque à vous faire à ce sujet :</p><aside id="r-376594" data-claire-element-id="376594" data-claire-semantic="information"><p id="r-376593" data-claire-element-id="376593"><code data-claire-semantic="cpp">setUpdatesEnabled() </code> peut être utilisé par presque tous les widgets, tout comme <code data-claire-semantic="cpp">setEnabled() </code>, que nous venons de voir, et <code data-claire-semantic="cpp">setCheckable() </code> que je ne vais pas tarder à vous expliquer.</p></aside><p id="r-376595" data-claire-element-id="376595">Mais comment l'utiliser ?<br/> Rien de plus simple : c'est la même méthode que <code data-claire-semantic="cpp">setEnabled() </code> : soit on met <code data-claire-semantic="cpp">true </code> pour laisser les animations, soit on met <code data-claire-semantic="cpp">false </code> pour les désactiver. Plus précisément, on rend notre bouton parfaitement transparent et une des conséquences de le mettre ainsi est de désactiver les animations.</p><p id="r-376596" data-claire-element-id="376596">Note : désactiver l'animation d'un bouton (donc en le rendant transparent) ne vous empêchera pas de l'utiliser : il pourra toujours avoir son (ou ses) propres slots, ses dimensions, son placement,... propres. En résumé, se servir de cette fonction limitera juste l'utilisation du bouton, ni plus ni moins. ;)</p><p id="r-376597" data-claire-element-id="376597">Je vous remets un bout de code pour la compréhension (c'est super simple) :</p><pre id="r-376598" data-claire-element-id="376598"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QPushButton&gt;

int main(int argc, char *argv[])
{
	QApplication app(argc, argv);
	QPushButton *bouton = new QPushButton(&quot;Exemple de bouton utilisant la fonction setFlat(true)&quot;);
	bouton-&gt;setFlat(true); // Cette ligne n'est pas vraiment utile...
	bouton-&gt;setUpdatesEnabled(false); // ... celle-ci ayant une efficacité plus ample.
	bouton-&gt;show();
	return app.exec();
}</code></pre><p id="r-376599" data-claire-element-id="376599">C'est tout !<br/> Testez le code, cliquez sur le bouton. Que se passe-t-il ? Rien. Absolument rien. Le bouton n'a même pas bronché !</p><p id="r-376600" data-claire-element-id="376600">C'est parfait tout ça...<br/> Ça vous intéresserait une dernière info ? Pas cher ! :lol:</p><p id="r-376601" data-claire-element-id="376601">Eh bien, pour vous donner une petite astuce, on peut facilement planquer un bouton sur une image (une carte par exemple) pour faire croire à l'utilisateur qu'il clique sur l'image et non sur ce bouton dont il ne connaît même pas l'existence.<br/> Eh oui, tous les coups sont permis dans la programmation. ;)</p><p id="r-376602" data-claire-element-id="376602">Mais chuuut ! Faut pas le dire : c'est uniquement entre nous :o</p><h5 id="r-setcheckable" data-claire-element-id="376610">setCheckable()</h5><p id="r-376604" data-claire-element-id="376604"><code data-claire-semantic="cpp">setCheckable() </code>... encore <code data-claire-semantic="cpp">setCheckable() </code> vous devez déjà la connaître cette petite bête !</p><p id="r-376605" data-claire-element-id="376605">Eh bien oui, vous en avez sûrement déjà entendu parler, entre ZeroClassGenerator, la Fenêtre principale avec les actions des menus, etc.</p><div id="r-376607" data-claire-element-id="376607" data-claire-semantic="question"><p id="r-376606" data-claire-element-id="376606">Mais le saviez-vous ?<br/> On peut aussi s'en servir pour les boutons pour pouvoir les laisser enfoncés après un clic dessus.</p></div><p id="r-376608" data-claire-element-id="376608">Bref, c'est comme les autres fonctions, on met <code data-claire-semantic="cpp">true </code> si on veut que ce soit possible ou <code data-claire-semantic="cpp">false </code> si on n'en veut pas ! Mais dans ce cas, ne perdez pas votre temps à écrire une ligne, c'est automatiquement <code data-claire-semantic="cpp">false </code> si vous ne mettez rien.</p><p id="r-376609" data-claire-element-id="376609">Je n'entre pas plus dans les détails...</p><h5 id="r-setchecked" data-claire-element-id="376614">setChecked()</h5><p id="r-376611" data-claire-element-id="376611">Cette fonction est associée à la précédente et elle sert à faire en sorte que le bouton soit coché ou non.<br/> On met <code data-claire-semantic="cpp">true </code> pour qu'il soit coché et <code data-claire-semantic="cpp">false </code> pour qu'il ne le soit pas.</p><aside id="r-376613" data-claire-element-id="376613" data-claire-semantic="information"><p id="r-376612" data-claire-element-id="376612">Il est possible de faire en sorte que le bouton soit enfoncé mais que l'utilisateur ne puisse pas le décocher ou cliquer dessus : ce sont les fonctions setCheckable() et setEnabled() qui sont utilisées dans ce cas de figure.</p></aside><h5 id="r-un-autre-signal-toggled-bool" data-claire-element-id="376620">Un autre signal : toggled(bool)</h5><p id="r-376615" data-claire-element-id="376615">Et voici un nouveau signal : <code data-claire-semantic="cpp">toggled(bool) </code> !<br/> Que de nouveautés dans cette partie, n'est-ce pas ?</p><p id="r-376616" data-claire-element-id="376616"><code data-claire-semantic="cpp">toggled(bool) </code> est un signal qui est envoyé quand le bouton est coché.<br/> Il a tout de même besoin d'une chose pour son activation : que le bouton soit cochable (donc que <code data-claire-semantic="cpp">setCheckable() </code> soit <code data-claire-semantic="cpp">true </code>).</p><p id="r-376617" data-claire-element-id="376617">Voici un exemple de connexion à l'aide de ce signal :</p><pre id="r-376618" data-claire-element-id="376618"><code data-claire-semantic="cpp">connect(bouton, SIGNAL(toggled(bool)), this, SLOT(ouvrirFenetre()));</code></pre><p id="r-376619" data-claire-element-id="376619">Mais en quoi ce slot pourrait-il nous servir ? Eh bien vous avez créé un jeu avec une option &quot;afficher le graphisme&quot; par exemple. Pour une raison x, vous avez décidé de mettre un bouton cochable et vous voulez faire en sorte que le graphisme soit activé dès que l'utilisateur coche le bouton. Dans ce cas précis, vous aurez besoin de ce slot, pratique, non ?</p><h5 id="r-hide-et-show" data-claire-element-id="376626">hide() et show()</h5><p id="r-376621" data-claire-element-id="376621"><code data-claire-semantic="cpp">hide() </code> et <code data-claire-semantic="cpp">show() </code> sont des slots permettant de masquer et d'afficher un widget (comme un QPushButton ou un QLabel par exemple). Ces fonctions sont équivalentes à <code data-claire-semantic="cpp">setVisible(false) </code> pour <code data-claire-semantic="cpp">hide() </code> et <code data-claire-semantic="cpp">setVisible(true) </code> pour <code data-claire-semantic="cpp">show() </code>.<br/> Voici les utilisations les plus courantes de ces deux slots :</p><pre id="r-376622" data-claire-element-id="376622"><code data-claire-semantic="cpp">/*
On a un QPushButton *bouton et un QLabel *label déjà créés...
*/

QObject::connect(bouton, SIGNAL(clicked()), label, SLOT(hide())); // On peut aussi mettre show()</code></pre><p id="r-376623" data-claire-element-id="376623">Et l'autre utilisation courante :</p><pre id="r-376624" data-claire-element-id="376624"><code data-claire-semantic="cpp">/*
On a un QPushButton *bouton et un QLabel *label déjà créés...
Le slot est déclenché lors d'un clic sur ce bouton
*/

void FenPrincipale::operation()
{
	label-&gt;hide(); // Ou show() comme vous voulez
}</code></pre><p id="r-376625" data-claire-element-id="376625">Une seule petite remarque à faire pour <code data-claire-semantic="cpp">show() </code> : si vous l'utilisez normalement, il ouvrira une nouvelle fenêtre.</p><h5 id="r-les-fonctions-que-vous-connaissez-deja" data-claire-element-id="376640">Les fonctions que vous connaissez déjà</h5><p id="r-376627" data-claire-element-id="376627">À tout cela s'ajoutent logiquement les fonctions suivantes que vous connaissez déjà (elles sont détaillées dans le tuto de M@teo21) :</p><ul id="r-376638" data-claire-element-id="376638"><li id="r-376629" data-claire-element-id="376629"><p id="r-376628" data-claire-element-id="376628">setCursor() : pour mettre un curseur spécial lorsqu'on pointe le bouton ;</p></li><li id="r-376631" data-claire-element-id="376631"><p id="r-376630" data-claire-element-id="376630">setToolTip() : pour ajouter une infobulle au bouton ;</p></li><li id="r-376633" data-claire-element-id="376633"><p id="r-376632" data-claire-element-id="376632">setFont() : pour définir la police du bouton ;</p></li><li id="r-376635" data-claire-element-id="376635"><p id="r-376634" data-claire-element-id="376634">setIcon() : pour donner une icône au bouton ;</p></li><li id="r-376637" data-claire-element-id="376637"><p id="r-376636" data-claire-element-id="376636">setText() : pour modifier le texte du bouton.</p></li></ul><p id="r-376639" data-claire-element-id="376639">Des cas plus rares d'utilisations s'ajoutent. Je vous en détaillerai un en particulier si vous voulez bien vous donner la peine de passer à la sous-partie suivante de ce chapitre sur les QPushButton. :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
<span class="arrow"></span>
<span class="next">Ce que vous savez déjà des QPushButton</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
<span class="next">Les boutons-menus, un cas assez rare</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesboutons-menusuncasassezrare"></a><h2>Les boutons-menus, un cas assez rare</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
<span class="arrow"></span>
<span class="next">Personnaliser ses QPushButton</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">
<span class="next">La manipulation des fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-boutons-menus-un-cas-assez-rare" data-claire-element-id="376715">Les boutons-menus, un cas assez rare</h4><p id="r-376642" data-claire-element-id="376642">Je vais maintenant vous parler d'un cas plus rare d'utilisation des QPushButton : les boutons-menus !<br/> Eh oui, une promesse est une promesse : on ne revient pas dessus. :-°</p><h5 id="r-les-boutons-menus-c-est-quoi" data-claire-element-id="376648">Les boutons-menus, c'est quoi ?</h5><p id="r-376643" data-claire-element-id="376643">C'est assez logique de se poser ce type de question, ne vous en faites pas. ;)</p><p id="r-376644" data-claire-element-id="376644">Quand on regarde tout en bas de la doc sur les QPushButton, on constate qu'il y a un charabia qui parle des boutons-menus avec deux images l'illustrant. Oui, oui, c'est bien ça ce que je vais vous apprendre ici : créer ce type de bouton !</p><p id="r-376645" data-claire-element-id="376645">Un bouton-menu, c'est donc la même chose qu'un menu, à un point près : c'est un bouton, comme son nom l'indique si bien.</p><p id="r-376646" data-claire-element-id="376646">Tout cela doit sûrement vous faire penser aux QComboBox, n'est-ce pas ?<br/> Eh bien d'un côté, vous avez raison d'y penser mais ce serait bien que vous puissiez l'oublier pour cette partie : les QComboBox et les boutons-menus ne marchent pas de la même façon, vous le comprendrez bien assez tôt !<br/> Bien sûr, vous avez la possibilité de faire énormément de choses avec les QComboBox mais l'objectif est de vous apprendre quelque chose de nouveau donc ne crachez pas dans la soupe. :p</p><p id="r-376647" data-claire-element-id="376647">Que vous dire de plus avant de se lancer ?<br/> Eh bien je ne vois pas autre chose que... c'est parti !</p><h5 id="r-creons-notre-premier-bouton-menu" data-claire-element-id="376691">Créons notre premier bouton-menu</h5><p id="r-376649" data-claire-element-id="376649">En tant que grands travailleurs, nous allons sagement regarder ce que peut nous apporter la doc des QPushButton.<br/> Voici ce qu'elle nous donne comme information au sujet de la création d'un bouton-menu :</p><p id="r-376650" data-claire-element-id="376650"><cite>Citation : Doc des QPushButton</cite></p><blockquote id="r-376652" data-claire-element-id="376652"><p id="r-376651" data-claire-element-id="376651">void QPushButton::setMenu ( QMenu * menu )</p></blockquote><p id="r-376653" data-claire-element-id="376653">Décortiquons ce code :</p><ul id="r-376660" data-claire-element-id="376660"><li id="r-376655" data-claire-element-id="376655"><p id="r-376654" data-claire-element-id="376654"><code data-claire-semantic="cpp">void QPushButton </code> : c'est assez normal comme code mais il y a un petit sous-entendu : il faut créer un QPushButton. Eh oui, tout ne se fera pas d'un claquement de doigts que je sache !</p></li><li id="r-376657" data-claire-element-id="376657"><p id="r-376656" data-claire-element-id="376656"><code data-claire-semantic="cpp">setMenu </code> : c'est tout aussi logique, c'est assez similaire au &quot;addMenu()&quot; des menus mais ça ne marche pas de la même manière...</p></li><li id="r-376659" data-claire-element-id="376659"><p id="r-376658" data-claire-element-id="376658"><code data-claire-semantic="cpp">( QMenu * menu ) </code> : ce bout de code demande de manière implicite à ce qu'un menu soit déjà défini.</p></li></ul><p id="r-376661" data-claire-element-id="376661">Maintenant que je vous ai expliqué tout cela, vous devez être capable de créer un bouton-menu tout seul. o_O <br/> Non, non, je ne plaisante pas, vous devez en être capable !</p><p id="r-376662" data-claire-element-id="376662">Vous avez 5 minutes montre en main ! :diable:</p><p id="r-376663" data-claire-element-id="376663">.....<br/> ....<br/> ...</p><p id="r-376664" data-claire-element-id="376664">C'est terminé, posez vos claviers !<br/> Bon allez, je suis sympa, je vais gentiment faire la correction...</p><p id="r-376665" data-claire-element-id="376665">Pour cela, nous allons créer un projet qui sera constitué de trois fichiers :</p><ul id="r-376672" data-claire-element-id="376672"><li id="r-376667" data-claire-element-id="376667"><p id="r-376666" data-claire-element-id="376666"><em>main.cpp</em> ;</p></li><li id="r-376669" data-claire-element-id="376669"><p id="r-376668" data-claire-element-id="376668"><em>FenPrincipale.cpp</em> ;</p></li><li id="r-376671" data-claire-element-id="376671"><p id="r-376670" data-claire-element-id="376670"><em>FenPrincipale.h</em>.</p></li></ul><p id="r-376673" data-claire-element-id="376673">Dans le main.cpp, on met le code habituel :</p><pre id="r-376674" data-claire-element-id="376674"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &quot;FenPrincipale.h&quot;

int main(int argc, char *argv[])
{
	QApplication app(argc, argv);

	FenPrincipale fenetre;
	fenetre.show();

	return app.exec();
}</code></pre><p id="r-376675" data-claire-element-id="376675">Dans le FenPrincipale.h :</p><pre id="r-376676" data-claire-element-id="376676"><code data-claire-semantic="cpp">#ifndef HEADER_FENPRINCIPALE
#define HEADER_FENPRINCIPALE

#include &lt;QtGui&gt;

class FenPrincipale : public QMainWindow
{
	Q_OBJECT // On le met pour la suite
	
	public:
		FenPrincipale();

	public slots:

	private:
		
};
#endif</code></pre><p id="r-376677" data-claire-element-id="376677">Et c'est au <em>FenPrincipale.cpp</em> que ça se gâte. ;)</p><p id="r-376678" data-claire-element-id="376678">Concrètement, qu'est-ce qu'on doit y mettre ?<br/> Eh bien on doit y mettre un bouton et un menu, ça n'avance pas beaucoup l'affaire...</p><p id="r-376679" data-claire-element-id="376679">Voilà ce que ça donne pour le moment :</p><pre id="r-376680" data-claire-element-id="376680"><code data-claire-semantic="cpp">#include &quot;FenPrincipale.h&quot;

FenPrincipale::FenPrincipale()
{
	setFixedSize(210, 60);
	
	QMenu *menuFichier = menuBar()-&gt;addMenu(&quot;&amp;Fichier&quot;);

	QPushButton *boutonFichier = new QPushButton(&quot;Fichier&quot;, this);
	boutonFichier-&gt;setGeometry(5, 25, 200, 30);

}</code></pre><p id="r-376681" data-claire-element-id="376681">Et c'est maintenant qu'on se sert de la fameuse ligne de code de la doc :</p><pre id="r-376682" data-claire-element-id="376682"><code data-claire-semantic="cpp">boutonFichier-&gt;setMenu(menuFichier);</code></pre><p id="r-376683" data-claire-element-id="376683">Je vous donne le code complet ?<br/> Pas de problème patron, ça arrive tout de suite !</p><pre id="r-376684" data-claire-element-id="376684"><code data-claire-semantic="cpp">#include &quot;FenPrincipale.h&quot;

FenPrincipale::FenPrincipale()
{
	setFixedSize(210, 60);
	
	QMenu *menuFichier = menuBar()-&gt;addMenu(&quot;&amp;Fichier&quot;);

	QPushButton *boutonFichier = new QPushButton(&quot;Fichier&quot;, this);
	boutonFichier-&gt;setMenu(menuFichier);
	boutonFichier-&gt;setGeometry(5, 25, 200, 30);

}</code></pre><p id="r-376685" data-claire-element-id="376685">On compile et sous vos yeux ébahis, une fenêtre s'ouvre... pas ! Eh bien non vous avez oublié de mettre les <em>.dll</em> : dommage, hein ?</p><p id="r-376686" data-claire-element-id="376686">Ce n'est pas un problème, on les met (du moins, les utilisateurs d'un OS les nécessitant) et cette fois-ci, la fenêtre s'ouvre pour de bon :</p><figure id="r-376688" data-claire-element-id="376689"><img id="r-376687" data-claire-element-id="376687" src="medias/uploads.siteduzero.com_files_145001_146000_145242.jpg" alt="Image utilisateur"/></figure><p id="r-376690" data-claire-element-id="376690">Ça y est, vous avez créé votre premier bouton-menu. Félicitations !</p><h5 id="r-ajouter-une-action-a-votre-menu" data-claire-element-id="376703">Ajouter une action à votre menu</h5><p id="r-376692" data-claire-element-id="376692">Comme vous l'avez judicieusement remarqué, le bouton-menu n'a pas d'action.<br/> Bouhouhou ! Pauvre bouton-menu. :'( <br/> Il doit être triste !<br/> Mais non, ne pleure pas petit bouton-menu, je vais t'en donner une action !</p><p id="r-376693" data-claire-element-id="376693">Comment donner une action à notre bouton-menu ?</p><p id="r-376694" data-claire-element-id="376694">Eh bien c'est super facile : il suffit d'en donner une à notre menu. o_O <br/> Eh oui, si vous avez suivi, vous avez dû comprendre qu'on utilisait le menu pour garnir le bouton-menu.</p><p id="r-376695" data-claire-element-id="376695">Voici les deux lignes qu'on rajoute :</p><pre id="r-376696" data-claire-element-id="376696"><code data-claire-semantic="cpp">QAction *actionQuitter = menuFichier-&gt;addAction(&quot;Quitter&quot;);
connect(actionQuitter, SIGNAL(triggered()), qApp, SLOT(quit()));</code></pre><p id="r-376697" data-claire-element-id="376697">Et voilà pour le résultat :</p><figure id="r-376699" data-claire-element-id="376700"><img id="r-376698" data-claire-element-id="376698" src="medias/uploads.siteduzero.com_files_145001_146000_145247.png" alt="Image utilisateur"/></figure><p id="r-376701" data-claire-element-id="376701">Joli non ?<br/>Pour info, je n'ai pas fait exprès de mettre &quot;Quitter&quot; en transparent : mon outil capture d'écran fait des siennes mais le résultat est beau, c'est le principal...</p><p id="r-376702" data-claire-element-id="376702">C'est tout pour les actions...</p><h5 id="r-masquer-les-menus" data-claire-element-id="376714">Masquer les menus</h5><p id="r-376704" data-claire-element-id="376704">C'est bien joli d'avoir créé des boutons-menu... mais ça ne sert à rien si les menus normaux sont toujours visibles :-°</p><p id="r-376705" data-claire-element-id="376705">On pourrait bien sûr se servir de <code data-claire-semantic="cpp">setMask() </code> avec <code data-claire-semantic="cpp">QRegion </code> pour faire ce genre de choses mais ce serait vraiment trop compliqué dans le cadre d'un tuto.</p><p id="r-376706" data-claire-element-id="376706">On va effectuer quelque chose de plus simple : nous allons créer un QMenuBar et nous y mettrons notre menu Fichier.<br/> Résultat : le menu Fichier ne se situera pas sur la fenêtre (nulle part d'ailleurs) mais il sera existant, ce qui nous permettra quand même de faire marcher notre bouton-menu.</p><p id="r-376707" data-claire-element-id="376707">Vous devez vous dire qu'il faut vraiment avoir des idées tordues pour inventer ça, n'est-ce pas ?<br/> Eh bien le principal est que ça marche, le reste, j'aurais tendance à dire qu'on s'en fiche...</p><p id="r-376708" data-claire-element-id="376708">Voici donc le nouveau code :</p><pre id="r-376709" data-claire-element-id="376709"><code data-claire-semantic="cpp">#include &quot;FenPrincipale.h&quot;

FenPrincipale::FenPrincipale()
{
	setFixedSize(210, 60);
	
	QMenuBar *barreMenu = new QMenuBar; // On crée notre QMenuBar
	QMenu *menuFichier = barreMenu-&gt;addMenu(&quot;&amp;Fichier&quot;); // On y met le menuFichier...
	QAction *actionQuitter = menuFichier-&gt;addAction(&quot;Quitter&quot;);
	connect(actionQuitter, SIGNAL(triggered()), qApp, SLOT(quit()));

	menuFichier-&gt;setVisible(false);

	QPushButton *boutonFichier = new QPushButton(&quot;Fichier&quot;, this);
	boutonFichier-&gt;setMenu(menuFichier);
	boutonFichier-&gt;setGeometry(5, 25, 200, 30);

}</code></pre><p id="r-376710" data-claire-element-id="376710">Non, plus sérieusement, il existe un moyen bien plus simple : il s'agit de créer nos menus sans les mettre dans une QMenuBar et de les associer au boutons-menus. Je vous fais confiance et je vous laisse effectuer ces petits changements très simples. Sachez qu'il est aussi possible de créer des actions (<a href="http://doc.trolltech.com/4.5/qaction.html">QAction</a> donc) et de les associer à notre bouton-menu.</p><p id="r-376711" data-claire-element-id="376711">Maintenant, le QCM !</p><p id="r-376712" data-claire-element-id="376712">C'est fini pour ce chapitre : vous êtes tous devenus des experts en matière de boutons !<br/> Si le zéro dont je parlais en début de chapitre vient vous poser la même question qu'à moi il y a longtemps, vous saurez quoi lui répondre maintenant que nous avons bien travaillé. ;)</p><p id="r-376713" data-claire-element-id="376713">Je vous dis donc à bientôt (ou à tout de suite si vous souhaitez continuer maintenant) dans la suite du cours !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
<span class="arrow"></span>
<span class="next">Personnaliser ses QPushButton</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">
<span class="next">La manipulation des fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lamanipulationdesfichiers"></a><h2>La manipulation des fichiers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
<span class="arrow"></span>
<span class="next">Les boutons-menus, un cas assez rare</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
<span class="next">Pourquoi lire et écrire dans les fichiers ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-376717" data-claire-element-id="376717">Bonjour !</p><p id="r-376718" data-claire-element-id="376718">Dans vos programmes, il peut parfois être pratique ou même indispensable de pouvoir lire et écrire dans les fichiers. Qt propose pour cela des classes toutes faites aux fonctionnalités très larges. Voyons cela de plus près. Dans un premier temps, nous verrons en quoi il peut s'avérer pratique d'exploiter les fichiers, en enchaînant avec la lecture dans les fichiers, suivie de l'écriture, avant de terminer le chapitre sur quelques fonctionnalités et informations en vrac. :)</p>
</div><a name="Pourquoilireetcriredanslesfichiers"></a><h2>Pourquoi lire et écrire dans les fichiers ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">
<span class="arrow"></span>
<span class="next">La manipulation des fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
<span class="next">La lecture et les différents modes d&#039;ouverture</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pourquoi-lire-et-ecrire-dans-les-fichiers" data-claire-element-id="376725">Pourquoi lire et écrire dans les fichiers ?</h4><p id="r-376719" data-claire-element-id="376719">Toute fonctionnalité a pour but, comme son nom l'indique, d'avoir une fonction, en gros de servir à quelque chose. On est en droit de se poser la question &quot;En quoi la manipulation des fichiers peut-elle être utile ?&quot;. Pour y répondre, nous allons passer par une question sous-jacente : quels sont les cas de figure qui nécessitent l'utilisation du disque dur ? ^^</p><p id="r-376720" data-claire-element-id="376720">On vous l'a répété souvent, je suppose : la mémoire vive ou RAM est une mémoire temporaire. C'est-à-dire que les données que vous y enregistrez n'y restent pas éternellement ; au mieux, elles disparaissent lors de l'extinction de l'ordinateur. Jusqu'à maintenant, vous n'avez cessé de l'utiliser, cette mémoire vive. Vos variables et objets sont en effet stockés en mémoire temporaire et n'existent que pendant l'utilisation de votre programme. Considérons la déclaration du QVector suivant (nous verrons en détail de quoi il s'agit dans les chapitres suivants) :</p><pre id="r-376721" data-claire-element-id="376721"><code data-claire-semantic="cpp">QVector &lt;unsigned long&gt; Scores;</code></pre><p id="r-376722" data-claire-element-id="376722">En gros, supposons qu'il nous servira à stocker les résultats du jeu du pendu. Au fil de notre programme, le QVector (qui est une sorte de tableau ressemblant fortement à std::vector, mais en version Qt) change de taille, de contenu, etc. Toutes ces modifications concernent le tableau mais malheureusement pour nous, ce dernier est stocké dans la RAM. En clair, il vous sera impossible de retrouver vos résultats dans une autre instance du programme (bah oui). C'est idiot mais c'est ainsi, ce n'est pas fait pour cela. Mais en réalité, ce n'est pas si idiot que ça, la mémoire vive a, elle aussi, une utilité, comme toute chose : elle accélère l'exécution du programme qui lit les données qui y sont stockées.</p><p id="r-376723" data-claire-element-id="376723">Mais comment faut-il s'y prendre pour stocker les données de manière permanente ? Et c'est là que le disque dur entre en jeu. Le disque dur (ou HDD pour <em>hard drive disk</em> en anglais) permet de stocker les données de manière permanente, si l'on veut y supprimer quelque chose, il faut le faire manuellement et explicitement (vous connaissez : clic droit puis &quot;supprimer&quot;). C'est bien beau, mais comment accéder à cet espace de stockage à partir de notre programme ? Comment y lire les données ou y écrire ? Ce qu'il faut savoir, c'est que les OS organisent le disque dur (en premier lieu en partitions d'accord) en fichiers. Un fichier sur le disque dur est comparable à un objet sur la RAM : c'est un bout de mémoire où l'on stocke ses données. Je pourrais vous citer par exemple un fichier texte, qui sert à stocker... des chaînes de caractères.</p><p id="r-376724" data-claire-element-id="376724">Pour satisfaire nos attentes, les programmeurs de Qt ont créé la classe QFile. C'est la classe indispensable pour manipuler les fichiers et dans ce tutoriel, je vais justement vous apprendre à l'utiliser correctement. C'est parti !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">
<span class="arrow"></span>
<span class="next">La manipulation des fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
<span class="next">La lecture et les différents modes d&#039;ouverture</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lalectureetlesdiffrentsmodesd039ouverture"></a><h2>La lecture et les différents modes d&#039;ouverture</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
<span class="arrow"></span>
<span class="next">Pourquoi lire et écrire dans les fichiers ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
<span class="next">L&#039;écriture dans les fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-lecture-et-les-differents-modes-d-ouverture" data-claire-element-id="376827">La lecture et les différents modes d'ouverture</h4><p id="r-376726" data-claire-element-id="376726">Dans cette sous-partie, nous verrons comment lire dans les fichiers, l'écriture est au programme de la prochaine sous-partie.<br/> Afin de pouvoir utiliser QFile, il faut commencer par inclure le bon fichier, c'est la première étape à ne jamais oublier :</p><pre id="r-376727" data-claire-element-id="376727"><code data-claire-semantic="cpp">#include &lt;QFile&gt;</code></pre><p id="r-376728" data-claire-element-id="376728">Anticipons. Il faut savoir que l'on récupère le contenu d'un fichier le plus couramment dans une instance de QString (mais dans certains cas plus rares, celui de la manipulation des fichiers binaires, à l'aide de <a href="http://doc.trolltech.com/4.4/qbytearray.html">QByteArray</a>). Certains programmeurs passent même parfois par un objet flux <a href="http://doc.trolltech.com/4.4/qtextstream.html">QTextStream</a>, mais on peut s'en passer (cela dit, je vous présenterai les deux méthodes). Commençons par la méthode la plus simple qui consiste à passer par un QString uniquement. On va tout de même déjà inclure QTextStream afin de l'utiliser plus tard. Les inclusions nécessaires sont donc :</p><pre id="r-376729" data-claire-element-id="376729"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QTextEdit&gt;   // Nous allons tout de même afficher le contenu du fichier ^^
#include &lt;QFile&gt;       // Pour utiliser le fichier
#include &lt;QString&gt;     // Stocke le contenu du fichier
#include &lt;QTextStream&gt; // Flux sortant du fichier</code></pre><p id="r-376730" data-claire-element-id="376730">Pour une question de simplicité et de compréhension du tuto, j'ai décidé :</p><ul id="r-376735" data-claire-element-id="376735"><li id="r-376732" data-claire-element-id="376732"><p id="r-376731" data-claire-element-id="376731">De me servir uniquement du <em>main</em> (remarque : le code n'est pas très long et relativement simple ^^ ).</p></li><li id="r-376734" data-claire-element-id="376734"><p id="r-376733" data-claire-element-id="376733">D'utiliser un fichier banal ayant pour extension &quot;.txt&quot; (texte).</p></li></ul><p id="r-376736" data-claire-element-id="376736">Tel que prévu, j'utiliserai une simple fenêtre avec un QTextEdit pour afficher le contenu du fichier. Voici donc la structure du main :</p><pre id="r-376737" data-claire-element-id="376737"><code data-claire-semantic="cpp">int main(int argc, char **argv)
{
    QApplication a(argc, argv);
    QTextEdit zoneTexte;
    zoneTexte.setGeometry(100,100,400,200);
    zoneTexte.setReadOnly(true);
    
    QString texte;

    // [CODE]

    zoneTexte.setText(texte);
    zoneTexte.show();
    return a.exec();
}</code></pre><p id="r-376738" data-claire-element-id="376738">À la ligne 4, je déclare le fameux QTextEdit. À la ligne 5, je le redimensionne en lui donnant des dimensions raisonnables tout en prenant garde à ce que la fenêtre ne colle pas au bord de votre écran lors de son ouverture. N'oublions pas la ligne 6 qui paramètre la zone de texte de telle sorte qu'on ne puisse rien y modifier directement. À la ligne 8, je déclare un objet QString qui va se charger de stocker le texte du fichier (on va voir cela dans un instant) ou un message d'erreur si le fichier n'a pu être ouvert. Enfin, on place à la ligne 10 tout le code concernant l'ouverture et la récupération des données.</p><p id="r-376739" data-claire-element-id="376739">Ce que nous allons faire à présent, c'est déclarer un objet QFile en lui précisant le chemin du fichier (code à placer à la ligne 10) :</p><pre id="r-376740" data-claire-element-id="376740"><code data-claire-semantic="cpp">QFile fichier(&quot;poeme.txt&quot;);</code></pre><p id="r-376741" data-claire-element-id="376741">Dans le dossier de l'exécutable, j'ai donc un fichier que j'aimerais lire à partir de la fenêtre. En déclarant ainsi un objet QFile, le fichier reste fermé. Pour l'ouverture, on utilisera la fonction <code>QFile::open()</code> et on enverra en paramètre un flag de QIODevice pour définir le mode d'ouverture. Il en existe huit :</p><table id="r-376807" data-claire-element-id="376807"><thead id="r-376749" data-claire-element-id="376749"><tr id="r-376748" data-claire-element-id="376748"><th id="r-376743" data-claire-element-id="376743"><p id="r-376742" data-claire-element-id="376742">Constante</p></th><th id="r-376745" data-claire-element-id="376745"><p id="r-376744" data-claire-element-id="376744">Valeur correspondante</p></th><th id="r-376747" data-claire-element-id="376747"><p id="r-376746" data-claire-element-id="376746">Description</p></th></tr></thead><tbody id="r-376806" data-claire-element-id="376806"><tr id="r-376756" data-claire-element-id="376756"><td id="r-376751" data-claire-element-id="376751"><p id="r-376750" data-claire-element-id="376750">QIODevice::ReadOnly</p></td><td id="r-376753" data-claire-element-id="376753"><p id="r-376752" data-claire-element-id="376752">0x0001</p></td><td id="r-376755" data-claire-element-id="376755"><p id="r-376754" data-claire-element-id="376754">Ouverture en lecture seule.</p></td></tr><tr id="r-376763" data-claire-element-id="376763"><td id="r-376758" data-claire-element-id="376758"><p id="r-376757" data-claire-element-id="376757">QIODevice::WriteOnly</p></td><td id="r-376760" data-claire-element-id="376760"><p id="r-376759" data-claire-element-id="376759">0x0002</p></td><td id="r-376762" data-claire-element-id="376762"><p id="r-376761" data-claire-element-id="376761">Ouverture en écriture seule.</p></td></tr><tr id="r-376770" data-claire-element-id="376770"><td id="r-376765" data-claire-element-id="376765"><p id="r-376764" data-claire-element-id="376764">QIODevice::ReadWrite</p></td><td id="r-376767" data-claire-element-id="376767"><p id="r-376766" data-claire-element-id="376766">0x0001 | 0x0002</p></td><td id="r-376769" data-claire-element-id="376769"><p id="r-376768" data-claire-element-id="376768">Ouverture en lecture/écriture.</p></td></tr><tr id="r-376777" data-claire-element-id="376777"><td id="r-376772" data-claire-element-id="376772"><p id="r-376771" data-claire-element-id="376771">QIODevice::Truncate</p></td><td id="r-376774" data-claire-element-id="376774"><p id="r-376773" data-claire-element-id="376773">0x0008</p></td><td id="r-376776" data-claire-element-id="376776"><p id="r-376775" data-claire-element-id="376775">- À utiliser avec WriteOnly ou ReadWrite ;<br/> - Spécifie que le contenu sera au préalable supprimé.</p></td></tr><tr id="r-376784" data-claire-element-id="376784"><td id="r-376779" data-claire-element-id="376779"><p id="r-376778" data-claire-element-id="376778">QIODevice::Append</p></td><td id="r-376781" data-claire-element-id="376781"><p id="r-376780" data-claire-element-id="376780">0x0004</p></td><td id="r-376783" data-claire-element-id="376783"><p id="r-376782" data-claire-element-id="376782">- Peut s'utiliser avec tout ;<br/> - Spécifie que le curseur sera placé à la fin du fichier.</p></td></tr><tr id="r-376791" data-claire-element-id="376791"><td id="r-376786" data-claire-element-id="376786"><p id="r-376785" data-claire-element-id="376785">QIODevice::Text</p></td><td id="r-376788" data-claire-element-id="376788"><p id="r-376787" data-claire-element-id="376787">0x0010</p></td><td id="r-376790" data-claire-element-id="376790"><p id="r-376789" data-claire-element-id="376789">- Peut s'utiliser avec tout ;<br/> - Apporte quelques optimisations quand il s'agit d'un texte.</p></td></tr><tr id="r-376798" data-claire-element-id="376798"><td id="r-376793" data-claire-element-id="376793"><p id="r-376792" data-claire-element-id="376792">QIODevice::NotOpen</p></td><td id="r-376795" data-claire-element-id="376795"><p id="r-376794" data-claire-element-id="376794">0x0000</p></td><td id="r-376797" data-claire-element-id="376797"><p id="r-376796" data-claire-element-id="376796">N'ouvre tout simplement pas le fichier.</p></td></tr><tr id="r-376805" data-claire-element-id="376805"><td id="r-376800" data-claire-element-id="376800"><p id="r-376799" data-claire-element-id="376799">QIODevice::Unbuffered</p></td><td id="r-376802" data-claire-element-id="376802"><p id="r-376801" data-claire-element-id="376801">0x0020</p></td><td id="r-376804" data-claire-element-id="376804"><p id="r-376803" data-claire-element-id="376803">Désactive l'utilisation d'un buffer.</p></td></tr></tbody></table><p id="r-376808" data-claire-element-id="376808">La fonction open revoie <code>true</code> si le fichier a pu être ouvert et dans le cas contraire, <code>false</code>. Nous allons à présent ouvrir le fichier <em>poeme.txt</em> en lecture seule. Pour cela, nous allons utiliser une structure if - else en attribuant un code spécifique pour chaque valeur de <code>open()</code> retournée. On obtient ceci :</p><pre id="r-376809" data-claire-element-id="376809"><code data-claire-semantic="cpp">if(fichier.open(QIODevice::ReadOnly)) //...
else //...</code></pre><p id="r-376810" data-claire-element-id="376810">Ou en spécifiant que <em>poeme.txt</em> est un texte :</p><pre id="r-376811" data-claire-element-id="376811"><code data-claire-semantic="cpp">if(fichier.open(QIODevice::ReadOnly | QIODevice::Text)) //...
else //...</code></pre><p id="r-376812" data-claire-element-id="376812">Supposons à présent que le fichier ait pu être ouvert, il faut pouvoir récupérer son contenu avant de fermer le fichier à l'aide de la fonction membre <code>close()</code>. La méthode la plus simple consiste tout simplement à utiliser la fonction <code>readAll()</code> et à stocker la chaîne renvoyée dans le QString (précédemment nommé &quot;texte&quot;). Il faut aussi prévoir le coup si jamais le fichier n'a pas pu être ouvert : nous allons affecter au QString texte un message d'erreur. On obtient le code suivant :</p><pre id="r-376813" data-claire-element-id="376813"><code data-claire-semantic="cpp">if(fichier.open(QIODevice::ReadOnly | QIODevice::Text))
{
     texte = fichier.readAll();
     fichier.close();
}
else texte = &quot;Impossible d'ouvrir le fichier !&quot;;</code></pre><p id="r-376814" data-claire-element-id="376814">Je récapitule le main pour que tout le monde me suive :</p><pre id="r-376815" data-claire-element-id="376815"><code data-claire-semantic="cpp">int main(int argc, char **argv)
{
    QApplication a(argc, argv);
    QTextEdit zoneTexte;
    zoneTexte.setGeometry(100,100,400,200);
    zoneTexte.setReadOnly(true);

    QString texte;
    QFile fichier(&quot;poeme.txt&quot;);

    if(fichier.open(QIODevice::ReadOnly | QIODevice::Text))
    {
         texte = fichier.readAll();
         fichier.close();
    }
    else texte = &quot;Impossible d'ouvrir le fichier !&quot;;

    zoneTexte.setText(texte);
    zoneTexte.show();
    return a.exec();
}</code></pre><p id="r-376816" data-claire-element-id="376816">Si tout se passe bien, lorsque vous compilez, vous devriez vous retrouver avec la fenêtre suivante (avec le texte de votre fichier) :</p><figure id="r-376818" data-claire-element-id="376819"><img id="r-376817" data-claire-element-id="376817" src="medias/uploads.siteduzero.com_files_145001_146000_145608.png" alt="Image utilisateur"/></figure><p id="r-376820" data-claire-element-id="376820">Si par contre, le fichier n'a pas pu être ouvert, vous aurez le message d'erreur à l'écran.<br/> Il existe encore un autre moyen plus précis de récupérer le contenu d'un fichier. C'est cette méthode qui est utilisée à titre d'exemple dans la doc Qt. Il s'agit cette fois de passer par un objet flux de type QTextStream en procédant ainsi :</p><pre id="r-376821" data-claire-element-id="376821"><code data-claire-semantic="cpp">if(fichier.open(QIODevice::ReadOnly | QIODevice::Text))
{
    QTextStream flux(&amp;fichier);
    while(!flux.atEnd())
        texte += flux.readLine();
    fichier.close();
}</code></pre><p id="r-376822" data-claire-element-id="376822">Ici, on déclare un objet flux QTextStream en lui envoyant l'adresse de l'objet QFile &quot;fichier&quot; en lui permettant ainsi de lire son contenu. Tant qu'on n'est pas arrivé au bout du fichier, on continue à récupérer les lignes. Essayez une fois de compiler ce code et... surprise ! Cela fonctionne, mais les lignes ont été mises à la chaîne sans le moindre retour à la ligne. Heureusement, il est très simple d'y remédier :</p><pre id="r-376823" data-claire-element-id="376823"><code data-claire-semantic="cpp">if(fichier.open(QIODevice::ReadOnly | QIODevice::Text))
{
    QTextStream flux(&amp;fichier);
    while(!flux.atEnd())
        texte += flux.readLine() + '\n';
    texte.resize(texte.size()-1); // Élimine le '\n' en trop
    fichier.close();
}</code></pre><p id="r-376824" data-claire-element-id="376824">Mais en général, on n'utilise pas readLine() pour récupérer tout le contenu ! En effet, son utilisation est plus fréquente quand il s'agit d'appliquer un processus bien déterminé au contenu du fichier ligne par ligne, comme dans cet exemple :</p><pre id="r-376825" data-claire-element-id="376825"><code data-claire-semantic="cpp">while(!flux.atEnd())
{
    texte = flux.readLine();
    maFonction(texte);
}</code></pre><p id="r-376826" data-claire-element-id="376826">Voilà, je crois que nous avons à peu près fait le tour de la lecture, passons à présent à l'écriture ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
<span class="arrow"></span>
<span class="next">Pourquoi lire et écrire dans les fichiers ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
<span class="next">L&#039;écriture dans les fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="L039crituredanslesfichiers"></a><h2>L&#039;écriture dans les fichiers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
<span class="arrow"></span>
<span class="next">La lecture et les différents modes d&#039;ouverture</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
<span class="next">Aller encore plus loin...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-l-ecriture-dans-les-fichiers" data-claire-element-id="376919">L'écriture dans les fichiers</h4><p id="r-376828" data-claire-element-id="376828">L'écriture dans les fichiers n'est pas nécessairement plus compliquée que la lecture. Encore une fois, les classes de Qt sont déjà tellement simplifiées qu'elles nous permettent de ne pas trop s'attarder sur ce concept. En gros, il existe deux méthodes principales pour écrire dans un fichier, comme tout à l'heure avec la lecture :</p><ul id="r-376833" data-claire-element-id="376833"><li id="r-376830" data-claire-element-id="376830"><p id="r-376829" data-claire-element-id="376829">avec un objet flux de type QTextStream, très pratique et simple d'utilisation ;</p></li><li id="r-376832" data-claire-element-id="376832"><p id="r-376831" data-claire-element-id="376831">sans QTextStream en utilisant directement les méthodes de Qt.</p></li></ul><p id="r-376834" data-claire-element-id="376834">Je vais commencer par la méthode la plus simple, c'est-à-dire la première dans l'ordre où je les ai écrites ci-dessus. Pour vous montrer comment implémenter et utiliser ceci, je vais m'appuyer sur un exemple concret de programme &quot;fini&quot; qui vous permettra d'écrire dans le fichier de votre choix (chemin au choix) le texte de votre choix. En gros, notre petit programme modeste va se structurer de la manière suivante :</p><ul id="r-376851" data-claire-element-id="376851"><li id="r-376836" data-claire-element-id="376836"><p id="r-376835" data-claire-element-id="376835">On demande à l'utilisateur le chemin absolu ou relatif du fichier dans lequel écrire, si ce dernier n'existe pas déjà, on le crée. On se servira de QInputDialog::getText et de QString.</p></li><li id="r-376838" data-claire-element-id="376838"><p id="r-376837" data-claire-element-id="376837">Si le QString récupéré n'est pas vide, on continue.</p></li><li id="r-376840" data-claire-element-id="376840"><p id="r-376839" data-claire-element-id="376839">On demande à l'utilisateur de saisir dans un QInputDialog::getText (encore) le texte à écrire dans le fichier.</p></li><li id="r-376842" data-claire-element-id="376842"><p id="r-376841" data-claire-element-id="376841">On crée un objet de type QFile pour l'écriture dans le fichier.</p></li><li id="r-376844" data-claire-element-id="376844"><p id="r-376843" data-claire-element-id="376843">On ouvre le fichier en écriture en utilisant les flags <code>QIODevice::WriteOnly</code> et <code>QIODevice::Text</code>.</p></li><li id="r-376846" data-claire-element-id="376846"><p id="r-376845" data-claire-element-id="376845">On crée un objet flux de type QTextStream pour manipuler le flux entrant du fichier.</p></li><li id="r-376848" data-claire-element-id="376848"><p id="r-376847" data-claire-element-id="376847">On écrit le texte saisi par l'utilisateur dans le fichier en nous servant de l'objet flux précédemment déclaré.</p></li><li id="r-376850" data-claire-element-id="376850"><p id="r-376849" data-claire-element-id="376849">On ferme le fichier, on quitte le programme.</p></li></ul><p id="r-376852" data-claire-element-id="376852">Première réflexion : qu'est-ce qu'on va devoir inclure ? Si je suis ce que je viens d'écrire, j'obtiens bien :</p><pre id="r-376853" data-claire-element-id="376853"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QTextStream&gt;
#include &lt;QInputDialog&gt;
#include &lt;QIODevice&gt;
#include &lt;QString&gt;
#include &lt;QFile&gt;
#include &lt;QMessageBox&gt;</code></pre><p id="r-376854" data-claire-element-id="376854">Notez bien que j'ai aussi inclus QMessageBox étant donné que j'affiche un message d'erreur si le chemin spécifié ou le texte à écrire est resté vide. Bon, je vous donne déjà le code de base du main, qui sera une fois de plus notre seule fonction :</p><pre id="r-376855" data-claire-element-id="376855"><code data-claire-semantic="cpp">int main(int argc, char** argv)
{
    QApplication app(argc, argv);
    // code à insérer ici;
    exit(0);
}</code></pre><p id="r-376856" data-claire-element-id="376856">Certains se demanderont certainement pourquoi j'utilise <code>exit()</code> et ils ont bien raison de demander. Et bien, c'est pour la simple et bonne raison qu'autrement, le programme ne quittera pas normalement ou ne quittera pas du tout. C'est la seule solution efficace et pas trop barbare. Pour ceux qui y auraient pensé, <code>QApplication::quit()</code> n'est pas approprié ici. Pour la saisie du chemin du fichier, voici le code que je propose :</p><pre id="r-376857" data-claire-element-id="376857"><code data-claire-semantic="cpp">QString chemin;
while((chemin = QInputDialog::getText(NULL,&quot;Fichier&quot;,&quot;Quel est le chemin du fichier ?&quot;)).isEmpty())
        QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Aucun chemin n'a été spécifié !&quot;);</code></pre><p id="r-376858" data-claire-element-id="376858">Le fonctionnement de cette boucle est si simple que je ne vais rien détailler. Pour la saisie du texte, on obtient à peu près la même chose :</p><pre id="r-376859" data-claire-element-id="376859"><code data-claire-semantic="cpp">QString texte;
while((texte = QInputDialog::getText(NULL, &quot;Texte&quot;, &quot;Que voulez-vous écrire dans &quot;+chemin.toLatin1())).isEmpty())
        QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Aucun texte n'a été spécifié !&quot;);</code></pre><p id="r-376860" data-claire-element-id="376860">Pareil, le code est très simple à comprendre. C'est à partir de ce moment là que ça devient un peu plus intéressant, maintenant, nous allons ouvrir le fichier spécifié par l'utilisateur. Pour cela, je me servirai des flags de QIODevice mentionnés tout à l'heure. J'obtiens ce code :</p><pre id="r-376861" data-claire-element-id="376861"><code data-claire-semantic="cpp">QFile fichier(chemin);
fichier.open(QIODevice::WriteOnly | QIODevice::Text);</code></pre><p id="r-376862" data-claire-element-id="376862">Maintenant que le fichier est ouvert en écriture seule, on peut créer notre objet flux QTextStream et lui envoyer en paramètre du constructeur l'adresse de l'objet QFile :</p><pre id="r-376863" data-claire-element-id="376863"><code data-claire-semantic="cpp">QTextStream flux(&amp;fichier);</code></pre><p id="r-376864" data-claire-element-id="376864">Ce qu'il nous reste à faire est maintenant très simple : nous allons utiliser le flux déclaré et lui envoyer le texte saisi par l'utilisateur. Enfin, n'oublions pas de fermer le fichier.</p><pre id="r-376865" data-claire-element-id="376865"><code data-claire-semantic="cpp">flux &lt;&lt; texte;
fichier.close();</code></pre><p id="r-376866" data-claire-element-id="376866">Et c'est tout ! :) Avouez que ce n'est pas bien difficile à mettre en œuvre. En réalité, les flux sont faits pour cela, pour nous faciliter les choses. Pour ceux qui n'auraient pas bien suivi toutes les étapes (ou pour les paresseux), voici le <em>main</em> complet :</p><pre id="r-376867" data-claire-element-id="376867"><code data-claire-semantic="cpp">int main(int argc, char** argv)
{
    QApplication app(argc, argv);

    QString chemin, texte;

    while((chemin = QInputDialog::getText(NULL,&quot;Fichier&quot;,&quot;Quel est le chemin du fichier ?&quot;)).isEmpty())
        QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Aucun chemin n'a été spécifié !&quot;);

    while((texte = QInputDialog::getText(NULL, &quot;Texte&quot;, &quot;Que voulez-vous écrire dans &quot;+chemin.toLatin1())).isEmpty())
        QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Aucun texte n'a été spécifié !&quot;);

    QFile fichier(chemin);
    fichier.open(QIODevice::WriteOnly | QIODevice::Text);

    QTextStream flux(&amp;fichier);
    flux &lt;&lt; texte;

    fichier.close();
    
    exit(0);
}</code></pre><p id="r-376868" data-claire-element-id="376868">Compilez pour voir ce que cela donne. Voici une petite démonstration de l'exécution du code :</p><ul id="r-376877" data-claire-element-id="376877"><li id="r-376870" data-claire-element-id="376870"><p id="r-376869" data-claire-element-id="376869">On saisit le chemin du fichier en incluant son nom : <a href="medias/uploads.siteduzero.com_files_149001_150000_149248.png">Image</a>.</p></li><li id="r-376872" data-claire-element-id="376872"><p id="r-376871" data-claire-element-id="376871">On saisit le texte à écrire dans le fichier : <a href="medias/uploads.siteduzero.com_files_149001_150000_149249.png">Image</a>.</p></li><li id="r-376874" data-claire-element-id="376874"><p id="r-376873" data-claire-element-id="376873">Le fichier a bien été créé : <a href="medias/uploads.siteduzero.com_files_149001_150000_149250.png">Image</a>.</p></li><li id="r-376876" data-claire-element-id="376876"><p id="r-376875" data-claire-element-id="376875">Le texte a bien été écrit dans le fichier : <a href="medias/uploads.siteduzero.com_files_149001_150000_149251.png">Image</a>.</p></li></ul><p id="r-376878" data-claire-element-id="376878">Nous allons dès maintenant nous attaquer à l'autre technique d'écriture dans les fichiers : en nous servant des fonctions membres définies dans QFile. Nous allons conserver les mêmes codes que tout à l'heure sauf que nous allons remplacer l'utilisation de la classe QTextStream par des appels aux fonctions de QFile. Voici trois des plus utilisées :</p><table id="r-376909" data-claire-element-id="376909"><thead id="r-376886" data-claire-element-id="376886"><tr id="r-376885" data-claire-element-id="376885"><th id="r-376880" data-claire-element-id="376880"><p id="r-376879" data-claire-element-id="376879">Fonction</p></th><th id="r-376882" data-claire-element-id="376882"><p id="r-376881" data-claire-element-id="376881">Paramètre(s)</p></th><th id="r-376884" data-claire-element-id="376884"><p id="r-376883" data-claire-element-id="376883">Description</p></th></tr></thead><tbody id="r-376908" data-claire-element-id="376908"><tr id="r-376893" data-claire-element-id="376893"><td id="r-376888" data-claire-element-id="376888"><p id="r-376887" data-claire-element-id="376887">write</p></td><td id="r-376890" data-claire-element-id="376890"><p id="r-376889" data-claire-element-id="376889"><code data-claire-semantic="cpp">const char * data, qint64 maxSize</code></p></td><td id="r-376892" data-claire-element-id="376892"><p id="r-376891" data-claire-element-id="376891">Cette fonction écrit un texte brut dans le fichier.<br/> On doit préciser le nombre de caractères de la chaîne en second paramètre.</p></td></tr><tr id="r-376900" data-claire-element-id="376900"><td id="r-376895" data-claire-element-id="376895"><p id="r-376894" data-claire-element-id="376894">write</p></td><td id="r-376897" data-claire-element-id="376897"><p id="r-376896" data-claire-element-id="376896"><code data-claire-semantic="cpp">const QByteArray &amp; byteArray</code></p></td><td id="r-376899" data-claire-element-id="376899"><p id="r-376898" data-claire-element-id="376898">Cette fonction (surchargée) écrit le contenu d'un objet <a href="http://doc.trolltech.com/4.4/qbytearray.html">QByteArray</a> dans le fichier.</p></td></tr><tr id="r-376907" data-claire-element-id="376907"><td id="r-376902" data-claire-element-id="376902"><p id="r-376901" data-claire-element-id="376901">putChar</p></td><td id="r-376904" data-claire-element-id="376904"><p id="r-376903" data-claire-element-id="376903"><code data-claire-semantic="cpp">char c</code></p></td><td id="r-376906" data-claire-element-id="376906"><p id="r-376905" data-claire-element-id="376905">Cette fois, la fonction n'écrit qu'un seul caractère dans le fichier. Le curseur est placé après le caractère écrit.</p></td></tr></tbody></table><p id="r-376910" data-claire-element-id="376910">Pour écrire le texte spécifié par l'utilisateur du programme à l'aide de la fonction <code>write()</code> par exemple, on fait tout simplement :</p><pre id="r-376911" data-claire-element-id="376911"><code data-claire-semantic="cpp">fichier.write(texte.toLatin1(),texte.size());</code></pre><p id="r-376912" data-claire-element-id="376912">Ou alors, si l'on préfère passer par un objet QByteArray, on doit écrire :</p><pre id="r-376913" data-claire-element-id="376913"><code data-claire-semantic="cpp">QByteArray bytes(texte.toLatin1());
fichier.write(bytes);</code></pre><p id="r-376914" data-claire-element-id="376914">En plus, si vous allez faire un tour dans la doc Qt, vous vous rendrez compte que la méthode <code>toLatin1()</code> de QString renvoie un objet QByteArray. Et enfin, voici une petite démonstration illustrant le fonctionnement de <code>putChar</code> :</p><pre id="r-376915" data-claire-element-id="376915"><code data-claire-semantic="cpp">fichier.putChar(texte.at(0).toLatin1());</code></pre><p id="r-376916" data-claire-element-id="376916">Ne confondez pas, la méthode <code>toLatin1()</code> de QChar renvoie une variable de type char. Pour écrire tout un texte caractère par caractère, il n'y pas de secret :</p><pre id="r-376917" data-claire-element-id="376917"><code data-claire-semantic="cpp">for(QString::iterator it=texte.begin(); it!=texte.end(); it++)
        fichier.putChar((*it).toLatin1());</code></pre><p id="r-376918" data-claire-element-id="376918">Et hop ! Vous venez donc d'apprendre à lire et à écrire dans les fichiers. Je l'ai déjà dit mais je me répète : la manipulation des fichiers est une fonctionnalité indispensable et il ne faut pas hésiter à l'utiliser en cas de besoin, et ces cas-là, on les rencontre souvent, que ce soit pour stocker les scores d'un jeu, pour implémenter une persistance d'objet (<em>cf</em><a href="http://fr.wikipedia.org/wiki/Persistance_(informatique)">Persistance</a> et <a href="http://fr.wikipedia.org/wiki/Sérialisation">Sérialisation</a>) ou autres. Mais vous n'avez pas encore tout vu ! En effet, il est possible de copier des fichiers, de déplacer les fichiers et même de les renommer ! Eh bien c'est exactement ce qui est au programme de la sous-partie suivante. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
<span class="arrow"></span>
<span class="next">La lecture et les différents modes d&#039;ouverture</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
<span class="next">Aller encore plus loin...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Allerencoreplusloin..."></a><h2>Aller encore plus loin...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
<span class="arrow"></span>
<span class="next">L&#039;écriture dans les fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">
<span class="next">La récupération des paramètres de la fonction main avec Qt</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-aller-encore-plus-loin" data-claire-element-id="376956">Aller encore plus loin...</h4><p id="r-376920" data-claire-element-id="376920">Comme promis, dans cette sous-partie, nous allons nous pencher sur des fonctionnalités supplémentaires de Qt relatives à la gestion des fichiers. Cette partie du chapitre sera, dans un souci de clarté, beaucoup plus structurée que les trois précédentes sous-parties. Nous n'allons pas nous éterniser sur chaque concept abordé, je vais seulement vous donner une explication et un exemple, vous pourrez ainsi facilement revenir là-dessus lorsque vous en aurez besoin et trouver rapidement une réponse à votre question.</p><p id="r-376921" data-claire-element-id="376921">Notez qu'une utilisation de QFile pourrait être considérée comme excessive dans quelques cas présentés ci-dessous, revenant à peu près à utiliser une tronçonneuse pour couper une feuille de papier (les cas concernés sont ceux de la récupération d'informations avec QFile : la vérification de l'existence d'un fichier et la récupération de sa taille). Si vous souhaitez par exemple récupérer un booléen du fait qu'un fichier existe ou non, choisissez plutôt des classes comme QFileInfo.</p><h5 id="r-copier-un-fichier-1" data-claire-element-id="376925">Copier un fichier</h5><p id="r-376922" data-claire-element-id="376922">La copie d'un fichier nécessite l'utilisation de la fonction membre <code>copy()</code> de QFile. Cette fonction prend en paramètre le nom du fichier de copie. Ce n'est pas un scoop, mais je le souligne quand même : c'est enfantin à utiliser !</p><pre id="r-376923" data-claire-element-id="376923"><code data-claire-semantic="cpp">QFile fichier(&quot;poeme.txt&quot;);
if(!fichier.copy(&quot;copie.txt&quot;))
    QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Impossible de copier poeme.txt&quot;);</code></pre><p id="r-376924" data-claire-element-id="376924">La copie peut échouer, par exemple s'il existe déjà un fichier du nom de <em>copie.txt</em>.</p><h5 id="r-verifier-si-un-fichier-existe" data-claire-element-id="376930">Vérifier si un fichier existe</h5><p id="r-376926" data-claire-element-id="376926">Pour nous assurer de l'existence d'un fichier, on utilisera en général la méthode <code>exists()</code> de QFile. Elle renvoie <code>true</code> si le fichier existe et <code>false</code> dans le cas contraire.</p><pre id="r-376927" data-claire-element-id="376927"><code data-claire-semantic="cpp">QFile fichier(&quot;poeme.txt&quot;);
if(!fichier.exists())
    QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Le fichier spécifié n'existe pas !&quot;);
else QMessageBox::information(NULL,&quot;Information&quot;,&quot;Le fichier spécifié existe !&quot;);</code></pre><p id="r-376928" data-claire-element-id="376928">Ou plus simplement :</p><pre id="r-376929" data-claire-element-id="376929"><code data-claire-semantic="cpp">if(!QFile::exists(&quot;poeme.txt&quot;))
    QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Le fichier spécifié n'existe pas !&quot;);
else QMessageBox::information(NULL,&quot;Information&quot;,&quot;Le fichier spécifié existe !&quot;);</code></pre><h5 id="r-effacer-un-fichier" data-claire-element-id="376935">Effacer un fichier</h5><p id="r-376931" data-claire-element-id="376931">Ici, on va se servir de <code>QFile::remove()</code>. Blabla, voici un exemple de code :</p><pre id="r-376932" data-claire-element-id="376932"><code data-claire-semantic="cpp">QFile fichier(&quot;poeme.txt&quot;);
if(!fichier.remove())
    QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Impossible de supprimer le fichier !&quot;);</code></pre><p id="r-376933" data-claire-element-id="376933">Ou de manière plus concise :</p><pre id="r-376934" data-claire-element-id="376934"><code data-claire-semantic="cpp">if(!QFile::remove(&quot;poeme.txt&quot;))
    QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Impossible de supprimer le fichier !&quot;);</code></pre><h5 id="r-renommer-un-fichier-2" data-claire-element-id="376939">Renommer un fichier</h5><p id="r-376936" data-claire-element-id="376936">En un mot comme en mille : <code>QFile::rename()</code> ! Et pour l'exemple concret :</p><pre id="r-376937" data-claire-element-id="376937"><code data-claire-semantic="cpp">QFile fichier(&quot;poeme.txt&quot;);
if(!fichier.rename(&quot;nouveau_nom.txt&quot;))
    QMessageBox::critical(NULL,&quot;Erreur&quot;,&quot;Impossible de renommer le fichier !&quot;);</code></pre><p id="r-376938" data-claire-element-id="376938">La version <code data-claire-semantic="cpp">static </code> de cette méthode existe aussi.</p><h5 id="r-obtenir-la-taille-d-un-fichier" data-claire-element-id="376942">Obtenir la taille d'un fichier</h5><p id="r-376940" data-claire-element-id="376940">Pour obtenir la taille d'un fichier en bytes, on utilisera la méthode <code>QFile::size()</code>.</p><pre id="r-376941" data-claire-element-id="376941"><code data-claire-semantic="cpp">QFile fichier(&quot;poeme.txt&quot;);
m_spinBox.setValue(fichier.size());</code></pre><h5 id="r-interactions-avec-l-utilisateur" data-claire-element-id="376955">Interactions avec l'utilisateur</h5><p id="r-376943" data-claire-element-id="376943">Cette fois-ci, la classe concernée ne sera plus de QFile mais QFileDialog. Cette classe permet à l'aide de certaines de ses fonctions de récupérer des informations par le biais d'une interaction avec l'utilisateur. Quelle type d'interaction ? Tout simplement une demande à l'utilisateur de sélectionner un chemin de fichier/dossier, selon la fonction statique utilisée :</p><ul id="r-376952" data-claire-element-id="376952"><li id="r-376945" data-claire-element-id="376945"><p id="r-376944" data-claire-element-id="376944">getExistingDirectory() qui retourne un QString d'un répertoire que sélectionne l'utilisateur.</p></li><li id="r-376947" data-claire-element-id="376947"><p id="r-376946" data-claire-element-id="376946">getOpenFileName() qui retourne un QString du chemin d'un fichier que sélectionne l'utilisateur (boîte de dialogue avec un bouton nommé par exemple &quot;Ouvrir&quot;).</p></li><li id="r-376949" data-claire-element-id="376949"><p id="r-376948" data-claire-element-id="376948">getOpenFileNames() qui retourne un QStringList d'un ou de plusieurs chemins de fichiers que sélectionne l'utilisateur.</p></li><li id="r-376951" data-claire-element-id="376951"><p id="r-376950" data-claire-element-id="376950">getSaveFileName() qui retourne un QString d'un emplacement de fichier que sélectionne l'utilisateur (boîte de dialogue avec un bouton nommé par exemple &quot;Enregistrer&quot;).</p></li></ul><pre id="r-376953" data-claire-element-id="376953"><code data-claire-semantic="cpp">QString path = QFileDialog::getSaveFileName(this, &quot;Enregistrer sous...&quot;, QDir::homePath(), &quot;Texte (*.txt)&quot;);</code></pre><p id="r-376954" data-claire-element-id="376954">Et voilà ! Étant arrivés au terme de ce chapitre, vous avez emmagasiné pas mal de notions, notions qui sont fondamentales si vous souhaitez développer des programmes sérieux. On retrouve une fonction &quot;charger&quot; et/ou &quot;enregistrer&quot; un peu dans tous les programmes, ce chapitre n'est donc pas à négliger.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
<span class="arrow"></span>
<span class="next">L&#039;écriture dans les fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">
<span class="next">La récupération des paramètres de la fonction main avec Qt</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LarcuprationdesparamtresdelafonctionmainavecQt"></a><h2>La récupération des paramètres de la fonction main avec Qt</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
<span class="arrow"></span>
<span class="next">Aller encore plus loin...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
<span class="next">Un peu de culture</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-376958" data-claire-element-id="376958">Il est possible que certains se disent : &quot;On a déjà un tuto sur les paramètres de la fonction main, à quoi celui-ci sert-il ?&quot;. Et bien ce tutoriel était pour le codage en C et pour le codage en C++ et non pour le codage avec Qt. Cette récupération que nous allons voir durant ce cours se fait avec une classe propre à Qt, rien à voir de plus que le thème avec le tutoriel auquel vous faites peut-être allusion.</p><p id="r-376959" data-claire-element-id="376959">Voici une courte liste des chapitres jugés fondamentaux pour une bonne compréhension, en plus des chapitres vous faisant réaliser vos premiers pas :</p><ul id="r-376966" data-claire-element-id="376966"><li id="r-376961" data-claire-element-id="376961"><p id="r-376960" data-claire-element-id="376960"><a href="http://www.siteduzero.com/tutoriel-3-11268-les-signaux-et-les-slots.html">Les signaux et les slots</a> ;</p></li><li id="r-376963" data-claire-element-id="376963"><p id="r-376962" data-claire-element-id="376962"><a href="http://www.siteduzero.com/tutoriel-3-11290-apprendre-a-lire-la-documentation-de-qt.html">Apprendre à lire la documentation de Qt</a> ;</p></li><li id="r-376965" data-claire-element-id="376965"><p id="r-376964" data-claire-element-id="376964"><a href="http://www.siteduzero.com/tutoriel-3-11324-tp-zeroclassgenerator.html">TP : ZeroClassGenerator</a>.</p></li></ul><p id="r-376967" data-claire-element-id="376967">Ce chapitre est séparé en trois parties (&quot;Un peu de culture&quot;, &quot;Théorie&quot; et &quot;Pratique&quot;) ainsi que d'une annexe vous permettant d'utiliser les différentes méthodes données à travers ce tuto en fonction de l'OS de l'utilisateur.<br/> A l'issu de la première partie, vous en saurez un peu plus sur la fonction main en général. Dans la seconde partie, nous verrons les trois manières de procéder avec Qt (une ne sera abordée que de nom), et dans la dernière partie, nous appliquerons la théorie avec du code pouvant être réutilisé dans vos projets.</p><p id="r-376968" data-claire-element-id="376968">Allons-y !</p>
</div><a name="Unpeudeculture"></a><h2>Un peu de culture</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">
<span class="arrow"></span>
<span class="next">La récupération des paramètres de la fonction main avec Qt</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
<span class="next">Théorie</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-un-peu-de-culture" data-claire-element-id="376974">Un peu de culture</h4><p id="r-376969" data-claire-element-id="376969">Nous aborderons ici le sujet de la fonction main. Pourquoi en parler ? Parce que ce tutoriel prend pour base cette fonction que nous allons voir dans cette partie.</p><p id="r-376970" data-claire-element-id="376970">La fonction main est la première fonction appelée par le système d'exploitation lors de l'ouverture d'une application. Son nom doit impérativement être main car c'est celle que doit trouver le compilateur. Elle est la fonction marquant le début de chaque programme, en appelant d'autres ou non.<br/> Elle est constituée comme toute fonction d'une en-tête (cf le code donné à la fin de cette sous-partie) et d'un bloc pouvant en contenir d'autres (un bloc est en fait ce qui se trouve entre les accolades { et } que l'on retrouve dans tous les programmes).</p><p id="r-376971" data-claire-element-id="376971">Dans les années 1980 à 1990 (aucune information ne précise la date exacte), cette fonction ne renvoyait rien, elle était donc de type void, ce qu'acceptent encore quelques compilateurs. Plus récemment, des améliorations y ont introduit les arguments qui sont en fait dans la norme actuelle de mettre &quot;int argc&quot; et &quot;char *argv[]&quot;. Elle s'est mise à renvoyer des informations sous la forme d'un <code data-claire-semantic="cpp">int </code> qui informait du bon déroulement du programme (d'où return 0 et return 1).<br/><strong>Note :</strong> Il est préférable de mettre return EXIT_SUCCESS dans vos programmes au cas où la norme serait amenée à changer...<br/> En résumé, l'ordre logique du déroulement d'un programme serait tout d'abord le lancement de l'application, donc l'appel de la fonction main et des fonctions qu'elle appelle si c'est le cas, le déroulement de l'exécution puis le renvoi d'une information annonçant si oui ou non l'application s'est déroulée correctement.</p><p id="r-376972" data-claire-element-id="376972">Aujourd'hui, nous en sommes à cette forme-ci :</p><pre id="r-376973" data-claire-element-id="376973"><code data-claire-semantic="cpp">int main(int argc, char *argv[])</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">
<span class="arrow"></span>
<span class="next">La récupération des paramètres de la fonction main avec Qt</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
<span class="next">Théorie</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Thorie"></a><h2>Théorie</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
<span class="arrow"></span>
<span class="next">Un peu de culture</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
<span class="next">Pratique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-theorie-11" data-claire-element-id="376995">Théorie</h4><p id="r-376975" data-claire-element-id="376975">Nous voici donc à la partie théorique du tutoriel.</p><p id="r-376976" data-claire-element-id="376976">Dans de ce cours sur <a href="http://www.siteduzero.com/tutoriel-3-37162-les-parametres-de-la-fonction-main.html">les paramètres de la fonction main</a> en C, l'auteur présente un schéma du tableau de pointeurs argv (dont la taille est définie par la valeur de argc) :</p><figure id="r-376978" data-claire-element-id="376979"><img id="r-376977" data-claire-element-id="376977" src="medias/uploads.siteduzero.com_files_163001_164000_163457.jpg" alt="Image utilisateur"/></figure><p id="r-376980" data-claire-element-id="376980">En règle générale, les premiers éléments d'argv ne sont pas censés correspondre à ce type de chaine mais plutôt au nom du programme et/ou au chemin relatif ou absolu du programme, le tout dépendant du système d'exploitation et du mode d'exécution du programme. Par exemple, Mac ne va pas renseigner dans les arguments une ouverture par double-clic sur un fichier.</p><aside id="r-376982" data-claire-element-id="376982" data-claire-semantic="information"><p id="r-376981" data-claire-element-id="376981">L'utilité de cela est par exemple de pouvoir ouvrir un fichier sans avoir besoin de passer par une éventuelle fonction d'ouverture.</p></aside><p id="r-376983" data-claire-element-id="376983">Résultat :</p><ol id="r-376990" data-claire-element-id="376990"><li id="r-376985" data-claire-element-id="376985"><p id="r-376984" data-claire-element-id="376984">L'utilisateur ne perd pas de temps à passer par la fonction d'ouverture présumée existante ;</p></li><li id="r-376987" data-claire-element-id="376987"><p id="r-376986" data-claire-element-id="376986">Quand il double-clique sur un fichier s'ouvrant avec le programme concerné, le programme ne s'ouvre pas comme on l'ouvrirait normalement par le biais de l'exécutable ;</p></li><li id="r-376989" data-claire-element-id="376989"><p id="r-376988" data-claire-element-id="376988">Ça fait plus &quot;pro&quot; d'avoir un système de récupération des arguments récupérés par la fonction main. :p</p></li></ol><p id="r-376991" data-claire-element-id="376991">Si la taille d'argv est strictement supérieure à 1, les arguments de la fonction main contiennent quelque chose de plus que simplement le chemin de l'exécutable mais également... le chemin du fichier qui a ouvert ce programme !</p><h5 id="r-le-rapport-avec-qt" data-claire-element-id="376994">Le rapport avec Qt</h5><p id="r-376992" data-claire-element-id="376992">Le rapport avec Qt est la disposition de deux classes permettant de récupérer les arguments : QCoreApplication avec la fonction statique <a href="http://doc.trolltech.com/4.5/qcoreapplication.html#arguments">QCoreApplication::arguments()</a> et <a href="http://doc.trolltech.com/4.5/qfileopenevent.html">QFileOpenEvent</a> (utilisé avec Mac pour le double-clic sur un fichier). Lors de l'introduction, je parlais de trois moyens différents de récupérer les arguments. En effet, il en existe une troisième solution qui est devenue dépréciée et qui a apparemment disparue de la documentation : une combinaison de <a href="http://doc.trolltech.com/4.5/qcoreapplication-qt3.html#argc">QCoreApplication::argc()</a> et de <a href="http://doc.trolltech.com/4.5/qcoreapplication-qt3.html#argv">QCoreApplication::argv()</a> utilisable avec qApp.<br/> La première solution donnée de récupération des arguments avec QCoreApplication étant la plus pratique et la plus efficace, nous ne verrons pas la combinaison donnée ci-dessus.</p><p id="r-376993" data-claire-element-id="376993">Nous pouvons maintenant passer à la pratique !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
<span class="arrow"></span>
<span class="next">Un peu de culture</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
<span class="next">Pratique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Pratique"></a><h2>Pratique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
<span class="arrow"></span>
<span class="next">Théorie</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
<span class="next">Annexe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pratique-10" data-claire-element-id="377018">Pratique</h4><h5 id="r-recuperation-avec-mac" data-claire-element-id="377003">Récupération avec Mac</h5><p id="r-376996" data-claire-element-id="376996">Comme je vous le disais plus tôt, le système d'exploitation Macintosh ne fonctionne pas parfaitement comme les autres OS, mais ce n'est pas pour autant qu'on ne peut pas récupérer les arguments car la classe <a href="http://doc.trolltech.com/4.5/qfileopenevent.html">QFileOpenEvent</a> existe, bien qu'elle ne soit utilisable que sous Mac (éventuel problème de portabilité donc).</p><p id="r-376997" data-claire-element-id="376997">Cette classe utilise les événements, il suffit donc de se servir de la fonction <a href="http://doc.trolltech.com/4.5/qobject.html#installEventFilter">installEventFilter()</a> sur les instances du programme pour pouvoir se servir de la classe et pour pouvoir par la même occasion récupérer ce qu'on recherche :</p><pre id="r-376998" data-claire-element-id="376998"><code data-claire-semantic="cpp">int main(int argc, char *argv[])
{
	QApplication app(argc, argv);

	FenPrincipale fenetre;
	QApplication::instance()-&gt;installEventFilter(&amp;fenetre); // C'est cette ligne qui prépare le tout
	fenetre.show();

	return app.exec();
}</code></pre><p id="r-376999" data-claire-element-id="376999">Il ne nous reste plus qu'à récupérer le tout avec notre classe et sa fonction <a href="http://doc.trolltech.com/4.5/qfileopenevent.html#file">file()</a> :</p><pre id="r-377000" data-claire-element-id="377000"><code data-claire-semantic="cpp">bool FenPrincipale::eventFilter(QObject *obj, QEvent *event)
{
	if(event-&gt;type() == QEvent::FileOpen)
	{
		/*
		Si l'event FileOpen a été appelé, on effectue nos opérations...
		*/
		chargerFichier(((QFileOpenEvent*)event)-&gt;file());
		return true;
	}
	else 
	{
		/*
		Sinon, le programme s'est exécuté à partir de son icône et
		non de celle d'un autre fichier s'ouvrant avec lui
		*/
		return QObject::eventFilter(obj, event);
	}
}</code></pre><p id="r-377001" data-claire-element-id="377001">Dans le cas où une variable de type QString avait été définie, on aurait ici créé une fonction chargerFichier() dont le constructeur serait le suivant :</p><pre id="r-377002" data-claire-element-id="377002"><code data-claire-semantic="cpp">void FenPrincipale::chargerFichier(QString &amp;nomFichier)</code></pre><h5 id="r-recuperation-avec-les-autres-os" data-claire-element-id="377017">Récupération avec les autres OS</h5><p id="r-377004" data-claire-element-id="377004">Récapitulons ce qui a été dit plus tôt sur le codage de la récupération :</p><p id="r-377005" data-claire-element-id="377005"><cite>Citation : zAmnellL</cite></p><blockquote id="r-377007" data-claire-element-id="377007"><p id="r-377006" data-claire-element-id="377006">Si la taille d'argv est strictement supérieure à 1, les arguments de la fonction main contiennent quelque chose de plus que simplement le chemin de l'exécutable mais également... le chemin du fichier qui a ouvert ce programme !</p></blockquote><p id="r-377008" data-claire-element-id="377008">Voyez-vous déjà une condition se mettre en place ? Non ? Peu importe, nous allons commencer par analyser la fonction <a href="http://doc.trolltech.com/4.5/qcoreapplication.html#arguments">arguments()</a> de QCoreApplication afin d'y voir plus clair :</p><pre id="r-377009" data-claire-element-id="377009"><code data-claire-semantic="cpp">QStringList QCoreApplication::arguments ()</code></pre><p id="r-377010" data-claire-element-id="377010">Cette fonction renvoie un tableau de QString, soit un QStringList, utilisable très simplement. Pour énumérer la taille d'un tableau de type QStringList, il suffit d'utiliser la fonction count() qui renvoie quant à elle un int, et ici, pour être plus précis, le const signifie que cette fonction ne modifie pas les attributs de sa classe.</p><p id="r-377011" data-claire-element-id="377011">La condition est donc la suivante :</p><pre id="r-377012" data-claire-element-id="377012"><code data-claire-semantic="cpp">if(QCoreApplication::arguments().count() &gt; 1)
// On effectue nos opérations</code></pre><p id="r-377013" data-claire-element-id="377013">Testons l'efficacité de ce code avec un programme très simple constitué uniquement d'un main.cpp pour éviter d'avoir à créer trop de fichiers pour si peu. Ce programme affichera dans une boîte de dialogue le contenu de <code data-claire-semantic="cpp">QCoreApplication::arguments().at(1) </code>.</p><pre id="r-377014" data-claire-element-id="377014"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QtGui&gt;
 
class FenPrincipale : public QWidget
{
	Q_OBJECT

	public :
		FenPrincipale()
		{
			QStringList args = QCoreApplication::arguments();

			if(args.count() &gt; 1) // Notre condition
			{
				// On affiche nos arguments dans une boîte de dialogue en donnant l'emplacement du fichier ayant ouvert le programme :
				QMessageBox::information(NULL, &quot;Récupération des arguments&quot;, &quot;L'argument récupéré est le suivant : \n&quot; + args.at(1));
			}
			else
			{
				// Sinon, on informe que le programme a été ouvert par son exécutable :
				QMessageBox::information(NULL, &quot;Récupération des arguments&quot;, &quot;Le programme s'est lancé normalement...&quot;);
			}
		};
};

#include &quot;main.moc&quot;

int main(int argc, char *argv[])
{
	QApplication app(argc, argv);

	FenPrincipale fenetre;

	exit(0); // On ferme directement une fois avoir vu la chose à observer...
}</code></pre><p id="r-377015" data-claire-element-id="377015">En admettant que nous ayons créé un projet plus complexe, il aurait été possible d'envoyer une fonction chargerFichier() par exemple de la manière suivante :</p><pre id="r-377016" data-claire-element-id="377016"><code data-claire-semantic="cpp">FenPrincipale::FenPrincipale()
{
	/*
	Votre code PUIS la condition :
	Dans le cas d'un éditeur de texte, si vous appelez la condition avant la déclaration d'une zone de texte,
	vous vous retrouverez avec une erreur car il sera impossible de charger un fichier avec un pointeur/une variable
	inexistante.
	*/

	args = QCoreApplication::arguments(); // Avoir mis &quot;QStringList args;&quot; dans &quot;private&quot; ou autre du .h
	if(args.count() &gt; 1) // Notre condition
	{
		chargerFichier(args);
	}
}

void FenPrincipale::chargerFichier(QStringList &amp;args)
{
	// ...
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
<span class="arrow"></span>
<span class="next">Théorie</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
<span class="next">Annexe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Annexe"></a><h2>Annexe</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
<span class="arrow"></span>
<span class="next">Pratique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">
<span class="next">Apprendre à créer un style entièrement personnalisé</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-annexe-3" data-claire-element-id="377059">Annexe</h4><p id="r-377019" data-claire-element-id="377019">Nous allons voir dans cette dernière partie comment récupérer le nom de l'OS sous lequel l'utilisateur de votre programme tourne. En fonction de cela, il sera possible d'utiliser soit la méthode de récupération des paramètres de la fonction main() avec Mac, soit la méthode pour les autres systèmes d'exploitation. Cela pourra vous servir à rendre vos programmes codés avec Qt parfaitement portables.<br/> Tout ce que je vais vous présenter dans cette sous-partie est bien sûr parfaitement en rapport avec ce framework.</p><h5 id="r-breves-explications" data-claire-element-id="377045">Brèves explications</h5><p id="r-377020" data-claire-element-id="377020">Qt permet à travers l'en-tête &lt;QtGlobal&gt; d'utiliser de divers fonctions, types et macros. Dans le cas présent, nous souhaitons récupérer le nom de l'OS sur lequel l'utilisateur fait tourner l'application. Nous allons donc logiquement nous orienter vers les macros.<br/> Voici un petit tableau listant les macros dont vous allez peut être (même sûrement) avoir besoin un jour dans le cadre d'un projet quelconque :</p><table id="r-377043" data-claire-element-id="377043"><thead id="r-377026" data-claire-element-id="377026"><tr id="r-377025" data-claire-element-id="377025"><th id="r-377022" data-claire-element-id="377022"><p id="r-377021" data-claire-element-id="377021">Macro</p></th><th id="r-377024" data-claire-element-id="377024"><p id="r-377023" data-claire-element-id="377023">Description</p></th></tr></thead><tbody id="r-377042" data-claire-element-id="377042"><tr id="r-377031" data-claire-element-id="377031"><td id="r-377028" data-claire-element-id="377028"><p id="r-377027" data-claire-element-id="377027">Q_WS_X11</p></td><td id="r-377030" data-claire-element-id="377030"><p id="r-377029" data-claire-element-id="377029">Cette macro est définie sous X11.</p></td></tr><tr id="r-377036" data-claire-element-id="377036"><td id="r-377033" data-claire-element-id="377033"><p id="r-377032" data-claire-element-id="377032">Q_WS_MAC</p></td><td id="r-377035" data-claire-element-id="377035"><p id="r-377034" data-claire-element-id="377034">Cette macro est définie sous Mac.</p></td></tr><tr id="r-377041" data-claire-element-id="377041"><td id="r-377038" data-claire-element-id="377038"><p id="r-377037" data-claire-element-id="377037">Q_WS_WIN</p></td><td id="r-377040" data-claire-element-id="377040"><p id="r-377039" data-claire-element-id="377039">Celle-ci est définie sous Windows.</p></td></tr></tbody></table><p id="r-377044" data-claire-element-id="377044">A cela s'ajoutent des macros à caractère moins global telles que Q_OS_WIN32, Q_WS_QWS et bien d'autres encore qui vérifient la plupart du temps un ou plusieurs paramètre(s) supplémentaire(s).<br/> Pour plus d'informations, vous pouvez toujours consulter cette page : <a href="http://doc.trolltech.com/4.5/qtglobal.html">cliquez ici</a> pour y accéder !</p><h5 id="r-utilisation-en-rapport-avec-le-sujet-du-tutoriel" data-claire-element-id="377058">Utilisation en rapport avec le sujet du tutoriel</h5><p id="r-377046" data-claire-element-id="377046">Si vous avez correctement lu tout ce que nous avons étudié ensemble jusque là, que je vous dise qu'il faut utiliser une vérification du nom de l'OS pour utiliser une méthode ou une autre de récupération des arguments de notre chère fonction main() ne doit certainement pas vous étonner. Dans le cas contraire, et bien je vous recommande de lire correctement le tutoriel de manière à ce que vous puissiez comprendre ce que je vais vous montrer ici.</p><p id="r-377047" data-claire-element-id="377047">A partir de ce que nous savons, il faudrait faire en sorte que ce type de chose puisse être suivit :</p><p id="r-377048" data-claire-element-id="377048"><cite>Citation</cite></p><blockquote id="r-377050" data-claire-element-id="377050"><p id="r-377049" data-claire-element-id="377049"><em>- Est-ce que Q_WS_MAC est définie ?<br/> - Non.<br/> - Dans ce cas, j'appelle la fonction ouvertureAutresOS() !</em></p></blockquote><p id="r-377051" data-claire-element-id="377051">Ou dans le cas contraire :</p><p id="r-377052" data-claire-element-id="377052"><cite>Citation</cite></p><blockquote id="r-377054" data-claire-element-id="377054"><p id="r-377053" data-claire-element-id="377053"><em>- Est-ce que Q_WS_MAC est définie ?<br/> - Oui.<br/> - Dans ce cas, j'appelle la fonction ouvertureMac() !</em></p></blockquote><p id="r-377055" data-claire-element-id="377055">Maintenant que vous avez saisi le principe, nous pouvons représenter cela par un code qui est le suivant :</p><pre id="r-377056" data-claire-element-id="377056"><code data-claire-semantic="cpp">#if defined(Q_WS_MAC)
ouvertureMac();
// Fonction qui serait spécialement créée pour Mac...
#else
if(QCoreApplication::arguments().count() &gt; 1)
{
	ouvertureAutresOS();
	// Fonction qui serait créée pour les autres OS...
}
#endif</code></pre><p id="r-377057" data-claire-element-id="377057">Voilà, ce chapitre est terminé. ;) <br/> Je compte sur vous pour réaliser de jolis programmes pouvant récupérer avec Qt tout ce que nous venons de voir et je vous donne rendez-vous à la suite !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
<span class="arrow"></span>
<span class="next">Pratique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">
<span class="next">Apprendre à créer un style entièrement personnalisé</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Apprendrecrerunstyleentirementpersonnalis"></a><h2>Apprendre à créer un style entièrement personnalisé</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
<span class="arrow"></span>
<span class="next">Annexe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
<span class="next">Première approche des styles personnalisés</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-377061" data-claire-element-id="377061">Nous voici dans une partie pouvant déstabiliser les débutants par sa difficulté. Malgré cela, je vais faire de mon mieux pour que vous puissiez saisir de la meilleure façon possible le sujet et pour que vous puissiez vous resservir de tout ce que nous allons apprendre. ;)</p><p id="r-377062" data-claire-element-id="377062">Il ne sera traité durant ce chapitre ni QPainter, ni QGradient car traiter cela impliquerait un départ vers les limbes du hors sujet. Je considèrerai donc que vous avez suffisamment de notions pour réussir à suivre. Si ce n'est pas le cas, faites un tour dans la documentation ou dans un chapitre/tuto traitant le sujet !</p><p id="r-377063" data-claire-element-id="377063">Le sujet du jour est, comme le titre du chapitre l'indique, la création d'un style de fenêtre <em>entièrement</em> personnalisé. A la suite, je vais aborder la conception du style de manière progressive, à l'aide de captures d'écran, d'explications et d'extraits de code. Mon objectif est de vous faire penser que nous codons ensemble le style.</p><p id="r-377064" data-claire-element-id="377064">Voici ce que nous allons apprendre à faire durant ce chapitre :</p><figure id="r-377066" data-claire-element-id="377067"><img id="r-377065" data-claire-element-id="377065" src="medias/uploads.siteduzero.com_files_173001_174000_173978.png" alt="Image utilisateur"/></figure><p id="r-377068" data-claire-element-id="377068">Et oui, le style que nous allons réaliser ensemble est en quelques sortes un mélange des styles propres à Mac et à Windows par le biais d'une petite centaine de lignes. Toutefois, à l'aboutissement du chapitre, il n'aura été réalisé que le style des boutons et non des autres types widgets. Si vous vous ennuyez ou que vous cherchez à parfaire vos techniques, n'hésitez pas à terminer le style que nous allons créer et peut être même à l'utiliser dans vos projets ! La majorité des styles situés dans les sources de Qt pèsent plus de 100Ko donc ne vous en faites pas s'il vous semble que la taille de votre fichier de style est un peu grosse au niveau du rapport nombre de lignes/résultat... :p</p><p id="r-377069" data-claire-element-id="377069">Bonne lecture !</p>
</div><a name="Premireapprochedesstylespersonnaliss"></a><h2>Première approche des styles personnalisés</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">
<span class="arrow"></span>
<span class="next">Apprendre à créer un style entièrement personnalisé</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
<span class="next">Quelques fonctions supplémentaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-premiere-approche-des-styles-personnalises" data-claire-element-id="377248">Première approche des styles personnalisés</h4><p id="r-377070" data-claire-element-id="377070">Créer un style n'est jamais une mince affaire, cela nécessite toujours une grande quantité de temps à consacrer. Qui dit créer un style dit logiquement créer une classe, il va donc falloir créer une classe qui sera le réceptacle de tout le code de mise en forme des widgets de toute fenêtre l'utilisant. Au niveau de l'héritage, je propose de faire hériter la classe de QCommonStyle.</p><p id="r-377071" data-claire-element-id="377071">Pour l'occasion, j'ai créé quatre fichiers qui sont les suivants :</p><ul id="r-377080" data-claire-element-id="377080"><li id="r-377073" data-claire-element-id="377073"><p id="r-377072" data-claire-element-id="377072">main.cpp ;</p></li><li id="r-377075" data-claire-element-id="377075"><p id="r-377074" data-claire-element-id="377074">FenPrincipale.cpp ;</p></li><li id="r-377077" data-claire-element-id="377077"><p id="r-377076" data-claire-element-id="377076">FenPrincipale.h ;</p></li><li id="r-377079" data-claire-element-id="377079"><p id="r-377078" data-claire-element-id="377078">Style.cpp ;</p></li></ul><p id="r-377081" data-claire-element-id="377081">Afin que vous puissiez suivre, je vous fournis le code de base de ces fichiers.</p><pre id="r-377082" data-claire-element-id="377082"><code data-claire-semantic="cpp">#include &quot;FenPrincipale.h&quot;

int main(int argc, char *argv[])
{
	QApplication app(argc, argv);
	app.setStyle(new Style); // Ligne détaillée à la suite.

	FenPrincipale fenetre;
	fenetre.show();

	return app.exec();
}</code></pre><pre id="r-377083" data-claire-element-id="377083"><code data-claire-semantic="cpp">#ifndef HEADER_FENPRINCIPALE
#define HEADER_FENPRINCIPALE

#include &lt;QApplication&gt;
#include &lt;QtGui&gt;

class Style : public QCommonStyle
{
	Q_OBJECT
	public:
		Style();
};

class FenPrincipale : public QMainWindow
{
	public:
		FenPrincipale();
};

#endif</code></pre><pre id="r-377084" data-claire-element-id="377084"><code data-claire-semantic="cpp">#include &quot;FenPrincipale.h&quot;

FenPrincipale::FenPrincipale()
{
	QWidget *zoneCentrale = new QWidget;
	setCentralWidget(zoneCentrale);

	QPushButton *boutonNormal = new QPushButton(&quot;Bouton normal&quot;);
	QPushButton *boutonHover = new QPushButton(&quot;Bouton survolé&quot;);
	QPushButton *boutonDisabled = new QPushButton(&quot;Bouton désactivé&quot;);
	boutonDisabled-&gt;setEnabled(false);
	QPushButton *boutonToggled = new QPushButton(&quot;Bouton enfoncé&quot;);
	boutonToggled-&gt;setCheckable(true);
	boutonToggled-&gt;setChecked(true);
	QPushButton *boutonFlat = new QPushButton(&quot;Bouton plat&quot;);
	boutonFlat-&gt;setFlat(true);

	QVBoxLayout *layout = new QVBoxLayout(this);
	layout-&gt;addWidget(boutonDisabled);
	layout-&gt;addWidget(boutonNormal);
	layout-&gt;addWidget(boutonHover);
	layout-&gt;addWidget(boutonToggled);
	layout-&gt;addWidget(boutonFlat);

	zoneCentrale-&gt;setLayout(layout);
}</code></pre><pre id="r-377085" data-claire-element-id="377085"><code data-claire-semantic="cpp">#include &quot;FenPrincipale.h&quot;

Style::Style()
{
}</code></pre><p id="r-377086" data-claire-element-id="377086">Dans le main.cpp, j'utilise la fonction <a href="http://doc.trolltech.com/4.5/qapplication.html#setStyle">setStyle()</a>, sur la variable app, qui permet comme son nom l'indique si bien de définir un style à toutes les fenêtres du programme.<br/><strong>Note :</strong> Comme dit dans la description de la fonction, vous ne pourrez pas vous servir de feuilles de style si vous vous servez de styles personnalisés...</p><p id="r-377087" data-claire-element-id="377087">Après avoir dit cela, je ne vois plus trop quoi vous annoncer à part le fait que j'ai créé des fichiers spécifiques à leur utilité : Style.cpp exclusivement pour ce qui correspond au style personnalisé que nous allons créer par la suite, FenPrincipale.h pour les déclarations, FenPrincipale.cpp pour définir des widgets qui serviront à avoir un aperçu (et je ne pense pas avoir à vous dire à quoi sert le main.cpp, sinon je ne sais plus quoi vous dire :p ).</p><p id="r-377088" data-claire-element-id="377088">A propos d'aperçu, voici le résultat obtenu :</p><figure id="r-377090" data-claire-element-id="377091"><img id="r-377089" data-claire-element-id="377089" src="medias/uploads.siteduzero.com_files_173001_174000_173824.png" alt="Image utilisateur"/></figure><p id="r-377092" data-claire-element-id="377092">C'est tout ce que vous voulez, sauf joli.<br/> Et non, je n'ai pas truqué la capture d'écran juste pour faire comme si c'était une atrocité telle que celle-ci ! ^^ <br/> Rien qu'en regardant ça, vous pouvez aisément comprendre que nous avons du pain sur la planche...</p><h5 id="r-stylisons-notre-bouton" data-claire-element-id="377247">Stylisons notre bouton</h5><p id="r-377093" data-claire-element-id="377093">QStyle, dont hérite QCommonStyle, offre une fonction nommée <a href="http://doc.trolltech.com/4.5/qstyle.html#drawPrimitive">drawPrimitive()</a>. Nous allons devoir la réimplémenter pour styliser notre bouton.<br/> Voici le prototype de la fonction :</p><pre id="r-377094" data-claire-element-id="377094"><code data-claire-semantic="cpp">void QStyle::drawPrimitive ( PrimitiveElement element, const QStyleOption * option, QPainter * painter, const QWidget * widget = 0 ) const   [pure virtual]</code></pre><p id="r-377095" data-claire-element-id="377095">Cette fonction va prendre pour arguments un PrimitiveElement, indiquant plus ou moins le type de widget que nous allons à avoir à styliser, un QStyleOption, indiquant quant à lui les options de style en fonction du type d'option, un QPainter qui nous servira à dessiner nos widgets et enfin un QWidget dont vous n'aurez que rarement l'utilité.<br/> Je vous conseille vivement de jeter un coup d'œil au tableau contenant de multiples informations sur les différents arguments possibles de cette fonction.</p><p id="r-377096" data-claire-element-id="377096">A l'aide du pointeur option de type QStyleOption, nous allons pouvoir récupérer plusieurs informations sur le widget dont trois qui s'avèrent capitales pour pouvoir dessiner nos widgets. Je vous fais un petit tableau de ce qui me semble le plus utile (le quatrième est le moins utile de la liste) :</p><table id="r-377124" data-claire-element-id="377124"><thead id="r-377102" data-claire-element-id="377102"><tr id="r-377101" data-claire-element-id="377101"><th id="r-377098" data-claire-element-id="377098"><p id="r-377097" data-claire-element-id="377097">Membre</p></th><th id="r-377100" data-claire-element-id="377100"><p id="r-377099" data-claire-element-id="377099">Description rapide</p></th></tr></thead><tbody id="r-377123" data-claire-element-id="377123"><tr id="r-377107" data-claire-element-id="377107"><td id="r-377104" data-claire-element-id="377104"><p id="r-377103" data-claire-element-id="377103">rect</p></td><td id="r-377106" data-claire-element-id="377106"><p id="r-377105" data-claire-element-id="377105">Retourne un QRect des dimensions du widget à dessiner.</p></td></tr><tr id="r-377112" data-claire-element-id="377112"><td id="r-377109" data-claire-element-id="377109"><p id="r-377108" data-claire-element-id="377108">state</p></td><td id="r-377111" data-claire-element-id="377111"><p id="r-377110" data-claire-element-id="377110">Retourne l'état du widget lors de sa peinture.</p></td></tr><tr id="r-377117" data-claire-element-id="377117"><td id="r-377114" data-claire-element-id="377114"><p id="r-377113" data-claire-element-id="377113">type</p></td><td id="r-377116" data-claire-element-id="377116"><p id="r-377115" data-claire-element-id="377115">Pas besoin de détailler, les mots parlent d'eux-mêmes !</p></td></tr><tr id="r-377122" data-claire-element-id="377122"><td id="r-377119" data-claire-element-id="377119"><p id="r-377118" data-claire-element-id="377118">direction</p></td><td id="r-377121" data-claire-element-id="377121"><p id="r-377120" data-claire-element-id="377120">Concerne la direction interne du widget, par défaut de gauche à droite.</p></td></tr></tbody></table><p id="r-377125" data-claire-element-id="377125">Cela ne vous étonnera donc pas si le code suivant récupère les valeurs x, y, height et width (soit les quatre valeurs d'un QRect) du widget :</p><pre id="r-377126" data-claire-element-id="377126"><code data-claire-semantic="cpp">int rectX, rectY, rectLong, rectLarg;
option-&gt;rect.getRect(&amp;rectX, &amp;rectY, &amp;rectLong, &amp;rectLarg);</code></pre><p id="r-377127" data-claire-element-id="377127">Note : Par expérience, nous savons que nous devons retirer un pixel ou plus de la longueur et de la largeur afin que le rectangle puisse entrer dans la zone du widget. <br/> J'ai choisi d'en retirer deux en décalant les coordonnées de x et de y vers l'intérieur du widget<strong> :</strong> Par expérience, nous savons que nous devons retirer un pixel ou plus de la longueur et de la largeur afin que le rectangle puisse entrer dans la zone du widget. <br/> J'ai choisi d'en retirer deux en décalant les coordonnées de x et de y vers l'intérieur du widget :</p><pre id="r-377128" data-claire-element-id="377128"><code data-claire-semantic="cpp">rectLong = rectLong - 2;
rectLarg = rectLarg - 2;
rectX = rectX + 1;
rectY = rectY + 1;</code></pre><p id="r-377129" data-claire-element-id="377129">Maintenant, nous devons émettre une condition pour vérifier que nous allons bien dessiner un bouton à l'aide de l'argument <em>element</em>. Si vous avez regardé le tableau (pas celui que j'ai fait mais celui de la doc de la fonction <a href="http://doc.trolltech.com/4.5/qstyle.html#drawPrimitive">drawPrimitive()</a>), et bien vous avez dû constater que le choix ne se fait pas tellement pour les boutons, c'est de PE_PanelButtonCommand que nous allons avoir besoin. En résumé, si <em>element</em> est équivalent à PE_PanelButtonCommand, et bien c'est que nous dessinons un bouton.</p><pre id="r-377130" data-claire-element-id="377130"><code data-claire-semantic="cpp">if(element == PE_PanelButtonCommand)
{
	// La suite du code se situera ici...
}</code></pre><p id="r-377131" data-claire-element-id="377131">C'est là qu'intervient un autre membre de QStyleOption : state. Cela nous permettra par exemple de vérifier si le bouton est activé ou non, à vérifier si la souris survole le widget (traité dans la sous-partie suivante pour cause de nécessité de deux autres fonctions), à vérifier que le bouton est pressé, etc...<br/> Voici un tableau des principaux statuts offerts par QStyle par le biais de <code data-claire-semantic="cpp">option-&gt;state </code> dans notre code :</p><table id="r-377232" data-claire-element-id="377232"><thead id="r-377139" data-claire-element-id="377139"><tr id="r-377138" data-claire-element-id="377138"><th id="r-377133" data-claire-element-id="377133"><p id="r-377132" data-claire-element-id="377132">Constante</p></th><th id="r-377135" data-claire-element-id="377135"><p id="r-377134" data-claire-element-id="377134">Valeur correspondante</p></th><th id="r-377137" data-claire-element-id="377137"><p id="r-377136" data-claire-element-id="377136">Description</p></th></tr></thead><tbody id="r-377231" data-claire-element-id="377231"><tr id="r-377146" data-claire-element-id="377146"><td id="r-377141" data-claire-element-id="377141"><p id="r-377140" data-claire-element-id="377140">QStyle::State_None</p></td><td id="r-377143" data-claire-element-id="377143"><p id="r-377142" data-claire-element-id="377142">0x00000000</p></td><td id="r-377145" data-claire-element-id="377145"><p id="r-377144" data-claire-element-id="377144">Indique le widget n'a pas d'état.</p></td></tr><tr id="r-377153" data-claire-element-id="377153"><td id="r-377148" data-claire-element-id="377148"><p id="r-377147" data-claire-element-id="377147">QStyle::State_Active</p></td><td id="r-377150" data-claire-element-id="377150"><p id="r-377149" data-claire-element-id="377149">0x00010000</p></td><td id="r-377152" data-claire-element-id="377152"><p id="r-377151" data-claire-element-id="377151">Indique que le widget est actif.</p></td></tr><tr id="r-377160" data-claire-element-id="377160"><td id="r-377155" data-claire-element-id="377155"><p id="r-377154" data-claire-element-id="377154">QStyle::State_Editing</p></td><td id="r-377157" data-claire-element-id="377157"><p id="r-377156" data-claire-element-id="377156">0x00400000</p></td><td id="r-377159" data-claire-element-id="377159"><p id="r-377158" data-claire-element-id="377158">Indique que le widget contient un éditeur ouvert.</p></td></tr><tr id="r-377167" data-claire-element-id="377167"><td id="r-377162" data-claire-element-id="377162"><p id="r-377161" data-claire-element-id="377161">QStyle::State_Enabled</p></td><td id="r-377164" data-claire-element-id="377164"><p id="r-377163" data-claire-element-id="377163">0x00000001</p></td><td id="r-377166" data-claire-element-id="377166"><p id="r-377165" data-claire-element-id="377165">Sans doute le plus important : indique si le widget est activé.</p></td></tr><tr id="r-377174" data-claire-element-id="377174"><td id="r-377169" data-claire-element-id="377169"><p id="r-377168" data-claire-element-id="377168">QStyle::State_HasFocus</p></td><td id="r-377171" data-claire-element-id="377171"><p id="r-377170" data-claire-element-id="377170">0x00000100</p></td><td id="r-377173" data-claire-element-id="377173"><p id="r-377172" data-claire-element-id="377172">Indique si le widget a le focus. Entre autres, cela peut servir à différencier la couleur du cadre du widget par exemple.</p></td></tr><tr id="r-377181" data-claire-element-id="377181"><td id="r-377176" data-claire-element-id="377176"><p id="r-377175" data-claire-element-id="377175">QStyle::State_MouseOver</p></td><td id="r-377178" data-claire-element-id="377178"><p id="r-377177" data-claire-element-id="377177">0x00002000</p></td><td id="r-377180" data-claire-element-id="377180"><p id="r-377179" data-claire-element-id="377179">Cela nécessite l'implémentation supplémentaire d'au moins une fonction pour indiquer correctement si la souris survole le widget.</p></td></tr><tr id="r-377188" data-claire-element-id="377188"><td id="r-377183" data-claire-element-id="377183"><p id="r-377182" data-claire-element-id="377182">QStyle::State_NoChange</p></td><td id="r-377185" data-claire-element-id="377185"><p id="r-377184" data-claire-element-id="377184">0x00000010</p></td><td id="r-377187" data-claire-element-id="377187"><p id="r-377186" data-claire-element-id="377186">Indique si le widget est cochable aux trois états.</p></td></tr><tr id="r-377195" data-claire-element-id="377195"><td id="r-377190" data-claire-element-id="377190"><p id="r-377189" data-claire-element-id="377189">QStyle::State_Off</p></td><td id="r-377192" data-claire-element-id="377192"><p id="r-377191" data-claire-element-id="377191">0x00000008</p></td><td id="r-377194" data-claire-element-id="377194"><p id="r-377193" data-claire-element-id="377193">Indique si le widget n'est pas coché.</p></td></tr><tr id="r-377202" data-claire-element-id="377202"><td id="r-377197" data-claire-element-id="377197"><p id="r-377196" data-claire-element-id="377196">QStyle::State_On</p></td><td id="r-377199" data-claire-element-id="377199"><p id="r-377198" data-claire-element-id="377198">0x00000020</p></td><td id="r-377201" data-claire-element-id="377201"><p id="r-377200" data-claire-element-id="377200">Indique si le widget est coché.</p></td></tr><tr id="r-377209" data-claire-element-id="377209"><td id="r-377204" data-claire-element-id="377204"><p id="r-377203" data-claire-element-id="377203">QStyle::State_Raised</p></td><td id="r-377206" data-claire-element-id="377206"><p id="r-377205" data-claire-element-id="377205">0x00000002</p></td><td id="r-377208" data-claire-element-id="377208"><p id="r-377207" data-claire-element-id="377207">Indique si le widget est élevé. Regardez aussi QStyle::State_Sunken qui me semble être associé à cela.</p></td></tr><tr id="r-377216" data-claire-element-id="377216"><td id="r-377211" data-claire-element-id="377211"><p id="r-377210" data-claire-element-id="377210">QStyle::State_ReadOnly</p></td><td id="r-377213" data-claire-element-id="377213"><p id="r-377212" data-claire-element-id="377212">0x02000000</p></td><td id="r-377215" data-claire-element-id="377215"><p id="r-377214" data-claire-element-id="377214">Indique si le widget est en lecture seule.</p></td></tr><tr id="r-377223" data-claire-element-id="377223"><td id="r-377218" data-claire-element-id="377218"><p id="r-377217" data-claire-element-id="377217">QStyle::State_Selected</p></td><td id="r-377220" data-claire-element-id="377220"><p id="r-377219" data-claire-element-id="377219">0x00008000</p></td><td id="r-377222" data-claire-element-id="377222"><p id="r-377221" data-claire-element-id="377221">Indique si le widget est sélectionné.</p></td></tr><tr id="r-377230" data-claire-element-id="377230"><td id="r-377225" data-claire-element-id="377225"><p id="r-377224" data-claire-element-id="377224">QStyle::State_Sunken</p></td><td id="r-377227" data-claire-element-id="377227"><p id="r-377226" data-claire-element-id="377226">0x00000004</p></td><td id="r-377229" data-claire-element-id="377229"><p id="r-377228" data-claire-element-id="377228">Indique si le widget est creux ou enfoncé.</p></td></tr></tbody></table><aside id="r-377234" data-claire-element-id="377234" data-claire-semantic="information"><p id="r-377233" data-claire-element-id="377233">L'ordination de votre code est importante dans le cas où vous voudriez effectuer comme moi des conditions les plus courtes possibles.</p></aside><p id="r-377235" data-claire-element-id="377235">Commençons par les options de style les plus simples :</p><pre id="r-377236" data-claire-element-id="377236"><code data-claire-semantic="cpp">if(option-&gt;state &amp; State_Enabled) // Si le statut du bouton à peindre est activé :
{
// On peint un bouton activé.
}
else // Sinon, c'est qu'il est désactivé :
{
// On peint donc un bouton désactivé.
}</code></pre><p id="r-377237" data-claire-element-id="377237">Une question doit sûrement vous tracasser : comment vérifier plusieurs éléments dans la même condition ? Et bien de la manière suivante :</p><pre id="r-377238" data-claire-element-id="377238"><code data-claire-semantic="cpp">if(option-&gt;state &amp; (State_Sunken | State_Enabled)) { ... }
if(option-&gt;state &amp; (State_Sunken &amp; State_Enabled)) { ... }</code></pre><p id="r-377239" data-claire-element-id="377239">Mettons un peu de contenu à la peinture des boutons activés et désactivés :</p><pre id="r-377240" data-claire-element-id="377240"><code data-claire-semantic="cpp">if(option-&gt;state &amp; State_Enabled)
{
	// Un gradient pour faire joli...
	QLinearGradient gradient;
	gradient.setStart(0, rectLarg + 2);
	gradient.setFinalStop(0, 0);
	gradient.setSpread(QGradient::ReflectSpread);
	gradient.setColorAt(0, Qt::white);
	gradient.setColorAt(0.5, QColor(233, 233, 233));
	gradient.setColorAt(1, Qt::white);

	painter-&gt;setRenderHint(QPainter::Antialiasing); // On peindra en antialiasing.
	painter-&gt;save();
	painter-&gt;setPen(QColor(Qt::black)); // Bordures en noir...
	painter-&gt;setBrush(QBrush(gradient)); // ... et brosse peignant le gradient.
	painter-&gt;drawRoundedRect(rectX, rectY, rectLong, rectLarg, 5, 5, Qt::AbsoluteSize); // On dessine un rectangle aux coins arrondis.
	painter-&gt;restore();
	painter-&gt;setPen(QColor(250, 250, 250));
	painter-&gt;drawRoundedRect(rectX + 1, rectY + 1, rectLong, rectLarg, 5, 5, Qt::AbsoluteSize); // Un touche supplémentaire pour faire joli ! ^^
}
else
{
	painter-&gt;save();
	painter-&gt;setPen(QColor(173, 178, 181));
	painter-&gt;setBrush(QBrush(QColor(244, 244, 244)));
	painter-&gt;drawRect(rectX, rectY, rectLong, rectLarg);
	painter-&gt;restore();
	painter-&gt;setPen(QColor(Qt::white));
	painter-&gt;drawRect(rectX + 1, rectY + 1, rectLong - 2, rectLarg - 2);
}</code></pre><p id="r-377241" data-claire-element-id="377241">Je ne prendrai pas le temps de vous détailler plus ce que j'ai fait car ce n'est pas tellement le but du tutoriel que de vous enseigner QPainter et QGradient.<br/> Concluons la sous-partie avec la fonction complète suivie d'une capture d'écran du résultat :</p><pre id="r-377242" data-claire-element-id="377242"><code data-claire-semantic="cpp">void Style::drawPrimitive(PrimitiveElement element, const QStyleOption *option, QPainter *painter, const QWidget *widget) const
{
	int rectX, rectY, rectLong, rectLarg;
	option-&gt;rect.getRect(&amp;rectX, &amp;rectY, &amp;rectLong, &amp;rectLarg);

	rectLong = rectLong - 2;
	rectLarg = rectLarg - 2;
	rectX = rectX + 1;
	rectY = rectY + 1;

	if(element == PE_PanelButtonCommand)
	{
		if(option-&gt;state &amp; State_Enabled)
		{
			QLinearGradient gradient;
			gradient.setStart(0, rectLarg + 2);
			gradient.setFinalStop(0, 0);
			gradient.setSpread(QGradient::ReflectSpread);
			gradient.setColorAt(0, Qt::white);
			gradient.setColorAt(0.5, QColor(233, 233, 233));
			gradient.setColorAt(1, Qt::white);

			painter-&gt;setRenderHint(QPainter::Antialiasing);
			painter-&gt;save();
			painter-&gt;setPen(QColor(Qt::black));
			painter-&gt;setBrush(QBrush(gradient));
			painter-&gt;drawRoundedRect(rectX, rectY, rectLong, rectLarg, 5, 5, Qt::AbsoluteSize);
			painter-&gt;restore();
			painter-&gt;setPen(QColor(250, 250, 250));
			painter-&gt;drawRoundedRect(rectX + 1, rectY + 1, rectLong, rectLarg, 5, 5, Qt::AbsoluteSize);
		}
		else
		{
			painter-&gt;save();
			painter-&gt;setPen(QColor(173, 178, 181));
			painter-&gt;setBrush(QBrush(QColor(244, 244, 244)));
			painter-&gt;drawRect(rectX, rectY, rectLong, rectLarg);
			painter-&gt;restore();
			painter-&gt;setPen(QColor(Qt::white));
			painter-&gt;drawRect(rectX + 1, rectY + 1, rectLong - 2, rectLarg - 2);
		}
		if(option-&gt;state &amp; (State_Sunken | State_On))
		{
			QLinearGradient gradient;
			gradient.setStart(0, rectLarg + 2);
			gradient.setFinalStop(0, 0);
			gradient.setSpread(QGradient::ReflectSpread);
			gradient.setColorAt(0, QColor(196, 209, 219));
			gradient.setColorAt(0.25, QColor(147, 177, 200));
			gradient.setColorAt(0.5, QColor(105, 149, 183));
			gradient.setColorAt(0.75, QColor(137, 175, 200));
			gradient.setColorAt(1, QColor(178, 209, 219));

			painter-&gt;setRenderHint(QPainter::Antialiasing);
			painter-&gt;save();
			painter-&gt;setPen(QColor(Qt::black));
			painter-&gt;setBrush(QBrush(gradient));
			painter-&gt;drawRoundedRect(rectX + 1, rectY + 1, rectLong - 1, rectLarg - 1, 5, 5, Qt::AbsoluteSize);
			painter-&gt;restore();
			painter-&gt;setPen(QColor(150, 150, 150));
			painter-&gt;drawRoundedRect(rectX + 1, rectY + 2, rectLong - 1, rectLarg - 1, 5, 5, Qt::AbsoluteSize);
		}
	}
}</code></pre><p id="r-377243" data-claire-element-id="377243">Et comme promis, voici le résultat (en retirant le bouton survolé car le survol n'a pas été traité pour le moment) :</p><figure id="r-377245" data-claire-element-id="377246"><img id="r-377244" data-claire-element-id="377244" src="medias/uploads.siteduzero.com_files_174001_175000_174029.png" alt="Image utilisateur"/></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">
<span class="arrow"></span>
<span class="next">Apprendre à créer un style entièrement personnalisé</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
<span class="next">Quelques fonctions supplémentaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quelquesfonctionssupplmentaires"></a><h2>Quelques fonctions supplémentaires</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
<span class="arrow"></span>
<span class="next">Première approche des styles personnalisés</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
<span class="next">Pour en savoir plus...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-fonctions-supplementaires" data-claire-element-id="377286">Quelques fonctions supplémentaires</h4><p id="r-377249" data-claire-element-id="377249">Maintenant que l'entrée à été mangée, et bien raclée, voici la suite du menu du jour :</p><ul id="r-377254" data-claire-element-id="377254"><li id="r-377251" data-claire-element-id="377251"><p id="r-377250" data-claire-element-id="377250">Survol du bouton ;</p></li><li id="r-377253" data-claire-element-id="377253"><p id="r-377252" data-claire-element-id="377252">Dessin du texte.</p></li></ul><h5 id="r-survol-du-bouton" data-claire-element-id="377260">Survol du bouton</h5><p id="r-377255" data-claire-element-id="377255">Afin de pouvoir nous servir correctement de QStyle::State_MouseOver, il va être nécessaire de passer par les fonctions <a href="http://doc.trolltech.com/4.5/qstyle.html#polish">polish()</a> et <a href="http://doc.trolltech.com/4.5/qstyle.html#unpolish">unpolish()</a>. Nous allons utiliser <code data-claire-semantic="cpp">qobject_cast&lt;QPushButton *&gt;(widget) </code> dans une condition, une simple vérification permettant d'éviter des erreurs. Dans le cas où cela retournerait quelque chose, et bien on entrerait dans la condition pour attribuer ou désattribuer au widget Qt::WA_Hover et dans le cas où cela retournerait 0, on ne ferait rien.</p><p id="r-377256" data-claire-element-id="377256">Voici le code de ces deux fonctions :</p><pre id="r-377257" data-claire-element-id="377257"><code data-claire-semantic="cpp">void Style::polish(QWidget *widget)
{
	if (qobject_cast&lt;QPushButton *&gt;(widget))
	widget-&gt;setAttribute(Qt::WA_Hover, true);
}

void Style::unpolish(QWidget *widget)
{
	if (qobject_cast&lt;QPushButton *&gt;(widget))
	widget-&gt;setAttribute(Qt::WA_Hover, false);
}</code></pre><p id="r-377258" data-claire-element-id="377258">Il est maintenant temps d'ajouter une condition juste avant la condition <code data-claire-semantic="cpp">if(option-&gt;state &amp; (State_Sunken | State_On)) </code> dans la réimplémentation de drawPrimitive(), celle du survol :</p><pre id="r-377259" data-claire-element-id="377259"><code data-claire-semantic="cpp">if(option-&gt;state &amp; State_MouseOver)
{
	QLinearGradient gradient;
	gradient.setStart(0, rectLarg + 2);
	gradient.setFinalStop(0, 0);
	gradient.setSpread(QGradient::ReflectSpread);
	gradient.setColorAt(0, QColor(203, 244, 246));
	gradient.setColorAt(0.5, QColor(129, 185, 243));
	gradient.setColorAt(1, QColor(203, 244, 246));

	painter-&gt;setRenderHint(QPainter::Antialiasing);
	painter-&gt;save();
	painter-&gt;setPen(QColor(Qt::black));
	painter-&gt;setBrush(QBrush(gradient));
	painter-&gt;drawRoundedRect(rectX, rectY, rectLong, rectLarg, 5, 5, Qt::AbsoluteSize);
	painter-&gt;restore();
	painter-&gt;setPen(QColor(250, 250, 250));
	painter-&gt;drawRoundedRect(rectX + 1, rectY + 1, rectLong, rectLarg, 5, 5, Qt::AbsoluteSize);
}</code></pre><h5 id="r-dessin-du-texte" data-claire-element-id="377282">Dessin du texte</h5><p id="r-377261" data-claire-element-id="377261">Une autre option offerte par QStyle est la fonction <a href="http://doc.trolltech.com/4.5/qstyle.html#drawItemText">drawItemText()</a> dont le prototype est le suivant :</p><pre id="r-377262" data-claire-element-id="377262"><code data-claire-semantic="cpp">void QStyle::drawItemText ( QPainter * painter, const QRect &amp; rectangle, int alignment, const QPalette &amp; palette, bool enabled, const QString &amp; text, QPalette::ColorRole textRole = QPalette::NoRole ) const</code></pre><p id="r-377263" data-claire-element-id="377263">Le prototype est lui-même très parlant, je ne saurais mieux vous le détailler. Par contre, je peux vous montrer comment vous en servir !<br/> Juste après sa définition dans le projet tel que la fonction soit vide, nous obtenons une fenêtre comme celle-ci :</p><figure id="r-377265" data-claire-element-id="377266"><img id="r-377264" data-claire-element-id="377264" src="medias/uploads.siteduzero.com_files_174001_175000_174044.png" alt="Image utilisateur"/></figure><p id="r-377267" data-claire-element-id="377267">Conclusion : on va devoir se prendre la tête à dessiner le texte du widget !<br/> Un style personnalisé est un style personnalisé, pas question de s'appuyer sur des paramètres prédéfinis !</p><p id="r-377268" data-claire-element-id="377268">Nous allons devoir nous appuyer sur deux éléments fondamentaux supplémentaires au texte : l'alignement et si le widget est activé (dans le cas contraire, le texte serait grisé).<br/> On arrête de trainasser et on avance !</p><pre id="r-377269" data-claire-element-id="377269"><code data-claire-semantic="cpp">void Style::drawItemText(QPainter *painter, const QRect &amp;rectangle, int alignment, const QPalette &amp;palette, bool enabled, const QString &amp;text, QPalette::ColorRole textRole) const
{
	painter-&gt;drawText(rectangle, text);
}</code></pre><p id="r-377270" data-claire-element-id="377270">Et juste après la compilation, vous ouvrez le programme qui s'ouvre sous vos yeux ébahis...</p><figure id="r-377272" data-claire-element-id="377273"><img id="r-377271" data-claire-element-id="377271" src="medias/uploads.siteduzero.com_files_174001_175000_174052.png" alt="Image utilisateur"/></figure><p id="r-377274" data-claire-element-id="377274"><em>Les plus attentifs auront remarqué une petite flemme d'ajouter une souris manuellement... :-°</em></p><p id="r-377275" data-claire-element-id="377275">Hum... ce n'est pas encore tout à fait ça.<br/> Et bien forcément, quand on ne prend en compte ni l'alignement, ni le statut du bouton (ce qui influera sur la couleur du texte), on ne va pas bien loin, vous pouvez me faire confiance. ;)</p><p id="r-377276" data-claire-element-id="377276">Corrigeons ça en vitesse :</p><pre id="r-377277" data-claire-element-id="377277"><code data-claire-semantic="cpp">void Style::drawItemText(QPainter *painter, const QRect &amp;rectangle, int alignment, const QPalette &amp;palette, bool enabled, const QString &amp;text, QPalette::ColorRole textRole) const
{
	if(enabled)
	painter-&gt;setPen(QPen(QColor(Qt::black)));
	else
	painter-&gt;setPen(QPen(QColor(125, 125, 125)));
	painter-&gt;drawText(rectangle, alignment, text);
}</code></pre><p id="r-377278" data-claire-element-id="377278">Et le résultat qui est aussi l'aboutissement du chapitre :</p><figure id="r-377280" data-claire-element-id="377281"><img id="r-377279" data-claire-element-id="377279" src="medias/uploads.siteduzero.com_files_173001_174000_173978.png" alt="Image utilisateur"/></figure><h5 id="r-telechargement-20" data-claire-element-id="377285">Téléchargement</h5><p id="r-377283" data-claire-element-id="377283">Dans le cas où vous voudriez tester, améliorer ou autres le programme, j'ai placé ci-dessous un lien permettant de télécharger les sources du projet (quatre fichiers) :</p><p id="r-377284" data-claire-element-id="377284"><a href="http://www.app-and-b.fr/ftp/Divers/Le_GUI_avec_Qt/Style.zip">Télécharger les sources du projet (3Ko)</a></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
<span class="arrow"></span>
<span class="next">Première approche des styles personnalisés</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
<span class="next">Pour en savoir plus...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Pourensavoirplus..."></a><h2>Pour en savoir plus...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
<span class="arrow"></span>
<span class="next">Quelques fonctions supplémentaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">
<span class="next">Commençons...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pour-en-savoir-plus" data-claire-element-id="377296">Pour en savoir plus...</h4><p id="r-377287" data-claire-element-id="377287">Ci-dessous se trouve une liste de liens vers des pages pouvant vous en apprendre plus sur le sujet :</p><ul id="r-377294" data-claire-element-id="377294"><li id="r-377289" data-claire-element-id="377289"><p id="r-377288" data-claire-element-id="377288"><a href="http://doc.trolltech.com/4.5/style-reference.html">Implementing Styles and Style Aware Widgets ;</a></p></li><li id="r-377291" data-claire-element-id="377291"><p id="r-377290" data-claire-element-id="377290"><a href="http://doc.trolltech.com/4.5/qstyle.html">Documentation de QStyle ;</a></p></li><li id="r-377293" data-claire-element-id="377293"><p id="r-377292" data-claire-element-id="377292"><a href="http://doc.trolltech.com/4.5/widgets-styles.html">Exemple de styles.</a></p></li></ul><p id="r-377295" data-claire-element-id="377295">Après cette introduction assez poussée aux styles personnalisés, vous pourrez si vous le souhaitez créer vos propres styles de fenêtres. Désormais, que vous puissiez vouloir une fenêtre sombre comme une nuit sans lune ou bien une jolie fenêtre avec des petits cœurs dessus, et bien ce sera possible ! Un seul conseil, laissez libre cours à votre imagination ! ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
<span class="arrow"></span>
<span class="next">Quelques fonctions supplémentaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">
<span class="next">Commençons...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Commenons..."></a><h2>Commençons...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
<span class="arrow"></span>
<span class="next">Pour en savoir plus...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
<span class="next">Présentation rapide des classes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-377301" data-claire-element-id="377301">Il est très fréquent que des zéros posent des questions dans le forum C++ comme : &quot;Comment utiliser la SDL avec Qt ?&quot;. Qt possède tout de même de quoi réaliser des programmes utilisant des éléments graphiques, et nous allons apprendre ensemble à en créer.</p><p id="r-377302" data-claire-element-id="377302">Au menu, voici les étapes de ce chapitre :</p><ul id="r-377307" data-claire-element-id="377307"><li id="r-377304" data-claire-element-id="377304"><p id="r-377303" data-claire-element-id="377303">Présentation rapide des classes.</p></li><li id="r-377306" data-claire-element-id="377306"><p id="r-377305" data-claire-element-id="377305">Le traditionnel &quot;Hello World !&quot;.</p></li></ul><p id="r-377308" data-claire-element-id="377308">Nous pouvons donc commencer !</p>
</div><a name="Prsentationrapidedesclasses"></a><h2>Présentation rapide des classes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">
<span class="arrow"></span>
<span class="next">Commençons...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
<span class="next">Le traditionnel &quot;Hello World !&quot;</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-presentation-rapide-des-classes" data-claire-element-id="377322">Présentation rapide des classes</h4><p id="r-377309" data-claire-element-id="377309">Comme je le disais dans l'introduction, des questions au sujet d'utilisation de bibliothèques gérant la 2D telles que la SDL, etc. sont très fréquemment posées. Peu de zéros ne semblent être au courant que Qt possède ses propres classes permettant d'ajouter des éléments graphiques dans leurs programmes. J'ai donc décidé de rédiger une sous-partie du big-tuto sur la gestion de la 2D avec Qt, de manière à ce que tous puissent sans problème utiliser la 2D dans leur programmes et ce uniquement avec Qt, donc sans avoir besoin d'installer des bibliothèques.</p><p id="r-377310" data-claire-element-id="377310">Je vais vous présenter rapidement à la suite des classes de Qt que nous allons avoir à utiliser...</p><h6 id="r-qgraphicsscene" data-claire-element-id="377312">QGraphicsScene</h6><p id="r-377311" data-claire-element-id="377311">La classe QGraphicsScene a pour rôle de pouvoir contenir plusieurs éléments en 2D de type graphique. C'est en quelques sortes un conteneur assez parallèle à la classe QWidget, bien que ces deux classes n'aient pas de rapport l'une à l'autre, car QGraphicsScene peut contenir des éléments comme QWidget peut en contenir d'autres.<br/> QGraphicsScene a tout de même une particularité : il ne peut pas s'afficher seul, c'est-à-dire qu'il nécessite une autre classe pour pouvoir être visible, QGraphicsView.<br/> Pour l'héritage, QGraphicsScene hérite de QObject.</p><h6 id="r-qgraphicsview" data-claire-element-id="377314">QGraphicsView</h6><p id="r-377313" data-claire-element-id="377313">QGraphicsView a pour fonction d'afficher le contenu d'un QGraphicsScene. Comme il hérite de QAbstractScrollArea, il peut logiquement posséder une barre de défilement, ce qui peut se révéler très pratique dans certains cas de figure.<br/> Cette classe sera particulièrement utile pour nous tout au long de cette partie donc attendez-vous d'autant plus à la revoir par la suite. ;)</p><h6 id="r-qpainter" data-claire-element-id="377316">QPainter</h6><p id="r-377315" data-claire-element-id="377315">Cette classe nous servira pour tout ce qui est coloration, formatage de texte, effets, etc...</p><h6 id="r-qrect-qpoint-qpolygon" data-claire-element-id="377318">QRect, QPoint, QPolygon...</h6><p id="r-377317" data-claire-element-id="377317">Nous aurons certainement à nous servir de ces classes par la suite. Comme le nom de ces classes peut vous l'indiquer, elles servent à ce qui touche la géométrie avec la création de point, de rectangles...</p><h6 id="r-et-bien-d-autres-1" data-claire-element-id="377321">Et bien d'autres</h6><p id="r-377319" data-claire-element-id="377319">Il reste encore un bon nombre de classes que nous verrons par la suite comme QBrush par exemple, je ne vous les détaille donc pas ici.</p><p id="r-377320" data-claire-element-id="377320">Maintenant que nous en avons terminé des présentations rapides des classes, nous pouvons passer à la pratique.<br/> Je vous donne rendez-vous à la suite du cours ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">
<span class="arrow"></span>
<span class="next">Commençons...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
<span class="next">Le traditionnel &quot;Hello World !&quot;</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LetraditionnelquotHelloWorldquot"></a><h2>Le traditionnel &quot;Hello World !&quot;</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
<span class="arrow"></span>
<span class="next">Présentation rapide des classes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">
<span class="next">Formes géométriques et autres</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-traditionnel-hello-world" data-claire-element-id="377341">Le traditionnel &quot;Hello World !&quot;</h4><p id="r-377323" data-claire-element-id="377323">Nous voici donc à la partie &quot;pratique&quot; avec le traditionnel &quot;Hello World !&quot;<br/> Eh oui, nous pouvons aussi afficher du texte dans nos QGraphicsScene. :) <br/> Mais tout d'abord, je vous propose de créer un nouveau projet dans votre IDE favori pour pouvoir suivre. Une fois cette opération terminée, je vous invite à créer un fichier <em>main.cpp</em> : nous n'aurons pas besoin de plus de fichiers pour le moment.</p><p id="r-377324" data-claire-element-id="377324">Commençons par mettre en place les includes nécessaires à la réalisation de notre premier projet utilisant QGraphicsScene :</p><pre id="r-377325" data-claire-element-id="377325"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QtGui&gt;</code></pre><p id="r-377326" data-claire-element-id="377326">C'est par mesure de simplicité que nous avons mis QtGui : nous n'avons pas pour objectif de nous attarder sur une liste d'includes.<br/> Nous pouvons désormais entrer dans la partie la plus intéressante de la création de notre premier programme utilisant des éléments graphiques. Il s'agit de créer un QGraphicsScene, de lui mettre dedans du texte et de l'afficher. Pour cela, nous allons procéder dans l'ordre. Créons donc notre QGraphicsScene !</p><p id="r-377327" data-claire-element-id="377327">Voici le constructeur (le plus simple) que nous donne la documentation :</p><pre id="r-377328" data-claire-element-id="377328"><code data-claire-semantic="cpp">QGraphicsScene::QGraphicsScene ( QObject * parent = 0 )</code></pre><p id="r-377329" data-claire-element-id="377329">Et ce constructeur en utilisation :</p><pre id="r-377330" data-claire-element-id="377330"><code data-claire-semantic="cpp">QGraphicsScene scene;</code></pre><p id="r-377331" data-claire-element-id="377331">Nous avons ici créé une variable de type QGraphicsScene nommée &quot;scene&quot;. Son rôle sera d'accueillir le texte (&quot;Hello World !&quot;).<br/> Mais comment faire pour mettre du texte ? On a le droit de créer un QLabel ?<br/> Quel besoin de créer un QLabel ? Nous allons nous servir de <code>addText()</code> tout simplement :</p><pre id="r-377332" data-claire-element-id="377332"><code data-claire-semantic="cpp">scene.addText(&quot;Hello world !&quot;);</code></pre><p id="r-377333" data-claire-element-id="377333">Si vous avez retenu ce que je vous ai dit plus tôt, compiler et lancer le programme ne sert actuellement à rien car nous n'affichons pas notre QGraphicsScene. Il faut créer un QGraphicsView pour afficher notre scène :</p><pre id="r-377334" data-claire-element-id="377334"><code data-claire-semantic="cpp">QGraphicsView vue(&amp;scene);
vue.show();</code></pre><p id="r-377335" data-claire-element-id="377335">Je vous donne le code complet que vous pouvez tester :</p><pre id="r-377336" data-claire-element-id="377336"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QtGui&gt;
 
int main(int argc, char *argv[])
{
	QApplication app(argc, argv);

	QGraphicsScene scene;
	scene.addText(&quot;Hello world !&quot;);

	QGraphicsView vue(&amp;scene);
	vue.show();

	return app.exec();
}</code></pre><p id="r-377337" data-claire-element-id="377337">Et pour la route, je vous met une jolie petite capture d'écran. ;)</p><figure id="r-377339" data-claire-element-id="377340"><img id="r-377338" data-claire-element-id="377338" src="medias/uploads.siteduzero.com_files_152001_153000_152518.png" alt="Image utilisateur"/></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
<span class="arrow"></span>
<span class="next">Présentation rapide des classes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">
<span class="next">Formes géométriques et autres</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Formesgomtriquesetautres"></a><h2>Formes géométriques et autres</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
<span class="arrow"></span>
<span class="next">Le traditionnel &quot;Hello World !&quot;</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
<span class="next">Des figures géométriques en nombre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-377343" data-claire-element-id="377343">Maintenant que nous avons réalisé notre première fenêtre avec les classes gérant la 2D de Qt, nous pouvons passer à l'étape suivante qui est la gestion des formes géométriques, des images, etc.</p><p id="r-377344" data-claire-element-id="377344">Il est logique que nous ayons besoin de connaître sur le bout des doigts comment créer de telles choses, pour pouvoir accéder par la suite au TP qui correspond à notre objectif final.</p><p id="r-377345" data-claire-element-id="377345">Au programme :</p><ul id="r-377358" data-claire-element-id="377358"><li id="r-377347" data-claire-element-id="377347"><p id="r-377346" data-claire-element-id="377346">création de points ;</p></li><li id="r-377349" data-claire-element-id="377349"><p id="r-377348" data-claire-element-id="377348">de lignes ;</p></li><li id="r-377351" data-claire-element-id="377351"><p id="r-377350" data-claire-element-id="377350">de rectangles ;</p></li><li id="r-377353" data-claire-element-id="377353"><p id="r-377352" data-claire-element-id="377352">d'autres polygones ;</p></li><li id="r-377355" data-claire-element-id="377355"><p id="r-377354" data-claire-element-id="377354">n'oublions pas le texte ;</p></li><li id="r-377357" data-claire-element-id="377357"><p id="r-377356" data-claire-element-id="377356">ouverture d'images.</p></li></ul><p id="r-377359" data-claire-element-id="377359">Il est toutefois bon de savoir qu'il y a à chaque fois <strong>deux</strong> ou <strong>plusieurs</strong> méthodes de création de figures ou d'ouverture d'images, chacune aussi utile que ses collègues.</p><p id="r-377360" data-claire-element-id="377360">Une fois que nous aurons vu en détail tout cela, nous verrons comment enregistrer votre scène de manière à pouvoir épater vos amis ! ;)</p>
</div><a name="Desfiguresgomtriquesennombre"></a><h2>Des figures géométriques en nombre</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">
<span class="arrow"></span>
<span class="next">Formes géométriques et autres</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
<span class="next">Le texte, les images et l&#039;enregistrement de votre scène</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-figures-geometriques-en-nombre" data-claire-element-id="377446">Des figures géométriques en nombre</h4><aside id="r-377362" data-claire-element-id="377362" data-claire-semantic="warning"><p id="r-377361" data-claire-element-id="377361">Je vous conseille de relire le chapitre précédent s'il reste des choses pas claires pour vous : ce chapitre n'a beau rien avoir d'extrêmement difficile (et je m'efforcerai de faire en sorte qu'il soit le plus simple possible pour que tout le monde comprenne sans problème), il vaut mieux quand même avoir acquis les bases.</p></aside><p id="r-377363" data-claire-element-id="377363">Nous allons voir par la suite les différentes méthodes de création de figures géométriques, quelles qu'elles soient, dans l'ordre croissant de difficulté.</p><h5 id="r-les-points-2" data-claire-element-id="377371">Les points</h5><p id="r-377364" data-claire-element-id="377364">Les points sont la base de toutes les figures géométriques. Une ligne est constituée de points, tout comme un triangle, un rectangle et ainsi de suite. Il est donc fort probable que vous ayez un jour à vous en servir dans le cadre d'un projet personnel.<br/> Voyons ensemble les différentes manières de créer un point avec, tout d'abord, la méthode la plus simple soit la création d'un QPoint :</p><pre id="r-377365" data-claire-element-id="377365"><code data-claire-semantic="cpp">QPoint point(10, 10); // Avec ici 10 pour la valeur de x et de y.</code></pre><p id="r-377366" data-claire-element-id="377366">Note : un QPoint ne peut posséder que des valeurs de x et de y étant entières (comme 1, 32, 97...) et non des valeurs de x et de y décimales. Si vous avez besoin d'utiliser des valeurs décimales, servez-vous de QPointF comme par exemple dans le code suivant :</p><pre id="r-377367" data-claire-element-id="377367"><code data-claire-semantic="cpp">QPointF point(10.5, 10.5); // Pensez à mettre un point et non une virgule pour chaque chiffre décimal.</code></pre><p id="r-377368" data-claire-element-id="377368">Un point, n'ayant ni longueur ni largeur, ne se voit pas. De plus, le code que je vous ai donné ne permet pas d'afficher un point mais uniquement d'en créer un. La méthode pour afficher un point (même s'il ne se verrait pas) serait de passer par les QPolygon (ou par les QPolygonF) de la manière suivante :</p><pre id="r-377369" data-claire-element-id="377369"><code data-claire-semantic="cpp">QPolygon point;
point &lt;&lt; QPoint(100, 100);
scene.addPolygon(point); // scene étant notre QGraphicsScene.</code></pre><p id="r-377370" data-claire-element-id="377370">Nous détaillerons cela par la suite avec la création de polygones.</p><h5 id="r-les-lignes-4" data-claire-element-id="377396">Les lignes</h5><p id="r-377372" data-claire-element-id="377372">Pour créer une ligne, nous avons bien plus de possibilités que pour créer un point, et vous n'allez pas tarder à découvrir pourquoi. ;) <br/> En effet, nous pouvons compter un minimum de cinq classes servant toutes à la création de lignes.</p><h6 id="r-qline" data-claire-element-id="377387">QLine</h6><p id="r-377373" data-claire-element-id="377373">QLine, comme QPoint, n'accepte pas les nombres décimaux.<br/> Voici un exemple de code se servant de QLine :</p><pre id="r-377374" data-claire-element-id="377374"><code data-claire-semantic="cpp">QLine ligne(50, 50, 200, 200);
scene.addLine(ligne);</code></pre><p id="r-377375" data-claire-element-id="377375">On peut bien sûr se servir de <code>addLine()</code> et de QPen pour grossir notre ligne. Je vous remets le code d'au-dessus avec une ligne plus épaisse :</p><pre id="r-377376" data-claire-element-id="377376"><code data-claire-semantic="cpp">QPen pen(Qt::blue, 5, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin);
QLine ligne(50, 50, 200, 200);
scene.addLine(ligne, pen);</code></pre><p id="r-377377" data-claire-element-id="377377">Je vous mets deux captures d'écran pour vous montrer le changement. ^^</p><figure id="r-377379" data-claire-element-id="377380"><img id="r-377378" data-claire-element-id="377378" src="medias/uploads.siteduzero.com_files_159001_160000_159841.png" alt="Image utilisateur"/></figure><p id="r-377381" data-claire-element-id="377381"><em>Ligne n'utilisant pas QPen</em></p><figure id="r-377383" data-claire-element-id="377384"><img id="r-377382" data-claire-element-id="377382" src="medias/uploads.siteduzero.com_files_159001_160000_159840.png" alt="Image utilisateur"/></figure><p id="r-377385" data-claire-element-id="377385"><em>Ligne utilisant QPen</em></p><p id="r-377386" data-claire-element-id="377386">Allez savoir qu'est-ce qui est le mieux. :p</p><h6 id="r-qlinef" data-claire-element-id="377389">QLineF</h6><p id="r-377388" data-claire-element-id="377388">QLineF a exactement la même utilité pour créer une ligne que QPointF l'a pour créer un point : ces deux classes gèrent les chiffres décimaux.<br/> À part cela, le mode de création est quasi-identique.</p><h6 id="r-qgraphicslineitem" data-claire-element-id="377392">QGraphicsLineItem</h6><p id="r-377390" data-claire-element-id="377390">C'est encore une autre manière de créer une ligne. Nous ne nous y attarderons pas.<br/> Je vous donne un exemple de création :</p><pre id="r-377391" data-claire-element-id="377391"><code data-claire-semantic="cpp">QGraphicsLineItem ligne(50, 50, 200, 200);</code></pre><h6 id="r-qpolygon-et-qpolygonf" data-claire-element-id="377395">QPolygon et QPolygonF</h6><p id="r-377393" data-claire-element-id="377393">Ces deux classes reviennent un peu partout si vous avez remarqué. Eh bien oui, toutes les figures géométriques sont à la base des polygones.<br/> Un petit bout de code vous montrant comment créer une ligne avec un QPolygon serait le bienvenu, n'est-ce pas ?</p><pre id="r-377394" data-claire-element-id="377394"><code data-claire-semantic="cpp">QPolygon polygon;
polygon &lt;&lt; QPoint(100, 100) &lt;&lt; QPoint(100, 200);
scene.addPolygon(polygon);</code></pre><h5 id="r-les-rectangles-1" data-claire-element-id="377408">Les rectangles</h5><p id="r-377397" data-claire-element-id="377397">Une fois de plus, les possibilités de création de rectangles ne manquent pas.<br/> Nous allons tenter de faire le tour plus ou moins rapidement, en fonction de l'intérêt des classes.</p><p id="r-377398" data-claire-element-id="377398"><strong>Note :</strong> je vais désormais me mettre à traiter fréquemment dans cette fin de chapitre deux classes à la fois car, vous l'ayant déjà répété plusieurs fois, les classes comme QRect et QRectF par exemple sont presque identiques et vous connaissez déjà la différence entre les deux.</p><h6 id="r-qrect-et-qrectf" data-claire-element-id="377403">QRect et QRectF</h6><p id="r-377399" data-claire-element-id="377399">Ces classes incontournables dans le cas de la création de rectangles, à la fois simples et efficaces, sont celles que nous allons voir en premier.<br/> Nous pouvons les utiliser à travers deux méthodes : soit on utilise directement <code>addRect()</code> de QGraphicsScene, soit on crée un QRect puis on l'affiche.</p><pre id="r-377400" data-claire-element-id="377400"><code data-claire-semantic="cpp">scene.addRect(10, 10, 100, 50); // Avec dans l'ordre la valeur de x, de y, de la longueur et de la largeur.</code></pre><p id="r-377401" data-claire-element-id="377401">Cette première méthode, la plus simple, a tout de même un défaut : on ne peut pas récupérer le rectangle pour le modifier, le remettre quelque part ou autre. Je vous recommande donc de passer par la seconde méthode qui est la suivante :</p><pre id="r-377402" data-claire-element-id="377402"><code data-claire-semantic="cpp">QRect rectangle(10, 10, 100, 50);
scene.addRect(rectangle);</code></pre><h6 id="r-qgraphicsrectitem" data-claire-element-id="377405">QGraphicsRectItem</h6><p id="r-377404" data-claire-element-id="377404">Cette classe permet aussi de créer des rectangles mais je ne vous la détaillerai pas ici.</p><h6 id="r-qpolygon-et-qpolygonf-1" data-claire-element-id="377407">QPolygon et QPolygonF</h6><p id="r-377406" data-claire-element-id="377406">Et encore ces classes. ;) <br/> Je ne vous mets pas d'exemple, nous allons enfin voir juste en-dessous ces classes.</p><h5 id="r-un-exemple-de-rectangle-bleu" data-claire-element-id="377412">Un exemple de rectangle bleu</h5><p id="r-377409" data-claire-element-id="377409">Peut-être vous êtes-vous demandé comment faire pour colorer l'intérieur d'un rectangle, non ?<br/> Eh bien voici un exemple pour le colorer en bleu à l'aide de QBrush (nous devons tout de même créer une variable de QPen pour que ça fonctionne) :</p><pre id="r-377410" data-claire-element-id="377410"><code data-claire-semantic="cpp">QRect rectangle(10, 10, 100, 50);
QPen pen(Qt::blue, 1, Qt::SolidLine);
QBrush brush(Qt::blue);
scene.addRect(rectangle, pen, brush);</code></pre><p id="r-377411" data-claire-element-id="377411">Note : nous pouvons faire cela pour presque toutes les figures géométriques.<br/> Je vous invite d'autant plus à aller regarder dans la doc de QBrush comment charger des textures, etc.</p><h5 id="r-des-polygones-excepte-les-ellipses" data-claire-element-id="377428">Des polygones (excepté les ellipses)</h5><p id="r-377413" data-claire-element-id="377413">C'est ici que le choix se fait moins important. Nous avons QGraphicsPolygonItem (que je ne détaillerai pas), QPolygon et QPolygonF.<br/> Le mode de construction que je vous donnais au-dessus correspondait en fait à un système particulièrement pratique et simple d'utilisation. Je vous remets un de ces codes, je vous l'explique puis je vous donne des exemples d'utilisation de QPolygon pour la création de différentes figures, ça vous va ? :o</p><pre id="r-377414" data-claire-element-id="377414"><code data-claire-semantic="cpp">QPolygon polygon;
polygon &lt;&lt; QPoint(100, 100) &lt;&lt; QPoint(100, 200) &lt;&lt; QPoint(200, 200) &lt;&lt; QPoint(200, 100);
scene.addPolygon(polygon);</code></pre><p id="r-377415" data-claire-element-id="377415">Comme certains ont pu le remarquer, le polygone qui sera créé par ce code sera un carré.<br/> Dans l'ordre, voici ce que nous faisons :</p><ol id="r-377422" data-claire-element-id="377422"><li id="r-377417" data-claire-element-id="377417"><p id="r-377416" data-claire-element-id="377416">Nous créons une variable de type QPolygon.</p></li><li id="r-377419" data-claire-element-id="377419"><p id="r-377418" data-claire-element-id="377418">Nous construisons le polygone en lui donnant la position de ses sommets.</p></li><li id="r-377421" data-claire-element-id="377421"><p id="r-377420" data-claire-element-id="377420">Nous ajoutons le polygone à la scène.</p></li></ol><p id="r-377423" data-claire-element-id="377423">Comme promis, voici des exemples.</p><h6 id="r-un-triangle-rectangle-isocele" data-claire-element-id="377425">Un triangle rectangle isocèle</h6><pre id="r-377424" data-claire-element-id="377424"><code data-claire-semantic="cpp">QPolygon polygon;
polygon &lt;&lt; QPoint(100, 100) &lt;&lt; QPoint(100, 200) &lt;&lt; QPoint(200, 200);
scene.addPolygon(polygon);</code></pre><h6 id="r-un-losange" data-claire-element-id="377427">Un losange</h6><pre id="r-377426" data-claire-element-id="377426"><code data-claire-semantic="cpp">QPolygon polygon;
polygon &lt;&lt; QPoint(100, 80) &lt;&lt; QPoint(50, 150) &lt;&lt; QPoint(100, 220) &lt;&lt; QPoint(150, 150);
scene.addPolygon(polygon);</code></pre><h5 id="r-les-ellipses-1" data-claire-element-id="377433">Les ellipses</h5><p id="r-377429" data-claire-element-id="377429">Pour créer une ellipse, nous n'avons que peu de solutions et nous n'allons en voir que deux. Une ellipse peut tout à fait être un ovale ou un cercle, un rectangle peut être un carré. Un cercle est un cas particulier d'ovale, un carré est un cas particulier de rectangle. Vous devez sûrement vous demander pour quelle raison je fais le rapprochement entre une ellipse et un rectangle. Eh bien aussi étrange que cela puisse paraître, nous avons besoin de créer un rectangle pour créer une ellipse.<br/> Voici la première méthode de création d'une ellipse :</p><pre id="r-377430" data-claire-element-id="377430"><code data-claire-semantic="cpp">scene.addEllipse(10, 10, 100, 50);</code></pre><p id="r-377431" data-claire-element-id="377431">Et la seconde :</p><pre id="r-377432" data-claire-element-id="377432"><code data-claire-semantic="cpp">QRect rectangle(10, 10, 100, 50);
scene.addEllipse(rectangle);</code></pre><h5 id="r-des-exercices-d-entrainement" data-claire-element-id="377445">Des exercices d'entraînement</h5><p id="r-377434" data-claire-element-id="377434">Maintenant que nous avons vu tout cela, vous devez pouvoir être capable de vous exercer à la création de figures géométriques. Comme le dit le proverbe, &quot;c'est en forgeant qu'on devient forgeron&quot; : plus vous pratiquerez, plus vous aurez de connaissances et mieux vous maîtriserez le sujet.</p><p id="r-377435" data-claire-element-id="377435">Je vous donne une petite liste d'exercices non corrigés que vous pouvez facilement suivre à votre niveau :</p><ul id="r-377444" data-claire-element-id="377444"><li id="r-377437" data-claire-element-id="377437"><p id="r-377436" data-claire-element-id="377436">Écrivez votre nom uniquement à l'aide de QPolygon dans une scène.</p></li><li id="r-377439" data-claire-element-id="377439"><p id="r-377438" data-claire-element-id="377438">Créez plusieurs formes géométriques diverses et variées.</p></li><li id="r-377441" data-claire-element-id="377441"><p id="r-377440" data-claire-element-id="377440">Concevez une carte au trésor (utilisez QPen en plus de figures géométriques).</p></li><li id="r-377443" data-claire-element-id="377443"><p id="r-377442" data-claire-element-id="377442">Faîtes une mini rosace avec des ellipse et d'autres formes (n'hésitez pas à consulter la documentation en cas de soucis).</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">
<span class="arrow"></span>
<span class="next">Formes géométriques et autres</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
<span class="next">Le texte, les images et l&#039;enregistrement de votre scène</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Letextelesimagesetl039enregistrementdevotrescne"></a><h2>Le texte, les images et l&#039;enregistrement de votre scène</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
<span class="arrow"></span>
<span class="next">Des figures géométriques en nombre</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">
<span class="next">QGraphicsItem et autres histoires...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-texte-les-images-et-l-enregistrement-de-votre-scene" data-claire-element-id="377501">Le texte, les images et l'enregistrement de votre scène</h4><h5 id="r-le-texte-courte-mise-au-courant" data-claire-element-id="377448">Le texte - Courte mise au courant</h5><p id="r-377447" data-claire-element-id="377447">Lors de la réalisation de votre toute première scène, vous avez utilisé une des méthodes d'affichage de texte avec <code>addText()</code>. Or, il existe d'autres solutions : nous pouvons passer par un QString, par la classe QGraphicsTextItem ou encore par QGraphicsSimpleTextItem.<br/> Prouvez une fois de plus que la documentation sert à quelque chose et allez vous renseigner de ce pas. :p</p><h5 id="r-les-images-13" data-claire-element-id="377454">Les images</h5><p id="r-377449" data-claire-element-id="377449">Par chance pour nous, il est possible de charger des images (bien que nous puissions faire d'innombrables autres choses avec ce que je vais vous donner en fin de phrase) dans nos scènes à l'aide de <code>addPixmap()</code>.</p><p id="r-377450" data-claire-element-id="377450">Voici une des manières de chargement d'image :</p><pre id="r-377451" data-claire-element-id="377451"><code data-claire-semantic="cpp">scene.addPixmap(QPixmap(&quot;image.png&quot;));</code></pre><p id="r-377452" data-claire-element-id="377452">Cette manière de procéder montre aussi des défauts : on ne peut pas récupérer le pixmap, le modifier, etc.<br/> Je vous conseille donc de créer une variable de type QPixmap et de l'ajouter à la scène. Voici la méthode :</p><pre id="r-377453" data-claire-element-id="377453"><code data-claire-semantic="cpp">QPixmap monPixmap(&quot;image.png&quot;);
scene.addPixmap(monPixmap);</code></pre><h5 id="r-enregistrer-une-scene" data-claire-element-id="377500">Enregistrer une scène</h5><p id="r-377455" data-claire-element-id="377455">Comme nous avons déjà vu pas mal de choses, on peut facilement s'attendre à ce que vous ayez déjà fait une superbe scène que vous aimeriez assez montrer à vos proches.</p><div id="r-377457" data-claire-element-id="377457" data-claire-semantic="question"><p id="r-377456" data-claire-element-id="377456">Hep là, pas si vite ! Qu'entends-tu par &quot;enregistrer&quot; une scène ?<br/> Est-ce enregistrer notre scène pour pouvoir l'ouvrir plus tard ?</p></div><p id="r-377458" data-claire-element-id="377458">Non ce n'est pas tellement ça mais ce n'est pas entièrement faux. Quand je vous dis enregistrer une scène, c'est l'enregistrer sous le format d'une image. Ce n'est donc pas entièrement faux dans le sens où l'on peut toujours charger la scène enregistrée plus tôt à l'aide de <code>addPixmap()</code> que nous avons vu au-dessus.</p><p id="r-377459" data-claire-element-id="377459">Si vous voulez avoir le même résultat que moi, je vous conseille tout d'abord de télécharger cette image :</p><table id="r-377465" data-claire-element-id="377465"><tbody id="r-377464" data-claire-element-id="377464"><tr id="r-377463" data-claire-element-id="377463"><td id="r-377461" data-claire-element-id="377462"><img id="r-377462" data-claire-element-id="377461" src="medias/uploads.siteduzero.com_files_152001_153000_152871.png" alt="Image utilisateur"/><img id="r-377460" data-claire-element-id="377460" src="medias/uploads.siteduzero.com_files_152001_153000_152871.png" alt="Image utilisateur"/></td></tr></tbody></table><p id="r-377466" data-claire-element-id="377466">Voici un code incorrect pour effectuer l'enregistrement :</p><pre id="r-377467" data-claire-element-id="377467"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QtGui&gt;
 
int main(int argc, char *argv[])
{
        QApplication app(argc, argv);

        QGraphicsScene scene;

        QPixmap monPixmap(&quot;Note.png&quot;);
        scene.addPixmap(monPixmap);
        scene.addRect(-8, -4, 100, 100);
        QGraphicsView vue(&amp;scene);
        vue.show();

        return app.exec();
}</code></pre><p id="r-377468" data-claire-element-id="377468">J'attire votre attention sur la ligne surlignée : eh oui, le négatif, ça existe. :-°</p><div id="r-377470" data-claire-element-id="377470" data-claire-semantic="question"><p id="r-377469" data-claire-element-id="377469">Bon, ce n'est pas tout ça mais, pourquoi ce code est-il incorrect pour le cas de l'enregistrement ?</p></div><p id="r-377471" data-claire-element-id="377471">Eh bien il est incorrect car si vous enregistrez votre scène, comment le programme peut-il choisir la couleur de fond de votre scène ?<br/> De plus, les dimensions de la scène ne sont pas spécifiées, comment voulez-vous qu'il devine ses dimensions ? (On peut corriger ça sans avoir besoin de fixer les dimensions, je vous expliquerai après.)<br/> À part cela, le code est correct.</p><aside id="r-377473" data-claire-element-id="377473" data-claire-semantic="information"><p id="r-377472" data-claire-element-id="377472">Pour mettre une couleur de fond, il n'est pas nécessaire de passer par les feuilles de style, pour ceux qui connaissent. En effet, les programmeurs ont tout prévu et ont conçu <em>setBackgroundBrush()</em>. Il est vivement conseillé de faire un saut dans la doc pour vous renseigner. Je vous donne juste un indice : <code>setBackgroundBrush()</code> pourrait s'appliquer sur notre variable vue.<br/> Pour les dimensions fixes, soit on y remédiera plus tard, soit on fixe les dimensions. J'ai préféré la seconde solution avec les dimensions 250x250px.</p></aside><p id="r-377474" data-claire-element-id="377474">Je vous invite donc à corriger le code ci-dessus vous-même (recommandé).<br/> Mais je vous donne tout de même une correction :</p><pre id="r-377475" data-claire-element-id="377475"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QtGui&gt;
 
int main(int argc, char *argv[])
{
        QApplication app(argc, argv);

        QGraphicsScene scene;

        QPixmap monPixmap(&quot;Note.png&quot;);
        scene.addPixmap(monPixmap);

        QRect rectangle(-8, -4, 100, 100);
        QPen pen(Qt::blue, 1, Qt::SolidLine);
        scene.addRect(rectangle, pen);
        scene.setBackgroundBrush(Qt::white);

        QGraphicsView vue(&amp;scene);
        vue.setFixedSize(250, 250);
        vue.show();

        return app.exec();
}</code></pre><p id="r-377476" data-claire-element-id="377476">J'ai surligné ce dont je vous ai parlé tout à l'heure.<br/> Si tout va bien, vous devez avoir à l'écran quelque chose comme ceci :</p><figure id="r-377478" data-claire-element-id="377479"><img id="r-377477" data-claire-element-id="377477" src="medias/uploads.siteduzero.com_files_152001_153000_152870.png" alt="Image utilisateur"/></figure><p id="r-377480" data-claire-element-id="377480">Nous pouvons donc passer à la sauvegarde.<br/> Pour cela, nous devons créer un QPixmap, un autre oui, ainsi qu'un QPainter, et ce de la manière suivante :</p><pre id="r-377481" data-claire-element-id="377481"><code data-claire-semantic="cpp">QPixmap pixmap(vue.width(), vue.height());
QPainter painter(&amp;pixmap);</code></pre><p id="r-377482" data-claire-element-id="377482">Vous devez déjà avoir cerné deux choses là :</p><ul id="r-377487" data-claire-element-id="377487"><li id="r-377484" data-claire-element-id="377484"><p id="r-377483" data-claire-element-id="377483">C'est le QGraphicsView qui va être enregistré : vue.width().</p></li><li id="r-377486" data-claire-element-id="377486"><p id="r-377485" data-claire-element-id="377485">Comme on se sert de width() et de height(), vous pouvez comprendre qu'il n'était pas particulièrement nécessaire de mettre des dimensions fixes à notre QGraphicsView.</p></li></ul><p id="r-377488" data-claire-element-id="377488">On passe à la suite :</p><pre id="r-377489" data-claire-element-id="377489"><code data-claire-semantic="cpp">painter.setRenderHint(QPainter::Antialiasing);
vue.render(&amp;painter);</code></pre><p id="r-377490" data-claire-element-id="377490">painter.setRenderHint(QPainter::Antialiasing);<br/> On met ici le type de qualité du rendu que l'on va faire. Nous ne manquerons pas à l'habitude en se servant de QPainter::Antialiasing qui est très utilisé.</p><p id="r-377491" data-claire-element-id="377491">vue.render(&amp;painter);<br/> Et là, c'est <code>render()</code> que nous utilisons. Il s'agit d'une fonction de QGraphicsView qui sert à capturer le contenu de la vue, dans le cas actuel évidemment. ;)</p><p id="r-377492" data-claire-element-id="377492">Il ne reste plus que la sauvegarde. Nous n'aurons pas besoin de quoi que ce soit de plus que <code>save()</code> de QPixmap qui va, comme son nom l'indique, sauvegarder le pixmap.<br/> Voici le code complet de la sauvegarde de la scène :</p><pre id="r-377493" data-claire-element-id="377493"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QtGui&gt;
 
int main(int argc, char *argv[])
{
        QApplication app(argc, argv);

        QGraphicsScene scene;

        QPixmap monPixmap(&quot;Note.png&quot;);
        scene.addPixmap(monPixmap);

        QRect rectangle(-8, -4, 100, 100);
        QPen pen(Qt::blue, 1, Qt::SolidLine);
        scene.addRect(rectangle, pen);
        scene.setBackgroundBrush(Qt::white);

        QGraphicsView vue(&amp;scene);
        vue.setFixedSize(250, 250);
        vue.show();

        QPixmap pixmap(vue.width(), vue.height());

        QPainter painter(&amp;pixmap);
        painter.setRenderHint(QPainter::Antialiasing);
        vue.render(&amp;painter);

        pixmap.save(&quot;image.png&quot;);

        painter.end();

        return app.exec();
}</code></pre><p id="r-377494" data-claire-element-id="377494">A priori, vous devriez voir un fichier nommé <em>image.png</em> apparaître à côté de votre programme une fois que vous aurez lancé celui-ci.<br/> Cette image devrait ressembler à cela :</p><figure id="r-377496" data-claire-element-id="377497"><img id="r-377495" data-claire-element-id="377495" src="medias/uploads.siteduzero.com_files_152001_153000_152869.png" alt="Image utilisateur"/></figure><p id="r-377498" data-claire-element-id="377498">Voilà, ce chapitre est terminé.<br/> Je vous recommande de vous entraîner et, qui sait, vous ferez peut-être de si jolies choses que vous ferez saliver vos amis. :lol:</p><p id="r-377499" data-claire-element-id="377499">Allez, bon codage et à plus tard avec un joli petit TP !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
<span class="arrow"></span>
<span class="next">Des figures géométriques en nombre</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">
<span class="next">QGraphicsItem et autres histoires...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="QGraphicsItemetautreshistoires..."></a><h2>QGraphicsItem et autres histoires...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
<span class="arrow"></span>
<span class="next">Le texte, les images et l&#039;enregistrement de votre scène</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
<span class="next">Notions supplémentaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-377503" data-claire-element-id="377503">Nous entrons maintenant dans la dernière ligne droite avant le premier TP !<br/> Ce chapitre est très important pour comprendre l'intérêt d'utiliser Qt pour de la 2D et non forcément inclure par exemple la SDL dans vos projets...</p><p id="r-377504" data-claire-element-id="377504">Je compte sur vous pour bien faire attention à ce que vous allez lire. ;)</p><aside id="r-377506" data-claire-element-id="377506" data-claire-semantic="information"><p id="r-377505" data-claire-element-id="377505">Il n'y aura pas de QCM à la fin de ce chapitre car je ne pense pas que ce soit nécessaire.<br/> Lire attentivement devrait être suffisant...</p></aside>
</div><a name="Notionssupplmentaires"></a><h2>Notions supplémentaires</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">
<span class="arrow"></span>
<span class="next">QGraphicsItem et autres histoires...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
<span class="next">Les GraphicsItem</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-notions-supplementaires" data-claire-element-id="377526">Notions supplémentaires</h4><p id="r-377507" data-claire-element-id="377507">Il est possible que vous ayez été confronté à une ou plusieurs difficulté(s) durant les exercices non corrigés que je vous ai donnés précédemment. Dans le cas précis, je parle de placement et autres de vos figures dans votre scène (à peu près tout ce qui touche les coordonnées et les dimensions de vos figures géométriques).</p><p id="r-377508" data-claire-element-id="377508">Cette partie de chapitre a pour objectif de vous préparer rapidement pour pouvoir observer le fonctionnement des QGraphicsItem en tous genres, ne la négligez donc pas !</p><h5 id="r-les-rectangles-et-les-ellipses-comment-ca-fonctionne" data-claire-element-id="377518">Les rectangles et les ellipses, comment ça fonctionne ?</h5><p id="r-377509" data-claire-element-id="377509">Voici une très bonne question ! En fait, les rectangles et les ellipses fonctionnent à peu près de la même manière, nous avons donc la possibilité de traiter les deux à la fois. Nous allons donc étudier ceci à l'aide de la classe QRect qui me semble être appropriée (du moins, s'il est possible et même certain que je ne vous donne pas un code à étudier mais un schéma, pensez à QRect : cette classe sera la base des schémas que je vous donnerai dans cette partie de sous-partie :p )</p><p id="r-377510" data-claire-element-id="377510">Admettons que l'un de nos programmes nécessite la création d'un rectangle et d'une ellipse à des coordonnées précises. Pour pouvoir créer ce rectangle et cette ellipse, nous allons avoir a regarder de ce schéma :</p><figure id="r-377512" data-claire-element-id="377513"><img id="r-377511" data-claire-element-id="377511" src="medias/uploads.siteduzero.com_files_168001_169000_168482.png" alt="Image utilisateur"/></figure><p id="r-377514" data-claire-element-id="377514">Comme vous pouvez le voir, nous avons un rectangle (un carré plus précisément mais ce détail ne nous intéresse pas) avec dedans une ellipse (un cercle mais ce détail est expliqué à la suite) et en haut à gauche de cette figure, nous avons le point aux coordonnées (0; 0). Cette dernière chose représente les coordonnées de la scène où se trouveraient nos deux figures.<br/> Tout d'abord, étudions la création du rectangle. Je vous rappelle à tout hasard que la création s'effectue en donnant les coordonnées d'un point puis une longueur et une largeur. Ce point est le gros point rouge aux coordonnée 0, 0. C'est le point duquel partent la longueur et la largeur du rectangle, représentées par les flèches bleues. Or, une fois que nous avons une longueur et une largeur d'un rectangle, nous avons de quoi tracer le rectangle, c'est donc suffisant.</p><aside id="r-377516" data-claire-element-id="377516" data-claire-semantic="information"><p id="r-377515" data-claire-element-id="377515"><strong>Récapitulatif :</strong> la création d'un rectangle se fait à l'aide des coordonnées du sommet en haut à gauche (sans prendre en compte de rotation ou autre) du rectangle, ainsi que des mesures de la longueur et de la largeur qui partent de ce sommet.</p></aside><p id="r-377517" data-claire-element-id="377517">Passons maintenant à l'étape suivante : l'ellipse.<br/> Tout comme le rectangle, nous avons besoin de la position d'un point pour pouvoir créer une ellipse. C'est assez logique car le mode de création est le même (le point de départ est la même classe), à un point prêt : nous nous servons d'addEllipse() et non d'addRect().<br/> Mais ce point, quel est-il ? Et bien ce point est le même que le sommet du rectangle ont nous avons parlé plus tôt, tout simplement. On peut donc dire que les deux figures partent du même point...<br/> Pour ce qui est de la longueur et de la largeur, c'est pareil qu'au-dessus.</p><h5 id="r-qu-en-est-il-des-lignes-et-des-polygones" data-claire-element-id="377525">Qu'en est-il des lignes et des polygones ?</h5><p id="r-377519" data-claire-element-id="377519">Et voici un schéma :</p><figure id="r-377521" data-claire-element-id="377522"><img id="r-377520" data-claire-element-id="377520" src="medias/uploads.siteduzero.com_files_168001_169000_168484.png" alt="Image utilisateur"/></figure><p id="r-377523" data-claire-element-id="377523">Nous avons sur ce schéma deux points rouges légendés. Lors de la création d'un QLine (ne prenez pas ici pour base QRect : nous avons changé de partie de sous-partie de chapitre), nous avons tout d'abord à définir les coordonnées du point 1 puis celles du point 2. A partir de ces deux coordonnées, nous obtenons une ligne. C'est pour cela que je l'ai mise en pointillés : car nous ne donnons pas de dimensions précises à notre ligne, mis à part les coordonnées des extrémités.</p><p id="r-377524" data-claire-element-id="377524">Je ne vais pas faire l'affront de vous remettre le même schéma pour QPolygon étant donné que le principe de création est exactement le même puisqu'on ne fait que définir des points.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">
<span class="arrow"></span>
<span class="next">QGraphicsItem et autres histoires...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
<span class="next">Les GraphicsItem</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesGraphicsItem"></a><h2>Les GraphicsItem</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
<span class="arrow"></span>
<span class="next">Notions supplémentaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">
<span class="next">TP : Création d&#039;un réveil</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-graphicsitem" data-claire-element-id="377581">Les GraphicsItem</h4><p id="r-377527" data-claire-element-id="377527">QGraphcisItem est un des éléments majeurs de la 2D avec Qt. Il peut servir à un bon nombre de choses une fois associé à la classe QGraphicsScene.</p><h5 id="r-definir-un-qgraphicsitem" data-claire-element-id="377547">Définir un QGraphicsItem</h5><p id="r-377528" data-claire-element-id="377528">Le principe de définition d'un QGraphicsItem est relativement simple, tout comme la définition d'objets appartenant à d'autres classes.<br/> En admettant avoir créé les variables <em>scene</em> et <em>rectangle</em> respectivement de type QGraphicsScene, un code courant serait celui-ci :</p><pre id="r-377529" data-claire-element-id="377529"><code data-claire-semantic="cpp">QGraphicsItem *item;
item = scene.addRect(rectangle);</code></pre><p id="r-377530" data-claire-element-id="377530">Il est fort possible que certains se demandent pourquoi j'ai introduit la fonction <a href="http://doc.trolltech.com/4.5/qgraphicsscene.html#addRect">addRect()</a> ici mais peut-être aussi quel est le rapport entre les classes QGraphicsScene et QGraphicsItem, mis à part le préfixe QGraphics.<br/> Regardons ensemble un des prototypes de la fonction en question :</p><p id="r-377531" data-claire-element-id="377531"><cite>Citation : Prototype de la fonction</cite></p><blockquote id="r-377533" data-claire-element-id="377533"><p id="r-377532" data-claire-element-id="377532">QGraphicsRectItem * QGraphicsScene::addRect ( ... )</p></blockquote><p id="r-377534" data-claire-element-id="377534">Nos connaissances sur la fonction et ce prototype, coupé volontairement aux informations qui nous intéressent, montrent qu'elle ajoute un rectangle dans un élément de QGraphicsScene (donc dans <em>scene</em> pour nous) et retourne un pointeur de type QGraphicsRectItem. Voici un petit arbre montrant la hiérarchie de cette classe et de ses principales classes sœurs par rapport à QGraphicsItem dont ils héritent :</p><figure id="r-377536" data-claire-element-id="377537"><img id="r-377535" data-claire-element-id="377535" src="medias/uploads.siteduzero.com_files_168001_169000_168504.png" alt="Image utilisateur"/></figure><p id="r-377538" data-claire-element-id="377538">Le code ci-dessus est donc l'équivalent de celui-ci :</p><pre id="r-377539" data-claire-element-id="377539"><code data-claire-semantic="cpp">QGraphicsRectItem *item;
item = scene.addRect(rectangle);</code></pre><p id="r-377540" data-claire-element-id="377540">Par contre, on ne pourra pas utiliser d'autres classes héritant de QGraphicsItem pour effectuer cette opération.</p><p id="r-377541" data-claire-element-id="377541">Une autre façon de définir un QGraphicsItem dans une scène est de le créer et de l'afficher de la manière suivante :</p><pre id="r-377542" data-claire-element-id="377542"><code data-claire-semantic="cpp">QGraphicsLineItem *ligne = new QGraphicsLineItem(0, 0, 230, 230);
scene.addItem(ligne);</code></pre><aside id="r-377544" data-claire-element-id="377544" data-claire-semantic="information"><p id="r-377543" data-claire-element-id="377543">Comme avec QGraphicsItem, nous pouvons récupérer l'objet retourné par addRect(), addPixmap(), addLine(), etc... et ce sans avoir besoin de changer le type du pointeur en étant contraint d'en créer un autre, nous allons nous servir uniquement de cette classe à partir de maintenant dans le chapitre.</p></aside><p id="r-377545" data-claire-element-id="377545">Les utilités de récupérer un pointeur, après exécution de l'une de ces fonctions, sont en fait de pouvoir le supprimer (ce qui retirera de la scène la forme quelconque associée au pointeur), de déplacer par son intermédiaire l'objet graphique sur lequel il pointe, le modifier, recevoir des évènements en fonction des actions de l'utilisateur, et bien d'autres choses encore ! Cela peut d'avérer très utile dans le cas où vous réaliseriez un logiciel du type Paint pour l'historique des actions ayant été effectuées et donc pour permettre pleins de choses supplémentaires.</p><p id="r-377546" data-claire-element-id="377546">Ah oui, j'oubliais, QGraphicsItem détient une fonction, setZValue(), qui permet de régler les problèmes de superposition d'éléments graphiques. Nous verrons cela dans ce chapitre.</p><h5 id="r-le-positionnement-1" data-claire-element-id="377561">Le positionnement</h5><p id="r-377548" data-claire-element-id="377548">A partir de maintenant, nous allons prendre pour base le code suivant :</p><pre id="r-377549" data-claire-element-id="377549"><code data-claire-semantic="cpp">#include &lt;QApplication&gt;
#include &lt;QtGui&gt;
 
int main(int argc, char *argv[])
{
	QApplication app(argc, argv);

	QGraphicsScene scene;
	QGraphicsItem *item;
	QPixmap image;

	image.load(&quot;Note.png&quot;, 0, Qt::AutoColor);
	item = scene.addPixmap(image);

	QGraphicsView vue(&amp;scene);
	vue.setFixedSize(250, 250);
	vue.setWindowTitle(&quot;J'utilise QGraphicsItem !&quot;);
	vue.show();

	return app.exec();
}</code></pre><p id="r-377550" data-claire-element-id="377550">Ce code n'a rien d'extraordinaire, on ne fait que des opérations courantes, peut être que ce type d'assignement d'image à une variable de type QPixmap vous échappait jusqu'à maintenant, mais j'en doute...<br/> En tant que widget de haut niveau, <em>vue</em> dispose ici de setFixedSize(), utilisé pour que vous puissiez voir la progression au fil de votre avancée dans le chapitre, et de setWindowTitle() pour faire joli. ^^</p><p id="r-377551" data-claire-element-id="377551">Pour le moment, le résultat est le suivant (cliquez pour agrandir !) :</p><p id="r-377552" data-claire-element-id="377553"><a href="medias/uploads.siteduzero.com_files_168001_169000_168522.png"><img id="r-377553" data-claire-element-id="377552" src="medias/uploads.siteduzero.com_thb_168001_169000_168522.png" alt="Image utilisateur"/></a></p><p id="r-377554" data-claire-element-id="377554">Nous pouvons maintenant commencer !<br/> Le positionnement d'un élément graphique est toujours important quand on souhaite éviter un entassement de plusieurs éléments au même emplacement de la scène, puisque par défaut, toutes les figures ou autres ajoutées à la scène sont placées aux coordonnées (0;0). La fonction <a href="http://doc.trolltech.com/4.5/qgraphicsitem.html#setPos">setPos()</a> permet de placer n'importe quel objet de QGraphicsItem (ainsi que les objets de ses sous-classes) à l'emplacement d'un QPointF ou des valeurs de x et de y.</p><pre id="r-377555" data-claire-element-id="377555"><code data-claire-semantic="cpp">item-&gt;setPos(50, 50);</code></pre><p id="r-377556" data-claire-element-id="377556">Ce qui donne ça (cliquez pour agrandir !) :</p><p id="r-377557" data-claire-element-id="377558"><a href="medias/uploads.siteduzero.com_files_168001_169000_168524.png"><img id="r-377558" data-claire-element-id="377557" src="medias/uploads.siteduzero.com_thb_168001_169000_168524.png" alt="Image utilisateur"/></a></p><aside id="r-377560" data-claire-element-id="377560" data-claire-semantic="information"><p id="r-377559" data-claire-element-id="377559"><strong>Note :</strong> Il est possible de retrouver les coordonnées d'un élément à l'aide des fonctions <a href="http://doc.trolltech.com/4.5/qgraphicsitem.html#x">x()</a> et <a href="http://doc.trolltech.com/4.5/qgraphicsitem.html#y">y()</a> en écrivant par exemple : &quot;<code data-claire-semantic="cpp">int x = item-&gt;x(); </code>&quot;. Il est aussi possible de tout récupérer à l'aide de <a href="http://doc.trolltech.com/4.5/qgraphicsitem.html#pos">pos()</a> comme ici : &quot;<code data-claire-semantic="cpp">QPointF point(item-&gt;pos()); </code>&quot;.</p></aside><h5 id="r-la-suppression-1" data-claire-element-id="377565">La suppression</h5><p id="r-377562" data-claire-element-id="377562">Il est presque certain que vous aurez besoin de supprimer à un moment ou à un autre un QGraphicsItem d'une scène. La méthode la moins brutale est de passer par la fonction <a href="http://doc.trolltech.com/4.5/qgraphicsscene.html#removeItem">removeItem()</a> de QGraphicsScene de la manière suivante :</p><pre id="r-377563" data-claire-element-id="377563"><code data-claire-semantic="cpp">scene.removeItem(item);</code></pre><p id="r-377564" data-claire-element-id="377564">Notez que le pointeur n'est pas détruit : la fenêtre affichera votre image si vous refaites &quot;<code data-claire-semantic="cpp">item = scene.addPixmap(image); </code>&quot; !<br/> C'est d'ailleurs pour cette raison qu'il faut passer par &quot;<code data-claire-semantic="cpp">delete item; </code>&quot; pour éviter une fuite de mémoire.</p><h5 id="r-la-z-value" data-claire-element-id="377572">La Z-Value</h5><p id="r-377566" data-claire-element-id="377566">La Z-Value, aussi appelée z-index, permet de définir l'élévation des objets de QGraphicsItem afin d'éviter des problèmes de superposition très peu prévisibles. Par défaut, la Z-Value est définie à 0 (ce qui pose donc un problème car il faut bien choisir quel sera l'élément situé au-dessus de l'autre dans le cas où ils seraient disposés au même endroit). Pour modifier cette valeur, nous utilisons la fonction <a href="http://doc.trolltech.com/4.5/qgraphicsitem.html#setZValue">setZValue()</a> de la manière suivante :</p><pre id="r-377567" data-claire-element-id="377567"><code data-claire-semantic="cpp">item-&gt;setZValue(5);</code></pre><aside id="r-377570" data-claire-element-id="377570" data-claire-semantic="information"><p id="r-377568" data-claire-element-id="377568"><strong>Note :</strong> Comme le paramètre de la fonction est un réel et qu'un réel peut très bien être négatif, il est possible de faire ceci :</p><pre id="r-377569" data-claire-element-id="377569"><code data-claire-semantic="cpp">item-&gt;setZValue(-4);</code></pre></aside><p id="r-377571" data-claire-element-id="377571">Cette propriété nous servira dans le chapitre suivant.</p><h5 id="r-la-rotation-8" data-claire-element-id="377580">La rotation</h5><p id="r-377573" data-claire-element-id="377573">Tout d'abord, je vous conseille de garder en tête que la fonction <a href="http://doc.trolltech.com/4.5/qgraphicsitem.html#rotate">rotate()</a> existe, vous en aurez besoin si vous passez au chapitre suivant.<br/> La fonction permet donc de faire roter un élément graphique sur le point sur lequel il est basé de x degrés avec x étant un réel (donc possibilité de faire une rotation avec une valeur d'angle négative). Utiliser setPos() dans un cas comme celui-ci s'avèrerait donc être une judicieuse idée ! ;)</p><pre id="r-377574" data-claire-element-id="377574"><code data-claire-semantic="cpp">item-&gt;rotate(90);</code></pre><p id="r-377575" data-claire-element-id="377575">Et le résultat (cliquez pour agrandir !) :</p><p id="r-377576" data-claire-element-id="377577"><a href="medias/uploads.siteduzero.com_files_168001_169000_168528.png"><img id="r-377577" data-claire-element-id="377576" src="medias/uploads.siteduzero.com_thb_168001_169000_168528.png" alt="Image utilisateur"/></a></p><p id="r-377578" data-claire-element-id="377578">Voilà, c'est tout pour le moment !<br/> Si vous en voulez plus, je vous conseille de faire un tour dans la documentation de <a href="http://doc.trolltech.com/4.5/qgraphicsitem.html">QGraphicsItem</a>...</p><p id="r-377579" data-claire-element-id="377579">Prochain chapitre, le premier TP de la partie sur la 2D !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
<span class="arrow"></span>
<span class="next">Notions supplémentaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">
<span class="next">TP : Création d&#039;un réveil</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPCrationd039unrveil"></a><h2>TP : Création d&#039;un réveil</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
<span class="arrow"></span>
<span class="next">Les GraphicsItem</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
<span class="next">Préparatifs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-377583" data-claire-element-id="377583">Nous voici maintenant dans le premier TP de la partie sur la 2D avec Qt.<br/> Je préviens à tout hasard que le résultat pourra servir aux habitués des retard au bureau/en cours !</p><aside id="r-377585" data-claire-element-id="377585" data-claire-semantic="warning"><p id="r-377584" data-claire-element-id="377584">Autant qu'on se le dise tout de suite : si vous ne désactivez pas la veille prolongée de votre ordinateur, bien que vous puissiez vous fier au fruit de votre codage, vous risquez de vous réveiller un peu tard donc en prévision des MP pimentés comme quoi ça ne &quot;marcherait pas&quot;, et bien je vous mets au courant dès le début ! Ah, j'oubliais, un réveil, ça sonne mais le son n'est perceptible si le volume de votre ordinateur est différent de zéro... :p</p></aside><p id="r-377586" data-claire-element-id="377586">Maintenant que j'ai pris mes précautions cela a été dit, nous pouvons commencer le TP qui s'organisera sur trois parties :</p><ul id="r-377593" data-claire-element-id="377593"><li id="r-377588" data-claire-element-id="377588"><p id="r-377587" data-claire-element-id="377587">Préparatifs ;</p></li><li id="r-377590" data-claire-element-id="377590"><p id="r-377589" data-claire-element-id="377589">Correction ;</p></li><li id="r-377592" data-claire-element-id="377592"><p id="r-377591" data-claire-element-id="377591">Idées d'amélioration.</p></li></ul><p id="r-377594" data-claire-element-id="377594">Commençons dès maintenant avec les préparatifs !</p>
</div><a name="Prparatifs"></a><h2>Préparatifs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">
<span class="arrow"></span>
<span class="next">TP : Création d&#039;un réveil</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-preparatifs-4" data-claire-element-id="377623">Préparatifs</h4><p id="r-377595" data-claire-element-id="377595">Notre commanditaire est une riche jeune fille célibataire de 19 ans personne désirant vous embaucher pour lui réaliser un réveil qui lui servira tous les jours. Voici sa commande :</p><p id="r-377596" data-claire-element-id="377596"><cite>Citation : Notre commanditaire</cite></p><blockquote id="r-377601" data-claire-element-id="377601"><p id="r-377597" data-claire-element-id="377597">Bonjour,</p><p id="r-377598" data-claire-element-id="377598">Je m'adresse à vous en tant qu'employeur qui vous embauchera, si vous l'acceptez, en contrat à durée déterminée (le temps que vous ayez fini de concevoir ce dont j'ai besoin) pour un total de 200 styllards fournis à l'expiration du contrat. Pour être franche avec vous, je suis relativement souvent en retard. Le temps que je m'habille, que je me frise les cheveux, que je me poudre le visage, que je me vernisse les ongles, [..], et bien j'ai déjà une heure et demie de retard. Je vous vois déjà en train de me dire de me lever plus tôt ! Et bien je n'aime pas le &quot;drrriiiiiiinnnng&quot; strident de mon réveil qui me met en rogne le matin quand il sonne avant 5h. Comme je me suis acheté un magnifique ordinateur portable digne de ma beauté personnelle (qui reste allumé en permanence, sa fonction de chaine Hifi étant excellente), et bien je me suis dit que ce serait bien de lire un son provenant de ce bel objet et non de cet immonde réveil sorti des latrines de mon voisin. J'ai récemment eu vent que vous êtes en train d'approfondir vos connaissances avec &quot;Qt&quot;. Peu importe ce que c'est, réalisez le réveil avec, si cela le permet.</p><p id="r-377599" data-claire-element-id="377599">Dans mon réveil, je voudrais avoir plusieurs options : voir l'heure de mon ordinateur (qui s'actualisera toutes les secondes), pouvoir modifier l'heure prévue de la sonnerie rapidement (sans passer par un menu-qui-me-fera-perdre-mon-temps), voir les infos du son que j'ai mis (je ne changerai pas forcément le nom du son donc play.wav, ça ira très bien) comme le nom du son, l'heure où il se jouera, juste pour le plaisir d'avoir quelque chose dans un menu, autre que l'éternel &quot;Quitter&quot; ou le &quot;A propos&quot; qui infeste les programmes. Ah, j'y pense, il ne faut pas que le réveil se dérègle dans le cas où je rabattrais mon écran. Une dernière demande : pouvez-vous créer une horloge animée pour faire joli ?</p><p id="r-377600" data-claire-element-id="377600">Je vous remercie d'avance,<br/> Laura de Latour.</p></blockquote><p id="r-377602" data-claire-element-id="377602">Comme vous l'avez compris dans cette longue commande, nous allons réaliser un réveil avec Qt (et ne me demandez pas ce que représente 200 styllards, je n'en sais rien :p ). Je vous vois déjà me demander le rapport entre un réveil et la 2D : c'est la pendule qui se trouvera dans la fenêtre principale (Laura en demande une). Elle sera créée entièrement avec les outils qu'on a vus, pas question de se servir d'un widget tout fait comme on en voit dans Qt Designer et ailleurs.</p><aside id="r-377604" data-claire-element-id="377604" data-claire-semantic="information"><p id="r-377603" data-claire-element-id="377603">Je sais que des exemples tels que <a href="http://doc.trolltech.com/4.5/widgets-analogclock.html">celui-ci</a> se trouvent dans la documentation.<br/> Comme ils utilisent QPainter, et bien ce ne sera pas en rapport avec le sujet (qui peut donc être proposé en TP)...</p></aside><p id="r-377605" data-claire-element-id="377605">Comme une image s'avère ici être bien plus instructive que des masses d'explications, voici une capture d'écran du programme terminé :</p><figure id="r-377607" data-claire-element-id="377608"><img id="r-377606" data-claire-element-id="377606" src="medias/uploads.siteduzero.com_files_170001_171000_170408.png" alt="Image utilisateur"/></figure><p id="r-377609" data-claire-element-id="377609">A gauche, le widget utilisé n'est autre qu'un QGraphicsView affichant un QGraphicsScene, bref, on ne change aucunement nos habitudes concernant le choix de widget. Pour votre information personnelle, l'affichage se fait en anti-aliasing pour avoir plus de netteté (regardez <a href="http://doc.trolltech.com/4.5/qgraphicsview.html#renderHints-prop">setRenderHints()</a>). Je vous laisse vous renseigner sur la procédure à suivre pour faire la même chose que moi. ;) <br/> A droite, en-dessous du label &quot;<strong>Heure du système d'exploitation</strong>&quot; et du label &quot;<strong>Heure de l'alarme</strong>&quot;, j'ai utilisé la classe QTimeEdit qui semble parfaitement adaptée à ce que nous voulons faire. Il est évident que la sonnerie va se déclencher lorsque les deux QTimeEdit auront la même valeur.<br/> Je vous conseille de vous servir de QTimer pour la gestion du temps...<br/> Pour le son, j'utilise QSound. Le défaut est la limitation importante sur l'extension du son mais nous travaillons avec Qt donc le choix ne se fait malheureusement pas pour moi dans le cas présent. Si vous voulez utiliser FMOD ou ce que vous voulez d'autre, n'hésitez pas !</p><p id="r-377610" data-claire-element-id="377610">Dans les trois menus, j'ai placé trois actions :</p><ul id="r-377617" data-claire-element-id="377617"><li id="r-377612" data-claire-element-id="377612"><p id="r-377611" data-claire-element-id="377611">Menu &quot;Fichier&quot; : Quitter ;</p></li><li id="r-377614" data-claire-element-id="377614"><p id="r-377613" data-claire-element-id="377613">Menu &quot;Action&quot; : Sonnerie ;</p></li><li id="r-377616" data-claire-element-id="377616"><p id="r-377615" data-claire-element-id="377615">Menu &quot;Aide&quot; : A propos.</p></li></ul><p id="r-377618" data-claire-element-id="377618">Je vous conseille vivement de recentrer votre scène avant d'y ajouter des objets. Par exemple, si elle était de 400x400px, on aurait le code suivant :</p><pre id="r-377619" data-claire-element-id="377619"><code data-claire-semantic="cpp">scene-&gt;setSceneRect(-200, -200, 400, 400);</code></pre><p id="r-377620" data-claire-element-id="377620">Au final, on aurait le point (0, 0) centré sur la scène. L'utilité serait d'effectuer un placement de la base de vos aiguilles sur ce point.</p><p id="r-377621" data-claire-element-id="377621">Deux images sont disponibles. <a href="medias/uploads.siteduzero.com_files_370001_371000_370315.png">La première</a> est l'icône du programme et <a href="medias/uploads.siteduzero.com_files_370001_371000_370316.png">la seconde</a> est l'arrière-plan de l'horloge. N'hésitez pas à vous en servir, je les ai faites uniquement pour ce tutoriel (sans prendre en compte mon propre réveil). Cela ne rendra que plus joli votre réveil... ;)</p><p id="r-377622" data-claire-element-id="377622">Avec tout ce que nous avons vu jusqu'à maintenant et éventuellement quelques recherches du côté de QTimer, de QSound et de QTimeEdit, vous devriez réussir sans peine ce TP.<br/> Bon codage et à tout à l'heure !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">
<span class="arrow"></span>
<span class="next">TP : Création d&#039;un réveil</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Correction"></a><h2>Correction</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
<span class="arrow"></span>
<span class="next">Préparatifs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
<span class="next">Idées d&#039;amélioration</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-correction-126" data-claire-element-id="377682">Correction</h4><p id="r-377624" data-claire-element-id="377624">Vous avez terminé de coder votre réveil ?<br/> En voici la correction...</p><h5 id="r-un-peu-de-maths" data-claire-element-id="377639">Un peu de maths</h5><p id="r-377625" data-claire-element-id="377625">Une horloge est un disque. Pour faire un tour complet, une aiguille doit effectuer une rotation de 360°.</p><ul id="r-377632" data-claire-element-id="377632"><li id="r-377627" data-claire-element-id="377627"><p id="r-377626" data-claire-element-id="377626">La petite aiguille fait une rotation de 360° en douze heures ;</p></li><li id="r-377629" data-claire-element-id="377629"><p id="r-377628" data-claire-element-id="377628">La grande aiguille fait une rotation de 360° en une heure ;</p></li><li id="r-377631" data-claire-element-id="377631"><p id="r-377630" data-claire-element-id="377630">La trotteuse fait une rotation de 360° en une minute.</p></li></ul><p id="r-377633" data-claire-element-id="377633"><strong>Calcul de la rotation de la petite aiguille (par heure, min et sec) :</strong></p><p id="r-377634" data-claire-element-id="377634">12h = 360°, donc 1h = 360/12 = 30°, 1min = 30/60 = 0.5 et 1sec = 0.5/60 = 0.0083333333°.<br/> Ainsi, la petite aiguille parcourt 0.0083333333° en une seconde, 0.5° en une minute et 30° en une heure.</p><p id="r-377635" data-claire-element-id="377635"><strong>Calcul de la rotation de la grande aiguille (par min et sec) :</strong></p><p id="r-377636" data-claire-element-id="377636">1h = 360°, donc 1min = 360/60 = 6° et 1sec = 6/60 = 0.1°.<br/> Ainsi, la grande aiguille parcourt 0.1° en une seconde et 6° en une minute.</p><p id="r-377637" data-claire-element-id="377637"><strong>Calcul de la rotation de la trotteuse (par sec) :</strong></p><p id="r-377638" data-claire-element-id="377638">1min = 360° donc 1sec = 360/60 = 6°.<br/> Ainsi, la petite aiguille parcourt 6° en une seconde.</p><h5 id="r-les-explications-et-le-code" data-claire-element-id="377681">Les explications et le code</h5><p id="r-377640" data-claire-element-id="377640">Mon projet est composé de trois fichiers :</p><ul id="r-377647" data-claire-element-id="377647"><li id="r-377642" data-claire-element-id="377642"><p id="r-377641" data-claire-element-id="377641">main.cpp</p></li><li id="r-377644" data-claire-element-id="377644"><p id="r-377643" data-claire-element-id="377643">FenPrincipale.h</p></li><li id="r-377646" data-claire-element-id="377646"><p id="r-377645" data-claire-element-id="377645">FenPrincipale.cpp</p></li></ul><p id="r-377648" data-claire-element-id="377648">Voici l'éternel main.cpp du programme qui restera inchangé durant toute la correction (libre à vous d'y ajouter la traduction du programme) :</p><pre id="r-377649" data-claire-element-id="377649"><code data-claire-semantic="cpp">int main(int argc, char *argv[])
{
	QApplication app(argc, argv);

	FenPrincipale fenetre;
	fenetre.show();

	return app.exec();
}</code></pre><p id="r-377650" data-claire-element-id="377650">Personnellement, j'ai l'habitude de commencer par l'architecture de mes fenêtres lors de l'entreprise d'un projet. Une fois que j'ai terminé cela, je passe aux fonctionnalités diverses et variées que peut fournir mon programme. Je ne vais donc pas manquer à la règle et je vais donc commencer par cette architecture. Comme surcharger le constructeur de la classe en la créant ne serait pas sympa envers les personnes souffrant d'uglysourcecodophobie, et bien nous allons réaliser l'architecture en utilisant des fonctions personnalisées.</p><pre id="r-377651" data-claire-element-id="377651"><code data-claire-semantic="cpp">#include &quot;FenPrincipale.h&quot;

FenPrincipale::FenPrincipale()
{
        setWindowIcon(QIcon(&quot;icone.png&quot;)); // Une icône pour le programme
        setFixedSize(850, 480); // Dimensions fixées à 850x480px

        creationMenus();
        creationPendule();

        // ...
}</code></pre><p id="r-377652" data-claire-element-id="377652">La fonction creationMenus() est une fonction simple que vous avez déjà étudiée dans le tuto de M@teo21 :</p><pre id="r-377653" data-claire-element-id="377653"><code data-claire-semantic="cpp">void FenPrincipale::creationMenus()
{
	QMenu *menuFichier = menuBar()-&gt;addMenu(&quot;Fichier&quot;);
	menuFichier-&gt;addAction(&quot;Quitter&quot;, qApp, SLOT(quit()));

	QMenu *menuActions = menuBar()-&gt;addMenu(&quot;Actions&quot;);
	menuActions-&gt;addAction(&quot;Sonnerie&quot;, this, SLOT(infosSonnerie()));

	QMenu *menuAide = menuBar()-&gt;addMenu(&quot;?&quot;);
	menuAide-&gt;addAction(&quot;A propos&quot;, this, SLOT(ouvrirApropos()));
}</code></pre><p id="r-377654" data-claire-element-id="377654">Et voici la fonction creationPendule() que je vais m'empresser d'expliquer tout de suite après vous l'avoir donnée :</p><pre id="r-377655" data-claire-element-id="377655"><code data-claire-semantic="cpp">void FenPrincipale::creationPendule()
{
	scene =  new QGraphicsScene;
	scene-&gt;setSceneRect(-200, -200, 400, 400);

	QPen penTroteuse(Qt::red, 2, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin);
	QPen penGrandeAiguille(Qt::darkGreen, 2, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin);
	QPen penPetiteAiguille(Qt::darkMagenta, 3, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin);

	grandeAiguille = scene-&gt;addLine(QLine(0, 0, 0, -100), penGrandeAiguille);
	petiteAiguille = scene-&gt;addLine(QLine(0, 0, 0, -50), penPetiteAiguille);
	troteuse = scene-&gt;addLine(QLine(0, 25, 0, -150), penTroteuse);

	troteuse-&gt;setZValue(3);
	grandeAiguille-&gt;setZValue(2);
	petiteAiguille-&gt;setZValue(1);

	QPen penPointCentral(Qt::red, 10, Qt::SolidLine, Qt::RoundCap, Qt::RoundJoin);
	QPolygon pointCentral;
	pointCentral &lt;&lt; QPoint(0, 1) &lt;&lt; QPoint(1, 0);
	QGraphicsItem *point = scene-&gt;addPolygon(pointCentral, penPointCentral);
	point-&gt;setZValue(4);

	QGraphicsItem *fond = scene-&gt;addPixmap(QPixmap(&quot;fond_pendule.png&quot;));
	fond-&gt;setPos(-200, -200);
	fond-&gt;setZValue(-1);

	QGraphicsView *vue = new QGraphicsView(scene, this);
	vue-&gt;setRenderHints(QPainter::Antialiasing|QPainter::TextAntialiasing);
	vue-&gt;setGeometry(50, 50, 405, 405);
	vue-&gt;setStyleSheet(&quot;background-color: #FFFFFF&quot;);

	reglagesAffichage();
}</code></pre><p id="r-377656" data-claire-element-id="377656">Juste après la création de scene, je me suis servi de la fonction setSceneRect() dont l'effet avec les valeurs données est de décaler les points de la scène de manière à ce que le point (0;0) soit centré et non situé en haut à gauche de la scène. Puis je définis des QPen qui serviront à la couleur des aiguilles que je crée tout de suite après cela en leur appliquant les pinceaux créés. Cette méthode ne devrait pas vous être étrangère, nous l'avons vue dans les chapitres précédents. Afin d'éviter les superpositions des aiguilles, j'utilise setZValue() pour empiler les aiguilles dans l'ordre trotteuse, grande aiguille puis petite aiguille (la trotteuse se situera donc au-dessus des autres aiguilles). Pour un effet de style, j'ajoute un gros point rouge situé au centre de la scène et se positionnant au-dessus des aiguilles pour simuler le fait que la trotteuse ne soit pas une simple ligne. Je finis par créer la vue (à laquelle j'applique l'anti-aliasing du contenu et du texte).</p><p id="r-377657" data-claire-element-id="377657">Et j'appelle une autre fonction qui permettra de placer les aiguilles au bon endroit dans la scène par rapport à l'heure actuelle, reglagesAffichage().<br/> Mais avant de traiter cette fonction qui ne correspond pas exactement à l'architecture, retournons dans le constructeur de la classe FenPrincipale, il reste des choses à faire !</p><pre id="r-377658" data-claire-element-id="377658"><code data-claire-semantic="cpp">QLabel *label_titre_timer = new QLabel(&quot;&lt;b&gt;Heure du système d'exploitation :&lt;/b&gt;&quot;, this);
label_titre_timer-&gt;setGeometry(500, 50, 300, 25);

ordi_time = new QTimeEdit(this);
ordi_time-&gt;setGeometry(500, 90, 300, 25);
ordi_time-&gt;setTime(QTime::currentTime());
ordi_time-&gt;setEnabled(false);

label_time = new QLabel(this);
label_time-&gt;setGeometry(500, 115, 300, 50);

QLabel *label_titre_alarme = new QLabel(&quot;&lt;b&gt;Heure de l'alarme :&lt;/b&gt;&quot;, this);
label_titre_alarme-&gt;setGeometry(500, 170, 300, 25);

heure_alarme = new QTimeEdit(this);
heure_alarme-&gt;setGeometry(500, 210, 300, 25);
connect(heure_alarme, SIGNAL(textChanged()), this, SLOT(actualiserFenetre())); // On peut aussi utiliser timeChanged pour signal...</code></pre><p id="r-377659" data-claire-element-id="377659">Vous pouvez aisément remarquer que j'ai défini deux QTimeEdit (ordi_time et heure_alarme) de la même manière que la création de boutons. A votre stade, le fait que le mode de création de widgets soit identique ne devrait pas vous étonner le moins du monde.</p><pre id="r-377660" data-claire-element-id="377660"><code data-claire-semantic="cpp">ordi_time-&gt;setTime(QTime::currentTime());</code></pre><p id="r-377661" data-claire-element-id="377661">Cette ligne permet d'assigner l'heure du système d'exploitation à notre QTimeEdit.<br/> Juste après, j'ai désactivé ce widget (on peut aussi dire que je l'ai grisé) afin d'éviter que l'utilisateur puisse toucher à la valeur contenue par le widget (l'heure).</p><p id="r-377662" data-claire-element-id="377662">Maintenant, traitons la fonction reglagesAffichage().<br/> Comme son nom l'indique, cette fonction a pour objectif de faire faire aux aiguilles une rotation de manière à ce que les aiguilles soient placées correctement, en accord avec l'heure de l'ordinateur. A ce stade, les aiguilles sont toutes positionnées sur 0/12h, nous n'avons donc plus qu'à appeler la fonction rotate(), avec les calculs effectués plus tôt, dont je vous ai parlé plus tôt dans le chapitre sur les QGraphicsItem. Comme les aiguilles subissent des rotations, l'idéal est d'utiliser la fonction <a href="http://qt.nokia.com/doc/4.6/qgraphicsitem.html#resetTransform">resetTransform()</a> avant d'utiliser la fonction rotate().</p><p id="r-377663" data-claire-element-id="377663">On a donc le code suivant :</p><pre id="r-377664" data-claire-element-id="377664"><code data-claire-semantic="cpp">void FenPrincipale::reglagesAffichage()
{
	int h = QTime::currentTime().hour();
	int min = QTime::currentTime().minute();
	int sec = QTime::currentTime().second();

	// Rotation de la troteuse :
	troteuse-&gt;resetTransform();
	troteuse-&gt;rotate(6 * sec);

	// Rotation de la grande aiguille :
	grandeAiguille-&gt;resetTransform();
	grandeAiguille-&gt;rotate((0.1 * (min * 60)) + (0.1 * sec));

	// Rotation de la petite aiguille :
	petiteAiguille-&gt;resetTransform();
	petiteAiguille-&gt;rotate((0.0083333333 * sec) + (0.5 * min) + (30 * h));
}</code></pre><p id="r-377665" data-claire-element-id="377665">Désormais, nos aiguilles se placent correctement à l'ouverture du programme, mais ce n'est pas encore le cas une seconde après.<br/> Je précise qu'avec :</p><pre id="r-377666" data-claire-element-id="377666"><code data-claire-semantic="cpp">int h = QTime::currentTime().hour();
int min = QTime::currentTime().minute();
int sec = QTime::currentTime().second();</code></pre><p id="r-377667" data-claire-element-id="377667">Les variables h, min et sec contiennent respectivement la valeur de l'heure, des minutes et des secondes de l'ordinateur.<br/> Je vous propose donc d'ajouter plusieurs choses dans le constructeur de la classe :</p><pre id="r-377668" data-claire-element-id="377668"><code data-claire-semantic="cpp">son_alarme = new QSound(&quot;play.wav&quot;, this); // play.wav correspond au son qui sera joué lors de la sonnerie

QPushButton *boutonSonnerie = new QPushButton(&quot;Stopper l'alarme&quot;, this); // Je ne pense pas nécessaire de vous dire à quoi sert le bouton...
boutonSonnerie-&gt;setGeometry(500, 260, 300, 25);
connect(boutonSonnerie, SIGNAL(clicked()), son_alarme, SLOT(stop()));

// Dans le cas où l'heure de l'ordinateur et celle de la sonnerie serait identique, on lance le son :
if(ordi_time-&gt;text() == heure_alarme-&gt;text())
{
        son_alarme-&gt;setLoops(-1);
        son_alarme-&gt;play();
}

label_time-&gt;setText(&quot;Il est actuellement &quot; + QString::number(QTime::currentTime().hour())
		+ &quot; heure(s), &quot; + QString::number(QTime::currentTime().minute())
		+ &quot; minute(s) et &quot; + QString::number(QTime::currentTime().second()) + &quot; seconde(s).&quot;);</code></pre><p id="r-377669" data-claire-element-id="377669">Sur ce, je me permet de vous laisser ajouter un QTimer ayant une intervalle d'une seconde et se connectant à la fonction actualiserFenetre() lors de l'arrivée du signal timeout().<br/> Dans cette fonction actualiserFenetre(), nous avons plusieurs choses à faire :</p><ul id="r-377676" data-claire-element-id="377676"><li id="r-377671" data-claire-element-id="377671"><p id="r-377670" data-claire-element-id="377670">Vous vous souvenez du QLabel affichant l'heure ? Et bien le texte ne va pas s'actualiser tout seul, malheureusement.</p></li><li id="r-377673" data-claire-element-id="377673"><p id="r-377672" data-claire-element-id="377672">La principale fonction d'un réveil est de sonner : on doit donc vérifier si c'est le moment d'envoyer le son.</p></li><li id="r-377675" data-claire-element-id="377675"><p id="r-377674" data-claire-element-id="377674">Et en dernier plan, il faut mettre la position des aiguilles à jour.</p></li></ul><p id="r-377677" data-claire-element-id="377677">Pour cette dernière opération, nous allons tout simplement nous servir de la fonction reglagesAffichage(). Mais nous allons tout de même passer par une nouvelle fonction qui actualisera l'instance de QLabel dont nous parlions.</p><pre id="r-377678" data-claire-element-id="377678"><code data-claire-semantic="cpp">void FenPrincipale::actualiserFenetre()
{
	ordi_time-&gt;setTime(QTime::currentTime());
	if(ordi_time-&gt;text() == heure_alarme-&gt;text())
	{
		son_alarme-&gt;setLoops(-1);
		son_alarme-&gt;play();
	}

	label_time-&gt;setText(&quot;Il est actuellement &quot; + QString::number(QTime::currentTime().hour())
			+ &quot; heure(s), &quot; + QString::number(QTime::currentTime().minute())
			+ &quot; minute(s) et &quot; + QString::number(QTime::currentTime().second()) + &quot; seconde(s).&quot;);

	reglagesAffichage();
}</code></pre><p id="r-377679" data-claire-element-id="377679">C'est ainsi que nous terminons la plus grosse partie du réveil, la partie qui sert entre guillemets &quot;à quelque chose&quot;.<br/> Pour les dernières lignes de codes, nous allons juste créer les fonctions appelées par les menus :</p><pre id="r-377680" data-claire-element-id="377680"><code data-claire-semantic="cpp">void FenPrincipale::infosSonnerie()
{
        QMessageBox::information(this, &quot;Réveil&quot;, &quot;Ci-dessous se trouvent les informations concernant la sonnerie :&lt;br /&gt;&quot;
                &quot;Nom du son : &quot; + son_alarme-&gt;fileName() + &quot;&lt;br /&gt;&quot;
                &quot;Heure de la sonnerie : &quot; + heure_alarme-&gt;time().toString());
}

void FenPrincipale::ouvrirApropos()
{
        QMessageBox::information(this, &quot;Réveil&quot;, &quot;Merci d'utiliser ce réveil.&lt;br /&gt;&quot;
                &quot;Il a été codé par Amnell dans le cadre &lt;span style='text-decoration: line-through;'&gt;de son usage personnel&lt;/span&gt;&quot;
                &quot; du TP sur la gestion de la 2D avec Qt.&quot;);
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
<span class="arrow"></span>
<span class="next">Préparatifs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
<span class="next">Idées d&#039;amélioration</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Idesd039amlioration"></a><h2>Idées d&#039;amélioration</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
<span class="arrow"></span>
<span class="next">Correction</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-idees-d-amelioration-5" data-claire-element-id="377702">Idées d'amélioration</h4><p id="r-377683" data-claire-element-id="377683">Maintenant que le réveil est codé, nous pouvons l'améliorer !</p><ul id="r-377694" data-claire-element-id="377694"><li id="r-377685" data-claire-element-id="377685"><p id="r-377684" data-claire-element-id="377684">Dans un bon nombre de réveils se trouve une petite aiguille jaune indiquant l'heure du réveil (les calculs de sa rotation sont les mêmes que ceux de la petite aiguille). Pourquoi ne pas en ajouter une à notre horloge ?</p></li><li id="r-377687" data-claire-element-id="377687"><p id="r-377686" data-claire-element-id="377686">La fenêtre dispose actuellement de dimensions fixes. Peut être que la rendre <em>entièrement</em> extensible serait une bonne idée...</p></li><li id="r-377689" data-claire-element-id="377689"><p id="r-377688" data-claire-element-id="377688">Personnellement, je trouve qu'une fenêtre qui traine sur mon écran est gênante quand je ne travaille pas dessus. Qt dispose d'une classe très pratique pour placer la fenêtre dans la barre des tâches (avec cela, on peut toujours accéder à la fenêtre, ce qu'on ne pourrait pas faire en la masquant tout simplement) : <a href="http://doc.trolltech.com/4.5/qsystemtrayicon.html">QSystemTrayIcon</a>.</p></li><li id="r-377691" data-claire-element-id="377691"><p id="r-377690" data-claire-element-id="377690">Actuellement, l'utilisateur de ce réveil se trouve très limité dans le choix de son alarme. Il serait bien de permettre à l'utilisateur de choisir le son qu'il veut utiliser (vous devrez malheureusement passer par <code data-claire-semantic="cpp">delete </code> et <code data-claire-semantic="cpp">new </code> si vous utilisez la classe QSound et si vous êtes sous une version de Qt inférieure à 4.5.2 : peut être qu'il sera un jour possible d'appeler une fonction, actuellement inexistante, setFileName(const QString &amp; filename)). Quitte à permettre à l'utilisateur de choisir sa sonnerie, ça pourrait être intéressant de gérer une liste de lecture.</p></li><li id="r-377693" data-claire-element-id="377693"><p id="r-377692" data-claire-element-id="377692">Je pense que ce serait intéressant d'ajouter une fonctionnalité : pouvoir voir le temps restant avant la sonnerie soit au niveau de la fenêtre principale, soit dans la boîte de dialogue appelée par la fonction infosSonnerie().</p></li></ul><p id="r-377695" data-claire-element-id="377695">Comme quoi la 2D avec Qt, ça peut être utile dans la vie courante !<br/> Je tiens à préciser que cette étape est très importante pour la suite du tutoriel car c'est un grand pas vers l'objectif final de la partie sur laquelle nous travaillons.<br/> Une dernière chose avant de nous quitter : comme vous l'avez sûrement remarqué, la gestion du temps est un très bon camarade de la 2D (c'est le principe du déroulement de l'action en fonction du temps), bien qu'il ne soit pas forcément utilisé dans tous les projets en 2D. ;)</p><p id="r-377696" data-claire-element-id="377696"><cite>Citation : conversation entre vous et moi</cite></p><blockquote id="r-377698" data-claire-element-id="377698"><p id="r-377697" data-claire-element-id="377697">Moi : Laura de Latour me charge de vous donner vos styllards...<br/> Vous : Passe-moi plutôt son numéro de portable, je ne ferai rien de ses styllards !<br/> Moi : Secret professionnel, désolé.<br/> Vous : Rhooo... RADIN !!!</p></blockquote><p id="r-377699" data-claire-element-id="377699">Comme vous l'avez peut-être remarqué, ce tutoriel n'est pas fini. Des chapitres viendront encore s'ajouter petit à petit à ceux déjà existants. Il est aussi important de prendre en compte le fait qu'un cours sur la programmation tel que celui est comme un cours donné à l'école, il nécessite d'être assimilé par des exercices, donc de la pratique. La <a href="http://qt.nokia.com/doc/latest/index.html">documentation</a> aussi est là pour vous aider. Même si vous avez du mal à entrer dedans, elle peut permettre bien plus que la lecture de différents cours, même si ces derniers sont parfois utiles à la compréhension de certains concepts.</p><p id="r-377700" data-claire-element-id="377700">Si vous souhaitez contacter les rédacteurs de ce cours afin de leur faire parvenir un message en privé, contactez l'équipe <a href="http://www.siteduzero.com/equipes-781-400-qt-s-programmers.html">Qt's Programmers</a> en suivant les étapes décrites sur la page de présentation de l'équipe.</p><p id="r-377701" data-claire-element-id="377701">Édité par :<br/><strong>Qt's Programmers</strong><br/> L'équipe officielle du tutoriel !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite">Le GUI avec Qt, la suite</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/gestion-avancee-des-qpushbutton">Gestion avancée des QPushButton</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/ce-que-vous-savez-deja-des-qpushbutton">
Ce que vous savez déjà des QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/personnaliser-ses-qpushbutton">
Personnaliser ses QPushButton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-boutons-menus-un-cas-assez-rare">
Les boutons-menus, un cas assez rare
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-manipulation-des-fichiers">La manipulation des fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pourquoi-lire-et-ecrire-dans-les-fichiers">
Pourquoi lire et écrire dans les fichiers ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-lecture-et-les-differents-modes-d-ouverture">
La lecture et les différents modes d&#039;ouverture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/l-ecriture-dans-les-fichiers">
L&#039;écriture dans les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/aller-encore-plus-loin">
Aller encore plus loin...
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/la-recuperation-des-parametres-de-la-fonction-main-avec-qt">La récupération des paramètres de la fonction main avec Qt</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/un-peu-de-culture">
Un peu de culture
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/theorie-11">
Théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pratique-10">
Pratique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/annexe-3">
Annexe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/apprendre-a-creer-un-style-entierement-personnalise">Apprendre à créer un style entièrement personnalisé</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/premiere-approche-des-styles-personnalises">
Première approche des styles personnalisés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/quelques-fonctions-supplementaires">
Quelques fonctions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/pour-en-savoir-plus">
Pour en savoir plus...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
La 2D avec Qt
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/commencons">Commençons...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/presentation-rapide-des-classes">
Présentation rapide des classes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-traditionnel-hello-world">
Le traditionnel &quot;Hello World !&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/formes-geometriques-et-autres">Formes géométriques et autres</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/des-figures-geometriques-en-nombre">
Des figures géométriques en nombre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/le-texte-les-images-et-l-enregistrement-de-votre-scene">
Le texte, les images et l&#039;enregistrement de votre scène
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/qgraphicsitem-et-autres-histoires">QGraphicsItem et autres histoires...</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/notions-supplementaires">
Notions supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/les-graphicsitem">
Les GraphicsItem
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/tp-creation-d-un-reveil">TP : Création d&#039;un réveil</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/preparatifs-4">
Préparatifs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
Correction
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/idees-d-amelioration-5">
Idées d&#039;amélioration
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-gui-avec-qt-la-suite/correction-126">
<span class="arrow"></span>
<span class="next">Correction</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/le-gui-avec-qt-la-suite.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:06:13 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/le-gui-avec-qt-la-suite.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:16:20 GMT -->
</html>