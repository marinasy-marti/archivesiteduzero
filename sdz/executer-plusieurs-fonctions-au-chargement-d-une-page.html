<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/executer-plusieurs-fonctions-au-chargement-d-une-page.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:01:07 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/executer-plusieurs-fonctions-au-chargement-d-une-page.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:15:31 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Exécuter plusieurs fonctions au chargement d&#039;une page</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Exécuter plusieurs fonctions au chargement d&#039;une page</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Excuterplusieursfonctionsauchargementd039unepage">Exécuter plusieurs fonctions au chargement d&#039;une page</a><br/><a href="#Commentfaireleschosesproprement">Comment faire les choses proprement ?</a><br/><a href="#Unproblmebienennuyeux">Un problème bien ennuyeux</a><br/><a href="#Lasolutionn1l039arraydefonctions">La solution n°1 : l&#039;array de fonctions</a><br/><a href="#Lasolutionn2quotl039couteurquotd039vnements">La solution n°2 : &quot;l&#039;écouteur&quot; d&#039;événements</a><br/></div>
<a name="Excuterplusieursfonctionsauchargementd039unepage"></a><h2>Exécuter plusieurs fonctions au chargement d&#039;une page</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/comment-faire-les-choses-proprement">
<span class="next">Comment faire les choses proprement ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-333526" data-claire-element-id="333526">Bonjour, amis Zéros :)</p><p id="r-333527" data-claire-element-id="333527">Il est possible de lancer plusieurs fonctions au chargement de la page en utilisant l'évènement onload de l'élément body. Mais dans ce tutoriel, je vais vous apprendre à charger plusieurs fonctions avec le gestionnaire d'événement traditionnel, qui est sous la forme window.onload. Nous apprendrons aussi à le faire par les addEventListener.</p>
</div><a name="Commentfaireleschosesproprement"></a><h2>Comment faire les choses proprement ?</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/un-probleme-bien-ennuyeux-4">
<span class="next">Un problème bien ennuyeux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-333528" data-claire-element-id="333528">Comme expliqué en introduction, j'ai conseillé d'utiliser le gestionnaire d'événements traditionnel, au lieu de celui en-ligne.</p><div id="r-333530" data-claire-element-id="333530" data-claire-semantic="question"><p id="r-333529" data-claire-element-id="333529">Gné o_O</p></div><p id="r-333531" data-claire-element-id="333531">Le gestionnaire d'événements traditionnel permet d'éclaircir le code XHTML car le lancement des scripts au chargement de la page est paramétré dans les fichiers, et on n'a pas à faire ce genre de chose :</p><pre id="r-333532" data-claire-element-id="333532"><code data-claire-semantic="html">&lt;body onload=&quot;scope(); load_events(); date()&quot;&gt;</code></pre><p id="r-333533" data-claire-element-id="333533">Avec le gestionnaire d'événements traditionnel, on met à la fin du fichier javascript cette ligne :</p><pre id="r-333534" data-claire-element-id="333534"><code data-claire-semantic="javascript">//Code....

window.onload = fonction_du_fichier; //SANS parenthèses (pas le droit aux arguments donc :( )</code></pre><p id="r-333535" data-claire-element-id="333535">C'est propre, c'est clean, c'est cool :) <br/> Oui mais voilà...</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page">Exécuter plusieurs fonctions au chargement d&#039;une page</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/comment-faire-les-choses-proprement">
Comment faire les choses proprement ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/un-probleme-bien-ennuyeux-4">
Un problème bien ennuyeux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg1-l-array-de-fonctions">
La solution n°1 : l&#039;array de fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg2-l-ecouteur-d-evenements">
La solution n°2 : &quot;l&#039;écouteur&quot; d&#039;événements
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/un-probleme-bien-ennuyeux-4">
<span class="next">Un problème bien ennuyeux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unproblmebienennuyeux"></a><h2>Un problème bien ennuyeux</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/comment-faire-les-choses-proprement">
<span class="arrow"></span>
<span class="next">Comment faire les choses proprement ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg1-l-array-de-fonctions">
<span class="next">La solution n°1 : l&#039;array de fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-333537" data-claire-element-id="333537">Si vous essayiez de lancer plusieurs fonctions depuis plusieurs fichiers, vous allez vous rendre compte... que seul le dernier est chargé :euh: <br/> Comment est-ce possible ?<br/> En fait, quand vous refaites window.onload = truc_machin, vous écrasez la fonction précédente (elle est remplacée par la suivante).</p><div id="r-333539" data-claire-element-id="333539" data-claire-semantic="question"><p id="r-333538" data-claire-element-id="333538">:ange: Moi je sais comment on va faire pour régler ça ! On va faire window.onload += truc_machin et tout rentrera dans l'ordre !</p></div><p id="r-333540" data-claire-element-id="333540">Perdu :p Ce serait trop simple.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page">Exécuter plusieurs fonctions au chargement d&#039;une page</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/comment-faire-les-choses-proprement">
Comment faire les choses proprement ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/un-probleme-bien-ennuyeux-4">
Un problème bien ennuyeux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg1-l-array-de-fonctions">
La solution n°1 : l&#039;array de fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg2-l-ecouteur-d-evenements">
La solution n°2 : &quot;l&#039;écouteur&quot; d&#039;événements
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/comment-faire-les-choses-proprement">
<span class="arrow"></span>
<span class="next">Comment faire les choses proprement ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg1-l-array-de-fonctions">
<span class="next">La solution n°1 : l&#039;array de fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lasolutionn1l039arraydefonctions"></a><h2>La solution n°1 : l&#039;array de fonctions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/un-probleme-bien-ennuyeux-4">
<span class="arrow"></span>
<span class="next">Un problème bien ennuyeux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg2-l-ecouteur-d-evenements">
<span class="next">La solution n°2 : &quot;l&#039;écouteur&quot; d&#039;événements</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-333542" data-claire-element-id="333542">Comment va-t-on faire pour régler ce problème ?</p><p id="r-333543" data-claire-element-id="333543">Je vous donne le raisonnement :</p><ul id="r-333548" data-claire-element-id="333548"><li id="r-333545" data-claire-element-id="333545"><p id="r-333544" data-claire-element-id="333544">On va stocker toutes les fonctions à charger en même temps que la page dans un array de fonctions, avec... une fonction</p></li><li id="r-333547" data-claire-element-id="333547"><p id="r-333546" data-claire-element-id="333546">On les exécute une par une <em>via</em> une autre fonction, qui sera elle lancée par window.onload</p></li></ul><p id="r-333549" data-claire-element-id="333549">En théorie, ça marche, mais dans la pratique ? A vos claviers :-°</p><p id="r-333550" data-claire-element-id="333550">...</p><pre id="r-333551" data-claire-element-id="333551"><code data-claire-semantic="javascript">var FunOnl = new Array(); //L'array qui sert au stockage des fonctions

function lancer(fonction) { //Fonction qui devra être appelée à la place de window.onload
    FunOnl[FunOnl.length] = fonction; //On stocke les fonctions dans l'array. Il commence à 0, et length donne l'indice du dernier élément + 1.
}

window.onload = function() { //On appelle ça une fonction anonyme (elle n'a pas de nom, la pauvre ;) )
    for(var i = 0, longueur = FunOnl.length; i &lt; longueur; i++) //On utilise longueur pour ne pas recalculer la taille à chaque fois.
        FunOnl[i](); //On exécute les fonctions.
};</code></pre><p id="r-333552" data-claire-element-id="333552">Il vous suffit maintenant de faire appel à lancer() plutôt que window.onload pour lancer vos scripts aux chargements de page !<br/> C'est une première solution, elle marche, mais on peut faire mieux :D</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page">Exécuter plusieurs fonctions au chargement d&#039;une page</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/comment-faire-les-choses-proprement">
Comment faire les choses proprement ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/un-probleme-bien-ennuyeux-4">
Un problème bien ennuyeux
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg1-l-array-de-fonctions">
La solution n°1 : l&#039;array de fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg2-l-ecouteur-d-evenements">
La solution n°2 : &quot;l&#039;écouteur&quot; d&#039;événements
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/un-probleme-bien-ennuyeux-4">
<span class="arrow"></span>
<span class="next">Un problème bien ennuyeux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg2-l-ecouteur-d-evenements">
<span class="next">La solution n°2 : &quot;l&#039;écouteur&quot; d&#039;événements</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lasolutionn2quotl039couteurquotd039vnements"></a><h2>La solution n°2 : &quot;l&#039;écouteur&quot; d&#039;événements</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg1-l-array-de-fonctions">
<span class="arrow"></span>
<span class="next">La solution n°1 : l&#039;array de fonctions</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-333554" data-claire-element-id="333554">OK, OK, la solution précédente marche. Mais notre fonction serait plus simple si, plutôt que de créer notre array de fonctions (c'est un peu tordu), on &quot;surveillait&quot; la fenêtre, pour savoir quand elle est chargée. Ensuite, on ajoute successivement les fonctions à charger en les &quot;ajoutant&quot; au gestionnaire onload.</p><div id="r-333556" data-claire-element-id="333556" data-claire-semantic="question"><p id="r-333555" data-claire-element-id="333555">Aque comment on fait ça ?</p></div><p id="r-333557" data-claire-element-id="333557">On va utiliser une méthode appelée addEventListener (spécification du W3C). Elle s'utilise comme suit :</p><pre id="r-333558" data-claire-element-id="333558"><code data-claire-semantic="javascript">element.addEventListener(&quot;événement_sans_on_devant&quot;, fonction_a_executer, propagation_evenement_(booleen));</code></pre><p id="r-333559" data-claire-element-id="333559">Mais comme IE a implémenté la fonctionnalité avant sa standardisation, lui utilise une fonction appelée attachEvent :</p><pre id="r-333560" data-claire-element-id="333560"><code data-claire-semantic="javascript">element.attachEvent(&quot;évènement&quot;, fonction);</code></pre><p id="r-333561" data-claire-element-id="333561">A partir de ces informations, ce serait bien qu'on créer notre propre fonction addEvent, qui combinerait les 2, comme ça on aurait pas à écrire en double le gestionnaire.<br/> Je vous aide un peu : pour la première fonction standard, je n'entrerai pas dans les détails, mais sachez qu'il faut mieux mettre true pour le 3ième argument.<br/> Allez, au boulot :)</p><p id="r-333562" data-claire-element-id="333562">...</p><pre id="r-333563" data-claire-element-id="333563"><code data-claire-semantic="javascript">function addEvent(obj, event, fct) {
    if (obj.attachEvent) //Est-ce IE ?
        obj.attachEvent(&quot;on&quot; + event, fct); //Ne pas oublier le &quot;on&quot;
    else
        obj.addEventListener(event, fct, true);
}</code></pre><p id="r-333564" data-claire-element-id="333564">En plus, vous pourrez utiliser cette fonction pour virer tous les attributs onclick, etc... de vos pages XHTML :) <br/> Je vous mets un exemple d'utilisation de notre fonction :</p><pre id="r-333565" data-claire-element-id="333565"><code data-claire-semantic="javascript">function al1() { alert(1); } //Trois fonctions quelconques
function al2() { alert(2); }
function al3() { alert(3); }
 
addEvent(window , &quot;load&quot;, al1); //On les lance toutes les deux au chargement de la page
addEvent(window , &quot;load&quot;, al2);
addEvent(document.getElementById('truc'), &quot;click&quot;, al3); //Un clic sur &quot;truc&quot; déclenche la fonction al3()</code></pre><p id="r-333566" data-claire-element-id="333566">Et maintenant, notre fonction lancer(), devenue riquiqui :</p><pre id="r-333567" data-claire-element-id="333567"><code data-claire-semantic="javascript">function lancer(fct) {
    addEvent(window, &quot;load&quot;, fct);
}</code></pre><p id="r-333568" data-claire-element-id="333568">Merci à Thunderseb pour l'idée de la gestion des événements ;)</p><p id="r-333569" data-claire-element-id="333569">Voilà, un petit script bien pratique qui vous servira sûrement.</p><p id="r-333570" data-claire-element-id="333570">En espérant vous avoir été utile, merci d'avoir lu ce tuto :)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page">Exécuter plusieurs fonctions au chargement d&#039;une page</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/comment-faire-les-choses-proprement">
Comment faire les choses proprement ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/un-probleme-bien-ennuyeux-4">
Un problème bien ennuyeux
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg1-l-array-de-fonctions">
La solution n°1 : l&#039;array de fonctions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg2-l-ecouteur-d-evenements">
La solution n°2 : &quot;l&#039;écouteur&quot; d&#039;événements
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/executer-plusieurs-fonctions-au-chargement-d-une-page/la-solution-ndeg1-l-array-de-fonctions">
<span class="arrow"></span>
<span class="next">La solution n°1 : l&#039;array de fonctions</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/executer-plusieurs-fonctions-au-chargement-d-une-page.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:01:07 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/executer-plusieurs-fonctions-au-chargement-d-une-page.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:15:31 GMT -->
</html>