<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/rogrammez-en-objective-c.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 07:31:36 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rogrammez-en-objective-c.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:23:11 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Programmez en Objective-C !</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/programmez-en-objective-c.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Programmez en Objective-C !</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#ProgrammezenObjective-C">Programmez en Objective-C !</a><br/><a href="#Introductionl039Objective-C">Introduction à l&#039;Objective-C</a><br/><a href="#Historique">Historique</a><br/><a href="#Commentamarche">Comment ça marche ?</a><br/><a href="#Commentfaire">Comment faire ?</a><br/><a href="#l039assautdel039Objective-C">À l&#039;assaut de l&#039;Objective-C</a><br/><a href="#Pourcommencer...">Pour commencer...</a><br/><a href="#Lesobjetsetl039Objective-C">Les objets et l&#039;Objective-C</a><br/><a href="#NSString">NSString</a><br/><a href="#Lesclasses">Les classes</a><br/><a href="#Explications">Explications</a><br/><a href="#L039interface">L&#039;interface</a><br/><a href="#Lesmthodes">Les méthodes</a><br/><a href="#Lesconventions">Les conventions</a><br/><a href="#L039hritage">L&#039;héritage</a><br/><a href="#Unehistoiredefamille...">Une histoire de famille...</a><br/><a href="#Commentfairehriter">Comment faire hériter</a><br/><a href="#Lesprotocoles">Les protocoles</a><br/><a href="#Grerlammoire">Gérer la mémoire</a><br/><a href="#Retaincountetautresjoyeusets">Retain count et autres joyeusetés</a><br/><a href="#Copieretassigner">Copier et assigner</a><br/><a href="#Librerlammoire">Libérer la mémoire</a><br/><a href="#TPJeudecombatRPG">TP : Jeu de combat (RPG)</a><br/><a href="#Prliminaires">Préliminaires</a><br/><a href="#Lasolution">La solution</a><br/><a href="#Lestableaux">Les tableaux</a><br/><a href="#Creruntableau">Créer un tableau</a><br/><a href="#Lesmthodescourantes">Les méthodes courantes</a><br/><a href="#LammoireavecNSArray">La mémoire avec NSArray</a><br/><a href="#Enbonus">En bonus</a><br/><a href="#Donnessansordre">Données sans ordre</a><br/><a href="#Principedudictionnaire">Principe du dictionnaire</a><br/><a href="#Manipulerundictionnaire">Manipuler un dictionnaire</a><br/><a href="#Lesensembles">Les ensembles</a><br/><a href="#Lesfichiers">Les fichiers</a><br/><a href="#Reprsentationd039unchemin">Représentation d&#039;un chemin</a><br/><a href="#Lireetcriredutexte">Lire et écrire du texte</a><br/><a href="#Enregistrerunobjetlathorie">Enregistrer un objet, la théorie</a><br/><a href="#Archiverdesobjetsdansunfichier">Archiver des objets dans un fichier</a><br/><a href="#Dsarchiverdesobjets">Désarchiver des objets</a><br/><a href="#PrsentationdeCocoaetdesesoutils">Présentation de Cocoa et de ses outils</a><br/><a href="#Cocoaunframeworkcomplet">Cocoa, un framework complet</a><br/><a href="#Lecodeendur">Le code en dur</a><br/><a href="#Uneinterfacegraphiquelgre">Une interface graphique légère</a><br/><a href="#Uneinterfacegraphique">Une interface graphique</a><br/><a href="#Unmodled039organisationducodeleMVC">Un modèle d&#039;organisation du code : le MVC</a><br/><a href="#Crationduprojetetdel039interface">Création du projet et de l&#039;interface</a><br/><a href="#Fairedialoguerlesobjetsentreeuxoutletsetactions">Faire dialoguer les objets entre eux : outlets et actions</a><br/><a href="#ditionducode">Édition du code</a><br/></div>
<a name="ProgrammezenObjective-C"></a><h2>Programmez en Objective-C !</h2><div class="content" role="article">
<p id="r-148566" data-claire-element-id="148566"><em>C'est quoi, l'Objective-C ?</em></p><p id="r-148567" data-claire-element-id="148567">L'Objective-C est un langage de programmation compilé, multi-plates-formes, libre et orienté objet.</p><p id="r-148568" data-claire-element-id="148568">C'est un langage assez puissant, basé sur le C. C'est en fait du C auquel on a ajouté de l'orienté objet, un peu comme le C++. :)</p><p id="r-148569" data-claire-element-id="148569">Ce tutoriel propose un apprentissage de l'Objective-C et de la programmation orientée objet dans ce langage. La première partie donne les bases du langage, et la seconde propose d'aborder des concepts plus avancés de l'Objective-C, ainsi que divers objets de la bibliothèque Foundation. ;) Enfin, la troisième partie s'inscrit dans le schéma des tutoriels de ce site et propose de mettre en application les connaissances acquises avec la bibliothèque Cocoa (qui contient aussi son lot de concepts propres).</p><p id="r-148570" data-claire-element-id="148570">Je vous recommande également la lecture du tutoriel de <a href="http://www.siteduzero.com/membres-294-186432.html">Tchouk!</a> : <a href="http://www.siteduzero.com/tutoriel-3-176943-developper-sous-os-x-avec-cocoa.html">Développer sous OS X avec Cocoa</a>, qui propose une approche différente des sujets traités dans ce tutoriel. :)</p><aside id="r-148572" data-claire-element-id="148572" data-claire-semantic="information"><p id="r-148571" data-claire-element-id="148571">Avant de commencer, soyez sûr d'être au point sur vos connaissances en C, donc d'avoir lu au moins les parties I et II du <a href="http://www.siteduzero.com/tuto-3-8-0-apprenez-a-programmer-en-c.html">tutoriel C</a>. L'Objective-C étant grandement inspiré de ce langage, vous ne serez pas dépaysé.</p></aside><p id="r-148573" data-claire-element-id="148573">Et si on commençait ?</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Introductionl039Objective-C"></a><h2>Introduction à l&#039;Objective-C</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
<span class="next">Historique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-148575" data-claire-element-id="148575">Pour commencer ce tutoriel, je vous propose une introduction plutôt riche à l'Objective-C. Comme tous les langages, l'Objective-C a une histoire particulière derrière lui. En effet, il a été influencé par plusieurs langages de programmation, qui lui ont chacun apporté différents aspects.</p><p id="r-148576" data-claire-element-id="148576">Je parlerai également des évolutions du langage, qui n'est certainement pas resté sans développement depuis sa création. Certaines entreprises, qui méritent d'être citées pour leur contribution à l'évolution de l'Objective-C, ont eu une grande influence sur la diffusion du langage et son utilisation dans certains projets.</p>
</div><a name="Historique"></a><h2>Historique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">
<span class="arrow"></span>
<span class="next">Introduction à l&#039;Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
<span class="next">Comment ça marche ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-historique-2" data-claire-element-id="148599">Historique</h4><h5 id="r-creation-6" data-claire-element-id="148584">Création</h5><p id="r-148577" data-claire-element-id="148578"><em><a href="../../62.4.17.167/uploads/fr/files/185001_186000/185782.html"><img id="r-148578" data-claire-element-id="148577" src="medias/uploads.siteduzero.com_thb_185001_186000_185782.png" alt="Image utilisateur"/></a>Brad Cox</em><br/> Il faut déjà situer le langage dans son contexte historique. Vers la fin des années 70, l'informatique est marquée par l'effervescence autour du système d'exploitation <em>UNIX</em> et par le langage de programmation <a href="http://fr.wikipedia.org/wiki/C_(langage)"><strong>C</strong></a>, créé par Dennis Ritchie. Le C est la base d'UNIX ; c'était un langage de programmation très utilisé à l'époque. Mais comme tout langage, le C a ses limites. Vous devez sûrement savoir que le C ne propose pas de moyens clairs pour faire de l'orienté objet. Lorsque les programmeurs ont pensé à faire évoluer le C, c'était pour favoriser l'écriture de gros programmes, qui devenaient complexes et peu efficaces en C. Pour la plupart des programmeurs, la <em>programmation orientée objet</em> offrait une solution à ce problème.</p><p id="r-148579" data-claire-element-id="148579">En 1979, Bjarne Stroustrup développe le <a href="http://fr.wikipedia.org/wiki/C++"><strong>C++</strong></a>, qui ajoute la POO au C. La création de l'<a href="http://fr.wikipedia.org/wiki/Objective_C"><strong>Objective-C</strong></a> intervient un peu plus tard. C'est l'américain Brad Cox qui crée l'Objective-C au début des années 80. Comme le C++ à cette époque, il a pour objectif de rajouter des classes au langage C. Pour cela, Cox s'appuie sur un autre langage, le <a href="http://fr.wikipedia.org/wiki/Smalltalk"><strong>Smalltalk-80</strong></a>, qui est un langage orienté objet créé au début des années 70. On peut donc dire que l'Objective-C a principalement été créé à partir du langage C et du Smalltalk. ;)</p><figure id="r-148581" data-claire-element-id="148582"><img id="r-148580" data-claire-element-id="148580" src="medias/uploads.siteduzero.com_files_185001_186000_185784.png" alt="Image utilisateur"/></figure><p id="r-148583" data-claire-element-id="148583"><em>Logo de NeXT</em></p><h5 id="r-developpement" data-claire-element-id="148595">Développement</h5><p id="r-148585" data-claire-element-id="148585">Brad Cox fit de son langage un langage libre, dont tout le monde peut analyser les standards et les réutiliser. La première entreprise à utiliser l'Objective-C dans l'un de ses projets fut <a href="http://fr.wikipedia.org/wiki/NeXT"><strong>NeXT</strong></a>, qui vendait des systèmes d'exploitation et du matériel informatique en visant un public universitaire. Le système d'exploitation en question s'appelait <a href="http://fr.wikipedia.org/wiki/NeXTSTEP"><strong>NeXTStep</strong></a>, et était écrit en Objective-C. Ce système était également basé sur un environnement <a href="http://fr.wikipedia.org/wiki/Berkeley_Software_Distribution"><strong>BSD</strong></a>, ce qui en fait un système <em>UNIX-like</em>. La société NeXT, à la suite de problèmes financiers, se spécialisa dans la vente du système NeXTStep et arrêta de fabriquer des ordinateurs. On pourrait citer différentes créations faites sur un ordinateur NeXT : l'invention du Web par Tim Berners-Lee, ainsi que le développement de Doom et de Wolfenstein 3D par John Carmack. Les avantages de NeXTStep étaient nombreux : une API très performante et orientée objet, un bon environnement de développement, ainsi qu'une base UNIX. Mais la firme NeXT, créée par Steve Jobs à la suite de son départ d'Apple, après onze ans d'activité, a été rachetée par cette dernière en 1996. Cela donna un nouveau souffle pour Apple, qui développa un nouveau système d'exploitation pour les Macintosh basé sur NeXTStep. Aujourd'hui, NeXTStep est abandonné, mais les standards du système sont toujours présents dans les <em>frameworks</em><a href="http://fr.wikipedia.org/wiki/Cocoa_(Apple)"><strong>Cocoa</strong></a> et <a href="http://fr.wikipedia.org/wiki/GNUstep"><strong>GNUstep</strong></a>.</p><h6 id="r-mac-os-x-1" data-claire-element-id="148587">Mac OS X</h6><p id="r-148586" data-claire-element-id="148586"><a href="http://fr.wikipedia.org/wiki/Mac_OS_X"><strong>Mac OS X</strong></a> est un système d'exploitation développé par Apple. Il est basé, comme NeXTStep, sur BSD. C'est un système propriétaire, bien que le noyau et la structure interne du système soient libres. Mac OS X dispose de plusieurs API pour le développement d'applications : <a href="http://en.wikipedia.org/wiki/Carbon_(API)"><strong>Carbon (en)</strong></a>, qui est l'API des versions de Mac OS antérieures à Mac OS X. Elle possède une interface C(++), et a été conservée pour des raisons de compatibilité. La seconde API est <a href="http://fr.wikipedia.org/wiki/Cocoa_(Apple)"><strong>Cocoa</strong></a>, qui, arrivée avec Mac OS X, est basée sur le <em>framework</em> de NeXTStep (donc écrite en Objective-C). Elle possède une interface Objective-C, ce qui signifie que l'Objective-C est le langage d'utilisation de Cocoa (on peut aussi l'utiliser en <a href="http://fr.wikipedia.org/wiki/Python_(langage)">Python</a> et en <a href="http://fr.wikipedia.org/wiki/Perl_(langage)">Perl</a>). Il est d'ailleurs aujourd'hui fortement recommandé de développer des applications avec Cocoa sous Mac.</p><h6 id="r-openstep-et-gnustep" data-claire-element-id="148594">OPENSTEP et GNUstep</h6><p id="r-148588" data-claire-element-id="148588">Vers la fin de sa vie, NeXT a développé, en partenariat avec Sun Microsystems, une série de standards pour des <em>frameworks</em> orientés objet, appelés <a href="http://en.wikipedia.org/wiki/OpenStep"><strong>OpenStep (en)</strong></a>. La principale implémentation de ces standards est l'API OPENSTEP. C'est une bibliothèque qui reprend l'API de NeXTStep, mais elle est libre, contrairement à NeXTStep. OPENSTEP fonctionnait sur Mac OS, sur Solaris et même sur Windows NT (note : Mac OS X ne rentre pas aujourd'hui dans les standards OpenStep).</p><figure id="r-148590" data-claire-element-id="148591"><img id="r-148589" data-claire-element-id="148589" src="../../user.oc-static.com/files/85001_86000/85863.png" alt="Image utilisateur"/></figure><p id="r-148592" data-claire-element-id="148592"><em>GNUstep</em><br/><a href="http://fr.wikipedia.org/wiki/GNUstep"><strong>GNUstep</strong></a>, quant à lui, est une autre implémentation des standards OpenStep, bien que sa création remonte avant celle des standards. C'est un projet <strong>libre</strong> qui vise à offrir une implémentation accessible, d'abord de l'API de NeXTStep, puis de l'API Cocoa (on pourrait le comparer à Mono par rapport à .NET). Mais en plus de fournir une API, GNUstep propose aussi des outils de développement, ainsi que leurs propres améliorations de Cocoa.</p><p id="r-148593" data-claire-element-id="148593">Aujourd'hui, Cocoa et GNUstep sont les principales implémentations (ou évolutions) des standards OpenStep, et pour ainsi dire les deux seules bibliothèques écrites en Objective-C et utilisables dans ce langage. ;)</p><h5 id="r-objective-c-2-0" data-claire-element-id="148598">Objective-C 2.0</h5><p id="r-148596" data-claire-element-id="148596">En 2007, à l'occasion de la sortie de Mac OS X v10.5 (dit <a href="http://fr.wikipedia.org/wiki/Mac_OS_X_v10.5"><strong>Leopard</strong></a>), Apple a proposé une mise à jour des standards de l'Objective-C. La firme a développé de nouveaux outils de gestion de mémoire dynamique, regroupés dans un système nommé <em>garbage collector</em> (ramasse-miettes), qui simplifie et rend le code Objective-C plus performant. Il y a eu aussi quelques modifications de syntaxe, ainsi que des ajouts de mots-clés, qui simplifient la programmation des objets. ;)</p><p id="r-148597" data-claire-element-id="148597">Au début de ce tutoriel, nous n'aborderons pas l'Objective-C 2.0. Bien que celui-ci soit totalement compatible avec l'Objective-C classique, nous apprendrons à gérer la mémoire avec le système « classique », et utiliserons la syntaxe normale (les ajouts de l'Objective-C 2.0 dans ce domaine sont quand même mineurs :-° ).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">
<span class="arrow"></span>
<span class="next">Introduction à l&#039;Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
<span class="next">Comment ça marche ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Commentamarche"></a><h2>Comment ça marche ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
<span class="arrow"></span>
<span class="next">Historique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
<span class="next">Comment faire ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-comment-ca-marche-9" data-claire-element-id="148620">Comment ça marche ?</h4><h5 id="r-definition-16" data-claire-element-id="148613">Définition</h5><p id="r-148600" data-claire-element-id="148600">Voici la définition de l'Objective-C dans son article Wikipédia français :</p><p id="r-148601" data-claire-element-id="148601"><cite>Citation : Wikipédia - Objective-C</cite></p><blockquote id="r-148603" data-claire-element-id="148603"><p id="r-148602" data-claire-element-id="148602">L'<strong>Objective-C</strong> est un langage de programmation orienté objet réflexif. C'est une extension du C ANSI, comme le C++, mais qui se distingue de ce dernier par sa distribution dynamique des messages, son faible typage, son typage dynamique et son chargement dynamique.</p></blockquote><p id="r-148604" data-claire-element-id="148604">Je vais expliquer point par point cette définition.</p><p id="r-148605" data-claire-element-id="148605">Je l'ai répété plusieurs fois, l'Objective-C est un langage <strong>orienté objet</strong>. Ça veut dire qu'il intègre (presque) toutes les notions de POO existantes. La POO est donc une <strong>très</strong> grosse partie du langage. Nous l'aborderons d'ailleurs dans le prochain chapitre. ;)</p><p id="r-148606" data-claire-element-id="148606">L'Objective-C est un langage <strong>réflexif</strong>. Cela veut dire qu'il a une capacité à se modifier à l'exécution. Par exemple : imaginez qu'en C, vous créiez une variable <code>vie</code> de type <code data-claire-semantic="c">int</code>. Une fois le code compilé, impossible de changer ces informations, n'est-ce pas ? Eh bien, la réflexivité le permet : on peut définir le type d'une variable en fonction d'une chaîne de caractères par exemple. En gros, le type d'une variable peut changer à l'exécution, cela dépend souvent des actions de l'utilisateur. La réflexivité est une notion un peu avancée, que l'on ne verra pas avant un petit moment. ^^</p><p id="r-148607" data-claire-element-id="148607">L'Objective-C est une <strong>extension du C</strong>. Cela veut dire que l'Objective-C se construit autour des mécanismes du C ; il hérite donc de sa syntaxe. Mais l'Objective-C est une stricte <em>surcouche</em> du C. Cela veut dire que n'importe quel code écrit en C est compilable par un compilateur Objective-C. Il n'y a aucune incompatibilité entre le C et l'Objective-C, contrairement au C++.</p><p id="r-148608" data-claire-element-id="148608">L'Objective-C utilise un système de <strong>messages</strong> : c'est la clé de voûte de l'Objective-C. C'est une partie du langage qui est héritée de Smalltalk. Les messages servent principalement à la POO, nous en verrons dans le prochain chapitre.</p><p id="r-148609" data-claire-element-id="148609">L'Objective-C possède un <strong>typage dynamique</strong> et <strong>faible</strong> : le type d'une variable est défini à l'exécution, et il peut changer en cours de route. Pour plus d'informations sur le typage, je vous conseille ce tutoriel : <em><a href="http://www.siteduzero.com/tutoriel-3-37366-le-typage-presentation-thematique-et-historique.html">Le typage : présentation thématique et historique</a></em>.</p><p id="r-148610" data-claire-element-id="148610">L'Objective-C possède un système de <strong>chargement dynamique</strong>. Ça ne veut pas dire grand-chose comme ça, mais en réalité, l'Objective-C s'exécute dans un <em>runtime</em>, à la manière de Java. Il y a donc une machine virtuelle qui se charge de distribuer les <strong>messages</strong>, de créer les objets et les classes, d'évaluer le type des variables, etc. En revanche, il n'y a pas besoin d'installer une machine comme Java, et elle est beaucoup plus légère que celle de Java. :)</p><aside id="r-148612" data-claire-element-id="148612" data-claire-semantic="warning"><p id="r-148611" data-claire-element-id="148611">Il se peut (c'est même fortement probable) que vous ne compreniez que peu ces définitions. Ne vous en faites pas, nous aborderons chacun de ces points en temps voulu. :)</p></aside><h5 id="r-organisation-du-code" data-claire-element-id="148615">Organisation du code</h5><p id="r-148614" data-claire-element-id="148614">Tout comme un fichier de code C, l'Objective-C attribue sa propre extension à un fichier de code Objective-C. Par exemple : un_fichier.m (l'extension est donc « m »). Les fichiers <em>headers</em>, en revanche, ne changent pas leur extension : on a toujours le fichier « .h ».<br/> Il y a aussi des conventions d'organisation du code pour les objets, mais nous verrons cela plus tard.</p><h5 id="r-quels-logiciels" data-claire-element-id="148617">Quels logiciels ?</h5><p id="r-148616" data-claire-element-id="148616">Comme d'habitude : un éditeur de texte, un compilateur et un débogueur. Il n'y a aucun des trois qui soit spécifique à l'Objective-C, sauf peut-être le compilateur : GCC est le plus répandu pour l'Objective-C. Il y a également des IDE disponibles pour l'Objective-C : sous Mac, le plus adapté est Xcode. C'est un IDE fourni avec Mac OS X. Sous GNU/Linux, il y a ProjectCenter.app, qui fait partie du projet GNUstep. Nous verrons également deux logiciels pour développer des interfaces graphiques : Interface Builder sous Mac OS X et Gorm.app avec GNUstep.</p><h5 id="r-ou-se-documenter" data-claire-element-id="148619">Où se documenter ?</h5><p id="r-148618" data-claire-element-id="148618">Nous utiliserons beaucoup des objets du<em> framework</em> Foundation. C'est une collection d'objets qui sont indispensables au bon fonctionnement de l'Objective-C. La documentation officielle d'Apple se trouve sur leur site : <a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/ObjC_classic/index.html">http://developer.apple.com/mac/library [...] ic/index.html</a>. La documentation officielle de GNUstep se trouve sur leur wiki : <a href="http://wiki.gnustep.org/index.php/Foundation">http://wiki.gnustep.org/index.php/Foundation</a> ; elle est en revanche <em>fortement</em> incomplète.<br/> Il y a dans ces documents la liste de tous les objets disponibles, ainsi que leur usage, etc. Vous n'aurez dans un premier temps pas besoin de la documentation, mais gardez-la toujours à portée de main, c'est le bien le plus précieux du programmeur. :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
<span class="arrow"></span>
<span class="next">Historique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
<span class="next">Comment faire ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Commentfaire"></a><h2>Comment faire ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
<span class="arrow"></span>
<span class="next">Comment ça marche ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">
<span class="next">À l&#039;assaut de l&#039;Objective-C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-comment-faire-3" data-claire-element-id="148644">Comment faire ?</h4><h5 id="r-installation-20" data-claire-element-id="148622">Installation</h5><p id="r-148621" data-claire-element-id="148621">L'Objective-C est un langage multi plates-formes, bien que certains le cantonnent à Mac OS X et Cocoa. GNUstep est fonctionnel sur les trois systèmes d'exploitation majeurs : GNU/Linux, Mac OS X et (oh surprise :p ) Windows. Sur Mac OS X, par contre, il n'y a pas besoin d'installation supplémentaire : les <em>Xcode tools</em> contiennent tous les logiciels qu'il faut pour développer des applications. Sous GNU/Linux, il faudra installer GCC pour pouvoir compiler du code Objective-C, et GNUstep pour avoir les bibliothèques spécifiques au langage et les outils de développement. Pour cela, il vous faudra installer les paquets <strong>gnustep</strong> et <strong>gnustep-devel</strong>. Sous Windows, la procédure est décrite sur <a href="http://www.gnustep.org/experience/Windows.html">cette page</a>. Je ne sais pas en revanche si la man?uvre est fiable. :-°</p><h5 id="r-compilation-3" data-claire-element-id="148643">Compilation</h5><p id="r-148623" data-claire-element-id="148623">En théorie, GCC peut compiler de l'Objective-C sans poser de problème, avec l'option <code>-x objective-c</code>. En revanche, pour pouvoir profiter de tous les outils fournis par GNUstep et Cocoa, il faut <em>linker</em> avec les bibliothèques, c'est-à-dire les « inclure » dans le programme. Sur Mac OS X, Xcode fait cela automatiquement. Pour créer un nouveau projet en Objective-C, il faut choisir le <strong>Foundation Tool</strong> dans la liste des projets disponibles.</p><figure id="r-148625" data-claire-element-id="148626"><img id="r-148624" data-claire-element-id="148624" src="medias/uploads.siteduzero.com_files_261001_262000_261279.png" alt="Image utilisateur"/></figure><p id="r-148627" data-claire-element-id="148627">La compilation se fait par l'habituel bouton <strong>Build</strong> de Xcode.</p><p id="r-148628" data-claire-element-id="148628">L'IDE principal avec GNUstep se nomme ProjectCenter.app. Une fois GNUstep installé avec les outils de développement, lancez ProjectCenter.app avec la commande suivante :</p><pre id="r-148629" data-claire-element-id="148629"><code data-claire-semantic="console">openapp ProjectCenter.app</code></pre><aside id="r-148631" data-claire-element-id="148631" data-claire-semantic="warning"><p id="r-148630" data-claire-element-id="148630">Cette technique est la seule façon valable de lancer des applications GNUstep. Le problème, c'est que le processus de ProjectCenter restera lié au terminal que vous utilisez. Pour contourner le problème, utilisez la commande <code>nohup</code> : <code data-claire-semantic="console">nohup openapp ProjectCenter.app &gt;/dev/null 2&gt;&amp;1 &amp;</code></p></aside><p id="r-148632" data-claire-element-id="148632">Dans le menu en haut à gauche, sélectionnez <em>Project &gt; New</em> pour créer un nouveau projet.<br/> Dans la fenêtre qui s'ouvre, choisissez un emplacement pour votre projet, ainsi qu'un nom et un type.</p><figure id="r-148634" data-claire-element-id="148635"><img id="r-148633" data-claire-element-id="148633" src="medias/uploads.siteduzero.com_files_188001_189000_188213.png" alt="Image utilisateur"/></figure><p id="r-148636" data-claire-element-id="148636">Pour le moment, sélectionnez le type <em>Tool</em> dans le menu déroulant.</p><p id="r-148637" data-claire-element-id="148637">Pour compiler le projet, cliquez sur l'icône du tournevis rouge, ce qui ouvre la fenêtre de compilation. Pour compiler, cliquez à nouveau sur le bouton du tournevis, cette fois dans la fenêtre de compilation.</p><p id="r-148638" data-claire-element-id="148638">Pour exécuter le programme, cliquez, dans la fenêtre du projet, sur le bouton avec une fusée. Cela ouvre la fenêtre d'exécution. Pour lancer le programme, cliquez à nouveau sur l'icône de la fusée. Dans le cadre blanc qui se trouve dessous, vous avez la sortie du programme (ce qu'il affiche).</p><p id="r-148639" data-claire-element-id="148640"><a href="../../62.4.17.167/uploads/fr/files/188001_189000/188247.html"><img id="r-148640" data-claire-element-id="148639" src="medias/uploads.siteduzero.com_thb_188001_189000_188247.png" alt="Image utilisateur"/></a>Pour l'instant, contrairement à la capture d'écran, ce cadre n'affiche rien. :-°<br/> Le projet <em>Tool</em> ne se compose que d'un seul fichier de code : main.m. C'est ce fichier que l'on va éditer dans un premier temps, au prochain chapitre.</p><p id="r-148641" data-claire-element-id="148641">Voilà, j'espère que ce premier chapitre vous a plu. En tout cas, vous savez à présent ce qu'est l'Objective-C, d'où il vient et à quoi il sert. Tout au long du tutoriel, je reviendrai également sur Mac OS X et GNUstep, qui sont deux acteurs majeurs de l'Objective-C. ;)</p><p id="r-148642" data-claire-element-id="148642">Bon, jusqu'à présent, l'Objective-C c'était <em>piece of pie, piece of cake</em>. :p Et si on attaquait le code ?</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
<span class="arrow"></span>
<span class="next">Comment ça marche ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">
<span class="next">À l&#039;assaut de l&#039;Objective-C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="l039assautdel039Objective-C"></a><h2>À l&#039;assaut de l&#039;Objective-C</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
<span class="arrow"></span>
<span class="next">Comment faire ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
<span class="next">Pour commencer...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-148646" data-claire-element-id="148646">L'Objective-C (souvent abrégé « ObjC ») est un langage très intéressant qui offre des possibilités immenses, pour peu que vous sachiez vous en servir. :)</p><p id="r-148647" data-claire-element-id="148647">L'approche est assez déroutante, c'est pourquoi je vais commencer par des choses simples pour ce chapitre. Nous découvrirons les différences entre le C et l'Objective-C, ainsi que le fonctionnement des objets, dont on verra les détails dans d'autres chapitres. Les connaissances acquises dans ce premier chapitre seront utiles tout au long du tutoriel, et vous permettront de survivre quand on attaquera les objets du <em>framework</em> Foundation. ;)</p>
</div><a name="Pourcommencer..."></a><h2>Pour commencer...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">
<span class="arrow"></span>
<span class="next">À l&#039;assaut de l&#039;Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
<span class="next">Les objets et l&#039;Objective-C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pour-commencer-1" data-claire-element-id="148678">Pour commencer...</h4><p id="r-148648" data-claire-element-id="148648">Nous avons vu dans le chapitre précédent comment créer un nouveau projet (avec Xcode ou ProjectCenter.app). Chacun de ces projets se base sur un unique (pour le moment) fichier de code source Objective-C. Il porte l'extension *.m.</p><p id="r-148649" data-claire-element-id="148649">Pour commencer, voyons le contenu de ce fichier :</p><pre id="r-148650" data-claire-element-id="148650"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

int main (int argc, const char * argv[])
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    // insert code here...
    NSLog(@&quot;Hello, World!&quot;);
    [pool drain];
    return 0;
}</code></pre><p id="r-148651" data-claire-element-id="148651"><em>Le code par défaut peut changer selon les IDE. Ce code est issu de Xcode. Il est similaire à celui de PC.app, mais par souci d'exactitude et de cohérence, je demanderai aux utilisateurs de PC.app de prendre ce code à la place.</em></p><div id="r-148653" data-claire-element-id="148653" data-claire-semantic="question"><p id="r-148652" data-claire-element-id="148652">L'Objective-C est assez similaire au C ?! C'était une blague ? Il n'y a que des crochets partout !!!</p></div><p id="r-148654" data-claire-element-id="148654">En effet, c'est assez déroutant au premier abord, mais on se fait vite aux crochets, d'autant plus que c'est le point de pivot de l'Objective-C.</p><h6 id="r-pas-a-pas" data-claire-element-id="148670">Pas à pas</h6><p id="r-148655" data-claire-element-id="148655">On va commencer en douceur et voir ce code ligne par ligne.</p><pre id="r-148656" data-claire-element-id="148656"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;</code></pre><p id="r-148657" data-claire-element-id="148657">Cela est une directive de préprocesseur. Vous devez déjà savoir ce que c'est. La seule nouveauté est la directive <code>#import</code> ; elle est très similaire à <code>#include</code>, à ceci près : elle empêche les inclusions infinies, vous n'avez donc plus besoin de protéger les <em>headers</em> avec l'éternel <code>#ifndef</code>. Cette ligne inclut le fichier Foundation.h du <em>framework</em> « Foundation ». Le <em>framework</em> Foundation contient tous les objets nécessaires au bon fonctionnement de l'Objective-C. Il ne sert pas à créer de GUI.</p><pre id="r-148658" data-claire-element-id="148658"><code data-claire-semantic="objective-c">int main (int argc, const char * argv[])</code></pre><p id="r-148659" data-claire-element-id="148659">Cette ligne ne devrait pas être nouvelle pour vous, à part peut-être le <code>const</code> devant le <code>char</code>, qui n'affecte pas grand-chose : c'est une question de goût.</p><pre id="r-148660" data-claire-element-id="148660"><code data-claire-semantic="objective-c">NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];</code></pre><p id="r-148661" data-claire-element-id="148661">Ne vous préoccupez pas de cette ligne pour le moment, on l'abordera plus tard.</p><pre id="r-148662" data-claire-element-id="148662"><code data-claire-semantic="objective-c">NSLog(@&quot;Hello, World!&quot;);</code></pre><p id="r-148663" data-claire-element-id="148663">Cette ligne, vous l'aurez deviné, affiche « Hello, World! » dans la console ; mais pas seulement : elle affiche également les informations spécifiques à votre programme, comme la date, le PID de votre processus, etc. Elle sert principalement à écrire dans les fichiers *.log et ainsi à tracer les bogues, mais elle est très peu utilisée pour les utilitaires en console, tels que le Foundation Tool. Le symbole arobase (<code>@</code>) devant la chaîne de caractères indique que c'est une chaîne d'Objective-C, et non une chaîne C. Exemple :</p><pre id="r-148664" data-claire-element-id="148664"><code data-claire-semantic="objective-c">@&quot;Bonjour !&quot; // Ceci est une chaîne ObjC
&quot;Salut !&quot; // Ceci est une chaîne C</code></pre><p id="r-148665" data-claire-element-id="148665">En Objective-C, on peut bien sûr mélanger les deux, mais il est préférable de prendre l'habitude de travailler avec des chaînes Objective-C. La plupart des fonctions que vous allez utiliser vont attendre une chaîne Objective-C.</p><pre id="r-148666" data-claire-element-id="148666"><code data-claire-semantic="objective-c">[pool drain];</code></pre><p id="r-148667" data-claire-element-id="148667">Ceci est un message, pour les plus curieux. On verra plus tard ce qu'ils signifient.</p><pre id="r-148668" data-claire-element-id="148668"><code data-claire-semantic="objective-c">return 0;</code></pre><p id="r-148669" data-claire-element-id="148669">Sans commentaire ? :D</p><h6 id="r-nouveautes" data-claire-element-id="148677">Nouveautés</h6><p id="r-148671" data-claire-element-id="148671">À présent, je vais expliquer quelques nouveaux points de l'Objective-C par rapport au C. Tout comme le C++, l'Objective-C fait quelques ajouts au langage C pour faciliter son utilisation. Voyons d'abord le type <code>BOOL</code>.</p><p id="r-148672" data-claire-element-id="148672"><code>BOOL</code> est un type de booléen. Comme il en manquait un au C (bien qu'on n'en ait pas vraiment besoin), les créateurs de l'Objective-C ont décidé de le rajouter. Une variable de type <code>BOOL</code> se déclare comme n'importe quelle autre variable ; exemple :</p><pre id="r-148673" data-claire-element-id="148673"><code data-claire-semantic="objective-c">BOOL estRouge;</code></pre><p id="r-148674" data-claire-element-id="148674">Un <code>BOOL</code> ne peut, comme tout bon booléen, avoir que deux valeurs : <code>YES</code> et <code>NO</code>.</p><pre id="r-148675" data-claire-element-id="148675"><code data-claire-semantic="objective-c">BOOL estRouge = YES;
estRouge = NO;

if (estRouge)
   //...
else if (!estRouge)
   //...</code></pre><p id="r-148676" data-claire-element-id="148676">Vous avez compris le principe. En fait, il n'y a pas tellement de différences entre le C et l'Objective-C tant qu'on ne touche pas à l'orienté objet. On peut voir l'apparition d'un autre type de variables : <code>id</code>. Nous l'aborderons dans la partie suivante, qui sera déjà plus avancée en terme de différences.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">
<span class="arrow"></span>
<span class="next">À l&#039;assaut de l&#039;Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
<span class="next">Les objets et l&#039;Objective-C</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesobjetsetl039Objective-C"></a><h2>Les objets et l&#039;Objective-C</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
<span class="arrow"></span>
<span class="next">Pour commencer...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
<span class="next">NSString</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-objets-et-l-objective-c" data-claire-element-id="148741">Les objets et l'Objective-C</h4><p id="r-148679" data-claire-element-id="148679">C'est dans cette partie que l'on apprendra à déchiffrer puis comprendre le code orienté objet que nous avons vu dans l'extrait au-dessus.</p><h5 id="r-les-objets-1" data-claire-element-id="148740">Les objets</h5><p id="r-148680" data-claire-element-id="148680">Je vous rabats les oreilles avec la programmation orientée objet et les objets depuis tout à l'heure, il serait donc temps de mettre les choses au clair. Commençons par voir un peu ce qu'est la programmation orientée objet. Pour faire simple, c'est une façon de programmer qui utilise des objets. Les objets sont un type de variables, comme un <code>int</code>. Évidemment, ce n'est pas aussi simple que ça ; je vais expliquer ce qu'est un objet tout de suite, pour éviter les confusions.</p><p id="r-148681" data-claire-element-id="148681">Vous vous souvenez des structures, ces variables composées de sous-variables ? Voici un exemple pour vous rafraîchir la mémoire :</p><pre id="r-148682" data-claire-element-id="148682"><code data-claire-semantic="objective-c">struct Personne
{
   char * adresse;
   char * nom;
   int age;
};</code></pre><p id="r-148683" data-claire-element-id="148683">On peut accéder aux sous-variables par le point (<code>.</code>), comme ceci :</p><pre id="r-148684" data-claire-element-id="148684"><code data-claire-semantic="objective-c">struct Personne monVoisin;
monVoisin.age = 34;</code></pre><p id="r-148685" data-claire-element-id="148685">Imaginez un objet comme une structure. Il contient des sous-variables. Mais en plus de ces variables, il contient autre chose (sinon, on utiliserait une structure toute bête) : l'objet peut contenir des <strong>fonctions</strong>, qui vont servir à manipuler les variables internes, qui sont <em>l'interface</em>. Les fonctions sont appelées <em>méthodes</em>.</p><p id="r-148686" data-claire-element-id="148686">Les objets simplifient les fonctions qui servent à manipuler les structures dans une bibliothèque comme la SDL. Les fonctions sont <em>intégrées</em> à la structure.</p><p id="r-148687" data-claire-element-id="148687">Voici un schéma pour mieux illustrer ça :) :</p><figure id="r-148689" data-claire-element-id="148690"><img id="r-148688" data-claire-element-id="148688" src="medias/uploads.siteduzero.com_files_187001_188000_187194.png" alt="Image utilisateur"/></figure><p id="r-148691" data-claire-element-id="148691">Le type « objet » en Objective-C est le type <code>id</code>. On déclare un objet comme ceci :</p><pre id="r-148692" data-claire-element-id="148692"><code data-claire-semantic="objective-c">id unObjet;</code></pre><p id="r-148693" data-claire-element-id="148693">Dans cet exemple, <code>unObjet</code> est générique et ne fait absolument rien, il n'a aucune caractéristique.</p><p id="r-148694" data-claire-element-id="148694">Comme je l'ai dit, un objet a aussi des méthodes, fonctions qui agissent sur ses variables internes. Voici comment procéder pour appeler la méthode d'un objet :</p><pre id="r-148695" data-claire-element-id="148695"><code data-claire-semantic="objective-c">[unObjet uneMethode];</code></pre><p id="r-148696" data-claire-element-id="148696">On dit qu'on envoie un message à l'objet. Nous avons vu dans le premier chapitre que c'est le <em>runtime</em> de l'Objective-C qui s'occupe des messages, à l'exécution du programme ; voici comment cela se passe (en version simplifiée :) ) :</p><figure id="r-148698" data-claire-element-id="148699"><img id="r-148697" data-claire-element-id="148697" src="medias/uploads.siteduzero.com_files_188001_189000_188324.png" alt="Image utilisateur"/></figure><p id="r-148700" data-claire-element-id="148700">La syntaxe d'un message est un peu particulière. Ce qu'il y a entre crochets est le contenu du message, séparé en deux parties : à gauche, le receveur est l'objet qui va recevoir le message et exécuter la méthode appelée ; à droite, c'est la méthode elle-même.</p><pre id="r-148701" data-claire-element-id="148701"><code data-claire-semantic="objective-c">[receveur methode];</code></pre><p id="r-148702" data-claire-element-id="148702">Un message peut aussi prendre des paramètres :</p><pre id="r-148703" data-claire-element-id="148703"><code data-claire-semantic="objective-c">[receveur methode:parametre];</code></pre><p id="r-148704" data-claire-element-id="148704">On a rajouté au nom de la méthode deux-points, aussi appelés <em>colon</em> en anglais. Notez que ces deux-points <strong>font partie</strong> du nom de la méthode. Si on veut donner plusieurs paramètres à une méthode :</p><pre id="r-148705" data-claire-element-id="148705"><code data-claire-semantic="objective-c">[uneCouleur couleurAvec:234 :192 :0];
[uneCouleur couleurAvecRouge:234 vert:192 bleu:0];</code></pre><p id="r-148706" data-claire-element-id="148706">Quelle est donc la différence entre la première et la deuxième ? Lorsqu'on a plusieurs paramètres, on ajoute au nom de la fonction des <em>labels</em>. Ils servent à séparer les différents paramètres. Un label se compose de <code>:</code> et de texte, comme dans le second exemple. L'avantage de rajouter du texte, c'est la différenciation des paramètres. Dans la première ligne, on ne peut savoir dans quel ordre il faut donner les paramètres, ni même quels paramètres donner. Dans la deuxième, la méthode nous dit clairement ce qu'il faut envoyer. Le nom de la méthode est aussi différent. Dans le premier cas, le sélecteur (le nom de la méthode) est <code>couleurAvec:::</code>, dans le second cas il est <code>couleurAvecRouge:vert:bleu:</code>. Cela peut paraître un peu lourd au premier abord, mais ça évite beaucoup de prises de tête avec des fonctions qui prennent douze arguments et des allers et retours dans la documentation.</p><p id="r-148707" data-claire-element-id="148707">À présent, nous allons étudier un petit bout de code :</p><pre id="r-148708" data-claire-element-id="148708"><code data-claire-semantic="objective-c">id unObjet = nil;
[unObjet uneMethode];</code></pre><pre id="r-148709" data-claire-element-id="148709"><code>unObjet</code></pre><p id="r-148710" data-claire-element-id="148710">est de type <code>id</code>, c'est-à-dire un objet générique. En réalité, <code>unObjet</code> est un pointeur. Tous les objets en Objective-C sont des pointeurs. Ici, on met la valeur du pointeur à <code>nil</code>, qui est un équivalent de <code>NULL</code>, mais pour les objets. Ensuite, on envoie un message à <code>unObjet</code>, qui lui dit d'exécuter la méthode <code>uneMethode</code>.</p><div id="r-148712" data-claire-element-id="148712" data-claire-semantic="question"><p id="r-148711" data-claire-element-id="148711">Mais si l'objet est initialisé avec <code>nil</code>, c'est autorisé de lui envoyer un message ?</p></div><p id="r-148713" data-claire-element-id="148713">Oui, on peut parfaitement le faire. Un objet qui a pour valeur <code>nil</code> peut recevoir toutes sortes de messages. Évidemment, il ne réagira pas, puisque ce n'est pas un objet spécifique.</p><p id="r-148714" data-claire-element-id="148714">Il existe plusieurs types d'objets. Par exemple, vous utilisez dans un programme des objets qui représentent des formes dessinées à l'écran. Mettons un carré dans votre dessin. Il faut donc un pointeur (qui nous servira d'objet) de type <code>Carre</code>. Ensuite, il faut <strong>initialiser</strong> ce pointeur, c'est-à-dire allouer la mémoire pour les variables internes et les méthodes.</p><pre id="r-148715" data-claire-element-id="148715"><code data-claire-semantic="objective-c">id uneForme = [Carre alloc];</code></pre><p id="r-148716" data-claire-element-id="148716">On exécute donc la méthode <code>alloc</code> de l'objet <code>Carre</code>. C'est un objet assez spécial dont nous aurons l'occasion de reparler plus tard. Sachez seulement que c'est un objet constructeur : il construit l'objet dont nous avons besoin en suivant un plan, une procédure. La méthode <code>alloc</code> alloue la mémoire pour les variables et les méthodes. Elle retourne un objet de type <code>id</code>, qui a toutes les caractéristiques d'un <code>Carre</code>. Le problème, c'est qu'elle n'initialise pas les variables. Ça, c'est le rôle de la méthode <code>init</code> de notre objet alloué :</p><pre id="r-148717" data-claire-element-id="148717"><code data-claire-semantic="objective-c">[uneForme init];</code></pre><p id="r-148718" data-claire-element-id="148718">Elle retourne un <code>id</code>. Pour rendre la syntaxe moins chargée, on peut combiner les deux messages :</p><pre id="r-148719" data-claire-element-id="148719"><code data-claire-semantic="objective-c">id uneForme = [[Carre alloc] init];</code></pre><p id="r-148720" data-claire-element-id="148720">Dans les deux méthodes qui s'enchaînent (<code>alloc</code> -&gt; <code>init</code>), <code>Carre</code> est le premier receveur. Le receveur du message <code>init</code> est l'objet retourné par <code>[Carre alloc]</code>. Le tout est stocké dans le pointeur <code>uneForme</code> de type <code>id</code>. Notre objet est donc prêt à être utilisé. Vous aurez peut-être remarqué qu'on ne donne aucune valeur pour les dimensions du carré. Cela aurait pu se faire comme ceci :</p><pre id="r-148721" data-claire-element-id="148721"><code data-claire-semantic="objective-c">id uneForme = [[Carre alloc] initAvecDimension:4];</code></pre><p id="r-148722" data-claire-element-id="148722">On appelle la méthode <code>initAvecDimension</code> pour donner une longueur aux côtés du carré. On peut à présent faire toutes sortes de choses :</p><pre id="r-148723" data-claire-element-id="148723"><code data-claire-semantic="objective-c">[uneForme positionnerEnX:12 y:23];
[uneForme rotation:45];
// etc.</code></pre><p id="r-148724" data-claire-element-id="148724">Pour se débarrasser de <code>uneForme</code>, il faut libérer la mémoire avec la méthode <code>release</code> :</p><pre id="r-148725" data-claire-element-id="148725"><code data-claire-semantic="objective-c">[uneForme release];
uneForme = nil;</code></pre><p id="r-148726" data-claire-element-id="148726">Notez que la deuxième ligne n'est pas obligatoire. Elle n'est utile que dans le cas des objets de type <code>id</code>, si on veut les réutiliser. Ce code, par exemple, est parfaitement valide :</p><pre id="r-148727" data-claire-element-id="148727"><code data-claire-semantic="objective-c">id uneForme = [[Carre alloc] initAvecDimension:4];
[uneForme release];
uneForme = nil;
uneForme = [[Cercle alloc] init];</code></pre><div id="r-148729" data-claire-element-id="148729" data-claire-semantic="question"><p id="r-148728" data-claire-element-id="148728">Quoi ? Il est possible de changer le type d'un objet en cours d'exécution ?</p></div><p id="r-148730" data-claire-element-id="148730">Oui, cela s'appelle le typage dynamique. Comme <code>id</code> est un objet générique (dont on ne connaît pas le type exact), il peut devenir n'importe quel objet. On ne peut connaître son type qu'à l'exécution. Pour « parer » à cela, il faut donner un type spécifique à notre pointeur.</p><pre id="r-148731" data-claire-element-id="148731"><code data-claire-semantic="objective-c">Carre * unCarre = [[Carre alloc] init];</code></pre><p id="r-148732" data-claire-element-id="148732">Attention, cette fois on met l'étoile du pointeur. Quand on crée un objet de type <code>id</code>, elle est implicite. À présent, <code>unCarre</code> est de type <code>Carre</code> et ne peut être changé en un autre type. Il peut prendre la valeur <code>nil</code>, ce n'est pas interdit.</p><p id="r-148733" data-claire-element-id="148733">Reprenons le code du « Hello, World! » :</p><pre id="r-148734" data-claire-element-id="148734"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

int main (int argc, const char * argv[])
{
   NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

   // insert code here...
   NSLog(@&quot;Hello, World!&quot;);
   [pool drain];
   return 0;
}</code></pre><p id="r-148735" data-claire-element-id="148735">Vous devriez comprendre les lignes surlignées.</p><div id="r-148737" data-claire-element-id="148737" data-claire-semantic="question"><p id="r-148736" data-claire-element-id="148736">Mais l'objet <code>pool</code> n'est pas libéré, où est le <code>[pool release]</code> ?</p></div><p id="r-148738" data-claire-element-id="148738">En fait, la méthode <code>drain</code> de <code>pool</code> libère la mémoire que prenait <code>pool</code>, en plus de remplir la fonction principale d'un <code>NSAutoreleasePool</code>, que l'on abordera plus tard.</p><p id="r-148739" data-claire-element-id="148739">À présent, voyons un peu la pratique. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
<span class="arrow"></span>
<span class="next">Pour commencer...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
<span class="next">NSString</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="NSString"></a><h2>NSString</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
<span class="arrow"></span>
<span class="next">Les objets et l&#039;Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">
<span class="next">Les classes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-nsstring-1" data-claire-element-id="148786">NSString</h4><p id="r-148742" data-claire-element-id="148742">Maintenant que vous savez vous servir des objets en Objective-C, nous allons voir un objet clé du <em>framework</em> Foundation : <code>NSString</code>.</p><h5 id="r-nsstring" data-claire-element-id="148785">NSString</h5><p id="r-148743" data-claire-element-id="148743">Vous l'avez deviné, <code>NSString</code> est un objet qui gère des chaînes de caractères. On pourrait le comparer à <code>string</code> en C++, à quelques grosses différences près. :D</p><p id="r-148744" data-claire-element-id="148744"><code>NSString</code> n'échappe pas à la règle, voici comment créer une <code>NSString</code> :</p><pre id="r-148745" data-claire-element-id="148745"><code data-claire-semantic="objective-c">id chaine = [[NSString alloc] init];</code></pre><p id="r-148746" data-claire-element-id="148746">Le problème, c'est que <code>NSString</code> est défini comme un objet immuable. Cela veut dire qu'une fois la chaîne « gravée » dans l'objet, on ne peut la changer. Donc si on l'initialise de cette façon, l'objet sera inutile car il ne contiendra pas de chaîne. Pour l'initialiser avec une chaîne, il faut utiliser la méthode <code>initWithUTF8String:</code>. Le nom de cette méthode peut paraître bizarre : pourquoi donc UTF-8 ? Une petite explication s'impose.</p><h6 id="r-les-chaines-de-caracteres-6" data-claire-element-id="148762">Les chaînes de caractères</h6><p id="r-148747" data-claire-element-id="148747">Le système des chaînes de caractères en Objective-C n'est pas le même que celui du C. L'Objective-C utilise des symboles différents autres que les guillemets pour désigner une chaîne. Voici deux façons de manipuler une chaîne, en C et Objective-C, avec deux méthodes similaires : <code>printf()</code> et <code>NSLog()</code>.</p><pre id="r-148748" data-claire-element-id="148748"><code data-claire-semantic="objective-c">printf(&quot;Voici une chaine de caractères en C.&quot;);
NSLog(@&quot;Voici une chaine de caractères en Objective-C.&quot;);</code></pre><p id="r-148749" data-claire-element-id="148749">Notez bien le symbole <code>@</code>, que l'on a d'ailleurs déjà vu dans le « Hello, World! » au même endroit. Une chaîne en Objective-C se délimite comme ceci : <code>@&quot;chaine&quot;</code>. Mais j'ai déjà parlé de ça un peu plus haut.</p><div id="r-148751" data-claire-element-id="148751" data-claire-semantic="question"><p id="r-148750" data-claire-element-id="148750">Quel rapport avec la méthode d'initialisation de <code>NSString</code> ?</p></div><p id="r-148752" data-claire-element-id="148752">J'y viens. Quand on exécute la méthode <code>initWithUTF8String:</code>, celle-ci attend en paramètre une <code>UTF8String</code>, autrement dit une chaîne C. Cette méthode, en revanche, n'est pas extrêmement utile. En effet, comme en C++, pourquoi utiliser des <code>char []</code> quand on peut utiliser des <code>string</code> ? La méthode d'initialisation de <code>NSString</code> qui fait appel aux chaînes Objective-C (aux <code>NSString</code> en fait) est <code>initWithString:</code>. Exemple :</p><pre id="r-148753" data-claire-element-id="148753"><code data-claire-semantic="objective-c">NSString * chaineAvecChaineObjC = [[NSString alloc] initWithString:@&quot;Hello World!&quot;]; // ObjC : @&quot;...&quot;
NSString * chaineAvecChaineC = [[NSString alloc] initWithUTF8String:&quot;Hello World!&quot;]; // C : &quot;...&quot;</code></pre><p id="r-148754" data-claire-element-id="148754">Ces deux syntaxes sont absolument équivalentes, mais je vous conseille vivement d'utiliser la première, d'autant plus que les chaînes que vous manipulerez avec Foundation et Cocoa seront toujours des <code>NSString</code>.</p><p id="r-148755" data-claire-element-id="148755">Il ne reste plus qu'à libérer la mémoire avec <code>release</code>.</p><pre id="r-148756" data-claire-element-id="148756"><code data-claire-semantic="objective-c">[chaine release];</code></pre><p id="r-148757" data-claire-element-id="148757">On peut aussi initialiser avec d'autres fonctions. Il y a la méthode de classe <code>stringWithString:</code>. Une méthode de classe est une méthode qui appartient à un objet de classe, cet objet « usine » qui sert à construire des objets courants. Donc <code>stringWithString:</code> appartient à l'objet de classe <code>NSString</code>. Voici comment on l'utilise :</p><pre id="r-148758" data-claire-element-id="148758"><code data-claire-semantic="objective-c">id chaine = [NSString stringWithString:@&quot;Hello World!&quot;];</code></pre><p id="r-148759" data-claire-element-id="148759">La particularité de cette méthode est la gestion de la mémoire. Vous pouvez voir que l'appel à la méthode <code>alloc</code>, également méthode de <code>NSString</code>, a disparu. Plus d'<code>alloc</code>, plus de <code>release</code>. :p La mémoire est gérée automatiquement. La prochaine méthode d'initialisation est la plus simple, elle est strictement équivalente à celle que nous venons de voir avec <code>stringWithString:</code> :</p><pre id="r-148760" data-claire-element-id="148760"><code data-claire-semantic="objective-c">NSString * chaine = @&quot;Hello World!&quot;;</code></pre><p id="r-148761" data-claire-element-id="148761">Simple, <em>isn't it</em> ? La gestion de la mémoire est la même que précédemment, pas d'<code>alloc</code>, pas de <code>release</code>.</p><h6 id="r-d-autres-methodes" data-claire-element-id="148784">D'autres méthodes</h6><p id="r-148763" data-claire-element-id="148763">Les <code>NSString</code> sont des objets assez complets, et je vais m'efforcer de faire une liste sommaire des différentes méthodes qu'elles proposent.</p><p id="r-148764" data-claire-element-id="148764"><code>length</code> : comme son nom l'indique en anglais, cette méthode retourne le nombre de caractères d'une chaîne.</p><pre id="r-148765" data-claire-element-id="148765"><code data-claire-semantic="objective-c">int nb_caracteres = [chaine length];</code></pre><p id="r-148766" data-claire-element-id="148766"><code>characterAtIndex:(int) index</code> : prend en paramètre un entier qui représente le numéro de la case mémoire du caractère que l'on veut récupérer. 0 est l'index de la première case, comme en C. Attention toutefois, on ne peut pas utiliser les crochets comme en C ou en C++.</p><pre id="r-148767" data-claire-element-id="148767"><code data-claire-semantic="objective-c">char caractere = chaineC[3];
char caractere = [chaineObjC characterAtIndex: 3];</code></pre><p id="r-148768" data-claire-element-id="148768">Si on donne en paramètre un index plus grand que la taille de la chaîne, la méthode envoie une exception. C'est une erreur qui peut être traitée, on verra plus tard de quelle manière.</p><p id="r-148769" data-claire-element-id="148769"><code>stringByAppendingString: (NSString *) chaine</code> : prend en paramètre une autre <code>NSString</code> pour l'ajouter à la fin de la chaîne receveuse du message, et retourne une nouvelle chaîne (rappel : les <code>NSString</code> sont immuables).</p><pre id="r-148770" data-claire-element-id="148770"><code data-claire-semantic="objective-c">NSString * hello = @&quot;Hello, &quot;;
NSString * name = @&quot;my name is prs !&quot;;
NSString * presentation = [hello stringByAppendingString:name];</code></pre><p id="r-148771" data-claire-element-id="148771"><code>initWithFormat: (NSString *)format, ...</code> : cette méthode d'initialisation est un peu spéciale. Elle fait appel aux formats (rien à voir avec les formats de fichiers). Pour les comprendre, je vous propose un bout de code en C :</p><pre id="r-148772" data-claire-element-id="148772"><code data-claire-semantic="objective-c">printf(&quot;Nous sommes le %s, il fait %d degrés et je vais au boulot.&quot;, date, temperature);</code></pre><p id="r-148773" data-claire-element-id="148773">La chaîne comporte des <code>%s</code>, des <code>%d</code>, qui vont être remplacés par les valeurs de <code>date</code> et <code>temperature</code>. <code>initWithFormat:</code> fait exactement la même chose que <code>printf()</code> :</p><pre id="r-148774" data-claire-element-id="148774"><code data-claire-semantic="objective-c">id chaine = [NSString stringWithFormat:@&quot;Bonjour, mon nom est %@ et j'ai %d ans !&quot;, nom, age];</code></pre><p id="r-148775" data-claire-element-id="148775">Ici, on utilise la méthode de classe <code>stringWithFormat:</code>, mais le résultat est le même. Vous remarquerez le <code>%@</code>, qui sert à insérer une <code>NSString</code> dans une autre. C'est une sorte de remplacement pour <code>%s</code>. Attention tout de même, les virgules que l'on met entre les différentes valeurs des symboles de la chaîne formatée ne font pas partie du nom de la fonction. D'ailleurs, dans la documentation, <code>initWithFormat:</code> ne comporte pas de virgules. Ne les confondez pas en revanche avec les <code>:</code>, eux séparent des arguments définis dont on connaît le type (avec <code>printf()</code>, ceux-ci sont indéfinis), et font partie du nom de la fonction. Souvenez-vous de <code>couleurAvecRouge:vert:bleu:</code>.</p><p id="r-148776" data-claire-element-id="148776"><code>UTF8String</code> : retourne une chaîne de type C si jamais vous en avez besoin.</p><pre id="r-148777" data-claire-element-id="148777"><code data-claire-semantic="objective-c">char * chaineC = [chaineObjC UTF8String];</code></pre><p id="r-148778" data-claire-element-id="148778"><code>isEqualToString: (NSString *) autreChaine</code> : retourne un booléen qui vaut <code>YES</code> si les chaînes sont égales (si elles ont le même <code>id</code> ou si les caractères sont les mêmes dans le même ordre).</p><pre id="r-148779" data-claire-element-id="148779"><code data-claire-semantic="objective-c">if ( [chaine1 isEqualToString:chaine2] )
   // ...</code></pre><p id="r-148780" data-claire-element-id="148780">Les fonctions de recherche dans une <code>NSString</code> utilisent des objets et des structures qui n'ont pas d'intérêt à être vus maintenant.</p><p id="r-148781" data-claire-element-id="148781">Pour une liste exhaustive des différentes fonctions de <code>NSString</code>, allez voir la documentation sur le site d'Apple : <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html">NSString</a>.</p><p id="r-148782" data-claire-element-id="148782">Pour utiliser une chaîne de caractères que vous pouvez modifier après l'initialisation, utilisez <a href="http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSMutableString_Class/Reference/Reference.html">NSMutableString</a>. Les méthodes d'initialisation sont les mêmes qu'avec <code>NSString</code>, bien qu'elles n'apparaissent pas dans la documentation.</p><p id="r-148783" data-claire-element-id="148783">Voici le chapitre terminé. (Déjà ?!) Mine de rien, vous avez fait un sacré bout de chemin. Dans le prochain chapitre, nous verrons comment créer nos propres objets, qui répondent à des méthodes que nous aurons nous-mêmes écrites. N'hésitez pas à revoir ce chapitre, il explique les bases de l'Objective-C qui seront essentielles pour la suite, surtout dans les deux prochains chapitres. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
<span class="arrow"></span>
<span class="next">Les objets et l&#039;Objective-C</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">
<span class="next">Les classes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesclasses"></a><h2>Les classes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
<span class="arrow"></span>
<span class="next">NSString</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
<span class="next">Explications</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-148788" data-claire-element-id="148788">À présent que vous avez fait vos premiers pas en Objective-C, je vous propose d'entrer dans le vif du sujet et d'attaquer un très gros morceau du langage, même si on n'est qu'au début du tutoriel (ne vous inquiétez pas, j'en garde pour la fin :p ).</p><p id="r-148789" data-claire-element-id="148789">Au menu aujourd'hui : les <strong>interfaces</strong>, les <strong>méthodes</strong>, et l'<strong>implémentation</strong>, le tout sur plusieurs classes (<code>Voiture</code>, <code>Personnage</code>, etc.) qui nous suivront sur quelques chapitres. ;)</p>
</div><a name="Explications"></a><h2>Explications</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">
<span class="arrow"></span>
<span class="next">Les classes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
<span class="next">L&#039;interface</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-explications-10" data-claire-element-id="148820">Explications</h4><p id="r-148790" data-claire-element-id="148790">On a beaucoup parlé des objets dans le dernier chapitre. Pour récapituler, un objet est constitué de sous-variables (ou variables membres), ainsi que de méthodes.</p><p id="r-148791" data-claire-element-id="148791">Un objet répond à un type, c'est-à-dire que deux objets du même type possèdent les mêmes variables et les mêmes méthodes. On peut donc les comparer. Ils sont également issus du même procédé de fabrication. Et ils ont tous deux la même classe. On dit qu'un objet issu d'une classe est une instance de cette classe.</p><h5 id="r-les-classes-plan-de-fabrication" data-claire-element-id="148819">Les classes, plan de fabrication</h5><p id="r-148792" data-claire-element-id="148792">Une classe définit en réalité les variables membres et les méthodes d'un objet. La classe est le squelette d'un objet. Elle donne à l'objet différentes caractéristiques : une <strong>interface</strong>, ainsi que des méthodes, et bien sûr leur implémentation.</p><h6 id="r-l-interface-3" data-claire-element-id="148806">L'interface</h6><p id="r-148793" data-claire-element-id="148793">L'interface, c'est l'ensemble des variables membres. Elle est la même pour chaque objet d'un type donné. En revanche, la valeur des variables peut changer en cours d'exécution (incrémentation de compteur, changement de <code>NSString</code>, etc.).<br/> On pourrait comparer l'interface d'un objet avec une structure C, à un seul point près : les variables sont inaccessibles depuis l'extérieur.</p><div id="r-148795" data-claire-element-id="148795" data-claire-semantic="question"><p id="r-148794" data-claire-element-id="148794">Ça veut dire quoi exactement ?</p></div><p id="r-148796" data-claire-element-id="148796">Prenons une structure en C toute simple. Une fois une variable créée de type <code>struct QuelqueChose</code>, on peut en modifier les sous-variables :</p><pre id="r-148797" data-claire-element-id="148797"><code data-claire-semantic="c">struct QuelqueChose {
     int foo;
     double bar;
};

/* ... */

struct QuelqueChose machin;
machin.foo = 42;
machin.bar = 3.1415;</code></pre><p id="r-148798" data-claire-element-id="148798">Avec un objet, on ne peut tout simplement pas. En fait, ce n'est pas entièrement vrai. Le programmeur ne peut pas modifier lui-même la valeur des variables membres : c'est l'objet qui va modifier ses propres variables. Le fait que les variables ne soient pas accessibles depuis l'<em>extérieur</em> de l'objet s'appelle l'encapsulation des données.</p><figure id="r-148800" data-claire-element-id="148801"><img id="r-148799" data-claire-element-id="148799" src="medias/uploads.siteduzero.com_files_190001_191000_190051.png" alt="Image utilisateur"/></figure><p id="r-148802" data-claire-element-id="148802">Comme le montre le schéma, on ne peut modifier les variables membres que depuis les méthodes de l'objet. C'est le principe de l'encapsulation. :)</p><div id="r-148804" data-claire-element-id="148804" data-claire-semantic="question"><p id="r-148803" data-claire-element-id="148803">Mais alors, comment fait-on quand on veut modifier les variables « à la main » ?</p></div><p id="r-148805" data-claire-element-id="148805">Une des solutions à l'encapsulation est de définir des <em>accesseurs</em>. Nous verrons ce qu'ils sont au cours de ce chapitre.</p><h6 id="r-les-methodes-8" data-claire-element-id="148816">Les méthodes</h6><p id="r-148807" data-claire-element-id="148807">Le rôle d'une classe est également de définir les méthodes d'un objet, ainsi que leur implémentation (rappel : une méthode se définit en deux parties, le prototype et l'implémentation).</p><p id="r-148808" data-claire-element-id="148808">On distingue deux types de méthodes : les méthodes qui appartiennent à un objet, dites méthodes d'instance, et les méthodes qui appartiennent à la classe, dites méthodes de classe. Quelle est la différence entre les deux ? Les méthodes d'instance requièrent qu'un objet soit créé pour pouvoir être appelées. Par exemple :</p><pre id="r-148809" data-claire-element-id="148809"><code data-claire-semantic="objective-c">NSMutableString * chaine = @&quot;foo&quot;;
[chaine setString:@&quot;bar&quot;];</code></pre><p id="r-148810" data-claire-element-id="148810">La méthode <code>setString:</code> est une méthode d'instance. On la reconnaît également par le message envoyé à l'objet : le receveur est le nom de l'objet créé.</p><p id="r-148811" data-claire-element-id="148811">La méthode de classe, en revanche, ne requiert pas d'objet créé au préalable :</p><pre id="r-148812" data-claire-element-id="148812"><code data-claire-semantic="objective-c">NSMutableString * chaine = [NSMutableString stringWithString:@&quot;foo&quot;];</code></pre><p id="r-148813" data-claire-element-id="148813">Vous remarquerez que le message n'est pas adressé à l'objet <code>chaine</code>, mais à la classe <code>NSMutableString</code>. La méthode n'a pas besoin de l'objet <code>chaine</code>, car à l'exécution de <code>stringWithString</code>, celui-ci n'existe pas encore.</p><aside id="r-148815" data-claire-element-id="148815" data-claire-semantic="warning"><p id="r-148814" data-claire-element-id="148814">Je suis un peu obligé de mentir pour ne pas compliquer les choses, mais le receveur du message <code>[NSMutableString stringWithString:@&quot;foo&quot;]</code> est un <em>objet-classe</em>. Il peut agir comme un objet quelconque (recevoir des messages), mais il sert principalement à construire des objets « normaux ». Nous en reparlerons dans la réflexivité de l'Objective-C. ;)</p></aside><h6 id="r-s-organiser" data-claire-element-id="148818">S'organiser</h6><p id="r-148817" data-claire-element-id="148817">En Objective-C, la convention dicte au programmeur de séparer les déclarations d'une classe de l'implémentation des méthodes. Une classe se constitue de deux fichiers : un *.h, qui contient l'interface et les prototypes, et un *.m (compilé) qui contiendra l'implémentation des méthodes.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">
<span class="arrow"></span>
<span class="next">Les classes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
<span class="next">L&#039;interface</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="L039interface"></a><h2>L&#039;interface</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
<span class="arrow"></span>
<span class="next">Explications</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
<span class="next">Les méthodes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-l-interface-4" data-claire-element-id="148827">L'interface</h4><p id="r-148821" data-claire-element-id="148821">Maintenant qu'on a établi quelques bases, voyons un peu de code <em>(dans un fichier *.h)</em> :</p><pre id="r-148822" data-claire-element-id="148822"><code data-claire-semantic="objective-c">@interface Voiture : NSObject
{
      int kilometres;
      int essence;
}

@end</code></pre><p id="r-148823" data-claire-element-id="148823">On retrouve bien ici le symbole <code>@</code> qui sert à marquer les mots-clés de l'Objective-C. La première ligne sert à déclarer la classe <code>Voiture</code>, qui hérite de <code>NSObject</code>, la classe de base pour tout objet. Contrairement au C++, tous les objets doivent impérativement hériter de <code>NSObject</code>. Cette classe définit des variables et des pointeurs nécessaires au bon fonctionnement d'un objet. Nous verrons l'héritage plus en détail au prochain chapitre. ;)</p><p id="r-148824" data-claire-element-id="148824">Les variables membres sont ici <code>kilometres</code> et <code>essence</code>, toutes deux de type <code>int</code>. Un objet, comme une structure C, peut contenir tout type de variables ainsi que tout type d'objets, même inconnu, car on peut utiliser <code>id</code> qui, je le rappelle, symbolise un objet générique.</p><pre id="r-148825" data-claire-element-id="148825"><code data-claire-semantic="objective-c">@interface Voiture : NSObject
{
        id moteur;
        NSArray * passagers;
}

@end</code></pre><p id="r-148826" data-claire-element-id="148826">Ici, on utilise un objet <code>id</code> dont on ne connaît pas le type exact (mais que l'on peut deviner dans cet exemple). On utilise aussi un objet <code>NSArray</code>, qui est un tableau dynamique, un peu comme <code>std::vector</code> en C++, sauf que le <code>NSArray</code> n'a pas de limite au niveau du type de l'objet contenu : un objet <code>Voiture</code> peut très bien se trouver avec un objet <code>Personne</code> ou <code>NSString</code>.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
<span class="arrow"></span>
<span class="next">Explications</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
<span class="next">Les méthodes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesmthodes"></a><h2>Les méthodes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
<span class="arrow"></span>
<span class="next">L&#039;interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
<span class="next">Les conventions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-methodes-9" data-claire-element-id="148841">Les méthodes</h4><p id="r-148828" data-claire-element-id="148828">C'est ici que ça devient intéressant. On va voir à présent comment définir les méthodes qui vont agir sur les variables qui constituent l'interface. Une méthode se définit, en Objective-C, différemment d'une fonction C classique. Comme une fonction, il faut énoncer le type de la méthode, le nom de la méthode, ainsi que les différents paramètres dont elle a besoin. Mais en plus de ça, il faut définir si une méthode est une méthode de classe ou une méthode d'instance.</p><p id="r-148829" data-claire-element-id="148829">Commençons par <code>- init</code>, la méthode d'initialisation.</p><pre id="r-148830" data-claire-element-id="148830"><code data-claire-semantic="objective-c">@interface Voiture : NSObject
{
        id moteur;
        NSArray * passagers;
}

- (id) init; // Voici la déclaration de - init

@end</code></pre><p id="r-148831" data-claire-element-id="148831">Déjà, la première question que l'on se pose est : « Ça veut dire quoi le moins devant la déclaration ? » C'est justement pour ça que j'ai parlé des méthodes de classe. Le symbole <code>-</code> veut dire « méthode d'instance ». Ainsi, quand je parle de méthodes d'instance, je mets le symbole <code>-</code> devant, pour faire la différence.</p><div id="r-148833" data-claire-element-id="148833" data-claire-semantic="question"><p id="r-148832" data-claire-element-id="148832">Mais alors, comment définit-on une méthode de classe ?</p></div><p id="r-148834" data-claire-element-id="148834">Avec le symbole <code>+</code>. Voici une méthode de classe :</p><pre id="r-148835" data-claire-element-id="148835"><code data-claire-semantic="objective-c">@interface Voiture : NSObject
{
        id moteur;
        NSArray * passagers;
}

+ (id) voitureAvecPassagers: (NSArray *) passagers; // Méthode de classe

- (id) init; // Méthode d'objet

@end</code></pre><p id="r-148836" data-claire-element-id="148836">Ainsi, si on veut une <code>Voiture</code> initialisée avec des passagers, on procédera de cette manière :</p><pre id="r-148837" data-claire-element-id="148837"><code data-claire-semantic="objective-c">Voiture * taxi = [Voiture voitureAvecPassagers:clients];</code></pre><p id="r-148838" data-claire-element-id="148838">On appelle bien la méthode de classe. Si on veut une <code>Voiture</code> sans passager, par exemple, on utilisera <code>- init</code> :</p><pre id="r-148839" data-claire-element-id="148839"><code data-claire-semantic="objective-c">Voiture * tacot = [[Voiture alloc] init];</code></pre><p id="r-148840" data-claire-element-id="148840">Ici, on appelle la méthode de classe <code>+ alloc</code> qui va allouer la mémoire pour chaque variable.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
<span class="arrow"></span>
<span class="next">L&#039;interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
<span class="next">Les conventions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesconventions"></a><h2>Les conventions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
<span class="arrow"></span>
<span class="next">Les méthodes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">
<span class="next">L&#039;héritage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-conventions" data-claire-element-id="148902">Les conventions</h4><p id="r-148842" data-claire-element-id="148842">Évidemment, comme dans tout langage de programmation, il y a des conventions à respecter pour être compatible avec les autres objets et bibliothèques. En effet, si vous créez une méthode dans une classe et que vous ne respectez pas les conventions, les programmeurs qui utiliseront votre classe auront du mal à en deviner le fonctionnement.</p><h5 id="r-nommer-une-methode" data-claire-element-id="148847">Nommer une méthode</h5><p id="r-148843" data-claire-element-id="148843">Pour nommer une méthode, on commence toujours par une lettre minuscule : <code>init</code>. À chaque nouveau mot ajouté au nom de la méthode, on ajoute une majuscule : <code>stringWithString</code>. Pour les labels (texte avant les deux-points), on utilise des minuscules : <code>indexOfObject: inRange:</code> (notez que <code>inRange</code> commence par une minuscule, suivie d'une majuscule pour chaque nouveau mot).</p><p id="r-148844" data-claire-element-id="148844">Chaque texte avant un paramètre annonce celui-ci : on sait grâce au nom de la méthode ce qu'elle attend. Ainsi, la méthode <code>indexOfObject: inRange:</code> attend un objet de type <code>id</code> et une structure de type <code>NSRange</code> (attention : ce n'est pas un objet, mais une structure C classique).</p><p id="r-148845" data-claire-element-id="148845">Bien entendu, pour lire et écrire des noms de méthode conformes à ces règles (qui ne sont en aucun cas obligatoires), il faut des petites connaissances en anglais (savoir ce qu'est un <em>range</em> par exemple).</p><p id="r-148846" data-claire-element-id="148846">Mais il y a également des méthodes qu'il faut absolument définir, et qui reprennent toujours le même nom.</p><h5 id="r-les-methodes-d-initialisation" data-claire-element-id="148864">Les méthodes d'initialisation</h5><p id="r-148848" data-claire-element-id="148848">On l'a déjà rencontrée un nombre important de fois (qui va rapidement devenir incalculable) ; la méthode <code>- init</code> est probablement la plus importante méthode d'un objet : c'est elle qui va initialiser toutes les variables d'un objet. Ce serait le constructeur si on parlait de C++.</p><p id="r-148849" data-claire-element-id="148849">Chaque nouvelle classe que vous créez <strong>doit</strong> implémenter cette méthode. Si vous ne le faites pas, c'est la méthode d'initialisation de <code>NSObject</code> qui sera appelée, et celle-ci ne fait pas grand-chose à l'objet que vous voulez définir (si on parlait d'une <code>Voiture</code>, la méthode d'initialisation de <code>NSObject</code> ne ferait que réserver un volume pour la <code>Voiture</code>).</p><p id="r-148850" data-claire-element-id="148850"><code>- init</code> doit donc toujours figurer dans une classe. Elle doit également toujours retourner un objet de type <code>id</code>.</p><pre id="r-148851" data-claire-element-id="148851"><code data-claire-semantic="objective-c">- (id) init;</code></pre><div id="r-148853" data-claire-element-id="148853" data-claire-semantic="question"><p id="r-148852" data-claire-element-id="148852">Comment fait-on si on veut passer des arguments à <code>- init</code> ?</p></div><p id="r-148854" data-claire-element-id="148854">C'est là que l'on fait intervenir les labels. Nous avons vu dans le chapitre précédent que les labels servaient à introduire de nouveaux paramètres. Voici comment écrire le prototype d'une fonction qui comporte des labels et des paramètres :</p><ul id="r-148863" data-claire-element-id="148863"><li id="r-148856" data-claire-element-id="148856"><p id="r-148855" data-claire-element-id="148855">tout d'abord, on décide si notre méthode est une méthode de classe ou non (<code>+</code> ou <code>-</code>). Ensuite, on définit le type de la fonction (le type de la valeur de retour) entre parenthèses : <code data-claire-semantic="objective-c">id, int, NSArray *</code>, etc. On choisit le nom de notre méthode selon la convention : ici, pour une méthode d'initialisation, on va créer un objet avec des valeurs ou d'autres objets. On va utiliser le mot-clé « avec », ou <em>with</em> en anglais. Au début, je vais écrire le nom des méthodes en français, mais il faudra s'habituer à l'anglais, car toutes les méthodes sont écrites en anglais dans Cocoa ou Foundation, ainsi que dans la documentation ;</p></li><li id="r-148858" data-claire-element-id="148858"><p id="r-148857" data-claire-element-id="148857">on a donc <code data-claire-semantic="objective-c">- (id) initAvec</code>. Il faut à présent décrire le prochain paramètre ; dans le cas de notre voiture, on va dire un moteur (pourquoi pas, après tout ^^ ) : <code data-claire-semantic="objective-c">- (id) initAvecMoteur</code> ;</p></li><li id="r-148860" data-claire-element-id="148860"><p id="r-148859" data-claire-element-id="148859">on termine le label par deux-points. C'est ici que le paramètre entre en scène. Son type est indiqué entre parenthèses (il ne faut pas oublier l'étoile dans le cas d'un objet spécifique, <code>NSString *</code> par exemple) : <code data-claire-semantic="objective-c">- (id) initAvecMoteur: (Moteur *) moteur</code> ou <code data-claire-semantic="objective-c">- (id) initAvecMoteur: (id) moteur</code> ; les deux sont possibles, car <code>id</code> n'est pas un objet spécifique. L'avantage, c'est que l'on peut passer n'importe quel objet, l'inconvénient, c'est qu'on ne peut pas savoir si l'objet donné est un moteur ou non :-° (à la compilation seulement) ;</p></li><li id="r-148862" data-claire-element-id="148862"><p id="r-148861" data-claire-element-id="148861">si on a besoin d'un autre paramètre, il suffit de rajouter un label : <code data-claire-semantic="objective-c">- (id) initAvecMoteur: (Moteur *) moteur couleur: (NSColor *) couleur;</code><em>(ne pas oublier le point-virgule).</em></p></li></ul><h5 id="r-implementation-des-methodes-1" data-claire-element-id="148877">Implémentation des méthodes</h5><p id="r-148865" data-claire-element-id="148865">À présent, il faut écrire le code de ces fonctions. Une interface se trouve dans un fichier *.h et l'implémentation va, elle, se trouver dans un fichier *.m. Voici le code de base d'une implémentation :</p><pre id="r-148866" data-claire-element-id="148866"><code data-claire-semantic="objective-c">#import &quot;Voiture.h&quot;

@implementation Voiture

- (id) init {
    // Du code...
}

@end</code></pre><p id="r-148867" data-claire-element-id="148867">On retrouve bien les mots-clés de l'Objective-C qui commencent par <code>@</code>. Ici, on indique que l'on implémente les méthodes de la classe <code>Voiture</code>. On va donc voir de plus près l'implémentation de <code>- init</code>.</p><h6 id="r-quelques-mots-cles" data-claire-element-id="148876">Quelques mots-clés</h6><p id="r-148868" data-claire-element-id="148868">À l'intérieur d'une classe, il y a des expressions qui sont très utiles pour se référer à l'objet en cours d'utilisation, ou encore sa classe, ou la classe dont il hérite. <code data-claire-semantic="objective-c">self</code> est un pointeur qui pointe sur l'objet qui exécute la méthode (dans notre cas, une instance de <code>Voiture</code>). C'est très utile quand on veut faire exécuter d'autres méthodes à un objet pendant l'exécution de la méthode d'initialisation. Par exemple :</p><pre id="r-148869" data-claire-element-id="148869"><code data-claire-semantic="objective-c">- (id) init
{
     [self faireLePlein];
}</code></pre><p id="r-148870" data-claire-element-id="148870">Mais <code data-claire-semantic="objective-c">self</code> sert principalement à renvoyer l'objet initialisé : en effet, <code>- init</code> doit toujours renvoyer l'objet initialisé.</p><pre id="r-148871" data-claire-element-id="148871"><code data-claire-semantic="objective-c">- (id) init
{
     [self faireLePlein];
     return self;
}</code></pre><p id="r-148872" data-claire-element-id="148872">Parlons brièvement d'héritage : la classe <code>Voiture</code> hérite de <code>NSObject</code>. Elle a donc toutes les caractéristiques d'un <code>NSObject</code>. Mais si vous voulez créer un nouveau bouton d'interface graphique, votre classe doit hériter de <code>NSButton</code>, et comme vous n'avez aucune idée de la façon dont s'initialise un <code>NSButton</code>, il faut appeler la méthode <code>- init</code> d'une instance de la classe mère. Pour nous faciliter la vie, les créateurs de l'ObjC ont introduit le mot-clé <code>super</code> qui symbolise cet objet. ;)</p><pre id="r-148873" data-claire-element-id="148873"><code data-claire-semantic="objective-c">- (id) init
{
     [super init];
     return self;
}
// ou encore
- (id) init
{
     self = [super init];
     if (self) {
          // du code...
          return self;
     }
     else
          return nil;
}</code></pre><p id="r-148874" data-claire-element-id="148874">Ici, on teste la valeur retournée par le message <code>[super init]</code> pour trouver les erreurs. Si jamais la valeur obtenue est <code data-claire-semantic="objective-c">nil</code>, alors on retourne <code data-claire-semantic="objective-c">nil</code>.</p><p id="r-148875" data-claire-element-id="148875">Ensuite, dans l'emplacement où j'ai écrit <code data-claire-semantic="objective-c">// du code...</code>, il faut initialiser les variables de l'objet, exécuter différentes méthodes qui vont rendre l'objet utile. Il y a donc deux choses à faire <strong>impérativement</strong> dans la méthode <code>- init</code> : appeler la méthode d'initialisation de la classe mère (avec <code>[super init]</code>) et retourner l'objet créé (avec <code data-claire-semantic="objective-c">return self</code>). C'est la convention.</p><h5 id="r-les-accesseurs" data-claire-element-id="148901">Les accesseurs</h5><p id="r-148878" data-claire-element-id="148878">On entend souvent parler de méthodes <em>accesseurs</em> en POO. Ce sont des méthodes qui servent à modifier les variables d'un objet depuis l'extérieur.</p><p id="r-148879" data-claire-element-id="148879">Il n'y a que les méthodes d'un objet qui peuvent toucher aux variables, à cause de l'encapsulation des données. Pourquoi s'embêter autant ? Parce que si c'est vous qui programmez vos méthodes, il n'y a aucun risque (sauf si vous codez avec vos pieds) que l'objet fonctionne mal à cause de mauvaises valeurs de variables membres. Si on a une classe <code>Personnage</code>, et que le programmeur (malintentionné :pirate: ) peut mettre la valeur -100 à la vie du <code>Personnage</code>, que va-t-il se passer ? C'est pour cette raison que par des méthodes accesseurs, on peut vérifier la valeur entrée et éviter les bogues.</p><figure id="r-148881" data-claire-element-id="148882"><img id="r-148880" data-claire-element-id="148880" src="medias/uploads.siteduzero.com_files_190001_191000_190074.png" alt="Image utilisateur"/></figure><p id="r-148883" data-claire-element-id="148883"><em>Solution à l'encapsulation</em><br/> Il y a une convention de nommage à respecter pour les accesseurs. Déjà, et j'ai peut-être oublié de le mentionner ( :p ), il faut deux méthodes accesseurs pour une variable : une méthode pour obtenir la valeur et une pour modifier la valeur de la variable. La méthode qui sert à obtenir le nom de la variable (que je vais appeler <em>getter</em> en anglais) porte seulement le nom de cette variable. Contrairement au C++ où deux écoles se disputent pour mettre le préfixe « get » aux <em>getters</em>, en Objective-C on a décidé de garder le nom de la variable, sans préfixe. Par contre, la méthode qui sert à modifier la valeur de la variable (le <em>setter</em>) porte le préfixe « set ».</p><pre id="r-148884" data-claire-element-id="148884"><code data-claire-semantic="objective-c">@interface Personnage : NSObject
{
    int vie;
    int mana;
}

- (id) init;
- (int) vie;
- (int) mana;
- (void) setVie:(int) uneVie;
- (void) setMana:(int) unMana;

@end</code></pre><p id="r-148885" data-claire-element-id="148885">Bien entendu, les <em>getters</em> et <em>setters</em> ne servent qu'à modifier les variables depuis l'extérieur. À l'intérieur d'un objet, vous utilisez les variables par leur nom :</p><pre id="r-148886" data-claire-element-id="148886"><code data-claire-semantic="objective-c">- (id) init
{
    [super init];
    vie = 100;
    mana = 100;
    return self;
}</code></pre><p id="r-148887" data-claire-element-id="148887">Voici un exemple d'implémentation d'accesseurs :</p><pre id="r-148888" data-claire-element-id="148888"><code data-claire-semantic="objective-c">- (void) setMana: (int) aMana
{
    if (aMana &lt; 0)
        mana = 0;
    else
        mana = aMana;
}

- (int) mana
{
    return mana;
}</code></pre><p id="r-148889" data-claire-element-id="148889">Créer des accesseurs pour chaque variable d'une classe peut être très long (d'ailleurs, rien ne vous oblige à le faire). En Objective-C, il y a d'autres moyens de créer des accesseurs et de modifier à distance des variables membres, mais j'en parlerai dans un autre chapitre. ;)</p><p id="r-148890" data-claire-element-id="148890">Encore un gros morceau à avaler... :p<br/> À présent, vous savez :</p><ul id="r-148899" data-claire-element-id="148899"><li id="r-148892" data-claire-element-id="148892"><p id="r-148891" data-claire-element-id="148891">comprendre du code Objective-C ;</p></li><li id="r-148894" data-claire-element-id="148894"><p id="r-148893" data-claire-element-id="148893">utiliser des objets ;</p></li><li id="r-148896" data-claire-element-id="148896"><p id="r-148895" data-claire-element-id="148895">créer vos propres objets ;</p></li><li id="r-148898" data-claire-element-id="148898"><p id="r-148897" data-claire-element-id="148897">et vous connaissez certaines règles de l'Objective-C.</p></li></ul><p id="r-148900" data-claire-element-id="148900">Ça fait peut-être beaucoup pour deux chapitres, mais il ne faut pas hésiter à relire celui-ci, et surtout à pratiquer. Le prochain chapitre est un gros morceau également ; on en a parlé discrètement, mais il est un pilier de la Programmation Orientée Objet : c'est <strong>l'héritage</strong>, mes amis. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
<span class="arrow"></span>
<span class="next">Les méthodes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">
<span class="next">L&#039;héritage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="L039hritage"></a><h2>L&#039;héritage</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
<span class="arrow"></span>
<span class="next">Les conventions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
<span class="next">Une histoire de famille...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-148904" data-claire-element-id="148904">J'en ai déjà parlé dans les chapitres précédents, et il est temps d'y arriver. L'héritage est probablement LE point-clé de la POO. C'est un système très efficace qui permet une réutilisation du code optimale, ainsi qu'une modularité des objets et des classes. ;)</p><p id="r-148905" data-claire-element-id="148905">De plus, c'est une notion facile à prendre en main (contrairement à d'autres concepts de l'Objective-C), qui nécessite juste un peu d'imagination.</p>
</div><a name="Unehistoiredefamille..."></a><h2>Une histoire de famille...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">
<span class="arrow"></span>
<span class="next">L&#039;héritage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
<span class="next">Comment faire hériter</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-une-histoire-de-famille" data-claire-element-id="148927">Une histoire de famille...</h4><p id="r-148906" data-claire-element-id="148906">Tout d'abord, expliquons l'héritage : c'est la transmission de biens d'une génération à l'autre. Cela peut être un héritage familial, culturel, etc. En terme d'informatique, on a aussi plusieurs héritages : celui des systèmes d'exploitation (Mac OS X porte l'héritage d'UNIX, mais aussi de NeXTStep), des programmeurs, des sociétés, et aussi des objets et des classes. En Objective-C, on crée des classes qui héritent d'autres classes. Il est d'ailleurs <strong>obligatoire</strong>, quand on crée une classe, de lui donner une classe mère dont elle va hériter.</p><p id="r-148907" data-claire-element-id="148907">Prenons comme exemple la classe <code>NSMutableArray</code> : celle-ci hérite de <code>NSArray</code>, qui elle-même hérite de <code>NSObject</code>.</p><div id="r-148909" data-claire-element-id="148909" data-claire-semantic="question"><p id="r-148908" data-claire-element-id="148908">Mais comment se fait-il que <code>NSObject</code> n'hérite pas d'une autre classe ?</p></div><p id="r-148910" data-claire-element-id="148910"><code>NSObject</code> est une classe racine <em>(root-class)</em>, c'est-à-dire qu'elle sert de classe mère pour toutes les autres. <code>NSObject</code> définit des méthodes et des variables membres qui sont nécessaires au bon fonctionnement de tous les objets.</p><p id="r-148911" data-claire-element-id="148911">Voici un petit schéma de l'arbre d'héritage de <code>NSMutableArray</code> :</p><figure id="r-148913" data-claire-element-id="148914"><img id="r-148912" data-claire-element-id="148912" src="medias/uploads.siteduzero.com_files_187001_188000_187192.png" alt="Image utilisateur"/></figure><p id="r-148915" data-claire-element-id="148915">Mais qu'est-ce que l'héritage en réalité ? C'est la réutilisation du code d'une classe mère dans une classe fille. C'est-à-dire que tout ce qui est déclaré dans une classe mère est réutilisé dans la classe fille, que ce soient les méthodes ou les variables membres. La classe <code>NSMutableArray</code> hérite donc de toutes les spécificités de <code>NSArray</code>. ;) Cela permet de simplifier le code, et d'introduire de la modularité dans les classes.</p><p id="r-148916" data-claire-element-id="148916">Prenons un exemple : dans le <em>framework</em> Cocoa, il y a une classe nommée <code>NSView</code> qui hérite directement de <code>NSResponder</code>, une classe utilisée pour les événements. <code>NSView</code> est utilisée pour dessiner n'importe quoi à l'écran. On pourrait l'utiliser pour dessiner un bouton, un menu, un <em>slider</em>, etc. Mais dans le <em>framework</em> Cocoa, les développeurs ont déjà pensé à ça : <code>NSButton</code> hérite de <code>NSView</code>. On peut donc utiliser directement un <code>NSButton</code>, plutôt que de s'embêter à dessiner un bouton avec <code>NSView</code>.</p><figure id="r-148918" data-claire-element-id="148919"><img id="r-148917" data-claire-element-id="148917" src="medias/uploads.siteduzero.com_files_190001_191000_190130.png" alt="Image utilisateur"/></figure><p id="r-148920" data-claire-element-id="148920">La simplification du code vient du fait que le programmeur ne doit pas tout « recoder » à chaque nouvelle classe. Tout le code de <code>NSObject</code> est présent dans un <code>NSButton</code>, pourtant le programmeur n'a pas à l'écrire. Il se contente de rajouter du code spécifique à la classe fille :</p><figure id="r-148922" data-claire-element-id="148923"><img id="r-148921" data-claire-element-id="148921" src="medias/uploads.siteduzero.com_files_209001_210000_209249.png" alt="Image utilisateur"/></figure><div id="r-148925" data-claire-element-id="148925" data-claire-semantic="question"><p id="r-148924" data-claire-element-id="148924">Est-ce qu'on peut modifier le code d'une classe mère dans une classe fille, par exemple redéfinir une méthode ?</p></div><p id="r-148926" data-claire-element-id="148926">Bien sûr, et c'est même fortement conseillé. La première méthode que l'on doit modifier en général est la méthode <code>- init</code>, car chaque classe s'initialise d'une façon différente. Le problème, quand on écrit la méthode <code>- init</code> de <code>NSButton</code>, c'est qu'on ne sait pas comment s'initialise la classe mère, on ne peut donc pas savoir quelles valeurs affecter aux différentes variables. C'est pour ça que l'on utilise le mot-clé <code>super</code>. Un message envoyé à <code>super</code> va exécuter la méthode de la classe mère. Ainsi, un <code>[super init]</code> dans la méthode <code>- init</code> de <code>NSButton</code> va appeler la méthode d'initialisation de <code>NSControl</code>. On n'a donc pas besoin de connaître la classe mère. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">
<span class="arrow"></span>
<span class="next">L&#039;héritage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
<span class="next">Comment faire hériter</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Commentfairehriter"></a><h2>Comment faire hériter</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
<span class="arrow"></span>
<span class="next">Une histoire de famille...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
<span class="next">Les protocoles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-comment-faire-heriter" data-claire-element-id="148937">Comment faire hériter</h4><p id="r-148928" data-claire-element-id="148928">C'est dans le fichier qui déclare l'interface d'une classe que l'on choisit la classe mère. On l'a d'ailleurs déjà fait avec la classe <code>NSObject</code> :</p><pre id="r-148929" data-claire-element-id="148929"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

@interface Personnage : NSObject
{

}

@end</code></pre><p id="r-148930" data-claire-element-id="148930">C'est après les deux-points que l'on choisit la classe mère. On peut aussi prendre une classe que l'on a déclarée nous-mêmes :</p><pre id="r-148931" data-claire-element-id="148931"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;
#import &quot;Personnage.h&quot;

@interface Guerrier : Personnage
{

}

@end</code></pre><aside id="r-148933" data-claire-element-id="148933" data-claire-semantic="warning"><p id="r-148932" data-claire-element-id="148932">Attention cependant ! Pour les adeptes du C++, sachez que l'héritage multiple est strictement interdit en Objective-C !</p></aside><p id="r-148934" data-claire-element-id="148934">Les classes que nous créons ici ne sont que des copies de <code>NSObject</code>. En effet, elles ne contiennent pas de code additionnel par rapport à <code>NSObject</code>. Il faut à présent rajouter les méthodes que l'on veut utiliser dans la classe fille.</p><p id="r-148935" data-claire-element-id="148935">Il y a cependant une règle à savoir. Les méthodes que vous rajoutez appartiennent à une classe. Elles sont reprises dans les classes filles, que vous l'indiquiez ou non. Si vous définissez une fonction <code>- setMana:</code> dans la classe <code>Personnage</code>, elle sera reprise dans la classe fille, et fonctionnera de la même manière : on n'a pas besoin de la recoder. De plus, une fonction <code>- setMana:</code> n'aura pas besoin d'être retouchée, car la variable membre <code>mana</code> existe dans toutes les classes filles.</p><p id="r-148936" data-claire-element-id="148936">En revanche, si vous décidez de changer l'implémentation d'une méthode appartenant à une classe mère, l'implémentation de celle-ci sera écrasée. C'est pour cela qu'il est utile d'appeler la méthode de la classe mère dans certains cas.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
<span class="arrow"></span>
<span class="next">Une histoire de famille...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
<span class="next">Les protocoles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesprotocoles"></a><h2>Les protocoles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
<span class="arrow"></span>
<span class="next">Comment faire hériter</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">
<span class="next">Gérer la mémoire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-protocoles-1" data-claire-element-id="148968">Les protocoles</h4><p id="r-148938" data-claire-element-id="148938">Les protocoles sont (plus ou moins) une façon différente de faire hériter une classe, mais qui ne se focalise cette fois que sur les méthodes.</p><h5 id="r-la-problematique-de-la-conformite" data-claire-element-id="148953">La problématique de la conformité</h5><p id="r-148939" data-claire-element-id="148939">Dans les <em>frameworks</em> Foundation (objets non GUI) et AppKit (objets GUI), l'organisation des objets entre eux est légèrement différente de celle des bibliothèques orientées objet telles que Qt. Pour grandement schématiser, le programmeur utilise les bibliothèques de différentes façons : dans une bibliothèque comme Qt, on peut dire que le développeur donne des ordres aux objets. Par exemple, c'est lui qui va dire à un objet de s'afficher, c'est lui qui va donner la valeur d'une case d'un tableau, etc. Les classes que le programmeur va créer vont <strong>commander</strong> les autres objets.</p><p id="r-148940" data-claire-element-id="148940">Dans le <em>framework</em> Cocoa (et GNUstep), on peut observer l'inverse. Beaucoup d'objets de ce <em>framework</em> possèdent une variable <code>delegate</code> de type <code>id</code>. Cette variable est un objet qui va aider l'objet qui exécute la tâche. Prenons un exemple : pour afficher des valeurs dans un tableau (un objet <code>NSTableView</code> dans le framework AppKit), au lieu de dire au tableau ce qu'il doit afficher, c'est ce dernier qui demande au <code>delegate</code> ce qu'il doit afficher. C'est très important de comprendre comment les objets s'organisent, car c'est <strong>nous</strong> qui allons coder des <em>delegates</em> quand nous nous pencherons sur Cocoa. ;)</p><figure id="r-148942" data-claire-element-id="148943"><img id="r-148941" data-claire-element-id="148941" src="medias/uploads.siteduzero.com_files_190001_191000_190553.png" alt="Image utilisateur"/></figure><p id="r-148944" data-claire-element-id="148944">Les flèches sur ce schéma sont des messages. Sur la deuxième moitié du schéma, le message est en deux parties : la première flèche symbolise un appel de méthode, la deuxième est le retour de cette méthode.</p><div id="r-148946" data-claire-element-id="148946" data-claire-semantic="question"><p id="r-148945" data-claire-element-id="148945">Mais à qui appartient la méthode qui retourne la valeur demandée ?</p></div><p id="r-148947" data-claire-element-id="148947">À l'objet <code>delegate</code>. C'est cette méthode que va appeler le tableau. Quelque part dans le code du tableau, il va y avoir ces lignes :</p><pre id="r-148948" data-claire-element-id="148948"><code data-claire-semantic="objective-c">delegate = notre_objet;
valeur = [delegate tableau:self valeurPourColonne:3 ligne:4];</code></pre><p id="r-148949" data-claire-element-id="148949"><em>Je simplifie, mais c'est à peu près la même chose dans le code.</em></p><p id="r-148950" data-claire-element-id="148950">La partie de la méthode <code>tableau:self</code> sert à l'objet <code>delegate</code> pour savoir qui appelle la méthode, et éventuellement lui demander d'effectuer des tâches, etc.</p><p id="r-148951" data-claire-element-id="148951">C'est maintenant qu'intervient notre problème de conformité : que se passe-t-il si un objet <code>delegate</code> n'implémente pas la méthode appelée ? Comment savoir quelles méthodes implémenter ?<br/> En effet, un objet <code>NSTableView</code> (un tableau) possède un objet <code>dataSource</code> qui se charge de distribuer les données à l'objet (le contenu des cases du tableau), comme notre <code>delegate</code> sur le schéma. Si l'objet <code>dataSource</code> n'implémente pas la méthode qui donne les valeurs à l'objet <code>NSTableView</code>, celui-ci appelle une méthode dans le vide.</p><p id="r-148952" data-claire-element-id="148952">C'est pour ça qu'on a inventé le protocole en Objective-C. Un protocole est une liste de méthodes qu'une classe doit <strong>obligatoirement</strong> implémenter. Ainsi, si notre <code>dataSource</code> est conforme au protocole <code>NSTableViewDataSource</code>, l'objet peut être sûr que la méthode est implémentée.</p><h5 id="r-appliquer-un-protocole" data-claire-element-id="148960">Appliquer un protocole</h5><p id="r-148954" data-claire-element-id="148954">C'est dans l'interface que l'on décide d'appliquer un protocole à une classe.</p><pre id="r-148955" data-claire-element-id="148955"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

@interface Foo : NSObject &lt;NSCoding&gt;
{

}

/* Méthodes qu'il faut implémenter */

@end</code></pre><p id="r-148956" data-claire-element-id="148956"><em>Je prends <code>NSCoding</code> pour exemple car c'est un protocole répandu, contrairement à <code>NSTableViewDataSource</code> qui n'est disponible que dans Mac OS X v10.6. :-°</em></p><p id="r-148957" data-claire-element-id="148957">Si vous tentez de compiler sans implémenter les méthodes, vous obtenez un cri d'agonie du compilateur :</p><pre id="r-148958" data-claire-element-id="148958"><code>Foo.m:5: warning: incomplete implementation of class ?Foo?
Foo.m:5: warning: method definition for ?-initWithCoder:? not found
Foo.m:5: warning: method definition for ?-encodeWithCoder:? not found
Foo.m:5: warning: class ?Foo? does not fully implement the ?NSCoding? protocol</code></pre><p id="r-148959" data-claire-element-id="148959">Vous n'avez pas implémenté les méthodes demandées. :)</p><h5 id="r-creer-un-protocole" data-claire-element-id="148967">Créer un protocole</h5><p id="r-148961" data-claire-element-id="148961">Un protocole se déclare comme une classe dans un fichier *.h. La syntaxe est vraiment similaire à celle de l'interface d'une classe :</p><pre id="r-148962" data-claire-element-id="148962"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

@protocol MonProtocole
- (void) methodeRequise;

@optional
- (void) methodeOptionelle;

@required
- (void) autreMethodeRequise;

@end</code></pre><p id="r-148963" data-claire-element-id="148963">Comme vous le voyez, on peut choisir si une méthode <strong>doit</strong> être implémentée ou pas, grâce aux mots-clés <code>@optional</code> et <code>@required</code>;) .</p><p id="r-148964" data-claire-element-id="148964">Il se peut que beaucoup d'eau coule sous les ponts avant que vous n'ayez à produire un protocole pour une application. En revanche, créer des classes conformes à des protocoles est beaucoup plus courant. Cette partie sur les protocoles n'est franchement pas importante pour la suite du cours, mais au moins vous savez que ça existe. ^^</p><p id="r-148965" data-claire-element-id="148965">Un chapitre plus <em>light</em>, mais néanmoins dense en informations, surtout la notion de <code>delegate</code> qui est vraiment récurrent dans le <em>framework</em> Cocoa.</p><p id="r-148966" data-claire-element-id="148966">À présent, je vous propose un peu de repos avec un chapitre sur la gestion de la mémoire en Objective-C, qui est plus ou moins restée floue pour vous jusqu'à présent. :-°</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
<span class="arrow"></span>
<span class="next">Comment faire hériter</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">
<span class="next">Gérer la mémoire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Grerlammoire"></a><h2>Gérer la mémoire</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
<span class="arrow"></span>
<span class="next">Les protocoles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
<span class="next">Retain count et autres joyeusetés</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-148970" data-claire-element-id="148970">Le casse-tête du programmeur : la gestion de la mémoire. Tous les langages ont leur propre système : allocation et libération de la mémoire automatiquement, manuellement, etc.</p><p id="r-148971" data-claire-element-id="148971">L'Objective-C a, en revanche, une technique bien à lui (en tout cas, je ne l'ai jamais vue dans d'autres langages :-° ) : la technique du <em>retain count</em>. C'est assez simple à comprendre, mais ça l'est moins à mettre en place.</p>
</div><a name="Retaincountetautresjoyeusets"></a><h2>Retain count et autres joyeusetés</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">
<span class="arrow"></span>
<span class="next">Gérer la mémoire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
<span class="next">Copier et assigner</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-retain-count-et-autres-joyeusetes" data-claire-element-id="148986">Retain count et autres joyeusetés</h4><p id="r-148972" data-claire-element-id="148972">On a déjà vu plusieurs méthodes de classe qui géraient la mémoire, toutes d'une façon différente (ou presque).</p><p id="r-148973" data-claire-element-id="148973">La méthode <code>+ alloc</code> alloue de la mémoire pour l'objet demandé. Toutes les variables et les méthodes prennent une certaine place dans la mémoire. Cette place est donc réservée par la méthode <code>+ alloc</code>, sans que le programmeur n'ait à se soucier du nombre de variables, etc.</p><p id="r-148974" data-claire-element-id="148974">La seconde méthode que l'on a vue pour gérer la mémoire est <code>- release</code>. Cette méthode est une méthode d'instance, mais contrairement à ce qu'on pourrait penser, elle ne libère pas la mémoire allouée par <code>+ alloc</code>. Elle ne fait que baisser le <em>retain count</em> de 1.</p><h5 id="r-compter-les-utilisations" data-claire-element-id="148985">Compter les utilisations</h5><p id="r-148975" data-claire-element-id="148975">Mais qu'est-ce que c'est que ce <em>retain count</em>, à la fin ? C'est un système très simple pour gérer la mémoire : chaque objet possède un compteur, le <em>retain count</em>, qui va compter le nombre d'objets qui ont besoin de lui. Quand trois objets différents ont besoin de l'objet en question, le <em>retain count</em> est de 3.</p><p id="r-148976" data-claire-element-id="148976">Prenons l'exemple du chien. Son maître a besoin de lui, ainsi que le dresseur et le vétérinaire :</p><figure id="r-148978" data-claire-element-id="148979"><img id="r-148977" data-claire-element-id="148977" src="medias/uploads.siteduzero.com_files_191001_192000_191072.png" alt="Image utilisateur"/></figure><p id="r-148980" data-claire-element-id="148980">Que fait donc <code>- release</code> ? Lorsqu'un de ces objets n'a plus besoin de <code>Chien</code>, il lui fait savoir en lui envoyant un message.</p><p id="r-148981" data-claire-element-id="148981">Lorsque le <em>retain count</em> de <code>Chien</code> atteint zéro, c'est-à-dire que personne n'a besoin de lui, la méthode d'instance <code>- dealloc</code> entre en scène. Celle-ci fait vraiment le contraire de <code>+ alloc</code>.</p><aside id="r-148983" data-claire-element-id="148983" data-claire-semantic="warning"><p id="r-148982" data-claire-element-id="148982">Il ne faut jamais appeler <code>- dealloc</code> directement, vous risqueriez de supprimer un objet qui est utilisé ailleurs. ;)</p></aside><p id="r-148984" data-claire-element-id="148984">À présent, comment savoir si l'on augmente le <em>retain count</em> d'un objet ou pas ? Déjà, à l'appel de la méthode <code>+ alloc</code> ou un dérivé (<code>+ new</code>, <code>- copy</code>), le <em>retain count</em> est incrémenté. En revanche, à partir de là, le seul moyen d'incrémenter le <em>retain count</em> est d'utiliser la méthode <code>- retain</code>. Si l'objet <code>Maître</code> crée l'objet <code>Chien</code>, alors les autres doivent utiliser <code>- retain</code> pour s'approprier l'objet. En revanche, ils travaillent tous avec le même objet, il n'y a pas de copie (n'oubliez pas que <strong>tous</strong> les objets sont des pointeurs).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">
<span class="arrow"></span>
<span class="next">Gérer la mémoire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
<span class="next">Copier et assigner</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Copieretassigner"></a><h2>Copier et assigner</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
<span class="arrow"></span>
<span class="next">Retain count et autres joyeusetés</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
<span class="next">Libérer la mémoire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-copier-et-assigner" data-claire-element-id="149024">Copier et assigner</h4><p id="r-148987" data-claire-element-id="148987">Ce système, bien que simple en apparence, pose quelques problèmes lorsque l'on veut exécuter quelques tâches spécifiques, comme copier un objet, ou <strong>assigner</strong> un objet à un pointeur.</p><h6 id="r-le-principe-de-l-assignation" data-claire-element-id="149023">Le principe de l'assignation</h6><p id="r-148988" data-claire-element-id="148988">Ce que l'on cherche à faire, c'est modifier un de nos objets à partir d'un autre. Les objets, en Objective-C, sont tous des pointeurs. Un objet pointe donc vers un endroit en mémoire où se trouvent toutes les données dont il a besoin. Assigner un objet à un pointeur, c'est changer l'endroit où va pointer ce pointeur. On ne change pas l'objet en lui-même, on change le pointeur.</p><figure id="r-148990" data-claire-element-id="148991"><img id="r-148989" data-claire-element-id="148989" src="medias/uploads.siteduzero.com_files_209001_210000_209644.png" alt="Image utilisateur"/></figure><p id="r-148992" data-claire-element-id="148992">Lorsque l'on code une nouvelle classe, on met très souvent des objets dans les variables d'instance. On crée également des accesseurs pour contrôler ces objets d'instance. C'est lorsque l'on veut implémenter un accesseur qu'on utilise l'assignation. Prenons l'exemple de notre classe <code>Personnage</code>. Celle-ci possède une variable <code>arme</code> de type <code>Epee</code>. Il nous faut coder un accesseur pour pouvoir changer la valeur de <code>arme</code>.</p><pre id="r-148993" data-claire-element-id="148993"><code data-claire-semantic="objective-c">- (void) setArme:(Epee *)nouvelleArme
{
     arme = nouvelleArme;
}</code></pre><aside id="r-148995" data-claire-element-id="148995" data-claire-semantic="warning"><p id="r-148994" data-claire-element-id="148994">Ce code n'est pas valide, mais étudions-le pour expliquer le mécanisme approprié.</p></aside><p id="r-148996" data-claire-element-id="148996">Qu'est-ce qui se passe ? On possède deux pointeurs sur deux objets différents : <code>arme</code> et <code>nouvelleArme</code>. Lorsque l'on fait <code>arme = nouvelleArme</code>, on change la valeur du pointeur <code>arme</code> (qui est une adresse ;) ), pour lui donner la valeur de <code>nouvelleArme</code>. On a à présent deux pointeurs qui pointent sur le même objet. Sauf que l'objet initial sur lequel pointait <code>arme</code> au début se retrouve orphelin, et ne sera jamais libéré de la mémoire. Cela engendre une fuite de mémoire. Il faut donc envoyer le message <code>release</code> à <code>arme</code><strong>avant</strong> de changer sa valeur.</p><pre id="r-148997" data-claire-element-id="148997"><code data-claire-semantic="objective-c">- (void) setArme:(Epee *)nouvelleArme
{
     [arme release];
     arme = nouvelleArme;
}</code></pre><p id="r-148998" data-claire-element-id="148998">C'est mieux, mais ce n'est toujours pas ça. Supposons que notre objet <code>nouvelleArme</code> soit partagé par deux autres objets (notre <code>Personnage</code> partage son épée :p ). Avant l'exécution de la méthode <code>- setArme:</code>, le <em>retain count</em> de <code>nouvelleArme</code> est à 2. Mais après l'exécution de la méthode, il est encore à deux, alors que trois objets utilisent <code>nouvelleArme</code> ! Il y a donc un problème, car si le <em>retain count</em> retombe à zéro, l'objet sera libéré de la mémoire sans l'accord de notre <code>Personnage</code>. Pour résoudre ce problème, il faut envoyer le message <code>retain</code> à <code>nouvelleArme</code>.</p><pre id="r-148999" data-claire-element-id="148999"><code data-claire-semantic="objective-c">- (void) setArme:(Epee *)nouvelleArme
{
     [arme release];
     [nouvelleArme retain];
     arme = nouvelleArme;
}</code></pre><aside id="r-149001" data-claire-element-id="149001" data-claire-semantic="information"><p id="r-149000" data-claire-element-id="149000">La méthode d'instance <code>- retain</code> retourne le receveur de l'objet. On peut donc écrire <code>arme = [nouvelleArme retain]</code>.</p></aside><p id="r-149002" data-claire-element-id="149002">Il nous reste un dernier problème à résoudre. Que se passe-t-il si les deux pointeurs <code>arme</code> et <code>nouvelleArme</code> pointent sur le même objet <strong>avant</strong> l'exécution de la méthode ? Si on envoie <code>release</code> à <code>arme</code>, c'est comme s'il était envoyé à <code>nouvelleArme</code> ! On perd donc d'un seul coup notre objet (il n'y en a qu'un en fin de compte). Il faut donc impérativement vérifier que les deux pointeurs ne pointent pas sur le même objet.</p><pre id="r-149003" data-claire-element-id="149003"><code data-claire-semantic="objective-c">- (void) setArme:(Epee *)nouvelleArme
{
     if (arme != nouvelleArme) {
          [arme release];
          [nouvelleArme retain];
          arme = nouvelleArme;
     }
}</code></pre><p id="r-149004" data-claire-element-id="149004">Et voilà, c'est assigné !</p><div id="r-149006" data-claire-element-id="149006" data-claire-semantic="question"><p id="r-149005" data-claire-element-id="149005">Si je comprends bien, on a un pointeur qui pointe vers un objet. Mais s'il y a d'autres pointeurs sur cet objet et qu'il est modifié de l'extérieur, il sera aussi modifié dans l'objet ?</p></div><p id="r-149007" data-claire-element-id="149007">Oui. Dans la plupart des cas, ce n'est pas un problème, mais il arrive que l'on veuille faire une copie d'un objet et ainsi le garder pour nous. Il faut utiliser la méthode d'instance <code>- copy</code>.</p><pre id="r-149008" data-claire-element-id="149008"><code data-claire-semantic="objective-c">- (void) setArme:(Epee *)nouvelleArme
{
     if (arme != nouvelleArme) {
          [arme release];
          arme = [nouvelleArme copy];
     }
}</code></pre><p id="r-149009" data-claire-element-id="149009">Schématiquement, ça donne ceci :</p><figure id="r-149011" data-claire-element-id="149012"><img id="r-149010" data-claire-element-id="149010" src="medias/uploads.siteduzero.com_files_209001_210000_209647.png" alt="Image utilisateur"/></figure><p id="r-149013" data-claire-element-id="149013">Ainsi, on possède une copie de l'objet qu'on veut assigner. Si « Nouvel Objet » est modifié, la copie ne le sera pas. ;)</p><aside id="r-149015" data-claire-element-id="149015" data-claire-semantic="warning"><p id="r-149014" data-claire-element-id="149014">Attention, <code>- copy</code> n'est pas une méthode magique qui fait la copie d'un objet pour vous. Il faut l'implémenter. Pour savoir si une classe implémente la méthode <code>- copy</code> (ce qui n'est pas le cas chez nous), il faut regarder dans la documentation si l'objet est conforme au protocole <code><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSCopying">NSCopying</a></code>.</p></aside><p id="r-149016" data-claire-element-id="149016">Cela a été dit plus haut, mais je le répète : <code>- copy</code> augmente le <em>retain count</em> de 1.</p><h5 id="r-creer-un-objet-avec-un-autre" data-claire-element-id="149022">Créer un objet avec un autre</h5><p id="r-149017" data-claire-element-id="149017">Il y a un autre cas où l'on utilise souvent <code>retain</code> : c'est le cas des méthodes d'initialisation. Si vous voulez initialiser votre objet à partir d'un autre, il faut très souvent conserver cet objet, à l'aide de <code>retain</code> :</p><pre id="r-149018" data-claire-element-id="149018"><code data-claire-semantic="objective-c">- (id) initWithColor:(NSColor *)couleur
{
     self = [super init];

     if (self != nil) {                 // On teste une éventuelle erreur
          maCouleur = [couleur retain]; // On retient l'objet couleur, on en a besoin
     }

     return self;
}</code></pre><aside id="r-149020" data-claire-element-id="149020" data-claire-semantic="information"><p id="r-149019" data-claire-element-id="149019">Cette structure de méthode d'initialisation est vraiment très courante, il faut la connaître.</p></aside><p id="r-149021" data-claire-element-id="149021">Voyons maintenant comment libérer la mémoire qu'on a eu tant de mal à obtenir. :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
<span class="arrow"></span>
<span class="next">Retain count et autres joyeusetés</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
<span class="next">Libérer la mémoire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Librerlammoire"></a><h2>Libérer la mémoire</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
<span class="arrow"></span>
<span class="next">Copier et assigner</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">
<span class="next">TP : Jeu de combat (RPG)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-liberer-la-memoire-2" data-claire-element-id="149083">Libérer la mémoire</h4><p id="r-149025" data-claire-element-id="149025">La gestion de la mémoire se fait toujours en deux étapes : l'allocation de la mémoire (avec <code>malloc()</code> en C, avec <code>+ alloc</code> en ObjC), et la libération de la mémoire (<code>free()</code> en C et <code>- dealloc</code> en ObjC).</p><p id="r-149026" data-claire-element-id="149026">Ici, on ne se souciera pas de la méthode de classe <code>+ alloc</code>, qui fait très bien sa tâche toute seule. En revanche, il est nécessaire d'implémenter la méthode <code>- dealloc</code> pour une classe fille. C'est une méthode de type <code>void</code> :</p><pre id="r-149027" data-claire-element-id="149027"><code data-claire-semantic="objective-c">- (void) dealloc
{
     // On libère la mémoire
}</code></pre><div id="r-149029" data-claire-element-id="149029" data-claire-semantic="question"><p id="r-149028" data-claire-element-id="149028">Est-ce qu'on doit utiliser <code>free()</code> pour libérer la mémoire des variables membres ?</p></div><p id="r-149030" data-claire-element-id="149030">Non. Tout comme <code>+ alloc</code>, l'implémentation de <code>- dealloc</code> par la classe <code>NSObject</code> fait ça pour vous. Le seul problème, c'est qu'on est en train d'implémenter <code>- dealloc</code> dans une classe fille, donc l'implémentation de la méthode de la classe mère est écrasée. :(</p><p id="r-149031" data-claire-element-id="149031">Heureusement, nous possédons le mot-clé <code>super</code>, qui symbolise une instance de la classe mère (un objet de type <code>NSObject</code> si notre classe hérite de <code>NSObject</code>). On peut donc exécuter la méthode <code>- dealloc</code> de la classe mère sans avoir à la recoder.</p><pre id="r-149032" data-claire-element-id="149032"><code data-claire-semantic="objective-c">- (void) dealloc
{
     [super dealloc];
}</code></pre><p id="r-149033" data-claire-element-id="149033">Toutes les variables membres de types <code>int</code>, <code>char</code>, <code>float</code>, etc. seront libérées par cette méthode, mais les objets membres ne le seront pas. Il faut donc le faire manuellement, en utilisant <code>- release</code> :</p><pre id="r-149034" data-claire-element-id="149034"><code data-claire-semantic="objective-c">- (void) dealloc
{
     [epee release];
     [bouclier release];
     [super dealloc];
}</code></pre><aside id="r-149036" data-claire-element-id="149036" data-claire-semantic="warning"><p id="r-149035" data-claire-element-id="149035">Il faut toujours exécuter <code>[super dealloc]</code> en <strong>dernier</strong>.</p></aside><h5 id="r-possession-d-objets" data-claire-element-id="149047">Possession d'objets</h5><p id="r-149037" data-claire-element-id="149037">Lorsque vous codez en ObjC, vous êtes propriétaire des objets que vous créez. Cela veut dire que vous êtes responsable de l'allocation de la mémoire, ainsi que de la libération de celle-ci. Il existe en revanche certains objets dont vous n'êtes pas le propriétaire. Vous n'avez donc pas à gérer la mémoire pour eux. Prenons un exemple :</p><pre id="r-149038" data-claire-element-id="149038"><code data-claire-semantic="objective-c">- (id) init
{
     self = [super init]; // On exécute la méthode - init de la classe mère

     if (self != nil) {
          epee = [[Epee alloc] init];         // Vous voilà propriétaire de epee
          bouclier = [[Bouclier alloc] init]; // Et de bouclier
          return self;
     }

     else
          return nil;
}

- (void) dealloc
{
     [epee release];     // Vous n'êtes plus propriétaire de epee
     [bouclier release]; // Ni de bouclier
     [super dealloc];
}</code></pre><p id="r-149039" data-claire-element-id="149039">En fait, à chaque fois que vous augmentez le <em>retain count</em> de 1, vous êtes propriétaire de l'objet que vous manipulez. Cela me mène à la règle d'or de la gestion de la mémoire :</p><p id="r-149040" data-claire-element-id="149040">Vous êtes le propriétaire d'un objet si vous l'avez créé en utilisant une méthode qui commence par <code>alloc</code>, <code>new</code> ou qui contient <code>copy</code>, ou encore si vous lui avez envoyé le message <code>retain</code>. Vous êtes, à partir de ce point, responsable pour la libération de la mémoire de cet objet. Vous ne devez pas libérer les autres objets que vous manipulerez.</p><p id="r-149041" data-claire-element-id="149041"><em>Règle sortie tout droit de la documentation. :p</em></p><div id="r-149043" data-claire-element-id="149043"><p id="r-149042" data-claire-element-id="149042">Règle sortie tout droit de la documentation. :p</p></div><p id="r-149044" data-claire-element-id="149044">Faisons à présent la différence entre un objet dont vous êtes le propriétaire et un objet dont vous ne l'êtes pas. Voici en exemple la création de deux <code>NSString</code> :</p><pre id="r-149045" data-claire-element-id="149045"><code data-claire-semantic="objective-c">NSString * chaine_1 = [[NSString alloc] initWithString:@&quot;Vous êtes le propriétaire&quot;];
NSString * chaine_2 = [NSString stringWithString:@&quot;Vous n'êtes pas le propriétaire&quot;];</code></pre><p id="r-149046" data-claire-element-id="149046">Comme vous le voyez, on crée <code>chaine_1</code> avec la méthode <code>+ alloc</code>, on en est donc le propriétaire. Il va donc falloir envoyer <code>release</code> à cet objet, mais <strong>surtout pas</strong> à <code>chaine_2</code>. ;)</p><h5 id="r-memoire-automatique" data-claire-element-id="149082">Mémoire automatique</h5><p id="r-149048" data-claire-element-id="149048">Tout ça est un peu, comment dire, « prise de tête » :p . Nous allons donc voir un outil qui va nous simplifier la vie : les <code>NSAutoreleasePool</code>.</p><aside id="r-149050" data-claire-element-id="149050" data-claire-semantic="information"><p id="r-149049" data-claire-element-id="149049">L'Objective-C, dans sa version 2.0, possède un système de ramasse-miettes. C'est un système qui gère la mémoire à votre place. Cependant, nous ne le verrons pas ici, car l'ObjC 2.0 n'est pas compatible GNU/Linux.</p></aside><p id="r-149051" data-claire-element-id="149051">Contrairement au ramasse-miettes, le système des <em>release pools</em> ne gère pas la mémoire pour vous, mais il en simplifie beaucoup la gestion. C'est d'ailleurs un outil que l'on connait déjà. o_O</p><p id="r-149052" data-claire-element-id="149052">On l'a en effet déjà vu dans le chapitre « <a href="http://www.siteduzero.com/tutoriel-3-200551-a-l-assaut-de-l-objective-c.html">À l'assaut de l'Objective-C</a> ». Je vous redonne le code :</p><pre id="r-149053" data-claire-element-id="149053"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

int main (int argc, const char * argv[])
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];

    NSLog(@&quot;Hello, World!&quot;);

    [pool drain];
    return 0;
}</code></pre><p id="r-149054" data-claire-element-id="149054">Un objet <code>NSAutoreleasePool</code> est un peu comme un sac qui contient différents objets. Son rôle est d'envoyer le message <code>release</code> à chacun d'eux, à un certain moment (lors de l'exécution de <code>[pool drain]</code>). L'envoi du message <code>release</code> est automatique, ce n'est donc plus au programmeur de le faire. Un petit schéma pour clarifier tout ça :</p><figure id="r-149056" data-claire-element-id="149057"><img id="r-149055" data-claire-element-id="149055" src="medias/uploads.siteduzero.com_files_209001_210000_209328.png" alt="Image utilisateur"/></figure><p id="r-149058" data-claire-element-id="149058">Pour ajouter un objet (quelconque) à un objet <code>NSAutoreleasePool</code>, il faut lui envoyer le message <code>autorelease</code>.</p><h6 id="r-exemple-un-getter" data-claire-element-id="149081">Exemple : un <em>getter</em></h6><p id="r-149059" data-claire-element-id="149059">Un <em>getter</em> est un accesseur, cela ne devrait pas être nouveau pour vous. C'est une méthode qui retourne une variable membre. En voici un tout simple que l'on va étudier :</p><pre id="r-149060" data-claire-element-id="149060"><code data-claire-semantic="objective-c">- (Bouclier *) bouclier
{
     return bouclier;
}</code></pre><p id="r-149061" data-claire-element-id="149061">Ce code est valide. Il retourne la variable membre <code>bouclier</code> de type <code>Bouclier</code>. Le seul problème, c'est que l'objet retourné n'appartient pas à celui qui appelle le <em><strong>getter</strong></em>, et il risque d'être libéré avant que l'utilisateur de l'objet ait terminé (on dit que l'objet récupéré est faiblement référencé, mais on ne s'étendra pas là-dessus). Il y a donc deux solutions :</p><ul id="r-149066" data-claire-element-id="149066"><li id="r-149063" data-claire-element-id="149063"><p id="r-149062" data-claire-element-id="149062">soit l'utilisateur appelle <code>retain</code> : <code>objet = [[guerrier bouclier] retain]</code> ;</p></li><li id="r-149065" data-claire-element-id="149065"><p id="r-149064" data-claire-element-id="149064">soit on résout le problème dans le <em>getter</em>.</p></li></ul><p id="r-149067" data-claire-element-id="149067">On pourrait appeler <code>retain</code> dans le <em>getter</em>. Mais cela engendrerait une fuite de mémoire. En effet, vous prendrez la charge d'un objet deux fois, il faudrait donc vous en défaire deux fois. Sauf que vous ne savez pas combien de fois le <em>getter</em> est appelé. :-°</p><div id="r-149069" data-claire-element-id="149069" data-claire-semantic="question"><p id="r-149068" data-claire-element-id="149068">On pourrait aussi appeler <code>release</code> dans le <em>getter</em> ?</p></div><p id="r-149070" data-claire-element-id="149070">À ce moment-là, on a deux choix :</p><pre id="r-149071" data-claire-element-id="149071"><code data-claire-semantic="objective-c">- (Bouclier *) bouclier
{
     [bouclier retain];  // On prend en charge l'objet
     [bouclier release]; // On se décharge de l'objet
     return bouclier;    // Ça ne sert à rien en fin de compte
}

/* Ou alors */

- (Bouclier *) bouclier
{
     [bouclier retain];  // On prend en charge l'objet
     return bouclier;    // On le renvoie
     [bouclier release]; // Cette ligne ne sera jamais exécutée, ça ne sert à rien non plus
}</code></pre><p id="r-149072" data-claire-element-id="149072">Là, on a un problème...</p><p id="r-149073" data-claire-element-id="149073">La solution, c'est d'utiliser les <code>NSAutoreleasePool</code>s. Une fois qu'un objet est dans un <code>NSAutoreleasePool</code>, on peut être sûr qu'il recevra un message <code>release</code>. Je dis un, car un objet peut être plusieurs fois dans un <code>NSAutoreleasePool</code>. À ce moment-là, il reçoit autant de message que de copies de lui-même dans le <code>NSAutoreleasePool</code>. Voici donc notre nouveau <em>getter</em> :</p><pre id="r-149074" data-claire-element-id="149074"><code data-claire-semantic="objective-c">- (Bouclier *) bouclier
{
     [bouclier retain];       // On prend en charge l'objet
     [bouclier autorelease];  // On ne se décharge pas de l'objet tout de suite, mais ça sera fait à coup sûr 
     return bouclier;         // On retourne un objet dont on s'est déchargé dans le futur
}

/* Ou pour faire plus court */

- (Bouclier *) bouclier
{
     return [[bouclier retain] autorelease];
}</code></pre><p id="r-149075" data-claire-element-id="149075">Ainsi, celui qui a appelé le <em>getter</em> n'a plus à se soucier de l'objet qu'il récupère. Toutefois, cette méthode présente un inconvénient : elle est relativement lourde en mémoire. Si votre <em>getter</em> doit être appelé <strong>très</strong> fréquemment, utilisez la première implémentation vue plus haut.</p><aside id="r-149077" data-claire-element-id="149077" data-claire-semantic="information"><p id="r-149076" data-claire-element-id="149076">N'oubliez pas : envoyer le message <code>autorelease</code> à un objet revient à envoyer le message <code>release</code> plus tard. Les <code>NSAutoreleasePool</code>s ne vous épargnent pas les fuites de mémoire. Mais si vous suivez la règle d'or, il ne devrait pas y avoir de problèmes. ^^</p></aside><p id="r-149078" data-claire-element-id="149078">Un dernier point : il faut <strong>toujours</strong> créer un objet <code>NSAutoreleasePool</code> dans un programme ObjC (sauf quand on fait des programmes graphiques, c'est automatique), sinon les objets que vous utiliserez ne pourront pas appeler <code>- autorelease</code>, même si vous ne faites pas usage de l'objet <code>NSAutoreleasePool</code>.</p><p id="r-149079" data-claire-element-id="149079">Pour conclure ce chapitre, je vous conseille vivement de lire ce guide : <a href="http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/MemoryMgmt/MemoryMgmt.html"><em>Memory Management Programming Guide for Cocoa</em><strong>(en)</strong></a>. Bien qu'en anglais, ce « tutoriel » est très bien fait. :)</p><p id="r-149080" data-claire-element-id="149080">Vous savez maintenant faire beaucoup de choses en Objective-C, et vous connaissez toutes les règles du jeu. Il est temps de tout mettre en pratique à présent... :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
<span class="arrow"></span>
<span class="next">Copier et assigner</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">
<span class="next">TP : Jeu de combat (RPG)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPJeudecombatRPG"></a><h2>TP : Jeu de combat (RPG)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
<span class="arrow"></span>
<span class="next">Libérer la mémoire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
<span class="next">Préliminaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-149085" data-claire-element-id="149085">On arrive à la fin de la première partie. :)</p><p id="r-149086" data-claire-element-id="149086">Pour terminer en beauté, je vous propose un petit TP sur un sujet que je traîne depuis quelques chapitres : la fameuse classe <code>Personnage</code> !</p><p id="r-149087" data-claire-element-id="149087">Le but est d'arriver à créer un petit jeu de combat, en console bien sûr. :p</p>
</div><a name="Prliminaires"></a><h2>Préliminaires</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">
<span class="arrow"></span>
<span class="next">TP : Jeu de combat (RPG)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
<span class="next">La solution</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-preliminaires" data-claire-element-id="149111">Préliminaires</h4><p id="r-149088" data-claire-element-id="149088">Ce TP a pour but de vous faire travailler la POO. Il faudra donc coder une ou plusieurs classes, en suivant les règles évoquées jusqu'ici pour la POO, à savoir la gestion de la mémoire, les accesseurs, la méthode <code>- dealloc</code>, etc.</p><p id="r-149089" data-claire-element-id="149089">Le principe du jeu est très simple. On a deux joueurs qui possèdent chacun un <code>Personnage</code>. Les deux joueurs s'affrontent au tour par tour. Pour ceux qui ne connaîtraient pas le principe, les joueurs jouent à tour de rôle, et choisissent une action à faire.</p><p id="r-149090" data-claire-element-id="149090">Au niveau de l'architecture des objets (c'est-à-dire leur agencement), chaque <code>Personnage</code> possède une <code>Arme</code>. Cette <code>Arme</code> peut infliger un certain nombre de dégâts.</p><p id="r-149091" data-claire-element-id="149091">Lorsque c'est à lui de jouer, le <code>Personnage</code> a le choix entre deux actions :</p><ul id="r-149096" data-claire-element-id="149096"><li id="r-149093" data-claire-element-id="149093"><p id="r-149092" data-claire-element-id="149092">attaquer son adversaire avec le nombre de dégâts de son <code>Arme</code> ;</p></li><li id="r-149095" data-claire-element-id="149095"><p id="r-149094" data-claire-element-id="149094">améliorer son <code>Arme</code> (augmenter ses dégâts).</p></li></ul><p id="r-149097" data-claire-element-id="149097">J'ai mis deux actions pour un peu plus de <em>challenge</em> mais aussi parce que si le nombre de dégâts de l'arme n'augmente pas, le premier à jouer est le gagnant. ^^</p><p id="r-149098" data-claire-element-id="149098">Chacun des <code>Personnage</code>s possède de la vie. Le premier à 0 est le perdant. Les <code>Personnage</code>s possèdent également un nom pour les différencier.</p><h5 id="r-astuce-bien-pratique" data-claire-element-id="149110">Astuce bien pratique</h5><p id="r-149099" data-claire-element-id="149099">Les <code>Personnage</code>s doivent afficher leur vie et leurs dégâts avant de jouer. Il faudra donc coder une méthode qui fait cela.</p><p id="r-149100" data-claire-element-id="149100">Pour nous simplifier la vie, il y a une méthode d'instance nommée <code>- description</code>. Celle-ci retourne une <code>NSString</code> qui contient les informations destinées à être affichées. Ce qui est pratique avec cette méthode, c'est qu'on peut écrire ceci :</p><pre id="r-149101" data-claire-element-id="149101"><code data-claire-semantic="objective-c">NSLog(@&quot;Voici les informations du joueur 1 : %@&quot;, [joueur1 description]);</code></pre><p id="r-149102" data-claire-element-id="149102">Mais les gens qui ont codé le <em>framework</em> voulaient se simplifier encore plus la vie. Le code ci-dessous est strictement équivalent au code au-dessus :</p><pre id="r-149103" data-claire-element-id="149103"><code data-claire-semantic="objective-c">NSLog(@&quot;Voici les informations du joueur 1 : %@&quot;, joueur1);</code></pre><p id="r-149104" data-claire-element-id="149104">Cela devient très facile d'afficher les informations de n'importe quel objet. Tous les objets du <em>framework</em> Foundation supportent l'appel à <code>- description</code>. On peut donc afficher les informations d'un objet de cette manière.</p><p id="r-149105" data-claire-element-id="149105">Il vous suffit donc d'implémenter <code>- description</code> pour <code>Personnage</code> et <code>Arme</code> et d'afficher les informations comme ceci (c'est juste un exemple) :</p><pre id="r-149106" data-claire-element-id="149106"><code data-claire-semantic="objective-c">NSLog(@&quot;Voici la description de joueur1 : %@\nEt de son arme : %@&quot;, joueur1, [joueur1 arme]);</code></pre><h6 id="r-les-contraintes-que-vous-pourrez-rencontrer" data-claire-element-id="149109">Les contraintes que vous pourrez rencontrer</h6><p id="r-149107" data-claire-element-id="149107">On ne connaît pour l'instant pas de moyen pour interagir avec l'utilisateur en console. Il va donc falloir demander les noms des joueurs à l'aide de <code>scanf()</code> (ou une fonction de votre cru) et de les stocker dans des chaînes de caractères en C. Souvenez-vous de la méthode de <code>NSString</code> qui crée une <code>NSString</code> avec une chaîne de caractères C : <code>- initWithUTF8String:</code> ou <code>+ stringWithUTF8String:</code>.</p><p id="r-149108" data-claire-element-id="149108">Dans tous les cas, si vous êtes bloqué, persévérez, il ne faut jamais abandonner. En plus ce n'est pas un TP bien difficile. Il faut juste bien penser l'organisation des classes <code>Personnage</code> et <code>Arme</code>. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">
<span class="arrow"></span>
<span class="next">TP : Jeu de combat (RPG)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
<span class="next">La solution</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lasolution"></a><h2>La solution</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
<span class="arrow"></span>
<span class="next">Préliminaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">
<span class="next">Les tableaux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-solution-7" data-claire-element-id="149159">La solution</h4><p id="r-149112" data-claire-element-id="149112">Voici ma solution à ce premier TP. Si vous séchez, vous êtes autorisé à jeter un coup d'?il, mais essayez quand même de faire sans. ;)</p><aside id="r-149114" data-claire-element-id="149114" data-claire-semantic="warning"><p id="r-149113" data-claire-element-id="149113">Mon implémentation n'est pas la seule possible, ni la meilleure. C'est seulement celle que j'ai pensé être la plus simple.</p></aside><p id="r-149115" data-claire-element-id="149115">Comme dit dans les consignes, j'ai créé deux classes : <code>Personnage</code> et <code>Arme</code>.</p><h6 id="r-la-classe-personnage" data-claire-element-id="149129">La classe <code>Personnage</code></h6><p id="r-149116" data-claire-element-id="149116">La classe <code>Personnage</code> possède trois variables d'instance :</p><ul id="r-149123" data-claire-element-id="149123"><li id="r-149118" data-claire-element-id="149118"><p id="r-149117" data-claire-element-id="149117">une <code>Arme</code> nommée <code>epee</code>, c'est cet objet qui va donner les dégâts que notre <code>Personnage</code> peut infliger ;</p></li><li id="r-149120" data-claire-element-id="149120"><p id="r-149119" data-claire-element-id="149119">un <code>int</code> nommé <code>vie</code>, c'est la variable qui contient la vie de notre <code>Personnage</code> qui va de 100 à 0 ;</p></li><li id="r-149122" data-claire-element-id="149122"><p id="r-149121" data-claire-element-id="149121">une <code>NSString</code> nommée <code>nom</code> qui contiendra le nom de notre <code>Personnage</code>, cette variable sert surtout à faire la différence entre les deux joueurs.</p></li></ul><p id="r-149124" data-claire-element-id="149124">Au niveau des méthodes, la classe <code>Personnage</code> possède plusieurs méthodes qui interagissent avec un autre <code>Personnage</code>. La première attaque ce <code>Personnage</code>, en lui infligeant un certain nombre de dégâts. La deuxième demande à l'utilisateur l'action qu'il désire faire (attaquer ou améliorer son <code>Arme</code>) et agit en conséquence (à l'aide de la méthode d'attaque et de la méthode d'amélioration d'<code>Arme</code>).</p><p id="r-149125" data-claire-element-id="149125">Au niveau des dégâts, vu qu'il n'est pas possible de manipuler les variables membres d'un objet depuis l'extérieur, il faut coder un accesseur qui va réduire les dégâts. J'ai nommé cette méthode <code>- recevoirDegats:(int)</code>. Elle est donc appelée par la méthode d'attaque <code>- attaquer:(Personnage *)</code>. La méthode d'amélioration s'appelle tout simplement <code>- ameliorerEpee</code>.</p><p id="r-149126" data-claire-element-id="149126">Il faut également une méthode d'initialisation, qui prend en paramètre le nom du <code>Personnage</code>, et la méthode <code>- dealloc</code>.</p><p id="r-149127" data-claire-element-id="149127">On a également besoin d'un accesseur pour la vie du <code>Personnage</code>, pour savoir s'il est toujours vivant.</p><p id="r-149128" data-claire-element-id="149128">Enfin, et j'en ai parlé en introduction, la méthode <code>- description</code>, qui retourne une <code>NSString</code> contenant les informations du <code>Personnage</code>.</p><h6 id="r-la-classe-arme-1" data-claire-element-id="149158">La classe <code>Arme</code></h6><p id="r-149130" data-claire-element-id="149130">De son côté, <code>Arme</code> possède une seule variable d'instance. C'est un <code>int</code> nommé <code>degats</code>, qui représente les dégâts infligés à l'adversaire. Cette variable va de 10 à 100 (qui tue en un seul coup) par des pas de 5.</p><p id="r-149131" data-claire-element-id="149131">On a donc besoin de deux accesseurs, pour modifier la valeur de <code>degats</code> et récupérer cette valeur au moment de l'attaque.</p><p id="r-149132" data-claire-element-id="149132">Comme d'habitude, il nous faut une méthode d'initialisation avec les dégâts de départ. La méthode <code>- dealloc</code> est toutefois optionnelle, car <code>Arme</code> ne possède pas d'objet, seulement une variable « classique ».</p><p id="r-149133" data-claire-element-id="149133">Voici un petit schéma pour simplifier le tout :) :</p><figure id="r-149135" data-claire-element-id="149136"><img id="r-149134" data-claire-element-id="149134" src="medias/uploads.siteduzero.com_files_212001_213000_212693.png" alt="Image utilisateur"/></figure><p id="r-149137" data-claire-element-id="149137"><em>Les méthodes dont le type de retour n'est pas précisé sont <code>void</code>.</em></p><p id="r-149138" data-claire-element-id="149138">Voici le code source final.</p><pre id="r-149139" data-claire-element-id="149139"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

@interface Arme : NSObject
{
        int degats;
}

- (id) initAvecDegats:(int) desDegats;

/* Accesseurs pour la variable degats */
- (int) degats;
- (void) setDegats:(int) nouveauxDegats;

- (NSString *) description;

@end</code></pre><pre id="r-149140" data-claire-element-id="149140"><code data-claire-semantic="objective-c">#import &quot;Arme.h&quot;

@implementation Arme

- (id) initAvecDegats:(int) desDegats
{
        if ( (self = [super init]) ) {
                degats = desDegats;
        }

        return self;
}

- (int) degats
{
        return degats;
}

- (void) setDegats:(int) nouveauxDegats
{
        /* On s'arrête à 100 sinon on inflige plus de dégâts que la vie de l'adversaire */
        if (degats &lt; 100) 
                degats = nouveauxDegats;
}

- (NSString *) description
{
        /* On crée une NSString qui contient la description de l'épée */
        return [NSString stringWithFormat:@&quot;Degats : %d\n&quot;, degats];
}

@end</code></pre><pre id="r-149141" data-claire-element-id="149141"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

/* Obligatoire si on veut se servir de l'Arme */
#import &quot;Arme.h&quot;

@interface Personnage : NSObject
{
        Arme * epee;
        NSString * nom;
        int vie;
}

- (id) initAvecNom:(NSString *) unNom;
- (void) dealloc;

/* Méthodes de jeu */
- (void) jouerContre:(Personnage *)adversaire;
- (void) recevoirDegats:(int)degats;
- (void) attaquer:(Personnage *)cible;
- (void) ameliorerEpee;

/* Accesseur pour vie */
- (int) vie;

- (NSString *) description;

@end</code></pre><pre id="r-149142" data-claire-element-id="149142"><code data-claire-semantic="objective-c">#import &quot;Personnage.h&quot;

@implementation Personnage

- (id) initAvecNom:(NSString *) unNom
{
        if ( (self = [super init]) ) {
                /* Création des différents objets */
                epee = [[Arme alloc] initAvecDegats:10];
                nom = [[NSString alloc] initWithString:unNom];
                vie = 100;
        }

        return self;
}

- (void) dealloc
{
        [epee release];
        [nom release];
        [super dealloc];
}

- (void) jouerContre:(Personnage *)adversaire
{
        int reponse = 0;

        /* Présentation du Personnage */
        NSLog(@&quot;\n%@&quot;, self);

        /* On récupère une action de l'utilisateur */
        do {
                NSLog(@&quot;\nFaites votre choix :\n1.Attaquer\n2.Améliorer votre arme\nVotre choix : &quot;);
                scanf(&quot;%d&quot;, &amp;reponse);
        } while (reponse != 1 &amp;&amp; reponse != 2);

        if (reponse == 1)
                [self attaquer:adversaire];

        else if (reponse == 2)
                [self ameliorerEpee];
}

- (void) recevoirDegats:(int)degats
{
        vie -= degats;

        /* On vérifie qu'on n'est pas négatif */
        if (vie &lt; 0)
                vie = 0;
}

- (void) attaquer:(Personnage *)cible
{
        int degatsAFaire = [epee degats];
        [cible recevoirDegats:degatsAFaire];
}

- (void) ameliorerEpee
{
        [epee setDegats:[epee degats] + 5]; // On augmente les dégâts de 5
}

- (int) vie
{
        return vie;
}

- (NSString *) description
{
        return [NSString stringWithFormat:@&quot;Nom : %@\nVie : %d\n%@\n&quot;, nom, vie, epee];
}

@end</code></pre><pre id="r-149143" data-claire-element-id="149143"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

#import &quot;Personnage.h&quot;

int main (void)
{
        /* Variables :
         * Une NSAutoreleasePool : indipensable.
         * Deux Personnages pour jouer.
         * Deux chaînes de caractères pour les noms.
         * Deux NSString pour les noms en version NSString.
         */
        NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
        Personnage * joueur1, *joueur2;
        char nom1[25] = &quot;&quot;;
        char nom2[25] = &quot;&quot;;
        NSString * nomJoueur1, * nomJoueur2;

        /* On demande les noms
         * /!\ Attention aux dépassements de mémoire. Un vrai programme ne
         * serait pas codé comme ça. Il vaut mieux utiliser une fonction
         * d'entrée sécurisée (voir tutoriel de M@teo21) /!\
         */ 
        NSLog(@&quot;\nEntrez votre nom, joueur 1 : &quot;);
        scanf(&quot;%s&quot;, nom1);
        NSLog(@&quot;\nEntrez votre nom, joueur 2 : &quot;);
        scanf(&quot;%s&quot;, nom2);

        /* On les convertit en chaînes utilisables par notre classe Personnage */
        nomJoueur1 = [NSString stringWithUTF8String:nom1];
        nomJoueur2 = [NSString stringWithUTF8String:nom2];

        /* On initialise nos Personnages */
        joueur1 = [[Personnage alloc] initAvecNom:nomJoueur1];
        joueur2 = [[Personnage alloc] initAvecNom:nomJoueur2];

        /* On joue tant que les deux joueurs sont en vie */
        while ( [joueur1 vie] &gt; 0 &amp;&amp; [joueur2 vie] &gt; 0) {
                [joueur1 jouerContre:joueur2];
                /* Cette condition évite que le joueur 2 joue s'il est mort */
                if ( [joueur2 vie] &gt; 0)
                        [joueur2 jouerContre:joueur1];
        }

        /* On détermine le vainqueur : c'est celui auquel il reste de la vie */
        Personnage * vainqueur = ([joueur1 vie] &gt; 0) ? joueur1 : joueur2;
        NSLog(@&quot;\nVainqueur !!!\n%@&quot;, vainqueur);

        /* On se débarrasse de nos objets */
        [joueur1 release];
        [joueur2 release];

        /* On vide la NSAutoreleasePool : obligatoire */
        [pool drain];

        return 0;
}</code></pre><p id="r-149144" data-claire-element-id="149144">Comme je l'ai mis, il faut être prudent avec les fonctions d'entrée. Mais ce TP se concentre principalement sur la POO, il n'est pas nécessaire de se prendre la tête avec ça. ^^</p><p id="r-149145" data-claire-element-id="149145">Le moment est venu de faire un petit bilan de vos connaissances avant d'attaquer la prochaine partie :</p><ul id="r-149154" data-claire-element-id="149154"><li id="r-149147" data-claire-element-id="149147"><p id="r-149146" data-claire-element-id="149146">vous connaissez le fonctionnement des objets ;</p></li><li id="r-149149" data-claire-element-id="149149"><p id="r-149148" data-claire-element-id="149148">vous savez écrire une classe ;</p></li><li id="r-149151" data-claire-element-id="149151"><p id="r-149150" data-claire-element-id="149150">vous savez manipuler l'héritage ;</p></li><li id="r-149153" data-claire-element-id="149153"><p id="r-149152" data-claire-element-id="149152">vous connaissez le système de gestion de la mémoire de l'Objective-C (et croyez-moi ce n'est pas rien).</p></li></ul><p id="r-149155" data-claire-element-id="149155">Néanmoins, il vous manque des connaissances essentielles pour avancer. En effet, pour le moment, les seuls objets que nous avons manipulés sont les nôtres et l'objet <code>NSString</code>. Il est temps de progresser en largeur en découvrant petit à petit la bibliothèque « standard » (je mets standard entre guillemets, car si c'est la plus utilisée, elle ne vient pas par défaut avec l'Objective-C).</p><p id="r-149156" data-claire-element-id="149156">C'est ce que nous ferons dans la prochaine partie, en découvrant un moyen d'organiser des objets, à la manière d'un tableau ou d'une liste chaînée. ;)</p><p id="r-149157" data-claire-element-id="149157">Nous voici à la fin de cette partie. Vous connaissez à présent les grandes lignes de l'Objective-C. Il faut maintenant tout mettre en pratique, en apprenant le fonctionnement du <em>framework</em> Foundation. Le plus gros reste à faire. :-°</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
<span class="arrow"></span>
<span class="next">Préliminaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">
<span class="next">Les tableaux</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lestableaux"></a><h2>Les tableaux</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
<span class="arrow"></span>
<span class="next">La solution</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
<span class="next">Créer un tableau</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-149164" data-claire-element-id="149164">Maintenant que vous connaissez bien les bases de l'Objective-C, on va commencer à manipuler des objets du <em>framework</em> Foundation.<br/> Un <em>framework</em> est une collection d'objets, comme une bibliothèque (en fait c'en est une, mais qui se présente sous une forme différente).</p><p id="r-149165" data-claire-element-id="149165">Le <em>framework</em> Cocoa et le <em>framework</em> GNUstep se décomposent en deux <em>sous-frameworks</em>, qui sont Foundation et AppKit. Le premier sert principalement à manipuler des données, telles que des chaînes de caractères ou des tableaux. Le second sert à créer des objets qui s'affichent à l'écran, tels que des boutons, des images, du texte, etc. Je vous conseille de lire le tutoriel de <a href="http://www.siteduzero.com/membres-294-186432.html">Tchouk!</a> : <a href="http://www.siteduzero.com/tutoriel-3-176943-developper-sous-os-x-avec-cocoa.html">Développer sous OS X avec Cocoa</a> qui traite surtout de la partie GUI de Cocoa.</p><p id="r-149166" data-claire-element-id="149166">On a par ailleurs déjà manipulé un objet de Foundation : la <code>NSString</code>, qui symbolise une chaîne de caractères. Aujourd'hui, on va manipuler un objet qui permet de contenir d'autres objets : j'ai nommé <code>NSArray</code> ! ;)</p><aside id="r-149168" data-claire-element-id="149168" data-claire-semantic="information"><p id="r-149167" data-claire-element-id="149167">Pour la petite histoire, tous les objets de Cocoa portent le préfixe <em>NS</em>, qui est une référence à NeXTSTEP, la première version de l'API qui a donné Cocoa (cf. <a href="http://www.siteduzero.com/tutoriel-3-200559-introduction-a-l-objective-c.html">Introduction à l'Objective-C</a>). ;)</p></aside>
</div><a name="Creruntableau"></a><h2>Créer un tableau</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">
<span class="arrow"></span>
<span class="next">Les tableaux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
<span class="next">Les méthodes courantes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-creer-un-tableau-1" data-claire-element-id="149188">Créer un tableau</h4><p id="r-149169" data-claire-element-id="149169">En C, les tableaux sont des cases de la mémoire contiguës (côte à côte). Leur nombre est défini à la compilation si on les déclare comme ceci <code data-claire-semantic="c">int tableau[5] = {0, 1, 2, 3, 4}</code>, et à l'exécution si on le fait comme ceci <code data-claire-semantic="c">int * tableau = malloc (sizeof(int) * nbCases)</code>.</p><p id="r-149170" data-claire-element-id="149170">Les limites des tableaux en C sont leur taille, mais aussi le type des variables qu'ils contiennent. Une fois un tableau créé, on ne peut ajouter de nouvel objet « en dehors » du tableau, c'est-à-dire au-delà des limites de la mémoire allouée, ce qui rend les tableaux peu pratiques. Un autre désavantage est le fait que l'on ne puisse pas changer le type de variables qu'il doit contenir. Un tableau de <code>int</code> ne peut pas contenir de <code>float</code> par exemple.</p><p id="r-149171" data-claire-element-id="149171">En Objective-C, il existe un objet qui peut faire ça : l'objet <code>NSArray</code> (<em>array</em> veut dire tableau en anglais). ;)<br/><code>NSArray</code> hérite de <code>NSObject</code>. Il permet de manipuler une liste d'objets quelconques à l'aide d'index. En effet, les objets sont rangés et numérotés de 0 à X.</p><h5 id="r-initialiser-un-nsarray" data-claire-element-id="149187">Initialiser un <code>NSArray</code></h5><p id="r-149172" data-claire-element-id="149172">Ça devrait être un jeu d'enfant pour vous à présent :</p><pre id="r-149173" data-claire-element-id="149173"><code data-claire-semantic="objective-c">NSArray * tableau = [[NSArray alloc] init];
/* Et quand on a fini... */
[tableau release];</code></pre><p id="r-149174" data-claire-element-id="149174">Ou en utilisant une méthode de classe :</p><pre id="r-149175" data-claire-element-id="149175"><code data-claire-semantic="objective-c">NSArray * tableau = [NSArray array]; // Attention : vous n'êtes pas le propriétaire de l'objet</code></pre><p id="r-149176" data-claire-element-id="149176">On utilise très peu ces méthodes. En effet, <code>NSArray</code>, tout comme <code>NSString</code>, est un objet <strong>immuable</strong> (on ne peut pas le changer une fois créé). On utilise alors d'autres méthodes pour initialiser à partir d'autres objets, comme d'autres <code>NSArray</code>s, ou encore les objets que doit contenir le <code>NSArray</code> que l'on veut créer :</p><pre id="r-149177" data-claire-element-id="149177"><code data-claire-semantic="objective-c">/* À partir d'un autre NSArray */
NSArray * tableau = [[NSArray alloc] initWithArray:unAutreTableau]; // Vous êtes propriétaire
NSArray * tableau = [NSArray arrayWithArray:unAutreTableau];        // Vous ne l'êtes pas

/* Avec UN SEUL objet */
NSArray * tableau = [[NSArray alloc] initWithObject:unObjet];
NSArray * tableau = [NSArray arrayWithObject:unObjet];</code></pre><p id="r-149178" data-claire-element-id="149178">Pour initialiser un <code>NSArray</code> avec <strong>plusieurs</strong> objets, on utilise les méthodes <code>- initWithObjects:</code> et <code>+ arrayWithObjects:</code>. Elles prennent en paramètre une liste d'objets séparés par des virgules. Le dernier objet de cette liste <strong>doit</strong> être <code data-claire-semantic="objective-c">nil</code>. Un exemple :</p><pre id="r-149179" data-claire-element-id="149179"><code data-claire-semantic="objective-c">NSArray * listeDesCourses = [NSArray arrayWithObjects:@&quot;Dentifrice&quot;, @&quot;Papier Toilette&quot;, @&quot;Stylos&quot;, nil];
NSArray * tachesAFaire = [NSArray arrayWithObjects:listeDesCourses, @&quot;Laver la voiture&quot;, nil];</code></pre><div id="r-149181" data-claire-element-id="149181" data-claire-semantic="question"><p id="r-149180" data-claire-element-id="149180">On peut mettre un tableau dans un autre ? Même si les autres objets ne sont pas du même type ?</p></div><p id="r-149182" data-claire-element-id="149182">Oui, c'est tout l'avantage du <code>NSArray</code>. Souvenez-vous du type <code>id</code>. Il représente un objet quelconque. Tous les objets à l'intérieur du <code>NSArray</code> sont des objets de type <code>id</code>. En revanche, un <code>NSArray</code> ne peut pas contenir de variables de type <code>int</code>, <code>float</code>, etc. En effet, ce ne sont pas des objets. À la place, on utilise l'objet <code>NSNumber</code> :</p><pre id="r-149183" data-claire-element-id="149183"><code data-claire-semantic="objective-c">NSArray * tableau = [NSArray arrayWithObjects:[NSNumber numberWithInt:5], [NSNumber numberWithInt:3], nil];</code></pre><aside id="r-149185" data-claire-element-id="149185" data-claire-semantic="warning"><p id="r-149184" data-claire-element-id="149184">On ne peut pas mettre <code data-claire-semantic="objective-c">nil</code> dans un <code>NSArray</code>, il ne peut pas y avoir de trou, de case vide. On utilise à la place un objet <code>NSNull</code> :</p></aside><pre id="r-149186" data-claire-element-id="149186"><code data-claire-semantic="objective-c">NSArray * tableau [NSArray arrayWithObjects:objet1, [NSNull null], objet3, nil];</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">
<span class="arrow"></span>
<span class="next">Les tableaux</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
<span class="next">Les méthodes courantes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesmthodescourantes"></a><h2>Les méthodes courantes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
<span class="arrow"></span>
<span class="next">Créer un tableau</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
<span class="next">La mémoire avec NSArray</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-methodes-courantes" data-claire-element-id="149219">Les méthodes courantes</h4><p id="r-149189" data-claire-element-id="149189">Ce n'est pas tout de créer notre tableau, il faut aussi savoir s'en servir. :p<br/> Commençons par les méthodes de base : <code>- count</code> et <code>- objectAtIndex:</code>.</p><p id="r-149190" data-claire-element-id="149190">La méthode <code>- count</code>, comme son nom l'indique, renvoie le nombre d'objets contenus dans le <code>NSArray</code>.</p><pre id="r-149191" data-claire-element-id="149191"><code data-claire-semantic="objective-c">NSArray * tableau = [NSArray arrayWithObjects:@&quot;Savon&quot;, @&quot;Café&quot;, @&quot;Chocolat Suisse&quot;, nil];
int nbObjets = [tableau count];</code></pre><p id="r-149192" data-claire-element-id="149192">Ici, notre variable <code>nbObjets</code> vaudra 3, car <code>nil</code> n'est pas ajouté dans le <code>NSArray</code>, il sert juste à terminer la liste d'objets fournie à celui-ci.</p><p id="r-149193" data-claire-element-id="149193">La méthode <code>- objectAtIndex:</code>, quant à elle, renvoie l'objet qui se trouve à l'index donné en paramètre. Les « cases » du tableau son numérotées de 0 à <em>count - 1</em> :</p><figure id="r-149195" data-claire-element-id="149196"><img id="r-149194" data-claire-element-id="149194" src="medias/uploads.siteduzero.com_files_213001_214000_213328.png" alt="Image utilisateur"/></figure><p id="r-149197" data-claire-element-id="149197">On peut ainsi parcourir un tableau de cette façon, à l'aide d'une boucle <code>for</code> :</p><pre id="r-149198" data-claire-element-id="149198"><code data-claire-semantic="objective-c">int i;

for (i = 0 ; i &lt; [tableau count] ; i++) {
    id objet = [tableau objectAtIndex:i];
    [objet faireQuelqueChose];
}</code></pre><p id="r-149199" data-claire-element-id="149199">Cela ressemble diablement au parcours d'un tableau C. :-°</p><p id="r-149200" data-claire-element-id="149200">Une autre méthode couramment utilisée est <code>- indexOfObject:</code>. En fait, elle fait exactement l'inverse de <code>- objectAtIndex:</code>. Au lieu de retourner un objet d'index donné, elle retourne l'index d'un objet donné. Pour cela, la méthode compare l'objet passé en paramètre avec les objets contenus dans le <code>NSArray</code>.</p><div id="r-149202" data-claire-element-id="149202" data-claire-semantic="question"><p id="r-149201" data-claire-element-id="149201">Vu qu'un <code>NSArray</code> peut contenir plusieurs types d'objets, comment la méthode fait-elle la comparaison ?</p></div><p id="r-149203" data-claire-element-id="149203">Elle regarde les adresses des objets. Si le pointeur donné en paramètre pointe vers le même endroit dans la mémoire que l'un des pointeurs du <code>NSArray</code>, alors elle retourne l'index de cet objet.</p><p id="r-149204" data-claire-element-id="149204">L'inconvénient de cette méthode, c'est la comparaison d'objets. Si par exemple on veut voir si un <code>NSString</code> que l'on a récupéré se trouve dans un <code>NSArray</code>, on ne peut que comparer les <strong>adresses</strong>, et non les <strong>valeurs</strong> des ces <code>NSString</code>.</p><p id="r-149205" data-claire-element-id="149205">Voici un exemple d'utilisation courante :</p><pre id="r-149206" data-claire-element-id="149206"><code data-claire-semantic="objective-c">/* Pour obtenir l'index d'un objet */
int positionHierarchie = [listeDesEmployees indexOfObject:jeanMarc];

/* Pour vérifier qu'un objet est dans un NSArray */
if ([listeDesEmployees indexOfObject:gerard] != NSNotFound) {
    // L'objet existe
}</code></pre><p id="r-149207" data-claire-element-id="149207">Comme vous le voyez, la fonction renvoie un <code>int</code>, qui vaut <code>NSNotFound</code> si l'objet ne se trouve pas dans le <code>NSArray</code>.</p><h5 id="r-le-tableau-qui-change-nsmutablearray" data-claire-element-id="149218">Le tableau qui change : <code>NSMutableArray</code></h5><p id="r-149208" data-claire-element-id="149208">Le problème du <code>NSArray</code>, c'est qu'il est immuable. Il n'est pas possible de modifier les objets qu'il contient, c'est-à-dire les supprimer, les réorganiser, etc.</p><p id="r-149209" data-claire-element-id="149209">Il existe par contre un objet qui est capable de le faire. C'est le <code>NSMutableArray</code>, qui est au <code>NSArray</code> ce que l'objet <code>NSMutableString</code> est à l'objet <code>NSString</code>. Comme vous l'aurez compris, <code>NSMutableArray</code> hérite de <code>NSArray</code>. C'est donc un <code>NSArray</code>, avec d'autres fonctionnalités.</p><aside id="r-149211" data-claire-element-id="149211" data-claire-semantic="information"><p id="r-149210" data-claire-element-id="149210">On pourrait se demander : « pourquoi utiliser les <code>NSArray</code> si les <code>NSMutableArray</code> sont mieux ? ». La réponse n'est pas simple. En fait, il arrive souvent que l'on n'ait pas besoin d'un objet <code>NSMutableArray</code>, particulièrement quand on travaille avec des objets de Cocoa. À ce moment-là, un <code>NSArray</code> fait très bien l'affaire. Mais personne ne décide pour vous les objets que vous utilisez. ^^</p></aside><p id="r-149212" data-claire-element-id="149212">En plus des méthodes héritées de <code>NSArray</code>, l'objet <code>NSMutableArray</code> possède des méthodes pour modifier son propre contenu.</p><p id="r-149213" data-claire-element-id="149213">On notera notamment la méthode <code>- addObject:</code>, qui prend en paramètre un objet, et qui l'ajoute à la fin du tableau. Son contraire est <code>- removeLastObject</code>, bien sûr ! ^^</p><p id="r-149214" data-claire-element-id="149214">Pour ajouter des objets au milieu d'un tableau, on a <code>- insertObject:atIndex:</code>, qui prend en paramètres l'objet à ajouter et l'index de celui-ci. Son inverse est <code>- removeObjectAtIndex:</code>, qui prend en paramètre l'index de l'objet à supprimer.</p><p id="r-149215" data-claire-element-id="149215">Pour remplacer un objet par un autre, on a la méthode <code>- replaceObjectAtIndex:withObject</code>.</p><p id="r-149216" data-claire-element-id="149216">Voici un petit exemple :</p><pre id="r-149217" data-claire-element-id="149217"><code data-claire-semantic="objective-c">NSMutableArray * tableau = [NSMutableArray array];
[tableau addObject:@&quot;Do&quot;];
[tableau insertObject:@&quot;Ré&quot; atIndex:0];

/* On a : @&quot;Ré&quot;, @&quot;Do&quot; */

[tableau replaceObjectAtIndex:1 withObject:@&quot;Mi&quot;];
[tableau addObject:@&quot;Fa&quot;];
[tableau removeObjectAtIndex:0];

/* On a : @&quot;Mi&quot;, @&quot;Fa&quot; */

[tableau removeAllObjects]; // On vide tout le tableau</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
<span class="arrow"></span>
<span class="next">Créer un tableau</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
<span class="next">La mémoire avec NSArray</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LammoireavecNSArray"></a><h2>La mémoire avec NSArray</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
<span class="arrow"></span>
<span class="next">Les méthodes courantes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
<span class="next">En bonus</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-memoire-avec-nsarray" data-claire-element-id="149230">La mémoire avec NSArray</h4><p id="r-149220" data-claire-element-id="149220">Il est important, quand on travaille avec des objets, de savoir comment ils manipulent la mémoire.<br/> En réfléchissant un peu, il est facile de deviner le fonctionnement de <code>NSArray</code> dans ce domaine-là.</p><p id="r-149221" data-claire-element-id="149221">Comme un <code>NSArray</code> stocke des objets, il en a besoin, et ne peut pas les voir libérés de la mémoire « comme ça ». :p Chaque objet d'un <code>NSArray</code> se retrouve donc retenu par celui-ci. Vous pouvez donc envoyer le message <code>- release</code> à un objet qui a été ajouté dans un <code>NSArray</code> sans le libérer de la mémoire.</p><p id="r-149222" data-claire-element-id="149222">Au niveau de la libération de la mémoire, une fois que le <code>NSArray</code> est libéré, il envoie le message <code>- release</code> à tous ses objets. Jusque-là pas de problème, mais jetez un coup d'?il au code suivant :</p><pre id="r-149223" data-claire-element-id="149223"><code data-claire-semantic="objective-c">id monObjet = [tableau objectAtIndex:3];
[tableau release];</code></pre><p id="r-149224" data-claire-element-id="149224">On a créé un pointeur vers un des objets du <code>tableau</code>, c'est le pointeur <code>monObjet</code>. Que va-t-il advenir de ce pointeur une fois que <code>tableau</code> est libéré de la mémoire ? Un message <code>- release</code> sera envoyé à <code>monObjet</code>, et il y a des chances que celui-ci soit libéré de la mémoire à son tour. On se trouvera donc avec un pointeur invalide. :-°</p><div id="r-149226" data-claire-element-id="149226" data-claire-semantic="question"><p id="r-149225" data-claire-element-id="149225">Mais les accesseurs ne doivent-ils pas retourner des objets auxquels on a envoyé <code>- retain</code> puis <code>- autorelease</code> ?</p></div><p id="r-149227" data-claire-element-id="149227">Si, mais on n'a aucune garantie que cela ait été implémenté dans tous les accesseurs de tous les objets de Foundation. De plus, <code>- objectAtIndex:</code> est un message très souvent envoyé, et il doit être efficace (en termes de temps et de mémoire). Il est donc très probable que l'objet retourné par la méthode ne soit pas retenu. Pour être sûr de ne pas perdre l'objet en cours de route, on s'occupe nous-mêmes de la mémoire :</p><pre id="r-149228" data-claire-element-id="149228"><code data-claire-semantic="objective-c">id monObjet = [[tableau objectAtIndex:3] retain];
[tableau release];

/* Et quand on a fini */

[monObjet release];</code></pre><p id="r-149229" data-claire-element-id="149229">La même chose est valable pour les <code>NSMutableArray</code> bien sûr, mais aussi et surtout pour les méthodes qui suppriment un objet particulier, comme <code>- removeObjectAtIndex:</code>, car un objet supprimé par ce type de méthode se voit aussi envoyé un message <code>- release</code>. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
<span class="arrow"></span>
<span class="next">Les méthodes courantes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
<span class="next">En bonus</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Enbonus"></a><h2>En bonus</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
<span class="arrow"></span>
<span class="next">La mémoire avec NSArray</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">
<span class="next">Données sans ordre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-en-bonus-1" data-claire-element-id="149279">En bonus</h4><p id="r-149231" data-claire-element-id="149231">Les développeurs du <em>framework</em> Foundation ont pensé à une solution élégante et pratique pour parcourir un <code>NSArray</code>. Tout à l'heure, on a vu que cette tâche pouvait être faite <em>via</em> une boucle <code>for</code> :</p><pre id="r-149232" data-claire-element-id="149232"><code data-claire-semantic="objective-c">int i;

for (i = 0 ; i &lt; [tableau count] ; i++) {
     id objet = [tableau objectAtIndex:i];
     /* Ensuite on manipule objet */
}</code></pre><p id="r-149233" data-claire-element-id="149233">C'est pratique et intuitif, mais c'est tout de même un peu lourd. :-° Alors les développeurs ont codé un nouvel objet (ou plutôt une classe) qui permettait de parcourir un tableau facilement, sans avoir à faire une boucle <code>for</code> ou utiliser un compteur.</p><p id="r-149234" data-claire-element-id="149234">La classe qui permet d'instancier un tel objet est <code>NSEnumerator</code>. Chaque objet du type <code>NSEnumerator</code> est unique au tableau qu'il parcourt. C'est pourquoi les objets <code>NSArray</code> possèdent une méthode appelée <code>- objectEnumerator</code>, qui retourne un objet <code>NSEnumerator</code>, qui va nous permettre de parcourir le tableau facilement grâce à sa méthode <code>- nextObject</code>.</p><p id="r-149235" data-claire-element-id="149235">Cette méthode particulière retourne un objet différent à chaque appel : les objets contenus dans le tableau. Et lorsqu'on arrive au dernier objet du tableau, cette méthode retourne un <code>nil</code>.</p><p id="r-149236" data-claire-element-id="149236">On peut donc énumérer les objets d'un tableau de cette façon :</p><pre id="r-149237" data-claire-element-id="149237"><code data-claire-semantic="objective-c">NSEnumerator * enumerator =  [tableau objectEnumerator]; // Vous n'êtes pas propriétaire de enumerator

id objet;

while (objet = [enumerator nextObject]) { // On boucle tant que la méthode ne renvoie pas nil (ce qui casse la condition)
     /* On travaille avec objet */
     [objet foo];
}</code></pre><p id="r-149238" data-claire-element-id="149238">Cette méthode possède deux avantages : elle vaut pour les trois grands types de conteneurs dans le <em>framework</em> Foundation : les <code>NSArray</code>, les <code>NSDictionary</code> et les <code>NSSet</code>, et elle retient les objets en mémoire lors de l'énumération. Ça permet dans certains cas d'éviter la libération de la mémoire d'un objet (en le supprimant d'un tableau, par exemple). ;) Par contre, il n'est pas recommandé de modifier les objets du <code>NSArray</code> au cours d'une énumération.</p><p id="r-149239" data-claire-element-id="149239">Cependant, une fois une collection d'objets parcourue, on ne peut pas remettre à zéro un <code>NSEnumerator</code>. Il en faut un nouveau. De plus, quand le <code>NSEnumerator</code> est épuisé, il libère de la mémoire les objets qu'il contenait.</p><h5 id="r-exercices-13" data-claire-element-id="149278">Exercices</h5><p id="r-149240" data-claire-element-id="149240">Pour clore ce chapitre, je vous propose une petite série d'exercices qui vous feront manipuler les tableaux, les « énumérateurs » et les classes.</p><h6 id="r-une-to-do-list" data-claire-element-id="149242">Une To-Do list</h6><p id="r-149241" data-claire-element-id="149241">C'est l'exercice de base. Il s'agit d'une liste d'actions à faire, par ordre de priorité. Vous pouvez coder un petit programme qui gère ça. Il permettra par exemple à l'utilisateur de visionner la liste, d'ajouter une tâche, ou au contraire d'en supprimer une. ;) Vous pourrez vous en sortir sans créer de nouvelle classe.</p><h6 id="r-pile" data-claire-element-id="149254">Pile</h6><p id="r-149243" data-claire-element-id="149243">Les piles sont des structures de données couramment utilisées pour gérer des objets ou des valeurs d'une certaine façon. La pile fonctionne comme une pile de pièces de monnaie. Si on veut ajouter une pièce, on la pose sur le dessus. Il n'y a qu'un moyen de rajouter des pièces dans la pile : c'est d'en <strong>empiler</strong> une nouvelle. De la même façon, la seule manière de retirer des pièces de la pile, c'est d'enlever celle qui est sur le dessus. On dit qu'on la <strong>dépile</strong>.</p><p id="r-149244" data-claire-element-id="149244">Vous devrez donc coder une nouvelle classe (<code>Pile</code> par exemple), qui gère les objets de la pile avec un <code>NSMutableArray</code>, et qui possède quatre méthodes importantes :</p><ul id="r-149253" data-claire-element-id="149253"><li id="r-149246" data-claire-element-id="149246"><p id="r-149245" data-claire-element-id="149245">la méthode d'initialisation ;</p></li><li id="r-149248" data-claire-element-id="149248"><p id="r-149247" data-claire-element-id="149247">empiler ;</p></li><li id="r-149250" data-claire-element-id="149250"><p id="r-149249" data-claire-element-id="149249">dépiler ;</p></li><li id="r-149252" data-claire-element-id="149252"><p id="r-149251" data-claire-element-id="149251">nombre d'éléments.</p></li></ul><h6 id="r-file" data-claire-element-id="149267">File</h6><p id="r-149255" data-claire-element-id="149255">Les files sont des structures de données qui fonctionnent comme une file d'attente. Lorsqu'un client arrive, il se met à la dernière place. Le seul moyen d'ajouter des données est de les mettre à la fin de la file : on <strong>enfile</strong>. Pour supprimer une valeur, on prend la première de la file. On <strong>défile</strong>.<br/> Ici encore, il faudra faire une nouvelle classe. Vous devrez implémenter quelques méthodes importantes :</p><ul id="r-149264" data-claire-element-id="149264"><li id="r-149257" data-claire-element-id="149257"><p id="r-149256" data-claire-element-id="149256">la méthode d'initialisation ;</p></li><li id="r-149259" data-claire-element-id="149259"><p id="r-149258" data-claire-element-id="149258">enfiler ;</p></li><li id="r-149261" data-claire-element-id="149261"><p id="r-149260" data-claire-element-id="149260">défiler ;</p></li><li id="r-149263" data-claire-element-id="149263"><p id="r-149262" data-claire-element-id="149262">nombre d'éléments.</p></li></ul><p id="r-149265" data-claire-element-id="149265">Vous pourrez vous amuser dans ces deux exercices à coder une méthode retournant un <code>NSEnumerator</code> pour la liste des valeurs internes. :)</p><p id="r-149266" data-claire-element-id="149266">Nous venons de découvrir une façon d'organiser des objets, grâce à <code>NSArray</code>. Il existe deux autres objets qui permettent d'accomplir cette tâche, mais de façon différente. Nous verrons au prochain chapitre l'objet <code>NSDictionary</code>, qui organise ses objets avec des clés. Il existe également l'objet <code>NSSet</code>, mais il ne sera que brièvement abordé dans ce tutoriel.</p><h6 id="r-liens-vers-la-doc" data-claire-element-id="149277">Liens vers la doc</h6><ul id="r-149276" data-claire-element-id="149276"><li id="r-149269" data-claire-element-id="149269"><p id="r-149268" data-claire-element-id="149268"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/Collections/Collections.html#//apple_ref/doc/uid/10000034i">Collections Programming Topic</a></p></li><li id="r-149271" data-claire-element-id="149271"><p id="r-149270" data-claire-element-id="149270"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html">NSArray</a></p></li><li id="r-149273" data-claire-element-id="149273"><p id="r-149272" data-claire-element-id="149272"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html">NSMutableArray</a></p></li><li id="r-149275" data-claire-element-id="149275"><p id="r-149274" data-claire-element-id="149274"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSEnumerator_Class/Reference/Reference.html">NSEnumerator</a></p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
<span class="arrow"></span>
<span class="next">La mémoire avec NSArray</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">
<span class="next">Données sans ordre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Donnessansordre"></a><h2>Données sans ordre</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
<span class="arrow"></span>
<span class="next">En bonus</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
<span class="next">Principe du dictionnaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-149281" data-claire-element-id="149281">Dans le chapitre précédent, nous avons vu comment stocker des objets de manière organisée, suivant un certain ordre (déterminé par l'index). Ce n'est pas le seul moyen de stocker des données avec Cocoa. Il existe d'ailleurs deux objets qui permettent de stocker des données sans ordre précis : <code>NSDictionary</code> et <code>NSSet</code>.</p><p id="r-149282" data-claire-element-id="149282">L'objet <code>NSDictionary</code> a un fonctionnement particulier. Les objets ne sont plus classés dans un certain ordre, mais sont associés à des objets spéciaux : des clés. Il n'y a donc plus d'ordre véritable. Un objet <code>NSDictionary</code> est communément appelé <strong>dictionnaire</strong>.</p><p id="r-149283" data-claire-element-id="149283">L'objet <code>NSSet</code> va encore plus loin : il se débarrasse de tout ordre. o_O Les objets ne sont alors conformes à aucun arrangement à l'intérieur du <code>NSSet</code>. Un objet <code>NSSet</code> est communément appelé <strong>ensemble</strong> (comme un <a href="http://fr.wikipedia.org/wiki/Ensemble">ensemble mathématique</a>).</p><p id="r-149284" data-claire-element-id="149284">Votre intérêt pour ces objets inconnus étant soudainement apparu, je vous propose de lire la suite ! :p</p>
</div><a name="Principedudictionnaire"></a><h2>Principe du dictionnaire</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">
<span class="arrow"></span>
<span class="next">Données sans ordre</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
<span class="next">Manipuler un dictionnaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-principe-du-dictionnaire" data-claire-element-id="149296">Principe du dictionnaire</h4><p id="r-149285" data-claire-element-id="149285">Il y a tout d'abord deux choses qu'il convient de distinguer dans un dictionnaire : les clés et les objets contenus dans le dictionnaire. Les clés sont des objets de type <code>id</code>. On peut donc utiliser n'importe quel objet en tant que clé dans un <code>NSDictionary</code>. C'est très pratique, bien que souvent, on se contentera d'utiliser des objets <code>NSString</code>.</p><p id="r-149286" data-claire-element-id="149286">Dans un dictionnaire, il y a une association entre une clé et un objet, de la même façon qu'il y avait une association entre un index et un objet dans le <code>NSArray</code>. Pour retrouver un objet stocké dans un dictionnaire, il suffit de trouver sa clé.</p><p id="r-149287" data-claire-element-id="149287">Ce fonctionnement peut être schématisé comme ceci :</p><figure id="r-149289" data-claire-element-id="149290"><img id="r-149288" data-claire-element-id="149288" src="medias/uploads.siteduzero.com_files_228001_229000_228438.png" alt="Image utilisateur"/></figure><p id="r-149291" data-claire-element-id="149291">Tout comme l'objet <code>NSArray</code>, le <code>NSDictionary</code> peut contenir n'importe quel type d'objet (<code>NSString</code>, <code>NSNumber</code>, etc.).</p><div id="r-149293" data-claire-element-id="149293" data-claire-semantic="question"><p id="r-149292" data-claire-element-id="149292">Quel est l'intérêt de cet objet par rapport à une structure C classique ? On peut tout aussi bien faire ça avec une structure, n'est-ce pas ?</p></div><p id="r-149294" data-claire-element-id="149294">C'est vrai, on pourrait créer une structure <code>Personne</code> qui contiendrait une adresse et un numéro de téléphone. Mais l'avantage du <code>NSDictionary</code> réside dans sa souplesse : on peut créer un <code>NSDictionary</code> de la forme que l'on veut ; il n'y a pas besoin de définir les clés comme on le ferait avec les sous-variables (champs) d'une structure C. ;)</p><p id="r-149295" data-claire-element-id="149295">Cette souplesse pose quand même un problème : comment savoir si une clé existe dans un dictionnaire ? Mais avant de répondre à cette question, voyons plutôt comment créer des <code>NSDictionary</code>. :-°</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">
<span class="arrow"></span>
<span class="next">Données sans ordre</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
<span class="next">Manipuler un dictionnaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Manipulerundictionnaire"></a><h2>Manipuler un dictionnaire</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
<span class="arrow"></span>
<span class="next">Principe du dictionnaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
<span class="next">Les ensembles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-manipuler-un-dictionnaire" data-claire-element-id="149339">Manipuler un dictionnaire</h4><p id="r-149297" data-claire-element-id="149297">La création d'une instance de la classe <code>NSDictionary</code> est très similaire à celle d'une instance de la classe <code>NSArray</code>. On retrouve la même forme pour les méthodes d'initialisation :</p><pre id="r-149298" data-claire-element-id="149298"><code data-claire-semantic="objective-c">NSDictionary * dict = [NSDictionary dictionaryWithObject:@&quot;Genève&quot; forKey:@&quot;Ville&quot;];</code></pre><p id="r-149299" data-claire-element-id="149299">Dans cet exemple, on initialise un dictionnaire avec un seul couple clé-objet. La clé est une chaîne : <code>@&quot;Ville&quot;</code> ; l'objet est également une chaîne : <code>@&quot;Genève&quot;</code>. Notez que le prototype de la méthode de classe définit les paramètres comme étant des objets de type <code>id</code>, c'est-à-dire n'importe quels objets.</p><div id="r-149301" data-claire-element-id="149301" data-claire-semantic="question"><p id="r-149300" data-claire-element-id="149300">Et si on veut créer plusieurs couples dans un même dictionnaire, c'est possible ?</p></div><p id="r-149302" data-claire-element-id="149302">Bien sûr, mais il faut connaître les clés et les objets que l'on va fournir au dictionnaire. On doit créer deux tableaux qui vont contenir les objets et les clés, et ces tableaux seront passés en paramètre au dictionnaire.</p><pre id="r-149303" data-claire-element-id="149303"><code data-claire-semantic="objective-c">NSArray * lesObjets = [NSArray arrayWithObjects:@&quot;Genève&quot;, @&quot;Suisse&quot;, @&quot;Europe&quot;, nil];
NSArray * lesCles = [NSArray arrayWithObjects:@&quot;Ville&quot;, @&quot;Pays&quot;, @&quot;Continent&quot;, nil];


NSDictionary * dict = [NSDictionary dictionaryWithObjects:lesObjets forKeys:lesCles];</code></pre><aside id="r-149305" data-claire-element-id="149305" data-claire-semantic="warning"><p id="r-149304" data-claire-element-id="149304">Attention : ici, l'ordre des objets et des clés est très important. Il faut que l'objet d'indice <code>i</code> soit associé à la clé d'indice <code>i</code> ! ;)</p></aside><p id="r-149306" data-claire-element-id="149306">Comme l'initialisation d'un dictionnaire avec plusieurs paires clé-objet est une opération courante et que passer par des tableaux est un peu lourd, les développeurs ont construit une autre méthode de classe.</p><pre id="r-149307" data-claire-element-id="149307"><code data-claire-semantic="objective-c">NSDictionary * dict = [NSDictionary dictionaryWithObjectsAndKeys:@&quot;Genève&quot;, @&quot;Ville&quot;,
                                                                 @&quot;Suisse&quot;, @&quot;Pays&quot;,
                                                                 @&quot;Europe&quot;, @&quot;Continent&quot;, nil];</code></pre><p id="r-149308" data-claire-element-id="149308">Comme vous pouvez le constater, on n'a plus besoin de tableau ici. En revanche, il faut faire attention aux paires : on donne toujours l'objet en premier, puis la clé qui lui est associée, et on termine la liste par <code>nil</code>.</p><aside id="r-149310" data-claire-element-id="149310" data-claire-semantic="information"><p id="r-149309" data-claire-element-id="149309">Bien entendu, toutes ces méthodes de classe ont leur analogue avec <code>init...</code> : <code>- initWithObject:forKey:</code>, <code>- initWithObjectsAndKeys:</code>, etc. :) Il faut bien sûr se soucier de la mémoire dès lors qu'on utilise l'une de ces méthodes.</p></aside><h5 id="r-manipuler-les-couples" data-claire-element-id="149338">Manipuler les couples</h5><p id="r-149311" data-claire-element-id="149311">Pour accéder au contenu d'un dictionnaire, on utilise la méthode <code>- objectForKey:</code>, qui prend en paramètre la clé associée à l'objet. Par exemple, ce code :</p><pre id="r-149312" data-claire-element-id="149312"><code data-claire-semantic="objective-c">NSDictionary * dict = [NSDictionary dictionaryWithObjectsAndKeys:@&quot;Genève&quot;, @&quot;Ville&quot;,
                                                                 @&quot;Suisse&quot;, @&quot;Pays&quot;,
                                                                 @&quot;Europe&quot;, @&quot;Continent&quot;, nil];

NSLog (@&quot;Vous habitez en %@, à %@ !&quot;, [dict objectForKey:@&quot;Pays&quot;], [dict objectForKey:@&quot;Ville&quot;]);</code></pre><p id="r-149313" data-claire-element-id="149313">... va produire l'affichage suivant :</p><pre id="r-149314" data-claire-element-id="149314"><code data-claire-semantic="console">Vous habitez en Suisse, à Genève !</code></pre><p id="r-149315" data-claire-element-id="149315">Facile, non ? ^^</p><p id="r-149316" data-claire-element-id="149316">On peut même afficher un dictionnaire grâce à la fonction <code>NSLog()</code>. Voici la <em>description</em> de l'objet <code>dict</code> (cf. le <a href="http://www.siteduzero.com/tutoriel-3-222100-tp-jeu-de-combat-rpg.html">TP</a> de la partie I).</p><pre id="r-149317" data-claire-element-id="149317"><code data-claire-semantic="console">{
    Ville = Genève;
    Pays = Suisse;
    Continent = Europe;
}</code></pre><h6 id="r-changer-les-couples" data-claire-element-id="149327">Changer les couples</h6><p id="r-149318" data-claire-element-id="149318">Tout comme une instance de <code>NSArray</code>, une instance de <code>NSDictionary</code> est immuable. Pour pouvoir modifier un dictionnaire, il faut une instance de la classe <code>NSMutableDictionary</code>. On peut alors modifier les couples clé-objet :</p><pre id="r-149319" data-claire-element-id="149319"><code data-claire-semantic="objective-c">[dict setObject:nouvelObjet forKey:@&quot;Clé&quot;];</code></pre><p id="r-149320" data-claire-element-id="149320">On a deux cas de figure ici :</p><ul id="r-149325" data-claire-element-id="149325"><li id="r-149322" data-claire-element-id="149322"><p id="r-149321" data-claire-element-id="149321">soit le couple ayant pour clé l'objet <code>@&quot;Clé&quot;</code> existe déjà : à ce moment-là, l'ancien objet reçoit le message <code>- release</code>, tandis que le nouvel objet prend sa place dans le dictionnaire et reçoit le message <code>- retain</code> ;</p></li><li id="r-149324" data-claire-element-id="149324"><p id="r-149323" data-claire-element-id="149323">soit le couple n'existe pas encore : il est alors créé. ;)</p></li></ul><p id="r-149326" data-claire-element-id="149326">Bien entendu, on peut aussi supprimer des objets grâce à la méthode <code>- removeObjectForKey:</code>. Dans ce cas-ci, si la clé n'existe pas, il ne se passe rien. On peut également utiliser la méthode <code>- removeAllObjects</code> qui, comme son nom l'indique, vide le dictionnaire.</p><h6 id="r-autres-methodes" data-claire-element-id="149337">Autres méthodes</h6><p id="r-149328" data-claire-element-id="149328">Comme avec <code>NSArray</code>, la classe <code>NSDictionary</code> peut fournir des <code>NSEnumerator</code>. En fait, elle peut en fournir deux : un pour les clés et un autre pour les objets. C'est très pratique pour parcourir un dictionnaire :</p><pre id="r-149329" data-claire-element-id="149329"><code data-claire-semantic="objective-c">/* On reprend le dictionnaire &quot;dict&quot; qui contient la ville &quot;Genève&quot; */
NSEnumerator * cleEnum = [dict keyEnumerator];
id cle = nil;

while (cle = [cleEnum nextObject]) {
    NSLog (@&quot;Clé : %@\nValeur : %@\n\n&quot;, cle, [dict objectForKey:cle]);
}</code></pre><pre id="r-149330" data-claire-element-id="149330"><code data-claire-semantic="console">Clé : Ville
Valeur : Genève

Clé : Pays
Valeur : Suisse

Clé : Continent
Valeur : Europe</code></pre><p id="r-149331" data-claire-element-id="149331">Rien de bien sorcier, comme vous pouvez le constater.</p><p id="r-149332" data-claire-element-id="149332">On peut également récupérer les clés sous la forme d'un tableau grâce à la méthode <code>- allKeys</code>, ou encore récupérer les objets grâce à <code>- allValues</code>.</p><aside id="r-149334" data-claire-element-id="149334" data-claire-semantic="warning"><p id="r-149333" data-claire-element-id="149333">Si vous jetez un coup d'?il à la <a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDictionary">documentation</a>, vous pouvez remarquer que quelques méthodes s'écrivent avec le nom <code>object</code> et que d'autres s'écrivent avec <code>value</code> (on a par exemple <code>- objectForKey:</code> et <code>- valueForKey:</code>). À notre niveau, il n'y a pas de différence entre ces méthodes. Plus tard, nous verrons une nouvelle spécificité de l'Objective-C, nommée KVC, qui expliquera la différence entre ces deux familles de méthodes. ;)</p></aside><p id="r-149335" data-claire-element-id="149335">Enfin, pour connaître le nombre de couples présents dans le dictionnaire, il suffit d'appeler la méthode <code>- count</code> qui renvoie un <code>int</code>. :)</p><p id="r-149336" data-claire-element-id="149336">Je vous laisse consulter la documentation de <a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDictionary">NSDictionary</a> si vous souhaitez approfondir vos connaissances de cette classe.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
<span class="arrow"></span>
<span class="next">Principe du dictionnaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
<span class="next">Les ensembles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesensembles"></a><h2>Les ensembles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
<span class="arrow"></span>
<span class="next">Manipuler un dictionnaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">
<span class="next">Les fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-ensembles" data-claire-element-id="149377">Les ensembles</h4><p id="r-149340" data-claire-element-id="149340">Les ensembles sont des objets beaucoup moins communs que les tableaux ou les dictionnaires. Cependant, il est fort probable que vous en rencontriez un au cours de votre développement avec Cocoa. C'est pourquoi je vais en parler rapidement.</p><p id="r-149341" data-claire-element-id="149341">Les objets <code>NSSet</code> sont utiles lorsque vous avez besoin de stocker des objets sans ordre particulier, par opposition au <code>NSArray</code>. Le fait que les objets soient stockés sans ordre précis restreint l'usage d'un ensemble à un but précis : déterminer si un objet est présent dans l'ensemble.</p><p id="r-149342" data-claire-element-id="149342">On peut faire ça avec un tableau, en exécutant la méthode <code>- containsObject:</code>. Cependant, cette méthode est plutôt lente et gourmande en ressources, car il faut parcourir tout le tableau pour trouver l'objet (dans le pire des cas). Un ensemble est plus efficace à ce petit jeu, car il utilise un algorithme de <a href="http://fr.wikipedia.org/wiki/Fonction de hachage">hachage</a> pour différencier les objets et les retrouver. Notez qu'un dictionnaire utilise également le hachage pour organiser ses objets (en interne bien sûr, nous ne voyons pas cette organisation lorsque nous utilisons un dictionnaire).</p><h6 id="r-creer-un-ensemble" data-claire-element-id="149346">Créer un ensemble</h6><p id="r-149343" data-claire-element-id="149343">Vous devez maintenant en avoir l'habitude ; on utilise souvent les mêmes méthodes, avec quelques variantes :</p><pre id="r-149344" data-claire-element-id="149344"><code data-claire-semantic="objective-c">/* Initialisation avec un seul objet */
NSSet * set = [NSSet setWithObject:[NSNumber numberWithInt:2]];

/* Initialisation avec un tableau */
NSSet * set = [NSSet setWithArray:mesObjetsRanges];

/* Initialisation avec plusieurs objets */
NSSet * equipe = [[NSSet alloc] initWithObjects:@&quot;Validateurs&quot;,
                                                @&quot;zCorrecteurs&quot;,
                                                @&quot;Newsers&quot;,
                                                @&quot;Modérateurs&quot;,
                                                @&quot;Administrateurs&quot;, nil];
// Attention à la mémoire !
[equipe release];</code></pre><p id="r-149345" data-claire-element-id="149345">Bien sûr, la méthode <code>+ setWithObjects:</code> existe aussi. :)</p><h6 id="r-se-renseigner-sur-les-objets" data-claire-element-id="149358">Se renseigner sur les objets</h6><p id="r-149347" data-claire-element-id="149347">Pour savoir si un objet appartient à un ensemble, on exécute la méthode <code>- containsObject:</code>. Cette méthode retourne un booléen qui vaut <code>YES</code> si l'objet dépend de l'ensemble, et <code>NO</code> dans le cas contraire.</p><pre id="r-149348" data-claire-element-id="149348"><code data-claire-semantic="objective-c">if ( [equipe containsObject:@&quot;Validateurs&quot;] ) {
    NSLog (@&quot;Les validateurs font partie de l'équipe !&quot;);
}</code></pre><p id="r-149349" data-claire-element-id="149349">La méthode <code>- member:</code> est légèrement différente. Elle vérifie aussi si l'objet passé en paramètre appartient à l'ensemble. Si c'est le cas, elle retourne l'objet trouvé. Sinon, elle retourne <code>nil</code>.</p><p id="r-149350" data-claire-element-id="149350">On peut récupérer les objets contenus dans un ensemble de plusieurs façons.</p><ul id="r-149357" data-claire-element-id="149357"><li id="r-149352" data-claire-element-id="149352"><p id="r-149351" data-claire-element-id="149351">La méthode <code>- allObjects</code> retourne un tableau contenant tous les objets de l'ensemble. Attention cependant, l'ordre du tableau n'est pas défini : on ne sait pas quel objet sera à l'indice <code>i</code>.</p></li><li id="r-149354" data-claire-element-id="149354"><p id="r-149353" data-claire-element-id="149353">La méthode <code>- objectEnumerator</code> retourne un objet <code>NSEnumerator</code>, fonctionnant de la même façon que tous ceux que l'on a vus jusqu'à présent. De même, l'ordre n'est pas défini.</p></li><li id="r-149356" data-claire-element-id="149356"><p id="r-149355" data-claire-element-id="149355">La méthode <code>- anyObject</code> retourne <strong>un</strong> objet de l'ensemble. Attention, l'objet n'est pas forcément tiré au sort, ni toujours le même.</p></li></ul><h6 id="r-classes-filles" data-claire-element-id="149362">Classes filles</h6><p id="r-149359" data-claire-element-id="149359">Tout comme les classes que l'on a vues précédemment, <code>NSSet</code> possède une classe fille <code>NSMutableSet</code>, qui permet d'ajouter des objets (<code>- addObject:</code>) ou d'en enlever (<code>-removeObject:</code>).</p><p id="r-149360" data-claire-element-id="149360">Toutefois, contrairement aux autres classes étudiées jusqu'ici, <code>NSMutableSet</code> possède une classe fille : <code>NSCountedSet</code>. Cette classe permet de compter le nombre de fois qu'un objet apparaît dans un ensemble. Avec les classes <code>NSSet</code> et <code>NSMutableSet</code>, un objet ne peut apparaître qu'une seule fois dans un ensemble, même si on l'y ajoute plusieurs fois. <code>NSCountedSet</code> associe un compteur à chaque objet présent dans l'ensemble et l'incrémente à chaque fois qu'un objet est ajouté. ;)</p><p id="r-149361" data-claire-element-id="149361">Nous venons d'apprendre les trois grands moyens de stocker des données avec le <em>framework</em> Foundation. Ces chapitres étaient nécessaires pour passer à des choses plus complexes, comme la manipulation des fichiers ! :D</p><h6 id="r-liens-vers-la-doc-1" data-claire-element-id="149376">Liens vers la doc</h6><ul id="r-149375" data-claire-element-id="149375"><li id="r-149364" data-claire-element-id="149364"><p id="r-149363" data-claire-element-id="149363"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/Collections/Collections.html#//apple_ref/doc/uid/10000034i">Collections Programming Topics</a></p></li><li id="r-149366" data-claire-element-id="149366"><p id="r-149365" data-claire-element-id="149365"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/occ/cl/NSDictionary">NSDictionary</a></p></li><li id="r-149368" data-claire-element-id="149368"><p id="r-149367" data-claire-element-id="149367"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html#//apple_ref/occ/cl/NSMutableDictionary">NSMutableDictionary</a></p></li><li id="r-149370" data-claire-element-id="149370"><p id="r-149369" data-claire-element-id="149369"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html#//apple_ref/occ/cl/NSSet">NSSet</a></p></li><li id="r-149372" data-claire-element-id="149372"><p id="r-149371" data-claire-element-id="149371"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSMutableSet_Class/Reference/NSMutableSet.html#//apple_ref/occ/cl/NSMutableSet">NSMutableSet</a></p></li><li id="r-149374" data-claire-element-id="149374"><p id="r-149373" data-claire-element-id="149373"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSCountedSet_Class/Reference/Reference.html#//apple_ref/occ/cl/NSCountedSet">NSCountedSet</a></p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
<span class="arrow"></span>
<span class="next">Manipuler un dictionnaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">
<span class="next">Les fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesfichiers"></a><h2>Les fichiers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
<span class="arrow"></span>
<span class="next">Les ensembles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
<span class="next">Représentation d&#039;un chemin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-149379" data-claire-element-id="149379">On va à présent pouvoir attaquer les choses sérieuses : la manipulation des fichiers. Il y a un tas de choses à savoir, et ce chapitre va être long : représentation des chemins, différentes façons de lire un fichier, lire et enregistrer des objets, etc. Ce chapitre est dense et complexe. N'hésitez pas à prendre votre temps et à faire des expériences par vous-même. :)</p>
</div><a name="Reprsentationd039unchemin"></a><h2>Représentation d&#039;un chemin</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">
<span class="arrow"></span>
<span class="next">Les fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
<span class="next">Lire et écrire du texte</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-representation-d-un-chemin" data-claire-element-id="149412">Représentation d'un chemin</h4><p id="r-149380" data-claire-element-id="149380">Vous vous souvenez sûrement de la fonction <code>fopen()</code>, utilisée en C pour ouvrir des fichiers. Elle prend en paramètre le chemin de ce fichier et le mode d'ouverture. C'est au chemin que l'on va s'intéresser ici.</p><p id="r-149381" data-claire-element-id="149381">En Objective-C, on peut utiliser deux objets pour représenter un chemin : une instance de <code>NSString</code> ou une instance de <code>NSURL</code>.</p><h5 id="r-un-chemin-comme-une-chaine-de-caracteres" data-claire-element-id="149396">Un chemin comme une chaîne de caractères</h5><p id="r-149382" data-claire-element-id="149382">Quand on utilise une chaîne pour représenter un chemin, on suit les mêmes règles que pour la fonction <code>fopen()</code> : un chemin commençant par <code>/</code> est un chemin absolu, le <code>/</code> représentant la racine du disque dur.</p><pre id="r-149383" data-claire-element-id="149383"><code data-claire-semantic="objective-c">@&quot;/usr/local/lib&quot;</code></pre><p id="r-149384" data-claire-element-id="149384">Ceci est un chemin absolu. Il représente le dossier <code>lib</code> se trouvant dans le dossier <code>local</code>, lui-même dans <code>usr</code>, qui se trouve à la racine.</p><p id="r-149385" data-claire-element-id="149385">Le chemin relatif indique l'emplacement d'un fichier ou d'un dossier en partant du dossier qui contient l'exécutable du programme. Si on change de place l'exécutable, il ne saura pas comment retrouver le fichier, contrairement au chemin absolu.</p><pre id="r-149386" data-claire-element-id="149386"><code data-claire-semantic="objective-c">@&quot;image/fond.png&quot;</code></pre><p id="r-149387" data-claire-element-id="149387">Ceci est un chemin relatif : il représente le fichier <code>fond.png</code> qui se situe dans le dossier <code>image</code>, lui-même dans le dossier contenant l'exécutable. Le chemin est donc <strong>relatif</strong> à la position de l'exécutable.</p><p id="r-149388" data-claire-element-id="149388">Voici un schéma pour illustrer tout ça :</p><figure id="r-149390" data-claire-element-id="149391"><img id="r-149389" data-claire-element-id="149389" src="medias/uploads.siteduzero.com_files_245001_246000_245897.png" alt="Image utilisateur"/></figure><p id="r-149392" data-claire-element-id="149392">On voit bien ici que le chemin absolu « part » de la racine disque, alors que le chemin relatif « part » de l'exécutable.</p><div id="r-149394" data-claire-element-id="149394" data-claire-semantic="question"><p id="r-149393" data-claire-element-id="149393">Mais si on part de l'exécutable, on ne peut pas remonter dans la hiérarchie des dossiers ?</p></div><p id="r-149395" data-claire-element-id="149395">Si ; voici un exemple : <code>@&quot;../Shared&quot;</code>. Les <code>..</code> indiquent le dossier parent. Dans l'exemple, notre exécutable se trouve dans le dossier <code>prs513rosewood</code>. <code>..</code> est donc le dossier <code>Users</code>, qui est son dossier supérieur. Ainsi, <code>Shared</code> se trouve dans <code>Users</code>, au même niveau que le dossier <code>prs513rosewood</code>. On peut même mettre <code>..</code> plusieurs fois dans un chemin : <code>@&quot;../../usr&quot;</code> représente le dossier <code>usr</code> situé à la racine. <code>@&quot;../../usr&quot;</code> est donc équivalent à <code>@&quot;/usr&quot;</code>. Par contre, si on déplace l'exécutable, <code>@&quot;../../usr&quot;</code> va correspondre à autre chose (peut-être à rien). ^^</p><h5 id="r-la-classe-nsurl" data-claire-element-id="149411">La classe <code>NSURL</code></h5><p id="r-149397" data-claire-element-id="149397">Dans le <em>framework</em> Foundation, il existe beaucoup d'objets en mesure de lire le contenu d'un fichier. <code>NSString</code> en est capable, par exemple. En regardant attentivement la documentation, on s'aperçoit que les méthodes permettant de lire le contenu d'un fichier attendent en paramètre une représentation du chemin de ce fichier. Certaines de ces méthodes demandent une simple chaîne de caractères, d'autres une instance de la classe <code>NSURL</code>.</p><p id="r-149398" data-claire-element-id="149398">Une URL est une chaîne de caractères représentant l'adresse de quelque chose (un fichier, un dossier, etc.). Vous en avez certainement déjà entendu parler, car c'est ce qui se trouve dans votre barre d'adresse et qui commence par <code>http://www.siteduzero.com/...</code>.</p><p id="r-149399" data-claire-element-id="149399">Une instance de la classe <code>NSURL</code> peut donc représenter un fichier sur votre disque dur, ou encore une page web : c'est vous qui décidez. :)</p><aside id="r-149401" data-claire-element-id="149401" data-claire-semantic="information"><p id="r-149400" data-claire-element-id="149400">Dans ce chapitre, on n'utilisera pas de <code>NSURL</code> pour récupérer du contenu sur Internet ; on va se limiter à notre disque dur, ce qui permet l'écriture dans des fichiers. ;)</p></aside><p id="r-149402" data-claire-element-id="149402">Il existe deux méthodes de classe permettant de créer une nouvelle instance de <code>NSURL</code> :</p><ul id="r-149407" data-claire-element-id="149407"><li id="r-149404" data-claire-element-id="149404"><p id="r-149403" data-claire-element-id="149403"><code>URLWithString:</code> : cette méthode crée une instance à partir d'une chaîne de caractères représentant une URL. On ne l'utilisera pas dans ce chapitre ;</p></li><li id="r-149406" data-claire-element-id="149406"><p id="r-149405" data-claire-element-id="149405"><code>fileURLWithPath:</code> : cette méthode génère automatiquement une URL à partir d'un chemin passé en paramètre, comme on l'a vu tout à l'heure.</p></li></ul><p id="r-149408" data-claire-element-id="149408">Ce qui donne :</p><pre id="r-149409" data-claire-element-id="149409"><code data-claire-semantic="objective-c">NSURL * cheminURL = [NSURL fileURLWithPath:@&quot;images/fichier.png&quot;];</code></pre><p id="r-149410" data-claire-element-id="149410">Vous devez maintenant savoir le faire ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">
<span class="arrow"></span>
<span class="next">Les fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
<span class="next">Lire et écrire du texte</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lireetcriredutexte"></a><h2>Lire et écrire du texte</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
<span class="arrow"></span>
<span class="next">Représentation d&#039;un chemin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
<span class="next">Enregistrer un objet, la théorie</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-lire-et-ecrire-du-texte" data-claire-element-id="149465">Lire et écrire du texte</h4><p id="r-149413" data-claire-element-id="149413">On peut dire qu'en Objective-C, les processus de lecture et d'écriture dans un fichier sont beaucoup moins divers qu'en C. En effet, en C, on peut ouvrir un fichier en mode texte, récupérer son contenu ou encore écrire dans ce fichier, mais aussi le manipuler en mode binaire, en récupérer les données ou en écrire, tout cela avec très peu de fonctions « couteau suisse ». En effet, la fonction qui écrit un <code>int</code> dans un fichier est la même que celle qui écrit un <code>double</code>.</p><p id="r-149414" data-claire-element-id="149414">En Objective-C, il existe une fonction pour chaque variable « normale » (par exemple un <code>int</code>), mais aussi pour chaque objet. En fait, beaucoup d'objets du <em>framework</em> Foundation savent s'écrire eux-mêmes dans des fichiers.</p><p id="r-149415" data-claire-element-id="149415">C'est le cas de la classe <code>NSString</code>, même si son cas est particulier, car elle permet de lire et d'écrire dans un fichier en mode texte, en utilisant des caractères.</p><h6 id="r-initialiser-une-chaine-a-partir-d-un-fichier" data-claire-element-id="149464">Initialiser une chaîne à partir d'un fichier</h6><p id="r-149416" data-claire-element-id="149416">Cette fois-ci, on va étudier le prototype d'une fonction permettant de créer une chaîne à partir du contenu d'un fichier :</p><pre id="r-149417" data-claire-element-id="149417"><code data-claire-semantic="objective-c">+ (id) stringWithContentsOfFile:(NSString *) path
                       encoding:(NSStringEncoding) enc
                          error:(NSError **) error</code></pre><p id="r-149418" data-claire-element-id="149418">Cette méthode retourne un objet <code>id</code>, pas de surprise de ce côté-là. Le premier paramètre <code>path</code> est une chaîne de caractères représentant le chemin du fichier. Il suffit de donner une chaîne du type <code>@&quot;images/fichier.png&quot;</code>. :) <br/> Le deuxième paramètre est déjà plus intriguant. Il n'y a pas d'étoile entre les parenthèses, ce n'est donc pas un objet. En fait, <code>NSStringEncoding</code> représente un entier positif. Il faut donc fournir un nombre en paramètre pour indiquer le <a href="http://fr.wikipedia.org/wiki/Codage de caractères">codage de caractères</a>, c'est-à-dire la façon dont les caractères sont écrits dans le fichier.</p><p id="r-149419" data-claire-element-id="149419">Afin de simplifier la vie du développeur, des constantes ont été définies pour chacun de ces nombres. Ainsi, <code>NSASCIIStringEncoding</code> remplace l'entier 1, <code>NSUTF8StringEncoding</code> l'entier 4, etc.</p><p id="r-149420" data-claire-element-id="149420">Il est impératif de fournir un type de codage à l'appel de cette méthode.</p><div id="r-149422" data-claire-element-id="149422" data-claire-semantic="question"><p id="r-149421" data-claire-element-id="149421">Mais lequel choisir ?</p></div><p id="r-149423" data-claire-element-id="149423">La liste complète peut être trouvée <a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/constant_group/String_Encodings">ici</a>. Pour la langue française, il est recommandé d'utiliser le codage Latin1 (<code>NSISOLatin1StringEncoding</code>) ou l'UTF-8 (<code>NSUTF8StringEncoding</code>). J'utiliserai ce dernier tout au long du tutoriel.</p><p id="r-149424" data-claire-element-id="149424">Le troisième paramètre n'est pas vraiment un objet non plus. Les deux étoiles indiquent que la méthode attend un pointeur sur un pointeur. o_O Comme son nom l'indique, cet objet <code>error</code> sert à récupérer les éventuelles erreurs lors de la lecture du fichier. Comme la méthode retourne un <code>id</code> (elle retourne <code>nil</code> si l'objet n'a pas pu être créé), on ne peut pas retourner un objet contenant l'erreur. Il faut donc donner l'adresse d'un pointeur pour que la méthode puisse modifier l'objet.</p><div id="r-149426" data-claire-element-id="149426" data-claire-semantic="question"><p id="r-149425" data-claire-element-id="149425">Il est pourtant toujours possible de modifier un objet passé en paramètre. Alors pourquoi passer l'adresse d'un pointeur ?</p></div><p id="r-149427" data-claire-element-id="149427">C'est vrai, mais pas avec cette fonction-là. Un schéma s'impose. :p Voici le fonctionnement de la fonction en cas d'erreur, si on donnait un objet en paramètre comme on le fait d'habitude.</p><figure id="r-149429" data-claire-element-id="149430"><img id="r-149428" data-claire-element-id="149428" src="medias/uploads.siteduzero.com_files_256001_257000_256241.png" alt="Image utilisateur"/></figure><p id="r-149431" data-claire-element-id="149431"><em>Souvenez-vous, la valeur d'une variable est copiée lorsqu'elle est passée à une fonction.</em></p><p id="r-149432" data-claire-element-id="149432">Vous voyez le problème ? Le pointeur <code>erreur</code> passé en paramètre ne sera pas modifié par la fonction. Voici à présent ce qui se passe si on donne l'adresse du pointeur.</p><figure id="r-149434" data-claire-element-id="149435"><img id="r-149433" data-claire-element-id="149433" src="medias/uploads.siteduzero.com_files_256001_257000_256242.png" alt="Image utilisateur"/></figure><p id="r-149436" data-claire-element-id="149436">La fonction manipule le pointeur <code>p_erreur_copie</code>, ce qui correspond à manipuler <code>erreur</code>. Quand nous récupérons <code>p_erreur</code>, nous avons bien le même objet <code>erreur</code> que celui qui a été manipulé par la fonction. :)</p><p id="r-149437" data-claire-element-id="149437">Pour résumer, voici la méthode pour récupérer le contenu (et tout le contenu !) d'un fichier dans une <code>NSString</code> :</p><pre id="r-149438" data-claire-element-id="149438"><code data-claire-semantic="objective-c">NSError * erreur = nil;
NSString * contenu = [NSString stringWithContentsOfFile:@&quot;documents/fichier.txt&quot;
                                               encoding:NSUTF8StringEncoding
                                                  error:&amp;erreur]; // On donne l'adresse de &quot;erreur&quot;</code></pre><p id="r-149439" data-claire-element-id="149439">Oui, on peut écrire un message sur plusieurs lignes, ça fait plus joli et c'est plus lisible pour les longs messages. :-°</p><aside id="r-149441" data-claire-element-id="149441" data-claire-semantic="information"><p id="r-149440" data-claire-element-id="149440">Il s'agit de la meilleure façon de passer les paramètres. Souvent, on ne se soucie pas des erreurs et on passe <code data-claire-semantic="c">NULL</code> (attention, pas <code data-claire-semantic="objective-c">nil</code>) en paramètre pour <code>error:</code>.</p></aside><p id="r-149442" data-claire-element-id="149442">Ainsi donc, notre chaîne de caractères <code>contenu</code> contient <strong>tout</strong> le fichier <code>@&quot;documents/fichier.txt&quot;</code>. Cette méthode existe aussi en version <code>init...</code>, comme d'habitude.</p><p id="r-149443" data-claire-element-id="149443">Il existe une seconde méthode similaire accomplissant le même travail. Voici son prototype :</p><pre id="r-149444" data-claire-element-id="149444"><code data-claire-semantic="objective-c">+ (id) stringWithContentsOfURL:(NSURL *) url
                      encoding:(NSStringEncoding) enc 
                         error:(NSError **) error</code></pre><p id="r-149445" data-claire-element-id="149445">Comme vous le voyez, on n'est pas très loin de l'autre méthode, à l'exception du premier paramètre. Cette fois, on doit donner une instance de <code>NSURL</code> à la méthode. On peut donc initialiser cette instance à l'aide des méthodes vues tout à l'heure :</p><pre id="r-149446" data-claire-element-id="149446"><code data-claire-semantic="objective-c">NSURL * cheminURL = [NSURL fileURLWithPath:@&quot;documents/fichier.txt&quot;];
NSString * contenu = [NSString stringWithContentsOfURL:cheminURL
                                              encoding:NSUTF8StringEncoding
                                                 error:NULL];
// On passe NULL en paramètre pour ne pas se préoccuper des erreurs</code></pre><p id="r-149447" data-claire-element-id="149447">Voilà, vous savez lire un fichier texte ! :D</p><div id="r-149449" data-claire-element-id="149449" data-claire-semantic="question"><p id="r-149448" data-claire-element-id="149448">Tout cela est bien joli, mais tout un fichier dans une seule chaîne, ce n'est pas vraiment pratique ! Comment faire si on ne veut lire qu'une seule ligne ? Ou caractère par caractère ? Ou pour lire une chaîne formatée, comme avec <code>fscanf()</code> ?</p></div><p id="r-149450" data-claire-element-id="149450">L'avantage de cette technique, c'est qu'on n'a justement plus besoin de se soucier de ça ! Une fois la chaîne de caractères créée, il suffit de la parcourir pour se balader dans le fichier. Par exemple :</p><pre id="r-149451" data-claire-element-id="149451"><code data-claire-semantic="objective-c">char c = 0;
int i;

for (i = 0 ; i &lt; [contenu length] &amp;&amp; c != '\n' ; i++) {
    c = [contenu characterAtIndex:i];
    // Du code...
}</code></pre><p id="r-149452" data-claire-element-id="149452">Dans le cas présent, on lit la première ligne caractère par caractère. ;) Étant donné que la classe <code>NSString</code> propose beaucoup de méthodes très pratiques, on peut facilement manipuler le contenu d'un fichier.</p><p id="r-149453" data-claire-element-id="149453">Bon, je l'admets, on ne retrouve pas de fonction similaire à <code>fscanf()</code> dans la documentation de <code>NSString</code>. En revanche, si vous voulez vraiment analyser une chaîne formatée, je vous laisse regarder du côté de la classe <code><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html#//apple_ref/occ/cl/NSScanner">NSScanner</a></code>. ;)</p><h5 id="r-ecrire-dans-un-fichier-1" data-claire-element-id="149463">Écrire dans un fichier</h5><p id="r-149454" data-claire-element-id="149454">Bien entendu, si vous créez une instance de <code>NSMutableString</code> à partir d'un fichier et que vous la modifiez, le fichier restera inchangé. Pour mettre à jour le fichier, il faut écrire cette chaîne dans ce fichier. C'est possible grâce à la méthode que voici :</p><pre id="r-149455" data-claire-element-id="149455"><code data-claire-semantic="objective-c">- (BOOL) writeToFile:(NSString *) path
          atomically:(BOOL) useAuxiliaryFile 
            encoding:(NSStringEncoding) enc
               error:(NSError **) error</code></pre><p id="r-149456" data-claire-element-id="149456">La méthode retourne un booléen, qui vaut <code>YES</code> si l'écriture a pu se faire, et <code>NO</code> s'il y a eu un problème.</p><p id="r-149457" data-claire-element-id="149457">Vous devez certainement reconnaître les paramètres 1, 3 et 4 : ce sont les mêmes que lors de la lecture. Le second paramètre est intéressant. Si vous fournissez <code>YES</code>, l'écriture se fera dans un fichier distinct (c'est-à-dire différent de <code>path</code>), qui sera ensuite renommé pour remplacer <code>path</code>. Le fichier temporaire est donc effacé. Si vous fournissez <code>NO</code>, l'écriture se fait directement dans le fichier <code>path</code>. L'avantage de fournir <code>YES</code> est qu'en cas de <em>crash</em> inopiné, le contenu de <code>path</code> restera inchangé. :)</p><aside id="r-149459" data-claire-element-id="149459" data-claire-semantic="warning"><p id="r-149458" data-claire-element-id="149458">Quand vous écrivez une chaîne dans un fichier, le contenu de celui-ci est écrasé et remplacé par la chaîne !</p></aside><p id="r-149460" data-claire-element-id="149460">Comme pour la lecture, il existe la même méthode attendant une instance de <code>NSURL</code> :</p><pre id="r-149461" data-claire-element-id="149461"><code data-claire-semantic="objective-c">- (BOOL) writeToURL:(NSURL *) url
         atomically:(BOOL) useAuxiliaryFile 
           encoding:(NSStringEncoding) enc
              error:(NSError **) error</code></pre><p id="r-149462" data-claire-element-id="149462">Essayez de mettre cela en pratique ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
<span class="arrow"></span>
<span class="next">Représentation d&#039;un chemin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
<span class="next">Enregistrer un objet, la théorie</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Enregistrerunobjetlathorie"></a><h2>Enregistrer un objet, la théorie</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
<span class="arrow"></span>
<span class="next">Lire et écrire du texte</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
<span class="next">Archiver des objets dans un fichier</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-enregistrer-un-objet-la-theorie" data-claire-element-id="149498">Enregistrer un objet, la théorie</h4><p id="r-149466" data-claire-element-id="149466">Tout cela est bien joli, mais manipuler du texte n'est pas très pratique lorsqu'on souhaite enregistrer des objets dans un fichier. :-°</p><p id="r-149467" data-claire-element-id="149467">Deux solutions s'offrent alors à nous pour enregistrer des objets.</p><ul id="r-149472" data-claire-element-id="149472"><li id="r-149469" data-claire-element-id="149469"><p id="r-149468" data-claire-element-id="149468">Créer un fichier XML qui contient les variables membres d'un objet. C'est une technique pratique car le fichier qui en résulte est un fichier texte, mais elle est plutôt lourde à mettre en place. Nous n'en traiterons pas dans ce chapitre, mais sachez que c'est une méthode utilisée par un objet : <code>NSDictionary</code>. Vous pouvez d'ailleurs essayer la méthode <code>- writeToFile:atomically:</code> et regarder le fichier produit.</p></li><li id="r-149471" data-claire-element-id="149471"><p id="r-149470" data-claire-element-id="149470">Adopter le protocole <code>NSCoding</code>. C'est ce que nous allons faire sur-le-champ.</p></li></ul><h5 id="r-le-protocole-nscoding" data-claire-element-id="149497">Le protocole <code>NSCoding</code></h5><p id="r-149473" data-claire-element-id="149473">Vous vous souvenez des <a href="http://www.siteduzero.com/tutoriel-3-200560-l-heritage.html#ss_part_3">protocoles</a> ? Un petit rappel rapide : ce sont des listes de méthodes qu'une classe doit implémenter.</p><p id="r-149474" data-claire-element-id="149474">Le protocole <code>NSCoding</code> contient deux méthodes : une qui va initialiser un objet à partir d'un fichier (on appelle cela <strong>désarchiver</strong> un objet), et une autre qui va enregistrer un objet dans un fichier (on dit <strong>archiver</strong> un objet). L'avantage de réunir ces méthodes dans un protocole est que d'une part, on peut vérifier qui implémente le protocole, et d'autre part, tous les objets l'implémentant sont uniformes : les méthodes sont les mêmes pour tout le monde, et c'est très pratique. :)</p><p id="r-149475" data-claire-element-id="149475">Voici le code du protocole :</p><pre id="r-149476" data-claire-element-id="149476"><code data-claire-semantic="objective-c">@protocol NSCoding
- (void) encodeWithCoder:(NSCoder *) encoder;
- (id) initWithCoder:(NSCoder *) decoder;
@end</code></pre><p id="r-149477" data-claire-element-id="149477">Il est donc obligatoire pour toute classe voulant se conformer au protocole d'implémenter <code>- initWithCoder:</code> et <code>- encodeWithCoder:</code>.</p><div id="r-149479" data-claire-element-id="149479" data-claire-semantic="question"><p id="r-149478" data-claire-element-id="149478">Qu'est-ce que cet objet <code>NSCoder</code> passé en paramètre ?</p></div><p id="r-149480" data-claire-element-id="149480"><code>NSCoder</code> est une classe abstraite. C'est une classe que l'on ne peut pas instancier (en d'autres termes, on ne peut pas créer d'objet <code>NSCoder</code>). En effet, la classe contient bon nombre de choses très utiles, mais elle n'est pas complète. Si l'on veut créer un objet avec les caractéristiques de la classe <code>NSCoder</code>, il faut instancier une de ses classes filles. Ce sont d'ailleurs des instances des classes filles qui sont passées en paramètre lorsque ces méthodes sont appelées. ;)</p><p id="r-149481" data-claire-element-id="149481">Concrètement, cet objet <code>NSCoder</code> va nous aider à archiver ou désarchiver les variables d'un objet.</p><p id="r-149482" data-claire-element-id="149482">Prenons un exemple : nous allons archiver une salle de classe dans un fichier. Pour cela, nous allons avoir besoin de trois classes : une classe <code>SalleDeClasse</code>, une classe <code>Professeur</code> et une classe <code>Eleve</code>.</p><p id="r-149483" data-claire-element-id="149483">Dans une <code>SalleDeClasse</code>, il y a <strong>un</strong> professeur et <strong>plusieurs</strong> élèves. Il y aura donc une variable membre de type <code>Professeur</code> et un tableau (<code>NSArray</code>) qui contiendra les <code>Eleve</code>. ;)</p><aside id="r-149485" data-claire-element-id="149485" data-claire-semantic="information"><p id="r-149484" data-claire-element-id="149484">Les fichiers d'implémentation présentent peu d'intérêt (exclusivement des choses que vous connaissez déjà), c'est pourquoi je les cache. Nous vous privez pas de les consulter si vous avez un doute.</p></aside><pre id="r-149486" data-claire-element-id="149486"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

#import &quot;Professeur.h&quot;
#import &quot;Eleve.h&quot;

@interface SalleDeClasse : NSObject &lt;NSCoding&gt;
{
    Professeur * prof;
    NSArray * eleves;
}

- (id) init;
- (id) initWithCoder:(NSCoder *) decoder;
- (void) encodeWithCoder:(NSCoder *) encoder;
- (void) dealloc;
- (NSString *) description;

@end</code></pre><div id="r-149488" data-claire-element-id="149488"><pre id="r-149487" data-claire-element-id="149487"><code data-claire-semantic="objective-c">#import &quot;SalleDeClasse.h&quot;

@implementation SalleDeClasse

- (id) init
{
    self = [super init];

    if (self) {
        prof = [[Professeur alloc] initAvecNom:@&quot;M. Julien&quot; matiere:@&quot;Latin&quot;];
        Eleve * ludo = [[Eleve alloc] initAvecNom:@&quot;Ludovic&quot; age:12];
        Eleve * marine = [[Eleve alloc] initAvecNom:@&quot;Marine&quot; age:13];
        Eleve * camille = [[Eleve alloc] initAvecNom:@&quot;Camille&quot; age:11];

        eleves = [[NSArray alloc] initWithObjects: ludo, marine, camille, nil];

        /* Pas de problème avec la mémoire ici.
         * Les objets reçoivent - retain une fois dans le tableau. */
        [ludo release];
        [marine release];
        [camille release];
    }
    
    return self;
}

- (void) dealloc
{
    [prof release];
    [eleves release];
    [super dealloc];
}

- (id) initWithCoder:(NSCoder *) decoder
{
    /* On lit l'objet à partir de données */
}
 
- (void) encodeWithCoder:(NSCoder *) encoder
{
    /* On archive l'objet */
}

- (NSString *) description
{
    return [NSString stringWithFormat:@&quot;Professeur : %@\nEleves : %@\n&quot;, prof, eleves];
}

@end</code></pre></div><pre id="r-149489" data-claire-element-id="149489"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

@interface Professeur : NSObject &lt;NSCoding&gt;
{
    NSString * nom, * matiere;
}

- (id) initAvecNom:(NSString *) unNom matiere:(NSString *) uneMatiere;
- (id) initWithCoder:(NSCoder  *) decoder;
- (void) encodeWithCoder:(NSCoder *) encoder;
- (void) dealloc;
- (NSString *) description;

@end</code></pre><div id="r-149491" data-claire-element-id="149491"><pre id="r-149490" data-claire-element-id="149490"><code data-claire-semantic="objective-c">#import &quot;Professeur.h&quot;

@implementation Professeur

- (id) initAvecNom:(NSString *) unNom matiere:(NSString *) uneMatiere
{
    self = [super init];

    if (self) {
        nom = [unNom copy];
        matiere = [uneMatiere copy];
    }

    return self;
}

- (void) dealloc
{
    [nom release];
    [matiere release];
    [super dealloc];
}

- (id) initWithCoder:(NSCoder *) decoder
{
    /* On lit l'objet à partir de données */
}
 
- (void) encodeWithCoder:(NSCoder *) encoder
{
    /* On archive l'objet */
}

- (NSString *) description
{
    return [NSString stringWithFormat:@&quot;%@ enseigne le %@.&quot;, nom, matiere];
}

@end</code></pre></div><pre id="r-149492" data-claire-element-id="149492"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;

@interface Eleve : NSObject &lt;NSCoding&gt;
{
    NSString * nom;
    int age;
}

- (id) initAvecNom:(NSString *) unNom age:(int) unAge;
- (id) initWithCoder:(NSCoder *) decoder;
- (void) encodeWithCoder:(NSCoder *) encoder;
- (void) dealloc;
- (NSString *) description;

@end</code></pre><div id="r-149494" data-claire-element-id="149494"><pre id="r-149493" data-claire-element-id="149493"><code data-claire-semantic="objective-c">#import &quot;Eleve.h&quot;

@implementation Eleve

- (id) initAvecNom:(NSString *) unNom age:(int) unAge
{
    self = [super init];

    if (self) {
        nom = [unNom copy];
        age = unAge;
    }

    return self;
}

- (void) dealloc
{
    [nom release];
    [super dealloc];
}

- (id) initWithCoder:(NSCoder *) decoder
{
    /* On lit l'objet à partir de données */
}
 
- (void) encodeWithCoder:(NSCoder *) encoder
{
    /* On archive l'objet */
}

- (NSString *) description
{
    return [NSString stringWithFormat:@&quot;%@ a %d ans&quot;, nom, age];
}

@end</code></pre></div><p id="r-149495" data-claire-element-id="149495">Il s'agit d'un code assez simple. Si vous avez des difficultés à le comprendre, je vous conseille de relire la partie I de ce tutoriel.</p><p id="r-149496" data-claire-element-id="149496">J'ai surligné dans le code les lignes relatives au protocole <code>NSCoding</code>. On peut donc remarquer que les classes adoptent <code>NSCoding</code> grâce à cette ligne : <code data-claire-semantic="objective-c">@interface Eleve : NSObject &lt;NSCoding&gt;</code>. Les autres lignes surlignées sont les méthodes du protocole. J'ai délibérément laissé leur implémentation vide pour qu'on puisse parler de l'archivage des objets pas à pas. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
<span class="arrow"></span>
<span class="next">Lire et écrire du texte</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
<span class="next">Archiver des objets dans un fichier</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Archiverdesobjetsdansunfichier"></a><h2>Archiver des objets dans un fichier</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
<span class="arrow"></span>
<span class="next">Enregistrer un objet, la théorie</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
<span class="next">Désarchiver des objets</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-archiver-des-objets-dans-un-fichier" data-claire-element-id="149528">Archiver des objets dans un fichier</h4><p id="r-149499" data-claire-element-id="149499">Pour commencer, on va archiver l'objet <code>Eleve</code>, c'est-à-dire implémenter la méthode <code>- encodeWithCoder:</code>. C'est l'objet <code>NSCoder</code> qui va nous aider à accomplir cette tâche. En effet, une instance de <code>NSCoder</code> possède plusieurs méthodes dans le but d'archiver des variables. On va donc appeler ces méthodes pour chaque variable de <code>Eleve</code>. Il va nous falloir archiver <code>nom</code> (de type <code>NSString</code>) et <code>age</code> (de type <code>int</code>). Voici les différentes méthodes qui archivent des variables :</p><p id="r-149500" data-claire-element-id="149500">&lt;tableau&gt;<br/> &lt;ligne&gt;<br/> &lt;entete&gt;Type&lt;/entete&gt;<br/> &lt;entete&gt;Méthode&lt;/entete&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">BOOL</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- encodeBool:forKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">int</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- encodeInt:forKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">double</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- encodeDouble:forKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">float</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- encodeFloat:forKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">id</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- encodeObject:forKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;/tableau&gt;</p><div id="r-149502" data-claire-element-id="149502" data-claire-semantic="question"><p id="r-149501" data-claire-element-id="149501">Ces fonctions attendent deux paramètres... À quoi sert le deuxième ?</p></div><p id="r-149503" data-claire-element-id="149503">Ce deuxième paramètre est une chaîne de caractères portant le nom de la variable que vous souhaitez archiver. Ainsi, si on veut coder <code>age</code>, on donnera en paramètre <code>@&quot;age&quot;</code>. Cela sert à repérer la variable dans le fichier.</p><aside id="r-149505" data-claire-element-id="149505" data-claire-semantic="information"><p id="r-149504" data-claire-element-id="149504">Ces « clés » ne servent pas seulement à repérer une variable dans un fichier, mais à repérer une variable dans tout le programme. Elles font partie intégrante du système KVC, dont nous verrons les rouages plus tard.</p></aside><p id="r-149506" data-claire-element-id="149506">Dans l'exemple ci-dessous, nous avons deux variables à archiver : une de type <code>id</code>, l'autre de type <code>int</code>. On va donc écrire la méthode <code>- encodeWithCoder:</code> comme suit :</p><pre id="r-149507" data-claire-element-id="149507"><code data-claire-semantic="objective-c">- (void) encodeWithCoder:(NSCoder *) encoder
{
    [encoder encodeObject:nom forKey:@&quot;nom&quot;];
    [encoder encodeInt:age forKey:@&quot;age&quot;];
}</code></pre><p id="r-149508" data-claire-element-id="149508">Facile, non ? :D Mais là, on a un petit problème. Ici, notre classe <code>Eleve</code> est très simple et hérite de <code>NSObject</code>. Que se passe-t-il si elle hérite d'une autre classe plus complexe ? Les variables membres de celle-ci ne seront pas archivées. Il faut donc appeler la méthode de la classe mère avec <code>super</code> :</p><pre id="r-149509" data-claire-element-id="149509"><code data-claire-semantic="objective-c">- (void) encodeWithCoder:(NSCoder *) encoder
{
    [super encodeWithCoder:encoder];
    [encoder encodeObject:nom forKey:@&quot;nom&quot;];
    [encoder encodeInt:age forKey:@&quot;age&quot;];
}</code></pre><aside id="r-149511" data-claire-element-id="149511" data-claire-semantic="error"><p id="r-149510" data-claire-element-id="149510">On ne doit pas envoyer le message <code>[super encodeWithCoder:encoder]</code> si la classe mère n'est pas conforme à <code>NSCoding</code>, ce qui est le cas de <code>NSObject</code> !</p></aside><p id="r-149512" data-claire-element-id="149512">Et voilà ! On peut à présent faire pareil pour les autres classes. <code>Professeur</code> possède deux variables membres de type <code>id</code>, tout comme <code>SalleDeClasse</code> (qui possède un <code>NSArray</code> et un <code>Professeur</code>).</p><pre id="r-149513" data-claire-element-id="149513"><code data-claire-semantic="objective-c">- (void) encodeWithCoder:(NSCoder *) encoder
{
    [encoder encodeObject:nom forKey:@&quot;nom&quot;];
    [encoder encodeObject:matiere forKey:@&quot;matiere&quot;];
}</code></pre><pre id="r-149514" data-claire-element-id="149514"><code data-claire-semantic="objective-c">- (void) encodeWithCoder:(NSCoder *) encoder
{
    [encoder encodeObject:prof forKey:@&quot;prof&quot;];
    [encoder encodeObject:eleves forKey:@&quot;eleves&quot;];
}</code></pre><p id="r-149515" data-claire-element-id="149515">C'est là que l'intérêt du protocole se révèle. L'objet <code>NSCoder</code> ne sait pas comment archiver un objet <code>Professeur</code> (puisque nous l'avons créé nous-mêmes), ni un objet <code>NSArray</code> ! o_O Mais puisque ces objets sont conformes au protocole <code>NSCoding</code>, il peut appeler les méthodes nécessaires en toute confiance.</p><p id="r-149516" data-claire-element-id="149516">C'est ce qui se passe pour archiver le <code>NSArray</code> contenant les <code>Eleve</code>. Lorsque celui-ci va recevoir l'ordre de s'archiver, il va appeler les méthodes <code>- encodeWithCoder:</code> de chaque <code>Eleve</code>, qui vont eux-mêmes appeler cette méthode pour archiver leur <code>nom</code>, qui est aussi un objet. C'est très pratique, car chacun s'occupe de ses petites affaires mais, au final, tout est propre archivé. :)</p><div id="r-149518" data-claire-element-id="149518" data-claire-semantic="question"><p id="r-149517" data-claire-element-id="149517">Mais on ne possède aucune information sur le nom du fichier ! On ne sait pas où on écrit !</p></div><p id="r-149519" data-claire-element-id="149519">En effet, il manque une étape avant de pouvoir archiver notre <code>SalleDeClasse</code>. On a pour cela besoin de la classe <code>NSKeyedArchiver</code>, qui est une classe fille de <code>NSCoder</code>. ;)</p><p id="r-149520" data-claire-element-id="149520">On va à présent se servir d'une méthode de classe dont voici le prototype :</p><pre id="r-149521" data-claire-element-id="149521"><code data-claire-semantic="objective-c">+ (BOOL)archiveRootObject:(id)rootObject toFile:(NSString *)path</code></pre><p id="r-149522" data-claire-element-id="149522">Elle prend en paramètre l'objet que l'on veut archiver et le chemin, sous la forme d'une chaîne de caractères, du fichier dans lequel écrire. Elle retourne <code>YES</code> si tout s'est bien passé ou <code>NO</code> en cas de problème.</p><p id="r-149523" data-claire-element-id="149523">Profitons-en pour archiver notre objet <code>SalleDeClasse</code> :</p><pre id="r-149524" data-claire-element-id="149524"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;
#import &lt;stdlib.h&gt;

#import &quot;SalleDeClasse.h&quot;

int main (void)
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    SalleDeClasse * salle40 = [[SalleDeClasse alloc] init];

    NSLog(@&quot;%@&quot;, salle40); // On affiche la description de la salle.

    /* On archive l'objet dans un fichier */
    if (![NSKeyedArchiver archiveRootObject:salle40 toFile:@&quot;salle40.classe&quot;]) {
        NSLog(@&quot;Une erreur s'est produite !&quot;);
        [salle40 release];
        return EXIT_FAILURE;
    }
    NSLog (@&quot;Écriture réussie !&quot;);

    [salle40 release];
    [pool drain];
    return EXIT_SUCCESS;
}</code></pre><p id="r-149525" data-claire-element-id="149525">Voici la sortie du programme à l'exécution :</p><pre id="r-149526" data-claire-element-id="149526"><code data-claire-semantic="console">[Infos log] Professeur : M. Julien enseigne le Latin.
Eleves : (
    Ludovic a 12 ans,
    Marine a 13 ans,
    Camille a 11 ans
)
[Infos log] Écriture réussie !</code></pre><p id="r-149527" data-claire-element-id="149527">Notre salle de classe est à présent archivée dans <code>salle40.classe</code> ! :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
<span class="arrow"></span>
<span class="next">Enregistrer un objet, la théorie</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
<span class="next">Désarchiver des objets</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Dsarchiverdesobjets"></a><h2>Désarchiver des objets</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
<span class="arrow"></span>
<span class="next">Archiver des objets dans un fichier</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">
<span class="next">Présentation de Cocoa et de ses outils</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-desarchiver-des-objets" data-claire-element-id="149565">Désarchiver des objets</h4><p id="r-149529" data-claire-element-id="149529">Il nous faut à présent implémenter la deuxième méthode du protocole <code>NSCoding</code>, à savoir <code>- initWithCoder:</code>. Le principe de cette méthode est quasiment le même que celui de la méthode utilisée pour archiver un objet. En effet, on va appeler plusieurs méthodes de <code>NSCoder</code> qui vont chacune désarchiver les variables membres :</p><p id="r-149530" data-claire-element-id="149530">&lt;tableau&gt;<br/> &lt;ligne&gt;<br/> &lt;entete&gt;Type&lt;/entete&gt;<br/> &lt;entete&gt;Méthode&lt;/entete&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">BOOL</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- (BOOL)decodeBoolForKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">int</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- (int)decodeIntForKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">double</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- (double)decodeDoubleForKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">float</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- (float)decodeFloatForKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;ligne&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">id</code>&lt;/cellule&gt;<br/> &lt;cellule&gt;<code data-claire-semantic="objective-c">- (id)decodeObjectForKey:</code>&lt;/cellule&gt;<br/> &lt;/ligne&gt;<br/> &lt;/tableau&gt;</p><p id="r-149531" data-claire-element-id="149531">Comme vous le voyez, ces méthodes retournent la variable qu'elles ont désarchivée. Dans le cas d'un objet, celui-ci ne vous appartient pas, vous n'avez donc pas à gérer la mémoire. Le paramètre est la chaîne de caractères utilisée à l'archivage, c'est-à-dire le nom de la variable. Implémentons la méthode <code>- initWithCoder:</code> pour la classe <code>Eleve</code> :</p><pre id="r-149532" data-claire-element-id="149532"><code data-claire-semantic="objective-c">- (id) initWithCoder:(NSCoder *) decoder
{
    self = [super init];

    if (self) {
        nom = [[decoder decodeObjectForKey:@&quot;nom&quot;] retain];
        age = [decoder decodeIntForKey:@&quot;age&quot;];
    }

    return self;
}</code></pre><div id="r-149534" data-claire-element-id="149534" data-claire-semantic="question"><p id="r-149533" data-claire-element-id="149533">Pourquoi appelle-t-on <code>- retain</code> pour le nom ?</p></div><p id="r-149535" data-claire-element-id="149535">Si vous observez la méthode <code>- dealloc</code> de <code>Eleve</code>, elle envoie le message <code>- release</code> à la variable membre <code>nom</code>. Donc, pour rester conforme à la règle d'or, je retiens l'objet. Par convention, je préfère être propriétaire des variables membres. ;)</p><p id="r-149536" data-claire-element-id="149536">Remarquez que, dans ce code, on envoie le message <code>[super init]</code> à la classe mère. En effet, comme tout à l'heure, <code>NSObject</code> n'implémente pas le protocole requis. Si cela avait été le cas, on aurait envoyé le message <code>[super initWithCoder:decoder]</code>.</p><p id="r-149537" data-claire-element-id="149537">Allez, on se motive et on écrit les méthodes pour les classes <code>Professeur</code> et <code>SalleDeClasse</code>. :p</p><pre id="r-149538" data-claire-element-id="149538"><code data-claire-semantic="objective-c">- (id) initWithCoder:(NSCoder *) decoder
{
    self = [super init];

    if (self) {
        nom = [[decoder decodeObjectForKey:@&quot;nom&quot;] retain];
        matiere = [[decoder decodeObjectForKey:@&quot;matiere&quot;] retain];
    }

    return self;
}</code></pre><pre id="r-149539" data-claire-element-id="149539"><code data-claire-semantic="objective-c">- (id) initWithCoder:(NSCoder *) decoder
{
    self = [super init];

    if (self) {
        prof = [[decoder decodeObjectForKey:@&quot;prof&quot;] retain];
        eleves = [[decoder decodeObjectForKey:@&quot;eleves&quot;] retain];
    }

    return self;
}</code></pre><p id="r-149540" data-claire-element-id="149540">Grâce au protocole, on a le même schéma que tout à l'heure. Lors du désarchivage, chaque objet s'occupe de ses variables et, à la fin, tout est désarchivé !</p><p id="r-149541" data-claire-element-id="149541">De même que pour l'archivage, il nous faut un objet pour gérer tout cela : j'ai nommé le <code>NSKeyedUnarchiver</code> ! Il remplit exactement la même fonction que <code>NSKeyedArchiver</code>, mais désarchive au lieu d'archiver. On utilise alors la méthode de classe dont voici le prototype :</p><pre id="r-149542" data-claire-element-id="149542"><code data-claire-semantic="objective-c">+ (id) unarchiveObjectWithFile:(NSString *) path</code></pre><p id="r-149543" data-claire-element-id="149543">Elle attend en paramètre le chemin de l'archive (dans notre cas, ce sera le chemin de <code>salle40.classe</code>). Allons-y !</p><pre id="r-149544" data-claire-element-id="149544"><code data-claire-semantic="objective-c">#import &lt;Foundation/Foundation.h&gt;
#import &lt;stdlib.h&gt;

#import &quot;SalleDeClasse.h&quot;

int main (void)
{
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    SalleDeClasse * salle = [NSKeyedUnarchiver unarchiveObjectWithFile:@&quot;salle40.classe&quot;];

    NSLog(@&quot;%@&quot;, salle); // On affiche la description de la salle.

    return EXIT_SUCCESS;
}</code></pre><p id="r-149545" data-claire-element-id="149545">Ce qui donne bien l'<em>output</em> suivant :</p><pre id="r-149546" data-claire-element-id="149546"><code data-claire-semantic="console">Professeur : M. Julien enseigne le Latin.
Eleves : (
    Ludovic a 12 ans,
    Marine a 13 ans,
    Camille a 11 ans
)</code></pre><p id="r-149547" data-claire-element-id="149547">Miracle, on a réussi. On retrouve bien notre <code>salle40</code> ! :)</p><p id="r-149548" data-claire-element-id="149548">Enfin ! C'était long et difficile, mais essentiel si vous souhaitez vous lancer par la suite dans l'utilisation de Cocoa pour concevoir des applications graphiques.</p><p id="r-149549" data-claire-element-id="149549">Ce qu'il faut retenir de ce chapitre, c'est la technique d'implémentation du protocole <code>NSCoding</code>. C'est vraiment important pour Cocoa, car un bon nombre de classes l'utilisent. Il faut également retenir la méthode « passe-partout » très pratique de lecture et d'écriture avec la classe <code>NSString</code>.</p><p id="r-149550" data-claire-element-id="149550">Le prochain chapitre est un TP ! Nous mettrons en application toutes les connaissances acquises jusqu'à maintenant. :)</p><h6 id="r-liens-vers-la-doc-2" data-claire-element-id="149564">Liens vers la doc</h6><ul id="r-149561" data-claire-element-id="149561"><li id="r-149552" data-claire-element-id="149552"><p id="r-149551" data-claire-element-id="149551"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047-SW1">Archives and Serializations Programming Guide</a></p></li><li id="r-149554" data-claire-element-id="149554"><p id="r-149553" data-claire-element-id="149553"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSCoding">NSCoding</a></p></li><li id="r-149556" data-claire-element-id="149556"><p id="r-149555" data-claire-element-id="149555"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSCoder_Class/Reference/NSCoder.html#//apple_ref/occ/cl/NSCoder">NSCoder</a></p></li><li id="r-149558" data-claire-element-id="149558"><p id="r-149557" data-claire-element-id="149557"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html#//apple_ref/occ/cl/NSKeyedArchiver">NSKeyedArchiver</a></p></li><li id="r-149560" data-claire-element-id="149560"><p id="r-149559" data-claire-element-id="149559"><a href="http://developer.apple.com/mac/library/documentation/Cocoa/Reference/Foundation/Classes/NSKeyedUnarchiver_Class/Reference/Reference.html#//apple_ref/occ/cl/NSKeyedUnarchiver">NSKeyedUnarchiver</a></p></li></ul><p id="r-149562" data-claire-element-id="149562">Cette partie est encore en chantier. Le prochain chapitre sera un TP qui mettra en pratique toutes les connaissances acquises jusqu'à maintenant. ;)</p><p id="r-149563" data-claire-element-id="149563">Ensuite viendront sûrement des parties sur les classes <code>NSObject</code> et <code>NSData</code>, ainsi que d'autres bonus.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
<span class="arrow"></span>
<span class="next">Archiver des objets dans un fichier</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">
<span class="next">Présentation de Cocoa et de ses outils</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="PrsentationdeCocoaetdesesoutils"></a><h2>Présentation de Cocoa et de ses outils</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
<span class="arrow"></span>
<span class="next">Désarchiver des objets</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
<span class="next">Cocoa, un framework complet</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-149569" data-claire-element-id="149569">À présent que vos connaissances en Objective-C sont solides, il est nécessaire de les mettre en pratique.</p><p id="r-149570" data-claire-element-id="149570">Cocoa est l'API principale de Mac OS X. Nous avons déjà eu l'occasion d'en utiliser une partie : tous les objets que nous avons utilisés jusqu'à présent sont des objets de Cocoa. Cependant, Cocoa n'est pas la seule API sur Mac : il existe également Carbon, qui s'utilise principalement en C. Mais Carbon est à présent dépréciée et n'est conservée que pour des raisons de compatibilité. Il est donc déconseillé de développer des applications avec Carbon.</p><p id="r-149571" data-claire-element-id="149571">Allez, pour vous mettre l'eau à la bouche, voici des exemples d'applications créées avec Cocoa :</p><p id="r-149572" data-claire-element-id="149574"><a href="medias/uploads.siteduzero.com_files_296001_297000_296270.png"><img id="r-149573" data-claire-element-id="149572" src="medias/uploads.siteduzero.com_thb_296001_297000_296270.png" alt="Image utilisateur"/></a><a href="medias/uploads.siteduzero.com_files_296001_297000_296271.png"><img id="r-149574" data-claire-element-id="149573" src="medias/uploads.siteduzero.com_thb_296001_297000_296271.png" alt="Image utilisateur"/></a></p><p id="r-149575" data-claire-element-id="149575">Dans ce chapitre, nous étudierons l'agencement des objets au sein de Cocoa, puis nous découvrirons les outils qui permettent de manipuler ces objets : l'IDE Xcode et le logiciel Interface Builder.</p>
</div><a name="Cocoaunframeworkcomplet"></a><h2>Cocoa, un framework complet</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">
<span class="arrow"></span>
<span class="next">Présentation de Cocoa et de ses outils</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
<span class="next">Le code en dur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-cocoa-un-framework-complet" data-claire-element-id="149585">Cocoa, un framework complet</h4><p id="r-149576" data-claire-element-id="149576">Jusqu'à présent, les objets que nous avons manipulés faisaient partie du <em>framework</em> Foundation. Ce framework est composé d'objets facilitant le développement de programmes en console, et aidant au développement d'applications graphiques. Cependant, aucun objet de Foundation ne nous permet de créer des fenêtres, des boutons, des menus, etc.</p><p id="r-149577" data-claire-element-id="149577">Ces objets-là se trouvent dans le framework AppKit. Les frameworks AppKit et Foundation composent Cocoa. Cocoa est donc un ensemble d'objets divisés en deux catégories : les objets « graphiques » et les objets « non graphiques ».</p><figure id="r-149579" data-claire-element-id="149580"><img id="r-149578" data-claire-element-id="149578" src="medias/uploads.siteduzero.com_files_260001_261000_260447.png" alt="Image utilisateur"/></figure><p id="r-149581" data-claire-element-id="149581">Avant de programmer avec Cocoa dans son ensemble, il faut vraiment faire la différence entre les objets de Foundation et les objets d'AppKit. Les premiers servent la plupart du temps à représenter des données. Par exemple, dans un navigateur web, on pourrait avoir un <code>NSArray</code> qui contiendrait les signets de l'utilisateur. Les objets d'AppKit servent eux à afficher des informations, souvent issues de données telles qu'une liste de signets. On aurait par exemple un objet <code>NSTableView</code> qui représenterait la liste des signets à l'écran. Les objets « graphiques » servent également à récupérer des actions de l'utilisateur. Le programme peut donc agir en conséquence pour modifier les données internes. Ainsi donc, les deux parties de Cocoa se complètent.</p><p id="r-149582" data-claire-element-id="149582">Pour simplifier la tâche du développeur, Apple a organisé tout son code de façon à respecter des <em>design patterns</em>. Ces <em>design patterns</em> reviennent régulièrement dans la bibliothèque. Ils sont la plupart du temps des agencements remarquables d'objets (c'est-à-dire une façon d'organiser des objets qui revient souvent). Le premier que l'on va aborder est l'architecture MVC. Mais avant, parlons un peu des outils qui nous permettront de développer des applications avec Cocoa.</p><p id="r-149583" data-claire-element-id="149583">Tout notre travail de développement se fera à présent avec deux logiciels : Xcode et Interface Builder (aussi abrégé IB). Chacun a un rôle particulier, de la même façon que les frameworks Foundation et AppKit remplissent des rôles différents.</p><p id="r-149584" data-claire-element-id="149584">Vous devez sûrement tous connaître Xcode, l'IDE de prédilection sur Mac. Il est installé avec la suite des <em>Xcode Tools</em>, et comprend un éditeur de texte, un compilateur et un débogueur, ainsi qu'un navigateur pour la documentation, un gestionnaire de projets, un gestionnaire de versions, et d'autres fonctionnalités avancées.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">
<span class="arrow"></span>
<span class="next">Présentation de Cocoa et de ses outils</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
<span class="next">Le code en dur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lecodeendur"></a><h2>Le code en dur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
<span class="arrow"></span>
<span class="next">Cocoa, un framework complet</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
<span class="next">Une interface graphique légère</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-code-en-dur" data-claire-element-id="149613">Le code en dur</h4><p id="r-149586" data-claire-element-id="149586">On va tout de suite se familiariser avec Xcode en créant un nouveau projet : une application. Choisissez donc « <em>Create a new Xcode project</em> » dans l'écran d'accueil ou cliquez sur « <em>New Project...</em> » dans le menu « <em>File</em> ». Sélectionnez le type de projet « <em>Cocoa Application</em> ».</p><figure id="r-149588" data-claire-element-id="149589"><img id="r-149587" data-claire-element-id="149587" src="medias/uploads.siteduzero.com_files_262001_263000_262297.png" alt="Image utilisateur"/></figure><p id="r-149590" data-claire-element-id="149590">Comme vous le voyez, Xcode nous propose de cocher plusieurs cases pour modifier légèrement notre projet. On peut évidement combiner les options.</p><ul id="r-149597" data-claire-element-id="149597"><li id="r-149592" data-claire-element-id="149592"><p id="r-149591" data-claire-element-id="149591">La case « <em>Create a document-based application</em> » modifie le projet pour qu'il soit conforme à <strong>l'architecture <code>NSDocument</code></strong> (un autre <em>design pattern</em>). Ce type de projet correspond à des applications pouvant avoir plusieurs documents ouverts, par exemple Garageband, TextEdit, Aperçu, etc.</p></li><li id="r-149594" data-claire-element-id="149594"><p id="r-149593" data-claire-element-id="149593">La case « <em>Use Core Data for storage</em> » permet de modifier l'application pour que les données internes soient gérées avec Core Data, un système permettant de modéliser des données « à la souris » avec des diagrammes, un peu comme l'UML. Ici encore, l'application est conforme à <strong>l'architecture Core Data</strong>.</p></li><li id="r-149596" data-claire-element-id="149596"><p id="r-149595" data-claire-element-id="149595">La case « <em>Include Spotlight Importer</em> » a peu d'importance et permet d'ajouter quelques fonctionnalités à une application utilisant Core Data.</p></li></ul><p id="r-149598" data-claire-element-id="149598">Puisque l'on débute encore, on va créer une application toute simple : ne cochez donc aucune case. Donnez un nom à votre projet et choisissez un endroit sur le disque dur où l'enregistrer.</p><p id="r-149599" data-claire-element-id="149599">Voici à présent la fenêtre du projet. Nous allons en étudier les fichiers importants.</p><figure id="r-149601" data-claire-element-id="149602"><img id="r-149600" data-claire-element-id="149600" src="medias/uploads.siteduzero.com_files_271001_272000_271341.png" alt="Image utilisateur"/></figure><p id="r-149603" data-claire-element-id="149603">Commençons par le début de la liste. Il y a plusieurs frameworks avec lesquels vous êtes déjà familiers : <code>AppKit</code>, <code>Cocoa</code>, <code>CoreData</code> et <code>Foundation</code>. Seul le framework <code>Cocoa</code> nous intéresse. D'ailleurs, si vous regardez la colonne la plus à gauche de la liste, c'est le seul coché. ;) Le framework <code>CoreData</code> est nécessaire au bon fonctionnement du projet si vous avez coché la case <em>Use CoreData for storage</em>. Comme ce n'est pas notre cas, nous n'allons pas nous en préoccuper.</p><p id="r-149604" data-claire-element-id="149604">Le fichier suivant contient des informations sur la localisation de notre application, c'est-à-dire sa langue principale. Nous l'utiliserons quand nous aborderons le sujet de la localisation (pour le moment, ce fichier est vide).</p><p id="r-149605" data-claire-element-id="149605">Ensuite, nous voyons un fichier nommé <code>main.m</code>. Il contient ce code :</p><pre id="r-149606" data-claire-element-id="149606"><code data-claire-semantic="objective-c">#import &lt;Cocoa/Cocoa.h&gt;

int main(int argc, char *argv[])
{
    return NSApplicationMain(argc,  (const char **) argv);
}</code></pre><p id="r-149607" data-claire-element-id="149607">Comme vous le voyez, la fonction <code>main()</code> contient déjà du code : elle appelle la fonction <code>NSApplicationMain()</code> avec en paramètres les arguments standards de la ligne de commande : <code>argc</code> et <code>argv</code>. En fait, nous n'avons pas besoin de toucher à ce fichier. La fonction <code>NSApplicationMain()</code> lance des sous-routines qui permettent au développeur de faire abstraction de toute l'initialisation de l'application, et de ne pas se préoccuper de choses comme la gestion des évènements (même si nous allons en faire dans les prochains chapitres).</p><p id="r-149608" data-claire-element-id="149608">Le fichier <code>MainMenu.xib</code> (localisé) est probablement aussi important que le code que nous allons produire pour faire fonctionner notre application. Il contient toutes les informations sur l'interface de l'application, c'est-à-dire la taille de la fenêtre principale, les différentes zones de texte et boutons, les menus de l'application, etc. Nous parlerons de tout ça en détail dans quelques instants.</p><p id="r-149609" data-claire-element-id="149609">Le fichier <code>SdZTuto-Info.plist</code> est un fichier XML contenant des informations sur notre application : le type de document qu'elle ouvre, sa version, etc. Nous le verrons plus en détail dans les prochains chapitres.</p><p id="r-149610" data-claire-element-id="149610">Le fichier <code>SdZTuto.app</code> est l'exécutable de notre application. En réalité, c'est un <em>bundle</em> : un dossier qui a l'apparence d'un fichier pour plus d'ergonomie. Mais il contient tous les fichiers dont l'application a besoin pour fonctionner : des images, des sons, et bien sûr l'exécutable. Vous pouvez regarder ce qui se trouve à l'intérieur d'un <em>bundle</em> en y effectuant un clic droit, puis « Afficher le contenu du paquet ». Ça marche sur n'importe quelle application présente sur votre ordinateur. Nous verrons plus tard comment sont organisés les <em>bundles</em>.</p><p id="r-149611" data-claire-element-id="149611">Le fichier <code>SdZTuto_prefix.pch</code> est utile à la compilation, mais nous n'avons pas besoin de le modifier.</p><p id="r-149612" data-claire-element-id="149612">Enfin, les deux dernier fichiers <code>SdZTutoAppDelegate</code> sont une classe et son implémentation. Elles définissent un objet <em>delegate</em> pour l'application (cf. ce <a href="http://www.siteduzero.com/tutoriel-3-200560-l-heritage.html">chapitre</a> qui parle brièvement des <em>delegates</em>). Nous verrons plus en détail les <em>delegates</em> dans les prochains chapitres, car c'est un <em>design pattern</em> récurrent de Cocoa. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
<span class="arrow"></span>
<span class="next">Cocoa, un framework complet</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
<span class="next">Une interface graphique légère</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Uneinterfacegraphiquelgre"></a><h2>Une interface graphique légère</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
<span class="arrow"></span>
<span class="next">Le code en dur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">
<span class="next">Une interface graphique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-une-interface-graphique-legere" data-claire-element-id="149661">Une interface graphique légère</h4><p id="r-149614" data-claire-element-id="149614">Dans ce chapitre, nous n'aurons pas besoin d'écrire de code ; nous allons plutôt nous familiariser avec l'autre grand logiciel de conception d'applications : Interface Builder. Pour l'ouvrir, double-cliquez sur le fichier <code>MainMenu.xib</code>. Voici ce que vous obtenez :</p><figure id="r-149616" data-claire-element-id="149617"><img id="r-149615" data-claire-element-id="149615" src="medias/uploads.siteduzero.com_files_271001_272000_271541.png" alt="Image utilisateur"/></figure><p id="r-149618" data-claire-element-id="149618">L'interface d'Interface Builder se décompose en plusieurs fenêtres, ici numérotées de 1 à 5. La première fenêtre est la fenêtre principale du projet. Vous voyez à l'intérieur différentes icônes qui représentent des objets. Vous pouvez par exemple voir un objet nommé <em>Application</em>, un autre <em>Window</em>, etc. Certains de ces objets composent l'interface de votre application (comme l'objet <em>MainMenu</em> ou <em>Window</em>), d'autres sont utiles au bon fonctionnement de l'application, comme <em>SdZ Tuto App Delegate</em>, qui est une instance de la classe <code>SdZTutoAppDelegate</code> créée dans Xcode. ;) Nous créerons souvent des objets qui seront représentés dans cette fenêtre.</p><p id="r-149619" data-claire-element-id="149619">La seconde fenêtre est la fenêtre principale de votre application. C'est ici que vous ajouterez (à la souris :) ) différents éléments d'interface pour créer l'aspect graphique de votre application.</p><p id="r-149620" data-claire-element-id="149620">La troisième fenêtre représente les menus de votre application. Quand vous utilisez une application (comme le Finder), la barre des menus se retrouve peuplée de menus, et eux-mêmes de sous-menus, etc. C'est ici que vous modifierez les éléments de menu de votre application.</p><aside id="r-149622" data-claire-element-id="149622" data-claire-semantic="information"><p id="r-149621" data-claire-element-id="149621">Comme vous pouvez le voir, les menus <em>File</em>, <em>Edit</em>, etc. sont déjà présents. Pour l'instant, les éléments de ces menus n'effectuent aucune action, mais ils seront très utiles par la suite. Nous verrons aussi comment localiser ce menu, c'est-à-dire changer la langue des éléments.</p></aside><p id="r-149623" data-claire-element-id="149623">La fenêtre portant le numéro quatre est la <strong>bibliothèque</strong>. Elle comporte trois onglets.</p><ul id="r-149630" data-claire-element-id="149630"><li id="r-149625" data-claire-element-id="149625"><p id="r-149624" data-claire-element-id="149624"><em>Objects</em> : c'est ici que vous viendrez chercher tous vos éléments d'interface (boutons, champs de texte, etc.), mais aussi d'autres objets, comme les contrôleurs ou des <code>NSObject</code>. Vous pouvez déjà naviguer dans la bibliothèque pour repérer un peu tous les éléments qui s'y trouvent.</p></li><li id="r-149627" data-claire-element-id="149627"><p id="r-149626" data-claire-element-id="149626"><em>Classes</em> : cet onglet référence toutes les classes disponibles (toutes les classes de Cocoa), y compris les vôtres. On peut aussi éditer certaines propriétés des classes, comme l'héritage. Nous verrons tout cela en détail dans le prochain chapitre.</p></li><li id="r-149629" data-claire-element-id="149629"><p id="r-149628" data-claire-element-id="149628"><em>Media</em> : ce dernier onglet contient des images standards qui peuvent être utilisées dans une application.</p></li></ul><p id="r-149631" data-claire-element-id="149631">Enfin, la cinquième fenêtre, et probablement la plus importante, est l'inspecteur. L'inspecteur permet d'éditer énormément d'options sur les objets que vous manipulez. Celles-ci vont de la taille d'un bouton aux différents liens qu'ont les contrôleurs (que nous aborderons dans le prochain chapitre) avec les autres objets, en passant par le nombre de colonnes d'un tableau. Vous pouvez voir les options liées à un objet en cliquant sur celui-ci et en naviguant avec les onglets de la fenêtre de l'inspecteur.</p><h5 id="r-une-interface-a-la-souris" data-claire-element-id="149660">Une interface à la souris</h5><p id="r-149632" data-claire-element-id="149632">Pour commencer, nous allons créer une petite interface graphique (non fonctionnelle). Prenez un <code>NSButton</code> de type <em>Push Button</em> (c'est le bouton le plus courant) et glissez-le dans la fenêtre de votre interface. Vous remarquez que si vous l'approchez des bords de la fenêtre, des guides en pointillés bleus apparaissent. Ces guides correspondent à des normes utilisées pour rendre les interfaces des applications plus ergonomiques : les <a href="http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AppleHIGuidelines/XHIGIntro/XHIGIntro.html#//apple_ref/doc/uid/TP30000894-TP6"><em>Apple Human Interface Guidelines</em></a> (ce document contient beaucoup de normes et conseils pour une application ; voici <a href="http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AppleHIGuidelines/XHIGLayout/XHIGLayout.html#//apple_ref/doc/uid/TP30000360-TP9">l'article</a> concernant l'interface d'une fenêtre).</p><figure id="r-149634" data-claire-element-id="149635"><img id="r-149633" data-claire-element-id="149633" src="medias/uploads.siteduzero.com_files_272001_273000_272175.png" alt="Image utilisateur"/></figure><p id="r-149636" data-claire-element-id="149636"><em>Les guides en action</em></p><p id="r-149637" data-claire-element-id="149637">Essayez donc d'explorer les objets qui se trouvent dans la bibliothèque. Voici une interface d'exemple, annotée pour que vous puissiez retrouver les objets qui la composent (je reviendrai peu sur la création d'interface dans les prochains chapitres, mais ne vous en faites pas, ça restera simple).</p><figure id="r-149639" data-claire-element-id="149640"><img id="r-149638" data-claire-element-id="149638" src="medias/uploads.siteduzero.com_files_272001_273000_272182.png" alt="Image utilisateur"/></figure><p id="r-149641" data-claire-element-id="149641"><em>Remarquez que les objets dont le nom se termine par <code>Cell</code> sont faits pour être contenus dans les cases d'une <code>NSTableView</code> (entre autres).</em></p><h6 id="r-l-inspecteur" data-claire-element-id="149659">L'inspecteur</h6><p id="r-149642" data-claire-element-id="149642">L'inspecteur est une fenêtre très importante d'Interface Builder. Elle permet de modifier un bon nombre de propriétés des objets manipulés par le logiciel. Ces propriétés peuvent aller de la taille d'un bouton au nombre de colonnes d'une table, en passant par les <em>bindings</em> d'un contrôleur ou les relations entre deux objets (qu'ils composent l'interface de votre application ou non). Il est donc extrêmement important de connaître cette fenêtre et de savoir l'utiliser.</p><p id="r-149643" data-claire-element-id="149643">L'inspecteur se décompose en six onglets, énumérés ici de gauche à droite.</p><ul id="r-149656" data-claire-element-id="149656"><li id="r-149645" data-claire-element-id="149645"><p id="r-149644" data-claire-element-id="149644"><em>Attributes</em> : vous pouvez modifier ici les propriétés d'un objet associées à son comportement (le texte affiché, le nombre de colonnes d'une table, la touche « raccourci » associée à un bouton, etc.). Chaque objet possédant des attributs différents, l'onglet sera différent pour chaque objet. Interface Builder peut afficher cet onglet pour les objets « connus » (en gros, les objets de la bibliothèque). Si vous créez une nouvelle classe, Interface Builder ne connaîtra pas l'objet et ne pourra donc pas en afficher les attributs.</p></li><li id="r-149647" data-claire-element-id="149647"><p id="r-149646" data-claire-element-id="149646"><em>Effects</em> : plutôt lié à l'aspect purement graphique d'un objet, et à CoreAnimation, une bibliothèque graphique de Mac OS X. Nous n'aborderons pas cet onglet dans ce tutoriel.</p></li><li id="r-149649" data-claire-element-id="149649"><p id="r-149648" data-claire-element-id="149648"><em>Size</em> : on peut y modifier la géométrie de l'objet, comme sa position sur la fenêtre ou sa taille (hauteur et largeur). On peut également choisir un comportement spécifique de l'objet lorsque la fenêtre d'une application est redimensionnée : l'objet peut avoir une position fixe ou variable, et une taille fixe ou variable lorsque la fenêtre change. Ce comportement est indiqué par la petite animation dans la rubrique <em>Autosizing</em> : le cadre blanc représente la fenêtre et le cadre rouge l'objet que vous modifiez. Le comportement peut être ajusté grâce aux différentes flèches se trouvant dans le cadre à gauche de cette animation.</p></li><li id="r-149651" data-claire-element-id="149651"><p id="r-149650" data-claire-element-id="149650"><em>Bindings</em> : c'est un onglet que l'on verra en détail dans quelques chapitres. Il permet de lier les variables d'un objet avec d'autres variables, appartenant à d'autres objets. C'est le système KVC que j'ai déjà évoqué à plusieurs reprises. ;)</p></li><li id="r-149653" data-claire-element-id="149653"><p id="r-149652" data-claire-element-id="149652"><em>Connections</em> : permet de créer des connexions entre objets, pour recevoir un message lorsqu'un bouton est cliqué, par exemple. Nous verrons ce mécanisme plus précisément dans le prochain chapitre.</p></li><li id="r-149655" data-claire-element-id="149655"><p id="r-149654" data-claire-element-id="149654"><em>Identity</em> : permet de modifier la classe d'un objet ainsi que d'autres informations.</p></li></ul><p id="r-149657" data-claire-element-id="149657">Ne vous en faites pas si vous ne comprenez pas le rôle de certains onglets : ils se rendront utiles au fur et à mesure du tutoriel, et leur rôle deviendra alors clair.</p><p id="r-149658" data-claire-element-id="149658">Voilà, c'est la fin de ce chapitre. Dans le prochain, nous créerons notre première application, suivant le <em>design pattern</em>MVC, l'un des plus importants. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
<span class="arrow"></span>
<span class="next">Le code en dur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">
<span class="next">Une interface graphique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Uneinterfacegraphique"></a><h2>Une interface graphique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
<span class="arrow"></span>
<span class="next">Une interface graphique légère</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
<span class="next">Un modèle d&#039;organisation du code : le MVC</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-149663" data-claire-element-id="149663">Nous allons maintenant créer une application graphique, avec une vraie fenêtre et de vrais boutons. Rien d'exceptionnel : nous proposerons juste à l'utilisateur de taper du texte dans un champ approprié, puis de cliquer sur un bouton pour l'afficher en majuscules ou en minuscules. Mais derrière la simplicité de cette application se cachent de nombreux concepts avec lesquels vous devrez vous familiariser, car ils vous suivront partout. :)</p><aside id="r-149665" data-claire-element-id="149665" data-claire-semantic="information"><p id="r-149664" data-claire-element-id="149664">Ce chapitre a été originalement rédigé par <a href="http://www.siteduzero.com/membres-294-186432.html">Tchouk!</a> dans son tutoriel <a href="http://www.siteduzero.com/tutoriel-3-176943-developper-sous-os-x-avec-cocoa.html">Développer sous OS X avec Cocoa</a>. C'est avec son aimable autorisation que j'ai mis à jour cette partie et l'ai incluse dans ce tutoriel.</p></aside>
</div><a name="Unmodled039organisationducodeleMVC"></a><h2>Un modèle d&#039;organisation du code : le MVC</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">
<span class="arrow"></span>
<span class="next">Une interface graphique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
<span class="next">Création du projet et de l&#039;interface</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-un-modele-d-organisation-du-code-le-mvc" data-claire-element-id="149681">Un modèle d'organisation du code : le MVC</h4><p id="r-149666" data-claire-element-id="149666">On abrège par MVC le <em>design pattern Model View Controller</em> (on dit aussi architecture MVC). Se conformer à l'architecture MVC, c'est organiser son code d'une certaine manière. MVC est donc une façon d'organiser du code au sein d'une application. D'ailleurs, c'est sûrement la plus connue et la plus utilisée quand on code avec Cocoa.</p><div id="r-149668" data-claire-element-id="149668" data-claire-semantic="question"><p id="r-149667" data-claire-element-id="149667">Mais quel est l'intérêt d'organiser mon code d'une certaine façon ?</p></div><p id="r-149669" data-claire-element-id="149669">La raison principale est la modularité du code. Dans l'architecture MVC, on distingue trois catégories de code.</p><ul id="r-149676" data-claire-element-id="149676"><li id="r-149671" data-claire-element-id="149671"><p id="r-149670" data-claire-element-id="149670">Le <strong>modèle</strong> : ce sont les données manipulées par l'application. Le code faisant partie de la catégorie « » se charge de gérer les données : lecture, écriture, création de nouvelles entrées dans une base de données, etc.</p></li><li id="r-149673" data-claire-element-id="149673"><p id="r-149672" data-claire-element-id="149672">La <strong>vue</strong> : c'est la partie du programme qui est en interaction avec l'utilisateur ; c'est l'interface de l'application. C'est ce que nous avons découvert dans le chapitre précédent, avec le logiciel Interface Builder. Fenêtres, boutons et menus font partie de la .</p></li><li id="r-149675" data-claire-element-id="149675"><p id="r-149674" data-claire-element-id="149674">Le <strong>contrôleur</strong> est la partie « jointure » entre les deux catégories précédentes. C'est cette partie qui s'occupe de la communication entre la vue et le modèle.</p></li></ul><p id="r-149677" data-claire-element-id="149677">Ainsi, chaque catégorie de code a une tâche spécifique. C'est d'ailleurs un gros avantage, car on obtient alors plusieurs couches de code qui sont le plus possible indépendantes : si l'architecture MVC est bien respectée, on peut alors changer par exemple la façon dont l'application gère le format des fichiers (qui doit se trouver dans la partie modèle) sans toucher ni au code de la vue, ni au code du contrôleur. De plus, séparer le modèle du reste permet également d'y accéder à l'aide d'interfaces différentes de l'interface graphique : par exemple, le logiciel Automator proposé par Apple est capable d'accéder à différentes fonctionnalités proposées par les applications. Ces fonctionnalités sont bien proposées par le modèle, et certainement pas par la vue ni le contrôleur. :)</p><p id="r-149678" data-claire-element-id="149678">De même, on a vu dans le chapitre précédent que les objets « graphiques » sont génériques : ils sont les mêmes pour toutes les applications. Cela n'est rendu possible que par la séparation des rôles dans le <em>design pattern</em> MVC. Vous aurez aussi remarqué qu'il en va de même pour le modèle : les objets de Foundation sont génériques, on peut les utiliser dans n'importe quelle application.</p><p id="r-149679" data-claire-element-id="149679">Un autre avantage du MVC est que l'on peut coder en groupe en se partageant les tâches, et que l'on peut modifier une partie du code sans avoir à se soucier du fonctionnement des autres.</p><p id="r-149680" data-claire-element-id="149680">Cocoa étant préorienté vers l'architecture MVC, il est presque obligatoire de suivre ce <em>design pattern</em> si l'on veut arriver à un résultat satisfaisant. Cependant, nos premières applications (et notamment celle que nous allons créer dans ce chapitre) seront trop simples pour s'embêter à établir trois catégories de code. Nous allons donc un peu mélanger le contrôleur et le modèle, puisque la vue est déjà préfabriquée. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">
<span class="arrow"></span>
<span class="next">Une interface graphique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
<span class="next">Création du projet et de l&#039;interface</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Crationduprojetetdel039interface"></a><h2>Création du projet et de l&#039;interface</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
<span class="arrow"></span>
<span class="next">Un modèle d&#039;organisation du code : le MVC</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
<span class="next">Faire dialoguer les objets entre eux : outlets et actions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-creation-du-projet-et-de-l-interface" data-claire-element-id="149700">Création du projet et de l'interface</h4><p id="r-149682" data-claire-element-id="149682">Créez à présent un nouveau projet dans Xcode, comme au chapitre précédent. Pour l'instant, nous n'allons pas écrire de code, nous allons créer l'interface d'une application toute simple : une application qui met un texte en majuscules ou en minuscules. Ouvrez donc le fichier d'interface <code>MainMenu.xib</code> et faites glisser les objets nécessaires à l'interface dans la fenêtre de création, de manière à obtenir un résultat semblable à celui-ci :</p><figure id="r-149684" data-claire-element-id="149685"><img id="r-149683" data-claire-element-id="149683" src="medias/uploads.siteduzero.com_files_293001_294000_293643.png" alt="Image utilisateur"/></figure><p id="r-149686" data-claire-element-id="149686">Voici donc notre vue terminée. Le principe de l'application est simple : lorsque vous cliquez sur un des deux boutons, le champ de texte à côté affiche le même texte que celui tapé dans le champ d'entrée au-dessus, mais en majuscules ou en minuscules. Par exemple, si je tape « Hello World ! » dans le champ d'entrée et que je clique sur les deux boutons, voici le résultat :</p><figure id="r-149688" data-claire-element-id="149689"><img id="r-149687" data-claire-element-id="149687" src="medias/uploads.siteduzero.com_files_293001_294000_293644.png" alt="Image utilisateur"/></figure><p id="r-149690" data-claire-element-id="149690">Vous pouvez essayer de compiler maintenant, cliquer sur les boutons, taper du texte, mais l'application ne fera rien. En effet, il nous manque encore deux parties de l'architecture MVC : le modèle et le contrôleur. Puisqu'ici, les fonctionnalités de notre application sont très limitées, nous n'avons pas besoin de modèle. En revanche, nous avons besoin d'un contrôleur. Le framework AppKit nous donne accès à toute une famille d'objets préconstruits pour être des contrôleurs. Nous apprendrons à les utiliser plus tard. Pour l'instant, nous allons nous contenter d'un objet « fait maison » : une simple classe fille de <code>NSObject</code>. Pour l'ajouter au projet, au lieu de passer par Xcode et de créer de nouveaux fichiers, nous ferons tout directement dans IB. ;)</p><p id="r-149691" data-claire-element-id="149691">Dans la bibliothèque d'objets, choisissez (dans la rubrique <em>Objects &amp; Controllers</em>) un objet <strong>Object</strong> (avec une icône bleue en forme de cube) et glissez-le dans la fenêtre du projet (pas la fenêtre de l'application, attention), comme ceci :</p><figure id="r-149693" data-claire-element-id="149694"><img id="r-149692" data-claire-element-id="149692" src="medias/uploads.siteduzero.com_files_293001_294000_293645.png" alt="Image utilisateur"/></figure><p id="r-149695" data-claire-element-id="149695">Pour l'instant, l'objet ajouté est une instance de <code>NSObject</code>. Il faut donc changer sa classe ; pour cela, sélectionnez cet objet, puis dans l'inspecteur, onglet <em>Identity</em>, nommez sa classe <code>Controller</code> :</p><figure id="r-149697" data-claire-element-id="149698"><img id="r-149696" data-claire-element-id="149696" src="medias/uploads.siteduzero.com_files_293001_294000_293650.png" alt="Image utilisateur"/></figure><p id="r-149699" data-claire-element-id="149699">Étant donné que cette nouvelle classe est inconnue de Xcode et d'IB, il faut fournir quelques informations à son sujet, comme sa classe mère. Cliquez sur la petite flèche grise dans le champ de la classe <code>Controller</code> (on peut la voir dans la capture d'écran juste au-dessus). Cette flèche nous ramène dans la bibliothèque de classes, où la classe <code>Controller</code> est répertoriée. Dans cette fenêtre, on peut éditer certaines choses très pratiques, comme la classe mère : pour ce faire, cliquez sur le bloc en pointillés et choisissez <code>NSObject</code>. La classe <code>Controller</code> hérite à présent de <code>NSObject</code>. Comme vous pouvez le remarquer, un menu déroulant permet de voir et d'éditer d'autres informations au sujet de cette classe, notamment les <em>Outlets</em> et les <em>Actions</em> (et c'est le concept le plus important du chapitre :) ).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
<span class="arrow"></span>
<span class="next">Un modèle d&#039;organisation du code : le MVC</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
<span class="next">Faire dialoguer les objets entre eux : outlets et actions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Fairedialoguerlesobjetsentreeuxoutletsetactions"></a><h2>Faire dialoguer les objets entre eux : outlets et actions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
<span class="arrow"></span>
<span class="next">Création du projet et de l&#039;interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
<span class="next">Édition du code</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-faire-dialoguer-les-objets-entre-eux-outlets-et-actions" data-claire-element-id="149742">Faire dialoguer les objets entre eux : outlets et actions</h4><p id="r-149701" data-claire-element-id="149701">J'en ai beaucoup parlé dans le premier chapitre : au sein d'une application Cocoa, il existe différentes couches de code. En général, entre le contrôleur et le modèle, des messages sont directement échangés (par exemple <code data-claire-semantic="objective-c">[tableau addObject:couleur]</code>). Nous verrons plus tard d'autres systèmes de modèle, comme CoreData, qui utilisent le KVC pour échanger des informations. En revanche, nous n'avons pas encore vu de système d'échange entre la vue et le contrôleur. En effet, rappelez-vous que nous n'avons pas encore écrit de code dans cette application. Une question se pose alors : comment faire fonctionner l'application ?</p><h5 id="r-un-peu-de-theorie-1" data-claire-element-id="149715">Un peu de théorie</h5><p id="r-149702" data-claire-element-id="149702">Les objets de la vue et le contrôleur s'échangent des informations par le biais de messages particuliers. Les <em>actions</em> sont des messages envoyés de la vue au contrôleur (ou à un des contrôleurs). Par exemple, lorsque l'utilisateur clique sur un bouton, ce bouton doit envoyer une <em>action</em> à sa cible (ou <em>target</em> en anglais). Cette <em>action</em> est une méthode du contrôleur avec une syntaxe particulière que nous évoquerons plus tard (je rappelle qu'en Objective-C, les messages sont des appels à des méthodes). Cette méthode contient du code qui permet à l'application de réagir au clic du bouton.</p><p id="r-149703" data-claire-element-id="149703">Si par exemple l'utilisateur clique sur « Enregistrer », un message est envoyé du bouton (ou élément de menu) « Enregistrer » vers le contrôleur. Ce message est une méthode du contrôleur qui s'exécute. Le contrôleur va alors traiter l'information, et à son tour exécuter des méthodes appartenant au modèle, qui vont enregistrer les données demandées (suivant le protocole <code>NSCoding</code>, pourquoi pas ^^ ).</p><p id="r-149704" data-claire-element-id="149704">D'un autre côté, il faut que le contrôleur puisse mettre à jour la vue. Pour cela, il possède des <em>outlets</em>. Les <em>outlets</em> sont des objets de la vue, et sont des variables membres du contrôleur. Celui-ci peut alors leur envoyer des messages, comme par exemple mettre à jour une barre de progression, ou du texte dans un champ. On peut même aller plus loin : récupérer des informations d'un <em>outlet</em> pour les traiter.</p><p id="r-149705" data-claire-element-id="149705">Le système <em>action</em> − <em>outlet</em> est un <em>design pattern</em> récurrent dans Cocoa. Les développeurs ont d'ailleurs facilité au maximum sa mise en place. Pas une ligne de code n'est nécessaire pour définir les objets comme étant des <em>outlets</em> ou la cible d'une <em>action</em> : tout se fait à la souris. :)</p><p id="r-149706" data-claire-element-id="149706">Mais étant donné que le concept est très important, voici un de mes éternels schémas pour comprendre en images. :D</p><figure id="r-149708" data-claire-element-id="149709"><img id="r-149707" data-claire-element-id="149707" src="medias/uploads.siteduzero.com_files_293001_294000_293899.png" alt="Image utilisateur"/></figure><p id="r-149710" data-claire-element-id="149710"><em>C'est surtout la partie gérée par IB qui nous intéresse</em></p><figure id="r-149712" data-claire-element-id="149713"><img id="r-149711" data-claire-element-id="149711" src="medias/uploads.siteduzero.com_files_293001_294000_293916.png" alt="Image utilisateur"/></figure><p id="r-149714" data-claire-element-id="149714">Le sens des flèches a beaucoup d'importance. Il indique le sens d'envoi des messages, et au final qui exécute la méthode correspondant au message.</p><h5 id="r-la-mise-en-place-dans-notre-application" data-claire-element-id="149741">La mise en place dans notre application</h5><p id="r-149716" data-claire-element-id="149716">Avant toute chose, il faut savoir quand notre application doit réagir à une action de l'utilisateur. Ici, c'est évident : quand l'utilisateur clique sur un des deux boutons. Cela nous fait deux événements : quand l'utilisateur clique sur « Majuscules », il faut que le contrôleur mette à jour le champ de texte correspondant, il faut donc une méthode <code>- maj:</code> qui mette le texte saisi en majuscules. De même, quand l'utilisateur clique sur « Minuscules », il faut qu'une méthode <code>- min:</code> mettant à jour le texte soit exécutée.</p><p id="r-149717" data-claire-element-id="149717">Définissons deux actions pour notre classe <code>Controller</code>, comme ceci (utilisez les boutons « + » et « - ») :</p><figure id="r-149719" data-claire-element-id="149720"><img id="r-149718" data-claire-element-id="149718" src="medias/uploads.siteduzero.com_files_293001_294000_293942.png" alt="Image utilisateur"/></figure><p id="r-149721" data-claire-element-id="149721"><em>Les deux-points dans le nom sont obligatoires. En effet, la méthode reçoit en paramètre l'objet ayant envoyé le message.<br/> Ici on aura un <code>NSButton</code>, représenté par un type <code>id</code></em></p><p id="r-149722" data-claire-element-id="149722">Pour définir quel objet enverra l'action au contrôleur, on « dessine » la liaison entre les objets. Appuyez sur <kbd>Ctrl</kbd> et cliquez sur le bouton « Majuscules » de la fenêtre de l'application, puis glissez jusqu'à l'objet <em>Controller</em> dans la fenêtre de projet. Lâchez, puis choisissez la méthode <code>- maj:</code> dans le petit menu contextuel. Répétez avec le bouton « Minuscules ». ;)</p><figure id="r-149724" data-claire-element-id="149725"><img id="r-149723" data-claire-element-id="149723" src="medias/uploads.siteduzero.com_files_293001_294000_293946.png" alt="Image utilisateur"/></figure><figure id="r-149727" data-claire-element-id="149728"><img id="r-149726" data-claire-element-id="149726" src="medias/uploads.siteduzero.com_files_293001_294000_293947.png" alt="Image utilisateur"/></figure><p id="r-149729" data-claire-element-id="149729">Maintenant, il faut réfléchir aux <em>outlets</em> : quels objets sont nécessaires à la mise en majuscules du texte saisi ? Il nous faut déjà le texte entré par l'utilisateur : le champ d'entrée en haut de la fenêtre est donc un <em>outlet</em>. Il nous faut aussi le champ à côté du bouton « Majuscules » : c'est aussi un <em>outlet</em>. Enfin, pour mettre le texte en minuscules, il nous faut aussi le champ correspondant. Ce qui nous fait au final trois <em>outlets</em>, qu'il faut ajouter à la classe <code>Controller</code> :</p><figure id="r-149731" data-claire-element-id="149732"><img id="r-149730" data-claire-element-id="149730" src="medias/uploads.siteduzero.com_files_293001_294000_293948.png" alt="Image utilisateur"/></figure><p id="r-149733" data-claire-element-id="149733">Enfin, pour définir les liens, c'est un peu comme pour les <em>actions</em> : on presse <kbd>Ctrl</kbd> et clique sur le <strong>contrôleur</strong> cette fois, puis on glisse jusqu'à l'objet que l'on veut définir comme <em>outlet</em>. On choisit enfin dans le menu contextuel quel <em>outlet</em> cet objet constituera.</p><figure id="r-149735" data-claire-element-id="149736"><img id="r-149734" data-claire-element-id="149734" src="medias/uploads.siteduzero.com_files_293001_294000_293950.png" alt="Image utilisateur"/></figure><figure id="r-149738" data-claire-element-id="149739"><img id="r-149737" data-claire-element-id="149737" src="medias/uploads.siteduzero.com_files_293001_294000_293951.png" alt="Image utilisateur"/></figure><p id="r-149740" data-claire-element-id="149740">Vous pouvez voir tous les liens que le contrôleur a avec les objets de la vue dans l'onglet <em>Connections</em> de l'inspecteur du contrôleur. Vous pouvez également modifier ces liens par le biais de l'inspecteur. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
<span class="arrow"></span>
<span class="next">Création du projet et de l&#039;interface</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
<span class="next">Édition du code</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ditionducode"></a><h2>Édition du code</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
<span class="arrow"></span>
<span class="next">Faire dialoguer les objets entre eux : outlets et actions</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-edition-du-code" data-claire-element-id="149788">Édition du code</h4><p id="r-149743" data-claire-element-id="149743">Vous avez dû le remarquer, nous n'avons pas encore écrit de code pour le moment. Tout s'est en effet déroulé dans IB, et nous n'avons toujours pas de fichier de classe pour <code>Controller</code>. En fait, IB permet de générer automatiquement des fichiers source avec les attributs de la classe <code>Controller</code> que nous avons modifiés à la souris. ;)</p><p id="r-149744" data-claire-element-id="149744">Cliquez sur l'objet <em>Controller</em> dans la fenêtre de projet, et allez dans « File → Write Class Files… ». IB vous propose de créer deux fichiers source : un <code>*.m</code> et un <code>*.h</code>, qui constituent la définition (avec <code>@interface</code>) et l'implémentation de notre classe <code>Controller</code>. Évidemment, les méthodes ne sont pas encore écrites. ^^ Cliquez sur « <em>Save</em> », puis cochez le projet auquel il faut ajouter ces fichiers. Dans mon cas, le seul projet disponible est « Maj ».</p><figure id="r-149746" data-claire-element-id="149747"><img id="r-149745" data-claire-element-id="149745" src="medias/uploads.siteduzero.com_files_294001_295000_294048.png" alt="Image utilisateur"/></figure><p id="r-149748" data-claire-element-id="149748">Cliquez sur « <em>Add</em> » et revenez dans Xcode. Les fichiers générés ont cette tête-ci :</p><pre id="r-149749" data-claire-element-id="149749"><code data-claire-semantic="objective-c">#import &lt;Cocoa/Cocoa.h&gt;

@interface Controller : NSObject {
    IBOutlet id majLabel;
    IBOutlet id minLabel;
    IBOutlet id texte;
}
- (IBAction)maj:(id)sender;
- (IBAction)min:(id)sender;
@end</code></pre><pre id="r-149750" data-claire-element-id="149750"><code data-claire-semantic="objective-c">#import &quot;Controller.h&quot;

@implementation Controller
- (IBAction)maj:(id)sender {
    
}

- (IBAction)min:(id)sender {
    
}
@end</code></pre><p id="r-149751" data-claire-element-id="149751">On remarque plusieurs choses…</p><ul id="r-149756" data-claire-element-id="149756"><li id="r-149753" data-claire-element-id="149753"><p id="r-149752" data-claire-element-id="149752">Les variables membres sont de type <code data-claire-semantic="objective-c">IBOutlet id</code>. En réalité, le <code>IBOutlet</code> ne sert qu'à IB, qui sait lire les fichiers d'interface d'une classe et reconnaître les <em>outlets</em>. Seul le <code data-claire-semantic="objective-c">id</code> compte vraiment, car <code data-claire-semantic="objective-c">IBOutlet</code> est une macro vers <em>rien</em>.</p></li><li id="r-149755" data-claire-element-id="149755"><p id="r-149754" data-claire-element-id="149754">Les méthodes sont de type <code data-claire-semantic="objective-c">IBAction</code> et prennent en paramètre un objet de type <code data-claire-semantic="objective-c">id</code>. En fait, <code>IBAction</code> est une macro vers <code>void</code>, qui permet de distinguer les méthodes « normales » des <em>actions</em>. Les <em>actions</em> sont des méthodes de type <code>void</code> ! Le paramètre est l'objet ayant envoyé le message.</p></li></ul><div id="r-149758" data-claire-element-id="149758" data-claire-semantic="question"><p id="r-149757" data-claire-element-id="149757">Si on connaît le type des <em>outlets</em> et des objets qui envoient des messages, on peut remplacer les <code>id</code> par des <code>NSButton *</code>, par exemple ?</p></div><p id="r-149759" data-claire-element-id="149759">On pourrait le faire, et c'est intéressant pour les <em>outlets</em>. En revanche, on ne sait pas toujours quel est le type d'un objet envoyant une <em>action</em>. D'ailleurs, plusieurs objets de la vue peuvent déclencher la même action chez un contrôleur. C'est pour ça qu'on a besoin du type <code data-claire-semantic="objective-c">id</code>.</p><div id="r-149761" data-claire-element-id="149761" data-claire-semantic="question"><p id="r-149760" data-claire-element-id="149760">Autre question : si Interface Builder sait lire les fichiers source, est-ce qu'on peut rajouter des <em>outlets</em> et <em>actions</em> directement dans le code ?</p></div><p id="r-149762" data-claire-element-id="149762">Oui. D'ailleurs, quand vous créez une nouvelle classe avec des <em>outlets</em> et <em>actions</em> dans IB, je vous conseille de procéder comme ça : on crée la nouvelle classe dans IB, on lui ajoute des attributs, on crée les fichiers automatiquement, puis les éventuelles modifications des attributs sont faites directement dans le code. IB met à jour la classe automatiquement. Ça évite des conflits si vous faites des changements dans Xcode et IB à la fois. ;)</p><p id="r-149763" data-claire-element-id="149763">Allez, cette fois, on code. Il va falloir coder les deux méthodes <code>- maj:</code> et <code>- min:</code>.<br/> Commençons par <code>- maj:</code>. La première chose à faire est de récupérer le texte entré par l'utilisateur dans l'<em>outlet</em><code>texte</code>. En lisant la documentation de <code><a href="http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextField_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40004133">NSTextField</a></code>, on voit que c'est une classe fille de <code><a href="http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSControl_Class/Reference/Reference.html#//apple_ref/occ/cl/NSControl">NSControl</a></code>, qui possède une méthode <code>- stringValue</code> retournant le texte contenu dans le champ sous forme de <code>NSString</code>, que nous savons très bien manipuler. :) Pour mettre une chaîne de caractères en majuscules, il suffit d'exécuter la méthode <code>- uppercaseString</code>, qui renvoie une <code>NSString</code> en majuscules. Donc, pour récupérer le texte et le mettre en majuscules, on fait :</p><pre id="r-149764" data-claire-element-id="149764"><code data-claire-semantic="objective-c">NSString * messageMaj = [[texte stringValue] uppercaseString]; // texte est un outlet, ne l'oubliez pas !</code></pre><p id="r-149765" data-claire-element-id="149765">Il ne manque plus qu'à afficher cet objet dans le champ <code>majLabel</code>. Puisque c'est aussi un <code>NSTextField</code>, on peut utiliser la méthode <code>- setStringValue:</code>, qui attend en argument une <code>NSString</code>, pour afficher du texte.</p><p id="r-149766" data-claire-element-id="149766">Au final, la méthode <code>- maj:</code> ressemble à ceci :</p><pre id="r-149767" data-claire-element-id="149767"><code data-claire-semantic="objective-c">- (IBAction)maj:(id)sender
{
    NSString * messageMaj = [[texte stringValue] uppercaseString];
    [majLabel setStringValue:messageMaj];
}</code></pre><p id="r-149768" data-claire-element-id="149768">Je vous laisse implémenter <code>- min:</code> qui aura presque la même forme (indice : <code>- lowercaseString</code> risque d'être utile). ;)</p><p id="r-149769" data-claire-element-id="149769">Faites le test, à présent : si vous avez correctement défini les <em>actions</em> et <em>outlets</em> dans IB (en créant des liens avec la souris), le comportement de votre application devrait être celui recherché.</p><p id="r-149770" data-claire-element-id="149770">Ça n'était pas trop difficile, si ?</p><p id="r-149771" data-claire-element-id="149771">Ce chapitre, même si l'application que nous avons créée n'est pas très impressionnante, contient des concepts très importants : le <em>design pattern</em> MVC et le <em>design pattern</em><em>Action-Target-Outlet</em>, qui sont deux concepts récurrents dans la conception d'applications avec Cocoa. ;)</p><p id="r-149772" data-claire-element-id="149772">Dans le prochain chapitre, nous aborderons un autre <em>design pattern</em>, mais pas inconnu cette fois-ci : le système des <em>delegates</em>. Que du bonheur ! :p</p><p id="r-149773" data-claire-element-id="149773">Cette partie est encore en chantier.</p><p id="r-149774" data-claire-element-id="149774">Détail des (futures) parties.</p><ul id="r-149783" data-claire-element-id="149783"><li id="r-149776" data-claire-element-id="149776"><p id="r-149775" data-claire-element-id="149775">La partie I est à présent terminée. Elle est encore susceptible d'être modifiée pour quelques corrections ou mises à jour éventuelles.</p></li><li id="r-149778" data-claire-element-id="149778"><p id="r-149777" data-claire-element-id="149777">La partie II est en chantier. Après le futur TP, je me pencherai sur la classe <code>NSObject</code> et quelques méthodes obscures, puis la classe <code>NSData</code>, et enfin quelques trucs sympathiques (surprise :p ).</p></li><li id="r-149780" data-claire-element-id="149780"><p id="r-149779" data-claire-element-id="149779">La partie III est également en chantier. Le prochain chapitre traitera du système des <em>delegates</em>. Seront ensuite abordés dans d'autres chapitres : architecture KVC, CoreData, etc.</p></li><li id="r-149782" data-claire-element-id="149782"><p id="r-149781" data-claire-element-id="149781">La partie IV concernera des notions avancées de l'Objective-C, comme les <code>@property</code>, le système KVC plus en profondeur, les exceptions, le <em>garbage collector</em>, ou encore des pratiques plus ésotériques, comme la réflexivité. :-°</p></li></ul><aside id="r-149785" data-claire-element-id="149785" data-claire-semantic="information"><p id="r-149784" data-claire-element-id="149784">N'hésitez pas à laisser vos commentaires sur ce tutoriel et à proposer des améliorations. Écrire un tutoriel de cette envergure n'est pas facile : vos commentaires aident à en améliorer les points faibles. :)</p></aside><div id="r-149787" data-claire-element-id="149787"><p id="r-149786" data-claire-element-id="149786"><em>Merci aux zCorrecteurs <a href="http://www.zcorrecteurs.fr/membres/profil-811-fihld.html">Fihld</a>, <a href="http://www.zcorrecteurs.fr/membres/profil-95-guillawme.html">Guillawme</a>, <a href="http://www.zcorrecteurs.fr/profil-841.html">Xeroth</a>, <a href="http://www.zcorrecteurs.fr/membres/profil-149-stylla.html">Stylla</a> et <a href="http://www.zcorrecteurs.fr/profil-1472.html">micky</a> qui se sont occupés de ce tutoriel,<br/> et <a href="http://www.siteduzero.com/membres-294-85974.html">vyk12</a> pour avoir relu plusieurs chapitres.</em></p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c">Programmez en Objective-C !</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les principes de base
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/introduction-a-l-objective-c">Introduction à l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/historique-2">
Historique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-ca-marche-9">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-3">
Comment faire ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/a-l-assaut-de-l-objective-c">À l&#039;assaut de l&#039;Objective-C</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/pour-commencer-1">
Pour commencer...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-objets-et-l-objective-c">
Les objets et l&#039;Objective-C
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/nsstring-1">
NSString
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-classes-1">Les classes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/explications-10">
Explications
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-interface-4">
L&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-9">
Les méthodes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-conventions">
Les conventions
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/l-heritage-7">L&#039;héritage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-histoire-de-famille">
Une histoire de famille...
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/comment-faire-heriter">
Comment faire hériter
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-protocoles-1">
Les protocoles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/gerer-la-memoire">Gérer la mémoire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/retain-count-et-autres-joyeusetes">
Retain count et autres joyeusetés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/copier-et-assigner">
Copier et assigner
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/liberer-la-memoire-2">
Libérer la mémoire
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/tp-jeu-de-combat-rpg">TP : Jeu de combat (RPG)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/preliminaires">
Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-solution-7">
La solution
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Le framework Foundation
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-tableaux-14">Les tableaux</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creer-un-tableau-1">
Créer un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-methodes-courantes">
Les méthodes courantes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/la-memoire-avec-nsarray">
La mémoire avec NSArray
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/en-bonus-1">
En bonus
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/donnees-sans-ordre">Données sans ordre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/principe-du-dictionnaire">
Principe du dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/manipuler-un-dictionnaire">
Manipuler un dictionnaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-ensembles">
Les ensembles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/les-fichiers-1">Les fichiers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/representation-d-un-chemin">
Représentation d&#039;un chemin
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/lire-et-ecrire-du-texte">
Lire et écrire du texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/enregistrer-un-objet-la-theorie">
Enregistrer un objet, la théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/archiver-des-objets-dans-un-fichier">
Archiver des objets dans un fichier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/desarchiver-des-objets">
Désarchiver des objets
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Cocoa dans son ensemble
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/presentation-de-cocoa-et-de-ses-outils">Présentation de Cocoa et de ses outils</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/cocoa-un-framework-complet">
Cocoa, un framework complet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/le-code-en-dur">
Le code en dur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique-legere">
Une interface graphique légère
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/une-interface-graphique">Une interface graphique</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/un-modele-d-organisation-du-code-le-mvc">
Un modèle d&#039;organisation du code : le MVC
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/creation-du-projet-et-de-l-interface">
Création du projet et de l&#039;interface
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
Faire dialoguer les objets entre eux : outlets et actions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/edition-du-code">
Édition du code
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmez-en-objective-c/faire-dialoguer-les-objets-entre-eux-outlets-et-actions">
<span class="arrow"></span>
<span class="next">Faire dialoguer les objets entre eux : outlets et actions</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/rogrammez-en-objective-c.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 07:34:22 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rogrammez-en-objective-c.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:23:23 GMT -->
</html>