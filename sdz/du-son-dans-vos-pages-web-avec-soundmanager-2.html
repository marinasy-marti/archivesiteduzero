<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/du-son-dans-vos-pages-web-avec-soundmanager-2.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:45:01 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/du-son-dans-vos-pages-web-avec-soundmanager-2.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:34:00 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Du son dans vos pages web avec SoundManager 2 !</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Du son dans vos pages web avec SoundManager 2 !</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#DusondansvospageswebavecSoundManager2">Du son dans vos pages web avec SoundManager 2 !</a><br/><a href="#Labasepourbiendmarrer">La base pour bien démarrer</a><br/><a href="#Premierssons">Premiers sons</a><br/><a href="#L039objetSMSoundendtail">L&#039;objet SMSound en détail</a><br/><a href="#SoundManagerendtail">SoundManager en détail</a><br/><a href="#TPUnlecteuraudio">TP : Un lecteur audio</a><br/></div>
<a name="DusondansvospageswebavecSoundManager2"></a><h2>Du son dans vos pages web avec SoundManager 2 !</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/la-base-pour-bien-demarrer">
<span class="next">La base pour bien démarrer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-340778" data-claire-element-id="340778">Vous avez peut-être entendu dire qu'il était difficile de mettre du son dans les pages web. En combinant Javascript et les balises <code data-claire-semantic="html">&lt;object&gt; </code>... ça devient vite compliqué.<br/> Alors beaucoup se rabattent sur Flash.</p><p id="r-340779" data-claire-element-id="340779">Mais voilà ! SoundManager 2 est une bibliothèque Javascript qui, utilisant Flash, permet de lire des sons très facilement en Javascript ! :)</p><p id="r-340780" data-claire-element-id="340780">Dans ce mini-tuto, vous allez donc découvrir les possibilités offertes par SoundManager 2.</p><aside id="r-340782" data-claire-element-id="340782" data-claire-semantic="information"><p id="r-340781" data-claire-element-id="340781">Pour bien comprendre ce tuto, il est conseillé de connaître au moins les bases du Javascript. Si besoin, consultez le big tuto à ce sujet :<br/><a href="http://www.siteduzero.com/tutoriel-3-8158-tout-sur-le-javascript.html">Tout sur le Javascript</a></p></aside>
</div><a name="Labasepourbiendmarrer"></a><h2>La base pour bien démarrer</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/premiers-sons">
<span class="next">Premiers sons</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-installation-de-soundmanager-2" data-claire-element-id="340803">Installation de SoundManager 2</h2><p id="r-340783" data-claire-element-id="340783">Bon, la première étape pour utiliser SoundManager2, c'est de le télécharger ! :) <br/> Rendez-vous donc sur la <a href="http://www.schillmania.com/projects/soundmanager2/doc/download/">page de téléchargement du site officiel</a> et cliquez sur le bouton Download pour récupérer la toute dernière version.</p><p id="r-340784" data-claire-element-id="340784">Première étape une fois téléchargé, dézippez le fichier !<br/> Ouvrez ensuite le dossier qui contient normalement un certain nombre de choses :</p><ul id="r-340799" data-claire-element-id="340799"><li id="r-340786" data-claire-element-id="340786"><p id="r-340785" data-claire-element-id="340785">Un dossier &quot;demo&quot;</p></li><li id="r-340788" data-claire-element-id="340788"><p id="r-340787" data-claire-element-id="340787">Un dossier &quot;doc&quot;</p></li><li id="r-340790" data-claire-element-id="340790"><p id="r-340789" data-claire-element-id="340789">Un dossier &quot;script&quot;</p></li><li id="r-340792" data-claire-element-id="340792"><p id="r-340791" data-claire-element-id="340791">Un dossier &quot;src&quot;</p></li><li id="r-340794" data-claire-element-id="340794"><p id="r-340793" data-claire-element-id="340793">Un dossier &quot;swf&quot;</p></li><li id="r-340796" data-claire-element-id="340796"><p id="r-340795" data-claire-element-id="340795">Un fichier &quot;index.html&quot;</p></li><li id="r-340798" data-claire-element-id="340798"><p id="r-340797" data-claire-element-id="340797">Et enfin un fichier &quot;license.txt&quot;</p></li></ul><p id="r-340800" data-claire-element-id="340800">(Remarquez en passant le dossier &quot;doc&quot;, qui contient la documentation de SoundManager 2 hors-ligne.)</p><p id="r-340801" data-claire-element-id="340801">Ici, les dossiers qui nous intéressent sont les dossiers &quot;script&quot;, &quot;src&quot; et &quot;swf&quot;. Vous pouvez par exemple les déplacer dans un dossier qui servira de dossier test pour ce mini-tuto.</p><p id="r-340802" data-claire-element-id="340802">Voilà, c'est tout ce qu'il y a besoin de faire pour utiliser SoundManager 2 ! :) On va pouvoir, sans plus attendre, passer à la pratique. :pirate:</p><h2 id="r-initialisation-8" data-claire-element-id="340816">Initialisation</h2><p id="r-340804" data-claire-element-id="340804">Ca y est, on y est ! On va pouvoir mettre du son dans nos pages web !</p><p id="r-340805" data-claire-element-id="340805">Mais pour que la bibliothèque fonctionne bien, il faut l'initialiser. Voici comment ça marche.</p><p id="r-340806" data-claire-element-id="340806">Prenons un fichier XHTML de base :</p><pre id="r-340807" data-claire-element-id="340807"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Premiers pas avec SoundManager 2&lt;/title&gt;


&lt;/head&gt;
&lt;body&gt;


&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-340808" data-claire-element-id="340808">La première étape consiste à inclure le script principal de SoundManager.</p><pre id="r-340809" data-claire-element-id="340809"><code data-claire-semantic="html">&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;</code></pre><p id="r-340810" data-claire-element-id="340810">Et en dessous, on va mettre ceci :</p><pre id="r-340811" data-claire-element-id="340811"><code data-claire-semantic="html">&lt;script type=&quot;text/javascript&quot;&gt;
soundManager.url = 'swf/';
&lt;/script&gt;</code></pre><p id="r-340812" data-claire-element-id="340812">Cette première ligne sert à définir l'emplacement du répertoire &quot;swf&quot; dont on a parlé précédemment. Mettez donc l'emplacement qu'il a chez vous.</p><p id="r-340813" data-claire-element-id="340813">Ceci peut suffire pour démarrer, mais on va quand même ajouter une deuxième ligne, pour contrôler les éventuelles erreurs :</p><pre id="r-340814" data-claire-element-id="340814"><code data-claire-semantic="html">&lt;script type=&quot;text/javascript&quot;&gt;
soundManager.url = 'swf/';
soundManager.debugMode = true;
&lt;/script&gt;</code></pre><p id="r-340815" data-claire-element-id="340815">Voilà. :p On peut commencer pour de bon.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2">Du son dans vos pages web avec SoundManager 2 !</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/la-base-pour-bien-demarrer">
La base pour bien démarrer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/premiers-sons">
Premiers sons
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/l-objet-smsound-en-detail">
L&#039;objet SMSound en détail
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/soundmanager-en-detail">
SoundManager en détail
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/tp-un-lecteur-audio-1">
TP : Un lecteur audio
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/premiers-sons">
<span class="next">Premiers sons</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Premierssons"></a><h2>Premiers sons</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/la-base-pour-bien-demarrer">
<span class="arrow"></span>
<span class="next">La base pour bien démarrer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/l-objet-smsound-en-detail">
<span class="next">L&#039;objet SMSound en détail</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-lire-un-son-de-facon-simple-et-directe" data-claire-element-id="340843">Lire un son (de façon simple et directe...)</h2><p id="r-340818" data-claire-element-id="340818">Voici donc notre page actuelle :</p><pre id="r-340819" data-claire-element-id="340819"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Mes premiers pas avec SoundManager 2&lt;/title&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
soundManager.url = 'swf/';
soundManager.debugMode = true;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-340820" data-claire-element-id="340820">Bon, je ne vous fais pas attendre plus longtemps : pour lire un son, il suffit d'écrire ça :</p><pre id="r-340821" data-claire-element-id="340821"><code data-claire-semantic="javascript">soundManager.play('premier_son','musique/son.mp3');</code></pre><p id="r-340822" data-claire-element-id="340822">Le premier paramètre sera l'id du son créé. Mettez ce que vous voulez.<br/> Le deuxième paramètre, c'est le lien relatif vers le son. Tout simplement.</p><p id="r-340823" data-claire-element-id="340823">Mais attendez ! Pour que ça marche, il faut attendre que SoundManager soit chargé. On met donc :</p><pre id="r-340824" data-claire-element-id="340824"><code data-claire-semantic="javascript">soundManager.onload = function() {
	soundManager.play(&quot;premier_son&quot;,&quot;musique/son.mp3&quot;);
}</code></pre><p id="r-340825" data-claire-element-id="340825">Notre code complet est :</p><pre id="r-340826" data-claire-element-id="340826"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Mes premiers pas avec SoundManager 2&lt;/title&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
soundManager.url = 'swf/';
soundManager.debugMode = true;
soundManager.onload = function() {
	soundManager.play(&quot;premier_son&quot;,&quot;musique/son.mp3&quot;);
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-340827" data-claire-element-id="340827"><a href="http://romeho.free.fr/tuto_soundManager/tutosm1.htm">Tester le code</a></p><p id="r-340828" data-claire-element-id="340828">Si vous ouvrez maintenant votre page dans un navigateur (avec le plugin Flash version 8 minimum), le son devrait démarrer.<br/> En local, il arrive que Flash pose problème : allez sur <a href="http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html">le site de Flash</a> et ajoutez le dossier actuel à la liste des dossiers de confiance.</p><p id="r-340829" data-claire-element-id="340829">Maintenant ça doit marcher. Sinon, c'est que vous avez fait une faute de frappe quelque part. ^^</p><div id="r-340831" data-claire-element-id="340831" data-claire-semantic="question"><p id="r-340830" data-claire-element-id="340830">&quot;Ca marche, mais c'est quoi ce texte moche qui remplit ma page ?&quot;</p></div><p id="r-340832" data-claire-element-id="340832">Vous vous souvenez de la ligne de debugMode ?</p><pre id="r-340833" data-claire-element-id="340833"><code data-claire-semantic="javascript">soundManager.debugMode = true;</code></pre><p id="r-340834" data-claire-element-id="340834">Et bien voilà, ce texte nous dira tout ce qu'il se passe. Pratique pour détecter les erreurs. (D'ailleurs celle de Flash était normalement signalée.)</p><p id="r-340835" data-claire-element-id="340835">Il vous dérange ce texte ? Pour l'afficher de manière un peu plus jolie et un peu moins encombrante, ajoutez ce code CSS :</p><pre id="r-340836" data-claire-element-id="340836"><code data-claire-semantic="css">#soundmanager-debug {
 position:fixed;
 _position:absolute; /* IE &lt;7 */
 bottom:1em;
 right:1em;
 width:40em;
 height:30em;
 overflow:auto;
 border:1px solid #ccc;
 padding:1em;
 margin:1em;
 font-family:monaco,&quot;VT-100&quot;,terminal,&quot;lucida console&quot;,courier,system;
 font-size:x-small;
 background:#f6f6f6;
 opacity:0.9;
 color:#333;
}
#soundmanager-debug code {
 font-size:1.1em;
 *font-size:1em;
}
#soundmanager-debug div {
 margin-top:0.5em;
}</code></pre><p id="r-340837" data-claire-element-id="340837">Et voilà la &quot;boîte de Debug&quot; ! :) (Remarquez le petit bouton &quot;-&quot; en bas à droite, qui permet de masquer la boîte si nécessaire.)</p><p id="r-340838" data-claire-element-id="340838">Et puisqu'elle affiche les erreurs, jetez-y un coup d'oeil approfondi. Que voyez-vous ?</p><p id="r-340839" data-claire-element-id="340839"><cite>Citation</cite></p><blockquote id="r-340841" data-claire-element-id="340841"><p id="r-340840" data-claire-element-id="340840">&quot;premier_son&quot; is an invalid sound ID.</p></blockquote><p id="r-340842" data-claire-element-id="340842">Cette erreur apparaît parce que le son a été lancé de la manière la plus simple qui soit... mais pas la plus correcte. (Et le debug, il n'a pas trop aimé... &gt;_ )</p><h2 id="r-lire-un-son-dans-les-regles-de-l-art" data-claire-element-id="340855">Lire un son (dans les règles de l'Art)</h2><p id="r-340844" data-claire-element-id="340844">Pour faire bien, il faut d'abord créer le son. Et seulement ensuite, le démarrer.<br/> Pour ça on utilisera :</p><pre id="r-340845" data-claire-element-id="340845"><code data-claire-semantic="javascript">soundManager.createSound(Obj);</code></pre><p id="r-340846" data-claire-element-id="340846">Cette méthode permet en plus d'ajouter pas mal de fonctions à notre lecture de son. On verra ça un peu plus tard, mais retenez une chose : faire comme ça, c'est mieux ! :)</p><p id="r-340847" data-claire-element-id="340847">Donc, voici ce qu'il faut écrire pour faire... la même chose qu'avant :</p><pre id="r-340848" data-claire-element-id="340848"><code data-claire-semantic="javascript">soundManager.onload = function() {
	soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot; // Attention pas de virgule ici !
	});
	soundManager.play(&quot;premier_son&quot;);
}</code></pre><p id="r-340849" data-claire-element-id="340849">Remarquez que l'erreur du debug a disparu ! :) <br/> Vous voulez mieux ? Encore mieux ? Voici la façon parfaite de créer un son avec SoundManager : on va utiliser l'objet SMSound retourné par la méthode createSound()...</p><pre id="r-340850" data-claire-element-id="340850"><code data-claire-semantic="javascript">var premier_son; // On le déclare avant, histoire qu'il soit une variable globale.
soundManager.onload = function() {
	premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot; // Attention pas de virgule ici !
	});
	premier_son.play();
}</code></pre><p id="r-340851" data-claire-element-id="340851">Voilà pour la lecture d'un son. Je vous mets le code complet actuel (j'ai mis le CSS de la &quot;boîte du Debug&quot; dans un fichier externe pour ne pas encombrer le code) :</p><pre id="r-340852" data-claire-element-id="340852"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Mes premiers pas avec SoundManager 2&lt;/title&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;debug.css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
soundManager.url = 'swf/';
soundManager.debugMode = true;
var premier_son;
soundManager.onload = function() {
	premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot; // Attention pas de virgule ici !
	});
	premier_son.play();
}

&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-340853" data-claire-element-id="340853"><a href="http://romeho.free.fr/tuto_soundManager/tutosm3.htm">Tester le code</a></p><p id="r-340854" data-claire-element-id="340854">Et on va maintenant pouvoir s'attaquer aux nombreuses fonctionnalités supplémentaires offertes par SoundManager. :soleil:</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2">Du son dans vos pages web avec SoundManager 2 !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/la-base-pour-bien-demarrer">
La base pour bien démarrer
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/premiers-sons">
Premiers sons
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/l-objet-smsound-en-detail">
L&#039;objet SMSound en détail
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/soundmanager-en-detail">
SoundManager en détail
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/tp-un-lecteur-audio-1">
TP : Un lecteur audio
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/la-base-pour-bien-demarrer">
<span class="arrow"></span>
<span class="next">La base pour bien démarrer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/l-objet-smsound-en-detail">
<span class="next">L&#039;objet SMSound en détail</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="L039objetSMSoundendtail"></a><h2>L&#039;objet SMSound en détail</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/premiers-sons">
<span class="arrow"></span>
<span class="next">Premiers sons</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/soundmanager-en-detail">
<span class="next">SoundManager en détail</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-methodes-5" data-claire-element-id="340882">Méthodes</h2><p id="r-340857" data-claire-element-id="340857">Voilà, vous savez lancer un son. Mais ne nous arrêtons en si bon chemin.</p><p id="r-340858" data-claire-element-id="340858">L'objet SMSound, que nous avons créé précédemment, vous réserve encore quelques surprises.</p><h3 id="r-play-et-stop" data-claire-element-id="340860">play() et stop()</h3><p id="r-340859" data-claire-element-id="340859">Et oui ! Les méthodes, vous en avez déjà utilisé une : la méthode play(). Dans le même ordre d'idée, il existe bien entendu la méthode stop().</p><h3 id="r-pause-resume-et-togglepause" data-claire-element-id="340867">pause(), resume() et togglePause()</h3><p id="r-340861" data-claire-element-id="340861">Voici trois méthodes qui nous permettent facilement de mettre en pause et de relancer le son. La troisième méthode réunit les deux premières en stoppant le son s'il était en lecture et en le relançant s'il était en pause.</p><p id="r-340862" data-claire-element-id="340862">On peut donc facilement imaginer un code qui offrirait la possibilité de lire un son, avec en plus l'option de le mettre en pause.</p><p id="r-340863" data-claire-element-id="340863">Le code HTML, très simple, peut se composer de trois boutons :</p><pre id="r-340864" data-claire-element-id="340864"><code data-claire-semantic="html">&lt;button onclick=&quot;premier_son.play();&quot;&gt;Lire&lt;/button&gt;
&lt;button onclick=&quot;premier_son.pause();&quot;&gt;Pause&lt;/button&gt;
&lt;button onclick=&quot;premier_son.resume();&quot;&gt;Reprise&lt;/button&gt;</code></pre><p id="r-340865" data-claire-element-id="340865"><a href="http://romeho.free.fr/tuto_soundManager/tutosm4.htm">Tester le code</a></p><p id="r-340866" data-claire-element-id="340866">(Pour offrir la possibilité de démarrer le son, il faut bien sûr supprimer la ligne <code data-claire-semantic="javascript">premier_son.play() </code> du code Javascript.)</p><h3 id="r-mute-et-unmute" data-claire-element-id="340871">mute() et unmute()</h3><p id="r-340868" data-claire-element-id="340868">Ces deux propriétés vont permettre de couper le son (mode &quot;muet&quot;) et de le réactiver. De même que précédemment, on peut créer des boutons offrant cette possibilité à l'utilisateur.</p><pre id="r-340869" data-claire-element-id="340869"><code data-claire-semantic="html">&lt;button onclick=&quot;premier_son.play();&quot;&gt;Lire&lt;/button&gt;
&lt;button onclick=&quot;premier_son.mute();&quot;&gt;Passer en mode &quot;muet&quot;&lt;/button&gt;
&lt;button onclick=&quot;premier_son.unmute();&quot;&gt;Sortir du mode &quot;muet&quot;&lt;/button&gt;</code></pre><p id="r-340870" data-claire-element-id="340870"><a href="http://romeho.free.fr/tuto_soundManager/tutosm5.htm">Tester le code</a></p><h3 id="r-setvolume-integer-setpan-integer-et-setposition-integer" data-claire-element-id="340881">setVolume(integer), setPan(integer) et setPosition(integer)</h3><p id="r-340872" data-claire-element-id="340872">Nous avons ici trois propriétés permettant de modifier respectivement le volume, la balance (gauche/droite) et la position du son. Elles prennent chacune en paramètre un &quot;integer&quot;, c'est-à-dire un nombre entier.</p><ul id="r-340879" data-claire-element-id="340879"><li id="r-340874" data-claire-element-id="340874"><p id="r-340873" data-claire-element-id="340873">setVolume : prend en paramètre un entier entre 0 et 100.</p></li><li id="r-340876" data-claire-element-id="340876"><p id="r-340875" data-claire-element-id="340875">setPan : prend en paramètre un entier entre -100 (son à gauche) et 100 (son à droite).</p></li><li id="r-340878" data-claire-element-id="340878"><p id="r-340877" data-claire-element-id="340877">setPosition : prend en paramètre un entier indiquant à combien de millisecondes du début le son doit être lu.</p></li></ul><p id="r-340880" data-claire-element-id="340880">Voyons maintenant les événements, qui nous seront très utiles par la suite.</p><h2 id="r-evenements-4" data-claire-element-id="340912">Evénements</h2><p id="r-340883" data-claire-element-id="340883">Les événements de l'objet SMSound vont pouvoir être placés à la création de l'objet.</p><h3 id="r-onload-1" data-claire-element-id="340890">onload()</h3><p id="r-340884" data-claire-element-id="340884">L'événement onload() se produit dès que le son a fini de charger. Pratique pour tenir l'utilisateur au courant du chargement.</p><p id="r-340885" data-claire-element-id="340885">On pourrait par exemple mettre un petit message dans le code HTML :</p><pre id="r-340886" data-claire-element-id="340886"><code data-claire-semantic="html">&lt;span id=&quot;loading&quot;&gt;Chargement en cours...&lt;/span&gt;</code></pre><p id="r-340887" data-claire-element-id="340887">Et dans le javascript, lors de la création du son, on aurait ceci :</p><pre id="r-340888" data-claire-element-id="340888"><code data-claire-semantic="javascript">premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot;,
		onload : function() {
			document.getElementById(&quot;loading&quot;).innerHTML = &quot;Chargement terminé !&quot;;
		} // Attention pas de virgule ici !
	});
	premier_son.play();</code></pre><p id="r-340889" data-claire-element-id="340889"><a href="http://romeho.free.fr/tuto_soundManager/tutosm6.htm">Tester le code</a></p><h3 id="r-onplay-onstop-onpause-et-onresume" data-claire-element-id="340892">onplay(), onstop(), onpause() et onresume()</h3><p id="r-340891" data-claire-element-id="340891">Ces événements vont avec les méthodes que nous avons vu juste avant. Je ne pense pas avoir besoin de les détailler plus. On les utilise de la même manière que onload().</p><h3 id="r-onbeforefinish-onjustbeforefinish-onfinish-et-onbeforefinishcomplete" data-claire-element-id="340906">onbeforefinish(), onjustbeforefinish(), onfinish() et onbeforefinishcomplete()</h3><p id="r-340893" data-claire-element-id="340893">On a là quatre événements assez similaires, qui auront lieu vers la fin de la lecture du son.</p><ul id="r-340902" data-claire-element-id="340902"><li id="r-340895" data-claire-element-id="340895"><p id="r-340894" data-claire-element-id="340894">onbeforefinish : a lieu environ 5000 millisecondes (= 5 secondes) avant la fin de la lecture.</p></li><li id="r-340897" data-claire-element-id="340897"><p id="r-340896" data-claire-element-id="340896">onjustbeforefinish : a lieu environ 200 millisecondes (= 0.2 seconde) avant la fin de la lecture.</p></li><li id="r-340899" data-claire-element-id="340899"><p id="r-340898" data-claire-element-id="340898">onfinish : a lieu à la fin de la lecture.</p></li><li id="r-340901" data-claire-element-id="340901"><p id="r-340900" data-claire-element-id="340900">onbeforefinishcomplete : a lieu encore après onfinish(), juste avant que les données du son ne soient réinitialisées.</p></li></ul><p id="r-340903" data-claire-element-id="340903">On peut rapidement trouver une utilité à ces événements. Par exemple pour répéter le même son indéfiniment.</p><pre id="r-340904" data-claire-element-id="340904"><code data-claire-semantic="javascript">premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot;,
		onfinish : function() {
			this.play();
		} // Attention pas de virgule ici !
	});
	premier_son.play();</code></pre><p id="r-340905" data-claire-element-id="340905"><a href="http://romeho.free.fr/tuto_soundManager/tutosm7.htm">Tester le code</a></p><h3 id="r-onid3" data-claire-element-id="340908">onid3()</h3><p id="r-340907" data-claire-element-id="340907">L'événement onid3() se produit dès que les <a href="http://fr.wikipedia.org/wiki/Id3">tags ID3</a> du son sont lus. On pourra alors les afficher en utilisant la propriété id3 : je détaillerai ça plus loin.</p><h3 id="r-whileloading-whileplaying" data-claire-element-id="340911">whileloading(), whileplaying()</h3><p id="r-340909" data-claire-element-id="340909">Ces deux événements vont nous être utiles par la suite. Ils se produisent respectivement pendant le chargement et la lecture du son. On s'en servira par exemple pour afficher l'avancement du son.</p><p id="r-340910" data-claire-element-id="340910">Voilà pour les événements. Il se peut que certains soient encore un peu confus ; j'essaierai d'en utiliser le plus possible dans les exemples qui suivent.</p><h2 id="r-proprietes-9" data-claire-element-id="341006">Propriétés</h2><p id="r-340913" data-claire-element-id="340913">Les propriétés nous donnent des informations sur l'objet son créé.</p><h3 id="r-sid" data-claire-element-id="340917">sID</h3><p id="r-340914" data-claire-element-id="340914">sID fait tout simplement référence à l'id du son créé. Testez par vous-même en ajoutant cette ligne à la fin de votre javascript actuel :</p><pre id="r-340915" data-claire-element-id="340915"><code data-claire-semantic="javascript">alert(premier_son.sID);</code></pre><p id="r-340916" data-claire-element-id="340916">Alors ? On retrouve normalement l'id du son qui est ... &quot;premier_son&quot;. Bah oui, on a donné le même nom à la variable SMSound et à son id.<br/> Si vous restez sceptiques, modifiez l'id du son, et réessayez ! :)</p><h3 id="r-url" data-claire-element-id="340920">url</h3><p id="r-340918" data-claire-element-id="340918">Pas besoin de m'étendre longtemps sur cette propriété. Vous avez déjà deviné à quoi elle sert. La ligne suivante affichera donc l'url du fichier son.</p><pre id="r-340919" data-claire-element-id="340919"><code data-claire-semantic="javascript">alert(premier_son.url);</code></pre><h3 id="r-volume-1" data-claire-element-id="340925">volume</h3><p id="r-340921" data-claire-element-id="340921">Ici aussi le nom de la propriété est explicite. Il est possible de régler le volume du son. Comme le montre le code ci-dessous, le volume par défaut est 100 (le maximum).</p><pre id="r-340922" data-claire-element-id="340922"><code data-claire-semantic="javascript">alert(premier_son.volume);</code></pre><p id="r-340923" data-claire-element-id="340923">Vous pouvez modifier cette propriété lors de la création du son :</p><pre id="r-340924" data-claire-element-id="340924"><code data-claire-semantic="javascript">var premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot;,
		volume : 50 // Attention pas de virgule ici !
	});</code></pre><h3 id="r-loaded" data-claire-element-id="340927">loaded</h3><p id="r-340926" data-claire-element-id="340926">Cette propriété est un booléen, indiquant si le son est chargé ou pas.</p><h3 id="r-paused" data-claire-element-id="340929">paused</h3><p id="r-340928" data-claire-element-id="340928">Avec la propriété paused, on peut tester si le son a été mis en pause ou pas.</p><h3 id="r-readystate" data-claire-element-id="340940">readyState</h3><p id="r-340930" data-claire-element-id="340930">Cette valeur bien pratique donne la situation actuelle du chargement du son. Elle peut prendre quatre valeurs :</p><ul id="r-340939" data-claire-element-id="340939"><li id="r-340932" data-claire-element-id="340932"><p id="r-340931" data-claire-element-id="340931">0 : Non initialisé</p></li><li id="r-340934" data-claire-element-id="340934"><p id="r-340933" data-claire-element-id="340933">1 : Chargement en cours</p></li><li id="r-340936" data-claire-element-id="340936"><p id="r-340935" data-claire-element-id="340935">2 : Echec/Erreur</p></li><li id="r-340938" data-claire-element-id="340938"><p id="r-340937" data-claire-element-id="340937">3 : Chargé/Succès</p></li></ul><h3 id="r-duration-et-durationestimate" data-claire-element-id="340945">duration et durationEstimate</h3><p id="r-340941" data-claire-element-id="340941">Là, on arrive dans les propriétés réellement intéressantes ! La propriété duration indique la durée du son. Cette durée n'est précise qu'une fois le son entièrement chargé.<br/>durationEstimate, comme son nom l'indique, tente d'estimer la durée du son avant la fin du chargement.<br/> Dans les deux cas, cette durée est donnée en millisecondes.</p><p id="r-340942" data-claire-element-id="340942">Entraînez-vous en faisant afficher simplement la durée du son. Utilisez par exemple durationEstimate pendant l'événement whileloading(), puis duration lors de l'événement onload().</p><pre id="r-340943" data-claire-element-id="340943"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Mes premiers pas avec SoundManager 2&lt;/title&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;debug.css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
soundManager.url = 'swf/';
soundManager.debugMode = true;
var premier_son;
soundManager.onload = function() {
	premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/piste01.mp3&quot;,
		whileloading : function() {
			var nb_sec_est = parseInt(this.durationEstimate/1000,10);
			document.getElementById(&quot;duree&quot;).innerHTML = &quot;Durée estimée : &quot;+parseInt(nb_sec_est/60,10)+&quot;:&quot;+nb_sec_est%60;
		},
		onload : function() {
			var nb_secondes = parseInt(this.duration/1000,10);
			document.getElementById(&quot;duree&quot;).innerHTML = &quot;Durée : &quot;+parseInt(nb_secondes/60,10)+&quot;:&quot;+nb_secondes%60;
		} // Attention pas de virgule ici !
	});
	premier_son.play();
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;span id=&quot;duree&quot;&gt;Durée : &lt;/span&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-340944" data-claire-element-id="340944"><a href="http://romeho.free.fr/tuto_soundManager/tutosm8.htm">Tester le code</a></p><h3 id="r-position-1" data-claire-element-id="340950">position</h3><p id="r-340946" data-claire-element-id="340946">La propriété position indique l'avancement du son en millisecondes. On va donc pouvoir l'utiliser, à l'aide de la méthode whileplaying(), pour créer un compteur d'avancement (comme sur tout lecteur qui se respecte) :</p><pre id="r-340947" data-claire-element-id="340947"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Mes premiers pas avec SoundManager 2&lt;/title&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;debug.css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
soundManager.url = 'swf/';
soundManager.debugMode = true;
var premier_son;
soundManager.onload = function() {
	premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot;,
		whileplaying : function() {
			var duree_secondes = parseInt(this.duration/1000,10);
			var duree = parseInt(duree_secondes/60,10)+&quot;:&quot;+duree_secondes%60;
			var position_secondes = parseInt(this.position/1000,10);
			var position = parseInt(position_secondes/60,10)+&quot;:&quot;+position_secondes%60;
			document.getElementById(&quot;cpt&quot;).innerHTML = position+&quot; / &quot;+duree;
		} // Attention pas de virgule ici !
	});
	premier_son.play();
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;span id=&quot;cpt&quot;&gt;&lt;/span&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-340948" data-claire-element-id="340948"><a href="http://romeho.free.fr/tuto_soundManager/tutosm9.htm">Tester le code</a></p><p id="r-340949" data-claire-element-id="340949">Plutôt facile non ?</p><h3 id="r-id3" data-claire-element-id="340999">id3</h3><p id="r-340951" data-claire-element-id="340951">Je l'avais mentionnée précédemment, la propriété id3 va permettre de récupérer les <a href="http://fr.wikipedia.org/wiki/Id3">tags ID3</a> du son joué. On pourra alors afficher le titre de la chanson, l'artiste, etc.</p><p id="r-340952" data-claire-element-id="340952">Pour accéder aux différents tags, on utilisera cette syntaxe : <code data-claire-semantic="javascript">id3[&quot;le_tag&quot;] </code><br/> Les tags ne sont accessibles que s'ils sont définis. Mieux vaut peut-être vérifier leur existence avant de les afficher... sinon, on risque de voir apparaître des &quot;undefined&quot; un peu partout. ^^ <br/> Chaque tag a deux écritures.<br/> Les tags possibles sont :</p><table id="r-340995" data-claire-element-id="340995"><thead id="r-340958" data-claire-element-id="340958"><tr id="r-340957" data-claire-element-id="340957"><th id="r-340954" data-claire-element-id="340954"><p id="r-340953" data-claire-element-id="340953">Tag ID3</p></th><th id="r-340956" data-claire-element-id="340956"><p id="r-340955" data-claire-element-id="340955">Correspondance</p></th></tr></thead><tbody id="r-340994" data-claire-element-id="340994"><tr id="r-340963" data-claire-element-id="340963"><td id="r-340960" data-claire-element-id="340960"><p id="r-340959" data-claire-element-id="340959">id3[&quot;COMM&quot;]<br/> id3[&quot;comment&quot;]</p></td><td id="r-340962" data-claire-element-id="340962"><p id="r-340961" data-claire-element-id="340961">Commentaire</p></td></tr><tr id="r-340968" data-claire-element-id="340968"><td id="r-340965" data-claire-element-id="340965"><p id="r-340964" data-claire-element-id="340964">id3[&quot;TALB&quot;]<br/> id3[&quot;album&quot;]</p></td><td id="r-340967" data-claire-element-id="340967"><p id="r-340966" data-claire-element-id="340966">Titre de l'album</p></td></tr><tr id="r-340973" data-claire-element-id="340973"><td id="r-340970" data-claire-element-id="340970"><p id="r-340969" data-claire-element-id="340969">id3[&quot;TCON&quot;]<br/> id3[&quot;genre&quot;]</p></td><td id="r-340972" data-claire-element-id="340972"><p id="r-340971" data-claire-element-id="340971">Genre</p></td></tr><tr id="r-340978" data-claire-element-id="340978"><td id="r-340975" data-claire-element-id="340975"><p id="r-340974" data-claire-element-id="340974">id3[&quot;TIT2&quot;]<br/> id3[&quot;songname&quot;]</p></td><td id="r-340977" data-claire-element-id="340977"><p id="r-340976" data-claire-element-id="340976">Titre de la piste</p></td></tr><tr id="r-340983" data-claire-element-id="340983"><td id="r-340980" data-claire-element-id="340980"><p id="r-340979" data-claire-element-id="340979">id3[&quot;TPE1&quot;]<br/> id3[&quot;artist&quot;]</p></td><td id="r-340982" data-claire-element-id="340982"><p id="r-340981" data-claire-element-id="340981">Artiste</p></td></tr><tr id="r-340988" data-claire-element-id="340988"><td id="r-340985" data-claire-element-id="340985"><p id="r-340984" data-claire-element-id="340984">id3[&quot;TRCK&quot;]<br/> id3[&quot;track&quot;]</p></td><td id="r-340987" data-claire-element-id="340987"><p id="r-340986" data-claire-element-id="340986">Numéro de la piste</p></td></tr><tr id="r-340993" data-claire-element-id="340993"><td id="r-340990" data-claire-element-id="340990"><p id="r-340989" data-claire-element-id="340989">id3[&quot;TYER&quot;]<br/> id3[&quot;year&quot;]</p></td><td id="r-340992" data-claire-element-id="340992"><p id="r-340991" data-claire-element-id="340991">Année</p></td></tr></tbody></table><p id="r-340996" data-claire-element-id="340996">Voici un exemple de code qui affiche l'artiste et la chanson :</p><pre id="r-340997" data-claire-element-id="340997"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Mes premiers pas avec SoundManager 2&lt;/title&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;debug.css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
soundManager.url = 'swf/';
soundManager.debugMode = true;
var premier_son;
soundManager.onload = function() {
	premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot;,
		onid3 : function() {
			chaine_tag = &quot;&quot;;
			if(this.id3[&quot;artist&quot;]) {
				chaine_tag += &quot;&lt;strong&gt;Artiste :&lt;/strong&gt; &quot;+this.id3[&quot;artist&quot;]+&quot;&lt;br /&gt;&quot;;
			}
			if(this.id3[&quot;songname&quot;]) {
				chaine_tag += &quot;&lt;strong&gt;Titre :&lt;/strong&gt; &quot;+this.id3[&quot;songname&quot;]+&quot;&lt;br /&gt;&quot;;
			}
			document.getElementById(&quot;tag&quot;).innerHTML = chaine_tag;
		} // Attention pas de virgule ici !
	});
	premier_son.play();
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div id=&quot;tag&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-340998" data-claire-element-id="340998"><a href="http://romeho.free.fr/tuto_soundManager/tutosm10.htm">Tester le code</a></p><h3 id="r-bytesloaded-et-bytestotal" data-claire-element-id="341005">bytesLoaded et bytesTotal</h3><p id="r-341000" data-claire-element-id="341000">Voici les deux dernières propriétés que je présenterai. Elles permettent d'obtenir le nombre d'octets chargés et le nombre d'octets total.<br/> Pourquoi ne pas faire alors un petit compteur de chargement ? On utilisera cette fois la méthode whileloading().</p><pre id="r-341001" data-claire-element-id="341001"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Mes premiers pas avec SoundManager 2&lt;/title&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;debug.css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
soundManager.url = 'swf/';
soundManager.debugMode = true;
var premier_son;
soundManager.onload = function() {
	premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot;,
		whileloading : function() {
			taille_totale = parseInt(this.bytesTotal/1048576*100)/100+&quot; Mo&quot;;
			taille_chargee = parseInt(this.bytesLoaded/1048576*100)/100+&quot; Mo&quot;;
			document.getElementById(&quot;cpt&quot;).innerHTML = taille_chargee+&quot; / &quot;+taille_totale;
		} // Attention pas de virgule ici !
	});
	premier_son.play();
}
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;span id=&quot;cpt&quot;&gt;&lt;/span&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-341002" data-claire-element-id="341002"><a href="http://romeho.free.fr/tuto_soundManager/tutosm11.htm">Tester le code</a></p><p id="r-341003" data-claire-element-id="341003">Voili voilou. On a fait le tour des principales possibilités offertes par les objets SMSound. Bien entendu, je n'ai pas parlé de tout (ça prendrait bien trop de temps). Le reste est présenté dans la documentation de SoundManager 2 (sur <a href="http://www.schillmania.com/projects/soundmanager2/doc/">le site de SoundManager</a> ou dans le dossier doc que vous avez téléchargé au début).</p><p id="r-341004" data-claire-element-id="341004">On approche de la fin de ce tuto. Je vais à présent vous parler assez brièvement des méthodes, événements et propriétés de l'objet soundManager.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2">Du son dans vos pages web avec SoundManager 2 !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/la-base-pour-bien-demarrer">
La base pour bien démarrer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/premiers-sons">
Premiers sons
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/l-objet-smsound-en-detail">
L&#039;objet SMSound en détail
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/soundmanager-en-detail">
SoundManager en détail
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/tp-un-lecteur-audio-1">
TP : Un lecteur audio
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/premiers-sons">
<span class="arrow"></span>
<span class="next">Premiers sons</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/soundmanager-en-detail">
<span class="next">SoundManager en détail</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="SoundManagerendtail"></a><h2>SoundManager en détail</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/l-objet-smsound-en-detail">
<span class="arrow"></span>
<span class="next">L&#039;objet SMSound en détail</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/tp-un-lecteur-audio-1">
<span class="next">TP : Un lecteur audio</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-341008" data-claire-element-id="341008">Dès le début de ce tuto, vous avez utilisé l'objet soundManager avec son événement onload() et sa méthode createSound().</p><p id="r-341009" data-claire-element-id="341009">On va voir qu'il en existe d'autres qui valent la peine d'être présentées. ^^</p><h2 id="r-methodes-6" data-claire-element-id="341039">Méthodes</h2><h3 id="r-createsound-objet-et-destroysound-sid" data-claire-element-id="341013">createSound(objet) et destroySound(sID)</h3><p id="r-341010" data-claire-element-id="341010">La méthode createSound(), c'est la seule que nous ayons utilisé jusqu'à présent. Elle permet de créer un objet SMSound et d'y indiquer un certain nombre de paramètres et d'actions événementielles.<br/> La méthode destroySound(), comme son nom l'indique permet de détruire un objet SMSound créé. Le son sera stoppé, puis détruit. destroySound() prend en paramètre l'id (propriété sID) du son à détruire.</p><p id="r-341011" data-claire-element-id="341011">Exemple où l'on détruit le son à la fin de sa lecture :</p><pre id="r-341012" data-claire-element-id="341012"><code data-claire-semantic="javascript">premier_son = soundManager.createSound(
	{
		id : &quot;premier_son&quot;,
		url : &quot;musique/son.mp3&quot;,
		onfinish : function() {
			soundManager.destroySound(this.sID);
		} // Attention pas de virgule ici !
	});
	premier_son.play();</code></pre><h3 id="r-getsoundbyid-sid-et-sounds" data-claire-element-id="341021">getSoundById(sID) et sounds{}</h3><p id="r-341014" data-claire-element-id="341014">Ces méthodes sont bien pratiques pour retrouver un son par son sID (par exemple si on ne l'a pas enregistré dans un variable...).</p><ul id="r-341019" data-claire-element-id="341019"><li id="r-341016" data-claire-element-id="341016"><p id="r-341015" data-claire-element-id="341015">getSoundById : prend en paramètre l'id du son recherché. La méthode renvoie <code data-claire-semantic="javascript">null </code> en cas d'erreur.</p></li><li id="r-341018" data-claire-element-id="341018"><p id="r-341017" data-claire-element-id="341017">sounds : c'est un objet littéral.</p></li></ul><pre id="r-341020" data-claire-element-id="341020"><code data-claire-semantic="javascript">soundManager.getSoundById(&quot;premier_son&quot;);
// est équivalent à
soundManager.sounds.premier_son;
// ou encore à
soundManager.sounds[&quot;premier_son&quot;];</code></pre><h3 id="r-load-sid-et-unload-sid" data-claire-element-id="341023">load(sID) et unload(sID)</h3><p id="r-341022" data-claire-element-id="341022">Nous avons deux méthodes qui permettent de charger en mémoire un son ou le décharger. Depuis le début de ce mini-tuto, on faisait directement play() et le son se chargeait alors.<br/> Ca peut être utile de précharger les sons pour éviter un temps de latence entre play() et le début de la lecture.</p><h3 id="r-play-sid-stop-sid-pause-sid-resume-sid-et-togglepause-sid" data-claire-element-id="341025">play(sID), stop(sID), pause(sID), resume(sID) et togglePause(sID)</h3><p id="r-341024" data-claire-element-id="341024">Ces méthodes ont la même utilité que celles du même nom de l'objet SMSound. Ce sont ici des méthodes de soundManager, qui prennent donc en paramètre l'id du son.</p><h3 id="r-mute-sid-et-unmute-sid" data-claire-element-id="341027">mute(sID) et unmute(sID)</h3><p id="r-341026" data-claire-element-id="341026">On retrouve ici aussi des méthodes que possédait l'objet SMSound. Comme précédemment, ces méthodes prennent en paramètre l'id du son.<br/> Si aucun id n'est spécifié, tous les sons seront affectés.</p><h3 id="r-pauseall-resumeall-et-stopall" data-claire-element-id="341029">pauseAll(), resumeAll() et stopAll()</h3><p id="r-341028" data-claire-element-id="341028">Ces trois méthodes propres à soundManager permettent respectivement de mettre en pause, relancer et stopper tous les sons d'un coup. Elles ne prennent pas de paramètres.</p><h3 id="r-setvolume-sid-integer-setpan-sid-integer-et-setposition-sid-integer" data-claire-element-id="341031">setVolume(sID, integer), setPan(sID, integer) et setPosition(sID, integer)</h3><p id="r-341030" data-claire-element-id="341030">Encore une fois des méthodes que l'on a déjà rencontrées. Elles prennent en paramètres l'id du son et un entier. (Voir les méthodes de l'objet SMSound pour plus de précision sur les valeurs possibles)</p><h3 id="r-canplayurl-url" data-claire-element-id="341033">canPlayURL(url)</h3><p id="r-341032" data-claire-element-id="341032">Nous avons ici une méthode qui permet de vérifier si une url est lisible par soundManager. La vérification est basée principalement sur l'extension, et non pas sur l'existence du fichier.<br/> Cette méthode prend en paramètre l'url d'un son.</p><h3 id="r-loadfromxml-url" data-claire-element-id="341038">loadFromXML(url)</h3><p id="r-341034" data-claire-element-id="341034">Cette méthode particulière permet de charger des sons directement à partir d'un fichier XML. Voici un exemple de fichier XML :</p><pre id="r-341035" data-claire-element-id="341035"><code data-claire-semantic="xml">&lt;items baseHref=&quot;musique/&quot;&gt; // baseHref est optionnel. C'est le dossier de référence des sons.
                            // Si vous l'utilisez, n'oubliez pas le slash final
     &lt;sound id=&quot;premier_son&quot; href=&quot;son1.mp3&quot; /&gt;
     &lt;sound id=&quot;deuxieme_son&quot; href=&quot;son2.mp3&quot; /&gt;
&lt;/items&gt;</code></pre><p id="r-341036" data-claire-element-id="341036">Ce système peut s'avérer pratique pour automatiser le chargement de sons. Pour utiliser le fichier XML créé, c'est très simple :</p><pre id="r-341037" data-claire-element-id="341037"><code data-claire-semantic="javascript">soundManager.onload = function() {
	soundManager.loadFromXML(&quot;nom_du_fichier.xml&quot;);
}</code></pre><h2 id="r-evenements-5" data-claire-element-id="341046">Evénements</h2><p id="r-341040" data-claire-element-id="341040">soundManager ne possède que deux événements.</p><h3 id="r-onload-2" data-claire-element-id="341042">onload()</h3><p id="r-341041" data-claire-element-id="341041">On l'utilise depuis le début de ce mini-tuto, afin de détecter le chargement de soundManager. Je ne reviendrai pas dessus, je pense que vous avez compris son utilité.</p><h3 id="r-onerror-1" data-claire-element-id="341045">onerror()</h3><p id="r-341043" data-claire-element-id="341043">L'événement onerror() permet de détecter si soundManager ne se charge pas correctement.</p><p id="r-341044" data-claire-element-id="341044">Voilà, cette fois, je crois qu'on a réellement fait le tour des principales possibilités de gestion des sons offertes par soundManager 2.<br/> Sachez néanmoins que soundManager 2 propose quelques autres options, notamment les spectres sonores, les waveform et même la lecture de formats vidéo. N'hésitez pas à consulter le <a href="http://www.schillmania.com/projects/soundmanager2/">site officiel</a> et bien entendu la <a href="http://www.schillmania.com/projects/soundmanager2/doc/">documentation de soundManager 2</a>. :)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2">Du son dans vos pages web avec SoundManager 2 !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/la-base-pour-bien-demarrer">
La base pour bien démarrer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/premiers-sons">
Premiers sons
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/l-objet-smsound-en-detail">
L&#039;objet SMSound en détail
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/soundmanager-en-detail">
SoundManager en détail
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/tp-un-lecteur-audio-1">
TP : Un lecteur audio
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/l-objet-smsound-en-detail">
<span class="arrow"></span>
<span class="next">L&#039;objet SMSound en détail</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/tp-un-lecteur-audio-1">
<span class="next">TP : Un lecteur audio</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPUnlecteuraudio"></a><h2>TP : Un lecteur audio</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/soundmanager-en-detail">
<span class="arrow"></span>
<span class="next">SoundManager en détail</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-tp-un-lecteur-audio" data-claire-element-id="341061">TP : Un lecteur audio</h2><p id="r-341048" data-claire-element-id="341048">Pour terminer ce mini-tuto, je vous propose un petit TP.</p><p id="r-341049" data-claire-element-id="341049">L'objectif de ce TP est de réaliser un petit lecteur audio avec une playlist prédéfinie de quelques titres.<br/> Il faudra donc créer un compteur d'avancement, ainsi que les boutons habituels d'un lecteur (play, pause, stop, suivant, précédent, etc.).</p><p id="r-341050" data-claire-element-id="341050">Je vous laisse vous débrouiller avec tout ce qu'on a vu. N'hésitez pas à aller consulter les exemples donnés sur le site pour vous aider.</p><p id="r-341051" data-claire-element-id="341051">Voici <a href="http://romeho.free.fr/tuto_soundManager/player.htm">ma version du lecteur</a>.</p><p id="r-341052" data-claire-element-id="341052">Et les codes qui vont avec :</p><p id="r-341053" data-claire-element-id="341053"></p><div id="r-341060" data-claire-element-id="341060"><h3 id="r-fichier-player-html" data-claire-element-id="341055">Fichier player.html</h3><pre id="r-341054" data-claire-element-id="341054"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Lecteur audio avec Sound Manager 2&lt;/title&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;debug.css&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;player.css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;player.js&quot;&gt;&lt;/script&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div id=&quot;lecteur&quot;&gt;
&lt;div id=&quot;controls&quot;&gt;
&lt;!-- BOUTONS D'INTERACTION --&gt;

&lt;img id=&quot;play&quot; src=&quot;images/play.png&quot; alt=&quot;play&quot; title=&quot;Lecture&quot; onclick=&quot;bouton_play();&quot; /&gt;
&lt;img id=&quot;stop&quot; src=&quot;images/stop.png&quot; alt=&quot;stop&quot; title=&quot;Stop&quot; onclick=&quot;bouton_stop();&quot; /&gt;
&lt;img id=&quot;previous&quot; src=&quot;images/previous.png&quot; alt=&quot;précédent&quot; title=&quot;Titre précédent&quot; onclick=&quot;bouton_previous();&quot; /&gt;
&lt;!-- Pour rewind et forward, on utilise onmouseup pour cesser de répéter en boucle la fonction --&gt;
&lt;img id=&quot;rewind&quot; src=&quot;images/rewind.png&quot; alt=&quot;retour arrière&quot; title=&quot;Retour arrière&quot; onmousedown=&quot;bouton_rewind();&quot; onmouseup=&quot;if(timer) { clearTimeout(timer); }&quot; /&gt;
&lt;img id=&quot;forward&quot; src=&quot;images/forward.png&quot; alt=&quot;avance rapide&quot; title=&quot;Avance rapide&quot; onmousedown=&quot;bouton_forward();&quot; onmouseup=&quot;if(timer) { clearTimeout(timer); }&quot; /&gt;
&lt;img id=&quot;next&quot; src=&quot;images/next.png&quot; alt=&quot;suivant&quot; title=&quot;Titre suivant&quot; onclick=&quot;bouton_next();&quot; /&gt;
&lt;img id=&quot;loop&quot; src=&quot;images/none.png&quot; alt=&quot;répéter&quot; title=&quot;Répéter le titre&quot; onclick=&quot;bouton_loop();&quot; /&gt;
&lt;img id=&quot;mute&quot; src=&quot;images/sound.png&quot; alt=&quot;muet&quot; title=&quot;Muet&quot; onclick=&quot;bouton_toggleMute();&quot; style=&quot;margin-left:20px;&quot; /&gt;
&lt;!-- De même ici pour volume moins et volume plus --&gt;
&lt;img id=&quot;moins&quot; src=&quot;images/moins.png&quot; alt=&quot;moins&quot; title=&quot;Volume -&quot; onmousedown=&quot;bouton_volume(false);&quot; onmouseup=&quot;if(timer) { clearTimeout(timer); }&quot; /&gt;
&lt;!-- Pour la barre de volume, on détecte le clic avec onmousedown, et le déplacement avec onmousemove. --&gt;
&lt;img id=&quot;volume&quot; src=&quot;images/volume.png&quot; alt=&quot;volume&quot; title=&quot;100&quot; onmousedown=&quot;clic('vol', event);&quot; onmousemove=&quot;move('vol', event);&quot; /&gt;
&lt;img id=&quot;plus&quot; src=&quot;images/plus.png&quot; alt=&quot;plus&quot; title=&quot;Volume +&quot; onmousedown=&quot;bouton_volume(true);&quot; onmouseup=&quot;if(timer) { clearTimeout(timer); }&quot; /&gt;
&lt;/div&gt;
&lt;div id=&quot;avancement&quot;&gt;
&lt;!-- Pour la barre d'avancement, on détecte le clic avec onmousedown, et le déplacement avec onmousemove. --&gt;

&lt;div id=&quot;test&quot;&gt;&lt;img id=&quot;barre&quot; src=&quot;images/barre.png&quot; onmousedown=&quot;clic('barre', event);&quot; onmousemove=&quot;move('barre', event);&quot; /&gt;&lt;br /&gt;
&lt;img id=&quot;chargement&quot; src=&quot;images/none.png&quot; /&gt;
&lt;span id=&quot;load&quot; style=&quot;float:right;&quot;&gt;0 / 0&lt;/span&gt;
&lt;span id=&quot;cpt&quot;&gt;0:00 / 0:00&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;tagid3&quot;&gt;&lt;/div&gt;

&lt;!-- PLAYLIST --&gt;
&lt;!-- C'est la playlist qui définit les sons à créer. Il suffit donc de la modifier pour changer de playlist ! :) --&gt;
&lt;div id=&quot;playlist&quot;&gt;
&lt;a href=&quot;musique/piste01.mp3&quot;&gt;Piste 01&lt;/a&gt;&lt;br /&gt;

&lt;a href=&quot;musique/piste02.mp3&quot;&gt;Piste 02&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste03.mp3&quot;&gt;Piste 03&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste04.mp3&quot;&gt;Piste 04&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste05.mp3&quot;&gt;Piste 05&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste06.mp3&quot;&gt;Piste 06&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste07.mp3&quot;&gt;Piste 07&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste08.mp3&quot;&gt;Piste 08&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste09.mp3&quot;&gt;Piste 09&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste10.mp3&quot;&gt;Piste 10&lt;/a&gt;&lt;br /&gt;

&lt;a href=&quot;musique/piste11.mp3&quot;&gt;Piste 11&lt;/a&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><h3 id="r-fichier-player-css" data-claire-element-id="341057">Fichier player.css</h3><pre id="r-341056" data-claire-element-id="341056"><code data-claire-semantic="css">#lecteur {
width:450px;
float:left;
margin-bottom:20px;
}
#controls {
text-align:center;
}
#controls img {
cursor:pointer;
}
#controls #loop {
width:32px;
height:32px;
background-image:url(&quot;images/repeat.png&quot;);
background-position:50% 50%;
}
#controls #volume {
cursor:pointer;
background-image:url(&quot;images/arr_volume.png&quot;);
background-position:0 50%;
}
#avancement {
text-align:center;
position:relative;
}
#test {
text-align:left;
width:420px;
margin:auto;
}
#chargement {
width:420px;
height:10px;
background-image:url(&quot;images/arr_charg2.png&quot;);
background-position:-420px 50%;
background-repeat:no-repeat;
margin-top:10px;&quot;
}
#barre {
position:absolute;
margin-top:29px;
background-image:url(&quot;images/arr_barre2.png&quot;);
background-position:-420px 50%;
background-repeat:no-repeat;
height:12px;
width:420px;
cursor:pointer;
}
#tagid3 {
float:left;
margin-left:20px;
padding:5px;
width:225px;
}
#playlist {
width:350px;
float:left;
padding-left:20px;
border:1px solid black;
line-height:30px;
}
#playlist a {
color:black;
text-decoration:none;
}
#playlist a:hover {
text-decoration:underline;
}
#playlist img {
border:0;
vertical-align:middle;
}</code></pre><h3 id="r-fichier-player-js" data-claire-element-id="341059">Fichier player.js</h3><pre id="r-341058" data-claire-element-id="341058"><code data-claire-semantic="javascript">soundManager.url = 'swf/'; // Chemin du dossier &quot;swf&quot;
soundManager.debugMode = false; // DebugMode désactivé
soundManager.waitForWindowLoad = true; // Attendre le chargement de la page pour charger soundManager
soundManager.onerror = function() { // En cas d'erreur ...
	alert(&quot;SoundManager 2 a rencontré une erreur.&quot;); // ... on affiche un message à l'utilisateur
}
var playlist = []; // Tableau pour contenir la playlist
var current = 0; // Indice du son courant (dans playlist[]);
var act_vol = soundManager.defaultOptions.volume; // Variable pour le volume actuel, initialisée au volume par défaut de SoundManager
var loop = &quot;none&quot;; // Mode de répétition séléctionné
var next = false; // Indicateurs booléens du clic sur Previous et Next
var prev = false;

soundManager.onload = function() { // On attend tout d'abord le chargement...
	var barre = document.getElementById(&quot;barre&quot;); // On récupère la barre d'avancement,
	var chargement = document.getElementById(&quot;chargement&quot;); // la barre de chargement,
	var cpt = document.getElementById(&quot;cpt&quot;); // le compteur de secondes,
	var vol = document.getElementById(&quot;volume&quot;); // la barre de volume,
	var list = document.getElementById(&quot;playlist&quot;).getElementsByTagName(&quot;a&quot;); // et les différents liens &lt;a&gt; de la playlist (les titres).
	for (var i=0;i&lt;list.length;i++) { // On parcourt la liste
		list[i].rel = i; // On renseigne un indice arbitraire dans l'attribut rel de chaque &lt;a&gt;
		var sp = document.createElement(&quot;span&quot;); // On crée un élément span
		list[i].parentNode.insertBefore(sp,list[i]); // qu'on ajoute avant chaque &lt;a&gt; de la liste
		list[i].onclick = function() { // On crée une fonction onclick sur chaque lien :
			soundManager.stopAll(); // On stoppe tous les sons
			current = this.rel; // On mets en &quot;son courant&quot; celui cliqué (grâce à l'indice du rel)
			lire_current(); // On appelle la fonction lire_current() pour lancer la lecture
			return false; // On renvoie faux pour empêcher les liens de rediriger (ils ne servent qu'aux sans-js)
		};
		(function(titre) {
			playlist[i] = soundManager.createSound( // On crée un son pour chaque lien de la playlist
			{
				id : &quot;piste&quot;+i, // Id arbitraire : piste0, piste1, etc.
				url : list[i].href, // L'url de chaque son est le href de chaque lien
				whileloading : function() { // Pendant le chargement :
					chargement.style.backgroundPosition = -420+(this.bytesLoaded/this.bytesTotal * 420)+&quot;px 50%&quot;; // On ajuste le background de la barre de chargement
					if(this.bytesTotal&gt;= 1048576) { // Si taille totale &gt;= 1 Mo
						taille_totale = parseInt(this.bytesTotal/1048576*100)/100+&quot; Mo&quot;;
						taille_chargee = parseInt(this.bytesLoaded/1048576*100)/100+&quot; Mo&quot;;
					} else if(this.bytesTotal &gt;= 1024) { // Sinon si taille totale &gt;= 1 Ko
						taille_totale = parseInt(this.bytesTotal/1024*100)/100+&quot; Ko&quot;;
						taille_chargee = parseInt(this.bytesLoaded/1024*100)/100+&quot; Ko&quot;;
					} else { // Sinon si &lt; 1 Ko
						taille_totale = this.bytesTotal+&quot; o&quot;;
						taille_chargee = this.bytesLoaded+&quot; o&quot;;
					}
					document.getElementById(&quot;load&quot;).innerHTML = taille_chargee+&quot; / &quot;+taille_totale; // On insère dans le span de chargement.
				},
				whileplaying : function() { // Pendant la lecture :
					barre.style.backgroundPosition = -420+(this.position/this.duration * 420)+&quot;px 50%&quot;; // On ajuste le background de la barre d'avancement
					act_sec = parseInt(this.position/1000 % 60,10); // Calcul du nb de secondes écoulées
					if(act_sec&lt;10) { act_sec = &quot;0&quot;+act_sec; } // (Ajout d'un 0 si &lt;10)
					act_min = parseInt(this.position/1000/60,10); // Calcul du nb de minutes écoulées
					tot_sec = parseInt(this.duration/1000 % 60,10); // Calcul du nb de secondes total du son
					if(tot_sec&lt;10) { tot_sec = &quot;0&quot;+tot_sec; } // (Ajout d'un 0 si &lt;10)
					tot_min = parseInt(this.duration/1000/60,10); // Calcul du nb de minutes total du son
					cpt.innerHTML = act_min+&quot;:&quot;+act_sec+&quot; / &quot;+tot_min+&quot;:&quot;+tot_sec; // On affiche ces valeurs dans le div &quot;cpt&quot;
					vol.style.backgroundPosition = -100+act_vol+&quot;px 50%&quot;; // On ajuste le background de la barre de son, en fonction du son actuel
					vol.title = &quot;Volume : &quot;+act_vol; // On ajuste aussi le title du volume
				},
				onresume : // Quand on enlève &quot;pause&quot; :
					function() {
					titre.previousSibling.innerHTML = &quot;&lt;img src='images/played.png' alt='lecture' /&gt; &quot;; // On insère une image &quot;play&quot; dans le span créé
					},
				onplay : // Quand on fait &quot;play&quot; :
					function() {
					titre.previousSibling.innerHTML = &quot;&lt;img src='images/played.png' alt='lecture' /&gt; &quot;; // On insère une image &quot;play&quot; dans le span créé
					},
				onstop : // Quand on fait &quot;stop&quot; :
					function() {
					playlist[current].unload(); // On &quot;décharge&quot; le son, histoire de pas occuper trop de mémoire
					titre.previousSibling.innerHTML = &quot;&quot;; // On enlève l'image du span
					},
				onfinish : // A la fin d'un son
					function() {
					playlist[current].unload(); // On &quot;décharge&quot; le son, histoire de pas occuper trop de mémoire
					titre.previousSibling.innerHTML = &quot;&quot;; // On enlève l'image du span
					if(!prev &amp;&amp; !next) { // Si la fin du son n'est pas due à un clic sur Previous ou Next, on regarde le mode de répétition choisi
						if(loop==&quot;one&quot;) { // Si &quot;Répéter un titre&quot;
							lire_current(); // On (re)lance la lecture du son actuel
						} else if(loop==&quot;all&quot;) { // Si &quot;Répéter la playlist&quot;
							bouton_next(); // On appelle bouton_next() (On passe au titre suivante)
						} else { // Si &quot;Ne pas répéter&quot;
							if(current&lt;playlist.length-1) { // Si on n'est pas encore à la fin de la playlist
								bouton_next(); // On passe au titre suivant
							} else { // Sinon
								current = 0; // On réinitialise juste le titre courant.
							}
						}
					}
					},
				onpause : // Quand on fait &quot;pause&quot;
					function() {
					titre.previousSibling.innerHTML = &quot;&lt;img src='images/paused.png' alt='pause' /&gt; &quot;; // On insère une image &quot;pause&quot; dans le span créé
					},
				onid3 : function() { // A l'arrivée des Tag ID3
					var chaine_tag = &quot;&quot;; // On crée une chaîne vide
					if(this.id3[&quot;artist&quot;]) { // Et on y insère les différents tag en vérifiant leur existence au préalable.
						chaine_tag += &quot;&lt;strong&gt;Artiste : &lt;/strong&gt;&quot;+this.id3[&quot;artist&quot;]+&quot;&lt;br /&gt;&quot;;
					}
					if(this.id3[&quot;album&quot;]) {
						chaine_tag += &quot;&lt;strong&gt;Album : &lt;/strong&gt;&quot;+this.id3[&quot;album&quot;]+&quot;&lt;br /&gt;&quot;;
					}
					if(this.id3[&quot;songname&quot;]) {
						chaine_tag += &quot;&lt;strong&gt;Titre : &lt;/strong&gt;&quot;+this.id3[&quot;songname&quot;];
					}
					document.getElementById(&quot;tagid3&quot;).innerHTML = chaine_tag; // On insère finalement la chaîne dans la page
				}
			});
		})(list[i]);
	}
}

function lire_current() { // Fonction de démarrage de la lecture
	soundManager.stopAll(); // On stoppe tous les sons (pour éviter le multi-shot
	playlist[current].setPosition(0); // On réinitialise la position du son courant
	playlist[current].setVolume(act_vol); // On applique le volume actuel
	playlist[current].play(); // On lance la lecture
	document.getElementById(&quot;play&quot;).src = &quot;images/pause.png&quot;; // Le bouton &quot;play&quot; devient &quot;pause&quot;
	document.getElementById(&quot;play&quot;).title = &quot;Pause&quot;; // On change le title également.
}
function bouton_play() { // Appui sur le bouton &quot;play&quot;
	if(playlist[current].playState) { // On teste si un titre est en cours de lecture/pause. Si oui
		b_play = document.getElementById(&quot;play&quot;); // On récupère le bouton &quot;play&quot;
		if(playlist[current].paused) { // S'il est en pause
			playlist[current].resume(); // On le relance
			b_play.src = &quot;images/pause.png&quot;; // Le bouton &quot;play&quot; devient &quot;pause&quot;
			b_play.title = &quot;Pause&quot;; // On change le title également
		} else { // S'il est en lecture
			playlist[current].pause(); // On le met en pause
			b_play.src = &quot;images/play.png&quot;; // Le bouton &quot;pause&quot; devient &quot;play&quot;
			b_play.title = &quot;Lecture&quot;; // On change le title également
		}
	} else { // Si le son est stoppé
		lire_current(); // On démarre la lecture
	}
}
function bouton_stop() { // Appui sur le bouton &quot;stop&quot;
	playlist[current].stop(); // On stoppe le son courant
	document.getElementById(&quot;play&quot;).src = &quot;images/play.png&quot;; // Le bouton &quot;pause&quot; devient &quot;play&quot;
	document.getElementById(&quot;play&quot;).title = &quot;Lecture&quot;; // On change le title également
	document.getElementById(&quot;barre&quot;).style.backgroundPosition = &quot;-420px 50%&quot;; // On réinitialise la position du background de la barre d'avancement
	document.getElementById(&quot;cpt&quot;).innerHTML = &quot;0:00 / 0:00&quot;; // On réinitialise le compteur de temps
	document.getElementById(&quot;chargement&quot;).style.backgroundPosition = &quot;-420px 50%&quot;; // On réinitialise la position du background de la barre de chargement
	document.getElementById(&quot;load&quot;).innerHTML = &quot;0 / 0&quot;; // On réinitialise le compteur de chargement
}
function bouton_previous() { // Appui sur le bouton &quot;précédent&quot;
	prev = true; // On &quot;actionne&quot; le booléen prev
	current--; // On recule d'un titre
	if(current&lt;0) { current = playlist.length - 1; } // Si on a trop reculé, on prend le dernier titre
	lire_current(); // On lance la lecture
	prev = false; // On &quot;désactionne&quot; le booléen
}
function bouton_next() { // Appui sur le bouton &quot;suivant&quot;
	next = true; // On &quot;actionne&quot; le booléen next
	current++; // On avance d'un titre
	if(current&gt;=playlist.length) { current = 0; } // Si on a trop avancé, on prend le premier titre
	lire_current(); // On lance la lecture
	next = false; // On &quot;désactionne&quot; le booléen
}
function bouton_rewind() { // Appui sur le bouton &quot;Retour arrière&quot;
	playlist[current].setPosition(playlist[current].position - 1000); // On recule d'une seconde
	timer = setTimeout(bouton_rewind,50); // On relance la fonction
}
function bouton_forward() { // Appui sur le bouton &quot;Avance rapide&quot;
	playlist[current].setPosition(playlist[current].position + 1000); // On avance d'une seconde
	timer = setTimeout(bouton_forward,50); // On relance la fonction
}
function bouton_loop() { // Appui sur le bouton &quot;Répéter&quot;
	var b_loop = document.getElementById(&quot;loop&quot;); // On récupère le bouton
	if(loop==&quot;one&quot;) { // Si il est sur &quot;Répéter un titre&quot;
		loop = &quot;all&quot;; // on passe à &quot;Répéter la playlist&quot;
		b_loop.src = &quot;images/all.png&quot;; // On change l'image du bouton et le title en fonction
		b_loop.title = &quot;Ne pas répéter&quot;;
	} else if(loop==&quot;all&quot;) { // S'il est sur &quot;Répéter la playlist&quot;
		loop = &quot;none&quot;; // On passe à &quot;Ne pas répéter&quot;
		b_loop.src = &quot;images/none.png&quot;; // Et on change l'image et le title
		b_loop.title = &quot;Répéter le titre&quot;;
	} else { // Et enfin s'il est sur &quot;Ne pas répéter&quot;
		loop = &quot;one&quot;; // On passe à &quot;Répéter un titre&quot;
		b_loop.src = &quot;images/one.png&quot;; // Et on change l'image et le title
		b_loop.title = &quot;Répéter la playlist&quot;;
	}
}
function bouton_toggleMute() { // Appui sur le bouton &quot;Muet&quot;
	var bouton_muet = document.getElementById(&quot;mute&quot;); // On récupère le bouton
	if(bouton_muet.alt == &quot;muet&quot;) { // S'il est en sonore
		soundManager.mute(); // On coupe le son
		bouton_muet.alt = &quot;son&quot;; // On change les attributs alt, title et src
		bouton_muet.title = &quot;Son&quot;;
		bouton_muet.src = &quot;images/mute.png&quot;;
	} else { // S'il est en muet
		soundManager.unmute(); // On remet le son
		bouton_muet.alt = &quot;muet&quot;; // On change les attributs alt, title et src
		bouton_muet.title = &quot;Muet&quot;;
		bouton_muet.src = &quot;images/sound.png&quot;;
	}
}
function bouton_volume(aug) { // Appui sur les boutons du volume
	if(aug) { // Si appui sur &quot;+&quot;
		if(act_vol&lt;100) { // Si on peut encore augmenter
		act_vol++; // On augmente
		timer = setTimeout(bouton_volume,50,true); // Et on relance la fonction
		}
	} else { // Si appui sur &quot;-&quot;
		if(act_vol&gt;0) { // Si on peut encore diminuer
		act_vol--; // On diminue
		timer = setTimeout(bouton_volume,50,false); // Et on relance la fonction
		}
	}
	playlist[current].setVolume(act_vol); // On applique le volume au titre courant
	var vol = document.getElementById(&quot;volume&quot;); // On récupère la barre de volume
	vol.style.backgroundPosition = -100+act_vol+&quot;px 50%&quot;; // On ajuste son background
	vol.title = &quot;Volume : &quot;+act_vol; // et son title
}
var v_clic = false; // Indicateur booléen du clic sur la barre de volume
var b_clic = false; // Indicateur booléen du clic sur la barre d'avancement
var v_x; // Variable de position absolue en x de la barre de volume
var b_x; // Variable de position absolue en x de la barre d'avancement
function clic(obj, event) { // Clic sur une des deux barres
	if (event.preventDefault){ // Code pour éviter que la souris embarque les images...
	event.preventDefault();
	}
	event.returnValue = false;
	if(obj==&quot;vol&quot;) { // Si on clique sur la barre de volume
		v_clic = true; // On active le booléen
		var vol = document.getElementById(&quot;volume&quot;); // On récupère la barre de volume
		v_x = coord(vol); // On calcule sa position absolue en x
		act_vol = event.clientX - v_x; // Une simple soustraction donne le volume
		playlist[current].setVolume(act_vol); // On applique le volume au titre courant
		vol.style.backgroundPosition = -100+act_vol+&quot;px 50%&quot;; // On ajuste son background
		vol.title = &quot;Volume : &quot;+act_vol; // et son title
	} else { // Si on clique sur la barre d'avancement
		b_clic = true; // On active le booléen
		var barre = document.getElementById(&quot;barre&quot;); // On récupère la barre d'avancement
		b_x = coord(barre); // On calcule sa position absolue en x
		playlist[current].setPosition(parseInt((event.clientX - b_x)/420 * playlist[current].duration,10)); // On change la position du titre en cours en fonction
	}
}
function move(obj, event) { // Cliquer-glisser sur une des deux barres
	if(obj==&quot;vol&quot; &amp;&amp; v_clic) { // Si on est sur la barre de volume
		act_vol = event.clientX - v_x; // On calcul le volume choisi
		playlist[current].setVolume(act_vol); // On applique le volume au titre courant
		var vol = document.getElementById(&quot;volume&quot;); // On récupère la barre de volume
		vol.style.backgroundPosition = -100+act_vol+&quot;px 50%&quot;; // On ajuste son background
		vol.title = &quot;Volume : &quot;+act_vol; // et son title
	} else if(obj==&quot;barre&quot; &amp;&amp; b_clic) { // Si on est sur la barre d'avancement
		playlist[current].setPosition(parseInt((event.clientX - b_x)/420 * playlist[current].duration,10)); // On change la position du titre en cours en fonction
	}
}
function coord(element) { // Fonction pour calculer la position absolue en x d'un élement
	var eX = 0; // Initialisation de la valeur
	do{
		eX += element.offsetLeft; // On ajoute l'offsetLeft
		element = element.offsetParent; // On remonte à l'objet parent
	} while( element &amp;&amp; element.style.position != 'absolute'); // Et on recommence
	return eX; // On renvoit la position absolue en x de l'élément
}
document.onmouseup = function() { // Quand on relâche le clic
	v_clic = false; // On &quot;désactionne&quot; les deux indicateurs de clic.
	b_clic = false;
}</code></pre></div><pre id="r-341062" data-claire-element-id="341062"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot;
	&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;
&lt;head&gt;
&lt;title&gt;Lecteur audio avec Sound Manager 2&lt;/title&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;debug.css&quot; /&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;player.css&quot; /&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;script/soundmanager2.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;player.js&quot;&gt;&lt;/script&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;div id=&quot;lecteur&quot;&gt;
&lt;div id=&quot;controls&quot;&gt;
&lt;!-- BOUTONS D'INTERACTION --&gt;

&lt;img id=&quot;play&quot; src=&quot;images/play.png&quot; alt=&quot;play&quot; title=&quot;Lecture&quot; onclick=&quot;bouton_play();&quot; /&gt;
&lt;img id=&quot;stop&quot; src=&quot;images/stop.png&quot; alt=&quot;stop&quot; title=&quot;Stop&quot; onclick=&quot;bouton_stop();&quot; /&gt;
&lt;img id=&quot;previous&quot; src=&quot;images/previous.png&quot; alt=&quot;précédent&quot; title=&quot;Titre précédent&quot; onclick=&quot;bouton_previous();&quot; /&gt;
&lt;!-- Pour rewind et forward, on utilise onmouseup pour cesser de répéter en boucle la fonction --&gt;
&lt;img id=&quot;rewind&quot; src=&quot;images/rewind.png&quot; alt=&quot;retour arrière&quot; title=&quot;Retour arrière&quot; onmousedown=&quot;bouton_rewind();&quot; onmouseup=&quot;if(timer) { clearTimeout(timer); }&quot; /&gt;
&lt;img id=&quot;forward&quot; src=&quot;images/forward.png&quot; alt=&quot;avance rapide&quot; title=&quot;Avance rapide&quot; onmousedown=&quot;bouton_forward();&quot; onmouseup=&quot;if(timer) { clearTimeout(timer); }&quot; /&gt;
&lt;img id=&quot;next&quot; src=&quot;images/next.png&quot; alt=&quot;suivant&quot; title=&quot;Titre suivant&quot; onclick=&quot;bouton_next();&quot; /&gt;
&lt;img id=&quot;loop&quot; src=&quot;images/none.png&quot; alt=&quot;répéter&quot; title=&quot;Répéter le titre&quot; onclick=&quot;bouton_loop();&quot; /&gt;
&lt;img id=&quot;mute&quot; src=&quot;images/sound.png&quot; alt=&quot;muet&quot; title=&quot;Muet&quot; onclick=&quot;bouton_toggleMute();&quot; style=&quot;margin-left:20px;&quot; /&gt;
&lt;!-- De même ici pour volume moins et volume plus --&gt;
&lt;img id=&quot;moins&quot; src=&quot;images/moins.png&quot; alt=&quot;moins&quot; title=&quot;Volume -&quot; onmousedown=&quot;bouton_volume(false);&quot; onmouseup=&quot;if(timer) { clearTimeout(timer); }&quot; /&gt;
&lt;!-- Pour la barre de volume, on détecte le clic avec onmousedown, et le déplacement avec onmousemove. --&gt;
&lt;img id=&quot;volume&quot; src=&quot;images/volume.png&quot; alt=&quot;volume&quot; title=&quot;100&quot; onmousedown=&quot;clic('vol', event);&quot; onmousemove=&quot;move('vol', event);&quot; /&gt;
&lt;img id=&quot;plus&quot; src=&quot;images/plus.png&quot; alt=&quot;plus&quot; title=&quot;Volume +&quot; onmousedown=&quot;bouton_volume(true);&quot; onmouseup=&quot;if(timer) { clearTimeout(timer); }&quot; /&gt;
&lt;/div&gt;
&lt;div id=&quot;avancement&quot;&gt;
&lt;!-- Pour la barre d'avancement, on détecte le clic avec onmousedown, et le déplacement avec onmousemove. --&gt;

&lt;div id=&quot;test&quot;&gt;&lt;img id=&quot;barre&quot; src=&quot;images/barre.png&quot; onmousedown=&quot;clic('barre', event);&quot; onmousemove=&quot;move('barre', event);&quot; /&gt;&lt;br /&gt;
&lt;img id=&quot;chargement&quot; src=&quot;images/none.png&quot; /&gt;
&lt;span id=&quot;load&quot; style=&quot;float:right;&quot;&gt;0 / 0&lt;/span&gt;
&lt;span id=&quot;cpt&quot;&gt;0:00 / 0:00&lt;/span&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&quot;tagid3&quot;&gt;&lt;/div&gt;

&lt;!-- PLAYLIST --&gt;
&lt;!-- C'est la playlist qui définit les sons à créer. Il suffit donc de la modifier pour changer de playlist ! :) --&gt;
&lt;div id=&quot;playlist&quot;&gt;
&lt;a href=&quot;musique/piste01.mp3&quot;&gt;Piste 01&lt;/a&gt;&lt;br /&gt;

&lt;a href=&quot;musique/piste02.mp3&quot;&gt;Piste 02&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste03.mp3&quot;&gt;Piste 03&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste04.mp3&quot;&gt;Piste 04&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste05.mp3&quot;&gt;Piste 05&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste06.mp3&quot;&gt;Piste 06&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste07.mp3&quot;&gt;Piste 07&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste08.mp3&quot;&gt;Piste 08&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste09.mp3&quot;&gt;Piste 09&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;musique/piste10.mp3&quot;&gt;Piste 10&lt;/a&gt;&lt;br /&gt;

&lt;a href=&quot;musique/piste11.mp3&quot;&gt;Piste 11&lt;/a&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><h3 id="r-fichier-player-css-1" data-claire-element-id="341064">Fichier player.css</h3><pre id="r-341063" data-claire-element-id="341063"><code data-claire-semantic="css">#lecteur {
width:450px;
float:left;
margin-bottom:20px;
}
#controls {
text-align:center;
}
#controls img {
cursor:pointer;
}
#controls #loop {
width:32px;
height:32px;
background-image:url(&quot;images/repeat.png&quot;);
background-position:50% 50%;
}
#controls #volume {
cursor:pointer;
background-image:url(&quot;images/arr_volume.png&quot;);
background-position:0 50%;
}
#avancement {
text-align:center;
position:relative;
}
#test {
text-align:left;
width:420px;
margin:auto;
}
#chargement {
width:420px;
height:10px;
background-image:url(&quot;images/arr_charg2.png&quot;);
background-position:-420px 50%;
background-repeat:no-repeat;
margin-top:10px;&quot;
}
#barre {
position:absolute;
margin-top:29px;
background-image:url(&quot;images/arr_barre2.png&quot;);
background-position:-420px 50%;
background-repeat:no-repeat;
height:12px;
width:420px;
cursor:pointer;
}
#tagid3 {
float:left;
margin-left:20px;
padding:5px;
width:225px;
}
#playlist {
width:350px;
float:left;
padding-left:20px;
border:1px solid black;
line-height:30px;
}
#playlist a {
color:black;
text-decoration:none;
}
#playlist a:hover {
text-decoration:underline;
}
#playlist img {
border:0;
vertical-align:middle;
}</code></pre><h3 id="r-fichier-player-js-1" data-claire-element-id="341066">Fichier player.js</h3><pre id="r-341065" data-claire-element-id="341065"><code data-claire-semantic="javascript">soundManager.url = 'swf/'; // Chemin du dossier &quot;swf&quot;
soundManager.debugMode = false; // DebugMode désactivé
soundManager.waitForWindowLoad = true; // Attendre le chargement de la page pour charger soundManager
soundManager.onerror = function() { // En cas d'erreur ...
	alert(&quot;SoundManager 2 a rencontré une erreur.&quot;); // ... on affiche un message à l'utilisateur
}
var playlist = []; // Tableau pour contenir la playlist
var current = 0; // Indice du son courant (dans playlist[]);
var act_vol = soundManager.defaultOptions.volume; // Variable pour le volume actuel, initialisée au volume par défaut de SoundManager
var loop = &quot;none&quot;; // Mode de répétition séléctionné
var next = false; // Indicateurs booléens du clic sur Previous et Next
var prev = false;

soundManager.onload = function() { // On attend tout d'abord le chargement...
	var barre = document.getElementById(&quot;barre&quot;); // On récupère la barre d'avancement,
	var chargement = document.getElementById(&quot;chargement&quot;); // la barre de chargement,
	var cpt = document.getElementById(&quot;cpt&quot;); // le compteur de secondes,
	var vol = document.getElementById(&quot;volume&quot;); // la barre de volume,
	var list = document.getElementById(&quot;playlist&quot;).getElementsByTagName(&quot;a&quot;); // et les différents liens &lt;a&gt; de la playlist (les titres).
	for (var i=0;i&lt;list.length;i++) { // On parcourt la liste
		list[i].rel = i; // On renseigne un indice arbitraire dans l'attribut rel de chaque &lt;a&gt;
		var sp = document.createElement(&quot;span&quot;); // On crée un élément span
		list[i].parentNode.insertBefore(sp,list[i]); // qu'on ajoute avant chaque &lt;a&gt; de la liste
		list[i].onclick = function() { // On crée une fonction onclick sur chaque lien :
			soundManager.stopAll(); // On stoppe tous les sons
			current = this.rel; // On mets en &quot;son courant&quot; celui cliqué (grâce à l'indice du rel)
			lire_current(); // On appelle la fonction lire_current() pour lancer la lecture
			return false; // On renvoie faux pour empêcher les liens de rediriger (ils ne servent qu'aux sans-js)
		};
		(function(titre) {
			playlist[i] = soundManager.createSound( // On crée un son pour chaque lien de la playlist
			{
				id : &quot;piste&quot;+i, // Id arbitraire : piste0, piste1, etc.
				url : list[i].href, // L'url de chaque son est le href de chaque lien
				whileloading : function() { // Pendant le chargement :
					chargement.style.backgroundPosition = -420+(this.bytesLoaded/this.bytesTotal * 420)+&quot;px 50%&quot;; // On ajuste le background de la barre de chargement
					if(this.bytesTotal&gt;= 1048576) { // Si taille totale &gt;= 1 Mo
						taille_totale = parseInt(this.bytesTotal/1048576*100)/100+&quot; Mo&quot;;
						taille_chargee = parseInt(this.bytesLoaded/1048576*100)/100+&quot; Mo&quot;;
					} else if(this.bytesTotal &gt;= 1024) { // Sinon si taille totale &gt;= 1 Ko
						taille_totale = parseInt(this.bytesTotal/1024*100)/100+&quot; Ko&quot;;
						taille_chargee = parseInt(this.bytesLoaded/1024*100)/100+&quot; Ko&quot;;
					} else { // Sinon si &lt; 1 Ko
						taille_totale = this.bytesTotal+&quot; o&quot;;
						taille_chargee = this.bytesLoaded+&quot; o&quot;;
					}
					document.getElementById(&quot;load&quot;).innerHTML = taille_chargee+&quot; / &quot;+taille_totale; // On insère dans le span de chargement.
				},
				whileplaying : function() { // Pendant la lecture :
					barre.style.backgroundPosition = -420+(this.position/this.duration * 420)+&quot;px 50%&quot;; // On ajuste le background de la barre d'avancement
					act_sec = parseInt(this.position/1000 % 60,10); // Calcul du nb de secondes écoulées
					if(act_sec&lt;10) { act_sec = &quot;0&quot;+act_sec; } // (Ajout d'un 0 si &lt;10)
					act_min = parseInt(this.position/1000/60,10); // Calcul du nb de minutes écoulées
					tot_sec = parseInt(this.duration/1000 % 60,10); // Calcul du nb de secondes total du son
					if(tot_sec&lt;10) { tot_sec = &quot;0&quot;+tot_sec; } // (Ajout d'un 0 si &lt;10)
					tot_min = parseInt(this.duration/1000/60,10); // Calcul du nb de minutes total du son
					cpt.innerHTML = act_min+&quot;:&quot;+act_sec+&quot; / &quot;+tot_min+&quot;:&quot;+tot_sec; // On affiche ces valeurs dans le div &quot;cpt&quot;
					vol.style.backgroundPosition = -100+act_vol+&quot;px 50%&quot;; // On ajuste le background de la barre de son, en fonction du son actuel
					vol.title = &quot;Volume : &quot;+act_vol; // On ajuste aussi le title du volume
				},
				onresume : // Quand on enlève &quot;pause&quot; :
					function() {
					titre.previousSibling.innerHTML = &quot;&lt;img src='images/played.png' alt='lecture' /&gt; &quot;; // On insère une image &quot;play&quot; dans le span créé
					},
				onplay : // Quand on fait &quot;play&quot; :
					function() {
					titre.previousSibling.innerHTML = &quot;&lt;img src='images/played.png' alt='lecture' /&gt; &quot;; // On insère une image &quot;play&quot; dans le span créé
					},
				onstop : // Quand on fait &quot;stop&quot; :
					function() {
					playlist[current].unload(); // On &quot;décharge&quot; le son, histoire de pas occuper trop de mémoire
					titre.previousSibling.innerHTML = &quot;&quot;; // On enlève l'image du span
					},
				onfinish : // A la fin d'un son
					function() {
					playlist[current].unload(); // On &quot;décharge&quot; le son, histoire de pas occuper trop de mémoire
					titre.previousSibling.innerHTML = &quot;&quot;; // On enlève l'image du span
					if(!prev &amp;&amp; !next) { // Si la fin du son n'est pas due à un clic sur Previous ou Next, on regarde le mode de répétition choisi
						if(loop==&quot;one&quot;) { // Si &quot;Répéter un titre&quot;
							lire_current(); // On (re)lance la lecture du son actuel
						} else if(loop==&quot;all&quot;) { // Si &quot;Répéter la playlist&quot;
							bouton_next(); // On appelle bouton_next() (On passe au titre suivante)
						} else { // Si &quot;Ne pas répéter&quot;
							if(current&lt;playlist.length-1) { // Si on n'est pas encore à la fin de la playlist
								bouton_next(); // On passe au titre suivant
							} else { // Sinon
								current = 0; // On réinitialise juste le titre courant.
							}
						}
					}
					},
				onpause : // Quand on fait &quot;pause&quot;
					function() {
					titre.previousSibling.innerHTML = &quot;&lt;img src='images/paused.png' alt='pause' /&gt; &quot;; // On insère une image &quot;pause&quot; dans le span créé
					},
				onid3 : function() { // A l'arrivée des Tag ID3
					var chaine_tag = &quot;&quot;; // On crée une chaîne vide
					if(this.id3[&quot;artist&quot;]) { // Et on y insère les différents tag en vérifiant leur existence au préalable.
						chaine_tag += &quot;&lt;strong&gt;Artiste : &lt;/strong&gt;&quot;+this.id3[&quot;artist&quot;]+&quot;&lt;br /&gt;&quot;;
					}
					if(this.id3[&quot;album&quot;]) {
						chaine_tag += &quot;&lt;strong&gt;Album : &lt;/strong&gt;&quot;+this.id3[&quot;album&quot;]+&quot;&lt;br /&gt;&quot;;
					}
					if(this.id3[&quot;songname&quot;]) {
						chaine_tag += &quot;&lt;strong&gt;Titre : &lt;/strong&gt;&quot;+this.id3[&quot;songname&quot;];
					}
					document.getElementById(&quot;tagid3&quot;).innerHTML = chaine_tag; // On insère finalement la chaîne dans la page
				}
			});
		})(list[i]);
	}
}

function lire_current() { // Fonction de démarrage de la lecture
	soundManager.stopAll(); // On stoppe tous les sons (pour éviter le multi-shot
	playlist[current].setPosition(0); // On réinitialise la position du son courant
	playlist[current].setVolume(act_vol); // On applique le volume actuel
	playlist[current].play(); // On lance la lecture
	document.getElementById(&quot;play&quot;).src = &quot;images/pause.png&quot;; // Le bouton &quot;play&quot; devient &quot;pause&quot;
	document.getElementById(&quot;play&quot;).title = &quot;Pause&quot;; // On change le title également.
}
function bouton_play() { // Appui sur le bouton &quot;play&quot;
	if(playlist[current].playState) { // On teste si un titre est en cours de lecture/pause. Si oui
		b_play = document.getElementById(&quot;play&quot;); // On récupère le bouton &quot;play&quot;
		if(playlist[current].paused) { // S'il est en pause
			playlist[current].resume(); // On le relance
			b_play.src = &quot;images/pause.png&quot;; // Le bouton &quot;play&quot; devient &quot;pause&quot;
			b_play.title = &quot;Pause&quot;; // On change le title également
		} else { // S'il est en lecture
			playlist[current].pause(); // On le met en pause
			b_play.src = &quot;images/play.png&quot;; // Le bouton &quot;pause&quot; devient &quot;play&quot;
			b_play.title = &quot;Lecture&quot;; // On change le title également
		}
	} else { // Si le son est stoppé
		lire_current(); // On démarre la lecture
	}
}
function bouton_stop() { // Appui sur le bouton &quot;stop&quot;
	playlist[current].stop(); // On stoppe le son courant
	document.getElementById(&quot;play&quot;).src = &quot;images/play.png&quot;; // Le bouton &quot;pause&quot; devient &quot;play&quot;
	document.getElementById(&quot;play&quot;).title = &quot;Lecture&quot;; // On change le title également
	document.getElementById(&quot;barre&quot;).style.backgroundPosition = &quot;-420px 50%&quot;; // On réinitialise la position du background de la barre d'avancement
	document.getElementById(&quot;cpt&quot;).innerHTML = &quot;0:00 / 0:00&quot;; // On réinitialise le compteur de temps
	document.getElementById(&quot;chargement&quot;).style.backgroundPosition = &quot;-420px 50%&quot;; // On réinitialise la position du background de la barre de chargement
	document.getElementById(&quot;load&quot;).innerHTML = &quot;0 / 0&quot;; // On réinitialise le compteur de chargement
}
function bouton_previous() { // Appui sur le bouton &quot;précédent&quot;
	prev = true; // On &quot;actionne&quot; le booléen prev
	current--; // On recule d'un titre
	if(current&lt;0) { current = playlist.length - 1; } // Si on a trop reculé, on prend le dernier titre
	lire_current(); // On lance la lecture
	prev = false; // On &quot;désactionne&quot; le booléen
}
function bouton_next() { // Appui sur le bouton &quot;suivant&quot;
	next = true; // On &quot;actionne&quot; le booléen next
	current++; // On avance d'un titre
	if(current&gt;=playlist.length) { current = 0; } // Si on a trop avancé, on prend le premier titre
	lire_current(); // On lance la lecture
	next = false; // On &quot;désactionne&quot; le booléen
}
function bouton_rewind() { // Appui sur le bouton &quot;Retour arrière&quot;
	playlist[current].setPosition(playlist[current].position - 1000); // On recule d'une seconde
	timer = setTimeout(bouton_rewind,50); // On relance la fonction
}
function bouton_forward() { // Appui sur le bouton &quot;Avance rapide&quot;
	playlist[current].setPosition(playlist[current].position + 1000); // On avance d'une seconde
	timer = setTimeout(bouton_forward,50); // On relance la fonction
}
function bouton_loop() { // Appui sur le bouton &quot;Répéter&quot;
	var b_loop = document.getElementById(&quot;loop&quot;); // On récupère le bouton
	if(loop==&quot;one&quot;) { // Si il est sur &quot;Répéter un titre&quot;
		loop = &quot;all&quot;; // on passe à &quot;Répéter la playlist&quot;
		b_loop.src = &quot;images/all.png&quot;; // On change l'image du bouton et le title en fonction
		b_loop.title = &quot;Ne pas répéter&quot;;
	} else if(loop==&quot;all&quot;) { // S'il est sur &quot;Répéter la playlist&quot;
		loop = &quot;none&quot;; // On passe à &quot;Ne pas répéter&quot;
		b_loop.src = &quot;images/none.png&quot;; // Et on change l'image et le title
		b_loop.title = &quot;Répéter le titre&quot;;
	} else { // Et enfin s'il est sur &quot;Ne pas répéter&quot;
		loop = &quot;one&quot;; // On passe à &quot;Répéter un titre&quot;
		b_loop.src = &quot;images/one.png&quot;; // Et on change l'image et le title
		b_loop.title = &quot;Répéter la playlist&quot;;
	}
}
function bouton_toggleMute() { // Appui sur le bouton &quot;Muet&quot;
	var bouton_muet = document.getElementById(&quot;mute&quot;); // On récupère le bouton
	if(bouton_muet.alt == &quot;muet&quot;) { // S'il est en sonore
		soundManager.mute(); // On coupe le son
		bouton_muet.alt = &quot;son&quot;; // On change les attributs alt, title et src
		bouton_muet.title = &quot;Son&quot;;
		bouton_muet.src = &quot;images/mute.png&quot;;
	} else { // S'il est en muet
		soundManager.unmute(); // On remet le son
		bouton_muet.alt = &quot;muet&quot;; // On change les attributs alt, title et src
		bouton_muet.title = &quot;Muet&quot;;
		bouton_muet.src = &quot;images/sound.png&quot;;
	}
}
function bouton_volume(aug) { // Appui sur les boutons du volume
	if(aug) { // Si appui sur &quot;+&quot;
		if(act_vol&lt;100) { // Si on peut encore augmenter
		act_vol++; // On augmente
		timer = setTimeout(bouton_volume,50,true); // Et on relance la fonction
		}
	} else { // Si appui sur &quot;-&quot;
		if(act_vol&gt;0) { // Si on peut encore diminuer
		act_vol--; // On diminue
		timer = setTimeout(bouton_volume,50,false); // Et on relance la fonction
		}
	}
	playlist[current].setVolume(act_vol); // On applique le volume au titre courant
	var vol = document.getElementById(&quot;volume&quot;); // On récupère la barre de volume
	vol.style.backgroundPosition = -100+act_vol+&quot;px 50%&quot;; // On ajuste son background
	vol.title = &quot;Volume : &quot;+act_vol; // et son title
}
var v_clic = false; // Indicateur booléen du clic sur la barre de volume
var b_clic = false; // Indicateur booléen du clic sur la barre d'avancement
var v_x; // Variable de position absolue en x de la barre de volume
var b_x; // Variable de position absolue en x de la barre d'avancement
function clic(obj, event) { // Clic sur une des deux barres
	if (event.preventDefault){ // Code pour éviter que la souris embarque les images...
	event.preventDefault();
	}
	event.returnValue = false;
	if(obj==&quot;vol&quot;) { // Si on clique sur la barre de volume
		v_clic = true; // On active le booléen
		var vol = document.getElementById(&quot;volume&quot;); // On récupère la barre de volume
		v_x = coord(vol); // On calcule sa position absolue en x
		act_vol = event.clientX - v_x; // Une simple soustraction donne le volume
		playlist[current].setVolume(act_vol); // On applique le volume au titre courant
		vol.style.backgroundPosition = -100+act_vol+&quot;px 50%&quot;; // On ajuste son background
		vol.title = &quot;Volume : &quot;+act_vol; // et son title
	} else { // Si on clique sur la barre d'avancement
		b_clic = true; // On active le booléen
		var barre = document.getElementById(&quot;barre&quot;); // On récupère la barre d'avancement
		b_x = coord(barre); // On calcule sa position absolue en x
		playlist[current].setPosition(parseInt((event.clientX - b_x)/420 * playlist[current].duration,10)); // On change la position du titre en cours en fonction
	}
}
function move(obj, event) { // Cliquer-glisser sur une des deux barres
	if(obj==&quot;vol&quot; &amp;&amp; v_clic) { // Si on est sur la barre de volume
		act_vol = event.clientX - v_x; // On calcul le volume choisi
		playlist[current].setVolume(act_vol); // On applique le volume au titre courant
		var vol = document.getElementById(&quot;volume&quot;); // On récupère la barre de volume
		vol.style.backgroundPosition = -100+act_vol+&quot;px 50%&quot;; // On ajuste son background
		vol.title = &quot;Volume : &quot;+act_vol; // et son title
	} else if(obj==&quot;barre&quot; &amp;&amp; b_clic) { // Si on est sur la barre d'avancement
		playlist[current].setPosition(parseInt((event.clientX - b_x)/420 * playlist[current].duration,10)); // On change la position du titre en cours en fonction
	}
}
function coord(element) { // Fonction pour calculer la position absolue en x d'un élement
	var eX = 0; // Initialisation de la valeur
	do{
		eX += element.offsetLeft; // On ajoute l'offsetLeft
		element = element.offsetParent; // On remonte à l'objet parent
	} while( element &amp;&amp; element.style.position != 'absolute'); // Et on recommence
	return eX; // On renvoit la position absolue en x de l'élément
}
document.onmouseup = function() { // Quand on relâche le clic
	v_clic = false; // On &quot;désactionne&quot; les deux indicateurs de clic.
	b_clic = false;
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2">Du son dans vos pages web avec SoundManager 2 !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/la-base-pour-bien-demarrer">
La base pour bien démarrer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/premiers-sons">
Premiers sons
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/l-objet-smsound-en-detail">
L&#039;objet SMSound en détail
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/soundmanager-en-detail">
SoundManager en détail
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/tp-un-lecteur-audio-1">
TP : Un lecteur audio
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/du-son-dans-vos-pages-web-avec-soundmanager-2/soundmanager-en-detail">
<span class="arrow"></span>
<span class="next">SoundManager en détail</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/du-son-dans-vos-pages-web-avec-soundmanager-2.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:45:01 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/du-son-dans-vos-pages-web-avec-soundmanager-2.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:34:00 GMT -->
</html>