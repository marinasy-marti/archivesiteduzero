<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/developpez-vos-applications-3d-avec-opengl-3-3.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 03:48:38 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/developpez-vos-applications-3d-avec-opengl-3-3.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:45:32 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Développez vos applications 3D avec OpenGL 3.3</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Développez vos applications 3D avec OpenGL 3.3</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Dveloppezvosapplications3DavecOpenGL3.3">Développez vos applications 3D avec OpenGL 3.3</a><br/><a href="#Introduction">Introduction</a><br/><a href="#Qu039est-cequ039OpenGL">Qu&#039;est-ce qu&#039;OpenGL ?</a><br/><a href="#Installerlesdiffrentsoutils">Installer les différents outils</a><br/><a href="#DiffrencesentreOpenGL2.1et3.3">Différences entre OpenGL 2.1 et 3.3</a><br/><a href="#CrerunefentreaveclaSDL2.0">Créer une fenêtre avec la SDL 2.0</a><br/><a href="#Prparationdel039IDE">Préparation de l&#039;IDE</a><br/><a href="#Premierprogramme">Premier programme</a><br/><a href="#LesparamtresOpenGL">Les paramètres OpenGL</a><br/><a href="#Premieraffichage">Premier affichage</a><br/><a href="#Lefonctionnementd039OpenGL">Le fonctionnement d&#039;OpenGL</a><br/><a href="#Afficheruntriangle">Afficher un triangle</a><br/><a href="#LaclasseSceneOpenGL">La classe SceneOpenGL</a><br/><a href="#Introductionauxshaders">Introduction aux shaders</a><br/><a href="#Qu039est-cequ039unShader">Qu&#039;est-ce qu&#039;un Shader ?</a><br/><a href="#Utilisationdesshaders">Utilisation des shaders</a><br/><a href="#Unpeudecouleurs">Un peu de couleurs</a><br/><a href="#Lesmatrices">Les matrices</a><br/><a href="#Introduction">Introduction</a><br/><a href="#Partiethorique">Partie théorique</a><br/><a href="#Transformationsauniveaumatricielle">Transformations au niveau matricielle</a><br/><a href="#Transformationsauniveaugomtrique">Transformations au niveau géométrique</a><br/><a href="#LatroisimedimensionPartie1_2">La troisième dimension (Partie 1/2)</a><br/><a href="#Lamatricedeprojection">La matrice de projection</a><br/><a href="#Utilisationdelaprojection">Utilisation de la projection</a><br/><a href="#Exemplesdetransformations">Exemples de transformations</a><br/><a href="#LatroisimedimensionPartie2_2">La troisième dimension (Partie 2/2)</a><br/><a href="#Lacamra">La caméra</a><br/><a href="#Affichaged039unCube">Affichage d&#039;un Cube</a><br/><a href="#LaclasseCube">La classe Cube</a><br/><a href="#LeFrameRate">Le Frame Rate</a><br/><a href="#PushetPop">Push et Pop</a><br/><a href="#Laproblmatique">La problématique</a><br/><a href="#SauvegardeetRestauration">Sauvegarde et Restauration</a><br/><a href="#LesvnementsaveclaSDL2.0">Les évènements avec la SDL 2.0</a><br/><a href="#DiffrencesentrelaSDL1.2et2.0">Différences entre la SDL 1.2 et 2.0</a><br/><a href="#LaclasseInput">La classe Input</a><br/><a href="#Lesmthodesindispensables">Les méthodes indispensables</a><br/><a href="#Lestextures">Les textures</a><br/><a href="#Introduction">Introduction</a><br/><a href="#Chargement">Chargement</a><br/><a href="#Plaquage">Plaquage</a><br/><a href="#Amliorations">Améliorations</a><br/><a href="#Allerplusloin">Aller plus loin</a><br/><a href="#Lacamra">La caméra</a><br/><a href="#Fonctionnement">Fonctionnement</a><br/><a href="#Implmentationdelacamra">Implémentation de la caméra</a><br/><a href="#Fixerunpoint">Fixer un point</a><br/><a href="#Amliorations">Améliorations</a><br/><a href="#TPUnereliqueretrouve">TP : Une relique retrouvée</a><br/><a href="#Lesconsignes">Les consignes</a><br/><a href="#Correction">Correction</a><br/><a href="#LesVertexBufferObjects">Les Vertex Buffer Objects</a><br/><a href="#C039estquoiunVBO">C&#039;est quoi un VBO ?</a><br/><a href="#Cration">Création</a><br/><a href="#Utilisation">Utilisation</a><br/><a href="#Misejourdesdonnes">Mise à jour des données</a><br/><a href="#Unautreexemple">Un autre exemple</a><br/><a href="#LesVertexArrayObjects">Les Vertex Array Objects</a><br/><a href="#EncoreunobjetOpenGL">Encore un objet OpenGL ?</a><br/><a href="#CrationetUtilisation">Création et Utilisation</a><br/><a href="#Unautreexemple">Un autre exemple</a><br/><a href="#OpenGL3.3etMacOSX">OpenGL 3.3 et Mac OS X</a><br/><a href="#Lacompilationdeshaders">La compilation de shaders</a><br/><a href="#Piqrederappel">Piqûre de rappel</a><br/><a href="#Compilationdessources">Compilation des sources</a><br/><a href="#Crationduprogramme">Création du programme</a><br/><a href="#Utilisationetamliorations">Utilisation et améliorations</a><br/><a href="#OpenGLShadingLanguage">OpenGL Shading Language</a><br/><a href="#Unpeud039histoire">Un peu d&#039;histoire</a><br/><a href="#Lesvariables">Les variables</a><br/><a href="#Lesstructuresdecontrle">Les structures de contrôle</a><br/><a href="#Fonctionsprdfinies">Fonctions prédéfinies</a><br/><a href="#LesshadersdmystifisPartie1_2">Les shaders démystifiés (Partie 1/2)</a><br/><a href="#Prparation">Préparation</a><br/><a href="#Premiershader">Premier shader</a><br/><a href="#Gestiondelacouleur">Gestion de la couleur</a><br/><a href="#LesshadersdmystifisPartie2_2">Les shaders démystifiés (Partie 2/2)</a><br/><a href="#Lesvariablesuniform">Les variables uniform</a><br/><a href="#Gestiondela3D">Gestion de la 3D</a><br/><a href="#Gestiondestextures">Gestion des textures</a><br/><a href="#Bonnespratiques">Bonnes pratiques</a><br/><a href="#LesFrameBufferObjects">Les Frame Buffer Objects</a><br/><a href="#Qu039est-cequ039unFBO">Qu&#039;est-ce qu&#039;un FBO ?</a><br/><a href="#LeColorBuffer">Le Color Buffer</a><br/><a href="#LesRenderBuffers">Les Render Buffers</a><br/><a href="#LeFrameBuffer">Le Frame Buffer</a><br/><a href="#Utilisation">Utilisation</a><br/><a href="#Amliorationssimples">Améliorations simples</a><br/><a href="#GrerplusieursColorBuffers">Gérer plusieurs Color Buffers</a><br/></div>
<a name="Dveloppezvosapplications3DavecOpenGL3.3"></a><h2>Développez vos applications 3D avec OpenGL 3.3</h2><div class="content" role="article">
<p id="r-960282" data-claire-element-id="960282">Salut à tous les Zéros, :magicien:</p><p id="r-960283" data-claire-element-id="960283">Vous souhaitez réaliser un <strong>jeu-vidéo</strong>, mais vous ne savez pas par où commencer ? Eh bien bonne nouvelle, vous êtes au bon endroit. Nous allons apprendre à utiliser une librairie graphique puissante : <strong>OpenGL</strong> (version 3.3). Nous découvrirons ensemble les bases essentielles de la programmation 3D qui pourront vous servir plus tard dans un projet de jeu <em><strong>multi-plateforme</strong></em>.</p><p id="r-960284" data-claire-element-id="960284">Sachez qu'avant d'aller plus loin, il vous faut un PC soit sous <strong>Windows</strong> soit sous une distribution <strong>UNIX/Linux</strong>. Pour les utilisateurs de Mac, c'est un peu spécial, mais pour continuer il vous faudra au moins avoir le système d'exploitation <strong>OS X Lion (10.7)</strong> d'installé. Si vous possédez un de ces trois OS, il vous faudra aussi une carte graphique compatible avec l'API OpenGL 3.3. Les plus anciennes cartes compatibles sont les GeForce de la série 8000 chez <strong>NVidia </strong>et les Radeon HD chez <strong>ATI</strong>. Si vous possédez une carte inférieure à celles-ci, vous pouvez toujours suivre le tutoriel de Kayl sur OpenGL 2.1 ici :</p><ul id="r-960287" data-claire-element-id="960287"><li id="r-960286" data-claire-element-id="960286"><p id="r-960285" data-claire-element-id="960285"><a href="http://www.siteduzero.com/tutoriel-3-5014-creez-des-programmes-en-3d-avec-opengl.html">Tutoriel sur OpenGL 2.1</a></p></li></ul><aside id="r-960289" data-claire-element-id="960289" data-claire-semantic="information"><p id="r-960288" data-claire-element-id="960288">Pour suivre ce tutoriel vous devez connaitre le langage <a href="http://www.siteduzero.com/tutoriel-3-11406-programmez-avec-le-langage-c.html"><strong>C++</strong></a> (sauf la partie <strong>Qt</strong>). La lecture du cours sur la <a href="http://www.siteduzero.com/tutoriel-3-14189-apprenez-a-programmer-en-c.html#part_14186">SDL</a> (jusqu'à la gestion des évènements) n'est pas obligatoire mais conseillée.</p></aside><p id="r-960290" data-claire-element-id="960290">Un grand merci à <a href="http://www.siteduzero.com/membres-294-1084.html">Coyote </a> pour ses corrections qui ne doit pas s'ennuyer chaque fois que je lui envoie un énorme pavé à lire. :lol:</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Introduction"></a><h2>Introduction</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
<span class="next">Qu&#039;est-ce qu&#039;OpenGL ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-960294" data-claire-element-id="960294">Dans ce chapitre introductif, je vais vous parler rapidement d'OpenGL, de ses atouts et de l'installation des différents outils que nous utiliserons tout au long de ce tutoriel.</p>
</div><a name="Qu039est-cequ039OpenGL"></a><h2>Qu&#039;est-ce qu&#039;OpenGL ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">
<span class="arrow"></span>
<span class="next">Introduction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
<span class="next">Installer les différents outils</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-960295" data-claire-element-id="960295"><strong>OpenGL</strong> est une librairie exploitant la <strong>carte graphique</strong> d'un ordinateur permettant ainsi aux développeurs de programmer des applications 2D et 3D. Cela permet en autres de développer des jeux-vidéo. L'avantage principal d'OpenGL est qu'il est <strong>multi-plateforme</strong>, c'est-à-dire qu'un programme codé avec OpenGL sera compatible avec Windows, Linux et Mac, sous réserve que la gestion de la fenêtre et des inputs soient également multi-plateforme (comme la SDL ;) ). Nous utiliserons une version récente d'OpenGL qui est la version 3.3 (sortie le 11 mars 2010). Cependant, nous n'utiliserons que la 3.1 pour la première partie du tuto, vous verrez pourquoi au fur et à mesure.</p><p id="r-960296" data-claire-element-id="960296">Actuellement, deux API existent pour exploiter notre matériel graphique : DirectX (uniquement utilisable sous Windows) et OpenGL (multi-plateforme). Vous l'aurez compris, OpenGL est dans un sens plus intéressant du fait de sa portabilité.</p><figure id="r-960298" data-claire-element-id="960299"><img id="r-960297" data-claire-element-id="960297" src="medias/uploads.siteduzero.com_files_282001_283000_282493.jpg" alt="Image utilisateur"/></figure><p id="r-960300" data-claire-element-id="960300">(Screenshot issu du jeu &quot;Minecraft&quot; proposant un affichage OpenGL)</p><p id="r-960301" data-claire-element-id="960301">Un des autres avantages d'OpenGL est que son utilisation est totalement gratuite, vous pouvez très bien coder des programmes gratuits voire commerciaux sans rendre de compte à personne. Vous pouvez aussi fournir votre code source pour en faire profiter la communauté ;) .</p><p id="r-960302" data-claire-element-id="960302">En plus d'être gratuite, cette librairie met à disposition son propre code source. Chacun d'entre nous peut aller voir le code source d'OpenGL librement; et c'est d'ailleurs ce que nous allons faire pour comprendre le fonctionnement de certaines fonctions ^^ .</p><p id="r-960303" data-claire-element-id="960303">Dans l'introduction du tutoriel, je vous ai parlé du langage C++. Ce langage de programmation est le langage le plus utilisé dans le monde du jeu vidéo et c'est pour cette raison que nous allons l'utiliser.</p><aside id="r-960305" data-claire-element-id="960305" data-claire-semantic="information"><p id="r-960304" data-claire-element-id="960304">La version la plus récente d'OpenGL est la version 4.x. Mais il n'y a que les nouvelles cartes graphiques qui peuvent en profiter, donc inutilisable pour la plupart d'entre nous :( . De plus, nous devrions en théorie être capable d'utiliser la version 3.3 mais à partir de la version 3.2, l'apprentissage de l'API se complexifie un peu. Cependant nous passerons à la version 3.3 dans le futur. ;)</p></aside><p id="r-960306" data-claire-element-id="960306">Le but de ce tutoriel est de vous apprendre les bases de la programmation d'un jeu vidéo. Et qui dit jeu vidéo, dit aussi ... <strong>mathématiques </strong>! Alors oui je comprends que certains maudissent les maths au plus haut point à cause des mauvaises notes à l'école ou de son incompréhensible logique :colere2: . Mais si vous souhaitez vraiment développer un jeu vous ne passerez pas à coté.</p><p id="r-960307" data-claire-element-id="960307">N'ayez cependant pas peur des maths, il n'y a rien de compliqué dans ce que nous allons voir. Il suffit d'apprendre par cœur. Et si vous avez un trou de mémoire, vous pourrez toujours revenir voir les formules sur le site du zéro. Pas de contrôle non plus, donc pas de pression. La plupart des notions sont déjà expliquées dans les tutos du SdZ. Nous aborderons pas mal de domaines comme les vecteurs, les matrices, les quaternions, la trigonométrie, ... Que du bon en somme !</p><p id="r-960308" data-claire-element-id="960308">Bien, j'espère que la pilule est passée. :p</p><div id="r-960310" data-claire-element-id="960310" data-claire-semantic="question"><p id="r-960309" data-claire-element-id="960309">Que faut-il télécharger ?</p></div><p id="r-960311" data-claire-element-id="960311">Ah bonne question. Tout d'abord, comme dit dans l'introduction, il vous faut une carte graphique compatible avec OpenGL 3.x, soit au minimum les GeForce 8000 chez <strong>NVidia </strong>et les Radeon HD chez <strong>ATI</strong>. Ensuite, il faut mettre à jour vos drivers pour être sûr de ne pas avoir de problèmes plus tard.</p><p id="r-960312" data-claire-element-id="960312">Deuxièmement, il vous faut la librairie SDL installée. M@teo explique comment installer cette librairie dans son tuto, cependant la version donnée est <strong>incompatible </strong>avec la version d'OpenGL que nous allons utiliser. Il faudra donc passer par une autre version.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">
<span class="arrow"></span>
<span class="next">Introduction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
<span class="next">Installer les différents outils</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Installerlesdiffrentsoutils"></a><h2>Installer les différents outils</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;OpenGL ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
<span class="next">Différences entre OpenGL 2.1 et 3.3</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<figure id="r-960315" data-claire-element-id="960316"><img id="r-960314" data-claire-element-id="960314" src="medias/uploads.siteduzero.com_files_282001_283000_282494.png" alt="Image utilisateur"/></figure><p id="r-960317" data-claire-element-id="960317">Bien, passons à l'installation :) et commençons par la SDL :</p><p id="r-960318" data-claire-element-id="960318">Pourquoi a-t-on besoin de la SDL me direz-vous ?</p><p id="r-960319" data-claire-element-id="960319">La raison est simple : OpenGL a besoin d'un contexte d'exécution dans lequel travailler, il faut d'abord créer ce contexte avant de pouvoir créer notre monde 3D. De plus, OpenGL ne sait pas gérer les inputs (clavier, souris, ...), il nous faut donc une librairie capable de savoir ce que fait l'utilisateur. Heureusement pour nous, la librairie SDL (que vous devez déjà connaitre ;) ) sait créer un contexte OpenGL et gérer les évènements. En combinant la SDL et OpenGL nous nous retrouvons avec un monde 3D interactif.</p><p id="r-960320" data-claire-element-id="960320">Il y a d'autres librairies capables de remplir ce rôle mais l'avantage de la SDL est qu'elle est, elle-aussi, multi-plateformes. Les programmes codés avec ces deux librairies fonctionneront aussi bien sous Linux que sous Windows (ainsi que toutes les plates-formes gérant les deux librairies).</p><p id="r-960321" data-claire-element-id="960321">Actuellement, la version la plus stable de la SDL est la version 1.2.x mais depuis quelques temps la compatibilité de la SDL tend à s'étendre sur toutes les plateformes : sur iPhone, Androïd, et même sur PS3 ! Cette nouvelle version de la SDL est pour le moment la version 2.0. Elle est encore en développement et n'est pas stable à 100% mais elle le sera dans l'avenir. D'ailleurs, elle n'est pas disponible officiellement, notre principal problème va être de devoir la compiler par nous-même afin de pouvoir l'utiliser. ;)</p><div id="r-960323" data-claire-element-id="960323" data-claire-semantic="question"><p id="r-960322" data-claire-element-id="960322">Hein ?! Compiler la SDL ! Ça va pas, je sais pas faire ça moi !</p></div><p id="r-960324" data-claire-element-id="960324">Ne vous inquiétez pas ça va être très facile, les développeurs de la SDL sont intelligents, il nous suffit d'exécuter quelques commandes dans le terminal et hop on a la librairie compilée. ;)</p><p id="r-960325" data-claire-element-id="960325">Mais avant cela pour les utilisateurs de <strong>Windows</strong> : vérifiez bien que les drivers de votre carte graphique sont à jour. Pour le reste, je vais vous fournir directement les fichiers compilés à inclure dans le répertoire de votre IDE, pourvu qu'il soit équipé du <strong>compilateur MinGW</strong>. Pour les utilisateurs de <strong>Visual C++</strong>, vous devrez compiler la librairie SDL et télécharger la librairie GLEW.</p><p id="r-960326" data-claire-element-id="960326">Pour les utilisateurs de <strong>Linux</strong>, vérifiez également que les drivers de votre carte graphique (<em>Pilotes Propriétaires</em>) sont à jour.</p><p id="r-960327" data-claire-element-id="960327">Pour Mac OS X, ça va être un peu spécial. Dans un premier temps, il vous faut être obligatoirement sous <strong>OS X 10.7 Lion</strong> ou <strong>plus</strong>. Cependant, pour utiliser OpenGL chez vous il faudra utiliser des notions assez complexes que l'on ne verra que dans la deuxième partie du tuto. Je vous conseille donc d'utiliser une version libre de Linux (comme Ubuntu) ou Windows si vous avez bootcamp pour suivre ce début de tutoriel. Un aparté est prévu pour vous quand nous aurons appris tout ce qui est nécessaire pour coder sous Mac.</p><p id="r-960328" data-claire-element-id="960328">Pour en revenir à Windows, si vous êtes utilisateur de Visual C++ vous devriez compiler la librairie vous-même, je vous donne le lien pour que le faisiez sans problème. Vous devrez aussi télécharger la librairie GLEW.</p><p id="r-960329" data-claire-element-id="960329"><strong>Télécharger : </strong><a href="https://dl.dropboxusercontent.com/s/luhb1nzjcam4nnd/SDL-2.0 - Windows MinGW.zip?token_hash=AAGpPncI1hQ6bgFa0OaW-_j-NXHZwj0xvqAEDxiYdW1Org&amp;dl=1">Librairie SDL 2.0 + GLEW + GLM - Pour Windows MinGW</a></p><p id="r-960330" data-claire-element-id="960330"><strong>Télécharger : </strong><a href="https://dl.dropboxusercontent.com/s/jfqgdqkxk5taxh5/Code Source SDL-2.0 + GL3 + GLM.zip?token_hash=AAH2mHbz12sJ4VoIpvDxa86DQ7oKbPhnty9DtWZejRHg7g&amp;dl=1">Code Source SDL 2.0 + GLM - Pour UNIX/Linux et Visual C++</a></p><p id="r-960331" data-claire-element-id="960331"><strong>Télécharger : </strong><a href="https://sourceforge.net/projects/glew/files/glew/1.5.7/glew-1.5.7.zip/download">Code Source GLEW - Pour Visual C++</a></p><p id="r-960332" data-claire-element-id="960332"><strong>Télécharger : </strong><a href="https://dl.dropboxusercontent.com/s/t716ptzb41wlrgq/OpenGL Mathematics.zip?token_hash=AAHoSq2pFxh26VJ0LqemCcCQoW4nMKWfCB6eF0EFkptPYw&amp;dl=1">Code Source GLM - Pour Visual C++</a></p><p id="r-960333" data-claire-element-id="960333">Pour <strong>MinGW</strong> sous Windows : dézippez l'archive et placez le dossier &quot;<strong>SDL-2.0</strong>&quot; dans le répertoire de <strong>MinGW</strong>. Si vous utilisez CodeBlocks, ce répertoire se trouve probablement dans <em>C:\Program Files (x86)\CodeBlocks\MinGW</em>. Attention cependant, placez bien le dossier &quot;<strong>SDL-2.0</strong>&quot; et pas ceux qui se trouvent à l'intérieur. Les dossiers &quot;<strong>dll</strong>&quot;, &quot;<strong>bin</strong>&quot;, &quot;<strong>include</strong>&quot; et &quot;<strong>lib</strong>&quot; doivent rester à l'intérieur.</p><p id="r-960334" data-claire-element-id="960334">Pour les linuxiens, téléchargez l'archive contenant le code source de la SDL et dézippez son contenu dans votre home (Exemple : /home/Boouh). Ensuite, ouvrez votre terminal et exécutez les commandes suivantes. Elle vont vous permettre de compiler puis d'installer la SDL :</p><pre id="r-960335" data-claire-element-id="960335"><code data-claire-semantic="console">sudo apt-get install libgl1-mesa-dev build-essential


cd
cd SDL-2.0/SDL-2.0.0-6713/


chmod +x configure
sudo ./configure
make
sudo make install


sudo ln -s /usr/local/bin/sdl2-config /usr/bin/sdl2-config
cd ..
sudo cp -r GL3/ /usr/local/include/
sudo cp -r glm/ /usr/local/include/
sudo chmod -R 715 /usr/local/include/GL3/</code></pre><p id="r-960336" data-claire-element-id="960336">Grâce à ces commandes, vous avez maintenant la librairie SDL 2.0 installée sur votre ordinateur. ;)</p><h2 id="r-differences-entre-windows-et-linux" data-claire-element-id="960340">Différences entre Windows et Linux</h2><p id="r-960337" data-claire-element-id="960337">Dans l'archive pour Windows, j'ai inclus les fichiers compilés de la librairie GLEW. Pour ceux qui ne connaissent pas, GLEW est une librairie permettant de charger des extensions pour OpenGL (un peu comme les extensions des jeux <strong>Sims</strong>). Cette librairie est à l'origine utilisée sur Windows ET sur Linux. Mais avec la version 3.0 d'OpenGL, une grande partie des extensions de la version précédente sont devenues officielles et sont donc déjà inclues avec la version de &quot;base&quot;.</p><p id="r-960338" data-claire-element-id="960338">Cependant, cette officialisation ne s'est pas faite sous Windows, il faudra donc toujours utiliser GLEW sous Windows. Nous verrons cela en détails un peu plus tard.</p><p id="r-960339" data-claire-element-id="960339">Pour les linuxiens, vous trouverez dans votre archive l'include &quot;gl3.h&quot; qui vient remplacer &quot;gl.h&quot;. Vous utiliserez donc ce nouvel include (et non glew.h) pour les futurs chapitres.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;OpenGL ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
<span class="next">Différences entre OpenGL 2.1 et 3.3</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="DiffrencesentreOpenGL2.1et3.3"></a><h2>Différences entre OpenGL 2.1 et 3.3</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
<span class="arrow"></span>
<span class="next">Installer les différents outils</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">
<span class="next">Créer une fenêtre avec la SDL 2.0</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-960342" data-claire-element-id="960342">Alors là, je conseille à ceux qui connaissent OpenGL 2.1 de bien s'assoir au risque de tomber dans les pommes :-° . Cette partie ne concerne pas uniquement ceux qui ont déjà codé avec OpenGL, vous ne comprendrez pas tout mais ça vous concerne aussi.</p><p id="r-960343" data-claire-element-id="960343">Tout d'abord, ce qu'il faut savoir c'est qu'avec la version 3, une grande partie des fonctions ont été marquées comme dépréciées. C'est-à-dire que le programmeur était fortement invité à ne plus les utiliser. Un peu plus tard, avec la version 3.1, le groupe Khronos a finalement décidé de supprimer ces fonctions dépréciées afin que les développeurs ne soient plus tentés de les utiliser.</p><p id="r-960344" data-claire-element-id="960344">Pourquoi a-t-on supprimé des fonctions me direz-vous ? Et bien tout simplement parce qu'elles ne sont plus adaptées aux jeux de nos jours. Soit elles ne sont plus utilisées, soit elles sont trop lentes. Imaginez une course de voitures avec des voitures qui vont à 30km/h ... Passionnant !</p><div id="r-960346" data-claire-element-id="960346" data-claire-semantic="question"><p id="r-960345" data-claire-element-id="960345">Ok des fonctions ont été supprimées, mais je ne vois pas ce qui peut me faire tomber dans les pommes. :p</p></div><p id="r-960347" data-claire-element-id="960347">Détrompez-vous, car certaines de ces fonctions étaient très utilisées avant.</p><p id="r-960348" data-claire-element-id="960348">Je vais prendre un exemple : <strong>glVertex</strong>(...)</p><p id="r-960349" data-claire-element-id="960349">Cette fonction permet avec OpenGL 2.1 de définir la position d'un point dans un espace 3D. Nous de notre coté, nous spécifions la position du point dans l'espace et la carte graphique s'occupait du reste. C'est-à-dire qu'elle multipliait les coordonnées du point par la matrice &quot;modelView&quot; puis par la matrice de projection, puis elle définissait sa couleur, etc ...</p><p id="r-960350" data-claire-element-id="960350">Maintenant c'est <strong>NOUS </strong>qui allons devoir faire TOUTES ces opérations.</p><div id="r-960352" data-claire-element-id="960352" data-claire-semantic="question"><p id="r-960351" data-claire-element-id="960351">QUOI ??!! Mais c'est nul ! On se retrouve avec quelque chose de plus compliqué maintenant. :(</p></div><p id="r-960353" data-claire-element-id="960353">Non c'est très bien au contraire puisqu'on se débarrasse d'une fonction lente, puis surtout, ça nous permet de faire ce que l'on veut. Pour reprendre l'exemple de la course, sans ces fonctions nous pourrons &quot;tuner&quot; notre voiture comme nous le voulons. Elle sera plus rapide, plus maniable et on se débarrassera de tout ce qui nous ralentit. Toutes les fonctions telles que glVertex, glColor, glLightv ... sont désormais inutilisables (et c'est tant mieux).</p><p id="r-960354" data-claire-element-id="960354">Ah oui, j'allais oublier, vous connaissez les matrices de projection et tout le reste ? Et bien comme vous le pensez (même si vous espérez vous tromper), ces matrices sont supprimées elles-aussi. Nous devrons donc créer notre propre matrice de projection, modelview, ...</p><p id="r-960355" data-claire-element-id="960355">La suppression des matrices entraine également la suppression des fonctions gluPerspective et gluLookAt. Heureusement pour nous, il existe une librairie parallèle à OpenGL qui s'appelle <strong>GLM</strong> (pour Open<strong>GL</strong><strong>M</strong>athematics). Cette librairie permet de faire pas mal de calculs mathématiques et permet surtout d'utiliser les matrices sans avoir à tout coder nous-même. Elle est incluse dans le téléchargement que vous avais fait juste avant. ;)</p><p id="r-960356" data-claire-element-id="960356">Vous vous dites peut-être que toutes ces suppressions sont injustes, tout est fait pour vous décourager. Eh bien non, ces suppressions ne peuvent être que positives car elles nous obligent à personnaliser complétement notre programme, nous pourrons donc mieux exploiter notre matériel et créer des jeux plus puissants.</p><p id="r-960357" data-claire-element-id="960357">Vous savez désormais ce qu'est OpenGL et avec quels outils nous allons travailler. J'expliquerai plus en détails le fonctionnement d'OpenGL dans une autre partie. Dans le chapitre suivant, nous allons écrire nos premières lignes de code, mais attention la 3D ce sera pour un peu plus tard. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
<span class="arrow"></span>
<span class="next">Installer les différents outils</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">
<span class="next">Créer une fenêtre avec la SDL 2.0</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CrerunefentreaveclaSDL2.0"></a><h2>Créer une fenêtre avec la SDL 2.0</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
<span class="arrow"></span>
<span class="next">Différences entre OpenGL 2.1 et 3.3</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
<span class="next">Préparation de l&#039;IDE</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-960360" data-claire-element-id="960360">Dans ce chapitre nous allons créer une fenêtre avec la librairie SDL. Pour ceux qui connaissent la SDL avec le tuto de M@teo, vous pourrez comparer les deux versions. ;)</p>
</div><a name="Prparationdel039IDE"></a><h2>Préparation de l&#039;IDE</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">
<span class="arrow"></span>
<span class="next">Créer une fenêtre avec la SDL 2.0</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
<span class="next">Premier programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-960361" data-claire-element-id="960361">Pour coder à travers ce tutoriel, je vous recommande d'utiliser l'IDE <strong>Code::Blocks</strong> qui est un outil très utilisé sur le site du Zéro. :) Vous pourrez donc trouver plus facilement de l'aide en cas de problème. Pour ceux qui souhaitent l'utiliser, voici un lien pour le télécharger (Windows uniquement). Il existe deux versions de cet IDE, vous pouvez choisir celle que vous voulez, les projets donnés devraient fonctionner sur les deux sans problème.</p><p id="r-960362" data-claire-element-id="960362"><strong>Télécharger</strong> : <a href="http://downloads.sourceforge.net/project/codeblocks/Binaries/12.11/Windows/codeblocks-12.11mingw-setup.exe?r=http://www.codeblocks.org/downloads/26&amp;ts=1360701315&amp;use_mirror=freefr">Code::Blocks 12.11 (Windows uniquement)</a></p><p id="r-960363" data-claire-element-id="960363">Pour les <strong>linuxiens</strong> :</p><pre id="r-960364" data-claire-element-id="960364"><code data-claire-semantic="console">sudo apt-get install codeblocks</code></pre><p id="r-960365" data-claire-element-id="960365">D'ailleurs, si vous utilisez cet IDE je vais pouvoir vous fournir directement le <strong>template</strong> nécessaire pour créer un projet <em>SDL 2.0</em>. Ce template vous permettra de linker les librairies automatiquement sans que vous ayez à faire des manips compliquées. ;)</p><p id="r-960366" data-claire-element-id="960366"><strong>Télécharger</strong> : <a href="https://dl.dropboxusercontent.com/s/t01r56v5rctwjoh/Template SDL 2.0.zip?token_hash=AAGzVTulpukxHW2fXp5bYvLP1Wu3gPHYPT-W1ynfEj1Jng&amp;dl=1">Template SDL 2.0 Code::Blocks 10.05 et 12.11 - Windows et Linux</a></p><p id="r-960367" data-claire-element-id="960367">Pour Windows, dézippez l'archive et <strong>fusionnez</strong> le dossier &quot;<strong>share</strong>&quot; de l'archive avec le dossier &quot;<strong>share</strong>&quot; de Code::Blocks (chez moi : <strong><em>C:\Program Files (x86)\CodeBlocks\share</em></strong>).</p><p id="r-960368" data-claire-element-id="960368">Pour Linux, dézippez l'archive où vous voulez puis exécutez les commandes suivantes (pas dans le dossier &quot;<strong>share</strong>&quot; mais dans celui qui le contient) :</p><pre id="r-960369" data-claire-element-id="960369"><code data-claire-semantic="console">sudo cp -r share/CodeBlocks/* /usr/share/codeblocks/
sudo chmod -R 715 /usr/share/codeblocks/templates/wizard/sdl2/
sudo chmod 715 /usr/share/codeblocks/templates/wizard/config.script</code></pre><aside id="r-960371" data-claire-element-id="960371" data-claire-semantic="information"><p id="r-960370" data-claire-element-id="960370">Si vous avez un problème pour utiliser les espaces dans Code::Blocks c'est certainement parce que vous avez un problème de clavier. Faites un tour dans les paramètres généraux pour configurer votre clavier en <strong>Français(France)</strong>.</p></aside><p id="r-960372" data-claire-element-id="960372">Nous pouvons maintenant créer notre premier programme en SDL 2.0. :D</p><p id="r-960373" data-claire-element-id="960373">Pour cela, il faut d'abord créer un projet <strong>SDL 2.0</strong> et non pas <strong>OpenGL</strong>, ne vous trompez pas ! Sous Code::Blocks la procédure est la suivante :</p><p id="r-960374" data-claire-element-id="960374">. <strong>File -&gt; New -&gt; Project -&gt; SDL 2.0 project</strong></p><p id="r-960375" data-claire-element-id="960375">Vous vous souvenez du dossier &quot;<strong>SDL-2.0</strong>&quot; du chapitre précédent ? Si vous ne l'avez pas encore installé au bon endroit faites-le maintenant :) (reportez-vous au chapitre précédent).</p><p id="r-960376" data-claire-element-id="960376">Occupons-nous maintenant du linkage d'<em>OpenGL</em>, il faut dire à notre IDE que nous souhaitons utiliser cette librairie sinon il va nous mettre plein d'erreurs au moment de la compilation. Voici la procédure à effectuer sous Code::Blocks :</p><p id="r-960377" data-claire-element-id="960377">. <strong>Project -&gt; Build options -&gt; Linker settings -&gt; Add</strong></p><p id="r-960378" data-claire-element-id="960378">Un petit encadré vous demande quelle librairie vous souhaitez linker, cela dépend de votre système d'exploitation. Vous ne pouvez renseigner qu'une seule librairie par encadré. Ré-appuyez sur le bouton <strong>Add</strong> pour en ajouter une nouvelle.</p><table id="r-960406" data-claire-element-id="960406"><thead id="r-960384" data-claire-element-id="960384"><tr id="r-960383" data-claire-element-id="960383"><th id="r-960380" data-claire-element-id="960380"><p id="r-960379" data-claire-element-id="960379">IDE</p></th><th id="r-960382" data-claire-element-id="960382"><p id="r-960381" data-claire-element-id="960381">Option</p></th></tr></thead><tbody id="r-960405" data-claire-element-id="960405"><tr id="r-960389" data-claire-element-id="960389"><td id="r-960386" data-claire-element-id="960386"><p id="r-960385" data-claire-element-id="960385">Code::Blocks Windows</p></td><td id="r-960388" data-claire-element-id="960388"><p id="r-960387" data-claire-element-id="960387">opengl32<br/> glew32</p></td></tr><tr id="r-960394" data-claire-element-id="960394"><td id="r-960391" data-claire-element-id="960391"><p id="r-960390" data-claire-element-id="960390">Code::Blocks Linux</p></td><td id="r-960393" data-claire-element-id="960393"><p id="r-960392" data-claire-element-id="960392">GL</p></td></tr><tr id="r-960399" data-claire-element-id="960399"><td id="r-960396" data-claire-element-id="960396"><p id="r-960395" data-claire-element-id="960395">DevC++</p></td><td id="r-960398" data-claire-element-id="960398"><p id="r-960397" data-claire-element-id="960397">-lopengl32<br/> -lglew32</p></td></tr><tr id="r-960404" data-claire-element-id="960404"><td id="r-960401" data-claire-element-id="960401"><p id="r-960400" data-claire-element-id="960400">Visual Studio</p></td><td id="r-960403" data-claire-element-id="960403"><p id="r-960402" data-claire-element-id="960402">opengl32.lib<br/> glew32.lib</p></td></tr></tbody></table><p id="r-960407" data-claire-element-id="960407">Selon votre OS, il suffit d'ajouter le ou les mot-clef(s) dans le petit encadré.</p><aside id="r-960409" data-claire-element-id="960409" data-claire-semantic="information"><p id="r-960408" data-claire-element-id="960408">Pour ceux qui se demanderaient où est passée l'option de linkage pour GLU, rappelez-vous que nous n'utiliserons plus gluPerspective et gluLookAt, ces fonctions étant invalides avec la nouvelle version d'OpenGL.</p></aside><p id="r-960410" data-claire-element-id="960410">Pour les utilisateurs de <em>CodeBlocks</em> sous Windows et uniquement sous Windows, Code::Blocks va certainement vous demander où se trouve la SDL avec cette popup :</p><figure id="r-960412" data-claire-element-id="960413"><img id="r-960411" data-claire-element-id="960411" src="medias/uploads.siteduzero.com_files_415001_416000_415223.png" alt="Image utilisateur"/></figure><p id="r-960414" data-claire-element-id="960414">Dans le champ <strong>base</strong> qui vous est proposé, renseignez le chemin vers le répertoire &quot;<strong>SDL-2.0</strong>&quot; que vous avez installé précédemment (chez moi : <em><strong>C:\Program Files (x86)\CodeBlocks\MinGW\SDL-2.0</strong></em>). Ne renseignez aucun autre champ et ça devrait être bon. Une popup vous indiquera surement un message du genre &quot;Please select a valid location&quot;, mais ce sera une fausse alerte ne vous en faites pas, appuyez sur le bouton next. ;)</p><p id="r-960415" data-claire-element-id="960415">En parlant de ce dossier, si vous avez jeté un coup d’œil à l'intérieur vous vous apercevrez qu'il y a un sous-dossier nommé &quot;<strong>dll</strong>&quot;. Ce dossier contient les fichiers <strong>SDL2.dll</strong> et <strong>glew32.dll</strong>, ils sont indispensables pour lancer vos futurs programmes.</p><p id="r-960416" data-claire-element-id="960416">Vous avez deux solutions pour les utiliser : soit vous les incluez dans le dossier de chaque projet, soit vous les copier dans le dossier &quot;<strong>bin</strong>&quot; du compilateur <strong>MinGW</strong> (chez moi : <em><strong>C:\Program Files (x86)\CodeBlocks\MinGW\bin</strong></em>). La première solution est la plus propre mais aussi la plus contraignante, faites comme bon vous semble mais il faut que vous utilisiez au moins une de ces techniques pour lancer vos programmes. ;)</p><p id="r-960417" data-claire-element-id="960417">Pour ceux qui utilisent d'autres IDE comme Visual C++ ou Eclipse vous allez devoir renseigner d'autres librairies car je n'ai pas de template tout fait à vous proposer. Il faudra que vous renseigneriez les dossiers où se trouvent les <strong>librairies</strong> et les <strong>includes</strong>. De plus, vous devrez linker manuellement deux librairies supplémentaires :</p><table id="r-960429" data-claire-element-id="960429"><thead id="r-960421" data-claire-element-id="960421"><tr id="r-960420" data-claire-element-id="960420"><th id="r-960419" data-claire-element-id="960419"><p id="r-960418" data-claire-element-id="960418">Link</p></th></tr></thead><tbody id="r-960428" data-claire-element-id="960428"><tr id="r-960424" data-claire-element-id="960424"><td id="r-960423" data-claire-element-id="960423"><p id="r-960422" data-claire-element-id="960422">SDL2main</p></td></tr><tr id="r-960427" data-claire-element-id="960427"><td id="r-960426" data-claire-element-id="960426"><p id="r-960425" data-claire-element-id="960425">SDL2</p></td></tr></tbody></table>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">
<span class="arrow"></span>
<span class="next">Créer une fenêtre avec la SDL 2.0</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
<span class="next">Premier programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Premierprogramme"></a><h2>Premier programme</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
<span class="arrow"></span>
<span class="next">Préparation de l&#039;IDE</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
<span class="next">Les paramètres OpenGL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-960431" data-claire-element-id="960431">Nous avons tous les outils, ceux-ci sont tous configurés. Bien, commençons. :magicien:</p><p id="r-960432" data-claire-element-id="960432">Voici un code de base permettant de créer une fenêtre avec la SDL 1.2 :</p><pre id="r-960433" data-claire-element-id="960433"><code data-claire-semantic="cpp">#include &lt;SDL/SDL.h&gt;
#include &lt;iostream&gt;


int main(int argc, char **argv)
{
   // Notre fenêtre et le clavier

   SDL_Surface *fenetre(0);
   SDL_Event evenements = {0};
   bool terminer(false);


   // Initialisation de la SDL

   if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)
   {
       std::cout &lt;&lt; &quot;Erreur lors de l'initialisation de la SDL : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
       SDL_Quit();
               
       return -1;
   }
        

   // Création de la fenêtre

   fenetre = SDL_SetVideoMode(800, 600, 32, SDL_HWSURFACE); 


   // Boucle principale

   while(!terminer)
   {
        SDL_WaitEvent(&amp;evenements);

        if(evenements.type == SDL_QUIT)
            terminer = true;
   }

	
   // On quitte la SDL

   SDL_Quit();

   return 0;
}</code></pre><p id="r-960434" data-claire-element-id="960434">Facile non ? Et bien maintenant, je vais vous demander d'oublier la moitié de ce code. :D</p><div id="r-960436" data-claire-element-id="960436" data-claire-semantic="question"><p id="r-960435" data-claire-element-id="960435">Quoi ? C'est si différent que ça ?</p></div><p id="r-960437" data-claire-element-id="960437">Oui en effet, car souvenez-vous que nous travaillons avec la version 2.0. Et vu que l'on passe d'une version 1.x à une version 2.0, le code change beaucoup.</p><p id="r-960438" data-claire-element-id="960438">Commençons à coder avec la SDL 2.0 pour se mettre l'eau à la bouche :</p><pre id="r-960439" data-claire-element-id="960439"><code data-claire-semantic="c++">#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;


int main(int argc, char **argv)
{    
    // Initialisation de la SDL

    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de l'initialisation de la SDL : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();
               
        return -1;
    }


    // On quitte la SDL

    SDL_Quit();

    return 0;
}</code></pre><p id="r-960440" data-claire-element-id="960440">Bon jusqu'ici, pas de grand changement. Mis à part l'inclusion de la SDL qui passe de &quot;<em><strong>SDL/SDL.h</strong></em>&quot; à &quot;<em><strong>SDL2/SDL.h</strong></em>&quot;. En même temps on ne peut pas changer grand chose. :p</p><p id="r-960441" data-claire-element-id="960441">Voici le nouveau code qui permet de créer une fenêtre :</p><pre id="r-960442" data-claire-element-id="960442"><code data-claire-semantic="c++">#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;


int main(int argc, char **argv)
{	
    // Notre fenêtre
	
    SDL_Window* fenetre(0);
	
	
    // Initialisation de la SDL
	
    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de l'initialisation de la SDL : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();
		
        return -1;
    }
	
	
    // Création de la fenêtre
	
    fenetre = SDL_CreateWindow(&quot;Test SDL 2.0&quot;, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 800, 600, SDL_WINDOW_SHOWN);
	
	
    // On quitte la SDL
	
    SDL_DestroyWindow(fenetre);
    SDL_Quit();
	
    return 0;
}</code></pre><p id="r-960443" data-claire-element-id="960443">Nous voyons ici deux choses importantes, premièrement :</p><pre id="r-960444" data-claire-element-id="960444"><code data-claire-semantic="cpp">SDL_Window* fenetre;</code></pre><p id="r-960445" data-claire-element-id="960445">Le pointeur <strong>SDL_Window</strong> remplacera désormais notre fenêtre, il n'y a donc plus de SDL_Surface. Maintenant notre fenêtre aura sa structure à part entière bien différente des surfaces classiques.</p><p id="r-960446" data-claire-element-id="960446">Deuxièmement :</p><pre id="r-960447" data-claire-element-id="960447"><code data-claire-semantic="cpp">fenetre = SDL_CreateWindow(&quot;Test SDL 2.0&quot;, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 800, 600, SDL_WINDOW_SHOWN);</code></pre><p id="r-960448" data-claire-element-id="960448">Vous l'aurez compris, cette fonction va nous permettre de créer notre fenêtre, elle vient donc remplacer notre bonne vielle <strong>SDL_SetVideoMode</strong>. Voici le prototype de cette fonction :</p><pre id="r-960449" data-claire-element-id="960449"><code data-claire-semantic="cpp">SDL_Window* SDL_CreateWindow(const char *title, int x, int y, int w, int h, Uint32 flags);</code></pre><ul id="r-960462" data-claire-element-id="960462"><li id="r-960451" data-claire-element-id="960451"><p id="r-960450" data-claire-element-id="960450"><strong>title </strong>: le titre de notre fenêtre</p></li><li id="r-960453" data-claire-element-id="960453"><p id="r-960452" data-claire-element-id="960452"><strong>x</strong> : l'abscisse de la position de la fenêtre, SDL_WINDOWPOS_CENTERED signifie que nous centrons la fenêtre par rapport à l'axe x</p></li><li id="r-960455" data-claire-element-id="960455"><p id="r-960454" data-claire-element-id="960454"><strong>y</strong> : l'ordonnée de la position, SDL_WINDOWPOS_CENTERED signifie la même chose mais sur l'axe y</p></li><li id="r-960457" data-claire-element-id="960457"><p id="r-960456" data-claire-element-id="960456"><strong>w</strong> : (widht) la largeur de la fenêtre</p></li><li id="r-960459" data-claire-element-id="960459"><p id="r-960458" data-claire-element-id="960458"><strong>h</strong> : (height) la hauteur de la fenêtre</p></li><li id="r-960461" data-claire-element-id="960461"><p id="r-960460" data-claire-element-id="960460"><strong>flags </strong>: ce paramètre est un peu spécial, il faudra toujours mettre SDL_WINDOW_SHOWN. Plus tard, ce sera ici que l'on indiquera à la SDL que nous souhaitons utiliser OpenGL</p></li></ul><p id="r-960463" data-claire-element-id="960463">Cette fonction retourne notre fenêtre dans un pointeur de type <strong>SDL_Window</strong>.</p><p id="r-960464" data-claire-element-id="960464">Quant à la dernière fonction, son utilisation est simple : elle permet de détruire proprement notre fenêtre :</p><pre id="r-960465" data-claire-element-id="960465"><code data-claire-semantic="cpp">SDL_DestroyWindow(SDL_Window *window);</code></pre><p id="r-960466" data-claire-element-id="960466">Nous lui donnerons la fenêtre créée au début du programme.</p><pre id="r-960467" data-claire-element-id="960467"><code data-claire-semantic="cpp">SDL_DestroyWindow(fenetre);</code></pre><p id="r-960468" data-claire-element-id="960468">Puisque l'on parle de l'initialisation de la fenêtre, on va en profiter pour vérifier la valeur du pointeur <strong>SDL_Window</strong>. En effet dans de rares cas, celui-ci peut être nul à cause d'un éventuel problème logiciel ou matériel. On va donc tester sa valeur dans un <strong>if</strong>, s'il est nul alors on quitte la <strong><em>SDL</em></strong> en fournissant un message d'erreur, sinon c'est que tout va bien donc on continue :</p><pre id="r-960469" data-claire-element-id="960469"><code data-claire-semantic="cpp">// Création de la fenêtre

fenetre = SDL_CreateWindow(&quot;Test SDL 2.0&quot;, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 800, 600, SDL_WINDOW_SHOWN);

if(fenetre == 0)
{
    std::cout &lt;&lt; &quot;Erreur lors de la creation de la fenetre : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
    SDL_Quit();

    return -1;
}</code></pre><p id="r-960470" data-claire-element-id="960470">Ajoutons maintenant le code gérant les évènements qui connait, lui-aussi, son lot de modifications.</p><p id="r-960471" data-claire-element-id="960471">Avant, pour savoir si une fenêtre devait se fermer, nous devions vérifier la variable type d'une structure SDL_Event comme ceci par exemple :</p><pre id="r-960472" data-claire-element-id="960472"><code data-claire-semantic="cpp">// Variables

SDL_Event evenements;
bool terminer(false);


// Gestion des évènements

SDL_WaitEvent(&amp;evenements); 

if(evenements.type == SDL_QUIT)
    terminer = true;</code></pre><p id="r-960473" data-claire-element-id="960473">Avec la SDL 2.0, la gestion des évènements change quelques peu (nous verrons les différences un peu plus tard). Maintenant, pour savoir si on doit fermer une fenêtre, nous ferrons ceci :</p><pre id="r-960474" data-claire-element-id="960474"><code data-claire-semantic="cpp">// Variables

SDL_Event evenements;
bool terminer(false);


// Gestion des évènements

SDL_WaitEvent(&amp;evenements); 

if(evenements.window.event == SDL_WINDOWEVENT_CLOSE)
    terminer = true;</code></pre><p id="r-960475" data-claire-element-id="960475">Bien, résumons tout cela en un seul code. :)</p><pre id="r-960476" data-claire-element-id="960476"><code data-claire-semantic="cpp">#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;


int main(int argc, char **argv)
{	
    // Notre fenêtre
	
    SDL_Window* fenetre(0);
    SDL_Event evenements;
    bool terminer(false);
	
	
    // Initialisation de la SDL
	
    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de l'initialisation de la SDL : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();
		
        return -1;
    }
	
	
    // Création de la fenêtre

    fenetre = SDL_CreateWindow(&quot;Test SDL 2.0&quot;, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 800, 600, SDL_WINDOW_SHOWN);

    if(fenetre == 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de la creation de la fenetre : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();

        return -1;
    }
	
	
    // Boucle principale
	
    while(!terminer)
    {
	SDL_WaitEvent(&amp;evenements);
		
	if(evenements.window.event == SDL_WINDOWEVENT_CLOSE)
	    terminer = true;
    }
	
	
    // On quitte la SDL
	
    SDL_DestroyWindow(fenetre);
    SDL_Quit();
	
    return 0;
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
<span class="arrow"></span>
<span class="next">Préparation de l&#039;IDE</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
<span class="next">Les paramètres OpenGL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesparamtresOpenGL"></a><h2>Les paramètres OpenGL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
<span class="arrow"></span>
<span class="next">Premier programme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">
<span class="next">Premier affichage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-960478" data-claire-element-id="960478">Tout ce code c'est bien mais il n'y a rien qui permet d'exploiter OpenGL, mais qu'attendons-nous ? :diable:</p><p id="r-960479" data-claire-element-id="960479">Il y a pas mal d'attributs (des options de configuration) à paramétrer pour rendre notre programme compatible avec OpenGL, commençons par le plus important :</p><pre id="r-960480" data-claire-element-id="960480"><code data-claire-semantic="cpp">SDL_GLContext contexteOpenGL;</code></pre><p id="r-960481" data-claire-element-id="960481">Cette structure va permettre à la SDL de créer un contexte OpenGL. Ce contexte est très important, pour utiliser l'API graphique et ses fonctions. Il faut tout d'abord le configurer.</p><p id="r-960482" data-claire-element-id="960482">Voici le prototype de la fonction qui permet de spécifier des attributs OpenGL à la SDL :</p><pre id="r-960483" data-claire-element-id="960483"><code data-claire-semantic="cpp">SDL_GL_SetAttribute(SDL_GLattr attr, int value);</code></pre><ul id="r-960488" data-claire-element-id="960488"><li id="r-960485" data-claire-element-id="960485"><p id="r-960484" data-claire-element-id="960484"><strong>attr </strong>: c'est notre attribut, nous verrons lesquels il faut spécifier</p></li><li id="r-960487" data-claire-element-id="960487"><p id="r-960486" data-claire-element-id="960486"><strong>value </strong>: c'est la valeur de l'attribut</p></li></ul><p id="r-960489" data-claire-element-id="960489">Avec cette simple fonction, nous allons pourvoir spécifier à la SDL quelle version d'OpenGL on souhaite utiliser :</p><pre id="r-960490" data-claire-element-id="960490"><code data-claire-semantic="cpp">SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);</code></pre><p id="r-960491" data-claire-element-id="960491">Vous l'aurez compris :</p><ul id="r-960496" data-claire-element-id="960496"><li id="r-960493" data-claire-element-id="960493"><p id="r-960492" data-claire-element-id="960492">SDL_GL_CONTEXT_<strong>MAJOR_VERSION</strong> pour OpenGL 3.x</p></li><li id="r-960495" data-claire-element-id="960495"><p id="r-960494" data-claire-element-id="960494">SDL_GL_CONTEXT_<strong>MINOR_VERSION</strong> pour la version mineure : x.1 (Dans le futur, cette valeur sera de <strong>3</strong> lorsque nous saurons manier OpenGL)</p></li></ul><div id="r-960498" data-claire-element-id="960498" data-claire-semantic="question"><p id="r-960497" data-claire-element-id="960497">Petite question pour ceux qui connaissent la SDL 1.2, vous savez comment on utilise le double buffering ? :-°</p></div><p id="r-960499" data-claire-element-id="960499">Voici la réponse :p :</p><pre id="r-960500" data-claire-element-id="960500"><code data-claire-semantic="cpp">SDL_SetVideoMode(800, 600, 32, SDL_HWSURFACE | SDL_DOUBLEBUF);</code></pre><p id="r-960501" data-claire-element-id="960501">Comme avec la SDL, on peut aussi activer le Double Buffuring avec OpenGL. Cependant ça ne se passe pas de la même façon. Voici comment faire :</p><pre id="r-960502" data-claire-element-id="960502"><code data-claire-semantic="cpp">SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);</code></pre><ul id="r-960507" data-claire-element-id="960507"><li id="r-960504" data-claire-element-id="960504"><p id="r-960503" data-claire-element-id="960503"><strong>SDL_GL_DOUBLEBUFFER</strong> : attribut activant le Double Buffering. Mettez 1 pour l'activer et 0 pour faire le contraire. ;)</p></li><li id="r-960506" data-claire-element-id="960506"><p id="r-960505" data-claire-element-id="960505"><strong>SDL_GL_DEPTH_SIZE</strong> : attribut de profondeur du Double Buffer. Nous mettons sa valeur à 24 pour une profondeur de 24 bits.</p></li></ul><div id="r-960509" data-claire-element-id="960509" data-claire-semantic="question"><p id="r-960508" data-claire-element-id="960508">Bon on avance c'est bien :) . Mais tout à l'heure, tu as parlé d'une structure : SDL_GLContext, qu'est-ce qu'on en fait ?</p></div><p id="r-960510" data-claire-element-id="960510">Très bonne remarque, on va l'utiliser maintenant justement grâce à la fonction :</p><pre id="r-960511" data-claire-element-id="960511"><code data-claire-semantic="cpp">SDL_GLContext SDL_GL_CreateContext(SDL_Window *window);</code></pre><p id="r-960512" data-claire-element-id="960512">Cette fonction demande un pointeur <em><strong>SDL_Window</strong></em> pour y attacher le contexte OpenGL. De plus, elle renvoie une structure <em><strong>SDL_GLContext</strong></em>, et justement c'est ce dont nous avons besoin :)</p><p id="r-960513" data-claire-element-id="960513">Dans notre cas, nous lui donnerons notre fenêtre puis nous récupéreront la structure retournée :</p><pre id="r-960514" data-claire-element-id="960514"><code data-claire-semantic="cpp">contexteOpenGL = SDL_GL_CreateContext(fenetre);</code></pre><p id="r-960515" data-claire-element-id="960515">Comme pour la fenêtre <em><strong>SDL</strong></em>, la création du contexte OpenGL peut lui aussi échouer. Le plus souvent ce sera parce que la version OpenGL demandée ne sera pas supportée par la carte graphique. Il faut donc tester la valeur de la variable <strong>contexteOpenGL</strong>. Si elle est égale à <strong>0</strong> c'est qu'il y a eu un problème. Dans ce cas on affiche un message d'erreur, on détruit la fenêtre puis on quitte la SDL :</p><pre id="r-960516" data-claire-element-id="960516"><code data-claire-semantic="cpp">// Création du contexte OpenGL

contexteOpenGL = SDL_GL_CreateContext(fenetre);

if(contexteOpenGL == 0)
{
    std::cout &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
    SDL_DestroyWindow(fenetre);
    SDL_Quit();

    return -1;
}</code></pre><p id="r-960517" data-claire-element-id="960517">Si tout se passe bien lors de la création du contexte alors on continue.</p><p id="r-960518" data-claire-element-id="960518">Tout comme pour la fenêtre <em><strong>SDL</strong></em> encore une fois, il existe aussi une fonction qui permet de détruire le contexte lorsque nous n'en avons plus besoin. Son appel ressemble à ceci :</p><pre id="r-960519" data-claire-element-id="960519"><code data-claire-semantic="cpp">SDL_GL_DeleteContext(contexteOpenGL);</code></pre><p id="r-960520" data-claire-element-id="960520">Bien, résumons tout cela :</p><pre id="r-960521" data-claire-element-id="960521"><code data-claire-semantic="cpp">#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;


int main(int argc, char **argv)
{	
    // Notre fenêtre
	
    SDL_Window* fenetre(0);
    SDL_GLContext contexteOpenGL(0);
	
    SDL_Event evenements;
    bool terminer(false);
	
	
    // Initialisation de la SDL
	
    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de l'initialisation de la SDL : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();
		
        return -1;
    }
	
	
    // Version d'OpenGL
	
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);
	
	
    // Double Buffer
	
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);
	
	
    // Création de la fenêtre

    fenetre = SDL_CreateWindow(&quot;Test SDL 2.0&quot;, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 800, 600, SDL_WINDOW_SHOWN);

    if(fenetre == 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de la creation de la fenetre : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();

        return -1;
    }


    // Création du contexte OpenGL

    contexteOpenGL = SDL_GL_CreateContext(fenetre);

    if(contexteOpenGL == 0)
    {
        std::cout &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_DestroyWindow(fenetre);
        SDL_Quit();

        return -1;
    }
	
	
    // Boucle principale
	
    while(!terminer)
    {
        SDL_WaitEvent(&amp;evenements);
		
        if(evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;
    }
	
	
    // On quitte la SDL
	
    SDL_GL_DeleteContext(contexteOpenGL);
    SDL_DestroyWindow(fenetre);
    SDL_Quit();
	
    return 0;
}</code></pre><p id="r-960522" data-claire-element-id="960522">On est presque au bout courage. :p Il nous faut juste rajouter un paramètre dans la fonction GL_CreateWindow. Avec la SDL 1.2, ce paramètre ressemblait à ça :</p><pre id="r-960523" data-claire-element-id="960523"><code data-claire-semantic="cpp">SDL_SetVideoMode(.., .., .., SDL_OPENGL);</code></pre><p id="r-960524" data-claire-element-id="960524">Avec la SDL 2.0, le nom change légèrement :</p><pre id="r-960525" data-claire-element-id="960525"><code data-claire-semantic="cpp">SDL_WINDOW_OPENGL</code></pre><p id="r-960526" data-claire-element-id="960526">Il se place également dans la fonction qui créé la fenêtre :</p><pre id="r-960527" data-claire-element-id="960527"><code data-claire-semantic="cpp">fenetre = SDL_CreateWindow(&quot;Test SDL 2.0&quot;, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 800, 600, SDL_WINDOW_SHOWN | SDL_WINDOW_OPENGL);</code></pre><p id="r-960528" data-claire-element-id="960528">Et voila notre code final :</p><pre id="r-960529" data-claire-element-id="960529"><code data-claire-semantic="cpp">#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;


int main(int argc, char **argv)
{	
    // Notre fenêtre
	
    SDL_Window* fenetre(0);
    SDL_GLContext contexteOpenGL(0);
	
    SDL_Event evenements;
    bool terminer(false);
	
	
    // Initialisation de la SDL
	
    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de l'initialisation de la SDL : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();
		
        return -1;
    }
	
	
    // Version d'OpenGL
	
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);
	
	
    // Double Buffer
	
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);
	
	
    // Création de la fenêtre

    fenetre = SDL_CreateWindow(&quot;Test SDL 2.0&quot;, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 800, 600, SDL_WINDOW_SHOWN | SDL_WINDOW_OPENGL);

    if(fenetre == 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de la creation de la fenetre : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();

        return -1;
    }


    // Création du contexte OpenGL

    contexteOpenGL = SDL_GL_CreateContext(fenetre);

    if(contexteOpenGL == 0)
    {
        std::cout &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_DestroyWindow(fenetre);
        SDL_Quit();

        return -1;
    }
	
	
    // Boucle principale
	
    while(!terminer)
    {
        SDL_WaitEvent(&amp;evenements);
		
        if(evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;
    }
	
	
    // On quitte la SDL
	
    SDL_GL_DeleteContext(contexteOpenGL);
    SDL_DestroyWindow(fenetre);
    SDL_Quit();
	
    return 0;
}</code></pre><p id="r-960530" data-claire-element-id="960530">Vous devriez obtenir quelque chose comme ceci :</p><figure id="r-960532" data-claire-element-id="960533"><img id="r-960531" data-claire-element-id="960531" src="medias/uploads.siteduzero.com_files_282001_283000_282497.jpg" alt="Image utilisateur"/></figure><div id="r-960535" data-claire-element-id="960535" data-claire-semantic="question"><p id="r-960534" data-claire-element-id="960534">Quoi ! Mais on a une fenêtre blanche c'est nul !</p></div><p id="r-960536" data-claire-element-id="960536">Du calme, vous n'imaginez pas ce que l'on vient de faire (enfin ce que la SDL vient de faire), nous venons de créer un contexte dans lequel OpenGL va évoluer. En gros nous venons de créer l'univers. :D</p><p id="r-960537" data-claire-element-id="960537">Bref nous avons enfin une fenêtre SDL compatible avec OpenGL 3.1. Comparez le code avant et après, vous verrez la différence. Il y a plus de code certes, mais toutes ces instructions sont importantes. Ce nouvel environnement va nous permettre de créer des programmes plus paramétrables et donc plus puissants. ;)</p><p id="r-960538" data-claire-element-id="960538"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/rnu0yeweqsrjbhu/Fenetre avec SDL 2.0.zip?token_hash=AAERlHAqgBMlQX-h_-wmH4n6ZajTxocaBXPENmoOxOVVnw&amp;dl=1">Code Source C++ du Chapitre 2</a></strong></p><p id="r-960539" data-claire-element-id="960539">Piouf, ça fait beaucoup de changements pour arriver grosso modo à la même chose. Mais au moins on passe à la nouvelle génération de programme. <br/> Bon, on a une fenêtre c'est bien, mais pour le moment on a linké OpenGL pour rien. Passons maintenant à la partie OpenGL :pirate: .</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
<span class="arrow"></span>
<span class="next">Premier programme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">
<span class="next">Premier affichage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Premieraffichage"></a><h2>Premier affichage</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
<span class="arrow"></span>
<span class="next">Les paramètres OpenGL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
<span class="next">Le fonctionnement d&#039;OpenGL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-960542" data-claire-element-id="960542">Nouveau chapitre, nouvelles notions.</p><p id="r-960543" data-claire-element-id="960543">Nous allons apprendre ici à faire nos premiers affichages dans la fenêtre <strong>SDL</strong>. Les notions que nous allons aborder nous seront utiles tout au long de ce tutoriel et constituent réellement la base du fonctionnement d'<strong>OpenGL</strong>. Vous aurez l'occasion de vous exercer à travers quelques exercices. Je ré-utiliserai ce procédé régulièrement car il n'y a rien de mieux que la pratique pour apprendre quelque chose.</p><p id="r-960544" data-claire-element-id="960544">Ceci étant dit, commençons dès maintenant ce nouveau chapitre. :)</p>
</div><a name="Lefonctionnementd039OpenGL"></a><h2>Le fonctionnement d&#039;OpenGL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">
<span class="arrow"></span>
<span class="next">Premier affichage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
<span class="next">Afficher un triangle</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-960545" data-claire-element-id="960545">Nous allons commencer ce chapitre par un peu de théorie. :p</p><div id="r-960547" data-claire-element-id="960547" data-claire-semantic="question"><p id="r-960546" data-claire-element-id="960546">Comment fonctionne OpenGL ?</p></div><p id="r-960548" data-claire-element-id="960548">Basiquement, OpenGL fonctionne avec un système de &quot;points&quot; que nous plaçons dans un monde 3D. Nous appelons un point, un <strong>vertex </strong>(au pluriel : <strong>vertices</strong>), en français on peut dire un <strong>sommet</strong>. La première chose à faire avec ces vertices, c'est leur donner une position.</p><p id="r-960549" data-claire-element-id="960549">Une position dans un monde 3D est constituée de 3 coordonnées: <strong>x</strong> (la largeur), <strong>y</strong> (la hauteur) et <strong>z</strong> (la profondeur). Chaque vertex doit avoir ses propres coordonnées. Les vertices sont à la base de tout, ils forment tout ce que vous voyez dans un jeu-vidéo : le héros, une arme, une voiture, des chaussettes ...</p><p id="r-960550" data-claire-element-id="960550">Une fois les vertices définis, on les relie entre eux pour former des formes géométriques simples : des carrés, des lignes, des triangles, ...</p><figure id="r-960552" data-claire-element-id="960553"><img id="r-960551" data-claire-element-id="960551" src="medias/uploads.siteduzero.com_files_282001_283000_282500.jpg" alt="Image utilisateur"/></figure><p id="r-960554" data-claire-element-id="960554">Voici comment OpenGL &quot;voit&quot; une map : une succession de vertices reliés entre eux pour former un terrain en mode filaire.</p><p id="r-960555" data-claire-element-id="960555">Maintenant que l'on a nos formes géométriques, il faut les &quot;colorier&quot;, sinon nous n'aurions que des fils difformes qui ne ressembleraient à rien. Imaginez si on laissait tout comme ça, le jeu serait un peu particulier.</p><p id="r-960556" data-claire-element-id="960556">On peut distinguer deux formes de &quot;coloriage&quot;: les <strong>textures </strong>et les <strong>couleurs</strong> (que nous spécifions nous-même). Les textures sont utilisées dans 99% des cas. En effet, nous ne spécifions que très rarement la couleur de nos objets directement, en général on le fait pour des tests ou dans un shader (retenez bien ce mot, nous verrons cela plus tard). Dans les premiers chapitres nous n'utiliserons pas les textures, nous accorderons un chapitre entier pour cela.</p><p id="r-960557" data-claire-element-id="960557">Ce qu'il faut retenir c'est qu'au final nous définissons les coordonnées de nos vertices (sommets) dans l'espace, puis nous les relions entre eux pour former une forme géométrique, enfin nous colorions cette forme pour avoir quelque chose de &quot;consistant&quot;.</p><h2 id="r-nomenclature-des-fonctions-opengl" data-claire-element-id="960577">Nomenclature des fonctions OpenGL</h2><p id="r-960558" data-claire-element-id="960558">Comme vous l'aurez remarqué avec la SDL, chaque fonction de la librairie commence par <strong>&quot;SDL_&quot;</strong> . Bonne nouvelle, avec OpenGL c'est pareil, chaque fonction commence par la même chose : <strong>&quot;gl&quot;</strong>.</p><p id="r-960559" data-claire-element-id="960559">Autre point, il se peut que vous soyez surpris en voyant le nom de certaines fonctions se répéter plusieurs fois, c'est normal.</p><p id="r-960560" data-claire-element-id="960560">Prenons un exemple : glUniform2f(...) et glUniform2i(...)</p><p id="r-960561" data-claire-element-id="960561">Nous verrons l'utilité de ces fonctions plus tard. Vous voyez la différence ? Dans la première, la dernière lettre est un <strong>&quot;f&quot;</strong> et dans la deuxième c'est un <strong>&quot;i&quot;</strong>.</p><p id="r-960562" data-claire-element-id="960562">En général, la dernière lettre d'une fonction OpenGL sert à indiquer le type du paramètre à envoyer :</p><ul id="r-960573" data-claire-element-id="960573"><li id="r-960564" data-claire-element-id="960564"><p id="r-960563" data-claire-element-id="960563"><strong>i</strong> : integer (entier)</p></li><li id="r-960566" data-claire-element-id="960566"><p id="r-960565" data-claire-element-id="960565"><strong>f</strong> : float (réel)</p></li><li id="r-960568" data-claire-element-id="960568"><p id="r-960567" data-claire-element-id="960567"><strong>d</strong> : double (réel plus puissant)</p></li><li id="r-960570" data-claire-element-id="960570"><p id="r-960569" data-claire-element-id="960569"><strong>ub</strong> : unsigned byte (octet entre 0 et 255)</p></li><li id="r-960572" data-claire-element-id="960572"><p id="r-960571" data-claire-element-id="960571"><strong>...</strong></p></li></ul><p id="r-960574" data-claire-element-id="960574">Selon le type de paramètre que vous enverrez il faudra utiliser la fonction correspondant au type de vos variables. :)</p><p id="r-960575" data-claire-element-id="960575">Vous remarquez aussi que l'avant-dernière lettre est un chiffre, ce chiffre peut lui aussi changer. En général, si le chiffre est 1 on envoie un seul paramètre, si c'est 2 on en envoie deux, ...</p><p id="r-960576" data-claire-element-id="960576">Autre point que vous remarquerez plus tard : les types de variables OpenGL. Vous tomberez souvent sur des fonctions demandant des paramètres de types GLfloat, GLbool, GLchar, ... Ce sont simplement des variables de type float, char, int, ... Le type GLbool ne pourra prendre que deux valeurs : soit GL_FALSE (faux) soit GL_TRUE (vrai).</p><h2 id="r-boucle-principale-1" data-claire-element-id="960592">Boucle principale</h2><p id="r-960578" data-claire-element-id="960578">Comme avec la SDL, OpenGL fonctionne avec une boucle principale. Tous les calculs se feront dans cette boucle. De plus, à chaque affichage il va falloir effacer l'écran car la scène aura légèrement changée, puis ré-afficher chaque élément un à un. Voici la fonction permettant d'effacer l'écran :</p><pre id="r-960579" data-claire-element-id="960579"><code data-claire-semantic="cpp">glClear(GLbitfield mask)</code></pre><p id="r-960580" data-claire-element-id="960580">Dans un premier temps on effacera uniquement ce qui se trouve à l'écran grâce au paramètre : GL_COLOR_BUFFER_BIT.</p><p id="r-960581" data-claire-element-id="960581">Avec la SDL, pour actualiser l'affichage on utilisait la fonction SDL_Flip(), mais avec OpenGL on utilisera la fonction :</p><pre id="r-960582" data-claire-element-id="960582"><code data-claire-semantic="cpp">SDL_GL_SwapWindow(SDL_Window* window);</code></pre><p id="r-960583" data-claire-element-id="960583">Le paramètre <strong>window</strong> étant notre structure SDL_WindowID. ;)</p><p id="r-960584" data-claire-element-id="960584">Malheureusement il existe encore une différence entre Linux et Windows. Comme vous l'avez vu dans le chapitre précédent, pour utiliser OpenGL, Windows est obligé de passer par une autre librairie du nom de GLEW. Cette librairie va nous permettre d'utiliser les fonctions d'OpenGL 3. Mais comme toute librairie, il va falloir l'initialiser. Sous Windows vous devrez inclure l'en-tête suivant :</p><pre id="r-960585" data-claire-element-id="960585"><code data-claire-semantic="cpp">#ifdef WIN32
#include &lt;GL/glew.h&gt;</code></pre><p id="r-960586" data-claire-element-id="960586">Pour initialiser la librairie GLEW, il faudra ajouter la fonction : <strong>glewInit()</strong>. Comme toute librairie, l'initialisation peut échouer, il faut donc tester son initialisation :</p><pre id="r-960587" data-claire-element-id="960587"><code data-claire-semantic="cpp">// On initialise GLEW

GLenum initialisationGLEW( glewInit() );


// Si l'initialisation a échouée :

if(initialisationGLEW != GLEW_OK)
{
    // On affiche l'erreur grâce à la fonction : glewGetErrorString(GLenum code)

    std::cout &lt;&lt; &quot;Erreur d'initialisation de GLEW : &quot; &lt;&lt; glewGetErrorString(initialisationGLEW) &lt;&lt; std::endl;


    // On quitte la SDL

    SDL_GL_DeleteContext(contexteOpenGL);
    SDL_DestroyWindow(fenetre);
    SDL_Quit();

    return -1;
}</code></pre><p id="r-960588" data-claire-element-id="960588">Voila pour Windows. Pour Linux c'est beaucoup plus simple, il suffit de placer une &quot;define&quot; spéciale pour indiquer que nous utiliserons les fonctions d'OpenGL 3 puis d'inclure le fichier d'en-tête &quot;gl3.h&quot; :</p><pre id="r-960589" data-claire-element-id="960589"><code data-claire-semantic="cpp">#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;</code></pre><p id="r-960590" data-claire-element-id="960590">Bien, récapitulons tout ceci :</p><pre id="r-960591" data-claire-element-id="960591"><code data-claire-semantic="cpp">#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif

#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;


int main(int argc, char **argv)
{

    /* *** Création de la fenêtre SDL *** */


    #ifdef WIN32
    
        // On initialise GLEW

        GLenum initialisationGLEW( glewInit() );


        // Si l'initialisation a échouée :

        if(initialisationGLEW != GLEW_OK)
        {
            // On affiche l'erreur grâce à la fonction : glewGetErrorString(GLenum code)

            std::cout &lt;&lt; &quot;Erreur d'initialisation de GLEW : &quot; &lt;&lt; glewGetErrorString(initialisationGLEW) &lt;&lt; std::endl;


            // On quitte la SDL
    
            SDL_GL_DeleteContext(contexteOpenGL);
            SDL_DestroyWindow(fenetre);
           SDL_Quit();

            return -1;
        }

    #endif


    // Boucle principale
	
    while(!terminer)
    {
        // Gestion des évènements

	SDL_WaitEvent(&amp;evenements);
		
	if(evenements.window.event == SDL_WINDOWEVENT_CLOSE)
	    terminer = true;


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT);


        // Actualisation de la fenêtre

        SDL_GL_SwapWindow(fenetre);
    }


    // On quitte la SDL
	
    SDL_GL_DeleteContext(contexteOpenGL);
    SDL_DestroyWindow(fenetre);
    SDL_Quit();

    return 0;
}</code></pre><h2 id="r-repere-et-origine" data-claire-element-id="960604">Repère et Origine</h2><p id="r-960593" data-claire-element-id="960593">J'espère que vous connaissez la définition de ces deux termes. Un repère est un ensemble d'axes représentant au moins les axes X et Y, l'origine est le point de départ de ces axes.</p><p id="r-960594" data-claire-element-id="960594">En théorie voici ce que donne le repère d'OpenGL :</p><figure id="r-960596" data-claire-element-id="960597"><img id="r-960595" data-claire-element-id="960595" src="medias/uploads.siteduzero.com_files_282001_283000_282501.jpg" alt="Image utilisateur"/></figure><p id="r-960598" data-claire-element-id="960598">Mais dans un premier temps, nous utiliserons le repère par défaut d'OpenGL que voici :</p><figure id="r-960600" data-claire-element-id="960601"><img id="r-960599" data-claire-element-id="960599" src="medias/uploads.siteduzero.com_files_282001_283000_282502.jpg" alt="Image utilisateur"/></figure><p id="r-960602" data-claire-element-id="960602">L'origine du repère se trouve au centre de l'écran, et les coordonnées maximales affichables sont comprises entre (-1, -1) et (1, 1).</p><p id="r-960603" data-claire-element-id="960603">Nous utiliserons l'autre repère dès que nous y aurons inclus les matrices :) . De plus, nous serons dans un premier temps dans un monde 2D, nous ne ferons pas de cube ou autre forme complexe pour commencer. Nous verrons cela un peu plus tard. :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">
<span class="arrow"></span>
<span class="next">Premier affichage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
<span class="next">Afficher un triangle</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Afficheruntriangle"></a><h2>Afficher un triangle</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
<span class="arrow"></span>
<span class="next">Le fonctionnement d&#039;OpenGL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
<span class="next">La classe SceneOpenGL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-afficher-un-triangle-1" data-claire-element-id="960695">Afficher un triangle</h2><p id="r-960606" data-claire-element-id="960606">Maintenant que le blabla théorique est terminé, nous pouvons reprendre la programmation. :magicien:</p><p id="r-960607" data-claire-element-id="960607">Dans le chapitre précédent, nous avons appris que tous les modèles 3D présents dans un jeu étaient constitués de sommets (vertices), puis qu'il fallait les relier pour former une surface. Et si on assemble ces formes, ça donne nos modèles 3D.</p><p id="r-960608" data-claire-element-id="960608">Notre premier exercice est simple : afficher un triangle. Pour pouvoir afficher n'importe quel modèle 3D il faut déjà spécifier ses vertices que nous allons ensuite donner à OpenGL. En général, on définie nos vertices dans un seul tableau, on place chaque coordonnée de vertex à la chaine comme ceci :</p><pre id="r-960609" data-claire-element-id="960609"><code data-claire-semantic="cpp">float vertices = {X_vertex_1, Y_vertex_1, Z_vertex_1,   X_vertex_2, Y_vertex_2, Z_vertex_2,   ...};</code></pre><p id="r-960610" data-claire-element-id="960610">Dans un triangle il y a trois sommets, nous aurons donc 3 vertices.</p><pre id="r-960611" data-claire-element-id="960611"><code data-claire-semantic="cpp">float vertex1[] = {-0.5, -0.5};
float vertex2[] = {0.0, 0.5};
float vertex3[] = {0.5, -0.5};</code></pre><p id="r-960612" data-claire-element-id="960612">N'oubliez pas que nous sommes en 2D pour l'instant, nous n'avons donc que les coordonnées x et y à définir. Ce début de code est bien mais si on utilise 3 tableaux, ça ne fonctionnera pas. Nous devons combiner les trois tableaux pour en former un seul :</p><pre id="r-960613" data-claire-element-id="960613"><code data-claire-semantic="cpp">float vertices[] = {-0.5, -0.5,   0.0, 0.5,   0.5, -0.5};</code></pre><p id="r-960614" data-claire-element-id="960614">Maintenant, il faut envoyer ces coordonnées à OpenGL. Pour envoyer des informations nous avons besoin d'un tableau appelé <strong>&quot;Vertex Attribut&quot;</strong>. Pour ceux qui connaissent les &quot;Vertex Arrays&quot;, c'est la même chose ;) . Sauf que maintenant ce n'est plus une optimisation mais belle et bien la méthode de base pour envoyer nos infos à OpenGL.</p><p id="r-960615" data-claire-element-id="960615">Ces <strong>&quot;Vertex Attributs&quot;</strong> sont déjà inclus dans l'API, il suffit de lui donner des valeurs (nos coordonnées) puis de l'activer. Voici le prototype de la fonction gérant les Vertex Attributs :</p><pre id="r-960616" data-claire-element-id="960616"><code data-claire-semantic="cpp">void glVertexAttribPointer(GLuint index, GLuint size, GLenum type, GLboolean normalized, GLsizei stride, const GLvoid *pointer);</code></pre><ul id="r-960629" data-claire-element-id="960629"><li id="r-960618" data-claire-element-id="960618"><p id="r-960617" data-claire-element-id="960617"><strong>index</strong> : c'est le numéro du tableau, son identifiant.</p></li><li id="r-960620" data-claire-element-id="960620"><p id="r-960619" data-claire-element-id="960619"><strong>size</strong> : c'est le nombre de coordonnées par vertex. En 2D ce sera 2 et en 3D ce sera 3.</p></li><li id="r-960622" data-claire-element-id="960622"><p id="r-960621" data-claire-element-id="960621"><strong>type</strong> : c'est le type de données (float, int, ...).</p></li><li id="r-960624" data-claire-element-id="960624"><p id="r-960623" data-claire-element-id="960623"><strong>normalized</strong> : booléen permettant à OpenGL de normaliser les données (comme les vecteurs).</p></li><li id="r-960626" data-claire-element-id="960626"><p id="r-960625" data-claire-element-id="960625"><strong>stride</strong> : paramètre spécial, on le mettra à zéro tout le temps, nous ne l'utiliserons pas.</p></li><li id="r-960628" data-claire-element-id="960628"><p id="r-960627" data-claire-element-id="960627"><strong>pointer</strong> : c'est le pointeur sur nos données, ici nos coordonnées.</p></li></ul><p id="r-960630" data-claire-element-id="960630">Voyons ce que ça donne avec les données de notre triangle :</p><pre id="r-960631" data-claire-element-id="960631"><code data-claire-semantic="cpp">glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);</code></pre><p id="r-960632" data-claire-element-id="960632">Malheureusement, en l'état, notre tableau est inutilisable, il faut d'abord l'activer avec la fonction :</p><pre id="r-960633" data-claire-element-id="960633"><code data-claire-semantic="cpp">void glEnableVertexAttribArray(GLuint index);</code></pre><p id="r-960634" data-claire-element-id="960634">Le paramètre <strong>index </strong>étant notre identifiant de tableau, ici ce sera 0.</p><p id="r-960635" data-claire-element-id="960635">Bien, maintenant OpenGL sait quels vertices il doit afficher, il ne manque plus qu'à lui dire ... ce qu'il doit faire de ces points. :p</p><p id="r-960636" data-claire-element-id="960636">Pour ça, on utilise une fonction (il y en a en fait deux, mais pour le début de ce tutoriel nous n'utiliserons que la première). Cette fonction permet de dire à OpenGL quelle forme afficher avec les points donnés précédemment. Voici le prototype de la fonction :</p><pre id="r-960637" data-claire-element-id="960637"><code data-claire-semantic="cpp">glDrawArrays(GLenum mode, GLint first, GLsizei count);</code></pre><ul id="r-960644" data-claire-element-id="960644"><li id="r-960639" data-claire-element-id="960639"><p id="r-960638" data-claire-element-id="960638"><strong>mode</strong> : C'est la forme finale (nous verrons cela juste après).</p></li><li id="r-960641" data-claire-element-id="960641"><p id="r-960640" data-claire-element-id="960640"><strong>first</strong> : C'est l'indice de notre premier vertex à afficher(nous lui donnerons un int).</p></li><li id="r-960643" data-claire-element-id="960643"><p id="r-960642" data-claire-element-id="960642"><strong>count</strong> : C'est le nombre de vertices à afficher depuis <strong>first</strong> (nous lui donnerons également un int).</p></li></ul><p id="r-960645" data-claire-element-id="960645">Alors Attention ! :</p><ul id="r-960650" data-claire-element-id="960650"><li id="r-960647" data-claire-element-id="960647"><p id="r-960646" data-claire-element-id="960646">Le paramètre <strong>first</strong> est un indice (comme un indice de tableau), si vous voulez utiliser le premier vertex vous lui donnerez la valeur &quot;0&quot; et pas &quot;1&quot;.</p></li><li id="r-960649" data-claire-element-id="960649"><p id="r-960648" data-claire-element-id="960648">Pour <strong>count</strong>, c'est le contraire. Lui il veut le nombre de vertices à utiliser depuis first. Si vous utilisez 4 vertices vous lui donnerez la valeur &quot;4&quot; et pas &quot;3&quot;.</p></li></ul><p id="r-960651" data-claire-element-id="960651">Exemple : J'ai 4 vertices et je veux afficher un carré. Le premier vertex sera le vertex 0 (le premier vertex), et la valeur de &quot;count&quot; sera 4 car j'ai besoin du vertex 0 + les 3 vertices qui le suivent.</p><p id="r-960652" data-claire-element-id="960652">Passons au paramètre le plus intéressant : <strong>mode</strong>.</p><p id="r-960653" data-claire-element-id="960653">Ce paramètre peut prendre plusieurs formes donc voici les principales :</p><table id="r-960681" data-claire-element-id="960681"><thead id="r-960659" data-claire-element-id="960659"><tr id="r-960658" data-claire-element-id="960658"><th id="r-960655" data-claire-element-id="960655"><p id="r-960654" data-claire-element-id="960654">Valeur</p></th><th id="r-960657" data-claire-element-id="960657"><p id="r-960656" data-claire-element-id="960656">Définition</p></th></tr></thead><tbody id="r-960680" data-claire-element-id="960680"><tr id="r-960664" data-claire-element-id="960664"><td id="r-960661" data-claire-element-id="960661"><p id="r-960660" data-claire-element-id="960660">GL_TRIANGLES</p></td><td id="r-960663" data-claire-element-id="960663"><p id="r-960662" data-claire-element-id="960662">Avec ce mode, chaque groupe de 3 vertices formera un triangle. C'est le mode le plus utilisé.</p></td></tr><tr id="r-960669" data-claire-element-id="960669"><td id="r-960666" data-claire-element-id="960666"><p id="r-960665" data-claire-element-id="960665">GL_POLYGON</p></td><td id="r-960668" data-claire-element-id="960668"><p id="r-960667" data-claire-element-id="960667">Tous les vertices s'assemblent pour former un polygone de type convexe (Hexagone, Heptagone, ...).</p></td></tr><tr id="r-960674" data-claire-element-id="960674"><td id="r-960671" data-claire-element-id="960671"><p id="r-960670" data-claire-element-id="960670">GL_LINES</p></td><td id="r-960673" data-claire-element-id="960673"><p id="r-960672" data-claire-element-id="960672">Chaque duo de vertices formera une ligne.</p></td></tr><tr id="r-960679" data-claire-element-id="960679"><td id="r-960676" data-claire-element-id="960676"><p id="r-960675" data-claire-element-id="960675">GL_TRIANGLE_STRIP</p></td><td id="r-960678" data-claire-element-id="960678"><p id="r-960677" data-claire-element-id="960677">Ici les triangles s'assembleront. Les deux derniers vertices d'un triangle s'assembleront avec un 4ième vertex pour former un nouveau triangle.</p></td></tr></tbody></table><p id="r-960682" data-claire-element-id="960682">Toutes les valeurs possibles ne sont pas représentées mais je vous expose ici les plus utilisées. ;)</p><p id="r-960683" data-claire-element-id="960683">Revenons à notre code, nous avons désormais les différents modes d'affichage. Le but de ce chapitre est d'afficher un triangle, notre mode d'affichage sera donc : GL_TRIANGLES, ce qui donne :</p><pre id="r-960684" data-claire-element-id="960684"><code data-claire-semantic="cpp">glDrawArrays(GL_TRIANGLES, 0, 3);</code></pre><p id="r-960685" data-claire-element-id="960685">La valeur &quot;0&quot; pour commencer l'affichage par le premier vertex, et le &quot;3&quot; pour utiliser les 3 vertices dont le premier sera le vertex &quot;0&quot;.</p><p id="r-960686" data-claire-element-id="960686">Récapitulons tout ça :</p><pre id="r-960687" data-claire-element-id="960687"><code data-claire-semantic="cpp">// Vertices et coordonnées

float vertices[] = {-0.5, -0.5,   0.0, 0.5,   0.5, -0.5};


// Boucle principale

while(!terminer)
{
    // Gestion des évènements

    ....


    // On remplie puis on active le tableau Vertex Attrib 0

    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);
    glEnableVertexAttribArray(0);


    // On affiche le triangle

    glDrawArrays(GL_TRIANGLES, 0, 3);


    // On désactive le tableau Vertex Attrib puisque l'on en a plus besoin

    glDisableVertexAttribArray(0);


    // Actualisation de la fenêtre

    ....
}</code></pre><p id="r-960688" data-claire-element-id="960688">Vous avez dû remarquer la présence d'une nouvelle fonction : <strong>glDisableVertexAttribArray</strong>. Elle permet de désactiver le tableau Vertex Attrib utilisé, le paramètre est le même que celui de la fonction glEnableVertexAttribArray. On désactive le tableau juste après l'affichage des vertices.</p><p id="r-960689" data-claire-element-id="960689">Récapitulons tout avec le code SDL :</p><pre id="r-960690" data-claire-element-id="960690"><code data-claire-semantic="cpp">#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif

#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;


int main(int argc, char **argv)
{	
    // Notre fenêtre
	
    SDL_Window* fenetre(0);
    SDL_GLContext contexteOpenGL(0);
	
    SDL_Event evenements;
    bool terminer(false);
	
	
    // Initialisation de la SDL
	
    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de l'initialisation de la SDL : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();
		
        return -1;
    }
	
	
    // Version d'OpenGL
	
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);
	
	
    // Double Buffer
	
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);
	
	
    // Création de la fenêtre

    fenetre = SDL_CreateWindow(&quot;Test SDL 2.0&quot;, SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 800, 600, SDL_WINDOW_SHOWN | SDL_WINDOW_OPENGL);

    if(fenetre == 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de la creation de la fenetre : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();

        return -1;
    }


    // Création du contexte OpenGL

    contexteOpenGL = SDL_GL_CreateContext(fenetre);

    if(contexteOpenGL == 0)
    {
        std::cout &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_DestroyWindow(fenetre);
        SDL_Quit();

        return -1;
    }


    #ifdef WIN32

        // On initialise GLEW

        GLenum initialisationGLEW( glewInit() );


        // Si l'initialisation a échouée :

        if(initialisationGLEW != GLEW_OK)
        {
            // On affiche l'erreur grâce à la fonction : glewGetErrorString(GLenum code)

            std::cout &lt;&lt; &quot;Erreur d'initialisation de GLEW : &quot; &lt;&lt; glewGetErrorString(initialisationGLEW) &lt;&lt; std::endl;


            // On quitte la SDL

            SDL_GL_DeleteContext(contexteOpenGL);
            SDL_DestroyWindow(fenetre);
            SDL_Quit();

            return -1;
        }

    #endif


    // Vertices et coordonnées

    float vertices[] = {-0.5, -0.5,   0.0, 0.5,   0.5, -0.5};


    // Boucle principale

    while(!terminer)
    {
        // Gestion des évènements

        SDL_WaitEvent(&amp;evenements);

        if(evenements.window.event == SDL_WINDOWEVENT_CLOSE)
            terminer = true;


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT);


        // On remplie puis on active le tableau Vertex Attrib 0

        glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);
        glEnableVertexAttribArray(0);


        // On affiche le triangle

        glDrawArrays(GL_TRIANGLES, 0, 3);


        // On désactive le tableau Vertex Attrib puisque l'on n'en a plus besoin

        glDisableVertexAttribArray(0);


        // Actualisation de la fenêtre

        SDL_GL_SwapWindow(fenetre);
    }


    // On quitte la SDL

    SDL_GL_DeleteContext(contexteOpenGL);
    SDL_DestroyWindow(fenetre);
    SDL_Quit();

    return 0;
}</code></pre><p id="r-960691" data-claire-element-id="960691">Si tout se passe bien, vous devriez avoir une belle fenêtre comme celle-ci :</p><figure id="r-960693" data-claire-element-id="960694"><img id="r-960692" data-claire-element-id="960692" src="medias/uploads.siteduzero.com_files_282001_283000_282503.jpg" alt="Image utilisateur"/></figure><h2 id="r-afficher-plusieurs-triangles" data-claire-element-id="960724">Afficher plusieurs triangles</h2><h3 id="r-les-vertices" data-claire-element-id="960705">Les vertices</h3><p id="r-960696" data-claire-element-id="960696">Comme nous l'avons vu dans le tableau précédemment, le paramètre <strong>GL_TRIANGLES</strong> dans la fonction <strong>glDrawArrays</strong>() permet d'afficher un triangle pour chaque <em><strong>triplet</strong></em> de vertices. <br/> Pour le moment, nous n'utilisons que <strong>3</strong> vertices, donc nous n'avons au final qu'un seul triangle. Or si nous en utilisons <strong>6</strong> nous aurons alors deux triangles. <br/> On peut même aller plus loin et prendre 60, 390, ou 3000 vertices pour en afficher plein ! C'est d'ailleurs ce que font les décors et les personnages dans les jeux-vidéo, ils ne savent utiliser que ça. :p</p><p id="r-960697" data-claire-element-id="960697">Enfin, prenons un exemple plus simple avant d'aller aussi loin. Si nous voulons afficher le rendu suivant ... :</p><figure id="r-960699" data-claire-element-id="960700"><img id="r-960698" data-claire-element-id="960698" src="f.html" alt="Image utilisateur"/></figure><p id="r-960701" data-claire-element-id="960701">... Nous devrons utiliser deux triplets de vertices.</p><p id="r-960702" data-claire-element-id="960702">Ce qu'il faut savoir, c'est qu'il ne faut surtout pas utiliser un tableau pour chaque triangle. On perdrait beaucoup trop de temps à tous les envoyer. A la place, nous devons inclure tous les vertices dans un seul et unique tableau :</p><pre id="r-960703" data-claire-element-id="960703"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {0.0, 0.0,   0.5, 0.0,   0.0, 0.5,          // Triangle 1
                    -0.8, -0.8,   -0.3, -0.8,   -0.8, -0.3};   // Triangle 2</code></pre><p id="r-960704" data-claire-element-id="960704">Toutes nos données sont regroupées dans un seul tableau. Ça ne nous fait qu'un seul envoi à faire c'est plus facile à gérer, ça arrange même OpenGL. ;)</p><h3 id="r-l-affichage-8" data-claire-element-id="960723">L'affichage</h3><p id="r-960706" data-claire-element-id="960706">Au niveau de l'affichage, le code reste identique à celui du triangle unique. C'est-à-dire qu'il faut utiliser les fonctions :</p><ul id="r-960713" data-claire-element-id="960713"><li id="r-960708" data-claire-element-id="960708"><p id="r-960707" data-claire-element-id="960707"><strong>glVertexAttribPointer</strong>() : pour donner les vertices à OpenGL</p></li><li id="r-960710" data-claire-element-id="960710"><p id="r-960709" data-claire-element-id="960709"><strong>glEnableVertexAttribArray</strong>() : pour activer le tableau <strong>Vertex Attrib</strong></p></li><li id="r-960712" data-claire-element-id="960712"><p id="r-960711" data-claire-element-id="960711"><strong>glDrawArrays</strong>() : pour afficher le tout</p></li></ul><p id="r-960714" data-claire-element-id="960714">La seule différence notable va être la valeur du paramètre <strong>count</strong> (nombre de vertices à prendre en compte) de la fonction <strong>glDrawArrays</strong>(). Celui-ci était égal à <strong>3</strong> pour un seul triangle, nous la passerons désormais à <strong>6</strong> pour en afficher deux. L'appel à la fonction ressemblerait donc à ceci :</p><pre id="r-960715" data-claire-element-id="960715"><code data-claire-semantic="cpp">// Affichage des triangles

glDrawArrays(GL_TRIANGLES, 0, 6);</code></pre><p id="r-960716" data-claire-element-id="960716">Ce qui donne le code source de la boucle principale suivant :</p><pre id="r-960717" data-claire-element-id="960717"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {0.0, 0.0,   0.5, 0.0,   0.0, 0.5,          // Triangle 1
                    -0.8, -0.8,   -0.3, -0.8,   -0.8, -0.3};   // Triangle 2


// Boucle principale

while(!terminer)
{
    // Gestion des évènements

    SDL_WaitEvent(&amp;evenements);

    if(evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT);


    // On remplie puis on active le tableau Vertex Attrib 0

    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);
    glEnableVertexAttribArray(0);


    // On affiche des triangles

    glDrawArrays(GL_TRIANGLES, 0, 6);


    // On désactive le tableau Vertex Attrib puisque l'on n'en a plus besoin

    glDisableVertexAttribArray(0);


    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(fenetre);
}</code></pre><p id="r-960718" data-claire-element-id="960718">Si vous compilez ce code, vous devriez obtenir :</p><figure id="r-960720" data-claire-element-id="960721"><img id="r-960719" data-claire-element-id="960719" src="medias/uploads.siteduzero.com_files_282001_283000_282504.png" alt="Image utilisateur"/></figure><p id="r-960722" data-claire-element-id="960722">Le tour est joué. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
<span class="arrow"></span>
<span class="next">Le fonctionnement d&#039;OpenGL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
<span class="next">La classe SceneOpenGL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LaclasseSceneOpenGL"></a><h2>La classe SceneOpenGL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
<span class="arrow"></span>
<span class="next">Afficher un triangle</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">
<span class="next">Introduction aux shaders</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-960726" data-claire-element-id="960726">Je ne sais pas si vous l'avez remarqué, mais depuis le début du tutoriel nous n'avons pas codé une seule classe. À vrai dire c'est normal, nous n'en avions pas vraiment besoin jusqu'ici. <br/> Cependant nos programmes vont commencer à se complexifier donc autant prendre les bonnes habitudes dès maintenant.</p><h2 id="r-la-classe-sceneopengl" data-claire-element-id="960791">La classe SceneOpenGL</h2><h3 id="r-le-header-3" data-claire-element-id="960767">Le header</h3><p id="r-960727" data-claire-element-id="960727">Pour le moment, nous n'aurons besoin que d'une seule classe dans nos programmes de test. Elle devra être capable de remplir plusieurs rôles :</p><ul id="r-960734" data-claire-element-id="960734"><li id="r-960729" data-claire-element-id="960729"><p id="r-960728" data-claire-element-id="960728">Créer la fenêtre SDL et le contexte OpenGL.</p></li><li id="r-960731" data-claire-element-id="960731"><p id="r-960730" data-claire-element-id="960730">Initialiser tous les objets d'une scène (personnages, caisses, sol, ... Nous verrons cela un peu plus tard ;) ).</p></li><li id="r-960733" data-claire-element-id="960733"><p id="r-960732" data-claire-element-id="960732">Gérer l'interaction entre les objets tout au long du programme.</p></li></ul><p id="r-960735" data-claire-element-id="960735">Pour remplir ces objetifs, nous allons créer plusieurs méthodes, mais avant cela nous devons déclarer la classe <em>C++</em> qui s'occupera de tout ça. Cette classe s'appellera : <em><strong>SceneOpenGL</strong></em>. Commençons donc par créer deux fichiers <em><strong>SceneOpenGL.h</strong></em> et <em><strong>SceneOpenGL.cpp</strong></em>.</p><p id="r-960736" data-claire-element-id="960736">Une classe en C++ est composée de méthodes et d'attributs. Pour les méthodes, on voit déjà à peu près ce que l'on va faire. En revanche, on ne sait pas encore de quels attributs nous aurons besoin.</p><p id="r-960737" data-claire-element-id="960737">Si on regarde le début du code pour afficher le triangle blanc, nous voyons trois variables importantes :</p><pre id="r-960738" data-claire-element-id="960738"><code data-claire-semantic="cpp">// Variables 

SDL_Window* fenetre(0);
SDL_GLContext contexteOpenGL(0);
SDL_Event evenements;</code></pre><aside id="r-960740" data-claire-element-id="960740" data-claire-semantic="information"><p id="r-960739" data-claire-element-id="960739">Le booléen <em><strong>terminer</strong></em> ne sera pas utilisé en tant qu'attribut mais en temps que simple variable dans une méthode.</p></aside><p id="r-960741" data-claire-element-id="960741">On voit dans cette liste 3 variables correspondant :</p><ul id="r-960748" data-claire-element-id="960748"><li id="r-960743" data-claire-element-id="960743"><p id="r-960742" data-claire-element-id="960742">À la fenêtre</p></li><li id="r-960745" data-claire-element-id="960745"><p id="r-960744" data-claire-element-id="960744">Au contexte OpenGL</p></li><li id="r-960747" data-claire-element-id="960747"><p id="r-960746" data-claire-element-id="960746">Aux évènements SDL</p></li></ul><aside id="r-960750" data-claire-element-id="960750" data-claire-semantic="warning"><p id="r-960749" data-claire-element-id="960749">On rajoutera le préfixe <strong><em>&quot;m_&quot;</em></strong> à chacune de ces variables pour bien différencier les attributs des variables normales.</p></aside><p id="r-960751" data-claire-element-id="960751">Ces 3 variables deviendront les attributs de notre classe. On en rajoutera même trois supplémentaires qui correspondront :</p><ul id="r-960758" data-claire-element-id="960758"><li id="r-960753" data-claire-element-id="960753"><p id="r-960752" data-claire-element-id="960752">Au titre de la fenêtre.</p></li><li id="r-960755" data-claire-element-id="960755"><p id="r-960754" data-claire-element-id="960754">À sa largeur</p></li><li id="r-960757" data-claire-element-id="960757"><p id="r-960756" data-claire-element-id="960756">À sa hauteur</p></li></ul><p id="r-960759" data-claire-element-id="960759">Si on résume tout ça, nous avons une classe <strong><em>SceneOpenGL</em></strong> avec <strong>6 attributs</strong>. Le header ressemblera donc à ceci :</p><pre id="r-960760" data-claire-element-id="960760"><code data-claire-semantic="cpp">#ifndef DEF_SCENEOPENGL
#define DEF_SCENEOPENGL

#include &lt;string&gt;


class SceneOpenGL
{
    public:

    SceneOpenGL();
    ~SceneOpenGL();


    private:

    std::string m_titreFenetre;
    int m_largeurFenetre;
    int m_hauteurFenetre;

    SDL_Window* m_fenetre;
    SDL_GLContext m_contexteOpenGL;	
    SDL_Event m_evenements;
};

#endif</code></pre><p id="r-960761" data-claire-element-id="960761">Et voici donc le squelette de tous nos futurs programmes. :D</p><p id="r-960762" data-claire-element-id="960762">Bon pour le moment c'est un peu vide, on va habiller un peu tout ça. On va notamment ajouter deux éléments. Premièrement, il faut ajouter tous les includes concernant la <strong>SDL</strong> et <strong>OpenGL</strong> :</p><pre id="r-960763" data-claire-element-id="960763"><code data-claire-semantic="cpp">// Includes 

#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif

#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;</code></pre><p id="r-960764" data-claire-element-id="960764">Deuxièmement, il faut modifier le <em>constructeur</em> de la classe pour prendre en compte les paramètres de création de la fenêtre (titre, largeur et hauteur) :</p><pre id="r-960765" data-claire-element-id="960765"><code data-claire-semantic="cpp">SceneOpenGL(std::string titreFenetre, int largeurFenetre, int hauteurFenetre);</code></pre><p id="r-960766" data-claire-element-id="960766">Pour le moment, rien de bien compliqué. ^^</p><h3 id="r-les-methodes-12" data-claire-element-id="960787">Les méthodes</h3><p id="r-960768" data-claire-element-id="960768">Si on reprend la liste des objectifs de la classe, on retrouve trois points importants :</p><ul id="r-960775" data-claire-element-id="960775"><li id="r-960770" data-claire-element-id="960770"><p id="r-960769" data-claire-element-id="960769">Créer la fenêtre SDL et le contexte OpenGL.</p></li><li id="r-960772" data-claire-element-id="960772"><p id="r-960771" data-claire-element-id="960771">Initialiser tous les objets d'une scène (personnages, caisses, sol, ...).</p></li><li id="r-960774" data-claire-element-id="960774"><p id="r-960773" data-claire-element-id="960773">Gérer l'interaction entre les objets tout au long du programme.</p></li></ul><p id="r-960776" data-claire-element-id="960776">Nous allons créer une méthode pour chaque point de cette liste.</p><p id="r-960777" data-claire-element-id="960777">La première méthode consistera donc à initialiser la fenêtre et le contexte OpenGL dans lequel nous allons évoluer :</p><pre id="r-960778" data-claire-element-id="960778"><code data-claire-semantic="cpp">bool initialiserFenetre();</code></pre><p id="r-960779" data-claire-element-id="960779">Elle renverra un <em><strong>booléen</strong></em> pour confirmer ou non la création de la fenêtre. Nous mettrons à l'intérieur tout le code permettant de générer la fenêtre.</p><p id="r-960780" data-claire-element-id="960780">Pour le deuxième point, nous devrons initialiser tout ce qui concerne <em>OpenGL</em> (mis à part le contexte vu qu'il est créé juste avant). Pour le moment, nous n'avons que la librairie <em><strong>GLEW</strong></em> à initialiser.</p><p id="r-960781" data-claire-element-id="960781">Généralement, la fonction qui s'occupe d'initialiser <em>OpenGL</em> s'appelle <em><strong>initGL</strong></em>(), nous appellerons donc notre méthode de la même façon :</p><pre id="r-960782" data-claire-element-id="960782"><code data-claire-semantic="cpp">bool initGL();</code></pre><p id="r-960783" data-claire-element-id="960783">Comme la méthode précédente, elle renverra un <em><strong>booléen</strong></em> pour savoir si l'initialisation s'est bien passée.</p><p id="r-960784" data-claire-element-id="960784">Pour le troisième et dernier point, nous devons gérer la boucle principale du programme. Nous créerons donc une méthode <em><strong>bouclePrincipale</strong></em>() qui s'occupera de gérer tout ça :</p><pre id="r-960785" data-claire-element-id="960785"><code data-claire-semantic="cpp">void bouclePrincipale();</code></pre><p id="r-960786" data-claire-element-id="960786">Elle ne renverra aucune valeur.</p><h3 id="r-resume-du-header" data-claire-element-id="960790">Résumé du Header</h3><p id="r-960788" data-claire-element-id="960788">Si on met tout ce que l'on vient de voir dans le header, on a : une classe <em><strong>SceneOpenGL</strong></em>, des <em><strong>includes</strong></em> pour gérer la SDL et OpenGL, <em><strong>6 attributs</strong></em> et <em><strong>3 méthodes</strong></em> :</p><pre id="r-960789" data-claire-element-id="960789"><code data-claire-semantic="cpp">#ifndef DEF_SCENEOPENGL
#define DEF_SCENEOPENGL


// Includes 

#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif

#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;


// Classe

class SceneOpenGL
{
    public:

    SceneOpenGL(std::string titreFenetre, int largeurFenetre, int hauteurFenetre);
    ~SceneOpenGL();

    bool initialiserFenetre();
    bool initGL();
    void bouclePrincipale();


    private:

    std::string m_titreFenetre;
    int m_largeurFenetre;
    int m_hauteurFenetre;

    SDL_Window* m_fenetre;
    SDL_GLContext m_contexteOpenGL;	
    SDL_Event m_evenements;
};

#endif</code></pre><h2 id="r-implementation-de-la-classe" data-claire-element-id="960848">Implémentation de la classe</h2><p id="r-960792" data-claire-element-id="960792">Dans cette dernière sous-partie, on va se reposer un peu. En effet, on a déjà tout codé avant, on n'a plus qu'à jouer au puzzle en coupant notre code et en mettant les bons morceaux au bon endroit. :p</p><h3 id="r-constructeur-et-destructeur-2" data-claire-element-id="960799">Constructeur et Destructeur</h3><p id="r-960793" data-claire-element-id="960793">Pour le constructeur rien de plus simple, on initialise nos attributs sans oublier de passer les 3 paramètres du constructeur concernant la fenêtre :</p><pre id="r-960794" data-claire-element-id="960794"><code data-claire-semantic="cpp">SceneOpenGL::SceneOpenGL(std::string titreFenetre, int largeurFenetre, int hauteurFenetre) : m_titreFenetre(titreFenetre), m_largeurFenetre(largeurFenetre), 
                                                                                             m_hauteurFenetre(hauteurFenetre), m_fenetre(0), m_contexteOpenGL(0)
{

}</code></pre><p id="r-960795" data-claire-element-id="960795">Pour le destructeur, on détruit simplement le contexte et la fenêtre, puis on quitte la librairie SDL :</p><pre id="r-960796" data-claire-element-id="960796"><code data-claire-semantic="cpp">SceneOpenGL::~SceneOpenGL()
{
    SDL_GL_DeleteContext(m_contexteOpenGL);
    SDL_DestroyWindow(m_fenetre);
    SDL_Quit();
}</code></pre><aside id="r-960798" data-claire-element-id="960798" data-claire-semantic="information"><p id="r-960797" data-claire-element-id="960797">N'oubliez pas de rajouter le prefixe &quot;<strong><em>m_</em></strong>&quot; aux attributs quand vous copiez le code.</p></aside><h3 id="r-les-methodes-initialiserfenetre-et-initgl" data-claire-element-id="960821">Les méthodes initialiserFenetre() et initGL()</h3><p id="r-960800" data-claire-element-id="960800">Ici on sait déjà ce que l'on va mettre. On va implémenter le code permettant de créer la fenêtre et le contexte OpenGL, nous connaissons ce code depuis le chapitre précédent. Pour migrer celui-ci on va :</p><ul id="r-960809" data-claire-element-id="960809"><li id="r-960802" data-claire-element-id="960802"><p id="r-960801" data-claire-element-id="960801">Prendre tout le code gérant l'initialisation de la SDL et du contexte.</p></li><li id="r-960804" data-claire-element-id="960804"><p id="r-960803" data-claire-element-id="960803">Remplacer les deux occurrences de <strong>fenetre</strong> par <em><strong>&quot;m_fenetre&quot;</strong></em> et de <strong>contexteOpenGL</strong> par <em><strong>&quot;m_contexteOpenGL&quot;</strong></em>.</p></li><li id="r-960806" data-claire-element-id="960806"><p id="r-960805" data-claire-element-id="960805">Remplacer les valeurs retournées par <em><strong>&quot;true&quot;</strong></em> pour <em><strong>0</strong></em> et <em><strong>&quot;false&quot;</strong></em> pour <em><strong>-1</strong></em>.</p></li><li id="r-960808" data-claire-element-id="960808"><p id="r-960807" data-claire-element-id="960807">Remplacer le paramètre <strong>title</strong> de la fonction <em><strong>SDL_CreateWindow()</strong></em> par la chaine de caractères de l'attribut <em><strong>m_titreFenetre</strong></em> soit <em><strong>m_titreFenetre.c_str()</strong></em>.</p></li></ul><p id="r-960810" data-claire-element-id="960810">Encore une fois rien de bien compliqué. ^^</p><p id="r-960811" data-claire-element-id="960811">En code, ça nous donne ceci :</p><pre id="r-960812" data-claire-element-id="960812"><code data-claire-semantic="cpp">bool SceneOpenGL::initialiserFenetre()
{
    // Initialisation de la SDL
	
    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de l'initialisation de la SDL : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();
		
        return false;
    }
	
	
    // Version d'OpenGL
	
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);
	
	
    // Double Buffer
	
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);
	
	
    // Création de la fenêtre
	
    m_fenetre = SDL_CreateWindow(m_titreFenetre.c_str(), SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, m_largeurFenetre, m_hauteurFenetre, SDL_WINDOW_SHOWN | SDL_WINDOW_OPENGL);

    if(m_fenetre == 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de la creation de la fenetre : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();

        return false;
    }


    // Création du contexte OpenGL

    m_contexteOpenGL = SDL_GL_CreateContext(m_fenetre);

    if(m_contexteOpenGL == 0)
    {
        std::cout &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_DestroyWindow(m_fenetre);
        SDL_Quit();

        return false;
    }

    return true;
}</code></pre><p id="r-960813" data-claire-element-id="960813">On passe maintenant à la méthode <em><strong>initGL</strong></em>(). Pour le moment, nous n'avons pas grand chose à mettre à l’intérieur mise à part l'initialisation de la librairie <em><strong>GLEW</strong></em> pour Windows.</p><p id="r-960814" data-claire-element-id="960814">Et comme précédemment, il va falloir modifier le nom des attributs <em><strong>fenetre</strong></em> et <em><strong>contexteOpenGL</strong></em> en leur ajoutant le prefix <em><strong>&quot;m_&quot;</strong></em>. Nous rajouterons également deux <em><strong>return</strong></em> dans la méthode :</p><ul id="r-960819" data-claire-element-id="960819"><li id="r-960816" data-claire-element-id="960816"><p id="r-960815" data-claire-element-id="960815">Un si l'initialisation échoue (donc <em><strong>return false</strong></em>).</p></li><li id="r-960818" data-claire-element-id="960818"><p id="r-960817" data-claire-element-id="960817">Et l'autre pour indiquer que l'initialisation s'est bien déroulée (<em><strong>return true</strong></em>).</p></li></ul><pre id="r-960820" data-claire-element-id="960820"><code data-claire-semantic="cpp">bool SceneOpenGL::initGL()
{
    #ifdef WIN32

        // On initialise GLEW

        GLenum initialisationGLEW( glewInit() );


        // Si l'initialisation a échoué :

        if(initialisationGLEW != GLEW_OK)
        {
            // On affiche l'erreur grâce à la fonction : glewGetErrorString(GLenum code)

            std::cout &lt;&lt; &quot;Erreur d'initialisation de GLEW : &quot; &lt;&lt; glewGetErrorString(initialisationGLEW) &lt;&lt; std::endl;


            // On quitte la SDL

            SDL_GL_DeleteContext(m_contexteOpenGL);
            SDL_DestroyWindow(m_fenetre);
            SDL_Quit();

            return false;
        }

    #endif


    // Tout s'est bien passé, on retourne true

    return true;
}</code></pre><h3 id="r-la-methode-boucleprincipale" data-claire-element-id="960830">La méthode bouclePrincipale()</h3><p id="r-960822" data-claire-element-id="960822">Allez on passe à la dernière méthode, c'est dans celle-ci que va se passer la quasi totalité du programme.</p><p id="r-960823" data-claire-element-id="960823">Dans cette méthode, on commence par déclarer le booléen <strong><em>terminer</em></strong> que vous devez déjà connaitre. :p On ne l'a pas déclaré en temps qu'attribut car il ne sert que dans la boucle <strong>while</strong>.</p><p id="r-960824" data-claire-element-id="960824">Après ce booléen, on va en profiter pour déclarer notre fameux tableau de vertices. Dans le futur, nous ferons des objets spécialement dédiés pour afficher nos modèles. Mais pour le moment, nous n'avons que de simples vertices à afficher, on peut donc se passer de classe.</p><p id="r-960825" data-claire-element-id="960825">Voici donc le début de la méthode <em><strong>bouclePrincipale</strong></em>() :</p><pre id="r-960826" data-claire-element-id="960826"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    bool terminer(false);
    float vertices[] = {-0.5, -0.5,   0.0, 0.5,   0.5, -0.5};
}</code></pre><p id="r-960827" data-claire-element-id="960827">Pour le reste de la méthode, il suffit simplement d'ajouter la boucle <strong>while</strong> que nous avons déjà codé. :)</p><p id="r-960828" data-claire-element-id="960828">Encore une fois, je me répète mais n'oubliez pas d'ajouter le <strong>préfixe</strong> &quot;<em><strong>m_</strong></em>&quot; aux attributs <em><strong>evenements</strong></em> et <em><strong>fenetre</strong></em> quand vous copiez le code :</p><pre id="r-960829" data-claire-element-id="960829"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables
	
    bool terminer(false);
    float vertices[] = {-0.5, -0.5,   0.0, 0.5,   0.5, -0.5};
	
	
    // Boucle principale
	
    while(!terminer)
    {
        // Gestion des évènements
		
        SDL_WaitEvent(&amp;m_evenements);
		
        if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
            terminer = 1;
		
		
        // Nettoyage de l'écran
		
        glClear(GL_COLOR_BUFFER_BIT);
		
		
        // On remplie puis on active le tableau Vertex Attrib 0
		
        glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);
        glEnableVertexAttribArray(0);
	  	
		
        // On affiche le triangle
		
        glDrawArrays(GL_TRIANGLES, 0, 3);
		
		
        // On désactive le tableau Vertex Attrib puisque l'on n'en a plus besoin
		
        glDisableVertexAttribArray(0);
		
		
        // Actualisation de la fenêtre
		
        SDL_GL_SwapWindow(m_fenetre); 
    }
}</code></pre><h3 id="r-le-fichier-main-cpp-1" data-claire-element-id="960847">Le fichier main.cpp</h3><p id="r-960831" data-claire-element-id="960831">Comme d'habitude en C++, la fonction <em><strong>main()</strong></em> sera la fonction la moins chargée du programme. Jusqu'à maintenant, nous codions tout à l'intérieur de cette fonction, ce qui la rendait un peu illisible.</p><p id="r-960832" data-claire-element-id="960832">Maintenant, nous allons juste déclarer un objet, l'initialiser et lancer sa boucle principale. ^^ Pour ça, il faut inclure le <em>header</em> de la classe <em><strong>SceneOpenGL</strong></em> dans le fichier <em>main.cpp</em> :</p><pre id="r-960833" data-claire-element-id="960833"><code data-claire-semantic="cpp">#include &quot;SceneOpenGL.h&quot;</code></pre><p id="r-960834" data-claire-element-id="960834">Ensuite, on va déclarer un objet de type <em><strong>SceneOpenGL</strong></em> avec les bons paramètres :</p><pre id="r-960835" data-claire-element-id="960835"><code data-claire-semantic="cpp">int main(int argc, char **argv)
{
    // Création de la sène
	
    SceneOpenGL scene(&quot;Chapitre 3&quot;, 800, 600);
}</code></pre><p id="r-960836" data-claire-element-id="960836">Maintenant, il faut appeler les deux méthodes qui permettent d'initialiser le programme correctement à savoir <em><strong>initialiserFenetre</strong></em>() et <em><strong>initGL</strong></em>(). De plus, il faut vérifier que ces méthodes retournent bien le booléen <strong>true</strong> et pas <strong>false</strong>. Si au moins une des deux initialisions échoue, alors on quitte le programme :</p><pre id="r-960837" data-claire-element-id="960837"><code data-claire-semantic="cpp">// Initialisation de la scène
	
if(scene.initialiserFenetre() == false)
    return -1;
	
if(scene.initGL() == false)
    return -1;</code></pre><p id="r-960838" data-claire-element-id="960838">Enfin, on appelle la méthode <em><strong>bouclePrincipale</strong></em>() pour lancer la scène OpenGL :</p><pre id="r-960839" data-claire-element-id="960839"><code data-claire-semantic="cpp">// Boucle Principale
	
scene.bouclePrincipale();</code></pre><p id="r-960840" data-claire-element-id="960840">N'oublions pas le <em><strong>return 0</strong></em> lorsque l'on quittera le programme :</p><pre id="r-960841" data-claire-element-id="960841"><code data-claire-semantic="cpp">// Fin du programme

return 0;</code></pre><p id="r-960842" data-claire-element-id="960842">Si on résume tout ça :</p><pre id="r-960843" data-claire-element-id="960843"><code data-claire-semantic="cpp">#include &quot;SceneOpenGL.h&quot;


int main(int argc, char **argv)
{
    // Création de la sène
	
    SceneOpenGL scene(&quot;Chapitre 3&quot;, 800, 600);
	
	
    // Initialisation de la scène
	
    if(scene.initialiserFenetre() == false)
	return -1;
	
    if(scene.initGL() == false)
	return -1;
	
	
    // Boucle Principale
	
    scene.bouclePrincipale();
	
	
    // Fin du programme
	
    return 0;
}</code></pre><p id="r-960844" data-claire-element-id="960844">Et voilà ! Il ne vous reste plus qu'à compiler tout ça. Vous devriez avoir le même résultat qu'au dessus mais vous avez codée proprement une classe en C++ avec du code OpenGL à l'intérieur. ^^</p><p id="r-960845" data-claire-element-id="960845">Nous ferons plein de classes au fur et à mesure de ce tuto, vous allez vite en prendre l'habitude. ;)</p><p id="r-960846" data-claire-element-id="960846"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/c9df16176euruw6/Premier affichage.zip?token_hash=AAGbiZAWCtyHb7P4SWcqaxgEMuY4wai9Gk2kr0dTNwyTWQ&amp;dl=1">Code Source C++ du Chapitre 3</a></strong></p><h2 id="r-exercices-36" data-claire-element-id="960897">Exercices</h2><h3 id="r-enonces-1" data-claire-element-id="960862">Énoncés</h3><p id="r-960849" data-claire-element-id="960849">Tout au long de ce tutoriel, je vous ferai faire quelques petits exercices pour que vous appliquiez ce que nous aurons vu dans les chapitres. Ce seront des exercices assez simples, il n'y aura rien de farfelu je vous rassure. Évidemment, vous avez le droit de vous aider du cours, je ne vous demande pas de tout retenir d'un coup à chaque fois. D'ailleurs, les solutions sont fournies juste après les énoncés, ne les regardez pas avant sinon ça n'a aucun intérêt. ;)</p><p id="r-960850" data-claire-element-id="960850"><em><strong>Exercice 1</strong></em> : Avec les notions vues dans ce chapitre, affichez un triangle ayant les coordonnées présentes ci-dessous. Vous n'avez besoin de modifier que les vertices par rapport aux exemples du cours, inutile de toucher au reste.</p><figure id="r-960852" data-claire-element-id="960853"><img id="r-960851" data-claire-element-id="960851" src="medias/uploads.siteduzero.com_files_420001_421000_420410.png" alt="Image utilisateur"/></figure><p id="r-960854" data-claire-element-id="960854"><em><strong>Exercice 2</strong></em> : Reprenez le même triangle que l'exercice précédent mais modifiez ses vertices pour l'inverser :</p><figure id="r-960856" data-claire-element-id="960857"><img id="r-960855" data-claire-element-id="960855" src="medias/uploads.siteduzero.com_files_420001_421000_420411.png" alt="Image utilisateur"/></figure><p id="r-960858" data-claire-element-id="960858"><em><strong>Exercice 3</strong></em> : On passe un cran au-dessus maintenant. Je vous demande d'afficher la forme suivante en utilisant deux triangles distincts (donc pas avec le paramètre GL_TRIANGLE_STRIP) :</p><figure id="r-960860" data-claire-element-id="960861"><img id="r-960859" data-claire-element-id="960859" src="medias/uploads.siteduzero.com_files_420001_421000_420412.png" alt="Image utilisateur"/></figure><h3 id="r-solutions-2" data-claire-element-id="960896">Solutions</h3><p id="r-960863" data-claire-element-id="960863"><em><strong>Exercice 1</strong></em> :</p><p id="r-960864" data-claire-element-id="960864">La seule chose à modifier ici c'est le tableau de vertices. L’énoncé demandait un triangle avec des coordonnées spécifiques, le tableau de valeurs ressemble donc à ceci :</p><pre id="r-960865" data-claire-element-id="960865"><code data-claire-semantic="cpp">float vertices[] = {-0.5, 0.0,   0.5, -0.5,   0.5, 0.5};</code></pre><p id="r-960866" data-claire-element-id="960866">Vous remarquerez que j'ai délimité les coordonnées de façon à bien différencier les vertices. ;)</p><p id="r-960867" data-claire-element-id="960867">Je devrais en théorie m’arrêter là pour la correction, mais pour ceux qui le souhaitent je donne en détail le code source de l'affichage des vertices. Celui-ci ne change absolument pas par rapport aux exemples du cours, mais si ça peut vous aider à comprendre un peu mieux je vais le ré-expliquer rapidement.</p><p id="r-960868" data-claire-element-id="960868">Premièrement, on reprend le code de la boucle principale avec sa gestion d'évènements et son actualisation de fenêtre :</p><pre id="r-960869" data-claire-element-id="960869"><code data-claire-semantic="cpp">// Boucle principale

while(!terminer)
{
    // Gestion des évènements

    SDL_WaitEvent(&amp;m_evenements);

    if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;




    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(m_fenetre);
}</code></pre><p id="r-960870" data-claire-element-id="960870">Le code d'affichage consiste simplement à appeler les fonctions :</p><ul id="r-960877" data-claire-element-id="960877"><li id="r-960872" data-claire-element-id="960872"><p id="r-960871" data-claire-element-id="960871"><strong>glClear</strong>() pour nettoyer ce qui était présent avant</p></li><li id="r-960874" data-claire-element-id="960874"><p id="r-960873" data-claire-element-id="960873"><strong>glVertexAttribPointer</strong>() pour donner les vertices à OpenGL</p></li><li id="r-960876" data-claire-element-id="960876"><p id="r-960875" data-claire-element-id="960875"><strong>glDrawArrays</strong>() pour les afficher</p></li></ul><pre id="r-960878" data-claire-element-id="960878"><code data-claire-semantic="cpp">// Nettoyage de l'écran

glClear(GL_COLOR_BUFFER_BIT);


// Tableau Vertex Attrib 0 pour envoyer les vertices

glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);


// Affichage du triangle

glDrawArrays(GL_TRIANGLES, 0, 3);</code></pre><p id="r-960879" data-claire-element-id="960879">Il ne faut bien sûr pas oublier d'activer le tableau <strong>Vertex Attrib</strong> au moment d'envoyer les vertices, puis de le désactiver quand on n'en a plus besoin :</p><pre id="r-960880" data-claire-element-id="960880"><code data-claire-semantic="cpp">// Nettoyage de l'écran

glClear(GL_COLOR_BUFFER_BIT);


// Tableau Vertex Attrib 0 pour envoyer les vertices

glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);


// Activation du tableau Vertex Attrib

glEnableVertexAttribArray(0);


// Affichage du triangle

glDrawArrays(GL_TRIANGLES, 0, 3);


// Désactivation du tableau Vertex Attrib

glDisableVertexAttribArray(0);</code></pre><p id="r-960881" data-claire-element-id="960881">Ce qui donne le code source suivant pour la boucle principale :</p><pre id="r-960882" data-claire-element-id="960882"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {-0.5, 0.0,   0.5, -0.5,   0.5, 0.5};


// Boucle principale

while(!terminer)
{
    // Gestion des évènements

    SDL_WaitEvent(&amp;m_evenements);

    if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT);


    // Tableau Vertex Attrib 0 pour envoyer les vertices

    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);


    // Activation du tableau Vertex Attrib

    glEnableVertexAttribArray(0);


    // Affichage du triangle

    glDrawArrays(GL_TRIANGLES, 0, 3);


    // Désactivation du tableau Vertex Attrib

    glDisableVertexAttribArray(0);


    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(m_fenetre);
}</code></pre><p id="r-960883" data-claire-element-id="960883">Exercice terminé. :)</p><p id="r-960884" data-claire-element-id="960884"><em><strong>Exercice 2</strong></em> :</p><p id="r-960885" data-claire-element-id="960885">Pour cet exercice, il suffit juste de modifier notre tableau de vertices. On prend donc notre schéma pour en tirer les coordonnées suivantes :</p><pre id="r-960886" data-claire-element-id="960886"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {0.5, 0.0,   -0.5, -0.5,   -0.5, 0.5};</code></pre><p id="r-960887" data-claire-element-id="960887"><em><strong>Exercice 3</strong></em> :</p><p id="r-960888" data-claire-element-id="960888">Cet exercice est un poil plus compliqué que les deux autres mais il n'y a rien de dur si on regarde dans le fond. :)</p><p id="r-960889" data-claire-element-id="960889">La forme demandée est évidemment constituée de deux triangles, il faut donc commencer par déclarer deux tableaux de vertices qui contiendront les coordonnées de ces deux triangles :</p><pre id="r-960890" data-claire-element-id="960890"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {-0.5, 0.0,   0.0, 1.0,   0.5, 0.0,          // Triangle 1
                    -0.5, 0.0,   0.0, -1.0,   0.5, 0.0};        // Triangle 2</code></pre><p id="r-960891" data-claire-element-id="960891">Il faut évidemment modifier l'appel à la fonction <strong>glDrawArrays</strong>() pour qu'elle prenne en compte les <strong>6</strong> vertices et non uniquement <strong>3</strong> :</p><pre id="r-960892" data-claire-element-id="960892"><code data-claire-semantic="cpp">// Affichage du triangle

glDrawArrays(GL_TRIANGLES, 0, 6);</code></pre><p id="r-960893" data-claire-element-id="960893">Le reste du code ne change pas.</p><p id="r-960894" data-claire-element-id="960894">Ah, nous avons enfin pu afficher quelque chose (même si ce n'est un simple triangle), nous avons enfin pu faire bosser notre carte graphique qui commençait légèrement à s'endormir. :p</p><p id="r-960895" data-claire-element-id="960895">Rappelez-vous bien de ce que nous avons vu ici, nous réutiliserons tout ça dans les futurs chapitres.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
<span class="arrow"></span>
<span class="next">Afficher un triangle</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">
<span class="next">Introduction aux shaders</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Introductionauxshaders"></a><h2>Introduction aux shaders</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
<span class="arrow"></span>
<span class="next">La classe SceneOpenGL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
<span class="next">Qu&#039;est-ce qu&#039;un Shader ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-960900" data-claire-element-id="960900">Ah c'est un vaste sujet que nous allons aborder aujourd'hui :) . Tellement vaste que nous allons le découper en 4 chapitres dont le premier sera celui-ci. Nous verrons les trois autres beaucoup plus tard, vous comprendrez pourquoi. Bref, il est temps de découvrir ce que sont ces mystérieux Shaders. :magicien:</p>
</div><a name="Qu039est-cequ039unShader"></a><h2>Qu&#039;est-ce qu&#039;un Shader ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">
<span class="arrow"></span>
<span class="next">Introduction aux shaders</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
<span class="next">Utilisation des shaders</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-introduction-22" data-claire-element-id="960931">Introduction</h2><p id="r-960901" data-claire-element-id="960901">Commençons par un peu de théorie. ;)</p><p id="r-960902" data-claire-element-id="960902">Comme vous le savez, OpenGL est une librairie qui tire sa puissance de la carte graphique. Or lorsque nous programmons, nous n'avons pas accès à cette carte mais uniquement au processeur et à la RAM. Comment fait notre programme pour l'exploiter me direz-vous ?</p><p id="r-960903" data-claire-element-id="960903">En réalité, OpenGL va bidouiller pas mal de choses dans la carte lorsque nous appelons certaines fonctions comme <strong>glDrawArrays</strong>(). Voyons d’ailleurs ce qui se passe entre le moment où l’on appelle cette fonction et le moment où la scène s’affiche à l’écran :</p><figure id="r-960905" data-claire-element-id="960906"><img id="r-960904" data-claire-element-id="960904" src="medias/uploads.siteduzero.com_files_282001_283000_282507.jpg" alt="Image utilisateur"/></figure><ul id="r-960919" data-claire-element-id="960919"><li id="r-960908" data-claire-element-id="960908"><p id="r-960907" data-claire-element-id="960907"><strong>Définition des coordonnées</strong> : Dans un premier temps, nous définissons les coordonnées de vertices. Ça on sait le faire grâce à la fonction <strong>glVertexAttribPointer</strong>().</p></li><li id="r-960910" data-claire-element-id="960910"><p id="r-960909" data-claire-element-id="960909"><strong>Vertex Shader</strong> : Nous verrons cette étape dans quelques minutes. ;)</p></li><li id="r-960912" data-claire-element-id="960912"><p id="r-960911" data-claire-element-id="960911"><strong>Pixelisation des triangles</strong> : C'est le moment où une forme géométrique est convertie en pixels.</p></li><li id="r-960914" data-claire-element-id="960914"><p id="r-960913" data-claire-element-id="960913"><strong>Fragment Shader</strong> : Nous verrons également cela un peu plus loin.</p></li><li id="r-960916" data-claire-element-id="960916"><p id="r-960915" data-claire-element-id="960915"><strong>Test de profondeur</strong> : Test permettant de savoir s'il faut afficher tel ou tel pixel. Cette notion sera développée un peu plus tard.</p></li><li id="r-960918" data-claire-element-id="960918"><p id="r-960917" data-claire-element-id="960917"><strong>Affichage</strong> : C'est la sortie de la carte graphique, la plupart du temps ce sera notre écran.</p></li></ul><p id="r-960920" data-claire-element-id="960920">Cette suite d’opérations constitue ce que l’on appelle: <strong>le pipeline 3D</strong>. Les parties qui nous intéressent dans ce chapitre sont : le <strong>Vertex Shader</strong> et le <strong>Fragment Shader</strong>.</p><div id="r-960922" data-claire-element-id="960922" data-claire-semantic="question"><p id="r-960921" data-claire-element-id="960921">Euh qu'est-ce que c'est que ça ? o_O</p></div><p id="r-960923" data-claire-element-id="960923">Un shader est simplement un programme exécuté non pas par le processeur mais par la carte graphique. Il en existe deux types (enfin 3 mais seuls 2 sont réellement importants) :</p><ul id="r-960928" data-claire-element-id="960928"><li id="r-960925" data-claire-element-id="960925"><p id="r-960924" data-claire-element-id="960924"><strong>Vertex Shader</strong> : C’est l’étape qui va nous permettre soit de valider les coordonnées de nos sommets, soit de les modifier. Cette étape prend un vertex à part pour travailler dessus. S’il y a 3 vertices (pour un triangle) alors le vertex shader sera exécuté 3 fois.</p></li><li id="r-960927" data-claire-element-id="960927"><p id="r-960926" data-claire-element-id="960926"><strong>Fragment Shader</strong> (parfois appelé Pixel Shader) : C’est l’étape qui va définir la couleur de chaque pixel de la forme délimitée par les vertices. Par exemple, si vous avez défini un rectangle de 100 pixels par 50 pixels, alors le fragment shader se chargera de définir la couleur des 5000 pixels composant le rectangle.</p></li></ul><aside id="r-960930" data-claire-element-id="960930" data-claire-semantic="information"><p id="r-960929" data-claire-element-id="960929">Ne vous inquiétez pas, 5000 pixels c’est une promenade de santé pour la carte graphique :p . Elle est conçue pour faire ce genre d’opérations à répétition.</p></aside><h2 id="r-a-quoi-servent-les-shaders" data-claire-element-id="960939">A quoi servent les shaders ?</h2><p id="r-960932" data-claire-element-id="960932">Étant donné la complexité de cette notion, nous ne devrions étudier les shaders que beaucoup plus tard dans le tutoriel. Dans les anciennes versions d'OpenGL, ils étaient optionnels, c'était l'API elle-même qui se chargeait d'effectuer ces opérations. Mais avec la version 3.0, le groupe Khronos a voulu introduire une nouvelle philosophie : <strong>le tout shader</strong>. En clair, ils nous imposent leur utilisation.</p><div id="r-960934" data-claire-element-id="960934" data-claire-semantic="question"><p id="r-960933" data-claire-element-id="960933">Euh ... Pourquoi nous imposer un truc aussi compliqué alors que c'était géré automatiquement avant ?</p></div><p id="r-960935" data-claire-element-id="960935">Ce qu'il faut comprendre, c'est que les jeux-vidéo ont beaucoup évolué depuis qu'OpenGL existe. Il y a quelques années, il était plus simple de laisser l'API faire tout le boulot, les jeux ne prenaient pas énormément de ressources et surtout il y avait moins de choses à calculer. Mais de nos jours, les graphismes, le réalisme et la vitesse sont devenus les principales préoccupations des développeurs (et des joueurs ;) ). L'API n'est plus capable de gérer tout ça rapidement car elle le fait avec ses vielles méthodes (trop lentes pour les jeux d'aujourd'hui).</p><p id="r-960936" data-claire-element-id="960936">L'avantage d'une gestion personnalisée est que l'on peut faire ce que l'on veut et surtout on peut y mettre uniquement ce dont on a besoin, ce qui peut nous faire gagner parfois pas mal de vitesse.</p><aside id="r-960938" data-claire-element-id="960938" data-claire-semantic="warning"><p id="r-960937" data-claire-element-id="960937">En théorie lors du chapitre précédent, nous n'aurions pas dû afficher un triangle sans utiliser les shaders. Cependant, OpenGL nous autorise à afficher des petites formes blanches avec le repère de base sans avoir à les utiliser. Avouez tout de même qu'un jeu comme ça ce n'est pas passionnant. A moins de faire un Pong en 2D mais je pense honnêtement que ce n'est pas votre but. ;)</p></aside><h2 id="r-exemples-de-shaders" data-claire-element-id="960968">Exemples de Shaders</h2><p id="r-960940" data-claire-element-id="960940">Ah c'est certainement la partie qui va le plus vous intéresser. :p</p><p id="r-960941" data-claire-element-id="960941">Les shaders ne sont pas uniquement des étapes embêtantes qui sont là pour vous compliquer la vie :colere2: . Leur première utilité vient du fait qu'ils permettent d'afficher nos objets dans un monde 2D ou 3D. En gros, voila ce qui se passe lorsque nous voulons afficher un objet :</p><ul id="r-960950" data-claire-element-id="960950"><li id="r-960943" data-claire-element-id="960943"><p id="r-960942" data-claire-element-id="960942">On définit ses coordonnées dans l'espace.</p></li><li id="r-960945" data-claire-element-id="960945"><p id="r-960944" data-claire-element-id="960944">L'objet est ensuite passé au Vertex Shader (n'oubliez pas que c'est un programme exécuté par la carte graphique).</p></li><li id="r-960947" data-claire-element-id="960947"><p id="r-960946" data-claire-element-id="960946">Puis au Fragment Shader (c'est un programme aussi).</p></li><li id="r-960949" data-claire-element-id="960949"><p id="r-960948" data-claire-element-id="960948">Il est maintenant prêt à être affiché.</p></li></ul><p id="r-960951" data-claire-element-id="960951">Ça c'est la première utilité, passons maintenant à la deuxième qui est certainement la plus importante (et la plus intéressante :p ) : ils permettent de faire tous les effets 3D magnifiques que vous voyez dans un jeu-vidéo tels que : les lumières, l'eau, les ombres, les explosions ... Ce sont les shaders qui font d'un jeu un jeu plus réaliste.</p><figure id="r-960953" data-claire-element-id="960954"><img id="r-960952" data-claire-element-id="960952" src="medias/uploads.siteduzero.com_files_282001_283000_282508.jpg" alt="Image utilisateur"/></figure><figure id="r-960956" data-claire-element-id="960957"><img id="r-960955" data-claire-element-id="960955" src="medias/uploads.siteduzero.com_files_282001_283000_282509.jpg" alt="Image utilisateur"/></figure><p id="r-960958" data-claire-element-id="960958">Alors ne vous emballez pas, ce n'est pas maintenant que nous allons apprendre à faire tous ces effets mais nous y viendrons. ;)</p><p id="r-960959" data-claire-element-id="960959">Le principal problème avec les shaders est que lorsque l'on débute dans la programmation 3D, il est très difficile d'apprendre à les utiliser du fait de leur complexité. C'est pour cela que dans un premier temps, je vais vous fournir le code source pour la création des shaders. Nous consacrerons trois chapitres entiers pour apprendre à les gérer une fois que vous serez plus habitués avec OpenGL.</p><p id="r-960960" data-claire-element-id="960960">En bref ce qu’il faut retenir c’est que :</p><ul id="r-960967" data-claire-element-id="960967"><li id="r-960962" data-claire-element-id="960962"><p id="r-960961" data-claire-element-id="960961">Un <strong>shader </strong>est un programme exécuté par la carte graphique.</p></li><li id="r-960964" data-claire-element-id="960964"><p id="r-960963" data-claire-element-id="960963">Il en existe de deux types : les <strong>vertex </strong>et les <strong>fragment</strong>.</p></li><li id="r-960966" data-claire-element-id="960966"><p id="r-960965" data-claire-element-id="960965">Chaque chose que nous voulons afficher passera d'abord entre les mains de ces deux shaders.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">
<span class="arrow"></span>
<span class="next">Introduction aux shaders</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
<span class="next">Utilisation des shaders</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisationdesshaders"></a><h2>Utilisation des shaders</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;un Shader ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
<span class="next">Un peu de couleurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-960970" data-claire-element-id="960970">Passons maintenant à la partie programmation. :magicien:</p><p id="r-960971" data-claire-element-id="960971">Pour commencer, je vais vous demander de télécharger l’archive ci-dessous (pour Linux et Windows), elle contient un fichier « <strong>Shader.h</strong> », « <strong>Shader.cpp</strong> » et un dossier « <strong>Shaders </strong>» contenant plein de petits fichiers. Vous placerez tout ça dans le répertoire de chaque projet que vous ferez (donc dans chaque chapitre que nous ferons).</p><p id="r-960972" data-claire-element-id="960972"><strong>Télécharger : </strong><a href="https://dl.dropboxusercontent.com/s/blcwn5dll01i5pj/Shaders.zip?token_hash=AAFjBZmJ5kfEtwEEg_o4JG5PsdqWoEn2clPUHCNE_BRT_Q&amp;dl=1">Code Source C++ Shaders - Windows &amp; Linux</a></p><p id="r-960973" data-claire-element-id="960973">Une fois les fichiers ajoutés à votre dossier, il vous suffit simplement d’ajouter le header « <strong>Shader.h</strong> » et le fichier source « <strong>Shader.cpp</strong> » à votre projet.</p><aside id="r-960975" data-claire-element-id="960975" data-claire-semantic="information"><p id="r-960974" data-claire-element-id="960974">N'oubliez pas d'inclure le header quand vous en avez besoin.</p></aside><p id="r-960976" data-claire-element-id="960976">Comme vous le savez maintenant, un shader est un programme, différent d’un programme normal certes mais un programme quand même. Il doit donc respecter plusieurs règles :</p><ul id="r-960981" data-claire-element-id="960981"><li id="r-960978" data-claire-element-id="960978"><p id="r-960977" data-claire-element-id="960977">Un code source</p></li><li id="r-960980" data-claire-element-id="960980"><p id="r-960979" data-claire-element-id="960979">Une compilation</p></li></ul><p id="r-960982" data-claire-element-id="960982">Nous ne verrons pas ces deux étapes maintenant mais sachez au moins que ce n’est pas si différent d'un programme normal. Les codes sources sont dans le dossier « Shaders » que vous devriez avoir placé dans le répertoire de votre projet.</p><p id="r-960983" data-claire-element-id="960983">Avant toute chose, pour pouvoir utiliser les shaders il va falloir utiliser la classe Shader dont voici le constructeur :</p><pre id="r-960984" data-claire-element-id="960984"><code data-claire-semantic="cpp">Shader(std::string vertexSource, std::string fragmentSource);</code></pre><ul id="r-960989" data-claire-element-id="960989"><li id="r-960986" data-claire-element-id="960986"><p id="r-960985" data-claire-element-id="960985"><strong>vertexSource </strong>: C’est le chemin du code source de notre Vertex Shader.</p></li><li id="r-960988" data-claire-element-id="960988"><p id="r-960987" data-claire-element-id="960987"><strong>fragmentSource </strong>: C’est le chemin du code source de notre Fragment Shader.</p></li></ul><p id="r-960990" data-claire-element-id="960990">Alors attention, appeler le <em>constructeur</em> ne suffit pas. Si vous n'appelez que lui, votre shader ne sera pas exploitable. Pour le rendre exploitable, il faut utiliser la méthode <em><strong>charger()</strong></em> qui permet en gros de lire les fichiers sources, de les compiler, ...</p><pre id="r-960991" data-claire-element-id="960991"><code data-claire-semantic="cpp">bool charger();</code></pre><p id="r-960992" data-claire-element-id="960992">Cette méthode retourne un <em>booléen</em> pour savoir si la création du shader s'est bien passée.</p><aside id="r-960994" data-claire-element-id="960994" data-claire-semantic="warning"><p id="r-960993" data-claire-element-id="960993">On ne va pas vérifier la valeur retournée ici mais vous êtes libre de le faire si vous le voulez. Si un shader ne réussit pas à se charger, le programme ne va pas s'arrêter pour autant. OpenGL continuera de s'exécuter comme si le shader n'existait pas.</p></aside><p id="r-960995" data-claire-element-id="960995">En bref, voici un petit exemple de création de shader :</p><pre id="r-960996" data-claire-element-id="960996"><code data-claire-semantic="cpp">// Création du shader

Shader shaderBasique(&quot;Shaders/basique_2D.vert&quot;, &quot;Shaders/basique.frag&quot;);
shaderBasique.charger();


// Début de la bouble principale

while(!terminer)
{
    // Utilisation
}</code></pre><p id="r-960997" data-claire-element-id="960997">Bien, passons à l'utilisation qui est ma foi assez simple puisque nous n'utilisons qu'une seule fonction :</p><pre id="r-960998" data-claire-element-id="960998"><code data-claire-semantic="cpp">glUseProgram(GLuint program) ;</code></pre><aside id="r-961000" data-claire-element-id="961000" data-claire-semantic="warning"><p id="r-960999" data-claire-element-id="960999">Attention, cette fonction commence par le prefixe &quot;<strong>gl</strong>&quot;, ce n'est donc pas une méthode de la classe Shader.</p></aside><p id="r-961001" data-claire-element-id="961001">Elle prend un paramètre : l'ID d'une certain &quot;<strong>program</strong>&quot;, nous lui donnerons l'attribut : &quot;<em><strong>m_programID</strong></em>&quot; de la classe <em><strong>Shader</strong></em> grâce à la méthode :</p><pre id="r-961002" data-claire-element-id="961002"><code data-claire-semantic="cpp">GLuint getProgramID() const;</code></pre><p id="r-961003" data-claire-element-id="961003">Ne vous posez pas de question sur ça pour le moment ;)</p><p id="r-961004" data-claire-element-id="961004">Cette fonction a deux utilités :</p><ul id="r-961009" data-claire-element-id="961009"><li id="r-961006" data-claire-element-id="961006"><p id="r-961005" data-claire-element-id="961005">Lorsqu'on lui donne l'attribut &quot;<strong>m_programID</strong>&quot;, OpenGL va comprendre &quot;Je prends le shader que tu me donnes pour l'utiliser dans mon pipeline&quot;.</p></li><li id="r-961008" data-claire-element-id="961008"><p id="r-961007" data-claire-element-id="961007">Une fois qu'on a affiché ce qu'on voulait afficher, on va faire comprendre à OpenGL de ne plus utiliser le shader. Dans ce cas, le paramètre ne sera pas &quot;<strong>m_programID</strong>&quot; mais nous lui donnerons la <strong>valeur 0.</strong></p></li></ul><p id="r-961010" data-claire-element-id="961010">Cette fonction se place juste avant <strong>glDrawArrays</strong>() lorsque nous voulons activer notre shader, puis après avec le paramètre 0 pour le désactiver :</p><pre id="r-961011" data-claire-element-id="961011"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shaderBasique.getProgramID());


    // Affichage du triangle

    glDrawArrays(GL_TRIANGLES, 0, 3);


// Désactivation du shader

glUseProgram(0);</code></pre><aside id="r-961013" data-claire-element-id="961013" data-claire-semantic="information"><p id="r-961012" data-claire-element-id="961012">Je vous conseille d'indenter le code qui se trouve entre les appels de la fonction <strong>glUseProgram</strong>(). Vous verrez que nous mettrons de plus en plus de chose à l'intérieur, l'indentation rendra le tout plus lisible.</p></aside><p id="r-961014" data-claire-element-id="961014">Simple non ? :-° D'ailleurs on peut même intégrer, entre ces deux appels de la fonction <strong>glUseProgram</strong>(), le code relatif à l'envoi des vertices au tableau <strong>Vertex Attrib</strong>. En général, on fait cela pour bien différencier le code d'affichage du reste du programme, ce qui donnerait pour nous :</p><pre id="r-961015" data-claire-element-id="961015"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shaderBasique.getProgramID());


    // On remplie puis on active le tableau Vertex Attrib 0

    glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);
    glEnableVertexAttribArray(0);


    // Affichage du triangle

    glDrawArrays(GL_TRIANGLES, 0, 3);


    // On désactive le tableau Vertex Attrib puisque l'on n'en a plus besoin

    glDisableVertexAttribArray(0);


// Désactivation du shader

glUseProgram(0);</code></pre><p id="r-961016" data-claire-element-id="961016">Dans le chapitre précédent, nous nous sommes permis de ne pas utiliser ces fameux shaders. Mais comme je vous l'ai dit tout à l'heure, on ne peut plus continuer ainsi. Reprenons notre ancien code pour y ajouter les fonctions que nous venons de voir :</p><pre id="r-961017" data-claire-element-id="961017"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    bool terminer(false);
    float vertices[] = {-0.5, -0.5,   0.0, 0.5,   0.5, -0.5};

    Shader shaderBasique(&quot;Shaders/basique_2D.vert&quot;, &quot;Shaders/basique.frag&quot;);
    shaderBasique.charger();


    // Boucle principale

    while(!terminer)
    {
        // Gestion des évènements

        SDL_WaitEvent(&amp;m_evenements);

        if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
            terminer = true;


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT);


        // Activation du shader

        glUseProgram(shaderBasique.getProgramID());


            // On remplie puis on active le tableau Vertex Attrib 0

            glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);
            glEnableVertexAttribArray(0);


            // Affichage du triangle

            glDrawArrays(GL_TRIANGLES, 0, 3);


            // On désactive le tableau Vertex Attrib puisque l'on n'en a plus besoin

            glDisableVertexAttribArray(0);


        // Désactivation du shader

        glUseProgram(0);


        // Actualisation de la fenêtre

        SDL_GL_SwapWindow(m_fenetre);
    }
}</code></pre><p id="r-961018" data-claire-element-id="961018">Vous devriez vous retrouver avec une fenêtre comme celle-la :</p><figure id="r-961020" data-claire-element-id="961021"><img id="r-961019" data-claire-element-id="961019" src="medias/uploads.siteduzero.com_files_282001_283000_282512.jpg" alt="Image utilisateur"/></figure><div id="r-961023" data-claire-element-id="961023" data-claire-semantic="question"><p id="r-961022" data-claire-element-id="961022">Quoi mais c’est nul ! C’est la même chose que dans le chapitre précédent mais en plus compliqué.</p></div><p id="r-961024" data-claire-element-id="961024">Oui c'est la même chose mais c'est comme cela que les choses doivent être faites ;). Pour le moment vous ne voyez pas trop l'intérêt d'utiliser les shaders mais vous allez vite voir que c'est indispensable.</p><p id="r-961025" data-claire-element-id="961025">D'ailleurs pourquoi attendons-nous ? Voyons dès maintenant ce qu'ils ont à nous offrir. :magicien:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;un Shader ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
<span class="next">Un peu de couleurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unpeudecouleurs"></a><h2>Un peu de couleurs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
<span class="arrow"></span>
<span class="next">Utilisation des shaders</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">
<span class="next">Les matrices</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-un-peu-de-couleurs-1" data-claire-element-id="961083">Un peu de couleurs</h2><p id="r-961027" data-claire-element-id="961027">Il est maintenant temps de faire passer notre triangle à la couleur, je le trouve un peu trop pâlot. :p</p><div id="r-961029" data-claire-element-id="961029" data-claire-semantic="question"><p id="r-961028" data-claire-element-id="961028">Comment fonctionnent les couleurs avec OpenGL ?</p></div><p id="r-961030" data-claire-element-id="961030">La réponse est simple, vous savez qu'avec la SDL, pour créer un rectangle coloré il fallait utiliser cette fonction :</p><pre id="r-961031" data-claire-element-id="961031"><code data-claire-semantic="c">SDL_MapRGB(SDL_Surface *surface, Uint8 red, Uint8 green, Uint8 blue);</code></pre><p id="r-961032" data-claire-element-id="961032">Les trois paramètres étaient les composantes RGB (Rouge, Vert, Bleu). Il suffisait de combiner ces trois couleurs pour en former une seule au final. Bonne nouvelle, avec OpenGL c'est pareil. Pour fabriquer une couleur vous devez donner :</p><ul id="r-961039" data-claire-element-id="961039"><li id="r-961034" data-claire-element-id="961034"><p id="r-961033" data-claire-element-id="961033">Une quantité de rouge</p></li><li id="r-961036" data-claire-element-id="961036"><p id="r-961035" data-claire-element-id="961035">Une quantité de vert</p></li><li id="r-961038" data-claire-element-id="961038"><p id="r-961037" data-claire-element-id="961037">Une quantité de bleu</p></li></ul><p id="r-961040" data-claire-element-id="961040">Si vous voulez faire des tests pour obtenir différentes couleurs, essayez la palette de couleurs Windows (ou équivalent sur Linux) :</p><figure id="r-961042" data-claire-element-id="961043"><img id="r-961041" data-claire-element-id="961041" src="medias/uploads.siteduzero.com_files_282001_283000_282513.jpg" alt="Image utilisateur"/></figure><p id="r-961044" data-claire-element-id="961044">Il y a deux façons de représenter les couleurs :</p><ul id="r-961049" data-claire-element-id="961049"><li id="r-961046" data-claire-element-id="961046"><p id="r-961045" data-claire-element-id="961045">Soit avec des valeurs comprises entre 0 et 255 (la plus compréhensible)</p></li><li id="r-961048" data-claire-element-id="961048"><p id="r-961047" data-claire-element-id="961047">Soit avec des valeurs comprises entre 0 et 1 (un peu difficile d'imaginer une couleur entre 0 et 1)</p></li></ul><p id="r-961050" data-claire-element-id="961050">Malheureusement pour nous, nous allons devoir utiliser la seconde méthode. Mais pas de panique, nous allons utiliser une petite combine pour utiliser la première.</p><p id="r-961051" data-claire-element-id="961051">Jauger une couleur entre 0 et 255 est plus facile à comprendre, pour pouvoir utiliser cette méthode nous allons <strong>diviser</strong> la valeur de la couleur (par exemple : 128) <strong>par 255</strong>. De cette façon on se retrouve avec une valeur comprise entre 0 et 1 :</p><pre id="r-961052" data-claire-element-id="961052"><code data-claire-semantic="c">float rouge = 128.0/255.0; // = 0.50
float vert =  204.0/255.0; // = 0.80
float bleu =  36.0/255.0;  // = 0.141</code></pre><p id="r-961053" data-claire-element-id="961053">La quantité de rouge sera de 128, le vert de 204 et le bleu de 36. De plus faites attention, nous travaillons avec des float donc n'oubliez pas de préciser les décimales même s'il n'y a en pas.</p><aside id="r-961055" data-claire-element-id="961055" data-claire-semantic="information"><p id="r-961054" data-claire-element-id="961054">Lorsque vous voulez mettre une quantité au maximum (255), il est inutile de faire 255.0/255.0, mettez simplement 1.0. Même chose pour une quantité nulle (0.0)</p></aside><p id="r-961056" data-claire-element-id="961056">Au niveau du shader, on va changer le shader <em><strong>basique</strong></em> par le shader <em><strong>couleur2D</strong></em> car ce premier ne faisait qu'afficher ce que nous lui donnions en blanc. Maintenant que nous voulons de la couleur, il faut charger un autre shader gérer la couleur :</p><pre id="r-961057" data-claire-element-id="961057"><code data-claire-semantic="cpp">// Shader

Shader shaderCouleur(&quot;Shaders/couleur2D.vert&quot;, &quot;Shaders/couleur2D.frag&quot;);
shaderCouleur.charger();</code></pre><p id="r-961058" data-claire-element-id="961058">Vu que nous avons changé le nom du shader (<em><strong>shaderCouleur</strong></em>), il faut effectuer le même changement de nom lorsque l'on récupère le <em><strong>programID</strong></em> :</p><pre id="r-961059" data-claire-element-id="961059"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shaderCouleur.getProgramID());


    // Envoi des données et affichage

    ....


// Désactivation du shader

glUseProgram(0);</code></pre><p id="r-961060" data-claire-element-id="961060">Au niveau du code d'affichage, vous connaissez déjà presque tout. Les fonctions utilisées sont les mêmes que celles des coordonnées de vertex. Les couleurs se gèrent également de la même façon : on place la valeur de chaque couleur (RGB) les unes à la suite des autres dans un tableau.</p><p id="r-961061" data-claire-element-id="961061">Le seul changement sera le numéro du tableau, au lieu de placer nos couleurs dans le tableau <strong>0</strong> nous les placerons dans le tableau <strong>1</strong>. Le premier tableau (indice <strong>0</strong>) servira à stocker tous nos vertices et le deuxième tableau (indice <strong>1</strong>) servira à stocker nos couleurs.</p><pre id="r-961062" data-claire-element-id="961062"><code data-claire-semantic="cpp">// On définie les couleurs 

float couleurs[] = {0.0, 204.0 / 255.0, 1.0,    0.0, 204.0 / 255.0, 1.0,    0.0, 204.0 / 255.0, 1.0};


while(...)
{
    ....


    // Activation du shader

    glUseProgram(shaderCouleur.getProgramID());


        // Envoi des vertices

        glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);
        glEnableVertexAttribArray(0);


        // On rentre les couleurs dans le tableau Vertex Attrib 1

        glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, couleurs);
        glEnableVertexAttribArray(1);


        ....


    // Désactivation du shader

    glUseProgram(0);


    ....
}</code></pre><aside id="r-961064" data-claire-element-id="961064" data-claire-semantic="information"><p id="r-961063" data-claire-element-id="961063">Faites attention au paramètre <strong>size</strong> du tableau Vertex Attrib, ici nous lui donnons <strong>3</strong> car une couleur est composée de 3 couleurs.</p></aside><p id="r-961065" data-claire-element-id="961065">Voyons ce que donne toutes ces petites modifications sur un exemple concret :</p><pre id="r-961066" data-claire-element-id="961066"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables
	
    bool terminer(false);
    float vertices[] = {-0.5, -0.5,   0.0, 0.5,   0.5, -0.5};
    float couleurs[] = {0.0, 204.0 / 255.0, 1.0,    0.0, 204.0 / 255.0, 1.0,    0.0, 204.0 / 255.0, 1.0};
	
	
    // Shader
	
    Shader shaderCouleur(&quot;Shaders/couleur2D.vert&quot;, &quot;Shaders/couleur2D.frag&quot;);
    shaderCouleur.charger();

	
    // Boucle principale
	
    while(!terminer)
    {
        // Gestion des évènements
		
        SDL_WaitEvent(&amp;m_evenements);
		
        if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
            terminer = true;
		
		
        // Nettoyage de l'écran
		
        glClear(GL_COLOR_BUFFER_BIT);
		
		
        // Activation du shader

        glUseProgram(shaderCouleur.getProgramID());


            // Envoi des vertices
		
            glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);
            glEnableVertexAttribArray(0);


            // Envoi des couleurs

            glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, couleurs);
            glEnableVertexAttribArray(1);


            // Affichage du triangle

            glDrawArrays(GL_TRIANGLES, 0, 3);


            // Désactivation des tableaux Vertex Attrib

            glDisableVertexAttribArray(1);
            glDisableVertexAttribArray(0);


        // Désactivation du shader

        glUseProgram(0);
		
		
        // Actualisation de la fenêtre
		
        SDL_GL_SwapWindow(m_fenetre);
    }
}</code></pre><aside id="r-961068" data-claire-element-id="961068" data-claire-semantic="information"><p id="r-961067" data-claire-element-id="961067">Petit détail : Vous désactiverez vos tableaux dans l'ordre inverse où vous les avez activés. Par exemple : si j'active les tableaux dans l'ordre 1, 2, 3 alors je les désactiverai dans l'ordre 3, 2, 1.</p></aside><p id="r-961069" data-claire-element-id="961069">Vous devriez obtenir un triangle coloré :</p><figure id="r-961071" data-claire-element-id="961072"><img id="r-961070" data-claire-element-id="961070" src="medias/uploads.siteduzero.com_files_282001_283000_282514.jpg" alt="Image utilisateur"/></figure><p id="r-961073" data-claire-element-id="961073">Vous commencez à voir l'intérêt des shaders ? ^^ Bon si vous n'êtes pas convaincus je vais vous montrer une autre façon de colorier notre triangle.</p><p id="r-961074" data-claire-element-id="961074">Si chaque sommet possède sa propre couleur alors OpenGL (avec l'aide des shaders) nous fera un joli petit dégradé entre les différentes couleurs. Prenons un exemple, nous allons définir une couleur différente pour chaque sommet :</p><pre id="r-961075" data-claire-element-id="961075"><code data-claire-semantic="cpp">// Remplaçons les couleurs par les suivantes ...

float couleurs[] = {1.0, 0.0, 0.0,  0.0, 1.0, 0.0,  0.0, 0.0, 1.0};


//... et voyons ce que ça donne;</code></pre><p id="r-961076" data-claire-element-id="961076">Vous devriez avoir ceci :</p><figure id="r-961078" data-claire-element-id="961079"><img id="r-961077" data-claire-element-id="961077" src="medias/uploads.siteduzero.com_files_282001_283000_282515.jpg" alt="Image utilisateur"/></figure><p id="r-961080" data-claire-element-id="961080">Comme vous le constatez, les shaders ont calculé automatiquement la couleur de chaque pixel se trouvant entre les différents sommets.</p><p id="r-961081" data-claire-element-id="961081">Cette opération s’appelle <strong>l’interpolation</strong>. C’est-à-dire qu’OpenGL est capable de trouver la couleur de chaque pixel entre deux sommets ayant une couleur différente. Le gros avantage de l'interpolation c'est que nous ne nous en occupons pas :p . En effet, même si nous définissons nos shaders, nous ne nous occuperons pas de trouver la couleur de chaque pixel. Il nous suffira juste de donner notre code source pour seulement un et OpenGL se chargera de faire la même opération pour tous les autres. Magique n'est-ce pas ? :magicien:</p><p id="r-961082" data-claire-element-id="961082"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/d3a69hd0045u336/Introduction aux shaders.zip?token_hash=AAFx3WTxGr793rjbJHFeIgME8BqV17mFYZM9Hw6IDZNGlA&amp;dl=1">Code Source C++ du Chapitre 4</a></strong></p><h2 id="r-exercices-38" data-claire-element-id="961137">Exercices</h2><h3 id="r-enonces-2" data-claire-element-id="961110">Énoncés</h3><p id="r-961084" data-claire-element-id="961084">Au même titre que le chapitre précédent, vous avez maintenant le droit à votre petite série d'exercice. Votre objectif va être de colorier différents triangles avec une couleur spécifique.</p><p id="r-961085" data-claire-element-id="961085"><em><strong>Exercice 1</strong></em> : Coloriez le triangle du haut avec les valeurs données ci-dessous :</p><ul id="r-961092" data-claire-element-id="961092"><li id="r-961087" data-claire-element-id="961087"><p id="r-961086" data-claire-element-id="961086"><strong>rouge</strong> : 240.0</p></li><li id="r-961089" data-claire-element-id="961089"><p id="r-961088" data-claire-element-id="961088"><strong>vert</strong>: 210.0</p></li><li id="r-961091" data-claire-element-id="961091"><p id="r-961090" data-claire-element-id="961090"><strong>bleu</strong> : 23.0</p></li></ul><p id="r-961093" data-claire-element-id="961093"><em><strong>Exercice 2</strong></em> : Même consigne que précédemment mais avec les valeurs :</p><ul id="r-961100" data-claire-element-id="961100"><li id="r-961095" data-claire-element-id="961095"><p id="r-961094" data-claire-element-id="961094"><strong>rouge</strong> : 230.0</p></li><li id="r-961097" data-claire-element-id="961097"><p id="r-961096" data-claire-element-id="961096"><strong>vert</strong> : 0.0</p></li><li id="r-961099" data-claire-element-id="961099"><p id="r-961098" data-claire-element-id="961098"><strong>bleu</strong> : 230.0</p></li></ul><p id="r-961101" data-claire-element-id="961101"><em><strong>Exercice 3</strong></em> : Coloriez le triangle uniquement avec la couleur vert (valeur <strong>255.0</strong>). Simplifiez le tableau si possible.</p><p id="r-961102" data-claire-element-id="961102"><em><strong>Exercice 4</strong></em> : Reprenez les 3 couleurs précédentes, au lieu de les appliquer au triangle appliquez en <strong>une</strong> pour <strong>chaque vertex</strong>. Le résultat final doit ressembler à ceci (ce n'est pas grave si les couleurs ne sont pas dans le même ordre) :</p><figure id="r-961104" data-claire-element-id="961105"><img id="r-961103" data-claire-element-id="961103" src="medias/uploads.siteduzero.com_files_420001_421000_420413.png" alt="Image utilisateur"/></figure><p id="r-961106" data-claire-element-id="961106"><em><strong>Exercice 5</strong></em> : Le dernier exercice va allier ce que nous avons vu dans le chapitre précédent et celui-ci. L'objectif est d'afficher un losange multicolore avec les couleurs de l'exercice 4, le dernier vertex doit utiliser le bleu (<strong>255.0</strong>) :</p><figure id="r-961108" data-claire-element-id="961109"><img id="r-961107" data-claire-element-id="961107" src="medias/uploads.siteduzero.com_files_420001_421000_420420.png" alt="Image utilisateur"/></figure><h3 id="r-solutions-3" data-claire-element-id="961136">Solutions</h3><p id="r-961111" data-claire-element-id="961111"><em><strong>Exercice 1</strong></em> :</p><p id="r-961112" data-claire-element-id="961112">Le but des exercices est de colorier un triangle, il n'y a donc que le tableau <strong>couleurs</strong> à modifier. Le reste du code ne change pas, on n'envoie toujours ce tableau à OpenGL grâce au <strong>Vertex Attrib 1</strong>. Pour ce premier exercice, il fallait trouver :</p><pre id="r-961113" data-claire-element-id="961113"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {240.0 / 255.0, 210.0 / 255.0, 23.0 / 255.0,     // Vertex 1
                    240.0 / 255.0, 210.0 / 255.0, 23.0 / 255.0,     // Vertex 2
                    240.0 / 255.0, 210.0 / 255.0, 23.0 / 255.0};    // Vertex 3</code></pre><p id="r-961114" data-claire-element-id="961114">Il ne fallait pas oublier de diviser les valeurs que je vous avais données par <strong>255.0</strong>, sinon le code n'aurait pas fonctionné. ;)</p><p id="r-961115" data-claire-element-id="961115"><em><strong>Exercice 2</strong></em> :</p><p id="r-961116" data-claire-element-id="961116">Le principe reste le même que le premier exercice, il suffit juste de modifier le tableau <strong>couleurs</strong> :</p><pre id="r-961117" data-claire-element-id="961117"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {230.0 / 255.0, 0.0, 230.0 / 255.0,     // Vertex 1
                    230.0 / 255.0, 0.0, 230.0 / 255.0,     // Vertex 2
                    230.0 / 255.0, 0.0, 230.0 / 255.0};    // Vertex 3</code></pre><p id="r-961118" data-claire-element-id="961118"><em><strong>Exercice 3</strong></em> :</p><p id="r-961119" data-claire-element-id="961119">Encore une fois, on conserve le même principe que les exercices 1 et 2. La couleur demandée n'était que le vert ici, ce qui allège un peu notre tableau :</p><pre id="r-961120" data-claire-element-id="961120"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {0.0, 255.0 / 255.0, 0.0,     // Vertex 1
                    0.0, 255.0 / 255.0, 0.0,     // Vertex 2
                    0.0, 255.0 / 255.0, 0.0};    // Vertex 3</code></pre><p id="r-961121" data-claire-element-id="961121">Cependant il y avait un moyen de simplifier cette déclaration. En effet, je vous ai précisé dans le cours que l'on pouvait simplifier les divisions des couleurs brutes (rouge, vert et bleu). Donc au lieu de faire l'opération <strong>255.0 / 255.0</strong>, on pouvait directement mettre la valeur <strong>1.0</strong>. Ce qui allégeait encore plus le tableau final :</p><pre id="r-961122" data-claire-element-id="961122"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {0.0, 1.0, 0.0,     // Vertex 1
                    0.0, 1.0, 0.0,     // Vertex 2
                    0.0, 1.0, 0.0};    // Vertex 3</code></pre><p id="r-961123" data-claire-element-id="961123"><em><strong>Exercice 4</strong></em> :</p><p id="r-961124" data-claire-element-id="961124">Le but de ce dernier exercice était bien évidemment d'appliquer chacune des couleurs mises en place précédemment sur un vertex en particulier. Nous avions déjà vu ce principe avec l'exemple du triangle <em>multicolore</em> :</p><pre id="r-961125" data-claire-element-id="961125"><code data-claire-semantic="cpp">float couleurs[] = {240.0 / 255.0, 210.0 / 255.0, 23.0 / 255.0,    // Vertex 1
                    230.0 / 255.0, 0.0, 230.0 / 255.0,             // Vertex 2
                    0.0, 1.0, 0.0};                                // Vertex 3</code></pre><p id="r-961126" data-claire-element-id="961126">L'ordre des couleurs n'est pas important ici, ce n'est pas quelque chose de demandé.</p><p id="r-961127" data-claire-element-id="961127"><em><strong>Exercice 5</strong></em> :</p><p id="r-961128" data-claire-element-id="961128">La seule difficulté ici était qu'il fallait reprendre la couleur de deux vertices pour le second triangle. En effet, ceux-ci sont doubler pour pouvoir afficher le triangle du bas, il fallait donc doubler leur couleur :</p><pre id="r-961129" data-claire-element-id="961129"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {240.0 / 255.0, 210.0 / 255.0, 23.0 / 255.0,     // Vertex 1
                    230.0 / 255.0, 0.0, 230.0 / 255.0,              // Vertex 2
                    0.0, 1.0, 0.0,                                  // Vertex 3

                    240.0 / 255.0, 210.0 / 255.0, 23.0 / 255.0,     // Vertex 4 (Copie du 1)
                    0.0, 0.0, 1.0,                                  // Vertex 5
                    0.0, 1.0, 0.0};                                 // Vertex 6 (Copie du 3)</code></pre><p id="r-961130" data-claire-element-id="961130">Il faut bien faire correspondre votre couleur avec votre vertex pour avoir un bon affichage. ;)</p><p id="r-961131" data-claire-element-id="961131">D'ailleurs, le tableau de vertices ne change absolument pas par rapport à avant.</p><pre id="r-961132" data-claire-element-id="961132"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {-0.5, 0.0,   0.0, 1.0,   0.5, 0.0,          // Triangle 1
                    -0.5, 0.0,   0.0, -1.0,   0.5, 0.0};        // Triangle 2</code></pre><p id="r-961133" data-claire-element-id="961133">Pensez à bien affecter la valeur <strong>6</strong> au paramètre <strong>count</strong> de la fonction <strong>glDrawArrays</strong>() pour afficher vos deux triangles, sinon elle n'en prendra en compte qu'un seul :</p><pre id="r-961134" data-claire-element-id="961134"><code data-claire-semantic="cpp">// Affichage des triangles

glDrawArrays(GL_TRIANGLES, 0, 6);</code></pre><p id="r-961135" data-claire-element-id="961135">Ce chapitre (un peu compliqué je vous l'accorde) est enfin terminé. Vous savez maintenant ce que sont les shaders et à quoi ils servent. Je pense faire une partie entièrement consacrée aux effets assez sympas que l'on peut réaliser, mais bon ce n'est pas pour maintenant. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
<span class="arrow"></span>
<span class="next">Utilisation des shaders</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">
<span class="next">Les matrices</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesmatrices"></a><h2>Les matrices</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
<span class="arrow"></span>
<span class="next">Un peu de couleurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
<span class="next">Introduction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-961140" data-claire-element-id="961140">Alors là, nous allons aborder un chapitre assez compliqué. Nous allons découvrir ce que sont les matrices avec OpenGL, leur utilité, etc... C'est un chapitre assez technique et surtout rempli de mathématiques :-° . Je vous conseille de bien le relire plusieurs fois jusqu'à que vous ayez tout compris, car les matrices sont indispensables avec OpenGL. ;)</p>
</div><a name="Introduction"></a><h2>Introduction</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">
<span class="arrow"></span>
<span class="next">Les matrices</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
<span class="next">Partie théorique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-961141" data-claire-element-id="961141">Lançons nous tout de suite dans le monde des mathématiques. Je vous rappelle que si vous voulez développer des jeux-vidéo vous ne pouvez pas éviter les maths, elles sont indispensables au bon fonctionnement du jeu. Les premières notions que nous allons apprendre sont les <strong>transformations</strong>.</p><p id="r-961142" data-claire-element-id="961142">Qu'est-ce qu'une transformation vous allez me dire ? Au lieu d'une définition barbante que nous n'allons point retenir ( :p ) je vais vous donner des exemples de transformations et vous comprendrez tout de suite ce que c'est :</p><ul id="r-961149" data-claire-element-id="961149"><li id="r-961144" data-claire-element-id="961144"><p id="r-961143" data-claire-element-id="961143"><strong>Une translation</strong> : consiste à faire &quot;glisser&quot; un ensemble de points sur un &quot;rail&quot; (un vecteur).</p></li><li id="r-961146" data-claire-element-id="961146"><p id="r-961145" data-claire-element-id="961145"><strong>Une rotation</strong> : consiste à faire pivoter un ensemble de points d'un angle Thêta par rapport à un point.</p></li><li id="r-961148" data-claire-element-id="961148"><p id="r-961147" data-claire-element-id="961147"><strong>Une homothétie</strong> : consiste simplement à agrandir ou à réduire une forme géométrique.</p></li></ul><p id="r-961150" data-claire-element-id="961150">Une transformation est donc grosso-modo une modification apportée à un ensemble de points ou repère dans un espace donné (soit 2D, soit 3D, etc ...). Les 3 transformations que vous voyez là sont les principales transformations utilisées dans OpenGL, en particulier la <strong>translation</strong>.</p><div id="r-961152" data-claire-element-id="961152" data-claire-semantic="question"><p id="r-961151" data-claire-element-id="961151">Ok, on sait ce qu'est une transformation maintenant, mais à quoi ça sert ?</p></div><p id="r-961153" data-claire-element-id="961153">Elles vont nous servir à placer tous nos objets (personnages, arbres, maisons, ...) dans notre monde 3D. A chaque fois que nous voudrons placer un objet nous utiliserons les transformations. Elles seront essentiellement utilisées sur le repère.</p><h2 id="r-les-matrices-sous-opengl-2-1" data-claire-element-id="961172">Les matrices sous OpenGL 2.1</h2><p id="r-961154" data-claire-element-id="961154">Avant de parler du fonctionnement des matrices dans la version 3, je vais vous parler de celui des anciennes versions, ce sera plus facile à comprendre. De plus le principe ne change absolument pas d'une version à l'autre. <br/> Tout d'abord, qu'est-ce qu'une <strong>matrice</strong> ? C'est un tableau de nombres ordonnés en lignes et en colonnes entourés par des parenthèses. Sa syntaxe est semblable à celle d'un vecteur mais avec plus de nombres :</p><figure id="r-961156" data-claire-element-id="961157"><img id="r-961155" data-claire-element-id="961155" src="medias/uploads.siteduzero.com_files_282001_283000_282606.jpg" alt="Image utilisateur"/></figure><p id="r-961158" data-claire-element-id="961158">Une matrice n'est pas forcément un tableau de 9 cases, elle peut en contenir jusqu'à l'infini. Cependant ce n'est pas qu'un simple tableau, c'est une sorte de <strong>super-vecteur</strong> qui permet de faire pas mal de choses intéressantes. Un vecteur est en général utilisé en 3D pour gérer les points, les directions, les normales... Les matrices permettent de faire bien plus que ça. Elles servent principalement à convertir des données géométriques en données numériques. Il est plus facile de travailler avec des nombres qu'avec des compas et des équerres placés sur notre écran. :p Voyons d'ailleurs pourquoi OpenGL a besoin des matrices :</p><ul id="r-961163" data-claire-element-id="961163"><li id="r-961160" data-claire-element-id="961160"><p id="r-961159" data-claire-element-id="961159"><strong>Pour la projection</strong> : grâce à cela nous allons pourvoir &quot;<strong>transformer</strong>&quot; un monde 3D en un monde 2D (jusqu'à nouvel ordre, un écran ne dispose que de deux dimensions).</p></li><li id="r-961162" data-claire-element-id="961162"><p id="r-961161" data-claire-element-id="961161"><strong>Pour les transformations</strong> : regroupant les transformations que je vous ai énumérées à l'instant.</p></li></ul><p id="r-961164" data-claire-element-id="961164">Ce sont les besoins fondamentaux d'OpenGL pour utiliser la 3D. Dans les anciennes versions, les matrices étaient gérées automatiquement, on n'utilisait que quelques fonctions pour les créer et les utiliser. Depuis la version 3.1, ces fonctions sont supprimées, car l'approche des jeux d'aujourd'hui est différente. Heureusement pour nous, nous avons en notre possession une librairie mathématique du nom de <strong>GLM</strong> qui permet de gérer les matrices (et bien plus), mais avant de commencer à les manipuler nous allons faire un peu de théorie pour bien comprendre ce que nous faisons.</p><p id="r-961165" data-claire-element-id="961165">En définitif, nous aurons besoin de deux matrices pour coder avec OpenGL :</p><ul id="r-961170" data-claire-element-id="961170"><li id="r-961167" data-claire-element-id="961167"><p id="r-961166" data-claire-element-id="961166"><strong>La matrice de projection</strong> : qui sert à transformer notre monde 3D en un monde 2D affichable sur l'écran.</p></li><li id="r-961169" data-claire-element-id="961169"><p id="r-961168" data-claire-element-id="961168"><strong>La matrice modelview</strong> (ou visualisation de modèle): qui sera la matrice principale, c'est sur elle que nous allons appliquer nos transformations.</p></li></ul><p id="r-961171" data-claire-element-id="961171">Chaque vertex sera multiplié par ces deux matrices pour pouvoir être affiché sur notre écran, le tout en nous donnant une impression de 3D (magique n'est-ce pas :magicien: ).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">
<span class="arrow"></span>
<span class="next">Les matrices</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
<span class="next">Partie théorique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Partiethorique"></a><h2>Partie théorique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
<span class="arrow"></span>
<span class="next">Introduction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
<span class="next">Transformations au niveau matricielle</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-961174" data-claire-element-id="961174">Dans cette partie nous allons apprendre ce que sont les matrices et comment les utiliser pour nos programmes. Pour simplifier cet apprentissage, je ne vais vous montrer que la multiplication de matrices car c'est une notion que nous retrouverons assez souvent dans ce tuto. De plus, cela vous donnera une bonne idée des calculs matriciels sans pour autant voir les choses les plus compliquées (inversion, déterminant, etc.). :p</p><h3 id="r-matrice-carree" data-claire-element-id="961181">Matrice carrée</h3><p id="r-961175" data-claire-element-id="961175">On commence tout de suite cette partie par les <strong>matrices carrées</strong>.</p><p id="r-961176" data-claire-element-id="961176">Une <strong>matrice carrée</strong> est une matrice ayant le même nombres de colonnes et de lignes :</p><figure id="r-961178" data-claire-element-id="961179"><img id="r-961177" data-claire-element-id="961177" src="medias/uploads.siteduzero.com_files_282001_283000_282606.jpg" alt="Image utilisateur"/></figure><p id="r-961180" data-claire-element-id="961180">Il y a 3 rangées de <strong>colonnes</strong> et 3 rangées de <strong>lignes</strong>, c'est donc ce que l'on appelle une matrice carrée. Son nom complet est d'ailleurs : <strong>matrice carrée d'ordre 3</strong>. Le chiffre à la fin permet de spécifier la taille. Si on avait mis le chiffre 4, alors la matrice aurait eu 4 colonnes et 4 lignes. Nous n'utiliserons que les matrices carrées dans OpenGL. Et tant mieux, car ça simplifie grandement les choses :-° .</p><h3 id="r-matrice-d-identite" data-claire-element-id="961394">Matrice d'identité</h3><p id="r-961182" data-claire-element-id="961182">Sous ce nom barbare se cache en réalité la matrice la plus simple qu'il soit. Elle a la particularité d'avoir toutes ses valeurs égales à 0 hormis les valeurs de sa diagonale qui, elles, sont égales à 1. Quelle que soit la taille de la matrice, on retrouvera toujours cette particularité :</p><figure id="r-961184" data-claire-element-id="961185"><img id="r-961183" data-claire-element-id="961183" src="medias/uploads.siteduzero.com_files_282001_283000_282609.jpg" alt="Image utilisateur"/></figure><figure id="r-961187" data-claire-element-id="961188"><img id="r-961186" data-claire-element-id="961186" src="medias/uploads.siteduzero.com_files_282001_283000_282610.jpg" alt="Image utilisateur"/></figure><p id="r-961189" data-claire-element-id="961189">Si nous multiplions un vecteur par une telle matrice, le vecteur ne sera absolument pas changé :p :</p><figure id="r-961191" data-claire-element-id="961192"><img id="r-961190" data-claire-element-id="961190" src="medias/uploads.siteduzero.com_files_282001_283000_282612.jpg" alt="Image utilisateur"/></figure><p id="r-961193" data-claire-element-id="961193">Nous allons étudier la multiplication matricielle dans un instant. Mais vous pouvez déjà retenir ce principe : si un vecteur est multiplié par une matrice d'identité, alors il ne sera pas modifié.</p><h2 id="r-multiplication-d-un-vecteur-par-une-matrice" data-claire-element-id="961290">Multiplication d'un vecteur par une matrice</h2><h3 id="r-partie-1-la-verification" data-claire-element-id="961210">Partie 1 : la vérification</h3><p id="r-961194" data-claire-element-id="961194">Dans ce premier exemple, je vais prendre une matrice carrée d'ordre 3 pour simplifier les choses. Sachez cependant que le principe est le même quelle que soit la taille de la matrice.</p><figure id="r-961196" data-claire-element-id="961197"><img id="r-961195" data-claire-element-id="961195" src="medias/uploads.siteduzero.com_files_282001_283000_282613.jpg" alt="Image utilisateur"/></figure><p id="r-961198" data-claire-element-id="961198">Voyons comment arriver à ce résultat.<br/> Premièrement, il faut vérifier que le <strong>nombre de colonnes</strong> de la matrice soit égal au <strong>nombre de coordonnées</strong> du vecteur. Si ce n'est pas le cas alors la multiplication est impossible.</p><figure id="r-961200" data-claire-element-id="961201"><img id="r-961199" data-claire-element-id="961199" src="medias/uploads.siteduzero.com_files_282001_283000_282614.jpg" alt="Image utilisateur"/></figure><p id="r-961202" data-claire-element-id="961202">La matrice possède 3 colonnes et le vecteur possède 3 coordonnées. La multiplication est donc possible.</p><aside id="r-961204" data-claire-element-id="961204" data-claire-semantic="error"><p id="r-961203" data-claire-element-id="961203">Attention ! La matrice sera toujours <strong>à GAUCHE</strong> de la multiplication et le vecteur sera toujours <strong>à DROITE</strong> !</p></aside><p id="r-961205" data-claire-element-id="961205">Prenons un autre exemple :</p><figure id="r-961207" data-claire-element-id="961208"><img id="r-961206" data-claire-element-id="961206" src="medias/uploads.siteduzero.com_files_282001_283000_282615.jpg" alt="Image utilisateur"/></figure><p id="r-961209" data-claire-element-id="961209">La matrice possède 2 colonnes et le vecteur 3 coordonnées. La multiplication est impossible.<br/> Vous avez compris le principe ? Bien, passons à la suite.</p><h3 id="r-partie-2-la-multiplication" data-claire-element-id="961265">Partie 2 : La multiplication</h3><p id="r-961211" data-claire-element-id="961211">Attaquons la partie la plus intéressante :diable: . La multiplication d'une matrice et d'un vecteur s'effectue comme ceci : pour une seule coordonnée (x, y, ou z) du vecteur résultat, nous allons faire la <strong>somme</strong> des <strong>multiplications</strong> de chaque <strong>nombre d'une ligne de la matrice</strong> par <strong>chaque nombre correspondant du vecteur</strong>. Un peu barbant comme explication, rien ne vaut un bon exemple :</p><p id="r-961212" data-claire-element-id="961212">Commençons déjà par la première ligne, vous devriez comprendre le principe une fois cet exemple fini :</p><figure id="r-961214" data-claire-element-id="961215"><img id="r-961213" data-claire-element-id="961213" src="medias/uploads.siteduzero.com_files_282001_283000_282617.jpg" alt="Image utilisateur"/></figure><p id="r-961216" data-claire-element-id="961216">Il faut multiplier les nombres de même couleur sur le schéma, puis additionner les différents résultats. Une ligne de la matrice ne donnera qu'une seule coordonnée du vecteur résultat, ici la <strong>coordonnée x</strong>. Passons à la deuxième ligne :</p><figure id="r-961218" data-claire-element-id="961219"><img id="r-961217" data-claire-element-id="961217" src="medias/uploads.siteduzero.com_files_282001_283000_282618.jpg" alt="Image utilisateur"/></figure><p id="r-961220" data-claire-element-id="961220">Vous comprenez le principe ? La première ligne nous a donné la première coordonnée, la deuxième ligne nous donne la deuxième coordonnée. Nous multiplions chaque ligne de la matrice par toutes les valeurs du vecteur. Passons à la troisième ligne :</p><figure id="r-961222" data-claire-element-id="961223"><img id="r-961221" data-claire-element-id="961221" src="medias/uploads.siteduzero.com_files_282001_283000_282619.jpg" alt="Image utilisateur"/></figure><p id="r-961224" data-claire-element-id="961224">La troisième ligne de la matrice nous donne la troisième coordonnée. Si la matrice avait eu 4 lignes (et donc 4 colonnes) alors il y aurait eu une quatrième opération du même type pour la quatrième coordonnée. Si on récapitule tout ça, on a :</p><figure id="r-961226" data-claire-element-id="961227"><img id="r-961225" data-claire-element-id="961225" src="medias/uploads.siteduzero.com_files_282001_283000_282620.jpg" alt="Image utilisateur"/></figure><p id="r-961228" data-claire-element-id="961228">Vous avez compris ? Je vous donne un autre exemple pour comparer les différents résultats :</p><figure id="r-961230" data-claire-element-id="961231"><img id="r-961229" data-claire-element-id="961229" src="medias/uploads.siteduzero.com_files_294001_295000_294727.png" alt="Image utilisateur"/></figure><p id="r-961232" data-claire-element-id="961232">N'hésitez pas à bien relire et essayez de comprendre ces deux exemples. C'est la base de la multiplication matricielle.</p><aside id="r-961234" data-claire-element-id="961234" data-claire-semantic="information"><p id="r-961233" data-claire-element-id="961233">Je vous rappelle que la matrice est toujours à <strong>gauche</strong> et le vecteur est toujours à <strong>droite</strong>.</p></aside><p id="r-961235" data-claire-element-id="961235">Passons à un pseudo-exemple, vous n'avez pas oublié ce qu'est la matrice d'identité j'espère :p , on sait qu'un vecteur multiplié par cette matrice ne changera pas. Maintenant que l'on connait un peu la multiplication on va voir pourquoi le vecteur n'est pas modifié :</p><figure id="r-961237" data-claire-element-id="961238"><img id="r-961236" data-claire-element-id="961236" src="medias/uploads.siteduzero.com_files_282001_283000_282623.jpg" alt="Image utilisateur"/></figure><p id="r-961239" data-claire-element-id="961239">Oh magie, le résultat ne change pas. Vous comprenez pourquoi cette matrice est la plus simple à utiliser. ;) <br/> Je vais maintenant vous donner un exemple de multiplication avec une matrice carrée d'ordre 4. Le principe ne change absolument pas, nous allons voir cet exemple étape par étape pour bien comprendre. Commençons :</p><figure id="r-961241" data-claire-element-id="961242"><img id="r-961240" data-claire-element-id="961240" src="medias/uploads.siteduzero.com_files_282001_283000_282625.png" alt="Image utilisateur"/></figure><p id="r-961243" data-claire-element-id="961243">La matrice possède 4 colonnes et le vecteur 4 lignes, la multiplication est possible. Maintenant on passe à la première étape :</p><figure id="r-961245" data-claire-element-id="961246"><img id="r-961244" data-claire-element-id="961244" src="medias/uploads.siteduzero.com_files_412001_413000_412841.png" alt="Image utilisateur"/></figure><p id="r-961247" data-claire-element-id="961247">Vous ne voyez qu'une seule différence : on ajoute à la somme une multiplication supplémentaire. En effet, n'oubliez pas que l'on multiplie les nombres de la matrice avec les nombres correspondants du vecteur. Pour la deuxième ligne c'est pareil :</p><figure id="r-961249" data-claire-element-id="961250"><img id="r-961248" data-claire-element-id="961248" src="medias/uploads.siteduzero.com_files_412001_413000_412842.png" alt="Image utilisateur"/></figure><p id="r-961251" data-claire-element-id="961251">Pour la troisième ligne ça ne change pas :</p><figure id="r-961253" data-claire-element-id="961254"><img id="r-961252" data-claire-element-id="961252" src="medias/uploads.siteduzero.com_files_282001_283000_282628.png" alt="Image utilisateur"/></figure><p id="r-961255" data-claire-element-id="961255">Ah, une quatrième ligne, eh bien oui c'est plus long :p . Mais ça ne change toujours pas :</p><figure id="r-961257" data-claire-element-id="961258"><img id="r-961256" data-claire-element-id="961256" src="medias/uploads.siteduzero.com_files_412001_413000_412843.png" alt="Image utilisateur"/></figure><p id="r-961259" data-claire-element-id="961259">Ce qui nous donne au final :</p><figure id="r-961261" data-claire-element-id="961262"><img id="r-961260" data-claire-element-id="961260" src="medias/uploads.siteduzero.com_files_282001_283000_282634.png" alt="Image utilisateur"/></figure><p id="r-961263" data-claire-element-id="961263">Vous voyez, le principe de la multiplication ne change absolument pas.</p><p id="r-961264" data-claire-element-id="961264">Piouf, cette partie était un peu difficile à comprendre. Je vais vous donner quelques exercices pour vous entrainer à la multiplication. Faites-les sérieusement, vous avez besoin de comprendre ce que l'on vient de faire pour comprendre la suite. Sinon vous serez complétement largués :( .</p><h3 id="r-exercices-de-multiplications" data-claire-element-id="961278">Exercices de multiplications</h3><p id="r-961266" data-claire-element-id="961266">Exercice 1 :</p><figure id="r-961268" data-claire-element-id="961269"><img id="r-961267" data-claire-element-id="961267" src="medias/uploads.siteduzero.com_files_282001_283000_282636.png" alt="Image utilisateur"/></figure><p id="r-961270" data-claire-element-id="961270">Exercice 2 :</p><figure id="r-961272" data-claire-element-id="961273"><img id="r-961271" data-claire-element-id="961271" src="medias/uploads.siteduzero.com_files_282001_283000_282637.png" alt="Image utilisateur"/></figure><p id="r-961274" data-claire-element-id="961274">Exercice 3 :</p><figure id="r-961276" data-claire-element-id="961277"><img id="r-961275" data-claire-element-id="961275" src="medias/uploads.siteduzero.com_files_282001_283000_282638.png" alt="Image utilisateur"/></figure><h3 id="r-solutions-8" data-claire-element-id="961289">Solutions</h3><p id="r-961279" data-claire-element-id="961279">Exercice 1 :</p><figure id="r-961281" data-claire-element-id="961282"><img id="r-961280" data-claire-element-id="961280" src="medias/uploads.siteduzero.com_files_282001_283000_282639.png" alt="Image utilisateur"/></figure><p id="r-961283" data-claire-element-id="961283">Exercice 2 :</p><p id="r-961284" data-claire-element-id="961284">La multiplication est impossible, la matrice possède 3 colonnes alors que le vecteur possède 4 coordonnées.</p><p id="r-961285" data-claire-element-id="961285">Exercice 3 :</p><figure id="r-961287" data-claire-element-id="961288"><img id="r-961286" data-claire-element-id="961286" src="medias/uploads.siteduzero.com_files_282001_283000_282640.png" alt="Image utilisateur"/></figure><h2 id="r-multiplication-de-deux-matrices" data-claire-element-id="961393">Multiplication de deux matrices</h2><p id="r-961291" data-claire-element-id="961291">La multiplication de deux matrices peut sembler plus compliquée à première vue mais si vous avez compris ce que l'on a fait avant, alors vous savez déjà multiplier deux matrices.</p><h3 id="r-partie-1" data-claire-element-id="961301">Partie 1</h3><p id="r-961292" data-claire-element-id="961292">Avant tout, pour pouvoir multiplier deux matrices carrées entre-elles il faut absolument que les deux matrices soient de la même taille (donc du même ordre), c'est-à-dire qu'elles doivent avoir le même nombre de lignes et le même nombre de colonnes.</p><figure id="r-961294" data-claire-element-id="961295"><img id="r-961293" data-claire-element-id="961293" src="medias/uploads.siteduzero.com_files_282001_283000_282645.jpg" alt="Image utilisateur"/></figure><p id="r-961296" data-claire-element-id="961296">Les deux matrices ont la même taille, on peut donc les multiplier.<br/> Prenons un autre exemple :</p><figure id="r-961298" data-claire-element-id="961299"><img id="r-961297" data-claire-element-id="961297" src="medias/uploads.siteduzero.com_files_282001_283000_282646.jpg" alt="Image utilisateur"/></figure><p id="r-961300" data-claire-element-id="961300">Ici, les deux matrices n'ont pas la même taille nous ne pouvons pas les multiplier.<br/> Il ne devrait y avoir rien de compliqué pour le moment. :)</p><h3 id="r-partie-2" data-claire-element-id="961367">Partie 2</h3><p id="r-961302" data-claire-element-id="961302">Pour pouvoir multiplier deux matrices carrées, nous allons utiliser une petite combine. Nous allons couper la deuxième matrice en 3 vecteurs (ou 4 selon la taille), puis nous appliquerons la multiplication que nous avons vue à l'instant pour chacun de ces vecteurs. Prenons deux matrices cobayes :</p><figure id="r-961304" data-claire-element-id="961305"><img id="r-961303" data-claire-element-id="961303" src="medias/uploads.siteduzero.com_files_282001_283000_282645.jpg" alt="Image utilisateur"/></figure><aside id="r-961307" data-claire-element-id="961307" data-claire-semantic="error"><p id="r-961306" data-claire-element-id="961306">Attention, l'ordre des matrices est important ! M1 x M2 ne sera pas forcément égal à M2 x M1. Faites attention à l'ordre de votre multiplication !</p></aside><p id="r-961308" data-claire-element-id="961308">Bien, coupons la seconde matrice en 3 vecteurs :</p><figure id="r-961310" data-claire-element-id="961311"><img id="r-961309" data-claire-element-id="961309" src="medias/uploads.siteduzero.com_files_282001_283000_282648.jpg" alt="Image utilisateur"/></figure><p id="r-961312" data-claire-element-id="961312">Maintenant il nous suffit d'appliquer la multiplication d'une matrice et d'un vecteur pour chaque vecteur que nous venons de créer. Voici ce que ça donne pour le premier :</p><figure id="r-961314" data-claire-element-id="961315"><img id="r-961313" data-claire-element-id="961313" src="medias/uploads.siteduzero.com_files_294001_295000_294729.png" alt="Image utilisateur"/></figure><p id="r-961316" data-claire-element-id="961316">Au tour du deuxième :</p><figure id="r-961318" data-claire-element-id="961319"><img id="r-961317" data-claire-element-id="961317" src="medias/uploads.siteduzero.com_files_282001_283000_282650.jpg" alt="Image utilisateur"/></figure><p id="r-961320" data-claire-element-id="961320">Quand il y a un &quot;<strong>0</strong>&quot; dans une matrice ça nous facilite grandement le calcul :lol: . Bref, on fait la même chose avec le dernier vecteur :</p><figure id="r-961322" data-claire-element-id="961323"><img id="r-961321" data-claire-element-id="961321" src="medias/uploads.siteduzero.com_files_282001_283000_282651.jpg" alt="Image utilisateur"/></figure><p id="r-961324" data-claire-element-id="961324">Nous obtenons au final 3 vecteurs fraichement calculés. Il nous suffit ensuite de les assembler dans <strong>l'ordre de la division de la matrice !</strong></p><figure id="r-961326" data-claire-element-id="961327"><img id="r-961325" data-claire-element-id="961325" src="medias/uploads.siteduzero.com_files_294001_295000_294730.png" alt="Image utilisateur"/></figure><p id="r-961328" data-claire-element-id="961328">Au final, nous obtenons :</p><figure id="r-961330" data-claire-element-id="961331"><img id="r-961329" data-claire-element-id="961329" src="medias/uploads.siteduzero.com_files_294001_295000_294731.png" alt="Image utilisateur"/></figure><aside id="r-961333" data-claire-element-id="961333" data-claire-semantic="information"><p id="r-961332" data-claire-element-id="961332">Je vous rappelle encore une fois que l'ordre de la multiplication compte. <strong>M1 x M2 est différent de M2 x M1 </strong>!</p></aside><p id="r-961334" data-claire-element-id="961334">Vous voyez, une fois que vous avez compris la première multiplication, vous savez déjà multiplier deux matrices. <br/> Évidemment, la taille de la matrice ne change toujours pas le principe, voyons ensemble un exemple de multiplication de deux matrices carrées d'ordre 4.</p><figure id="r-961336" data-claire-element-id="961337"><img id="r-961335" data-claire-element-id="961335" src="medias/uploads.siteduzero.com_files_282001_283000_282654.jpg" alt="Image utilisateur"/></figure><p id="r-961338" data-claire-element-id="961338">Coupons la seconde matrice en 4 vecteurs (et oui car c'est une matrice carrée d'ordre 4 et pas 3) :</p><figure id="r-961340" data-claire-element-id="961341"><img id="r-961339" data-claire-element-id="961339" src="medias/uploads.siteduzero.com_files_282001_283000_282655.jpg" alt="Image utilisateur"/></figure><p id="r-961342" data-claire-element-id="961342">Il nous suffit maintenant d'appliquer la multiplication &quot;<strong>Matrice - Vecteur</strong>&quot; sur les 4 vecteurs que nous venons de créer. Voici le premier résultat :</p><figure id="r-961344" data-claire-element-id="961345"><img id="r-961343" data-claire-element-id="961343" src="medias/uploads.siteduzero.com_files_282001_283000_282656.jpg" alt="Image utilisateur"/></figure><p id="r-961346" data-claire-element-id="961346">Puis le second :</p><figure id="r-961348" data-claire-element-id="961349"><img id="r-961347" data-claire-element-id="961347" src="medias/uploads.siteduzero.com_files_282001_283000_282657.jpg" alt="Image utilisateur"/></figure><p id="r-961350" data-claire-element-id="961350">Le troisième :</p><figure id="r-961352" data-claire-element-id="961353"><img id="r-961351" data-claire-element-id="961351" src="medias/uploads.siteduzero.com_files_282001_283000_282658.jpg" alt="Image utilisateur"/></figure><p id="r-961354" data-claire-element-id="961354">Et enfin le quatrième et dernier vecteur :</p><figure id="r-961356" data-claire-element-id="961357"><img id="r-961355" data-claire-element-id="961355" src="medias/uploads.siteduzero.com_files_282001_283000_282659.jpg" alt="Image utilisateur"/></figure><p id="r-961358" data-claire-element-id="961358">Maintenant on réunit les vecteurs résultats <strong>dans le bon ordre</strong> :</p><figure id="r-961360" data-claire-element-id="961361"><img id="r-961359" data-claire-element-id="961359" src="medias/uploads.siteduzero.com_files_282001_283000_282662.jpg" alt="Image utilisateur"/></figure><p id="r-961362" data-claire-element-id="961362">Voici donc le résultat final :</p><figure id="r-961364" data-claire-element-id="961365"><img id="r-961363" data-claire-element-id="961363" src="medias/uploads.siteduzero.com_files_282001_283000_282663.jpg" alt="Image utilisateur"/></figure><p id="r-961366" data-claire-element-id="961366">Vous remarquez que la multiplication se passe exactement de la même façon que l'on soit en présence de matrices à 3 colonnes ou à 4 colonnes ou même à 1000 colonnes :p . Passons maintenant à quelques exercices pour vous entrainer. C'est important je le répète, essayez de faire ces exercices sérieusement.</p><h3 id="r-exercices-de-multiplications-1" data-claire-element-id="961380">Exercices de multiplications</h3><p id="r-961368" data-claire-element-id="961368">Exercice 1 :</p><figure id="r-961370" data-claire-element-id="961371"><img id="r-961369" data-claire-element-id="961369" src="medias/uploads.siteduzero.com_files_282001_283000_282665.png" alt="Image utilisateur"/></figure><p id="r-961372" data-claire-element-id="961372">Exercice 2 :</p><figure id="r-961374" data-claire-element-id="961375"><img id="r-961373" data-claire-element-id="961373" src="medias/uploads.siteduzero.com_files_282001_283000_282666.png" alt="Image utilisateur"/></figure><p id="r-961376" data-claire-element-id="961376">Exercice 3 :</p><figure id="r-961378" data-claire-element-id="961379"><img id="r-961377" data-claire-element-id="961377" src="medias/uploads.siteduzero.com_files_282001_283000_282667.png" alt="Image utilisateur"/></figure><h3 id="r-solutions-10" data-claire-element-id="961392">Solutions</h3><p id="r-961381" data-claire-element-id="961381">Exercice 1 :</p><p id="r-961382" data-claire-element-id="961382">La multiplication est impossible, la première matrice possède 4 lignes et 4 colonnes alors que la seconde matrice ne possède que 3 lignes et 3 colonnes.</p><p id="r-961383" data-claire-element-id="961383">Exercice 2 :</p><figure id="r-961385" data-claire-element-id="961386"><img id="r-961384" data-claire-element-id="961384" src="medias/uploads.siteduzero.com_files_282001_283000_282668.png" alt="Image utilisateur"/></figure><p id="r-961387" data-claire-element-id="961387">Exercice 3 :</p><figure id="r-961389" data-claire-element-id="961390"><img id="r-961388" data-claire-element-id="961388" src="medias/uploads.siteduzero.com_files_282001_283000_282669.png" alt="Image utilisateur"/></figure><p id="r-961391" data-claire-element-id="961391">Et voilà, la partie la plus compliquée de ce chapitre est enfin terminée ! La multiplication matricielle est une notion difficile à comprendre (même s'il en existe bien d'autres plus complexes) mais vous êtes maintenant capables de la maitriser. :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
<span class="arrow"></span>
<span class="next">Introduction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
<span class="next">Transformations au niveau matricielle</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Transformationsauniveaumatricielle"></a><h2>Transformations au niveau matricielle</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
<span class="arrow"></span>
<span class="next">Partie théorique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
<span class="next">Transformations au niveau géométrique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-961396" data-claire-element-id="961396">Le but de la partie précédente était d'apprendre à multiplier deux matrices. J'ai volontairement inclus des exercices avec des matrices carrées d'ordre 4 car OpenGL aura besoin la plupart du temps de ce genre de matrices (et heureusement !). Dans cette partie, nous allons faire passer les transformations de la géométrie à l'algèbre (les nombres).</p><p id="r-961397" data-claire-element-id="961397">Comme vous le savez les transformations sont des outils géométriques, pour calculer une rotation par exemple nous avons besoin d'un rapporteur. Or c'est un peu compliqué de poser notre rapporteur sur l'écran, surtout si l'angle se trouve derrière le dos d'un personnage :lol: . Pour pouvoir utiliser les transformations numériquement nous devons utiliser... les matrices. ;)</p><h3 id="r-la-translation" data-claire-element-id="961411">La translation</h3><p id="r-961398" data-claire-element-id="961398">La translation permet de déplacer un ensemble de points ou une forme dans un espace donné. En gros, on prend un vecteur qui servira de &quot;rail&quot; puis on fera glisser nos points sur ce rail. La forme finale ne sera pas modifiée, elle sera juste déplacée. :)</p><p id="r-961399" data-claire-element-id="961399">Une translation en 3 dimensions se traduit par la matrice suivante :</p><figure id="r-961401" data-claire-element-id="961402"><img id="r-961400" data-claire-element-id="961400" src="medias/uploads.siteduzero.com_files_282001_283000_282678.png" alt="Image utilisateur"/></figure><ul id="r-961409" data-claire-element-id="961409"><li id="r-961404" data-claire-element-id="961404"><p id="r-961403" data-claire-element-id="961403"><strong>X</strong> : C'est la coordonnée x du vecteur de translation.</p></li><li id="r-961406" data-claire-element-id="961406"><p id="r-961405" data-claire-element-id="961405"><strong>Y</strong> : C'est la coordonnée y du vecteur de translation.</p></li><li id="r-961408" data-claire-element-id="961408"><p id="r-961407" data-claire-element-id="961407"><strong>Z</strong> : C'est la coordonnée z du vecteur de translation.</p></li></ul><p id="r-961410" data-claire-element-id="961410">Vous remarquerez que cette matrice ressemble beaucoup à la matrice d'identité, il n'y a que les coordonnées du vecteur en plus.</p><h3 id="r-l-homothetie" data-claire-element-id="961423">L'homothétie</h3><p id="r-961412" data-claire-element-id="961412">Une homothétie permet d'agrandir ou de réduire une forme géométrique, voici la matrice correspondante :</p><figure id="r-961414" data-claire-element-id="961415"><img id="r-961413" data-claire-element-id="961413" src="medias/uploads.siteduzero.com_files_282001_283000_282679.png" alt="Image utilisateur"/></figure><ul id="r-961422" data-claire-element-id="961422"><li id="r-961417" data-claire-element-id="961417"><p id="r-961416" data-claire-element-id="961416"><strong>X</strong> : C'est le facteur multiplicatif de l'axe x.</p></li><li id="r-961419" data-claire-element-id="961419"><p id="r-961418" data-claire-element-id="961418"><strong>Y</strong> : C'est le facteur multiplicatif de l'axe y.</p></li><li id="r-961421" data-claire-element-id="961421"><p id="r-961420" data-claire-element-id="961420"><strong>Z</strong> : C'est le facteur multiplicatif de l'axe z.</p></li></ul><h3 id="r-la-rotation-2" data-claire-element-id="961429">La rotation</h3><p id="r-961424" data-claire-element-id="961424">Attention ! La matrice que vous allez voir est certainement la matrice la plus compliquée de tout le tutoriel :p . Cependant, il est inutile de la retenir, elle est trop complexe nous la verrons jamais directement :</p><figure id="r-961426" data-claire-element-id="961427"><img id="r-961425" data-claire-element-id="961425" src="medias/uploads.siteduzero.com_files_282001_283000_282680.png" alt="Image utilisateur"/></figure><p id="r-961428" data-claire-element-id="961428">Je vous avais dit que cette matrice était... particulière (pour vous dire, je ne la connais pas par cœur moi-même). Grâce à elle, nous pouvons faire pivoter en ensemble de points d'un angle <strong>thêta</strong> autour d'un axe défini par les <strong>coordonnées (x, y, z)</strong>. Nul besoin de retenir cette matrice, je le répète. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
<span class="arrow"></span>
<span class="next">Partie théorique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
<span class="next">Transformations au niveau géométrique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Transformationsauniveaugomtrique"></a><h2>Transformations au niveau géométrique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
<span class="arrow"></span>
<span class="next">Transformations au niveau matricielle</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">
<span class="next">La troisième dimension (Partie 1/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-961431" data-claire-element-id="961431">Durant l'introduction, je vous ai brièvement parlé de deux matrices : la <strong>projection</strong> (qui permet de convertir un monde 3D en un monde 2D affichable sur notre écran) et la <strong>modelview</strong> (qui permet de placer nos objets dans ce même monde 3D).</p><p id="r-961432" data-claire-element-id="961432">C'est sur cette dernière matrice que l'on effectuera toutes les transformations que l'on a vues, à savoir : la translation, la rotation et l'homothétie. Voyons d'ailleurs comment placer un objet dans un monde 3D :</p><ul id="r-961439" data-claire-element-id="961439"><li id="r-961434" data-claire-element-id="961434"><p id="r-961433" data-claire-element-id="961433">On crée la matrice <strong>modelview</strong> (une seule fois pour tout le programme, pas une seule fois par objet).</p></li><li id="r-961436" data-claire-element-id="961436"><p id="r-961435" data-claire-element-id="961435">Puis on effectue une transformation sur cette matrice (par exemple une rotation de 90° sur l'axe Z).</p></li><li id="r-961438" data-claire-element-id="961438"><p id="r-961437" data-claire-element-id="961437">Enfin on dessine ce que l'on veut dessiner et vu que l'on a effectué une rotation de 90°, alors notre objet sera penché de 90°.</p></li></ul><p id="r-961440" data-claire-element-id="961440">Voyons ce que cela donne si je fais pivoter un triangle de 90°...</p><p id="r-961441" data-claire-element-id="961441">Voici un triangle avant la rotation :</p><figure id="r-961443" data-claire-element-id="961444"><img id="r-961442" data-claire-element-id="961442" src="medias/uploads.siteduzero.com_files_282001_283000_282688.jpg" alt="Image utilisateur"/></figure><p id="r-961445" data-claire-element-id="961445">Et le revoilà après :</p><figure id="r-961447" data-claire-element-id="961448"><img id="r-961446" data-claire-element-id="961446" src="medias/uploads.siteduzero.com_files_282001_283000_282689.jpg" alt="Image utilisateur"/></figure><p id="r-961449" data-claire-element-id="961449">Vous voyez ce qui c'est passé ? Le triangle a pivoté de 90° grâce à une transformation.</p><aside id="r-961451" data-claire-element-id="961451" data-claire-semantic="information"><p id="r-961450" data-claire-element-id="961450">La rotation se fait selon le sens trigonométrique et non selon le sens horaire.</p></aside><h2 id="r-les-transformations-sous-opengl" data-claire-element-id="961460">Les Transformations sous OpenGL</h2><p id="r-961452" data-claire-element-id="961452">Aaahh... on commence à relier OpenGL et les mathématiques (enfin !). Il est temps de voir le comportement des transformations dans un programme.</p><p id="r-961453" data-claire-element-id="961453">La première chose à savoir est que chaque transformation (rotation, ...) sera effectuée non pas sur un objet mais sur le <strong>REPÈRE</strong> du monde, c'est-à-dire que si l'on veut faire pivoter un objet de 120° alors il faudra faire pivoter non pas l'objet en lui-même mais son <strong>REPÈRE</strong>.</p><p id="r-961454" data-claire-element-id="961454">Par exemple, si vous voulez afficher un objet à 300 mètres d'un autre, vous n'allez pas ajouter 300 unités de longueur à chaque vertex de l'objet, autant garder les vertices déjà définis.</p><div id="r-961456" data-claire-element-id="961456" data-claire-semantic="question"><p id="r-961455" data-claire-element-id="961455">Hein ??? J'ai rien compris. o_O</p></div><p id="r-961457" data-claire-element-id="961457">Bon, mettons que vous ayez un méchant soldat ennemi de 500 vertices. Vous n'allez pas modifier ses 500 vertices pour afficher un autre ennemi deux mètres plus loin. Ça serait trop couteux en ressources, surtout si vous affichez une armée de 200 soldats...</p><p id="r-961458" data-claire-element-id="961458">A la place, on modifiera la position du repère (qui est en fait la matrice <strong>modelview</strong>) pour chaque objet que l'on veut dessiner. Un personnage gardera ses 500 vertices intactes quelque soit sa position.</p><p id="r-961459" data-claire-element-id="961459">Vous voyez la différence entre modifier toute une scène de dizaines de milliers de vertices et modifier une matrice de 16 valeurs.</p><h2 id="r-illustrations" data-claire-element-id="961501">Illustrations</h2><p id="r-961461" data-claire-element-id="961461">Je vais vous donner quelques exemples de transformations effectuées sur un repère, ce sera plus simple à comprendre si vous voyez ce que donne chaque transformation.</p><h3 id="r-le-repere-de-base" data-claire-element-id="961470">Le repère de base</h3><p id="r-961462" data-claire-element-id="961462">Le repère de base est en fait un repère qui n'a pas encore été modifié, c'est sur celui-ci que l'on effectuera notre première transformation. Graphiquement, on représente un repère comme ceci :</p><figure id="r-961464" data-claire-element-id="961465"><img id="r-961463" data-claire-element-id="961463" src="medias/uploads.siteduzero.com_files_282001_283000_282691.png" alt="Image utilisateur"/></figure><p id="r-961466" data-claire-element-id="961466">Au niveau des matrices, ce repère correspond simplement à une matrice d'identité d'ordre 4 :</p><figure id="r-961468" data-claire-element-id="961469"><img id="r-961467" data-claire-element-id="961467" src="medias/uploads.siteduzero.com_files_282001_283000_282692.jpg" alt="Image utilisateur"/></figure><h3 id="r-la-translation-1" data-claire-element-id="961479">La translation</h3><p id="r-961471" data-claire-element-id="961471">La translation est la transformation la plus simple :p . N'oubliez pas que c'est le <strong>REPÈRE</strong> qui est modifié. Ici, on translate le repère par rapport au vecteur V(2, 1), soit deux unités de longueur sur l'axe X et 1 unité sur l'axe Y :</p><figure id="r-961473" data-claire-element-id="961474"><img id="r-961472" data-claire-element-id="961472" src="medias/uploads.siteduzero.com_files_282001_283000_282694.png" alt="Image utilisateur"/></figure><p id="r-961475" data-claire-element-id="961475">Avec les matrices on multiplierait la matrice <strong>modelview</strong> par la matrice de translation suivante :</p><figure id="r-961477" data-claire-element-id="961478"><img id="r-961476" data-claire-element-id="961476" src="medias/uploads.siteduzero.com_files_282001_283000_282695.png" alt="Image utilisateur"/></figure><h3 id="r-la-rotation-4" data-claire-element-id="961488">La rotation</h3><p id="r-961480" data-claire-element-id="961480">Le principe ne change pas pour la rotation, on effectue la transformation sur le repère. Voici un exemple d'une rotation de 45° sur l'axe Z :</p><figure id="r-961482" data-claire-element-id="961483"><img id="r-961481" data-claire-element-id="961481" src="medias/uploads.siteduzero.com_files_282001_283000_282697.png" alt="Image utilisateur"/></figure><p id="r-961484" data-claire-element-id="961484">Pour la rotation, on multipliera la matrice modelview par la matrice de rotation (toujours aussi effrayante :diable: ) :</p><figure id="r-961486" data-claire-element-id="961487"><img id="r-961485" data-claire-element-id="961485" src="medias/uploads.siteduzero.com_files_282001_283000_282698.png" alt="Image utilisateur"/></figure><h3 id="r-l-homothetie-1" data-claire-element-id="961500">L'homothétie</h3><p id="r-961489" data-claire-element-id="961489">En temps normal, avec une homothétie on modifie la taille d'une forme géométrique. Sauf qu'ici on modifie la taille du repère, donc on modifie la taille de chaque unité de longueur. Voici ce que donne une homothétie de coordonnées (2, 2) sur le repère :</p><figure id="r-961491" data-claire-element-id="961492"><img id="r-961490" data-claire-element-id="961490" src="medias/uploads.siteduzero.com_files_282001_283000_282699.png" alt="Image utilisateur"/></figure><p id="r-961493" data-claire-element-id="961493">Vous voyez que la taille du repère à changé, désormais si on fait une translation par un vecteur(2, 1) alors la translation sera plus grande et le repère se retrouvera plus loin.</p><p id="r-961494" data-claire-element-id="961494">Pour ce qui est de la matrice modelview, il suffira de la multiplier par la matrice suivante :</p><figure id="r-961496" data-claire-element-id="961497"><img id="r-961495" data-claire-element-id="961495" src="medias/uploads.siteduzero.com_files_282001_283000_282700.png" alt="Image utilisateur"/></figure><aside id="r-961499" data-claire-element-id="961499" data-claire-semantic="information"><p id="r-961498" data-claire-element-id="961498">Attention, la coordonnée Z est mis à 1 volontairement. Nous expliquerons pourquoi un peu plus loin.</p></aside><h2 id="r-les-matrices-et-la-boucle-principale" data-claire-element-id="961513">Les matrices et la boucle principale</h2><p id="r-961502" data-claire-element-id="961502">Vous n'êtes pas sans savoir qu'un jeu se passe en grande partie dans ce que l'on appelle la <strong>boucle principale</strong>, c'est une boucle qui va se répéter indéfiniment jusqu'à ce que le joueur arrête de jouer (enfin pas vraiment, mais partons de ce principe).</p><p id="r-961503" data-claire-element-id="961503">Il faudra à chaque tour de boucle réinitialiser la matrice modelview pour ne pas qu'elle garde les traces de transformations du tour précédent. Si c'était le cas, le jeu ne se redessinerait jamais au même endroit et serait totalement difforme.</p><p id="r-961504" data-claire-element-id="961504">Voici ce qui se passera à chaque tour de boucle :</p><ul id="r-961511" data-claire-element-id="961511"><li id="r-961506" data-claire-element-id="961506"><p id="r-961505" data-claire-element-id="961505">On replacera notre <strong>repère</strong> à sa <strong>position initiale</strong>, grâce à la fonction <strong>loadIdentity</strong>.</p></li><li id="r-961508" data-claire-element-id="961508"><p id="r-961507" data-claire-element-id="961507">On effectuera une ou des <strong>transformation(s)</strong> pour afficher un objet grâce aux fonctions <strong>translate</strong>, ...</p></li><li id="r-961510" data-claire-element-id="961510"><p id="r-961509" data-claire-element-id="961509">On répètera la deuxième étape jusqu'à que <strong>tous les objets</strong> du niveau soient <strong>affichés</strong>.</p></li></ul><p id="r-961512" data-claire-element-id="961512">Toutes ces étapes se répèteront indéfiniment dans notre programme. En général, on affiche tous les objets d'un niveau 50 à 60 fois par seconde, imaginez le fourbi que l'ordinateur doit calculer. :p</p><h2 id="r-accumulation-de-transformations" data-claire-element-id="961533">Accumulation de transformations</h2><p id="r-961514" data-claire-element-id="961514">Attention, de même que l'ordre des matrices dans la multiplication, l'ordre des transformations a une importance capitale ! Si vous effectuez une translation puis une rotation, vous n'obtiendrez pas la même chose que si vous faisiez une rotation et une translation.</p><p id="r-961515" data-claire-element-id="961515">Comme d'habitude prenons un petit exemple. Dans un premier temps, je vais faire une translation du repère par rapport au vecteur V(2, 1), puis une rotation de 90° sur l'axe Z (l'axe Z est en fait pointé vers nous, c'est pour ça que nous ne le voyons pas) :</p><figure id="r-961517" data-claire-element-id="961518"><img id="r-961516" data-claire-element-id="961516" src="medias/uploads.siteduzero.com_files_282001_283000_282703.png" alt="Image utilisateur"/></figure><p id="r-961519" data-claire-element-id="961519">Maintenant je vais l'inverse, une rotation de 90° puis une translation de vecteur (2, 1) :</p><figure id="r-961521" data-claire-element-id="961522"><img id="r-961520" data-claire-element-id="961520" src="medias/uploads.siteduzero.com_files_282001_283000_282704.png" alt="Image utilisateur"/></figure><p id="r-961523" data-claire-element-id="961523">Oh tiens ! Les repères ne sont pas les mêmes. Et oui, les repères sont différents car l'ordre des transformations est important. Faites donc bien attention à ce que vous voulez faire et à l'ordre dans lequel effectuer ces transformations. ;)</p><p id="r-961524" data-claire-element-id="961524">Enfin ce chapitre est terminé, il nous aura fallu du temps mais n’oubliez pas que tout ce que je vous enseigne est nécessaire pour comprendre et utiliser OpenGL. Récapitulons ce que nous savons faire :</p><ul id="r-961531" data-claire-element-id="961531"><li id="r-961526" data-claire-element-id="961526"><p id="r-961525" data-claire-element-id="961525">On sait afficher des <strong>vertices</strong> pour former des formes géométriques.</p></li><li id="r-961528" data-claire-element-id="961528"><p id="r-961527" data-claire-element-id="961527">On sait utiliser les <strong>shaders</strong> pour leur donner un peu de couleurs (même si l’on peut faire bien plus avec eux ;) ).</p></li><li id="r-961530" data-claire-element-id="961530"><p id="r-961529" data-claire-element-id="961529">On sait utiliser des <strong>matrices</strong> pour effectuer des transformations.</p></li></ul><p id="r-961532" data-claire-element-id="961532">Bonne nouvelle ! Nous connaissons tout ce qui est nécessaire pour ajouter une troisième dimension à nos programmes. Il est d'ailleurs temps mes amis, attaquons-nous à cette nouvelle dimension qui s'offre à nous ! :pirate:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
<span class="arrow"></span>
<span class="next">Transformations au niveau matricielle</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">
<span class="next">La troisième dimension (Partie 1/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LatroisimedimensionPartie1_2"></a><h2>La troisième dimension (Partie 1/2)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
<span class="arrow"></span>
<span class="next">Transformations au niveau géométrique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
<span class="next">La matrice de projection</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-961536" data-claire-element-id="961536">Le chapitre précédent était un peu compliqué. Mais grâce à lui, nous sommes maintenant capables d'utiliser les transformations pour façonner un monde 3D. Dans ce nouveau chapitre, nous allons mettre en commun ce que l'on sait sur OpenGL avec ce que l'on a appris concernant les <strong>matrices</strong>.</p><p id="r-961537" data-claire-element-id="961537">J'ai préféré diviser ce chapitre en deux parties, étant donné que nous allons aborder pas mal de nouvelles notions. Dans cette première partie, nous allons nous concentrer sur l'implémentation des matrices dans notre programme, puis dans la seconde partie, nous implémenterons la troisième dimension et surtout nous apprendrons à l'utiliser ! :p</p>
</div><a name="Lamatricedeprojection"></a><h2>La matrice de projection</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">
<span class="arrow"></span>
<span class="next">La troisième dimension (Partie 1/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
<span class="next">Utilisation de la projection</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-presentation-5" data-claire-element-id="961585">Présentation</h2><p id="r-961538" data-claire-element-id="961538">Dans le chapitre précédent, nous avons vu ce qu'étaient les matrices ainsi que leur fonctionnement. Nous nous sommes surtout concentrés sur la matrice modelview qui permet de placer nos objets dans un monde 3D. Les transformations que nous avons vues (translation, rotation et homothétie) sont appliquées sur elle.</p><p id="r-961539" data-claire-element-id="961539">Dans ce chapitre-la maintenant, nous allons nous concentrer sur une autre matrice : la <strong>matrice de projection</strong>.</p><p id="r-961540" data-claire-element-id="961540">Sa seule utilité est de permettre l'affichage d'un monde 3D sur notre écran qui lui ne possède que 2 dimensions. Cependant, vous vous imaginez bien que ce processus n'est pas aussi simple que cela, on a quand même besoin de quelques paramètres pour permettre une telle opération.</p><p id="r-961541" data-claire-element-id="961541">Pour expliquer son fonctionnement, je vais prendre une bonne vieille fonction connue des habitués d'OpenGL : la fonction <strong>gluPerspective</strong>().</p><div id="r-961543" data-claire-element-id="961543" data-claire-semantic="question"><p id="r-961542" data-claire-element-id="961542">Euh ouai, mais moi je viens ici pour apprendre OpenGL, je ne connais pas cette fonction. :colere2:</p></div><p id="r-961544" data-claire-element-id="961544">Ne vous inquiétez pas, je vais vous expliquer le fonctionnement de cette fonction en détails, et j'ai plutôt intérêt à le faire étant donné que nous allons la recoder entièrement. :p</p><p id="r-961545" data-claire-element-id="961545">Comme je vous l'ai dit dans les chapitres précédents, une bonne partie des anciennes fonctions d'OpenGL a disparu avec la nouvelle version. La fonction <strong>gluPerspective</strong> a elle aussi disparu (indirectement). Il nous faudra donc la coder de nos propres mains. Et pour vous faciliter la tâche, je vais vous expliquer en détails son fonctionnement.</p><p id="r-961546" data-claire-element-id="961546">Premièrement, voici le prototype de la fonction :</p><pre id="r-961547" data-claire-element-id="961547"><code data-claire-semantic="cpp">void gluPerspective(double angle, double ratio, double near, double far);</code></pre><aside id="r-961549" data-claire-element-id="961549" data-claire-semantic="information"><p id="r-961548" data-claire-element-id="961548">J'ai volontairement modifié le nom des paramètres pour une meilleure compréhension, cependant je garderai le nom original des fonctions recodées avec le préfixe (gl, glu, ...) en moins. ;)</p></aside><p id="r-961550" data-claire-element-id="961550">Hum tout plein de paramètres intéressants ^^ . Je vais commencer par les deux derniers paramètres : <strong>near</strong> et <strong>far</strong>.</p><h3 id="r-near" data-claire-element-id="961558">Near</h3><p id="r-961551" data-claire-element-id="961551">Le paramètre <strong>Near</strong> correspond à la distance entre votre écran et ce qui sera affiché.</p><figure id="r-961553" data-claire-element-id="961554"><img id="r-961552" data-claire-element-id="961552" src="medias/uploads.siteduzero.com_files_282001_283000_282707.png" alt="Image utilisateur"/></figure><p id="r-961555" data-claire-element-id="961555">La petite zone entre l'écran et la plaque est une zone où rien ne sera affiché. Même s'il y a un objet dans cet intervalle il ne sera pas affiché.</p><p id="r-961556" data-claire-element-id="961556">Pourquoi me direz-vous ? Simplement parce que les mathématiques nous l'imposent, il nous faut obligatoirement une zone non-affichable pour que le calcul de la projection puisse s'effectuer. Il se passe la même chose avec la division par zéro, c'est impossible. Il faut obligatoirement que le dénominateur soit au moins un peu plus grand (ou plus petit mais on s'en moque) que zéro.</p><p id="r-961557" data-claire-element-id="961557">Le paramètre <strong>near</strong> représente donc ce petit intervalle nécessaire au calcul de la projection.</p><h3 id="r-far" data-claire-element-id="961565">Far</h3><p id="r-961559" data-claire-element-id="961559">Le paramètre <strong>far</strong> est un peu plus simple, on peut dire que c'est l'inverse de near.</p><p id="r-961560" data-claire-element-id="961560">C'est également une distance entre votre écran et ce qui sera affiché. La différence est que tout objet se trouvant au delà de cette distance ne sera pas affiché.</p><figure id="r-961562" data-claire-element-id="961563"><img id="r-961561" data-claire-element-id="961561" src="medias/uploads.siteduzero.com_files_282001_283000_282708.png" alt="Image utilisateur"/></figure><p id="r-961564" data-claire-element-id="961564">Au final, pour qu'un objet puisse s'afficher sur l'écran, il faut qu'il se situe entre les zones <strong>near</strong> et <strong>far</strong>, sinon il ne sera pas affiché.</p><h3 id="r-ratio" data-claire-element-id="961569">Ratio</h3><p id="r-961566" data-claire-element-id="961566">Je pense que vous avez tous entendu parler des télévisions 4/3 (quatre tiers) et 16/9 (seize neuvièmes). Le <strong>ratio</strong> est le rapport entre la longueur de la télé et sa hauteur. Dans la plupart des cas nous avons soit un ratio de 4/3 soit un ratio de 16/9, voire 16/10 pour les jeux-vidéo.</p><p id="r-961567" data-claire-element-id="961567">Pour nous, le ratio s'appliquera à la fenêtre SDL que l'on a codée. Dans le chapitre 3, nous avions créé une fenêtre de 800 pixels par 600 pixels. Le ratio sera donc de 800/600, et si on simplifie la fraction on a un ratio de 4/3.</p><p id="r-961568" data-claire-element-id="961568">Dans les jeux-vidéo, on propose généralement plusieurs modes d'affichage afin de s'adapter à l'écran du joueur. En effet, tous les joueurs n'ont pas forcément le même écran. Nous donnerons au final comme paramètre la division entre la longueur de la fenêtre SDL et sa hauteur.</p><h3 id="r-angle-1" data-claire-element-id="961584">Angle</h3><p id="r-961570" data-claire-element-id="961570">Ce paramètre est le plus spécial de la fonction. C'est en fait l'<strong>angle de vue</strong> avec lequel nous allons voir la scène. Plus cet angle sera petit, plus on aura l'impression de faire un effet de zoom sur la scène. Et à l'inverse, plus il sera grand, plus on aura l'impression que la scène s'éloigne et se déforme.</p><p id="r-961571" data-claire-element-id="961571">Voici trois exemples de la même scène avec <strong>trois angles de vue</strong> différents :</p><figure id="r-961573" data-claire-element-id="961574"><img id="r-961572" data-claire-element-id="961572" src="medias/uploads.siteduzero.com_files_282001_283000_282709.png" alt="Image utilisateur"/></figure><figure id="r-961576" data-claire-element-id="961577"><img id="r-961575" data-claire-element-id="961575" src="medias/uploads.siteduzero.com_files_282001_283000_282710.png" alt="Image utilisateur"/></figure><figure id="r-961579" data-claire-element-id="961580"><img id="r-961578" data-claire-element-id="961578" src="medias/uploads.siteduzero.com_files_282001_283000_282711.png" alt="Image utilisateur"/></figure><p id="r-961581" data-claire-element-id="961581">Merci à Kayl pour sa scène de test. ^^ <br/> Dans la première image, on utilise un angle de <strong>70°</strong>, dans la deuxième un angle de <strong>30°</strong> et dans la troisième un angle de <strong>100°</strong>.</p><p id="r-961582" data-claire-element-id="961582">L'avantage d'un angle plus petit est que l'on a l'impression de faire un zoom de jumelle ou de sniper ;) . A l'inverse, un angle plus grand créera une ambiance plus particulière, mais ce genre d'angle s'utilise rarement.</p><p id="r-961583" data-claire-element-id="961583">En général, l'angle de vision &quot;<strong>normal</strong>&quot; est de <strong>70°</strong> (70 degrés) et c'est d'ailleurs ce que l'on mettra dans notre code.</p><h2 id="r-utilisation-de-la-librairie-glm" data-claire-element-id="961589">Utilisation de la librairie GLM</h2><p id="r-961586" data-claire-element-id="961586">Dans les précédentes versions d'OpenGL, il existait une multitude de fonctionnalités mathématiques qui étaient gérées par OpenGL même, les matrices en faisait évidemment partie. Cependant, ces fonctionnalités sont maintenant supprimées et il faut trouver un autre moyen de gérer nos matrices nous-même.</p><p id="r-961587" data-claire-element-id="961587">Heureusement pour nous, il existe une librairie qui s'appelle <strong>GLM</strong> (pour Open<strong>GL</strong><strong>Mathematics</strong>). Vous l'avez déjà téléchargée normalement donc vous n'avez rien à faire. Cette librairie nous permet d'utiliser les matrices, et bien plus encore, sans avoir à nous soucier de tout programmer à la main. Elle inclut même certaines fonctions dépréciées comme <strong>gluPerspective</strong>(). :)</p><p id="r-961588" data-claire-element-id="961588">Nous allons donc utiliser <strong>GLM</strong> pour simuler toutes les fonctions dont nous aurons besoin.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">
<span class="arrow"></span>
<span class="next">La troisième dimension (Partie 1/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
<span class="next">Utilisation de la projection</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisationdelaprojection"></a><h2>Utilisation de la projection</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
<span class="arrow"></span>
<span class="next">La matrice de projection</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
<span class="next">Exemples de transformations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-inclusion-des-matrices-1" data-claire-element-id="961642">Inclusion des matrices</h2><p id="r-961591" data-claire-element-id="961591">Toutes ces belles matrices (que vous adorez j'en suis sûr :p ) ne nous servent pas à grand chose pour l'instant. Nous allons maintenant les intégrer dans notre code OpenGL pour enfin voir ce qu'elles ont véritablement dans le ventre.</p><p id="r-961592" data-claire-element-id="961592">Reprenons le code de la <em><strong>boucle principale</strong></em> que nous avons laissé au chapitre 4 :</p><pre id="r-961593" data-claire-element-id="961593"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables
	
    bool terminer(false);
    float vertices[] = {-0.5, -0.5,   0.0, 0.5,   0.5, -0.5};
    float couleurs[] = {1.0, 0.0, 0.0,  0.0, 1.0, 0.0,  0.0, 0.0, 1.0};
	
	
    // Shader
	
    Shader shaderCouleur(&quot;Shaders/couleur2D.vert&quot;, &quot;Shaders/couleur2D.frag&quot;);
    shaderCouleur.charger();
	
	
    // Boucle principale
	
    while(!terminer)
    {
        /* ***** Code d'affichage ***** */
    }
}</code></pre><p id="r-961594" data-claire-element-id="961594">Je n'ai pas mis tout le code, seule cette partie nous intéresse pour le moment.</p><h3 id="r-les-en-tetes-de-glm" data-claire-element-id="961603">Les en-têtes de GLM</h3><p id="r-961595" data-claire-element-id="961595">Vous savez maintenant que l'on a besoin de deux matrices pour faire fonctionner un jeu 3D : la matrice de <strong>projection</strong> et la <strong>modelview</strong>. Nous allons donc les déclarer dans notre code grâce à librairie <strong>GLM</strong>.</p><p id="r-961596" data-claire-element-id="961596">Pour commencer, veuillez inclure les en-têtes suivants dans le fichier <strong>SceneOpenGL.h</strong> qui permettent à notre programme d'utiliser les matrices :</p><pre id="r-961597" data-claire-element-id="961597"><code data-claire-semantic="cpp">// Includes OpenGL

....


// Includes GLM

#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtx/transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;


// Autres includes

#include &lt;SDL2/SDL.h&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;
#include &quot;Shader.h&quot;</code></pre><p id="r-961598" data-claire-element-id="961598">La première inclusion permet d'utiliser les fonctionnalités principales de <strong>GLM</strong>, la deuxième les transformations et la dernière permet de récupérer les valeurs des matrices (nous verrons cela dans un instant).</p><div id="r-961600" data-claire-element-id="961600" data-claire-semantic="question"><p id="r-961599" data-claire-element-id="961599">Elle est bizarre ton extension c'est marqué <strong>.hpp</strong> c'est normal ?</p></div><p id="r-961601" data-claire-element-id="961601">Oui tout à fait. :)</p><p id="r-961602" data-claire-element-id="961602">La particularité de <strong>GLM</strong> c'est qu'elle est codée directement dans les headers, il n'y a pas de librairie pré-compilée comme la SDL par exemple. Grâce à ce système, <strong>GLM</strong> est compatible avec toutes les plateformes et il n'y a pas besoin de fournir de fichier spécifique pour Linux, Windows, etc. Ni même pour compilateur (.a, .dll, etc.)</p><h3 id="r-inclusion-des-matrices" data-claire-element-id="961614">Inclusion des matrices</h3><p id="r-961604" data-claire-element-id="961604">Après toute cette théorie nous pouvons enfin coder nos premières matrices. L'objectif est de créer deux matrices du nom de <strong>projection</strong> et <strong>modelview</strong>.</p><p id="r-961605" data-claire-element-id="961605">Pour cela, nous allons déclarer deux objets de type <em><strong>mat4</strong></em>, pour <em>matrice carrée d'ordre 4</em>. Il faut utiliser le <strong>namespace <em>glm</em></strong> en même temps que la déclaration :</p><pre id="r-961606" data-claire-element-id="961606"><code data-claire-semantic="cpp">// Matrices projection et modelview

glm::mat4 projection;
glm::mat4 modelview;</code></pre><p id="r-961607" data-claire-element-id="961607">Tous les objets et méthodes de <strong>GLM</strong> doivent utiliser le <strong>namespace <em>glm</em></strong>. Pour éviter d'avoir à le taper à chaque fois, ajoutez la ligne de code suivante dans chaque classe où vous utiliser les matrices :</p><pre id="r-961608" data-claire-element-id="961608"><code data-claire-semantic="cpp">// Permet d'éviter la ré-écriture du namespace glm::

using namespace glm;</code></pre><aside id="r-961610" data-claire-element-id="961610" data-claire-semantic="warning"><p id="r-961609" data-claire-element-id="961609">Ajoutez cette ligne dans le fichier <strong>.cpp</strong> et non <strong>.h</strong> faites attention.</p></aside><p id="r-961611" data-claire-element-id="961611">Avec cette ligne de code, la déclaration des matrices devient :</p><pre id="r-961612" data-claire-element-id="961612"><code data-claire-semantic="cpp">// Matrices projection et modelview

mat4 projection;
mat4 modelview;</code></pre><p id="r-961613" data-claire-element-id="961613">Maintenant que les matrices sont déclarées, nous allons pouvoir les initialiser.</p><h3 id="r-la-matrice-projection" data-claire-element-id="961632">La matrice projection</h3><p id="r-961615" data-claire-element-id="961615">Occupons-nous d’abord de la projection. Dans la partie précédente, nous avons parlé d'une ancienne fonction du nom de <strong>gluPerspective</strong>(). Celle-ci a disparu avec OpenGL 3 mais <strong>GLM</strong> l'a gentiment recoder pour nous sous la forme d'une méthode, voici son prototype :</p><pre id="r-961616" data-claire-element-id="961616"><code data-claire-semantic="cpp">mat4 perspective(double angle, double ratio, double near, double far);</code></pre><p id="r-961617" data-claire-element-id="961617">On remarque qu'elle contient exactement les mêmes paramètres, pratique n'est-ce pas ? La seule différence est qu'elle renvoie un objet de type <em><strong>mat4</strong></em>, cet objet doit être affecté à la matrice <strong>projection</strong>.</p><p id="r-961618" data-claire-element-id="961618">Nous appellerons cette méthode avec les paramètres suivants :</p><ul id="r-961627" data-claire-element-id="961627"><li id="r-961620" data-claire-element-id="961620"><p id="r-961619" data-claire-element-id="961619">Un <strong>angle</strong> de <strong>70°</strong> (qui correspond à un angle de vision normal).</p></li><li id="r-961622" data-claire-element-id="961622"><p id="r-961621" data-claire-element-id="961621">Un <strong>ratio</strong> en fonction de la taille de la fenêtre, ici un <strong>ratio de m_largeurFenetre / m_hauteurFenetre</strong>.</p></li><li id="r-961624" data-claire-element-id="961624"><p id="r-961623" data-claire-element-id="961623">Le paramètre <strong>near</strong> avec une valeur de 1.</p></li><li id="r-961626" data-claire-element-id="961626"><p id="r-961625" data-claire-element-id="961625">Le paramètre <strong>far</strong> avec une valeur de 100.</p></li></ul><p id="r-961628" data-claire-element-id="961628">Voici son appel :</p><pre id="r-961629" data-claire-element-id="961629"><code data-claire-semantic="cpp">// Matrices

mat4 projection;
mat4 modelview;


// Initialisation

projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);</code></pre><aside id="r-961631" data-claire-element-id="961631" data-claire-semantic="information"><p id="r-961630" data-claire-element-id="961630">N'oubliez pas de faire un cast pour le <strong>ratio</strong>, sinon vous n'aurez que la partie entière de la division.</p></aside><h3 id="r-la-matrice-modelview" data-claire-element-id="961637">La matrice modelview</h3><p id="r-961633" data-claire-element-id="961633">Pour la matrice modelview c'est un peu plus simple. Pour l'initialiser, nous allons leur donner les valeurs d'une matrice d'identité (avec les <strong>1</strong> en diagonale). Elle ne doit pas avoir que des valeurs nulles car si nous multiplions des vecteurs par des <strong>0</strong>, il risquerait d'y avoir un gros problème avec notre scène finale. :-°</p><p id="r-961634" data-claire-element-id="961634">Pour cela, nous allons utiliser un constructeur qui ne demande qu'une seule valeur : la valeur <strong>1.0</strong>.</p><pre id="r-961635" data-claire-element-id="961635"><code data-claire-semantic="cpp">// Matrices

mat4 projection;
mat4 modelview;


// Initialisation

projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
modelview = mat4(1.0);</code></pre><p id="r-961636" data-claire-element-id="961636">Le constructeur sait tout seul qu'il doit utiliser une matrice d’identité, cela éviter d'avoir à écrire toutes les valeurs à la main pour mettre des <strong>1.0</strong> en diagonal. :p</p><h3 id="r-la-boucle-principale-3" data-claire-element-id="961641">La boucle principale</h3><p id="r-961638" data-claire-element-id="961638">Vous vous souvenez qu'au début du chapitre je vous ai parlé du comportement des matrices avec la boucle principale du programme ? Je vous avais dit qu'à chaque tour de boucle, il fallait réinitialiser la matrice <strong>modelview</strong> pour ne pas avoir les anciennes valeurs du tour précédent.</p><p id="r-961639" data-claire-element-id="961639">Cette réinitialisation se fait exactement de la même façon que l'initialisation. C'est-à-dire que l'on affecte le résultat du constructeur <strong>mat4(1.0)</strong> à la matrice <strong>modelview</strong>. Nous devons faire ceci juste après le nettoyage de l'écran :</p><pre id="r-961640" data-claire-element-id="961640"><code data-claire-semantic="cpp">while(!terminer)
{
    // Gestion des évènements

    SDL_WaitEvent(&amp;m_evenements);
		
    if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT);


    // Réinitialisation de la matrice modelview

    modelview = mat4(1.0);
}</code></pre><h2 id="r-interaction-entre-le-programme-et-les-matrices" data-claire-element-id="961696">Interaction entre le programme et les matrices</h2><p id="r-961643" data-claire-element-id="961643">Notre code OpenGL devient de plus en plus beau :D . Mais les matrices ne nous servent toujours pas à grand chose elles n'interagissent toujours pas avec notre programme.</p><p id="r-961644" data-claire-element-id="961644">Je ne vais pas m'étaler sur le sujet pour le moment, mais sachez que l'interaction entre les matrices et le programme se fait dans le <strong>shader</strong>. C'est lui qui va faire tous les calculs pour projeter le monde 3D sur notre écran.</p><p id="r-961645" data-claire-element-id="961645">Pour le moment, le shader que nous avons chargé (<strong>couleur2D</strong>) est incapable de gérer la projection, il faut en charger un autre. Si vous n'avez rien modifié dans le dossier &quot;<strong>Shaders</strong>&quot; du chapitre 4, vous devriez trouver des codes sources qui s'appellent <strong>couleur3D.vert</strong> et <strong>couleur3D.frag</strong>(à ne pas confondre avec <strong>couleur2D</strong>). Si vous ne trouvez pas ces fichiers, re-téléchargez le dossier complet depuis le chapitre 4.</p><p id="r-961646" data-claire-element-id="961646">À la différence du premier shader, <strong>couleur3D</strong> est, lui, capable de gérer la projection. Nous allons donc le charger à la place de son prédécesseur :</p><pre id="r-961647" data-claire-element-id="961647"><code data-claire-semantic="cpp">// Shader gérant la couleur et les matrices

Shader shaderCouleur(&quot;Shaders/couleur3D.vert&quot;, &quot;Shaders/couleur3D.frag&quot;);
shaderCouleur.charger();</code></pre><p id="r-961648" data-claire-element-id="961648">Ne vous inquiétez pas si le <em>fragment shader</em> ne change pas, c'est normal. ;)</p><p id="r-961649" data-claire-element-id="961649">Le shader n'est pas le seul à devoir changer, les vertices doivent elles aussi subir une modification. Il faut leur ajouter une troisième dimension pour les rendre compatibles avec la projection.</p><div id="r-961651" data-claire-element-id="961651" data-claire-semantic="question"><p id="r-961650" data-claire-element-id="961650">Ça veut dire que nos triangles seront en 3D ?</p></div><p id="r-961652" data-claire-element-id="961652">Oui et non ... En fait, ils sont en 3D mais pour le moment nous sommes mal placés pour les voir de cette façon. Nous verrons dans la deuxième partie de ce chapitre comment &quot;bien se placer&quot;. Ne vous inquiétez pas ça arrivera très vite. ;)</p><p id="r-961653" data-claire-element-id="961653">Bref au final, il suffit d'ajouter la coordonnée <strong>Z</strong> à tous les vertices pour qu'ils soient en 3D. Nous mettrons la valeur <strong>-1</strong> pour le moment :</p><pre id="r-961654" data-claire-element-id="961654"><code data-claire-semantic="cpp">float vertices[] = {-0.5, -0.5, -1.0,   0.0, 0.5, -1.0,   0.5, -0.5, -1.0};</code></pre><p id="r-961655" data-claire-element-id="961655">Vu que nous ajoutons une coordonnée à nos vertices, il va falloir modifier un paramètre dans la fonction <strong>glVertexAttribPointer</strong>. Le paramètre <strong>size</strong> permet de spécifier la taille d'un vertex, donc son nombre de coordonnées. On le passe désormais à <strong>3</strong> car nous avons <strong>3 coordonnées</strong> :</p><pre id="r-961656" data-claire-element-id="961656"><code data-claire-semantic="cpp">glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);</code></pre><p id="r-961657" data-claire-element-id="961657">Revenons à notre shader, vu que c'est lui qui gère les calculs de projection, il va falloir lui envoyer les matrices que nous avons déclarées pour qu'il puisse travailler correctement. L'envoi de matrice au shader se fait avec cette fonction :</p><pre id="r-961658" data-claire-element-id="961658"><code data-claire-semantic="cpp">glUniformMatrix4fv(GLint location, GLsizei count, GLboolean transpose, const GLfloat* value);</code></pre><ul id="r-961667" data-claire-element-id="961667"><li id="r-961660" data-claire-element-id="961660"><p id="r-961659" data-claire-element-id="961659"><strong>location</strong> : permet de savoir où envoyer les matrices à l'intérieur même du shader.</p></li><li id="r-961662" data-claire-element-id="961662"><p id="r-961661" data-claire-element-id="961661"><strong>count</strong> : permet de savoir combien de matrice on envoie. On n'enverra qu'une seule matrice à la fois.</p></li><li id="r-961664" data-claire-element-id="961664"><p id="r-961663" data-claire-element-id="961663"><strong>transpose</strong> : booléen qui permet d'inverser ou non la matrice qu'on envoie. Dans notre cas, on lui donnera toujours la valeur <strong>GL_FALSE</strong>.</p></li><li id="r-961666" data-claire-element-id="961666"><p id="r-961665" data-claire-element-id="961665"><strong>value</strong> : est un pointeur sur le tableau de valeurs de la matrice. Nous utiliserons la méthode <strong>value_ptr()</strong> de la librairie <strong>GLM</strong></p></li></ul><p id="r-961668" data-claire-element-id="961668">Je vous expliquerai en détails le fonctionnement de cette fonction dans le chapitre sur les shaders. Sachez juste qu'elle nous permet d'envoyer nos matrices au shader.</p><p id="r-961669" data-claire-element-id="961669">Nous lui enverrons ces valeurs :</p><ul id="r-961678" data-claire-element-id="961678"><li id="r-961671" data-claire-element-id="961671"><p id="r-961670" data-claire-element-id="961670"><strong>location</strong> : glGetUniformLocation(shaderCouleur.getProgramID(), <strong><em>&quot;Le_nom_de_la_matrice&quot;</em></strong>). Oui c'est bien une fonction (on la verra également dans le chapitre sur les shaders). Le paramètre en rouge est une chaine de caractères, nous lui donnerons la valeur &quot;<strong>modelview</strong>&quot; et &quot;<strong>projection</strong>&quot;.</p></li><li id="r-961673" data-claire-element-id="961673"><p id="r-961672" data-claire-element-id="961672"><strong>count</strong> : 1 (le chiffre 1) pour une matrice.</p></li><li id="r-961675" data-claire-element-id="961675"><p id="r-961674" data-claire-element-id="961674"><strong>transpose</strong> : GL_FALSE.</p></li><li id="r-961677" data-claire-element-id="961677"><p id="r-961676" data-claire-element-id="961676"><strong>value</strong> : Nous lui donnerons le résultat de la méthode <em><strong>value_ptr</strong></em>() de nos objets mat4.</p></li></ul><p id="r-961679" data-claire-element-id="961679">Grâce à cette fonction, notre shader va pouvoir travailler avec les matrices que nous avons déclarées dans le main.</p><p id="r-961680" data-claire-element-id="961680">Nous appellerons cette fonction deux fois vu que nous avons deux matrices à envoyer. Ces appels se feront juste avant une fonction que vous connaissez bien : <strong>glDrawArrays</strong>().</p><p id="r-961681" data-claire-element-id="961681">Dans notre cas, nous ferons ces appels toujours de la même façon :</p><pre id="r-961682" data-claire-element-id="961682"><code data-claire-semantic="cpp">// On envoie les matrices au shader

glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));
glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));</code></pre><p id="r-961683" data-claire-element-id="961683">Si on les intègre au code d'affichage ça donne ceci :</p><pre id="r-961684" data-claire-element-id="961684"><code data-claire-semantic="cpp">// On spécifie quel shader utiliser

glUseProgram(shaderCouleur.getProgramID());


    // Envoi des vertices et des couleurs

    ....


    // On envoie les matrices au shader

    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));
    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));


    // On affiche le polygone

    glDrawArrays(GL_TRIANGLES, 0, 3);


    // Désactivation des Vertex Attrib

    ....


// On n'utilise plus le shader

glUseProgram(0);</code></pre><aside id="r-961686" data-claire-element-id="961686" data-claire-semantic="warning"><p id="r-961685" data-claire-element-id="961685">Il faut envoyer les matrices au shader <strong>APRÈS</strong> avoir fait toutes les transformations ! Si vous les envoyez et que vous faites des transformations après, alors elles ne seront pas prises en compte.<br/> De même, faites attention à les envoyer <strong>APRÈS</strong> la fonction <strong>glUseProgram</strong>(), sinon vous les enverrez dans le vide. ;)</p></aside><p id="r-961687" data-claire-element-id="961687">Je pense vous avoir parlé de tout, compilons tout ça pour voir que ça donne :</p><pre id="r-961688" data-claire-element-id="961688"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables
	
    bool terminer(false);
    float vertices[] = {-0.5, -0.5, -1.0,   0.0, 0.5, -1.0,   0.5, -0.5, -1.0};
    float couleurs[] = {1.0, 0.0, 0.0,  0.0, 1.0, 0.0,  0.0, 0.0, 1.0};
	
	
    // Shader
	
    Shader shaderCouleur(&quot;Shaders/couleur3D.vert&quot;, &quot;Shaders/couleur3D.frag&quot;);
    shaderCouleur.charger();


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);

	
    // Boucle principale
	
    while(!terminer)
    {
        // Gestion des évènements

        SDL_WaitEvent(&amp;m_evenements);

        if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
            terminer = true;


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT);


        // Réinitialisation de la matrice modelview

        modelview = mat4(1.0);


        // On spécifie quel shader utiliser

        glUseProgram(shaderCouleur.getProgramID());


            // On remplie puis on active le tableau Vertex Attrib 0

            glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);
            glEnableVertexAttribArray(0);


            // Même chose avec le tableau Vertex Attrib 1

            glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, couleurs);
            glEnableVertexAttribArray(1);


            // On envoie les matrices au shader

            glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));
            glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));


            // On affiche le polygone

            glDrawArrays(GL_TRIANGLES, 0, 3);


            // On désactive les tableaux Vertex Attrib puisque l'on n'en a plus besoin

            glDisableVertexAttribArray(1);
            glDisableVertexAttribArray(0);


        // On n'utilise plus le shader

        glUseProgram(0);


        // Actualisation de la fenêtre

        SDL_GL_SwapWindow(m_fenetre);
    }
}</code></pre><p id="r-961689" data-claire-element-id="961689">Vous devriez avoir cette fenêtre :</p><figure id="r-961691" data-claire-element-id="961692"><img id="r-961690" data-claire-element-id="961690" src="medias/uploads.siteduzero.com_files_282001_283000_282714.png" alt="Image utilisateur"/></figure><div id="r-961694" data-claire-element-id="961694" data-claire-semantic="question"><p id="r-961693" data-claire-element-id="961693">C'est tout ? C'est pratiquement la même chose qu'avant. :(</p></div><p id="r-961695" data-claire-element-id="961695">À première vue oui, il ne se passe rien de plus sauf peut-être une légère déformation de notre triangle. Mais sachez que dans votre carte graphique il se passe pas mal de choses. De plus, nous pouvons maintenant utiliser les transformations dans nos programmes et ce sont justement elles qui forment la base d'un jeu-vidéo. Sans transformations, nous serions encore en train de jouer au Pong. :lol:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
<span class="arrow"></span>
<span class="next">La matrice de projection</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
<span class="next">Exemples de transformations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Exemplesdetransformations"></a><h2>Exemples de transformations</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
<span class="arrow"></span>
<span class="next">Utilisation de la projection</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">
<span class="next">La troisième dimension (Partie 2/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-introduction-40" data-claire-element-id="961705">Introduction</h2><p id="r-961698" data-claire-element-id="961698">On va se reposer un peu dans cette partie, il n'y a rien de nouveau, on utilisera juste ce que l'on a déjà codé.</p><p id="r-961699" data-claire-element-id="961699">Tout d'abord, on va changer un peu nos vertices pour avoir un triangle plus petit. Sinon nous ne pourrions pas vraiment voir ce que donnent les transformations :</p><pre id="r-961700" data-claire-element-id="961700"><code data-claire-semantic="cpp">float vertices[] = {0.0, 0.0, -1.0,  0.5, 0.0, -1.0,  0.0, 0.5, -1.0};</code></pre><p id="r-961701" data-claire-element-id="961701">D'origine, voici la position du triangle :</p><figure id="r-961703" data-claire-element-id="961704"><img id="r-961702" data-claire-element-id="961702" src="medias/uploads.siteduzero.com_files_282001_283000_282722.png" alt="Image utilisateur"/></figure><h2 id="r-les-transformations-5" data-claire-element-id="961796">Les transformations</h2><h3 id="r-la-translation-2" data-claire-element-id="961727">La translation</h3><p id="r-961706" data-claire-element-id="961706">Prenons un vecteur V de coordonnées (0.4, 0.0, 0.0) pour effectuer une translation du repère (matrice <strong>modelview</strong>) sur 0.4 unité sur l'axe X. Normalement, le triangle devrait se retrouver sur la gauche.</p><p id="r-961707" data-claire-element-id="961707">Pour faire une translation avec <strong>GLM</strong>, nous allons utiliser la méthode <strong>translate</strong>() dont voici le prototype :</p><pre id="r-961708" data-claire-element-id="961708"><code data-claire-semantic="cpp">mat4 translate(mat4 matrice, vec3 translation);</code></pre><ul id="r-961713" data-claire-element-id="961713"><li id="r-961710" data-claire-element-id="961710"><p id="r-961709" data-claire-element-id="961709"><strong>mat4</strong> : matrice qui sera multipliée par la matrice de translation. Il s'agit ici de <strong>modelview</strong></p></li><li id="r-961712" data-claire-element-id="961712"><p id="r-961711" data-claire-element-id="961711"><strong>translation</strong> : objet vecteur à 3 coordonnées. Il correspond ici un point dans l'espace avec 3 coordonnées (x, y et z)</p></li></ul><p id="r-961714" data-claire-element-id="961714">La méthode renvoie la matrice donnée en paramètre avec la translation ajoutée.</p><p id="r-961715" data-claire-element-id="961715">Pour contenter l'objet <em><strong>vec3</strong></em>, nous allons juste appeler le constructeur <strong>vec3</strong> avec les coordonnées de la translation que l'on veut faire, ici (0.4, 0.0, 0.0).</p><p id="r-961716" data-claire-element-id="961716">L'appel à la méthode ressemble au final à ceci :</p><pre id="r-961717" data-claire-element-id="961717"><code data-claire-semantic="cpp">// Translation

modelview = translate(modelview, vec3(0.4, 0.0, 0.0));</code></pre><p id="r-961718" data-claire-element-id="961718">On identifie bien ce que fait cette ligne de code. On appelle la méthode <strong>translate</strong>() qui va modifier la matrice <strong>modelview</strong> à l'aide du <strong>vecteur</strong> de coordonnées (0.4, 0.0, 0.0).</p><p id="r-961719" data-claire-element-id="961719">Nous devons inclure cette ligne juste avant l'envoi des matrices au shader :</p><pre id="r-961720" data-claire-element-id="961720"><code data-claire-semantic="cpp">// On spécifie quel shader utiliser

glUseProgram(shaderCouleur.getProgramID());


    // Remplissage des tableaux Vertex Attrib 0 et 1

    ....


    // Translation

    modelview = translate(modelview, vec3(0.4, 0.0, 0.0));


    // On envoie les matrices au shader

    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));
    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));


    // Affichage

    ....


// On n'utilise plus le shader

glUseProgram(0);</code></pre><p id="r-961721" data-claire-element-id="961721">Ce qui nous donne :</p><figure id="r-961723" data-claire-element-id="961724"><img id="r-961722" data-claire-element-id="961722" src="medias/uploads.siteduzero.com_files_282001_283000_282723.png" alt="Image utilisateur"/></figure><p id="r-961725" data-claire-element-id="961725">Le triangle ne connait aucun changement, nous n'avons pas modifié ses <strong>coordonnées</strong>. En revanche, le repère lui a changé. On l'a translaté selon le vecteur V, le triangle se trouve donc un peu plus loin.</p><p id="r-961726" data-claire-element-id="961726">Bon, sur une si petite forme on ne voit pas trop l'intérêt, mais sur un personnage de plus de 1000 vectices on voit la différence croyez-moi. :p</p><h3 id="r-la-rotation-5" data-claire-element-id="961749">La rotation</h3><p id="r-961728" data-claire-element-id="961728">Nous allons maintenant faire pivoter le triangle d'un angle de 60° selon l'axe Z. L'axe Z est pointé vers nous mais nous ne le voyons pas, nous verrons cela dans la deuxième partie du chapitre.</p><p id="r-961729" data-claire-element-id="961729">Nous utiliserons pour cela la méthode <strong>GLM</strong><strong>rotate</strong>() :</p><pre id="r-961730" data-claire-element-id="961730"><code data-claire-semantic="cpp">mat4 rotate(mat4 matrice, double angle, vec3 axis);</code></pre><p id="r-961731" data-claire-element-id="961731">Les paramètres sont sensiblement les mêmes :</p><ul id="r-961738" data-claire-element-id="961738"><li id="r-961733" data-claire-element-id="961733"><p id="r-961732" data-claire-element-id="961732"><strong>matrice</strong> : matrice qui sera multipliée par la rotation. Il s'agit ici de modelview</p></li><li id="r-961735" data-claire-element-id="961735"><p id="r-961734" data-claire-element-id="961734"><strong>angle</strong> : angle de la rotation</p></li><li id="r-961737" data-claire-element-id="961737"><p id="r-961736" data-claire-element-id="961736"><strong>axis</strong> : vecteur représentant l'axe de la rotation</p></li></ul><p id="r-961739" data-claire-element-id="961739">Pour effectuer une rotation de 60° sur l'axe Z, il suffit donc d'appeler la méthode <strong>rotate</strong>() de cette façon :</p><pre id="r-961740" data-claire-element-id="961740"><code data-claire-semantic="cpp">// Rotation

modelview = rotate(modelview, 60.0f, vec3(0.0, 0.0, 1.0));</code></pre><aside id="r-961742" data-claire-element-id="961742" data-claire-semantic="warning"><p id="r-961741" data-claire-element-id="961741">Attention, cette méthode est capricieuse et demande une variable <em><strong>float</strong></em>. Il faut donc ajouter le suffit <strong>f</strong> à l'angle dans tous les cas.</p></aside><p id="r-961743" data-claire-element-id="961743">On inclut cette ligne juste avant d'envoyer les matrices au shader :</p><pre id="r-961744" data-claire-element-id="961744"><code data-claire-semantic="cpp">// On spécifie quel shader utiliser

glUseProgram(shaderCouleur.getProgramID());


    // Remplissage des tableaux Vertex Attrib 0 et 1

    ....


    // Rotation

    modelview = rotate(modelview, 60.0f, vec3(0.0, 0.0, 1.0));


    // On envoie les matrices au shader

    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));
    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));


    // Affichage

    ....


// On n'utilise plus le shader

glUseProgram(0);</code></pre><figure id="r-961746" data-claire-element-id="961747"><img id="r-961745" data-claire-element-id="961745" src="medias/uploads.siteduzero.com_files_421001_422000_421432.png" alt="Image utilisateur"/></figure><p id="r-961748" data-claire-element-id="961748">Hop, le triangle a pivoté de 60° (dans le sens trigonométrique). Encore une fois, on modifie le repère, on ne touche pas aux coordonnées du triangle.</p><h3 id="r-l-homothetie-2" data-claire-element-id="961772">L'homothétie</h3><p id="r-961750" data-claire-element-id="961750">Allez encore une petit exemple. Nous allons faire une homothétie en multipliant par 2 les unités de mesure du repère. 1 unité sera plus longue, donc le triangle paraitra plus gros.</p><p id="r-961751" data-claire-element-id="961751">On appellera pour cela la méthode <strong>scale</strong>() :</p><pre id="r-961752" data-claire-element-id="961752"><code data-claire-semantic="cpp">mat4 scale(mat4 matrice, vec3 factors);</code></pre><ul id="r-961757" data-claire-element-id="961757"><li id="r-961754" data-claire-element-id="961754"><p id="r-961753" data-claire-element-id="961753"><strong>matrice</strong> : matrice qui sera multipliée par la rotation. Il s'agit ici de <strong>modelview</strong></p></li><li id="r-961756" data-claire-element-id="961756"><p id="r-961755" data-claire-element-id="961755"><strong>factors</strong> : vecteur contenant les 3 facteurs de redimensionnement pour les X, Y et Z</p></li></ul><p id="r-961758" data-claire-element-id="961758">On appellera cette méthode ainsi pour agrandir le repère de 2 unités sur les axes X et Y. L'axe Z n'est pas encore visible pour nous, on le laisse donc comme ça.</p><pre id="r-961759" data-claire-element-id="961759"><code data-claire-semantic="cpp">// Homothétie

modelview = scale(modelview, vec3(2, 2, 1));</code></pre><p id="r-961760" data-claire-element-id="961760">Et comme d'habitude, on l'appelle juste avant d'envoyer les matrices au shader :</p><pre id="r-961761" data-claire-element-id="961761"><code data-claire-semantic="cpp">// On spécifie quel shader utiliser

glUseProgram(shaderCouleur.getProgramID());


    // Remplissage des tableaux Vertex Attrib 0 et 1

    ....


    // Homothétie

    modelview = scale(modelview, vec3(2, 2, 1));


    // On envoie les matrices au shader

    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));
    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));


    // Affichage

    ....


// On n'utilise plus le shader

glUseProgram(0);</code></pre><figure id="r-961763" data-claire-element-id="961764"><img id="r-961762" data-claire-element-id="961762" src="medias/uploads.siteduzero.com_files_282001_283000_282725.png" alt="Image utilisateur"/></figure><p id="r-961765" data-claire-element-id="961765">Le triangle est tellement gros qu'il sort de la fenêtre :lol: . Bref vous avez compris le principe.</p><p id="r-961766" data-claire-element-id="961766">Je vais même vous montrer un truc sympa avec les homothéties, on va inverser le triangle. C'est une technique utilisée dans les jeux-vidéo pour les effets de reflets (comme un effet de miroir, d'eau, ...) :</p><pre id="r-961767" data-claire-element-id="961767"><code data-claire-semantic="cpp">// Inversion du repère

modelview = scale(modelview, vec3(1, -1, 1));</code></pre><p id="r-961768" data-claire-element-id="961768">Les axes X et Z ne sont pas modifiés, ils sont multipliés par 1. Mais l'axe Y lui est inversé, voici ce que ça donne :</p><figure id="r-961770" data-claire-element-id="961771"><img id="r-961769" data-claire-element-id="961769" src="medias/uploads.siteduzero.com_files_282001_283000_282726.png" alt="Image utilisateur"/></figure><h3 id="r-ordre-des-transformations-2" data-claire-element-id="961786">Ordre des transformations</h3><p id="r-961773" data-claire-element-id="961773">Je vous ai dit au tout début que l'ordre des transformations était important. Vous pouvez désormais le constater par vous-même. Tout d'abord, on va translater notre triangle selon le vecteur V de coordonnées (0.4, 0.0, 0.0) puis on va le faire pivoter d'un angle de 60° sur l'axe Z :</p><pre id="r-961774" data-claire-element-id="961774"><code data-claire-semantic="cpp">// Translation puis rotation

modelview = translate(modelview, vec3(0.4, 0, 0));
modelview = rotate(modelview, 60.0f, vec3(0, 0, 1));</code></pre><p id="r-961775" data-claire-element-id="961775">Voici le rendu :</p><figure id="r-961777" data-claire-element-id="961778"><img id="r-961776" data-claire-element-id="961776" src="medias/uploads.siteduzero.com_files_421001_422000_421433.png" alt="Image utilisateur"/></figure><p id="r-961779" data-claire-element-id="961779">Maintenant, on fait l'inverse :</p><pre id="r-961780" data-claire-element-id="961780"><code data-claire-semantic="cpp">// Rotation puis translation

modelview = rotate(modelview, 60.0f, vec3(0, 0, 1));
modelview = translate(modelview, vec3(0.4, 0, 0));</code></pre><p id="r-961781" data-claire-element-id="961781">Rendu :</p><figure id="r-961783" data-claire-element-id="961784"><img id="r-961782" data-claire-element-id="961782" src="medias/uploads.siteduzero.com_files_421001_422000_421434.png" alt="Image utilisateur"/></figure><p id="r-961785" data-claire-element-id="961785">On n'obtient pas la même chose dans les deux exemples. Faites attention à l'ordre des transformations c'est important. ;)</p><h3 id="r-multi-affichage" data-claire-element-id="961795">Multi-affichage</h3><p id="r-961787" data-claire-element-id="961787">Courage on aborde le dernier point :p . Dans le deuxième chapitre nous avons vu comment afficher plusieurs triangles sans les transformations. Maintenant que nous les avons, on va voir comment se faciliter la vie.</p><p id="r-961788" data-claire-element-id="961788">Si vous affichez plusieurs fois la même chose, pas besoin de remplacer les valeurs du tableau car les valeurs sont toutes les mêmes :p . On ne fait qu'appliquer les transformations sur le repère puis on ré-affiche le triangle. Bien sûr, si on change les valeurs de la matrice modelview alors il faut la ré-envoyer au shader :</p><pre id="r-961789" data-claire-element-id="961789"><code data-claire-semantic="cpp">// On spécifie quel shader utiliser

glUseProgram(shaderCouleur.getProgramID());


    // On translate le premier triangle

    modelview = translate(modelview, vec3(0.4, 0, 0));


    // On envoie les matrices au shader

    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));
    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));


    /* ***** Affichage du premier triangle ***** */

    glDrawArrays(GL_TRIANGLES, 0, 3);




    // On fait pivoter le deuxième triangle puis on le translate

    modelview = rotate(modelview, 60.0f, vec3(0, 0, 1));
    modelview = translate(modelview, vec3(0.4, 0, 0));


    // On envoie une deuxième fois les matrices au shader

    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));
    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));


    /* ***** Affichage du deuxième triangle ***** */

    glDrawArrays(GL_TRIANGLES, 0, 3);


// On n'utilise plus le shader

glUseProgram(0);</code></pre><aside id="r-961791" data-claire-element-id="961791" data-claire-semantic="information"><p id="r-961790" data-claire-element-id="961790">Il est inutile d'activer le shader plusieurs fois si vous l'utilisez sur plusieurs polygones. Une seule fois suffit et n'oubliez pas de le désactiver après le dernier affichage.</p></aside><p id="r-961792" data-claire-element-id="961792">Je vous conseille de faire des petits tests avec les transformations, entrainez-vous avec avant de passer à la deuxième partie de ce chapitre. ;)</p><p id="r-961793" data-claire-element-id="961793"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/4canvpvermrias1/La troisieme dimension (Partie 1-2).zip?token_hash=AAG2gbvlxPMBCLTLJuxnvhkLIECr9kxig_F9S6nL0Yq0pQ&amp;dl=1">Code Source C++ du Chapitre 6</a></strong></p><p id="r-961794" data-claire-element-id="961794">Nous arrivons à la fin de cette première partie. Nous avons vu pas mal de notions et il est important que vous les compreniez. Encore une fois, amusez-vous à faire des transformations pour vous familiariser avec OpenGL. Si vous vous sentez prêts, passez à la deuxième partie (qui est plus facile à comprendre que cette partie ;) ).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
<span class="arrow"></span>
<span class="next">Utilisation de la projection</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">
<span class="next">La troisième dimension (Partie 2/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LatroisimedimensionPartie2_2"></a><h2>La troisième dimension (Partie 2/2)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
<span class="arrow"></span>
<span class="next">Exemples de transformations</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
<span class="next">La caméra</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-961799" data-claire-element-id="961799">Dans cette deuxième partie, nous allons enfin faire ce que vous attendez tous : de la 3D. :D Cette partie sera plus facile que la première, il y aura de nouvelles notions à apprendre mais rien de bien compliqué. Encore une fois, si vous n'avez pas tout compris jusque là, je vous conseille de relire à tête reposée les chapitres précédents.</p>
</div><a name="Lacamra"></a><h2>La caméra</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">
<span class="arrow"></span>
<span class="next">La troisième dimension (Partie 2/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
<span class="next">Affichage d&#039;un Cube</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-introduction-41" data-claire-element-id="961803">Introduction</h2><p id="r-961800" data-claire-element-id="961800">Dans le chapitre précédent, nous avons appris à faire interagir les matrices avec OpenGL et nous avons par la même occasion créé la matrice de projection. La bonne nouvelle, c'est que l'on connait déjà presque tout pour faire de la 3D. En effet, la troisième dimension est déjà implémentée dans nos programmes, nous l'avons vu en ajoutant la coordonnée Z à nos vertices. Seulement, nous sommes mal placés pour voir ce rendu en relief. Pour régler ce problème, il va falloir placer une chose indispensable à OpenGL : <strong>la caméra</strong>.</p><p id="r-961801" data-claire-element-id="961801">Eh oui, :p OpenGL fonctionne avec une <strong>caméra</strong>, exactement comme les films. Il faut donc <strong>placer</strong> une caméra qui va <strong>fixer</strong> un point pour que le spectateur (ou le joueur dans notre cas) puisse voir la scène.</p><p id="r-961802" data-claire-element-id="961802">Dans les versions précédentes d'OpenGL, la caméra était gérée par la même librairie que celle qui gérait la projection : la librairie <strong>GLU</strong>. Mais comme vous vous en douter, nous allons utiliser <strong>GLM</strong> pour la remplacer. :)</p><h2 id="r-la-methode-lookat" data-claire-element-id="961849">La méthode lookAt</h2><h3 id="r-l-ancienne-fonction" data-claire-element-id="961818">L'ancienne fonction</h3><p id="r-961804" data-claire-element-id="961804">Avant d'utiliser la librairie <strong>GLM</strong>, nous allons étudier l'ancienne fonction <strong>GLU</strong> qui gérait la caméra. Celle-ci permettait de placer la caméra au niveau d'un point dans l'espace. Ce point de vue nous permet de voir une scène en 3 dimensions au lieu des 2 dimensions dont nous avons l'habitude depuis le début du tuto.</p><p id="r-961805" data-claire-element-id="961805">La fonction en question s'appelle <strong>gluLookAt</strong>() et voici son prototype :</p><pre id="r-961806" data-claire-element-id="961806"><code data-claire-semantic="cpp">void gluLookAt(double eyeX, double eyeY, double eyeZ, double centerX, double centerY, double centerZ, double upX, double upY, double upZ);</code></pre><div id="r-961808" data-claire-element-id="961808" data-claire-semantic="question"><p id="r-961807" data-claire-element-id="961807">Hola y'a trop de paramètres. :o</p></div><p id="r-961809" data-claire-element-id="961809">Si on les prend à part oui, mais vous remarquerez que les noms se ressemblent plus ou moins. En fait, il n'y a que 3 paramètres. Si on les prend par groupe de 3, on se retrouve avec 3 vecteurs bien distincts :</p><ul id="r-961816" data-claire-element-id="961816"><li id="r-961811" data-claire-element-id="961811"><p id="r-961810" data-claire-element-id="961810">Le <strong>vecteur eye</strong> (œil) qui est un vecteur permetant de placer la caméra.</p></li><li id="r-961813" data-claire-element-id="961813"><p id="r-961812" data-claire-element-id="961812">La <strong>vecteur center</strong> (centre) qui est le point que la caméra doit fixer. Il y a 3 coordonnées, le point se trouve donc dans un espace 3D.</p></li><li id="r-961815" data-claire-element-id="961815"><p id="r-961814" data-claire-element-id="961814">Le <strong>vecteur axe</strong> qui est la verticale du repère.</p></li></ul><p id="r-961817" data-claire-element-id="961817">Petite précision pour le dernier vecteur. En théorie, l'axe vertical est l'axe Y mais dans pas mal de jeux-vidéo on prend souvent l'axe Z. Personnellement, je fais de la résistance et je préfère utiliser l'axe Y comme axe vertical comme on nous l'a toujours appris depuis le collège. ;)</p><h3 id="r-la-nouvelle-methode-1" data-claire-element-id="961830">La nouvelle méthode</h3><p id="r-961819" data-claire-element-id="961819">Pour remplacer cette ancienne fonction, nous allons utiliser une méthode de la librairie <strong>GLM</strong> qui s'appelle <strong>lookAt</strong>(). Son prototype est un peu plus compact que la fonction <strong>GLU</strong> :</p><pre id="r-961820" data-claire-element-id="961820"><code data-claire-semantic="cpp">mat4 lookAt(vec3 eye, vec3 center, vec3 up);</code></pre><ul id="r-961827" data-claire-element-id="961827"><li id="r-961822" data-claire-element-id="961822"><p id="r-961821" data-claire-element-id="961821"><strong>eye</strong> : vecteur permettant de placer la caméra</p></li><li id="r-961824" data-claire-element-id="961824"><p id="r-961823" data-claire-element-id="961823"><strong>center</strong> : vecteur permettant d'indiquer le point fixé</p></li><li id="r-961826" data-claire-element-id="961826"><p id="r-961825" data-claire-element-id="961825"><strong>up</strong> : vecteur représentant la verticale du repère</p></li></ul><p id="r-961828" data-claire-element-id="961828">Vous remarquez que la méthode prend bien les 9 paramètres de <strong>gluLookAt</strong>(), elle les place juste dans 3 objets de type <em><strong>vec3</strong></em>. ;)</p><p id="r-961829" data-claire-element-id="961829">Par ailleurs, elle renvoie une matrice toute neuve, elle ne modifie donc pas le contenu d'une matrice existante comme le font les méthodes de transformations.</p><h3 id="r-utilisation-58" data-claire-element-id="961848">Utilisation</h3><p id="r-961831" data-claire-element-id="961831">Grâce à cette méthode, nous pouvons tout de même utiliser notre caméra.</p><p id="r-961832" data-claire-element-id="961832">On va d'ailleurs faire un petit test dès maintenant. Vous vous souvenez des deux triangles du chapitre précédent ? On va voir ce que ça donne si on adopte un &quot;point de vue&quot; en 3 dimensions. Bon je vous préviens, avec des triangles 2D ça va être moche mais ce sera déjà notre premier pas dans la 3D. ;)</p><p id="r-961833" data-claire-element-id="961833">Nous allons placer notre caméra au point de coordonnées (<strong>1, 1, 1</strong>) et celle-ci fixera le centre du repère, donc le point de coordonnées (<strong>0, 0, 0</strong>). Enfin, nous utiliserons l'axe Y comme axe vertical (vous pouvez utiliser celui que vous voulez). L'appel à la méthode <strong>lookAt</strong>() sera donc :</p><pre id="r-961834" data-claire-element-id="961834"><code data-claire-semantic="cpp">// Placement de la caméra

modelview = lookAt(vec3(1, 1, 1), vec3(0, 0, 0), vec3(0, 1, 0));</code></pre><p id="r-961835" data-claire-element-id="961835">Nous ajoutons cette ligne de code juste après avoir ré-initialisé la matrice <strong>modelview</strong> :</p><pre id="r-961836" data-claire-element-id="961836"><code data-claire-semantic="cpp">// Boucle principale

while(!terminer)
{
    /* Gestion des évènements .... */


    // Nettoyage de la fenêtre

    glClear(GL_COLOR_BUFFER_BIT);


    // Ré-initialisation de la matrice et placement de la caméra

    modelview = mat4(1.0);
    modelview = lookAt(vec3(1, 1, 1), vec3(0, 0, 0), vec3(0, 1, 0));


    /* Rendu ... */
}</code></pre><p id="r-961837" data-claire-element-id="961837">D'ailleurs, vous pouvez maintenant supprimer la ligne qui ré-initialise la matrice <strong>modelview</strong> avec les valeurs d'une matrice d'identité car la méthode <strong>lookAt</strong>() écrase complétement son ancien contenu et fait donc office de ré-initialisation. La ligne est donc inutile. :)</p><pre id="r-961838" data-claire-element-id="961838"><code data-claire-semantic="cpp">// Boucle principale

while(!terminer)
{
    /* Gestion des évènements .... */


    // Nettoyage de la fenêtre

    glClear(GL_COLOR_BUFFER_BIT);


    // Placement de la caméra

    modelview = lookAt(vec3(1, 1, 1), vec3(0, 0, 0), vec3(0, 1, 0));


    /* Rendu ... */
}</code></pre><p id="r-961839" data-claire-element-id="961839">Voici ce que vous devriez obtenir :</p><figure id="r-961841" data-claire-element-id="961842"><img id="r-961840" data-claire-element-id="961840" src="medias/uploads.siteduzero.com_files_300001_301000_300367.png" alt="Image utilisateur"/></figure><p id="r-961843" data-claire-element-id="961843">Bon je vous avais prévenu c'est laid. :p Et pourtant on est bien en 3D :</p><figure id="r-961845" data-claire-element-id="961846"><img id="r-961844" data-claire-element-id="961844" src="medias/uploads.siteduzero.com_files_300001_301000_300368.png" alt="Image utilisateur"/></figure><p id="r-961847" data-claire-element-id="961847">Avec des triangles 2D on n'ira pas très loin mais ça va vite changer. Commençons enfin la partie la plus intéressante. :diable:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">
<span class="arrow"></span>
<span class="next">La troisième dimension (Partie 2/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
<span class="next">Affichage d&#039;un Cube</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Affichaged039unCube"></a><h2>Affichage d&#039;un Cube</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
<span class="arrow"></span>
<span class="next">La caméra</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
<span class="next">La classe Cube</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-introduction-71" data-claire-element-id="961874">Introduction</h2><p id="r-961851" data-claire-element-id="961851">Cette fois ça y est, enfin de la 3D ! :D</p><p id="r-961852" data-claire-element-id="961852">La première bonne nouvelle est que l'on va se débarrasser enfin du repère que l'on a utilisé jusqu'à maintenant :</p><figure id="r-961854" data-claire-element-id="961855"><img id="r-961853" data-claire-element-id="961853" src="medias/uploads.siteduzero.com_files_300001_301000_300370.jpg" alt="Image utilisateur"/></figure><p id="r-961856" data-claire-element-id="961856">Nous allons désormais utiliser celui-ci :</p><figure id="r-961858" data-claire-element-id="961859"><img id="r-961857" data-claire-element-id="961857" src="medias/uploads.siteduzero.com_files_300001_301000_300371.png" alt="Image utilisateur"/></figure><p id="r-961860" data-claire-element-id="961860">Nos polygones ne seront plus limités à des coordonnées comprises entre 0 et 1.</p><div id="r-961862" data-claire-element-id="961862" data-claire-semantic="question"><p id="r-961861" data-claire-element-id="961861">Concrètement, qu'est-ce qu'il faut pour passer à la 3D ?</p></div><p id="r-961863" data-claire-element-id="961863">Vous ne vous en êtes peut-être pas rendu compte, mais depuis le début du tutoriel, vous avez déjà appris pas mal de choses. Petit à petit, vous avez appris tout ce qui est nécessaire pour commencer la programmation 3D :</p><ul id="r-961872" data-claire-element-id="961872"><li id="r-961865" data-claire-element-id="961865"><p id="r-961864" data-claire-element-id="961864">Un shader</p></li><li id="r-961867" data-claire-element-id="961867"><p id="r-961866" data-claire-element-id="961866">Des matrices</p></li><li id="r-961869" data-claire-element-id="961869"><p id="r-961868" data-claire-element-id="961868">La projection</p></li><li id="r-961871" data-claire-element-id="961871"><p id="r-961870" data-claire-element-id="961870">Une caméra</p></li></ul><p id="r-961873" data-claire-element-id="961873">En réunissant intelligemment tout ça, on peut intégrer une troisième dimension à nos programmes. ;)</p><h2 id="r-affichage-d-un-cube" data-claire-element-id="962013">Affichage d'un cube</h2><h3 id="r-la-partie-theorique" data-claire-element-id="961892">La partie théorique</h3><p id="r-961875" data-claire-element-id="961875">On va commencer par un exercice simple qui réunira tout ce que l'on connait déjà ainsi que ce que l'on va voir maintenant. A la fin, on sera en mesure d'afficher notre premier modèle 3D : un cube (en couleur s'il vous plaît ;) ).</p><p id="r-961876" data-claire-element-id="961876">Avant de s'attaquer à la programmation, il est essentiel de faire un peu de théorie en voyant de quoi est composé un cube. Il suffit d'ouvrir un manuel de géométrie pour y lire une des propriétés principales du cube : &quot;un cube est composé de 8 sommets&quot;.</p><figure id="r-961878" data-claire-element-id="961879"><img id="r-961877" data-claire-element-id="961877" src="medias/uploads.siteduzero.com_files_300001_301000_300372.png" alt="Image utilisateur"/></figure><p id="r-961880" data-claire-element-id="961880">Les chiffres en parenthèses représentent les coordonnées de chaque sommet. Une arrête mesure donc 2 unités.</p><p id="r-961881" data-claire-element-id="961881">Hum intéressant, on retrouve le mot sommet ( = vertex). Il y a 8 sommets, nous aurons donc besoin de 8 vertices :</p><figure id="r-961883" data-claire-element-id="961884"><img id="r-961882" data-claire-element-id="961882" src="medias/uploads.siteduzero.com_files_300001_301000_300373.png" alt="Image utilisateur"/></figure><p id="r-961885" data-claire-element-id="961885">Bien évidemment, il faudra les dédoubler pour afficher toutes nos faces comme nous le faisions avec le losange par exemple. Nous allons les étudier ensemble une par une en expliquant bien les étapes nécessaires.</p><p id="r-961886" data-claire-element-id="961886">D'ailleurs en parlant de ça, dans les anciennes versions d'OpenGL, on utilisait une primitive spécifique pour afficher un carré (comme <em><strong>GL_TRIANGLES</strong></em> pour les triangles) que l'on utilisait avec la fonction <strong>glDrawArrays</strong>(). Cependant, cette primitive a également été supprimée au même titre que les fonctions lentes vu que les cartes graphiques ne savent gérer <strong><em>nativement</em></strong> que des triangles.</p><p id="r-961887" data-claire-element-id="961887">Il existe heureusement une petite combine pour afficher des carrés sans cette primitive : il suffit de coller deux triangles rectangles entre eux :</p><figure id="r-961889" data-claire-element-id="961890"><img id="r-961888" data-claire-element-id="961888" src="medias/uploads.siteduzero.com_files_300001_301000_300374.png" alt="Image utilisateur"/></figure><p id="r-961891" data-claire-element-id="961891">Ne vous inquiétez pas, ce n'est pas plus lent à l'affichage même si on affiche deux choses au lieu d'une. Pour vous dire, que ce soit des sphères, des cubes ou des personnages, absolument tous les modèles 3D ne sont composés uniquement que de triangles. ;)</p><h3 id="r-la-premiere-face" data-claire-element-id="961925">La première face</h3><p id="r-961893" data-claire-element-id="961893">Allez on attaque la partie programmation. :D</p><p id="r-961894" data-claire-element-id="961894">Pour le moment, on va tout coder dans la boucle principale, ce sera plus simple à comprendre. Ensuite, nous migrerons proprement le code dans une classe dédiée.</p><p id="r-961895" data-claire-element-id="961895">On va commencer notre cube en affichant sa première face (celle du fond) :</p><figure id="r-961897" data-claire-element-id="961898"><img id="r-961896" data-claire-element-id="961896" src="medias/uploads.siteduzero.com_files_300001_301000_300375.png" alt="Image utilisateur"/></figure><p id="r-961899" data-claire-element-id="961899">Pour cela, nous aurons besoin de <strong>6 sommets</strong> vu que nous avons besoin de deux triangles pour faire un carré. Si on regarde le schéma ci-dessus, on remarque que l'on peut faire un triangle avec les vertices <strong>0, 1 et 2</strong>, et un autre avec les vertices <strong>2, 3 et 0</strong>. Le tableau dont nous avons besoin ressemblera donc à ceci :</p><pre id="r-961900" data-claire-element-id="961900"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Vertices

    float vertices[] = {-1.0, -1.0, -1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,     // Triangle 1
                        -1.0, -1.0, -1.0,   -1.0, 1.0, -1.0,   1.0, 1.0, -1.0};    // Triangle 2
}</code></pre><p id="r-961901" data-claire-element-id="961901">Avant d'intégrer ce tableau, nous allons reprendre ensemble la boucle principale pour voir ce que donnerait le nouvel affichage. On commence par évidemment par déclarer les matrices <strong>projection</strong> et <strong>modelview</strong> :</p><pre id="r-961902" data-claire-element-id="961902"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Booléen terminer

    bool terminer(false);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Boucle principale

    while(!terminer)
    {
        /* Rendu */
    }
}</code></pre><p id="r-961903" data-claire-element-id="961903">Nous pouvons maintenant intégrer le tableau de vertices que l'on a trouvé juste avant. On le place après la déclaration des matrices :</p><pre id="r-961904" data-claire-element-id="961904"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Booléen terminer

    bool terminer(false);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Vertices

    float vertices[] = {-1.0, -1.0, -1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,     // Triangle 1
                        -1.0, -1.0, -1.0,   -1.0, 1.0, -1.0,   1.0, 1.0, -1.0};    // Triangle 2


    // Boucle principale

    while(!terminer)
    {
        /* Rendu */
    }
}</code></pre><p id="r-961905" data-claire-element-id="961905">Pour admirer le rendu final il ne manque plus qu'à colorier les deux triangles. Nous utiliserons le rouge vu qu'elle est présente dans le schéma un peu plus haut.</p><p id="r-961906" data-claire-element-id="961906">Le tableau à utiliser pour cela doit permettre d'affecter une couleur pour chaque vertex. Nous en avons <strong>6</strong> pour le moment donc nous aurons besoin de <strong>6 couleurs</strong> :</p><pre id="r-961907" data-claire-element-id="961907"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Triangle 1
                    1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0};          // Triangle 2</code></pre><p id="r-961908" data-claire-element-id="961908">On en profite au passage pour déclarer le <strong>shader</strong> qui permettra de colorier nos faces :</p><pre id="r-961909" data-claire-element-id="961909"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Triangle 1
                    1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0};          // Triangle 2


// Shader

Shader shaderCouleur(&quot;Shaders/couleur3D.vert&quot;, &quot;Shaders/couleur3D.frag&quot;);
shaderCouleur.charger();</code></pre><p id="r-961910" data-claire-element-id="961910">Une fois toutes ces déclarations faites, nous devrons nous occuper de la caméra. Nous devons la déclarer juste avant la boucle principale et la placer à chaque tour de boucle au point de coordonnées (0, 0, 1). Elle sera en mode '<em>affichage 2D</em>' temporairement pour nous permettre de voir le carré correctement :</p><pre id="r-961911" data-claire-element-id="961911"><code data-claire-semantic="cpp">// Boucle principale

while(!terminer)
{   
    // Gestion des évènements

    SDL_WaitEvent(&amp;m_evenements);

    if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT);


    // Placement de la caméra

    modelview = lookAt(vec3(0, 0, 1), vec3(0, 0, 0), vec3(0, 1, 0));


    // Rendu

    ....


    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(m_fenetre);
}</code></pre><p id="r-961912" data-claire-element-id="961912">Pour le rendu en lui-même, il n'y a pas de grand changement à faire. On commence par activer le shader puis on envoie nos données aux tableaux <strong>Vertex Attrib</strong>, on sait le faire depuis un moment grâce à la fonction <strong>glVertexAttribPointer</strong>() :</p><pre id="r-961913" data-claire-element-id="961913"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shaderCouleur.getProgramID());


    // Envoi des vertices

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);
    glEnableVertexAttribArray(0);


    // Envoi de la couleur

    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, couleurs);
    glEnableVertexAttribArray(1);


    ....


// Désactivation du shader

glUseProgram(0);</code></pre><p id="r-961914" data-claire-element-id="961914">Il ne nous reste plus qu'à envoyer les matrices <strong>projection</strong> et <strong>modelview</strong> au shader à l'aide des grosses fonctions. On pensera également à afficher le rendu grâce à la fonction <strong>glDrawArrays</strong>() et à désactiver les tableaux <strong>Vertex Attrib</strong> :</p><pre id="r-961915" data-claire-element-id="961915"><code data-claire-semantic="cpp">// Envoi des matrices

glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


// Rendu

glDrawArrays(GL_TRIANGLES, 0, 6);


// Désactivation des tableaux

glDisableVertexAttribArray(1);
glDisableVertexAttribArray(0);</code></pre><aside id="r-961917" data-claire-element-id="961917" data-claire-semantic="information"><p id="r-961916" data-claire-element-id="961916">N'oubliez pas de mettre le paramètre <strong>count</strong> à <strong>6</strong> pour afficher les deux triangles.</p></aside><p id="r-961918" data-claire-element-id="961918">Si on résume tout ça :</p><pre id="r-961919" data-claire-element-id="961919"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Booléen terminer

    bool terminer(false);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Vertices

    float vertices[] = {-1.0, -1.0, -1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,     // Triangle 1
                        -1.0, -1.0, -1.0,   -1.0, 1.0, -1.0,   1.0, 1.0, -1.0};    // Triangle 2


    // Couleurs

    float couleurs[] = {1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Triangle 1
                        1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0};          // Triangle 2


    // Shader

    Shader shaderCouleur(&quot;Shaders/couleur3D.vert&quot;, &quot;Shaders/couleur3D.frag&quot;);
    shaderCouleur.charger();


    // Boucle principale

    while(!terminer)
    {
        // Gestion des évènements

        SDL_WaitEvent(&amp;m_evenements);

        if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
            terminer = true;


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT);


        // Placement de la caméra

        modelview = lookAt(vec3(0, 0, 1), vec3(0, 0, 0), vec3(0, 1, 0));


        // Activation du shader

        glUseProgram(shaderCouleur.getProgramID());


            // Envoi des vertices

            glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);
            glEnableVertexAttribArray(0);


            // Envoi de la couleur

            glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, couleurs);
            glEnableVertexAttribArray(1);


            // Envoi des matrices

            glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
            glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


            // Rendu

            glDrawArrays(GL_TRIANGLES, 0, 6);


            // Désactivation des tableaux

            glDisableVertexAttribArray(1);
            glDisableVertexAttribArray(0);



        // Désactivation du shader

        glUseProgram(0);


        // Actualisation de la fenêtre

        SDL_GL_SwapWindow(m_fenetre);
    }
}</code></pre><p id="r-961920" data-claire-element-id="961920">Si vous compilez ce code, vous devriez obtenir votre premier carré avec OpenGL :</p><figure id="r-961922" data-claire-element-id="961923"><img id="r-961921" data-claire-element-id="961921" src="medias/uploads.siteduzero.com_files_300001_301000_300376.png" alt="Image utilisateur"/></figure><p id="r-961924" data-claire-element-id="961924">Notre première face du cube est maintenant prête. :D</p><h3 id="r-la-deuxieme-face" data-claire-element-id="961946">La deuxième face</h3><p id="r-961926" data-claire-element-id="961926">Passons maintenant à la deuxième face du cube.</p><p id="r-961927" data-claire-element-id="961927">Pour commencer, on va placer la caméra un peu différemment de façon à voir la scène en 3 dimensions. Nous la positionnerons au point de coordonnées (<strong>3, 3, 3</strong>) et la ferons fixer l'origine du repère (0, 0, 0) :</p><pre id="r-961928" data-claire-element-id="961928"><code data-claire-semantic="cpp">// Placement de la caméra

modelview = lookAt(vec3(3, 3, 3), vec3(0, 0, 0), vec3(0, 1, 0));</code></pre><p id="r-961929" data-claire-element-id="961929">La deuxième face que nous devons afficher doit ressembler à ceci :</p><figure id="r-961931" data-claire-element-id="961932"><img id="r-961930" data-claire-element-id="961930" src="medias/uploads.siteduzero.com_files_300001_301000_300377.png" alt="Image utilisateur"/></figure><p id="r-961933" data-claire-element-id="961933">On remarque qu'il faut prendre les vertices <strong>5, 1 et 2</strong> pour afficher le premier triangle, puis les vertices <strong>2, 6 et 5</strong> pour le second. Si on fait correspondre leurs coordonnées avec le schéma du début, on trouve les deux triangles suivants :</p><pre id="r-961934" data-claire-element-id="961934"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {-1.0, -1.0, -1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,     // Face 1
                    -1.0, -1.0, -1.0,   -1.0, 1.0, -1.0,   1.0, 1.0, -1.0,     // Face 1

                    1.0, -1.0, 1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,       // Face 2
                    1.0, -1.0, 1.0,   1.0, 1.0, 1.0,   1.0, 1.0, -1.0};        // Face 2</code></pre><aside id="r-961936" data-claire-element-id="961936" data-claire-semantic="information"><p id="r-961935" data-claire-element-id="961935">J'ai volontairement aéré un peu le tableau pour le rendre plus lisible.</p></aside><p id="r-961937" data-claire-element-id="961937">Évidemment, si nous utilisons de nouveaux vertices il faut leur associer une couleur. On ajoute donc <strong>6</strong> triplets au tableau <strong>couleurs</strong> spécialement pour eux. Nous utiliserons le vert pour différencier les deux faces :</p><pre id="r-961938" data-claire-element-id="961938"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1
                    1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1

                    0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 2
                    0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0};          // Face 2</code></pre><p id="r-961939" data-claire-element-id="961939">Pour afficher la nouvelle face, il suffit de modifier le fameux paramètre <strong>count</strong> pour qu'il prenne en compte les 6 nouveaux sommets. On lui donne donc la valeur <strong>6 + 6 = <em>12</em></strong> :</p><pre id="r-961940" data-claire-element-id="961940"><code data-claire-semantic="cpp">// Affichage des triangles

glDrawArrays(GL_TRIANGLES, 0, 12);</code></pre><p id="r-961941" data-claire-element-id="961941">Si vous compilez tout ça, vous devriez obtenir :</p><figure id="r-961943" data-claire-element-id="961944"><img id="r-961942" data-claire-element-id="961942" src="medias/uploads.siteduzero.com_files_300001_301000_300378.png" alt="Image utilisateur"/></figure><p id="r-961945" data-claire-element-id="961945">On a maintenant la deuxième face, et en 3D s'il vous plaît. ;)</p><h3 id="r-la-troisieme-face" data-claire-element-id="961964">La troisième face</h3><p id="r-961947" data-claire-element-id="961947">Allez, on continue avec la troisième face. On commence par définir les sommets dont nous aurons besoin :</p><figure id="r-961949" data-claire-element-id="961950"><img id="r-961948" data-claire-element-id="961948" src="medias/uploads.siteduzero.com_files_300001_301000_300379.png" alt="Image utilisateur"/></figure><p id="r-961951" data-claire-element-id="961951">Comme d'habitude, on fait correspondre ces sommets avec leurs coordonnées pour trouver le tableau suivant :</p><pre id="r-961952" data-claire-element-id="961952"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {-1.0, -1.0, -1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,     // Face 1
                    -1.0, -1.0, -1.0,   -1.0, 1.0, -1.0,   1.0, 1.0, -1.0,     // Face 1

                    1.0, -1.0, 1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,       // Face 2
                    1.0, -1.0, 1.0,   1.0, 1.0, 1.0,   1.0, 1.0, -1.0,         // Face 2

                    -1.0, -1.0, 1.0,   1.0, -1.0, 1.0,   1.0, -1.0, -1.0,      // Face 3
                    -1.0, -1.0, 1.0,   -1.0, -1.0, -1.0,   1.0, -1.0, -1.0};   // Face 3</code></pre><p id="r-961953" data-claire-element-id="961953">Ensuite, on fait correspondre une nouvelle couleur aux deux nouveaux triangles formés par les vertices. On utilisera le bleu comme sur le schéma :</p><pre id="r-961954" data-claire-element-id="961954"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1
                    1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1

                    0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 2
                    0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 2

                    0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 3
                    0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0};          // Face 3</code></pre><p id="r-961955" data-claire-element-id="961955">Pour finir, on doit modifier une fois de plus le paramètre <strong>count</strong> pour prendre en compte les nouveaux vertices. Sa valeur passe de <strong>12</strong> à <strong>18</strong> :</p><pre id="r-961956" data-claire-element-id="961956"><code data-claire-semantic="cpp">// Affichage des triangles

glDrawArrays(GL_TRIANGLES, 0, 18);</code></pre><p id="r-961957" data-claire-element-id="961957">En compilant le nouveau code, on obtient :</p><figure id="r-961959" data-claire-element-id="961960"><img id="r-961958" data-claire-element-id="961958" src="medias/uploads.siteduzero.com_files_300001_301000_300380.png" alt="Image utilisateur"/></figure><div id="r-961962" data-claire-element-id="961962" data-claire-semantic="question"><p id="r-961961" data-claire-element-id="961961">Pourquoi ça s'affiche comme ça ? Y'a un bug ? o_O</p></div><p id="r-961963" data-claire-element-id="961963">Non, ce n'est pas un bug, et vous allez vite comprendre pourquoi la face ne s'affiche pas correctement. ^^</p><h3 id="r-le-depth-buffer" data-claire-element-id="961984">Le Depth Buffer</h3><p id="r-961965" data-claire-element-id="961965">C'est la première fois que nous avons un problème d'affichage, et c'est tout à fait normal puisqu'avant nous n'avions jamais eu de formes superposées l'une sur l'autre. Ici, la face bleue et la face verte se superposent, et pour OpenGL c'est un problème car il ne sait pas quelle forme doit être visible et quelle forme doit être cachée. N'oubliez pas qu'un ordinateur est très bête, il ne sait rien faire à part calculer.</p><p id="r-961966" data-claire-element-id="961966">Le <strong><em>Depth Buffer</em></strong> (ou <em><strong>Tampon de profondeur</strong></em>) est ce qui va permettre à OpenGL de comprendre ce qu'il doit afficher et ce qu'il doit masquer. Si un pixel de modèle se trouve derrière un autre alors le Depth Buffer indiquera à OpenGL : &quot;N'affiche pas ce pixel, mais affiche celui-ci car il est devant&quot;.</p><p id="r-961967" data-claire-element-id="961967">Je vous avais déjà parlé brièvement de cette notion dans le chapitre sur les shaders, notamment avec ce schéma :</p><figure id="r-961969" data-claire-element-id="961970"><img id="r-961968" data-claire-element-id="961968" src="medias/uploads.siteduzero.com_files_300001_301000_300381.jpg" alt="Image utilisateur"/></figure><p id="r-961971" data-claire-element-id="961971">La dernière étape du <em><strong>pipeline</strong></em> 3D était le <strong>Test de profondeur</strong>. C'est justement là qu'intervient le Depth Buffer. Heureusement pour nous, il ne faudra pas gérer ce tampon par nous-même, cette fonctionnalité n'a pas été supprimée avec la nouvelle version d'OpenGL. :) Avant que l'API puisse se servir de ce tampon, il faut l'activer grâce à la fonction <strong>glEnable</strong>().</p><pre id="r-961972" data-claire-element-id="961972"><code data-claire-semantic="cpp">void glEnable(GLenum cap);</code></pre><p id="r-961973" data-claire-element-id="961973">Nous reverrons plusieurs fois cette fonction qui permet d'activer certaines fonctionnalités d'OpenGL. Le paramètre <strong>cap</strong> est justement la fonctionnalité à activer. Pour le <em>Depth Buffer</em>, on lui donne le paramètre <strong>GL_DEPTH_TEST</strong>. On va donc appeler la fonction comme ceci dans la méthode <em><strong>initGL</strong></em>() juste après l'initialisation de la librairie <strong>GLEW</strong> :</p><pre id="r-961974" data-claire-element-id="961974"><code data-claire-semantic="cpp">bool SceneOpenGL::initGL()
{
    #ifdef WIN32

        /* ***** Initialisation de la librairie GLEW ***** */

    #endif


    // Activation du Depth Buffer

    glEnable(GL_DEPTH_TEST);


    // Tout s'est bien passé, on retourne true

    return true;</code></pre><aside id="r-961976" data-claire-element-id="961976" data-claire-semantic="warning"><p id="r-961975" data-claire-element-id="961975">Même si vous n'êtes pas sous Windows, vous devez initialiser le <em>Depth Buffer</em> !</p></aside><p id="r-961977" data-claire-element-id="961977">A chaque tour de boucle, il faudra (comme avec les couleurs et la matrice <strong>modelview</strong>) ré-initialiser le Depth Buffer afin de vider toute traces de l'affichage précédent. Pour ça, il suffit d'ajouter un paramètre à une fonction que l'on utilise déjà : <strong>glClear</strong>(). Rappelez-vous que cette fonction permet de vider les buffers qu'on lui donne en paramètre.</p><p id="r-961978" data-claire-element-id="961978">Pour le moment, on ne lui donne que le paramètre <strong><em>GL_COLOR_BUFFER_BIT</em></strong> pour effacer ce qui se trouve à l'écran. Maintenant, on va ajouter le paramètre <em><strong>GL_DEPTH_BUFFER_BIT</strong></em> pour effacer le Depth Buffer :</p><pre id="r-961979" data-claire-element-id="961979"><code data-claire-semantic="cpp">// Nettoyage de la fenêtre et du Depth Buffer

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</code></pre><p id="r-961980" data-claire-element-id="961980">Maintenant que l'on sait ce qu'est le Depth Buffer, on peut régler notre problème d'affichage. Après avoir placé la fonction <strong>glEnable</strong>(), vous devriez obtenir ceci :</p><figure id="r-961982" data-claire-element-id="961983"><img id="r-961981" data-claire-element-id="961981" src="medias/uploads.siteduzero.com_files_300001_301000_300382.png" alt="Image utilisateur"/></figure><h3 id="r-les-trois-dernieres-faces" data-claire-element-id="962012">Les trois dernières faces</h3><p id="r-961985" data-claire-element-id="961985">Courage nous sommes presque au bout, il ne reste plus qu'à afficher les 3 dernières faces. Et je fais bien de vous dire courage car je vais vous demander de terminer les trois dernières faces tous seuls. :p</p><p id="r-961986" data-claire-element-id="961986">Je vais vous donner les schémas contenant les vertices et la couleur dont vous aurez besoin pour chaque face, pour le reste ce sera à vous de le faire. Il n'y a rien de compliqué en plus, nous avons déjà fait la moité du cube ensemble et vous n'aurez pas de surprise d'affichage car nous savons maintenant gérer le <em><strong>Depth Buffer</strong></em>.</p><p id="r-961987" data-claire-element-id="961987">Les tableaux finaux peuvent vous paraitre gros et moches, c'est tout à fait normal. Pour vous dire, les vertices de personnages ou de décors sont infiniment plus moches au vu de leur nombre de données. :lol: Mais l'avantage avec eux c'est que nous n'avons pas à les coder à la main, nous ne les voyons même pas d'ailleurs. Mais bon, ça ça sera pour plus tard. Pour le moment, je vous demande de finir notre fameux cube à l'aide des schémas suivants :</p><figure id="r-961989" data-claire-element-id="961990"><img id="r-961988" data-claire-element-id="961988" src="medias/uploads.siteduzero.com_files_300001_301000_300383.png" alt="Image utilisateur"/></figure><figure id="r-961992" data-claire-element-id="961993"><img id="r-961991" data-claire-element-id="961991" src="medias/uploads.siteduzero.com_files_300001_301000_300384.png" alt="Image utilisateur"/></figure><figure id="r-961995" data-claire-element-id="961996"><img id="r-961994" data-claire-element-id="961994" src="medias/uploads.siteduzero.com_files_300001_301000_300385.png" alt="Image utilisateur"/></figure><p id="r-961997" data-claire-element-id="961997">Allez hop à votre clavier !</p><p id="r-961998" data-claire-element-id="961998">.....</p><p id="r-961999" data-claire-element-id="961999">On passe à la correction. Le principe reste le même, il faut juste faire correspondre les vertices et les couleurs. Voici ce que donne les tableaux finaux :</p><p id="r-962000" data-claire-element-id="962000"></p><p id="r-962001" data-claire-element-id="962001">Vos vertices peuvent parfaitement être déclarés dans un ordre différent de celui que je donne. Ce n'est pas grave du moment que vous affichez des carrés correctement :</p><pre id="r-962002" data-claire-element-id="962002"><code data-claire-semantic="cpp">float vertices[] = {-1.0, -1.0, -1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,     // Face 1
                    -1.0, -1.0, -1.0,   -1.0, 1.0, -1.0,   1.0, 1.0, -1.0,     // Face 1

                    1.0, -1.0, 1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,       // Face 2
                    1.0, -1.0, 1.0,   1.0, 1.0, 1.0,   1.0, 1.0, -1.0,         // Face 2

                    -1.0, -1.0, 1.0,   1.0, -1.0, 1.0,   1.0, -1.0, -1.0,      // Face 3
                    -1.0, -1.0, 1.0,   -1.0, -1.0, -1.0,   1.0, -1.0, -1.0,    // Face 3

                    -1.0, -1.0, 1.0,   1.0, -1.0, 1.0,   1.0, 1.0, 1.0,        // Face 4
                    -1.0, -1.0, 1.0,   -1.0, 1.0, 1.0,   1.0, 1.0, 1.0,        // Face 4

                    -1.0, -1.0, -1.0,   -1.0, -1.0, 1.0,   -1.0, 1.0, 1.0,     // Face 5
                    -1.0, -1.0, -1.0,   -1.0, 1.0, -1.0,   -1.0, 1.0, 1.0,     // Face 5

                    -1.0, 1.0, 1.0,   1.0, 1.0, 1.0,   1.0, 1.0, -1.0,         // Face 6
                    -1.0, 1.0, 1.0,   -1.0, 1.0, -1.0,   1.0, 1.0, -1.0};      // Face 6</code></pre><p id="r-962003" data-claire-element-id="962003">L'ordre des couleurs peut, lui aussi, être différent. Ce qui compte, c'est que les lignes de couleur correspondent à leurs lignes de vertex :</p><pre id="r-962004" data-claire-element-id="962004"><code data-claire-semantic="cpp">// Couleurs

float couleurs[] = {1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1
                    1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1

                    0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 2
                    0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 2

                    0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 3
                    0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 3

                    1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 4
                    1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 4

                    0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 5
                    0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 5

                    0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 6
                    0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0};          // Face 6</code></pre><p id="r-962005" data-claire-element-id="962005">Au niveau de la fonction <strong>glDrawArrays</strong>(), vous devriez avoir la valeur du paramètre <strong>count</strong> à <strong>36</strong> :</p><pre id="r-962006" data-claire-element-id="962006"><code data-claire-semantic="cpp">// Affichage des triangles

glDrawArrays(GL_TRIANGLES, 0, 36);</code></pre><p id="r-962007" data-claire-element-id="962007">A la fin, vous devriez avoir votre premier modèle 3D !</p><figure id="r-962009" data-claire-element-id="962010"><img id="r-962008" data-claire-element-id="962008" src="medias/uploads.siteduzero.com_files_300001_301000_300386.png" alt="Image utilisateur"/></figure><p id="r-962011" data-claire-element-id="962011">Magnifique n'est-ce pas ? ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
<span class="arrow"></span>
<span class="next">La caméra</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
<span class="next">La classe Cube</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LaclasseCube"></a><h2>La classe Cube</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
<span class="arrow"></span>
<span class="next">Affichage d&#039;un Cube</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
<span class="next">Le Frame Rate</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-la-classe-cube" data-claire-element-id="962118">La classe Cube</h2><h3 id="r-le-header-4" data-claire-element-id="962042">Le header</h3><p id="r-962015" data-claire-element-id="962015">Après tous les efforts que nous avons fournis dans la partie précédente, nous avons enfin pu afficher notre premier modèle 3D. :D <br/> Vous avez remarqué que, mises à part les matrices, le processus était le même que pour les modèles 2D. C'est-dire-à qu'il nous a suffi d'activer un shader, d'envoyer les données aux tableaux <strong>Vertex Attrib</strong>, puis d'afficher le tout avec <strong>glDrawArrays</strong>().</p><p id="r-962016" data-claire-element-id="962016">Ce que nous allons faire maintenant va nous permettre de nettoyer un peu la boucle principale. En effet, comme je vous l'ai précisé dans la correction du cube, les tableaux de vertices et de couleurs sont assez indigestes. Il serait donc judicieux de créer une classe dédiée au cube de façon à enfermer ces lignes de code à l'intérieur. Nous gagnerions en lisibilité et de plus, nous pourrions créer des cubes à l'infini en seulement quelques lignes de code !</p><p id="r-962017" data-claire-element-id="962017">Notre nouvel objectif va donc être la création d'une classe <em><strong>Cube</strong></em> dont on se servira pour la suite du tutoriel.</p><p id="r-962018" data-claire-element-id="962018">Et nous allons commencer tout de suite par le header. Celui-ci sera placé dans un fichier que nous appellerons <strong>Cube.h</strong> et devra contenir la déclaration de la classe ainsi que les inclusions nécessaires pour OpenGL, les shaders et les matrices :</p><pre id="r-962019" data-claire-element-id="962019"><code data-claire-semantic="cpp">#ifndef DEF_CUBE
#define DEF_CUBE


// Includes OpenGL

#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif


// Includes GLM

#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtx/transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;


// Includes

#include &quot;Shader.h&quot;


// Classe Cube

class Cube
{
    public:


    private:
};

#endif</code></pre><aside id="r-962021" data-claire-element-id="962021" data-claire-semantic="information"><p id="r-962020" data-claire-element-id="962020">N'oubliez pas les en-têtes de <strong>GLM</strong>. ;)</p></aside><p id="r-962022" data-claire-element-id="962022">Au niveau des attributs, cette classe devra contenir tous les éléments dont nous avons eu besoin pour afficher notre modèle, à savoir :</p><ul id="r-962029" data-claire-element-id="962029"><li id="r-962024" data-claire-element-id="962024"><p id="r-962023" data-claire-element-id="962023">Un objet de type <strong>Shader</strong></p></li><li id="r-962026" data-claire-element-id="962026"><p id="r-962025" data-claire-element-id="962025">Un tableau <strong>flottant</strong> de vertices</p></li><li id="r-962028" data-claire-element-id="962028"><p id="r-962027" data-claire-element-id="962027">Un tableau <strong>flottant</strong> de couleurs</p></li></ul><p id="r-962030" data-claire-element-id="962030">Les matrices ne font pas partie de cette liste car nous n'en avons besoin qu'au moment de l'affichage, inutile donc de créer des attributs pour elles. Nous les enverrons en tant que paramètres dans une méthode.</p><p id="r-962031" data-claire-element-id="962031">Si on rassemble tout ça, on trouve :</p><pre id="r-962032" data-claire-element-id="962032"><code data-claire-semantic="cpp">// Attributs

Shader m_shader;
float m_vertices[108];
float m_couleurs[108];</code></pre><p id="r-962033" data-claire-element-id="962033">La taille <strong>108</strong> des deux tableaux vient de la multiplication du nombre de vertices nécessaires pour un cube (<em><strong>36</strong></em>) par leur nombre de coordonnées (<em><strong>3</strong></em>), ce qui fait <strong>36 vertices x 3 coordonnées = 108 cases</strong>.</p><p id="r-962034" data-claire-element-id="962034">Passons maintenant au constructeur, celui-ci aura besoin de trois paramètres : la <strong>taille</strong> du cube que l'on veut afficher ainsi que les deux <strong>codes sources</strong> du shader à utiliser.</p><p id="r-962035" data-claire-element-id="962035">Nous n'avons pas intégré la possibilité de choisir les dimensions avant afin d'éviter d’alourdir le code qui était déjà assez dense. Mais vu qu'à présent nous codons une classe, il serait quand même plus agréable de pouvoir créer des cubes de n'importe quelle taille en modifiant simplement une seule valeur. :)</p><p id="r-962036" data-claire-element-id="962036">Nous prendrons une variable de type <em><strong>float</strong></em> pour gérer cette taille. Quant aux autres paramètres, vous savez déjà que ce seront des <em><strong>string</strong></em> :</p><pre id="r-962037" data-claire-element-id="962037"><code data-claire-semantic="cpp">Cube(float taille, std::string const vertexShader, std::string const fragmentShader);</code></pre><p id="r-962038" data-claire-element-id="962038">On profite de ce passage pour déclarer le destructeur de la classe :</p><pre id="r-962039" data-claire-element-id="962039"><code data-claire-semantic="cpp">~Cube();</code></pre><p id="r-962040" data-claire-element-id="962040">Après tous ces petits ajouts, nous nous retrouvons devant le header complet de la classe <em><strong>Cube</strong></em> :</p><pre id="r-962041" data-claire-element-id="962041"><code data-claire-semantic="cpp">#ifndef DEF_CUBE
#define DEF_CUBE


// Includes OpenGL

#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif


// Includes GLM

#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtx/transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;


// Includes

#include &quot;Shader.h&quot;


// Classe Cube

class Cube
{
    public:

    Cube(float taille, std::string const vertexShader, std::string const fragmentShader);
    ~Cube();


    private:

    Shader m_shader;
    float m_vertices[108];
    float m_couleurs[108];
};

#endif</code></pre><h3 id="r-le-constructeur-12" data-claire-element-id="962072">Le constructeur</h3><p id="r-962043" data-claire-element-id="962043">Passons maintenant à l'implémentation de la classe avec en premier lieu le constructeur.</p><p id="r-962044" data-claire-element-id="962044">Celui-ci débute avec l'initialisation des attributs. Nous en avons <strong>3</strong> mais seul le shader peut vraiment être initialisé ici car les vertices et les couleurs sont des tableaux, nous ne pouvons donc pas le faire directement après les deux points &quot;<strong>:</strong>&quot;. Nous lui donnons les deux codes sources reçus en paramètres :</p><pre id="r-962045" data-claire-element-id="962045"><code data-claire-semantic="cpp">Cube::Cube(float taille, std::string const vertexShader, std::string const fragmentShader) : m_shader(vertexShader, fragmentShader)
{

}</code></pre><p id="r-962046" data-claire-element-id="962046">Ce qui se trouve entre les accolades commence également par le shader car nous devons appeler sa méthode <strong>charger</strong>() de façon à le charger complétement :</p><pre id="r-962047" data-claire-element-id="962047"><code data-claire-semantic="cpp">Cube::Cube(float taille, std::string const vertexShader, std::string const fragmentShader) : m_shader(vertexShader, fragmentShader)
{
    // Chargement du shader

    m_shader.charger();
}</code></pre><p id="r-962048" data-claire-element-id="962048">Le shader est maintenant initialisé et prêt à l'emploi.</p><p id="r-962049" data-claire-element-id="962049">On passe maintenant au plus délicat : l'initialisation des tableaux de vertices et de couleurs. Il y a deux manières de faire en C++ :</p><ul id="r-962054" data-claire-element-id="962054"><li id="r-962051" data-claire-element-id="962051"><p id="r-962050" data-claire-element-id="962050">Soit on initialise leurs valeurs une par une (donc on initialise séparément les <em>24 valeurs</em> d'un tableau de <em>24 cases</em> par exemple).</p></li><li id="r-962053" data-claire-element-id="962053"><p id="r-962052" data-claire-element-id="962052">Soit on déclare des tableaux temporaires contenant les valeurs désirées, puis on utilise des boucles pour les affecter aux vrais tableaux.</p></li></ul><p id="r-962055" data-claire-element-id="962055">Si on utilise la première méthode, il nous faudrait <strong>108</strong> lignes de code juste pour initialiser les vertices, et le double si on s'occupe aussi des couleurs. Avouez tout de même que c'est méchamment fastidieux, surtout si on doit le faire deux fois. Je pense donc que vous serez d'accord pour utiliser la seconde méthode. :lol:</p><p id="r-962056" data-claire-element-id="962056">Nous devons donc utiliser un tableau temporaire qui va contenir tous les vertices du cube, nous l'appellerons <strong>verticesTmp</strong>[] :</p><pre id="r-962057" data-claire-element-id="962057"><code data-claire-semantic="cpp">// Vertices temporaires

float verticesTmp[] = {-1.0, -1.0, -1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,     // Face 1
                       -1.0, -1.0, -1.0,   -1.0, 1.0, -1.0,   1.0, 1.0, -1.0,     // Face 1

                       1.0, -1.0, 1.0,   1.0, -1.0, -1.0,   1.0, 1.0, -1.0,       // Face 2
                       1.0, -1.0, 1.0,   1.0, 1.0, 1.0,   1.0, 1.0, -1.0,         // Face 2

                       -1.0, -1.0, 1.0,   1.0, -1.0, 1.0,   1.0, -1.0, -1.0,      // Face 3
                       -1.0, -1.0, 1.0,   -1.0, -1.0, -1.0,   1.0, -1.0, -1.0,    // Face 3

                       -1.0, -1.0, 1.0,   1.0, -1.0, 1.0,   1.0, 1.0, 1.0,        // Face 4
                       -1.0, -1.0, 1.0,   -1.0, 1.0, 1.0,   1.0, 1.0, 1.0,        // Face 4

                       -1.0, -1.0, -1.0,   -1.0, -1.0, 1.0,   -1.0, 1.0, 1.0,     // Face 5
                       -1.0, -1.0, -1.0,   -1.0, 1.0, -1.0,   -1.0, 1.0, 1.0,     // Face 5

                       -1.0, 1.0, 1.0,   1.0, 1.0, 1.0,   1.0, 1.0, -1.0,         // Face 6
                       -1.0, 1.0, 1.0,   -1.0, 1.0, -1.0,   1.0, 1.0, -1.0};      // Face 6</code></pre><p id="r-962058" data-claire-element-id="962058">Les vertices en l'état n'ont que bien peu d'intérêt car ils ne prennent pas en compte le paramètre <strong>taille</strong> du constructeur. Pour régler ce problème, nous allons simplement remplacer toutes les occurrences de la valeur <strong>1.0</strong> par le paramètre <strong>taille</strong> lui-même. C'est un peu long à faire mais la fonctionnalité &quot;<strong>Find and Replace</strong>&quot; de votre IDE devrait vous faciliter un peu la tâche. ;)</p><p id="r-962059" data-claire-element-id="962059">Le tableau remanié devrait ressembler à celui-ci :</p><pre id="r-962060" data-claire-element-id="962060"><code data-claire-semantic="cpp">// Vertices temporaires

float verticesTmp[] = {-taille, -taille, -taille,   taille, -taille, -taille,   taille, taille, -taille,     // Face 1
                       -taille, -taille, -taille,   -taille, taille, -taille,   taille, taille, -taille,     // Face 1

                       taille, -taille, taille,   taille, -taille, -taille,   taille, taille, -taille,       // Face 2
                       taille, -taille, taille,   taille, taille, taille,   taille, taille, -taille,         // Face 2

                       -taille, -taille, taille,   taille, -taille, taille,   taille, -taille, -taille,      // Face 3
                       -taille, -taille, taille,   -taille, -taille, -taille,   taille, -taille, -taille,    // Face 3

                       -taille, -taille, taille,   taille, -taille, taille,   taille, taille, taille,        // Face 4
                       -taille, -taille, taille,   -taille, taille, taille,   taille, taille, taille,        // Face 4

                       -taille, -taille, -taille,   -taille, -taille, taille,   -taille, taille, taille,     // Face 5
                       -taille, -taille, -taille,   -taille, taille, -taille,   -taille, taille, taille,     // Face 5

                       -taille, taille, taille,   taille, taille, taille,   taille, taille, -taille,         // Face 6
                       -taille, taille, taille,   -taille, taille, -taille,   taille, taille, -taille};      // Face 6</code></pre><p id="r-962061" data-claire-element-id="962061">Il reste encore une petite modification à faire. Si on regarde de plus près nos données, on remarque que les vertices vont de <strong>-taille</strong> à <strong>+taille</strong>. Cet intervalle fait que notre cube est multiplié par 2. :(</p><p id="r-962062" data-claire-element-id="962062">Pour éviter cela, il faut diviser le paramètre <strong>taille</strong> par 2 avant de remplir le tableau. Ainsi, notre cube qui devait être multiplié par 2 ne le sera plus :</p><pre id="r-962063" data-claire-element-id="962063"><code data-claire-semantic="cpp">// Division du paramètre taille

taille /= 2;


// Vertices temporaires

float verticesTmp[] = {-taille, -taille, -taille,   taille, -taille, -taille,   taille, taille, -taille,     // Face 1
                       -taille, -taille, -taille,   -taille, taille, -taille,   taille, taille, -taille,     // Face 1

                       taille, -taille, taille,   taille, -taille, -taille,   taille, taille, -taille,       // Face 2
                       taille, -taille, taille,   taille, taille, taille,   taille, taille, -taille,         // Face 2

                       -taille, -taille, taille,   taille, -taille, taille,   taille, -taille, -taille,      // Face 3
                       -taille, -taille, taille,   -taille, -taille, -taille,   taille, -taille, -taille,    // Face 3

                       -taille, -taille, taille,   taille, -taille, taille,   taille, taille, taille,        // Face 4
                       -taille, -taille, taille,   -taille, taille, taille,   taille, taille, taille,        // Face 4

                       -taille, -taille, -taille,   -taille, -taille, taille,   -taille, taille, taille,     // Face 5
                       -taille, -taille, -taille,   -taille, taille, -taille,   -taille, taille, taille,     // Face 5

                       -taille, taille, taille,   taille, taille, taille,   taille, taille, -taille,         // Face 6
                       -taille, taille, taille,   -taille, taille, -taille,   taille, taille, -taille};      // Face 6</code></pre><p id="r-962064" data-claire-element-id="962064">Piouf le plus dur est derrière nous. :)</p><p id="r-962065" data-claire-element-id="962065">Le tableau de couleurs quant à lui est plus simple à faire puisqu'il suffit juste de reprendre celui que nous utilisions avant. Nous modifierons juste son nom en l'appelant <strong>couleursTmp</strong> vu qu'il s'agit de données temporaires :</p><pre id="r-962066" data-claire-element-id="962066"><code data-claire-semantic="cpp">// Couleurs temporaires

float couleursTmp[] = {1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1
                       1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1

                       0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 2
                       0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 2

                       0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 3
                       0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 3

                       1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 4
                       1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 4

                       0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 5
                       0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 5

                       0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 6
                       0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0};          // Face 6</code></pre><p id="r-962067" data-claire-element-id="962067">Maintenant que nos données sont déclarées, il ne manque plus qu'à les transférer dans nos attributs.</p><p id="r-962068" data-claire-element-id="962068">Pour cela, nous allons utiliser une boucle qui va s'exécuter <strong>108</strong> fois, ce qui permettra donc de copier non seulement les coordonnées des sommets mais aussi les composantes des couleurs. En effet, les tableaux font tous les deux la même taille, on peut alors n'utiliser qu'une seule boucle. :)</p><pre id="r-962069" data-claire-element-id="962069"><code data-claire-semantic="cpp">// Copie des valeurs dans les tableaux finaux

for(int i(0); i &lt; 108; i++)
{
    m_vertices[i] = verticesTmp[i];
    m_couleurs[i] = couleursTmp[i];
}</code></pre><p id="r-962070" data-claire-element-id="962070">Si on réunit tous les bouts de code :</p><pre id="r-962071" data-claire-element-id="962071"><code data-claire-semantic="cpp">Cube::Cube(float taille, std::string const vertexShader, std::string const fragmentShader) : m_shader(vertexShader, fragmentShader)
{
    // Chargement du shader

    m_shader.charger();


    // Division de la taille

    taille /= 2;


    // Vertices temporaires

    float verticesTmp[] = {-taille, -taille, -taille,   taille, -taille, -taille,   taille, taille, -taille,     // Face 1
                           -taille, -taille, -taille,   -taille, taille, -taille,   taille, taille, -taille,     // Face 1

                           taille, -taille, taille,   taille, -taille, -taille,   taille, taille, -taille,       // Face 2
                           taille, -taille, taille,   taille, taille, taille,   taille, taille, -taille,         // Face 2

                           -taille, -taille, taille,   taille, -taille, taille,   taille, -taille, -taille,      // Face 3
                           -taille, -taille, taille,   -taille, -taille, -taille,   taille, -taille, -taille,    // Face 3

                           -taille, -taille, taille,   taille, -taille, taille,   taille, taille, taille,        // Face 4
                           -taille, -taille, taille,   -taille, taille, taille,   taille, taille, taille,        // Face 4

                           -taille, -taille, -taille,   -taille, -taille, taille,   -taille, taille, taille,     // Face 5
                           -taille, -taille, -taille,   -taille, taille, -taille,   -taille, taille, taille,     // Face 5

                           -taille, taille, taille,   taille, taille, taille,   taille, taille, -taille,         // Face 6
                           -taille, taille, taille,   -taille, taille, -taille,   taille, taille, -taille};      // Face 6


    // Couleurs temporaires

    float couleursTmp[] = {1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1
                           1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 1

                           0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 2
                           0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 2

                           0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 3
                           0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 3

                           1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 4
                           1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,           // Face 4

                           0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 5
                           0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,           // Face 5

                           0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,           // Face 6
                           0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0};          // Face 6


    // Copie des valeurs dans les tableaux finaux

    for(int i(0); i &lt; 108; i++)
    {
        m_vertices[i] = verticesTmp[i];
        m_couleurs[i] = couleursTmp[i];
    }
}</code></pre><h3 id="r-le-destructeur-4" data-claire-element-id="962078">Le destructeur</h3><p id="r-962073" data-claire-element-id="962073">Comme vous le savez déjà, un <em>destructeur</em> est une méthode appelée au moment de la <em>destruction</em> de l'objet. Il permet de libérer la mémoire prise par l'objet au cours de sa vie, en particulier la mémoire allouée dynamiquement.</p><p id="r-962074" data-claire-element-id="962074">Heureusement pour nous, dans notre cas nous ne faisons aucune allocation dynamique. :p Le destructeur va donc être vide :</p><pre id="r-962075" data-claire-element-id="962075"><code data-claire-semantic="cpp">Cube::~Cube()
{

}</code></pre><aside id="r-962077" data-claire-element-id="962077" data-claire-semantic="information"><p id="r-962076" data-claire-element-id="962076">L'objet de type <strong>Shader</strong> sera désalloué automatiquement vu que c'est un objet à part, inutile de tenter de le faire manuellement.</p></aside><h3 id="r-la-methode-afficher" data-claire-element-id="962107">La méthode afficher</h3><p id="r-962079" data-claire-element-id="962079">Comme son nom l'indique, la méthode <em><strong>afficher</strong></em>() va nous permettre ... d'afficher notre cube. ^^ Son prototype est assez simple :</p><pre id="r-962080" data-claire-element-id="962080"><code data-claire-semantic="cpp">void afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview);</code></pre><p id="r-962081" data-claire-element-id="962081">Elle prend en paramètre une référence sur les deux matrices que l'on connait si bien maintenant. Elles sont indispensables pour afficher un modèle 3D. Dans cette méthode, nous en avons besoin pour les envoyer au shader.</p><p id="r-962082" data-claire-element-id="962082">Son implémentation va être ultra simple pour nous : il suffit juste de copier le code contenu entre l'activation et la désactivation du shader. Ce qui comprend :</p><ul id="r-962091" data-claire-element-id="962091"><li id="r-962084" data-claire-element-id="962084"><p id="r-962083" data-claire-element-id="962083">Le shader évidemment</p></li><li id="r-962086" data-claire-element-id="962086"><p id="r-962085" data-claire-element-id="962085">L'envoi des matrices</p></li><li id="r-962088" data-claire-element-id="962088"><p id="r-962087" data-claire-element-id="962087">L'utilisation des tableaux <strong>Vertex Attrib</strong></p></li><li id="r-962090" data-claire-element-id="962090"><p id="r-962089" data-claire-element-id="962089">L'appel à la fonction <strong>glUseProgram</strong>()</p></li></ul><p id="r-962092" data-claire-element-id="962092">Le code à copier est le suivant :</p><pre id="r-962093" data-claire-element-id="962093"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shaderCouleur.getProgramID());


    // Envoi des vertices

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);
    glEnableVertexAttribArray(0);


    // Envoi de la couleur

    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, couleurs);
    glEnableVertexAttribArray(1);


    // Envoi des matrices

    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
    glUniformMatrix4fv(glGetUniformLocation(shaderCouleur.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


    // Rendu

    glDrawArrays(GL_TRIANGLES, 0, 36);


    // Désactivation des tableaux

    glDisableVertexAttribArray(1);
    glDisableVertexAttribArray(0);


// Désactivation du shader

glUseProgram(0);</code></pre><p id="r-962094" data-claire-element-id="962094">Avant d'aller plus loin, il nous faut modifier le nom des variables anciennement utilisées. Ainsi :</p><ul id="r-962101" data-claire-element-id="962101"><li id="r-962096" data-claire-element-id="962096"><p id="r-962095" data-claire-element-id="962095">L'objet <strong>shaderCouleur</strong> devient <strong>m_shader</strong></p></li><li id="r-962098" data-claire-element-id="962098"><p id="r-962097" data-claire-element-id="962097">Le tableau <strong>vertices</strong> devient <strong>m_vertices</strong></p></li><li id="r-962100" data-claire-element-id="962100"><p id="r-962099" data-claire-element-id="962099">Le tableau <strong>couleurs</strong> devient <strong>m_couleurs</strong></p></li></ul><p id="r-962102" data-claire-element-id="962102">Une fois le nom des variables modifié, on se retrouve avec la méthode <strong>afficher</strong>() suivante :</p><pre id="r-962103" data-claire-element-id="962103"><code data-claire-semantic="cpp">void Cube::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Envoi des vertices

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, m_vertices);
        glEnableVertexAttribArray(0);


        // Envoi de la couleur

        glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, m_couleurs);
        glEnableVertexAttribArray(1);


        // Envoi des matrices

        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


        // Rendu

        glDrawArrays(GL_TRIANGLES, 0, 36);


        // Désactivation des tableaux

        glDisableVertexAttribArray(1);
        glDisableVertexAttribArray(0);


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><aside id="r-962105" data-claire-element-id="962105" data-claire-semantic="information"><p id="r-962104" data-claire-element-id="962104">N'oubliez pas d'inclure la ligne &quot;<strong>using namespace glm;</strong>&quot; au début de votre fichier <strong>.cpp</strong> de façon à pouvoir vous passer du préfixe <strong>glm::</strong>.</p></aside><p id="r-962106" data-claire-element-id="962106">J'adore quand le copier-coller fonctionne aussi facilement. ^^ Nous avions déjà fait le plus gros avant, il ne nous restait plus qu'à adapter le nom des attributs.</p><h3 id="r-la-boucle-principale-4" data-claire-element-id="962117">La boucle principale</h3><p id="r-962108" data-claire-element-id="962108">Il ne reste plus qu'une seule chose à faire : déclarer un objet de type <strong>Cube</strong> et utiliser sa méthode <em><strong>afficher</strong></em>() dans la boucle principale. On efface donc tout ce qu'on à fait avant (vertices, couleurs, affichage, ...). On ne doit garder que ceci :</p><pre id="r-962109" data-claire-element-id="962109"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variable

    bool terminer(false);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Boucle principale

    while(!terminer)
    {
        // Gestion des évènements

        SDL_WaitEvent(&amp;m_evenements);

        if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
            terminer = true;


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


        // Placement de la caméra

        modelview = lookAt(vec3(3, 3, 3), vec3(0, 0, 0), vec3(0, 1, 0));

    
        // Rendu (Rien pour le moment)

        ....



        // Actualisation de la fenêtre

        SDL_GL_SwapWindow(m_fenetre);
    }
}</code></pre><aside id="r-962111" data-claire-element-id="962111" data-claire-semantic="information"><p id="r-962110" data-claire-element-id="962110">Pensez dès maintenant à ajouter le header &quot;<strong>Cube.h</strong>&quot; dans la classe <em><strong>SceneOpenGL</strong></em>.</p></aside><p id="r-962112" data-claire-element-id="962112">Ensuite, on déclare notre objet de type <strong>Cube</strong> qui sera initialisé automatiquement avec le constructeur. Nous lui donnerons la valeur <strong>2.0</strong> pour le paramètre <strong>taille</strong> (ou une autre qui vous plaira :p ) ainsi que les <em><strong>string</strong></em><strong>&quot;Shaders/couleur3D.vert&quot;</strong> et <strong>&quot;Shaders/couleur3D.frag&quot;</strong> pour le shader.</p><pre id="r-962113" data-claire-element-id="962113"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variable

    bool terminer(false);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Déclaration d'un objet Cube

    Cube cube(2.0, &quot;Shaders/couleur3D.vert&quot;, &quot;Shaders/couleur3D.frag&quot;);


    // Boucle principale

    while(!terminer)    
    {
        ....
    }
}</code></pre><p id="r-962114" data-claire-element-id="962114">Enfin, on utilise la méthode <em><strong>afficher</strong></em>() dans la boucle principale en donnant les matrices en paramètres :</p><pre id="r-962115" data-claire-element-id="962115"><code data-claire-semantic="cpp">while(!terminer)
{
    // Gestion des évènements

    SDL_WaitEvent(&amp;m_evenements);

    if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


    // Placement de la caméra

    modelview = lookAt(vec3(3, 3, 3), vec3(0, 0, 0), vec3(0, 1, 0));


    // Affichage du cube

    cube.afficher(projection, modelview);


    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(m_fenetre);
}</code></pre><p id="r-962116" data-claire-element-id="962116">Si vous compilez tout ça, vous obtiendrez le même résultat que tout à l'heure mais cette fois-ci, vous avez un véritable objet C++ permettant d'afficher un cube. ^^</p><h2 id="r-pseudo-animation" data-claire-element-id="962130">Pseudo-animation</h2><p id="r-962119" data-claire-element-id="962119">Attention, cette sous-partie s'appelle bien &quot;<strong><em>pseudo-animation</em></strong>&quot; et pas <em><strong>animation</strong></em> tout court. On va apprendre à faire pivoter notre cube pour voir toutes ses faces, et ce grâce à la méthode <strong>rotate</strong>() de la librairie <strong>GLM</strong>.</p><p id="r-962120" data-claire-element-id="962120">Le principe est simple : on incrémente un angle à chaque tour de boucle puis on fait pivoter le cube avec cet angle qui change sans arrêt donnant ainsi une impression de mouvement. Pour le moment, il faudra bouger la souris dans la fenêtre SDL pour constater la rotation puisque nous utilisons la fonction <strong>SDL_WaitEvent</strong>() qui bloque le programme quand il n'y a pas d'évènements.</p><p id="r-962121" data-claire-element-id="962121">On commence par déclarer un angle de type <strong>float</strong> que l'on incrémentera à chaque tour boucle :</p><pre id="r-962122" data-claire-element-id="962122"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    ....


    // Variable angle

    float angle(0.0);


    // Boucle principale

    while(!terminer)
    {
        .... 
    }
}</code></pre><p id="r-962123" data-claire-element-id="962123">Ensuite, on incrémente l'angle de rotation à chaque tour de boucle. Petite précision, l'angle atteindra forcément les 360° vu qu'on l'incrémente sans arrêt. A chaque fois qu'il atteindra 360°, il faudra donc le remettre à zéro. Il est inutile d'avoir un angle incompréhensible de 1604°. :lol:</p><pre id="r-962124" data-claire-element-id="962124"><code data-claire-semantic="cpp">// Incrémentation de l'angle

angle += 4.0;

if(angle &gt;= 360.0)
    angle -= 360.0;</code></pre><p id="r-962125" data-claire-element-id="962125">Une fois l'angle défini, il suffit de faire pivoter le repère en appelant la méthode <em><strong>rotate</strong></em>() de la matrice <em><strong>modelview</strong></em> :</p><pre id="r-962126" data-claire-element-id="962126"><code data-claire-semantic="cpp">// Rotation du repère

modelview = rotate(modelview, angle, vec3(0, 1, 0));</code></pre><p id="r-962127" data-claire-element-id="962127">Si on place ce code au bon endroit :</p><pre id="r-962128" data-claire-element-id="962128"><code data-claire-semantic="cpp">while(!terminer)
{
    // Gestion des évènements

    ....



    // Placement de la caméra

    modelview = lookAt(vec3(3, 3, 3), vec3(0, 0, 0), vec3(0, 1, 0));


    // Incrémentation de l'angle

    angle += 4.0;

    if(angle &gt;= 360.0)
        angle -= 360.0;


    // Rotation du repère

    modelview = rotate(modelview, angle, vec3(0, 1, 0));


    // Affichage du cube

    cube.afficher(projection, modelview);



    // Fin de la boucle

    ....
}</code></pre><p id="r-962129" data-claire-element-id="962129">Avec ce code, votre cube devrait tourner sur lui-même. :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
<span class="arrow"></span>
<span class="next">Affichage d&#039;un Cube</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
<span class="next">Le Frame Rate</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LeFrameRate"></a><h2>Le Frame Rate</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
<span class="arrow"></span>
<span class="next">La classe Cube</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">
<span class="next">Push et Pop</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-calcul-du-fps" data-claire-element-id="962139">Calcul du FPS</h2><p id="r-962132" data-claire-element-id="962132">Je profite de ce chapitre pour vous introduire une nouvelle notion : celle du <strong>Frame Rate</strong>.</p><p id="r-962133" data-claire-element-id="962133">Le <strong>Frame Rate</strong> est le nombre de fois par seconde où la boucle principale est exécutée. En France, on prend généralement une valeur 50 fps (<strong>Frames Per Second</strong> ou <strong>Frames par seconde</strong>). Pour le moment, notre jeu fonctionne avec 0 fps étant donné que l'on utilise une fonction qui bloque le programme : <strong>SDL_WaitEvent</strong>(). La boucle ne s'exécute que si on fait quelque chose, sinon le jeu est bloqué.</p><p id="r-962134" data-claire-element-id="962134">Or, dans un jeu-vidéo, si on ne touche pas à la souris il se passe quand même quelque chose. Nous allons régler ce problème en introduisant la notion de frame rate. La première chose à faire est de changer la fonction <strong>SDL_WaitEvent</strong>() par la fonction <strong>SDL_PollEvent</strong>() qui, elle, ne bloque pas le programme :</p><pre id="r-962135" data-claire-element-id="962135"><code data-claire-semantic="cpp">SDL_PollEvent(&amp;m_evenements);</code></pre><p id="r-962136" data-claire-element-id="962136">L'utilisation de cette fonction va cependant nous poser un problème : le CPU va être totalement surchargé. Heureusement, le frame rate est là pour nous aider. Grâce à lui, nous n'exécuterons pas la boucle principale des centaines de fois par seconde mais uniquement quelques dizaines de fois, ce qui est pour le CPU largement calculable. :) Pour imposer cette limitation, il suffit de bloquer le programme quelques millisecondes à un certain moment. Ce petit intervalle dépend du nombre de FPS que l'on souhaite afficher.</p><p id="r-962137" data-claire-element-id="962137">Pour calculer ce temps de blocage, il suffit de diviser 1000 millisecondes (soit une seconde) par le nombre de FPS que l'on veut. Par exemple, si on veut 50 FPS il faut faire : 1000 / 50 = 20 millisecondes.</p><p id="r-962138" data-claire-element-id="962138">Pour 50 FPS, la boucle principale devra mettre 20 millisecondes à s'exécuter, quitte à mettre le programme en pause jusqu'à atteindre cet intervalle de 20 ms.</p><h2 id="r-programmation" data-claire-element-id="962169">Programmation</h2><p id="r-962140" data-claire-element-id="962140">La théorie c'est bien mais il faut maintenant adapter la notion de FPS dans notre code. Le principe est simple : on calcule le temps écoulé entre le début et la fin de la boucle. Si ce temps est inférieur à 20 ms alors on met en pause le programme jusqu'à atteindre les 20 ms.</p><p id="r-962141" data-claire-element-id="962141">L'implémentation se fait en plusieurs étapes :</p><ul id="r-962150" data-claire-element-id="962150"><li id="r-962143" data-claire-element-id="962143"><p id="r-962142" data-claire-element-id="962142">À chaque tour de boucle, on enregistre le temps où on commence la boucle.</p></li><li id="r-962145" data-claire-element-id="962145"><p id="r-962144" data-claire-element-id="962144">Puis on enregistre le temps une fois qu'elle est terminée.</p></li><li id="r-962147" data-claire-element-id="962147"><p id="r-962146" data-claire-element-id="962146">On soustrait le temps enregistré au début par le temps de fin de boucle.</p></li><li id="r-962149" data-claire-element-id="962149"><p id="r-962148" data-claire-element-id="962148">Si ce temps est inférieur à 20 ms, alors on met en pause le programme jusqu'à atteindre 20 ms.</p></li></ul><p id="r-962151" data-claire-element-id="962151">Pour capturer le temps, on utilise une fonction de la SDL : <strong>SDL_GetTicks</strong>(). Elle retourne le temps actuel de l'ordinateur dans une structure de type <strong>Uint32</strong> :</p><pre id="r-962152" data-claire-element-id="962152"><code data-claire-semantic="cpp">Uint32 SDL_GetTicks(void);</code></pre><p id="r-962153" data-claire-element-id="962153">Une autre fonction qui va nous être utile est la fonction <strong>SDL_Delay</strong>(). Cette fonction va nous permettre de mettre en pause le programme lorsque nous en aurons besoin. Elle prend un seul paramètre : le temps en millisecondes durant lequel elle va bloquer le programme :</p><pre id="r-962154" data-claire-element-id="962154"><code data-claire-semantic="cpp">void SDL_Delay(Uint32 ms);</code></pre><p id="r-962155" data-claire-element-id="962155">Bref, commençons déjà par déclarer nos variables juste après le booléen <em><strong>terminer</strong></em> de la méthode <em><strong>bouclePrincipale</strong></em>() :</p><pre id="r-962156" data-claire-element-id="962156"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables relatives à la boucle

    bool terminer(false);
    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    /* **** Reste du code **** */
}</code></pre><p id="r-962157" data-claire-element-id="962157">N'oubliez pas que le temps de blocage est égal à : <strong>1000 / Frame Rate</strong>.</p><p id="r-962158" data-claire-element-id="962158">Occupons-nous maintenant de la limitation. La première chose à faire est de déterminer le temps où la boucle commence :</p><pre id="r-962159" data-claire-element-id="962159"><code data-claire-semantic="cpp">// Boucle principale

while(!terminer)
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    /* ***** Boucle Principale ***** */
}</code></pre><p id="r-962160" data-claire-element-id="962160">Ensuite, il faut déterminer le temps qu'a mis la boucle pour s'exécuter. Pour ça, on enregistre le temps de fin de boucle que l'on soustrait par le temps du début :</p><pre id="r-962161" data-claire-element-id="962161"><code data-claire-semantic="cpp">while(!terminer)
{
    /* ***** Boucle Principale ***** */


    // Calcul du temps écoulé

    finBoucle = SDL_GetTicks();
    tempsEcoule = finBoucle - debutBoucle;
}</code></pre><p id="r-962162" data-claire-element-id="962162">Enfin, si le temps est inférieur à 20 ms, on met en pause le programme jusqu'à atteindre les 20 ms :</p><pre id="r-962163" data-claire-element-id="962163"><code data-claire-semantic="cpp">// Si nécessaire, on met en pause le programme

if(tempsEcoule &lt; frameRate)
    SDL_Delay(frameRate - tempsEcoule);</code></pre><p id="r-962164" data-claire-element-id="962164">Si on résume tout ça :</p><pre id="r-962165" data-claire-element-id="962165"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables relatives à la boucle

    bool terminer(false);
    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Boucle principale

    while(!terminer)
    {
        // On définit le temps de début de boucle

        debutBoucle = SDL_GetTicks();


        // Gestion des évènements

        SDL_PollEvent(&amp;m_evenements);

        if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
            terminer = true;
    



        /* ***** Rendu OpenGL ***** */

    


        // Calcul du temps écoulé

        finBoucle = SDL_GetTicks();
        tempsEcoule = finBoucle - debutBoucle;


        // Si nécessaire, on met en pause le programme

        if(tempsEcoule &lt; frameRate)
            SDL_Delay(frameRate - tempsEcoule);
    }
}</code></pre><p id="r-962166" data-claire-element-id="962166">Avec ce code, la boucle principale ne s'exécutera que 50 fois par seconde. Si vous observez l'activité de votre processeur, vous remarquerez que le programme ne le monopolise pas malgré l'utilisation de la fonction <strong>SDL_PollEvent</strong>(). Maintenant, nous ne sommes plus obligés de toucher la souris pour voir quelque chose bouger à l'écran. Essayez avec votre cube, il tourne même si vous ne faites rien. :p</p><p id="r-962167" data-claire-element-id="962167"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/xc6sbc01mfqjxb0/La troisieme dimension (Partie 2-2).zip?token_hash=AAEv-ZARv9NDy_JI08ltX3v0FlZ7_Rfl_C85H5NR2OMrtw&amp;dl=1">Code Source C++ du Chapitre 7</a></strong></p><p id="r-962168" data-claire-element-id="962168">Et voilà, nous avons fait nos premiers pas dans la 3D. Nous avons vu les principes de base et nous sommes maintenant capables d'afficher des polygones en 3 dimensions avec OpenGL. :p <br/> Dans le chapitre suivant, nous allons nous reposer un peu et étudier quelques points divers dont je n'ai pas encore parlés. Ce chapitre sera un peu plus court que les autres mais tout aussi important. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
<span class="arrow"></span>
<span class="next">La classe Cube</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">
<span class="next">Push et Pop</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="PushetPop"></a><h2>Push et Pop</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
<span class="arrow"></span>
<span class="next">Le Frame Rate</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
<span class="next">La problématique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-962172" data-claire-element-id="962172">Les chapitres les plus compliqués de la partie 1 sont enfin derrière nous, les suivants le seront moins. Aujourd'hui, on va s'intéresser aux piles de matrices.</p><p id="r-962173" data-claire-element-id="962173">Retenez bien ce que nous allons voir, et profitez de ce chapitre assez <em>soft</em> pour vous reposer. :magicien:</p>
</div><a name="Laproblmatique"></a><h2>La problématique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">
<span class="arrow"></span>
<span class="next">Push et Pop</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
<span class="next">Sauvegarde et Restauration</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-introduction-79" data-claire-element-id="962191">Introduction</h2><p id="r-962174" data-claire-element-id="962174">Je profite de cette partie vous faire un aparté sur la matrice <strong>modelview</strong>. En effet, pour le moment il y a un petit problème avec notre façon de l'utiliser, nous allons étudier un cas pour voir ce qui ne va pas. Jusqu'à maintenant, nous ne nous en sommes pas vraiment rendus compte car nos modèles 3D sont assez simples. Mais maintenant que nous avons fait nos premiers pas dans la 3D, il vaut mieux prendre les bonnes habitudes dès le début. :)</p><h3 id="r-un-probleme-bien-ennuyeux-2" data-claire-element-id="962190">Un problème bien ennuyeux ...</h3><p id="r-962175" data-claire-element-id="962175">Pour comprendre le problème, nous allons revenir un peu sur les transformations. Vous savez maintenant que chaque transformation que vous faites sera appliquée sur le repère de votre espace 3D et pas seulement sur l'objet que vous voulez afficher. Si vous faites une translation puis une rotation c'est le repère entier qui va être modifié.</p><p id="r-962176" data-claire-element-id="962176">Imaginez que vous vouliez afficher un toit pour une maison. Il faudra tout d'abord se placer en haut de la maison, puis faire une rotation pour que le toit soit légèrement penché et afficher le tout.</p><p id="r-962177" data-claire-element-id="962177">Maintenant si vous voulez afficher le jardin, comment faites-vous pour revenir en bas de la maison ? Comment faites-vous pour annuler la translation et la rotation qui permettaient d'arriver jusqu'au toit ?</p><p id="r-962178" data-claire-element-id="962178">Pour ça, nous avons trois solutions :</p><ul id="r-962185" data-claire-element-id="962185"><li id="r-962180" data-claire-element-id="962180"><p id="r-962179" data-claire-element-id="962179">Refaire la rotation et la translation dans le sens inverse.</p></li><li id="r-962182" data-claire-element-id="962182"><p id="r-962181" data-claire-element-id="962181">Réinitialiser totalement la matrice <strong>modelview</strong>, puis la caméra et enfin se replacer en bas de la maison.</p></li><li id="r-962184" data-claire-element-id="962184"><p id="r-962183" data-claire-element-id="962183">Sauvegarder la matrice, afficher le toit en la modifiant, puis annuler les transformations en la restaurant à son état sauvegardé.</p></li></ul><p id="r-962186" data-claire-element-id="962186">La première solution peut vous paraitre la plus simple à mettre en œuvre et sur un exemple comme celui-ci on peut le penser. Mais imaginez une maison de 500 vertices, l'afficher nécessitera plusieurs transformations. Vous pensez vraiment refaire toutes ces transformations dans le sens inverse pour retrouver votre position ?</p><p id="r-962187" data-claire-element-id="962187">La réponse est bien sûr <em>non</em>, d'une part parce que se rappeler de toutes les transformations est trop fastidieux et d'autre part parce que ça vous couterait trop de ressources pour refaire tout dans le sens inverse. Surtout que votre maison sera affichée 50 fois par seconde, imaginez le fourbi. :o</p><p id="r-962188" data-claire-element-id="962188">La deuxième solution nous pose les mêmes problèmes, réinitialiser la matrice et se replacer nous fait perdre du temps et des ressources.</p><p id="r-962189" data-claire-element-id="962189">Nous utiliserons donc la troisième solution qui nous permet de sauvegarder la matrice quand nous en avons besoin. De cette façon, on peut modifier le repère à volonté sans être obligé de retenir sur toutes les transformations. Une fois que nous voudrons revenir à la position sauvegardée, il suffira simplement de restaurer la sauvegarde du repère. :D</p><h2 id="r-les-piles-3" data-claire-element-id="962214">Les piles</h2><h3 id="r-avec-opengl-2" data-claire-element-id="962209">Avec OpenGL 2</h3><p id="r-962192" data-claire-element-id="962192">Dans les précédentes versions d'OpenGL, il existait deux fonctions qui permettaient de sauvegarder et de restaurer les matrices facilement. Celles-ci s’appelaient :</p><ul id="r-962197" data-claire-element-id="962197"><li id="r-962194" data-claire-element-id="962194"><p id="r-962193" data-claire-element-id="962193"><strong>glPush</strong>() : pour la sauvegarde</p></li><li id="r-962196" data-claire-element-id="962196"><p id="r-962195" data-claire-element-id="962195"><strong>glPop</strong>() : pour la restauration</p></li></ul><p id="r-962198" data-claire-element-id="962198">Ces deux fonctions fonctionnaient sur un système de <em><strong>pile</strong></em> qui permettait de stocker les sauvegardes les unes sur les autres.</p><p id="r-962199" data-claire-element-id="962199">Le principe d'une pile en programmation est d'entasser des variables ou des objets de même type les uns sur les autres comme une pile d'assiettes. Le but de la fonction <strong>glPush</strong>() était justement d'empiler des matrices entre elles pour former une pile de matrices :</p><figure id="r-962201" data-claire-element-id="962202"><img id="r-962200" data-claire-element-id="962200" src="medias/uploads.siteduzero.com_files_307001_308000_307587.png" alt="Image utilisateur"/></figure><p id="r-962203" data-claire-element-id="962203">On utilisait généralement les piles sur la matrice <strong><em>modelview</em></strong>, étant donné que c'est elle la plus utilisée. Elles étaient basées sur le principe <strong>LIFO</strong><em>LIFO (<strong>L</strong>ast <strong>I</strong>n <strong>F</strong>irst <strong>O</strong>ut)</em>, littéralement sur le principe du dernier arrivé premier sorti. C'est-à-dire que la dernière sauvegarde était la première restaurée.</p><p id="r-962204" data-claire-element-id="962204">Prenons l'exemple des assiettes. Si vous empilez 18 assiettes et que vous voulez laver celle la plus en dessous. Il faudra d'abord laver les 17 premières assiettes qui sont au dessus. En revanche, si vous voulez laver la dernière arrivée, elle se trouvera en haut de la pile (l'endroit le plus simple à accéder).</p><div id="r-962206" data-claire-element-id="962206" data-claire-semantic="question"><p id="r-962205" data-claire-element-id="962205">Ok on sait ce qu'est une pile maintenant. :) Mais à quoi ça pouvait bien servir ?</p></div><p id="r-962207" data-claire-element-id="962207">Bonne question, les piles permettaient de sauvegarder la matrice <em>modelview</em> à un état donné pour pouvoir la restaurer plus tard. L'intérêt principal était de pouvoir empiler des matrices pour avoir un système de restauration assez simple : la dernière sauvegarde était la première restaurée.</p><p id="r-962208" data-claire-element-id="962208">De cette façon, nous n'avions plus besoin de réinitialiser la matrice <em>modelview</em> ou de retenir toutes les transformations pour savoir où se trouvait le repère.</p><h3 id="r-avec-opengl-3" data-claire-element-id="962213">Avec OpenGL 3</h3><p id="r-962210" data-claire-element-id="962210">Comme beaucoup d'autres fonctions, OpenGL a déprécié l'utilisation de <strong>glPush</strong>() et <strong>glPop</strong>() mais bon il n'y a rien de surprenant là-dedans. En revanche, ce qui est surprenant c'est que la librairie <strong>GLM</strong> n'inclut pas de méthodes de substitution à ces fonctions. Nous ne pouvons donc pas utiliser les piles de matrices.</p><p id="r-962211" data-claire-element-id="962211">Ceci est dû au fait que les matrices sont maintenant des objets au sens propre du terme. C'est-à-dire que nous pouvons les manipuler, utiliser l'allocation dynamique dessus, intégrer la <strong>POO</strong>, etc. L'usage des piles n'est donc plus utile. C'est assez perturbant pour ceux qui les ont toujours utilisées mais lorsque l'on connait la puissance du C++, on se rend compte que ce n'est pas une si mauvaise idée que ça. :)</p><p id="r-962212" data-claire-element-id="962212">Au final, nous allons utiliser une autre manière de faire pour sauvegarder nos matrices. Les piles ne sont plus indispensables mais les sauvegardes, elles, le sont toujours. On ne peut pas résoudre notre problème de toit sinon. :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">
<span class="arrow"></span>
<span class="next">Push et Pop</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
<span class="next">Sauvegarde et Restauration</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="SauvegardeetRestauration"></a><h2>Sauvegarde et Restauration</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
<span class="arrow"></span>
<span class="next">La problématique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">
<span class="next">Les évènements avec la SDL 2.0</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-substitution-aux-piles" data-claire-element-id="962230">Substitution aux piles</h2><p id="r-962216" data-claire-element-id="962216">Comme nous l'avons vu à l'instant, les piles ne sont maintenant inutilisables, cependant les sauvegardes doivent quand même être faites.</p><p id="r-962217" data-claire-element-id="962217">Pour les faire, nous allons utiliser une des propriétés magiques du C++ : l'opérateur <strong>=</strong>. En effet, lorsque cet opérateur est surchargé, il permet de pouvoir copier un objet dans un autre objet. C'est ainsi que l'on peut, par exemple, copier deux voitures sans problème :</p><pre id="r-962218" data-claire-element-id="962218"><code data-claire-semantic="cpp">// Copie d'une voiture

Voiture maCopie = voitureOriginale;</code></pre><aside id="r-962220" data-claire-element-id="962220" data-claire-semantic="information"><p id="r-962219" data-claire-element-id="962219">Sous réserve que la classe <em><strong>Voiture</strong></em> inclut la surcharge de l'opérateur <strong>=</strong>. ;)</p></aside><p id="r-962221" data-claire-element-id="962221">Pour notre problème de matrices, nous allons faire exactement la même chose :</p><ul id="r-962226" data-claire-element-id="962226"><li id="r-962223" data-claire-element-id="962223"><p id="r-962222" data-claire-element-id="962222">Pour la <strong>sauvegarde</strong> : nous allons copier une matrice dans un objet <strong>sauvegarde</strong></p></li><li id="r-962225" data-claire-element-id="962225"><p id="r-962224" data-claire-element-id="962224">Pour la <strong>restauration</strong> : nous allons faire l'inverse et copier la <strong>sauvegarde</strong> dans la matrice originale</p></li></ul><p id="r-962227" data-claire-element-id="962227">En code, cela donnerait :</p><pre id="r-962228" data-claire-element-id="962228"><code data-claire-semantic="cpp">// Sauvegarde de la matrice

mat4 sauvegardeModelview = modelview;


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><p id="r-962229" data-claire-element-id="962229">Facile non ? Je dirais même que c'est plus facile à comprendre que les piles. :p</p><h2 id="r-quand-sauvegarder" data-claire-element-id="962256">Quand sauvegarder ?</h2><h3 id="r-le-probleme-des-transformations" data-claire-element-id="962242">Le problème des transformations</h3><p id="r-962231" data-claire-element-id="962231">Maintenant que nous avons une méthode de substitution aux piles, nous allons pouvoir sauvegarder nos matrices dans nos programmes. En théorie, nous devrions faire cela à chaque fois que l'on fait une transformation. Par exemple, le cube du chapitre du chapitre précédent utilise une transformation, et plus précisément une rotation, qui nous permet de faire une pseudo-animation. Nous devons donc utiliser la sauvegarde de matrice ici.</p><p id="r-962232" data-claire-element-id="962232">Pourquoi me direz-vous ? Simplement parce que le prochain modèle que nous voudrons afficher (comme un autre cube) sera automatiquement affecté par la rotation. Ce qui fait qu'au lieu de faire pivoter le cube initial, nous les ferons pivoter tous les deux. Essayez ce code pour voir :</p><pre id="r-962233" data-claire-element-id="962233"><code data-claire-semantic="cpp">// Rotation du repère

modelview = rotate(modelview, angle, vec3(0, 1, 0));


// Affichage du premier cube

cube.afficher(projection, modelview);


// Affichage du second cube un peu plus loin

modelview = translate(modelview, vec3(10, 0, 0));
cube.afficher(projection, modelview);</code></pre><p id="r-962234" data-claire-element-id="962234">Reculez votre caméra avant en la plaçant au point de coordonnées suivantes :</p><pre id="r-962235" data-claire-element-id="962235"><code data-claire-semantic="cpp">// Placement de la caméra

modelview = lookAt(vec3(6, 6, 6), vec3(3, 0, 0), vec3(0, 1, 0));</code></pre><p id="r-962236" data-claire-element-id="962236">Compilez pour voir.</p><p id="r-962237" data-claire-element-id="962237">Vous verrez que les deux cubes sont affectés par la rotation.</p><p id="r-962238" data-claire-element-id="962238">Dans un jeu-vidéo, ça serait assez problématique si une simple rotation de caméra faisait pivoter tout un bâtiment. :p</p><p id="r-962239" data-claire-element-id="962239">Pour éviter ça, il faut sauvegarder l'état de la matrice <strong>modelview</strong> avant la rotation, puis la restaurer une fois le modèle affiché :</p><pre id="r-962240" data-claire-element-id="962240"><code data-claire-semantic="cpp">// Sauvegarde de la matrice modelview

mat4 sauvegardeModelview = modelview;


    // Rotation du repère

    modelview = rotate(modelview, angle, vec3(0, 1, 0));


    // Affichage du premier cube

    cube.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;


// Affichage du second cube plus loin

modelview = translate(modelview, vec3(10, 0, 0));
cube.afficher(projection, modelview);</code></pre><p id="r-962241" data-claire-element-id="962241">Si vous essayez ce code, vous remarquerez que le second cube ne pivote plus. La rotation n'est valable que pour le premier car la matrice avait été sauvegardée avant.</p><h3 id="r-un-autre-exemple-5" data-claire-element-id="962246">Un autre exemple</h3><p id="r-962243" data-claire-element-id="962243">Bien entendu, le système de sauvegarde/restauration ne doit pas être utilisé seulement pour les rotations mais bien pour toutes les transformations (translation et homothétie comprises).</p><p id="r-962244" data-claire-element-id="962244">Ce qui fait que le code précédent est encore incomplet car la translation du second cube affectera les objets affichés après. Il faut donc réutiliser la sauvegarde de matrice :</p><pre id="r-962245" data-claire-element-id="962245"><code data-claire-semantic="cpp">// Affichage du premier cube

....


// Sauvegarde de la matrice modelview

mat4 sauvegardeModelview = modelview;


    // Affichage du second cube plus loin

    modelview = translate(modelview, vec3(2, 0, 0));
    cube.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><h3 id="r-le-cas-des-objets-proches" data-claire-element-id="962255">Le cas des objets proches</h3><p id="r-962247" data-claire-element-id="962247">Ce système de sauvegarde nous permet de revenir à chaque fois au centre du repère. Nos modèles sont donc placés sans erreur vu que nous partons toujours du point de coordonnées (0, 0, 0). Aucune transformation ne les affecte.</p><p id="r-962248" data-claire-element-id="962248">Le seul cas où vous pourrez vous permettre de ne pas restaurer la matrice immédiatement est le cas où des objets se situeraient près les uns des autres. Par exemple, imaginez que votre cube devienne une caisse et que vous souhaitez en afficher plusieurs côte à côte. Vous n'allez pas sauvegarder votre matrice à chaque fois pour revenir quasiment au même point après.</p><p id="r-962249" data-claire-element-id="962249">Si elles sont assez proches, vous pourrez les afficher les unes à la suite des autres sans problème et ce même si vous utilisez d'autres transformations :</p><pre id="r-962250" data-claire-element-id="962250"><code data-claire-semantic="cpp">// Sauvegarde de la matrice modelview

mat4 sauvegardeModelview = modelview;


    // Affichage du premier cube (au centre du repère)

    cube.afficher(projection, modelview);


    // Affichage du deuxième cube

    modelview = translate(modelview, vec3(3, 0, 0));
    cube.afficher(projection, modelview);


    // Affichage du troisième cube

    modelview = translate(modelview, vec3(3, 0, 0));
    cube.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><figure id="r-962252" data-claire-element-id="962253"><img id="r-962251" data-claire-element-id="962251" src="medias/uploads.siteduzero.com_files_420001_421000_420580.png" alt="Image utilisateur"/></figure><p id="r-962254" data-claire-element-id="962254">Vous voyez ici que les cubes sont assez proches, il est donc inutile de revenir au centre du repère pour repartir afficher la caisse suivante.</p><h2 id="r-ce-qu-il-faut-retenir-2" data-claire-element-id="962269">Ce qu'il faut retenir</h2><p id="r-962257" data-claire-element-id="962257">Pour résumer tout ce blabla un peu confus :</p><ul id="r-962264" data-claire-element-id="962264"><li id="r-962259" data-claire-element-id="962259"><p id="r-962258" data-claire-element-id="962258">Vous devez sauvegarder et restaurer la matrice <strong>modelview</strong> à chaque fois que vous faites une transformation</p></li><li id="r-962261" data-claire-element-id="962261"><p id="r-962260" data-claire-element-id="962260">Si vous affichez des objets assez proches, ne restaurez votre matrice qu'une fois toutes les transformations faites. Ceci afin d’économiser un peu de temps de calcul</p></li><li id="r-962263" data-claire-element-id="962263"><p id="r-962262" data-claire-element-id="962262">Si vous ne faites pas de transformation, ne sauvegardez rien</p></li></ul><p id="r-962265" data-claire-element-id="962265">C'est tout ce qu'il faut retenir dans ce chapitre. :)</p><p id="r-962266" data-claire-element-id="962266"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/te14de1gvchmhvm/Push et Pop.zip?token_hash=AAHgKS4AG9TbHVzweojuuD2ZLzXDdr-omcOWK1p4rA5oqQ&amp;dl=1">Code Source C++ du Chapitre 8</a></strong></p><p id="r-962267" data-claire-element-id="962267">Nous voici à la fin de ce chapitre. Nous avons appris à coder et à utiliser les sauvegardes de matrice. C'était un chapitre un peu technique mais il concernait une notion indispensable de la programmation avec OpenGL. N'oubliez pas qu'à partir de maintenant, nous utiliserons toujours les piles de matrices pour afficher nos modèles. ;)</p><p id="r-962268" data-claire-element-id="962268">Pour la suite du tuto je vous propose de vous reposer encore un peu, le prochain chapitre que nous allons aborder sera assez facile à comprendre. Il concernera les évènements avec la SDL 2.0. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
<span class="arrow"></span>
<span class="next">La problématique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">
<span class="next">Les évènements avec la SDL 2.0</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesvnementsaveclaSDL2.0"></a><h2>Les évènements avec la SDL 2.0</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
<span class="arrow"></span>
<span class="next">Sauvegarde et Restauration</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
<span class="next">Différences entre la SDL 1.2 et 2.0</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-962272" data-claire-element-id="962272">Depuis le début du tutoriel, les évènements sont gérés automatiquement et sans contrôle sur le clavier et la souris. Nous pourrions continuer à coder ainsi, sans se préoccuper de rien mais on va profiter de ce petit chapitre pour créer une classe à part entière qui s'occupera de gérer tout ça pour nous. Avec elle, nous pourrons retrouver facilement les évènements qui nous intéressent comme les touches ou les boutons de souris qui sont utilisés, ...</p><p id="r-962273" data-claire-element-id="962273">Bien entendu, notre code devra respecter la règle de l'encapsulation. Il faudra donc faire attention à protéger les attributs pour ne pas accéder directement aux évènements.</p>
</div><a name="DiffrencesentrelaSDL1.2et2.0"></a><h2>Différences entre la SDL 1.2 et 2.0</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">
<span class="arrow"></span>
<span class="next">Les évènements avec la SDL 2.0</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
<span class="next">La classe Input</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-962274" data-claire-element-id="962274">Nous avons déjà eu l’occasion de constater les différences qu'ils existaient entre l'ancienne et la nouvelle version de la SDL, notamment lors de la création de fenêtre. Nous allons voir maintenant celles qui concernent les évènements car ils sont indispensables au développement d'un jeu vidéo. D'ailleurs, on les a déjà utilisés lorsque nous voulions savoir si une fenêtre devait se fermer ou pas.</p><p id="r-962275" data-claire-element-id="962275">En effet, à chaque tour de la boucle principale, on vérifie si l'évènement <em><strong>SDL_WINDOWEVENT_CLOSE</strong></em> est déclenché, ce qui nous permet de continuer ou d’arrêter la boucle :</p><pre id="r-962276" data-claire-element-id="962276"><code data-claire-semantic="cpp">// Boucle principale

bool terminer(false);

while(!terminer)
{
    // Gestion des évènements

    SDL_PollEvent(&amp;m_evenements);

    if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        terminer = true;
}</code></pre><p id="r-962277" data-claire-element-id="962277">Ce bout de code est pratique mais il ne nous permet pas de gérer la pression des touches. On pourrait par exemple appuyer sur la touche <em><strong>ECHAP</strong></em> pour terminer la boucle, ou utiliser un de souris.</p><p id="r-962278" data-claire-element-id="962278">Si vous vous rappelez du chapitre sur les évènements de la SDL 1.2 dans le <a href="http://www.siteduzero.com/tutoriel-3-14108-la-gestion-des-evenements.html">cours</a> de <strong>M@téo</strong>, vous vous souvenez surement de la façon de gérer les touches du clavier. Par exemple, pour gérer la pression des touches <strong>T</strong> ou <strong>ECHAP</strong> il fallait faire ceci :</p><pre id="r-962279" data-claire-element-id="962279"><code data-claire-semantic="cpp">// Structure

SDL_Event evenements;


// Récupération d'un évènement

SDL_PollEvent(&amp;evenements);


// Switch sur le type d'évènement

switch(evenements.type)
{
    case SDL_KEYDOWN:
        
        // Gestion des touches

        switch(evenements.key.keysym.sym)
        {
            case SDLK_T:
                ....
            break;

            case SDLK_ESCAPE:
                ....
            break;
        }

    break;
}</code></pre><p id="r-962280" data-claire-element-id="962280">Voilà comment on gérait les évènements avec la SDL 1.2, et la bonne nouvelle c'est qu'avec la version 2.0 ça se passe de la même façon. :p</p><p id="r-962281" data-claire-element-id="962281">Seulement deux choses vont être modifiées :</p><ul id="r-962286" data-claire-element-id="962286"><li id="r-962283" data-claire-element-id="962283"><p id="r-962282" data-claire-element-id="962282">Premièrement, on ne vérifie plus le champ <em><strong>sym</strong></em>, mais le champ <em><strong>scancode</strong></em>. Ce qui donne au final : <em><strong>m_evenements.key.keysym.scancode</strong></em>.</p></li><li id="r-962285" data-claire-element-id="962285"><p id="r-962284" data-claire-element-id="962284">Ensuite, le <em>nom</em> des touches ne commencent plus par <strong><em>SDLK_*</em></strong> mais par <em><strong>SDL_SCANCODE_*</strong></em>. Ce qui nous donne ici : <em><strong>SDL_SCANCODE_T</strong></em> et <strong><em>SDL_SCANCODE_ESCAPE.</em></strong></p></li></ul><p id="r-962287" data-claire-element-id="962287">Si on modifie le code précédent on trouve :</p><pre id="r-962288" data-claire-element-id="962288"><code data-claire-semantic="cpp">// Structure

SDL_Event evenements;


// Récupération d'un évènement

SDL_PollEvent(&amp;evenements);


// Switch sur le type d'évènement

switch(evenements.type)
{
    case SDL_KEYDOWN:
        
        // Gestion des touches

        switch(evenements.key.keysym.scancode)
        {
            case SDL_SCANCODE_T:
                ....
            break;

            case SDL_SCANCODE_ESCAPE:
                ....
            break;
        }

    break;
}</code></pre><p id="r-962289" data-claire-element-id="962289">Aucun gros changement. ;)</p><p id="r-962290" data-claire-element-id="962290">Je ne peux vous parler plus explicitement des <em><strong>scancodes</strong></em> mais sachez simplement que mis à part le nom des constantes, le code restera le même pour nous. Si on veut aller plus loin au niveau du fonctionnement de la SDL on remarque que les <em><strong>scancodes</strong></em> sont une modification majeur de la librairie car on change de norme pour identifier les touches en interne. Mais bon dans le fond on s'en moque un peu. :p</p><p id="r-962291" data-claire-element-id="962291">Concernant la souris, il n'y a rien à signaler. Il n'y a pas de grands changements par rapport à la SDL 1.2. La gestion se fera de la même façon pour nous.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">
<span class="arrow"></span>
<span class="next">Les évènements avec la SDL 2.0</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
<span class="next">La classe Input</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LaclasseInput"></a><h2>La classe Input</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
<span class="arrow"></span>
<span class="next">Différences entre la SDL 1.2 et 2.0</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
<span class="next">Les méthodes indispensables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h3 id="r-la-classe-input" data-claire-element-id="962301">La classe Input</h3><p id="r-962293" data-claire-element-id="962293">Maintenant que nous avons vu les différences qu'il existait entre les deux versions de la SDL, nous allons passer à l'implémentation d'une classe qui gèrera tous les évènements toute seule. :)</p><div id="r-962295" data-claire-element-id="962295" data-claire-semantic="question"><p id="r-962294" data-claire-element-id="962294">Ça veut dire qu'on va remplacer la structure <em><strong>SDL_Event</strong></em> par une <em><strong>classe</strong></em> ?</p></div><p id="r-962296" data-claire-element-id="962296">Alors oui et non, car la structure <em><strong>SDL_Event</strong></em> existera toujours quelque part. Mais au lieu de l'utiliser dans la classe <em><strong>SceneOpenGL</strong></em>, on l’utilisera dans une classe à part. Grâce à ça, les évènements seront protégés par la règle de <em>l'encapsulation</em> et seront aussi plus simples à utiliser. Seul l'appel à une méthode nous permettra de savoir si telle ou telle touche est enfoncée. :)</p><p id="r-962297" data-claire-element-id="962297">On appellera cette classe : la classe <em><strong>Input</strong></em>.</p><p id="r-962298" data-claire-element-id="962298">En informatique, les <em>inputs</em> sont des systèmes qui permettent d'apporter à l'ordinateur des actions venant de l'utilisateur. Elles peuvent prendre la forme d'un mouvement de souris, d'une pression sur une touche du clavier, d'un geste de doigt sur un écran tactile, ... D'où le nom <em><strong>Input</strong></em> pour la classe qui gèrera tous ces évènements. :)</p><p id="r-962299" data-claire-element-id="962299">Voici sa déclaration :</p><pre id="r-962300" data-claire-element-id="962300"><code data-claire-semantic="cpp">#ifndef DEF_INPUT
#define DEF_INPUT

// Include

#include &lt;SDL2/SDL.h&gt;


// Classe

class Input
{
    public:

    Input();
    ~Input();


    private:
};

#endif</code></pre><h3 id="r-les-attributs-10" data-claire-element-id="962324">Les attributs</h3><p id="r-962302" data-claire-element-id="962302">La classe <em><strong>Input</strong></em> possèdera plusieurs attributs :</p><ul id="r-962315" data-claire-element-id="962315"><li id="r-962304" data-claire-element-id="962304"><p id="r-962303" data-claire-element-id="962303">Une structure <em><strong>SDL_Event</strong></em> : pour récupérer les évènements SDL</p></li><li id="r-962306" data-claire-element-id="962306"><p id="r-962305" data-claire-element-id="962305">Un tableau de <em>booléens</em><strong>m_touches[]</strong> : regroupant toutes les touches du clavier</p></li><li id="r-962308" data-claire-element-id="962308"><p id="r-962307" data-claire-element-id="962307">Un tableau de <em>booléens</em><strong>m_boutonsSouris[]</strong> : regroupant tous les boutons de la souris</p></li><li id="r-962310" data-claire-element-id="962310"><p id="r-962309" data-claire-element-id="962309">Deux <em>entiers</em> (<em>int</em>) : représentant la position (x, y) du pointeur de la souris</p></li><li id="r-962312" data-claire-element-id="962312"><p id="r-962311" data-claire-element-id="962311">Deux <em>entiers</em> : représentant la position relative (x, y) du pointeur</p></li><li id="r-962314" data-claire-element-id="962314"><p id="r-962313" data-claire-element-id="962313">Un <em>booléen</em><em><strong>m_terminer</strong></em> : qui permettra se savoir quand la fenêtre devra être fermer</p></li></ul><p id="r-962316" data-claire-element-id="962316">On va directement s’intéresser aux tableaux de booléens. Chaque case de ces tableaux pourra prendre deux valeurs : si une touche, ou un bouton, est enfoncé(e) elle prendra la valeur <strong>true</strong>, dans le cas contraire ce sera la valeur <strong>false</strong>. Au début du programme, toutes les cases sont initialisées à <strong>false</strong>, vu que l'on appuie sur aucune des touches.</p><p id="r-962317" data-claire-element-id="962317">Pour définir la taille de ces tableaux on pourrait croire qu'il faille utiliser l'allocation dynamique - vu qu'il existe plusieurs types de claviers - mais pas du tout. En effet, la <em>SDL</em> gère toute seule les différents claviers. Elle est capable de nous fournir une seule et unique constante (<em><strong>SDL_NUM_SCANCODES</strong></em>) représentant le nombre maximal de touches d'un clavier, et par conséquent la taille du tableau <strong>m_touches[]</strong>. Grâce à elle, on pourra gérer toutes les touches automatiquement. ;)</p><p id="r-962318" data-claire-element-id="962318">Pour la souris, ce sera un peu différent. Il n'existe pas de constante que l'on peut donner au tableau. En revanche, on peut savoir que la <strong>SDL</strong> ne peut gérer que <strong>7 boutons</strong> pour la souris. On donnera donc une taille de <strong>7</strong> cases au tableau <strong>m_boutonsSouris[]</strong>.</p><aside id="r-962320" data-claire-element-id="962320" data-claire-semantic="information"><p id="r-962319" data-claire-element-id="962319">En réalité, on donnera une valeur de <strong>8</strong> car l'indice du premier bouton de la souris commence à 1 et pas à 0. Il faut donc prévoir une case supplémentaire.</p></aside><p id="r-962321" data-claire-element-id="962321">Si on regroupe les attributs on a :</p><pre id="r-962322" data-claire-element-id="962322"><code data-claire-semantic="cpp">#ifndef DEF_INPUT
#define DEF_INPUT

// Include

#include &lt;SDL2/SDL.h&gt;


// Classe

class Input
{
    public:

    Input();
    ~Input();


    private:

    SDL_Event m_evenements;
    bool m_touches[SDL_NUM_SCANCODES];
    bool m_boutonsSouris[8];

    int m_x;
    int m_y;
    int m_xRel;
    int m_yRel;

    bool m_terminer;
};

#endif</code></pre><p id="r-962323" data-claire-element-id="962323">Avec ces attributs, on pourra récupérer tous les évènements dont on aura besoin. On verra en dernière partie de ce chapitre quelques méthodes qui nous permettront d'accéder à ces attributs.</p><h3 id="r-le-constructeur-et-le-destructeur" data-claire-element-id="962335">Le constructeur et le destructeur</h3><p id="r-962325" data-claire-element-id="962325">Maintenant qu'on a défini la classe <em><strong>Input</strong></em>, on doit s'occuper d'initialiser ses attributs avec le <em>constructeur</em>. Dans cette classe, on aura besoin que d'un constructeur : la <em>constructeur par défaut</em>.</p><pre id="r-962326" data-claire-element-id="962326"><code data-claire-semantic="cpp">Input();</code></pre><p id="r-962327" data-claire-element-id="962327">Il s'occupera de mettre tous les attributs soit à <em>0</em> soit à <em>false</em>.</p><p id="r-962328" data-claire-element-id="962328">Son implémentation commence par l'initialisation de tous les attributs (sauf les tableaux) :</p><pre id="r-962329" data-claire-element-id="962329"><code data-claire-semantic="cpp">Input::Input() : m_x(0), m_y(0), m_xRel(0), m_yRel(0), m_terminer(false)
{

}</code></pre><p id="r-962330" data-claire-element-id="962330">Pour initialiser les tableaux de <em>bool</em>, il faudra juste faire une boucle pour affecter la valeur <strong>false</strong> aux différentes cases :</p><pre id="r-962331" data-claire-element-id="962331"><code data-claire-semantic="cpp">Input::Input() : m_x(0), m_y(0), m_xRel(0), m_yRel(0), m_terminer(false)
{
    // Initialisation du tableau m_touches[]

    for(int i(0); i &lt; SDL_NUM_SCANCODES; i++)
        m_touches[i] = false;


    // Initialisation du tableau m_boutonsSouris[]

    for(int i(0); i &lt; 8; i++)
        m_boutonsSouris[i] = false;
}</code></pre><p id="r-962332" data-claire-element-id="962332">Voilà pour le constructeur. :)</p><p id="r-962333" data-claire-element-id="962333">On profite également de cette partie pour créer le <em>destructeur</em>. Même si on ne met rien dedans, on l'implémente quand même. C'est une bonne habitude à prendre. ;)</p><pre id="r-962334" data-claire-element-id="962334"><code data-claire-semantic="cpp">Input::~Input()
{

}</code></pre><h3 id="r-la-boucle-d-evenements" data-claire-element-id="962365">La boucle d'évènements</h3><p id="r-962336" data-claire-element-id="962336">Pour la partie qui va suivre, je vais vous demander toute votre attention. Nous allons voir la notion la plus importante du chapitre : la boucle d'évènements.</p><div id="r-962338" data-claire-element-id="962338" data-claire-semantic="question"><p id="r-962337" data-claire-element-id="962337">Euh c'est quoi cette boucle ? Ça a un rapport avec les évènements SDL ?</p></div><p id="r-962339" data-claire-element-id="962339">Oui tout à fait. Il s'agit d'une boucle qui récupère tous les évènements à un moment donné, quelque soit leur nature (touche de clavier, mouvement de souris, ...).</p><p id="r-962340" data-claire-element-id="962340">Si je vous parle de cette boucle, c'est parce qu'à l'heure actuelle nous avons un gros problème : nous ne sommes pas capables de gérer plusieurs évènements à la fois. Je vais vous donner un exemple pour que vous compreniez bien le problème.</p><p id="r-962341" data-claire-element-id="962341">Dans votre vie, vous avez probablement déjà joué à un jeu-vidéo, comme Mario par exemple. Les jeux Mario sont en général des jeux de plateformes où notre petit plombier doit sauter et avancer sur des plateformes, tuyaux et autres éléments de l'environnement.</p><p id="r-962342" data-claire-element-id="962342">La plupart du temps, sans même vous en rendre compte, vous appuyez sur plusieurs touches (ou boutons) en même temps. Par exemple, un personnage saute et avance en même temps, il se passe deux actions : sauter et avancer. On peut même rajouter des actions à ça : tirer, sprinter, ... Dans ce cas, le programme doit gérer 4 évènements en même temps.</p><p id="r-962343" data-claire-element-id="962343">A l'heure actuelle, notre problème c'est qu'avec la SDL nous ne pouvons gérer qu'un seul et unique évènement à la fois. Si nous programmions un Mario avec la SDL, le personnage ne pourrait même pas avancer et sauter en même, ce qui est un peu contraignant ... :p</p><div id="r-962345" data-claire-element-id="962345" data-claire-semantic="question"><p id="r-962344" data-claire-element-id="962344">Le problème vient de la SDL alors ? Elle est un peu nulle cette librairie :(</p></div><p id="r-962346" data-claire-element-id="962346">Non pas du tout, car ça ne vient pas vraiment d'elle mais de notre code. Vous vous souvenez du <strong>switch</strong> au début du chapitre ? Celui-ci :</p><pre id="r-962347" data-claire-element-id="962347"><code data-claire-semantic="cpp">// Structure

SDL_Event evenements;


// Attente d'un évènement

SDL_PollEvent(&amp;evenements);


// Switch sur le type d'évènement

switch(evenements.type)
{
    case SDL_KEYDOWN:
        
        // Gestion des touches

        switch(evenements.key.keysym.scancode)
        {
            case SDL_SCANCODE_T:
                ....
            break;

            case SDL_SCANCODE_ESCAPE:
                ....
            break;
        }

    break;
}</code></pre><p id="r-962348" data-claire-element-id="962348">Avec ce code, on ne peut gérer qu'un seul évènement par tour de boucle OpenGL.</p><p id="r-962349" data-claire-element-id="962349">Pour régler ce problème, on va se servir d'une petite astuce de la fonction <strong>SDL_PollEvent</strong>(). En effet, si on s’intéresse à son prototype on peut remarquer une chose :</p><pre id="r-962350" data-claire-element-id="962350"><code data-claire-semantic="cpp">int SDL_PollEvent(SDL_Event *event);</code></pre><p id="r-962351" data-claire-element-id="962351">La fonction <strong>SDL_PollEvent</strong>() renvoie une <em><strong>valeur</strong></em> (un <em><strong>int</strong></em>).</p><p id="r-962352" data-claire-element-id="962352">On ne s'est jamais servi de cette valeur (on ne savait même pas qu'elle existait d'ailleurs) et pourtant c'est elle qui va régler notre problème. Cet <strong><em>integer</em></strong> retourné peut prendre deux valeurs :</p><ul id="r-962357" data-claire-element-id="962357"><li id="r-962354" data-claire-element-id="962354"><p id="r-962353" data-claire-element-id="962353">Soit <em><strong>1</strong></em> : ce qui veut dire qu'il reste encore des évènements à capturer dans la file d'attente</p></li><li id="r-962356" data-claire-element-id="962356"><p id="r-962355" data-claire-element-id="962355">Soit <em><strong>0</strong></em> : ce qui veut dire qu'il n'y en a plus</p></li></ul><p id="r-962358" data-claire-element-id="962358">Pour capturer tous les évènements, il suffit de piéger la fonction <strong>SDL_PollEvent</strong>() dans une boucle. Tant qu'il reste quelque chose à récupérer dans la file d'attente, la fonction retourne <strong>1</strong>, donc on continue de récupérer les évènements jusqu'à qu'il n'y en ait plus. <br/> Grâce à cette astuce, on sera capable de gérer plusieurs touches/boutons en même temps. Le petit Mario de tout à l'heure pourra donc avancer, sauter, sprinter, tirer des boules de feu ... et tout ça en même temps. ;) <br/> D'où la <em>boucle d'évènements</em> dont je vous ai parlée tout à l'heure. :p</p><p id="r-962359" data-claire-element-id="962359">Au niveau du code, il suffit d'enfermer la fonction <strong>SDL_PollEvent</strong>() dans une boucle <strong>while</strong>. Tant que la fonction retourne <strong>1</strong> on continue la boucle :</p><pre id="r-962360" data-claire-element-id="962360"><code data-claire-semantic="cpp">// Structure

SDL_Event evenements;


// Boucle d'évènements

while(SDL_PollEvent(&amp;evenements) == 1)
{
    // Switch sur le type d'évènement

    switch(evenements.type)
    {
        case SDL_KEYDOWN:
        
            // Gestion des touches

            switch(evenements.key.keysym.scancode)
            {
                case SDL_SCANCODE_T:
                    ....
                break;

                case SDL_SCANCODE_ESCAPE:
                    ....
                break;
            }

        break;
    }
}</code></pre><p id="r-962361" data-claire-element-id="962361">On peut même simplifier le <strong>while</strong> en enlevant la condition ' <strong><em>== 1</em></strong> ' :</p><pre id="r-962362" data-claire-element-id="962362"><code data-claire-semantic="cpp">// Boucle d'évènements

while(SDL_PollEvent(&amp;evenements))
{
    ...
}</code></pre><p id="r-962363" data-claire-element-id="962363">Vous savez maintenant ce qu'est la <em>boucle d'évènements</em>. C'est une boucle qui permet de capturer toutes les actions qui concernent le clavier, la souris, ... en même temps.</p><p id="r-962364" data-claire-element-id="962364">Nous allons maintenant revenir à la classe <strong><em>Input</em></strong> pour intégrer cette boucle dans une méthode. :)</p><h3 id="r-la-methode-updateevenements" data-claire-element-id="962391">La méthode updateEvenements()</h3><p id="r-962366" data-claire-element-id="962366">La méthode qui va implémenter cette boucle s'appellera <strong>updateEvenements</strong>(). Voici son prototype :</p><pre id="r-962367" data-claire-element-id="962367"><code data-claire-semantic="cpp">void updateEvenements();</code></pre><p id="r-962368" data-claire-element-id="962368">Commençons cette méthode en codant la fameuse boucle <strong>while</strong> qui prendra en &quot;condition&quot; la valeur retournée par la fonction <strong>SDL_PollEvent</strong>().</p><p id="r-962369" data-claire-element-id="962369">D'ailleurs, on donnera à cette dernière l'adresse de l'attribut <strong>m_evenements</strong> - car oui la structure <strong><em>SDL_Event</em></strong> existe toujours quelque part, elle n'a pas disparue. :p</p><pre id="r-962370" data-claire-element-id="962370"><code data-claire-semantic="cpp">void Input::updateEvenements()
{
    // Boucle d'évènements

    while(SDL_PollEvent(&amp;m_evenements))
    {

    }
}</code></pre><p id="r-962371" data-claire-element-id="962371">La suite du code ne changera pas beaucoup par rapport à la <em>SDL 1.2</em>. On met en place un gros <strong>switch</strong> qui va tester la valeur du champ <strong>m_evenements.type</strong> . On commencera par gérer les conditions relatives au clavier.</p><p id="r-962372" data-claire-element-id="962372">Deux cas doivent être gérés par le clavier :</p><ul id="r-962377" data-claire-element-id="962377"><li id="r-962374" data-claire-element-id="962374"><p id="r-962373" data-claire-element-id="962373">Lorsqu'une <em><strong>touche</strong></em> est <em><strong>enfoncée</strong></em>, l'évènement <em><strong>SDL_KEYDOWN</strong></em> est déclenché (même chose qu'avec la <em>SDL 1.2</em>).</p></li><li id="r-962376" data-claire-element-id="962376"><p id="r-962375" data-claire-element-id="962375">Lorsqu'une <em><strong>touche</strong></em> est <em><strong>relâchée</strong></em>, l'évènement <em><strong>SDL_KEYUP</strong></em> est déclenché (même chose aussi)</p></li></ul><p id="r-962378" data-claire-element-id="962378">Dans les deux cas, on actualisera l'état de la touche correspondante dans le tableau <strong>m_touches[]</strong>. D'ailleurs, on utilisera le champ <strong>m_evenements.key.keysym.scancode</strong> qui nous servira d'indice pour retrouver la bonne case :</p><pre id="r-962379" data-claire-element-id="962379"><code data-claire-semantic="cpp">// Actualisation de l'état de la touche

m_touches[m_evenements.key.keysym.scancode] = true;</code></pre><aside id="r-962381" data-claire-element-id="962381" data-claire-semantic="information"><p id="r-962380" data-claire-element-id="962380">Nous avons vu que le champ <em><strong>scancode</strong></em> remplaçait désormais le champ <em><strong>sym</strong></em>. ;)</p></aside><p id="r-962382" data-claire-element-id="962382">Le gros avantage du tableau de <em>booléens</em> c'est que, quelque soit la touche enfoncée, nous n'avons besoin que d'une seule ligne de code pour actualiser son état. Que ce soit la touche <strong>A</strong>, <strong>B</strong>, <strong>C</strong>, <strong>ESPACE</strong>, ... une seule ligne suffit. :D</p><p id="r-962383" data-claire-element-id="962383">En définitif, pour gérer les touches du clavier nous devons :</p><ul id="r-962388" data-claire-element-id="962388"><li id="r-962385" data-claire-element-id="962385"><p id="r-962384" data-claire-element-id="962384">Tester le champ <em><strong>m_evenements.type</strong></em> pour savoir si une touche a été enfoncée ou relâchée</p></li><li id="r-962387" data-claire-element-id="962387"><p id="r-962386" data-claire-element-id="962386">Actualiser la touche dans le tableau de <em>booléens</em> avec une valeur <strong>true</strong> ou un <strong>false</strong></p></li></ul><pre id="r-962389" data-claire-element-id="962389"><code data-claire-semantic="cpp">void Input::updateEvenements()
{
    // Boucle d'évènements

    while(SDL_PollEvent(&amp;m_evenements))
    {
        // Switch sur le type d'évènement

        switch(m_evenements.type)
        {
            // Cas d'une touche enfoncée

            case SDL_KEYDOWN:
                m_touches[m_evenements.key.keysym.scancode] = true;
            break;


            // Cas d'une touche relâchée

            case SDL_KEYUP:
                m_touches[m_evenements.key.keysym.scancode] = false;
            break;


            default:
            break;
        }
    }
}</code></pre><p id="r-962390" data-claire-element-id="962390">Grâce à ce code, toutes les touches du clavier peuvent être mises à jour en même temps (enfin, en une boucle :p ).</p><h3 id="r-gestion-de-la-souris" data-claire-element-id="962400">Gestion de la souris</h3><p id="r-962392" data-claire-element-id="962392">Nous avons déjà fait la plus grosse part du travail, on sait désormais gérer toutes les touches du clavier. Nous allons maintenant passer à la gestion de la souris.</p><p id="r-962393" data-claire-element-id="962393">La bonne nouvelle, c'est que les boutons de la souris se gèrent de la même façon que les touches du clavier. Il suffit de rajouter deux <strong>cases</strong> au <strong>switch</strong> : un pour les boutons qui seront pressés (ce case utilisera la constante <em><strong>SDL_MOUSEBUTTONDOWN</strong></em>) et un autre pour les boutons qui seront relâchés (il utilisera la constante <em><strong>SDL_MOUSEBUTTONUP</strong></em>).</p><p id="r-962394" data-claire-element-id="962394">Pour récupérer l'indice du bouton dans le tableau <strong>m_boutonsSouris[]</strong>, nous n'utiliserons pas le champ <strong>m_evenements.key.keysym.scancode</strong>, car ce champ ne concerne uniquement que le clavier. A la place, nous utiliserons le champ <strong>evenements.button.button</strong> qui lui est réservé à la souris.</p><p id="r-962395" data-claire-element-id="962395">On ajoute donc les deux <strong>cases</strong> suivants au <strong>switch</strong> :</p><pre id="r-962396" data-claire-element-id="962396"><code data-claire-semantic="cpp">// Cas de pression sur un bouton de la souris

case SDL_MOUSEBUTTONDOWN:

    m_boutonsSouris[m_evenements.button.button] = true;

break;


// Cas du relâchement d'un bouton de la souris

case SDL_MOUSEBUTTONUP:

    m_boutonsSouris[m_evenements.button.button] = false;

break;</code></pre><p id="r-962397" data-claire-element-id="962397">Ça c'était la partie des boutons. Maintenant il faut s'occuper des mouvements de la souris.</p><p id="r-962398" data-claire-element-id="962398">Lorsque la souris est en mouvement, un évènement est déclenché dans la <em>SDL</em>. Cet évènement va permettre de mettre à jour les <em>coordonnées</em> (<strong>x, y</strong>) du pointeur ainsi que ses coordonnées relatives. Nous allons pouvoir détecter ces mouvements grâce à la constante <em><strong>SDL_MOUSEMOTION</strong></em>. Lorsque cet évènement sera déclenché, on mettra à jour les attributs qui concernent les coordonnées. On prendra les nouvelles valeurs dans le champ <strong>m_evenements.motion</strong> :</p><pre id="r-962399" data-claire-element-id="962399"><code data-claire-semantic="cpp">// Cas d'un mouvement de souris

case SDL_MOUSEMOTION:

    m_x = m_evenements.motion.x;
    m_y = m_evenements.motion.y;

    m_xRel = m_evenements.motion.xrel;
    m_yRel = m_evenements.motion.yrel;

break;</code></pre><h3 id="r-fermeture-de-la-fenetre" data-claire-element-id="962408">Fermeture de la fenêtre</h3><p id="r-962401" data-claire-element-id="962401">Il ne reste plus qu'un seul évènement à gérer dans cette boucle : le cas de la fermeture de la fenêtre (la croix rouge en haut à droite sous <em>Windows</em>). Depuis le début du tutoriel, on utilise cet évènement dans la boucle principale d'OpenGL pour savoir si on doit quitter le programme :</p><pre id="r-962402" data-claire-element-id="962402"><code data-claire-semantic="cpp">if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
    terminer = true;</code></pre><p id="r-962403" data-claire-element-id="962403">Il faut maintenant enlever ce code pour le migrer dans la méthode <strong>updateEvenements</strong>(). N'oubliez pas que c'est elle et uniquement elle qui doit mettre à jour tous les évènements.</p><p id="r-962404" data-claire-element-id="962404">Nous allons donc ajouter un nouveau <strong>case</strong> dans le <strong>switch</strong> pour gérer cette fermeture. On utilisera la constante <em><strong>SDL_WINDOWSEVENT</strong></em> pour savoir si cet évènement a été déclenché. N'oubliez pas de modifier la variable <strong>terminer</strong> en <strong>m_terminer</strong>, car on met à jour non plus une variable mais un attribut :</p><pre id="r-962405" data-claire-element-id="962405"><code data-claire-semantic="cpp">// Cas de la fermeture de la fenêtre

case SDL_WINDOWEVENT:

    if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
        m_terminer = true;

break;</code></pre><p id="r-962406" data-claire-element-id="962406">Si réunie tous ces <strong>cases</strong> dans la méthode, on trouve :</p><pre id="r-962407" data-claire-element-id="962407"><code data-claire-semantic="cpp">void Input::updateEvenements()
{
    // Boucle d'évènements

    while(SDL_PollEvent(&amp;m_evenements))
    {
        // Switch sur le type d'évènement

        switch(m_evenements.type)
        {
            // Cas d'une touche enfoncée

            case SDL_KEYDOWN:
                m_touches[m_evenements.key.keysym.scancode] = true;
            break;


            // Cas d'une touche relâchée

            case SDL_KEYUP:
                m_touches[m_evenements.key.keysym.scancode] = false;
            break;


            // Cas de pression sur un bouton de la souris

            case SDL_MOUSEBUTTONDOWN:

                m_boutonsSouris[m_evenements.button.button] = true;

            break;


            // Cas du relâchement d'un bouton de la souris

            case SDL_MOUSEBUTTONUP:

                m_boutonsSouris[m_evenements.button.button] = false;

            break;


            // Cas d'un mouvement de souris

            case SDL_MOUSEMOTION:

                m_x = m_evenements.motion.x;
                m_y = m_evenements.motion.y;

                m_xRel = m_evenements.motion.xrel;
                m_yRel = m_evenements.motion.yrel;

            break;


            // Cas de la fermeture de la fenêtre

            case SDL_WINDOWEVENT:

                if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
                    m_terminer = true;

            break;


            default:
            break;
        }
    }
}</code></pre><h3 id="r-probleme-des-coordonnees-relatives" data-claire-element-id="962419">Problème des coordonnées relatives</h3><p id="r-962409" data-claire-element-id="962409">Cette méthode est presque complète, il reste juste un petit point à régler qui concerne les coordonnées relatives. Ces coordonnées représentent la différence entre la position actuelle et l'ancienne position, elles seront très utiles dans le chapitre sur la caméra.</p><p id="r-962410" data-claire-element-id="962410">Le problème avec ces coordonnées c'est que : s'il n'y a aucun évènement alors elles ne sont pas mises à jour, elles conservent donc leurs anciennes valeurs. Ce qui veut dire que le programme considère que la souris continue de bouger, même si elle est inactive.</p><p id="r-962411" data-claire-element-id="962411">Pour régler ce problème, on va ré-initialiser les coordonnées avec la valeur <strong>0</strong> au début de la méthode. Ne vous inquiétez pas, si les coordonnées doivent être mises à jour avec de vraies valeurs elles le seront dans le <strong>switch</strong>.</p><p id="r-962412" data-claire-element-id="962412">Grâce à cette astuce, nous n'aurons aucun problème de mouvement fictif. On rajoute donc ces deux lignes de code au début de la méthode :</p><pre id="r-962413" data-claire-element-id="962413"><code data-claire-semantic="cpp">// Pour éviter des mouvements fictifs de la souris, on réinitialise les coordonnées relatives

m_xRel = 0;
m_yRel = 0;</code></pre><aside id="r-962415" data-claire-element-id="962415" data-claire-semantic="warning"><p id="r-962414" data-claire-element-id="962414">Attention, il faut mettre ces deux lignes de code avant la boucle <strong>while</strong>. Si vous les mettez à l'intérieur, les coordonnées ne seront ré-initialisées que lorsqu'il y aura un évènement. C'est justement ce qu'on cherche à éviter. ;)</p></aside><p id="r-962416" data-claire-element-id="962416">Notre méthode donne donc au final :</p><pre id="r-962417" data-claire-element-id="962417"><code data-claire-semantic="cpp">void Input::updateEvenements()
{
    // Pour éviter des mouvements fictifs de la souris, on réinitialise les coordonnées relatives

    m_xRel = 0;
    m_yRel = 0;


    // Boucle d'évènements

    while(SDL_PollEvent(&amp;m_evenements))
    {
        // Switch sur le type d'évènement

        switch(m_evenements.type)
        {
            // Cas d'une touche enfoncée

            case SDL_KEYDOWN:
                m_touches[m_evenements.key.keysym.scancode] = true;
            break;


            // Cas d'une touche relâchée

            case SDL_KEYUP:
                m_touches[m_evenements.key.keysym.scancode] = false;
            break;


            // Cas de pression sur un bouton de la souris

            case SDL_MOUSEBUTTONDOWN:

                m_boutonsSouris[m_evenements.button.button] = true;

            break;


            // Cas du relâchement d'un bouton de la souris

            case SDL_MOUSEBUTTONUP:

                m_boutonsSouris[m_evenements.button.button] = false;

            break;


            // Cas d'un mouvement de souris

            case SDL_MOUSEMOTION:

                m_x = m_evenements.motion.x;
                m_y = m_evenements.motion.y;

                m_xRel = m_evenements.motion.xrel;
                m_yRel = m_evenements.motion.yrel;

            break;


            // Cas de la fermeture de la fenêtre

            case SDL_WINDOWEVENT:

                if(m_evenements.window.event == SDL_WINDOWEVENT_CLOSE)
                    m_terminer = true;

            break;


            default:
            break;
        }
    }
}</code></pre><p id="r-962418" data-claire-element-id="962418">Voilà ! Maintenant nous sommes capables de mettre à jour tous nos évènements, peu importe leur nombre ils seront tous gérés simultanément par la classe <strong><em>Input</em></strong>. :D</p><h3 id="r-la-methode-terminer" data-claire-element-id="962426">La méthode terminer()</h3><p id="r-962420" data-claire-element-id="962420">Il ne reste plus qu'une chose à ajouter dans la classe : une méthode qui permet de dire si oui ou non l'utilisateur veut quitter le programme. Jusqu'à maintenant, on utilisait un booléen <strong>terminer</strong> pour fermer la fenêtre, mais maintenant ce booléen se trouve dans la classe <em><strong>Input</strong></em>.</p><p id="r-962421" data-claire-element-id="962421">Or, avec la règle de l'encapsulation on ne peut pas directement vérifier cet attribut. Il nous faut donc coder un <em>accesseur</em> pour récupérer la valeur du booléen.</p><p id="r-962422" data-claire-element-id="962422">Le prototype est terriblement simple. :p</p><pre id="r-962423" data-claire-element-id="962423"><code data-claire-semantic="cpp">bool terminer() const;</code></pre><p id="r-962424" data-claire-element-id="962424">Son implémentation l'est tout autant :</p><pre id="r-962425" data-claire-element-id="962425"><code data-claire-semantic="cpp">bool Input::terminer() const
{
    return m_terminer;
}</code></pre><h3 id="r-modification-de-la-classe-sceneopengl" data-claire-element-id="962438">Modification de la classe SceneOpenGL</h3><p id="r-962427" data-claire-element-id="962427">On passe maintenant à l'utilisation de la classe <em><strong>Input</strong></em> dans notre scène 3D. Pour cela, on va remplacer l'ancien code de gestion des évènements par nos nouvelles méthodes.</p><p id="r-962428" data-claire-element-id="962428">On commence donc par déclarer un objet de type <strong><em>Input</em></strong> dans la classe <em><strong>SceneOpenGL</strong></em> qui viendra remplacer l'ancien attribut <strong>m_evenements</strong> :</p><pre id="r-962429" data-claire-element-id="962429"><code data-claire-semantic="cpp">#include &quot;Input.h&quot;

class SceneOpenGL
{
    public:

    /* *** Méthodes *** */


    private:

    /* *** Attributs *** */

    // Objet Input pour la gestion des évènements

    Input m_input;
}</code></pre><p id="r-962430" data-claire-element-id="962430">On n'oublie pas de l'initialiser dans le <em>constructeur</em> :</p><pre id="r-962431" data-claire-element-id="962431"><code data-claire-semantic="cpp">SceneOpenGL::SceneOpenGL(std::string titreFenetre, int largeurFenetre, int hauteurFenetre) : m_titreFenetre(titreFenetre), m_largeurFenetre(largeurFenetre),
                                                                                             m_hauteurFenetre(hauteurFenetre), m_fenetre(0), m_contexteOpenGL(0), m_input()</code></pre><p id="r-962432" data-claire-element-id="962432">Dans la boucle principale, on ne vérifie donc plus le booléen <strong>terminer</strong> mais la valeur retournée par la méthode <em><strong>terminer</strong></em>() :</p><pre id="r-962433" data-claire-element-id="962433"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    /* ***** RENDU ***** */
}</code></pre><p id="r-962434" data-claire-element-id="962434">Enfin, on supprime notre ancien code de gestion d'évènements que l'on remplace par la méthode <strong>updateEvenements</strong>() de la classe <em><strong>Input</strong></em> :</p><pre id="r-962435" data-claire-element-id="962435"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    // Gestion des évènements

    m_input.updateEvenements();


    /* *** Rendu *** */
}</code></pre><p id="r-962436" data-claire-element-id="962436">Voilà pour la classe <em><strong>Input</strong></em> ! Grâce à elle, tous nos évènements seront mis à jour automatiquement. :)</p><p id="r-962437" data-claire-element-id="962437">Maintenant que l'on a fait cela, on va pouvoir passer à l'implémentation de plusieurs méthodes &quot;<em>indispensables</em>&quot; qui vont nous permettre de connaitre l'état du clavier, de la souris, ... Nous devons passer par ces méthodes pour respecter la règle de l'encapsulation, sans quoi nous serions obligés d’accéder directement aux attributs pour avoir nos valeurs.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
<span class="arrow"></span>
<span class="next">Différences entre la SDL 1.2 et 2.0</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
<span class="next">Les méthodes indispensables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesmthodesindispensables"></a><h2>Les méthodes indispensables</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
<span class="arrow"></span>
<span class="next">La classe Input</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">
<span class="next">Les textures</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-methodes-37" data-claire-element-id="962515">Méthodes</h2><p id="r-962440" data-claire-element-id="962440">Cette dernière partie sera consacrée à une série de méthodes qui seront utilisées tout au long du tuto. Je vais vous donner une petite liste des fonctionnalités que l'on va implémenter. Il nous faudra une méthode pour :</p><ul id="r-962455" data-claire-element-id="962455"><li id="r-962442" data-claire-element-id="962442"><p id="r-962441" data-claire-element-id="962441">Savoir si une touche est enfoncée</p></li><li id="r-962444" data-claire-element-id="962444"><p id="r-962443" data-claire-element-id="962443">Savoir si un bouton de la souris est enfoncé</p></li><li id="r-962446" data-claire-element-id="962446"><p id="r-962445" data-claire-element-id="962445">Savoir si le pointeur de la souris a bougé</p></li><li id="r-962448" data-claire-element-id="962448"><p id="r-962447" data-claire-element-id="962447">Récupérer les coordonnées (x, y) du pointeur</p></li><li id="r-962450" data-claire-element-id="962450"><p id="r-962449" data-claire-element-id="962449">Récupérer les coordonnées relatives (x, y) du pointeur</p></li><li id="r-962452" data-claire-element-id="962452"><p id="r-962451" data-claire-element-id="962451">Cacher le pointeur</p></li><li id="r-962454" data-claire-element-id="962454"><p id="r-962453" data-claire-element-id="962453">Capturer le pointeur dans la fenêtre</p></li></ul><div id="r-962457" data-claire-element-id="962457" data-claire-semantic="question"><p id="r-962456" data-claire-element-id="962456">Houla on va devoir coder tout ça ? o_O</p></div><p id="r-962458" data-claire-element-id="962458">Et bien oui. Mais sachez pour vous rassurer que la plus grosse méthode de cette liste ne fera que 4 lignes. :p</p><p id="r-962459" data-claire-element-id="962459">Ces méthodes ne se contenteront que de faire une simple action (renvoyer un booléen par exemple) avec parfois des bloc <em><strong>if else</strong></em>. Rien de compliqué ne vous inquiétez pas.</p><h3 id="r-la-methode-gettouche" data-claire-element-id="962473">La méthode getTouche()</h3><p id="r-962460" data-claire-element-id="962460">On commence par la méthode la plus importante : celle qui permet de savoir si une touche a été enfoncée (ou non). En gros, on va coder un getter sur le tableau <strong>m_touches[]</strong>. :p Elle prendra en paramètre une variable de type <em><strong>SDL_Scancode</strong></em> correspondant à la touche demandée :</p><pre id="r-962461" data-claire-element-id="962461"><code data-claire-semantic="cpp">bool getTouche(const SDL_Scancode touche) const;</code></pre><p id="r-962462" data-claire-element-id="962462">Cette méthode renverra <strong>true</strong> si la touche est pressée ou <strong>false</strong> si elle ne l'est pas. N'oubliez pas de la déclarer en tant que méthode constante, vu que l'on ne modifie aucun attribut :</p><pre id="r-962463" data-claire-element-id="962463"><code data-claire-semantic="cpp">bool Input::getTouche(const SDL_Scancode touche) const
{
    return m_touches[touche];
}</code></pre><p id="r-962464" data-claire-element-id="962464">Fini. :)</p><p id="r-962465" data-claire-element-id="962465"><em><strong>Bonus</strong></em> : On va utiliser cette nouvelle méthode dès maintenant. Désormais, je veux que chacune de vos fenêtres SDL de chaque projet que vous ferez puisse se fermer en appuyant sur la touche <em><strong>ECHAP</strong></em>.</p><p id="r-962466" data-claire-element-id="962466">Comment feriez-vous ça avec le getter que l'on vient de coder ? Je vous laisse réfléchir un peu. :p</p><p id="r-962467" data-claire-element-id="962467">Vous avez trouvé ?</p><p id="r-962468" data-claire-element-id="962468"></p><pre id="r-962469" data-claire-element-id="962469"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    // Gestion des évènements

    m_input.updateEvenements();

    if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
       break;


    /* *** Rendu *** */
}</code></pre><p id="r-962470" data-claire-element-id="962470">Il suffit simplement d'appeler le getter <strong>getTouche</strong>() avec le scancode <em><strong>SDL_SCANCODE_ESCAPE</strong></em>. Si le getter retourne <strong>true</strong>, on casse la boucle avec le mot-clef <strong>break</strong>.</p><p id="r-962471" data-claire-element-id="962471"><em><strong>Bonus 2</strong></em> : Pour savoir si deux touches sont enfoncées simultanément, il suffira d'utiliser un bloc <strong>if</strong> avec les deux touches demandées :</p><pre id="r-962472" data-claire-element-id="962472"><code data-claire-semantic="cpp">// Est-ce que les touches Z et D sont pressées ?

if(m_input.getTouche(SDL_SCANCODE_Z) &amp;&amp; m_input.getTouche(SDL_SCANCODE_D))
{
    ...
}</code></pre><h3 id="r-la-methode-getboutonsouris" data-claire-element-id="962478">La méthode getBoutonSouris()</h3><p id="r-962474" data-claire-element-id="962474">La méthode, ou plutôt le getter, <strong>getBoutonSouris</strong>() fera la même chose que <strong>getTouche</strong>(). C'est-à-dire qu'elle permettra de savoir si un bouton spécifié est enfoncé ou pas. La seule différence avec la méthode précédente c'est que cette fois-ci, on lui donnera en paramètre non pas un <em><strong>SDL_Scancode</strong></em> mais une variable de type <em><strong>Uint8</strong></em> correspondant au bouton demandé (En réalité, ce sera une constante comme avec les <em><strong>scancodes</strong></em>).</p><pre id="r-962475" data-claire-element-id="962475"><code data-claire-semantic="cpp">bool getBoutonSouris(const Uint8 bouton) const;</code></pre><p id="r-962476" data-claire-element-id="962476">Elle renverra l'état du bouton demandé dans le tableau <strong>m_boutonsSouris[]</strong> :</p><pre id="r-962477" data-claire-element-id="962477"><code data-claire-semantic="cpp">bool Input::getBoutonSouris(const Uint8 bouton) const
{
    return m_boutonsSouris[bouton];
}</code></pre><h3 id="r-la-methode-mouvementsouris" data-claire-element-id="962483">La méthode mouvementSouris()</h3><p id="r-962479" data-claire-element-id="962479">La méthode suivante nous permettra de savoir si le pointeur de la souris a bougé. Grâce à elle, nous pourrons déclencher une action dès que la souris bougera. On appellera cette méthode : <strong>mouvementSouris</strong>(), elle renverra un <em><strong>booléen</strong></em>.</p><pre id="r-962480" data-claire-element-id="962480"><code data-claire-semantic="cpp">bool mouvementSouris() const;</code></pre><p id="r-962481" data-claire-element-id="962481">Pour détecter un mouvement de souris il suffit de comparer la position relative du pointeur grâce aux attributs <strong>m_xRel</strong> et <strong>m_yRel</strong>. Si ces deux attributs sont égals à 0, alors le pointeur n'a pas bougé. Si en revanche ils ont une valeur non nulle, alors c'est que le pointeur a bougé.</p><pre id="r-962482" data-claire-element-id="962482"><code data-claire-semantic="cpp">bool Input::mouvementSouris() const
{
    if(m_xRel == 0 &amp;&amp; m_yRel == 0)
        return false;

    else
        return true;
}</code></pre><h3 id="r-les-getters-du-pointeur" data-claire-element-id="962489">Les Getters du pointeur</h3><p id="r-962484" data-claire-element-id="962484">Les méthodes suivantes sont des getters, elles renvoient chacune un attribut qui concerne la position du pointeur. Vous savez déjà comment fonctionne un getter, je vous épargne donc les explications. :)</p><p id="r-962485" data-claire-element-id="962485">Voici leur constructeur :</p><pre id="r-962486" data-claire-element-id="962486"><code data-claire-semantic="cpp">// Getters

int getX() const;
int getY() const;

int getXRel() const;
int getYRel() const;</code></pre><p id="r-962487" data-claire-element-id="962487">Implémentation :</p><pre id="r-962488" data-claire-element-id="962488"><code data-claire-semantic="cpp">// Getters concernant la position du curseur

int Input::getX() const
{
    return m_x;
}

int Input::getY() const
{
    return m_y;
}

int Input::getXRel() const
{
    return m_xRel;
}

int Input::getYRel() const
{
    return m_yRel;
}</code></pre><h3 id="r-la-methode-afficherpointeur" data-claire-element-id="962503">La méthode afficherPointeur()</h3><p id="r-962490" data-claire-element-id="962490">Les méthodes suivantes peuvent vous paraitre inutiles pour le moment, mais dès que nous utiliserons une caméra mobile pour comprendrez vite leur utilité.</p><p id="r-962491" data-claire-element-id="962491">La méthode <strong>afficherPointeur</strong>() va permettre d'afficher ou de cacher le pointeur à l'écran. Elle prendra en paramètre un <strong>booléen</strong> qui :</p><ul id="r-962496" data-claire-element-id="962496"><li id="r-962493" data-claire-element-id="962493"><p id="r-962492" data-claire-element-id="962492">S'il est à <strong>true</strong> : le pointeur est caché</p></li><li id="r-962495" data-claire-element-id="962495"><p id="r-962494" data-claire-element-id="962494">S'il est à <strong>false</strong> : le pointeur est affiché</p></li></ul><pre id="r-962497" data-claire-element-id="962497"><code data-claire-semantic="cpp">void afficherPointeur(bool reponse) const;</code></pre><p id="r-962498" data-claire-element-id="962498">Cette méthode va faire appel à une <em>fonction SDL</em> pour afficher ou cacher le pointeur :</p><pre id="r-962499" data-claire-element-id="962499"><code data-claire-semantic="cpp">int SDL_ShowCursor(int toggle);</code></pre><p id="r-962500" data-claire-element-id="962500">Cette fonction prend en paramètre une constante qui peut être égale soit à <em><strong>SDL_ENABLE</strong></em> soit à <em><strong>SDL_DISABLE</strong></em>, ce paramètre se comporte un peu comme un booléen. On ne s'occupera pas de la valeur retournée par la fonction.</p><p id="r-962501" data-claire-element-id="962501">Voici l'implémentation de la méthode :</p><pre id="r-962502" data-claire-element-id="962502"><code data-claire-semantic="cpp">void Input::afficherPointeur(bool reponse) const
{
    if(reponse)
        SDL_ShowCursor(SDL_ENABLE);

    else
        SDL_ShowCursor(SDL_DISABLE);
}</code></pre><h3 id="r-la-methode-capturerpointeur" data-claire-element-id="962514">La méthode capturerPointeur()</h3><p id="r-962504" data-claire-element-id="962504">La dernière méthode va permettre d'utiliser le <em>Mode Relatif de la Souris</em>. Ce mode permet de piéger le pointeur dans la fenêtre, il ne pourra pas en sortir. C'est utile voir obligatoire dans un jeu-vidéo par exemple. On appellera cette méthode : <strong>capturerPointeur</strong>().</p><p id="r-962505" data-claire-element-id="962505">Faites attention à cette méthode, si vous l'appelez dans votre code vous devrez prévoir quelque chose pour fermer votre programme. Utilisez un <strong>getTouche</strong>() par exemple. Si vous ne faites pas ça, vous ne pourrez plus fermer votre fenêtre. Vous devrez alors utiliser les combinaisons <em><strong>CTRL + MAJ + SUPPR</strong></em> ou <em><strong>WINDOWS + TAB</strong></em> (si vous êtes sous Windows) pour pouvoir ré-utiliser la souris.</p><p id="r-962506" data-claire-element-id="962506">Le prototype de la méthode est le suivant :</p><pre id="r-962507" data-claire-element-id="962507"><code data-claire-semantic="cpp">void capturerPointeur(bool reponse) const;</code></pre><p id="r-962508" data-claire-element-id="962508">Elle se comportera exactement de la même manière que la méthode précédente. Elle utilisera la fonction <strong>SDL_SetRelativeMousseMode</strong>() de la <em>SDL</em> pour activer le mode relatif de la souris :</p><pre id="r-962509" data-claire-element-id="962509"><code data-claire-semantic="cpp">int SDL_SetRelativeMouseMode(SDL_bool enabled);</code></pre><p id="r-962510" data-claire-element-id="962510">Cette fonction prendra en paramètre un <em><strong>SDL_bool</strong></em>. Sa valeur peut être soit <strong>SDL_TRUE</strong> soit <strong>SDL_FALSE</strong>. Voici son implémentation :</p><pre id="r-962511" data-claire-element-id="962511"><code data-claire-semantic="cpp">void Input::capturerPointeur(bool reponse) const
{
    if(reponse)
        SDL_SetRelativeMouseMode(SDL_TRUE);

    else
        SDL_SetRelativeMouseMode(SDL_FALSE);
}</code></pre><p id="r-962512" data-claire-element-id="962512">Voilà pour l'implémentation des méthodes &quot;<em>indispensables</em>&quot;. :)</p><p id="r-962513" data-claire-element-id="962513"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/ukbqy0kr4vabkwq/Evenements avec SDL 2.0.zip?token_hash=AAFoz823vzQ527H-obQCD3kDKxmemQOnPOVe_1koy9VZpg&amp;dl=1">Code Source C++ du Chapitre 9</a></strong></p><h2 id="r-exercices-39" data-claire-element-id="962552">Exercices</h2><h3 id="r-enonces-3" data-claire-element-id="962523">Énoncés</h3><p id="r-962516" data-claire-element-id="962516">Je vais vous donner des exercices assez simples pour vous habituez à utiliser votre nouvelle classe. Ceux-ci seront axés sur la pseudo-animation du cube (celle qui permettait de le faire tourner). Vous n'aurez besoin d'utiliser que les méthodes qui sont déjà codées, vous n'aurez donc pas besoin d'en rajouter.</p><p id="r-962517" data-claire-element-id="962517">Il est préférable que vous incluiez le code relatif aux évènements avant la fonction <strong>glClear</strong>(). En effet, vous verrez dans le futur que nous aurons parfois de faire plusieurs affichages de la même scène. Pour économiser du temps de calcul les inputs doivent se gérer <em><strong>avant</strong></em> ces affichages. La seule chose qui peut se trouver <em><strong>après</strong></em> la fonction c'est la méthode <strong>rotate</strong>() car elle ne fait pas partie des évènements mais des matrices (et donc de l'affichage).</p><p id="r-962518" data-claire-element-id="962518">Autant prendre les bonnes habitudes dès maintenant, surtout que ça ne mange pas de pain. :)</p><p id="r-962519" data-claire-element-id="962519"><em><strong>Exercice 1</strong></em> : L'animation initiale du cube permettait de le faire pivoter selon un angle et par rapport à l'axe <strong>Y</strong>. Votre objectif est de dé-automatiser cette rotation pour qu'elle réponde aux touches du clavier <strong>Flèche Gauche</strong> et <strong>Droite</strong> (<strong>SDL_SCANCODE_LEFT</strong> et <strong>SDL_SCANCODE_RIGHT</strong>). Vous pouvez vous aider du code que l'on avait utilisé dans le chapitre 7 :</p><pre id="r-962520" data-claire-element-id="962520"><code data-claire-semantic="cpp">// Incrémentation de l'angle

angle += 4.0;

if(angle &gt;= 360.0)
    angle -= 360.0;


// Sauvegarde de la matrice

mat4 sauvegardeModelview = modelview;


    // Rotation du repère

    modelview = rotate(modelview, angle, vec3(0, 1, 0));


    // Affichage du cube

    cube.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><p id="r-962521" data-claire-element-id="962521"><em><strong>Exercice 2</strong></em> : Même exercice que précédemment sauf que l'axe concerné n'est plus <strong>Y</strong> mais <strong>X</strong> et les touches sont <strong>Flèche Haut</strong> et <strong>Bas</strong> (<strong>SDL_SCANCODE_UP</strong> et <strong>SDL_SCANCODE_DOWN</strong>).</p><p id="r-962522" data-claire-element-id="962522"><em><strong>Exercice 3</strong></em> : Rassemblez les deux animations précédentes pour le même cube. C'est-à-dire que vous devez pouvoir appuyer sur les 4 touches directionnelles pour le faire pivoter selon l'axe <strong>X</strong><em>et</em><strong>Y</strong> (Petit indice : vous aurez besoin de deux angles).</p><h3 id="r-solution-46" data-claire-element-id="962551">Solution</h3><p id="r-962524" data-claire-element-id="962524"><em><strong>Exercice 1</strong></em> :</p><p id="r-962525" data-claire-element-id="962525">Le but de l'exercice était de &quot;<em>manualiser</em>&quot; la rotation en fonction des touches <strong>Haut</strong> et <strong>Bas</strong>. Pour cela, il fallait simplement appeler la méthode <strong>getTouche</strong>() de l'objet <strong>m_input</strong> deux fois avec les constantes <strong>SDL_SCANCODE_LEFT</strong> et <strong>SDL_SCANCODE_RIGHT</strong> :</p><pre id="r-962526" data-claire-element-id="962526"><code data-claire-semantic="cpp">// Gestion des évènements

....


// Rotation du cube vers la gauche

if(m_input.getTouche(SDL_SCANCODE_LEFT))
{

}


// Rotation du cube vers la droite

if(m_input.getTouche(SDL_SCANCODE_RIGHT))
{

}


// Nettoyage de l'écran

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

....</code></pre><aside id="r-962528" data-claire-element-id="962528" data-claire-semantic="information"><p id="r-962527" data-claire-element-id="962527">Faites attention à bien placer ce code <strong>avant</strong> la fonction <strong>glClear</strong>().</p></aside><p id="r-962529" data-claire-element-id="962529">Une fois la vérification des touches pressées faite, il ne manquait plus qu'à copier le code de rotation. Bien entendu, il fallait additionner l'angle dans un cas et le soustraire dans l'autre :</p><pre id="r-962530" data-claire-element-id="962530"><code data-claire-semantic="cpp">// Gestion des évènements

....


// Rotation du cube vers la gauche

if(m_input.getTouche(SDL_SCANCODE_LEFT))
{
    // Modification de l'angle

    angle -= 4.0;


    // Limitation

    if(angle &gt;= 360.0)
        angle -= 360.0;
}


// Rotation du cube vers la droite

if(m_input.getTouche(SDL_SCANCODE_RIGHT))
{
    // Modification de l'angle

    angle += 4.0;


    // Limitation

    if(angle &gt;= 360.0)
        angle -= 360.0;
}


// Nettoyage de l'écran

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

....</code></pre><p id="r-962531" data-claire-element-id="962531">Enfin, il ne manquait plus qu'à appeler la méthode <strong>rotate</strong>() avec l'angle de rotation en paramètre et afficher le cube. Le tout encadré par la sauvegarde et la restauration de la matrice <strong>modelview</strong>. ;)</p><pre id="r-962532" data-claire-element-id="962532"><code data-claire-semantic="cpp">// Sauvegarde de la matrice modelview

mat4 sauvegardeModelview = modelview;


    // Rotation du repère

    modelview = rotate(modelview, angle, vec3(0, 1, 0));


    // Affichage du premier cube

    cube.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><p id="r-962533" data-claire-element-id="962533"><em><strong>Exercice 2</strong></em> :</p><p id="r-962534" data-claire-element-id="962534">Cet exercice reprend le même principe que le précédent sauf qu'il fallait, d'une part, modifier les constantes utilisées :</p><pre id="r-962535" data-claire-element-id="962535"><code data-claire-semantic="cpp">// Rotation du cube vers le bas

if(m_input.getTouche(SDL_SCANCODE_DOWN))
{
    // Modification de l'angle

    angle -= 4.0;


    // Limitation

    if(angle &gt;= 360.0)
        angle -= 360.0;
}


// Rotation du cube vers le haut

if(m_input.getTouche(SDL_SCANCODE_UP))
{
    // Modification de l'angle

    angle += 4.0;


    // Limitation

    if(angle &gt;= 360.0)
        angle -= 360.0;
}</code></pre><p id="r-962536" data-claire-element-id="962536">Et d'autre part, il fallait également modifier l'axe de rotation de la méthode <strong>rotate</strong>() :</p><pre id="r-962537" data-claire-element-id="962537"><code data-claire-semantic="cpp">// Rotation du repère

modelview = rotate(modelview, angle, vec3(0, 1, 0));</code></pre><p id="r-962538" data-claire-element-id="962538"><em><strong>Exercice 3</strong></em> :</p><p id="r-962539" data-claire-element-id="962539">Le dernier exercice était un poil plus dur que les deux autres, il fallait utiliser deux angles et gérer 4 touches du clavier.</p><p id="r-962540" data-claire-element-id="962540">Vous pouviez donner n'importe quel nom aux angles :</p><pre id="r-962541" data-claire-element-id="962541"><code data-claire-semantic="cpp">// Angles de la rotation

float angleX(0.0);
float angleY(0.0);</code></pre><p id="r-962542" data-claire-element-id="962542">La gestion des 4 touches n'était pas compliquée du moment que vous utilisiez le bon angle avec le bon axe de rotation :</p><pre id="r-962543" data-claire-element-id="962543"><code data-claire-semantic="cpp">// Rotation du cube vers la gauche

if(m_input.getTouche(SDL_SCANCODE_LEFT))
{
    angleY -= 5;

    if(angleY &gt; 360)
        angleY -= 360;
}


// Rotation du cube vers la droite

if(m_input.getTouche(SDL_SCANCODE_RIGHT))
{
    angleY += 5;

    if(angleY &lt; -360)
        angleY += 360;
}</code></pre><pre id="r-962544" data-claire-element-id="962544"><code data-claire-semantic="cpp">// Rotation du cube vers le haut

if(m_input.getTouche(SDL_SCANCODE_UP))
{
    angleX -= 5;

    if(angleX &gt; 360)
        angleX -= 360;
}


// Rotation du cube vers le bas

if(m_input.getTouche(SDL_SCANCODE_DOWN))
{
    angleX += 5;

    if(angleX &lt; -360)
        angleX += 360;
}</code></pre><p id="r-962545" data-claire-element-id="962545">J'ai divisé le code en deux pour le rendre plus lisible. Il fallait évidemment tout coder au même endroit. ;)</p><p id="r-962546" data-claire-element-id="962546">Enfin, pour gérer les deux rotations, il fallait simplement appeler la méthode <strong>rotate</strong>() deux fois. Un appel prenait en compte l'angle <strong>angleX</strong> et l'autre l'angle <strong>angleY</strong> :</p><pre id="r-962547" data-claire-element-id="962547"><code data-claire-semantic="cpp">// Sauvegarde de la matrice modelview

mat4 sauvegardeModelview = modelview;


    // Rotation du repère

    modelview = rotate(modelview, angleY, vec3(0, 1, 0));
    modelview = rotate(modelview, angleX, vec3(1, 0, 0));


    // Affichage du premier cube

    cube.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><p id="r-962548" data-claire-element-id="962548">Encore une fois, n'oubliez pas d'utiliser la sauvegarde/restauration lorsque vous faites une transformation. :)</p><p id="r-962549" data-claire-element-id="962549">Notre classe Input est maintenant complète et prête à l'emploi. Avec elle, nous pourrons gérer tous nos évènements simplement. Nous serons capable de gérer la pression de plusieurs touches, des mouvements de la souris, etc. Et tout ça de manière simultanée.<br/> Pour utiliser les évènements, il suffira juste de passer un objet de type <strong><em>Input</em></strong> aux modèles que l'on veut afficher.<br/> De plus, l'avantage d'avoir une classe à part entière c'est que l'on pourra ajouter de nouvelles méthodes au fur et à mesure du tutoriel. Nous n'aurons pas besoin de revenir en arrière pour modifier le code, il suffira d'ajouter ce qu'il faut dans la classe <em><strong>Input</strong></em>.</p><p id="r-962550" data-claire-element-id="962550">Après ce chapitre repos, je vous propose de passer à un chapitre <em>hyper méga</em> important qui concerne les <em><strong>Textures</strong></em> avec OpenGL ! :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
<span class="arrow"></span>
<span class="next">La classe Input</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">
<span class="next">Les textures</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lestextures"></a><h2>Les textures</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
<span class="arrow"></span>
<span class="next">Les méthodes indispensables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
<span class="next">Introduction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-962555" data-claire-element-id="962555">Après le chapitre quelque peu compliqué sur les piles de matrices, nous allons passer aujourd'hui à un chapitre beaucoup plus concret (et plus intéressant :p ) qui concerne le <em><strong>Texturing</strong></em> avec <em>OpenGL</em>. Avec ceci, nous pourrons rendre notre scène 3D plus réaliste. Nous verrons comment charger des textures stockées sur votre disque dur (ou SSD) et comment les appliquer à une surface 3D.</p>
</div><a name="Introduction"></a><h2>Introduction</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">
<span class="arrow"></span>
<span class="next">Les textures</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
<span class="next">Chargement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-introduction-80" data-claire-element-id="962603">Introduction</h2><p id="r-962556" data-claire-element-id="962556">Avant de commencer ce chapitre très intéressant, on va définir ensemble un mot que vous avez déjà probablement entendu quelque part : le mot <em><strong>Texture</strong></em>.</p><p id="r-962557" data-claire-element-id="962557">Une <em>texture</em> est simplement une sorte de papier peint que l'on va &quot;coller&quot; sur les modèles (2D ou 3D). Dans un jeu vidéo, toutes les surfaces que vous voyez (sols, herbe, murs, personnages, ...) sont constituées de simples images collées sur des formes géométriques. Pour un mur par exemple, il suffit de créer une surface carrée puis de coller une image représentant des briques.</p><figure id="r-962559" data-claire-element-id="962560"><img id="r-962558" data-claire-element-id="962558" src="medias/uploads.siteduzero.com_files_394001_395000_394114.jpg" alt="Image utilisateur"/></figure><p id="r-962561" data-claire-element-id="962561">L'objectif de ce chapitre sera d'apprendre à créer une texture OpenGL de A à Z. Pour ceux qui auraient suivi le cours de M@téo sur la SDL, vous devriez déjà avoir une petite idée sur la façon de charger les images. Vous vous apercevrez cependant que le chargement de texture est assez différent avec OpenGL. Mais il permet de faire des choses beaucoup plus avancées.</p><p id="r-962562" data-claire-element-id="962562">L'une des premières difficultés va concerner la taille des textures à afficher. En effet, OpenGL ne sait gérer que les textures dont les dimensions sont des puissances de 2 (64 pixels, 128, 256, 512, ...).</p><p id="r-962563" data-claire-element-id="962563">Alors bon, ce n'est pas une obligation car OpenGL redimensionne de toute façon les images par lui-même mais si vous ne voulez pas vous retrouver avec une texture déformée, il vaut mieux prendre l'habitude des dimensions en puissance de 2. Le mieux est encore de modifier la taille de vos images avec des logiciels spécialisés. ;)</p><p id="r-962564" data-claire-element-id="962564">Avant d'aller plus loin, je vais vous demander de télécharger la librairie <em>SDL_image</em> (ou plutôt <strong>SDL2_image</strong>) qui nous permettra de réaliser la première étape dans la création de nos textures. Elle va nous faire gagner du temps en chargeant tous les bits d'une image en mémoire. Remarquez une fois de plus que toutes les librairies que nous utilisons sont portables. :p</p><p id="r-962565" data-claire-element-id="962565"><strong>Télécharger</strong> : <a href="https://dl.dropboxusercontent.com/s/un1bbfsn6hpivby/SDL_image - Windows MinGW.zip?token_hash=AAFJSKq9yUwst7ruCWOfcjCw5NxyaiCUqRz6taOS-KqSrg&amp;dl=1">SDL_image - MinGW pour Windows</a><br/><strong>Télécharger</strong> : <a href="https://dl.dropboxusercontent.com/s/4r2aj0zl7eyrlsr/Code Source SDL_image + Librairies.zip?token_hash=AAEumssVqNxSZlEurcG89TmhZJrt7hpYCspkvm_ex_EVAQ&amp;dl=1">Code Source SDL_image + Librairies - Visual C++ et Linux</a></p><p id="r-962566" data-claire-element-id="962566"><strong>Pour MinGW sous Windows</strong> : fusionnez les dossiers <strong>bin</strong>, <strong>dll</strong>, <strong>include</strong> et <strong>lib</strong> avec ceux du dossier <strong>SDL-2.0</strong> que vous avez placé au tout début du tutoriel (chez moi : <em><strong>C:\Program Files (x86)\CodeBlocks\MinGW\SDL-2.0</strong></em>). <br/> Pensez à rajouter les nouvelles dll soit dans le dossier de chaque projet, soit dans le dossier <strong>bin</strong> de MinGW selon la méthode que vous avez choisie au début du tuto.</p><p id="r-962567" data-claire-element-id="962567"><strong>Pour Linux</strong> ça va être folklo. :lol: Vu que tout le monde n'a pas forcément la même distribution, il faudra que vous compiliez vous même <strong>SDL_image</strong>. Cependant, cette librairie fait appel à 5 autres librairies et il faudra également toutes les compiler ! <br/> Mais bon vous savez que je ne suis pas sadique (ah bon ?), je vais donc vous donner directement toutes les commandes à taper dans votre terminal.</p><p id="r-962568" data-claire-element-id="962568">Enfin, commencez par télécharger le code source de <strong>SDL_image</strong> et dézippez son contenu dans votre home. Ensuite, exécutez les commandes suivantes mais attention ! Si j'ai divisé les commandes en bloc ce n'est pas pour rien, je vous conseille d'exécuter les blocs un à un pour voir si tout compile normalement. Si vous copiez toute les commandes d'un coup vous risquez de zapper une erreur que vous regretterez plus tard. ;)</p><pre id="r-962569" data-claire-element-id="962569"><code data-claire-semantic="console">cd
cd SDL_image/tiff-4.0.3/
chmod +x configure
./configure
make
sudo make install


cd ../zlib-1.2.7/
chmod +x configure
./configure
make
sudo make install


cd ../libpng-1.5.13/
chmod +x configure
./configure
make
sudo make install


cd ../jpeg-8d/
chmod +x configure
./configure
make
sudo make install


cd ../libwebp-0.2.0/
chmod +x configure
./configure
make
sudo make install


cd ../SDL_image
chmod +x configure
./configure
make
sudo make install</code></pre><aside id="r-962571" data-claire-element-id="962571" data-claire-semantic="error"><p id="r-962570" data-claire-element-id="962570">Malgré le fait que vous compiliez toutes les librairies par vous-même, il semble qu'il y ait un problème avec le chargement des images au format <strong>PNG</strong>. Tous les autres types de fichiers fonctionnent (jpeg, tiff, tga, bmp, ...) sauf celui-la. Je pense que ça vient du fait que la librairie est en plein développement, j'espère que le problème sera réglé rapidement.</p></aside><p id="r-962572" data-claire-element-id="962572">On reprend au niveau des IDE <strong>pour tout le monde</strong>, il va falloir linker la librairie <strong>SDL_image</strong> avec vos projets. Voici un petit tableau avec le link à spécifier en fonction de votre IDE :</p><table id="r-962600" data-claire-element-id="962600"><thead id="r-962578" data-claire-element-id="962578"><tr id="r-962577" data-claire-element-id="962577"><th id="r-962574" data-claire-element-id="962574"><p id="r-962573" data-claire-element-id="962573">OS</p></th><th id="r-962576" data-claire-element-id="962576"><p id="r-962575" data-claire-element-id="962575">Option</p></th></tr></thead><tbody id="r-962599" data-claire-element-id="962599"><tr id="r-962583" data-claire-element-id="962583"><td id="r-962580" data-claire-element-id="962580"><p id="r-962579" data-claire-element-id="962579">Code::Blocks Windows</p></td><td id="r-962582" data-claire-element-id="962582"><p id="r-962581" data-claire-element-id="962581">SDL2_image</p></td></tr><tr id="r-962588" data-claire-element-id="962588"><td id="r-962585" data-claire-element-id="962585"><p id="r-962584" data-claire-element-id="962584">Code::Blocks Linux</p></td><td id="r-962587" data-claire-element-id="962587"><p id="r-962586" data-claire-element-id="962586">SDL2_image</p></td></tr><tr id="r-962593" data-claire-element-id="962593"><td id="r-962590" data-claire-element-id="962590"><p id="r-962589" data-claire-element-id="962589">DevC++</p></td><td id="r-962592" data-claire-element-id="962592"><p id="r-962591" data-claire-element-id="962591">-lSDL2_image</p></td></tr><tr id="r-962598" data-claire-element-id="962598"><td id="r-962595" data-claire-element-id="962595"><p id="r-962594" data-claire-element-id="962594">Visual Studio</p></td><td id="r-962597" data-claire-element-id="962597"><p id="r-962596" data-claire-element-id="962596">SDL2_image.lib</p></td></tr></tbody></table><p id="r-962601" data-claire-element-id="962601">Enfin pour terminer cette introduction, nous allons télécharger un pack de <em>textures</em> que l'on utilisera tout au long de ce tutoriel. Vous y verrez à l'intérieur plusieurs catégories d'images (sols, pierres, bois, ...). Je remercie au passage notre petit <strong>Kayl</strong> qui a fait découvrir ce pack dans son <a href="http://www.siteduzero.com/tutoriel-3-5014-creez-des-programmes-en-3d-avec-opengl.html">tuto</a>. Je reprends le même vu qu'il est assez complet. :p</p><p id="r-962602" data-claire-element-id="962602"><strong>Télécharger : </strong><a href="https://dl.dropboxusercontent.com/s/po7e9c5m55pwo2h/Textures 512 bits.zip?token_hash=AAFdpLncv51lrJEFd0UPaqZivF2gvdnRW1JGa53pBoX2hQ&amp;dl=1">Pack de Textures Haute Résolution</a></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">
<span class="arrow"></span>
<span class="next">Les textures</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
<span class="next">Chargement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Chargement"></a><h2>Chargement</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
<span class="arrow"></span>
<span class="next">Introduction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
<span class="next">Plaquage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-les-objets-opengl-1" data-claire-element-id="962647">Les Objets OpenGL</h2><p id="r-962605" data-claire-element-id="962605">La librairie <em>SDL_image</em> va nous faciliter grandement la tâche dans le chargement de texture. Elle va nous faire gagner beaucoup de temps car elle sait charger une multitude de formats d'image, nous n'aurons donc pas à charger nos images manuellement. Cependant, elle ne peut pas tout faire pour nous. Les images chargées avec <em>SDL_image</em> seront, si on les laisse comme ça, inutilisables avec <em>OpenGL</em>.</p><p id="r-962606" data-claire-element-id="962606">En effet, la librairie permet de charger les textures uniquement pour la SDL et non pour les autres API. Il nous faut donc configurer <em>OpenGL</em> pour qu'il puisse reconnaitre ces nouvelles textures. Dans cette partie nous allons voir pas mal de fonctions spécifiques à la librairie <em>OpenGL</em>, et vous verrez que vous retrouvez certaines d'entre elles tout au long du tutoriel. Je vous dirai celles qui sont importantes à retenir. ;)</p><h3 id="r-les-objets-opengl" data-claire-element-id="962627">Les objets OpenGL</h3><p id="r-962607" data-claire-element-id="962607">Avant d'aller plus loin, j'aimerais que l'on développe un point important de ce chapitre : les <em><strong>objets OpenGL</strong></em>. Les <em>objets OpenGL</em> sont semblables aux objets en C++ (même s'ils sont différents dans le fond), on peut les représenter par le laboratoire que l'on voit dans le chapitre sur les objets de <a href="http://www.siteduzero.com/tutoriel-3-11159-introduction-la-verite-sur-les-strings-enfin-devoilee.html">M@téo</a>. Ce sont donc des sortes de laboratoires dont on ne connait pas le fonctionnement, et d'ailleurs on s'en moque à partir du moment où ils fonctionnent. :p</p><p id="r-962608" data-claire-element-id="962608">Pourquoi je vous parle de ça ? Et bien simplement parce qu'une <em><strong>texture</strong></em> est un <em>objet OpenGL</em>. Vous verrez que l'on va apprendre à initialiser la texture mais vous n'aurez aucune idée de ce qui se passe à l'intérieur de la carte graphique, tout comme le laboratoire. Nous donnerons à la texture des pixels à afficher et <em>OpenGL</em> se chargera du reste. Bon je schématise un peu mais vous avez compris l'idée.</p><div id="r-962610" data-claire-element-id="962610" data-claire-semantic="question"><p id="r-962609" data-claire-element-id="962609">Comment on crée un <em>objet OpenGL</em> ? C'est dur à faire ? :(</p></div><p id="r-962611" data-claire-element-id="962611">Non pas du tout c'est en réalité très simple ! En effet, pour créer ces objets on utilise la plupart du temps la même fonction. Et cette fonction nous renverra toujours la même chose : un <em><strong>ID</strong></em> représentant l'objet créé. Cet ID est une variable de type <strong>unsigned int</strong> et va permettra à OpenGL de savoir sur quel objet il doit travailler.</p><p id="r-962612" data-claire-element-id="962612">En ce qui concerne la configuration de ces objets, nous procéderons ainsi :</p><ul id="r-962623" data-claire-element-id="962623"><li id="r-962614" data-claire-element-id="962614"><p id="r-962613" data-claire-element-id="962613">Chargement d'une image avec la librairie <em><strong>SDL_image</strong></em></p></li><li id="r-962616" data-claire-element-id="962616"><p id="r-962615" data-claire-element-id="962615">Création (ou plutôt de <strong>génération</strong>) de l'ID</p></li><li id="r-962618" data-claire-element-id="962618"><p id="r-962617" data-claire-element-id="962617">Verrouillage de l'ID (nous allons voir ce que c’est dans un instant)</p></li><li id="r-962620" data-claire-element-id="962620"><p id="r-962619" data-claire-element-id="962619">Configuration de l'objet</p></li><li id="r-962622" data-claire-element-id="962622"><p id="r-962621" data-claire-element-id="962621">Déverrouillage de l'ID</p></li></ul><p id="r-962624" data-claire-element-id="962624">Toutes ces parties se gèrent avec les mêmes fonctions pour la plupart des <em>objets OpenGL</em> (que ce soit une texture ou autre). Il n'y a que l'étape de la configuration qui va varier.</p><aside id="r-962626" data-claire-element-id="962626" data-claire-semantic="information"><p id="r-962625" data-claire-element-id="962625">Petite précision : Les shaders sont eux aussi des <em><strong>objets OpenGL</strong></em> (et oui encore eux :p ) mais ils se gèrent différemment des autres. Ce sont les seuls objets où nous aurons un contrôle plus global.</p></aside><h3 id="r-la-classe-texture" data-claire-element-id="962646">La classe Texture</h3><p id="r-962628" data-claire-element-id="962628">On commence la partie programmation par le plus simple : la création d'une <em><strong>classe Texture</strong></em>. Mis à part le constructeur et le destructeur, cette classe ne contiendra que la méthode <strong>charger</strong>() qui s'occupera de charger la texture demandée. Elle retournera un <strong>booléen</strong> pour confirmer ou non le chargement :</p><pre id="r-962629" data-claire-element-id="962629"><code data-claire-semantic="cpp">bool charger();</code></pre><p id="r-962630" data-claire-element-id="962630">La classe contiendra également 2 attributs :</p><ul id="r-962635" data-claire-element-id="962635"><li id="r-962632" data-claire-element-id="962632"><p id="r-962631" data-claire-element-id="962631"><strong>GLuint m_id</strong> : Un <em>unsigned int</em> qui représentera le fameux ID</p></li><li id="r-962634" data-claire-element-id="962634"><p id="r-962633" data-claire-element-id="962633"><strong>string m_fichierImage</strong> : Le chemin vers le fichier contenant l'image</p></li></ul><p id="r-962636" data-claire-element-id="962636">Au niveau du code, ça donne ça :</p><pre id="r-962637" data-claire-element-id="962637"><code data-claire-semantic="cpp">// Attributs

GLuint m_id;
std::string m_fichierImage;</code></pre><p id="r-962638" data-claire-element-id="962638">Le constructeur prendra en paramètre une string qui représentera le chemin vers le <strong>fichier image</strong>. L'<strong>ID</strong> quant à lui sera généré par <em>OpenGL</em> :</p><pre id="r-962639" data-claire-element-id="962639"><code data-claire-semantic="cpp">// Constructeur 

Texture(std::string fichierImage);</code></pre><p id="r-962640" data-claire-element-id="962640">On rajoutera au passage un accesseur pour l'attribut <strong>m_id</strong> et un mutateur pour <strong>m_fichierImage</strong> au cas où devrions spécifier une image après déclaration de l'objet. L'accesseur sera important pour la suite :</p><pre id="r-962641" data-claire-element-id="962641"><code data-claire-semantic="cpp">GLuint getID() const;
void setFichierImage(const std::string &amp;fichierImage);</code></pre><p id="r-962642" data-claire-element-id="962642">Sans oublier les includes de la <em>SDL</em>, de <em>SDL_image</em> et quelques autres voici ce que ça nous donne :</p><pre id="r-962643" data-claire-element-id="962643"><code data-claire-semantic="cpp">#ifndef DEF_TEXTURE
#define DEF_TEXTURE


// Include

#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif

#include &lt;SDL2/SDL.h&gt;
#include &lt;SDL2/SDL_image.h&gt;
#include &lt;iostream&gt;
#include &lt;string&gt;


// Classe Texture

class Texture
{
    public:

    Texture(std::string fichierImage);
    ~Texture();
    bool charger();
    GLuint getID() const;
    void setFichierImage(const std::string &amp;fichierImage);


    private:

    GLuint m_id;
    std::string m_fichierImage;
};

#endif</code></pre><p id="r-962644" data-claire-element-id="962644">Pour l'implémentation de ce début de code vous savez comment faire : :p</p><pre id="r-962645" data-claire-element-id="962645"><code data-claire-semantic="cpp">#include &quot;Texture.h&quot;


// Constructeur

Texture::Texture(std::string fichierImage) : m_id(0), m_fichierImage(fichierImage)
{

}


// Destructeur

Texture::~Texture()
{

}


// Méthodes

bool Texture::charger()
{

}


GLuint Texture::getID() const
{
    return m_id;
}


void Texture::setFichierImage(const std::string &amp;fichierImage)
{
    m_fichierImage = fichierImage;
}</code></pre><h2 id="r-la-methode-charger" data-claire-element-id="962828">La méthode charger</h2><h3 id="r-chargement-de-l-image-dans-une-sdl-surface" data-claire-element-id="962663">Chargement de l'image dans une SDL_Surface</h3><p id="r-962648" data-claire-element-id="962648">Maintenant que l'on a un squelette de classe propre, nous pouvons nous lancer dans la création de texture. La première étape consiste à charger un fichier image en mémoire grâce à la librairie <em>SDL_image</em>. Pour cela rien de plus simple, il existe une et unique fonction pour charger plus d'une dizaine de formats d'image différents ! Que demande le peuple. ^^</p><p id="r-962649" data-claire-element-id="962649">La fonction est la suivante :</p><pre id="r-962650" data-claire-element-id="962650"><code data-claire-semantic="cpp">SDL_Surface *IMG_Load(const char *file)</code></pre><ul id="r-962653" data-claire-element-id="962653"><li id="r-962652" data-claire-element-id="962652"><p id="r-962651" data-claire-element-id="962651"><strong>file</strong> : Chemin du fichier image</p></li></ul><p id="r-962654" data-claire-element-id="962654">La fonction renvoie une <strong>SDL_surface</strong> qui contiendra tous les pixels nécessaires.</p><aside id="r-962656" data-claire-element-id="962656" data-claire-semantic="warning"><p id="r-962655" data-claire-element-id="962655">Pensez bien à linker la librairie <em>SDL_image</em>, vous aurez une erreur de compilation dans le cas contraire.</p></aside><p id="r-962657" data-claire-element-id="962657">Pour le chemin du fichier, nous donnerons l'attribut <strong>m_fichierImage</strong>, ou plutôt la <em>chaine C</em> de cet attribut car la fonction demande un tableau de caractère. ;)</p><pre id="r-962658" data-claire-element-id="962658"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());
}</code></pre><p id="r-962659" data-claire-element-id="962659">Attention cependant, la fonction peut renvoyer un pointeur sur 0. Il faut donc gérer cette erreur au cas où l'image n'existerait pas ou si le chemin donné contient une erreur. En cas de problème, on affiche alors un message d'erreur grâce à la fonction <strong>SDL_GetError</strong>() :</p><pre id="r-962660" data-claire-element-id="962660"><code data-claire-semantic="cpp">char* SDL_GetError(void);</code></pre><p id="r-962661" data-claire-element-id="962661">Cette fonction permet de renvoyer la dernière erreur qu'a rencontrée la SDL (dans une chaine de <em><strong>char</strong></em>). Donc en cas d'erreur de chargement, on inclut le résultat de cette fonction dans un flux <strong>cout</strong> :</p><pre id="r-962662" data-claire-element-id="962662"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());

    if(imageSDL == 0)
    {
        std::cout &lt;&lt; &quot;Erreur : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        return false;
    }
}</code></pre><h3 id="r-generation-de-l-id" data-claire-element-id="962677">Génération de l'ID</h3><p id="r-962664" data-claire-element-id="962664">On a vu tout à l'heure ce qu'étaient les objets <em>OpenGL</em> et on sait également que nous pouvons les gérer grâce à leur <strong>ID</strong>. Nous allons maintenant voir comment générer cet <strong>ID</strong>. Pour ce faire, il existe une fonction déjà toute prête dans OpenGL :</p><pre id="r-962665" data-claire-element-id="962665"><code data-claire-semantic="cpp">GLuint glGenTextures(GLsizei number,  GLuint *textures);</code></pre><ul id="r-962670" data-claire-element-id="962670"><li id="r-962667" data-claire-element-id="962667"><p id="r-962666" data-claire-element-id="962666"><strong>number</strong> : Le nombre d'<em>ID</em> à initialiser. Nous mettrons toujours la valeur 1</p></li><li id="r-962669" data-claire-element-id="962669"><p id="r-962668" data-claire-element-id="962668"><strong>textures</strong> : Un tableau de type <strong>GLuint</strong>. On peut aussi mettre l'adresse d'une variable <strong>GLuint</strong> pour initialiser un seul <em>ID</em> de texture (et c'est ce qu'on fera)</p></li></ul><aside id="r-962672" data-claire-element-id="962672" data-claire-semantic="information"><p id="r-962671" data-claire-element-id="962671">Les fonctions-générateurs d'<strong>ID</strong> commenceront toujours par le préfixe <strong>glGenXXX</strong>(). Les paramètres seront également les mêmes.</p></aside><p id="r-962673" data-claire-element-id="962673">Pour générer un <em>ID</em> de texture, il suffit d'utiliser cette fonction en donnant en paramètre l'attribut <strong>m_id</strong> de notre classe <em>Texture</em> :</p><pre id="r-962674" data-claire-element-id="962674"><code data-claire-semantic="cpp">// Génération de l'ID

glGenTextures(1, &amp;m_id);</code></pre><p id="r-962675" data-claire-element-id="962675">On appelle cette fonction juste après avoir charger l'image en mémoire :</p><pre id="r-962676" data-claire-element-id="962676"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());

    if(imageSDL == 0)
    {
        std::cout &lt;&lt; &quot;Erreur : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        return false;
    }

    // Génération de l'ID

    glGenTextures(1, &amp;m_id);
}</code></pre><h3 id="r-le-verrouillage" data-claire-element-id="962697">Le verrouillage</h3><p id="r-962678" data-claire-element-id="962678">Je vous ai parlé rapidement du verrouillage d'objet tout à l'heure, ceci permettait à <em>OpenGL</em> de verrouiller un objet pour travailler dessus. Tous les <em>objets OpenGL </em>doivent être verrouillés pour être configurés (et même pour être utilisés !) sinon vous ne pourrez rien faire avec.</p><p id="r-962679" data-claire-element-id="962679">On utilisera une fonction simple pour verrouiller nos objets. Ce sera d'ailleurs la même pour les déverrouiller. :p Voici son prototype :</p><pre id="r-962680" data-claire-element-id="962680"><code data-claire-semantic="cpp">void glBindTexture(GLenum target,  GLuint  texture);</code></pre><ul id="r-962685" data-claire-element-id="962685"><li id="r-962682" data-claire-element-id="962682"><p id="r-962681" data-claire-element-id="962681"><strong>target</strong> : C'est un paramètre que vous retrouvez souvent avec tous les objets, nous le verrons même plusieurs fois dans ce chapitre. Il correspond au type de l'objet que l'on veut créer, nous lui affecterons la valeur <strong>GL_TEXTURE_2D</strong> en ce qui concerne les textures.</p></li><li id="r-962684" data-claire-element-id="962684"><p id="r-962683" data-claire-element-id="962683"><strong>texture</strong> : C'est l'<em>ID</em> de l'objet, nous lui donnerons la valeur de l'attribut <strong>m_id</strong>. La valeur de m_id et non un pointeur cette fois ci ! :)</p></li></ul><aside id="r-962687" data-claire-element-id="962687" data-claire-semantic="information"><p id="r-962686" data-claire-element-id="962686">Une fois de plus, cette fonction sera utilisée par tous les objets. Elle sera toujours de la forme <strong>glBindXXX</strong>().</p></aside><p id="r-962688" data-claire-element-id="962688">Voici donc comment utiliser la fonction dans notre cas :</p><pre id="r-962689" data-claire-element-id="962689"><code data-claire-semantic="cpp">// Verrouillage

glBindTexture(GL_TEXTURE_2D, m_id);</code></pre><p id="r-962690" data-claire-element-id="962690">Tiens au passage, vu que l'on a vu le <em><strong>verrouillage</strong></em> d'objets, nous allons voir maintenant le <em><strong>déverrouillage</strong></em> qui permet à OpenGL d’arrêter de se concentrer sur l'objet en cours, ce qui permet par extension d’empêcher les modifications.</p><p id="r-962691" data-claire-element-id="962691">Pour réaliser cette opération, on utilisera la même fonction mais avec le paramètre <strong>target</strong> non plus égal à la valeur de l'<em>ID</em> de la texture mais avec la valeur <strong>0</strong> (la valeur <em>nulle</em> quoi). En gros, on dit à OpenGL : &quot;Verrouille l'objet possédant l'ID 0, soit rien du tout&quot;. :)</p><pre id="r-962692" data-claire-element-id="962692"><code data-claire-semantic="cpp">// Déverrouillage

glBindTexture(GL_TEXTURE_2D, 0);</code></pre><aside id="r-962694" data-claire-element-id="962694" data-claire-semantic="warning"><p id="r-962693" data-claire-element-id="962693">Pensez bien à garder la valeur du paramètre <strong>target</strong> à <em><strong>GL_TEXTURE_2D</strong></em>, c'est important sinon le déverrouillage ne s'effectuera pas.</p></aside><p id="r-962695" data-claire-element-id="962695">Petit récap :</p><pre id="r-962696" data-claire-element-id="962696"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());

    if(imageSDL == 0)
    {
        std::cout &lt;&lt; &quot;Erreur : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        return false;
    }


    // Génération de l'ID

    glGenTextures(1, &amp;m_id);


    // Verrouillage

    glBindTexture(GL_TEXTURE_2D, m_id);


    // Déverrouillage

    glBindTexture(GL_TEXTURE_2D, 0);
}</code></pre><h3 id="r-configuration-de-la-texture" data-claire-element-id="962778">Configuration de la texture</h3><p id="r-962698" data-claire-element-id="962698">Notre texture a un <em>ID</em> généré, elle est également verrouillée, on peut maintenant passer à sa configuration. :D</p><p id="r-962699" data-claire-element-id="962699">Grossièrement parlant, pour avoir une texture dans OpenGL il suffit de copier les pixels d'une image dans la texture. C'est aussi simple que ça. Seulement voilà, il existe plusieurs formats d'image et certaines contiennent plus de données que d'autres, ...</p><div id="r-962701" data-claire-element-id="962701" data-claire-semantic="question"><p id="r-962700" data-claire-element-id="962700">Hein je croyais que la librairie <strong><em>SDL_image</em></strong> permettait justement de gérer tous ces formats ? :(</p></div><p id="r-962702" data-claire-element-id="962702">Et bien oui vous avez raison, c'est bien <em>SDL_image</em> qui gère les différents formats de l'image. Il existe cependant une chose qu'elle ne peut pas nous dire automatiquement.</p><p id="r-962703" data-claire-element-id="962703">Vous n'êtes pas sans savoir qu'un pixel est composé de 3 couleurs (rouge, vert et bleu) ... Les pixels d'une image n’échappent pas à cette règle, chacun d'entre eux est composé de ces 3 couleurs. Seulement voilà, il existe, pour certains formats, une quatrième composante qui s'appelle la <em><strong>composante Alpha</strong></em>. Cette composante permet de stocker le &quot;niveau de transparence&quot; d'une image.</p><p id="r-962704" data-claire-element-id="962704">Pour charger correctement une texture, il faut savoir si cette valeur <strong>alpha</strong> est présente ou non, et heureusement pour nous, la librairie <em>SDL_image</em> est capable de nous le dire. En effet, dans la <strong>structure SDL_Surface</strong> utilisée au début de la méthode <strong>charger</strong>(), il existe un champ <strong>BytesPerPixel</strong> qui permet de dire s'il y a 3 ou 4 couleurs. Nous devrons donc d'abord récupérer cette valeur avant de copier les pixels dans la texture.</p><p id="r-962705" data-claire-element-id="962705">Bien on arrête là pour la théorie, on passe au code.</p><p id="r-962706" data-claire-element-id="962706">On veut savoir si une image possède 3 ou 4 couleurs, on récupère donc le champ <strong>imageSDL-&gt;format-&gt;BytesPerPixel</strong> pour le vérifier puis on met le tout dans un bloc <strong>if</strong>. Si on a une valeur inconnue, on arrête le chargement de la texture pour éviter de se retrouver avec une grosse erreur puis on n'oublie pas de libérer la <em>surface SDL</em> avant de quitter la méthode :</p><pre id="r-962707" data-claire-element-id="962707"><code data-claire-semantic="cpp">// Détermination du nombre de composantes

if(imageSDL-&gt;format-&gt;BytesPerPixel == 3)
{

}

else if(imageSDL-&gt;format-&gt;BytesPerPixel == 4)
{

}


// Dans les autres cas, on arrête le chargement

else
{
    std::cout &lt;&lt; &quot;Erreur, format de l'image inconnu&quot; &lt;&lt; std::endl;
    SDL_FreeSurface(imageSDL);

    return false;
}</code></pre><div id="r-962709" data-claire-element-id="962709" data-claire-semantic="question"><p id="r-962708" data-claire-element-id="962708">On sait maintenant qu'il faut faire attention au bidule <strong>alpha</strong>, mais qu'est qu'on met à l'intérieur des if ? Ils sont tout vide. :(</p></div><p id="r-962710" data-claire-element-id="962710">C'est normal, il manque encore quelque chose. Comme on l'a vu plus tôt, OpenGL a besoin de savoir si la composante <em>alpha</em> existe ou pas. Seulement si on lui donne la valeur <strong>3</strong> ou <strong>4</strong> ça ne va pas lui suffire, il faudra envoyer une autre valeur qui sera un peu comme le paramètre <strong>GL_TEXTURE_2D</strong> que l'on a vu plus haut. Avec ce paramètre, il comprendra mieux ce qu'on lui enverra.</p><p id="r-962711" data-claire-element-id="962711">Il y aura deux cas à gérer :</p><ul id="r-962716" data-claire-element-id="962716"><li id="r-962713" data-claire-element-id="962713"><p id="r-962712" data-claire-element-id="962712">Soit l'image ne contiendra pas la composante <em>alpha</em> et dans ce cas on retiendra la constante <strong>GL_RGB</strong></p></li><li id="r-962715" data-claire-element-id="962715"><p id="r-962714" data-claire-element-id="962714">Soit l'image contiendra la composante <em>alpha</em> et dans ce cas on retiendra la constante <strong>GL_RGBA</strong></p></li></ul><p id="r-962717" data-claire-element-id="962717">Au niveau du code, on utilisera une variable de type <strong>GLenum</strong> pour retenir cette valeur. On l'appellera <strong>formatInterne</strong>, vous verrez pourquoi juste après :</p><pre id="r-962718" data-claire-element-id="962718"><code data-claire-semantic="cpp">// Détermination du nombre de composantes

GLenum formatInterne(0);

if(imageSDL-&gt;format-&gt;BytesPerPixel == 3)
{
    formatInterne = GL_RGB;
}

else if(imageSDL-&gt;format-&gt;BytesPerPixel == 4)
{    
    formatInterne = GL_RGBA;
}


// Dans les autres cas, on arrête le chargement

else
{
    std::cout &lt;&lt; &quot;Erreur, format interne de l'image inconnu&quot; &lt;&lt; std::endl;
    SDL_FreeSurface(imageSDL);

    return false;
}</code></pre><p id="r-962719" data-claire-element-id="962719">Il ne manque plus qu'une chose à faire. Selon le système d'exploitation ou même les images que vous utiliserez, les pixels ne seront pas stockés dans le même ordre. Par exemple sous Windows, la plupart des formats stockent leurs pixels selon l'ordre <strong>Rouge Vert Bleu</strong> (<strong>RGB</strong>) sauf les images au format <em><strong>BMP</strong></em>. Ceux-ci voient leurs pixels stockés selon l'ordre <strong>Bleu Vert Rouge</strong> (<strong>BGR</strong>). C'est un problème que nous devons gérer car certains auront la belle surprise de voir leurs images avec des couleurs complétement inversées (Imaginez un Dark Vador en blanc :p ).</p><p id="r-962720" data-claire-element-id="962720">Il faut donc dire à OpenGL dans quel ordre les pixels sont stockés, et pour ça on va utiliser une autre variable de type <strong><em>GLenum</em></strong> que l'on appelera <strong>format</strong> :</p><pre id="r-962721" data-claire-element-id="962721"><code data-claire-semantic="cpp">// Détermination du format et du format interne

GLenum formatInterne(0);
GLenum format(0);</code></pre><p id="r-962722" data-claire-element-id="962722">Pour connaitre l'ordre des pixels, nous devons utiliser un autre champ de la structure <strong>imageSDL</strong>. Ce champ sera i<strong>mageSDL-&gt;format-&gt;Rmask</strong>.</p><p id="r-962723" data-claire-element-id="962723">Il existe 4 champs similaires <strong>Rmask</strong>, <strong>Gmask</strong>, <strong>Bmask</strong> et <strong>Amask</strong> qui représente chacun la position de sa couleur à l'aide d'une valeur hexadécimal. Nous utiliserons le premier champ (<strong>Rmask</strong>), même si nous pouvions utiliser n'importe lequel. Sauf le dernier car il se trouve toujours à la fin quelque soit le format d'image.</p><p id="r-962724" data-claire-element-id="962724">Nous devons donc tester cette valeur pour connaitre la position de la couleur rouge. Si sa valeur est égale à <strong>0xff</strong> alors elle est placée au début, sinon c'est qu'elle se trouve à la fin :</p><pre id="r-962725" data-claire-element-id="962725"><code data-claire-semantic="cpp">// Format de l'image

GLenum formatInterne(0);
GLenum format(0);


// Détermination du format et du format interne

if(imageSDL-&gt;format-&gt;BytesPerPixel == 3)
{
    // Format interne

    formatInterne = GL_RGB;


    // Format

    if(imageSDL-&gt;format-&gt;Rmask == 0xff)
    {}

    else
    {}
}

else if(imageSDL-&gt;format-&gt;BytesPerPixel == 4)
{    
    // Format interne

    formatInterne = GL_RGBA;


    // Format

    if(imageSDL-&gt;format-&gt;Rmask == 0xff)
    {}

    else
    {}
}


// Dans les autres cas, on arrête le chargement

else
{
    std::cout &lt;&lt; &quot;Erreur, format interne de l'image inconnu&quot; &lt;&lt; std::endl;
    SDL_FreeSurface(imageSDL);

    return false;
}</code></pre><p id="r-962726" data-claire-element-id="962726">Il faut maintenant affecter une valeur à la variable <strong>format</strong>. Il y a 4 cas à gérer :</p><ul id="r-962735" data-claire-element-id="962735"><li id="r-962728" data-claire-element-id="962728"><p id="r-962727" data-claire-element-id="962727">Rouge en <strong>premier</strong> pour une image à 3 composantes</p></li><li id="r-962730" data-claire-element-id="962730"><p id="r-962729" data-claire-element-id="962729">Rouge en <strong>dernier</strong> pour une image à 3 composantes</p></li><li id="r-962732" data-claire-element-id="962732"><p id="r-962731" data-claire-element-id="962731">Rouge en <strong>premier</strong> pour une image à 4 composantes</p></li><li id="r-962734" data-claire-element-id="962734"><p id="r-962733" data-claire-element-id="962733">Rouge en <strong>dernier</strong> pour une image à 4 composantes</p></li></ul><p id="r-962736" data-claire-element-id="962736">Ces quatre cas seront représentés par les constantes suivantes :</p><ul id="r-962745" data-claire-element-id="962745"><li id="r-962738" data-claire-element-id="962738"><p id="r-962737" data-claire-element-id="962737"><strong>GL_RGB</strong></p></li><li id="r-962740" data-claire-element-id="962740"><p id="r-962739" data-claire-element-id="962739"><strong>GL_BGR</strong></p></li><li id="r-962742" data-claire-element-id="962742"><p id="r-962741" data-claire-element-id="962741"><strong>GL_RGBA</strong></p></li><li id="r-962744" data-claire-element-id="962744"><p id="r-962743" data-claire-element-id="962743"><strong>GL_BGRA</strong></p></li></ul><p id="r-962746" data-claire-element-id="962746">Il n'y a plus qu'à affecter la bonne constante à la variable <strong>format</strong> :</p><pre id="r-962747" data-claire-element-id="962747"><code data-claire-semantic="cpp">// Format pour 3 couleurs

if(imageSDL-&gt;format-&gt;Rmask == 0xff)
    format = GL_RGB;

else
    format = GL_BGR;


....


// Format pour 4 couleurs

if(imageSDL-&gt;format-&gt;Rmask == 0xff)
    format = GL_RGBA;

else
    format = GL_BGRA;</code></pre><p id="r-962748" data-claire-element-id="962748">Ce qui donne au final :</p><pre id="r-962749" data-claire-element-id="962749"><code data-claire-semantic="cpp">// Format de l'image

GLenum formatInterne(0);
GLenum format(0);


// Détermination du format et du format interne pour les images à 3 composantes

if(imageSDL-&gt;format-&gt;BytesPerPixel == 3)
{
    // Format interne

    formatInterne = GL_RGB;


    // Format

    if(imageSDL-&gt;format-&gt;Rmask == 0xff)
        format = GL_RGB;

    else
        format = GL_BGR;
}


// Détermination du format et du format interne pour les images à 4 composantes

else if(imageSDL-&gt;format-&gt;BytesPerPixel == 4)
{    
    // Format interne

    formatInterne = GL_RGBA;


    // Format

    if(imageSDL-&gt;format-&gt;Rmask == 0xff)
        format = GL_RGBA;

    else
        format = GL_BGRA;
}


// Dans les autres cas, on arrête le chargement

else
{
    std::cout &lt;&lt; &quot;Erreur, format interne de l'image inconnu&quot; &lt;&lt; std::endl;
    SDL_FreeSurface(imageSDL);

    return false;
}</code></pre><p id="r-962750" data-claire-element-id="962750">Pfiou tout ce gourbi pour déterminer deux valeurs ! :lol:</p><p id="r-962751" data-claire-element-id="962751">On a fait le plus dur, il ne nous reste plus qu'à copier les fameux pixels dans la texture. Pour ça, on va utiliser la fonction suivante (ne soyez pas surpris du nombre de paramètres :p ) :</p><pre id="r-962752" data-claire-element-id="962752"><code data-claire-semantic="cpp">void glTexImage2D(GLenum target,  GLint level,  GLint internalFormat,  GLsizei width,  GLsizei height,  GLint border,  GLenum format,  GLenum type,  const GLvoid * data);</code></pre><ul id="r-962771" data-claire-element-id="962771"><li id="r-962754" data-claire-element-id="962754"><p id="r-962753" data-claire-element-id="962753"><strong>target</strong> : Comme on l'a vu précédemment, pour les textures on affectera toujours la valeur <strong>GL_TEXTURE_2D</strong></p></li><li id="r-962756" data-claire-element-id="962756"><p id="r-962755" data-claire-element-id="962755"><strong>level</strong> : Paramètre que nous n’utiliserons pas, on le mettra à <strong>0</strong></p></li><li id="r-962758" data-claire-element-id="962758"><p id="r-962757" data-claire-element-id="962757"><strong>internalFormat</strong> : Tiens ! On vient de le déterminer juste avant celui-la</p></li><li id="r-962760" data-claire-element-id="962760"><p id="r-962759" data-claire-element-id="962759"><strong>width</strong> : Largeur de l'image qui est contenue dans le champ <strong>imageSDL-&gt;w</strong></p></li><li id="r-962762" data-claire-element-id="962762"><p id="r-962761" data-claire-element-id="962761"><strong>height</strong> : Hauteur de l'image qui est contenue dans le champ <strong>imageSDL-&gt;h</strong></p></li><li id="r-962764" data-claire-element-id="962764"><p id="r-962763" data-claire-element-id="962763"><strong>border</strong> : Paramètre utile quand vous avez une bordure sur votre image. Nous donnerons la valeur <strong>0</strong> en général</p></li><li id="r-962766" data-claire-element-id="962766"><p id="r-962765" data-claire-element-id="962765"><strong>format</strong> : Oh lui aussi on l'a trouvé !</p></li><li id="r-962768" data-claire-element-id="962768"><p id="r-962767" data-claire-element-id="962767"><strong>type</strong> : Type de donnée des pixels (float, int, ...). Nous lui donnerons un type d'OpenGL : <strong>GL_UNSIGNED_BYTE</strong></p></li><li id="r-962770" data-claire-element-id="962770"><p id="r-962769" data-claire-element-id="962769"><strong>data</strong> : Ce sont les pixels de l'image, on lui donnera l'adresse du tableau <strong>imageSDL-&gt;pixels</strong></p></li></ul><p id="r-962772" data-claire-element-id="962772">Ça en fait des paramètres tout ça ! Mais au moins on n'utilise qu'une seule fonction pour remplir notre texture.</p><p id="r-962773" data-claire-element-id="962773">Voyons son implémentation dans le code :</p><pre id="r-962774" data-claire-element-id="962774"><code data-claire-semantic="cpp">// Copie des pixels

glTexImage2D(GL_TEXTURE_2D, 0, formatInterne, imageSDL-&gt;w, imageSDL-&gt;h, 0, format, GL_UNSIGNED_BYTE, imageSDL-&gt;pixels);</code></pre><p id="r-962775" data-claire-element-id="962775">On refait un petit récap :</p><pre id="r-962776" data-claire-element-id="962776"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());

    if(imageSDL == 0)
    {
        std::cout &lt;&lt; &quot;Erreur : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        return false;
    }


    // Génération de l'ID

    glGenTextures(1, &amp;m_id);


    // Verrouillage

    glBindTexture(GL_TEXTURE_2D, m_id);


    // Format de l'image

    GLenum formatInterne(0);
    GLenum format(0);


    // Détermination du format et du format interne pour les images à 3 composantes

    if(imageSDL-&gt;format-&gt;BytesPerPixel == 3)
    {
        // Format interne

        formatInterne = GL_RGB;


        // Format

        if(imageSDL-&gt;format-&gt;Rmask == 0xff)
            format = GL_RGB;

        else
            format = GL_BGR;
    }


    // Détermination du format et du format interne pour les images à 4 composantes

    else if(imageSDL-&gt;format-&gt;BytesPerPixel == 4)
    {    
        // Format interne
        
        formatInterne = GL_RGBA;


        // Format

        if(imageSDL-&gt;format-&gt;Rmask == 0xff)
            format = GL_RGBA;

        else
            format = GL_BGRA;
    }


    // Dans les autres cas, on arrête le chargement

    else
    {
        std::cout &lt;&lt; &quot;Erreur, format interne de l'image inconnu&quot; &lt;&lt; std::endl;
        SDL_FreeSurface(imageSDL);

        return false;
    }


    // Copie des pixels

    glTexImage2D(GL_TEXTURE_2D, 0, formatInterne, imageSDL-&gt;w, imageSDL-&gt;h, 0, format, GL_UNSIGNED_BYTE, imageSDL-&gt;pixels);


    // Déverrouillage

    glBindTexture(GL_TEXTURE_2D, 0);
}</code></pre><p id="r-962777" data-claire-element-id="962777">Et voila ! La texture contient enfin ses propres pixels issus de notre fichier image.</p><h3 id="r-les-filtres-11" data-claire-element-id="962820">Les filtres</h3><p id="r-962779" data-claire-element-id="962779">Allez courage, il ne nous manque plus qu'une chose à faire.</p><p id="r-962780" data-claire-element-id="962780">Je vais vous parler rapidement d'une notion que je connais très mal : la notion de <em><strong>filtres</strong></em>. Je ne m'y connais pas assez pour tenir tout un pavé alors je ferai vite. :lol:</p><p id="r-962781" data-claire-element-id="962781">Un <strong><em>filtre</em></strong> permet de gérer la qualité d'affichage d'une texture. Il permet à OpenGL de savoir s'il doit afficher une image en mode <strong>pixelisé</strong> ou en mode <strong>lisse</strong>. On serait tenté de vouloir que toutes les textures soient lisses au moment de l'affichage mais sachez que ça joue sur la vitesse de votre programme. En effet, plus vous voudrez de belles textures à l'écran, plus votre matériel sera sollicité. Alors bon, aujourd'hui le problème est moins voyant qu'il y a 10 ans mais on est toujours aujourd'hui dans cette optique d'optimisation du rendu.</p><p id="r-962782" data-claire-element-id="962782">Pour vous éviter un gros bloc de théorie je vais résumer ma pensée en quelques lignes (en plus ça m'arrange, j'ai mal aux doigts :p ).</p><p id="r-962783" data-claire-element-id="962783">Il existe deux types d'affichage pour une texture :</p><ul id="r-962788" data-claire-element-id="962788"><li id="r-962785" data-claire-element-id="962785"><p id="r-962784" data-claire-element-id="962784">Soit la texture est proche de l'écran et dans ce cas il vaut mieux la lisser, car le joueur a plus de chance de la voir</p></li><li id="r-962787" data-claire-element-id="962787"><p id="r-962786" data-claire-element-id="962786">Soit la texture est éloignée de l'écran et dans ce cas on peut se permettre de &quot;l'afficher à l'arrache&quot;, le joueur ne s'en rendre même pas compte</p></li></ul><p id="r-962789" data-claire-element-id="962789">Ces deux cas vont correspondre à deux <em>filtres</em> que nous allons créer.</p><p id="r-962790" data-claire-element-id="962790">Pour créer un <em>filtre</em>, on utilise la fonction suivante :</p><pre id="r-962791" data-claire-element-id="962791"><code data-claire-semantic="cpp">void glTexParameteri(GLenum target,  GLenum pname,  GLint param);</code></pre><p id="r-962792" data-claire-element-id="962792">Cette fonction permet d'envoyer des paramètres supplémentaires à nos textures, dans notre cas des filtres. Voici ses paramètres :</p><ul id="r-962799" data-claire-element-id="962799"><li id="r-962794" data-claire-element-id="962794"><p id="r-962793" data-claire-element-id="962793"><strong>target</strong> : On ne le présente plus</p></li><li id="r-962796" data-claire-element-id="962796"><p id="r-962795" data-claire-element-id="962795"><strong>pname</strong> : Type de paramètre à envoyer, ici le filtre</p></li><li id="r-962798" data-claire-element-id="962798"><p id="r-962797" data-claire-element-id="962797"><strong>param</strong> : La valeur du paramètre</p></li></ul><p id="r-962800" data-claire-element-id="962800">Avec cette fonction, nous pourrons créer deux filtres : un pour le cas où la texture est proche de l'écran et un autre pour le cas où elle en est éloignée.</p><p id="r-962801" data-claire-element-id="962801">Pour le premier filtre :</p><ul id="r-962806" data-claire-element-id="962806"><li id="r-962803" data-claire-element-id="962803"><p id="r-962802" data-claire-element-id="962802">Le filtre permettant de gérer les &quot;<em>textures proches</em>&quot; s'appelle <em><strong>GL_TEXTURE_MIN_FILTER</strong></em>, ce sera donc la valeur du paramètre <strong>pname</strong>.</p></li><li id="r-962805" data-claire-element-id="962805"><p id="r-962804" data-claire-element-id="962804">Nous voulons que les &quot;textures proches&quot; soient &quot;lisses&quot;, nous donnerons donc la valeur <strong><em>GL_LINEAR</em></strong> au <strong>param</strong>ètre param</p></li></ul><p id="r-962807" data-claire-element-id="962807">Code :</p><pre id="r-962808" data-claire-element-id="962808"><code data-claire-semantic="cpp">// Application des filtres

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);</code></pre><p id="r-962809" data-claire-element-id="962809">Pour le second filtre :</p><ul id="r-962814" data-claire-element-id="962814"><li id="r-962811" data-claire-element-id="962811"><p id="r-962810" data-claire-element-id="962810">Le filtre permettant de gérer les &quot;<em>textures éloignées</em>&quot; s'appelle <em><strong>GL_TEXTURE_MAG_FILTER</strong></em>, ce sera donc la valeur du paramètre <strong>pname</strong>.</p></li><li id="r-962813" data-claire-element-id="962813"><p id="r-962812" data-claire-element-id="962812">Nous voulons que les &quot;textures éloignées&quot; soient &quot;pixelisées&quot;, nous donnerons donc la valeur <strong><em>GL_NEAREST</em></strong> au <strong>param</strong>ètre param</p></li></ul><p id="r-962815" data-claire-element-id="962815">Code :</p><pre id="r-962816" data-claire-element-id="962816"><code data-claire-semantic="cpp">glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);</code></pre><p id="r-962817" data-claire-element-id="962817">Grâce à ces filtres, nous pourrons avoir un bon équilibre entre érgonomie pour le joueur et rapidité pour le CPU et la carte graphique.</p><p id="r-962818" data-claire-element-id="962818">Petit récap :</p><pre id="r-962819" data-claire-element-id="962819"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());

    if(imageSDL == 0)
    {
        std::cout &lt;&lt; &quot;Erreur : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        return false;
    }


    // Génération de l'ID

    glGenTextures(1, &amp;m_id);


    // Verrouillage

    glBindTexture(GL_TEXTURE_2D, m_id);


    // Format de l'image

    GLenum formatInterne(0);
    GLenum format(0);


    // Détermination du format et du format interne pour les images à 3 composantes

    if(imageSDL-&gt;format-&gt;BytesPerPixel == 3)
    {
        // Format interne

        formatInterne = GL_RGB;


        // Format

        if(imageSDL-&gt;format-&gt;Rmask == 0xff)
            format = GL_RGB;

        else
            format = GL_BGR;
    }


    // Détermination du format et du format interne pour les images à 4 composantes

    else if(imageSDL-&gt;format-&gt;BytesPerPixel == 4)
    {    
        // Format interne
        
        formatInterne = GL_RGBA;


        // Format

        if(imageSDL-&gt;format-&gt;Rmask == 0xff)
            format = GL_RGBA;

        else
            format = GL_BGRA;
    }


    // Dans les autres cas, on arrête le chargement

    else
    {
        std::cout &lt;&lt; &quot;Erreur, format interne de l'image inconnu&quot; &lt;&lt; std::endl;
        SDL_FreeSurface(imageSDL);

        return false;
    }


    // Copie des pixels

    glTexImage2D(GL_TEXTURE_2D, 0, formatInterne, imageSDL-&gt;w, imageSDL-&gt;h, 0, format, GL_UNSIGNED_BYTE, imageSDL-&gt;pixels);


    // Application des filtres

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);


    // Déverrouillage

    glBindTexture(GL_TEXTURE_2D, 0);
}</code></pre><h3 id="r-fin-de-la-methode" data-claire-element-id="962827">Fin de la méthode</h3><p id="r-962821" data-claire-element-id="962821">Pffffffiou, entre les <em>ID</em>, le <em>verrouillage</em>, <em>les filtres</em> et tout ça je n'en puis plus (comme dirait Hooper) !</p><p id="r-962822" data-claire-element-id="962822">Il est temps de terminer cette méthode. Il ne reste plus qu'à libérer la <em><strong>surface SDL</strong></em> qui contenait les pixels et à retourner la valeur <strong>true</strong> (car la méthode s'est normalement terminée sans erreur) :</p><pre id="r-962823" data-claire-element-id="962823"><code data-claire-semantic="cpp">// Fin de la méthode

SDL_FreeSurface(imageSDL);
return true;</code></pre><p id="r-962824" data-claire-element-id="962824">Récap final :</p><pre id="r-962825" data-claire-element-id="962825"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());

    if(imageSDL == 0)
    {
        std::cout &lt;&lt; &quot;Erreur : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        return false;
    }


    // Génération de l'ID

    glGenTextures(1, &amp;m_id);


    // Verrouillage

    glBindTexture(GL_TEXTURE_2D, m_id);


    // Format de l'image

    GLenum formatInterne(0);
    GLenum format(0);


    // Détermination du format et du format interne pour les images à 3 composantes

    if(imageSDL-&gt;format-&gt;BytesPerPixel == 3)
    {
        // Format interne

        formatInterne = GL_RGB;


        // Format

        if(imageSDL-&gt;format-&gt;Rmask == 0xff)
            format = GL_RGB;

        else
            format = GL_BGR;
    }


    // Détermination du format et du format interne pour les images à 4 composantes

    else if(imageSDL-&gt;format-&gt;BytesPerPixel == 4)
    {    
        // Format interne
        
        formatInterne = GL_RGBA;


        // Format

        if(imageSDL-&gt;format-&gt;Rmask == 0xff)
            format = GL_RGBA;

        else
            format = GL_BGRA;
    }


    // Dans les autres cas, on arrête le chargement

    else
    {
        std::cout &lt;&lt; &quot;Erreur, format interne de l'image inconnu&quot; &lt;&lt; std::endl;
        SDL_FreeSurface(imageSDL);

        return false;
    }


    // Copie des pixels

    glTexImage2D(GL_TEXTURE_2D, 0, formatInterne, imageSDL-&gt;w, imageSDL-&gt;h, 0, format, GL_UNSIGNED_BYTE, imageSDL-&gt;pixels);


    // Application des filtres

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);


    // Déverrouillage

    glBindTexture(GL_TEXTURE_2D, 0);


    // Fin de la méthode

    SDL_FreeSurface(imageSDL);
    return true;
}</code></pre><p id="r-962826" data-claire-element-id="962826">Enfin ! Nous avons une classe <strong>Texture</strong> qui permet de charger des fichiers images pour les afficher dans nos scènes 3D. Le petit truc que je ne vous ai pas dit, c'est que cette méthode est incomplète, il manque encore quelque chose mais nous verrons ça dans la dernière sous-partie de ce chapitre. Je ne vais pas vous assassiner plus pour l'instant. :lol: Nous avons ce qu'il nous faut pour afficher une texture sur un modèle 3D et c'est le principal pour le moment. Je veux que vous vous familiarisez avec l'affichage de texture avant d'aller plus loin. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
<span class="arrow"></span>
<span class="next">Introduction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
<span class="next">Plaquage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Plaquage"></a><h2>Plaquage</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
<span class="arrow"></span>
<span class="next">Chargement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
<span class="next">Améliorations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-affichage-d-une-texture-1" data-claire-element-id="962960">Affichage d'une texture</h2><p id="r-962830" data-claire-element-id="962830">Le plus dur est derrière nous, nous avons appris à déclarer et remplir un <em>texture</em> au sein d'OpenGL. On va maintenant apprendre à les afficher. Et la bonne nouvelle, c'est que vous savez déjà comment faire. :p Ça se passe de la même façon qu'avec les vertices ou les couleurs.</p><p id="r-962831" data-claire-element-id="962831">Pour débuter, on va se contenter d'afficher notre première texture sur un simple carré afin de se concentrer sur l'essentiel. Nous utiliserons ensuite notre classe <em><strong>Cube</strong></em> pour afficher un modèle un peu plus élaboré. D'ailleurs, voyons ensemble la première texture que nous serons capables de traiter :</p><figure id="r-962833" data-claire-element-id="962834"><img id="r-962832" data-claire-element-id="962832" src="medias/uploads.siteduzero.com_files_394001_395000_394115.jpg" alt="Image utilisateur"/></figure><p id="r-962835" data-claire-element-id="962835">Elle nous sera utile tout au long du chapitre, vous la trouverez dans l'archive que vous avez téléchargée au début sous le nom de <strong>crate13.jpg</strong>. Au pire des cas, faites un clique droit sur l'image ci-dessus pour la récupérer. Nous aurons l'occasion d'en utiliser d'autres aussi.</p><h3 id="r-coordonnees-de-texture-2" data-claire-element-id="962862">Coordonnées de Texture</h3><p id="r-962836" data-claire-element-id="962836">Je ne sais pas si vous lisez toujours les sous-titres oranges et bleues, mais si vous lisez une ligne plus haut vous tomberez sur le terme &quot;<em><strong>coordonnées de texture</strong></em>&quot;.</p><div id="r-962838" data-claire-element-id="962838" data-claire-semantic="question"><p id="r-962837" data-claire-element-id="962837">Oh ! C'est quoi ces coordonnées ? C'est similaire aux vertices et tout ça ?</p></div><p id="r-962839" data-claire-element-id="962839">Et bien oui ! On peut faire une analogie avec les vertices car, pour afficher une texture, il faut lui donner une sorte de position. Seulement attention, on ne parle pas ici de coordonnées spatiales avec un repère 3D, une matrice et tout ça ...</p><p id="r-962840" data-claire-element-id="962840">Je vais vous expliquer ça avec deux schéma.</p><p id="r-962841" data-claire-element-id="962841">Vous savez depuis un moment que les vertices sont composés de coordonnées spatiales (X, Y et Z) :</p><figure id="r-962843" data-claire-element-id="962844"><img id="r-962842" data-claire-element-id="962842" src="medias/uploads.siteduzero.com_files_300001_301000_300371.png" alt="Image utilisateur"/></figure><p id="r-962845" data-claire-element-id="962845">Avec ce système, vous pouvez donner n'importe quelle taille à une forme 3D comme le cube des chapitres précédents par exemple. Et bien les textures se comportent de la même façon. A une exception près : les coordonnées de texture sont toujours comprises entre 0 et 1 :</p><figure id="r-962847" data-claire-element-id="962848"><img id="r-962846" data-claire-element-id="962846" src="medias/uploads.siteduzero.com_files_394001_395000_394119.jpg" alt="Image utilisateur"/></figure><p id="r-962849" data-claire-element-id="962849">On peut voir sur le schéma le point d'origine de la texture en bas à gauche ainsi que 3 autres coordonnées. La plupart du temps, nous n'utiliserons que ces 4 points vu qu'ils correspondent aux coins de la texture. Mais sachez qu'il est tout à fait possible d'avoir des coordonnées du type (0.27; 0.38) pour ne récupérer qu'une partie de la texture.</p><aside id="r-962851" data-claire-element-id="962851" data-claire-semantic="warning"><p id="r-962850" data-claire-element-id="962850">Attention, ces nombres n'ont aucun rapport avec le repère 3D. Elles sont propres à la texture.</p></aside><p id="r-962852" data-claire-element-id="962852">Pour plaquer une texture sur une surface il faudra simplement faire correspondre les coordonnées de texture avec les bons vertices :</p><figure id="r-962854" data-claire-element-id="962855"><img id="r-962853" data-claire-element-id="962853" src="medias/uploads.siteduzero.com_files_394001_395000_394120.png" alt="Image utilisateur"/></figure><p id="r-962856" data-claire-element-id="962856">La chose se complexifie légèrement quand on n'oublie le carré et que l'on parle des deux triangles, mais le tout reste tout de même assez simple :</p><figure id="r-962858" data-claire-element-id="962859"><img id="r-962857" data-claire-element-id="962857" src="medias/uploads.siteduzero.com_files_394001_395000_394121.png" alt="Image utilisateur"/></figure><p id="r-962860" data-claire-element-id="962860">Simple n'est-ce pas ? :p</p><p id="r-962861" data-claire-element-id="962861">Vous savez maintenant ce que sont les coordonnées de texture : ce sont des points, correspondant généralement aux coins d'une texture, qui permettent de la plaquer sur une surface.</p><h3 id="r-affichage-d-une-texture" data-claire-element-id="962959">Affichage d'une texture</h3><p id="r-962863" data-claire-element-id="962863">Nous avons toutes les cartes en main pour afficher notre première texture. Nous n'avons plus qu'à instancier la classe <em><strong>Texture</strong></em> et à utiliser ses coordonnées.</p><p id="r-962864" data-claire-element-id="962864">On reprend donc notre bonne vielle classe <em><strong>SceneOpenGL</strong></em> pour déclarer un objet de type <em><strong>Texture</strong></em> (n'oubliez pas d'inclure le header) qu'on appellera simplement <strong><em>texture</em></strong>, puis on la chargera en mémoire. Pensez également à effacer tout le code qui concernait le cube des chapitres précédents :</p><pre id="r-962865" data-claire-element-id="962865"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Texture

    Texture texture(&quot;Textures/Caisse.jpg&quot;);
    texture.charger();


    // Boucle principale

    while(!m_input.terminer())
    {
        /* *** Boucle principale *** */
    }
}</code></pre><p id="r-962866" data-claire-element-id="962866">Je vous redonne au passage le code de base pour la boucle principale :</p><pre id="r-962867" data-claire-element-id="962867"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    // Gestion des évènements

    m_input.updateEvenements();

    if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
       break;


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


    // Placement de la caméra

    modelview = lookAt(vec3(0, 0, 2), vec3(0, 0, 0), vec3(0, 1, 0));


    
    /* *** Rendu *** */



    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(m_fenetre);


    // Calcul du temps écoulé

    finBoucle = SDL_GetTicks();
    tempsEcoule = finBoucle - debutBoucle;


    // Si nécessaire, on met en pause le programme

    if(tempsEcoule &lt; frameRate)
        SDL_Delay(frameRate - tempsEcoule);
}</code></pre><aside id="r-962869" data-claire-element-id="962869" data-claire-semantic="information"><p id="r-962868" data-claire-element-id="962868">Remarquez que j'ai placé la caméra au point (0; 0; 2).</p></aside><p id="r-962870" data-claire-element-id="962870">Bien, avec ce code propre on va pouvoir bosser tranquillement.</p><p id="r-962871" data-claire-element-id="962871">Notre objectif depuis le début de ce chapitre est l'affichage d'une texture sur une surface, et de préférence un carré. On va commencer par créer nos coordonnées pour les vertices. D'ailleurs, vous savez déjà depuis un moment comment faire un carré avec OpenGL. Je vais donc vous demander de me coder vous-même les vertices pour un carré avec des arrêtes mesurant 4 unités de longueur :</p><figure id="r-962873" data-claire-element-id="962874"><img id="r-962872" data-claire-element-id="962872" src="medias/uploads.siteduzero.com_files_394001_395000_394122.png" alt="Image utilisateur"/></figure><p id="r-962875" data-claire-element-id="962875">Cependant, je souhaite attirer votre attention sur deux points :</p><ul id="r-962880" data-claire-element-id="962880"><li id="r-962877" data-claire-element-id="962877"><p id="r-962876" data-claire-element-id="962876">Faites votre carré en 3 dimensions, il faut donc intégrer la coordonnée <strong>Z</strong></p></li><li id="r-962879" data-claire-element-id="962879"><p id="r-962878" data-claire-element-id="962878">Faites attention au repère qui se trouve au milieu de la surface et non en bas à gauche.</p></li></ul><p id="r-962881" data-claire-element-id="962881">Voila pour les explications, en gros faites un carré à l'ancienne avec 3 dimensions. ^^</p><p id="r-962882" data-claire-element-id="962882">...</p><p id="r-962883" data-claire-element-id="962883">Fini ? Voici la solution :</p><p id="r-962884" data-claire-element-id="962884"></p><pre id="r-962885" data-claire-element-id="962885"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {-2, -2, -2,   2, -2, -2,   2, 2, -2,   // Triangle 1
                    -2, -2, -2,   -2, 2, -2,   2, 2, -2};  // Triangle 2</code></pre><p id="r-962886" data-claire-element-id="962886">Aaaah, faire un carré c'est tout de même plus simple que de devoir faire un cube complet.</p><p id="r-962887" data-claire-element-id="962887">L'étape suivante consisterait normalement à colorier notre nouvelle forme. Cependant, nous n'en avons plus besoin vu que nous avons une texture qui va s'appliquer dessus. <br/> Dans notre code, au lieu de déclarer un tableau de couleurs nous allons déclarer un tableau de coordonnées de texture. Et comme je suis sadique, je vais vous demander de me coder ce tableau vous-même comme des grands. :p N’ayez pas peur c'est exactement le même principe qu'avec les vertices et les couleurs.</p><p id="r-962888" data-claire-element-id="962888">Pour vous aider dans cette tâche je vais vous donner deux petites schémas avec les informations nécessaires :</p><figure id="r-962890" data-claire-element-id="962891"><img id="r-962889" data-claire-element-id="962889" src="medias/uploads.siteduzero.com_files_394001_395000_394123.png" alt="Image utilisateur"/></figure><figure id="r-962893" data-claire-element-id="962894"><img id="r-962892" data-claire-element-id="962892" src="medias/uploads.siteduzero.com_files_394001_395000_394124.png" alt="Image utilisateur"/></figure><p id="r-962895" data-claire-element-id="962895">Rien de bien compliqué, vous devez simplement faire comme s'il s'agissait de vertices. Vous avez toutes les coordonnées (<strong>x, y</strong>) et vous devez en faire un tableau. Faites attention cependant à leur ordre à l'intérieur du tableau car celles-ci sont liées à vos vertices (au même titre que les couleurs).</p><p id="r-962896" data-claire-element-id="962896">... Pause café ...</p><p id="r-962897" data-claire-element-id="962897">Fini. Allez on passe à la correction.</p><p id="r-962898" data-claire-element-id="962898"></p><pre id="r-962899" data-claire-element-id="962899"><code data-claire-semantic="cpp">// Coordonnées de texture

float coordTexture[] = {0, 0,   1, 0,   1, 1,     // Triangle 1
                        0, 0,   0, 1,   1, 1};    // Triangle 2</code></pre><p id="r-962900" data-claire-element-id="962900">On a maintenant un carré, une texture et des coordonnées permettant de la plaquer dessus. On n'a plus qu'à donner tout ça à <em>OpenGL</em> et le tour est joué. :)</p><div id="r-962902" data-claire-element-id="962902" data-claire-semantic="question"><p id="r-962901" data-claire-element-id="962901">Ah mais justement : comment on envoie les coordonnées à <em>OpenGL</em> ?</p></div><p id="r-962903" data-claire-element-id="962903">Bonne question, je vous ai dit tout à l'heure que les coordonnées de texture se géraient de la même façon que les vertices et les couleurs. On va donc utiliser donc un <em><strong>Vertex Array</strong></em> pour envoyer toutes les données à OpenGL.</p><p id="r-962904" data-claire-element-id="962904">Vous vous souvenez des <em><strong>Vertex Array</strong></em> quand même ? Ce sont des tableaux qui font le lien entre les coordonnées et OpenGL. Le tableau <strong>Vertex Attrib 0</strong> permet d'envoyer les vertices et le tableau <strong>Vertex Attrib 1</strong> permet d'envoyer les couleurs. Maintenant nous allons utiliser le tableau <strong>Vertex Attrib 2</strong> qui va nous permettre d'envoyer nos coordonnées de texture.</p><p id="r-962905" data-claire-element-id="962905">Dans notre code, il nous faut appeler la fonction <strong>glVertexAttribPointer</strong>() avec l'indice <strong>2</strong> (et non <strong>1</strong>). Il faut également donner la valeur <strong>2</strong> au paramètre <strong>size</strong> car nos coordonnées de texture ne sont constituées que de couple de valeurs (x, y) et non de triplet (x, y, z). On pensera à donner le tableau <strong>coordTexture</strong> en dernier paramètres sinon on ne risque pas d'envoyer grand chose à OpenGL. :lol:</p><p id="r-962906" data-claire-element-id="962906">Voici à quoi ressemblerait l'appel à <strong>glVertexAttribPointer</strong>() dans notre cas :</p><pre id="r-962907" data-claire-element-id="962907"><code data-claire-semantic="cpp">// Envoi des coordonnées de texture

glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, coordTexture);</code></pre><p id="r-962908" data-claire-element-id="962908">Puisque nous envoyons des données à travers un tableau <strong>Vertex Attrib</strong>, il faut penser à l'activer grâce à la fonction <strong>glEnableVertexAttribArray</strong>(). On appelle donc celle-ci avec la valeur <strong>2</strong> pour activer le tableau d'indice <strong>2</strong> :</p><pre id="r-962909" data-claire-element-id="962909"><code data-claire-semantic="cpp">// Envoi des coordonnées de texture

glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, coordTexture);
glEnableVertexAttribArray(2);</code></pre><p id="r-962910" data-claire-element-id="962910">On place ce bout de code au même endroit où on envoyait les couleurs, c'est-à-dire entre les deux appels à la fonction <strong>glUseProgram</strong>() :</p><pre id="r-962911" data-claire-element-id="962911"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shader.getProgramID());


    // Envoi des vertices

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);
    glEnableVertexAttribArray(0);


    // Envoi des coordonnées de texture

    glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, coordTexture);
    glEnableVertexAttribArray(2);


    // Envoi des matrices et rendu

    ....



    // Désactivation des tableaux

    glDisableVertexAttribArray(2);
    glDisableVertexAttribArray(0);


// Désactivation du shader

glUseProgram(0);</code></pre><aside id="r-962913" data-claire-element-id="962913" data-claire-semantic="information"><p id="r-962912" data-claire-element-id="962912">Pensez à appeler la fonction <strong>glDisableVertexAttribArray</strong>() avec la valeur <strong>2</strong> pour désactiver votre tableau.</p></aside><p id="r-962914" data-claire-element-id="962914">Tiens en parlant de shader, nous allons devoir modifier les codes sources (le petits fichiers dans le dossier <strong>Shaders</strong>) qu'il utilise afin de pouvoir intégrer l'affichage de texture. En effet, ceux que nous avons utilisés jusqu'à maintenant ne gèrent que la couleur, nous en avons donc besoin de nouveaux pour gérer notre nouvelle façon d'afficher.</p><p id="r-962915" data-claire-element-id="962915">Ces nouveaux codes sources se nomment <strong>texture.vert</strong> et <strong>texture.frag</strong> et devraient être présents dans votre dossier <strong>Shaders</strong> :</p><pre id="r-962916" data-claire-element-id="962916"><code data-claire-semantic="cpp">// Shader gérant les texture

Shader shaderTexture(&quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;);
shaderTexture.charger();</code></pre><p id="r-962917" data-claire-element-id="962917">Faisons un petit récap (sans la boucle principale) pour voir où nous en sommes pour le moment :</p><pre id="r-962918" data-claire-element-id="962918"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Vertices

    float vertices[] = {-2, -2, -2,   2, -2, -2,   2, 2, -2,   // Triangle 1
                        -2, -2, -2,   -2, 2, -2,   2, 2, -2};  // Triangle 2


    // Coordonnées de texture

    float coordTexture[] = {0, 0,   1, 0,   1, 1,     // Triangle 1
                            0, 0,   0, 1,   1, 1};    // Triangle 2


    // Texture

    Texture texture(&quot;Textures/Caisse.jpg&quot;);
    texture.charger();


    // Shader

    Shader shaderTexture(&quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;);
    shaderTexture.charger();


    // Boucle principale

    while(!m_input.terminer())
    {
        /* *** Rendu *** */
    }
}</code></pre><p id="r-962919" data-claire-element-id="962919">Nous ferons un petit récap de la boucle principale dans un instant. Concentrons-nous d'abord sur le code d'affichage.</p><p id="r-962920" data-claire-element-id="962920">Celui-ci va commencer par l'activation du shader (qui gère les textures maintenant) suivie de l'envoi des vertices, des coordonnées de texture et des matrices ainsi que de l'appel à la fonction de rendu <strong>glDrawArrays</strong>() :</p><pre id="r-962921" data-claire-element-id="962921"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shaderTexture.getProgramID());


    // Envoi des vertices

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);
    glEnableVertexAttribArray(0);


    // Envoi des coordonnées de texture

    glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, coordTexture);
    glEnableVertexAttribArray(2);


    // Envoi des matrices

    glUniformMatrix4fv(glGetUniformLocation(shaderTexture.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
    glUniformMatrix4fv(glGetUniformLocation(shaderTexture.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


    // Rendu

    glDrawArrays(GL_TRIANGLES, 0, 6);


    // Désactivation des tableaux

    glDisableVertexAttribArray(2);
    glDisableVertexAttribArray(0);


// Désactivation du shader

glUseProgram(0);</code></pre><p id="r-962922" data-claire-element-id="962922">Ah encore une petite chose, normalement je devrais faire le sadique en vous demandant de compiler votre code maintenant. Seulement si vous le faites vous aurez au mieux un écran noir. :p</p><p id="r-962923" data-claire-element-id="962923">Il manque donc encore une dernière chose à faire. Pour le moment, nous nous contentons d'envoyer les <em>coordonnées de texture</em> à OpenGL, mais à aucun moment nous lui disons <em><strong>quelle texture</strong></em> il doit afficher. Et comme OpenGL n'est pas devin, il va nous envoyer balader et afficher un carré noir.</p><p id="r-962924" data-claire-element-id="962924">Pour éviter cela, il faut faire une opération que vous savez déjà faire : le verrouillage de texture. En effet, grâce à ça, OpenGL saura ce qu'il doit afficher exactement comme au moment de la configuration où il savait sur quelle texture travailler.</p><p id="r-962925" data-claire-element-id="962925">Pour effectuer cette opération, nous allons réutiliser la fonction <strong>glBindTexture</strong>() avec le même paramètre que d'habitude soit l'<strong>ID</strong> de la texture. D'où l'utilité de la méthode <strong>getID</strong>() que je vous avais demandée de coder précédemment.</p><p id="r-962926" data-claire-element-id="962926">En définitif, nous devons appeler la fonction <strong>glBindTexture</strong>() deux fois avec la méthode <strong>getID</strong>() en tant que paramètre pour le premier appel et la valeur <strong>0</strong> pour le second :</p><pre id="r-962927" data-claire-element-id="962927"><code data-claire-semantic="cpp">// Verrouillage de la texture

glBindTexture(GL_TEXTURE_2D, texture.getID());


// Rendu

glDrawArrays(GL_TRIANGLES, 0, 6);


// Déverrouillage de la texture

glBindTexture(GL_TEXTURE_2D, 0);</code></pre><aside id="r-962937" data-claire-element-id="962937" data-claire-semantic="information"><p id="r-962928" data-claire-element-id="962928">Je vous conseille de verrouiller vos textures uniquement au moment de l'affichage. C'est-à-dire que pour <strong>CHAQUE</strong> texture vous devez :</p><ul id="r-962935" data-claire-element-id="962935"><li id="r-962930" data-claire-element-id="962930"><p id="r-962929" data-claire-element-id="962929">La verrouiller</p></li><li id="r-962932" data-claire-element-id="962932"><p id="r-962931" data-claire-element-id="962931">Afficher votre surface</p></li><li id="r-962934" data-claire-element-id="962934"><p id="r-962933" data-claire-element-id="962933">La déverrouiller immédiatement</p></li></ul><p id="r-962936" data-claire-element-id="962936">Si vous ne le faites pas vous risquez d'afficher une mauvaise texture par la suite.</p></aside><div id="r-962939" data-claire-element-id="962939" data-claire-semantic="question"><p id="r-962938" data-claire-element-id="962938">Et si on veut afficher deux textures en même temps sur une surface on fait comment ? On les verrouille toutes les deux ?</p></div><p id="r-962940" data-claire-element-id="962940">Ah là on touche au domaine du <em>multi-texturing</em>, vaste sujet passionnant que nous ne verrons pas maintenant. Nous verrons cela quand nous saurons manipuler les shaders. ;)</p><p id="r-962941" data-claire-element-id="962941">On revient au code avec un petit récap de la boucle principale :</p><pre id="r-962942" data-claire-element-id="962942"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    // Gestion des évènements

    m_input.updateEvenements();

    if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
       break;


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


    // Placement de la caméra

    modelview = lookAt(vec3(0, 0, 2), vec3(0, 0, 0), vec3(0, 1, 0));


    // Activation du shader

    glUseProgram(shaderTexture.getProgramID());


        // Envoi des vertices

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);
        glEnableVertexAttribArray(0);


        // Envoi des coordonnées de texture

        glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, coordTexture);
        glEnableVertexAttribArray(2);


        // Envoi des matrices

        glUniformMatrix4fv(glGetUniformLocation(shaderTexture.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
        glUniformMatrix4fv(glGetUniformLocation(shaderTexture.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


        // Verrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, texture.getID());


        // Rendu

        glDrawArrays(GL_TRIANGLES, 0, 6);


        // Déverrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, 0);


        // Désactivation des tableaux

        glDisableVertexAttribArray(2);
        glDisableVertexAttribArray(0);


    // Désactivation du shader

    glUseProgram(0);


    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(m_fenetre);


    // Calcul du temps écoulé

    finBoucle = SDL_GetTicks();
    tempsEcoule = finBoucle - debutBoucle;


    // Si nécessaire, on met en pause le programme

    if(tempsEcoule &lt; frameRate)
        SDL_Delay(frameRate - tempsEcoule);
}</code></pre><p id="r-962943" data-claire-element-id="962943">Cette fois-ci, notre code est complet. :D Affichons enfin notre première texture !</p><figure id="r-962945" data-claire-element-id="962946"><img id="r-962944" data-claire-element-id="962944" src="medias/uploads.siteduzero.com_files_394001_395000_394125.png" alt="Image utilisateur"/></figure><p id="r-962947" data-claire-element-id="962947">Heeeeein ! o_O o_O o_O</p><div id="r-962949" data-claire-element-id="962949" data-claire-semantic="question"><p id="r-962948" data-claire-element-id="962948">Pourquoi la texture est inversée ? C'est pourtant les bonnes coordonnées qu'on a envoyées non ? Qu'est-ce qui s'passe ? :(</p></div><p id="r-962950" data-claire-element-id="962950">C'est tout à fait normal ne vous inquiétez pas. :p Tout à l'heure, je vous ai dit qu'on n'en arrêtait là avec le code de la classe <em><strong>Texture</strong></em>, et que du coup elle serait incomplète. En effet, la librairie <em><strong>SDL_image</strong></em> n'a pas le même repère que nous pour charger les images. Son repère à elle lui se trouve en haut à gauche alors que le notre se situe en bas à droite :</p><figure id="r-962952" data-claire-element-id="962953"><img id="r-962951" data-claire-element-id="962951" src="medias/uploads.siteduzero.com_files_394001_395000_394126.png" alt="Image utilisateur"/></figure><figure id="r-962955" data-claire-element-id="962956"><img id="r-962954" data-claire-element-id="962954" src="medias/uploads.siteduzero.com_files_394001_395000_394127.png" alt="Image utilisateur"/></figure><p id="r-962957" data-claire-element-id="962957">Les textures se retrouvent donc la tête en bas pour nous. Pour corriger ce problème, il nous suffit d'<em>inverser </em>tous les pixels d'une image au moment de son chargement. C'est le fameux dernier point qu'il nous manquait dans notre méthode <strong>charger</strong>(). Nous allons régler ça dans un moment.</p><p id="r-962958" data-claire-element-id="962958">Mais avant cela, je vous conseille de vous entrainer à afficher quelques textures sur plusieurs carrés pour vous familiariser avec l'affichage de texture. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
<span class="arrow"></span>
<span class="next">Chargement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
<span class="next">Améliorations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Amliorations"></a><h2>Améliorations</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
<span class="arrow"></span>
<span class="next">Plaquage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
<span class="next">Aller plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-962962" data-claire-element-id="962962">Si vous n'êtes pas trop fatigués on va pouvoir passer à la dernière partie de ce chapitre. :p</p><p id="r-962963" data-claire-element-id="962963">Les objectifs de cette dernière partie sont :</p><ul id="r-962968" data-claire-element-id="962968"><li id="r-962965" data-claire-element-id="962965"><p id="r-962964" data-claire-element-id="962964">De de terminer l'implémentation de la méthode <strong>charger</strong>() pour afficher nos textures dans le bon sens.</p></li><li id="r-962967" data-claire-element-id="962967"><p id="r-962966" data-claire-element-id="962966">D'améliorer la classe <em><strong>Texture</strong></em> en y ajoutant des méthodes comme le <em>constructeur de copie,</em> l'opérateur <strong>=</strong>, ...</p></li></ul><h2 id="r-l-inversion-des-pixels" data-claire-element-id="963064">L'inversion des pixels</h2><h3 id="r-theorie-24" data-claire-element-id="962984">Théorie</h3><p id="r-962969" data-claire-element-id="962969">Commençons tout de suite par nous n'occuper du premier point : l'inversion des pixels. Vous avez remarqué (avec effroi) que nos textures s'affichent la tête inversée. Il y a deux façons de régler ce problème :</p><ul id="r-962974" data-claire-element-id="962974"><li id="r-962971" data-claire-element-id="962971"><p id="r-962970" data-claire-element-id="962970">Soit on inverse l’ordre de toutes les coordonnées de texture pour afficher l'image à l'envers (mais qui du coup sera dans le bon sens)</p></li><li id="r-962973" data-claire-element-id="962973"><p id="r-962972" data-claire-element-id="962972">Soit on inverse les pixels de l'image <em>avant</em> de la charger coté OpenGL</p></li></ul><p id="r-962975" data-claire-element-id="962975">Comme vous le savez déjà, on va opter pour la seconde solution.</p><p id="r-962976" data-claire-element-id="962976">En effet, la première pourrait fonctionner un temps mais une fois que nous chargerons des modèles depuis des fichiers externes il ne sera plus possible d'inverser les coordonnées de texture. Imaginez-vous en train de modifier 20 000 coordonnées de texture à la main. :lol:</p><p id="r-962977" data-claire-element-id="962977">L'avantage d'inverser les pixels au moment du chargement c'est qu'il nous suffit d'une méthode pour inverser toutes nos textures. Avouez quand même que c’est un gain de temps énorme, si ce n'est astronomique !</p><p id="r-962978" data-claire-element-id="962978">Au niveau de la théorie, il faut juste de créer une copie conforme de la <strong>première surface SDL</strong> (celle qui contient l'image) puis d'inverser ses pixels. C'est grâce à une boucle que nous pourrons effectuer cette opération.</p><p id="r-962979" data-claire-element-id="962979">Cette boucle devra être capable de copier chaque ligne de la texture et d'inverser la position de celle-ci par rapport à l'axe des ordonnées. Et quand je dis copier chaque ligne, je parle de copier <strong>TOUS</strong> les pixels de la ligne <strong>SANS CHANGER L'ORDRE</strong>. En effet, les pixels présents sur l'axe des abscisses sont, eux, dans le bon ordre, il n'y que sur l'axe des ordonnées que ça ne va pas. Il faut conserver l'ordre des pixels sur chaque ligne mais inverser ces fameuses lignes par rapport à l'axe des ordonnées :</p><figure id="r-962981" data-claire-element-id="962982"><img id="r-962980" data-claire-element-id="962980" src="medias/uploads.siteduzero.com_files_395001_396000_395212.png" alt="Image utilisateur"/></figure><p id="r-962983" data-claire-element-id="962983">Essayez de bien comprendre cette notion. Revoyez le rendu de texture de la sous-partie précédente et vous verrez que sur l'axe des abscisses les pixels sont dans le bon ordre mais pas sur l'axe des ordonnées.</p><h3 id="r-la-methode-inverserpixels" data-claire-element-id="963054">La méthode inverserPixels</h3><p id="r-962985" data-claire-element-id="962985">Pour régler notre problème de texture, nous avons donc choisi d'inverser les pixels d'une image avant son chargement du coté OpenGL.</p><p id="r-962986" data-claire-element-id="962986">Pour faire ça proprement, on va déclarer une méthode <strong>inverserPixels</strong>() dans laquelle nous placerons notre code d’inversement. Cette méthode devra prendre en paramètre la surface SDL <strong>à inverser</strong> et elle renverra une autre surface SDL contenant <strong>l'image inversée</strong>.</p><pre id="r-962987" data-claire-element-id="962987"><code data-claire-semantic="cpp">SDL_Surface* inverserPixels(SDL_Surface *imageSource) const;</code></pre><aside id="r-962989" data-claire-element-id="962989" data-claire-semantic="information"><p id="r-962988" data-claire-element-id="962988">On déclare cette méthode en tant que méthode constante car elle ne modifie en rien les attributs de la classe <strong><em>Texture</em></strong>, elle ne fait que renvoyer une surface. ;)</p></aside><p id="r-962990" data-claire-element-id="962990">L'implémentation de cette méthode va être rapide, on commence par créer une copie conforme de la surface SDL envoyée en paramètre. Pour créer les surfaces avec la SDL, on va utiliser une fonction que vous devez déjà connaitre si vous avez suivi le tuto de M@téo dessus : la fonction <strong>SDL_CreateRGBSurface</strong>() :</p><pre id="r-962991" data-claire-element-id="962991"><code data-claire-semantic="cpp">SDL_Surface* SDL_CreateRGBSurface(Uint32 flags, int width, int  height, int depth, Uint32 Rmask, Uint32 Gmask, Uint32 Bmask, Uint32 Amask)</code></pre><p id="r-962992" data-claire-element-id="962992">Houla ! Ça en fait des paramètres tout ça. Si vous connaissez la SDL vous devriez au moins connaitre les 4 premiers. :p Faisons tout de même le point autour des paramètres :</p><ul id="r-963003" data-claire-element-id="963003"><li id="r-962994" data-claire-element-id="962994"><p id="r-962993" data-claire-element-id="962993"><strong>flags </strong>: Option permettant notamment de stocker l'image dans la carte graphique. On lui donnera la valeur <strong>0</strong>. Avec la <em>SDL 1.2</em>, nous aurions pu lui donner la valeur <strong>SDL_HWSURFACE</strong>, mais celle-ci n'est plus utilisée avec la version <strong>2.0</strong></p></li><li id="r-962996" data-claire-element-id="962996"><p id="r-962995" data-claire-element-id="962995"><strong>width </strong>: Largeur de l'image. On lui donnera la valeur du champ <strong>w</strong></p></li><li id="r-962998" data-claire-element-id="962998"><p id="r-962997" data-claire-element-id="962997"><strong>height </strong>: Hauteur de l'image. On lui donnera la valeur du champ <strong>h</strong></p></li><li id="r-963000" data-claire-element-id="963000"><p id="r-962999" data-claire-element-id="962999"><strong>depth </strong>: Profondeur de l'image, on lui donnera la valeur du champ <strong>BitsPerPixel</strong>, qui n'est pas à confondre avec le champ <strong>BytesPerPixel</strong> attention !</p></li><li id="r-963002" data-claire-element-id="963002"><p id="r-963001" data-claire-element-id="963001"><strong>Rmask, Gmask, Bmask, Amask</strong> : Paramètres un peu spéciaux qui concerne le masque des couleurs. On leur donnera les champs respectifs de la structure SDL_Surface.</p></li></ul><p id="r-963004" data-claire-element-id="963004">Avec cette fonction, nous disposerons d'une nouvelle surface identique à la première, excepté le fait qu'elle ne contiendra encore aucun pixel.</p><p id="r-963005" data-claire-element-id="963005">Si on implémente cette fonction, ça nous donne :</p><pre id="r-963006" data-claire-element-id="963006"><code data-claire-semantic="cpp">SDL_Surface* Texture::inverserPixels(SDL_Surface *imageSource) const
{
    // Copie conforme de l'image source sans les pixels

    SDL_Surface *imageInversee = SDL_CreateRGBSurface(0, imageSource-&gt;w, imageSource-&gt;h, imageSource-&gt;format-&gt;BitsPerPixel, imageSource-&gt;format-&gt;Rmask, 
                                                         imageSource-&gt;format-&gt;Gmask, imageSource-&gt;format-&gt;Bmask, imageSource-&gt;format-&gt;Amask);
}</code></pre><aside id="r-963008" data-claire-element-id="963008" data-claire-semantic="information"><p id="r-963007" data-claire-element-id="963007">Je coupe volontairement les paramètres pour ne pas rendre le code trop long. Mais vous pouvez tout coder sur une seule ligne si ça vous chante.</p></aside><p id="r-963009" data-claire-element-id="963009">On a vu dans la partie théorique que l'objectif de cette méthode est de pouvoir copier chaque ligne d'une texture afin d'inverser leur position sur l'axe des ordonnées, ceci à l'aide d'une boucle. En code &quot;grossier&quot; ça va nous donner ça :</p><pre id="r-963010" data-claire-element-id="963010"><code data-claire-semantic="cpp">for(int i(0); i &lt; hauteur; i++)
{
    for(int j(0); j &lt; largeur; j++)
        imageInversee-&gt;pixels[hauteur - i][j] = imageSource-&gt;pixels[i][j];
}</code></pre><p id="r-963011" data-claire-element-id="963011">Pas de panique je vous explique. :)</p><p id="r-963012" data-claire-element-id="963012">On remarque que grâce à cette boucle, chaque pixel présent sur la largeur de la texture (<strong>à l'indice j</strong>) sera copié exactement au même endroit dans l'image finale <strong>à l'indice j</strong> (vu qu'ils sont dans le bon ordre sur la largeur). Par exemple, un pixel présent en <strong>j = 10ième position</strong> dans l'image source sera copié au même endroit dans l'image finale en <strong>j = 10ième position</strong>.</p><p id="r-963013" data-claire-element-id="963013">En revanche, toute la ligne se retrouve inversée par rapport à sa position initiale : la ligne qui était présente en <strong>position i</strong> sur l'image source se retrouvera en <strong>position hauteur - i</strong>. Par exemple prenons une image 256x256, la ligne qui se trouvait en <strong>5ième position</strong> se retrouvera en <strong>[256 - 5] = 251ième position</strong>, la ligne s'est retrouvé en haut de l'image.</p><p id="r-963014" data-claire-element-id="963014">Si nous pouvions écrire directement cette boucle dans notre code ça serait le rêve. Cependant il existe un gros problème : le champ <em><strong>pixels</strong></em> de la structure <em>SDL_Surface</em> n'est pas un tableau à deux dimensions, il est donc impossible d'utiliser les doubles cases <strong>[i][j]</strong>. :(</p><p id="r-963015" data-claire-element-id="963015">Néanmoins, il existe une façon de contrer cela dans les tableaux à une dimension. En effet :</p><ul id="r-963020" data-claire-element-id="963020"><li id="r-963017" data-claire-element-id="963017"><p id="r-963016" data-claire-element-id="963016">Un pixel du type <strong>[i][j]</strong> peut être remplacé par un indice du type <strong>[(largeur * i) + j]</strong> et</p></li><li id="r-963019" data-claire-element-id="963019"><p id="r-963018" data-claire-element-id="963018">Le pixel inverse de type <strong>[hauteur - i][j]</strong> peut être remplacé par <strong>[(largeur * (hauteur - i)) + j]</strong></p></li></ul><p id="r-963021" data-claire-element-id="963021">Par exemple, si on veut inverser un pixel situé à la position <strong>[5][10]</strong> sur l'image 256x256, on devra :</p><ul id="r-963026" data-claire-element-id="963026"><li id="r-963023" data-claire-element-id="963023"><p id="r-963022" data-claire-element-id="963022">Récupérer l'indice source en position <strong>[(256 * 5) + j]</strong> = [1280 + 10] = <strong>[1290]</strong></p></li><li id="r-963025" data-claire-element-id="963025"><p id="r-963024" data-claire-element-id="963024">Que l'on copiera dans l'image finale en position <strong>[(256 * (256 - 5)) + 10]</strong> = [(256 * 251) + 10] = [64256] = <strong>[64266]</strong></p></li></ul><p id="r-963027" data-claire-element-id="963027">Oui oui, ces chiffres donnent le tournis mais on a bien inversé notre pixel dans le bon sens. :p</p><p id="r-963028" data-claire-element-id="963028">Avec cette méthode, on récupère bien notre pixel même si on est en présence d'un tableau à une dimension. :D Du coup, la boucle précédente devient :</p><pre id="r-963029" data-claire-element-id="963029"><code data-claire-semantic="cpp">for(int i(0); i &lt; hauteur; i++)
{
    for(int j(0); j &lt; largeur; j++)
        imageInversee-&gt;pixels[(largeur * i) + j] = imageSource-&gt;pixels[(largeur * (hauteur - i)) + j];
}</code></pre><p id="r-963030" data-claire-element-id="963030">On est maintenant prêt pour coder notre méthode. :D Dernier petit détail cependant, je vous rappelle qu'en C++ il est malheureusement interdit d'utiliser un tableau contenu dans un pointeur (exemple : <strong>imageSource-&gt;pixels[56]</strong>), il va donc falloir passer par des tableaux intermédiaires pour manipuler les pixels :</p><pre id="r-963031" data-claire-element-id="963031"><code data-claire-semantic="cpp">SDL_Surface* Texture::inverserPixels(SDL_Surface *imageSource) const
{
    // Copie conforme de l'image source sans les pixels

    SDL_Surface *imageInversee = SDL_CreateRGBSurface(0, imageSource-&gt;w, imageSource-&gt;h, imageSource-&gt;format-&gt;BitsPerPixel, imageSource-&gt;format-&gt;Rmask, 
                                                         imageSource-&gt;format-&gt;Gmask, imageSource-&gt;format-&gt;Bmask, imageSource-&gt;format-&gt;Amask);


    // Tableau intermédiaires permettant de manipuler les pixels

    unsigned char* pixelsSources = (unsigned char*) imageSource-&gt;pixels;
    unsigned char* pixelsInverses = (unsigned char*) imageInversee-&gt;pixels;
}</code></pre><aside id="r-963033" data-claire-element-id="963033" data-claire-semantic="information"><p id="r-963032" data-claire-element-id="963032">Pour plus de clarté, j'ai déclaré les tableaux sur deux lignes, vous pouvez très bien le faire sur une seule. ;)</p></aside><p id="r-963034" data-claire-element-id="963034">Reprenons le grossier code de la boucle pour la convertir en code fonctionnel :</p><pre id="r-963035" data-claire-element-id="963035"><code data-claire-semantic="cpp">// Inversion des pixels

for(int i = 0; i &lt; imageSource-&gt;h; i++)
{
    for(int j = 0; j &lt; imageSource-&gt;w; j++)
        pixelsInverses[(imageSource-&gt;w * (imageSource-&gt;h - 1 - i)) + j] = pixelsSources[(imageSource-&gt;w * i) + j];
}</code></pre><p id="r-963036" data-claire-element-id="963036">Remarquez le <strong>-1</strong> dans l'indice de l'image inversée <strong>[(image-&gt;w * (imageSource-&gt;h - 1 - i)) + j]</strong>, je vous rappelle que l'on travaille avec des tableaux donc les indices partent de <strong>0</strong> pour arriver à <strong>hauteur- 1</strong>. Je n'en parle que maintenant car je ne voulais pas surcharger la boucle précédente. Déjà que la notion n'est pas évidente à intégrer. :)</p><p id="r-963037" data-claire-element-id="963037">Nous avons pratiquement terminé notre boucle, il ne manque plus qu'une seule chose : jusqu'à maintenant, cette boucle permettait d'échanger des pixels entre eux, mais je vous rappelle qu'un pixel est composé de 3 couleurs. Pour le moment, nous n'échangeons qu'un tiers de la texture, et encore cet échange est complétement buggé !</p><p id="r-963038" data-claire-element-id="963038">Pour pallier à ce problème, il suffit juste de <em>multiplier</em> par 3 ou par 4 (pour la composante alpha) la boucle qui parcourt la ligne, car chaque ligne du tableau fait en réalité 3 ou 4 fois la longueur de l'image :</p><figure id="r-963040" data-claire-element-id="963041"><img id="r-963039" data-claire-element-id="963039" src="medias/uploads.siteduzero.com_files_395001_396000_395212.png" alt="Image utilisateur"/></figure><figure id="r-963043" data-claire-element-id="963044"><img id="r-963042" data-claire-element-id="963042" src="medias/uploads.siteduzero.com_files_395001_396000_395213.png" alt="Image utilisateur"/></figure><aside id="r-963046" data-claire-element-id="963046" data-claire-semantic="warning"><p id="r-963045" data-claire-element-id="963045">Il ne faut surtout pas multiplier la boucle parcourant la hauteur ! Sinon vous vous retrouvez à charger des zones mémoires qui ne vous appartiennent pas. Il n'y a que la boucle de la largeur qui doit être modifiée.</p></aside><p id="r-963047" data-claire-element-id="963047">Dans notre code, il suffit de rajouter un &quot;<strong>* imageSource-&gt;format-&gt;BytesPerPixel</strong>&quot; partout où vous trouvez le champ <strong>imageSource-&gt;w</strong> (y compris dans la boucle), soit 3 fois normalement :</p><pre id="r-963048" data-claire-element-id="963048"><code data-claire-semantic="cpp">// Inversion des pixels

for(int i = 0; i &lt; imageSource-&gt;h; i++)
{
    for(int j = 0; j &lt; imageSource-&gt;w * imageSource-&gt;format-&gt;BytesPerPixel; j++)
        pixelsInverses[(imageSource-&gt;w * imageSource-&gt;format-&gt;BytesPerPixel * (imageSource-&gt;h - 1 - i)) + j] = pixelsSources[(imageSource-&gt;w * imageSource-&gt;format-&gt;BytesPerPixel * i) + j];
}</code></pre><p id="r-963049" data-claire-element-id="963049">Avec cette boucle, nous pourrons inverser tous les pixels d'une image et ainsi les afficher à l'endroit dans nos scènes 3D. ;)</p><p id="r-963050" data-claire-element-id="963050">Pour terminer la méthode, il ne nous manque plus qu'à retourner la nouvelle surface SDL :</p><pre id="r-963051" data-claire-element-id="963051"><code data-claire-semantic="cpp">// Retour de l'image inversée

return imageInversee;</code></pre><p id="r-963052" data-claire-element-id="963052">Ce qui nous donne au final :</p><pre id="r-963053" data-claire-element-id="963053"><code data-claire-semantic="cpp">SDL_Surface* Texture::inverserPixels(SDL_Surface *imageSource) const
{
    // Copie conforme de l'image source sans les pixels

    SDL_Surface *imageInversee = SDL_CreateRGBSurface(0, imageSource-&gt;w, imageSource-&gt;h, imageSource-&gt;format-&gt;BitsPerPixel, imageSource-&gt;format-&gt;Rmask, 
                                                         imageSource-&gt;format-&gt;Gmask, imageSource-&gt;format-&gt;Bmask, imageSource-&gt;format-&gt;Amask);


    // Tableau intermédiaires permettant de manipuler les pixels

    unsigned char* pixelsSources = (unsigned char*) imageSource-&gt;pixels;
    unsigned char* pixelsInverses = (unsigned char*) imageInversee-&gt;pixels;


    // Inversion des pixels

    for(int i = 0; i &lt; imageSource-&gt;h; i++)
    {
        for(int j = 0; j &lt; imageSource-&gt;w * imageSource-&gt;format-&gt;BytesPerPixel; j++)
            pixelsInverses[(imageSource-&gt;w * imageSource-&gt;format-&gt;BytesPerPixel * (imageSource-&gt;h - 1 - i)) + j] = pixelsSources[(imageSource-&gt;w * imageSource-&gt;format-&gt;BytesPerPixel * i) + j];
    }


    // Retour de l'image inversée

    return imageInversee;
}</code></pre><h3 id="r-adaptation-dans-la-methode-charger" data-claire-element-id="963063">Adaptation dans la méthode charger</h3><p id="r-963055" data-claire-element-id="963055">Maintenant que nous sommes capables d'inverser le sens d'une image, nous pouvons intégrer la nouvelle méthode dans le chargement de texture. Il nous suffit d'appeler la méthode <strong>inverserPixels</strong>() juste après avoir chargé la surface SDL. Bien évidemment, on pense à détruire l'ancienne surface qui ne sert plus rien :</p><pre id="r-963056" data-claire-element-id="963056"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());

    if(imageSDL == 0)
    {
        printf(&quot;IMG_Load: %s\n&quot;, IMG_GetError());
        return false;
    }


    // Inversion de l'image

    SDL_Surface *imageInversee = inverserPixels(imageSDL);
    SDL_FreeSurface(imageSDL);


    // ....
}</code></pre><p id="r-963057" data-claire-element-id="963057">Il ne reste plus qu'à remplacer toutes les occurrences du pointeur <em><strong>imageSDL</strong></em> par le pointeur <em><strong>imageSDLInversee</strong></em> (Vous devriez trouver 9 occurrences à remplacer). Ce qui donne au final :</p><pre id="r-963058" data-claire-element-id="963058"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());

    if(imageSDL == 0)
    {
        std::cout &lt;&lt; &quot;Erreur : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        return false;
    }


    // Inversion de l'image

    SDL_Surface *imageInversee = inverserPixels(imageSDL);
    SDL_FreeSurface(imageSDL);


    // Génération de l'ID

    glGenTextures(1, &amp;m_id);


    // Verrouillage

    glBindTexture(GL_TEXTURE_2D, m_id);


    // Format de l'image

    GLenum formatInterne(0);
    GLenum format(0);


    // Détermination du format et du format interne pour les images à 3 composantes

    if(imageInversee-&gt;format-&gt;BytesPerPixel == 3)
    {
        // Format interne

        formatInterne = GL_RGB;


        // Format

        if(imageInversee-&gt;format-&gt;Rmask == 0xff)
            format = GL_RGB;

        else
            format = GL_BGR;
    }


    // Détermination du format et du format interne pour les images à 4 composantes

    else if(imageInversee-&gt;format-&gt;BytesPerPixel == 4)
    {
        // Format interne

        formatInterne = GL_RGBA;


        // Format

        if(imageInversee-&gt;format-&gt;Rmask == 0xff)
            format = GL_RGBA;

        else
            format = GL_BGRA;
    }


    // Dans les autres cas, on arrête le chargement

    else
    {
        std::cout &lt;&lt; &quot;Erreur, format interne de l'image inconnu&quot; &lt;&lt; std::endl;
        SDL_FreeSurface(imageInversee);

        return false;
    }


    // Copie des pixels

    glTexImage2D(GL_TEXTURE_2D, 0, formatInterne, imageInversee-&gt;w, imageInversee-&gt;h, 0, format, GL_UNSIGNED_BYTE, imageInversee-&gt;pixels);


    // Application des filtres

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);


    // Déverrouillage

    glBindTexture(GL_TEXTURE_2D, 0);


    // Fin de la méthode

    SDL_FreeSurface(imageInversee);
    return true;
}</code></pre><p id="r-963059" data-claire-element-id="963059">Et voila nous pouvons enfin charger des textures dans le bon ordre. :D Essayez avec la texture de la caisse de missiles, vous verrez qu'elle s'affiche désormais à l'endroit :</p><figure id="r-963061" data-claire-element-id="963062"><img id="r-963060" data-claire-element-id="963060" src="medias/uploads.siteduzero.com_files_395001_396000_395218.png" alt="Image utilisateur"/></figure><h2 id="r-les-methodes-additionnelles" data-claire-element-id="963128">Les méthodes additionnelles</h2><p id="r-963065" data-claire-element-id="963065">On va terminer tranquillement ce chapitre par quelques méthodes importantes qu'il faut implémenter, à savoir : le constructeur par défaut, celui de copie, le destructeur et la surcharge de l'opérateur <strong>=</strong>.</p><p id="r-963066" data-claire-element-id="963066">Ces méthodes sont importantes pour assurer le bon cycle de vie de la classe <strong><em>Texture</em></strong>. Le constructeur par défaut par exemple est utile lorsque vous souhaitez initialiser tout un tableau de textures, l'opérateur <strong>=</strong> quant à lui sert à copier une texture facilement en une ligne de code, etc ...</p><h3 id="r-le-constructeur-par-defaut-et-le-destructeur" data-claire-element-id="963084">Le constructeur par défaut et le destructeur</h3><p id="r-963067" data-claire-element-id="963067">On va commencer tout de suite par implémenter le <em>constructeur par défaut</em> et le <em>destructeur</em>.</p><p id="r-963068" data-claire-element-id="963068">Je vous rappelle que le <em>constructeur par défaut</em> est appelé lorsque vous ne donnez aucun paramètre à votre objet. Son prototype est le suivant :</p><pre id="r-963069" data-claire-element-id="963069"><code data-claire-semantic="cpp">Texture();</code></pre><p id="r-963070" data-claire-element-id="963070">Son rôle ne lui permet que d'initialiser les deux attributs de la classe. Il va affecter l'<strong>ID 0</strong> à l'attribut <strong><em>m_id</em></strong> et une chaine vide à <strong><em>m_fichierImage</em></strong> :</p><pre id="r-963071" data-claire-element-id="963071"><code data-claire-semantic="cpp">Texture::Texture() : m_id(0), m_fichierImage(&quot;&quot;)
{

}</code></pre><p id="r-963072" data-claire-element-id="963072">Occupons maintenant du <em>destructeur</em>. Cette &quot;méthode&quot; est appelée à chaque fois qu'un objet est détruit, c'est notamment ici que nous devrons détruire nos textures. Car oui, même les <em>objets OpenGL</em> doivent être détruits pour libérer la mémoire qu'ils occupent.</p><p id="r-963073" data-claire-element-id="963073">Les <em>objets OpenGL</em> sont alloués dynamiquement dans la carte graphique par la fonction <strong>glGenTextures</strong>(), il va nous falloir libérer l'espace occupé pour éviter les fuites de mémoire. Pour ça, OpenGL nous fournit une fonction qui reprend exactement les mêmes paramètres que <strong>glGenTextures</strong>(). Voici son prototype :</p><pre id="r-963074" data-claire-element-id="963074"><code data-claire-semantic="cpp">void glDeleteTextures(GLsizei number, const GLuint *textures);</code></pre><ul id="r-963079" data-claire-element-id="963079"><li id="r-963076" data-claire-element-id="963076"><p id="r-963075" data-claire-element-id="963075"><strong>number</strong> : Le <strong>nombre d'ID</strong> à initialiser. Comme pour la génération, nous lui donnerons la valeur <strong>1</strong></p></li><li id="r-963078" data-claire-element-id="963078"><p id="r-963077" data-claire-element-id="963077"><strong>textures</strong> : Un tableau de type <strong>GLuint</strong> ou une adresse d'<strong>ID</strong>. Nous lui donnerons l'adresse de l'<strong>ID</strong> à détruire</p></li></ul><p id="r-963080" data-claire-element-id="963080">Nous utiliserons cette fonction dans notre <em>destructeur</em> dont j'espère que vous connaissez son utilité. :p</p><p id="r-963081" data-claire-element-id="963081">Il est appelé au moment de la destruction d'un objet pour permettre au développeur de libérer toute la mémoire qu'il avait prise. D'ailleurs, nous avions déjà déclaré cette &quot;méthode&quot; précédemment, il ne nous reste donc plus qu'à utiliser la fonction <strong>glDeleteTextures</strong>() à l'intérieur :</p><pre id="r-963082" data-claire-element-id="963082"><code data-claire-semantic="cpp">Texture::~Texture()
{
    // Destruction de la texture

    glDeleteTextures(1, &amp;m_id);
}</code></pre><p id="r-963083" data-claire-element-id="963083">Et voila, nos textures seront maintenant détruites proprement lorsqu'elles ne seront plus utilisées. :)</p><h3 id="r-copier-une-texture" data-claire-element-id="963127">Copier une texture</h3><p id="r-963085" data-claire-element-id="963085">On passe maintenant à la copie de textures. Mais avant ça, je vais d'abord vous faire une petite parenthèse sur le chargement des textures dans un vrai jeux-vidéo.</p><p id="r-963086" data-claire-element-id="963086">Dans un jeu-vidéo lambda, le moteur 3D doit être capable de charger toutes les textures dont il a besoin dans un espèce de gros tableau qui doit être accessible par toutes les classes :</p><figure id="r-963088" data-claire-element-id="963089"><img id="r-963087" data-claire-element-id="963087" src="medias/uploads.siteduzero.com_files_395001_396000_395463.png" alt="Image utilisateur"/></figure><p id="r-963090" data-claire-element-id="963090">A partir de là, chaque modèle 3D (comme un personnage ou un arbre) va récupérer un pointeur sur la texture dont il aura besoin, ce n'est donc pas lui qui va charger sa propre texture. Et de plus, si vous avez une dizaine d'ennemis qui doit s'afficher à l'écran, vous n'allez pas charger 10 fois les mêmes textures pour les 10 ennemis. En théorie, chaque personnage devrait récupérer un pointeur sur la texture dont il a besoin dans le gros tableau pour l'utiliser. De cette façon, les textures ne sont chargées qu'une seule fois et ça économise pas mal de ressources.</p><p id="r-963091" data-claire-element-id="963091">Je vous parle de ça maintenant car c'est ce que nous &quot;<em>devrions faire</em>&quot; en réalité. Cependant nos scènes étant encore assez simples nous pouvons nous permettre de charger une texture plusieurs fois sans se préoccuper de créer le gros tableau. :)</p><p id="r-963092" data-claire-element-id="963092">Bien, ceci étant dit on va pouvoir retourner à nos méthodes de copie.</p><p id="r-963093" data-claire-element-id="963093">Il existe grosso-modo deux façons de copier une texture : soit on utilise le constructeur de copie, soit on surcharge l'opérateur <strong>=</strong>. La différence entre les deux est que si vous initialisez une texture à partir d'une autre texture, alors ce sera le constructeur de copie qui sera appelé. En revanche, si vous le faites après sa déclaration se sera l'opérateur <strong>=</strong> qui sera sollicité.</p><p id="r-963094" data-claire-element-id="963094">On va commencer l'implémentation de ces deux méthodes par le constructeur de copie dont voici le prototype :</p><pre id="r-963095" data-claire-element-id="963095"><code data-claire-semantic="cpp">Texture(Texture const &amp;textureACopier);</code></pre><aside id="r-963097" data-claire-element-id="963097" data-claire-semantic="information"><p id="r-963096" data-claire-element-id="963096">Vu que l'on commence à bien manipuler les objets, nous utiliserons de plus en plus les références dans nos programmes. ;)</p></aside><p id="r-963098" data-claire-element-id="963098">Le constructeur prend en paramètre une <strong><em>référence constante</em></strong> sur l'objet à copier, dans notre cas une texture.</p><p id="r-963099" data-claire-element-id="963099">Petit point important : si nous avons besoin de coder nous-même ce constructeur c'est parce qu'il y a, en général, un problème au niveau des pointeurs lors de la copie d'un objet. En effet, si on dispose de deux copies d'une même texture alors elles partagerons le même <em><strong>ID</strong></em>. Or, si on détruit l'une des deux textures, la deuxième se retrouvera avec un <strong>ID</strong><em>ID invalide</em> et donc une erreur d'affichage.</p><p id="r-963100" data-claire-element-id="963100">Alors bon, il est vrai que dans notre classe l'<strong>ID</strong> n'est qu'une simple variable. Mais pour votre carte graphique cet <strong>ID</strong> représente un pointeur pointant sur la texture chargée.</p><p id="r-963101" data-claire-element-id="963101">Par conséquent, pour copier proprement deux textures il va falloir créer un nouvel <strong>ID</strong> indépendant du premier. De cette façon, même si un objet est détruit, la copie ne sera pas affectée.</p><p id="r-963102" data-claire-element-id="963102">Dans la classe <strong>Texture</strong>, nous devrons donc :</p><ul id="r-963107" data-claire-element-id="963107"><li id="r-963104" data-claire-element-id="963104"><p id="r-963103" data-claire-element-id="963103">Copier l'attribut <strong><em>m_fichierImage</em></strong> qui contient le chemin vers le fichier image</p></li><li id="r-963106" data-claire-element-id="963106"><p id="r-963105" data-claire-element-id="963105"><strong>Recharger</strong> la texture pour avoir un nouvel <strong>ID</strong> indépendant du premier</p></li></ul><p id="r-963108" data-claire-element-id="963108">Le constructeur de copie ressemblera donc à ceci :</p><pre id="r-963109" data-claire-element-id="963109"><code data-claire-semantic="cpp">Texture::Texture(Texture const &amp;textureACopier)
{
    // Copie de la texture

    m_fichierImage = textureACopier.m_fichierImage;
    charger();
}</code></pre><p id="r-963110" data-claire-element-id="963110">Rien de plus facile isn't it ? :lol:</p><p id="r-963111" data-claire-element-id="963111">D'ailleurs on va s'occuper maintenant de coder la surcharge de l'opérateur <strong>=</strong> car le code ne change pas vraiment. Le prototype de cette surcharge sera le suivant :</p><pre id="r-963112" data-claire-element-id="963112"><code data-claire-semantic="cpp">Texture&amp; operator=(Texture const &amp;textureACopier);</code></pre><aside id="r-963114" data-claire-element-id="963114" data-claire-semantic="information"><p id="r-963113" data-claire-element-id="963113">La méthode retournera bien une référence sur un objet de type <em><strong>Texture</strong></em>. Cette référence concerna d'ailleurs l'objet lui-même (pointeur <strong>this</strong>).</p></aside><p id="r-963115" data-claire-element-id="963115">Pour cette méthode, on copie simplement le même code que le constructeur de copie puis on renvoie le pointeur <strong><em>*this</em></strong> :</p><pre id="r-963116" data-claire-element-id="963116"><code data-claire-semantic="cpp">Texture&amp; Texture::operator=(Texture const &amp;textureACopier)
{
    // Copie de la texture

    m_fichierImage = textureACopier.m_fichierImage;
    charger();


    // Retour du pointeur *this

    return *this;
}</code></pre><p id="r-963117" data-claire-element-id="963117">Il manque encore un tout petit détail à cette méthode - un détail qui s'étend même au chargement en général. Imaginez qu'une texture soit déjà chargée et que l'on copie une autre texture dans celle-ci, que se passerait-il ?</p><p id="r-963118" data-claire-element-id="963118">Et bien le premier <strong>ID</strong> qui a été initialisé sera perdu, et du coup la texture qui a été chargée en mémoire sera elle aussi perdue. C'est encore une fuite. Pour régler ce petit problème, il faut simplement détruire l'ancien <strong>ID</strong> de la même façon qu'avec le destructeur. Dans le pire des cas, même si la texture n'était pas chargée avant, ce sera l'<strong>ID 0</strong> qu'OpenGL essaiera de détruire. Mais vu que c'est impossible il passera à autre chose sans nous renvoyer d'erreur.</p><p id="r-963119" data-claire-element-id="963119">Si j'ai dit que ce problème s'étendait aussi au chargement de texture en général, c'est parce que nous avons exactement le même problème lorsque nous utilisons la méthode <strong>charger</strong>(). En effet, si nous utilisons cette méthode deux fois sur le même objet, alors le premier chargement qui a été fait sera perdu en mémoire.</p><p id="r-963120" data-claire-element-id="963120">Pour régler ce problème, nous allons rajouter un petit bout de code dans la méthode <strong>charger</strong>() juste avant de générer l'identifiant. Ce code sera constitué d'une condition <strong>if</strong> qui permettra de savoir si une texture a déjà été chargée. Si oui, alors il faudra la détruire avant de la recharger.</p><p id="r-963121" data-claire-element-id="963121">La fonction qui permet de savoir ceci s'appelle <strong>glIsTexture</strong>() :</p><pre id="r-963122" data-claire-element-id="963122"><code data-claire-semantic="cpp">GLboolean glIsTexture(GLuint texture);</code></pre><p id="r-963123" data-claire-element-id="963123">Elle ne prend en paramètre que l'identifiant de la texture à vérifier. Elle renvoie la valeur <strong>GL_TRUE</strong> si elle a déjà été chargée et <strong>GL_FALSE</strong> dans le cas contraire.</p><p id="r-963124" data-claire-element-id="963124">Nous devons donc appeler cette fonction avant de générer l'ID. Si elle renvoie <strong>GL_TRUE</strong> alors il faudra détruire la texture à l'aide de <strong>glDeleteTextures</strong>() :</p><pre id="r-963125" data-claire-element-id="963125"><code data-claire-semantic="cpp">bool Texture::charger()
{
    // Chargement de l'image dans une surface SDL

    SDL_Surface *imageSDL = IMG_Load(m_fichierImage.c_str());

    if(imageSDL == 0)
    {
        std::cout &lt;&lt; &quot;Erreur : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        return false;
    }


    // Inversion de l'image

    SDL_Surface *imageInversee = inverserPixels(imageSDL);
    SDL_FreeSurface(imageSDL);


    // Destruction d'une éventuelle ancienne texture

    if(glIsTexture(m_id) == GL_TRUE)
        glDeleteTextures(1, &amp;m_id);


    .....</code></pre><p id="r-963126" data-claire-element-id="963126">Et voila, nos méthodes de copie sont maintenant complètes et prêtes à l'emploi. :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
<span class="arrow"></span>
<span class="next">Plaquage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
<span class="next">Aller plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Allerplusloin"></a><h2>Aller plus loin</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
<span class="arrow"></span>
<span class="next">Améliorations</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">
<span class="next">La caméra</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-repeter-une-texture" data-claire-element-id="963198">Répéter une texture</h2><h3 id="r-fonctionnement-44" data-claire-element-id="963163">Fonctionnement</h3><p id="r-963130" data-claire-element-id="963130">Maintenant que l'on peut afficher une texture dans le bon sens, je vais vous montrer la technique utilisée pour répéter une texture plusieurs fois. Si vous avez déjà joué à un jeu-vidéo, vous avez peut-être remarqué que les textures au sol se répétait en boucle.</p><p id="r-963131" data-claire-element-id="963131">On peut prendre l'exemple d'un sol composé d'herbe :</p><figure id="r-963133" data-claire-element-id="963134"><img id="r-963132" data-claire-element-id="963132" src="medias/uploads.siteduzero.com_files_418001_419000_418149.png" alt="Image utilisateur"/></figure><p id="r-963135" data-claire-element-id="963135">Si vous vous concentrez sur cette image, vous remarquerez qu'elle est composée d'une seule petite texture qui se répète en boucle.</p><p id="r-963136" data-claire-element-id="963136">Si un jeu-vidéo devait afficher ce sol et qu'il s'amuserait à charger la même texture pour chaque carré d'herbe, alors il deviendrait totalement injouable et serait beaucoup trop lent. A la place, il se contentera de la charger une seule fois puis il utilisera des coordonnées de texture '<em><strong>spéciales</strong></em>' pour la répéter :</p><figure id="r-963138" data-claire-element-id="963139"><img id="r-963137" data-claire-element-id="963137" src="medias/uploads.siteduzero.com_files_418001_419000_418150.jpg" alt="Image utilisateur"/></figure><figure id="r-963141" data-claire-element-id="963142"><img id="r-963140" data-claire-element-id="963140" src="medias/uploads.siteduzero.com_files_418001_419000_418151.png" alt="Image utilisateur"/></figure><p id="r-963143" data-claire-element-id="963143">Cette technique est utilisée par tous les jeux-vidéo. Sans elle, il n'y en aurait pas beaucoup d'ailleurs car ils seraient tous terriblement lents à l'affichage. :p</p><p id="r-963144" data-claire-element-id="963144">Bon en réalité les coordonnées utilisées n'ont rien de <strong><em>spéciales</em></strong>, elles ne sont juste pas comprises entre <strong>0</strong> et <strong>1</strong>.</p><div id="r-963146" data-claire-element-id="963146" data-claire-semantic="question"><p id="r-963145" data-claire-element-id="963145">Hein ? Mais tu as dit que les coordonnées de texture devaient <strong><em>toujours</em></strong> être comprises entre <strong>0</strong> et <strong>1</strong> ?</p></div><p id="r-963147" data-claire-element-id="963147">Oui et c'est totalement vrai !</p><p id="r-963148" data-claire-element-id="963148">Si vous allez au-delà de <strong>1</strong> (<strong>2</strong> par exemple) ou en dessous de <strong>0</strong> alors vous répéterez la même texture :</p><figure id="r-963150" data-claire-element-id="963151"><img id="r-963149" data-claire-element-id="963149" src="medias/uploads.siteduzero.com_files_418001_419000_418152.png" alt="Image utilisateur"/></figure><p id="r-963152" data-claire-element-id="963152">Les coordonnées sont toujours comprises entre <strong>0</strong> et <strong>1</strong> mais au lieu de renvoyer une erreur, OpenGL recopiera la texture. Bien évidemment, plus vous fournissez des valeurs importantes, plus votre texture sera répétée :</p><figure id="r-963154" data-claire-element-id="963155"><img id="r-963153" data-claire-element-id="963153" src="medias/uploads.siteduzero.com_files_418001_419000_418153.png" alt="Image utilisateur"/></figure><p id="r-963156" data-claire-element-id="963156">Ce n'est absolument pas un bug puisque c'est prévu par OpenGL et c'est même <strong>LA</strong> technique à utiliser pour répéter vos textures que ce soit sur les sols, les murs, ... Nous ferons comme ça dans le futur pour afficher de grands espaces. :)</p><p id="r-963157" data-claire-element-id="963157">Le seul point à prendre en compte c'est qu'il faut que votre texture soit prévue pour la répétition, si elle ne l'est pas vous aurez un rendu assez moche et pas continu. En général, ce point concerne surtout le graphiste et non le développeur (une bonne raison de lui râler dessus si ça ne va pas :p )</p><p id="r-963158" data-claire-element-id="963158">Vous pouvez essayer de voir ce que ça donne avec la texture que l'on utilise dans ce chapitre. Remplacez les coordonnées par celles-ci pour l'affiche 12 fois !</p><pre id="r-963159" data-claire-element-id="963159"><code data-claire-semantic="cpp">// Coordonnées de texture

float coordTexture[] = {0, 0,   4, 0,   4, 4,     // Triangle 1
                        0, 0,   0, 4,   4, 4};    // Triangle 2</code></pre><figure id="r-963161" data-claire-element-id="963162"><img id="r-963160" data-claire-element-id="963160" src="medias/uploads.siteduzero.com_files_418001_419000_418154.png" alt="Image utilisateur"/></figure><h3 id="r-exercice-44" data-claire-element-id="963181">Exercice</h3><p id="r-963164" data-claire-element-id="963164">La répétition de texture est une occasion parfaite pour moi de vous proposer un petit exercice à faire.</p><p id="r-963165" data-claire-element-id="963165">En reprenant ce qu'on vient de voir, essayez de recréer le sol constitué d'herbe que je vous ai montré au-dessus. Les consignes sont les suivantes :</p><ul id="r-963170" data-claire-element-id="963170"><li id="r-963167" data-claire-element-id="963167"><p id="r-963166" data-claire-element-id="963166">Vous ne devez utiliser que <strong>4</strong> vertices (fournis dans le schéma ci-dessous)</p></li><li id="r-963169" data-claire-element-id="963169"><p id="r-963168" data-claire-element-id="963168">Répéter la texture <strong>49</strong> fois (<strong>7</strong> fois en largeur et en hauteur)</p></li></ul><p id="r-963171" data-claire-element-id="963171">Vous pouvez télécharger l'image à afficher un peu plus haut ou si vous avez téléchargé l’archive, vous la retrouverez sous le nom de &quot;<strong>veg005.jpg</strong>&quot;.</p><p id="r-963172" data-claire-element-id="963172">Voici le schéma explicatif :</p><figure id="r-963174" data-claire-element-id="963175"><img id="r-963173" data-claire-element-id="963173" src="medias/uploads.siteduzero.com_files_420001_421000_420477.png" alt="Image utilisateur"/></figure><p id="r-963176" data-claire-element-id="963176">Et voici ce que vous devriez obtenir (en plaçant votre caméra un peu différemment pour mieux voir) :</p><figure id="r-963178" data-claire-element-id="963179"><img id="r-963177" data-claire-element-id="963177" src="medias/uploads.siteduzero.com_files_420001_421000_420479.png" alt="Image utilisateur"/></figure><p id="r-963180" data-claire-element-id="963180">Bonne chance. ;) (et n’oubliez pas de verrouiller votre texture !)</p><h3 id="r-solution-104" data-claire-element-id="963197">Solution</h3><p id="r-963182" data-claire-element-id="963182">La solution de cette exercice est assez simple, nous n'avons que quelques lignes de code à modifier par rapport à l'exemple que l'on a vu.</p><p id="r-963183" data-claire-element-id="963183">En premier, il fallait définir les vertices. Nous faisons des carrés depuis un moment maintenant il n'aurait pas dû y avoir de problèmes :</p><pre id="r-963184" data-claire-element-id="963184"><code data-claire-semantic="cpp">// Vertices

float vertices[] = {-10, 0, -10,   10, 0, -10,   10, 0, 10,    // Triangle 1
                    -10, 0, -10,   -10, 0, 10,   10, 0, 10};   // Triangle 2</code></pre><p id="r-963185" data-claire-element-id="963185">N'oubliez pas qu'il fallait afficher un sol, les vertices étaient donc tous à la hauteur 0.</p><p id="r-963186" data-claire-element-id="963186">Ensuite, il fallait définir les coordonnées de texture. Nous avons vu que si on allait plus que 1 dans leurs valeurs alors on attaquait un autre affichage de la même texture. Il fallait l'afficher 7 fois en largeur et en hauteur, donc les coordonnées maximales à utiliser étaient respectivement [7 ; 0] et [0 ; 7].</p><p id="r-963187" data-claire-element-id="963187">On peut représenter la situation avec le schéma suivant :</p><figure id="r-963189" data-claire-element-id="963190"><img id="r-963188" data-claire-element-id="963188" src="medias/uploads.siteduzero.com_files_420001_421000_420478.png" alt="Image utilisateur"/></figure><p id="r-963191" data-claire-element-id="963191">Le tableau <strong>coordTexture</strong> à utiliser était donc le suivant :</p><pre id="r-963192" data-claire-element-id="963192"><code data-claire-semantic="cpp">// Coordonnées de texture

float coordTexture[] = {0, 0,   7, 0,   7, 7,     // Triangle 1
                        0, 0,   0, 7,   7, 7};    // Triangle 2</code></pre><p id="r-963193" data-claire-element-id="963193">Une fois les données définies, il ne manquait plus qu'à déclarer un objet Texture qui permettait de charger l'image en mémoire :</p><pre id="r-963194" data-claire-element-id="963194"><code data-claire-semantic="cpp">// Vertices et coordonnées de texture

....


// Texture

Texture texture(&quot;Textures/Herbe.jpg&quot;);
texture.charger();</code></pre><p id="r-963195" data-claire-element-id="963195">Au niveau du code d'affichage, il fallait juste reprendre celui que l'on utilisait précédemment en faisant attention de bien verrouiller la texture au moment d'appeler la fonction <strong>glDrawArrays</strong>(). Le reste du code permettait, entre autres, d'envoyer les vertices, les coordonnées de texture et les matrices à OpenGL :</p><pre id="r-963196" data-claire-element-id="963196"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shaderTexture.getProgramID());


    // Envoi des vertices

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);
    glEnableVertexAttribArray(0);


    // Envoi des coordonnées de texture

    glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, coordTexture);
    glEnableVertexAttribArray(2);


    // Envoi des matrices

    glUniformMatrix4fv(glGetUniformLocation(shaderTexture.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
    glUniformMatrix4fv(glGetUniformLocation(shaderTexture.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


    // Verrouillage de la texture

    glBindTexture(GL_TEXTURE_2D, texture.getID());


    // Rendu

    glDrawArrays(GL_TRIANGLES, 0, 6);


    // Déverrouillage de la texture

    glBindTexture(GL_TEXTURE_2D, 0);


    // Désactivation des tableaux

    glDisableVertexAttribArray(2);
    glDisableVertexAttribArray(0);


// Désactivation du shader

glUseProgram(0);</code></pre><h2 id="r-afficher-une-caisse-1" data-claire-element-id="963304">Afficher une caisse</h2><p id="r-963199" data-claire-element-id="963199">Pour clore ce chapitre d'une façon intéressante, nous allons appliquer ce que l'on a vu sur les textures non plus sur une forme simple 2D mais bien sur un modèle 3D comme un cube. Vu que nous avons utilisé une texture de caisse jusqu'ici, nous pouvons légitimement l'utiliser pour transformer notre cube coloré à l'ancienne en super caisse de missiles. :D</p><p id="r-963200" data-claire-element-id="963200">Notre objectif final est d'être capables d'avoir ce rendu :</p><figure id="r-963202" data-claire-element-id="963203"><img id="r-963201" data-claire-element-id="963201" src="medias/uploads.siteduzero.com_files_420001_421000_420464.png" alt="Image utilisateur"/></figure><p id="r-963204" data-claire-element-id="963204">Pour arriver à cela, nous allons coder une classe <em><strong>Caisse</strong></em> qui contiendra tout ce qu'il faut pour afficher un cube et le texturer. Pour nous faciliter la tâche, nous la ferons hériter de la classe <em><strong>Cube</strong></em> afin de ne pas avoir à refaire l'initialisation des vertices et du shader. ;)</p><h3 id="r-l-heritage-de-la-classe-cube" data-claire-element-id="963211">L'héritage de la classe Cube</h3><p id="r-963205" data-claire-element-id="963205">Avant de se lancer dans la classe <em><strong>Caisse</strong></em>, nous allons devoir régler un petit problème d'héritage au niveau du cube qui nous empêche de profiter de ses attributs. En effet, si on regarde son header, on remarque que ces derniers sont tous <strong><em>privés</em></strong> à cause de l'utilisation du mot-clef <strong>private</strong> :</p><pre id="r-963206" data-claire-element-id="963206"><code data-claire-semantic="cpp">#ifndef DEF_CUBE
#define DEF_CUBE


// Includes 

....


// Classe Cube

class Cube
{
    public:

    Cube(float taille, std::string const vertexShader, std::string const fragmentShader);
    ~Cube();


    private:

    Shader m_shader;
    float m_vertices[108];
    float m_couleurs[108];
};

#endif</code></pre><p id="r-963207" data-claire-element-id="963207">Pour prétendre à un héritage, il faut changer ce mot-clef en le remplaçant par son confrère <strong>protected</strong> :</p><pre id="r-963208" data-claire-element-id="963208"><code data-claire-semantic="cpp">#ifndef DEF_CUBE
#define DEF_CUBE


// Includes 

....


// Classe Cube

class Cube
{
    public:

    Cube(float taille, std::string const vertexShader, std::string const fragmentShader);
    ~Cube();


    protected:

    Shader m_shader;
    float m_vertices[108];
    float m_couleurs[108];
};

#endif</code></pre><p id="r-963209" data-claire-element-id="963209">De cette façon, nous pouvons utiliser les trois attributs présents ici dans les classes filles.</p><p id="r-963210" data-claire-element-id="963210">Le gros avantage pour nous, c'est que le shader et surtout les vertices seront déjà initialisés sans même que nous ayons à faire quoi que ce soit. Il ne nous restera plus qu'à gérer les nouveaux attributs. Entre parenthèses, le tableau de couleurs ne sera pas utile pour la suite mais mieux vaut le garder sous la main au cas où.</p><h3 id="r-le-header-de-la-classe-caisse" data-claire-element-id="963234">Le header de la classe Caisse</h3><p id="r-963212" data-claire-element-id="963212">Comme toute implémentation de classe, nous devons commencer par le header. Celui de la classe <em><strong>Caisse</strong></em> sera assez similaire à celui du Cube puisqu'il comportera les mêmes méthodes ainsi qu'un tableau à initialiser dans le constructeur.</p><p id="r-963213" data-claire-element-id="963213">Le début du fichier, que nous appellerons <strong>Caisse.h</strong>, contiendra la définition de la classe accompagnée du code &quot;<strong>:</strong><strong>public</strong><strong>Cube</strong>&quot; qui lui permettra de profiter de l'héritage :</p><pre id="r-963214" data-claire-element-id="963214"><code data-claire-semantic="cpp">#ifndef DEF_CAISSE
#define DEF_CAISSE


// Includes

#include &quot;Cube.h&quot;


// Classe Caisse

class Caisse : public Cube
{
    public:


    private:
};

#endif</code></pre><p id="r-963215" data-claire-element-id="963215">Pour agrémenter un peu ce code, nous allons ajouter les attributs nécessaires à la réalisation de notre caisse. Sachant que les vertices et le shader sont déjà fournis, nous n'en avons donc besoin que de deux supplémentaires :</p><ul id="r-963220" data-claire-element-id="963220"><li id="r-963217" data-claire-element-id="963217"><p id="r-963216" data-claire-element-id="963216">Un objet <em><strong>Texture</strong></em> qui représentera l'image à plaquer</p></li><li id="r-963219" data-claire-element-id="963219"><p id="r-963218" data-claire-element-id="963218">Un tableau de <em><strong>float</strong></em> qui représentera les coordonnées à associer aux vertices</p></li></ul><p id="r-963221" data-claire-element-id="963221">Petit précision pour le tableau, celui-ci contiendra <strong>72</strong> cases car il faut associer <strong>2</strong> coordonnées à chaque vertex, ce qui donne <strong>36 vertices x 2 coordonnées = 72 cases</strong>.</p><pre id="r-963222" data-claire-element-id="963222"><code data-claire-semantic="cpp">// Attributs

Texture m_texture;
float m_coordTexture[72];</code></pre><p id="r-963223" data-claire-element-id="963223">Passons maintenant aux méthodes dont nous aurons besoin. Hormis celle nécessaire pour afficher le rendu final, nous n'aurons besoin que du constructeur et du destructeur.</p><p id="r-963224" data-claire-element-id="963224">Le premier reprendra les mêmes paramètres que celui de la classe <em><strong>Cube</strong></em> afin de pouvoir lui donner les valeurs qu'il attend au moment de l'initialisation. Ces paramètres représentaient la taille désirée ainsi que les codes sources du shader à utiliser.</p><p id="r-963225" data-claire-element-id="963225">Nous en rajouterons un dernier, spécifique au constructeur <strong>Caisse</strong>(), qui représentera l'image à plaquer sur les faces de la caisse et qui permettra surtout d'initialiser l'attribut <strong>m_texture</strong>.</p><p id="r-963226" data-claire-element-id="963226">Le prototype du constructeur au final est le suivant :</p><pre id="r-963227" data-claire-element-id="963227"><code data-claire-semantic="cpp">Caisse(float taille, std::string const vertexShader, std::string const fragmentShader, std::string const texture);</code></pre><p id="r-963228" data-claire-element-id="963228">On en profite au passage pour déclarer le destructeur (qui est quand même plus simple à faire :p ) :</p><pre id="r-963229" data-claire-element-id="963229"><code data-claire-semantic="cpp">~Caisse();</code></pre><p id="r-963230" data-claire-element-id="963230">Si on réunit tout ça dans le header, on devrait avoir :</p><pre id="r-963231" data-claire-element-id="963231"><code data-claire-semantic="cpp">#ifndef DEF_CAISSE
#define DEF_CAISSE


// Includes

#include &quot;Cube.h&quot;
#include &quot;Texture.h&quot;
#include &lt;string&gt;


// Classe Caisse

class Caisse : public Cube
{
    public:

    Caisse(float taille, std::string const vertexShader, std::string const fragmentShader, std::string const texture);
    ~Caisse();


    private:

    Texture m_texture;
    float m_coordTexture[72];
};

#endif</code></pre><aside id="r-963233" data-claire-element-id="963233" data-claire-semantic="information"><p id="r-963232" data-claire-element-id="963232">Pensez à inclure les en-têtes <strong>Texture.h</strong> et <strong>string</strong> sinon votre compilateur risque de ne pas être d'accord avec vous.</p></aside><h3 id="r-le-constructeur-19" data-claire-element-id="963254">Le constructeur</h3><p id="r-963235" data-claire-element-id="963235">Le constructeur va être un poil différent de ceux que nous avons l'habitude d'implémenter. En effet, avant d’initialiser n'importe quel attribut, nous devons faire appel au constructeur parent de la classe <em><strong>Caisse</strong></em> comme nous le demande le <strong>C++</strong>.</p><p id="r-963236" data-claire-element-id="963236">Nous l'appelons donc juste après les deux points &quot;<strong>:</strong>&quot; en lui passant les trois premiers paramètres reçus (la taille et les codes sources shader) :</p><pre id="r-963237" data-claire-element-id="963237"><code data-claire-semantic="cpp">Caisse::Caisse(float taille, std::string const vertexShader, std::string const fragmentShader, std::string const texture) : Cube(taille, vertexShader, fragmentShader)
{

}</code></pre><p id="r-963238" data-claire-element-id="963238">Maintenant que la classe-mère est prête, nous pouvons nous occuper de nos attributs. Le seul que l'on peut initialiser après les deux points est la texture <strong>m_texture</strong>, l'autre étant un tableau il doit être rempli entre les accolades.</p><p id="r-963239" data-claire-element-id="963239">Nous donnerons à <strong>m_texture</strong> la <em><strong>string</strong></em> reçue en paramètre pour lui spécifier l'image à charger. Nous appellerons également sa méthode <strong>charger</strong>() sinon elle risque d'être un peu vide dans notre rendu. :p</p><pre id="r-963240" data-claire-element-id="963240"><code data-claire-semantic="cpp">Caisse::Caisse(float taille, std::string const vertexShader, std::string const fragmentShader, std::string const texture) : Cube(taille, vertexShader, fragmentShader),
                                                                                                                            m_texture(texture)
{
    // Chargement de la texture

    m_texture.charger();
}</code></pre><p id="r-963241" data-claire-element-id="963241">Pour initialiser le second attribut, <strong>m_coordTexture</strong>, nous allons reprendre le principe que nous avons utilisé lors de la création du tableau de couleurs. C'est-à-dire que nous devrons faire correspondre un couple de coordonnées de texture à chaque vertex comme nous l'avons fait précédemment.</p><p id="r-963242" data-claire-element-id="963242">Pour la première face de la caisse par exemple, nous pouvons reprendre celles que nous avons utilisées pour le carré :</p><pre id="r-963243" data-claire-element-id="963243"><code data-claire-semantic="cpp">// Coordonnées de texture

float coordTextureTmp[] = {0, 0,   1, 0,   1, 1,     // Face 1
                           0, 0,   0, 1,   1, 1};    // Face 1</code></pre><aside id="r-963245" data-claire-element-id="963245" data-claire-semantic="information"><p id="r-963244" data-claire-element-id="963244">Nous ré-utiliserons aussi le principe des tableaux temporaires dont le contenu sera copié dans l'attribut final.</p></aside><p id="r-963246" data-claire-element-id="963246">L'avantage d'un cube, c'est que toutes ses faces ne sont en fait que des carrés. Du coup, nous pouvons reprendre les coordonnées de texture de la première face pour les assigner à toutes les autres. Nous n'avons pas besoin de les déterminer manuellement. Le tableau temporaire devient donc :</p><pre id="r-963247" data-claire-element-id="963247"><code data-claire-semantic="cpp">// Coordonnées de texture temporaires

float coordTextureTmp[] = {0, 0,   1, 0,   1, 1,     // Face 1
                           0, 0,   0, 1,   1, 1,     // Face 1

                           0, 0,   1, 0,   1, 1,     // Face 2
                           0, 0,   0, 1,   1, 1,     // Face 2

                           0, 0,   1, 0,   1, 1,     // Face 3
                           0, 0,   0, 1,   1, 1,     // Face 3

                           0, 0,   1, 0,   1, 1,     // Face 4
                           0, 0,   0, 1,   1, 1,     // Face 4

                           0, 0,   1, 0,   1, 1,     // Face 5
                           0, 0,   0, 1,   1, 1,     // Face 5

                           0, 0,   1, 0,   1, 1,     // Face 6
                           0, 0,   0, 1,   1, 1};    // Face 6</code></pre><p id="r-963248" data-claire-element-id="963248">On a l'impression de travailler avec des couleurs tellement que ça y ressemble. ;)</p><p id="r-963249" data-claire-element-id="963249">Une fois les coordonnées définies, il ne manque plus qu'à les copier dans l'attribut <strong>m_coordTexture</strong> à l'aide d'une boucle <strong>for</strong> :</p><pre id="r-963250" data-claire-element-id="963250"><code data-claire-semantic="cpp">// Copie des valeurs dans le tableau final

for(int i (0); i &lt; 72; i++)
    m_coordTexture[i] = coordTextureTmp[i];</code></pre><p id="r-963251" data-claire-element-id="963251">Si on résume tout ça :</p><pre id="r-963252" data-claire-element-id="963252"><code data-claire-semantic="cpp">Caisse::Caisse(float taille, std::string const vertexShader, std::string const fragmentShader, std::string const texture) : Cube(taille, vertexShader, fragmentShader),
                                                                                                                            m_texture(texture)
{
    // Chargement de la texture

    m_texture.charger();


    // Coordonnées de texture temporaires

    float coordTextureTmp[] = {0, 0,   1, 0,   1, 1,     // Face 1
                               0, 0,   0, 1,   1, 1,     // Face 1

                               0, 0,   1, 0,   1, 1,     // Face 2
                               0, 0,   0, 1,   1, 1,     // Face 2

                               0, 0,   1, 0,   1, 1,     // Face 3
                               0, 0,   0, 1,   1, 1,     // Face 3

                               0, 0,   1, 0,   1, 1,     // Face 4
                               0, 0,   0, 1,   1, 1,     // Face 4

                               0, 0,   1, 0,   1, 1,     // Face 5
                               0, 0,   0, 1,   1, 1,     // Face 5

                               0, 0,   1, 0,   1, 1,     // Face 6
                               0, 0,   0, 1,   1, 1};    // Face 6


    // Copie des valeurs dans le tableau final

    for(int i (0); i &lt; 72; i++)
        m_coordTexture[i] = coordTextureTmp[i];
}</code></pre><p id="r-963253" data-claire-element-id="963253">Le constructeur initialise maintenant tous nos attributs, même ceux de sa classe-mère puisqu'il fait appel aussi à son constructeur.</p><h3 id="r-le-destructeur-5" data-claire-element-id="963257">Le destructeur</h3><p id="r-963255" data-claire-element-id="963255">On passe rapidement sur le destructeur qui restera vide au même titre que celui du cube :</p><pre id="r-963256" data-claire-element-id="963256"><code data-claire-semantic="cpp">Caisse::~Caisse()
{

}</code></pre><h3 id="r-la-methode-afficher-1" data-claire-element-id="963275">La méthode afficher()</h3><p id="r-963258" data-claire-element-id="963258">La méthode <strong>afficher</strong>() va faire exactement la même chose que sa méthode &quot;parente&quot; à savoir afficher notre caisse à l'écran. Elle aura besoin des matrices <strong>projection</strong> et <strong>modelview</strong> en paramètres afin de pouvoir les envoyer à son shader :</p><pre id="r-963259" data-claire-element-id="963259"><code data-claire-semantic="cpp">void afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview);</code></pre><p id="r-963260" data-claire-element-id="963260">Petit détail : Nous faisons ici ce qu'on appelle le <em>masquage de méthode</em>, c'est une notion dont <strong>M@téo</strong> parle dans son tuto sur le C++. ;)</p><p id="r-963261" data-claire-element-id="963261">Son implémentation ne va pas nous poser de problème puisqu'il suffit de recopier le code que nous avons utilisé pour afficher le carré. Nous avons juste une petite modification à faire au niveau de la fonction <strong>glDrawArrays</strong>(). Celle-ci ne prendra pas en compte <strong>6</strong> mais <strong>36 vertices</strong>, soit le nombre requis pour un cube comme nous avons eu l'occasion de le voir.</p><p id="r-963262" data-claire-element-id="963262">Il faut également changer le nom des variables utilisées comme :</p><ul id="r-963269" data-claire-element-id="963269"><li id="r-963264" data-claire-element-id="963264"><p id="r-963263" data-claire-element-id="963263">Le shader qui devient <strong>m_shader</strong></p></li><li id="r-963266" data-claire-element-id="963266"><p id="r-963265" data-claire-element-id="963265">Les tableaux qui deviennent <strong>m_vertices</strong> et <strong>m_coordTexture</strong></p></li><li id="r-963268" data-claire-element-id="963268"><p id="r-963267" data-claire-element-id="963267">La texture qui devient <strong>m_texture</strong></p></li></ul><p id="r-963270" data-claire-element-id="963270">Le code de base à recopier est le suivant :</p><pre id="r-963271" data-claire-element-id="963271"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shaderTexture.getProgramID());


    // Envoi des vertices

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, vertices);
    glEnableVertexAttribArray(0);


    // Envoi des coordonnées de texture

    glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, coordTexture);
    glEnableVertexAttribArray(2);


    // Envoi des matrices

    glUniformMatrix4fv(glGetUniformLocation(shaderTexture.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
    glUniformMatrix4fv(glGetUniformLocation(shaderTexture.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


    // Verrouillage de la texture

    glBindTexture(GL_TEXTURE_2D, m_texture.getID());


    // Rendu

    glDrawArrays(GL_TRIANGLES, 0, 36);


    // Déverrouillage de la texture

    glBindTexture(GL_TEXTURE_2D, 0);


    // Désactivation des tableaux

    glDisableVertexAttribArray(2);
    glDisableVertexAttribArray(0);


// Désactivation du shader

glUseProgram(0);</code></pre><p id="r-963272" data-claire-element-id="963272">Une fois remanié et intégré dans la méthode <strong>afficher</strong>(), il ressemble à ceci :</p><pre id="r-963273" data-claire-element-id="963273"><code data-claire-semantic="cpp">void Caisse::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Envoi des vertices

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, m_vertices);
        glEnableVertexAttribArray(0);


        // Envoi des coordonnées de texture

        glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, m_coordTexture);
        glEnableVertexAttribArray(2);


        // Envoi des matrices

        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


        // Verrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, m_texture.getID());


        // Rendu

        glDrawArrays(GL_TRIANGLES, 0, 36);


        // Déverrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, 0);


        // Désactivation des tableaux

        glDisableVertexAttribArray(2);
        glDisableVertexAttribArray(0);


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><p id="r-963274" data-claire-element-id="963274">La classe <em><strong>Caisse</strong></em> est maintenant terminée. Nous n'avons plus qu'à la tester.</p><h3 id="r-afficher-une-caisse" data-claire-element-id="963303">Afficher une caisse</h3><p id="r-963276" data-claire-element-id="963276">Le plus dur est derrière nous maintenant, on peut facilement afficher un cube texturé en seulement 2 lignes de code. :p</p><p id="r-963277" data-claire-element-id="963277">Nous devons premièrement déclarer un objet <em><strong>Caisse</strong></em> dans la méthode <strong>bouclePrincipale</strong>(), pensez à inclure l'en-tête &quot;<strong>Caisse.h</strong>&quot;. Nous lui donnerons en paramètre une taille de <strong>2.0</strong>, le chemin vers les fichiers <strong>texture.vert</strong> et <strong>texture.frag</strong> ainsi vers la texture <strong>Caisse.jpg</strong> :</p><pre id="r-963278" data-claire-element-id="963278"><code data-claire-semantic="cpp">// Objet Caisse

Caisse caisse(2.0, &quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Caisse.jpg&quot;);</code></pre><p id="r-963279" data-claire-element-id="963279">Ensuite, nous appelons sa méthode <strong>afficher</strong>() dans la boucle <strong>while</strong> en n'oubliant pas de lui donner les matrices <strong>projection</strong> et <strong>modelview</strong> :</p><pre id="r-963280" data-claire-element-id="963280"><code data-claire-semantic="cpp">// Boucle principale

while(!terminer)
{
    // Gestion des évènements, nettoyage de l'écran, ...

    ....


    // Affichage de la caisse

    caisse.afficher(projection, modelview);


    // Actualisation de la fenêtre

    ....
}</code></pre><p id="r-963281" data-claire-element-id="963281">Si vous compilez votre projet, vous devriez avoir :</p><figure id="r-963283" data-claire-element-id="963284"><img id="r-963282" data-claire-element-id="963282" src="medias/uploads.siteduzero.com_files_420001_421000_420464.png" alt="Image utilisateur"/></figure><p id="r-963285" data-claire-element-id="963285">Vu que nous avons superbement bien coder notre classe ( ;) ), nous pouvons changer l'aspect de notre caisse en ne modifiant qu'un seul paramètre lors de sa création. Par exemple, si vous voulez avoir une caisse avec la texture suivante (<strong>crate12.jpg</strong> dans l'archive) :</p><figure id="r-963287" data-claire-element-id="963288"><img id="r-963286" data-claire-element-id="963286" src="medias/uploads.siteduzero.com_files_420001_421000_420465.jpg" alt="Image utilisateur"/></figure><p id="r-963289" data-claire-element-id="963289">Il vous suffit juste de copier cette image dans votre dossier &quot;<strong>Textures</strong>&quot; puis de l'utiliser dans votre déclaration d'objet :</p><pre id="r-963290" data-claire-element-id="963290"><code data-claire-semantic="cpp">// Objet Caisse

Caisse caisse(2.0, &quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Caisse2.jpg&quot;);</code></pre><figure id="r-963292" data-claire-element-id="963293"><img id="r-963291" data-claire-element-id="963291" src="medias/uploads.siteduzero.com_files_420001_421000_420466.png" alt="Image utilisateur"/></figure><p id="r-963294" data-claire-element-id="963294">Vous pouvez même combiner la répétition de texture et notre caisse pour voir ce que ça donne. Vous devrez cependant faire translater votre cube pour ne pas qu'il transperce l'herbe. La valeur de la translation dépend de la taille de votre cube, celle-ci doit en faire la moitié. Si vous avez donné une taille de <strong>2.0</strong> unités alors la valeur sera de <strong>1.0</strong> :</p><pre id="r-963295" data-claire-element-id="963295"><code data-claire-semantic="cpp">// Sauvegarde de la matrice modelview

mat4 sauvegardeModelview = modelview;


    // Translation pour positionner le cube

    modelview = translate(modelview, vec3(0, 1, 0));


    // Affichage du cube

    caisse.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><figure id="r-963297" data-claire-element-id="963298"><img id="r-963296" data-claire-element-id="963296" src="medias/uploads.siteduzero.com_files_420001_421000_420476.png" alt="Image utilisateur"/></figure><p id="r-963299" data-claire-element-id="963299"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/qo7kgdvxgubog02/Les textures.zip?token_hash=AAH5_drKSB_O7pRPc9ikcVDkFXwqYoYkV1gn8E4zsOMspw&amp;dl=1">Code Source C++ du chapitre 10</a></strong></p><p id="r-963300" data-claire-element-id="963300">Pfiou il était long ce chapitre. Je me demande encore si je n'aurais pas dû le couper en deux. :lol:</p><p id="r-963301" data-claire-element-id="963301">Au moins ça nous a permis d'en apprendre pas mal sur les <em>textures</em> car nous savons maintenant charger des images depuis le disque dur et les afficher dans nos scènes 3D. Nous allons abandonner petit à petit les couleurs au profit de ces nouvelles <em>textures</em>, cela nous permettra d'avoir un monde plus réaliste.</p><p id="r-963302" data-claire-element-id="963302">Nous avons également vu dans ce chapitre comment manipuler des <em>objets OpenGL</em>. Je vous ai mis un commentaire en vert en dessous de chaque fonction que nous reverrons plus tard dans le tuto. Vous verrez que ces objets se manipulent tous de la même façon. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
<span class="arrow"></span>
<span class="next">Améliorations</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">
<span class="next">La caméra</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lacamra"></a><h2>La caméra</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
<span class="arrow"></span>
<span class="next">Aller plus loin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
<span class="next">Fonctionnement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-963307" data-claire-element-id="963307">J'ai une bien mauvaise nouvelle très chers compagnons, nous arrivons à la fin de la première partie de ce tutoriel. :( <br/>(Super façon d'introduire un chapitre :-° )</p><p id="r-963308" data-claire-element-id="963308">En effet, nous avons déjà vu presque toutes les notions essentielles <em>d'OpenGL</em>. Nous maitrisons l'affichage de formes simples, l'utilisation basique de Shaders, l'affichage de textures, la gestion des évènements, ... Il ne reste plus qu'une seule chose à voir pour compléter ces essentielles : <em><strong>une caméra déplaçcable</strong></em>.</p><p id="r-963309" data-claire-element-id="963309">Nous avons déjà eu l'occasion d'approcher <em>la caméra</em>, notamment dans le chapitre sur la 3D, mais jusqu'à maintenant on se contentait de la positionner au début du programme et du coup elle restait immobile. Notre objectif, avec ce chapitre, va être de lui donner la capacité de <strong>se déplacer</strong>. Ainsi nous pourrons nous balader librement dans nos scènes 3D.</p><p id="r-963310" data-claire-element-id="963310">Après ce chapitre, nous passerons à un TP qui rassemblera toutes les notions ce que nous avons vu. Nous aurons un début de monde 3D réaliste. Mais bon pour le moment, nous devons encore étudier la caméra.</p><p id="r-963311" data-claire-element-id="963311">Commençons ! :magicien:</p>
</div><a name="Fonctionnement"></a><h2>Fonctionnement</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">
<span class="arrow"></span>
<span class="next">La caméra</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
<span class="next">Implémentation de la caméra</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-une-camera-deplacable" data-claire-element-id="963329">Une caméra déplaçable</h2><h3 id="r-les-types-de-camera" data-claire-element-id="963320">Les types de caméra</h3><p id="r-963312" data-claire-element-id="963312">On a déjà eu l’occasion d'approcher le système <strong>caméra</strong> avec <em>OpenGL</em> qui permet d'avoir une représentation d'un monde virtuel sur notre écran. Ce système fait exactement la même chose qu'un tournage de film, nous ne sommes pas présents sur un plateau et pourtant nous voyons les scènes qui y sont tournées.</p><p id="r-963313" data-claire-element-id="963313">Le problème de notre <em>caméra</em> actuelle c'est qu'elle est totalement immobile, nous n'avons aucun moyen pour la faire bouger. L'objectif de ce chapitre va donc être de lui ajouter de la mobilité afin que nous puissions nous déplacer dans notre monde virtuel. Nous utiliserons une méthode de déplacement particulière basée sur le vol en mode libre (<em><strong>FreeFly</strong></em> en anglais). Ce mode permet à la caméra de voler, tel un avion, de façon totalement libre. On pourra donc aller à gauche, à droite, en haut et en bas comme on voudra. :p</p><p id="r-963314" data-claire-element-id="963314">On retrouve ce type de caméra dans les jeux-vidéo où on pilote un hélicoptère, un avion, ...</p><figure id="r-963316" data-claire-element-id="963317"><img id="r-963315" data-claire-element-id="963315" src="medias/uploads.siteduzero.com_files_414001_415000_414317.jpg" alt="Image utilisateur"/></figure><p id="r-963318" data-claire-element-id="963318">Image issue du jeu <em>GTA San Andreas</em></p><p id="r-963319" data-claire-element-id="963319">Cette caméra représentera une base avec laquelle nous pourrons travailler. Dans l'avenir, il suffira de quelques modifications pour la faire passer en vue à la 1ière ou à la 3ième personne. Il existe aussi d'autres types caméras <em>en vue de dessus</em> que l'on remarque dans les jeux de stratégie par exemple. Mais pour le moment, nous nous contenterons de développer une caméra libre que nous utiliserons dans les futurs chapitres. :)</p><h3 id="r-les-controles-2" data-claire-element-id="963328">Les contrôles</h3><p id="r-963321" data-claire-element-id="963321">Pour pouvoir se déplacer dans notre monde 3D, nous devrons utiliser le clavier et la souris. Grâce à la classe <em><strong>Input</strong></em> (que l'on a déjà codée) nous allons pouvoir lier un évènement à un déplacement, ces évènements seront divisés en deux catégories. Nous utiliserons :</p><ul id="r-963326" data-claire-element-id="963326"><li id="r-963323" data-claire-element-id="963323"><p id="r-963322" data-claire-element-id="963322"><strong>La souris</strong> : pour orienter la caméra en fonction du mouvement effectué</p></li><li id="r-963325" data-claire-element-id="963325"><p id="r-963324" data-claire-element-id="963324"><strong>Le clavier</strong> : pour déplacer la caméra selon 4 axes (gauche, droite, haut et bas)</p></li></ul><p id="r-963327" data-claire-element-id="963327">Ces deux catégories d'évènements vont se gérer de manière totalement différente, nous aurons besoin de deux méthodes distinctes. Et croyez-moi, elles ne feront pas du tout la même chose. :p</p><h2 id="r-la-gestion-de-l-orientation" data-claire-element-id="963364">La gestion de l'orientation</h2><p id="r-963330" data-claire-element-id="963330">On vient de voir le principe d'une <em>caméra libre</em> et je vous ai même précisé la façon dont on va la gérer. Je vais maintenant aller plus loin dans la théorie afin que vous puissiez comprendre ce que nous allons faire par la suite. Ouvrez grand les oreilles et n'hésitez pas à relire plusieurs fois ce début de chapitre. Il est un peu technique mais il est absolument fondamental que vous compreniez les notions que l'on va aborder. D’ailleurs, on en ré-utilisera certaines dans de futurs chapitres.</p><p id="r-963331" data-claire-element-id="963331">La première chose que l'on va voir concerne l'orientation de la caméra. Les évènements déclenchés par la souris permettront de l'orienter en fonction du mouvement effectué. Lorsque nous bougerons la souris vers le haut ou vers le bas, la caméra s'orientera de la même façon :</p><figure id="r-963333" data-claire-element-id="963334"><img id="r-963332" data-claire-element-id="963332" src="medias/uploads.siteduzero.com_files_414001_415000_414318.png" alt="Image utilisateur"/></figure><p id="r-963335" data-claire-element-id="963335">Et lorsque nous bougerons la souris vers la gauche ou vers la droite, la caméra s'orientera également de la même façon :</p><figure id="r-963337" data-claire-element-id="963338"><img id="r-963336" data-claire-element-id="963336" src="medias/uploads.siteduzero.com_files_414001_415000_414319.png" alt="Image utilisateur"/></figure><p id="r-963339" data-claire-element-id="963339">Bien entendu, on peut combiner ces deux mouvements pour que la caméra s'oriente dans n'importe quelle direction. Voici un schéma résumant toutes les informations dont nous avons besoin sur l'orientation :</p><figure id="r-963341" data-claire-element-id="963342"><img id="r-963340" data-claire-element-id="963340" src="medias/uploads.siteduzero.com_files_414001_415000_414320.png" alt="Image utilisateur"/></figure><p id="r-963343" data-claire-element-id="963343">Les angles <em><strong>Phi</strong></em> et <strong>Theta</strong> représentent les éléments mathématiques indispensables qui vont nous permettre de calculer l'orientation de la caméra. Le premier représente l'orientation sur l'axe <strong>horizontal</strong>, le second l'orientation sur l'axe <strong>vertical</strong>. Ces deux angles sont absolument primordiaux. Sans eux, on pourrait toujours se déplacer vers la gauche ou la droite, ... mais notre regard resterait totalement fixe. Imaginez-vous en train de marcher dans la rue sans pouvoir tourner la tête (un peu embêtant n'est-ce pas ?).</p><p id="r-963344" data-claire-element-id="963344">Les angles ne sont pas les seuls éléments important sur ce schéma, le <em><strong>vecteur V (orientation)</strong></em> est tout aussi important. Il représente la direction de notre regard (ce qui sera affiché sur l'écran).</p><div id="r-963346" data-claire-element-id="963346" data-claire-semantic="question"><p id="r-963345" data-claire-element-id="963345">Mais avec quoi va-t-on pouvoir calculer ce vecteur <em><strong>orientation</strong></em> ? Je sais pas le calculer moi. :(</p></div><p id="r-963347" data-claire-element-id="963347">Rassurez-vous, je ne vais pas vous demander de trouver une formule par vous-même. :p</p><p id="r-963348" data-claire-element-id="963348">En fait, il existe une formule toute prête pour calculer ce vecteur, enfin plus précisément pour calculer ses <strong>coordonnées</strong> (<strong>x, y, z</strong>). Cette formule permet de trouver ce que l'on appelle les coordonnées sphériques :</p><figure id="r-963350" data-claire-element-id="963351"><img id="r-963349" data-claire-element-id="963349" src="medias/uploads.siteduzero.com_files_414001_415000_414341.png" alt="Image utilisateur"/></figure><p id="r-963352" data-claire-element-id="963352">Ah tiens ! On retrouve les angles de tout à l'heure !</p><p id="r-963353" data-claire-element-id="963353">Et oui ah ah ! Je vous avais dit que ces angles étaient super importants. :p Et encore, on peut simplifier cette fonction en enlevant le paramètre <em><strong>R</strong></em>. Ce paramètre correspond à la longueur du rayon de la sphère précédente. Mais vu que nous travaillerons avec des vecteurs normalisés, cette longueur sera toujours égale à <strong>1</strong>, ce qui donne au final :</p><figure id="r-963355" data-claire-element-id="963356"><img id="r-963354" data-claire-element-id="963354" src="medias/uploads.siteduzero.com_files_414001_415000_414340.png" alt="Image utilisateur"/></figure><p id="r-963357" data-claire-element-id="963357">Grâce aux angles <em><strong>Theta</strong></em> et <em><strong>Phi</strong></em>, nous pourrons calculer le vecteur <em><strong>orientation</strong></em> les doigts dans le nez. :-°</p><aside id="r-963359" data-claire-element-id="963359" data-claire-semantic="information"><p id="r-963358" data-claire-element-id="963358">La formule des <strong>coordonnées sphériques</strong> n'est pas compliquée à démontrer. Si vous êtes curieux, vous pouvez voir comment la démontrer grâce à <a href="http://www.siteduzero.com/tutoriel-3-5011-la-trigonometrie.html">l'annexe sur la trigonométrie</a> de <strong>Kayl</strong>. Attention cependant, Kayl utilise la coordonnée Z comme repère vertical et non l'axe Y. Les résultats sont donc inversés entre les coordonnées. Mais au moins, grâce à cette annexe vous pourrez constater que je n'ai pas sorti la formule de mon chapeau. :p</p></aside><div id="r-963361" data-claire-element-id="963361" data-claire-semantic="question"><p id="r-963360" data-claire-element-id="963360">Et ces deux angles, comment va-t-on les calculer ?</p></div><p id="r-963362" data-claire-element-id="963362">Il n'y aura pas besoin des les calculer. Au niveau de la programmation, ces angles correspondront au mouvement de la souris. L'angle Phi représentera l'axe Y et Théta l'axe X.</p><p id="r-963363" data-claire-element-id="963363">En définitif, grâce à ces deux angles et aux coordonnées sphériques nous pourrons gérer l'orientation de notre caméra très facilement.</p><h2 id="r-la-gestion-du-deplacement" data-claire-element-id="963456">La gestion du déplacement</h2><h3 id="r-avancer-et-reculer" data-claire-element-id="963381">Avancer et reculer</h3><p id="r-963365" data-claire-element-id="963365">La gestion du <strong>déplacement</strong> de la caméra va être différente de celle de l'<strong>orientation</strong>. Nous n'aurons ni besoin d'angles, ni de coordonnées sphériques, mais uniquement de vecteurs. On va diviser cette gestion en deux parties :</p><ul id="r-963370" data-claire-element-id="963370"><li id="r-963367" data-claire-element-id="963367"><p id="r-963366" data-claire-element-id="963366">Le déplacement '<em>vertical</em>' (à défaut de trouver meilleur terme) pour avancer et reculer</p></li><li id="r-963369" data-claire-element-id="963369"><p id="r-963368" data-claire-element-id="963368">Le déplacement <em>latéral</em> pour aller vers la gauche ou la droite</p></li></ul><p id="r-963371" data-claire-element-id="963371">On commence par la gestion du déplacement vertical car ce sera le plus facile. Pour faire avancer notre caméra nous n'aurons besoin que d'une simple <em>addition</em>. Oui oui vous avez bien entendu, nous n'aurons que d'une simple <em>addition</em>. :p</p><p id="r-963372" data-claire-element-id="963372">En effet, quand on se déplace vers l'avant (en marchant par exemple) on ne fait en réalité qu'une simple <em>translation</em>. Or quand on translate, on ne modifie pas notre orientation. C'est comme si l'on additionnait un vecteur par lui-même :</p><figure id="r-963374" data-claire-element-id="963375"><img id="r-963373" data-claire-element-id="963373" src="medias/uploads.siteduzero.com_files_414001_415000_414321.png" alt="Image utilisateur"/></figure><p id="r-963376" data-claire-element-id="963376">Pour faire avancer notre caméra, il suffira d’additionner le vecteur <em><strong>orientation</strong></em> par <em><strong>lui-même</strong></em> autant de fois que nécessaire. Et évidemment la faire pour reculer, il suffira de faire l'inverse d'une addition, c'est-à-dire ... une soustraction !</p><figure id="r-963378" data-claire-element-id="963379"><img id="r-963377" data-claire-element-id="963377" src="medias/uploads.siteduzero.com_files_414001_415000_414322.png" alt="Image utilisateur"/></figure><p id="r-963380" data-claire-element-id="963380">Je vous avais dit que la gestion verticale était simple. ^^</p><h3 id="r-le-deplacement-lateral-1-2" data-claire-element-id="963398">Le déplacement latéral (1/2)</h3><p id="r-963382" data-claire-element-id="963382">Le déplacement latéral va être un peu plus délicat à gérer. Son principe est cependant simple : il faut trouver un vecteur '<em>perpendiculaire</em>' (on dira plutôt <em>orthogonal</em>) au vecteur <em><strong>orientation</strong></em> :</p><figure id="r-963384" data-claire-element-id="963385"><img id="r-963383" data-claire-element-id="963383" src="medias/uploads.siteduzero.com_files_414001_415000_414324.png" alt="Image utilisateur"/></figure><p id="r-963386" data-claire-element-id="963386">Ce vecteur orthogonal va nous permettre de déplacer la caméra de façon latéral. <br/> D'ailleurs, une fois que nous l'aurons trouvé il suffira de faire la même chose que pour avancer :</p><ul id="r-963391" data-claire-element-id="963391"><li id="r-963388" data-claire-element-id="963388"><p id="r-963387" data-claire-element-id="963387"><strong>Pour aller vers la gauche</strong> : on additionnera ce vecteur par lui-même autant de fois que nécessaire</p></li><li id="r-963390" data-claire-element-id="963390"><p id="r-963389" data-claire-element-id="963389"><strong>Pour aller vers la droite</strong> : on soustraira ce vecteur par lui-même autant de fois que nécessaire</p></li></ul><figure id="r-963393" data-claire-element-id="963394"><img id="r-963392" data-claire-element-id="963392" src="medias/uploads.siteduzero.com_files_414001_415000_414325.png" alt="Image utilisateur"/></figure><div id="r-963396" data-claire-element-id="963396" data-claire-semantic="question"><p id="r-963395" data-claire-element-id="963395">Ah d'accord, on fait la même chose que pour avancer sauf qu'ici on avance '<em>perpendiculairement</em>' à l'orientation ?</p></div><p id="r-963397" data-claire-element-id="963397">Vous avez compris. ^^ <br/> Il faut donc calculer ce vecteur pour avancer latéralement. Mais avant cela, il va falloir que l'on parle de la notion de <strong>normale</strong><em>normale d'un plan</em>. Cette notion est importante car c'est elle qui va nous permettre de trouver ce fameux vecteur.</p><h3 id="r-la-normale-d-un-plan" data-claire-element-id="963433">La normale d'un plan</h3><p id="r-963399" data-claire-element-id="963399">Les normales sont très importantes avec <em>OpenGL</em>. On retrouvera cette notion plusieurs fois dans le tuto alors soyez attentifs. ;)</p><p id="r-963400" data-claire-element-id="963400">Une <em><strong>normale</strong></em> est une sorte de droite <em>perpendiculaire</em> à une surface plane, on appellera cette surface un <em><strong>plan</strong></em>. Si vous prenez un cahier (qui est une surface plane) la <em>normale</em> de son plan partira de la couverture pour aller vers le haut.</p><figure id="r-963402" data-claire-element-id="963403"><img id="r-963401" data-claire-element-id="963401" src="medias/uploads.siteduzero.com_files_414001_415000_414326.png" alt="Image utilisateur"/></figure><p id="r-963404" data-claire-element-id="963404">Cette <em>normale</em> peut être représentée par un vecteur. Et pour le calculer, il suffit de multiplier deux vecteurs appartenant à votre cahier :</p><figure id="r-963406" data-claire-element-id="963407"><img id="r-963405" data-claire-element-id="963405" src="medias/uploads.siteduzero.com_files_414001_415000_414327.png" alt="Image utilisateur"/></figure><div id="r-963409" data-claire-element-id="963409" data-claire-semantic="question"><p id="r-963408" data-claire-element-id="963408">Ça veut dire que si on multiplie deux vecteurs appartenant au cahier on trouve la normale du plan ?</p></div><p id="r-963410" data-claire-element-id="963410">Oui tout à fait, car il existe une propriété de la <em>géométrie dans l'espace</em> qui dit que : lorsque l'on <strong>multiplie</strong> deux vecteurs appartenant à un même plan, le résultat de cette multiplication sera un vecteur <strong>perpendiculaire</strong> au plan.</p><p id="r-963411" data-claire-element-id="963411">Ce vecteur résultat se nomme la <em><strong>normale du plan</strong></em>.</p><p id="r-963412" data-claire-element-id="963412">Cependant, pour pouvoir valider cette multiplication il va falloir respecter deux règles :</p><ul id="r-963417" data-claire-element-id="963417"><li id="r-963414" data-claire-element-id="963414"><p id="r-963413" data-claire-element-id="963413">Premièrement, il faut absolument que les deux vecteurs à multiplier <strong>ne soient pas parallèles</strong>.</p></li><li id="r-963416" data-claire-element-id="963416"><p id="r-963415" data-claire-element-id="963415">Deuxièmement, les vecteurs doivent partir vers des <strong>directions opposées</strong>. Il ne faut pas que leur flèche puissent se croiser.</p></li></ul><p id="r-963418" data-claire-element-id="963418">Si une de ces deux règles n'est pas respectée alors votre calcul sera faux et vous ne trouverez pas la normale. <br/> Cependant je vous rassure, nous utiliserons toujours de bons vecteurs, je ne vais pas être sadique et vous faire faire des calculs foireux. :p Mais sachez au moins que ces règles existent.</p><p id="r-963419" data-claire-element-id="963419">Si on reprend le schéma précédent, on remarque que les vecteurs <strong><em>V1</em></strong> et <em><strong>V2</strong></em><strong>ne sont pas parallèles</strong> et que <strong>leur flèche ne se rejoignent pas</strong>, les deux règles sont donc respectées. Si on multiplie ces deux vecteurs entre eux on trouvera la <em><strong>normale</strong></em> du plan. ;)</p><p id="r-963420" data-claire-element-id="963420">Bien évidemment, les normales ne se limitent pas aux surfaces carrées. D'ailleurs, on les utilisera presque toujours sur des triangles, ce qui compte c'est que la surface utilisée soit plane :</p><figure id="r-963422" data-claire-element-id="963423"><img id="r-963421" data-claire-element-id="963421" src="medias/uploads.siteduzero.com_files_414001_415000_414328.png" alt="Image utilisateur"/></figure><div id="r-963425" data-claire-element-id="963425" data-claire-semantic="question"><p id="r-963424" data-claire-element-id="963424">Petite question : comment est-ce qu'on multiplie deux vecteurs ?</p></div><p id="r-963426" data-claire-element-id="963426">Ce n'est pas à proprement parler une multiplication, il s'agit plus d'un produit vectoriel. Nous n'aurons pas à le faire nous même donc ne vous prenez pas la tête avec ça. ^^</p><p id="r-963427" data-claire-element-id="963427">D'ailleurs en parlant de ça, je vous avais également dit qu'il fallait faire attention à l'ordre dans la multiplication, que <strong>V1 x V2</strong> n'était pas forcément égal à <strong>V2 x V1</strong>.</p><p id="r-963428" data-claire-element-id="963428">Cette remarque est toujours d'actualité. Si vous inversez la multiplication de deux vecteurs vous trouverez bien la <em>normale</em>, mais le problème c'est qu'elle sera inversée :</p><figure id="r-963430" data-claire-element-id="963431"><img id="r-963429" data-claire-element-id="963429" src="medias/uploads.siteduzero.com_files_414001_415000_414329.png" alt="Image utilisateur"/></figure><p id="r-963432" data-claire-element-id="963432">Faites juste attention à l'ordre des multiplications que nous ferrons et tout ira bien. ;)</p><h3 id="r-le-deplacement-lateral-2-2" data-claire-element-id="963455">Le déplacement latéral (2/2)</h3><p id="r-963434" data-claire-element-id="963434">Pour en revenir à ce qui nous intéresse, je vous rappelle que l'on recherche un vecteur <em>orthogonal</em> au vecteur <em><strong>orientation</strong></em> pour que l'on puisse se déplacer latéralement.<br/> Par chance, nous venons d'apprendre ce que sont les <em>normales</em> et je vous annonce que le vecteur que nous recherchons en est justement une !</p><div id="r-963436" data-claire-element-id="963436" data-claire-semantic="question"><p id="r-963435" data-claire-element-id="963435">Hein ? Mais pour calculer une normale il faut un plan non ? Or là on n'a que le vecteur <em><strong>orientation</strong></em>.</p></div><p id="r-963437" data-claire-element-id="963437">Oui tout à fait, nous avons besoin d'un plan dans lequel se trouve le vecteur <em><strong>orientation</strong></em>. Et pour le trouver, nous allons utiliser une petite astuce : <strong>l'axe y du repère</strong> 3D.</p><p id="r-963438" data-claire-element-id="963438">Cet axe formera le deuxième vecteur dont on a besoin pour la multiplication. En effet, quelle que soit l'orientation de la caméra, le vecteur <strong>orientation</strong> et le vecteur de <strong>l'axe y</strong> feront toujours partie du même plan :</p><figure id="r-963440" data-claire-element-id="963441"><img id="r-963439" data-claire-element-id="963439" src="medias/uploads.siteduzero.com_files_414001_415000_414335.png" alt="Image utilisateur"/></figure><figure id="r-963443" data-claire-element-id="963444"><img id="r-963442" data-claire-element-id="963442" src="medias/uploads.siteduzero.com_files_414001_415000_414336.png" alt="Image utilisateur"/></figure><figure id="r-963446" data-claire-element-id="963447"><img id="r-963445" data-claire-element-id="963445" src="medias/uploads.siteduzero.com_files_414001_415000_414337.png" alt="Image utilisateur"/></figure><p id="r-963448" data-claire-element-id="963448">Ces vecteurs font partie du même plan et sont orientés vers des directions différentes, on peut donc les utiliser pour calculer la <em>normale du plan</em>. :)</p><aside id="r-963451" data-claire-element-id="963451" data-claire-semantic="warning"><p id="r-963449" data-claire-element-id="963449">Cette astuce est efficace mais il existe un cas où elle ne fonctionnera pas. En effet, souvenez-vous que la normale est calculable tant que les deux vecteurs utilisés ne sont pas parallèles. Or, si la caméra s'aligne parfaitement à l'axe y alors l'une des deux règles sur les normales sera violée.</p><p id="r-963450" data-claire-element-id="963450">Pour éviter ce problème, il va falloir interdire à la caméra de se pencher à <strong>90°</strong> vers le haut (et <strong>-90°</strong> pour le bas). Ce qui veut dire qu'à une orientation de <strong>89°</strong>, la caméra ne pourra plus aller plus haut. Cependant, elle restera toujours libre au niveau de ses autres mouvements.</p></aside><p id="r-963452" data-claire-element-id="963452">En définitif, pour trouver le vecteur de déplacement latéral il va falloir multiplier le vecteur <strong>orientation</strong> par le vecteur de <strong>l'axe y</strong>. Ensuite, il suffira de l'additionner ou de le soustraire par lui-même pour se déplacer vers la gauche ou vers la droite.</p><p id="r-963453" data-claire-element-id="963453">Pfiouuuu ... Tout ce gourbi pour calculer un vecteur !</p><p id="r-963454" data-claire-element-id="963454">Et oui c'est toute une histoire, mais au moins vous savez maintenant ce que sont les <em>normales</em>. C'est une notion hyper-importante qu'on aura l'occasion de retrouver lorsque l'on fera de l'éclaire dynamique avec les shaders. ;)</p><h2 id="r-en-resume-173" data-claire-element-id="963476">En résumé</h2><p id="r-963457" data-claire-element-id="963457">Nous venons de voir pas mal de mathématique, je peux comprendre votre probable mal de tête. :p Je vais faire un résumé des points importants qu'il faut retenir.</p><p id="r-963458" data-claire-element-id="963458">Pour gérer l'orientation :</p><ul id="r-963465" data-claire-element-id="963465"><li id="r-963460" data-claire-element-id="963460"><p id="r-963459" data-claire-element-id="963459">Nous avons besoin de deux angles : <strong>Theta</strong> et <strong>Phi</strong></p></li><li id="r-963462" data-claire-element-id="963462"><p id="r-963461" data-claire-element-id="963461">Ces deux angles permettent de calculer des <strong>coordonnées sphériques</strong></p></li><li id="r-963464" data-claire-element-id="963464"><p id="r-963463" data-claire-element-id="963463">Ces coordonnées sphériques formeront un vecteur qui représentera <strong>l'orientation</strong> de la caméra</p></li></ul><p id="r-963466" data-claire-element-id="963466">Pour gérer le déplacement :</p><ul id="r-963473" data-claire-element-id="963473"><li id="r-963468" data-claire-element-id="963468"><p id="r-963467" data-claire-element-id="963467">Si on additionne le vecteur <em><strong>orientation</strong></em> par lui-même alors la caméra avance. Quand le soustrait par lui-même, elle recule</p></li><li id="r-963470" data-claire-element-id="963470"><p id="r-963469" data-claire-element-id="963469">Le vecteur <strong><em>orientation</em></strong> et le vecteur de <strong>l'axe y</strong> font partie du même plan</p></li><li id="r-963472" data-claire-element-id="963472"><p id="r-963471" data-claire-element-id="963471">Si on multiplie ces vecteurs entre eux, on trouve la <strong>normale</strong> du plan. Cette normale sera le vecteur de <em><strong>déplacement latéral</strong></em></p></li></ul><p id="r-963474" data-claire-element-id="963474">Voilà ce qu'il faut retenir.</p><p id="r-963475" data-claire-element-id="963475">N'hésitez pas à relire encore et encore cette première partie de chapitre. ;) <br/> Lorsque vous vous sentirez prêt, nous passerons à la suite du chapitre.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">
<span class="arrow"></span>
<span class="next">La caméra</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
<span class="next">Implémentation de la caméra</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Implmentationdelacamra"></a><h2>Implémentation de la caméra</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
<span class="arrow"></span>
<span class="next">Fonctionnement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
<span class="next">Fixer un point</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-la-classe-camera" data-claire-element-id="963537">La classe Camera</h2><h3 id="r-le-header-5" data-claire-element-id="963536">Le header</h3><p id="r-963478" data-claire-element-id="963478">J'espère que vous avez eu le temps de digérer tout ce que l'on vient de voir. Si ça peut vous rassurer, sachez que c'était la partie la plus compliquée. Nous allons pouvoir passer à l'implémentation de la caméra. :)</p><p id="r-963479" data-claire-element-id="963479">Comme d'habitude, on va commencer par le header en déclarant une nouvelle classe : la classe <em><strong>Camera</strong></em>. Elle possèdera pas mal d'attributs, mais on les connait déjà tous. Voici le header de base :</p><pre id="r-963480" data-claire-element-id="963480"><code data-claire-semantic="cpp">#ifndef DEF_CAMERA
#define DEF_CAMERA

// Classe

class Camera
{
    public:

    Camera();
    ~Camera();


    private:
};

#endif</code></pre><p id="r-963481" data-claire-element-id="963481">Dans la première partie de ce chapitre, nous avons vu que le déplacement de la caméra se divisait en 2 catégories : une qui s'occupait de gérer l'<strong>orientation</strong> et l'autre du <strong>déplacement</strong> pur et dur.</p><p id="r-963482" data-claire-element-id="963482">Pour gérer ce premier point, nous aurons besoin de 3 choses :</p><ul id="r-963489" data-claire-element-id="963489"><li id="r-963484" data-claire-element-id="963484"><p id="r-963483" data-claire-element-id="963483">Un angle <strong>Theta</strong> : qui représentera l'orientation sur l'axe horizontal</p></li><li id="r-963486" data-claire-element-id="963486"><p id="r-963485" data-claire-element-id="963485">Un angle <strong>Phi</strong> : représentera l'orientation sur l'axe vertical</p></li><li id="r-963488" data-claire-element-id="963488"><p id="r-963487" data-claire-element-id="963487">Un vecteur <strong>orientation</strong> : qui représentera la direction dans laquelle on regarde</p></li></ul><div id="r-963491" data-claire-element-id="963491" data-claire-semantic="question"><p id="r-963490" data-claire-element-id="963490">Ah mais comment on fait pour un avoir un vecteur en C++ ? Ça n'existe pas ?</p></div><p id="r-963492" data-claire-element-id="963492">En C++ non, mais n'oubliez pas que nous disposons d'une librairie mathématique complète. ;) <strong>GLM</strong> ne sert pas qu'aux matrices mais aussi aux vecteurs, quaternions, etc. Plein de choses en somme.</p><p id="r-963493" data-claire-element-id="963493">Il existe un objet que nous avons déjà utilisé et qui permet de gérer des vecteurs à 3 dimensions. Cet objet s'appelle <em><strong>vec3</strong></em>. Vous vous en souvenez j'espère . :p Il a l'avantage de posséder des méthodes simples qui permettent d'accéder à ses valeurs. Ainsi, pour retrouver sa coordonnée <strong>x</strong> par exemple, il nous suffit de faire :</p><pre id="r-963494" data-claire-element-id="963494"><code data-claire-semantic="cpp">monVecteur.x;</code></pre><p id="r-963495" data-claire-element-id="963495">En définitif, nous allons utiliser un objet de type <em><strong>vec3</strong></em> pour gérer l'orientation de la caméra. :)</p><p id="r-963496" data-claire-element-id="963496">Avec ça, nous avons donc nos 3 premiers attributs :</p><pre id="r-963497" data-claire-element-id="963497"><code data-claire-semantic="cpp">// Attributs d'orientation

float m_phi;
float m_theta;
glm::vec3 m_orientation;</code></pre><p id="r-963498" data-claire-element-id="963498">Pour ne pas avoir d'erreur de compilation, il faut inclure les en-têtes relatifs à la librairie <strong>GLM</strong> :</p><pre id="r-963499" data-claire-element-id="963499"><code data-claire-semantic="cpp">#ifndef DEF_CAMERA
#define DEF_CAMERA


// Includes GLM

#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtx/transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;


// Classe

class Camera
{
    public:

    Camera();
    ~Camera();


    private:
};

#endif</code></pre><p id="r-963500" data-claire-element-id="963500">Au niveau du deuxième point (le déplacement de la caméra), nous avons vu que nous aurons besoin de 3 choses :</p><ul id="r-963507" data-claire-element-id="963507"><li id="r-963502" data-claire-element-id="963502"><p id="r-963501" data-claire-element-id="963501">Un vecteur <strong>orientation</strong> (le même que le précédent)</p></li><li id="r-963504" data-claire-element-id="963504"><p id="r-963503" data-claire-element-id="963503">Un vecteur représentant l'<strong>axe vertical</strong> (l'axe y dans notre cas) : afin de pouvoir former un plan avec le vecteur <strong>orientation</strong></p></li><li id="r-963506" data-claire-element-id="963506"><p id="r-963505" data-claire-element-id="963505">Un vecteur de <strong>déplacement latéral</strong> : qui représente la <em>normale</em> du plan formé</p></li></ul><p id="r-963508" data-claire-element-id="963508">Vu que nous avons déjà le vecteur <strong>orientation</strong>, on ne rajoute que les deux derniers vecteurs aux attributs :</p><pre id="r-963509" data-claire-element-id="963509"><code data-claire-semantic="cpp">// Attributs de déplacement

glm::vec3 m_axeVertical;
glm::vec3 m_deplacementLateral;</code></pre><p id="r-963510" data-claire-element-id="963510">Petite info au passage : souvenez-vous que la méthode <strong>lookAt</strong>() prends 3 paramètres de type <em><strong>vec3</strong></em>. Pour les alimenter, il nous suffira juste de donner nos attributs qui sont eux-mêmes de objets de type <em><strong>vec3 </strong></em> ;)</p><p id="r-963511" data-claire-element-id="963511">En parlant de cette méthode, on va refaire un petit tour au niveau de son prototype :</p><pre id="r-963512" data-claire-element-id="963512"><code data-claire-semantic="cpp">mat4 lookAt(vec3 eye, vec3 center, vec3 up);</code></pre><ul id="r-963519" data-claire-element-id="963519"><li id="r-963514" data-claire-element-id="963514"><p id="r-963513" data-claire-element-id="963513">Vecteur <strong>eye</strong> : Position de la caméra</p></li><li id="r-963516" data-claire-element-id="963516"><p id="r-963515" data-claire-element-id="963515">Vecteur <strong>center</strong> : Point fixé par la caméra</p></li><li id="r-963518" data-claire-element-id="963518"><p id="r-963517" data-claire-element-id="963517">Vecteur <strong>up</strong> : Axe vertical utilisé (<strong>x</strong>, <strong>y</strong> ou <strong>z</strong>)</p></li></ul><p id="r-963520" data-claire-element-id="963520">Si je vous remémore cette méthode c'est parce que nous en aurons besoin dans la classe <em><strong>Caméra</strong></em>. En effet, nous avons beau créer une classe toute neuve pour gérer la caméra, nous aurons toujours besoin d'utiliser les <em>matrices</em> et notamment la méthode <strong>lookAt</strong>() de la matrice <strong>modelview</strong>. Nous aurons donc besoin de 3 vecteurs correspondant aux 3 vecteurs demandés par cette méthode.</p><p id="r-963521" data-claire-element-id="963521">Comme on vient de le voir on a déjà l'axe vertical, on ne va donc ajouter que les deux autres dans les attributs. Cependant, on va faire une petite modification au niveau de leur nom de façon à les rendre plus compréhensibles. Ainsi, le vecteur <strong>eye</strong> deviendra le vecteur '<strong>position</strong>' et <strong>center</strong> deviendra le vecteur '<strong>pointCible</strong>' (point cibl<strong>é</strong>):</p><pre id="r-963522" data-claire-element-id="963522"><code data-claire-semantic="cpp">glm::vec3 m_position;
glm::vec3 m_pointCible;</code></pre><p id="r-963523" data-claire-element-id="963523">Si on regroupe tous les attributs :</p><pre id="r-963524" data-claire-element-id="963524"><code data-claire-semantic="cpp">// Attributs

float m_phi;
float m_theta;
glm::vec3 m_orientation;

glm::vec3 m_axeVertical;
glm::vec3 m_deplacementLateral;

glm::vec3 m_position;
glm::vec3 m_pointCible;</code></pre><p id="r-963525" data-claire-element-id="963525">Notre header est presque complet, il ne manque plus qu'à ajouter un constructeur - non pas un constructeur par défaut mais un constructeur qui prendra exactement les mêmes paramètres que la méthode <strong>lookAt</strong>(), à savoir :</p><ul id="r-963532" data-claire-element-id="963532"><li id="r-963527" data-claire-element-id="963527"><p id="r-963526" data-claire-element-id="963526">Une position</p></li><li id="r-963529" data-claire-element-id="963529"><p id="r-963528" data-claire-element-id="963528">Un point à cibler</p></li><li id="r-963531" data-claire-element-id="963531"><p id="r-963530" data-claire-element-id="963530">Un vecteur représentant l'axe vertical</p></li></ul><pre id="r-963533" data-claire-element-id="963533"><code data-claire-semantic="cpp">Camera(glm::vec3 position, glm::vec3 pointCible, glm::vec3 axeVertical);</code></pre><p id="r-963534" data-claire-element-id="963534">Header final :</p><pre id="r-963535" data-claire-element-id="963535"><code data-claire-semantic="cpp">#ifndef DEF_CAMERA
#define DEF_CAMERA


// Includes GLM

#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtx/transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;


// Classe

class Camera
{
    public:

    Camera();
    Camera(glm::vec3 position, glm::vec3 pointCible, glm::vec3 axeVertical);
    ~Camera();


    private:

    float m_phi;
    float m_theta;
    glm::vec3 m_orientation;

    glm::vec3 m_axeVertical;
    glm::vec3 m_deplacementLateral;

    glm::vec3 m_position;
    glm::vec3 m_pointCible;
};

#endif</code></pre><h2 id="r-les-constructeurs-et-le-destructeur" data-claire-element-id="963549">Les Constructeurs et le Destructeur</h2><p id="r-963538" data-claire-element-id="963538">Vous commencez à avoir l'habitude avec les constructeurs et tout ça. :p Le principe ne change pas, on initialise toujours les attributs.</p><p id="r-963539" data-claire-element-id="963539">Au niveau du constructeur par défaut, il suffit simplement d'initialiser les angles avec la valeur <strong>0</strong> et les vecteurs avec leur constructeur par défaut.</p><p id="r-963540" data-claire-element-id="963540">Il faut cependant faire attention à l'attribut <strong>m_axeVertical</strong>. En effet, celui-ci permet savoir quel axe parmi <strong>X</strong>, <strong>Y</strong> ou <strong>Z</strong> représentera l'axe vertical. Si nous n'utilisons le constructeur par défaut il faudra quand même affecter une valeur <em>non nulle</em> sinon la caméra ne pourra pas faire ses calculs correctement. Vu que l'axe <strong>Z</strong> représente (malheureusement) souvent l'axe vertical alors nous donnerons cette valeur par défaut à l'attribut <strong>m_axeVertical</strong>.</p><pre id="r-963541" data-claire-element-id="963541"><code data-claire-semantic="cpp">Camera::Camera() : m_phi(0.0), m_theta(0.0), m_orientation(), m_axeVertical(0, 0, 1), m_deplacementLateral(), m_position(), m_pointCible()
{

}</code></pre><p id="r-963542" data-claire-element-id="963542">Le second constructeur est identique au premier sauf que l'on initialise ici les vecteurs <strong>m_position</strong>, <strong>m_pointCible</strong> et <strong>m_axeVertical</strong> avec les paramètres fournis :</p><pre id="r-963543" data-claire-element-id="963543"><code data-claire-semantic="cpp">Camera::Camera(glm::vec3 position, glm::vec3 pointCible, glm::vec3 axeVertical) : m_phi(0.0), m_theta(0.0), m_orientation(), m_axeVertical(axeVertical), 
                                                                          m_deplacementLateral(), m_position(position), m_pointCible(pointCible)
{

}</code></pre><p id="r-963544" data-claire-element-id="963544">En théorie, ce constructeur ne devrait pas être modifié mais nous allons quand même y apporter une modification temporaire. Je vais vous demander d'affecter une certaine valeur aux angles, je vous expliquerai pourquoi en dernière partie de chapitre (je ne vais pas alourdir les explications pour le moment :) ).</p><p id="r-963545" data-claire-element-id="963545">Ainsi, affectez la valeur <strong>-35.26</strong> à l'angle <strong>Phi</strong> et <strong>-135</strong> à l'angle <strong>Theta</strong>.</p><pre id="r-963546" data-claire-element-id="963546"><code data-claire-semantic="cpp">Camera::Camera(glm::vec3 position, glm::vec3 pointCible, glm::vec3 axeVertical) : m_phi(-35.26), m_theta(-135), m_orientation(), m_axeVertical(axeVertical), 
                                                                                  m_deplacementLateral(), m_position(position), m_pointCible(pointCible)
{

}</code></pre><p id="r-963547" data-claire-element-id="963547">Pour finir, l'implémentation du destructeur se passe de commentaires. :p</p><pre id="r-963548" data-claire-element-id="963548"><code data-claire-semantic="cpp">Camera::~Camera()
{

}</code></pre><h2 id="r-la-methode-orienter" data-claire-element-id="963653">La méthode orienter</h2><h3 id="r-alimentation-des-angles" data-claire-element-id="963566">Alimentation des angles</h3><p id="r-963550" data-claire-element-id="963550">La méthode que nous allons coder va être la plus importante du chapitre, c'est grâce à elle que l'on va pouvoir calculer les coordonnées sphériques du vecteur <strong>orientation</strong>. Nous l'appellerons la méthode <strong>orienter</strong>(), elle prendra en paramètres 2 <em><strong>integer</strong></em> représentant les <em>coordonnées relatives</em> de la souris.</p><aside id="r-963552" data-claire-element-id="963552" data-claire-semantic="information"><p id="r-963551" data-claire-element-id="963551">Je vous rappelle que les coordonnées relatives représentent le mouvement effectué par la souris depuis l'affichage précédent, elles sont modifiées à chaque affichage (60 fois par second pour nous).</p></aside><p id="r-963553" data-claire-element-id="963553">Voici le prototype de cette méthode :</p><pre id="r-963554" data-claire-element-id="963554"><code data-claire-semantic="cpp">void orienter(int xRel, int yRel);</code></pre><p id="r-963555" data-claire-element-id="963555">Avant de commencer l'implémentation de cette méthode, nous allons revoir un petit peu les angles <strong>Phi</strong> et <strong>Theta</strong>. Je vous avais dit que ces angles allaient être alimentés par les mouvements de la souris :</p><ul id="r-963560" data-claire-element-id="963560"><li id="r-963557" data-claire-element-id="963557"><p id="r-963556" data-claire-element-id="963556">L'angle <strong>Phi</strong> : représentant l'orientation sur l'<em>axe vertical</em> sera alimenté par la coordonnée y de la souris</p></li><li id="r-963559" data-claire-element-id="963559"><p id="r-963558" data-claire-element-id="963558">L'angle <strong>Theta</strong> : représentant l'orientation sur l'<em>axe horizontal</em> sera alimentée par la coordonné x de la souris</p></li></ul><p id="r-963561" data-claire-element-id="963561">A chaque tour de la boucle principale, nous devons modifier ces angles en fonction du mouvement de la souris.</p><p id="r-963562" data-claire-element-id="963562">Par exemple, si on bouge la souris vers le haut alors l'angle <strong>Phi</strong> s'agrandira. Au niveau du code, on additionne l'angle <strong>Phi</strong> par le petit mouvement vertical <strong>yRel</strong> :</p><pre id="r-963563" data-claire-element-id="963563"><code data-claire-semantic="cpp">void Camera::orienter(int xRel, int yRel)
{
    // Modification des angles

    m_phi += -yRel;
}</code></pre><div id="r-963565" data-claire-element-id="963565" data-claire-semantic="question"><p id="r-963564" data-claire-element-id="963564">Hey tu t'es trompé non ? Tu as rajouté un signe <strong>-</strong> devant le paramètre <strong>yRel</strong> ?</p></div><h3 id="r-le-sens-trigonometrique" data-claire-element-id="963580">Le sens trigonométrique</h3><p id="r-963567" data-claire-element-id="963567">Non pas du tout. :p</p><p id="r-963568" data-claire-element-id="963568">C'est quelque chose que vous ne pouviez pas forcément savoir, mais lorsque l'on travaille avec des angles il y a un certain sens à respecter qui s'appelle le <strong>sens trigonométrique</strong> (sens inverse des aiguilles d'une montre). Ce sens étant inversé, les angles se retrouvent donc eux-aussi inversés.</p><p id="r-963569" data-claire-element-id="963569">Ainsi, un mouvement de souris allant vers le haut (donc une <strong>augmentation</strong> de l'angle <strong>Phi</strong>) sera interprété par une augmentation de son opposé (donc <strong>-Phi</strong>). Même chose pour les mouvements horizontaux, l'angle <strong>Theta</strong> sera inversé.</p><div id="r-963571" data-claire-element-id="963571" data-claire-semantic="question"><p id="r-963570" data-claire-element-id="963570">Mais avant on a jamais inversé nos angles ?</p></div><p id="r-963572" data-claire-element-id="963572">Dans la plupart des cas, nous n'aurons pas à inverser nos angles. Cependant ici, il y a un contre-sens entre le <em>sens trigonométrique</em> et le <em>sens normal</em> de la souris. <br/> Si vous bougez votre souris vers le haut alors sa position <strong>Y</strong> va augmenter, elle utilise (grossièrement parlant) le <strong>sens horaire</strong>.<br/> Or un angle, lui, va utiliser le sens <strong>anti-horaire</strong>. Donc pour compenser cette inversion, il faut additionner l'<strong>opposé de l'angle</strong>.</p><p id="r-963573" data-claire-element-id="963573">D'ailleurs en parlant de ça, vous avez probablement remarqué que dans certains jeux, on vous offrait la possibilité d'inverser le sens des axes <strong>X</strong> et <strong>Y</strong>. Cette option spécifie simplement à votre caméra s'il faut utiliser le sens horaire ou le sens trigonométrique, donc additionner l'angle normal ou son opposé. Si vous avez envie d'implémenter la même option un jour vous savez maintenant comment faire. ;)</p><p id="r-963574" data-claire-element-id="963574">En définitif, nous devons additionner l'opposé des mouvements générés par la souris à cause du sens trigonométrique.</p><p id="r-963575" data-claire-element-id="963575">L'angle <strong>Theta</strong> ne fait d'ailleurs pas exception :</p><pre id="r-963576" data-claire-element-id="963576"><code data-claire-semantic="cpp">void Camera::orienter(int xRel, int yRel)
{
    // Modification des angles

    m_phi += -yRel;
    m_theta += -xRel;
}</code></pre><p id="r-963577" data-claire-element-id="963577">Nous allons rajouter encore une toute petite chose à ces calculs (ne vous inquiétez pas, il n'y a a rien de tordu cette fois :p ). Vous verrez tout à l'heure que si nous utilisons les coordonnées relatives directement comme ça, la caméra va bouger trop vite et nous fera des mouvements bizarres. Pour régler ce problème, on va abaisser les coordonnées relatives en les multipliant par <strong>0.5</strong>. De cette façon, les mouvements de la caméra seront deux fois moins rapides, ce qui sera utile pour mieux voir. ^^</p><p id="r-963578" data-claire-element-id="963578">Dans la dernière partie, nous rajouterons un attribut pour gérer cette vitesse avec un setter :</p><pre id="r-963579" data-claire-element-id="963579"><code data-claire-semantic="cpp">void Camera::orienter(int xRel, int yRel)
{
    // Modification des angles

    m_phi += -yRel * 0.5;
    m_theta += -xRel * 0.5;
}</code></pre><h3 id="r-calcul-des-coordonnees-spheriques" data-claire-element-id="963620">Calcul des coordonnées sphériques</h3><p id="r-963581" data-claire-element-id="963581">Nous avons maintenant des angles actualisés en fonction de la souris, c'est bien mais il faut encore imposer une limite à un angle en particulier. En effet, dans la première partie du chapitre je vous avais dit que le vecteur <strong>orientation</strong> ne devait jamais être parallèle avec l'axe <strong>Y</strong> vous vous souvenez ? Car dans ce cas, nous ne pouvions plus utiliser la formule des coordonnées sphériques.</p><p id="r-963582" data-claire-element-id="963582">Pour éviter de se retrouver devant cette alignement, il faut limiter l'angle <strong>Phi</strong> à une valeur maximale de <strong>89°</strong> (ou <strong>-89°</strong> dans l'autre sens) sinon l'une des deux règles sur le calcul de la normale sera violée. Donc en imposant cette limite, nous pourrons toujours utiliser le plan formé par les deux vecteurs pour le calcul du déplacement latéral. ;)</p><p id="r-963583" data-claire-element-id="963583">On implémente donc deux conditions pour limiter l'attribut <strong>m_phi</strong> à une valeur de <strong>89°</strong> ou <strong>-89°</strong> :</p><pre id="r-963584" data-claire-element-id="963584"><code data-claire-semantic="cpp">void Camera::orienter(int xRel, int yRel)
{
    // Récupération des angles

    m_phi += -yRel * 0.5;
    m_theta += -xRel * 0.5;


    // Limitation de l'angle phi

    if(m_phi &gt; 89.0)
        m_phi = 89.0;

    else if(m_phi &lt; -89.0)
        m_phi = -89.0;
}</code></pre><p id="r-963585" data-claire-element-id="963585">Nous avons maintenant des angles parfaitement utilisables, nous allons pouvoir passer au calcul des coordonnées sphériques de l'orientation. Et pour cela on va utiliser une formule que nous avons déjà vue. :p</p><figure id="r-963587" data-claire-element-id="963588"><img id="r-963586" data-claire-element-id="963586" src="medias/uploads.siteduzero.com_files_414001_415000_414340.png" alt="Image utilisateur"/></figure><p id="r-963589" data-claire-element-id="963589">Nous devons donc transposer cette formule en code source. On utilisera le setter tout bête de chaque coordonnée du vecteur <strong>m_orientation</strong> pour affecter le résultat :</p><pre id="r-963590" data-claire-element-id="963590"><code data-claire-semantic="cpp">// Calcul des coordonnées sphériques

m_orientation.x = cos(m_phi) * sin(m_theta);
m_orientation.y = sin(m_phi);
m_orientation.z = cos(m_phi) * cos(m_theta);</code></pre><p id="r-963591" data-claire-element-id="963591">....</p><p id="r-963592" data-claire-element-id="963592">....</p><p id="r-963593" data-claire-element-id="963593">Vous ne voyez pas une petite erreur dans ce code ?</p><div id="r-963595" data-claire-element-id="963595" data-claire-semantic="question"><p id="r-963594" data-claire-element-id="963594">Euh non je pense pas ... Il y en a une ?</p></div><p id="r-963596" data-claire-element-id="963596">Hum bon c'est un peu sadique je l'avoue, mais je veux que vous intégrez bien cette notion : le problème ici c'est qu'on envoie des angles exprimés en <strong>degrés</strong> alors que les fonctions <strong>sin</strong>() et <strong>cos</strong>() attendent des angles exprimés <strong>radians</strong>. Si on ne modifie pas ça, on risque d'avoir une sacrée surprise au moment de déplacer la caméra. :lol:</p><p id="r-963597" data-claire-element-id="963597">Pour corriger le problème, nous allons convertir les angles <strong>Phi</strong> et <strong>Theta</strong> en radian. On stockera les nouveaux angles dans des variables temporaires que l'on utilisera pour calculer les coordonnées sphériques.</p><p id="r-963598" data-claire-element-id="963598">Je vous rappelle que pour convertir un angle en radian il faut le multiplier par <strong>Pi</strong> puis le diviser par <strong>180</strong> :</p><pre id="r-963599" data-claire-element-id="963599"><code data-claire-semantic="cpp">// Conversion des angles en radian

float phiRadian = m_phi * M_PI / 180;
float thetaRadian = m_theta * M_PI / 180;


// Calcul des coordonnées sphériques

m_orientation.x = cos(phiRadian) * sin(thetaRadian);
m_orientation.y = sin(phiRadian);
m_orientation.z = cos(phiRadian) * cos(thetaRadian);</code></pre><p id="r-963600" data-claire-element-id="963600">Cette fois le calcul est fonctionnel car nous utilisons bien des angles exprimés en <strong>radians</strong>. Cependant et malgré ça, il subsiste encore un petit problème.</p><p id="r-963601" data-claire-element-id="963601">En effet, la formule avec laquelle je vous rabâche la tête depuis tout à l'heure n'est valable que si l'on utilise l'axe <strong>Y</strong>. Or tout le monde n'utilise pas forcément cet axe, il faut gérer les axes <strong>X</strong> et <strong>Z</strong> également.</p><p id="r-963602" data-claire-element-id="963602">Pour cela, il n'y a rien de compliqué puisqu'il suffit juste d'interchanger les <em>setters</em> du vecteur <strong>orientation</strong> entre eux. Je vous donne les formules pour les 3 axes <strong>X</strong>, <strong>Y</strong> et <strong>Z</strong> :</p><figure id="r-963604" data-claire-element-id="963605"><img id="r-963603" data-claire-element-id="963603" src="medias/uploads.siteduzero.com_files_418001_419000_418119.png" alt="Image utilisateur"/></figure><figure id="r-963607" data-claire-element-id="963608"><img id="r-963606" data-claire-element-id="963606" src="medias/uploads.siteduzero.com_files_418001_419000_418120.png" alt="Image utilisateur"/></figure><p id="r-963609" data-claire-element-id="963609">(Celle-la on la connait)</p><figure id="r-963611" data-claire-element-id="963612"><img id="r-963610" data-claire-element-id="963610" src="medias/uploads.siteduzero.com_files_418001_419000_418121.png" alt="Image utilisateur"/></figure><p id="r-963613" data-claire-element-id="963613">Pour gérer ces 3 formules nous allons simplement utiliser <strong>3</strong> blocs <strong>if</strong>() qui vont tester les coordonnées de l'attribut <strong>m_axeVertical</strong>. Celui qui posséde la valeur <strong>1.0</strong> représentera l'axe vertical :</p><pre id="r-963614" data-claire-element-id="963614"><code data-claire-semantic="cpp">// Si l'axe vertical est l'axe X

if(m_axeVertical.x == 1.0)
{
}


// Si c'est l'axe Y

else if(m_axeVertical.y == 1.0)
{
}


// Sinon c'est l'axe Z

else
{
}</code></pre><p id="r-963615" data-claire-element-id="963615">Si le développeur n'a pas rentré la valeur <strong>1.0</strong> à une coordonnée alors ce sera l'axe <strong>Z</strong> qui sera choisi. Le développeur doit faire attention à la valeur qu'il donne pour ce vecteur, c'est sa responsabilité. ;)</p><p id="r-963616" data-claire-element-id="963616">Une fois les blocs créés, il suffit d'associer la bonne formule aux bonnes coordonnées :</p><pre id="r-963617" data-claire-element-id="963617"><code data-claire-semantic="cpp">// Si l'axe vertical est l'axe X

if(m_axeVertical.x == 1.0)
{
    // Calcul des coordonnées sphériques

    m_orientation.x = sin(phiRadian);
    m_orientation.y = cos(phiRadian) * cos(thetaRadian);
    m_orientation.z = cos(phiRadian) * sin(thetaRadian);
}


// Si c'est l'axe Y

else if(m_axeVertical.y == 1.0)
{
    // Calcul des coordonnées sphériques

    m_orientation.x = cos(phiRadian) * sin(thetaRadian);
    m_orientation.y = sin(phiRadian);
    m_orientation.z = cos(phiRadian) * cos(thetaRadian);
}


// Sinon c'est l'axe Z

else
{
    // Calcul des coordonnées sphériques

    m_orientation.x = cos(phiRadian) * cos(thetaRadian);
    m_orientation.y = cos(phiRadian) * sin(thetaRadian);
    m_orientation.z = sin(phiRadian);
}</code></pre><p id="r-963618" data-claire-element-id="963618">Cette fois, le code est totalement fonctionnel. :D</p><p id="r-963619" data-claire-element-id="963619">Dernier point à préciser, on devrait en théorie <em>normaliser</em> le vecteur <strong>orientation</strong>, mais vu que nous utilisons des fonctions trigonométriques le vecteur est déjà normalisé. En effet, lorsqu'on utilise la trigonométrie, le vecteur qui représente le rayon a toujours une norme égale à <strong>1</strong> donc il est normalisé. ;)</p><h3 id="r-calcul-du-vecteur-de-deplacement-lateral" data-claire-element-id="963634">Calcul du vecteur de déplacement latéral</h3><p id="r-963621" data-claire-element-id="963621">Nous avons maintenant le fameux vecteur <strong>orientation</strong>, nous pouvons donc l'utiliser pour le calcul du vecteur de <strong>déplacement latéral</strong>.<br/> Vous vous souvenez que pour le trouver, il fallait multiplier le vecteur <strong>orientation</strong> par le vecteur représentant l'<strong>axe vertical</strong>. On trouve ainsi la normale du plan formé par ces deux vecteurs.</p><p id="r-963622" data-claire-element-id="963622">Quand je parle de la multiplication c'est un peu un abus de langage car il s'agit en fait d'un produit vectoriel (en comparaison du produit d'une multiplication). Le produit vectoriel permet de trouver le fameux vecteur orthogonal que nous cherchons.</p><p id="r-963623" data-claire-element-id="963623">Ce produit ne se fait pas avec un signe <strong>*</strong> classique, il faut plutôt utiliser une méthode de la librairie <strong>GLM</strong> qui s'appelle <strong>cross</strong>() :</p><pre id="r-963624" data-claire-element-id="963624"><code data-claire-semantic="cpp">glm::vec3 cross(glm::vec3 vector1, glm::vec3 vector2);</code></pre><p id="r-963625" data-claire-element-id="963625">Cette méthode retourne le vecteur orthogonal des deux paramètres donnés.</p><p id="r-963626" data-claire-element-id="963626">Nous l'appelons donc en lui donnant les attributs <strong>m_axeVertical</strong> et <strong>m_orientation</strong> pour qu'elle puisse le calculer :</p><pre id="r-963627" data-claire-element-id="963627"><code data-claire-semantic="cpp">// Calcul de la normale

m_deplacementLateral = cross(m_axeVertical, m_orientation);</code></pre><p id="r-963628" data-claire-element-id="963628">On pensera cette fois à normaliser le résultat car on n'utilise pas la trigo, ce qui fait que rien n'est normalisé tant qu'on ne l'a pas demandé. Mais encore une fois, la librairie <strong>GLM</strong> nous fournit directement une méthode pour normaliser les vecteurs. Nous n'avons rien à faire décidément. :p</p><p id="r-963629" data-claire-element-id="963629">Cette méthode s'appelle <strong>normalize</strong>() :</p><pre id="r-963630" data-claire-element-id="963630"><code data-claire-semantic="cpp">glm::vec3 normalize(glm::vec3 vector);</code></pre><p id="r-963631" data-claire-element-id="963631">Elle prend en paramètre le vecteur à normaliser et renvoie le résultat.</p><p id="r-963632" data-claire-element-id="963632">Nous l'appellerons en lui donnant le vecteur que l'on vient de calculer, à savoir <strong>m_deplacementVertical</strong> :</p><pre id="r-963633" data-claire-element-id="963633"><code data-claire-semantic="cpp">// Calcul de la normale

m_deplacementLateral = cross(m_axeVertical, m_orientation);
m_deplacementLateral = normalize(m_deplacementLateral);</code></pre><h3 id="r-actualisation-du-point-cible" data-claire-element-id="963648">Actualisation du point ciblé</h3><p id="r-963635" data-claire-element-id="963635">Enfin pour terminer cette méthode, il ne reste plus qu'à actualiser le <em>point fixé</em> par la matrice <strong>modelview</strong> (l'un des trois paramètres dont à besoin la matrice).</p><p id="r-963636" data-claire-element-id="963636">Pour trouver ce point, on va utiliser une petite astuce : on va additionner le vecteur <strong>position</strong> avec le vecteur <strong>orientation</strong>. Le résultat sera le point qu'attend la matrice, soit le point pile en face de la position de la caméra.</p><div id="r-963638" data-claire-element-id="963638" data-claire-semantic="question"><p id="r-963637" data-claire-element-id="963637">On peut additionner deux objets <em><strong>vec3</strong></em> ? Ça doit être compliqué non ?</p></div><p id="r-963639" data-claire-element-id="963639">Non pas du tout car les développeurs de <strong>GLM</strong> ont pensé à tout et ont intégré, au même titre que les matrices, les surcharges d'opérateurs. Nous pouvons donc les additionner sans problème juste en utilisant le signe <strong>+</strong>. Génial non ? ^^</p><p id="r-963640" data-claire-element-id="963640">Pour additionner le vecteur <strong>position</strong> et <strong>orientation</strong>, il nous suffit donc d'utiliser le signe <strong>+</strong> :</p><p id="r-963641" data-claire-element-id="963641">Au niveau du code, on additionne simplement ces deux vecteurs :</p><pre id="r-963642" data-claire-element-id="963642"><code data-claire-semantic="cpp">// Calcul du point ciblé pour OpenGL

m_pointCible = m_position + m_orientation;</code></pre><p id="r-963643" data-claire-element-id="963643">Addition terminée. :p</p><div id="r-963645" data-claire-element-id="963645" data-claire-semantic="question"><p id="r-963644" data-claire-element-id="963644">Et ce vecteur on ne le normalise pas ?</p></div><p id="r-963646" data-claire-element-id="963646">Nan, les vecteurs <strong>position</strong> et <strong>pointCible</strong> ne doivent jamais être normalisés car ils représentent des positions dans l'espace. Ils permettent à <em>OpenGL</em> de savoir où l'on se trouve dans un monde 3D, et un monde 3D ne se limite pas à des positions de 1 unité maximum.</p><p id="r-963647" data-claire-element-id="963647">Les vecteurs normalisés servent pour les calculs diverses comme l'<strong>orienation</strong> et le vecteur <strong>déplacementLateral</strong>.</p><h3 id="r-recapitulation-3" data-claire-element-id="963652">Récapitulation</h3><p id="r-963649" data-claire-element-id="963649">Si on récapitule tout ce que l'on vient de coder :</p><pre id="r-963650" data-claire-element-id="963650"><code data-claire-semantic="cpp">void Camera::orienter(int xRel, int yRel)
{
    // Récupération des angles

    m_phi += -yRel * 0.5;
    m_theta += -xRel * 0.5;


    // Limitation de l'angle phi

    if(m_phi &gt; 89.0)
        m_phi = 89.0;

    else if(m_phi &lt; -89.0)
        m_phi = -89.0;


    // Conversion des angles en radian

    float phiRadian = m_phi * M_PI / 180;
    float thetaRadian = m_theta * M_PI / 180;


    // Si l'axe vertical est l'axe X

    if(m_axeVertical.x == 1.0)
    {
        // Calcul des coordonnées sphériques

        m_orientation.x = sin(phiRadian);
        m_orientation.y = cos(phiRadian) * cos(thetaRadian);
        m_orientation.z = cos(phiRadian) * sin(thetaRadian);
    }


    // Si c'est l'axe Y

    else if(m_axeVertical.y == 1.0)
    {
        // Calcul des coordonnées sphériques

        m_orientation.x = cos(phiRadian) * sin(thetaRadian);
        m_orientation.y = sin(phiRadian);
        m_orientation.z = cos(phiRadian) * cos(thetaRadian);
    }


    // Sinon c'est l'axe Z

    else
    {
        // Calcul des coordonnées sphériques

        m_orientation.x = cos(phiRadian) * cos(thetaRadian);
        m_orientation.y = cos(phiRadian) * sin(thetaRadian);
        m_orientation.z = sin(phiRadian);
    }


    // Calcul de la normale

    m_deplacementLateral = cross(m_axeVertical, m_orientation);
    m_deplacementLateral = normalize(m_deplacementLateral);


    // Calcul du point ciblé pour OpenGL

    m_pointCible = m_position + m_orientation;
}</code></pre><p id="r-963651" data-claire-element-id="963651">Grâce à cette méthode, nous pouvons calculer non seulement l'<em>orientation</em> de la caméra mais aussi son vecteur <em>orthogonal</em> qui sera utilisé pour le déplacement latéral. :)</p><h2 id="r-la-methode-deplacer" data-claire-element-id="963689">La méthode deplacer</h2><p id="r-963654" data-claire-element-id="963654">La méthode suivante va permettre de s'occuper du déplacement pur et dur de la caméra. Nous savons déjà comment faire en plus ça ne sera pas compliqué. ^^</p><p id="r-963655" data-claire-element-id="963655">Nous appellerons cette méthode la méthode <strong>deplacer</strong>(), elle prendra en paramètre une <em>référence constante</em> sur un objet de type <em><strong>Input</strong></em>. Car oui, nous aurons besoin de savoir si les touches de déplacement sont pressées ou non, nous avons donc besoin d'un objet de ce type.</p><pre id="r-963656" data-claire-element-id="963656"><code data-claire-semantic="cpp">void deplacer(Input const &amp;input);</code></pre><p id="r-963657" data-claire-element-id="963657">Pour faire avancer ou reculer la caméra on additionnera ou on soustraira le vecteur <strong>orientation</strong> :</p><figure id="r-963659" data-claire-element-id="963660"><img id="r-963658" data-claire-element-id="963658" src="medias/uploads.siteduzero.com_files_415001_416000_415164.png" alt="Image utilisateur"/></figure><figure id="r-963662" data-claire-element-id="963663"><img id="r-963661" data-claire-element-id="963661" src="medias/uploads.siteduzero.com_files_415001_416000_415165.png" alt="Image utilisateur"/></figure><p id="r-963664" data-claire-element-id="963664">Et pour la déplacer latéralement on additionnera ou on soustraira le vecteur <em><strong>orthogonal</strong></em> au vecteur <strong>orientation</strong> :</p><figure id="r-963666" data-claire-element-id="963667"><img id="r-963665" data-claire-element-id="963665" src="medias/uploads.siteduzero.com_files_415001_416000_415166.png" alt="Image utilisateur"/></figure><p id="r-963668" data-claire-element-id="963668">Au niveau du code, on va encapsuler les quatre touches de déplacement dans des <em>blocs if</em>. Si une touche est pressée, alors on effectue l'action désirée (addition ou soustraction de vecteurs).</p><p id="r-963669" data-claire-element-id="963669">Par exemple, si la touche Haut (<strong>SDL_SCANCODE_UP</strong>) est pressée alors on additionnera le vecteur <strong>orientation</strong> avec le vecteur <strong>position</strong> pour faire avancer la caméra. On ajoutera ici aussi une contrainte de vitesse exactement comme pour l'orientation de la caméra (on créera également un attribut pour gérer ça plus tard). Nous diviserons la vitesse de déplacement par <strong>2</strong> en multipliant le vecteur <strong>orientation</strong> par <strong>0.5</strong> (un vecteur multiplié par un nombre est différent d'un calcul vectoriel. On multiplie juste les coordonnées par 0.5 dans ce cas ^^ ) :</p><pre id="r-963670" data-claire-element-id="963670"><code data-claire-semantic="cpp">void Camera::deplacer(Input const &amp;input)
{
    // Avancée de la caméra

    if(input.getTouche(SDL_SCANCODE_UP))
        m_position = m_position + m_orientation * 0.5f;
}</code></pre><p id="r-963671" data-claire-element-id="963671">Lorsque la position de la caméra est modifiée alors le point ciblé par <em>OpenGL</em> doit également être modifié. Pour cela, on fait exactement ce que l'on a fait dans la méthode <strong>orienter</strong>() :</p><pre id="r-963672" data-claire-element-id="963672"><code data-claire-semantic="cpp">void Camera::deplacer(Input const &amp;input)
{
    // Avancée de la caméra

    if(input.getTouche(SDL_SCANCODE_UP))
    {
        m_position = m_position + m_orientation * 0.5f;
        m_pointCible = m_position + m_orientation;
    }
}</code></pre><p id="r-963673" data-claire-element-id="963673">Grâce à cette condition, notre caméra peut avancer quand nous voulons. :D</p><p id="r-963674" data-claire-element-id="963674">D'ailleurs pour la faire reculer ce n'est pas plus compliqué, on fait exactement la même chose sauf que cette fois on soustrait le vecteur <strong>position</strong> et le vecteur <strong>orientation</strong>. On utilisera le scancode <strong>SDL_SCANCODE_DOWN</strong> pour la touche du clavier :</p><pre id="r-963675" data-claire-element-id="963675"><code data-claire-semantic="cpp">// Recul de la caméra

if(input.getTouche(SDL_SCANCODE_DOWN))
{
    m_position = m_position - m_orientation * 0.5f;
    m_pointCible = m_position + m_orientation;
}</code></pre><p id="r-963676" data-claire-element-id="963676">Le principe ne change pas pour le déplacement latéral : si on veut aller vers la gauche on additionne le vecteur <strong>m_deplacementLateral</strong> à la position, et si on veut aller vers la doite on le soustrait. On utilisera respectivement les scancodes <strong>SDL_SCANCODE_LEFT</strong> et <strong>SDL_SCANCODE_RIGHT</strong> :</p><pre id="r-963677" data-claire-element-id="963677"><code data-claire-semantic="cpp">// Déplacement vers la gauche

if(input.getTouche(SDL_SCANCODE_LEFT))
{
    m_position = m_position + m_deplacementLateral * 0.5f;
    m_pointCible = m_position + m_orientation;
}


// Déplacement vers la droite

if(input.getTouche(SDL_SCANCODE_RIGHT))
{
    m_position = m_position - m_deplacementLateral * 0.5f;
    m_pointCible = m_position + m_orientation;
}</code></pre><p id="r-963678" data-claire-element-id="963678">Si on récapitule tout ça :</p><pre id="r-963679" data-claire-element-id="963679"><code data-claire-semantic="cpp">void Camera::deplacer(Input const &amp;input)
{
    // Avancée de la caméra

    if(input.getTouche(SDL_SCANCODE_UP))
    {
        m_position = m_position + m_orientation * 0.5f;
        m_pointCible = m_position + m_orientation;
    }


    // Recul de la caméra

    if(input.getTouche(SDL_SCANCODE_DOWN))
    {
        m_position = m_position - m_orientation * 0.5f;
        m_pointCible = m_position + m_orientation;
    }


    // Déplacement vers la gauche

    if(input.getTouche(SDL_SCANCODE_LEFT))
    {
        m_position = m_position + m_deplacementLateral * 0.5f;
        m_pointCible = m_position + m_orientation;
    }


    // Déplacement vers la droite

    if(input.getTouche(SDL_SCANCODE_RIGHT))
    {
        m_position = m_position - m_deplacementLateral * 0.5f;
        m_pointCible = m_position + m_orientation;
    }
}</code></pre><div id="r-963681" data-claire-element-id="963681" data-claire-semantic="question"><p id="r-963680" data-claire-element-id="963680">Petite question : pourquoi n'utilise-t-on pas des <strong>else if</strong> ?</p></div><p id="r-963682" data-claire-element-id="963682">Simplement pour être capable d'utiliser plusieurs touches à la fois. ;) Si on utilisait des blocs <strong>else if</strong>, il n'y aurait qu'une seule touche qui serait gérée pour se déplacer.</p><p id="r-963683" data-claire-element-id="963683">Il ne manque plus qu'une petite chose à cette méthode. En effet, vu qu'on a l'objet <strong>input</strong> sous la main on peut en profiter pour savoir si il y a eu un mouvement de souris. Et s'il y a mouvement de souris alors il y a une modification de l'orientation et donc un appel à la méthode <strong>orienter</strong>(). ^^</p><p id="r-963684" data-claire-element-id="963684">On va donc rajouter une condition qui sera déclenchée lors d'un mouvement de la souris. A l'intérieur, on appellera la méthode <strong>orienter</strong>() à laquelle on donnera en paramètres les attributs <strong>m_xRel</strong> et <strong>m_yRel</strong> de l'objet <strong>input</strong>.</p><pre id="r-963685" data-claire-element-id="963685"><code data-claire-semantic="cpp">// Gestion de l'orientation

if(input.mouvementSouris())
    orienter(input.getXRel(), input.getYRel());</code></pre><p id="r-963686" data-claire-element-id="963686">Méthode finale :</p><pre id="r-963687" data-claire-element-id="963687"><code data-claire-semantic="cpp">void Camera::deplacer(Input const &amp;input)
{
    // Gestion de l'orientation

    if(input.mouvementSouris())
        orienter(input.getXRel(), input.getYRel());


    // Avancée de la caméra

    if(input.getTouche(SDL_SCANCODE_UP))
    {
        m_position = m_position + m_orientation * 0.5f;
        m_pointCible = m_position + m_orientation;
    }


    // Recul de la caméra

    if(input.getTouche(SDL_SCANCODE_DOWN))
    {
        m_position = m_position - m_orientation * 0.5f;
        m_pointCible = m_position + m_orientation;
    }


    // Déplacement vers la gauche

    if(input.getTouche(SDL_SCANCODE_LEFT))
    {
        m_position = m_position + m_deplacementLateral * 0.5f;
        m_pointCible = m_position + m_orientation;
    }


    // Déplacement vers la droite

    if(input.getTouche(SDL_SCANCODE_RIGHT))
    {
        m_position = m_position - m_deplacementLateral * 0.5f;
        m_pointCible = m_position + m_orientation;
    }
}</code></pre><p id="r-963688" data-claire-element-id="963688">Avec cette méthode, nous pouvons gérer complétement le déplacement de la caméra. :D</p><h2 id="r-methode-lookat" data-claire-element-id="963696">Méthode lookAt</h2><p id="r-963690" data-claire-element-id="963690">On arrive à la dernière méthode de notre caméra. :(</p><p id="r-963691" data-claire-element-id="963691">Jusqu'à maintenant, nous avons utilisé pas mal de vecteurs mais vous savez que seuls 3 d'entre eux sont vraiment importants : la <strong>position</strong>, le <strong>point ciblé</strong> et l'<strong>axe vertical</strong>. Ces trois vecteurs sont indispensables pour la matrice <strong>modelview</strong>, nous devons donc les lui envoyer.</p><p id="r-963692" data-claire-element-id="963692">Nous allons coder une nouvelle méthode pour s'occuper de ça, on l'appellera <strong>lookAt</strong>() en référence à la méthode du même nom chez <strong>GLM</strong>. Elle prendra en paramètre une référence (non constante) sur la matrice <strong>modelview</strong> :</p><pre id="r-963693" data-claire-element-id="963693"><code data-claire-semantic="cpp">void lookAt(glm::mat4 &amp;modelview);</code></pre><p id="r-963694" data-claire-element-id="963694">Pour son implémentation, on appelle simplement la méthode <strong>lookAt</strong>() de la matrice <strong>modelview</strong>, on lui donne au passage les 3 vecteurs qu'elle demande. Faites attention à utiliser le namespace <strong>glm::</strong> ici même si vous utilisez le <strong>using</strong> dans votre fichier. Vu que nous avons deux méthodes portant le même nom, il faut utiliser le namespace pour les différencier :</p><pre id="r-963695" data-claire-element-id="963695"><code data-claire-semantic="cpp">void Camera::lookAt(glm::mat4 &amp;modelview)
{
    // Actualisation de la vue dans la matrice

    modelview = glm::lookAt(m_position, m_pointCible, m_axeVertical);
}</code></pre><h2 id="r-implementation-de-la-camera-2" data-claire-element-id="963716">Implémentation de la caméra</h2><p id="r-963697" data-claire-element-id="963697">Notre caméra est maintenant totalement opérationnelle ! Il ne manque plus qu'à l'implémenter dans notre scène. :D</p><p id="r-963698" data-claire-element-id="963698">On ajoute donc l'en-tête <strong>Camera.h</strong> dans le header <strong>SceneOpenGL.h</strong>, puis on déclare un objet de type <strong><em>Camera</em></strong> dans la méthode <strong>bouclePrincipale</strong>(). On placera cette caméra au point de coordonnées <strong>(3, 3, 3)</strong> et elle ciblera le point de coordonnées <strong>(0, 0, 0)</strong>. Bien entendu, l'axe vertical reste l'<strong>axe y (0, 1, 0)</strong>.</p><pre id="r-963699" data-claire-element-id="963699"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    Uint32 frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Caméra mobile

    Camera camera(vec3(3, 3, 3), vec3(0, 0, 0), vec3(0, 1, 0));


    ....
}</code></pre><p id="r-963700" data-claire-element-id="963700">On en profite au passage pour piéger et cacher le pointeur de la souris grâce aux méthodes suivantes :</p><pre id="r-963701" data-claire-element-id="963701"><code data-claire-semantic="cpp">// Capture du pointeur

m_input.afficherPointeur(false);
m_input.capturerPointeur(true);</code></pre><pre id="r-963702" data-claire-element-id="963702"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    Uint32 frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Caméra mobile

    Camera camera(vec3(3, 3, 3), vec3(0, 0, 0), vec3(0, 1, 0));
    m_input.afficherPointeur(false);
    m_input.capturerPointeur(true);


    ....
}</code></pre><aside id="r-963705" data-claire-element-id="963705" data-claire-semantic="error"><p id="r-963703" data-claire-element-id="963703">Pour les <strong>linuxiens</strong>, il semble qu'il y ait un problème avec la méthode <strong>capturerPointeur</strong>(). La fonction <strong>SDL_SetRelativeMouseMode</strong>() qui est utilisée à l'intérieur ne semble pas fonctionner chez vous. C'est un problème qui existe depuis la <strong>SDL 1.3</strong>, j'espère que la librairie va corriger ce problème rapidement pour que vous n'ayez plus de soucis. :(</p><p id="r-963704" data-claire-element-id="963704">Ce qui est bizarre c'est que tout fonctionne correctement sous Windows mais pas sous Linux ...</p></aside><p id="r-963706" data-claire-element-id="963706">Ensuite, on appelle la méthode <strong>deplacer</strong>() de l'objet <strong>camera</strong> sans oublier de donner l'attribut <strong>m_input</strong> pour qu'il puisse travailler avec :</p><pre id="r-963707" data-claire-element-id="963707"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    // Gestion des évènements

    m_input.updateEvenements();

    if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
        break;

    camera.deplacer(m_input);


    ....
}</code></pre><p id="r-963708" data-claire-element-id="963708">Enfin, on remplace la méthode <strong>lookAt</strong>() de la matrice <strong>modelview</strong> par la méthode <strong>lookAt</strong>() de la <strong>caméra</strong>. On n'oublie pas de lui donner le paramètre qu'elle attend soit la matrice <strong>modelview</strong> elle-même :</p><pre id="r-963709" data-claire-element-id="963709"><code data-claire-semantic="cpp">....


// Nettoyage de l'écran

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


// Gestion de la caméra

camera.lookAt(modelview);


....</code></pre><p id="r-963710" data-claire-element-id="963710">Et là, vous pouvez compiler joyeusement votre code source. :D</p><figure id="r-963712" data-claire-element-id="963713"><img id="r-963711" data-claire-element-id="963711" src="medias/uploads.siteduzero.com_files_415001_416000_415167.png" alt="Image utilisateur"/></figure><p id="r-963714" data-claire-element-id="963714">Essayez votre nouvelle caméra, vous pouvez vous déplacer dans toutes les directions sans aucun problème. ^^</p><p id="r-963715" data-claire-element-id="963715">Notre caméra est maintenant quasi-complète, il manque en réalité encore une méthode. En effet, tout à l'heure je vous ai demandé de mettre des valeurs par défaut pour les angles dans le constructeur. Or cette solution ne fonctionne que dans le cas où la caméra se trouve au point de coordonnées <strong>(3, 3, 3)</strong>. Dans la dernière partie de ce chapitre, nous allons coder une nouvelle méthode qui permettra de régler ce problème.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
<span class="arrow"></span>
<span class="next">Fonctionnement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
<span class="next">Fixer un point</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Fixerunpoint"></a><h2>Fixer un point</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
<span class="arrow"></span>
<span class="next">Implémentation de la caméra</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
<span class="next">Améliorations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-963718" data-claire-element-id="963718">Dans ces deux dernières parties, nous allons ajouter quelques petites fonctionnalités à la classe <em><strong>Camera</strong></em>. Nous nous occuperons :</p><ul id="r-963725" data-claire-element-id="963725"><li id="r-963720" data-claire-element-id="963720"><p id="r-963719" data-claire-element-id="963719">D'ajouter une <strong>méthode</strong> pour cibler un point</p></li><li id="r-963722" data-claire-element-id="963722"><p id="r-963721" data-claire-element-id="963721">D'ajouter un <strong>setter</strong> pour la position de la caméra</p></li><li id="r-963724" data-claire-element-id="963724"><p id="r-963723" data-claire-element-id="963723">D'ajouter deux <strong>attributs</strong> pour gérer sa sensibilité (orientation) et sa vitesse (déplacement)</p></li></ul><p id="r-963726" data-claire-element-id="963726">Nous commencerons évidemment par le premier point. ;) Les autres seront développés dans la dernière partie.</p><h2 id="r-fonctionnalites-de-la-classe-camera" data-claire-element-id="963802">Fonctionnalités de la classe Camera</h2><h3 id="r-la-methode-setpointcible" data-claire-element-id="963801">La méthode setPointcible()</h3><p id="r-963727" data-claire-element-id="963727">Tout à l'heure, je vous avais demandé d'affecter certaines valeurs aux angles <strong>Theta</strong> et <strong>Phi</strong> dans le constructeur. Si vous n'aviez pas fait cela, vos angles auraient été initialisés avec la valeur <strong>0</strong> et votre regard aurait été complétement inversé par rapport au point à cibler :</p><figure id="r-963729" data-claire-element-id="963730"><img id="r-963728" data-claire-element-id="963728" src="medias/uploads.siteduzero.com_files_415001_416000_415781.png" alt="Image utilisateur"/></figure><p id="r-963731" data-claire-element-id="963731">Vous auriez bien placé votre caméra mais elle ne serait pas du tout orientée de la bonne façon malgré le fait que vous auriez donné en paramètre le <strong>point à cibler</strong>. Elle serait orientée selon la valeur des angles soit la valeur <strong>0</strong> à cause du constructeur. Rappelez-vous qu'à chaque fois on ne fait qu'additionner les changements de position et les angles partent avec leur valeur d'origine :</p><pre id="r-963732" data-claire-element-id="963732"><code data-claire-semantic="cpp">// Modification des angles

m_phi += -yRel * 0.5;
m_theta += -xRel * 0.5;</code></pre><p id="r-963733" data-claire-element-id="963733">Pour régler ce problème, il faut que les angles soient initialisés avec la bonne orientation dès le départ. Et pour ça, nous allons coder une méthode qui fera l'inverse de la méthode <strong>orienter</strong>(). Elle devra être capable de calculer la valeur initiale des angles à partir des vecteurs qu'on lui envoie.</p><p id="r-963734" data-claire-element-id="963734">Cette méthode va être facile à coder, il suffit juste de reprendre la formule des coordonnées sphériques et d'en inverser les opérations pour trouver la valeur des angles. :p On commence avec la formule valable pour l'axe <strong>Y</strong> :</p><figure id="r-963736" data-claire-element-id="963737"><img id="r-963735" data-claire-element-id="963735" src="medias/uploads.siteduzero.com_files_415001_416000_415782.png" alt="Image utilisateur"/></figure><figure id="r-963739" data-claire-element-id="963740"><img id="r-963738" data-claire-element-id="963738" src="medias/uploads.siteduzero.com_files_415001_416000_415783.png" alt="Image utilisateur"/></figure><figure id="r-963742" data-claire-element-id="963743"><img id="r-963741" data-claire-element-id="963741" src="medias/uploads.siteduzero.com_files_415001_416000_415784.png" alt="Image utilisateur"/></figure><figure id="r-963745" data-claire-element-id="963746"><img id="r-963744" data-claire-element-id="963744" src="medias/uploads.siteduzero.com_files_415001_416000_415786.png" alt="Image utilisateur"/></figure><p id="r-963747" data-claire-element-id="963747">Avec cette formule, on peut trouver les angles <strong>Theta</strong> et <strong>Phi</strong> à partir des coordonnées (<strong>x, y, z</strong>) - coordonnées qui appartiennent au vecteur orientation dans le cas où on utilise l'axe <strong>Y</strong>. Pour trouver les angles avec les autres axes, il suffit juste d'interchanger les formules de départ pour tomber sur les résultats suivants :</p><figure id="r-963749" data-claire-element-id="963750"><img id="r-963748" data-claire-element-id="963748" src="medias/uploads.siteduzero.com_files_418001_419000_418116.png" alt="Image utilisateur"/></figure><figure id="r-963752" data-claire-element-id="963753"><img id="r-963751" data-claire-element-id="963751" src="medias/uploads.siteduzero.com_files_418001_419000_418117.png" alt="Image utilisateur"/></figure><p id="r-963754" data-claire-element-id="963754">Vous voyez que la formule reste la même, il n'y a que la coordonnée utilisée qui va changer. ^^</p><div id="r-963756" data-claire-element-id="963756" data-claire-semantic="question"><p id="r-963755" data-claire-element-id="963755">Oui c'est bien tout ça mais on a besoin des coordonnées du vecteur <strong>orientation</strong> pour calculer les angles non ? Or on ne l'a pas celui-la à l'initialisation de la caméra ?</p></div><p id="r-963757" data-claire-element-id="963757">Oui tout à fait nous ne l'avons pas à l'initialisation de la caméra. Mais encore une fois, nous pouvons le trouver en inversant une autre formule mathématique.</p><p id="r-963758" data-claire-element-id="963758">Et oui, souvenez-vous que pour trouver le vecteur <strong>pointCible</strong>, on additionne le vecteur <strong>position</strong> et le vecteur <strong>orientation</strong> ? :</p><pre id="r-963759" data-claire-element-id="963759"><code data-claire-semantic="cpp">// Calcul du point ciblé pour OpenGL

m_pointCible = m_position + m_orientation;</code></pre><figure id="r-963761" data-claire-element-id="963762"><img id="r-963760" data-claire-element-id="963760" src="medias/uploads.siteduzero.com_files_415001_416000_415787.png" alt="Image utilisateur"/></figure><p id="r-963763" data-claire-element-id="963763">Donc pour trouver le vecteur <strong>orientation</strong> (et surtout ses coordonnées), il suffit de soustraire le vecteur <strong>pointCible</strong> par le vecteur <strong>position</strong> :</p><figure id="r-963765" data-claire-element-id="963766"><img id="r-963764" data-claire-element-id="963764" src="medias/uploads.siteduzero.com_files_415001_416000_415788.png" alt="Image utilisateur"/></figure><p id="r-963767" data-claire-element-id="963767">Grâce à cette soustraction, on va pouvoir calculer la valeur initiale des angles au moment de l'initialisation de la caméra. ^^</p><p id="r-963768" data-claire-element-id="963768">Pour effectuer tous ces calculs, nous utiliserons une méthode, ou plutôt un setter sur l'attribut <strong>m_pointCible</strong> que nous appellerons simplement <strong>setPointcible</strong>(). Il prendra en paramètre le vecteur à cibler :</p><pre id="r-963769" data-claire-element-id="963769"><code data-claire-semantic="cpp">void setPointcible(glm::vec3 pointCible);</code></pre><p id="r-963770" data-claire-element-id="963770">On commence son implémentation en soustrayant les vecteurs <strong>pointCible</strong> et <strong>position</strong> pour trouver le vecteur <strong>orientation</strong>. Comme d'habitude, on normalisera ce vecteur :</p><pre id="r-963771" data-claire-element-id="963771"><code data-claire-semantic="cpp">void Camera::setPointcible(glm::vec3 pointCible)
{
    // Calcul du vecteur orientation

    m_orientation = m_pointCible - m_position;
    m_orientation = normalize(m_orientation);
}</code></pre><p id="r-963772" data-claire-element-id="963772">Une fois le vecteur <strong>orientation</strong> trouvé, on peut maintenant calculer les angles <strong>Phi</strong> et <strong>Theta</strong> grâce aux formules inversées que l'on a trouvées précédemment :</p><figure id="r-963774" data-claire-element-id="963775"><img id="r-963773" data-claire-element-id="963773" src="medias/uploads.siteduzero.com_files_418001_419000_418116.png" alt="Image utilisateur"/></figure><figure id="r-963777" data-claire-element-id="963778"><img id="r-963776" data-claire-element-id="963776" src="medias/uploads.siteduzero.com_files_415001_416000_415786.png" alt="Image utilisateur"/></figure><figure id="r-963780" data-claire-element-id="963781"><img id="r-963779" data-claire-element-id="963779" src="medias/uploads.siteduzero.com_files_418001_419000_418117.png" alt="Image utilisateur"/></figure><p id="r-963782" data-claire-element-id="963782">Comme pour la méthode <strong>orienter</strong>(), on commence par faire 3 blocs <strong>if</strong> qui vont permettre de gérer le cas des trois axes verticaux :</p><pre id="r-963783" data-claire-element-id="963783"><code data-claire-semantic="cpp">// Si l'axe vertical est l'axe X

if(m_axeVertical.x == 1.0)
{
}


// Si c'est l'axe Y

else if(m_axeVertical.y == 1.0)
{
}


// Sinon c'est l'axe Z

else
{
}</code></pre><p id="r-963784" data-claire-element-id="963784">Une fois que c'est fait, on associe la bonne formule au bon axe. Je vous donne l'exemple du cas où on utilise l'axe <strong>Y</strong> :</p><pre id="r-963785" data-claire-element-id="963785"><code data-claire-semantic="cpp">// Calcul des angles pour l'axe Y

m_phi = asin(m_orientation.y);
m_theta = acos(m_orientation.z / cos(m_phi));</code></pre><p id="r-963786" data-claire-element-id="963786">Implémentation du bon calcul dans les blocs <strong>if</strong> :</p><pre id="r-963787" data-claire-element-id="963787"><code data-claire-semantic="cpp">// Si l'axe vertical est l'axe X

if(m_axeVertical.x == 1.0)
{
    // Calcul des angles

    m_phi = asin(m_orientation.x);
    m_theta = acos(m_orientation.y / cos(m_phi));
}


// Si c'est l'axe Y

else if(m_axeVertical.y == 1.0)
{
    // Calcul des angles

    m_phi = asin(m_orientation.y);
    m_theta = acos(m_orientation.z / cos(m_phi));
}


// Sinon c'est l'axe Z

else
{
    // Calcul des angles

    m_phi = asin(m_orientation.x);
    m_theta = acos(m_orientation.z / cos(m_phi));
}</code></pre><p id="r-963788" data-claire-element-id="963788">En temps normal nous pourrions nous arrêter là mais il existe un petit problème avec la coordonnée utilisée pour calculer l'angle <strong>Theta</strong>. En effet, les formules que nous utilisons ne sont valables que si cette coordonnée est supérieure à <strong>0</strong>. Si elle est inférieure à <strong>0</strong>, les formules vont donner une valeur opposée de l'angle ( <strong>-Theta</strong> ), ce qui inversera le résultat final.</p><p id="r-963789" data-claire-element-id="963789">Pour régler ce problème, il suffit d'ajouter une sous-condition dans chaque bloc <strong>if</strong> pour vérifier le <strong>signe</strong> de la coordonnée utilisée : s'il est négatif, alors on multiplie l'angle <strong>Theta</strong> par <strong>-1</strong> pour avoir l'opposée de l'opposée, et donc la vraie valeur. S'il est positif alors l'angle est déjà correcte, on ne fait rien.</p><p id="r-963790" data-claire-element-id="963790">Voici ce que ça donne dans le cas où on utilise l'axe <strong>Y</strong> :</p><pre id="r-963791" data-claire-element-id="963791"><code data-claire-semantic="cpp">// Calcul des angles

m_phi = asin(m_orientation.y);
m_theta = acos(m_orientation.z / cos(m_phi));

if(m_orientation.z &lt; 0)
    m_theta *= -1;</code></pre><p id="r-963792" data-claire-element-id="963792">Implémentation pour tous les blocs <strong>if</strong> :</p><pre id="r-963793" data-claire-element-id="963793"><code data-claire-semantic="cpp">// Si l'axe vertical est l'axe X

if(m_axeVertical.x == 1.0)
{
    // Calcul des angles

    m_phi = asin(m_orientation.x);
    m_theta = acos(m_orientation.y / cos(m_phi));

    if(m_orientation.y &lt; 0)
        m_theta *= -1;
}


// Si c'est l'axe Y

else if(m_axeVertical.y == 1.0)
{
    // Calcul des angles

    m_phi = asin(m_orientation.y);
    m_theta = acos(m_orientation.z / cos(m_phi));

    if(m_orientation.z &lt; 0)
        m_theta *= -1;
}


// Sinon c'est l'axe Z

else
{
    // Calcul des angles

    m_phi = asin(m_orientation.x);
    m_theta = acos(m_orientation.z / cos(m_phi));

    if(m_orientation.z &lt; 0)
        m_theta *= -1;
}</code></pre><p id="r-963794" data-claire-element-id="963794">On arrive à la fin de la méthode, il ne reste plus qu'une chose à faire : convertir les angles <strong>Theta</strong> et <strong>Phi</strong> en degrés pour pouvoir les utiliser avec les coordonnées relatives de la souris. Les fonctions <strong>cos</strong>() et <strong>sin</strong>() ne prennent et ne renvoient que des angles exprimés en <strong>radians</strong> (je ne l'ai pas déjà dit :-° ) alors que nous, nous avons besoin d'angles exprimés en <strong>degrés</strong> pour pouvoir travailler avec la souris. Il faut donc convertir les résultats en multipliant les angles par <strong>180</strong> puis en les divisant par <strong>Pi</strong> :</p><pre id="r-963795" data-claire-element-id="963795"><code data-claire-semantic="cpp">// Conversion en degrés

m_phi = m_phi * 180 / M_PI;
m_theta = m_theta * 180 / M_PI;</code></pre><p id="r-963796" data-claire-element-id="963796">Si on résume tout ça :</p><pre id="r-963797" data-claire-element-id="963797"><code data-claire-semantic="cpp">void Camera::setPointcible(glm::vec3 pointCible)
{
    // Calcul du vecteur orientation

    m_orientation = m_pointCible - m_position;
    m_orientation = normalize(m_orientation);


    // Si l'axe vertical est l'axe X

    if(m_axeVertical.x == 1.0)
    {
        // Calcul des angles

        m_phi = asin(m_orientation.x);
        m_theta = acos(m_orientation.y / cos(m_phi));

        if(m_orientation.y &lt; 0)
            m_theta *= -1;
    }


    // Si c'est l'axe Y

    else if(m_axeVertical.y == 1.0)
    {
        // Calcul des angles

        m_phi = asin(m_orientation.y);
        m_theta = acos(m_orientation.z / cos(m_phi));

        if(m_orientation.z &lt; 0)
            m_theta *= -1;
    }


    // Sinon c'est l'axe Z

    else
    {
        // Calcul des angles

        m_phi = asin(m_orientation.x);
        m_theta = acos(m_orientation.z / cos(m_phi));

        if(m_orientation.z &lt; 0)
            m_theta *= -1;
    }


    // Conversion en degrés

    m_phi = m_phi * 180 / M_PI;
    m_theta = m_theta * 180 / M_PI;
}</code></pre><p id="r-963798" data-claire-element-id="963798">Et voilà ! Grâce à cette méthode nous pouvons enfin régler le problème d'initialisation de la caméra. Et de plus, nous pouvons l'orienter quand on le veut (pour une cinématique par exemple). ^^</p><p id="r-963799" data-claire-element-id="963799">Implémentons sans plus tarder cette méthode dans le constructeur. Pour ça, on ré-initialise les angles <strong>Theta</strong> et <strong>Phi</strong> à 0 puis on appelle la méthode <strong>setPointCible</strong>() :</p><pre id="r-963800" data-claire-element-id="963800"><code data-claire-semantic="cpp">Camera::Camera(glm::vec3 position, glm::vec3 pointCible, glm::vec3 axeVertical) : m_phi(0.0), m_theta(0.0), m_orientation(),
                                                                                  m_axeVertical(axeVertical), m_deplacementLateral(),
                                                                                  m_position(position), m_pointCible(pointCible)
{
    // Actualisation du point ciblé

    setPointcible(pointCible);
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
<span class="arrow"></span>
<span class="next">Implémentation de la caméra</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
<span class="next">Améliorations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Amliorations"></a><h2>Améliorations</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
<span class="arrow"></span>
<span class="next">Fixer un point</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">
<span class="next">TP : Une relique retrouvée</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-963804" data-claire-element-id="963804">Dans cette dernière partie, nous allons finir en douceur et voir les dernières petites fonctionnalités que nous allons ajouter à notre classe <em><strong>Camera</strong></em>. Je vous les rappelle :</p><ul id="r-963809" data-claire-element-id="963809"><li id="r-963806" data-claire-element-id="963806"><p id="r-963805" data-claire-element-id="963805">Ajouter un <strong>setter</strong> pour la position de la caméra</p></li><li id="r-963808" data-claire-element-id="963808"><p id="r-963807" data-claire-element-id="963807">Ajouter deux <strong>attributs</strong> pour gérer sa sensibilité (orientation) et sa vitesse (déplacement)</p></li></ul><p id="r-963810" data-claire-element-id="963810">On commencera par le premier point. :)</p><h2 id="r-la-methode-setposition" data-claire-element-id="963817">La méthode setPosition()</h2><p id="r-963811" data-claire-element-id="963811">Bon je pense que vous avez l'habitude des setters maintenant, surtout que celui-ci va être plus simple que le précédent. :p</p><p id="r-963812" data-claire-element-id="963812">Nous allons coder un petit setter <strong>setPosition</strong>() qui nous permettra de positioner la caméra quand on le souhaitera :</p><pre id="r-963813" data-claire-element-id="963813"><code data-claire-semantic="cpp">void setPosition(glm::vec3 position);</code></pre><p id="r-963814" data-claire-element-id="963814">Ce setter permet de mettre à jour l'attribut <strong>m_position</strong>. On utilisera le signe <strong>=</strong> qui nous permet de copier deux objets de type <em><strong>vec3</strong></em> facilement. Le seul point auquel il faut faire attention est le fait qu'il faut mettre à jour le <strong>point ciblé</strong> à chaque fois que l'on change de <strong>position</strong> :</p><pre id="r-963815" data-claire-element-id="963815"><code data-claire-semantic="cpp">void Camera::setPosition(glm::vec3 position)
{
    // Mise à jour de la position

    m_position = position;


    // Actualisation du point ciblé

    m_pointCible = m_position + m_orientation;
}</code></pre><p id="r-963816" data-claire-element-id="963816">Bien entendu on ne normalise pas ce vecteur-la, il fait partie des deux exceptions. ;)</p><h2 id="r-les-attributs-sensibilite-et-rapidite" data-claire-element-id="963845">Les attributs sensibilité et rapidité</h2><p id="r-963818" data-claire-element-id="963818">On passe à la fonctionnalité suivante, nous allons créer deux nouveaux paramètres qui vont nous permettre de modifier la vitesse de déplacement de la caméra.</p><p id="r-963819" data-claire-element-id="963819">Vous vous souvenez que je vous avais demandé de multiplier les <strong>angles</strong> et le vecteur <strong>orientation</strong> par <strong>0.5</strong> pour réduire la vitesse de la caméra ?</p><pre id="r-963820" data-claire-element-id="963820"><code data-claire-semantic="cpp">void Camera::orienter(int xRel, int yRel)
{
    // Récupération des angles

    m_phi += -yRel * 0.5f;
    m_theta += -xRel * 0.5f;


    .....
}</code></pre><pre id="r-963821" data-claire-element-id="963821"><code data-claire-semantic="cpp">void Camera::deplacer(Input const &amp;input)
{
    .....


    // Avancée de la caméra

    if(input.getTouche(SDL_SCANCODE_UP))
    {
        m_position = m_position + m_orientation * 0.5f;
        m_pointCible = m_position + m_orientation;
    }


    .....
}</code></pre><p id="r-963822" data-claire-element-id="963822">Le problème avec ces valeurs c'est qu'elles sont figées, on ne peut pas les moduler. Tous les jeux-vidéo n'utilisent pas forcément la même vitesse de déplacement et de plus, les valeurs que nous avons mises sont dignes des plus grands championnats de courses d'escargots !</p><p id="r-963823" data-claire-element-id="963823">En effet, pour un véritable jeu il faut multiplier ces vitesses par <strong>10</strong> voire plus et non <strong>0.5</strong>.</p><p id="r-963824" data-claire-element-id="963824">Pour gérer tout ça, nous allons implémenter deux attributs <strong>m_sensibilite</strong> et <strong>m_vitesse</strong> qui correspondront respectivement à la sensibilité de la souris (l'<strong>orientation</strong>) et à la vitesse de déplacement (la <strong>position</strong>) :</p><pre id="r-963825" data-claire-element-id="963825"><code data-claire-semantic="cpp">class Camera
{
    public:

    // Méthodes

    ....


    private:

    float m_phi;
    float m_theta;
    glm::vec3 m_orientation;

    glm::vec3 m_axeVertical;
    glm::vec3 m_deplacementLateral;

    glm::vec3 m_position;
    glm::vec3 m_pointCible;

    float m_sensibilite;
    float m_vitesse;
};</code></pre><p id="r-963826" data-claire-element-id="963826">Bien entendu, on modifie nos deux constructeurs pour qu'ils puissent prendre en paramètre des valeurs pour ces deux attributs.</p><p id="r-963827" data-claire-element-id="963827">Voici le constructeur par défaut :</p><pre id="r-963828" data-claire-element-id="963828"><code data-claire-semantic="cpp">Camera::Camera() : m_phi(0.0), m_theta(0.0), m_orientation(), m_axeVertical(0, 0, 1), m_deplacementLateral(), m_position(), m_pointCible(), m_sensibilite(0.0), m_vitesse(0.0)
{

}</code></pre><p id="r-963829" data-claire-element-id="963829">Et voici le second constructeur :</p><pre id="r-963830" data-claire-element-id="963830"><code data-claire-semantic="cpp">Camera(glm::vec3 position, glm::vec3 pointCible, glm::vec3 axeVertical, float sensibilite, float vitesse);</code></pre><pre id="r-963831" data-claire-element-id="963831"><code data-claire-semantic="cpp">Camera::Camera(glm::vec3 position, glm::vec3 pointCible, glm::vec3 axeVertical, float sensibilite, float vitesse) : m_phi(0.0), m_theta(0.0), m_orientation(), 
                                                                                                                    m_axeVertical(axeVertical), m_deplacementLateral(),
                                                                                                                    m_position(position), m_pointCible(pointCible),
                                                                                                                    m_sensibilite(sensibilite), m_vitesse(vitesse)
{
    // Actualisation du point ciblé

    setPointcible(pointCible);
}</code></pre><p id="r-963832" data-claire-element-id="963832">Ensuite, on inclut l'attribut <strong>m_sensibilite</strong> dans la méthode <strong>orienter</strong>() :</p><pre id="r-963833" data-claire-element-id="963833"><code data-claire-semantic="cpp">void Camera::orienter(int xRel, int yRel)
{
    // Modification des angles

    m_phi += -yRel * m_sensibilite;
    m_theta += -xRel * m_sensibilite;


    .....
}</code></pre><p id="r-963834" data-claire-element-id="963834">Et enfin, on ajoute l'attribut <strong>m_vitesse</strong> à chaque déplacement possible de la caméra :</p><pre id="r-963835" data-claire-element-id="963835"><code data-claire-semantic="cpp">void Camera::deplacer(Input const &amp;input)
{
    // Gestion de l'orientation

    if(input.mouvementSouris())
        orienter(input.getXRel(), input.getYRel());


    // Avancée de la caméra

    if(input.getTouche(SDL_SCANCODE_UP))
    {
        m_position = m_position + m_orientation * m_vitesse;
        m_pointCible = m_position + m_orientation;
    }


    // Recul de la caméra

    if(input.getTouche(SDL_SCANCODE_DOWN))
    {
        m_position = m_position - m_orientation * m_vitesse;
        m_pointCible = m_position + m_orientation;
    }


    // Déplacement vers la gauche

    if(input.getTouche(SDL_SCANCODE_LEFT))
    {
        m_position = m_position + m_deplacementLateral * m_vitesse;
        m_pointCible = m_position + m_orientation;
    }


    // Déplacement vers la droite

    if(input.getTouche(SDL_SCANCODE_RIGHT))
    {
        m_position = m_position - m_deplacementLateral * m_vitesse;
        m_pointCible = m_position + m_orientation;
    }
}</code></pre><p id="r-963836" data-claire-element-id="963836">Pensez à renseigner ces deux paramètres lorsque vous initialisez la caméra dans la classe <em><strong>SceneOpenGL</strong></em> :</p><pre id="r-963837" data-claire-element-id="963837"><code data-claire-semantic="cpp">// Caméra mobile

Camera camera(vec3(3, 3, 3), vec3(0, 0, 0), vec3(0, 1, 0), 0.5, 0.5);</code></pre><p id="r-963838" data-claire-element-id="963838">Petit conseil pour terminer, je vous conseille vivement de faire des getters et setters sur ces deux attributs. Ca pourrait être utile dans vos futurs développements :</p><pre id="r-963839" data-claire-element-id="963839"><code data-claire-semantic="cpp">// Getters et Setters

float getSensibilite() const;
float getVitesse() const;

void setSensibilite(float sensibilite);
void setVitesse(float vitesse);</code></pre><pre id="r-963840" data-claire-element-id="963840"><code data-claire-semantic="cpp">float Camera::getSensibilite() const
{
    return m_vitesse;
}


float Camera::getVitesse() const
{
    return m_vitesse;
}


void Camera::setSensibilite(float sensibilite)
{
    m_sensibilite = sensibilite;
}


void Camera::setVitesse(float vitesse)
{
    m_vitesse = vitesse;
}</code></pre><p id="r-963841" data-claire-element-id="963841"><strong>Télécharger : </strong><a href="https://dl.dropboxusercontent.com/s/wk4h9sdysmps7rl/La camera.zip?token_hash=AAGxBfIF4ZRjQeY06uhbqcmHBrdcMu3jVdVINWxLLqsH2A&amp;dl=1"><strong>Code Source C++ du chapitre 11</strong></a></p><p id="r-963842" data-claire-element-id="963842">Nous sommes enfin arrivés à la fin de ce chapitre, j'espère que vous êtes toujours en vie. :p</p><p id="r-963843" data-claire-element-id="963843">Nous avons vu pas mal de notions mathématiques mais elles sont indispensables dans le développement 3D. Si ça peut vous rassurer, nous n'en reverrons pas beaucoup avant longtemps. Je ne vous ai pas encore parlé des quaternions ça sera un grand moment quand nous aborderons ce chapitre-la. ^^</p><p id="r-963844" data-claire-element-id="963844">Enfin, nous avons maintenant une caméra totalement opérationnelle et nous pouvons nous déplacer allégrement dans notre monde 3D. Que diriez-vous maintenant si nous faisions un gros TP récapitulatif ?</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
<span class="arrow"></span>
<span class="next">Fixer un point</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">
<span class="next">TP : Une relique retrouvée</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPUnereliqueretrouve"></a><h2>TP : Une relique retrouvée</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
<span class="arrow"></span>
<span class="next">Améliorations</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
<span class="next">Les consignes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-963848" data-claire-element-id="963848">Piouf, nous en avons fait du chemin depuis le début du tutoriel. Nous avons vu toutes les notions de base de la programmation OpenGL depuis l'affichage de triangles simples jusqu'à la gestion des caméras mobiles.</p><p id="r-963849" data-claire-element-id="963849">Pour conclure cette première partie, nous allons faire un gros TP récapitulatif qui reprendra tout ce que l'on a vu à travers les différents chapitres. Il y aura donc des matrices, des textures, la caméra, etc. Je vous donnerai toutes les indications nécessaires ainsi que quelques conseils pour que votre TP se déroule dans de bonnes conditions.</p><p id="r-963850" data-claire-element-id="963850">Si vous vous sentez prêt, vous pouvez continuer. :)</p>
</div><a name="Lesconsignes"></a><h2>Les consignes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">
<span class="arrow"></span>
<span class="next">TP : Une relique retrouvée</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-les-consignes-10" data-claire-element-id="963917">Les consignes</h2><h3 id="r-objectif-16" data-claire-element-id="963873">Objectif</h3><p id="r-963851" data-claire-element-id="963851">Ce premier TP va vous permettre de mettre en pratique toutes les notions que nous avons abordées au cours de cette première partie. L'objectif est de faire une petite scène 3D dans laquelle vous pourrez vous balader à l'aide de votre caméra mobile.</p><p id="r-963852" data-claire-element-id="963852">Bien entendu, c'est un projet simple, ne vous attendez pas à avoir de la physique ou des effets avancés. Nous ne sommes qu'à la première partie, nous faisons juste un petit programmer pour débuter. :)</p><p id="r-963853" data-claire-element-id="963853">Je vais vous donner les consignes et des petits conseils pour bien démarrer ce TP. Mais avant tout, voyons ensemble à quoi devra ressembler votre rendu final :</p><figure id="r-963855" data-claire-element-id="963856"><img id="r-963854" data-claire-element-id="963854" src="medias/uploads.siteduzero.com_files_420001_421000_420553.png" alt="Image utilisateur"/></figure><figure id="r-963858" data-claire-element-id="963859"><img id="r-963857" data-claire-element-id="963857" src="medias/uploads.siteduzero.com_files_420001_421000_420554.png" alt="Image utilisateur"/></figure><p id="r-963860" data-claire-element-id="963860">Vous voyez ici la présence d'une cabane ainsi que de trois caisses à l'intérieur. Sur l'une d'elles se trouve d'ailleurs une petite relique en forme de cristal (<em>lancer musique de Tomb Raider ici</em>) qui tourne sur elle-même un peu à la manière du cube dans le chapitre sur la troisième dimension.</p><p id="r-963861" data-claire-element-id="963861">Vous devez donc recréer cette scène en incluant tous les éléments suivants :</p><ul id="r-963872" data-claire-element-id="963872"><li id="r-963863" data-claire-element-id="963863"><p id="r-963862" data-claire-element-id="963862">Une cabane placée au centre (0, 0, 0)</p></li><li id="r-963865" data-claire-element-id="963865"><p id="r-963864" data-claire-element-id="963864">Plusieurs caisses</p></li><li id="r-963867" data-claire-element-id="963867"><p id="r-963866" data-claire-element-id="963866">Un cristal</p></li><li id="r-963869" data-claire-element-id="963869"><p id="r-963868" data-claire-element-id="963868">Un sol herbeux entourant toute la scène</p></li><li id="r-963871" data-claire-element-id="963871"><p id="r-963870" data-claire-element-id="963870">Un sol terreux à l'intérieur de la cabane</p></li></ul><h3 id="r-les-dimensions-3" data-claire-element-id="963916">Les dimensions</h3><p id="r-963874" data-claire-element-id="963874">Afin d'avoir un rendu similaire à celui des images précédentes, je vais vous donner toutes les dimensions nécessaires. Vous n'aurez pas à vous prendre la tête pour les définir vous-même. Je vous donnerai également la <em><strong>répétition</strong></em> de texture à utiliser. Au cas où vous n'auriez pas le gros pack d'images donné dans le chapitre <strong>10</strong>, je vous fournirai celles dont vous aurez besoin à la fin des explications.</p><ul id="r-963877" data-claire-element-id="963877"><li id="r-963876" data-claire-element-id="963876"><p id="r-963875" data-claire-element-id="963875">On commence avec les données relatives à la cabane, et plus précisément à ses murs :</p></li></ul><figure id="r-963879" data-claire-element-id="963880"><img id="r-963878" data-claire-element-id="963878" src="medias/uploads.siteduzero.com_files_420001_421000_420563.png" alt="Image utilisateur"/></figure><ul id="r-963883" data-claire-element-id="963883"><li id="r-963882" data-claire-element-id="963882"><p id="r-963881" data-claire-element-id="963881">Puis celles des combles (partie triangulaire située au fond de la cabane) :</p></li></ul><figure id="r-963885" data-claire-element-id="963886"><img id="r-963884" data-claire-element-id="963884" src="medias/uploads.siteduzero.com_files_420001_421000_420564.png" alt="Image utilisateur"/></figure><ul id="r-963889" data-claire-element-id="963889"><li id="r-963888" data-claire-element-id="963888"><p id="r-963887" data-claire-element-id="963887">Et enfin, celles du toit (vu de haut) :</p></li></ul><figure id="r-963891" data-claire-element-id="963892"><img id="r-963890" data-claire-element-id="963890" src="medias/uploads.siteduzero.com_files_420001_421000_420565.png" alt="Image utilisateur"/></figure><p id="r-963893" data-claire-element-id="963893">Les deux vertices jaunes sont de cette couleur uniquement pour mieux les voir sur la texture. Ils n'ont rien de spécial.</p><p id="r-963894" data-claire-element-id="963894">Aucune des parties de la cabane n'a besoin de la répétition de texture. Vos coordonnées ne doivent donc pas dépasser de l'intervalle <strong>[0; 1]</strong>;</p><p id="r-963895" data-claire-element-id="963895">En ce qui concerne les dimensions du sol, on a :</p><ul id="r-963898" data-claire-element-id="963898"><li id="r-963897" data-claire-element-id="963897"><p id="r-963896" data-claire-element-id="963896">Le sol herbeux :</p></li></ul><figure id="r-963900" data-claire-element-id="963901"><img id="r-963899" data-claire-element-id="963899" src="medias/uploads.siteduzero.com_files_420001_421000_420566.png" alt="Image utilisateur"/></figure><p id="r-963902" data-claire-element-id="963902">Cette fois, votre sol aura besoin de répéter sa texture. Vous devrez le faire <strong>225</strong> fois (<strong>15</strong> fois en longueur et en largeur). Ne vous inquiétez pas, l'image n'est chargée qu'une seule fois comme nous l'avons vu. Il n'y a donc rien de dangereux pour votre carte graphique. ^^</p><ul id="r-963905" data-claire-element-id="963905"><li id="r-963904" data-claire-element-id="963904"><p id="r-963903" data-claire-element-id="963903">Le sol terreux :</p></li></ul><figure id="r-963907" data-claire-element-id="963908"><img id="r-963906" data-claire-element-id="963906" src="medias/uploads.siteduzero.com_files_420001_421000_420567.png" alt="Image utilisateur"/></figure><p id="r-963909" data-claire-element-id="963909">Même chose pour la texture, vous devrez la répéter. Faites le <strong>25</strong> fois ici (<strong>5</strong> fois en longueur et en largeur).</p><p id="r-963910" data-claire-element-id="963910">Au niveau des caisses, je pense que vous n'avez pas besoin de savoir grand chose. :p Il en faut juste 3 avec un coté de 2.0 unités et les textures <strong><em>Caisse.jpg</em></strong> et <em><strong>Caisse2.jpg</strong></em>.</p><p id="r-963911" data-claire-element-id="963911">Enfin, en ce qui concerne le cristal, vous aurez besoin des dimensions suivantes :</p><figure id="r-963913" data-claire-element-id="963914"><img id="r-963912" data-claire-element-id="963912" src="medias/uploads.siteduzero.com_files_420001_421000_420568.png" alt="Image utilisateur"/></figure><p id="r-963915" data-claire-element-id="963915">Il s'agit d'une double pyramide à <strong>4</strong> cotés, il y a donc <strong>8</strong> triangles à créer.</p><h2 id="r-quelques-conseils-5" data-claire-element-id="963952">Quelques conseils</h2><p id="r-963918" data-claire-element-id="963918">Maintenant que nous avons vu ensemble les consignes, je vais vous donner quelques conseils pour vous aider dans votre travail. :)</p><h3 id="r-les-classes-9" data-claire-element-id="963921">Les classes</h3><p id="r-963919" data-claire-element-id="963919">Premièrement, au niveau même de la base de votre projet, je vous conseille de faire différentes classes pour gérer les modèles que vous devez afficher. C'est-à-dire qu'il vaut mieux faire une classe pour la cabane, une autre pour le cristal, etc. Prenez exemple sur le <em><strong>Cube</strong></em> que nous avons codé ensemble mais en intégrant en plus la gestion des textures. Ne vous compliquez pas la tâche en faisant de l’héritage cette fois. ^^</p><p id="r-963920" data-claire-element-id="963920">D'ailleurs, vous remarquerez que toutes vos classes contiendront les mêmes attributs : les vertices, les coordonnées de texture, un shader et une ou plusieurs textures. La méthode <strong>afficher</strong>() sera également identique, seuls les paramètres de la fonction <strong>glDrawArrays</strong>() vont varier.</p><h3 id="r-la-cabane" data-claire-element-id="963934">La cabane</h3><p id="r-963922" data-claire-element-id="963922">Au niveau de la cabane, je vous conseille de ne faire qu'une seule et unique classe. Celle-ci contiendrait toutes les données relatives aux murs, au toit et aux combles. Organisez votre tableau de vertices de cette façon pour avoir un code propre :</p><pre id="r-963923" data-claire-element-id="963923"><code data-claire-semantic="cpp">float verticesTmp[] = {1, 0, 1,   1, 0, 1,   1, 0, 1,      // Mur du Fond
		       1, 0, 1,   1, 0, 1,   1, 0, 1,      // Mur du Fond

		       1, 0, 1,   1, 0, 1,   1, 0, 1,      // Mur Gauche
		       1, 0, 1,   1, 0, 1,   1, 0, 1,      // Mur Gauche

		       ....

		       1, 0, 1,   1, 0, 1,   1, 0, 1,      // Toit Gauche
		       1, 0, 1,   1, 0, 1,   1, 0, 1};     // Toit Droit</code></pre><p id="r-963924" data-claire-element-id="963924">Même chose pour le tableau de coordonnées de texture :</p><pre id="r-963925" data-claire-element-id="963925"><code data-claire-semantic="cpp">float coordTexture[] = {0, 0,   0, 0,   0, 0,        // Mur du Fond 
			0, 0,   0, 0,   0, 0,        // Mur du Fond

			0, 0,   0, 0,   0, 0,        // Mur Gauche
			0, 0,   0, 0,   0, 0,        // Mur Gauche

			.... 

			0, 0,   0, 0,   0, 0,        // Toit Gauche
			0, 0,   0, 0,   0, 0};       // Toit Droit</code></pre><p id="r-963926" data-claire-element-id="963926">Pour éviter d'avoir à chercher l'endroit où se situe votre erreur, testez vos vertices <em>triangle par triangle</em> au lieu de tout faire d'un coup. Croyez-moi, ça va vous faire gagner du temps.</p><p id="r-963927" data-claire-element-id="963927">Autre point important pour la cabane, il y a deux textures à gérer pour un seul tableau de vertices. Vous devrez jouer avec les paramètres de la fonction <strong>glDrawArrays</strong>() pour verrouiller vos textures au bon moment.<br/> Par exemple (et je dis bien <em>par exemple</em>), si vos <strong>20 premiers</strong> vertices concernent la texture du mur, alors vous devrez faire comme ceci :</p><pre id="r-963928" data-claire-element-id="963928"><code data-claire-semantic="cpp">// Verrouillage de la texture du mur

glBindTexture(GL_TEXTURE_2D, m_textureMur.getID());


// Affichage des murs (20 premiers vertices)

glDrawArrays(GL_TRIANGLES, 0, 20);


// Déverrouillage de la texture

glBindTexture(GL_TEXTURE_2D, 0);</code></pre><p id="r-963929" data-claire-element-id="963929">Et si les <strong>10</strong> vertices <strong>suivants</strong> concernent la texture du toit, alors vous devrez verrouiller la seconde texture et recommencer l'affichage en partant du <strong>21ième</strong> vertex :</p><pre id="r-963930" data-claire-element-id="963930"><code data-claire-semantic="cpp">// Verrouillage de la texture du toit

glBindTexture(GL_TEXTURE_2D, m_textureToit.getID());


// Affichage du toit (10 vertices suivants)

glDrawArrays(GL_TRIANGLES, 20, 10);


// Déverrouillage de la texture

glBindTexture(GL_TEXTURE_2D, 0);</code></pre><p id="r-963931" data-claire-element-id="963931">Les deux verrouillages doivent se passer dans la même méthode bien sûr.</p><aside id="r-963933" data-claire-element-id="963933" data-claire-semantic="information"><p id="r-963932" data-claire-element-id="963932">Revoyez le chapitre <strong>3</strong> si vous ne comprenez pas trop pourquoi il faut mettre la valeur <strong>20</strong> et non <strong>21</strong> au deuxième paramètre pour commencer l'affichage à partir du <strong>21ième</strong> vertex. ;)</p></aside><h3 id="r-le-cristal" data-claire-element-id="963940">Le cristal</h3><p id="r-963935" data-claire-element-id="963935">Le cristal ne devrait pas trop vous poser de problème, il suffit de reprendre le même principe que le cube en y ajoutant la gestion de la texture. Faites juste attention à spécifier les coordonnées de texture de cette façon pour chaque triangle :</p><figure id="r-963937" data-claire-element-id="963938"><img id="r-963936" data-claire-element-id="963936" src="medias/uploads.siteduzero.com_files_420001_421000_420569.png" alt="Image utilisateur"/></figure><p id="r-963939" data-claire-element-id="963939">A part ça, n'oubliez pas de <em>l'animer</em> en le faisant tourner sur elle-même. Essayez de faire ça doucement en incrémentant votre angle de <strong>1</strong> degré à chaque tour de boucle au lieu de <strong>4</strong>. :)</p><h3 id="r-les-sols" data-claire-element-id="963947">Les sols</h3><p id="r-963941" data-claire-element-id="963941">Au niveau des deux types de sol, vous pouvez parfaitement faire deux classes pour les différencier, c'est plus facile et c'est efficace. Cependant, si vous pensez que vous pouvez le faire, je vous suggère de ne faire qu'une seule et unique classe. Vous pourrez l'instancier deux fois en modifiant juste la texture et sa répétition. Un constructeur que vous pouvez utiliser (sans être obligés) est le suivant :</p><pre id="r-963942" data-claire-element-id="963942"><code data-claire-semantic="cpp">Sol(float longueur, float largeur, int repitionLongueur, int repitionLargeur, std::string vertexShader, std::string fragmentShader, std::string texture);</code></pre><p id="r-963943" data-claire-element-id="963943"><strong>Détail 1</strong> : La terre doit évidemment se trouver au niveau de la cabane et pas autre part.</p><p id="r-963944" data-claire-element-id="963944"><strong>Détail 2</strong> : Pour éviter de vous retrouvez avec un bug de texture, faites translater le sol herbeux de <strong>0.01</strong> sur l'axe <strong>Y</strong> :</p><pre id="r-963945" data-claire-element-id="963945"><code data-claire-semantic="cpp">// Sauvegarde de la matrice

mat4 sauvegardeModelview = modelview;


    // Affichage du sol herbeux

    modelview = translate(modelview, vec3(0, 0.01, 0));
    solHerbeux.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><p id="r-963946" data-claire-element-id="963946">Vous pouvez tenter de faire sans cette translation si vous le souhaitez pour voir ce que ça donne.</p><h3 id="r-a-vos-classes" data-claire-element-id="963951">A vos classes !</h3><p id="r-963948" data-claire-element-id="963948">Bon, je pense vous en avoir assez dit, je ne vais pas vous donner tout le code non plus. ^^ Vous avez à disposition toutes les données dont vous avez besoin ainsi que quelques conseils pour commencer.</p><p id="r-963949" data-claire-element-id="963949">C'est à vous de jouer maintenant !</p><p id="r-963950" data-claire-element-id="963950"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/le2h1bvt6sgqn34/Textures TP.zip?token_hash=AAE_XyopL3995Lqlnakx7gqfb9uL2bJdey2M5cLvZd0BOg&amp;dl=1">Pack de textures à utiliser pour le TP</a></strong></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">
<span class="arrow"></span>
<span class="next">TP : Une relique retrouvée</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Correction"></a><h2>Correction</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
<span class="arrow"></span>
<span class="next">Les consignes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">
<span class="next">Les Vertex Buffer Objects</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-963954" data-claire-element-id="963954">Stop, arrêtez là ! Rendez-moi vos codes. :p</p><p id="r-963955" data-claire-element-id="963955">Bon, cette phrase ne sert pas à grand chose mais ça veut au moins dire que nous pouvons passer à la correction. Je vous propose une des solutions possibles, il y avait plusieurs façons d’aborder ce TP donc ne vous inquiétez pas si vous avez fait différemment.</p><p id="r-963956" data-claire-element-id="963956">Nous allons nous mettre sans plus tarder dans le bain en commençant par le code de base de la boucle principale.</p><h2 id="r-la-boucle-principale-9" data-claire-element-id="963960">La boucle principale</h2><p id="r-963957" data-claire-element-id="963957">La méthode <strong>bouclePrincipale</strong>() est celle qui va nous permettre de mettre en scène tous nos objets. Elle devra donc contenir la cabane, les caisses, ... Mais pour le moment, il y a juste les matrices, la caméra, le nettoyage et l'actualisation de la fenêtre :</p><pre id="r-963958" data-claire-element-id="963958"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Caméra mobile

    Camera camera(vec3(3, 4, 10), vec3(0, 2.1, 2), vec3(0, 1, 0), 0.5, 0.5);
    m_input.afficherPointeur(false);
    m_input.capturerPointeur(true);


    // Boucle principale

    while(!m_input.terminer())
    {
        // On définit le temps de début de boucle

        debutBoucle = SDL_GetTicks();


        // Gestion des évènements

        m_input.updateEvenements();

        if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
            break;

        camera.deplacer(m_input);


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


        // Gestion de la caméra

        camera.lookAt(modelview);


        

        // Rendu

        ....




        // Actualisation de la fenêtre

        SDL_GL_SwapWindow(m_fenetre);


        // Calcul du temps écoulé

        finBoucle = SDL_GetTicks();
        tempsEcoule = finBoucle - debutBoucle;


        // Si nécessaire, on met en pause le programme

        if(tempsEcoule &lt; frameRate)
            SDL_Delay(frameRate - tempsEcoule);
    }
}</code></pre><p id="r-963959" data-claire-element-id="963959">Les objets à afficher seront ajoutés après.</p><h2 id="r-la-cabane-1" data-claire-element-id="963992">La cabane</h2><h3 id="r-le-header-6" data-claire-element-id="963966">Le header</h3><p id="r-963961" data-claire-element-id="963961">On passe maintenant aux différents modèles qui doivent être placés dans notre scène, on commence par la cabane.</p><p id="r-963962" data-claire-element-id="963962">La première chose avec elle est évidemment de créer une classe <em><strong>Cabane</strong></em>. Elle doit contenir tous les attributs nécessaires à l'affichage comme le tableau de vertices, celui des coordonnées de texture, le shader et les textures (une pour le toit et l'autre pour les murs) :</p><pre id="r-963963" data-claire-element-id="963963"><code data-claire-semantic="cpp">#ifndef DEF_CABANE
#define DEF_CABANE


// Includes OpenGL

#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif


// Includes GLM

#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtx/transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;


// Autres includes

#include &quot;Shader.h&quot;
#include &quot;Texture.h&quot;


// Classe Cabane

class Cabane
{
    public:

    Cabane(std::string const vertexShader, std::string const fragmentShader);
    ~Cabane();

    void afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview);


    private:

    Shader m_shader;
    Texture m_textureMur;
    Texture m_textureToit;

    float m_vertices[99];
    float m_coordTexture[66];
};

#endif</code></pre><p id="r-963964" data-claire-element-id="963964">Remarquez la méthode <strong>afficher</strong>() qui est la même que celle du <em><strong>Cube</strong></em>.</p><p id="r-963965" data-claire-element-id="963965">Mis à part le fait qu'il faille deux textures ici, cette architecture de classe est la même pour tous les objets présents dans ce TP. ;)</p><h3 id="r-le-constructeur-20" data-claire-element-id="963981">Le constructeur</h3><p id="r-963967" data-claire-element-id="963967">Le constructeur est la <em>méthode</em> qui vous a probablement posés le plus de problèmes. Celui-ci doit initialiser tous les attributs et les premiers sont le shader et les deux textures :</p><pre id="r-963968" data-claire-element-id="963968"><code data-claire-semantic="cpp">Cabane::Cabane(std::string const vertexShader, std::string const fragmentShader) : m_shader(vertexShader, fragmentShader),
                                                                                   m_textureMur(&quot;Textures/Mur.jpg&quot;), m_textureToit(&quot;Textures/Toit.jpg&quot;)
{
    // Chargement du shader

    m_shader.charger();


    // Chargement des textures

    m_textureMur.charger();
    m_textureToit.charger();
}</code></pre><p id="r-963969" data-claire-element-id="963969">L'attribut le plus compliqué à initialiser était le tableau de vertices, il fallait créer tous les triangles nécessaires à l'aide des schémas fournis dans l'énoncé. Je vous avais donné quelques conseils pour y arriver comme le fait de vérifier votre affichage triangle par triangle par exemple.</p><p id="r-963970" data-claire-element-id="963970">La chose à ne pas faire était de créer une classe pour chaque partie de la cabane (Murs, Toit et Combles). C'est plus compliqué de gérer toutes ces parties indépendamment plutôt que tout réunir dans un seul tableau.</p><p id="r-963971" data-claire-element-id="963971">En prenant votre temps, vous avez pu trouver le tableau de vertices suivant :</p><pre id="r-963972" data-claire-element-id="963972"><code data-claire-semantic="cpp">// Vertices temporaires

float verticesTmp[] = {-5, 0, -5,   5, 0, -5,   5, 5, -5,      // Mur du Fond
                       -5, 0, -5,   -5, 5, -5,   5, 5, -5,     // Mur du Fond

                       -5, 0, -5,   -5, 0, 5,   -5, 5, 5,      // Mur Gauche
                       -5, 0, -5,   -5, 5, -5,   -5, 5, 5,     // Mur Gauche

                       5, 0, -5,   5, 0, 5,   5, 5, 5,         // Mur Droit
                       5, 0, -5,   5, 5, -5,   5, 5, 5,        // Mur Droit

                       -5, 5, -5,   5, 5, -5,   0, 6, -5,      // Combles

                       -6, 4.8, -6,   -6, 4.8, 6,   0, 6, 6,   // Toit Gauche
                       -6, 4.8, -6,   0, 6, -6,   0, 6, 6,     // Toit Gauche

                       6, 4.8, -6,   6, 4.8, 6,   0, 6, 6,     // Toit Droit
                       6, 4.8, -6,   0, 6, -6,   0, 6, 6};     // Toit Droit</code></pre><p id="r-963973" data-claire-element-id="963973">J'ai aéré le code pour que l'on puisse bien distinguer les parties de la cabane. Je vous recommande de faire ça pour vos modèles. :)</p><p id="r-963974" data-claire-element-id="963974">Au niveau du tableau de coordonnées de texture, il faut juste faire correspondre les triangles aux bonnes coordonnées de la même façon que nous le faisions dans les chapitres précédents :</p><pre id="r-963975" data-claire-element-id="963975"><code data-claire-semantic="cpp">// Coordonnées de texture temporaires

float coordTexture[] = {0, 0,   1, 0,   1, 1,        // Mur du Fond
                        0, 0,   0, 1,   1, 1,        // Mur du Fond

                        0, 0,   1, 0,   1, 1,        // Mur Gauche
                        0, 0,   0, 1,   1, 1,        // Mur Gauche

                        0, 0,   1, 0,   1, 1,        // Mur Droit
                        0, 0,   0, 1,   1, 1,        // Mur Droit

                        0, 0,   1, 0,   0.5, 0.5,    // Combles

                        0, 0,   1, 0,   1, 1,        // Toit Gauche
                        0, 0,   0, 1,   1, 1,        // Toit Gauche

                        0, 0,   1, 0,   1, 1,        // Toit Droit
                        0, 0,   0, 1,   1, 1};       // Toit Droit</code></pre><p id="r-963976" data-claire-element-id="963976">Attention cependant aux combles qui ne sont représentés que par un seul triangle.</p><p id="r-963977" data-claire-element-id="963977">Une fois les tableaux définis, il ne manque plus qu'à copier leurs valeurs dans les attributs finaux :</p><pre id="r-963978" data-claire-element-id="963978"><code data-claire-semantic="cpp">// Copie des vertices

for(int i(0); i &lt; 99; i++)
    m_vertices[i] = verticesTmp[i];


// Copie des coordonnées

for(int i(0); i &lt; 66; i++)
    m_coordTexture[i] = coordTexture[i];</code></pre><p id="r-963979" data-claire-element-id="963979">Si on résume :</p><pre id="r-963980" data-claire-element-id="963980"><code data-claire-semantic="cpp">Cabane::Cabane(std::string const vertexShader, std::string const fragmentShader) : m_shader(vertexShader, fragmentShader), 
                                                                                   m_textureMur(&quot;Textures/Mur.jpg&quot;), m_textureToit(&quot;Textures/Toit.jpg&quot;)
{
    // Chargement du shader

    m_shader.charger();


    // Chargement des textures

    m_textureMur.charger();
    m_textureToit.charger();


    // Vertices temporaires

    float verticesTmp[] = {-5, 0, -5,   5, 0, -5,   5, 5, -5,      // Mur du Fond
                           -5, 0, -5,   -5, 5, -5,   5, 5, -5,     // Mur du Fond

                           -5, 0, -5,   -5, 0, 5,   -5, 5, 5,      // Mur Gauche
                           -5, 0, -5,   -5, 5, -5,   -5, 5, 5,     // Mur Gauche

                           5, 0, -5,   5, 0, 5,   5, 5, 5,         // Mur Droit
                           5, 0, -5,   5, 5, -5,   5, 5, 5,        // Mur Droit

                           -5, 5, -5,   5, 5, -5,   0, 6, -5,      // Combles

                           -6, 4.8, -6,   -6, 4.8, 6,   0, 6, 6,   // Toit Gauche
                           -6, 4.8, -6,   0, 6, -6,   0, 6, 6,     // Toit Gauche

                           6, 4.8, -6,   6, 4.8, 6,   0, 6, 6,     // Toit Droit
                           6, 4.8, -6,   0, 6, -6,   0, 6, 6};     // Toit Droit


    // Coordonnées de texture temporaires

    float coordTexture[] = {0, 0,   1, 0,   1, 1,        // Mur du Fond
                            0, 0,   0, 1,   1, 1,        // Mur du Fond

                            0, 0,   1, 0,   1, 1,        // Mur Gauche
                            0, 0,   0, 1,   1, 1,        // Mur Gauche

                            0, 0,   1, 0,   1, 1,        // Mur Droit
                            0, 0,   0, 1,   1, 1,        // Mur Droit

                            0, 0,   1, 0,   0.5, 0.5,    // Combles

                            0, 0,   1, 0,   1, 1,        // Toit Gauche
                            0, 0,   0, 1,   1, 1,        // Toit Gauche

                            0, 0,   1, 0,   1, 1,        // Toit Droit
                            0, 0,   0, 1,   1, 1};       // Toit Droit



    // Copie des vertices

    for(int i(0); i &lt; 99; i++)
        m_vertices[i] = verticesTmp[i];


    // Copie des coordonnées

    for(int i(0); i &lt; 66; i++)
        m_coordTexture[i] = coordTexture[i];
}</code></pre><h3 id="r-la-methode-afficher-2" data-claire-element-id="963991">La méthode afficher()</h3><p id="r-963982" data-claire-element-id="963982">En ce qui concerne la méthode <strong>afficher</strong>(), on peut reprendre celle de la classe <em><strong>Caisse</strong></em> mais en y faisant quelques modifications. En effet, il faut gérer l'affichage de deux textures ici et donc faire attention à savoir quels vertices correspondent à quelle texture.</p><p id="r-963983" data-claire-element-id="963983">D'après le tableau <strong>m_vertices</strong>, les <strong>21</strong> premiers vertices, représentés par les <strong>63</strong> premières cases, correspondent aux murs et aux combles qui utilisent la texture <strong>Mur.jpg</strong>. Il faut donc appeler la fonction <strong>glDrawArrays</strong>() pour afficher les <strong>21</strong> vertices en partant de celui d'indice <strong>0</strong> (le premier) :</p><pre id="r-963984" data-claire-element-id="963984"><code data-claire-semantic="cpp">// Verrouillage de la texture du Mur

glBindTexture(GL_TEXTURE_2D, m_textureMur.getID());


// Rendu

glDrawArrays(GL_TRIANGLES, 0, 21);


// Déverrouillage de la texture

glBindTexture(GL_TEXTURE_2D, 0);</code></pre><p id="r-963985" data-claire-element-id="963985">Bien entendu, on n'oublie pas de verrouiller la texture du mur. ;)</p><p id="r-963986" data-claire-element-id="963986">Ensuite, il faut s'occuper du toit qui occupe les <strong>12</strong> derniers vertices, représentés par les <strong>36</strong> dernières cases du tableau. On ré-appelle donc la fonction <strong>glDrawArrays</strong>() pour afficher les <strong>12</strong> vertices en partant de celui d'indice <strong>21</strong> (le <strong>22ième</strong>) :</p><pre id="r-963987" data-claire-element-id="963987"><code data-claire-semantic="cpp">// Verrouillage de la texture du Toit

glBindTexture(GL_TEXTURE_2D, m_textureToit.getID());


// Rendu

glDrawArrays(GL_TRIANGLES, 21, 12);


// Déverrouillage de la texture

glBindTexture(GL_TEXTURE_2D, 0);</code></pre><p id="r-963988" data-claire-element-id="963988">N'oubliez pas de verrouiller l'autre texture maintenant.</p><p id="r-963989" data-claire-element-id="963989">Ce qui donne la méthode final :</p><pre id="r-963990" data-claire-element-id="963990"><code data-claire-semantic="cpp">void Cabane::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Envoi des vertices

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, m_vertices);
        glEnableVertexAttribArray(0);


        // Envoi des coordonnées de texture

        glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, m_coordTexture);
        glEnableVertexAttribArray(2);


        // Envoi des matrices

        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


        // Verrouillage de la texture du Mur

        glBindTexture(GL_TEXTURE_2D, m_textureMur.getID());


        // Rendu

        glDrawArrays(GL_TRIANGLES, 0, 21);


        // Déverrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, 0);


        // Verrouillage de la texture du Toit

        glBindTexture(GL_TEXTURE_2D, m_textureToit.getID());


        // Rendu

        glDrawArrays(GL_TRIANGLES, 21, 12);


        // Déverrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, 0);


        // Désactivation des tableaux

        glDisableVertexAttribArray(2);
        glDisableVertexAttribArray(0);


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><h2 id="r-le-sol-3" data-claire-element-id="964038">Le sol</h2><h3 id="r-le-header-7" data-claire-element-id="963997">Le header</h3><p id="r-963993" data-claire-element-id="963993">La correction du sol va être un peu spécial. En fait, tout dépend de la manière dont vous l'avez codé. Je vais considérer le fait que vous n'ayez fait qu'une seule classe pour gérer les deux types de sol (herbeux et terreux). Bien entendu, si vous en avez fait deux ça fonctionne quand même, il n'y a pas qu'une seule solution je le répète. ^^</p><p id="r-963994" data-claire-element-id="963994">Commençons par le header qui ressemble quasiment trait pour trait à celui de la classe <em><strong>Cabane</strong></em></p><pre id="r-963995" data-claire-element-id="963995"><code data-claire-semantic="cpp">#ifndef DEF_SOL
#define DEF_SOL


// Includes OpenGL

#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif


// Includes GLM

#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtx/transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;


// Autres includes

#include &quot;Shader.h&quot;
#include &quot;Texture.h&quot;


// Classe Sol

class Sol
{
    public:

    Sol(float longueur, float largeur, int repetitionLongueur, int repetitionLargeur, std::string const vertexShader, std::string const fragmentShader, std::string const texture);
    ~Sol();

    void afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview);


    private:

    Shader m_shader;
    Texture m_texture;

    float m_vertices[18];
    float m_coordTexture[12];
};

#endif</code></pre><p id="r-963996" data-claire-element-id="963996">La seule différence par rapport au précédent est le fait que nous n'avons besoin qu'une d'une seule texture ici.</p><h3 id="r-le-constructeur-21" data-claire-element-id="964034">Le constructeur</h3><p id="r-963998" data-claire-element-id="963998">Si vous n'avez utilisé qu'une seule classe pour le sol, vous vous êtes peut-être confrontés au problème de la répétition de texture. Je vous avais donné une petite piste avec le constructeur suivant :</p><pre id="r-963999" data-claire-element-id="963999"><code data-claire-semantic="cpp">Sol(float longueur, float largeur, int repetitionLongueur, int repetitionLargeur, std::string const vertexShader, std::string const fragmentShader, std::string const texture);</code></pre><p id="r-964000" data-claire-element-id="964000">Celui-ci prend 7 paramètres :</p><ul id="r-964009" data-claire-element-id="964009"><li id="r-964002" data-claire-element-id="964002"><p id="r-964001" data-claire-element-id="964001"><strong>longueur</strong> et <strong>largeur</strong> : pour définir la taille du sol</p></li><li id="r-964004" data-claire-element-id="964004"><p id="r-964003" data-claire-element-id="964003"><strong>repitionLongueur</strong> et <strong>repitionLargeur</strong> : pour définir la répétition de la texture</p></li><li id="r-964006" data-claire-element-id="964006"><p id="r-964005" data-claire-element-id="964005"><strong>vertexShader</strong> et <strong>fragmentShader</strong> : qui représentent les fichiers sources du shader</p></li><li id="r-964008" data-claire-element-id="964008"><p id="r-964007" data-claire-element-id="964007"><strong>texture</strong> : qui représente le chemin vers l'image à utiliser</p></li></ul><p id="r-964010" data-claire-element-id="964010">Je passe très rapidement sur le début du constructeur qui ne fait qu'initialiser le shader et la texture :</p><pre id="r-964011" data-claire-element-id="964011"><code data-claire-semantic="cpp">Sol::Sol(float longeur, float largeur, int repetitionLongueur, int repetitionLargeur, std::string const vertexShader, std::string const fragmentShader, std::string const texture) : 
         m_shader(vertexShader, fragmentShader), m_texture(texture)
{
    // Chargement du shader

    m_shader.charger();


    // Chargement de la texture

    m_texture.charger();
}</code></pre><p id="r-964012" data-claire-element-id="964012">Les deux premiers paramètres de la liste ci-dessus servent à initialiser le tableau de vertices en créant deux triangles. Ces derniers formeront eux-mêmes un rectangle qui représentera le sol :</p><pre id="r-964013" data-claire-element-id="964013"><code data-claire-semantic="cpp">// Vertices temporaires

float verticesTmp[] = {-longueur, 0, -largeur,   longueur, 0, -largeur,   longueur, 0, largeur,     // Triangle 1
                       -longueur, 0, -largeur,   -longueur, 0, largeur,   longueur, 0, largeur};    // Triangle 2</code></pre><p id="r-964014" data-claire-element-id="964014">Le petit piège ici serait de ne pas toucher aux paramètres <strong>longueur</strong> et <strong>largeur</strong> avant d'initialiser les vertices. En effet, si on ne le fait pas, le sol sera doublé :</p><figure id="r-964016" data-claire-element-id="964017"><img id="r-964015" data-claire-element-id="964015" src="medias/uploads.siteduzero.com_files_420001_421000_420577.png" alt="Image utilisateur"/></figure><p id="r-964018" data-claire-element-id="964018">Pour éviter cela, il faut diviser par <strong>2</strong> les paramètres <strong>longueur</strong> et <strong>largeur</strong> avant de les utiliser dans le tableau :</p><figure id="r-964020" data-claire-element-id="964021"><img id="r-964019" data-claire-element-id="964019" src="medias/uploads.siteduzero.com_files_420001_421000_420578.png" alt="Image utilisateur"/></figure><p id="r-964022" data-claire-element-id="964022">Nous avons fait la même chose dans la classe <em><strong>Cube</strong></em> pour éviter de doubler la taille de nos modèles.</p><pre id="r-964023" data-claire-element-id="964023"><code data-claire-semantic="cpp">// Division de la taille

longueur /= 2.0;
largeur /= 2.0;


// Vertices temporaires

float verticesTmp[] = {-longueur, 0, -largeur,   longueur, 0, -largeur,   longueur, 0, largeur,     // Triangle 1
                       -longueur, 0, -largeur,   -longueur, 0, largeur,   longueur, 0, largeur};    // Triangle 2</code></pre><p id="r-964024" data-claire-element-id="964024">A noter que si vos vertices partent d'un coin, comme le coin inférieur gauche par exemple, alors vous ne devez pas faire ces divisions :</p><figure id="r-964026" data-claire-element-id="964027"><img id="r-964025" data-claire-element-id="964025" src="medias/uploads.siteduzero.com_files_420001_421000_420579.png" alt="Image utilisateur"/></figure><p id="r-964028" data-claire-element-id="964028">En ce qui concerne le tableau de coordonnées de texture, il suffit de reprendre celui que nous avons utilisé pour les carrés dans les chapitres précédents et d'y remplacer les valeurs <strong>1</strong> par les paramètres <strong>repitionLongueur</strong> et <strong>repitionLargeur</strong> :</p><pre id="r-964029" data-claire-element-id="964029"><code data-claire-semantic="cpp">// Coordonnées de texture temporaires

float coordTexture[] = {0, 0,   repetitionLongueur, 0,   repetitionLongueur, repetitionLargeur,      // Triangle 1
                        0, 0,   0, repetitionLargeur,   repetitionLongueur, repetitionLargeur};      // Triangle 2</code></pre><p id="r-964030" data-claire-element-id="964030">Une fois les tableaux définis, on copie leurs valeurs dans les attributs :</p><pre id="r-964031" data-claire-element-id="964031"><code data-claire-semantic="cpp">// Copie des vertices

for(int i(0); i &lt; 18; i++)
    m_vertices[i] = verticesTmp[i];


// Copie des coordonnées

for(int i(0); i &lt; 12; i++)
    m_coordTexture[i] = coordTexture[i];</code></pre><p id="r-964032" data-claire-element-id="964032">Ce qui donne :</p><pre id="r-964033" data-claire-element-id="964033"><code data-claire-semantic="cpp">Sol::Sol(float longueur, float largeur, int repetitionLongueur, int repetitionLargeur, std::string const vertexShader, std::string const fragmentShader, std::string const texture) : 
         m_shader(vertexShader, fragmentShader), m_texture(texture)
{
    // Chargement du shader

    m_shader.charger();


    // Chargement de la texture

    m_texture.charger();


    // Division de la taille

    longueur /= 2.0;
    largeur /= 2.0;


    // Vertices temporaires

    float verticesTmp[] = {-longueur, 0, -largeur,   longueur, 0, -largeur,   longueur, 0, largeur,     // Triangle 1
                           -longueur, 0, -largeur,   -longueur, 0, largeur,   longueur, 0, largeur};    // Triangle 2


    // Coordonnées de texture temporaires

    float coordTexture[] = {0, 0,   repetitionLongueur, 0,   repetitionLongueur, repetitionLargeur,      // Triangle 1
                            0, 0,   0, repetitionLargeur,   repetitionLongueur, repetitionLargeur};      // Triangle 2


    // Copie des vertices

    for(int i(0); i &lt; 18; i++)
        m_vertices[i] = verticesTmp[i];


    // Copie des coordonnées

    for(int i(0); i &lt; 12; i++)
        m_coordTexture[i] = coordTexture[i];
}</code></pre><h3 id="r-la-methode-afficher-3" data-claire-element-id="964037">La méthode afficher()</h3><p id="r-964035" data-claire-element-id="964035">Pour l'affichage, il suffit juste de reprendre la méthode <strong>afficher</strong>() de la classe <em><strong>Caisse</strong></em>, et non <em><strong>Cube</strong></em> cette fois-ci, et d'y modifier le nombre de vertices à afficher. Il y a <strong>2</strong> triangles dans notre cas, il en faut donc <strong>6</strong> :</p><pre id="r-964036" data-claire-element-id="964036"><code data-claire-semantic="cpp">void Sol::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Envoi des vertices

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, m_vertices);
        glEnableVertexAttribArray(0);


        // Envoi des coordonnées de texture

        glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, m_coordTexture);
        glEnableVertexAttribArray(2);


        // Envoi des matrices

        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


        // Verrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, m_texture.getID());


        // Rendu

        glDrawArrays(GL_TRIANGLES, 0, 6);


        // Déverrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, 0);


        // Désactivation des tableaux

        glDisableVertexAttribArray(2);
        glDisableVertexAttribArray(0);


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><h2 id="r-le-cristal-1" data-claire-element-id="964052">Le cristal</h2><h3 id="r-le-header-8" data-claire-element-id="964041">Le header</h3><p id="r-964039" data-claire-element-id="964039">Le cristal est le modèle le plus simple du TP. Il suffit de reprendre le même principe que la classe <em><strong>Cube</strong></em> en ajoutant la gestion de texture. Voici le header :</p><pre id="r-964040" data-claire-element-id="964040"><code data-claire-semantic="cpp">#ifndef DEF_CRISTAL
#define DEF_CRISTAL


// Includes OpenGL

#ifdef WIN32
#include &lt;GL/glew.h&gt;

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif


// Includes GLM

#include &lt;glm/glm.hpp&gt;
#include &lt;glm/gtx/transform.hpp&gt;
#include &lt;glm/gtc/type_ptr.hpp&gt;


// Autres includes

#include &quot;Shader.h&quot;
#include &quot;Texture.h&quot;


// Classe Cristal

class Cristal
{
    public:

    Cristal(std::string const vertexShader, std::string const fragmentShader, std::string const texture);
    Cristal();

    void afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview);


    private:

    Shader m_shader;
    Texture m_texture;

    float m_vertices[72];
    float m_coordTexture[48];
};

#endif</code></pre><h3 id="r-le-constructeur-22" data-claire-element-id="964048">Le constructeur</h3><p id="r-964042" data-claire-element-id="964042">Le tableau de vertices :</p><pre id="r-964043" data-claire-element-id="964043"><code data-claire-semantic="cpp">// Vertices temporaires

float verticesTmp[] = {-0.5, 0, -0.5,   0.5, 0, -0.5,   0, 1, 0,      // Triangle 1
                       0.5, 0, -0.5,   0.5, 0, 0.5,  0, 1, 0,         // Triangle 2
                       0.5, 0, 0.5,   -0.5, 0, 0.5,   0, 1, 0,        // Triangle 3
                       -0.5, 0, 0.5,   -0.5, 0, -0.5,   0, 1, 0,      // Triangle 4

                       -0.5, 0, -0.5,   0.5, 0, -0.5,   0, -1, 0,     // Triangle 5
                       0.5, 0, -0.5,   0.5, 0, 0.5,  0, -1, 0,        // Triangle 6
                       0.5, 0, 0.5,   -0.5, 0, 0.5,   0, -1, 0,       // Triangle 7
                       -0.5, 0, 0.5,   -0.5, 0, -0.5,   0, -1, 0};    // Triangle 8</code></pre><p id="r-964044" data-claire-element-id="964044">Et le tableau de coordonnées de texture :</p><pre id="r-964045" data-claire-element-id="964045"><code data-claire-semantic="cpp">// Coordonnées de texture temporaires

float coordTexture[] = {0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 1
                        0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 2
                        0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 3
                        0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 4
                        0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 5
                        0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 6
                        0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 7
                        0, 0,   0.5, 0,   0.5, 0.5};     // Triangle 8</code></pre><p id="r-964046" data-claire-element-id="964046">Ce qui donne le constructeur :</p><pre id="r-964047" data-claire-element-id="964047"><code data-claire-semantic="cpp">Cristal::Cristal(std::string const vertexShader, std::string const fragmentShader, std::string const texture) : m_shader(vertexShader, fragmentShader), m_texture(texture)
{
    // Chargement du shader

    m_shader.charger();


    // Chargement de la texture

    m_texture.charger();


    // Vertices temporaires

    float verticesTmp[] = {-0.5, 0, -0.5,   0.5, 0, -0.5,   0, 1, 0,      // Triangle 1
                           0.5, 0, -0.5,   0.5, 0, 0.5,  0, 1, 0,         // Triangle 2
                           0.5, 0, 0.5,   -0.5, 0, 0.5,   0, 1, 0,        // Triangle 3
                           -0.5, 0, 0.5,   -0.5, 0, -0.5,   0, 1, 0,      // Triangle 4

                           -0.5, 0, -0.5,   0.5, 0, -0.5,   0, -1, 0,     // Triangle 5
                           0.5, 0, -0.5,   0.5, 0, 0.5,  0, -1, 0,        // Triangle 6
                           0.5, 0, 0.5,   -0.5, 0, 0.5,   0, -1, 0,       // Triangle 7
                           -0.5, 0, 0.5,   -0.5, 0, -0.5,   0, -1, 0};    // Triangle 8


    // Coordonnées de texture temporaires

    float coordTexture[] = {0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 1
                            0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 2
                            0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 3
                            0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 4
                            0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 5
                            0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 6
                            0, 0,   0.5, 0,   0.5, 0.5,      // Triangle 7
                            0, 0,   0.5, 0,   0.5, 0.5};     // Triangle 8


    // Copie des vertices

    for(int i(0); i &lt; 72; i++)
        m_vertices[i] = verticesTmp[i];


    // Copie des coordonnées

    for(int i(0); i &lt; 48; i++)
        m_coordTexture[i] = coordTexture[i];
}</code></pre><h3 id="r-la-methode-afficher-4" data-claire-element-id="964051">La méthode afficher()</h3><p id="r-964049" data-claire-element-id="964049">Le reste de la classe est identique à celle du sol. La seule différence concerne la fonction <strong>glDrawArrays</strong>() qui doit afficher <strong>24</strong> vertices et non <strong>6</strong> :</p><pre id="r-964050" data-claire-element-id="964050"><code data-claire-semantic="cpp">void Cristal::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Envoi des vertices

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, m_vertices);
        glEnableVertexAttribArray(0);


        // Envoi des coordonnées de texture

        glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, m_coordTexture);
        glEnableVertexAttribArray(2);


        // Envoi des matrices

        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


        // Verrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, m_texture.getID());


        // Rendu

        glDrawArrays(GL_TRIANGLES, 0, 24);


        // Déverrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, 0);


        // Désactivation des tableaux

        glDisableVertexAttribArray(2);
        glDisableVertexAttribArray(0);


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><h2 id="r-afficher-le-tout" data-claire-element-id="964071">Afficher le tout</h2><p id="r-964053" data-claire-element-id="964053">Maintenant que nous avons toutes nos classes, il ne nous reste plus qu'à les instancier pour remplir notre scène. Celle-ci doit contenir une cabane, deux types de sol, un cristal et quelques caisses :</p><pre id="r-964054" data-claire-element-id="964054"><code data-claire-semantic="cpp">// Cabanne

Cabane cabane(&quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;);


// Sols

Sol solHerbeux(30.0, 30.0, 15, 15, &quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Herbe.jpg&quot;);
Sol solTerreux(10.0, 10.0, 5, 5, &quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Sol.jpg&quot;);


// Caisses

Caisse caisse(2.0, &quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Caisse2.jpg&quot;);
Caisse caisseDanger(2.0, &quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Caisse.jpg&quot;);


// Cristal

Cristal cristal(&quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Cristal.tga&quot;);
float angle(0.0);</code></pre><aside id="r-964056" data-claire-element-id="964056" data-claire-semantic="information"><p id="r-964055" data-claire-element-id="964055">Si vous souhaitez inclure plusieurs caisses ayant la même texture alors vous n'avez pas besoin d'en déclarer plusieurs, une seule suffit. Vous pouvez ensuite appeler sa méthode <strong>afficher</strong>() plusieurs fois.</p></aside><p id="r-964057" data-claire-element-id="964057">Au niveau de l'affichage, il suffit d'appeler la méthode <strong>afficher</strong>() pour tous les objets. On commence avec la cabane et le sol :</p><pre id="r-964058" data-claire-element-id="964058"><code data-claire-semantic="cpp">// Affichage de la cabane

cabane.afficher(projection, modelview);


// Affichage du sol terreux

solTerreux.afficher(projection, modelview);


// Affichage du sol herbeux

mat4 sauvegardeModelview = modelview;

    modelview = translate(modelview, vec3(0, -0.01, 0));
    solHerbeux.afficher(projection, modelview);

modelview = sauvegardeModelview;</code></pre><p id="r-964059" data-claire-element-id="964059">Il y a deux détails qui doivent retenir notre attention ici :</p><ul id="r-964064" data-claire-element-id="964064"><li id="r-964061" data-claire-element-id="964061"><p id="r-964060" data-claire-element-id="964060">La translation de <strong>0.01</strong> sur l'axe <strong>Y</strong> qui permet d'éviter un gros bug de texture.</p></li><li id="r-964063" data-claire-element-id="964063"><p id="r-964062" data-claire-element-id="964062">Les objets <strong>cabane</strong> et <strong>solTerreux</strong> qui ne sont pas encadrés une sauvegarde de la matrice. Vu que nous n'utilisons aucune transformation pour les afficher, nous n'en avons pas besoin.</p></li></ul><p id="r-964065" data-claire-element-id="964065">Il ne manque plus qu'à placer les caisses et le cristal à l'aide de différentes translations. On commence avec les caisses sans oublier de sauvegarder et restaurer la matrice <strong>modelview</strong>. D'ailleurs, il n'y a pas besoin de redéclarer la sauvegarde vu qu'elle l'a déjà été avant. ;)</p><pre id="r-964066" data-claire-element-id="964066"><code data-claire-semantic="cpp">// Sauvegarde de la matrice

sauvegardeModelview = modelview;


    // Première caisse

    modelview = translate(modelview, vec3(-2.5, 1, -3));
    caisse.afficher(projection, modelview);


    // Deuxième caisse

    modelview = translate(modelview, vec3(5, 0, 1));
    caisseDanger.afficher(projection, modelview);


    // Troisième caisse

    modelview = translate(modelview, vec3(-2.5, 0, 4));
    caisse.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><p id="r-964067" data-claire-element-id="964067">Vu que les caisses sont assez proches, nous pouvons nous permettre de ne sauvegarder et de ne restaurer la matrice <strong>modelview</strong> qu'une seule fois.</p><p id="r-964068" data-claire-element-id="964068">On termine l'affichage par le fameux cristal qui doit pivoter sur lui-même indéfiniment. On utilise pour cela la même technique que celle du cube dans le chapitre sur la 3D, à savoir l'utilisation d'un angle incrémenté de <strong>1</strong> à chaque tour de boucle. Si cet angle dépasse <strong>360°</strong> alors on lui soustrait justement <strong>360°</strong> :</p><pre id="r-964069" data-claire-element-id="964069"><code data-claire-semantic="cpp">// Sauvegarde de la matrice

sauvegardeModelview = modelview;


    // Affichage des caisses

    ....


    // Rotation du cristal

    angle++;
 
    if(angle &gt; 360)
        angle -= 360;


    // Affichage du cristal

    modelview = translate(modelview, vec3(0, 2.1, 0));
    modelview = rotate(modelview, angle, vec3(0, 1, 0));

    cristal.afficher(projection, modelview);


// Restauration de la matrice

modelview = sauvegardeModelview;</code></pre><p id="r-964070" data-claire-element-id="964070">Faites attention à placer ce bout de code dans le bloc &quot;sauvegarde/restauration de la matrice&quot; des caisses, ne refaites pas de sauvegarde juste pour afficher le cristal. ;)</p><h2 id="r-telechargement-46" data-claire-element-id="964077">Téléchargement</h2><p id="r-964072" data-claire-element-id="964072">Comme toute fin de chapitre, je vous propose de télécharger une archive contenant le code que nous avons fait. Ou plutôt que vous avez fait dans ce cas. :p</p><p id="r-964073" data-claire-element-id="964073"><strong>Télécharger (Windows - UNIX/Linux) : <a href="https://dl.dropboxusercontent.com/s/3ajj3rmmidb1wt8/TP - Une relique retrouvee.zip?token_hash=AAGzuHEghnjkxw7Zv6g5NsmqHkM54pQscpKFfxPO3fVzeA&amp;dl=1">Correction du TP - Une relique retrouvée</a></strong></p><p id="r-964074" data-claire-element-id="964074">Nous venons de terminer notre premier TP, celui-ci nous a permis d'utiliser toutes les notions que avons vues sur OpenGL. :D</p><p id="r-964075" data-claire-element-id="964075">Je vous conseille de mettre de coté le code que vous avez réalisé vous-même, le TP de la deuxième partie sera basé dessus. Bien évidemment, nous y rajouterons une multitude de nouveautés, nous les verrons toutes ensemble.</p><p id="r-964076" data-claire-element-id="964076">Je vous invite d'ailleurs à lire la deuxième partie de ce tutoriel qui sera consacrée aux notions avancées d'OpenGL. Je vous parlerai enfin des shaders en détails, vous saurez tout à leur sujet depuis la classe qui leur est dédiée jusqu'aux petits fichiers sources du dossier <strong>Shaders</strong>. Nous verrons également pas mal d'autres choses qui seront principalement axées autour de la carte graphique. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
<span class="arrow"></span>
<span class="next">Les consignes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">
<span class="next">Les Vertex Buffer Objects</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesVertexBufferObjects"></a><h2>Les Vertex Buffer Objects</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
<span class="arrow"></span>
<span class="next">Correction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
<span class="next">C&#039;est quoi un VBO ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-964084" data-claire-element-id="964084">On attaque cette deuxième partie du tutoriel avec des <em>objets OpenGL</em> qui vont nous être très utiles par la suite : les <strong>Vertex Buffer Objects</strong>. Ils sont très liés à la carte graphique car ils permettent d'héberger des données directement dessus (vertex, coordonnées de texture, ...).</p><p id="r-964085" data-claire-element-id="964085">Vu que nous avons déjà eu l'occasion de manipuler les <em>objets OpenGL</em> avec les textures, vous retrouverez pas mal de notions similaires, et tant mieux parce que ça nous facilite la vie. :p</p>
</div><a name="C039estquoiunVBO"></a><h2>C&#039;est quoi un VBO ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">
<span class="arrow"></span>
<span class="next">Les Vertex Buffer Objects</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
<span class="next">Création</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h3 id="r-definition-83" data-claire-element-id="964092">Définition</h3><p id="r-964086" data-claire-element-id="964086">Je vous ai déjà donné une rapide définition des <strong>Vertex Buffer Objects</strong> (ou <strong>VBO</strong>) dans l'introduction mais faisons comme si vous n'avez rien vu. :p</p><div id="r-964088" data-claire-element-id="964088" data-claire-semantic="question"><p id="r-964087" data-claire-element-id="964087">Un <strong>Vertex Buffer Object</strong> qu'est ce c'est ?</p></div><p id="r-964089" data-claire-element-id="964089">C'est un <em>objet OpenGL</em> qui contient des données relatives à un modèle 3D comme les vertices, les coordonnées de texture, les normales (pour les lumières), ... Sa particularité vient du fait que les données qu'il contient se trouvent non pas dans la <strong>RAM</strong> mais directement dans la carte graphique.</p><p id="r-964090" data-claire-element-id="964090">Lorsque vous achetez une carte graphique, je suis sûr que la majorité d'entre vous ne regarde qu'une seule caractéristique : la quantité de mémoire RAM (ou plutôt <strong>VRAM</strong> pour <strong>Vidéo Random Access Memory</strong>). Cette mémoire se comporte exactement comme la <strong>RAM</strong> classique, elle stocke des informations qui seront utilisées plus tard par un programme.</p><p id="r-964091" data-claire-element-id="964091">Un <strong>Vertex Buffer Object</strong> est donc une zone mémoire (<strong>buffer</strong>) appartenant à la carte graphique dans laquelle on peut stocker des données.</p><h3 id="r-utilite-18" data-claire-element-id="964110">Utilité</h3><p id="r-964093" data-claire-element-id="964093">Vous vous posez peut-être la question de savoir quel intérêt peut-on avoir à stocker des données directement dans la carte graphique ?</p><p id="r-964094" data-claire-element-id="964094">L'intérêt n'est peut-être pas évident pour le moment car nous n'avons pas de projets d'envergure pour le moment, mais sachez que les <strong>VBO</strong> permettent de gagner beaucoup de temps calculs en évitant à <em>OpenGL</em> des aller et retours inutiles.</p><p id="r-964095" data-claire-element-id="964095">En effet, lorsque vous affichez un modèle 3D (comme une maison par exemple), vous devez spécifier ses vertices, ses coordonnées de texture, ... Toutes ces données se trouvent automatiquement dans la <strong>RAM</strong>. Or, à chaque fois que vous appelez la fonction <strong>glDrawArrays</strong>() ou <strong>glDrawElements</strong>() pour afficher votre modèle, <em>OpenGL</em> va chercher toutes les données correspondantes dans la RAM pour les transférer dans la mémoire graphique pour qu'ensuite seulement il puisse travailler avec :</p><figure id="r-964097" data-claire-element-id="964098"><img id="r-964096" data-claire-element-id="964096" src="medias/uploads.siteduzero.com_files_416001_417000_416596.png" alt="Image utilisateur"/></figure><p id="r-964099" data-claire-element-id="964099">Je pense que vous aurez compris que ces transferts ralentissent pas mal le temps de calcul, surtout quand vous transférez des centaines de milliers de données 60 fois par seconde !</p><p id="r-964100" data-claire-element-id="964100">Pour éviter de perdre du temps avec ces transferts, <em>OpenGL</em> nous propose d'utiliser les <strong>Vertex Buffer Objects</strong> pour accéder directement à la mémoire vidéo. Au moment du chargement d'un modèle, on envoie toutes les données au VBO qui va se contenter de les stocker dans la carte graphique. Il n'y a donc plus qu'un seul transfert :</p><figure id="r-964102" data-claire-element-id="964103"><img id="r-964101" data-claire-element-id="964101" src="medias/uploads.siteduzero.com_files_416001_417000_416597.png" alt="Image utilisateur"/></figure><figure id="r-964105" data-claire-element-id="964106"><img id="r-964104" data-claire-element-id="964104" src="medias/uploads.siteduzero.com_files_416001_417000_416598.png" alt="Image utilisateur"/></figure><p id="r-964107" data-claire-element-id="964107">On économise ainsi le transfert de centaines de milliers de données à chaque affichage, la carte graphique peut travailler plus rapidement.</p><p id="r-964108" data-claire-element-id="964108">Attention cependant, on conserve tout de même une copie des données dans la <strong>RAM</strong>. Elles ne sont plus copiées à chaque affichage mais elles sont quand même là. On doit les converser pour pouvoir effectuer des calculs dessus, comme un déplacement de personnage par exemple.</p><p id="r-964109" data-claire-element-id="964109">D'ailleurs, lorsqu'on les mettra à jour il faudra les re-transférer dans le <strong>VBO</strong>, mais ça ce sera pour la fin du chapitre. :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">
<span class="arrow"></span>
<span class="next">Les Vertex Buffer Objects</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
<span class="next">Création</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Cration"></a><h2>Création</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
<span class="arrow"></span>
<span class="next">C&#039;est quoi un VBO ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
<span class="next">Utilisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-le-header-9" data-claire-element-id="964121">Le header</h2><h3 id="r-introduction-125" data-claire-element-id="964115">Introduction</h3><p id="r-964112" data-claire-element-id="964112">On sait maintenant ce que sont les <strong>Vertex Buffer Objects</strong>, on peut donc passer à leur implémentation. Mais avant tout je voudrais faire une petite comparaison avec les textures.</p><p id="r-964113" data-claire-element-id="964113">Souvenez-vous que les textures sont des <em>objets OpenGL</em> eux-aussi et que les fonctions qui permettent de les gérer sont quasiment les mêmes pour tous les <em>objets</em>. Ainsi, on retrouvera des fonctions identiques aux textures pour gérer les <strong>VBO</strong> comme <strong>glGenXXX</strong>(), <strong>glBindXXX</strong>() et <strong>glDeleteXXX</strong>(). De plus, on retrouvera également les variables de type <em><strong>GLuint</strong></em> qui les représentera et qu'on utilisera notamment dans le verrouillage.</p><p id="r-964114" data-claire-element-id="964114">Dans ça chapitre, nous travaillerons sur la classe <em><strong>Cube</strong></em> en intégrant un <strong>Vertex Buffer Objet</strong> pour l'afficher. Nous ferons de même par la suite pour la classe <strong>Caisse</strong> en prenant en compte l'héritage C++. ;)</p><h3 id="r-nouvel-attribut" data-claire-element-id="964120">Nouvel attribut</h3><p id="r-964116" data-claire-element-id="964116">Pour commencer, nous allons ajouter à notre liste d'attributs une nouvelle variable de type <em><strong>GLuint</strong></em> que nous appellerons <strong>m_vboID</strong> et qui représentera l'identifiant du <strong>VBO</strong>. Nous en aurons besoin pour sa configuration et son utilisation.</p><pre id="r-964117" data-claire-element-id="964117"><code data-claire-semantic="cpp">#ifndef DEF_CUBE
#define DEF_CUBE


// Includes 

....


// Classe Cube

class Cube
{
    public:

    Cube(float taille, std::string const vertexShader, std::string const fragmentShader);
    ~Cube();

    void afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview);


    protected:

    Shader m_shader;
    float m_vertices[108];
    float m_couleurs[108];

    GLuint m_vboID;
};

#endif</code></pre><p id="r-964118" data-claire-element-id="964118">Comme tout nouvel attribut, il faut penser à l'initialiser dans le constructeur. Nous lui donnerons la valeur <strong>0</strong> vu qu'il est vide pour le moment :</p><pre id="r-964119" data-claire-element-id="964119"><code data-claire-semantic="cpp">Cube::Cube(float taille, std::string const vertexShader, std::string const fragmentShader) : m_shader(vertexShader, fragmentShader), m_vboID(0)
{
    // Initialisation

    ....
}</code></pre><h2 id="r-la-methode-charger-1" data-claire-element-id="964254">La méthode charger()</h2><h3 id="r-generation-de-l-identifiant" data-claire-element-id="964135">Génération de l'identifiant</h3><p id="r-964122" data-claire-element-id="964122">Nous n'allons pas gérer la création du <strong>VBO</strong> dans le constructeur car cela poserait problème avec l'héritage dans les classes filles. A la place, nous allons créer une méthode à part que nous appellerons simplement <strong>charger</strong>() comme pour les textures et le shader. Son prototype ne sera pas compliqué vu qu'il n'y aura aucun paramètre à gérer :</p><pre id="r-964123" data-claire-element-id="964123"><code data-claire-semantic="cpp">void charger();</code></pre><p id="r-964124" data-claire-element-id="964124">Ne l'appelez pas <strong>chargerVBO</strong>() car nous mettrons autre chose à l'intérieur dans le chapitre suivant. ;)</p><p id="r-964125" data-claire-element-id="964125">Pour en revenir à notre nouvel attribut, rappelez-vous que les identifiants (ou <strong>ID</strong>) sont créés grâce à la fonction <strong>glGenXXX</strong>() et représentent l'<em>objet OpenGL</em> auquel ils sont rattachés. Pour créer celui des textures par exemple, nous utilisions la fonction <strong>glGenTextures</strong>().</p><p id="r-964126" data-claire-element-id="964126">Pour les <strong>VBO</strong>, nous utiliserons la même fonction sauf que l'on remplacera le mot <strong>Texture</strong> par <strong>Buffer</strong> (ou zone mémoire). La fonction à utiliser devient donc <strong>glGenBuffers</strong>() :</p><pre id="r-964127" data-claire-element-id="964127"><code data-claire-semantic="cpp">GLuint glGenBuffers(GLsizei number, GLuint *buffers);</code></pre><ul id="r-964132" data-claire-element-id="964132"><li id="r-964129" data-claire-element-id="964129"><p id="r-964128" data-claire-element-id="964128"><strong>number</strong> : Le nombre d'ID à initialiser. Nous lui donnerons toujours la valeur <strong>1</strong> comme pour les textures</p></li><li id="r-964131" data-claire-element-id="964131"><p id="r-964130" data-claire-element-id="964130"><strong>buffers</strong> : Un tableau de type <em><strong>GLuint</strong></em>. On peut également mettre l'adresse d'une variable <em><strong>GLuint</strong></em> pour n'initialiser qu'un seul ID</p></li></ul><p id="r-964133" data-claire-element-id="964133">Donc pour générer un nouvel <strong>ID</strong>, nous devons appeler cette fonction en donnant en paramètre <strong>1</strong> (pour n'en créer qu'un seul) ainsi que l'adresse de l'attribut <strong>m_vboID</strong> pour récupérer la valeur retournée :</p><pre id="r-964134" data-claire-element-id="964134"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Génération de l'ID

    glGenBuffers(1, &amp;m_vboID);
}</code></pre><h3 id="r-le-verrouillage-1" data-claire-element-id="964153">Le verrouillage</h3><p id="r-964136" data-claire-element-id="964136">Si je vous parle de la notion de <em><strong>verrouillage</strong></em>, vous vous souvenez de ce que ce que ça signifie ? ;)</p><p id="r-964137" data-claire-element-id="964137">A chaque fois que l'on veut configurer ou utiliser un <em>objet OpenGL</em> il faut le verrouiller car OpenGL a justement besoin de savoir sur quelle chose il doit travailler. <br/> Pour configurer les textures par exemple, il fallait les verrouiller avant de leur donner les pixels d'une image. Si nous ne l'avions pas fait, nous aurions envoyé les pixels on ne sait où dans la mémoire.</p><p id="r-964138" data-claire-element-id="964138">Avec les <strong>VBO</strong> c'est la même chose, avant de les configurer ou de les utiliser il faut les verrouiller.</p><p id="r-964139" data-claire-element-id="964139">La fonction permettant de faire cette opération s'appelle <strong>glBindXXX</strong>(), avec les <strong>VBO</strong> ce sera <strong>glBindBuffer</strong>().</p><pre id="r-964140" data-claire-element-id="964140"><code data-claire-semantic="cpp">void glBindBuffer(GLenum target, GLuint buffer);</code></pre><ul id="r-964145" data-claire-element-id="964145"><li id="r-964142" data-claire-element-id="964142"><p id="r-964141" data-claire-element-id="964141"><strong>target</strong> : type de l'<em>objet</em> que l'on veut verrouiller. Comme d'habitude, à chaque fois que l'on verra ce paramètre on lui donnera toujours la même valeur, et dans notre cas ce sera <strong>GL_ARRAY_BUFFER</strong></p></li><li id="r-964144" data-claire-element-id="964144"><p id="r-964143" data-claire-element-id="964143"><strong>buffer</strong> : ID qui représente le <strong>VBO</strong>. On lui donnera la <strong><em>valeur</em></strong> de l'ID et pas son <em><strong>adresse</strong></em> cette fois. ;)</p></li></ul><p id="r-964146" data-claire-element-id="964146">On appelle donc cette fonction en donnant en paramètre <strong>GL_ARRAY_BUFFER</strong> pour <strong>target</strong> et l'attribut <strong>m_vboID</strong> pour <strong>buffer</strong> :</p><pre id="r-964147" data-claire-element-id="964147"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Génération de l'ID

    glGenBuffers(1, &amp;m_vboID);


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);
}</code></pre><p id="r-964148" data-claire-element-id="964148">Je profite également de cette partie pour vous montrer le déverrouillage d'objet. Vous savez qu'une fois que nous n'utilisons plus nos objets il faut les déverrouiller, pour éviter d'écrire par erreur dedans par exemple.</p><p id="r-964149" data-claire-element-id="964149">Pour déverrouiller un <strong>VBO</strong>, il suffit d'appeler la fonction <strong>glBindbuffer</strong>() avec un ID de <strong>0</strong> (valeur nulle).</p><pre id="r-964150" data-claire-element-id="964150"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Génération de l'ID

    glGenBuffers(1, &amp;m_vboID);


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);



        // Configuration 

        ....



    // Déverrouillage de l'objet

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><aside id="r-964152" data-claire-element-id="964152" data-claire-semantic="information"><p id="r-964151" data-claire-element-id="964151">Je vous conseille d'indenter le code qui se trouve entre les appels à <strong>glBindBuffer</strong>() de la même manière que <strong>glUseProgram</strong>(), ça vous permettra de mieux voir ce que vous lui envoyez.</p></aside><h3 id="r-allocation-de-la-memoire-video-partie-1-2" data-claire-element-id="964176">Allocation de la mémoire vidéo (Partie 1/2)</h3><p id="r-964154" data-claire-element-id="964154">Maintenant que nous avons un <strong>VBO</strong> créé et verrouillé, nous allons pouvoir lui transférer les données stockées dans la RAM. Les transferts seront un peu déroutants car nous ne transférons pas directement des <strong>float</strong> ou des <strong>unsigned int</strong> mais des <strong>bytes</strong>.</p><p id="r-964155" data-claire-element-id="964155">Mais avant cela, il va falloir définir une zone mémoire à l'intérieur-même de la carte graphique. Les <strong>VBO</strong> se comportent un peu comme l'allocation dynamique, il faut allouer dynamiquement de la place dans la mémoire en fonction des données à transférer.</p><p id="r-964156" data-claire-element-id="964156">Pour allouer de la mémoire normale (RAM), nous devons utiliser le mot-clef <strong>new[]</strong> avec la taille désirée. Dans notre cas, il va falloir passer par une fonction dédiée qui s'appelle <strong>glBufferData</strong>() :</p><pre id="r-964157" data-claire-element-id="964157"><code data-claire-semantic="cpp">glBufferData(GLenum target, GLsizeiptr size, const GLvoid *data, GLenum  usage)</code></pre><ul id="r-964166" data-claire-element-id="964166"><li id="r-964159" data-claire-element-id="964159"><p id="r-964158" data-claire-element-id="964158"><strong>target</strong> : On ne le présente plus, on lui donnera la valeur <strong>GL_BUFFER_DATA</strong></p></li><li id="r-964161" data-claire-element-id="964161"><p id="r-964160" data-claire-element-id="964160"><strong>size</strong> : C'est la taille mémoire à allouer (en bytes), il faut prendre en compte <strong>TOUTES</strong> les données à envoyer (vertices, coordonnées de texture, ...) correspondant à un modèle 3D</p></li><li id="r-964163" data-claire-element-id="964163"><p id="r-964162" data-claire-element-id="964162"><strong>data</strong> : Ce sont les données à transférer. On n'enverra rien du tout pour le moment car on ne peut pas envoyer plusieurs tableaux en un seul paramètre, nous lui affecterons la valeur <strong>0</strong></p></li><li id="r-964165" data-claire-element-id="964165"><p id="r-964164" data-claire-element-id="964164"><strong>usage</strong> : Permet de définir la fréquence de mise à jour des données</p></li></ul><p id="r-964167" data-claire-element-id="964167">Le deuxième et le quatrième paramètres sont les plus importants, nous allons passer un peu plus de temps dessus.</p><p id="r-964168" data-claire-element-id="964168">Le paramètre <strong>size</strong> est un peu particulier, il correspond à la taille de la mémoire à allouer en <em><strong>bytes</strong></em> (ou <em><strong>octets</strong></em>). Pourquoi en bytes ? Parce que les variables primitives ne font pas forcément la même taille dans la <strong>RAM</strong> que dans la <strong>VRAM</strong>, une variable de type <em><strong>float</strong></em> par exemple peut prendre plus de place dans l'une et moins dans l'autre.</p><p id="r-964169" data-claire-element-id="964169">Pour transférer des variables correctement, il faut trouver un moyen de communication commun entre les deux mémoires, et ce moyen c'est le <em><strong>byte</strong></em>. <br/> Il nous faut donc demander à la carte graphique une zone mémoire exprimée en bytes, elle devra être assez grande pour pouvoir contenir toutes les données. Dans la classe <em><strong>Cube</strong></em>, nous avons un tableau pour les vertices et un autre pour les couleurs. La zone devra donc faire la taille de ces deux-la.</p><p id="r-964170" data-claire-element-id="964170">Pour avoir la taille d'un tableau, il suffit de multiplier le nombre de ses cases par la taille en bytes du <em><strong>type</strong></em> de variable utilisée. Je vous rappelle que la fonction permettant d'avoir la taille d'un type de variable s'appelle <strong>sizeof</strong>(<em><strong>type</strong></em>).</p><p id="r-964171" data-claire-element-id="964171">Pour calculer la taille des vertices par exemple, nous savons que nous en avons <strong>108</strong> donc nous faisons <strong>108 * sizeof(float)</strong> :</p><pre id="r-964172" data-claire-element-id="964172"><code data-claire-semantic="cpp">// Taille du tableau de vertices

int tailleVerticesBytes = 108 * sizeof(float);</code></pre><p id="r-964173" data-claire-element-id="964173">Pour le tableau de couleurs, on fait exactement le même calcul. Nous avons <strong>108</strong> cases donc nous faisons <strong>108 * sizeof(float)</strong> :</p><pre id="r-964174" data-claire-element-id="964174"><code data-claire-semantic="cpp">// Taille du tableau de couleurs

int tailleCouleursBytes = 108 * sizeof(float);</code></pre><p id="r-964175" data-claire-element-id="964175">La taille de la zone mémoire à allouer dans la carte graphique vaudra donc <strong>tailleVerticesBytes + tailleCouleursBytes</strong>. :)</p><h3 id="r-de-nouveaux-attributs" data-claire-element-id="964183">De nouveaux attributs</h3><p id="r-964177" data-claire-element-id="964177">Je profite de cette partie pour faire une petite parenthèse. Nous aurons besoin des attributs précédents plusieurs fois dans la classe <strong>Cube</strong> (et ses filles). Il vaut donc mieux créer des attributs les représentant plutôt que de les redéclarer à la main à chaque fois.</p><p id="r-964178" data-claire-element-id="964178">Rajoutons donc deux nouvelles variables <strong>m_tailleVerticesBytes</strong> et <strong>m_tailleCouleursBytes</strong> dans le header :</p><pre id="r-964179" data-claire-element-id="964179"><code data-claire-semantic="cpp">#ifndef DEF_CUBE
#define DEF_CUBE


// Includes 

....


// Classe Cube

class Cube
{
    public:

    Cube(float taille, std::string const vertexShader, std::string const fragmentShader);
    ~Cube();

    void afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview);


    protected:

    Shader m_shader;
    float m_vertices[108];
    float m_couleurs[108];
 
    GLuint m_vboID;
    int m_tailleVerticesBytes;
    int m_tailleCouleursBytes;
};

#endif</code></pre><p id="r-964180" data-claire-element-id="964180">Initialisons-les ensuite dans le constructeur en leur donnant la taille des vertices et des couleurs en bytes :</p><pre id="r-964181" data-claire-element-id="964181"><code data-claire-semantic="cpp">Cube::Cube(float taille, std::string const vertexShader, std::string const fragmentShader) : m_shader(vertexShader, fragmentShader), m_vboID(0),
                                                                                             m_tailleVerticesBytes(108 * sizeof(float)),
                                                                                             m_tailleCouleursBytes(108 * sizeof(float))
{
    // Initialisation

    ....
}</code></pre><p id="r-964182" data-claire-element-id="964182">Le paramètre <strong>size</strong> de la fonction <strong>glBufferData</strong>() prendra donc la valeur <strong>m_tailleVerticesBytes + m_tailleCouleursBytes</strong>.</p><h3 id="r-allocation-de-la-memoire-video-partie-2-2" data-claire-element-id="964199">Allocation de la mémoire vidéo (Partie 2/2)</h3><p id="r-964184" data-claire-element-id="964184">On ferme la parenthèse et on revient à l'étude des autres paramètres. Le prochain sur la liste est <strong>usage</strong> et il sera plus rapide à comprendre. :p</p><p id="r-964185" data-claire-element-id="964185">Il permet à OpenGL de savoir si les données que nous stockerons dans le <strong>VBO</strong> seront mises à jour rarement, fréquemment ou tout le temps.</p><p id="r-964186" data-claire-element-id="964186">Par exemple, un personnage qui bouge devra quasiment tout le temps mettre à jour ses vertices, une caisse en revanche ne devra jamais le faire. OpenGL à besoin de connaitre cette fréquence de mise à jour, c'est pour ça qu'il nous donne le paramètre <strong>usage</strong>.</p><p id="r-964187" data-claire-element-id="964187">En théorie, il existe 9 valeurs possibles pour ce paramètre mais nous n'en retiendrons que 3 :</p><ul id="r-964194" data-claire-element-id="964194"><li id="r-964189" data-claire-element-id="964189"><p id="r-964188" data-claire-element-id="964188"><strong>GL_STATIC_DRAW</strong> : pour les données très peu mises à jour</p></li><li id="r-964191" data-claire-element-id="964191"><p id="r-964190" data-claire-element-id="964190"><strong>GL_DYNAMIC_DRAW</strong> : pour les données mises à jour fréquemment (plusieurs fois par seconde mais pas à chaque frame)</p></li><li id="r-964193" data-claire-element-id="964193"><p id="r-964192" data-claire-element-id="964192"><strong>GL_STREAM_DRAW</strong> : pour les données mises à jour tout le temps (A chaque frame cette fois-ci)</p></li></ul><p id="r-964195" data-claire-element-id="964195">Vu que le cube ne bouge pas, nous mettrons la valeur <strong>GL_STATIC_DRAW</strong>. ;)</p><p id="r-964196" data-claire-element-id="964196">En définitif, avec tous les paramètres que l'on vient de voir, nous appellerons la fonction <strong>glBufferData</strong>() de cette façon :</p><pre id="r-964197" data-claire-element-id="964197"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Génération de l'ID

    glGenBuffers(1, &amp;m_vboID);


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Allocation de la mémoire

        glBufferData(GL_ARRAY_BUFFER, m_tailleVerticesBytes + m_tailleCouleursBytes, 0, GL_STATIC_DRAW);


    // Déverrouillage de l'objet

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><p id="r-964198" data-claire-element-id="964198">Avec ça, on vient de communiquer directement avec la carte graphique pour lui demander si elle pouvait nous réserver un petit espace mémoire. ;)</p><h3 id="r-transfert-des-donnees-1" data-claire-element-id="964235">Transfert des données</h3><p id="r-964200" data-claire-element-id="964200">La fonction <strong>glBufferData</strong>() nous a permis d'allouer un espace mémoire pour y stocker nos données, et vous avez vu que nous n'avons transféré aucune donnée même si elle nous le proposait. Nous ne l'avons pas fait car il est impossible d'envoyer plusieurs tableaux dans un seul paramètre.</p><p id="r-964201" data-claire-element-id="964201">Pour transférer les données, nous allons utiliser une autre fonction OpenGL dont le nom ressemble étonnamment à celui de la fonction précédente : <strong>glBufferSubData</strong>().</p><pre id="r-964202" data-claire-element-id="964202"><code data-claire-semantic="cpp">glBufferSubData(GLenum target, GLintptr offset, GLsizeiptr size, const GLvoid *data);</code></pre><aside id="r-964204" data-claire-element-id="964204" data-claire-semantic="information"><p id="r-964203" data-claire-element-id="964203">Petite précision au passage, cette fonction est un poil plus rapide que sa grande sœur <strong>glBufferData</strong>() pour transférer des données. Donc même si nous n'avons qu'un seul tableau à envoyer au <strong>VBO</strong> on préférera utiliser <strong>glBufferSubData</strong>().</p></aside><ul id="r-964213" data-claire-element-id="964213"><li id="r-964206" data-claire-element-id="964206"><p id="r-964205" data-claire-element-id="964205"><strong>target</strong> : Toujours le même, on lui donnera la valeur <strong>GL_BUFFER_DATA</strong></p></li><li id="r-964208" data-claire-element-id="964208"><p id="r-964207" data-claire-element-id="964207"><strong>offset</strong> : Case en mémoire où on va commencer le transfert dans la <strong>VRAM</strong></p></li><li id="r-964210" data-claire-element-id="964210"><p id="r-964209" data-claire-element-id="964209"><strong>size</strong> : La taille des données à copier (en bytes)</p></li><li id="r-964212" data-claire-element-id="964212"><p id="r-964211" data-claire-element-id="964211"><strong>data</strong> : Les données à copier, par exemple le tableau de vertices</p></li></ul><p id="r-964214" data-claire-element-id="964214">Les paramètres importants ici sont l'<strong>offset</strong> et le <strong>size</strong>.</p><p id="r-964215" data-claire-element-id="964215">Je commence par le paramètre <strong>size</strong>, il correspond à la taille (en bytes) des données à envoyer. Si nous envoyons le tableau de vertices, nous donnerons la taille du tableau que nous avons calculée juste avant. Même chose pour le tableau de couleurs.</p><p id="r-964216" data-claire-element-id="964216">Le paramètre <strong>offset</strong> correspond quant à lui à la case mémoire dans laquelle va commencer la copie. Pour le transfert des vertices, ce paramètre sera de <strong>0</strong> vu que l'on commence à copier au début de la zone mémoire :</p><figure id="r-964218" data-claire-element-id="964219"><img id="r-964217" data-claire-element-id="964217" src="medias/uploads.siteduzero.com_files_416001_417000_416599.png" alt="Image utilisateur"/></figure><p id="r-964220" data-claire-element-id="964220">En revanche pour le transfert des couleurs, on ne va pas commencer la copie à la case <strong>0</strong> sinon on va écraser les valeurs transférées juste avant :</p><figure id="r-964222" data-claire-element-id="964223"><img id="r-964221" data-claire-element-id="964221" src="medias/uploads.siteduzero.com_files_416001_417000_416600.png" alt="Image utilisateur"/></figure><p id="r-964224" data-claire-element-id="964224">Il faudra commencer la copie à la fin du tableau de vertices, soit à la case <strong>tailleVerticesBytes</strong> :</p><figure id="r-964226" data-claire-element-id="964227"><img id="r-964225" data-claire-element-id="964225" src="medias/uploads.siteduzero.com_files_416001_417000_416601.png" alt="Image utilisateur"/></figure><p id="r-964228" data-claire-element-id="964228">A partir de cette case, on n'écrase plus rien, on copie au bon endroit.<br/> D'ailleurs, <strong>offset</strong> signifie <strong>décalage</strong> en français, on renseigne un décalage dans la plage mémoire. ;)</p><p id="r-964229" data-claire-element-id="964229">Au final, pour envoyer toutes nos données à la carte graphique nous devons appeler la fonction <strong>glBindSubData</strong>() deux fois en faisant attention à copier le <strong>bon volume</strong> de données au <strong>bon endroit</strong>.<br/> Le premier transfert s'occupera de copier le tableau de vertices dans la mémoire vidéo à partir de la case <strong>0</strong> :</p><pre id="r-964230" data-claire-element-id="964230"><code data-claire-semantic="cpp">// Transfert des vertices

glBufferSubData(GL_ARRAY_BUFFER, 0, m_tailleVerticesBytes, m_vertices);</code></pre><p id="r-964231" data-claire-element-id="964231">Le second transfert s'occupera de copier le tableau de couleurs dans la mémoire vidéo juste après les vertices, soit à partir de la case <strong>tailleVerticesBytes</strong> :</p><pre id="r-964232" data-claire-element-id="964232"><code data-claire-semantic="cpp">// Transfert des couleurs

glBufferSubData(GL_ARRAY_BUFFER, m_tailleVerticesBytes, m_tailleCouleursBytes, m_couleurs);</code></pre><p id="r-964233" data-claire-element-id="964233">On fait un petit récapitulatif de la création d'un <strong>VBO</strong> :</p><pre id="r-964234" data-claire-element-id="964234"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Génération de l'ID

    glGenBuffers(1, &amp;m_vboID);


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Allocation de la mémoire vidéo

        glBufferData(GL_ARRAY_BUFFER, m_tailleVerticesBytes + m_tailleCouleursBytes, 0, GL_STATIC_DRAW);


        // Transfert des données

        glBufferSubData(GL_ARRAY_BUFFER, 0, m_tailleVerticesBytes, m_vertices);
        glBufferSubData(GL_ARRAY_BUFFER, m_tailleVerticesBytes, m_tailleCouleursBytes, m_couleurs);


    // Déverrouillage de l'objet

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><h3 id="r-eviter-les-fuites-de-memoire" data-claire-element-id="964253">Éviter les fuites de mémoire</h3><p id="r-964236" data-claire-element-id="964236">Si vous vous souvenez de ce que l'on a vu sur le changement de texture, vous vous souviendrez que nous avons ajouté une petite ligne de code au début de la méthode <strong>charger</strong>(). En effet, je vous avais parlé de ce qui se passait si on appelait deux fois cette méthode sur un même objet : cela entrainait une fuite de mémoire car le premier chargement était perdu dans la carte graphique.</p><p id="r-964237" data-claire-element-id="964237">Avec les <strong>VBO</strong>, nous avons le même problème : si on en charge un deux fois alors le premier chargement effectué sera perdu et les ressources seront considérées comme étant &quot;toujours utilisées&quot;. Pour éviter cette fuite de mémoire, nous allons faire la même chose que les textures en vérifiant d'une part si le <strong>VBO</strong> a déjà été chargé, puis en le en détruisant si c'est le cas. Le tout au début de la méthode <strong>charger</strong>() avant l'initialisation.</p><p id="r-964238" data-claire-element-id="964238">La fonction permettant de savoir si un <strong>VBO</strong> a déjà été chargé s'appelle <strong>glIsBuffer</strong>() :</p><pre id="r-964239" data-claire-element-id="964239"><code data-claire-semantic="cpp">GLboolean glIsBuffer(GLuint buffer);</code></pre><p id="r-964240" data-claire-element-id="964240">Elle ne prend en paramètre que l'identifiant à vérifier et renvoie la valeur <strong>GL_TRUE</strong> si le <strong>VBO</strong> a déjà été chargé ou <strong>GL_FALSE</strong> s'il ne l'a pas été.</p><p id="r-964241" data-claire-element-id="964241">La fonction de destruction quant à elle s'appelle <strong>glDeleteBuffers</strong>() :</p><pre id="r-964242" data-claire-element-id="964242"><code data-claire-semantic="cpp">void glDeleteBuffers(GLsizei number, const GLuint *buffers);</code></pre><ul id="r-964247" data-claire-element-id="964247"><li id="r-964244" data-claire-element-id="964244"><p id="r-964243" data-claire-element-id="964243"><strong>number</strong> : Le nombre d'ID à initialiser. Nous lui donnerons la valeur <strong>1</strong></p></li><li id="r-964246" data-claire-element-id="964246"><p id="r-964245" data-claire-element-id="964245"><strong>buffers</strong> : Un tableau de type <em><strong>GLuint</strong></em> ou l'adresse d'une variable <em><strong>GLuint</strong></em>. Nous lui donnerons l'ID du <strong>VBO</strong> à détruire.</p></li></ul><p id="r-964248" data-claire-element-id="964248">Nous appellerons ces deux fonctions dans un bloc <strong>if</strong> au début de la méthode <strong>charger</strong>() :</p><pre id="r-964249" data-claire-element-id="964249"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Destruction d'un éventuel ancien VBO

    if(glIsBuffer(m_vboID) == GL_TRUE)
        glDeleteBuffers(1, &amp;m_vboID);


    // Génération de l'ID

    glGenBuffers(1, &amp;m_vboID);

    
    ....
}</code></pre><p id="r-964250" data-claire-element-id="964250">Ce qui donne le code source définitif :</p><pre id="r-964251" data-claire-element-id="964251"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Destruction d'un éventuel ancien VBO

    if(glIsBuffer(m_vboID) == GL_TRUE)
        glDeleteBuffers(1, &amp;m_vboID);


    // Génération de l'ID

    glGenBuffers(1, &amp;m_vboID);


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Allocation de la mémoire vidéo

        glBufferData(GL_ARRAY_BUFFER, m_tailleVerticesBytes + m_tailleCouleursBytes, 0, GL_STATIC_DRAW);


        // Transfert des données

        glBufferSubData(GL_ARRAY_BUFFER, 0, m_tailleVerticesBytes, m_vertices);
        glBufferSubData(GL_ARRAY_BUFFER, m_tailleVerticesBytes, m_tailleCouleursBytes, m_couleurs);


    // Déverrouillage de l'objet

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><p id="r-964252" data-claire-element-id="964252">Notre premier <strong>VBO</strong> est prêt à l'emploi. :D</p><h2 id="r-le-destructeur-6" data-claire-element-id="964258">Le destructeur</h2><p id="r-964255" data-claire-element-id="964255">Encore une fois, tout comme les textures, les <strong>VBO</strong> doivent être détruits lorsque nous n'en avons plus besoin. Vu que nous sommes dans une classe, nous devons gérer cette destruction dans la méthode prévue pour ça : le destructeur.</p><p id="r-964256" data-claire-element-id="964256">Cette tâche se fait avec la fonction <strong>glDeleteBuffers</strong>() que nous avons vue précédemment. Nous l’appellerons dans le destructeur en lui donnant l'adresse de l'attribut <strong>m_vboID</strong> :</p><pre id="r-964257" data-claire-element-id="964257"><code data-claire-semantic="cpp">Cube::~Cube()
{
    // Destruction du VBO

    glDeleteBuffers(1, &amp;m_vboID);
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
<span class="arrow"></span>
<span class="next">C&#039;est quoi un VBO ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
<span class="next">Utilisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisation"></a><h2>Utilisation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
<span class="arrow"></span>
<span class="next">Création</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
<span class="next">Mise à jour des données</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-utilisation-d-un-vbo" data-claire-element-id="964297">Utilisation d'un VBO</h2><p id="r-964260" data-claire-element-id="964260">Maintenant que nous avons un <strong>VBO</strong> créé et initialisé, on ne va pas se priver du plaisir de l'utiliser dans nos programmes. :)</p><p id="r-964261" data-claire-element-id="964261">Pour utiliser un <strong>VBO</strong> on fait exactement la même chose qu'avec les textures. D'ailleurs, vous vous souvenez de ce qu'on doit faire pour envoyer une texture à OpenGL ?</p><p id="r-964262" data-claire-element-id="964262">....</p><p id="r-964263" data-claire-element-id="964263">On la verrouille !</p><p id="r-964264" data-claire-element-id="964264">On va faire exactement la même chose avec les <strong>VBO</strong>, pour les utiliser on va les verrouiller. Comme tous les objets OpenGL j'ai envie de dire. :p</p><div id="r-964266" data-claire-element-id="964266" data-claire-semantic="question"><p id="r-964265" data-claire-element-id="964265">Ok mais euh ... On le verrouille où ?</p></div><p id="r-964267" data-claire-element-id="964267">Ah très bonne question. ^^</p><p id="r-964268" data-claire-element-id="964268">Jusqu'à ce chapitre, pour afficher un modèle 3D nous devions envoyer les données à l'aide de la fonction <strong>glVertexAttribPointer</strong>() puis nous affichions le tout avec la fonction <strong>glDrawArrays</strong>(). Nous continuerons à procéder ainsi sauf que nous ajouterons le verrouillage du <strong>VBO</strong> juste avant la fonction <strong>glVertexAttribPointer</strong>().</p><p id="r-964269" data-claire-element-id="964269">En effet même si les données se trouvent dans la mémoire vidéo, OpenGL ne sait pas où elles se situent exactement, c'est à nous de lui dire. Pour ça, on va toujours utiliser la fonction <strong>glVertexAttribPointer</strong>() sauf qu'on va modifier son dernier paramètre. Je vous redonne son prototype pour que vous visualisiez le paramètre en question :</p><pre id="r-964270" data-claire-element-id="964270"><code data-claire-semantic="cpp">void glVertexAttribPointer(GLuint index, GLuint size, GLenum type, GLboolean normalized, GLsizei stride, const GLvoid *pointer);</code></pre><p id="r-964271" data-claire-element-id="964271">Le paramètre <strong>pointer</strong> permet à OpenGL de savoir où se trouvent nos données (vertices et toute la clique je le rappelle). Avant nous donnions directement les tableaux à ce paramètre, ils étaient stockés dans la RAM ça ne posait pas de problème. Mais maintenant nous devons lui donner l'adresse des tableaux à l'intérieur de la mémoire vidéo.</p><figure id="r-964273" data-claire-element-id="964274"><img id="r-964272" data-claire-element-id="964272" src="medias/uploads.siteduzero.com_files_416001_417000_416611.png" alt="Image utilisateur"/></figure><p id="r-964275" data-claire-element-id="964275">Lorsque le <strong>VBO</strong> est verrouillé, OpenGL sait qu'il doit aller chercher les données dans la plage mémoire qui lui est consacrée. A partir de maintenant, le paramètre <strong>pointer</strong> n'attend plus un tableau mais un <strong>offset</strong>.</p><p id="r-964276" data-claire-element-id="964276"><strong>Offset</strong> ça ne vous rappelle pas un paramètre ? C'est celui de la fonction <strong>glBufferSubData</strong>(), il représente la case (le <em><strong>décalage</strong></em> en mémoire) où le transfert doit commencer.<br/> Et bien c'est justement ce qu'attend OpenGL maintenant. Nous lui donnerons donc l'<em><strong>offset</strong></em> correspondant aux tableaux de données dans la mémoire vidéo.</p><p id="r-964277" data-claire-element-id="964277">Pour les vertices, cet offset sera de <strong>0</strong> car ils se situent au début de la zone mémoire. <br/> Pour les couleurs, cet offset sera égal à l'attribut <strong>m_tailleVerticesBytes</strong> car elles sont situées juste après les vertices dans la zone mémoire.</p><p id="r-964278" data-claire-element-id="964278">L'appel à la fonction <strong>glVertexAttribPointer</strong>() devient donc :</p><pre id="r-964279" data-claire-element-id="964279"><code data-claire-semantic="cpp">// Verrouillage du VBO

glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


    // Accès aux vertices dans la mémoire vidéo

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);
    glEnableVertexAttribArray(0);


    // Accès aux couleurs dans la mémoire vidéo

    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, m_tailleVerticesBytes);
    glEnableVertexAttribArray(1);


// Déverrouillage du VBO

glBindBuffer(GL_ARRAY_BUFFER, 0);</code></pre><p id="r-964280" data-claire-element-id="964280">Au niveau de la méthode <strong>afficher</strong>(), ça donnerait ceci :</p><pre id="r-964281" data-claire-element-id="964281"><code data-claire-semantic="cpp">void Cube::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Verrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


            // Accès aux vertices dans la mémoire vidéo

            glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);
            glEnableVertexAttribArray(0);


            // Accès aux couleurs dans la mémoire vidéo

            glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, m_tailleVerticesBytes);
            glEnableVertexAttribArray(1);


        // Déverrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, 0);


        ....


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><p id="r-964282" data-claire-element-id="964282">Techniquement, on ne peut pas compiler ce code car le paramètre <strong>pointer</strong> attend un décalage (représenté par une adresse et non une variable). Or nous, nous lui donnons une variable de type <em><strong>integer</strong></em>. Alors bon, pour le <strong>0</strong> ça passe encore mais pour <strong>tailleVerticesBytes</strong> notre compilateur va nous râler dessus. :lol:</p><p id="r-964283" data-claire-element-id="964283">Pour utiliser les variables <strong>tailleXXX</strong> en décalage, OpenGL nous demande de les encadrer avec la macro suivante :</p><pre id="r-964284" data-claire-element-id="964284"><code data-claire-semantic="cpp">// Macro utile au VBO

#ifndef BUFFER_OFFSET

    #define BUFFER_OFFSET(offset) ((char*)NULL + (offset))

#endif</code></pre><p id="r-964285" data-claire-element-id="964285">Ce code permet de spécifier un décalage <em><strong>offset</strong></em> en partant de l'adresse <em><strong>NULL</strong></em> (ou <strong>0</strong>) qui indique le début du <strong>VBO</strong>. Le mot-clef <em><strong>char</strong></em> permet simplement de faire le lien avec les bytes, je vous rappelle que les variables de type <em><strong>char</strong></em> sont codées sur <strong>1</strong> byte. ;)</p><aside id="r-964287" data-claire-element-id="964287" data-claire-semantic="information"><p id="r-964286" data-claire-element-id="964286">Pensez à inclure ce code dans chaque fichier où vous utiliserez les <strong>VBO</strong>.</p></aside><p id="r-964288" data-claire-element-id="964288">En utilisant cette macro, le compilateur comprend bien qu'on veut lui envoyer une adresse à l'aide d'une variable. Nous encadrons donc le paramètre <strong>pointer</strong> par <strong>BUFFER_OFFSET</strong>() :</p><pre id="r-964289" data-claire-element-id="964289"><code data-claire-semantic="cpp">// Verrouillage du VBO

glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


    // Accès aux vertices dans la mémoire vidéo

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
    glEnableVertexAttribArray(0);


    // Accès aux couleurs dans la mémoire vidéo

    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
    glEnableVertexAttribArray(1);


// Déverrouillage du VBO

glBindBuffer(GL_ARRAY_BUFFER, 0);</code></pre><p id="r-964290" data-claire-element-id="964290">Petit point important avant de compiler tout ça, faites attention à bien appeler la méthode <strong>charger</strong>() au moment de créer votre cube. Si vous ne le faites pas, votre application va joliment planter devant vos yeux ébahies. ^^</p><pre id="r-964291" data-claire-element-id="964291"><code data-claire-semantic="cpp">// Déclaration d'un objet Cube

Cube cube(2.0, &quot;Shaders/couleur3D.vert&quot;, &quot;Shaders/couleur3D.frag&quot;);
cube.charger();</code></pre><p id="r-964292" data-claire-element-id="964292">Cette fois, vous pouvez compiler tranquillement.</p><figure id="r-964294" data-claire-element-id="964295"><img id="r-964293" data-claire-element-id="964293" src="medias/uploads.siteduzero.com_files_416001_417000_416612.png" alt="Image utilisateur"/></figure><p id="r-964296" data-claire-element-id="964296">Vous avez le même rendu qu'avant sauf que maintenant OpenGL ne fait plus d'aller-retours pour chercher les données dans la RAM. Tout se trouve déjà dans la carte graphique et ça lui fait gagner du temps. :)</p><h2 id="r-utilisation-de-plusieurs-vbo" data-claire-element-id="964305">Utilisation de plusieurs VBO</h2><p id="r-964298" data-claire-element-id="964298">On termine cette sous-partie avec une petite problématique ? Comment je fais si je veux utiliser plusieurs <strong>VBO</strong> pour afficher quelque chose ?</p><p id="r-964299" data-claire-element-id="964299">En temps normal, je vous dirais qu'il est inutile d'en utiliser plusieurs pour afficher un unique modèle, un seul fait parfaitement l'affaire. Cependant, il existe des cas où il est utile de séparer les données dans plusieurs <strong>VBO</strong>, en général ce sera pour faire de l'optimisation.</p><p id="r-964300" data-claire-element-id="964300">Si ça vous arrive un jour, sachez qu'il suffit simplement de verrouiller le premier <strong>VBO</strong> avant votre premier envoi de données, puis de verrouiller le deuxième avec le deuxième envoi, et ainsi de suite :</p><pre id="r-964301" data-claire-element-id="964301"><code data-claire-semantic="cpp">// Accès au premier VBO

glBindBuffer(GL_ARRAY_BUFFER, premierVBO);

    // Accès à la mémoire vidéo

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
    glEnableVertexAttribArray(0);


// Déverrouillage du VBO

glBindBuffer(GL_ARRAY_BUFFER, 0);



// Accès au deuxième VBO

glBindBuffer(GL_ARRAY_BUFFER, deuxiemeVBO);

    // Accès à la mémoire vidéo

    glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
    glEnableVertexAttribArray(2);


// Déverrouillage du VBO

glBindBuffer(GL_ARRAY_BUFFER, 0);</code></pre><p id="r-964302" data-claire-element-id="964302">Petit info au passage, si vous enchainez <strong>plusieurs verrouillages</strong> sur des <strong>objets OpenGL de même type</strong> (et j'insiste bien dessus) alors vous n'êtes pas obligés de tous les déverrouiller à chaque fois, ils le seront automatiquement. Seul le <strong>dernier</strong> déverrouillage est important.</p><p id="r-964303" data-claire-element-id="964303">On peut donc enlever le déverrouillage du premier objet dans ce cas :</p><pre id="r-964304" data-claire-element-id="964304"><code data-claire-semantic="cpp">// Accès au premier VBO

glBindBuffer(GL_ARRAY_BUFFER, premierVBO);

    // Accès à la mémoire vidéo

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
    glEnableVertexAttribArray(0);


// Accès au deuxième VBO

glBindBuffer(GL_ARRAY_BUFFER, deuxiemeVBO);

    // Accès à la mémoire vidéo

    glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
    glEnableVertexAttribArray(2);


// Déverrouillage du VBO

glBindBuffer(GL_ARRAY_BUFFER, 0);</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
<span class="arrow"></span>
<span class="next">Création</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
<span class="next">Mise à jour des données</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Misejourdesdonnes"></a><h2>Mise à jour des données</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
<span class="arrow"></span>
<span class="next">Utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
<span class="next">Un autre exemple</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-la-methode-updatevbo" data-claire-element-id="964383">La méthode updateVBO()</h2><h3 id="r-pourquoi-mettre-a-jour-les-donnees" data-claire-element-id="964320">Pourquoi mettre à jour les données ?</h3><p id="r-964307" data-claire-element-id="964307">Transférer les données dans la carte graphique c'est bien, mais les mettre à jour quand un objet bouge c'est quand même mieux. :p</p><p id="r-964308" data-claire-element-id="964308">Notre caisse n'en a pas vraiment besoin car elle ne bouge pas. Mais lorsque nous animerons des personnages, il faudra bien mettre à jour leurs vertices pour voir leurs déplacements.</p><p id="r-964309" data-claire-element-id="964309">La modification de données dans la mémoire vidéo se fait un peu comme l'écriture de texte dans un fichier. <br/> Avec les fichiers, on commence par en ouvrir un avec un mode d'accès (lecture, écriture ou les deux), puis on écrit les données, et une fois qu'on a fini on ferme le fichier.</p><p id="r-964310" data-claire-element-id="964310">Avec les <strong>VBO</strong> c'est un peu la même chose, on va commencer par récupérer l'espace mémoire qu'on a allouée, puis on écrira les données à l'intérieur et enfin on fermera l'accès à la zone mémoire.<br/> La seule véritable différence avec les fichiers c'est que les <strong>VBO</strong> il faut les verrouiller. ;)</p><p id="r-964311" data-claire-element-id="964311">Pour concrétiser ce qu'on va voir sur ça, nous allons coder une méthode qui nous permettra de mettre à jour nos données. Celle-ci s’appellera <strong>updateVBO</strong>() :</p><pre id="r-964312" data-claire-element-id="964312"><code data-claire-semantic="cpp">void updateVBO(void *donnees, int tailleBytes, int decalage);</code></pre><ul id="r-964319" data-claire-element-id="964319"><li id="r-964314" data-claire-element-id="964314"><p id="r-964313" data-claire-element-id="964313"><strong>donnees</strong> : Un pointeur sur les données à envoyer, comme un tableau par exemple. Il est de type <em><strong>void*</strong></em> car on ne connaitra pas forcement le type de donnée que l'on enverra</p></li><li id="r-964316" data-claire-element-id="964316"><p id="r-964315" data-claire-element-id="964315"><strong>tailleByes</strong> : La taille en bytes des données</p></li><li id="r-964318" data-claire-element-id="964318"><p id="r-964317" data-claire-element-id="964317"><strong>decalage</strong> : Le décalage en mémoire où commencer la copie, nous allons voir ça un peu plus bas</p></li></ul><h3 id="r-le-code-4" data-claire-element-id="964382">Le code</h3><p id="r-964321" data-claire-element-id="964321">Pour accéder à la mémoire vidéo, nous devons utiliser une fonction qui permet de retourner un pointeur un peu spéciale. Celui-ci forme en quelque sorte une <em>passerelle</em> entre le <strong>VBO</strong> et la <strong>RAM</strong>. Grâce à lui, nous pourrons accéder aux données de la mémoire vidéo comme s'il s'agissait de données présentes dans la <strong>RAM</strong>.</p><p id="r-964322" data-claire-element-id="964322">La fonction en question s’appelle <strong>glMapBuffer</strong>().</p><pre id="r-964323" data-claire-element-id="964323"><code data-claire-semantic="cpp">void* glMapBuffer(GLenum target, GLenum access);</code></pre><ul id="r-964328" data-claire-element-id="964328"><li id="r-964325" data-claire-element-id="964325"><p id="r-964324" data-claire-element-id="964324"><strong>target</strong> : Toujours le même, on lui donne la valeur <strong>GL_ARRAY_BUFFER</strong></p></li><li id="r-964327" data-claire-element-id="964327"><p id="r-964326" data-claire-element-id="964326"><strong>mode</strong> : Mode d'accès aux données du <strong>VBO</strong> (lecture, écriture ou les deux)</p></li></ul><p id="r-964329" data-claire-element-id="964329">Contrairement à ce qu'on pourrait penser, la fonction renvoie bien quelque chose. L'utilisation du type <em><strong>void*</strong></em> permet de spécifier un pointeur. Un pointeur qui, ici, forme la passerelle dont nous avons parlée à l'instant.</p><p id="r-964330" data-claire-element-id="964330">Le paramètre <strong>mode</strong> peut prendre 3 valeurs :</p><ul id="r-964337" data-claire-element-id="964337"><li id="r-964332" data-claire-element-id="964332"><p id="r-964331" data-claire-element-id="964331"><strong>GL_READ_ONLY</strong> : Lecture seulement</p></li><li id="r-964334" data-claire-element-id="964334"><p id="r-964333" data-claire-element-id="964333"><strong>GL_WRITE_ONLY</strong> : Écriture seulement</p></li><li id="r-964336" data-claire-element-id="964336"><p id="r-964335" data-claire-element-id="964335"><strong>GL_READ_WRITE</strong> : Lecture et écriture</p></li></ul><p id="r-964338" data-claire-element-id="964338">Dans la plupart des cas, nous utiliserons la deuxième valeur car on ne fera que transférer des données, pas besoin de lecture dans ce cas. :)</p><p id="r-964339" data-claire-element-id="964339">Ainsi, pour mettre à jour les informations contenues dans un <strong>VBO</strong> on commence par le verrouiller puis on récupère l'adresse de sa zone mémoire :</p><pre id="r-964340" data-claire-element-id="964340"><code data-claire-semantic="cpp">void Cube::updateVBO(void *donnees, int tailleBytes, int decalage)
{
    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Récupération de l'adresse du VBO

        void *adresseVBO = glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY);


    // Déverrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><p id="r-964341" data-claire-element-id="964341">Il peut arriver que la récupération de l'adresse échoue, ce n'est pas très courant mais ça peut arriver.</p><p id="r-964342" data-claire-element-id="964342">Si c'est le cas alors la fonction <strong>glMapBuffer</strong>() renvoie un pointeur <strong>NULL</strong>, il faut donc vérifier sa valeur avant de continuer. Si elle est nulle, alors on déverrouille le <strong>VBO</strong> et on annule le transfert. S'il n'y a aucune erreur on peut continuer :</p><pre id="r-964343" data-claire-element-id="964343"><code data-claire-semantic="cpp">void Cube::updateVBO(void *donnees, int tailleBytes, int decalage)
{
    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Récupération de l'adresse du VBO

        void *adresseVBO = glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY);


        // Si l'adresse retournée est nulle alors on arrête le transfert

        if(adresseVBO == NULL)
        {
            std::cout &lt;&lt; &quot;Erreur au niveau de la récupération du VBO&quot; &lt;&lt; std::endl;
            glBindBuffer(GL_ARRAY_BUFFER, 0);

            return; 
        }


    // Déverrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><p id="r-964344" data-claire-element-id="964344">Une fois notre adresse trouvée et validée nous pouvons commencer le transfert, et comme d'habitude avec les <strong>VBO</strong> les transferts se font en bytes. Le seul problème ici, c'est qu'on n'a pas de fonction OpenGL pour mettre à jour nos données, il va falloir le faire par nous-même avec comme seul outil l'adresse de destination dans la mémoire vidéo.</p><p id="r-964345" data-claire-element-id="964345">Heureusement pour nous, nous n'aurons pas à faire ça à la main. Il existe une fonction <strong>C</strong> (oui oui <strong>C</strong> pas <strong>C++</strong>) qui permet de copier tout un tas de bytes d'un coup. Cette fonction s'appelle <strong>memcpy</strong>() :</p><pre id="r-964346" data-claire-element-id="964346"><code data-claire-semantic="cpp">void* memcpy(void *destination, const void *source, size_t num);</code></pre><ul id="r-964353" data-claire-element-id="964353"><li id="r-964348" data-claire-element-id="964348"><p id="r-964347" data-claire-element-id="964347"><strong>destination</strong> : L'adresse où on écrira les données, ici ce sera l'adresse mémoire que l'on a récupérée</p></li><li id="r-964350" data-claire-element-id="964350"><p id="r-964349" data-claire-element-id="964349"><strong>source</strong> : La source de données, ici ce sera les tableaux de vertices et de coordonnées de texture</p></li><li id="r-964352" data-claire-element-id="964352"><p id="r-964351" data-claire-element-id="964351"><strong>num</strong> : La taille des données à copier (en bytes), c'est la même chose que le paramètre <strong>size</strong> de la fonction <strong>glBufferSubData</strong>()</p></li></ul><aside id="r-964355" data-claire-element-id="964355" data-claire-semantic="information"><p id="r-964354" data-claire-element-id="964354">Vous devez inclure l’en-tête <strong>cstring</strong> et je dis bien <strong>cstring</strong> pour pouvoir utiliser cette fonction.</p></aside><p id="r-964356" data-claire-element-id="964356">Le seul problème avec cette fonction, c'est qu'elle ne prend pas en compte le <em>décalage</em> dans une zone mémoire, elle n'est capable d'écrire qu'à partir du début.</p><p id="r-964357" data-claire-element-id="964357">Pour contourner ceci, nous allons reprendre la macro <strong>BUFFER_OFFSET</strong>() que nous utilisons pour l'affichage :</p><pre id="r-964358" data-claire-element-id="964358"><code data-claire-semantic="cpp">// Macro utile au VBO

#ifndef BUFFER_OFFSET

    #define BUFFER_OFFSET(offset) ((char*)NULL + (offset))

#endif</code></pre><p id="r-964359" data-claire-element-id="964359">Le code qui nous intéresse ici c'est la définition de la macro :</p><pre id="r-964360" data-claire-element-id="964360"><code data-claire-semantic="cpp">(char*)NULL + (offset)</code></pre><p id="r-964361" data-claire-element-id="964361">Ce code permet de spécifier un décalage <em><strong>offset</strong></em> à partir de l'adresse <strong>NULL</strong>. Ce que nous voulons nous, c'est spécifier un décalage à partir de l'adresse <strong>adresseVBO</strong>.</p><p id="r-964362" data-claire-element-id="964362">Pour ce faire, nous devons simplement remplacer le mot-clef <strong>NULL</strong> par le pointeur <strong>adresseVBO</strong> et l'<em><strong>offset</strong></em> par la variable <strong>decalage</strong> :</p><pre id="r-964363" data-claire-element-id="964363"><code data-claire-semantic="cpp">(char*)adresseVBO + decalage</code></pre><p id="r-964364" data-claire-element-id="964364">Simple n'est-ce pas ? :)</p><p id="r-964365" data-claire-element-id="964365">Alors bon, nous n'allons pas recréer une macro pour ça, ce ne serait pas utile et ça alourdirait le header. A la place, nous allons juste donner ce code au paramètre <strong>destination</strong> de la fonction <strong>memcpy</strong>(). Quant aux autres, nous leur donnerons en valeur la taille des données à copier et le pointeur source.</p><p id="r-964366" data-claire-element-id="964366">L'appel à la fonction ressemblera au final à ceci :</p><pre id="r-964367" data-claire-element-id="964367"><code data-claire-semantic="cpp">// Mise à jour des données

memcpy((char*)adresseVBO + decalage, donnees, tailleBytes);</code></pre><p id="r-964368" data-claire-element-id="964368">Avec ça, nous pouvons mettre à jour n'importe quel <strong>VBO</strong>.</p><p id="r-964369" data-claire-element-id="964369">Il ne manque plus qu'une seule chose à faire. Pour sécuriser le <strong>VBO</strong>, il faut invalider le pointeur retourné par <strong>glMapBuffer</strong>(). Si on ne le fait pas il y a un risque d'écraser les données présentes à l'intérieur, on peut se retrouver avec un magnifique bug d'affichage avec ça. :lol:</p><p id="r-964370" data-claire-element-id="964370">La fonction permettant d'invalider ce pointeur s'appelle <strong>glUnmapBuffer</strong>() :</p><pre id="r-964371" data-claire-element-id="964371"><code data-claire-semantic="cpp">GLboolean glUnmapBuffer(GLenum target);</code></pre><ul id="r-964374" data-claire-element-id="964374"><li id="r-964373" data-claire-element-id="964373"><p id="r-964372" data-claire-element-id="964372"><strong>target</strong> : Encore celui-là. :p On lui donnera comme d'hab la valeur <strong>GL_ARRAY_BUFFER</strong></p></li></ul><p id="r-964375" data-claire-element-id="964375">La fonction renvoie un <em><strong>GLboolean</strong></em> pour savoir si tout s'est bien passé.</p><p id="r-964376" data-claire-element-id="964376">On l'appelle juste après les transferts précédents. On en profite au passage pour affecter la valeur <strong>0</strong> au pointeur pour une double sécurisation :</p><pre id="r-964377" data-claire-element-id="964377"><code data-claire-semantic="cpp">// Annulation du pointeur

glUnmapBuffer(GL_ARRAY_BUFFER);
adresseVBO = 0;</code></pre><p id="r-964378" data-claire-element-id="964378">Si on récapitule tout ça, on a un beau code de mise à jour de <strong>VBO</strong> :</p><pre id="r-964379" data-claire-element-id="964379"><code data-claire-semantic="cpp">void Cube::updateVBO(void *donnees, int tailleBytes, int decalage)
{
    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Récupération de l'adresse du VBO

        void *adresseVBO = glMapBuffer(GL_ARRAY_BUFFER, GL_WRITE_ONLY);


        // Si l'adresse retournée est nulle alors on arrête le transfert

        if(adresseVBO == NULL)
        {
            std::cout &lt;&lt; &quot;Erreur au niveau de la récupération du VBO&quot; &lt;&lt; std::endl;
            glBindBuffer(GL_ARRAY_BUFFER, 0);

            return; 
        }


        // Mise à jour des données

        memcpy((char*)adresseVBO + decalage, donnees, tailleBytes);


        // Annulation du pointeur

        glUnmapBuffer(GL_ARRAY_BUFFER);
        adresseVBO = 0;


    // Déverrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><p id="r-964380" data-claire-element-id="964380">L'avantage avec cette méthode, c'est qu'elle n'aura pas besoin d'être réécrite dans les classes filles, elle est universelle. :)</p><p id="r-964381" data-claire-element-id="964381">D'ailleurs, comme promis au début du chapitre, nous allons maintenant passer à la gestion du VBO dans la classe fille Caisse.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
<span class="arrow"></span>
<span class="next">Utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
<span class="next">Un autre exemple</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unautreexemple"></a><h2>Un autre exemple</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
<span class="arrow"></span>
<span class="next">Mise à jour des données</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">
<span class="next">Les Vertex Array Objects</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-le-header-10" data-claire-element-id="964392">Le header</h2><p id="r-964385" data-claire-element-id="964385">Comme promis, nous nous occupons maintenant de l'implémentation des <strong>VBO</strong> dans la classe <em><strong>Caisse</strong></em>. Il n'y aura rien de nouveau à apprendre, nous connaissons déjà tout. :p Le seul point auquel il faudra faire attention est le fait qu'elle hérite déjà des attributs de sa classe mère.</p><p id="r-964386" data-claire-element-id="964386">Ainsi, nous ne devrons pas redéclarer une variable <em><strong>GLuint</strong></em> pour le <strong>VBO</strong> car nous héritons naturellement de celui de la classe <em><strong>Cube</strong></em>. Même chose pour la taille du tableau de vertices en bytes.</p><p id="r-964387" data-claire-element-id="964387">En revanche, nous devrons déclarer une variable <strong>m_tailleCoordTextureBytes</strong> car nous en aurons besoin pour définir la taille de la mémoire à allouer. En effet, nous n'enverrons pas des couleurs mais des coordonnées de texture, il faudra donc utiliser une autre variable. Nous devrons par ailleurs redéfinir la méthode <strong>charger</strong>() pour les envoyer à la place des couleurs.</p><p id="r-964388" data-claire-element-id="964388">Au final, on commence par déclarer, dans le header de la classe <em><strong>Caisse</strong></em>, une variable <strong>m_tailleCoordTextureBytes</strong> de type <em><strong>int</strong></em> :</p><pre id="r-964389" data-claire-element-id="964389"><code data-claire-semantic="cpp">#ifndef DEF_CAISSE
#define DEF_CAISSE


// Includes

....


// Classe Caisse

class Caisse : public Cube
{
    public:

    Caisse(float taille, std::string const vertexShader, std::string const fragmentShader, std::string const texture);
    ~Caisse();

    void afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview);


    private:

    Texture m_texture;
    float m_coordTexture[72];
    int m_tailleCoordTextureBytes;
};

#endif</code></pre><p id="r-964390" data-claire-element-id="964390">Une fois déclarée, nous l'initialisons dans le constructeur en lui donnant la taille du tableau de coordonnées de texture. Celui-ci fait <strong>72</strong> cases donc sa taille bytes fera <strong>72 * sizeof(float)</strong> :</p><pre id="r-964391" data-claire-element-id="964391"><code data-claire-semantic="cpp">Caisse::Caisse(float taille, std::string const vertexShader,std::string const fragmentShader, std::string const texture) : Cube(taille, vertexShader, fragmentShader), 
                                                                                                                           m_texture(texture), 
                                                                                                                           m_tailleCoordTextureBytes(72 * sizeof(float))
{
    // Initialisation

    ....
}</code></pre><h2 id="r-la-methode-charger-2" data-claire-element-id="964414">La méthode charger()</h2><p id="r-964393" data-claire-element-id="964393">La méthode <strong>charger</strong>() ne va pas beaucoup changer par rapport à son parent. En fait, nous avons juste à modifier les attributs utilisés pour définir la taille du <strong>VBO</strong>. Son prototype sera aussi le même :</p><pre id="r-964394" data-claire-element-id="964394"><code data-claire-semantic="cpp">void charger();</code></pre><p id="r-964395" data-claire-element-id="964395">Pour son implémentation, nous n'allons pas nous prendre la tête et recopier simplement tout le contenu de la méthode <strong>charger</strong>() précédente. :p Il faudra évidemment faire des petites modifications ensuite mais au moins, nous aurons déjà le plus gros du code.</p><p id="r-964396" data-claire-element-id="964396">En copiant ce contenu, on se retrouve avec la méthode suivante :</p><pre id="r-964397" data-claire-element-id="964397"><code data-claire-semantic="cpp">void Caisse::charger()
{
    // Destruction d'un éventuel ancien VBO

    if(glIsBuffer(m_vboID) == GL_TRUE)
        glDeleteBuffers(1, &amp;m_vboID);


    // Génération de l'ID

    glGenBuffers(1, &amp;m_vboID);


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Allocation de la mémoire vidéo

        glBufferData(GL_ARRAY_BUFFER, m_tailleVerticesBytes + m_tailleCouleursBytes, 0, GL_STATIC_DRAW);


        // Transfert des données

        glBufferSubData(GL_ARRAY_BUFFER, 0, m_tailleVerticesBytes, m_vertices);
        glBufferSubData(GL_ARRAY_BUFFER, m_tailleVerticesBytes, m_tailleCouleursBytes, m_couleurs);


    // Déverrouillage de l'objet

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><p id="r-964398" data-claire-element-id="964398">Ce qu'il faut modifier ici ce sont les appels aux fonctions <strong>glBufferData</strong>() et <strong>glBufferSubData</strong>().</p><p id="r-964399" data-claire-element-id="964399">Nous savons que la première des deux permet d'allouer une zone mémoire dans la carte graphique pour le <strong>VBO</strong>. Elle a besoin de connaitre la taille de la mémoire qu'elle doit allouer. Nous devons, ici, lui donner le résultat de l'addition de la taille des vertices et des coordonnées de texture. Nous utiliserons pour cela les attributs :</p><ul id="r-964404" data-claire-element-id="964404"><li id="r-964401" data-claire-element-id="964401"><p id="r-964400" data-claire-element-id="964400"><strong>m_tailleVerticesBytes</strong> (qui est héritée)</p></li><li id="r-964403" data-claire-element-id="964403"><p id="r-964402" data-claire-element-id="964402"><strong>m_tailleCoordTextureBytes</strong> (que nous avons créée il y a quelques instants)</p></li></ul><p id="r-964405" data-claire-element-id="964405">Les autres paramètres eux ne changent pas :</p><pre id="r-964406" data-claire-element-id="964406"><code data-claire-semantic="cpp">// Allocation de la mémoire vidéo

glBufferData(GL_ARRAY_BUFFER, m_tailleVerticesBytes + m_tailleCoordTextureBytes, 0, GL_STATIC_DRAW);</code></pre><p id="r-964407" data-claire-element-id="964407">La fonction <strong>glBufferSubData</strong>(), quant à elle, permet de les remplir le <strong>VBO</strong> avec les données que l'on veut envoyer. Nous l'appelons deux de façon à envoyer les vertices d'une part et les coordonnées de texture de l'autre.</p><pre id="r-964408" data-claire-element-id="964408"><code data-claire-semantic="cpp">// Transfert des coordonnées de texture

glBufferSubData(GL_ARRAY_BUFFER, m_tailleVerticesBytes, m_tailleCoordTextureBytes, m_coordTexture);</code></pre><p id="r-964409" data-claire-element-id="964409">Vu que les coordonnées de texture se trouvent juste après les vertices dans la mémoire, nous devons donc laisser le paramètre <strong>offset</strong> (le deuxième de la fonction) à la case <strong>m_tailleVerticesBytes</strong>.</p><p id="r-964410" data-claire-element-id="964410">La méthode <strong>charger</strong>() ressemble au final à ceci :</p><pre id="r-964411" data-claire-element-id="964411"><code data-claire-semantic="cpp">void Caisse::charger()
{
    // Destruction d'un éventuel ancien VBO

    if(glIsBuffer(m_vboID) == GL_TRUE)
        glDeleteBuffers(1, &amp;m_vboID);


    // Génération de l'ID

    glGenBuffers(1, &amp;m_vboID);


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Allocation de la mémoire vidéo

        glBufferData(GL_ARRAY_BUFFER, m_tailleVerticesBytes + m_tailleCoordTextureBytes, 0, GL_STATIC_DRAW);


        // Transfert des données

        glBufferSubData(GL_ARRAY_BUFFER, 0, m_tailleVerticesBytes, m_vertices);
        glBufferSubData(GL_ARRAY_BUFFER, m_tailleVerticesBytes, m_tailleCoordTextureBytes, m_coordTexture);


    // Déverrouillage de l'objet

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><p id="r-964412" data-claire-element-id="964412">N'oubliez pas d'appeler cette méthode lorsque vous souhaitez créer une caisse :</p><pre id="r-964413" data-claire-element-id="964413"><code data-claire-semantic="cpp">// Objet Caisse

Caisse caisse(2.0, &quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Caisse2.jpg&quot;);
caisse.charger();</code></pre><h2 id="r-la-methode-afficher-5" data-claire-element-id="964435">La méthode afficher()</h2><p id="r-964415" data-claire-element-id="964415">La méthode <strong>afficher</strong>() est plus simple à modifier que la précédente car il suffit juste de verrouiller le <strong>VBO</strong> et utiliser la macro <strong>BUFFER_OFFSET</strong>().</p><p id="r-964416" data-claire-element-id="964416">On commence donc par encadrer le code relatif aux tableaux <strong>Vertex Attrib</strong> par la fonction de verrouillage <strong>glBindBuffer</strong>() :</p><pre id="r-964417" data-claire-element-id="964417"><code data-claire-semantic="cpp">void Caisse::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Verrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


            // Accès aux vertices dans la mémoire vidéo

            glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, m_vertices);
            glEnableVertexAttribArray(0);


            // Envoi des coordonnées de texture

            glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, m_coordTexture);
            glEnableVertexAttribArray(2);


        // Déverrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, 0);


        ....


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><p id="r-964418" data-claire-element-id="964418">Ensuite, on modifie le paramètre <strong>pointer</strong> pour utiliser la macro avec le bon décalage. Pour l'envoi des vertices, on lui donnera la valeur <strong>0</strong> vu qu'ils se trouvent au début de la zone mémoire :</p><pre id="r-964419" data-claire-element-id="964419"><code data-claire-semantic="cpp">// Accès aux vertices dans la mémoire vidéo

glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
glEnableVertexAttribArray(0);</code></pre><p id="r-964420" data-claire-element-id="964420">Les coordonnées de texture, quant à elles, sont situées après les vertices dans la mémoire. On peut représenter cette situation par un schéma :</p><figure id="r-964422" data-claire-element-id="964423"><img id="r-964421" data-claire-element-id="964421" src="medias/uploads.siteduzero.com_files_420001_421000_420488.png" alt="Image utilisateur"/></figure><p id="r-964424" data-claire-element-id="964424">Il faut donc utiliser la case &quot;<em><strong>tailleVerticesBytes</strong></em>&quot; représentée par l'attribut <strong>m_tailleVerticesBytes</strong> afin d'accéder aux coordonnées de texture. C'est donc cet attribut qu'il faut donner à la macro pour trouver le début des coordonnées de texture :</p><pre id="r-964425" data-claire-element-id="964425"><code data-claire-semantic="cpp">// Accès aux coordonnées de texture dans la mémoire vidéo

glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
glEnableVertexAttribArray(2);</code></pre><p id="r-964426" data-claire-element-id="964426">Avec ces modifications, la méthode <strong>afficher</strong>() devient :</p><pre id="r-964427" data-claire-element-id="964427"><code data-claire-semantic="cpp">void Caisse::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Verrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


            // Envoi des vertices

            glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
            glEnableVertexAttribArray(0);


            // Envoi des coordonnées de texture

            glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
            glEnableVertexAttribArray(2);


        // Déverrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, 0);


        // Envoi des matrices

        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


        // Verrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, m_texture.getID());


        // Rendu

        glDrawArrays(GL_TRIANGLES, 0, 36);


        // Déverrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, 0);


        // Désactivation des tableaux

        glDisableVertexAttribArray(2);
        glDisableVertexAttribArray(0);


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><p id="r-964428" data-claire-element-id="964428">Vous pouvez compiler pour admirer votre caisse chargée directement depuis votre carte graphique. ;)</p><figure id="r-964430" data-claire-element-id="964431"><img id="r-964429" data-claire-element-id="964429" src="medias/uploads.siteduzero.com_files_420001_421000_420489.png" alt="Image utilisateur"/></figure><p id="r-964432" data-claire-element-id="964432"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/dbks9ky00fhen0l/Les Vertex Buffer Objects.zip?token_hash=AAHx_tkEzzEai2uwUonseOORCUQ3Ka95xux7Uel1Nj7RRw&amp;dl=1">Code Source C++ des Vertex Buffer Objects</a></strong></p><p id="r-964433" data-claire-element-id="964433">Dans ce chapitre, nous avons vu ce que sont les <strong>VBO</strong> et la manière dont ils fonctionnent. Ils permettent d'augmenter la vitesse de nos applications en évitant à <em><strong>OpenGL</strong></em> des transferts de données inutiles. Ils sont très utilisés dans toutes les applications un tant soit peu développées, ce qui en font donc des incontournables dans la programmation 3D. ;)</p><p id="r-964434" data-claire-element-id="964434">A partir de maintenant, nous utiliserons toujours les <strong>VBO</strong> dans nos codes sources. Après tout, la deuxième partie du tuto a pour but de nous aider à maitriser notre carte graphique. L'utilisation directe de la mémoire vidéo en est la première étape. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
<span class="arrow"></span>
<span class="next">Mise à jour des données</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">
<span class="next">Les Vertex Array Objects</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesVertexArrayObjects"></a><h2>Les Vertex Array Objects</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
<span class="arrow"></span>
<span class="next">Un autre exemple</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
<span class="next">Encore un objet OpenGL ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-964438" data-claire-element-id="964438">Nous avons vu dans le chapitre précédent comment utiliser directement la mémoire de notre carte graphique en y stockant les données de nos modèles 3D. Aujourd'hui, nous allons continuer sur cette lancée en stockant autre chose dans cette mémoire, ce qui permettra de faire gagner encore plus de temps à OpenGL. ^^</p><p id="r-964439" data-claire-element-id="964439">Ne pensez pas que l'on maltraite notre carte graphique en la sollicitant ainsi, elle est justement faite pour ça et préfère même gérer ces informations elle-même plutôt que de devoir aller les chercher dans la RAM.</p><p id="r-964440" data-claire-element-id="964440">Ce chapitre sera très court car il se rapproche beaucoup du précédent, vous n'allez pas être dépaysés. :p</p>
</div><a name="EncoreunobjetOpenGL"></a><h2>Encore un objet OpenGL ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">
<span class="arrow"></span>
<span class="next">Les Vertex Array Objects</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
<span class="next">Création et Utilisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-964441" data-claire-element-id="964441">Les <strong>Vertex Array Object</strong> (ou <strong>VAO</strong>) sont des objets OpenGL relativement proches des <strong>Vertex Buffer Object</strong> (<strong>VBO</strong>) et font donc à peu près la même chose : stocker des informations sur la carte graphique.</p><p id="r-964442" data-claire-element-id="964442">Avec les <strong>VBO</strong>, nous facilitons la vie à <em>OpenGL</em> en lui évitant des transferts de données inutiles avec la RAM. Nous lui donnons toutes nos données une seule fois pendant le chargement et nous n'en parlons plus.<br/> Avec les <strong>VAO</strong>, c'est un peu la même chose sauf que nous allons stocker des appels de fonctions.</p><div id="r-964444" data-claire-element-id="964444" data-claire-semantic="question"><p id="r-964443" data-claire-element-id="964443">Hein ? Ça veut dire qu'on va pouvoir stocker du code source dans la carte graphique ?</p></div><p id="r-964445" data-claire-element-id="964445">Alors oui et non. Nous n'allons pas lui envoyer directement du code, elle ne comprendrait pas et nous enverrait gentiment paitre. :-°</p><p id="r-964446" data-claire-element-id="964446">En fait, nous allons &quot;<em><strong>enregistrer</strong></em>&quot; certains appels de fonctions à l'intérieur de la carte graphique de façon à ce qu'<em>OpenGL</em> ne fasse pas des aller-retours répétitifs (à chaque frame donc 60 fois par seconde) avec l'application. Les appels concernés sont ceux qui s'occupent de l'envoi de données (vertices, ...) :</p><pre id="r-964447" data-claire-element-id="964447"><code data-claire-semantic="cpp">void Cube::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{

    .....


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Accès aux vertices dans la mémoire vidéo

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
        glEnableVertexAttribArray(0);


        // Accès aux couleurs dans la mémoire vidéo

        glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
        glEnableVertexAttribArray(1);


    // Déverrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, 0);


    .....
}</code></pre><p id="r-964448" data-claire-element-id="964448">Malgré l'utilisation l'utilisation des <strong>VBO</strong>, OpenGL fait toujours quelques aller-retours entre la carte graphique et l'application pour savoir où chercher les données. Certes, il n'y a plus le transfert de millions de données mais il y existe quand même des appels répétitifs qui ne font que spécifier un emplacement dans la mémoire vidéo.</p><figure id="r-964450" data-claire-element-id="964451"><img id="r-964449" data-claire-element-id="964449" src="medias/uploads.siteduzero.com_files_417001_418000_417552.png" alt="Image utilisateur"/></figure><p id="r-964452" data-claire-element-id="964452">Pour éviter ça, OpenGL propose d'utiliser les <strong>Vertex Array Objects</strong> pour enregistrer un petit bout de code dans la carte graphique, ce qui lui permet d'aller chercher ses données dans la mémoire vidéo sans avoir à demander à l'application où elles se trouvent.</p><figure id="r-964454" data-claire-element-id="964455"><img id="r-964453" data-claire-element-id="964453" src="medias/uploads.siteduzero.com_files_417001_418000_417553.png" alt="Image utilisateur"/></figure><figure id="r-964457" data-claire-element-id="964458"><img id="r-964456" data-claire-element-id="964456" src="medias/uploads.siteduzero.com_files_417001_418000_417554.png" alt="Image utilisateur"/></figure><p id="r-964459" data-claire-element-id="964459">Grâce aux <strong>VAO</strong>, OpenGL sait exactement où aller chercher ses données sans avoir à le mander à personne. Tout se passe directement dans la carte graphique. <br/> On ne sait pas vraiment ce qu'il se passe à l'intérieur des <strong>VAO</strong> et d'ailleurs on s'en moque on veut seulement que ça fonctionne, peu importe comment. :p <br/> Ceux qui connaissent <strong>OpenGL 2.1</strong> feront surement l'analogie avec les <strong><em>Display List</em></strong>, on peut dire que les <strong>VAO</strong> sont leurs petits frères.</p><p id="r-964460" data-claire-element-id="964460">Pour vous donner une petite info, l'utilisation combinée des <strong>VAO</strong> et des <strong>VBO</strong> nous permettra de passer à <strong><em>OpenGL 3.3</em></strong>. Dans la dernière partie de ce chapitre, nous modifierons notre contexte pour profiter de la dernière version d'<em><strong>OpenGL 3</strong></em>. :D <br/> Les Mac-Users sont eux-aussi concernés car vous pourrez utiliser directement <em><strong>OpenGL 3</strong></em> sur votre Mac, vous n'aurez plus besoin de passer par un autre OS.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">
<span class="arrow"></span>
<span class="next">Les Vertex Array Objects</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
<span class="next">Création et Utilisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CrationetUtilisation"></a><h2>Création et Utilisation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
<span class="arrow"></span>
<span class="next">Encore un objet OpenGL ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
<span class="next">Un autre exemple</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-creation-40" data-claire-element-id="964522">Création</h2><h3 id="r-le-header-11" data-claire-element-id="964467">Le header</h3><p id="r-964462" data-claire-element-id="964462">Contrairement aux <strong>VBO</strong>, les <strong>VAO</strong> seront très simples à configurer et à utiliser. Nous n'aurons pas besoin d'allouer de mémoire vidéo ni de faire des transferts de données, il suffira juste de faire des opérations que l'on connait déjà.</p><p id="r-964463" data-claire-element-id="964463">Nous aurons tout d'abord besoin d'une variable de type <em><strong>GLuint</strong></em> pour représenter notre <strong>VAO</strong> au sein du code C++. Comme d'habitude, nous travaillerons avec la classe <em><strong>Cube</strong></em> (puis la classe <em><strong>Caisse</strong></em>) pour illustrer ce que nous verrons dans ce chapitre. Nous commençons donc pas déclarer un attribut de type <em><strong>GLuint</strong></em> dans la header, on l'appellera <strong>m_vaoID</strong> :</p><pre id="r-964464" data-claire-element-id="964464"><code data-claire-semantic="cpp">#ifndef DEF_CUBE
#define DEF_CUBE


// Includes 

....


// Classe Cube

class Cube
{
    public:

    Cube(float taille, std::string const vertexShader, std::string const fragmentShader);
    ~Cube();

    void charger();
    void afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview);


    protected:

    Shader m_shader;
    float m_vertices[108];
    float m_couleurs[108];

    GLuint m_vboID;
    int m_tailleVerticesBytes;
    int m_tailleCouleursBytes;
    GLuint m_vaoID;
};

#endif</code></pre><p id="r-964465" data-claire-element-id="964465">Bien entendu, on pense à l'initialiser dans le constructeur :</p><pre id="r-964466" data-claire-element-id="964466"><code data-claire-semantic="cpp">Cube::Cube(float taille, std::string const vertexShader, std::string const fragmentShader) : m_shader(vertexShader, fragmentShader), m_vboID(0),
                                                                                             m_tailleVerticesBytes(108 * sizeof(float)),
                                                                                             m_tailleCouleursBytes(108 * sizeof(float)), m_vaoID(0)
{
    // Initialisation

    ....
}</code></pre><h3 id="r-chargement-5" data-claire-element-id="964502">Chargement</h3><p id="r-964468" data-claire-element-id="964468">Dans l'introduction, nous avons vu que les <strong>VAO</strong> permettent d'enregistrer certains appels de fonction dans la mémoire de la carte graphique. Ces appels concernent surtout l'affichage avec les tabl qui sont concernés Les appels qui sont concernés sont ceux relatifs aux tableaux Vertex Attrib. Ils vont donc disparaitre de la méthode afficher() pour se retrouver dans la configuration des VAO. Nous verrons cela en détail dans un instant car avant, nous devons créer un objet OpenGL valide et le verrouiller pour le configurer.</p><p id="r-964469" data-claire-element-id="964469">Cela se fera dans la méthode <strong>charger</strong>() exactement comme le <strong>VBO</strong>. Nous placerons notre code après sa configuration.</p><p id="r-964470" data-claire-element-id="964470">On commence d'ailleurs avec la création du <strong>VAO</strong> grâce l'habituelle fonction de génération d'identifiant <strong>glGenXXX</strong>(). Elle s'appelle ici <strong>glGenVertexArrays</strong>() :</p><pre id="r-964471" data-claire-element-id="964471"><code data-claire-semantic="cpp">void glGenVertexArrays(GLsizei number, GLuint *arrays);</code></pre><ul id="r-964476" data-claire-element-id="964476"><li id="r-964473" data-claire-element-id="964473"><p id="r-964472" data-claire-element-id="964472"><strong>number</strong> : Le nombre d'ID à initialiser, nous lui donnerons la valeur <strong>1</strong></p></li><li id="r-964475" data-claire-element-id="964475"><p id="r-964474" data-claire-element-id="964474"><strong>arrays</strong> : Un tableau de <strong><em>GLuint</em></strong> ou l'adresse d'une seule variable du même type. Nous lui donnerons l'adresse du <strong>VAO</strong></p></li></ul><p id="r-964477" data-claire-element-id="964477">Nous devons l'appeler juste après la configuration du <strong>VBO</strong> avec les paramètres donnés ci-dessus :</p><pre id="r-964478" data-claire-element-id="964478"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Création du VBO

    ....



    // Génération de l'ID du VAO

    glGenVertexArrays(1, &amp;m_vaoID);
}</code></pre><p id="r-964479" data-claire-element-id="964479">Comme toujours avec les <em>objets OpenGL</em>, nous devons les verrouiller lorsque nous voulons les configurer ou les utiliser. Tout ceux que nous vus jusqu'à maintenant (texture, <strong>VBO</strong>, etc.) nécessitaient cette opération, les <strong>VAO</strong> n’échappent pas à cette règle. Nous utiliserons pour cela la fonction <strong>glBindVertexArray</strong>() :</p><pre id="r-964480" data-claire-element-id="964480"><code data-claire-semantic="cpp">void glBindVertexArray(GLuint array);</code></pre><ul id="r-964483" data-claire-element-id="964483"><li id="r-964482" data-claire-element-id="964482"><p id="r-964481" data-claire-element-id="964481"><strong>array</strong> : Le <strong>VAO</strong> à verrouiller</p></li></ul><p id="r-964484" data-claire-element-id="964484">Remarquez que cette fonction ne prend pas de paramètre <strong>target</strong> contrairement aux <strong>textures</strong> et aux <strong>VBO</strong>. En temps normal, il y en a toujours un mais dans certains cas il arrive qu'il n'y en ait pas. :)</p><p id="r-964485" data-claire-element-id="964485">On verrouille donc notre <strong>VAO</strong> en appelant la fonction <strong>glBindVertexArray</strong>(), on lui donnera en paramètre l'attribut <strong>m_vaoID</strong>. On en profitera au passage pour le déverrouiller immédiatement en utilisant la même fonction mais avec le paramètre <strong>0</strong> :</p><pre id="r-964486" data-claire-element-id="964486"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Gestion du VBO

    ....


    // Génération de l'identifiant du VAO

    glGenVertexArrays(1, &amp;m_vaoID);


    // Verrouillage du VAO

    glBindVertexArray(m_vaoID);


        // Vide pour le moment

        ....


    // Déverrouillage du VAO

    glBindVertexArray(0);
}</code></pre><p id="r-964487" data-claire-element-id="964487">Notre <strong>VAO</strong> est maintenant prêt à être configuré.</p><p id="r-964488" data-claire-element-id="964488">Nous savons que celui-ci devra contenir le code relatif aux tableaux <strong>Vertex Attrib</strong>, il devra enregistrer tous les appels de fonctions qui y sont associés comme <strong>glVertexAttribPointer</strong>(), <strong>glEnableVertexAttribPointer</strong>(), <strong>glBindBuffer</strong>(), etc.</p><p id="r-964489" data-claire-element-id="964489">Pour ce faire, il suffit simplement de couper le code d'envoi de données se trouvant dans la méthode <strong>afficher</strong>() et de le placer au moment de configurer le <strong>VAO</strong> (pendant le verrouillage).</p><div id="r-964491" data-claire-element-id="964491" data-claire-semantic="question"><p id="r-964490" data-claire-element-id="964490">Ça veut dire qu'on n'envoie plus les vertices et tout dans la méthode <strong>afficher</strong>() ?</p></div><p id="r-964492" data-claire-element-id="964492">Oui tout à fait. ^^</p><p id="r-964493" data-claire-element-id="964493">Le but est de sauvegarder ces appels dans la carte graphique, on les place donc dans le <strong>VAO</strong>. Nous devons donc les supprimer de la méthode <strong>afficher</strong>() pour les placer chez lui. Ne vous inquiétez pas cependant, nous ajouterons un petit bout de code dans cette méthode pour qu'OpenGL sache où chercher les données.</p><p id="r-964494" data-claire-element-id="964494">Au niveau de code, on coupe simplement le code suivant :</p><pre id="r-964495" data-claire-element-id="964495"><code data-claire-semantic="cpp">void Cube::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{

    .....


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


        // Accès aux vertices dans la mémoire vidéo

        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
        glEnableVertexAttribArray(0);


        // Accès aux couleurs dans la mémoire vidéo

        glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
        glEnableVertexAttribArray(1);


    // Déverrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, 0);


    .....
}</code></pre><p id="r-964496" data-claire-element-id="964496">Que l'on colle ici (entre les lignes surlignées) :</p><pre id="r-964497" data-claire-element-id="964497"><code data-claire-semantic="cpp">void Cube::charger()
{
    // Gestion du VBO

    ....


    // Génération de l'identifiant du VAO

    glGenVertexArrays(1, &amp;m_vaoID);


    // Verrouillage du VAO

    glBindVertexArray(m_vaoID);


        // Verrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


            // Accès aux vertices dans la mémoire vidéo

            glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
            glEnableVertexAttribArray(0);


            // Accès aux couleurs dans la mémoire vidéo

            glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
            glEnableVertexAttribArray(1);
 

        // Déverrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, 0);


    // Déverrouillage du VAO

    glBindVertexArray(0);
}</code></pre><p id="r-964498" data-claire-element-id="964498">De cette façon, le processus d'envoi de données est enregistré sur la carte graphique et OpenGL n'a pas besoin d'interroger l'application C++ pour savoir ce qu'il doit faire.</p><p id="r-964499" data-claire-element-id="964499">Petit détail, je vous conseille d'indenter le code qui se trouve dans le <strong>VAO</strong> tout comme les shaders et les <strong>VBO</strong>. :)</p><aside id="r-964501" data-claire-element-id="964501" data-claire-semantic="warning"><p id="r-964500" data-claire-element-id="964500">Attention cependant, n'appelez pas d'autres fonctions à l'intérieur pour tenter de les enregistrer sur la carte graphique. Il n'y a que celles qui concernent les tableaux <strong>Vertex Attrib</strong> qui le peuvent, le reste ne fonctionnera pas.</p></aside><h3 id="r-eviter-les-fuites-de-memoire-1" data-claire-element-id="964518">Éviter les fuites de mémoire</h3><p id="r-964503" data-claire-element-id="964503">Vous vous souvenez de ce que nous avons vu dans le chapitre précédent sur les fuites de mémoire des <strong>VBO</strong> ? Que si on en chargeait un deux fois alors le premier chargement était perdu et les ressources considérées comme étant &quot;toujours utilisées&quot;.</p><p id="r-964504" data-claire-element-id="964504">Le problème est le même ici, si on charge un <strong>VAO</strong> plusieurs fois alors on gâche de la mémoire. Pour éviter cela, nous allons utiliser la même astuce que celle que nous avons utilisée pour les textures et les <strong>VBO</strong>, à savoir : appeler une fonction du type <strong>glIsXXX</strong>() pour savoir si une initialisation a déjà eu lieu, puis en appeler une autre du type <strong>glDeleteXXX</strong>() si c'est le cas.</p><p id="r-964505" data-claire-element-id="964505">La première de ces fonctions s'appelle dans notre cas :</p><pre id="r-964506" data-claire-element-id="964506"><code data-claire-semantic="cpp">GLboolean glIsVertexArray(GLuint array);</code></pre><p id="r-964507" data-claire-element-id="964507">Elle prend en paramètre l'identifiant à vérifier et renvoie comme d'habitude <strong>GL_TRUE</strong> ou <strong>GL_FALSE</strong> pour confirmer ou non une précédente initialisation.</p><p id="r-964508" data-claire-element-id="964508">La fonction de destruction de <strong>VAO</strong> quant à elle s'appelle <strong>glDeleteVertexArrays</strong>() :</p><pre id="r-964509" data-claire-element-id="964509"><code data-claire-semantic="cpp">void glDeleteVertexArrays(GLsizei n​umber, const GLuint *arrays​);</code></pre><ul id="r-964514" data-claire-element-id="964514"><li id="r-964511" data-claire-element-id="964511"><p id="r-964510" data-claire-element-id="964510"><strong>number</strong> : Le nombre d'ID à initialiser, nous lui donnerons la valeur <strong>1</strong></p></li><li id="r-964513" data-claire-element-id="964513"><p id="r-964512" data-claire-element-id="964512"><strong>arrays</strong> : Un tableau de <em><strong>GLuint</strong></em> ou l'adresse d'une seule variable du même type. Nous lui donnerons l'adresse de l'attribut <strong>m_vaoID</strong></p></li></ul><p id="r-964515" data-claire-element-id="964515">Nous devons les appeler dans un bloc <strong>if</strong> juste avant la génération d'ID :</p><pre id="r-964516" data-claire-element-id="964516"><code data-claire-semantic="cpp">void Cube::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Gestion du VBO

    ....


    // Destruction d'un éventuel ancien VAO

    if(glIsVertexArray(m_vaoID) == GL_TRUE)
        glDeleteVertexArrays(1, &amp;m_vaoID);


    // Génération de l'identifiant du VAO

    glGenVertexArrays(1, &amp;m_vaoID);


    // Verrouillage du VAO

    glBindVertexArray(m_vaoID);


        // Verrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


            // Accès aux vertices dans la mémoire vidéo

            glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
            glEnableVertexAttribArray(0);


            // Accès aux couleurs dans la mémoire vidéo

            glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
            glEnableVertexAttribArray(1);
 

        // Déverrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, 0);


    // Déverrouillage du VAO

    glBindVertexArray(0);
}</code></pre><p id="r-964517" data-claire-element-id="964517">De cette façon, on évite tout éventuel chargement perdu dans la mémoire.</p><h3 id="r-le-destructeur-7" data-claire-element-id="964521">Le destructeur</h3><p id="r-964519" data-claire-element-id="964519">Tout comme le <strong>VBO</strong>, nous devons détruire le <strong>VAO</strong> dans le destructeur (qui lui-même est appelé au moment de détruire un objet). Nous utiliserons une fois de plus la fonction <strong>glDeleteVertexArrays</strong>(), je pense que vous n'avez pas besoin de plus d'explication. :p</p><pre id="r-964520" data-claire-element-id="964520"><code data-claire-semantic="cpp">Cube::~Cube()
{
    // Destruction du VBO

    glDeleteBuffers(1, &amp;m_vboID);


    // Destruction du VAO

    glDeleteVertexArrays(1, &amp;m_vaoID);
}</code></pre><h2 id="r-utilisation-92" data-claire-element-id="964532">Utilisation</h2><p id="r-964523" data-claire-element-id="964523">L'utilisation des <strong>VAO</strong> est encore plus simple que leur création puisqu'il suffit juste de les verrouiller exactement comme si on utilisait une texture. C'est-à-dire que nous devons le verrouiller <strong>avant</strong> et le déverrouiller <strong>après</strong> la fonction <strong>glDrawArrays</strong>(). Bien évidemment, il faut supprimer toute référence aux tableaux <strong>Vertex Attrib</strong> maintenant qu'ils sont utilisés autre part :</p><pre id="r-964524" data-claire-element-id="964524"><code data-claire-semantic="cpp">void Cube::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Verrouillage du VAO

        glBindVertexArray(m_vaoID);


            // Envoi des matrices

            glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
            glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


            // Rendu

            glDrawArrays(GL_TRIANGLES, 0, 36);


        // Déverrouillage du VAO

        glBindVertexArray(0);


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><p id="r-964525" data-claire-element-id="964525">Grâce à ce verrouillage, OpenGL saura automatiquement où se trouveront les données dont il a besoin.</p><p id="r-964526" data-claire-element-id="964526">Petit détail : vous n'êtes pas obligés d'insérer l'envoi des matrices pendant le verrouillage du <strong>VAO</strong>, ça fonctionnera très bien si vous le faites avant. Personnellement, j'aime bien tout mettre à l'intérieur (textures comprises). :)</p><aside id="r-964528" data-claire-element-id="964528" data-claire-semantic="warning"><p id="r-964527" data-claire-element-id="964527">Tout code faisant référence aux <strong>Vertex Attrib</strong> dans la méthode <strong>afficher</strong>() doit totalement disparaitre et doit maintenant se trouver dans la méthode <strong>charger</strong>().</p></aside><div id="r-964530" data-claire-element-id="964530" data-claire-semantic="question"><p id="r-964529" data-claire-element-id="964529">Au fait, on ne déverrouille pas les tableaux <strong>Vertex Attrib</strong> ? On les a activés pendant la configuration du <strong>VAO</strong> mais on ne les désactive à aucun moment.</p></div><p id="r-964531" data-claire-element-id="964531">C'est une question que je me suis aussi posée la première fois. Apparemment, les appels aux fonctions <strong>glDisableVertexAttribPointer</strong>() sont inutiles avec les <strong>VAO</strong>, ils se désactivent en même temps que le déverrouillage du <strong>VAO</strong>. Pas besoin de se triturer la tête avec ça.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
<span class="arrow"></span>
<span class="next">Encore un objet OpenGL ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
<span class="next">Un autre exemple</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unautreexemple"></a><h2>Un autre exemple</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
<span class="arrow"></span>
<span class="next">Création et Utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
<span class="next">OpenGL 3.3 et Mac OS X</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-le-header-12" data-claire-element-id="964537">Le header</h2><p id="r-964534" data-claire-element-id="964534">Nous avons vu, dans la partie précédentes, comment implémenter un <strong>VAO</strong> dans la classe <em><strong>Cube</strong></em>, nous allons maintenant faire la même chose dans sa classe fille (<em><strong>Caisse</strong></em>). Ça va nous donner l'occasion de voir un autre exemple pour mieux intégrer les notions que nous avons abordées.</p><p id="r-964535" data-claire-element-id="964535">Avant de commencer, nous savons maintenant que nous avons besoin d'une variable de type <em><strong>GLuint</strong></em> pour gérer le <strong>VAO</strong>. Cependant, vu que la classe <em><strong>Caisse</strong></em> hérite de celui de la classe <em><strong>Cube</strong></em> alors il est inutile d'en utiliser une nouvelle. De plus, contrairement aux <strong>VBO</strong>, nous n'avons pas besoin d'attribut supplémentaire pour définir la taille des tableaux de données.</p><p id="r-964536" data-claire-element-id="964536">Il n'y a donc aucune modification à faire dans le header. :)</p><h2 id="r-la-methode-charger-3" data-claire-element-id="964545">La méthode charger()</h2><p id="r-964538" data-claire-element-id="964538">Au niveau de la méthode <strong>charger</strong>(), on commence par générer un nouvel ID pour le <strong>VAO</strong> grâce à la fonction <strong>glGenVertexArrays</strong>(). On le verrouille ensuite à l'aide de <strong>glBindVertexarray</strong>() :</p><pre id="r-964539" data-claire-element-id="964539"><code data-claire-semantic="cpp">void Caisse::charger()
{
    // Gestion du VBO

    ....


    // Destruction d'un éventuel ancien VAO

    if(glIsVertexArray(m_vaoID) == GL_TRUE)
        glDeleteVertexArrays(1, &amp;m_vaoID);


    // Verrouillage du VAO

    glBindVertexArray(m_vaoID);


        // Vide pour le moment

        ....


    // Déverrouillage du VAO

    glBindVertexArray(0);
}</code></pre><p id="r-964540" data-claire-element-id="964540">Il ne faut pas oublier de rajouter les fonctions qui permettent d'éviter les fuites de mémoire en détruisant un éventuel ancien <strong>VAO</strong> :</p><pre id="r-964541" data-claire-element-id="964541"><code data-claire-semantic="cpp">void Caisse::charger()
{
    // Gestion du VBO

    ....


    // Destruction d'un éventuel ancien VAO

    if(glIsVertexArray(m_vaoID) == GL_TRUE)
        glDeleteVertexArrays(1, &amp;m_vaoID);


    // Génération de l'ID du VAO

    glGenVertexArrays(1, &amp;m_vaoID);


    // Verrouillage du VAO

    glBindVertexArray(m_vaoID);


        // Vide pour le moment

        ....


    // Déverrouillage du VAO

    glBindVertexArray(0);
}</code></pre><p id="r-964542" data-claire-element-id="964542">Comme nous l'avons vu depuis le début du chapitre, le <strong>VAO</strong> doit contenir le code relatif aux tableaux <strong>Vertex Attrib</strong>. On coupe donc le code concerné dans la méthode <strong>afficher</strong>() pour le transférer ici. Ce qui donne la méthode <strong>charger</strong>() suivante :</p><pre id="r-964543" data-claire-element-id="964543"><code data-claire-semantic="cpp">void Caisse::charger()
{
    // Gestion du VBO

    ....


    // Destruction d'un éventuel ancien VAO

    if(glIsVertexArray(m_vaoID) == GL_TRUE)
        glDeleteVertexArrays(1, &amp;m_vaoID);


    // Génération de l'ID du VAO

    glGenVertexArrays(1, &amp;m_vaoID);


    // Verrouillage du VAO

    glBindVertexArray(m_vaoID);


        // Verrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, m_vboID);


            // Accès aux vertices dans la mémoire vidéo

            glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
            glEnableVertexAttribArray(0);


            // Accès aux coordonnées de texture dans la mémoire vidéo

            glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(m_tailleVerticesBytes));
            glEnableVertexAttribArray(2);


        // Déverrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, 0);


    // Déverrouillage du VAO

    glBindVertexArray(0);
}</code></pre><p id="r-964544" data-claire-element-id="964544">Configuration terminée. ;)</p><h2 id="r-la-methode-afficher-6" data-claire-element-id="964556">La méthode afficher()</h2><p id="r-964546" data-claire-element-id="964546">Pour afficher notre caisse au final, il suffit simplement de remplacer ce que l'on a supprimé dans la méthode <strong>afficher</strong>() par le verrouillage du <strong>VAO</strong>. La seule différence avec la classe <em><strong>Cube</strong></em> c'est qu'ici on utilise ici une texture :</p><pre id="r-964547" data-claire-element-id="964547"><code data-claire-semantic="cpp">// Verrouillage du VAO

glBindVertexArray(m_vaoID);


    // Envoi des matrices

    glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
    glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


    // Verrouillage de la texture

    glBindTexture(GL_TEXTURE_2D, m_texture.getID());


    // Rendu

    glDrawArrays(GL_TRIANGLES, 0, 36);


    // Déverrouillage de la texture

    glBindTexture(GL_TEXTURE_2D, 0);


// Déverrouillage du VAO

glBindVertexArray(0);</code></pre><p id="r-964548" data-claire-element-id="964548">Le code final de la méthode <strong>afficher</strong>() est maintenant :</p><pre id="r-964549" data-claire-element-id="964549"><code data-claire-semantic="cpp">void Caisse::afficher(glm::mat4 &amp;projection, glm::mat4 &amp;modelview)
{
    // Activation du shader

    glUseProgram(m_shader.getProgramID());


        // Verrouillage du VAO

        glBindVertexArray(m_vaoID);


            // Envoi des matrices

            glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
            glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


            // Verrouillage de la texture

            glBindTexture(GL_TEXTURE_2D, m_texture.getID());


            // Rendu

            glDrawArrays(GL_TRIANGLES, 0, 36);


            // Déverrouillage de la texture

            glBindTexture(GL_TEXTURE_2D, 0);


        // Déverrouillage du VAO

        glBindVertexArray(0);


    // Désactivation du shader

    glUseProgram(0);
}</code></pre><p id="r-964550" data-claire-element-id="964550">Vous pouvez maintenant compiler votre projet.</p><figure id="r-964552" data-claire-element-id="964553"><img id="r-964551" data-claire-element-id="964551" src="medias/uploads.siteduzero.com_files_420001_421000_420504.png" alt="Image utilisateur"/></figure><p id="r-964554" data-claire-element-id="964554">Ce chapitre est maintenant terminé. :-°</p><p id="r-964555" data-claire-element-id="964555">Enfin juste en théorie, car nous allons voir maintenant comment passer à la version <strong>3.3 d'OpenGL</strong>. Comme je vous l'ai dit tout à l'heure, l'utilisation combinée des <strong>VBO</strong> et des <strong>VAO</strong> nous permettent de profiter pleinement d'<strong>OpenGL 3</strong>. Les mac-users sont également concernés car vous pourrez maintenant coder vos applications directement sur votre Mac.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
<span class="arrow"></span>
<span class="next">Création et Utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
<span class="next">OpenGL 3.3 et Mac OS X</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="OpenGL3.3etMacOSX"></a><h2>OpenGL 3.3 et Mac OS X</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
<span class="arrow"></span>
<span class="next">Un autre exemple</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">
<span class="next">La compilation de shaders</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-passer-a-opengl-3-3" data-claire-element-id="964583">Passer à OpenGL 3.3</h2><p id="r-964558" data-claire-element-id="964558">Mine de rien, nous avons fait pas mal de chemin depuis le début de ce tutoriel. Nous avons vu les principes de base d'OpenGL et nous venons de voir deux fonctionnalités avancées (ou plutôt <strong>extensions</strong>) exploitant directement notre carte graphique. Et croyez-moi ce n'est pas fini. ^^</p><p id="r-964559" data-claire-element-id="964559">Grâce aux deux derniers chapitres, nous connaissons tout ce qui est nécessaire pour mettre à jour notre version d'OpenGL. Vous n'êtes pas sans savoir que depuis le début du tutoriel, nous utilisons la version <strong>3.1</strong>. Cependant, je vous avais dit que nous passerions à <strong>OpenGL 3.3</strong> dans le futur, et c'est justement ce que nous allons faire.</p><p id="r-964560" data-claire-element-id="964560">J'ai préféré utiliser la <strong>3.1</strong> jusqu'à maintenant car avec cette version, nous n'étions pas obligé d'utiliser les <strong>VBO</strong> et les <strong>VAO</strong> pour chaque rendu. Imaginez si je vous avais montré ça dès le début, vous auriez fuis en courant. :p <br/> Mais maintenant que nous connaissons tout ça, nous pouvons enfin passer à la <strong>3.3</strong>.</p><p id="r-964561" data-claire-element-id="964561">Pour faire cela, la SDL va beaucoup nous aider puisqu'elle fera tout pour nous. Il suffira de lui demander la version qui nous intéresse. Vous vous souvenez du moment où nous initialisions la SDL avec des paramètres OpenGL ? Nous utilisions le code suivant dans la méthode <strong>initialiserFenetre</strong>() :</p><pre id="r-964562" data-claire-element-id="964562"><code data-claire-semantic="cpp">bool SceneOpenGL::initialiserFenetre()
{
    // Initialisation de la SDL
	
    if(SDL_Init(SDL_INIT_VIDEO) &lt; 0)
    {
        std::cout &lt;&lt; &quot;Erreur lors de l'initialisation de la SDL : &quot; &lt;&lt; SDL_GetError() &lt;&lt; std::endl;
        SDL_Quit();
		
        return false;
    }
	
	
    // Version d'OpenGL
	
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);
	
	
    // Double Buffer
	
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);
    SDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);
	
	
    // Création de la fenêtre
	
    m_fenetre = SDL_CreateWindow(m_titreFenetre.c_str(), SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, m_largeurFenetre, m_hauteurFenetre, SDL_WINDOW_SHOWN | SDL_WINDOW_OPENGL);
    m_contexteOpenGL = SDL_GL_CreateContext(m_fenetre);

    return true;
}</code></pre><p id="r-964563" data-claire-element-id="964563">Les lignes intéressantes dans ce code sont celles-ci :</p><pre id="r-964564" data-claire-element-id="964564"><code data-claire-semantic="cpp">// Version d'OpenGL
	
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);</code></pre><p id="r-964565" data-claire-element-id="964565">Elles permettent de demander à la SDL la version <strong>3.1 d'OpenGL.</strong> ;)</p><p id="r-964566" data-claire-element-id="964566">Pour passer à la <strong>3.3</strong>, il suffit de changer la valeur du paramètre <strong>SDL_GL_CONTEXT_MINOR_VERSION</strong> pour lui affecter la valeur 3 :</p><pre id="r-964567" data-claire-element-id="964567"><code data-claire-semantic="cpp">// Version d'OpenGL
	
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 3);</code></pre><p id="r-964568" data-claire-element-id="964568">Mais ce n'est pas tout. En effet, à partir d'<strong>OpenGL 3.2</strong> nous pouvons demander deux profils OpenGL : le profil de <strong><em>compatibilité</em></strong> (aussi appelé <strong>Legacy</strong> ou <strong>Compatibility</strong>) et le profil <em><strong>Core</strong></em>.</p><p id="r-964569" data-claire-element-id="964569">La premier permet de conserver une compatibilité avec <strong>OpenGL 2.1</strong>. Il a été créé à l'origine pour ceux qui utilisent de gros moteurs 3D pour qu'ils n'aient pas à tout recoder.</p><p id="r-964570" data-claire-element-id="964570">Le second, lui, purge toutes les fonctionnalités inutiles pour ne garder que celles qui sont intéressantes. Il bénéficie en plus de pas mal de nouveautés spécifiques à <strong>OpenGL 3</strong> dont un nouveau pipeline plus souple et plus performant. Nous travaillerons toujours avec ce profil.</p><p id="r-964571" data-claire-element-id="964571">Pour le dire à la SDL, il suffit juste d'appeler la fonction <strong>SDL_GL_SetAttribut</strong>() avec en premier paramètre la valeur <strong>SDL_GL_CONTEXT_PROFILE_MASK</strong>. Le second quant à lui pourra prendre deux valeurs :</p><ul id="r-964576" data-claire-element-id="964576"><li id="r-964573" data-claire-element-id="964573"><p id="r-964572" data-claire-element-id="964572"><strong>SDL_GL_CONTEXT_PROFILE_COMPATIBILITY</strong> : Pour le profil de <em><strong>Compatibilité</strong></em></p></li><li id="r-964575" data-claire-element-id="964575"><p id="r-964574" data-claire-element-id="964574"><strong>SDL_GL_CONTEXT_PROFILE_CORE</strong> : Pour le profil <em><strong>Core</strong></em></p></li></ul><p id="r-964577" data-claire-element-id="964577">Vous l'aurez compris, nous utiliserons la seconde valeur. ^^</p><p id="r-964578" data-claire-element-id="964578">Au final, l'appel à la fonction <strong>SDL_GL_SetAttribute</strong>() ressemble à ceci :</p><pre id="r-964579" data-claire-element-id="964579"><code data-claire-semantic="cpp">// Utilisation du profil Core

SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);</code></pre><p id="r-964580" data-claire-element-id="964580">Ce qui donne en somme les paramètres suivants :</p><pre id="r-964581" data-claire-element-id="964581"><code data-claire-semantic="cpp">// Version d'OpenGL
	
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 3);
SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);</code></pre><p id="r-964582" data-claire-element-id="964582">Maintenant, nous sommes totalement à jour avec <strong>OpenGL 3</strong>. :D</p><h2 id="r-opengl-3-sous-mac-os-x" data-claire-element-id="964598">OpenGL 3 sous Mac OS X</h2><p id="r-964584" data-claire-element-id="964584">Si vous n'êtes pas utilisateurs de Mac OS X, vous n'êtes pas obligés de lire cette partie mais je vous conseille quand même de le faire (au moins à partir du titre &quot;<strong>Version d'OpenGL</strong>&quot;) car si vous voulez créer des jeux multiplateformes, il vous suffira juste d'inclure quelques lignes de code pour les rendre compatibles avec l'OS d'Apple.</p><p id="r-964585" data-claire-element-id="964585">Si vous êtes utilisateurs de Mac OS X vous avez dû vous sentir frustrés depuis le début du tutoriel vu qu'il était impossible d'utiliser <strong>OpenGL 3</strong>. :(</p><p id="r-964586" data-claire-element-id="964586">Le problème vient du fait qu'Apple n'utilise que deux versions pour OpenGL : la <strong>2.1</strong> et la <strong>3.2</strong>, donc pas de <strong>3.1</strong>. De plus, pour profiter de la dernière version vous devez au moins être sous <strong>OS X Lion</strong> (<strong>10.7</strong>) vu qu'Apple ne soutient plus ses anciens OS.</p><p id="r-964587" data-claire-element-id="964587">Mais bon, si vous êtes au moins sous Lion et que vous avez suivi le tutoriel jusqu'ici, vous êtes donc capables d'utiliser <strong>OpenGL 3</strong> directement sur votre Mac. Vous n'aurez pas la dernière version mais ce n'est pas grave, la plus importante étant la <strong>3.2</strong>. ;)</p><p id="r-964588" data-claire-element-id="964588">Je vais vous expliquer comment faire en utilisant <em><strong>Xcode</strong></em> qui est un IDE beaucoup plus adapté pour vous. Pour commencer, je vais vous demander de télécharger les deux DMG suivants qui contiennent respectivement les <strong>Frameworks</strong> de <em><strong>SDL2</strong></em> et de <em><strong>SDL2_image</strong></em> ainsi que la librairie <strong>GLM</strong> :</p><ul id="r-964595" data-claire-element-id="964595"><li id="r-964590" data-claire-element-id="964590"><p id="r-964589" data-claire-element-id="964589"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/r2ryvc8jlmzsvot/SDL2.dmg?token_hash=AAF51Z82xJ7nhLLRecCFGkw_hX8t3PEftk04H4CwTqiIYA&amp;dl=1">Framework SDL2</a></strong></p></li><li id="r-964592" data-claire-element-id="964592"><p id="r-964591" data-claire-element-id="964591"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/vbrfku7if02lft6/SDL2_image.dmg?token_hash=AAEzK9xxNlZXWL9FuGiV1RGdTIvG8aVnYCbhLtSNlTUnsA&amp;dl=1">Framework SDL2_image</a></strong></p></li><li id="r-964594" data-claire-element-id="964594"><p id="r-964593" data-claire-element-id="964593"><strong>Télécharger : <a href="https://dl.dropboxusercontent.com/s/t716ptzb41wlrgq/OpenGL Mathematics.zip?token_hash=AAHoSq2pFxh26VJ0LqemCcCQoW4nMKWfCB6eF0EFkptPYw&amp;dl=1">GLM</a></strong></p></li></ul><p id="r-964596" data-claire-element-id="964596">Copiez les <strong>Frameworks</strong> se trouvant dans ces deux DMG dans le répertoire <strong>/Library/Frameworks/</strong> (ou <strong>/Bibliothèque/Frameworks/</strong>).</p><p id="r-964597" data-claire-element-id="964597">Copiez le dossier <strong>glm</strong> (en minuscules) se trouvant dans l'archive <strong>OpenG Mathematics.zip</strong> dans le répertoire <strong>/usr/local/include</strong>. Si vous ne voyez pas ce dossier, regardez dans le menu du <strong>Finder</strong> et cliquez sur &quot;<strong>Aller</strong>&quot; puis sur &quot;<strong>Aller au dossier</strong>&quot; et renseignez le chemin que je vous ai donné.</p><h2 id="r-creer-un-projet-sdl2-sous-mac-os-x" data-claire-element-id="964709">Créer un projet SDL2 sous Mac OS X</h2><h3 id="r-le-projet-5" data-claire-element-id="964644">Le projet</h3><p id="r-964599" data-claire-element-id="964599">La création de projet <strong>SDL2</strong> avec Xcode est quelque chose d'assez folklo vu les changements fréquents de cet IDE. En effet, en temps normal vous devriez utiliser un <em><strong>template</strong></em> spécial qui crée votre projet <strong>SDL2</strong> automatiquement. Cependant, Apple change tellement le modèle de ses <strong><em>templates</em></strong> qu'il est devenu ingérable de fournir les fichiers nécessaires pour tout le monde.</p><p id="r-964600" data-claire-element-id="964600">A la place, nous allons utiliser une petite astuce qui, au moins, fonctionnera pour tout le monde. :)</p><p id="r-964601" data-claire-element-id="964601">Pour commencer, vous devez créer un projet &quot;<strong><em>Cocoa Application</em></strong>&quot; :</p><figure id="r-964603" data-claire-element-id="964604"><img id="r-964602" data-claire-element-id="964602" src="medias/uploads.siteduzero.com_files_417001_418000_417746.png" alt="Image utilisateur"/></figure><p id="r-964605" data-claire-element-id="964605">Une fois le projet créé, vous devez supprimer les fichiers suivants :</p><ul id="r-964612" data-claire-element-id="964612"><li id="r-964607" data-claire-element-id="964607"><p id="r-964606" data-claire-element-id="964606"><strong>AppDelegate.h</strong></p></li><li id="r-964609" data-claire-element-id="964609"><p id="r-964608" data-claire-element-id="964608"><strong>AppDelegate.m</strong></p></li><li id="r-964611" data-claire-element-id="964611"><p id="r-964610" data-claire-element-id="964610"><strong>main.m</strong></p></li></ul><figure id="r-964614" data-claire-element-id="964615"><img id="r-964613" data-claire-element-id="964613" src="medias/uploads.siteduzero.com_files_417001_418000_417747.jpg" alt="Image utilisateur"/></figure><p id="r-964616" data-claire-element-id="964616">Ensuite, ajoutez toutes les sources à votre projet (dossiers <strong>Shaders</strong> et <strong>Textures</strong> inclus). Au moment de cet ajout, faites attention à bien spécifier les options suivantes :</p><figure id="r-964618" data-claire-element-id="964619"><img id="r-964617" data-claire-element-id="964617" src="medias/uploads.siteduzero.com_files_420001_421000_420524.jpg" alt="Image utilisateur"/></figure><p id="r-964620" data-claire-element-id="964620">Une fois les fichiers ajoutés, vous devriez avoir :</p><figure id="r-964622" data-claire-element-id="964623"><img id="r-964621" data-claire-element-id="964621" src="medias/uploads.siteduzero.com_files_417001_418000_417748.jpg" alt="Image utilisateur"/></figure><p id="r-964624" data-claire-element-id="964624">Une fois que vous avez importé les sources, vous devez importer les <em><strong>Frameworks</strong></em> qui vous permettront de compiler vos applications :</p><ul id="r-964631" data-claire-element-id="964631"><li id="r-964626" data-claire-element-id="964626"><p id="r-964625" data-claire-element-id="964625"><strong>SDL2.framework</strong> : Vous l'avez normalement installé dans le dossier <strong>/Library/Frameworks</strong></p></li><li id="r-964628" data-claire-element-id="964628"><p id="r-964627" data-claire-element-id="964627"><strong>SDL2_image.framework</strong> : Même chose</p></li><li id="r-964630" data-claire-element-id="964630"><p id="r-964629" data-claire-element-id="964629"><strong>OpenGL.framework</strong> : Lui, il se trouve dans le répertoire <strong>/System/Library/Frameworks</strong></p></li></ul><p id="r-964632" data-claire-element-id="964632">Là par contre, il faut décocher la case &quot;<strong>Copy items into destination group's folder</strong>&quot; (Laissez le paramètre <strong>Folders</strong> au deuxième choix). Ceci est valable uniquement pour les Frameworks, pour le reste il faut qu'elle soit cochée.</p><figure id="r-964634" data-claire-element-id="964635"><img id="r-964633" data-claire-element-id="964633" src="medias/uploads.siteduzero.com_files_417001_418000_417757.jpg" alt="Image utilisateur"/></figure><figure id="r-964637" data-claire-element-id="964638"><img id="r-964636" data-claire-element-id="964636" src="medias/uploads.siteduzero.com_files_417001_418000_417749.jpg" alt="Image utilisateur"/></figure><p id="r-964639" data-claire-element-id="964639">Enfin dernier point pour l'importation, vérifiez la présence des dossiers <strong>Textures</strong> et <strong>Shaders</strong> dans la liste &quot;<strong>Copy Bundle Resources</strong>&quot; dans l'onglet <em><strong>Build Phases</strong></em> :</p><figure id="r-964641" data-claire-element-id="964642"><img id="r-964640" data-claire-element-id="964640" src="medias/uploads.siteduzero.com_files_417001_418000_417750.jpg" alt="Image utilisateur"/></figure><p id="r-964643" data-claire-element-id="964643">S'ils n'y sont pas, faites un glisser-coller depuis le menu de navigation à gauche.</p><h3 id="r-la-librairie-glm" data-claire-element-id="964658">La librairie GLM</h3><p id="r-964645" data-claire-element-id="964645">Pour vous permettre d'utiliser la librairie <strong>GLM</strong> dans vos projets, il va falloir ajouter un paramètre dans le fichier de votre projet.</p><p id="r-964646" data-claire-element-id="964646">Commencez par cliquer sur le nom de votre projet sous le menu <strong>Targets</strong> :</p><figure id="r-964648" data-claire-element-id="964649"><img id="r-964647" data-claire-element-id="964647" src="medias/uploads.siteduzero.com_files_421001_422000_421458.jpg" alt="Image utilisateur"/></figure><p id="r-964650" data-claire-element-id="964650">Puis cliquez sur le menu &quot;<strong>Build Settings</strong>&quot; et sur le bouton &quot;<strong>Basic</strong>&quot; :</p><figure id="r-964652" data-claire-element-id="964653"><img id="r-964651" data-claire-element-id="964651" src="medias/uploads.siteduzero.com_files_421001_422000_421459.jpg" alt="Image utilisateur"/></figure><p id="r-964654" data-claire-element-id="964654">Repérez ensuite la ligne contenant le paramètre &quot;<strong>Header Search Paths</strong>&quot; et renseignez le chemin où vous avez copié le dossier <strong>glm</strong> tout à l'heure (<strong>/usr/local/include</strong>) :</p><figure id="r-964656" data-claire-element-id="964657"><img id="r-964655" data-claire-element-id="964655" src="medias/uploads.siteduzero.com_files_421001_422000_421460.jpg" alt="Image utilisateur"/></figure><h3 id="r-version-d-opengl" data-claire-element-id="964663">Version d'OpenGL</h3><p id="r-964659" data-claire-element-id="964659">N'oubliez pas que votre version d'OpenGL est la <strong>3.2</strong>, vous devez ajouter un bloc de type <strong>#ifdef</strong> dans votre code pour gérer le cas des Mac. Si la define <em><strong>__APPLE__</strong></em> est définie, alors l'application doit passer en mode OpenGL <strong>3.2</strong>, sinon elle reste en <strong>3.3</strong> :</p><pre id="r-964660" data-claire-element-id="964660"><code data-claire-semantic="cpp">#ifdef __APPLE__

    // Version d'OpenGL
	
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);

#else

    // Version d'OpenGL
	
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);

#endif</code></pre><aside id="r-964662" data-claire-element-id="964662" data-claire-semantic="information"><p id="r-964661" data-claire-element-id="964661">Notez que si vous souhaitez faire une application multiplateforme (Mac compris), il est préférable de créer un contexte <strong>3.2</strong> pour tout le monde.</p></aside><h3 id="r-les-ressources-7" data-claire-element-id="964674">Les ressources</h3><p id="r-964664" data-claire-element-id="964664">A ce stade vous devriez être capables de compiler votre application. Cependant, vous aurez encore un problème pour trouver les ressources. En effet, Mac OS X ne se place pas dans le bon dossier lorsque vous lancez une application, ce qui fait qu'il est impossible pour lui de trouver les ressources que nous lui demandons.</p><p id="r-964665" data-claire-element-id="964665">Pour corriger ce problème, nous allons ajouter un petit bout de code spécifique à Mac OS X dans le même bloc <strong>#ifdef</strong> que précédemment.</p><p id="r-964666" data-claire-element-id="964666">Ce code est un peu spécial parce qu'il s'agit à l'origine d'un code <strong>Objective-C</strong> qui a été transposé en C. L'objective-C est le langage de base utilisé par les appareils Apple. Je ne vous expliquerai pas ce code car il faudrait faire un cours sur le <em><strong>Cocoa</strong></em> mais sachez simplement qu'il permet à Mac OS X de se placer dans le bon dossier des ressources.</p><p id="r-964667" data-claire-element-id="964667">Mais avant de copier ce code, vous devez inclure l'en-tête <strong>CoreFoundation.h</strong> toujours dans un bloc <strong>#ifdef</strong> à l'intérieur de la classe <em><strong>SceneOpenGL</strong></em> :</p><pre id="r-964668" data-claire-element-id="964668"><code data-claire-semantic="cpp">#ifdef __APPLE__
    #include &lt;CoreFoundation/CoreFoundation.h&gt;
#endif</code></pre><p id="r-964669" data-claire-element-id="964669">Maintenant, copiez le code suivant ...</p><pre id="r-964670" data-claire-element-id="964670"><code data-claire-semantic="cpp">// Récupération du Bundle

CFURLRef URLBundle = CFBundleCopyResourcesDirectoryURL(CFBundleGetMainBundle());
char *cheminResources = new char[PATH_MAX];


// Changement du 'Working Directory'

if(CFURLGetFileSystemRepresentation(URLBundle, 1, (UInt8*)cheminResources, PATH_MAX))
    chdir(cheminResources);


// Libération de la mémoire

delete[] cheminResources;
CFRelease(URLBundle);</code></pre><p id="r-964671" data-claire-element-id="964671">... juste après la spécification de la version d'OpenGL :</p><pre id="r-964672" data-claire-element-id="964672"><code data-claire-semantic="cpp">#ifdef __APPLE__

    // Version d'OpenGL
	
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 2);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);


    // Récupération du Bundle

    CFURLRef URLBundle = CFBundleCopyResourcesDirectoryURL(CFBundleGetMainBundle());
    char *cheminResources = new char[PATH_MAX];


    // Changement du 'Working Directory'

    if(CFURLGetFileSystemRepresentation(URLBundle, 1, (UInt8*)cheminResources, PATH_MAX))
        chdir(cheminResources);


    // Libération de la mémoire

    delete[] cheminResources;
    CFRelease(URLBundle);

#else

    // Version d'OpenGL
	
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 3);
    SDL_GL_SetAttribute(SDL_GL_CONTEXT_PROFILE_MASK, SDL_GL_CONTEXT_PROFILE_CORE);

#endif</code></pre><p id="r-964673" data-claire-element-id="964673">Grâce à ce bout de code, vous n'aurez plus de problème pour trouver vos ressources. :D</p><h3 id="r-les-headers-2" data-claire-element-id="964687">Les headers</h3><p id="r-964675" data-claire-element-id="964675">Pour terminer, faites attention aux en-têtes de la <strong>SDL</strong> et d'<strong>OpenGL</strong> qui diffèrent des autres OS :</p><pre id="r-964676" data-claire-element-id="964676"><code data-claire-semantic="cpp">// Include d'OpenGL

#include &lt;OpenGL/gl3.h&gt;


// Include de la SDL

#include &lt;SDL2/SDL.h&gt;


// Include de la SDL_image

#include &lt;SDL2_image/SDL_image.h&gt;</code></pre><p id="r-964677" data-claire-element-id="964677">Ainsi, l'inclusion d'OpenGL ressemblera maintenant à ceci :</p><p id="r-964678" data-claire-element-id="964678"></p><pre id="r-964679" data-claire-element-id="964679"><code data-claire-semantic="cpp">// Include Windows

#ifdef WIN32
#include &lt;GL/glew.h&gt;


// Include Mac

#elif __APPLE__
#define GL3_PROTOTYPES 1
#include &lt;OpenGL/gl3.h&gt;


// Include UNIX/Linux

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif</code></pre><p id="r-964680" data-claire-element-id="964680">Celui de la classe <em><strong>SceneOpenGL</strong></em> va légèrement changer par rapport aux autres puisqu'il faudra inclure l'en-tête <strong>CoreFoundation.h</strong> en plus :</p><p id="r-964681" data-claire-element-id="964681"></p><pre id="r-964682" data-claire-element-id="964682"><code data-claire-semantic="cpp">// Include Windows

#ifdef WIN32
#include &lt;GL/glew.h&gt;


// Include Mac

#elif __APPLE__
#define GL3_PROTOTYPES 1
#include &lt;OpenGL/gl3.h&gt;
#include &lt;CoreFoundation/CoreFoundation.h&gt;


// Include UNIX/Linux

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif</code></pre><p id="r-964683" data-claire-element-id="964683">Et enfin, celui de la classe <em><strong>Texture</strong></em> sera :</p><p id="r-964684" data-claire-element-id="964684"></p><pre id="r-964685" data-claire-element-id="964685"><code data-claire-semantic="cpp">// Include Windows

#ifdef WIN32
#include &lt;GL/glew.h&gt;
#include &lt;SDL2/SDL_image.h&gt;


// Include Mac

#elif __APPLE__
#define GL3_PROTOTYPES 1
#include &lt;OpenGL/gl3.h&gt;
#include &lt;SDL2_image/SDL_image.h&gt;


// Include UNIX/Linux

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;
#include &lt;SDL2/SDL_image.h&gt;

#endif</code></pre><p id="r-964686" data-claire-element-id="964686">Voilà pour les explications. ^^</p><h3 id="r-ce-qu-il-faut-retenir-3" data-claire-element-id="964708">Ce qu'il faut retenir</h3><p id="r-964688" data-claire-element-id="964688">Si on résume la création de projet <strong>SDL 2</strong> sous Mac OS X :</p><ul id="r-964699" data-claire-element-id="964699"><li id="r-964690" data-claire-element-id="964690"><p id="r-964689" data-claire-element-id="964689">Création d'un projet <strong>Cocoa Application</strong></p></li><li id="r-964692" data-claire-element-id="964692"><p id="r-964691" data-claire-element-id="964691">Suppression de l'<strong>AppDelegate</strong> et du <strong>main.m</strong></p></li><li id="r-964694" data-claire-element-id="964694"><p id="r-964693" data-claire-element-id="964693">Ajout des <strong>sources C++</strong></p></li><li id="r-964696" data-claire-element-id="964696"><p id="r-964695" data-claire-element-id="964695">Ajout du code concernant les ressources dans le fichier <strong>SceneOpenGL.cpp</strong></p></li><li id="r-964698" data-claire-element-id="964698"><p id="r-964697" data-claire-element-id="964697">Modification des <strong>en-têtes</strong></p></li></ul><p id="r-964700" data-claire-element-id="964700">Vous êtes maintenant capables de coder avec <strong>OpenGL 3.2</strong> sur votre Mac. ;)</p><figure id="r-964702" data-claire-element-id="964703"><img id="r-964701" data-claire-element-id="964701" src="medias/uploads.siteduzero.com_files_417001_418000_417751.jpg" alt="Image utilisateur"/></figure><p id="r-964704" data-claire-element-id="964704"><strong>Télécharger (Windows, UNIX/Linux et Mac) : <a href="https://dl.dropboxusercontent.com/s/3j24a95gw9d9myd/Les Vertex Array Objects.zip?token_hash=AAGVb8Jnekcvg7otz8j2ZwEwYArF2_rOJ4Bns4VXdjMJDA&amp;dl=1">Code Source C++ des Vertex Array Objects</a></strong></p><p id="r-964705" data-claire-element-id="964705">Nous avons vu ce que sont les <strong>VAO</strong> et comment ils fonctionnement. Ils sont très proches des <strong>VBO</strong> et s'utilisent même conjointement avec eux.</p><p id="r-964706" data-claire-element-id="964706">Grâce à ces deux notions, <em>OpenGL</em> possède tout ce qu'il faut à portée de main vu que tout se trouve dans la carte graphique. Les seules choses qu'il a besoin d'aller chercher dans la RAM, ce sont les textures. Cependant nous pouvons régler ce problème en utilisant les <strong>Texture Buffer Objects</strong> (<strong>TBO</strong>) qui permettent de stocker des textures directement dans la carte graphique. Mais bon, nous ne verrons pas ça pour le moment vous allez me faire une overdose sinon. :p</p><p id="r-964707" data-claire-element-id="964707">Si je peux vous donner une bonne nouvelle c'est que vous avez acquis assez d'expérience avec OpenGL pour pouvoir apprendre les <strong>shaders</strong>. Nous commencerons à les attaquer en profondeur dès le prochain chapitre. Vous serez alors capables de créer votre propre classe <em><strong>Shader</strong></em>. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
<span class="arrow"></span>
<span class="next">Un autre exemple</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">
<span class="next">La compilation de shaders</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lacompilationdeshaders"></a><h2>La compilation de shaders</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
<span class="arrow"></span>
<span class="next">OpenGL 3.3 et Mac OS X</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
<span class="next">Piqûre de rappel</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-964712" data-claire-element-id="964712">Re-bonjour à tous !</p><p id="r-964713" data-claire-element-id="964713">Aujourd'hui, nous allons attaquer un gros morceau de la programmation OpenGL, je vous conseille de préparer le café, le chocolat, les biscuits, etc. :p</p><p id="r-964714" data-claire-element-id="964714">Les <em><strong>shaders</strong></em> sont quelque chose d'assez monstrueux, nous allons les étudier à travers 4 chapitres (et encore sans parler des effets que l'on pourra faire avec) dont le premier est consacré à une classe que l'on utilise presque depuis le début du tutoriel sans jamais avoir vu son fonctionnement. ;)</p>
</div><a name="Piqrederappel"></a><h2>Piqûre de rappel</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">
<span class="arrow"></span>
<span class="next">La compilation de shaders</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
<span class="next">Compilation des sources</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-introduction-126" data-claire-element-id="964720">Introduction</h2><p id="r-964715" data-claire-element-id="964715">Depuis quasiment le début du tutoriel, nous utilisons une classe dans tous nos programmes sans même que nous sachions ce qu'il y a à l'intérieur. Je parle évidemment de la classe <em><strong>Shader</strong></em>.</p><p id="r-964716" data-claire-element-id="964716">En effet, que ce soit des couleurs ou des textures nous utilisons toujours cette classe pour afficher quelque chose à l'écran :</p><pre id="r-964717" data-claire-element-id="964717"><code data-claire-semantic="cpp">// Shader pour la colorisation

Shader shaderCouleur(&quot;Shaders/couleurs.vert&quot;, &quot;Shaders/couleurs.frag&quot;);
shaderCouleur.charger();



.....



// Shader pour les textures

Shader shaderTexture(&quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;);
shaderTexture.charger();</code></pre><p id="r-964718" data-claire-element-id="964718">La question que vous vous êtes déjà probablement posée est : que fait cette mystérieuse classe ?<br/> Je vous rassure elle ne fait rien de compliqué. En fait, elle ne fait qu'une seule chose : compiler les fichiers sources qu'on lui envoie.</p><p id="r-964719" data-claire-element-id="964719">L'objectif de ce chapitre va être la <strong>reprogrammation</strong> complète de cette classe de façon à ce que vous appreniez comment créer et utiliser un <strong>shader</strong>. A la fin, vous serez en mesure de comprendre totalement votre code source, il n'y aura plus de code mystère. ;) Mais avant cela, nous allons faire un petit rappel sur ce que nous savons déjà sur le <strong>shaders</strong>.</p><h2 id="r-rappel-10" data-claire-element-id="964759">Rappel</h2><h3 id="r-vertex-et-fragment-shader" data-claire-element-id="964746">Vertex et Fragment Shader</h3><p id="r-964721" data-claire-element-id="964721">Comme nous l'avons vu dans le chapitre <strong>4</strong>, nous savons que les <strong>shaders</strong> sont des programmes qui sont exécutés non pas par le CPU mais par la carte graphique. Il en existe deux types :</p><ul id="r-964726" data-claire-element-id="964726"><li id="r-964723" data-claire-element-id="964723"><p id="r-964722" data-claire-element-id="964722"><strong>Le Vertex Shader</strong> : qui prend chaque vertex à part pour calculer sa position à l'écran. Si un vertex possède 3 coordonnées, alors le <strong>Vertex Shader</strong> aura besoin des matrices <em><strong>projection</strong></em> et <em><strong>modelview</strong></em> pour faire le calcul.</p></li><li id="r-964725" data-claire-element-id="964725"><p id="r-964724" data-claire-element-id="964724"><strong>Le Fragment Shader</strong> (ou <strong>Pixel Shader</strong>) : qui prend à part chaque pixel des triangles formés par les vertices pour définir sa couleur. Si on utilise une texture, alors le <strong>Fragment Shader</strong> va chercher à l'intérieur de cette texture la couleur dont il a besoin.</p></li></ul><p id="r-964727" data-claire-element-id="964727">Ces deux types de <strong>shader</strong> sont utilisés à deux moments différents du <strong>pipeline 3D</strong> :</p><figure id="r-964729" data-claire-element-id="964730"><img id="r-964728" data-claire-element-id="964728" src="medias/uploads.siteduzero.com_files_282001_283000_282507.jpg" alt="Image utilisateur"/></figure><p id="r-964731" data-claire-element-id="964731">Pour rappel :</p><ul id="r-964744" data-claire-element-id="964744"><li id="r-964733" data-claire-element-id="964733"><p id="r-964732" data-claire-element-id="964732"><strong>Définition des coordonnées</strong> : Ce sont les vertices et toutes les données qui y sont associées. Depuis peu, tout ça se trouve dans la carte graphique grâce aux <strong>VBO</strong>.</p></li><li id="r-964735" data-claire-element-id="964735"><p id="r-964734" data-claire-element-id="964734"><strong>Vertex Shader</strong> : Shader qui travaille sur les vertices</p></li><li id="r-964737" data-claire-element-id="964737"><p id="r-964736" data-claire-element-id="964736"><strong>Pixelisation des triangles</strong> : Moment où une forme géométrique (formée par les vertices) est convertie en pixels</p></li><li id="r-964739" data-claire-element-id="964739"><p id="r-964738" data-claire-element-id="964738"><strong>Fragment Shader</strong> : Shader qui travaille sur les pixels</p></li><li id="r-964741" data-claire-element-id="964741"><p id="r-964740" data-claire-element-id="964740"><strong>Test de profondeur</strong> : Test qui permet d'afficher ou de cacher un pixel</p></li><li id="r-964743" data-claire-element-id="964743"><p id="r-964742" data-claire-element-id="964742"><strong>Affichage</strong> : Sortie de la carte graphique (en général, il s'agit de l'écran)</p></li></ul><p id="r-964745" data-claire-element-id="964745">Au final, nous voyons que les shaders sont exécutés à deux moments : une fois pour transformer les vertices et une autre pour définir leur couleur.</p><h3 id="r-geometry-shader-1" data-claire-element-id="964749">Geometry Shader</h3><p id="r-964747" data-claire-element-id="964747">En réalité, les shaders devraient être exécutés 3 fois car il existe un troisième type qui s'appelle le <strong>Geometry Shader</strong> qui vient se placer juste entre les deux premiers. Celui-ci permet de modifier les primitives (triangles, ...) formées par les vertices. Cependant, nous ne l'utiliserons pas d'une part parce qu'il est optionnel et d'autre part car il est quasiment inutile pour nous. :p</p><p id="r-964748" data-claire-element-id="964748">Soit dit en passant, ce nouveau type a été introduit avec la version <strong>3.2</strong> d'<strong>OpenGL</strong>.</p><h3 id="r-utilite-19" data-claire-element-id="964753">Utilité</h3><p id="r-964750" data-claire-element-id="964750">Les shaders ne se limitent pas au positionnement de vertices ou à la colorisation de pixels, ils permettent aussi de créer une multitude d'effets réalistes comme l'eau, la lumière, le feu, ... (ce que vous n'avez surement pas oublié je pense :p ). D'ailleurs, c'est certainement leur première utilité dans le monde du jeu-vidéo. Nous consacrerons une partie entière de ce tutoriel à l'élaboration de ces effets.</p><p id="r-964751" data-claire-element-id="964751">Depuis la version <strong>3.1</strong> d'<strong>OpenGL</strong>, l'utilisation des shaders est devenue obligatoire car les développeurs de l'API ont introduit une nouvelle philosophie : celle du '<em><strong>tout shader</strong></em>'. Dans les précédentes versions, OpenGL gérait lui-même tout le <strong>pipeline 3D</strong> sans rien demander à personne mises à part les données de base comme les vertices. Seulement, cette gestion est devenue trop lourde aujourd'hui, les développeurs de l'API préfèrent nous laisser gérer le maximum de tâches de façon à ce que nous les optimisions mieux en fonction de ce que nous voulons faire.</p><p id="r-964752" data-claire-element-id="964752">Cette philosophie complique grandement l'apprentissage d'OpenGL, c'est pour ça que nous n'avons pas vu les shaders tout de suite, sinon le tuto aurait été beaucoup plus complexe à suivre. Vous m'auriez surement fait une overdose avant même d'avoir atteint le chapitre sur les matrices. :lol:</p><h3 id="r-la-classe-shader" data-claire-element-id="964758">La classe Shader</h3><p id="r-964754" data-claire-element-id="964754">Enfin, maintenant que vous avez acquis assez d'expérience avec la programmation OpenGL, nous allons pouvoir voir en détails le fonctionnement des shaders. Nous commencerons en premier par étudier la fameuse classe <em><strong>Shader</strong></em>. Et comme je vous l'ai dit précédemment, elle ne fait rien de magique, elle ne fait que compiler du code source.</p><p id="r-964755" data-claire-element-id="964755">Car oui, comme tout programme qui se respecte, les shaders possèdent bel et bien un code source. La seule différence avec les programmes classiques c'est qu'il est compilé juste avant d'être utilisé et pas avant, il n'y a donc pas d'application de type <strong>.exe</strong> à donner à votre carte graphique. D'ailleurs en parlant de ça, ces codes sources sont écrits avec un langage proche du C++ (ou plutôt du C) qui s'appelle l'<strong>OpenGL Shading Language</strong> (ou <strong>GLSL</strong>). Nous l'étudierons dans le prochain chapitre, nous devons savoir avant comment le compiler. ;)</p><aside id="r-964757" data-claire-element-id="964757" data-claire-semantic="information"><p id="r-964756" data-claire-element-id="964756">Il faut bien faire la différence entre la <em><strong>COMPILATION</strong></em> de shaders et leur <em><strong>PROGRAMMATION</strong></em>. Ce que nous voyons dans ce chapitre concerne uniquement la compilation, ne confondez pas.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">
<span class="arrow"></span>
<span class="next">La compilation de shaders</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
<span class="next">Compilation des sources</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Compilationdessources"></a><h2>Compilation des sources</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
<span class="arrow"></span>
<span class="next">Piqûre de rappel</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
<span class="next">Création du programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-la-classe-shader-1" data-claire-element-id="964781">La classe Shader</h2><p id="r-964761" data-claire-element-id="964761">Bien, après cette brève introduction j'espère vous avoir mis un peu l'eau à la bouche. :p</p><p id="r-964762" data-claire-element-id="964762">Il est temps de passer à la reprogrammation complète de la classe <em><strong>Shader</strong></em>, je vais vous demander de supprimer les fichiers <strong>Shader.h</strong> et <strong>Shader.cpp</strong> que vous utilisez actuellement et d'en recréer deux nouveaux (avec le même nom bien sûr). Si vous essayez de compiler votre code après ça, vous devriez avoir une belle petite erreur de compilation. ^^</p><p id="r-964763" data-claire-element-id="964763">Bref, on commence cette reprogrammation par le header en incluant tous les en-têtes nécessaires : ceux d'<strong>OpenGL</strong>, d'<strong>iostream </strong>et de <strong>string</strong>. Nous n'aurons pas besoin de ceux de la SDL car ils n'ont aucun rapport avec les shaders :</p><pre id="r-964764" data-claire-element-id="964764"><code data-claire-semantic="cpp">#ifndef DEF_SHADER
#define DEF_SHADER


// Include Windows

#ifdef WIN32
#include &lt;GL/glew.h&gt;


// Include Mac

#elif __APPLE__
#define GL3_PROTOTYPES 1
#include &lt;OpenGL/gl3.h&gt;


// Include UNIX/Linux

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif


// Includes communs

#include &lt;iostream&gt;
#include &lt;string&gt;

#endif</code></pre><aside id="r-964766" data-claire-element-id="964766" data-claire-semantic="information"><p id="r-964765" data-claire-element-id="964765">Remarquez l'en-tête pour Mac OS X qui permet de rendre nos projets compatibles avec cet OS. ;)</p></aside><p id="r-964767" data-claire-element-id="964767">Après les inclusions, on passe à la classe en elle-même. Elle possèdera 3 attributs majeurs : des variables de type <em><strong>GLuint</strong></em> représentant le Vertex Shader, le Fragment Shader et un programme. Nous ajouterons également le constructeur par défaut ainsi que le destructeur :</p><pre id="r-964768" data-claire-element-id="964768"><code data-claire-semantic="cpp">// Classe Shader

class Shader
{
    public:

    Shader();
    ~Shader();


    private:

    GLuint m_vertexID;
    GLuint m_fragmentID;
    GLuint m_programID;
};</code></pre><div id="r-964770" data-claire-element-id="964770" data-claire-semantic="question"><p id="r-964769" data-claire-element-id="964769">Ah <strong>programID</strong> ? C'est le truc qu'on utilise dans la fonction <strong>glUseProgram</strong>() non ?</p></div><p id="r-964771" data-claire-element-id="964771">Oui tout à fait. ^^</p><p id="r-964772" data-claire-element-id="964772">Comme vous le savez un shader est un programme, c'est pour cette raison que nous avons cet attribut. Remarquez aussi que les 3 variables présentées sont en fait des <em>objets OpenGL</em> car elles ont le type <em><strong>GLuint</strong></em> au même titre que les textures, les VBO ou les VAO.</p><p id="r-964773" data-claire-element-id="964773">Nous allons également rajouter un autre constructeur à cette classe. C'est un constructeur que vous connaissez par cœur car c'est celui qui demande en paramètre le chemin vers les deux codes sources shaders. Son prototype est le suivant :</p><pre id="r-964774" data-claire-element-id="964774"><code data-claire-semantic="cpp">Shader(std::string vertexSource, std::string fragmentSource);</code></pre><p id="r-964775" data-claire-element-id="964775">Il prend en paramètre deux string représentant le chemin vers les codes sources spécifiés. Nous aurons besoin de deux attributs supplémentaires pour les gérer dans la classe. ;)</p><p id="r-964776" data-claire-element-id="964776">Nous rajoutons donc deux variables <strong>m_vertexSource</strong> et <strong>m_fragmentSource</strong> de type <strong><em>string</em></strong> dans le header :</p><pre id="r-964777" data-claire-element-id="964777"><code data-claire-semantic="cpp">// Attributs

GLuint m_vertexID;
GLuint m_fragmentID;
GLuint m_programID;

std::string m_vertexSource;
std::string m_fragmentSource;</code></pre><p id="r-964778" data-claire-element-id="964778">Si on récapitule tout ça :</p><pre id="r-964779" data-claire-element-id="964779"><code data-claire-semantic="cpp">#ifndef DEF_SHADER
#define DEF_SHADER


// Include Windows

#ifdef WIN32
#include &lt;GL/glew.h&gt;


// Include Mac

#elif __APPLE__
#define GL3_PROTOTYPES 1
#include &lt;OpenGL/gl3.h&gt;


// Include UNIX/Linux

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif


// Includes communs

#include &lt;iostream&gt;
#include &lt;string&gt;


// Classe Shader

class Shader
{
    public:

    Shader();
    Shader(std::string vertexSource, std::string fragmentSource);
    ~Shader();


    private:

    GLuint m_vertexID;
    GLuint m_fragmentID;
    GLuint m_programID;

    std::string m_vertexSource;
    std::string m_fragmentSource;
};

#endif</code></pre><p id="r-964780" data-claire-element-id="964780">Header terminé. ^^</p><h2 id="r-les-constructeurs-et-le-destructeur-1" data-claire-element-id="964789">Les constructeurs et le destructeur</h2><p id="r-964782" data-claire-element-id="964782">Maintenant que le header de la classe est terminé, on va pouvoir passer à son implémentation. Et comme d'habitude, on commence par les constructeurs et le destructeur.</p><p id="r-964783" data-claire-element-id="964783">Le premier est le constructeur par défaut, qui ne fait rien de particulier d'ailleurs :</p><pre id="r-964784" data-claire-element-id="964784"><code data-claire-semantic="cpp">// Constructeur par défaut

Shader::Shader() : m_vertexID(0), m_fragmentID(0), m_programID(0), m_vertexSource(), m_fragmentSource()
{
}</code></pre><p id="r-964785" data-claire-element-id="964785">Le second, lui, fera la même chose sauf qu'il affectera les sources avec les <strong>string</strong> donnés en paramètres :</p><pre id="r-964786" data-claire-element-id="964786"><code data-claire-semantic="cpp">// Constructeur

Shader::Shader(std::string vertexSource, std::string fragmentSource) : m_vertexID(0), m_fragmentID(0), m_programID(0),
                                                                       m_vertexSource(vertexSource), m_fragmentSource(fragmentSource)
{
}</code></pre><p id="r-964787" data-claire-element-id="964787">Quant au destructeur, vous savez maintenant ce qui se trouve à l'intérieur. Mais attention ! Celui-ci ne restera pas vide longtemps. :p</p><pre id="r-964788" data-claire-element-id="964788"><code data-claire-semantic="cpp">// Destructeur

Shader::~Shader()
{
}</code></pre><h2 id="r-la-methode-getprogramid" data-claire-element-id="964794">La méthode getProgramID</h2><p id="r-964790" data-claire-element-id="964790">L'attribut <strong>m_programID</strong> est quelque chose que l'on utilise assez souvent, notamment pour activer les shaders. Nous allons recoder le getter qui permet de le récupérer et qui s'appelle <strong>getProgramID</strong>() :</p><pre id="r-964791" data-claire-element-id="964791"><code data-claire-semantic="cpp">GLuint getProgramID() const;</code></pre><p id="r-964792" data-claire-element-id="964792">Son implémentation se passe de commentaire :</p><pre id="r-964793" data-claire-element-id="964793"><code data-claire-semantic="cpp">GLuint Shader::getProgramID() const
{
    return m_programID;
}</code></pre><h2 id="r-la-methode-charger-partie-1-2" data-claire-element-id="964827">La méthode charger (Partie 1/2)</h2><p id="r-964795" data-claire-element-id="964795">La méthode <strong>charger</strong>() va être la principale méthode de cette classe. En effet, vous avez surement remarqué qu'on l'utilise à chaque fois que l'on veut initialiser un <strong>shader</strong> :</p><pre id="r-964796" data-claire-element-id="964796"><code data-claire-semantic="cpp">// Shader Texture

shaderTexture(&quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;);
shaderTexture.charger();</code></pre><p id="r-964797" data-claire-element-id="964797">Son prototype est assez simple vu qu'elle ne demande rien en paramètre :</p><pre id="r-964798" data-claire-element-id="964798"><code data-claire-semantic="cpp">bool charger();</code></pre><p id="r-964799" data-claire-element-id="964799">Elle renverra un booléen pour confirmer ou non le chargement du shader.</p><p id="r-964800" data-claire-element-id="964800">Cependant, contrairement à son prototype, la méthode <strong>charger</strong>() ne sera pas aussi simple à programmer. Elle devra être capable de faire plusieurs choses :</p><ul id="r-964807" data-claire-element-id="964807"><li id="r-964802" data-claire-element-id="964802"><p id="r-964801" data-claire-element-id="964801"><strong>Compiler</strong> le code source du Vertex Shader</p></li><li id="r-964804" data-claire-element-id="964804"><p id="r-964803" data-claire-element-id="964803"><strong>Compiler</strong> le code source du Fragment Shader</p></li><li id="r-964806" data-claire-element-id="964806"><p id="r-964805" data-claire-element-id="964805"><strong>Réunir</strong> les fichiers compilés dans un seul et même programme</p></li></ul><p id="r-964808" data-claire-element-id="964808">Pour effectuer les deux premières étapes, nous allons créer une autre méthode qui permettra de compiler le code source d'un shader. Il vaut mieux séparer la compilation du reste du code car vous allez voir que c'est un peu ... long. :p Cette nouvelle méthode s'appellera simplement <strong>compilerShader</strong>() :</p><pre id="r-964809" data-claire-element-id="964809"><code data-claire-semantic="cpp">bool compilerShader(GLuint &amp;shader, GLenum type, std::string const &amp;fichierSource);</code></pre><p id="r-964810" data-claire-element-id="964810">Elle aura besoin de 3 paramètres :</p><ul id="r-964817" data-claire-element-id="964817"><li id="r-964812" data-claire-element-id="964812"><p id="r-964811" data-claire-element-id="964811"><strong>shader</strong> : Le shader à compiler</p></li><li id="r-964814" data-claire-element-id="964814"><p id="r-964813" data-claire-element-id="964813"><strong>type</strong> : Un paramètre semblable au paramètre <strong>target</strong> des <em>objets OpenGL</em> (comme <strong>GL_TEXTURE_2D</strong>) pour définir le type de shader. Il peut prendre la valeur <strong>GL_VERTEX_SHADER</strong> ou <strong>GL_FRAGMENT_SHADER</strong></p></li><li id="r-964816" data-claire-element-id="964816"><p id="r-964815" data-claire-element-id="964815"><strong>fichierSource</strong> : Le code source associé au shader</p></li></ul><p id="r-964818" data-claire-element-id="964818">Un booléen sera également retourné pour confirmer ou non la réussite de la compilation.</p><p id="r-964819" data-claire-element-id="964819">Nous devons appeler cette nouvelle méthode deux fois afin de compiler nos deux codes sources. Le premier appel devra compiler un shader contenu dans l'attribut <strong>m_vertexID</strong> et dont le code source sera évidemment identifié par <strong>m_vertexSource</strong>. Le paramètre <strong>type</strong> sera quant à lui égal à la constante <em><strong>GL_VERTEX_SHADER</strong></em>. On n'oublie pas de vérifier le retour dans un bloc <strong>if</strong> :</p><pre id="r-964820" data-claire-element-id="964820"><code data-claire-semantic="cpp">bool Shader::charger()
{
    // Compilation du Vertex Shader

    if(!compilerShader(m_vertexID, GL_VERTEX_SHADER, m_vertexSource))
        return false;
}</code></pre><p id="r-964821" data-claire-element-id="964821">Le second appel à cette méthode s'occupera cette fois du Fragment Shader. On lui donnera en paramètres les attributs <strong>m_fragmentID</strong> et <strong>m_fragmentSource</strong>. Le paramètre <strong>type</strong> sera égal à la constante <strong><em>GL_FRAGMENT_SOURCE</em></strong> :</p><pre id="r-964822" data-claire-element-id="964822"><code data-claire-semantic="cpp">bool Shader::charger()
{
    // Compilation des shaders

    if(!compilerShader(m_vertexID, GL_VERTEX_SHADER, m_vertexSource))
        return false;

    if(!compilerShader(m_fragmentID, GL_FRAGMENT_SHADER, m_fragmentSource))
        return false;
}</code></pre><div id="r-964824" data-claire-element-id="964824" data-claire-semantic="question"><p id="r-964823" data-claire-element-id="964823">On ne retourne pas de message d'erreur ?</p></div><p id="r-964825" data-claire-element-id="964825">Si justement, les messages d'erreurs seront en fait affichés par la méthode <strong>compilerShader</strong>() car c'est à elle de dire si quelque chose ne va pas. Il est très important de vérifier les erreurs de compilation avec les shaders car nous n'avons pas d'IDE pour nous dire où elles seraient. Ce peut devenir vite embêtant si vous perdez trop de temps à chercher les erreurs par vous-même.</p><p id="r-964826" data-claire-element-id="964826">D'ailleurs la vérification de messages d'erreurs est quelque chose ... d'assez folklo à programmer vous verrez. :lol:</p><h2 id="r-la-methode-compilershader" data-claire-element-id="964936">La méthode compilerShader</h2><h3 id="r-creer-un-shader" data-claire-element-id="964846">Créer un shader</h3><p id="r-964828" data-claire-element-id="964828">Nous connaissons déjà le prototype ce cette méthode et nous savons également qu'elle a besoin de 3 paramètres :</p><pre id="r-964829" data-claire-element-id="964829"><code data-claire-semantic="cpp">bool compilerShader(GLuint &amp;shader, GLenum type, std::string const &amp;fichierSource);</code></pre><p id="r-964830" data-claire-element-id="964830">Cette méthode devra être capable de faire plusieurs choses :</p><ul id="r-964837" data-claire-element-id="964837"><li id="r-964832" data-claire-element-id="964832"><p id="r-964831" data-claire-element-id="964831">Générer un ID de shader</p></li><li id="r-964834" data-claire-element-id="964834"><p id="r-964833" data-claire-element-id="964833">Lire son code source</p></li><li id="r-964836" data-claire-element-id="964836"><p id="r-964835" data-claire-element-id="964835">Le compiler</p></li></ul><p id="r-964838" data-claire-element-id="964838">La première étape va être très simple à réaliser car elle est très similaire à la création des autres <em>objets OpenGL</em>. Si je dis similaire, c'est parce que nous n'allons pas utiliser les fonctions classiques du type <strong>glGenXXX</strong>(), <strong>glBindXXX</strong>(), ... comme nous avons l'habitude de faire. Les shaders sont des <em>objets</em> un peu particuliers qui vont utiliser leurs propres fonctions. De plus, ils ne doivent pas être verrouillés pendant leur configuration mais seulement au moment de leur utilisation.</p><p id="r-964839" data-claire-element-id="964839">En définitif, nous ne devons pas utiliser la fonction <strong>glGenShaders</strong>() pour générer un ID mais la fonction <strong>glCreateShader</strong>() :</p><pre id="r-964840" data-claire-element-id="964840"><code data-claire-semantic="cpp">GLuint glCreateShader(GLenum shaderType);</code></pre><p id="r-964841" data-claire-element-id="964841">Elle prend en paramètre une constante qui peut prendre la valeur <strong>GL_VERTEX_SHADER</strong> ou <strong>GL_FRAGMENT_SHADER</strong>. Nous lui donnerons la valeur du paramètre <strong>type</strong> de la méthode <strong>compilerShader</strong>().</p><p id="r-964842" data-claire-element-id="964842">Nous appellerons cette fonction en affectant la valeur retournée au paramètre <strong>shader</strong> :</p><pre id="r-964843" data-claire-element-id="964843"><code data-claire-semantic="cpp">bool Shader::compilerShader(GLuint &amp;shader, GLenum type, std::string const &amp;fichierSource)
{
    // Création du shader

    shader = glCreateShader(type);
}</code></pre><p id="r-964844" data-claire-element-id="964844">Vu que nous utilisons un paramètre externe à la méthode pour définir le <strong>type</strong> de shader, il est donc possible possible que ce paramètre contienne une valeur erronée. Nous devons donc vérifier l'<em><strong>ID</strong></em> retourné par la fonction <strong>glCreateShader</strong>(). S'il est égal à <strong>0</strong> c'est qu'il y a eu un problème, il faut donc arrêter le chargement :</p><pre id="r-964845" data-claire-element-id="964845"><code data-claire-semantic="cpp">// Vérification du shader

if(shader == 0)
{
    std::cout &lt;&lt; &quot;Erreur, le type de shader (&quot; &lt;&lt; type &lt;&lt; &quot;) n'existe pas&quot; &lt;&lt; std::endl;
    return false;
}</code></pre><h3 id="r-lecture-du-code-source" data-claire-element-id="964865">Lecture du code source</h3><p id="r-964847" data-claire-element-id="964847">La lecture du coude source est quelque chose de capital dans la création d'un shader. Sans lui, notre programme ne serait pas quoi faire et la carte graphique nous enverrait gentiment paitre. :-°</p><p id="r-964848" data-claire-element-id="964848">Nous devons lire les codes sources dont les chemins sont contenus dans les attributs <strong>m_vertexSource</strong> et <strong>m_fragmentSource</strong>. Pour cela, nous allons utiliser la bibliothèque <em><strong>fstream</strong></em> qui permet de la lecture et l'écriture de fichier en C++, je suppose que vous la connaissez déjà. :p Pensez à inclure l'en-tête <em><strong>fstream</strong></em> dans le fichier <strong>Shader.h</strong>.</p><p id="r-964849" data-claire-element-id="964849">Pour utiliser cette bibliothèque, nous allons commencer par déclarer un objet de type <em><strong>ifstream</strong></em> que nous appellerons simplement fichier. Son constructeur demande une chaine C représentant le chemin vers le fichier à lire, nous lui donnerons donc la chaine C du paramètre <strong>fichierSource</strong> de la méthode <strong>compilerShader</strong>() :</p><pre id="r-964850" data-claire-element-id="964850"><code data-claire-semantic="cpp">// Flux de lecture

std::ifstream fichier(fichierSource.c_str());</code></pre><p id="r-964851" data-claire-element-id="964851">Avant de continuer, nous devons tester l'ouverture du fichier au cas où celui-ci n'existerait pas. Si c'est le cas alors on arrête le chargement, on affiche un message d'erreur et on détruit le shader que l'on a créé juste avant.</p><p id="r-964852" data-claire-element-id="964852">La fonction permettant de détruire un shader ressemble fortement aux fonctions du type <strong>glDeleteXXX</strong>() sauf qu'elle ne prend pas deux paramètres mais un seul, elle n'a également pas de <strong>s</strong> à la fin de son nom :</p><pre id="r-964853" data-claire-element-id="964853"><code data-claire-semantic="cpp">glDeleteShader(GLuint shader);</code></pre><p id="r-964854" data-claire-element-id="964854">Bien évidemment, elle prend en paramètre le shader à détruire.</p><p id="r-964855" data-claire-element-id="964855">Avec cette fonction et le code précédent, notre test d'ouverture ressemble donc à ceci :</p><pre id="r-964856" data-claire-element-id="964856"><code data-claire-semantic="cpp">// Flux de lecture

std::ifstream fichier(fichierSource.c_str());


// Test d'ouverture

if(!fichier)
{
    std::cout &lt;&lt; &quot;Erreur le fichier &quot; &lt;&lt; fichierSource &lt;&lt; &quot; est introuvable&quot; &lt;&lt; std::endl;
    glDeleteShader(shader);

    return false;
}</code></pre><p id="r-964857" data-claire-element-id="964857">Si le fichier s'est ouvert correctement alors nous pouvons copier son contenu sans problème. Pour cela, nous allons utiliser la fonction <strong>getline</strong>() qui permet de copier une ligne entière d'un fichier. Nous l’utiliserons à l'intérieur d'une boucle <strong>while</strong>, ce qui permettra de copier le code source ligne par ligne. ;)</p><p id="r-964858" data-claire-element-id="964858">Nous aurons besoin de deux <em><strong>string</strong></em> pour cette boucle : une qui contiendra chaque ligne lue, et une autre qui contiendra le code source final :</p><pre id="r-964859" data-claire-element-id="964859"><code data-claire-semantic="cpp">// Strings permettant de lire le code source

std::string ligne;
std::string codeSource;


// Lecture

while(getline(fichier, ligne))
    codeSource += ligne + '\n';</code></pre><p id="r-964860" data-claire-element-id="964860">N'oubliez pas l'inclure le caractère de saut de ligne <strong>'\n'</strong> à la fin de chaque copie, sinon votre code source ne sera constitué que d'une gigantesque ligne incompréhensible. :p</p><p id="r-964861" data-claire-element-id="964861">Une fois la lecture terminée, on n'oublie pas de fermer le fichier pour éviter les fuites de mémoire :</p><pre id="r-964862" data-claire-element-id="964862"><code data-claire-semantic="cpp">// Strings permettant de lire le code source

std::string ligne;
std::string codeSource;


// Lecture

while(getline(fichier, ligne))
    codeSource += ligne + '\n';


// Fermeture du fichier

fichier.close();</code></pre><p id="r-964863" data-claire-element-id="964863">On fait un petit récap de ce que nous avons fait jusqu'à maintenant :</p><pre id="r-964864" data-claire-element-id="964864"><code data-claire-semantic="cpp">bool Shader::compilerShader(GLuint &amp;shader, GLenum type, std::string const &amp;fichierSource)
{
    // Création du shader

    shader = glCreateShader(type);


    // Vérification du shader

    if(shader == 0)
    {
        std::cout &lt;&lt; &quot;Erreur, le type de shader (&quot; &lt;&lt; type &lt;&lt; &quot;) n'existe pas&quot; &lt;&lt; std::endl;
        return false;
    }


    // Flux de lecture

    std::ifstream fichier(fichierSource.c_str());


    // Test d'ouverture

    if(!fichier)
    {
        std::cout &lt;&lt; &quot;Erreur le fichier &quot; &lt;&lt; fichierSource &lt;&lt; &quot; est introuvable&quot; &lt;&lt; std::endl;
        glDeleteShader(shader);

        return false;
    }


    // Strings permettant de lire le code source

    std::string ligne;
    std::string codeSource;


    // Lecture

    while(getline(fichier, ligne))
        codeSource += ligne + '\n';


    // Fermeture du fichier

    fichier.close();
}</code></pre><h3 id="r-compilation-du-shader" data-claire-element-id="964889">Compilation du shader</h3><p id="r-964866" data-claire-element-id="964866">Faisons le point sur ce que nous avons fait jusqu'à présent : nous avons créé un shader et lu un code source qui se trouve maintenant en mémoire. Le problème c'est que les deux sont totalement dissociés pour le moment. Notre prochain objectif est donc d'envoyer ce code source à notre shader pour qu'il puisse enfin recevoir ses instructions.</p><p id="r-964867" data-claire-element-id="964867">Pour cela, nous allons utiliser une fonction OpenGL qui s'appelle <strong>glShaderSource</strong>() :</p><pre id="r-964868" data-claire-element-id="964868"><code data-claire-semantic="cpp">void glShaderSource(GLuint shader, GLsizei count, const GLchar **string, const GLint *length)</code></pre><ul id="r-964877" data-claire-element-id="964877"><li id="r-964870" data-claire-element-id="964870"><p id="r-964869" data-claire-element-id="964869"><strong>shader</strong> : Le shader concerné</p></li><li id="r-964872" data-claire-element-id="964872"><p id="r-964871" data-claire-element-id="964871"><strong>count</strong> : Paramètre indiquant le nombre de chaines de caractère à envoyer. Nous lui donnerons la valeur <strong>1</strong> car notre code source n'est composé que d'une seule <em><strong>string</strong></em></p></li><li id="r-964874" data-claire-element-id="964874"><p id="r-964873" data-claire-element-id="964873"><strong>string</strong> : Sorte de &quot;<strong>double pointeur</strong>&quot; représentant un tableau de sous-chaines de caractère. :-° Nous utiliserons une petite astuce pour ne lui donner qu'une seule chaine</p></li><li id="r-964876" data-claire-element-id="964876"><p id="r-964875" data-claire-element-id="964875"><strong>length</strong> : Tableau de taille des sous-chaines. Heureusement pour nous, nous n'aurons pas à utiliser d'astuce car OpenGL nous autorise à envoyer la valeur <strong>0</strong>. Nous n'allons donc pas nous en priver :p</p></li></ul><p id="r-964878" data-claire-element-id="964878">Cette fonction est un peu spéciale vous l'aurez remarqué.</p><p id="r-964879" data-claire-element-id="964879">Cependant, nous pouvons contourner son trop-plein de tableaux en ne fournissant qu'une seule et unique chaine de caractère. Il suffira d'envoyer l'adresse d'une <em><strong>chaine C</strong></em>. En effet, si on envoie l'adresse d'une chaine alors on se retrouve avec un pointeur du type <strong>**chaine</strong>. La fonction <strong>glShaderSource</strong>() demande justement cette sorte de double pointeur. ;)</p><p id="r-964880" data-claire-element-id="964880">On commence donc pas récupérer la <em><strong>chaine C</strong></em> du code source dans un pointeur grâce à la méthode <strong>c_str</strong>() :</p><pre id="r-964881" data-claire-element-id="964881"><code data-claire-semantic="cpp">// Récupération de la chaine C du code source

const GLchar* chaineCodeSource = codeSource.c_str();</code></pre><p id="r-964882" data-claire-element-id="964882">Ensuite, nous appelons la fonction <strong>glShaderSource</strong>() avec les paramètres que nous venons de voir. Bien entendu, on pense à donner l'adresse du pointeur <strong>chaineCodeSource</strong> pour contenter le paramètre <strong>string</strong> :</p><pre id="r-964883" data-claire-element-id="964883"><code data-claire-semantic="cpp">// Récupération de la chaine C du code source

const GLchar* chaineCodeSource = codeSource.c_str();


// Envoi du code source au shader

glShaderSource(shader, 1, &amp;chaineCodeSource, 0);</code></pre><p id="r-964884" data-claire-element-id="964884">Notre shader vient enfin de récupérer son code source. :D Il ne manque plus qu'à le compiler.</p><p id="r-964885" data-claire-element-id="964885">Et pour ça, on va utiliser une fonction toute simple (ce qui fait du bien par rapport à la précédente) qui s'appelle <strong>glCompileShader</strong>() :</p><pre id="r-964886" data-claire-element-id="964886"><code data-claire-semantic="cpp">void glCompileShader(GLuint shader);</code></pre><p id="r-964887" data-claire-element-id="964887">Elle ne prend qu'un seul paramètre : le shader à compiler. Nous l’appelons juste après avoir envoyé le code source :</p><pre id="r-964888" data-claire-element-id="964888"><code data-claire-semantic="cpp">// Récupération de la chaine C du code source

const GLchar* chaineCodeSource = codeSource.c_str();


// Envoi du code source au shader

glShaderSource(shader, 1, &amp;chaineCodeSource, 0);


// Compilation du shader

glCompileShader(shader);</code></pre><h3 id="r-verification-de-la-compilation" data-claire-element-id="964935">Vérification de la compilation</h3><p id="r-964890" data-claire-element-id="964890">La vérification de la compilation est certainement l'étape la plus importante et la plus chiante de cette partie. Imaginez que vous compiliez un code source et qu'il y ait une erreur à l'intérieur, comment pouvez-vous savoir où elle se trouve ? C'est un problème qui peut devenir vite énervant surtout quand votre erreur n'est qu'un bête oubli de point-virgule. :p Pour éviter d'avoir à relire vos codes sources à chaque fois, nous allons vérifier l'état de leur compilation grâce à quelques fonctions OpenGL.</p><p id="r-964891" data-claire-element-id="964891">La première de ces fonctions va nous permettre de renvoyer pas mal d'informations sur un shader donné, la vérification d'erreur au moment de la compilation en fait justement partie. Elle s'appelle <strong>glGetShaderiv</strong>() :</p><pre id="r-964892" data-claire-element-id="964892"><code data-claire-semantic="cpp">void glGetShaderiv(GLuint shader, GLenum pname, GLint *params);</code></pre><ul id="r-964899" data-claire-element-id="964899"><li id="r-964894" data-claire-element-id="964894"><p id="r-964893" data-claire-element-id="964893"><strong>shader</strong> : Comme toujours, le shader sur lequel on travaille</p></li><li id="r-964896" data-claire-element-id="964896"><p id="r-964895" data-claire-element-id="964895"><strong>pname</strong> : Le nom de l'information demandée</p></li><li id="r-964898" data-claire-element-id="964898"><p id="r-964897" data-claire-element-id="964897"><strong>params</strong> : L'adresse d'une variable qui accueillera cette information</p></li></ul><p id="r-964900" data-claire-element-id="964900">Pour connaitre l'état de la compilation, nous allons créer une variable de type <em><strong>GLint</strong></em> que l'on appellera <strong>erreurCompilation</strong>. Nous donnerons son adresse à la fonction <strong>glGetShaderiv</strong>() pour qu'elle puisse stocker l'information que l'on recherche. D'ailleurs, cette information se nomme <strong>GL_COMPILE_STATUS</strong> et sera la valeur du paramètre <strong>pname</strong> :</p><pre id="r-964901" data-claire-element-id="964901"><code data-claire-semantic="cpp">// Vérification de la compilation

GLint erreurCompilation(0);

glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;erreurCompilation);</code></pre><p id="r-964902" data-claire-element-id="964902">L'appel à cette fonction seule ne sert pas à grand chose, il faut maintenant vérifier la valeur de la variable <strong>erreurCompilation</strong>. ;) Si elle différente de la constante <strong>GL_TRUE</strong> c'est qu'il y a eu une erreur, sinon c'est que tout va bien on peut retourner le booléen <strong>true</strong> pour clore le chargement :</p><pre id="r-964903" data-claire-element-id="964903"><code data-claire-semantic="cpp">// Vérification de la compilation

GLint erreurCompilation(0);
glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;erreurCompilation);


// S'il y a eu une erreur

if(erreurCompilation != GL_TRUE)
{
}


// Sinon c'est que tout s'est bien passé

else
    return true;</code></pre><p id="r-964904" data-claire-element-id="964904">Si la fonction <strong>glGetShaderiv</strong>() a détecté une erreur alors il faut la récupérer.</p><p id="r-964905" data-claire-element-id="964905">Malheureusement, nous ne pouvons pas utiliser les objets <em><strong>string</strong></em> pour cette récupération car les fonctions OpenGL ne gère pas les objets C++. Il faut donc faire à l'ancienne et allouer de la mémoire à la main pour une chaine de caractère. :(</p><p id="r-964906" data-claire-element-id="964906">Mais avant ça, nous devons connaitre la taille du message d'erreur pour pouvoir allouer assez de mémoire. Pour ce faire, nous allons à nouveau utiliser la fonction <strong>glGetShaderiv</strong>() sauf que l'on demandera cette fois le paramètre <strong>GL_INFO_LOG_LENGTH</strong> qui correspond à la taille recherchée. Nous utiliserons la variable <strong>tailleErreur</strong> pour stocker la valeur qui sera retournée :</p><pre id="r-964907" data-claire-element-id="964907"><code data-claire-semantic="cpp">// Vérification de la compilation

GLint erreurCompilation(0);
glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;erreurCompilation);


// S'il y a eu une erreur

if(erreurCompilation != GL_TRUE)
{
    // Récupération de la taille de l'erreur

    GLint tailleErreur(0);
    glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &amp;tailleErreur);
}


// Sinon c'est que tout s'est bien passé

else
    return true;</code></pre><p id="r-964908" data-claire-element-id="964908">Une fois que l'on connait la taille de l'erreur, nous pouvons allouer de la mémoire pour une chaine de caractère grâce au mot-clef <strong>new[]</strong>. On ajoute au passage <strong>1</strong> case pour gérer le caractère de fin de chaine <strong>'\0'</strong> qui n'est pas fourni avec le message d'erreur :</p><pre id="r-964909" data-claire-element-id="964909"><code data-claire-semantic="cpp">// Vérification de la compilation

GLint erreurCompilation(0);
glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;erreurCompilation);


// S'il y a eu une erreur

if(erreurCompilation != GL_TRUE)
{
    // Récupération de la taille de l'erreur

    GLint tailleErreur(0);
    glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &amp;tailleErreur);


    // Allocation de mémoire

    char *erreur = new char[tailleErreur + 1];
}


// Sinon c'est que tout s'est bien passé

else
    return true;</code></pre><p id="r-964910" data-claire-element-id="964910">Maintenant que l'on a une chaine allouée, nous pouvons récupérer la fameuse erreur. Nous utiliserons pour cela la fonction <strong>glGetShaderInfoLog</strong>() :</p><pre id="r-964911" data-claire-element-id="964911"><code data-claire-semantic="cpp">void glGetShaderInfoLog(GLuint shader, GLsizei maxLength, GLsizei *length, GLchar *infoLog);</code></pre><ul id="r-964920" data-claire-element-id="964920"><li id="r-964913" data-claire-element-id="964913"><p id="r-964912" data-claire-element-id="964912"><strong>shader</strong> : Le shader sur lequel on travaille</p></li><li id="r-964915" data-claire-element-id="964915"><p id="r-964914" data-claire-element-id="964914"><strong>maxLength</strong> : Taille de la chaine de caractère qui va accueillir l'erreur. Pour nous, il s'agit de la variable <strong>tailleErreur</strong></p></li><li id="r-964917" data-claire-element-id="964917"><p id="r-964916" data-claire-element-id="964916"><strong>length</strong> : Adresse de la variable qui contiendra la taille précédente. Je n'ai jamais compris l'utilité de ce paramètre mais bon, nous lui donnerons l'adresse de la variable <strong>tailleErreur</strong></p></li><li id="r-964919" data-claire-element-id="964919"><p id="r-964918" data-claire-element-id="964918"><strong>infolog</strong> : La chaine de caractère qui contiendra le message final. Nous lui donnerons la chaine <strong>erreur</strong></p></li></ul><p id="r-964921" data-claire-element-id="964921">L'appel à cette fonction ressemblera à ceci :</p><pre id="r-964922" data-claire-element-id="964922"><code data-claire-semantic="cpp">// Récupération de l'erreur

glGetShaderInfoLog(shader, tailleErreur, &amp;tailleErreur, erreur);</code></pre><p id="r-964923" data-claire-element-id="964923">Il faut également penser à rajouter le caractère de fin de chaine <strong>'\0'</strong> pour compléter le message :</p><pre id="r-964924" data-claire-element-id="964924"><code data-claire-semantic="cpp">// Récupération de l'erreur

glGetShaderInfoLog(shader, tailleErreur, &amp;tailleErreur, erreur);
erreur[tailleErreur] = '\0';</code></pre><p id="r-964925" data-claire-element-id="964925">Ce qui donne au final :</p><pre id="r-964926" data-claire-element-id="964926"><code data-claire-semantic="cpp">// Vérification de la compilation

GLint erreurCompilation(0);
glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;erreurCompilation);


// S'il y a eu une erreur

if(erreurCompilation != GL_TRUE)
{
    // Récupération de la taille de l'erreur

    GLint tailleErreur(0);
    glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &amp;tailleErreur);


    // Allocation de mémoire

    char *erreur = new char[tailleErreur + 1];


    // Récupération de l'erreur

    glGetShaderInfoLog(shader, tailleErreur, &amp;tailleErreur, erreur);
    erreur[tailleErreur] = '\0';
}


// Sinon c'est que tout s'est bien passé

else
    return true;</code></pre><p id="r-964927" data-claire-element-id="964927">On arrive à la fin courage. :p</p><p id="r-964928" data-claire-element-id="964928">Il ne nous reste plus qu'à afficher le message d'erreur et à libérer la mémoire prise par la chaine de caractère. On n'oublie pas de détruire le shader car celui-ci est inutilisable puis on retourne le booléen <strong>false</strong> pour terminer la méthode :</p><pre id="r-964929" data-claire-element-id="964929"><code data-claire-semantic="cpp">// Vérification de la compilation

GLint erreurCompilation(0);
glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;erreurCompilation);


// S'il y a eu une erreur

if(erreurCompilation != GL_TRUE)
{
    // Récupération de la taille de l'erreur

    GLint tailleErreur(0);
    glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &amp;tailleErreur);


    // Allocation de mémoire

    char *erreur = new char[tailleErreur + 1];


    // Récupération de l'erreur

    glGetShaderInfoLog(shader, tailleErreur, &amp;tailleErreur, erreur);
    erreur[tailleErreur] = '\0';


    // Affichage de l'erreur

    std::cout &lt;&lt; erreur &lt;&lt; std::endl;


    // Libération de la mémoire et retour du booléen false

    delete[] erreur;
    glDeleteShader(shader);

    return false;
}


// Sinon c'est que tout s'est bien passé

else
    return true;</code></pre><p id="r-964930" data-claire-element-id="964930">Pfiouu on est enfin arrivé au bout ... Tout ce code pour vérifier une simple erreur ! Et oui, je vous avais prévenus que le chargement des shaders était quelque chose d'assez folklo. :p</p><p id="r-964931" data-claire-element-id="964931">Faisons un petit récapitulatif final de la méthode <strong>compilerShader</strong>() :</p><pre id="r-964932" data-claire-element-id="964932"><code data-claire-semantic="cpp">bool Shader::compilerShader(GLuint &amp;shader, GLenum type, std::string const &amp;fichierSource)
{
    // Création du shader

    shader = glCreateShader(type);


    // Vérification du shader

    if(shader == 0)
    {
        std::cout &lt;&lt; &quot;Erreur, le type de shader (&quot; &lt;&lt; type &lt;&lt; &quot;) n'existe pas&quot; &lt;&lt; std::endl;
        return false;
    }


    // Flux de lecture

    std::ifstream fichier(fichierSource.c_str());


    // Test d'ouverture

    if(!fichier)
    {
        std::cout &lt;&lt; &quot;Erreur le fichier &quot; &lt;&lt; fichierSource &lt;&lt; &quot; est introuvable&quot; &lt;&lt; std::endl;
        glDeleteShader(shader);

        return false;
    }


    // Strings permettant de lire le code source

    std::string ligne;
    std::string codeSource;


    // Lecture

    while(getline(fichier, ligne))
        codeSource += ligne + '\n';


    // Fermeture du fichier

    fichier.close();


    // Récupération de la chaine C du code source

    const GLchar* chaineCodeSource = codeSource.c_str();


    // Envoi du code source au shader

    glShaderSource(shader, 1, &amp;chaineCodeSource, 0);


    // Compilation du shader

    glCompileShader(shader);


    // Vérification de la compilation

    GLint erreurCompilation(0);
    glGetShaderiv(shader, GL_COMPILE_STATUS, &amp;erreurCompilation);


    // S'il y a eu une erreur

    if(erreurCompilation != GL_TRUE)
    {
        // Récupération de la taille de l'erreur

        GLint tailleErreur(0);
        glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &amp;tailleErreur);


        // Allocation de mémoire

        char *erreur = new char[tailleErreur + 1];


        // Récupération de l'erreur

        glGetShaderInfoLog(shader, tailleErreur, &amp;tailleErreur, erreur);
        erreur[tailleErreur] = '\0';


        // Affichage de l'erreur

        std::cout &lt;&lt; erreur &lt;&lt; std::endl;


        // Libération de la mémoire et retour du booléen false

        delete[] erreur;
        glDeleteShader(shader);

        return false;
    }


    // Sinon c'est que tout s'est bien passé

    else
        return true;
}</code></pre><p id="r-964933" data-claire-element-id="964933">Grâce à tout ce code, nous sommes maintenant capables de compiler tous nos shaders. Il valait mieux séparer ce code de la méthode <strong>charger</strong>() sinon il aurait fallu coder ça deux, imaginez un peu le truc ! :lol:</p><p id="r-964934" data-claire-element-id="964934">Cependant nous n'avons pas encore fini, il nous faut encore terminer la méthode <strong>charger</strong>(). Continuons. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
<span class="arrow"></span>
<span class="next">Piqûre de rappel</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
<span class="next">Création du programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Crationduprogramme"></a><h2>Création du programme</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
<span class="arrow"></span>
<span class="next">Compilation des sources</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
<span class="next">Utilisation et améliorations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-la-methode-charger-partie-2-2" data-claire-element-id="965059">La méthode charger (Partie 2/2)</h2><h3 id="r-creation-du-programme-1" data-claire-element-id="964947">Création du programme</h3><p id="r-964938" data-claire-element-id="964938">Maintenant que nous avons codé une méthode permettant de compiler un shader, nous pouvons tranquillement retourner à la méthode <strong>charger</strong>() que nous avons laissée précédemment. D'ailleurs, elle est un peu vide pour le moment :</p><pre id="r-964939" data-claire-element-id="964939"><code data-claire-semantic="cpp">bool Shader::charger()
{
    // Compilation des shaders

    if(!compilerShader(m_vertexID, GL_VERTEX_SHADER, m_vertexSource))
        return false;

    if(!compilerShader(m_fragmentID, GL_FRAGMENT_SHADER, m_fragmentSource))
        return false;
}</code></pre><p id="r-964940" data-claire-element-id="964940">Grâce à ce mini bout de code, nous avons enfin notre duo de shader compilé et validé. Cependant, ces shaders ne sont pas encore inutilisables pour le moment car ce ne sont que des objets intermédiaires qui ne peuvent pas être exécutés par la carte graphique, elle ne sait pas quoi faire avec. Pour régler le problème, il nous faut les réunir à l’intérieur d'un <em><strong>programme</strong></em> qui, lui, sera exécutable par la carte.</p><p id="r-964941" data-claire-element-id="964941">Bien entendu, il ne s'agit pas d'un programme classique que vous avez l'habitude d'exécuter sur votre ordinateur. :p C'est en fait un <em>objet OpenGL</em> qui va faire la passerelle entre les shaders et leur exécution au sein de la carte graphique. C'est pour cette raison que nous avons besoin du fameux attribut <strong>programID</strong> - attribut qu'on utilise depuis un bout de temps maintenant dans la fonction <strong>glUseProgram</strong>().</p><p id="r-964942" data-claire-element-id="964942">Pour la suite de la méthode <strong>charger</strong>(), il nous faut donc créer ce programme. Nous ferons cela grâce à une fonction qui ressemble fortement à <strong>glCreateShader</strong>() et qui s'appelle <strong>glCreateProgram</strong>() :</p><pre id="r-964943" data-claire-element-id="964943"><code data-claire-semantic="cpp">GLuint glCreateProgram();</code></pre><p id="r-964944" data-claire-element-id="964944">C'est l'une des rares fonctions OpenGL qui ne demande aucun paramètre, profitez-en. :p Elle retourne juste l'<strong>ID</strong> d'un nouveau programme.</p><p id="r-964945" data-claire-element-id="964945">Nous l'appellerons donc pour créer un programme qui sera accessible via l'attribut <strong>m_programID</strong> :</p><pre id="r-964946" data-claire-element-id="964946"><code data-claire-semantic="cpp">bool Shader::charger()
{
    // Compilation des shaders

    if(!compilerShader(m_vertexID, GL_VERTEX_SHADER, m_vertexSource))
        return false;

    if(!compilerShader(m_fragmentID, GL_FRAGMENT_SHADER, m_fragmentSource))
        return false;


    // Création du programme

    m_programID = glCreateProgram();
}</code></pre><h3 id="r-association-des-shaders-au-programme" data-claire-element-id="964962">Association des shaders au programme</h3><p id="r-964948" data-claire-element-id="964948">Comme je vous l'ai dit précédemment, le <strong>Vertex</strong> et <strong>Fragment</strong> Shader sont inutilisables en l'état car ils ne peuvent pas être exécutés par la carte graphique. En revanche, le programme lui peut l'être. Il nous faut donc associer les shaders avec celui-ci de façon à ce que nos fichiers compilés puissent servir à quelque chose.</p><figure id="r-964950" data-claire-element-id="964951"><img id="r-964949" data-claire-element-id="964949" src="medias/uploads.siteduzero.com_files_420001_421000_420377.png" alt="Image utilisateur"/></figure><p id="r-964952" data-claire-element-id="964952">Cette étape d'association se fait très simplement puisqu'il suffit d'utiliser une seule fonction OpenGL : <strong>glAttachShader</strong>().</p><pre id="r-964953" data-claire-element-id="964953"><code data-claire-semantic="cpp">void glAttachShader(GLuint program, GLuint shader)</code></pre><ul id="r-964958" data-claire-element-id="964958"><li id="r-964955" data-claire-element-id="964955"><p id="r-964954" data-claire-element-id="964954"><strong>program</strong> : Le programme sur lequel on travaille</p></li><li id="r-964957" data-claire-element-id="964957"><p id="r-964956" data-claire-element-id="964956"><strong>shader</strong> : Le shader à associer</p></li></ul><p id="r-964959" data-claire-element-id="964959">Nous appellerons cette fonction deux fois pour associer nos deux shaders :</p><pre id="r-964960" data-claire-element-id="964960"><code data-claire-semantic="cpp">bool Shader::charger()
{
    // Compilation des shaders

    if(!compilerShader(m_vertexID, GL_VERTEX_SHADER, m_vertexSource))
        return false;

    if(!compilerShader(m_fragmentID, GL_FRAGMENT_SHADER, m_fragmentSource))
        return false;


    // Création du programme

    m_programID = glCreateProgram();


    // Association des shaders

    glAttachShader(m_programID, m_vertexID);
    glAttachShader(m_programID, m_fragmentID);
}</code></pre><p id="r-964961" data-claire-element-id="964961">Étape terminée. :p</p><h3 id="r-verrouillage-des-entrees-shader" data-claire-element-id="964999">Verrouillage des entrées shader</h3><p id="r-964963" data-claire-element-id="964963">Si je vous parle d'entrées shader, ça vous dit quelque chose ? Normalement vous devriez me répondre non. :p Et pourtant si je vous disais que vous savez déjà ce que c'est, vous me croiriez ?</p><p id="r-964964" data-claire-element-id="964964">En fait, les entrées shader sont tout simplement les tableaux <em><strong>Vertex Attrib</strong></em> que l'on utilise depuis le début du tuto ! ;) Et oui, les shaders ont besoin d'eux pour travailler sinon ils ne pourraient pas afficher grand chose. Les tableaux <em><strong>Vertex Attrib</strong></em> constituent donc leurs sources de données (vertices, couleurs, ...) que l'on appelle plus communément leurs entrées. On parle bien d'<strong>entrées</strong> parce qu'il existe aussi des <strong>sorties</strong>, mais ça ça sera pour le chapitre suivant.</p><p id="r-964965" data-claire-element-id="964965">Le verrouillage des entrées consiste simplement à dire au shader :</p><ul id="r-964972" data-claire-element-id="964972"><li id="r-964967" data-claire-element-id="964967"><p id="r-964966" data-claire-element-id="964966">Le tableau <em><strong>Vertex Attrib 0</strong></em> correspondra aux <strong>vertices</strong></p></li><li id="r-964969" data-claire-element-id="964969"><p id="r-964968" data-claire-element-id="964968">Le tableau <em><strong>Vertex Attrib 1</strong></em> correspondra aux <strong>couleurs</strong></p></li><li id="r-964971" data-claire-element-id="964971"><p id="r-964970" data-claire-element-id="964970">....</p></li></ul><p id="r-964973" data-claire-element-id="964973">Pour faire ça, nous devons utiliser la fonction <strong>glBindAttribLocation</strong>() :</p><pre id="r-964974" data-claire-element-id="964974"><code data-claire-semantic="cpp">void glBindAttribLocation(GLuint program, GLuint index, const GLchar *name);</code></pre><ul id="r-964981" data-claire-element-id="964981"><li id="r-964976" data-claire-element-id="964976"><p id="r-964975" data-claire-element-id="964975"><strong>program</strong> : Le programme sur lequel on travaille</p></li><li id="r-964978" data-claire-element-id="964978"><p id="r-964977" data-claire-element-id="964977"><strong>index</strong> : Le numéro du tableau <em><strong>Vertex Attrib</strong></em> à verrouiller</p></li><li id="r-964980" data-claire-element-id="964980"><p id="r-964979" data-claire-element-id="964979"><strong>name</strong> : Le nom de la donnée dans le code source du shader</p></li></ul><p id="r-964982" data-claire-element-id="964982">Le dernier paramètre peut vous sembler un peu confus pour le moment mais sachez juste qu'il s'agit d'une variable, dans le code source du shader, qui permet d'accéder aux données des tableaux <em><strong>Vertex Attrib</strong></em>. Par exemple, pour accéder aux <em>vertices</em> dans les shaders, nous utiliserons une variable qui s’appellera <strong>in_Vertex</strong> :</p><figure id="r-964984" data-claire-element-id="964985"><img id="r-964983" data-claire-element-id="964983" src="medias/uploads.siteduzero.com_files_420001_421000_420378.png" alt="Image utilisateur"/></figure><p id="r-964986" data-claire-element-id="964986">Pour les couleurs ce sera <strong>in_Color</strong> et pour les coordonnées de texture ce sera <strong>in_TexCoord0</strong> :</p><figure id="r-964988" data-claire-element-id="964989"><img id="r-964987" data-claire-element-id="964987" src="medias/uploads.siteduzero.com_files_420001_421000_420381.png" alt="Image utilisateur"/></figure><p id="r-964990" data-claire-element-id="964990">Vu que nous utilisons 3 tableaux <em><strong>Vertex Attrib</strong></em> (vertices, couleurs et coordonnées de texture), nous devrons utiliser 3 fois la fonction <strong>glBindAttribLocation</strong>() pour verrouiller toutes les entrées. Pour le tableau d'indice <strong>0</strong>, l'appel ressemblera à ceci :</p><pre id="r-964991" data-claire-element-id="964991"><code data-claire-semantic="cpp">// Verrouillage des entrées shader (Vertices)

glBindAttribLocation(m_programID, 0, &quot;in_Vertex&quot;);</code></pre><p id="r-964992" data-claire-element-id="964992">Pour les deux autres, ce sera :</p><pre id="r-964993" data-claire-element-id="964993"><code data-claire-semantic="cpp">// Verrouillage des entrées shader (Couleurs et Coordonnées de texture)

glBindAttribLocation(m_programID, 1, &quot;in_Color&quot;);
glBindAttribLocation(m_programID, 2, &quot;in_TexCoord0&quot;);</code></pre><div id="r-964995" data-claire-element-id="964995" data-claire-semantic="question"><p id="r-964994" data-claire-element-id="964994">Euh j'ai une petite question, pourquoi il y a un <strong>0</strong> à la fin de la variable <strong>in_TexCoord0</strong> ?</p></div><p id="r-964996" data-claire-element-id="964996">Ça peut paraitre un peu troublant mais le <strong>0</strong> est là pour indiquer au shader que les coordonnées de texture qu'il reçoit correspondent simplement à la première texture verrouillée (indice <strong>0</strong>). Quand nous utiliserons le multitexturing, nous enverrons plusieurs textures au shader et celui-ci devra faire la différence entre les coordonnées reçues pour la première, celles reçues pour la deuxième, etc. Le chiffre de la variable <strong>in_TexCoord</strong> permet de faire cette différence. Enfin, ne vous triturez pas la tête avec ça pour le moment, ce n'est pas important. :)</p><p id="r-964997" data-claire-element-id="964997">Au final, nous plaçons les 3 appels à la fonction <strong>glBindAttribLocation</strong>() juste après l'association des shaders :</p><pre id="r-964998" data-claire-element-id="964998"><code data-claire-semantic="cpp">bool Shader::charger()
{
    // Compilation des shaders

    if(!compilerShader(m_vertexID, GL_VERTEX_SHADER, m_vertexSource))
        return false;

    if(!compilerShader(m_fragmentID, GL_FRAGMENT_SHADER, m_fragmentSource))
        return false;


    // Création du programme

    m_programID = glCreateProgram();


    // Association des shaders

    glAttachShader(m_programID, m_vertexID);
    glAttachShader(m_programID, m_fragmentID);


    // Verrouillage des entrées shader

    glBindAttribLocation(m_programID, 0, &quot;in_Vertex&quot;);
    glBindAttribLocation(m_programID, 1, &quot;in_Color&quot;);
    glBindAttribLocation(m_programID, 2, &quot;in_TexCoord0&quot;);
}</code></pre><h3 id="r-linkage" data-claire-element-id="965005">Linkage</h3><p id="r-965000" data-claire-element-id="965000">Le linkage constitue l'étape finale de la création d'un programme. Jusqu'à présent, nous avons compilé nos shaders séparément puis nous les avons associés à notre programme. Il ne reste plus maintenant qu'à le finaliser pour le rendre exécutable par la carte graphique.</p><p id="r-965001" data-claire-element-id="965001">Cette étape se fait grâce à la fonction <strong>glLinkProgram</strong>() :</p><pre id="r-965002" data-claire-element-id="965002"><code data-claire-semantic="cpp">void glLinkProgram(GLuint program);</code></pre><p id="r-965003" data-claire-element-id="965003">Bien entendu, le paramètre <strong>program</strong> correspond au programme à linker. On appelle cette fonction juste après le verrouillage des entrées shader :</p><pre id="r-965004" data-claire-element-id="965004"><code data-claire-semantic="cpp">// Verrouillage des entrées shader

glBindAttribLocation(m_programID, 0, &quot;in_Vertex&quot;);
glBindAttribLocation(m_programID, 1, &quot;in_Color&quot;);
glBindAttribLocation(m_programID, 2, &quot;in_TexCoord0&quot;);


// Linkage du programme

glLinkProgram(m_programID);</code></pre><h3 id="r-verification-du-linkage" data-claire-element-id="965058">Vérification du linkage</h3><p id="r-965006" data-claire-element-id="965006">Le linkage d'un programme est un processus qui peut malheureusement échouer, nous devons donc vérifier si tout s'est bien passé. La mauvaise nouvelle, c'est qu'il va falloir écrire un gros bloc de vérification comme pour la compilation de shader. :p</p><p id="r-965007" data-claire-element-id="965007">L'avantage cependant c'est que cet énorme bloc de vérification ressemble exactement au premier, seules quelques fonctions OpenGL vont devoir changer. Ainsi, pour vérifier si le linkage s'est bien passé nous devrons :</p><ul id="r-965016" data-claire-element-id="965016"><li id="r-965009" data-claire-element-id="965009"><p id="r-965008" data-claire-element-id="965008"><strong>Vérifier</strong> s'il y a eu un problème</p></li><li id="r-965011" data-claire-element-id="965011"><p id="r-965010" data-claire-element-id="965010">Si oui, <strong>récupérer</strong> la taille du message d'erreur</p></li><li id="r-965013" data-claire-element-id="965013"><p id="r-965012" data-claire-element-id="965012"><strong>Allouer</strong> une chaine de caractère grâce à cette taille</p></li><li id="r-965015" data-claire-element-id="965015"><p id="r-965014" data-claire-element-id="965014"><strong>Récupérer</strong> l'erreur et l'afficher</p></li></ul><p id="r-965017" data-claire-element-id="965017">Pour la compilation de shader, nous avions utilisé la fonction <strong>glGetShaderiv</strong>() pour savoir s'il y avait eu une erreur. Pour le linkage d'un programme, la fonction est exactement identique, il n'y a que le nom qui change :</p><pre id="r-965018" data-claire-element-id="965018"><code data-claire-semantic="cpp">void glGetProgramiv(GLuint program, GLenum pname, GLint *params);</code></pre><p id="r-965019" data-claire-element-id="965019">Les paramètres sont également identiques :</p><ul id="r-965026" data-claire-element-id="965026"><li id="r-965021" data-claire-element-id="965021"><p id="r-965020" data-claire-element-id="965020"><strong>program</strong> : Le programme sur lequel on travaille</p></li><li id="r-965023" data-claire-element-id="965023"><p id="r-965022" data-claire-element-id="965022"><strong>pname</strong> : Le nom de l'information demandée</p></li><li id="r-965025" data-claire-element-id="965025"><p id="r-965024" data-claire-element-id="965024"><strong>params</strong> : L'adresse d'une variable qui accueillera cette information</p></li></ul><p id="r-965027" data-claire-element-id="965027">On doit utiliser cette fonction, dans un premier temps, pour vérifier s'il y a eu une erreur au moment du linkage. Le nom du paramètre <strong>pname</strong> qui nous permet cela sera la constante <strong>GL_LINK_STATUS</strong>. On doit aussi créer une variable de type <em><strong>GLint</strong></em> pour contenir la valeur retournée, on l'appellera <strong>erreurLink</strong>. On en profite au passage pour implémenter que le début du bloc <strong>if</strong> :</p><pre id="r-965028" data-claire-element-id="965028"><code data-claire-semantic="cpp">// Linkage du programme

glLinkProgram(m_programID);


// Vérification du linkage

GLint erreurLink(0);
glGetProgramiv(m_programID, GL_LINK_STATUS, &amp;erreurLink);


// S'il y a eu une erreur

if(erreurLink != GL_TRUE)
{
}


// Sinon c'est que tout s'est bien passé

else
    return true;</code></pre><p id="r-965029" data-claire-element-id="965029">Si on se retrouve dans le bloc <strong>if</strong>, c'est que quelque chose s'est mal passé. Nous devons donc récupérer la taille du message d'erreur grâce à la fonction <strong>glGetProgramiv</strong>(). Elle prendra exactement les mêmes paramètres que la fonction <strong>glGetShaderiv</strong>() soient : une constante <strong>GL_INFO_LOG_LENGTH</strong> et l'adresse d'une variable <strong>tailleErreur</strong> de type <em><strong>GLint</strong></em> :</p><pre id="r-965030" data-claire-element-id="965030"><code data-claire-semantic="cpp">// Vérification du linkage

if(erreurLink != GL_TRUE)
{
    // Récupération de la taille de l'erreur

    GLint tailleErreur(0);
    glGetProgramiv(m_programID, GL_INFO_LOG_LENGTH, &amp;tailleErreur);
}</code></pre><p id="r-965031" data-claire-element-id="965031">Une fois la taille de l'erreur récupérée, on peut allouer une chaine de caractère pour la contenir sans oublier le caractère <strong>'\0'</strong> :</p><pre id="r-965032" data-claire-element-id="965032"><code data-claire-semantic="cpp">// Vérification du linkage

if(erreurLink != GL_TRUE)
{
    // Récupération de la taille de l'erreur

    GLint tailleErreur(0);
    glGetProgramiv(m_programID, GL_INFO_LOG_LENGTH, &amp;tailleErreur);


    // Allocation de mémoire

    char *erreur = new char[tailleErreur + 1];
}</code></pre><p id="r-965033" data-claire-element-id="965033">Maintenant que l'on a une chaine de caractère assez grande, on peut récupérer le message d'erreur grâce à une fonction très similaire à <strong>glGetShaderInfoLog</strong>() qui s'appelle <strong>glGetProgramInfoLog()</strong> :</p><pre id="r-965034" data-claire-element-id="965034"><code data-claire-semantic="cpp">void glGetProgramInfoLog(GLuint program, GLsizei maxLength, GLsizei *length, GLchar *infoLog);</code></pre><p id="r-965035" data-claire-element-id="965035">Je vous rappelle que cette fonction permet de récupérer le message d'erreur. ;) D'ailleurs, elle prend elle-aussi les mêmes paramètres que sa sœur-jumelle :</p><ul id="r-965044" data-claire-element-id="965044"><li id="r-965037" data-claire-element-id="965037"><p id="r-965036" data-claire-element-id="965036"><strong>program</strong> : Le programme sur lequel on travaille</p></li><li id="r-965039" data-claire-element-id="965039"><p id="r-965038" data-claire-element-id="965038"><strong>maxLength</strong> : Taille de la chaine de caractère qui va accueillir l'erreur. Pour nous, il s'agit de la variable <strong>tailleErreur</strong></p></li><li id="r-965041" data-claire-element-id="965041"><p id="r-965040" data-claire-element-id="965040"><strong>length</strong> : Adresse de la variable qui contiendra la taille précédente. Ce paramètre est encore une fois bizarre, nous lui donnerons l'adresse de la variable <strong>tailleErreur</strong></p></li><li id="r-965043" data-claire-element-id="965043"><p id="r-965042" data-claire-element-id="965042"><strong>infoLog</strong> : La chaine de caractère qui contiendra le message final. Nous lui donnerons la chaine <strong>erreur</strong></p></li></ul><p id="r-965045" data-claire-element-id="965045">Nous appelons donc cette fonction avec les paramètres que nous venons juste de citer. N'oubliez pas de rajouter le caractère <strong>'\0'</strong> à la fin de la chaine :</p><pre id="r-965046" data-claire-element-id="965046"><code data-claire-semantic="cpp">// Vérification du linkage

if(erreurLink != GL_TRUE)
{
    // Récupération de la taille de l'erreur

    GLint tailleErreur(0);
    glGetProgramiv(m_programID, GL_INFO_LOG_LENGTH, &amp;tailleErreur);


    // Allocation de mémoire

    char *erreur = new char[tailleErreur + 1];


    // Récupération de l'erreur

    glGetShaderInfoLog(m_programID, tailleErreur, &amp;tailleErreur, erreur);
    erreur[tailleErreur] = '\0';
}</code></pre><p id="r-965047" data-claire-element-id="965047">Pour terminer cette gestion d'erreur, il ne reste plus qu'à afficher le message tant convoité. Une fois que c'est fait, on libère la mémoire prise par la chaine de caractère puis on détruit le programme vu que celui-ci est inutilisable.</p><p id="r-965048" data-claire-element-id="965048">La fonction permettant de détruire un programme s'appelle simplement <strong>glDeleteProgram</strong>() :</p><pre id="r-965049" data-claire-element-id="965049"><code data-claire-semantic="cpp">void glDeleteProgram(GLuint program);</code></pre><p id="r-965050" data-claire-element-id="965050">Elle prend en paramètre le programme à détruire.</p><p id="r-965051" data-claire-element-id="965051">On appelle donc cette fonction en plus du mot-clef <strong>delete[]</strong> pour détruire la chaine. On renverra également le booléen <strong>false</strong> pour indiquer que le chargement s'est mal passé :</p><pre id="r-965052" data-claire-element-id="965052"><code data-claire-semantic="cpp">// Vérification du linkage

if(erreurLink != GL_TRUE)
{
    // Récupération de la taille de l'erreur

    GLint tailleErreur(0);
    glGetProgramiv(m_programID, GL_INFO_LOG_LENGTH, &amp;tailleErreur);


    // Allocation de mémoire

    char *erreur = new char[tailleErreur + 1];


    // Récupération de l'erreur

    glGetShaderInfoLog(m_programID, tailleErreur, &amp;tailleErreur, erreur);
    erreur[tailleErreur] = '\0';


    // Affichage de l'erreur

    std::cout &lt;&lt; erreur &lt;&lt; std::endl;


    // Libération de la mémoire et retour du booléen false

    delete[] erreur;
    glDeleteProgram(m_programID);

    return false;
}</code></pre><p id="r-965053" data-claire-element-id="965053">Récapitulatif de la méthode <strong>charger</strong>() :</p><pre id="r-965054" data-claire-element-id="965054"><code data-claire-semantic="cpp">bool Shader::charger()
{
    // Compilation des shaders

    if(!compilerShader(m_vertexID, GL_VERTEX_SHADER, m_vertexSource))
        return false;

    if(!compilerShader(m_fragmentID, GL_FRAGMENT_SHADER, m_fragmentSource))
        return false;


    // Création du programme

    m_programID = glCreateProgram();


    // Association des shaders

    glAttachShader(m_programID, m_vertexID);
    glAttachShader(m_programID, m_fragmentID);


    // Verrouillage des entrées shader

    glBindAttribLocation(m_programID, 0, &quot;in_Vertex&quot;);
    glBindAttribLocation(m_programID, 1, &quot;in_Color&quot;);
    glBindAttribLocation(m_programID, 2, &quot;in_TexCoord0&quot;);


    // Linkage du programme

    glLinkProgram(m_programID);


	// Linkage du programme

    glLinkProgram(m_programID);


    // Vérification du linkage

    GLint erreurLink(0);
    glGetProgramiv(m_programID, GL_LINK_STATUS, &amp;erreurLink);


    // S'il y a eu une erreur

    if(erreurLink != GL_TRUE)
    {
        // Récupération de la taille de l'erreur

        GLint tailleErreur(0);
        glGetProgramiv(m_programID, GL_INFO_LOG_LENGTH, &amp;tailleErreur);


        // Allocation de mémoire

        char *erreur = new char[tailleErreur + 1];


        // Récupération de l'erreur

        glGetShaderInfoLog(m_programID, tailleErreur, &amp;tailleErreur, erreur);
        erreur[tailleErreur] = '\0';


        // Affichage de l'erreur

        std::cout &lt;&lt; erreur &lt;&lt; std::endl;


        // Libération de la mémoire et retour du booléen false

        delete[] erreur;
        glDeleteProgram(m_programID);

        return false;
    }



    // Sinon c'est que tout s'est bien passé

    else
        return true;
}</code></pre><p id="r-965055" data-claire-element-id="965055">Cette fois la méthode est bel et bien terminée, et je dirai même que l'implémentation de la classe <em><strong>Shader</strong></em> est également terminée. Vous êtes maintenant en mesure de comprendre tout le code C++ de vos applications, plus de classe mystère !</p><p id="r-965056" data-claire-element-id="965056">Après toutes ces péripéties, vous avez bien mérité une petite pause moi j'dis. :-°</p><p id="r-965057" data-claire-element-id="965057">D'ailleurs, vous pouvez continuer à lire la dernière partie de ce chapitre tout en faisant une pause car nous n'allons voir que quelques points mineurs. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
<span class="arrow"></span>
<span class="next">Compilation des sources</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
<span class="next">Utilisation et améliorations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisationetamliorations"></a><h2>Utilisation et améliorations</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
<span class="arrow"></span>
<span class="next">Création du programme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">
<span class="next">OpenGL Shading Language</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-utilisation-93" data-claire-element-id="965072">Utilisation</h2><p id="r-965061" data-claire-element-id="965061">La partie <em><strong>utilisation</strong></em> est vraiment quelque chose d’anecdotique car vous savez déjà comment utiliser un shader, mais nous allons tout de même faire un petit point dessus. Après tout, les rappels ça n'a jamais fait de mal. :p</p><p id="r-965062" data-claire-element-id="965062">Enfin bref. Pour créer un objet de type <em><strong>Shader</strong></em>, vous devez simplement déclarer un nouvel objet en lui donnant en paramètre le chemin vers deux codes sources : celui du <strong>Vertex Shader</strong> et celui du <strong>Fragment Shader</strong>, puis d'appeler la méthode <strong>charger</strong>(). Par exemple, pour charger le shader de texture :</p><pre id="r-965063" data-claire-element-id="965063"><code data-claire-semantic="cpp">// Shader Texture

Shader shaderTexture(&quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;);
shaderTexture.charger();</code></pre><p id="r-965064" data-claire-element-id="965064">Une fois chargé, vous n'avez plus qu'à l'activer au moment d'<em>afficher</em> votre modèle grâce à la fonction <strong>glUseProgram</strong>() :</p><pre id="r-965065" data-claire-element-id="965065"><code data-claire-semantic="cpp">void glUseProgram(GLuint program);</code></pre><p id="r-965066" data-claire-element-id="965066">La paramètre <strong>program</strong> correspond évidemment au shader à activer.</p><p id="r-965067" data-claire-element-id="965067">Cette fonction est vraiment similaire aux fonctions du type <strong>glBindXXX</strong>() puisqu'elle permet de dire à OpenGL : &quot;Je souhaite utiliser ce shader-ci pendant toute la durée où il est activé&quot;. Ainsi, tous les modèles qui se trouvent à l'intérieur des deux appels à <strong>glUseProgram</strong>() seront obligés de l'utiliser pour être affichés.</p><pre id="r-965068" data-claire-element-id="965068"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(m_shader.getProgramID());


    // Verrouillage du VAO

    glBindVertexArray(m_vaoID);


        // Envoi des matrices

        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
        glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


        // Verrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, m_texture.getID());


        // Rendu

        glDrawArrays(GL_TRIANGLES, 0, 36);


        // Déverrouillage de la texture

        glBindTexture(GL_TEXTURE_2D, 0);


    // Déverrouillage du VAO

    glBindVertexArray(0);


// Désactivation du shader

glUseProgram(0);</code></pre><p id="r-965069" data-claire-element-id="965069">D'ailleurs en parlant de ça, je vous conseille fortement d'activer votre shader avant de verrouiller tous vos autres <em><strong>objets OpenGL</strong></em>. Si vous ne le faites pas, vous risquerez d'envoyer des données dans le vide (comme les matrices ou les textures) car aucun shader ne sera là pour les recevoir. ;)</p><aside id="r-965071" data-claire-element-id="965071" data-claire-semantic="information"><p id="r-965070" data-claire-element-id="965070">Les dernières lignes de code C++ qui peuvent vous gêner sont celles de l'envoi des matrices. Nous allons les voir dans le prochain chapitre car elles font partie intégrante de l'utilisation des shaders. ^^</p></aside><h2 id="r-ameliorations-35" data-claire-element-id="965110">Améliorations</h2><h3 id="r-le-destructeur-8" data-claire-element-id="965078">Le destructeur</h3><p id="r-965073" data-claire-element-id="965073">Dans cette petite partie <em><strong>améliorations</strong></em>, nous allons surtout parler de méthodes qui seront utiles si nous voulons copier des objets de type <em><strong>Shader</strong></em> entre eux. Mais avant ça, nous allons parler un peu de libération de mémoire car jusqu'à maintenant, lorsqu'un objet <em><strong>Shader</strong></em> est détruit, il ne libère à aucun moment les ressources qu'il a prises.</p><p id="r-965074" data-claire-element-id="965074">Pour l'aider à le faire, nous allons simplement détruire tous les attributs dans le destructeur. Sachant que les <em><strong>string</strong></em> savent le faire toutes seules, il ne reste plus qu'à gérer les attributs <strong>m_vertexID</strong>, <strong>m_fragmentID</strong> et <strong>m_programID</strong>. Les fonctions permettant de détruire ces objets OpenGL sont <strong>glDeleteShader</strong>() et <strong>glDeleteProgram</strong>().</p><p id="r-965075" data-claire-element-id="965075">Nous les appelons donc le destructeur :</p><pre id="r-965076" data-claire-element-id="965076"><code data-claire-semantic="cpp">Shader::~Shader()
{
    // Destruction du shader

    glDeleteShader(m_vertexID);
    glDeleteShader(m_fragmentID);
    glDeleteProgram(m_programID);
}</code></pre><p id="r-965077" data-claire-element-id="965077">Comme quoi, le destructeur ne reste pas vide à chaque fois. :p</p><h3 id="r-le-constructeur-de-copie-1" data-claire-element-id="965090">Le constructeur de copie</h3><p id="r-965079" data-claire-element-id="965079">On continue cette dernière partie avec le <em>constructeur de copie</em>. J'espère que vous savez ce que c'est quand même, surtout qu'on l'utilise depuis un moment maintenant. :p</p><p id="r-965080" data-claire-element-id="965080">En temps normal, il est inutile de le coder tant qu'on n'utilise pas de pointeurs car seuls eux peuvent poser des problèmes. Cependant, les <em>objets OpenGL</em> peuvent être rapprochés aux pointeurs car leur <strong>ID</strong> se comporte un peu de la même façon. Si vous essayez de copier un <strong>ID</strong> dans un autre objet, alors les deux copies auront accès exactement aux mêmes données alors qu'ils devraient avoir chacun les leurs.</p><p id="r-965081" data-claire-element-id="965081">Il nous faut ré-écrire ce constructeur pour pouvoir être capables de copier deux shaders correctement sans avoir à nous soucier de ce problème. Voici d'ailleurs le prototype de cette pseudo-méthode :</p><pre id="r-965082" data-claire-element-id="965082"><code data-claire-semantic="cpp">Shader(Shader const &amp;shaderACopier);</code></pre><aside id="r-965084" data-claire-element-id="965084" data-claire-semantic="information"><p id="r-965083" data-claire-element-id="965083">La référence constante est importante ici, ne l'oubliez pas.</p></aside><p id="r-965085" data-claire-element-id="965085">Pour la classe <em><strong>Shader</strong></em>, nous avons 5 attributs à gérer. Les deux <strong><em>strings</em></strong> peuvent être copiées directement sans problème :</p><pre id="r-965086" data-claire-element-id="965086"><code data-claire-semantic="cpp">Shader::Shader(Shader const &amp;shaderACopier)
{
    // Copie des fichiers sources

    m_vertexSource = shaderACopier.m_vertexSource;
    m_fragmentSource = shaderACopier.m_fragmentSource;
}</code></pre><p id="r-965087" data-claire-element-id="965087">Les 3 derniers attributs concernent les shaders et le programme. Ils ne peuvent pas être copiés de la même façon, il va falloir re-générer de nouvelles valeurs (de nouveaux <strong>ID</strong>) à partir des fichiers sources. Pour ce faire, il suffit juste d'appeler la méthode <strong>charger</strong>() car c'est elle qui s'occupe de ça :</p><pre id="r-965088" data-claire-element-id="965088"><code data-claire-semantic="cpp">Shader::Shader(Shader const &amp;shaderACopier)
{
    // Copie des fichiers sources

    m_vertexSource = shaderACopier.m_vertexSource;
    m_fragmentSource = shaderACopier.m_fragmentSource;


    // Chargement du nouveau shader

    charger();
}</code></pre><p id="r-965089" data-claire-element-id="965089">Le constructeur de copie est terminé. ;)</p><h3 id="r-l-operateur-6" data-claire-element-id="965109">L'opérateur =</h3><p id="r-965091" data-claire-element-id="965091">L'opérateur d'<strong>affectation =</strong> est un opérateur très pratique en C++ car il permet de copier un objet directement en utilisant le symbole <strong>=</strong> comme si on faisait une banale opération arithmétique. Nous allons l'implémenter, au même titre que le constructeur de copie, dans le cas où nous aurions à copier un shader.</p><p id="r-965092" data-claire-element-id="965092">Voici son prototype :</p><pre id="r-965093" data-claire-element-id="965093"><code data-claire-semantic="cpp">Shader&amp; operator=(Shader const &amp;shaderACopier);</code></pre><div id="r-965095" data-claire-element-id="965095" data-claire-semantic="question"><p id="r-965094" data-claire-element-id="965094">Cette méthode prend et renvoie une référence constante.</p></div><p id="r-965096" data-claire-element-id="965096">Son contenu est strictement identique au constructeur de copie car elle fait exactement la même chose. :p On rajoutera juste le retour du pointeur <strong>*this</strong> pour retourner proprement notre objet :</p><pre id="r-965097" data-claire-element-id="965097"><code data-claire-semantic="cpp">Shader&amp; Shader::operator=(Shader const &amp;shaderACopier)
{
    // Copie des fichiers sources

    m_vertexSource = shaderACopier.m_vertexSource;
    m_fragmentSource = shaderACopier.m_fragmentSource;


    // Chargement du nouveau shader

    charger();


    // Retour du pointeur this

    return *this;
}</code></pre><p id="r-965098" data-claire-element-id="965098">Encore une fois, je vous repose la question pour ce chapitre ( :p ) : vous vous souvenez de ce qui se passait si on chargeait deux fois un même objet OpenGL (texture, VBO, etc.) d'un coup ? Que cela entrainait une fuite de mémoire ? Et bien nous avons encore le même problème ici. Si vous chargez deux fois un shader, lors d'une copie par exemple, alors vous risquez de gâcher de la mémoire qui ne pourra pas être libérée avant la fermeture de votre application.</p><p id="r-965099" data-claire-element-id="965099">Pour éviter cela, nous devons appeler les fonctions de vérification d'objet OpenGL du type <strong>glIsXXX</strong>(), puis de les détruire si besoin est. Elles s'appellent ici <strong>glIsShader</strong>() et <strong>glIsProgram</strong>() :</p><pre id="r-965100" data-claire-element-id="965100"><code data-claire-semantic="cpp">// Vérification de shader

GLboolean glIsShader(GLuint shader);


// Vérification de programme

GLboolean glIsProgram(GLuint program);</code></pre><p id="r-965101" data-claire-element-id="965101">Elles prennent en paramètre respectivement un identifiant de shader et un identifiant de programme pour savoir s'ils ont déjà été chargés. Elles renvoient toutes les deux la valeur <strong>GL_TRUE</strong> si c'est le cas, sinon c'est <strong>GL_FALSE</strong>.</p><p id="r-965102" data-claire-element-id="965102">Au final, pour les attributs <strong>m_vertexID</strong>, <strong>m_fragmentID</strong> et <strong>m_programID</strong>, nous devons faire un bloc <strong>if</strong> en vérifiant la valeur retournée par la fonction <strong>glIsXXX</strong>(). Si c'est <strong>GL_TRUE</strong>, alors on appelle leur fonction de destruction :</p><pre id="r-965103" data-claire-element-id="965103"><code data-claire-semantic="cpp">bool Shader::charger()
{
    // Destruction d'un éventuel ancien Shader

    if(glIsShader(m_vertexID) == GL_TRUE)
        glDeleteShader(m_vertexID);

    if(glIsShader(m_fragmentID) == GL_TRUE)
        glDeleteShader(m_fragmentID);

    if(glIsProgram(m_programID) == GL_TRUE)
        glDeleteProgram(m_programID);


    // Compilation des shaders

    if(!compilerShader(vertexShader, GL_VERTEX_SHADER, m_vertexSource)
        return false;

    if(!compilerShader(fragmentShader, GL_FRAGMENT_SHADER, m_fragmentSource)
        return false;


    ....
}</code></pre><p id="r-965104" data-claire-element-id="965104">Grâce à ce bout de code, on évite toute fuite de mémoire car les éventuels anciens <strong>ID</strong> seront détruits avant d'être ré-initialisés.</p><p id="r-965105" data-claire-element-id="965105"><strong>Télécharger (Windows, UNIX/Linux, Mac OS X) : <a href="https://dl.dropboxusercontent.com/s/3j24a95gw9d9myd/Les Vertex Array Objects.zip?token_hash=AAGVb8Jnekcvg7otz8j2ZwEwYArF2_rOJ4Bns4VXdjMJDA&amp;dl=1">Code Source C++ du chapitre sur la compilation de Shader</a></strong></p><p id="r-965106" data-claire-element-id="965106">A travers ce premier chapitre consacré aux <em><strong>shaders</strong></em>, nous avons pu voir comment compiler n'importe quel code source. Tous ceux que nous avons utilisés depuis la partie 1 sont passés par cette classe - classe dont nous sommes enfin capables de comprendre le fonctionnement.</p><p id="r-965107" data-claire-element-id="965107">Les notions que nous avons abordées sont assez costauds au niveau technique, je vous conseille de relire à tête reposée ceux qui vous paraissent encore un peu sombres.</p><p id="r-965108" data-claire-element-id="965108">Néanmoins, après le code de ce pseudo-compilateur, nous pouvons enfin passer aux codes sources mêmes des <em><strong>shaders</strong></em>. Les 3 prochains chapitres leur seront entièrement consacrés. Refaite le stock de café ou de chocolat moi j'dis ! :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
<span class="arrow"></span>
<span class="next">Création du programme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">
<span class="next">OpenGL Shading Language</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="OpenGLShadingLanguage"></a><h2>OpenGL Shading Language</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
<span class="arrow"></span>
<span class="next">Utilisation et améliorations</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
<span class="next">Un peu d&#039;histoire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-965113" data-claire-element-id="965113">Dans le chapitre précédent, nous avons vu ce qu'étaient les <em><strong>shaders</strong></em> et comment les implémenter au sein de nos applications. Nous avons même écrit, en quelque sorte, notre propre compilateur qui permet désormais de compiler absolument tous leurs codes sources. :p</p><p id="r-965114" data-claire-element-id="965114">Aujourd'hui, nous allons justement passer aux codes sources mêmes et étudier le langage de programmation avec lequel ils sont faits : l'<em><strong>OpenGL Shading Language</strong></em>. Nous nous concentrerons principalement sur sa syntaxe qui se rapproche fortement de celle du C mais qui contient tout de même quelques différences.</p><p id="r-965115" data-claire-element-id="965115">Si vous vous sentez prêts alors on peut commencer. :magicien:</p>
</div><a name="Unpeud039histoire"></a><h2>Un peu d&#039;histoire</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">
<span class="arrow"></span>
<span class="next">OpenGL Shading Language</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
<span class="next">Les variables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-l-histoire-des-shaders" data-claire-element-id="965149">L’histoire des shaders</h2><h3 id="r-la-creation-2" data-claire-element-id="965119">La création</h3><p id="r-965116" data-claire-element-id="965116">Ce qu'il faut savoir avec les <em><strong>shaders</strong></em>, c'est que leur intégration au sein des jeux-vidéo est une chose assez récente par rapport à leur création. En effet, ceux-ci ont été créés en <strong>1988</strong> par les studios d'animation <em><strong>Pixar</strong></em> qui avaient remarqué qu'il était possible de traiter tous les pixels un par un pour leur appliquer des instructions spécifiques. Cela leur permettait de manipuler leurs rendus non seulement pour les améliorer mais aussi pour les rendre plus réalistes sans surcharger les ressources des ordinateurs.</p><p id="r-965117" data-claire-element-id="965117">Le premier standard à utiliser les <em><strong>shaders</strong></em> est le <em><strong>RenderMan</strong></em> (<strong>RIS</strong>) développé par les studios du même nom. Depuis, ils se sont développés dans tous les domaines qui traitent la 3D tels que les films d'animation, le cinéma et évidemment les jeux-vidéo. Ils permettent aujourd'hui d'exploiter efficacement la carte graphique pour effectuer une multitude de calculs mathématiques. Leur plus grand intérêt est évidemment la réalisation d'effets réalistes que l'on retrouve aujourd'hui dans tous les jeux-vidéo à la mode. ;)</p><p id="r-965118" data-claire-element-id="965118">Au niveau de leur fonctionnement, vous savez maintenant que les <em><strong>shaders</strong></em> sont des petits programmes qui vont traiter les vertices et les pixels. Ils sont spécialement conçus pour faire ce genre d'opération, ils n'ont donc pas peur de traiter des millions de données à chaque seconde. :p</p><h3 id="r-les-differents-langages-1" data-claire-element-id="965131">Les différents langages</h3><p id="r-965120" data-claire-element-id="965120">Si les <em><strong>shaders</strong></em> sont des programmes alors ils possèdent forcément un code source pour savoir ce qu'ils doivent faire. Et évidemment, ces codes sources doivent être écrits avec un langage de programmation. Depuis 1988, plusieurs entreprises ont tenté de sortir leur propre langage soit pour s'imposer dans le domaine, soit pour un type d'utilisation spécifique. Certains sont plus ou moins connus et même plus ou moins compliqués à utiliser.</p><p id="r-965121" data-claire-element-id="965121">Il existe deux types de langage utilisables pour la programmation des shaders. Jusqu'à récemment, il fallait en utiliser certains qui étaient proches de l'<em>Assembleur</em>, ils étaient donc considérés comme étant de <strong>bas-niveau</strong>. Pour ceux qui ne savent pas ce qu'est l'<em>Assembleur</em>, sachez qu'il s'agit d'un langage de programmation extrêmement difficile à manier pour les non-initiés. Si vous voulez faire un jeu-vidéo 3D avec ça je vous conseille de vous lever très tôt chaque matin pour avancer dans le développement. :p</p><p id="r-965122" data-claire-element-id="965122">Mais heureusement pour nous, il existe aussi des langages dits de <strong>haut-niveau</strong>, donc plus faciles à utiliser, qui se rapprochent fortement de ceux que l'on connait aujourd'hui. Nous pouvons en citer principalement 3 :</p><ul id="r-965129" data-claire-element-id="965129"><li id="r-965124" data-claire-element-id="965124"><p id="r-965123" data-claire-element-id="965123"><em><strong>OpenGL Shading Language</strong></em> (<strong>GLSL</strong>) : créé par le consortium <a href="http://www.opengl.org/archives/about/arb/">Architecture Review Board</a> qui gère <em>OpenGL</em>, il est évidemment compatible avec cet API et en est même le standard actuel</p></li><li id="r-965126" data-claire-element-id="965126"><p id="r-965125" data-claire-element-id="965125"><em><strong>C for Graphics</strong></em> (<strong>Cg</strong>) : créé par Nvidia, il est compatible non seulement avec <em>OpenGL</em> mais aussi avec son concurrent Microsoft <em>Direct3D</em></p></li><li id="r-965128" data-claire-element-id="965128"><p id="r-965127" data-claire-element-id="965127"><em><strong>High Level Shader Language</strong></em> (<em><strong>HLSL</strong></em>) : créé par Microsoft, il est uniquement compatible avec <em>Direct3D</em></p></li></ul><p id="r-965130" data-claire-element-id="965130">Ces langages ne sont pas compatibles avec toutes les API 3D mais ils sont tous utilisés dans le monde du jeu-vidéo. Vu que nous, nous programmons avec OpenGL, nous allons donc utiliser l'<em><strong>OpenGL Shading Language</strong></em> (<strong>GLSL</strong>) pour développer nos shaders.</p><h3 id="r-opengl-shading-language" data-claire-element-id="965148">OpenGL Shading Language</h3><p id="r-965132" data-claire-element-id="965132">Le <strong>GLSL</strong> est donc un langage de programmation créé par l'<a href="http://www.opengl.org/archives/about/arb/">Architecture Review Board</a> pour permettre aux programmeurs d'utiliser directement la puissance des cartes graphiques sans passer par l'ancien <em><strong>pipeline 3D</strong></em>. Cela permet de gagner en rapidité car on évite tous les calculs superflus qui existaient auparavant. On gagne également en flexibilité car on peut traiter chaque pixel individuellement.</p><p id="r-965133" data-claire-element-id="965133">L'avantage de ce langage c'est que d'une part il est multiplateforme, c'est-à-dire qu'il est supporté par la majorité des cartes graphiques, et d'autre part sa syntaxe se rapproche énormément de celle du <strong>C</strong>. Il est plus facile d'apprendre à l'utiliser lui plutôt que d'apprendre l'<em>Assembleur</em>. :p</p><p id="r-965134" data-claire-element-id="965134">Malgré sa notoriété, le <strong>GLSL</strong> n'est né que très récemment. Comparé à la création des shaders qui date de 1988, il fait office de bambin puisqu'il n'a été accepté officiellement qu'en 2004 avec la sortie d'<em>OpenGL 2.0</em>. Pour information, la première version d'OpenGL est sortie en 1992, ce qui fait 12 ans de décalage entre les deux ! :lol:</p><p id="r-965135" data-claire-element-id="965135">Cependant, durant sa courte histoire, le <strong>GLSL</strong> n'a pas chômé puisqu'il a fournit pas moins de 10 versions en l'espace de 8 ans. En voici quelques unes :</p><ul id="r-965144" data-claire-element-id="965144"><li id="r-965137" data-claire-element-id="965137"><p id="r-965136" data-claire-element-id="965136"><strong>1.20</strong> : sortie avec <em>OpenGL 2.1</em>, c'est la version la plus connue à ce jour.</p></li><li id="r-965139" data-claire-element-id="965139"><p id="r-965138" data-claire-element-id="965138"><strong>1.30</strong> : sortie avec <em>OpenGL 3.0</em>, elle introduit une <em><strong>nouvelle façon de programmer</strong></em> et déprécie certaines fonctionnalités (même s'il reste toujours possible de les utiliser).</p></li><li id="r-965141" data-claire-element-id="965141"><p id="r-965140" data-claire-element-id="965140"><strong>1.40</strong> : sortie avec <em>OpenGL 3.1</em>. Cette fois-ci, les fonctionnalités dépréciées sont totalement supprimées, la <em><strong>nouvelle façon de programmer</strong></em> devient le nouveau standard.</p></li><li id="r-965143" data-claire-element-id="965143"><p id="r-965142" data-claire-element-id="965142"><strong>1.50</strong> : sortie avec <em>OpenGL 3.2</em>, nous utiliserons celle-ci car c'est la plus haute version avec laquelle nous pourrons programmer de façon '<em>multiplateforme</em>'. Au-delà, certains OS comme Mac OS X ne supportent plus le langage.</p></li></ul><p id="r-965145" data-claire-element-id="965145">Contrairement à ce qu'on pourrait penser, il n'existe pas de version 1.60, 1.70 ... A partir d'OpenGL 3.3, le numéro des versions devient le même que celui de l'API. Pour OpenGL 3.3 par exemple, le GLSL passe en 3.30, pour la 4.0 il passe en 4.0, ...</p><p id="r-965146" data-claire-element-id="965146">Enfin, vous savez maintenant ce que sont les langages de programmation shader et vous avez même eu le droit à un petit cours d'histoire pour votre culture générale. :p</p><p id="r-965147" data-claire-element-id="965147">Pour la suite du tutoriel, nous utiliserons le <strong>GLSL</strong> dans sa version <strong>1.50</strong>. C'est avec lui que nous serons bientôt capables de faire des effets réalistes que l'on pourra intégrer dans nos scènes 3D. D'ailleurs, nous allons tout de suite passer à l'étude de ce langage en commençant par sa syntaxe de base.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">
<span class="arrow"></span>
<span class="next">OpenGL Shading Language</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
<span class="next">Les variables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesvariables"></a><h2>Les variables</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
<span class="arrow"></span>
<span class="next">Un peu d&#039;histoire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
<span class="next">Les structures de contrôle</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-le-code-source-minimal" data-claire-element-id="965160">Le code source minimal</h2><p id="r-965151" data-claire-element-id="965151">Comme nous l'avons vu dans l'introduction, l'<em><strong>OpenGL Shading Language</strong></em> est fortement inspiré du <strong>C</strong>, vous n'avez donc pas à être effrayés par l'apprentissage d'un nouveau langage de programmation.</p><p id="r-965152" data-claire-element-id="965152">Dans cette partie, nous nous concentrerons principalement sur sa syntaxe avec la gestion des variables, les fonctions, etc. Je ferai en sorte de vous montrer des exemples à chaque fois et nous en profiterons pour faire quelques exercices.</p><p id="r-965153" data-claire-element-id="965153">Je n'ai malheureusement pas d'IDE à vous proposer pour coder vos shaders. Par habitude, j'utilise toujours celui pour coder les applications classiques et je ne connais que très peu les autres pour pouvoir vous les conseiller efficacement. Si vous voulez ne pas être embêtés à ouvrir plusieurs programmes, je vous propose de coder également sur le même IDE que vous utilisez en temps normal.</p><p id="r-965154" data-claire-element-id="965154">Enfin maintenant que l'on sait tout ce que l'on à savoir, nous pouvons enfin commencer l'étude du <strong>GLSL</strong>. La première chose que nous allons voir concerne le code source minimal demandé par un shader pour pouvoir être compilé. Celui-ci est assez simple mais mérite tout de même quelques explications :</p><pre id="r-965155" data-claire-element-id="965155"><code data-claire-semantic="c">void main()
{

}</code></pre><p id="r-965156" data-claire-element-id="965156">Un peu cours n'est-ce pas ? :lol:</p><p id="r-965157" data-claire-element-id="965157">Le code minimal contient donc simplement une fonction qui <strong>main</strong>() qui ne prend et qui ne renvoie aucun paramètre. Remarquez que la syntaxe des fonctions est strictement identiques au <strong>C</strong>. Si vous essayez de compiler ce code vous n'aurez aucun message d'erreur, le shader l'acceptera sans problème mais il n'affichera pas grand chose.</p><p id="r-965158" data-claire-element-id="965158">La fonction <strong>main</strong>() a la même utilité qu'en <strong>C</strong>, c'est elle qui est appelée en première au lancement d'un programme. Nous placerons donc nos premières futures instructions à l'intérieur. Cependant, contrairement au C cette fonction n'a pas besoin de renvoyer une variable pour indiquer si tout s'est bien passé (le fameux <strong>return 0;</strong>).</p><p id="r-965159" data-claire-element-id="965159">En définitif, ce code constitue la source minimale pour compiler un shader, nous devrons donc implémenter la fonction <strong>main</strong>() à chaque fois. ;)</p><h2 id="r-les-variables-30" data-claire-element-id="965243">Les Variables</h2><h3 id="r-les-variables-classiques" data-claire-element-id="965190">Les variables 'classiques'</h3><p id="r-965161" data-claire-element-id="965161">Comme tout tutoriel sur les langages de programmation, nous allons nous attaquer en premier lieu aux <em>variables</em>.</p><p id="r-965162" data-claire-element-id="965162">Il existe plusieurs types de variable avec le <strong>GLSL</strong> dont certains sont assez déroutants car ils n'ont pas leur équivalent en <strong>C</strong>. On va commencer par voir ceux qu'on a l'habitude d'utiliser car ce sont les plus simples à comprendre :</p><ul id="r-965171" data-claire-element-id="965171"><li id="r-965164" data-claire-element-id="965164"><p id="r-965163" data-claire-element-id="965163"><strong>bool</strong> : booléen pouvant prendre la valeur <strong>true</strong> ou <strong>false</strong></p></li><li id="r-965166" data-claire-element-id="965166"><p id="r-965165" data-claire-element-id="965165"><strong>int</strong> : les nombres entiers</p></li><li id="r-965168" data-claire-element-id="965168"><p id="r-965167" data-claire-element-id="965167"><strong>uint</strong> : les nombres entiers non-signés</p></li><li id="r-965170" data-claire-element-id="965170"><p id="r-965169" data-claire-element-id="965169"><strong>float</strong> : les nombres flottants (décimaux)</p></li></ul><aside id="r-965173" data-claire-element-id="965173" data-claire-semantic="warning"><p id="r-965172" data-claire-element-id="965172">Les types <strong>char</strong>, <strong>short</strong>, <strong>long</strong> et <strong>double</strong> n'existent pas. Ne cherchez donc pas à les utiliser ou votre pseudo-compilateur va vous râler dessus. :p</p></aside><p id="r-965174" data-claire-element-id="965174">L'avantage des variables en <strong>GLSL</strong> c'est qu'elles se comportent exactement de la même façon qu'en <strong>C</strong>. Nous pouvons donc les additionner, les multiplier, leur affecter une valeur, etc. Le seul point auquel il faut faire attention c'est leur initialisation qui ne se fait non pas à l'aide de parenthèses mais avec le signe <strong>=</strong> .</p><p id="r-965175" data-claire-element-id="965175">Prenons un petit exemple en déclarant deux variables de type <em><strong>int</strong></em>, puis additionnons-les :</p><pre id="r-965176" data-claire-element-id="965176"><code data-claire-semantic="c">void main()
{
    // Déclaration de deux variables integer

    int mesChats = 5;
    int chatDuVoisin = 1;


    // Addition

    int resultat = mesChats + chatDuVoisin;
}</code></pre><p id="r-965177" data-claire-element-id="965177">Ce code pourrait parfaitement servir à un programme normal. :p</p><p id="r-965178" data-claire-element-id="965178">Vous voyez ici que la déclaration et l'utilisation de variable se passent de la même manière qu'en <strong>C</strong>, chaque instruction se termine même par un point-virgule. Tout ce que vous connaissez sur les variables s'applique au <strong>GLSL</strong>, à savoir :</p><ul id="r-965187" data-claire-element-id="965187"><li id="r-965180" data-claire-element-id="965180"><p id="r-965179" data-claire-element-id="965179">Les opérations arithmétiques</p></li><li id="r-965182" data-claire-element-id="965182"><p id="r-965181" data-claire-element-id="965181">Les affectations</p></li><li id="r-965184" data-claire-element-id="965184"><p id="r-965183" data-claire-element-id="965183">L'incrémentation et la décrémentation (++ et --)</p></li><li id="r-965186" data-claire-element-id="965186"><p id="r-965185" data-claire-element-id="965185">...</p></li></ul><p id="r-965188" data-claire-element-id="965188">Vous avez peut-être même remarqué l'utilisation des commentaires dans le code source. Leur syntaxe reste aussi la même :</p><pre id="r-965189" data-claire-element-id="965189"><code data-claire-semantic="c">void main()
{
    // Petit commentaire


    /* Gros commentaire,
       Parce que j'ai beaucoup de chose à dire */
}</code></pre><h3 id="r-les-tableaux-41" data-claire-element-id="965197">Les tableaux</h3><p id="r-965191" data-claire-element-id="965191">Les tableaux, qui permettent de rassembler des données du même type en mémoire, sont aussi utilisables avec les shaders. Ils se comportent aussi de la même manière, ils possèdent donc une taille et ses cases sont accessibles à l'aide un indice.</p><p id="r-965192" data-claire-element-id="965192">Pour initialiser un tableau, il suffit de lui donner un nom ainsi qu'une taille entre crochets. Pour accéder ou affecter une valeur aux cases, on utilise également les crochets avec un indice qui peut commencer à <strong>0</strong> ou qui peut se terminer par la <strong>taille - 1</strong>.</p><p id="r-965193" data-claire-element-id="965193">Voici un petit exemple de l'utilisation d'un tableau de 3 flottants :</p><pre id="r-965194" data-claire-element-id="965194"><code data-claire-semantic="c">void main()
{
    // Déclaration d'un tableau

    float tableau[3] = {1.0, 2.0, 3.0};


    // Utilisation

    float premiereCase = tableau[0];
}</code></pre><aside id="r-965196" data-claire-element-id="965196" data-claire-semantic="warning"><p id="r-965195" data-claire-element-id="965195">Les tableaux multidimensionnels du type <strong>monTableau[0][0]</strong> ne peuvent pas être utilisés.</p></aside><h3 id="r-les-vecteurs-4" data-claire-element-id="965224">Les vecteurs</h3><p id="r-965198" data-claire-element-id="965198">Les variables que nous venons de voir ont l'avantage d'être faciles à comprendre car nous avons l'habitude de les utiliser dans nos codes sources classiques. Cependant, il existe encore d'autres <em><strong>types</strong></em> propres au <strong>GLSL</strong> qui sont un peu spéciaux. D'ailleurs, je dois vous avouer que vous les connaissez déjà en fait. :p Ces derniers peuvent être comparés aux structures du <strong>C</strong> mais ce sont bel et bien des <strong>types</strong><em>types de variable</em>.</p><p id="r-965199" data-claire-element-id="965199">Ils ont été créés pour faciliter la vie aux développeurs car ils permettent de faire pas mal de calculs mathématiques relatifs à la 3D sans se prendre la tête. Si je vous dis que vous les connaissez déjà c'est parce que la librairie <strong>GLM</strong> que l'on utilise depuis le début du tuto est directement inspiré du <strong>GLSL</strong> et donc de ces types de variable. C'est à dire que l'on retrouve des types communs entre les deux, même s'il s'agit d'un objet d'un coté et d'une variable de l'autre.</p><p id="r-965200" data-claire-element-id="965200">Le premier de ces types concerne les vecteurs, il se décline en plusieurs versions :</p><ul id="r-965207" data-claire-element-id="965207"><li id="r-965202" data-claire-element-id="965202"><p id="r-965201" data-claire-element-id="965201"><strong>vec2</strong> : vecteur à 2 coordonnées</p></li><li id="r-965204" data-claire-element-id="965204"><p id="r-965203" data-claire-element-id="965203"><strong>vec3</strong> : vecteur à 3 coordonnées</p></li><li id="r-965206" data-claire-element-id="965206"><p id="r-965205" data-claire-element-id="965205"><strong>vec4</strong> : vecteur à 4 coordonnées</p></li></ul><aside id="r-965209" data-claire-element-id="965209" data-claire-semantic="information"><p id="r-965208" data-claire-element-id="965208">Ces types-la sont ceux que nous utiliserons la plus avec les shaders, retenez donc bien ce que nous allons voir sur eux.</p></aside><p id="r-965210" data-claire-element-id="965210">Le type <em><strong>vec3</strong></em> devrait vous dire quelque chose il me semble. :p Et oui, l'objet <em><strong>vec3</strong></em> qu'on utilise dans l'application C++ est inspiré directement du type de variable <em><strong>vec3</strong></em>.</p><p id="r-965211" data-claire-element-id="965211">Ces variables en <strong>GLSL</strong> se rapproche plus à des structures <strong>C</strong> car ils contiennent des sortes de &quot;<em><strong>sous-variable</strong></em>&quot;. Par exemple, le type <em><strong>vec2</strong></em> possède deux coordonnées (x, y) qui sont accessibles via l'utilisation du point '<strong>.</strong>' tout comme les structures :</p><pre id="r-965212" data-claire-element-id="965212"><code data-claire-semantic="c">void main()
{
    // Vecteur à 2 coordonnées

    vec2 monVecteur;


    // Accès aux coordonnées

    monVecteur.x = 1.0;
    monVecteur.y = 2.0;
}</code></pre><p id="r-965213" data-claire-element-id="965213">Bien entendu, on peut affecter des valeurs à ces coordonnées. Elles n'auraient que bien peu d'intérêt sinon. :p Ces valeurs doivent être des <em><strong>float</strong></em> et non des <em><strong>int</strong></em>.</p><p id="r-965214" data-claire-element-id="965214">Les types <em><strong>vec3</strong></em> et <em><strong>vec4</strong></em> ont eux-aussi les coordonnées (x, y) sauf qu'ils en possèdent respectivement 1 (<strong>x, y, z</strong>) et 2 (<strong>x, y, z, w</strong>) en plus.</p><aside id="r-965216" data-claire-element-id="965216" data-claire-semantic="information"><p id="r-965215" data-claire-element-id="965215">Petit détail : le <strong>w</strong> se trouve en dernière position et ne vient donc qu'après le <strong>z</strong>, faites attention à ça. ^^</p></aside><p id="r-965217" data-claire-element-id="965217">L'accès à ces nouvelles coordonnées se fait exactement de la même façon ben sûr :</p><pre id="r-965218" data-claire-element-id="965218"><code data-claire-semantic="c">void main()
{
    // Vecteurs à 3 et 4 coordonnées

    vec3 monVecteur;
    vec4 monGrandVecteur;


    // Accès aux coordonnées du premier vecteur

    monVecteur.x = 1.0;
    monVecteur.y = 2.0;
    monVecteur.z = 3.0;


    // Accès aux coordonnées du second vecteur

    monGrandVecteur.x = 1.0;
    monGrandVecteur.y = 2.0;
    monGrandVecteur.z = 3.0;
    monGrandVecteur.w = 4.0;
}</code></pre><p id="r-965219" data-claire-element-id="965219">Vu que ces vecteurs sont des variables comme les autres, nous pouvons donc utiliser les opérateurs arithmétiques sur eux comme le <strong>+</strong>, <strong>-</strong>, <strong>*</strong>, etc :</p><pre id="r-965220" data-claire-element-id="965220"><code data-claire-semantic="c">void main()
{
    // Vecteurs 

    vec3 position, orientation;


    // Affectation de valeur

    position.x = 10.0;
    orientation.x = 5.0;
    ....


    // Opérations

    vec3 resultat = position + orientation;
    resultat *= 0.5;
}</code></pre><p id="r-965221" data-claire-element-id="965221">Comme d'habitude avec les vecteurs, vous devez faire attention au nombre de coordonnées avant d'effectuer des opérations entre eux. Une variable <em><strong>vec2</strong></em> ne peut pas être multipliée par un <em><strong>vec4</strong></em> par exemple.</p><p id="r-965222" data-claire-element-id="965222"><em><strong>Petit bonus</strong></em> : il est possible de faire des tableaux de vecteur vu que ce sont des variables (j'espère vous l'avoir assez rabâché ^^ ) :</p><pre id="r-965223" data-claire-element-id="965223"><code data-claire-semantic="c">void main()
{
    // Vecteurs

    vec4 vecteur1, vecteur2;


    // Tableau

    vec4 montableau[2] = {vecteur1, vecteur2};
}</code></pre><h3 id="r-les-matrices-10" data-claire-element-id="965242">Les matrices</h3><p id="r-965225" data-claire-element-id="965225">Aaaaah les matrices, je suis sûr que vous êtes tous contents de les retrouver. :p Surtout que vous pouvez l'être car le <strong>GLSL</strong> nous fournit très gentiment des types de variable qui devraient vous dire quelque chose.</p><p id="r-965226" data-claire-element-id="965226">Les matrices sont des outils mathématiques incontournables dans la 3D. Il était donc évident de les intégrer dans le langage de programmation des shaders, au même titre que les vecteurs. Elles sont tellement importantes qu'elles possèdent même plusieurs <strong>types</strong> de variable. Voici ceux que l'on utilisera le plus :</p><ul id="r-965233" data-claire-element-id="965233"><li id="r-965228" data-claire-element-id="965228"><p id="r-965227" data-claire-element-id="965227"><strong>mat2</strong> : matrice carrée d'ordre 2</p></li><li id="r-965230" data-claire-element-id="965230"><p id="r-965229" data-claire-element-id="965229"><strong>mat3</strong> : matrice carrée d'ordre 3</p></li><li id="r-965232" data-claire-element-id="965232"><p id="r-965231" data-claire-element-id="965231"><strong>mat4</strong> : matrice carrée d'ordre 4</p></li></ul><p id="r-965234" data-claire-element-id="965234">Hum <em><strong>mat4</strong></em>, moi j'dis ça me rappellerait quelque chose. :-°</p><p id="r-965235" data-claire-element-id="965235">Les matrices en <strong>GLSL</strong> se déclarent simplement : il suffit d'utiliser un des types précédents suivi du nom qu'on veut donner.</p><pre id="r-965236" data-claire-element-id="965236"><code data-claire-semantic="c">void main()
{
    // Matrice carrée d'ordre 3

    mat3 matrice;
}</code></pre><p id="r-965237" data-claire-element-id="965237">Leur principal avantage c'est qu'elles sont <em><strong>AUSSI</strong></em> considérées comme des variables tout comme les vecteurs. Il est donc possible de faire des opérations arithmétiques dessus :</p><pre id="r-965238" data-claire-element-id="965238"><code data-claire-semantic="c">void main()
{
    // Matrices

    mat3 matrice1, matrice2;


    // Multiplication

    mat3 resultat = matrice1 * matrice2;
}</code></pre><p id="r-965239" data-claire-element-id="965239">Simple n'est-ce pas ?</p><p id="r-965240" data-claire-element-id="965240">Je ne vous parle pas de la façon d'accéder aux valeurs des matrices car elles fonctionnement d'une manière différente de celle que l'on connait. En fait, elles se lisent <em>colonne par colonne</em> plutôt que <em>ligne par ligne</em>. Nous verrons cela dans un prochain chapitre pour éviter de s'embrouiller. ;) En revanche, nous allons voir dans cette partie la façon de les initialiser.</p><p id="r-965241" data-claire-element-id="965241">Enfin, vous connaissez maintenant tous les types de variable qu'il existe en <strong>GLSL</strong>. Ou plutôt presque tous car il en existe encore plein d'autres comme les vecteurs d'entier (<strong>ivec</strong>), les matrices non-carrées (<strong>mat3x4</strong>), etc. Je ne vous ai présenté ici que ceux que nous utiliserons le plus, le reste est plus anecdotique.</p><h2 id="r-les-constructeurs-6" data-claire-element-id="965292">Les constructeurs</h2><h3 id="r-l-initialisation-simple" data-claire-element-id="965267">L'initialisation simple</h3><p id="r-965244" data-claire-element-id="965244">Les constructeurs sont des outils très puissants et très flexibles qui vont nous permettre de faire gagner pas mal à temps à nos shaders. C'est une des seuls points que l'on peut rapprocher au <strong>C++</strong>, même s'il ne s'agit pas de réel constructeur de classe car la notion d'objet n'existe pas en <strong>GLSL</strong>.</p><p id="r-965245" data-claire-element-id="965245">Leur utilité vient du fait qu'ils permettent d'initialiser les variables (vecteurs et matrices compris) en une seule ligne de code. Il devient alors inutile d'affecter toutes les valeurs à la main. Le nom du constructeur à utiliser correspond au type de variable à initialiser.</p><p id="r-965246" data-claire-element-id="965246">Par exemple, si on veut initialiser une variable <em><strong>vec3</strong></em> avec les coordonnées (1.0, 2.0, 3.0), il suffit de faire :</p><pre id="r-965247" data-claire-element-id="965247"><code data-claire-semantic="c">void main()
{
    // Initialisation d'un vecteur à 3 coordonnées

    vec3 vecteur = vec3(1.0, 2.0, 3.0);
}</code></pre><p id="r-965248" data-claire-element-id="965248">C'est exactement la même chose qu'avec <strong>GLM</strong>. Ce qui est normal d'ailleurs puisque les développeurs de cette librairie ont fait en sorte que le comportement C++ des objets se rapproche au maximum de celui des variables en <strong>GLSL</strong>. Même l'utilisation faite des constructeurs est recopiée.</p><p id="r-965249" data-claire-element-id="965249">Ce constructeur nous évite au final d'avoir à faire :</p><pre id="r-965250" data-claire-element-id="965250"><code data-claire-semantic="c">void main()
{
    // Initialisation d'un vecteur à 3 coordonnées

    vec3 vecteur;

    vecteur.x = 1.0;
    vecteur.y = 2.0;
    vecteur.z = 3.0;
}</code></pre><p id="r-965251" data-claire-element-id="965251">Les constructeurs font très plaisir quand vous avez plusieurs vecteurs à initialiser dans votre shader, croyez-moi. :p</p><p id="r-965252" data-claire-element-id="965252"><strong><em>Petit bonus</em></strong> : Si vous voulez initialiser un vecteur nul, vous n'avez pas besoin de renseigner toutes les coordonnées. Seule la valeur <strong>0.0</strong> sera nécessaire, le constructeur saura qu'il doit tout initialiser avec :</p><pre id="r-965253" data-claire-element-id="965253"><code data-claire-semantic="c">void main()
{
    // Initialisation d'un vecteur nul

    vec4 vecteur = vec4(0.0);
}</code></pre><p id="r-965254" data-claire-element-id="965254">Les vecteurs ne sont pas les seuls concernés par les constructeurs, les matrices aussi ont le droit d'en profiter. Voici, par exemple, comment initialiser une matrice carrée d'ordre 3 :</p><pre id="r-965255" data-claire-element-id="965255"><code data-claire-semantic="c">void main()
{
    // Initialisation d'une matrice

    mat3 matrice = mat3(0.0, 3.0, 6.0,
                        1.0, 4.0, 7.0,
                        2.0, 5.0, 8.0);
}</code></pre><p id="r-965256" data-claire-element-id="965256">J'ai volontairement fait un retour à la ligne toutes les 3 valeurs pour que le code soit plus lisible, il est évidemment possible de tout mettre en une seule.</p><p id="r-965257" data-claire-element-id="965257">On remarque dans cet exemple la présence de <strong>9</strong> valeurs allant de <strong>0.0</strong> à <strong>8.0</strong> qui permettent d'initialiser la matrice. Si on avait utilisé un type <em><strong>mat4</strong></em>, alors il en aurait fallu <strong>16</strong>. On remarque aussi que les valeurs sont arrangées <em>en colonnes</em>. Si vous suivez les valeurs des yeux dans l'ordre croissant, vous remarquerez cette particularité.</p><div id="r-965259" data-claire-element-id="965259" data-claire-semantic="question"><p id="r-965258" data-claire-element-id="965258">C'est compliqué d'utiliser les matrices comme ça, je vais devoir m'adapter à chaque fois que je vais m'en servir ?</p></div><p id="r-965260" data-claire-element-id="965260">Non pas vraiment car elles seront la plupart du temps déjà données. Nous n'aurons donc pas à jouer avec cette lecture en colonne. ;)</p><p id="r-965261" data-claire-element-id="965261"><em><strong>Petit bonus</strong></em> : pour initialiser une matrice nulle, c'est-à-dire qu'avec des valeurs égales à <strong>0.0</strong>, il existe heureusement une astuce qui nous évite tous les petits soucis précédents. En fait, il suffit juste de mettre <em><strong>une seule</strong></em> valeur <strong>0.0</strong> dans le constructeur comme pour les vecteurs :</p><pre id="r-965262" data-claire-element-id="965262"><code data-claire-semantic="c">void main()
{
    // Matrice nulle

    mat4 matrice = mat4(0.0);
}</code></pre><p id="r-965263" data-claire-element-id="965263">Plus simple que l'exemple précédent n'est-ce pas ? :p</p><p id="r-965264" data-claire-element-id="965264"><strong><em>Dernier bonus</em></strong> : si vous voulez initialiser une matrice d'identité, vous pouvez faire exactement la même chose qu'avec <strong>GLM</strong> en appelant le constructeur avec la valeur <strong>1.0</strong>. Ce dernier saura automatiquement qu'il doit affecter cette valeur à la diagonale :</p><pre id="r-965265" data-claire-element-id="965265"><code data-claire-semantic="c">void main()
{
    // Matrice d'identité

    mat4 matrice = mat4(1.0);
}</code></pre><p id="r-965266" data-claire-element-id="965266">Cette astuce ne fonctionne qu'avec les matrices. Pour les vecteurs, votre compilateur vous râlera dessus car il demandera la valeur des autres coordonnées.</p><h3 id="r-l-initialisation-a-partir-d-autres-variables" data-claire-element-id="965291">L'initialisation à partir d'autres variables</h3><p id="r-965268" data-claire-element-id="965268">L'utilité des constructeurs ne s'arrête pas avec des valeurs statiques, il est tout à fait possible d'initialiser une variable à partir d'autres variables pré-existantes. C'est même une chose que l'on fera très souvent dans nos codes sources. :p</p><p id="r-965269" data-claire-element-id="965269">Le gros avantage également c'est que vous pouvez initialiser des variables à partir de n'importe quelle autre variable quelque soit son <em><strong>type</strong></em>. Par exemple, vous pouvez très bien utiliser un <em><strong>vec2</strong></em> pour construire un <em><strong>vec4</strong></em> à partir de ses coordonnées :</p><pre id="r-965270" data-claire-element-id="965270"><code data-claire-semantic="c">void main()
{
    // Vecteur

    vec2 petitVecteur = vec2(1.0, 2.0);


    // Initialisation à partir d'un autre vecteur

    vec4 grandVecteur = vec4(petitVecteur);
}</code></pre><p id="r-965271" data-claire-element-id="965271">Vous avez compris le principe ? Le constructeur <strong>vec4</strong>() va prendre automatiquement les coordonnées (x, y) du premier vecteur pour les copier dans le second. Nous aurions pu utiliser ce code pour faire la même chose :</p><pre id="r-965272" data-claire-element-id="965272"><code data-claire-semantic="c">void main()
{
    // Vecteur

    vec2 petitVecteur = vec2(1.0, 2.0);


    // Initialisation à partir d'un autre vecteur

    vec4 grandVecteur;

    grandVecteur.x = petitVecteur.x;
    grandVecteur.y = petitVecteur.y;
}</code></pre><p id="r-965273" data-claire-element-id="965273">Alors bon, je dois vous avouer que ce code n'est pas totalement correcte. En fait, si nous le compilions nous nous retrouverions avec un beau message d'erreur car le constructeur ne sait pas comment initialiser les dernières coordonnées (z, w). Il faut donc leur affecter une valeur à elles-aussi.</p><p id="r-965274" data-claire-element-id="965274">Pour cela, il suffit simplement de rajouter 2 autres valeurs en paramètres :</p><pre id="r-965275" data-claire-element-id="965275"><code data-claire-semantic="c">void main()
{
    // Vecteur

    vec2 petitVecteur = vec2(1.0, 2.0);


    // Initialisation à partir de la variable

    vec4 grandVecteur = vec4(petitVecteur, 3.0, 4.0);
}</code></pre><aside id="r-965277" data-claire-element-id="965277" data-claire-semantic="warning"><p id="r-965276" data-claire-element-id="965276">Faites attention cependant à toujours vérifier le nombre de vos paramètres. Il vaut mieux perdre un peu de temps à vérifier plutôt que d'attendre l'erreur de compilation pour vous en rendre compte.</p></aside><p id="r-965278" data-claire-element-id="965278">Cette fois, notre compilateur est content car toutes les coordonnées ont le droit à une valeur.</p><p id="r-965279" data-claire-element-id="965279">D'ailleurs, il est même possible d'inverser les trois paramètres en plaçant les valeurs <strong>3.0</strong> et <strong>4.0</strong> au début :</p><pre id="r-965280" data-claire-element-id="965280"><code data-claire-semantic="c">void main()
{
    // Vecteur position

    vec2 vecteur = vec2(1.0, 2.0);


    // Vecteur

    vec4 vecteur2 = vec4(3.0, 4.0, vecteur);
}</code></pre><p id="r-965281" data-claire-element-id="965281">Si on fait ça en revanche, les données ne seront pas initialisées de la même façon. C'est-à-dire que la valeur <strong>3.0</strong> sera affectée à la coordonnée <strong>x</strong> et la valeur <strong>4.0</strong> à <strong>y</strong>. Pour <strong>z</strong> et <strong>w</strong>, le constructeur va prendre ce qu'il lui reste, à savoir respectivement les coordonnées (<strong>x, y</strong>) de la variable <em><strong>vec2</strong></em>.</p><p id="r-965282" data-claire-element-id="965282">Ce code revient à faire la chose suivante :</p><pre id="r-965283" data-claire-element-id="965283"><code data-claire-semantic="c">void main()
{
    // Vecteur

    vec2 petitVecteur = vec2(1.0, 2.0);


    // Autre vecteur

    vec4 grandVecteur;

    grandVecteur.x = 3.0;
    grandVecteur.y = 4.0;
    grandVecteur.z = petitVecteur.x;
    grandVecteur.w = petitVecteur.y;
}</code></pre><p id="r-965284" data-claire-element-id="965284">Allez, on prend un dernier exemple pour être sûr que vous ayez compris. Si je vous montre le bout de code suivant, seriez-vous capable de trouvez l'équivalent en utilisant un constructeur ?</p><pre id="r-965285" data-claire-element-id="965285"><code data-claire-semantic="c">void main()
{
    // Vecteur

    vec2 petitVecteur = vec2(5.0, 8.0);


    // Autre vecteur

    vec4 grandVecteur;

    grandVecteur.x = 7.0;
    grandVecteur.y = petitVecteur.x;
    grandVecteur.z = petitVecteur.y;
    grandVecteur.w = 2.0;
}</code></pre><p id="r-965286" data-claire-element-id="965286">J'ai volontairement changé les valeurs pour vous déstabiliser. :p</p><p id="r-965287" data-claire-element-id="965287">Vous avez trouvé ?</p><p id="r-965288" data-claire-element-id="965288"></p><pre id="r-965289" data-claire-element-id="965289"><code data-claire-semantic="c">void main()
{
    // Vecteur

    vec2 petitVecteur = vec2(5.0, 8.0);


    // Autre vecteur

    vec4 grandVecteur = vec4(7.0, petitVecteur, 2.0);
}</code></pre><p id="r-965290" data-claire-element-id="965290">Bien évidemment, je passe à coté de toute la subtilité offerte par le <strong>GLSL</strong> au niveau des variables. Cependant, nous en avons vu assez pour pouvoir travailler nos shaders efficacement. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
<span class="arrow"></span>
<span class="next">Un peu d&#039;histoire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
<span class="next">Les structures de contrôle</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesstructuresdecontrle"></a><h2>Les structures de contrôle</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
<span class="arrow"></span>
<span class="next">Les variables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
<span class="next">Fonctions prédéfinies</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-les-structures-de-controles" data-claire-element-id="965323">Les structures de contrôles</h2><p id="r-965294" data-claire-element-id="965294">Nous avons vu le plus gros du chapitre avec la partie sur les variables, il y avait pas mal de petites notions à voir. Nous allons maintenant nous attaquer à tout ce qui concerne les structures de contrôle comme les conditions, les boucles, etc. Il n'y aura pas de surprise cette fois, vous connaissez déjà tout. :p</p><h3 id="r-les-conditions-38" data-claire-element-id="965306">Les conditions</h3><p id="r-965295" data-claire-element-id="965295">Les conditions permettent de déclencher une portion de code en fonction de la valeur d'une variable. Il y a deux manières de les utiliser :</p><ul id="r-965298" data-claire-element-id="965298"><li id="r-965297" data-claire-element-id="965297"><p id="r-965296" data-claire-element-id="965296">Soit avec les instructions : <strong>if</strong>, <strong>else if</strong>, <strong>else</strong></p></li></ul><pre id="r-965299" data-claire-element-id="965299"><code data-claire-semantic="c">void main()
{
    // Variable

    int variable = 1;


    // Conditions

    if(variable == 0)
        ... ;

    else if(variable == 1)
        ... ;

    else
        ... ;
}</code></pre><ul id="r-965302" data-claire-element-id="965302"><li id="r-965301" data-claire-element-id="965301"><p id="r-965300" data-claire-element-id="965300">Soit avec les instructions : <strong>switch</strong>, <strong>case</strong></p></li></ul><pre id="r-965303" data-claire-element-id="965303"><code data-claire-semantic="c">void main()
{
    // Variable

    int variable = 1;


    // Conditions

    switch(variable)
    {
        // Cas 1

        case 0:
            ... ;
        break;


        // Cas 2

        case 1:
            ... ;
        break;


        // Sinon

        default:
            ... ;
        break;
    }
}</code></pre><aside id="r-965305" data-claire-element-id="965305" data-claire-semantic="information"><p id="r-965304" data-claire-element-id="965304">Les mot-clefs <strong>break</strong> et <strong>continue</strong> sont utilisables en <strong>GLSL</strong>.</p></aside><h3 id="r-les-boucles-32" data-claire-element-id="965322">Les boucles</h3><p id="r-965307" data-claire-element-id="965307">Les boucles permettent de répéter une portion de code en fonction d'une condition donnée. Ces conditions sont les mêmes que celles vues précédemment. Il y existe trois façons d'utiliser une boucle :</p><ul id="r-965310" data-claire-element-id="965310"><li id="r-965309" data-claire-element-id="965309"><p id="r-965308" data-claire-element-id="965308">Soit avec l'instruction <strong>while</strong></p></li></ul><pre id="r-965311" data-claire-element-id="965311"><code data-claire-semantic="c">void main()
{
    // Variable

    int variable = 0;


    // Boucle 

    while(variable &lt; 10)
        variable++;
}</code></pre><aside id="r-965313" data-claire-element-id="965313" data-claire-semantic="information"><p id="r-965312" data-claire-element-id="965312">Cette boucle s'exécutera tant que la variable n'aura pas dépassé la valeur <strong>10</strong>.</p></aside><ul id="r-965316" data-claire-element-id="965316"><li id="r-965315" data-claire-element-id="965315"><p id="r-965314" data-claire-element-id="965314">Soit avec les instructions <strong>do</strong>, <strong>while</strong></p></li></ul><pre id="r-965317" data-claire-element-id="965317"><code data-claire-semantic="c">void main()
{
    // Variable

    int variable = 0;


    // Boucle 

    do
    {
        variable++;

    }while(variable &lt; 10);
}</code></pre><ul id="r-965320" data-claire-element-id="965320"><li id="r-965319" data-claire-element-id="965319"><p id="r-965318" data-claire-element-id="965318">Soit avec l'instruction <strong>for</strong></p></li></ul><pre id="r-965321" data-claire-element-id="965321"><code data-claire-semantic="c">void main()
{
    // Variable

    int variable = 0;


    // Boucle 

    for(int i = 0; i &lt; 10; i++)
        variable++;
}</code></pre><h2 id="r-les-fonctions-30" data-claire-element-id="965356">Les fonctions</h2><h3 id="r-la-declaration" data-claire-element-id="965341">La déclaration</h3><p id="r-965324" data-claire-element-id="965324">Les fonctions sont des fonctionnalités importantes avec les langages de programmation. Nous serions très malheureux sans elles puisqu'il faudrait tout coder au même endroit. Imaginez si nous devions réunir toutes les classes d'un projet <strong>C++</strong> dans un seul fichier ! :lol:</p><p id="r-965325" data-claire-element-id="965325">Heureusement pour nous, ça ne sera pas le cas avec le <strong>GLSL</strong> car il permet la création et l'utilisation de fonctions. L'avantage en plus c'est qu'elles se comportent exactement comme en <strong>C</strong> il n'y a aucun différence. Nous retrouvons donc leurs caractéristiques principales :</p><ul id="r-965332" data-claire-element-id="965332"><li id="r-965327" data-claire-element-id="965327"><p id="r-965326" data-claire-element-id="965326">Des paramètres</p></li><li id="r-965329" data-claire-element-id="965329"><p id="r-965328" data-claire-element-id="965328">Un nom</p></li><li id="r-965331" data-claire-element-id="965331"><p id="r-965330" data-claire-element-id="965330">Une variable retournée si besoin</p></li></ul><p id="r-965333" data-claire-element-id="965333">Le prototype, qui représente la signature de la fonction, n'est pas obligatoire mais je vous conseille de l'utiliser pour simplifier la lecture de vos codes sources. Il se place juste avant la fonction <strong>main</strong>() pour que le compilateur puisse connaitre leur existence avant d'attaquer le programme.</p><p id="r-965334" data-claire-element-id="965334">Voici un exemple de prototype de fonction :</p><pre id="r-965335" data-claire-element-id="965335"><code data-claire-semantic="c">// Prototype

vec4 convertirVecteur(vec2 vecteur);


// Fonction main

void main()
{

}</code></pre><p id="r-965336" data-claire-element-id="965336">L'implémentation se fait après la fonction <strong>main</strong>() de façon à ce que ce soit plus lisible :</p><pre id="r-965337" data-claire-element-id="965337"><code data-claire-semantic="c">// Implémentation de la fonction

vec4 convertirVecteur(vec2 vecteur)
{
    vec4 resultat = vec4(vecteur, 0.0, 0.0);

    return resultat;
}</code></pre><p id="r-965338" data-claire-element-id="965338">Notez la présence du mot-clef <strong>return</strong> qui permet de retourner une variable.</p><p id="r-965339" data-claire-element-id="965339">Ce qui donnerait un shader final :</p><pre id="r-965340" data-claire-element-id="965340"><code data-claire-semantic="c">// Prototype

vec4 convertirVecteur(vec2 vecteur);


// Fonction main

void main()
{

}


// Implémentation

vec4 convertirVecteur(vec2 vecteur)
{
    vec4 resultat = vec4(vecteur, 0.0, 0.0);

    return resultat;
}</code></pre><h3 id="r-l-utilisation-2" data-claire-element-id="965345">L'utilisation</h3><p id="r-965342" data-claire-element-id="965342">Les fonctions s'utilisent également de la même manière qu'en <strong>C</strong>. Il suffit de les appeler en leur donnant les paramètres qu'elles demandent.</p><p id="r-965343" data-claire-element-id="965343">Si on reprend l'exemple précédent :</p><pre id="r-965344" data-claire-element-id="965344"><code data-claire-semantic="c">void main()
{
    // Vecteur

    vec2 monPetitVecteur = vec2(1.0, 2.0);


    // Appel à la fonction de conversion

    vec4 monGrandVecteur = convertirVecteur(monPetitVecteur);
}</code></pre><h3 id="r-les-surcharges" data-claire-element-id="965353">Les surcharges</h3><p id="r-965346" data-claire-element-id="965346">La surcharge de fonction est la deuxième notion du <strong>GLSL</strong> que l'on peut rapprocher au <strong>C++</strong>. Il est possible d'utiliser plusieurs fois le même nom pour des fonctions différentes. Les conditions qui permettent de faire cela sont les mêmes qu'avec le <strong>C++</strong>, à savoir que les paramètres doivent être différents en nombre ou en type.</p><p id="r-965347" data-claire-element-id="965347">On reprend une fois de plus l'exemple précédent en surchargeant la fonction <strong>convertirVecteur</strong>() afin qu'elle puisse prendre en paramètre des variables de type <strong><em>vec3</em></strong>:</p><pre id="r-965348" data-claire-element-id="965348"><code data-claire-semantic="c">// Prototype original

vec4 convertirVecteur(vec2 vecteur);


// Surcharge

vec4 convertirVecteur(vec3 vecteur);</code></pre><p id="r-965349" data-claire-element-id="965349">Il faut bien évidemment faire une seconde implémentation car les deux prototypes représentent des fonctions différentes :</p><pre id="r-965350" data-claire-element-id="965350"><code data-claire-semantic="c">// Implémentation de la surcharge

vec4 convertirVecteur(vec3 vecteur)
{
    vec4 resultat = vec4(vecteur, 0.0);

    return resultat;
}</code></pre><p id="r-965351" data-claire-element-id="965351">Pour utiliser cette surcharge, il suffit aussi de l'appeler par son nom. Le shader s'occupera tout seul de savoir s'il doit prendre celle-ci ou la fonction originale :</p><pre id="r-965352" data-claire-element-id="965352"><code data-claire-semantic="c">void main()
{
    // Vecteur

    vec3 monPetitVecteur = vec3(1.0, 2.0, 3.0);


    // Appel à la fonction de conversion

    vec4 monGrandVecteur = convertirVecteur(monPetitVecteur);
}</code></pre><h3 id="r-les-pointeurs-2" data-claire-element-id="965355">Les pointeurs</h3><p id="r-965354" data-claire-element-id="965354">Malheureusement, les pointeurs n'existent pas en <strong>GLSL</strong>, et je ne vous parle même pas des références qui existent encore moins. Il n'est donc pas possible de modifier plusieurs variables dans une seule fonction, il faudra en utiliser plusieurs. Mais je vous rassure, nous n'aurions quasiment jamais eu besoin de pointeur de toute façon. ;)</p><h2 id="r-divers-37" data-claire-element-id="965371">Divers</h2><h3 id="r-le-preprocesseur-5" data-claire-element-id="965363">Le préprocesseur</h3><p id="r-965357" data-claire-element-id="965357">Le préprocesseur est un processus qui s'exécute juste avant le compilateur et qui permet de filtrer ou d'ajouter des instructions au code source original.</p><p id="r-965358" data-claire-element-id="965358">Sa particularité vient du fait qu'il ne lit pas les lignes de code '<em>normales</em>' mais uniquement celles que l'on appelle des <strong>directives de préprocesseur</strong>. On les reconnait grâce à leur symbole <strong>#</strong>.</p><p id="r-965359" data-claire-element-id="965359">Avec le <strong>GLSL</strong>, il existe aussi un préprocesseur qui nous permet d'utiliser des directives comme <strong>#define</strong>, <strong>#ifdef</strong>, ... La plus importante pour nous va être celle qui permet de définir la version du <strong>GLSL</strong> avec laquelle nous coderons. Elle s'appelle <strong>#version</strong> et s'utilise de cette façon :</p><pre id="r-965360" data-claire-element-id="965360"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Fonction main()

void main()
{

}</code></pre><p id="r-965361" data-claire-element-id="965361">Elle permet de dire à OpenGL que notre code source utilisera la version <strong>1.50</strong> du <strong>GLSL</strong> ainsi que le profil <strong><em>core</em></strong>. Notez qu'il est possible de remplacer le mot-clef <strong>core</strong> par <strong>compatibility</strong>. ;)</p><p id="r-965362" data-claire-element-id="965362">Nous utiliserons cette directive au début de chacun de nos codes sources à partir de maintenant.</p><h3 id="r-les-structures-5" data-claire-element-id="965370">Les structures</h3><p id="r-965364" data-claire-element-id="965364">Les structures sont un peu comme les ancêtres des objets. Ils possèdent des champs, que l'on peut rapprocher aux attributs, mais ne possèdent pas de méthodes propres. La bonne nouvelle c'est qu'on peut quand même les utiliser pour programmer nos shaders. :)</p><p id="r-965365" data-claire-element-id="965365">Leur déclaration se fait exactement comme en <strong>C</strong>, on utilise le mot-clef <strong>struct</strong> accompagné du nom souhaité. On inclut ensuite les champs à l'intérieur.</p><p id="r-965366" data-claire-element-id="965366">Prenons un petit exemple en déclarant une structure <em><strong>Camera</strong></em>. Structure qui ressemble étonnement à une classe que nous avons déjà codée. :p</p><pre id="r-965367" data-claire-element-id="965367"><code data-claire-semantic="c">// Structure Camera

struct Camera
{
    vec3 position;
    vec3 orientation;

    float rapidite;
};</code></pre><p id="r-965368" data-claire-element-id="965368">L'avantage des structures en <strong>GLSL</strong> c'est qu'il n'y a pas besoin d'utiliser le mot clef <strong>typedef</strong> pour s'affranchir du mot-clef <strong>struct</strong>. Nous pouvons donc utiliser notre structure directement comme s'il s'agissait d'une variable normale :</p><pre id="r-965369" data-claire-element-id="965369"><code data-claire-semantic="c">void main()
{
    // Déclaration d'une structure Camera

    Camera maCamera;


    // Utilisation

    maCamera.position = vec3(2.0, 5.0, 2.0);
    maCamera.rapidite = 0.5;
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
<span class="arrow"></span>
<span class="next">Les variables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
<span class="next">Fonctions prédéfinies</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Fonctionsprdfinies"></a><h2>Fonctions prédéfinies</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
<span class="arrow"></span>
<span class="next">Les structures de contrôle</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">
<span class="next">Les shaders démystifiés (Partie 1/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-965373" data-claire-element-id="965373">Nous avons fait le tour de la syntaxe de notre nouveau langage, il n'y a pas grand chose à dire de plus dessus. Je vous réserve le reste pour le chapitre suivant. ;) Mais avant de passer à ça, j'aimerais vous montrer quelques fonctions prédéfinies qui nous serons utiles par la suite.</p><p id="r-965374" data-claire-element-id="965374">En effet, le <strong>GLSL</strong> a l'avantage d'intégrer nativement une bibliothèque mathématique assez complète qui permet d'aider le développeur dans ses calculs 3D. On retrouve ainsi plusieurs fonctions relatives à la trigonométrie, aux vecteurs, aux matrices, etc.</p><h2 id="r-les-fonctions-trigonometriques" data-claire-element-id="965387">Les fonctions trigonométriques</h2><h3 id="r-sinus-cosinus-et-tangente-1" data-claire-element-id="965380">Sinus, Cosinus et Tangente</h3><p id="r-965375" data-claire-element-id="965375">Si je vous parle de trigonométrie vous devez forcément penser aux fonctions <strong>sin</strong>(), <strong>cos</strong>() et <strong>tan</strong>(). :p Elles permettent de calculer respectivement le sinus, le cosinus et la tangente d'un angle. Leur prototype est le même qu'en <strong>C++</strong> :</p><pre id="r-965376" data-claire-element-id="965376"><code data-claire-semantic="c">float sin(float angle);
float cos(float angle);
float tan(float angle);</code></pre><p id="r-965377" data-claire-element-id="965377">Voici un petit exemple qui permet de calculer le sinus d'un angle :</p><pre id="r-965378" data-claire-element-id="965378"><code data-claire-semantic="c">#version 150 core

void main()
{
    // Calcul du sinus d'un angle de 90°

    float sinus = sin(90.0);             /* La valeur du sinus sera de 1.0 */
}</code></pre><p id="r-965379" data-claire-element-id="965379">Les autres fonctions s'utilisent de la même façon.</p><h3 id="r-convertir-un-angle-en-radian-et-inversement" data-claire-element-id="965386">Convertir un angle en radian et inversement</h3><p id="r-965381" data-claire-element-id="965381">Il existe des fonctions permettant de convertir un angle exprimé en degrés vers les radians, et inversement bien sûr. Elles sont très utiles dans certains cas, d'ailleurs on aurait bien aimé les avoir en C++ quand nous avons utilisé la trigonométrie. :p</p><p id="r-965382" data-claire-element-id="965382">Ces fonctions s'appellent respectivement <strong>radians</strong>() et <strong>degrees</strong>() :</p><pre id="r-965383" data-claire-element-id="965383"><code data-claire-semantic="c">float radians(float degrees);
float degrees(float radians);</code></pre><p id="r-965384" data-claire-element-id="965384">Un petit exemple de conversion d'un angle exprimé en degrés :</p><pre id="r-965385" data-claire-element-id="965385"><code data-claire-semantic="c">#version 150 core

void main()
{
    // Conversion de l'angle 90° en radians

    float radians = radians(90.0);                /* La valeur de l'angle sera de 1/2 Pi soit environ 1.57 */
}</code></pre><h2 id="r-les-fonctions-relatives-aux-vecteurs" data-claire-element-id="965403">Les fonctions relatives aux vecteurs</h2><h3 id="r-normalisation-1" data-claire-element-id="965395">Normalisation</h3><p id="r-965388" data-claire-element-id="965388">Ah la normalisation ... Ça devrait vous rappeler quelques souvenirs. Surtout que nous avons eu l'occasion d'en faire plein avec <strong>GLM</strong>. :p</p><p id="r-965389" data-claire-element-id="965389">Vous devriez donc savoir que normaliser un vecteur revient à réduire sa <em>norme</em> (sa longueur) à <strong>1.0</strong>. Cela permet de faire pas mal d'opérations mathématiques et de profiter de la trigonométrie.</p><p id="r-965390" data-claire-element-id="965390">La fonction qui permet de normaliser un vecteur s'appelle <strong>normalize</strong>() exactement comme celle de <strong>GLM</strong> :</p><pre id="r-965391" data-claire-element-id="965391"><code data-claire-semantic="c">vec normalize(vec vector);</code></pre><aside id="r-965393" data-claire-element-id="965393" data-claire-semantic="information"><p id="r-965392" data-claire-element-id="965392">Les fonctions prédéfinies sont en général toutes surchargées, ce qui évite d'avoir à utiliser des noms différents pour la même opération. Le type <strong><em>vec</em></strong> n'existe évidemment pas, je l'ai mis ici pour vous montrer que la fonction <strong>normalize</strong>() était surchargée.</p></aside><p id="r-965394" data-claire-element-id="965394">Je ne vous fait pas d'exemple, je pense que vous avez compris le principe. ;)</p><h3 id="r-calculer-la-norme" data-claire-element-id="965398">Calculer la norme</h3><p id="r-965396" data-claire-element-id="965396">Vu que l'on parle de la <em>norme</em> d'un vecteur, nous pouvons parler de la fonction qui permet de la calculer. Elle s'appelle <strong>length</strong>() :</p><pre id="r-965397" data-claire-element-id="965397"><code data-claire-semantic="c">float length(vec vector);</code></pre><h3 id="r-calculer-le-produit-vectoriel" data-claire-element-id="965402">Calculer le produit vectoriel</h3><p id="r-965399" data-claire-element-id="965399">Nous avons déjà utilisé le produit vectoriel pour faire des calculs dans la classe <em><strong>Camera</strong></em> qui nous permettait de trouver le vecteur orthogonal à l'orientation. La fonction permettant de faire la même chose en <strong>GLSL</strong> s'appelle aussi <strong>cross</strong>() :</p><pre id="r-965400" data-claire-element-id="965400"><code data-claire-semantic="c">vec cross(vec vector1, vec vertor2);</code></pre><p id="r-965401" data-claire-element-id="965401">Cette fonction prend deux paramètres représentant les deux vecteurs à multiplier. Faites attention à utiliser le même <strong><em>type</em></strong> pour cette opération. Vous aurez une erreur de compilation si vous essayez d'en utilisez deux différents.</p><h2 id="r-autres-fonctions-2" data-claire-element-id="965410">Autres fonctions</h2><p id="r-965404" data-claire-element-id="965404">Il existe encore une multitude de fonctions prédéfinies dont je ne vous ai pas parlées mais il y en a tellement que mes pauvres doigts souffriraient trop si je devais toutes vous les énumérer. :lol:</p><p id="r-965405" data-claire-element-id="965405">Sachez qu'il existe aussi des fonctions permettant d'effectuer des calculs sur les matrices comme le calcul du déterminant, d'inversion, etc. Il en existe aussi qui permettent de faire des opérations 'classiques' comme les arrondis, les valeurs absolues, les modulos, etc. Le <strong>GLSL</strong> contient une véritable bibliothèque couteau-suisse pour les calculs mathématiques dont est inspirée la librairie <strong>GLM</strong>.</p><p id="r-965406" data-claire-element-id="965406">Dernier point à préciser : rappelez-vous que les shaders s'exécutent autant de fois qu'il y a de vertices/pixels, donc potentiellement des millions de fois par seconde. Il est donc préférable d'utiliser les fonctions prédéfinies à la place des nôtres quand on le peut.</p><p id="r-965407" data-claire-element-id="965407">Nous avons fait le tour du langage de programmation qu'est l'<strong>OpenGL Shading Language</strong>.</p><p id="r-965408" data-claire-element-id="965408">Nous connaissons les types de variables que l'on peut utiliser, les structures de contrôle comme les conditions, les boucles, etc. Nous avons vu en somme sa syntaxe globale; syntaxe qui se rapproche beaucoup de <strong>C/C++</strong>, les développeurs ont tout fait pour faciliter son apprentissage.</p><p id="r-965409" data-claire-element-id="965409">Nous nous servirons de ce langage pour coder tous nos futurs codes sources. D'ailleurs, nous allons commencer tout de suite dans le chapitre suivant en programmant notre premier <strong>shader</strong> ! :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
<span class="arrow"></span>
<span class="next">Les structures de contrôle</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">
<span class="next">Les shaders démystifiés (Partie 1/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesshadersdmystifisPartie1_2"></a><h2>Les shaders démystifiés (Partie 1/2)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
<span class="arrow"></span>
<span class="next">Fonctions prédéfinies</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
<span class="next">Préparation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-965413" data-claire-element-id="965413">Nous voici arrivés (enfin !) au chapitre qui va nous permettre de créer nos propres <em><strong>shaders</strong></em>. Nous avons appris la syntaxe du langage de programmation <strong>GLSL</strong> et nous savons même comment compiler des codes sources l'utilisant.</p><p id="r-965414" data-claire-element-id="965414">Aujourd'hui, nous allons lever le voile sur les dernières zones d'ombres qui subsistent dans nos programmes, notamment en étudiant tous les petits fichiers sources que l'on utilisés depuis le début. Nous en profiterons pour jouer un peu avec afin de créer nos premiers effets personnalisés. Ils seront un peu basiques certes, mais il faut bien commencer par quelque chose. ^^</p><p id="r-965415" data-claire-element-id="965415">J'ai préféré couper ce chapitre en deux car il était trop lourd à suivre en une seule fois. A la place, vous aurez le droit à deux chapitres plus petits dans lesquels vous vous sentirez moins étouffés.</p>
</div><a name="Prparation"></a><h2>Préparation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">
<span class="arrow"></span>
<span class="next">Les shaders démystifiés (Partie 1/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
<span class="next">Premier shader</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-preparation-18" data-claire-element-id="965455">Préparation</h2><p id="r-965416" data-claire-element-id="965416">Dans ce chapitre, nous allons nous concentrer sur les premiers shaders que nous avons utilisés au début du tuto. Exit donc les matrices et la caméra, nous verrons ça dans le prochain chapitre. Il vaut mieux ne pas s'en occuper pour le moment car si je vous montre tout d'un coup, vous risquez de vous emmêler les pinceaux. :p Il vaut mieux y aller en douceur. Mais ne vous inquiétez pas, nous en verrons assez pour faire nos premiers essais dans la programmation <strong>GLSL</strong>.</p><p id="r-965417" data-claire-element-id="965417">Avant de commencer, il va nous falloir nettoyer un peu la boucle principale en enlevant la gestion des matrices et de la caméra. Cependant, nous allons devoir conserver l'utilisation du <strong>VBO</strong> et du <strong>VAO</strong> car ceux-ci sont obligatoirement demandés par la version <strong>3.3</strong> d'<strong>OpenGL</strong>.</p><p id="r-965418" data-claire-element-id="965418">Nous testerons nos premières sources sur un petit carré à 2 dimensions pour le moment vu que les matrices ne sont pas encore utilisables. Nous finirons sur des cubes et des pyramides dans le chapitre suivant.</p><p id="r-965419" data-claire-element-id="965419">Bref pour commencer, je vous demande de vider votre méthode <strong>bouclePrincipale</strong>() de tout son contenu précédent. Ajoutez-y ensuite les vertices de notre petit carré :</p><pre id="r-965420" data-claire-element-id="965420"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Vertices 

    float vertices[] = {-0.5, -0.5,   0.5, -0.5,   0.5, 0.5,    // Triangle 1
                        -0.5, -0.5,   -0.5, 0.5,   0.5, 0.5};   // Triangle 2
}</code></pre><p id="r-965421" data-claire-element-id="965421">Ce carré ne sera pas minuscule ne vous inquiétez pas. Vu que nous n'utilisons pas la caméra il faut revenir à l'ancien repère où les coordonnées sont comprises dans l'intervalle [<strong>-1</strong>; <strong>1</strong>]. Si vous faites un carré dépassant cette taille alors il prendra toute votre fenêtre.</p><p id="r-965422" data-claire-element-id="965422">Enfin, maintenant qu'on déclaré nos vertices, nous pouvons passer à l'implémentation du <strong>VBO</strong>. Il n'y a qu'un seul tableau à envoyer pour le moment donc le calcul de sa taille sera simple. L'espace mémoire à allouer fait donc <strong>3 vertices x 2 coordonnées x 2 triangles</strong> = <strong>12</strong> cases :</p><pre id="r-965423" data-claire-element-id="965423"><code data-claire-semantic="cpp">// VBO et taille des données

GLuint vbo;
int tailleVerticesBytes = 12 * sizeof(float);</code></pre><p id="r-965424" data-claire-element-id="965424">Une fois la taille définie, on peut allouer <strong>VBO</strong> :</p><pre id="r-965425" data-claire-element-id="965425"><code data-claire-semantic="cpp">// Génération du VBO

glGenBuffers(1, &amp;vbo);


// Verrouillage

glBindBuffer(GL_ARRAY_BUFFER, vbo);


    // Allocation

    glBufferData(GL_ARRAY_BUFFER, tailleVerticesBytes, 0, GL_STATIC_DRAW);


// Déverrouillage

glBindBuffer(GL_ARRAY_BUFFER, 0);</code></pre><p id="r-965426" data-claire-element-id="965426">Puis, on peut le remplir avec les vertices :</p><pre id="r-965427" data-claire-element-id="965427"><code data-claire-semantic="cpp">// Allocation

glBufferData(GL_ARRAY_BUFFER, tailleVerticesBytes, 0, GL_STATIC_DRAW);


// Remplissage

glBufferSubData(GL_ARRAY_BUFFER, 0, tailleVerticesBytes, vertices);</code></pre><p id="r-965428" data-claire-element-id="965428">Nous avons vu ce code dans le chapitre sur les <strong>VBO</strong>, il ne devrait pas vous poser de problème. ;)</p><p id="r-965429" data-claire-element-id="965429">Ce qui nous donne pour le moment :</p><pre id="r-965430" data-claire-element-id="965430"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Vertices 

    float vertices[] = {-0.5, -0.5,   0.5, -0.5,   0.5, 0.5,    // Triangle 1
                        -0.5, -0.5,   -0.5, 0.5,   0.5, 0.5};   // Triangle 2



    /* ***** Gestion du VBO ***** */


    GLuint vbo;
    int tailleVerticesBytes = 12 * sizeof(float);


    // Génération du VBO

    glGenBuffers(1, &amp;vbo);


    // Verrouillage

    glBindBuffer(GL_ARRAY_BUFFER, vbo);


        // Remplissage

        glBufferData(GL_ARRAY_BUFFER, tailleVerticesBytes, 0, GL_STATIC_DRAW);
        glBufferSubData(GL_ARRAY_BUFFER, 0, tailleVerticesBytes, vertices);


    // Déverrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, 0);
}</code></pre><p id="r-965431" data-claire-element-id="965431">On passe maintenant au <strong>VAO</strong>. On commence évidemment par lui générer un <em><strong>ID</strong></em> :</p><pre id="r-965432" data-claire-element-id="965432"><code data-claire-semantic="cpp">// VAO

GLuint vao;


// Génération du VAO

glGenVertexArrays(1, &amp;vao);</code></pre><p id="r-965433" data-claire-element-id="965433">Nous devons mettre à l'intérieur tous nos appels aux tableaux <em><strong>Vertex Attrib</strong></em> (activation comprise). Pour le moment, nous n'avons que celui des vertices à appeler donc c'est assez simple.</p><p id="r-965434" data-claire-element-id="965434">D'ailleurs en parlant de ça, faites attention aux paramètres de ce tableau car nos vertices possèdent <strong>2</strong> coordonnées et non <strong>3</strong>. Affectez donc la valeur <strong>2</strong> au paramètre <strong>size</strong> :</p><pre id="r-965435" data-claire-element-id="965435"><code data-claire-semantic="cpp">// Verrouillage du VAO

glBindVertexArray(vao);


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, vbo);


        // Vertex Attrib 0 (Vertices)

        glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
        glEnableVertexAttribArray(0);


    // Déverrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, 0);


// Déverrouillage du VAO

glBindVertexArray(0);</code></pre><aside id="r-965437" data-claire-element-id="965437" data-claire-semantic="warning"><p id="r-965436" data-claire-element-id="965436">N'oubliez pas de verrouiller votre <strong>VBO</strong> quand vous utilisez le tableau <strong>Vertex Attrib</strong>.</p></aside><p id="r-965438" data-claire-element-id="965438">Si on résume tout ça :</p><pre id="r-965439" data-claire-element-id="965439"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Vertices 

    float vertices[] = {-0.5, -0.5,   0.5, -0.5,   0.5, 0.5,    // Triangle 1
                        -0.5, -0.5,   -0.5, 0.5,   0.5, 0.5};   // Triangle 2



    /* ***** Gestion du VBO ***** */


    GLuint vbo;
    int tailleVerticesBytes = 12 * sizeof(float);


    // Génération du VBO

    glGenBuffers(1, &amp;vbo);


    // Verrouillage

    glBindBuffer(GL_ARRAY_BUFFER, vbo);


        // Remplissage

        glBufferData(GL_ARRAY_BUFFER, tailleVerticesBytes, 0, GL_STATIC_DRAW);
        glBufferSubData(GL_ARRAY_BUFFER, 0, tailleVerticesBytes, vertices);


    // Déverrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, 0);

 

    /* ***** Gestion du VAO ***** */


    GLuint vao;
    glGenVertexArrays(1, &amp;vao);


    // Verrouillage du VAO

    glBindVertexArray(vao);


        // Verrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, vbo);


            // Vertex Attrib 0 (Vertices)

            glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
            glEnableVertexAttribArray(0);


        // Déverrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, 0);


    // Déverrouillage du VAO

    glBindVertexArray(0);
}</code></pre><p id="r-965440" data-claire-element-id="965440">Pfiouuu, tout ce code pour envoyer deux simples triangles ! :lol:</p><p id="r-965441" data-claire-element-id="965441">Et encore ce n'est pas fini, il nous manque toujours la boucle <strong>while</strong>. On commence à bien la connaitre celle-la :</p><pre id="r-965442" data-claire-element-id="965442"><code data-claire-semantic="cpp">// Variables relatives au framerate

unsigned int frameRate (1000 / 50);
Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


// Boucle principale

while(!m_input.terminer())
{
    // Gestion des évènements, etc.

    .... 
}</code></pre><p id="r-965443" data-claire-element-id="965443">On inclut évidemment le code de gestion des évèndments :</p><pre id="r-965444" data-claire-element-id="965444"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    // Gestion des évènements

    m_input.updateEvenements();

    if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
       break; 


    // Rendu 

    ....



    // Calcul du temps écoulé

    finBoucle = SDL_GetTicks();
    tempsEcoule = finBoucle - debutBoucle;


    // Si nécessaire, on met en pause le programme

    if(tempsEcoule &lt; frameRate)
        SDL_Delay(frameRate - tempsEcoule);  
}</code></pre><p id="r-965445" data-claire-element-id="965445">Et enfin, on rajoute le code permettant de nettoyer et d'actualiser ce qui est affiché à l'écran :</p><pre id="r-965446" data-claire-element-id="965446"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    // Gestion des évènements

    m_input.updateEvenements();

    if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
       break; 


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);




    /* *** Rendu *** */




    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(m_fenetre);


    // Calcul du temps écoulé

    finBoucle = SDL_GetTicks();
    tempsEcoule = finBoucle - debutBoucle;


    // Si nécessaire, on met en pause le programme

    if(tempsEcoule &lt; frameRate)
        SDL_Delay(frameRate - tempsEcoule);  
}</code></pre><p id="r-965447" data-claire-element-id="965447">Il ne reste plus qu'à afficher notre rendu. Celui-ci va être très simple car il suffit de verrouiller le <strong>VAO</strong>, puis d'appeler la fonction <strong>glDrawArrays</strong>() :</p><pre id="r-965448" data-claire-element-id="965448"><code data-claire-semantic="cpp">// Verrouillage du VAO

glBindVertexArray(vao);


// Rendu

glDrawArrays(GL_TRIANGLES, 0, 6);


// Déverrouillage du VAO

glBindVertexArray(0);</code></pre><p id="r-965449" data-claire-element-id="965449">Ah dernier point, il faut penser à détruire le <strong>VBO</strong> et le <strong>VAO</strong> une fois la boucle terminée. ;)</p><pre id="r-965450" data-claire-element-id="965450"><code data-claire-semantic="cpp">// Destruction du VAO et du VBO

glDeleteBuffers(1, &amp;vbo);
glDeleteVertexArrays(1, &amp;vao);</code></pre><p id="r-965451" data-claire-element-id="965451">Récap final :</p><pre id="r-965452" data-claire-element-id="965452"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Vertices

    float vertices[] = {-0.5, -0.5,   0.5, -0.5,   0.5, 0.5,    // Triangle 1
                        -0.5, -0.5,   -0.5, 0.5,   0.5, 0.5};   // Triangle 2



    /* ***** Gestion du VBO ***** */


    GLuint vbo;
    int tailleVerticesBytes = 12 * sizeof(float);


    // Génération du VBO

    glGenBuffers(1, &amp;vbo);


    // Verrouillage

    glBindBuffer(GL_ARRAY_BUFFER, vbo);


        // Remplissage

        glBufferData(GL_ARRAY_BUFFER, tailleVerticesBytes, 0, GL_STATIC_DRAW);
        glBufferSubData(GL_ARRAY_BUFFER, 0, tailleVerticesBytes, vertices);


    // Déverrouillage

    glBindBuffer(GL_ARRAY_BUFFER, 0);



    /* ***** Gestion du VAO ***** */


    GLuint vao;


    // Génération du VAO

    glGenVertexArrays(1, &amp;vao);


    // Verrouillage du VAO

    glBindVertexArray(vao);


        // Verrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, vbo);


            // Vertex Attrib 0 (Vertices)

            glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
            glEnableVertexAttribArray(0);


        // Déverrouillage du VBO

        glBindBuffer(GL_ARRAY_BUFFER, 0);


    // Déverrouillage du VAO

    glBindVertexArray(0);


    // Variables relatives au framerate

    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Boucle principale

    while(!m_input.terminer())
    {
        // On définit le temps de début de boucle

        debutBoucle = SDL_GetTicks();


        // Gestion des évènements

        m_input.updateEvenements();

        if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
           break;


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


        // Verrouillage du VAO

        glBindVertexArray(vao);


        // Rendu

        glDrawArrays(GL_TRIANGLES, 0, 6);


        // Déverrouillage du VAO

        glBindVertexArray(0);


        // Actualisation de la fenêtre

        SDL_GL_SwapWindow(m_fenetre);


        // Calcul du temps écoulé

        finBoucle = SDL_GetTicks();
        tempsEcoule = finBoucle - debutBoucle;


        // Si nécessaire, on met en pause le programme

        if(tempsEcoule &lt; frameRate)
            SDL_Delay(frameRate - tempsEcoule);
    }


    // Destruction du VAO et du VBO

    glDeleteBuffers(1, &amp;vbo);
    glDeleteVertexArrays(1, &amp;vao);
}</code></pre><p id="r-965453" data-claire-element-id="965453">Nous avons maintenant un code propre sur lequel nous pouvons nous exercer. Nous augmenterons son contenu au fur et à mesure jusqu'à réintégrer les matrices, la caméra et les textures.</p><p id="r-965454" data-claire-element-id="965454">J'ai préféré faire une partie dédiée pour cela, en vous expliquant chaque étape, plutôt que de vous jeter le code d'un coup. Vous connaissez absolument tout ce qui se trouve à l'intérieur, il n'y a rien de nouveau (pour le moment). ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">
<span class="arrow"></span>
<span class="next">Les shaders démystifiés (Partie 1/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
<span class="next">Premier shader</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Premiershader"></a><h2>Premier shader</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
<span class="arrow"></span>
<span class="next">Préparation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
<span class="next">Gestion de la couleur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-affichage-simple" data-claire-element-id="965544">Affichage simple</h2><h3 id="r-chargement-6" data-claire-element-id="965462">Chargement</h3><p id="r-965457" data-claire-element-id="965457">Il est enfin temps de programmer notre premier shader, celui-ci sera très basique car il ne se contentera que d'afficher le carré à l'écran. Dans un premier temps nous lui donnerons la couleur blanche, nous gèrerons les autres couleurs petit à petit.</p><p id="r-965458" data-claire-element-id="965458">Pour commencer, je vais vous demander de vider complétement le dossier <strong>Shaders</strong> de votre projet afin d'enlever tous les précédents codes sources. Une fois fait, créez à la main deux nouveaux fichiers qui porteront le nom de <strong>basique2D.vert</strong> et <strong>basique2D.frag</strong>. Ensuite, déclarez un objet de type <em><strong>Shader</strong></em> dans la méthode <strong>bouclePrincipale</strong>() avec en paramètres le chemin vers ces fichiers :</p><pre id="r-965459" data-claire-element-id="965459"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Shader

    Shader shader(&quot;Shaders/basique2D.vert&quot;, &quot;Shaders/basique2D.frag&quot;);
    shader.charger();


    // Vertices 

    float vertices[] = {-0.5, -0.5,   0.5, -0.5,   0.5, 0.5,    // Triangle 1
                        -0.5, -0.5,   -0.5, 0.5,   0.5, 0.5};   // Triangle 2


    ....
}</code></pre><p id="r-965460" data-claire-element-id="965460">Activez-le ensuite au moment du rendu de façon à ce qu'il soit prit en compte par OpenGL :</p><pre id="r-965461" data-claire-element-id="965461"><code data-claire-semantic="cpp">// Activation du shader

glUseProgram(shader.getProgramID());


    // Rendu

    glBindVertexArray(vao);

        glDrawArrays(GL_TRIANGLES, 0, 6);

    glBindVertexArray(0);


// Désactivation du shader

glUseProgram(0);</code></pre><h3 id="r-le-vertex-shader-1" data-claire-element-id="965489">Le Vertex Shader</h3><p id="r-965463" data-claire-element-id="965463">Nos outils sont en place et les fichiers sont crées ... Nous pouvons maintenant passer à la programmation du code source.</p><p id="r-965464" data-claire-element-id="965464">Nous commencerons par celui du <strong>Vertex Shader</strong> car c'est celui-ci qu'OpenGL appellera en premier dans le <em><strong>pipeline 3D</strong></em>. Son rôle consiste à prendre un vertex (avec la couleur et les coordonnées de texture qui lui sont associées) pour travailler dessus.</p><p id="r-965465" data-claire-element-id="965465">Son code source commencera par l'utilisation de la balise <strong>#version</strong>, pour indiquer la version du <strong>GLSL</strong> utilisée, suivie par la fonction <strong>main</strong>() :</p><pre id="r-965466" data-claire-element-id="965466"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Fonction main

void main()
{

}</code></pre><p id="r-965467" data-claire-element-id="965467">Pour la suite, nous aurons besoin d'une notion que l'on a déjà vue précédemment : les <strong><em>entrées shader</em></strong>. Nous avons évoqué ce terme il y a à peine deux chapitres quand nous parlions du linkage du shader. Nous utilisions alors la fonction <strong>glBindAttribLocation</strong>() qui permettait de créer une passerelle entre un tableau <strong>Vertex Attrib</strong> et sa variable présente dans le <strong>GLSL</strong>.</p><p id="r-965468" data-claire-element-id="965468">Pour les vertices par exemple, le nom de cette variable était <strong>in_Vertex</strong> :</p><figure id="r-965470" data-claire-element-id="965471"><img id="r-965469" data-claire-element-id="965469" src="medias/uploads.siteduzero.com_files_420001_421000_420393.png" alt="Image utilisateur"/></figure><p id="r-965472" data-claire-element-id="965472">Nous avons utilisé la fonction <strong>glBindAttribLocation</strong>() pour verrouiller cette entrée, donc la variable <strong>in_Vertex</strong> est accessible dans notre code source. D'ailleurs, les autres variables comme <strong>in_Color</strong> sont elles aussi accessibles, nous verrons cela un peu plus loin. ;)</p><p id="r-965473" data-claire-element-id="965473">Pour utiliser <strong>in_Vertex</strong>, il faut déclarer une variable globale portant son nom. Je dis bien globale parce qu'elle doit être déclarée en dehors de la fonction <strong>main</strong>(). Elle doit être représentée par un type <em><strong>vec</strong></em> dont le nombre de coordonnées dépend de celui renseigné dans le tableau <strong>Vertex Attrib</strong>. Dans notre cas, nos vertices possèdent 2 coordonnées, donc <strong>in_Vertex</strong> sera de type <em><strong>vec2</strong></em> :</p><pre id="r-965474" data-claire-element-id="965474"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée Shader

vec2 in_Vertex;


// Fonction main

void main()
{

}</code></pre><p id="r-965475" data-claire-element-id="965475">Cette déclaration n'est pas encore tout à fait complète. En effet, si nous la laissons ainsi, OpenGL croira qu'il s'agit d'une variable normale sans aucun rapport avec les tableaux <strong>Vertex Attrib</strong>. Pour corriger ça, il faut lui ajouter le mot-clef <em><strong>in</strong></em> juste avant son type :</p><pre id="r-965476" data-claire-element-id="965476"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée Shader

in vec2 in_Vertex;


// Fonction main

void main()
{

}</code></pre><p id="r-965477" data-claire-element-id="965477">Grâce à ce mot-clef, OpenGL saura que cette variable est reliée à un tableau <strong>VertexAttrib</strong>.</p><p id="r-965478" data-claire-element-id="965478">Enfin, maintenant que l'on a récupéré le vertex en cours, il faut l'utiliser pour qu'il puisse servir à quelque chose. :p Pour cela, nous allons affecter son contenu à une variable prédéfinie dans le <strong>GLSL</strong> (comme les fonctions mathématiques) qui se nomme <strong>gl_Position</strong> :</p><pre id="r-965479" data-claire-element-id="965479"><code data-claire-semantic="c">vec4 gl_Position;</code></pre><p id="r-965480" data-claire-element-id="965480">Cette variable est prédéfinie dans le <strong>GLSL</strong>, nous n'avons donc pas besoin de la déclarer en <em><strong>in</strong></em>. Elle permet, entre autres, de définir la position finale du vertex à l'écran, elle demande pour ça le contenu de la variable <strong>in_Vertex</strong>.</p><p id="r-965481" data-claire-element-id="965481">La seule difficulté que l'on peut rencontrer lors de cette affectation concerne le conflit de type entre les deux variables. En effet, <strong>in_Vertex</strong> est de type <em><strong>vec2</strong></em> alors que <strong>gl_Position</strong> est de type <em><strong>vec4</strong></em>. Cependant, vous devriez savoir comment surmonter ce problème non ? ;)</p><p id="r-965482" data-claire-element-id="965482">Pour combler ce manque de coordonnées, il suffit simplement d'utiliser un constructeur ! Et plus précisément, le constructeur <strong>vec4</strong>(). Nous lui donnerons la variable <strong>in_Vertex</strong> ainsi que deux autres coordonnées égales à <strong>0.0</strong> pour <strong>Z</strong>, car le carré n'est qu'en 2D pour le moment, et <strong>1.0</strong> pour <strong>W</strong>.</p><p id="r-965483" data-claire-element-id="965483">La coordonnée <strong>W</strong> d'un vertex est un peu spéciale. Si vous mettez d'autres valeurs comme <strong>2.0</strong> par exemple, vous remarquerez que la taille de votre rendu sera divisée par deux. Pour conserver une taille normale, il faut laisser la valeur <strong>1.0</strong> à <strong>W</strong>. C'est ce que nous ferons pour tous nos shaders.</p><pre id="r-965484" data-claire-element-id="965484"><code data-claire-semantic="c">// Position finale du vertex

gl_Position = vec4(in_Vertex, 0.0, 1.0);</code></pre><p id="r-965485" data-claire-element-id="965485">Ce qui donne :</p><pre id="r-965486" data-claire-element-id="965486"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée Shader

in vec2 in_Vertex;


// Fonction main

void main()
{
    // Position finale du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);
}</code></pre><p id="r-965487" data-claire-element-id="965487">Je vous avais dit que les constructeurs étaient utiles. :p</p><p id="r-965488" data-claire-element-id="965488">Et voilà ! Notre premier <strong>Vertex Shader</strong> est terminé ! Certes, il ne fait pas grand chose mais au moins il fait exactement ce qu'on veut : il définit la position d'un vertex à l'écran. Sachez que ce bout de code sera présent dans <strong>TOUS</strong> vos futurs shaders, quelque soit leur complexité.</p><h3 id="r-les-entrees-sorties" data-claire-element-id="965506">Les Entrées-Sorties</h3><p id="r-965490" data-claire-element-id="965490">Avant d'aller plus loin dans le développement des codes sources, j'aimerais que l'on voit ensemble le fonctionnement des entrées-sorties au niveau des shaders. Vous connaissez déjà le mot-clé <em><strong>in</strong></em> qui permet de définir des données entrantes. Sachez qu'il existe aussi son opposé, le mot-clef <em><strong>out</strong></em>, qui permet de définir des données sortantes.</p><p id="r-965491" data-claire-element-id="965491">Ces termes sont assez subtiles car ils ne signifient pas la même chose en fonction du shader où ils sont utilisés.</p><p id="r-965492" data-claire-element-id="965492">Pour le <strong>Vertex Shader</strong>, ils signifient :</p><ul id="r-965497" data-claire-element-id="965497"><li id="r-965494" data-claire-element-id="965494"><p id="r-965493" data-claire-element-id="965493"><em><strong>in</strong></em> : Variable représentant les données des tableaux <strong>Vertex Attrib</strong> (vertices, couleurs et tutti quanti)</p></li><li id="r-965496" data-claire-element-id="965496"><p id="r-965495" data-claire-element-id="965495"><em><strong>out</strong></em> : Variable qui sera envoyée au shader suivant, soit le <strong>Fragment Shader</strong> dans notre cas</p></li></ul><p id="r-965498" data-claire-element-id="965498">Pour le <strong>Fragment Shader</strong>, ces termes signifient :</p><ul id="r-965503" data-claire-element-id="965503"><li id="r-965500" data-claire-element-id="965500"><p id="r-965499" data-claire-element-id="965499"><em><strong>in</strong></em> : Variable représentant les données reçues depuis le shader précédent, soit celles étant déclarées avec le mot-clef <em><strong>in</strong></em> dans le <strong>Vertex Shader</strong></p></li><li id="r-965502" data-claire-element-id="965502"><p id="r-965501" data-claire-element-id="965501"><em><strong>out</strong></em> : Variable représentant la couleur finale d'un pixel</p></li></ul><p id="r-965504" data-claire-element-id="965504">Vous voyez qu'il y a une différence selon le shader qu'on utilise, faites bien la différence.</p><p id="r-965505" data-claire-element-id="965505">La variable <strong>gl_Position</strong> est un peu spéciale et ne fait pas partie de ce système d'entrées-sorties, elle est spécifique au <strong>Vertex Shader</strong>. Il y en a quelques unes comme ça mais c'est la la seule vraiment importante.</p><h3 id="r-le-fragment-shader" data-claire-element-id="965524">Le Fragment Shader</h3><p id="r-965507" data-claire-element-id="965507">On passe maintenant au <strong>Fragment Shader</strong>. Celui-ci permet de définir la couleur de chaque pixel d'une surface affichée. Si vous avez utilisé une résolution de 800x600 pour votre fenêtre alors votre carte graphique devra gérer 120 000 pixels pour votre carré ! Non non vous ne rêvez pas, votre Fragment Shader devra gérer 120 000 pixels différent et cela 60 fois par seconde. :p</p><p id="r-965508" data-claire-element-id="965508">Mais ne vous inquiétez pas, elle est justement faite pour ça. Pour vous dire, 120 000 c'est un nombre extrêmement petit, elle en gère beaucoup plus dans des applications développées.</p><p id="r-965509" data-claire-element-id="965509">Enfin, le code source du <strong>Fragment Shader</strong> commence par la même chose que précédemment : la balise <strong>#version</strong> et la fonction <strong>main</strong>().</p><pre id="r-965510" data-claire-element-id="965510"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Fonction main

void main()
{

}</code></pre><p id="r-965511" data-claire-element-id="965511">Contrairement au <strong>Vertex Shader</strong>, nous n'aurons pas (pour le moment) de variable d'entrée ici, nous n'aurons donc pas besoin d'utiliser le mot-clef <em><strong>in</strong></em>. En revanche, nous devrons gérer une variable de sortie, donc nous devrons utiliser le mot-clef <em><strong>out</strong></em>.</p><p id="r-965512" data-claire-element-id="965512">Comme nous l'avons vu juste avant, la sortie d'un <strong>Fragment Shader</strong> correspond à la couleur finale du pixel. Il s'agit d'une variable <em><strong>vec4</strong></em> tout comme <strong>gl_Position</strong> sauf que cette fois-ci elle n'est pas prédéfinie, nous devons la déclarer nous-même. Nous l'appellerons <strong>out_Color</strong> :</p><pre id="r-965513" data-claire-element-id="965513"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Sortie Shader

out vec4 out_Color;


// Fonction main

void main()
{

}</code></pre><p id="r-965514" data-claire-element-id="965514">Cette variable demande 4 valeurs représentant les composantes <strong>RGBA</strong> d'une couleur. Chaque valeur doit être comprise entre <strong>0</strong> et <strong>1</strong>, comme lorsque nous utilisions le tableau <strong>Vertex Attrib</strong> au début du tuto.</p><p id="r-965515" data-claire-element-id="965515">Pour affecter ces composantes à la variable <strong>out_Color</strong>, nous aurons besoin une fois de plus du constructeur <strong>vec4</strong>(). Pour le moment, nous leur affecterons 4 fois la valeur <strong>1.0</strong> de façon à avoir la couleur blanche :</p><pre id="r-965516" data-claire-element-id="965516"><code data-claire-semantic="c">void main()
{
    // Couleur finale du pixel

    out_Color = vec4(1.0, 1.0, 1.0, 1.0);
}</code></pre><p id="r-965517" data-claire-element-id="965517">Ce qui donne :</p><pre id="r-965518" data-claire-element-id="965518"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Sortie Shader

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(1.0, 1.0, 1.0, 1.0);
}</code></pre><p id="r-965519" data-claire-element-id="965519">Et là, vous pouvez enfin compiler pour voir ce que ça donne :</p><figure id="r-965521" data-claire-element-id="965522"><img id="r-965520" data-claire-element-id="965520" src="medias/uploads.siteduzero.com_files_420001_421000_420394.png" alt="Image utilisateur"/></figure><p id="r-965523" data-claire-element-id="965523">Félicitation, vous venez de programmer votre premier shader ! Champagne ! :D</p><h3 id="r-ce-qu-il-faut-absolument-retenir" data-claire-element-id="965543">Ce qu'il faut absolument retenir</h3><p id="r-965525" data-claire-element-id="965525">Avant de passer à la suite, j'aimerais faire un petit point sur ce que vous devez absolument retenir de cette partie.</p><p id="r-965526" data-claire-element-id="965526">En ce qui concerne le <strong>Vertex Shader</strong>, vous devez savoir que :</p><ul id="r-965533" data-claire-element-id="965533"><li id="r-965528" data-claire-element-id="965528"><p id="r-965527" data-claire-element-id="965527">Les variables <em><strong>in</strong></em> représentent les tableaux <em><strong>Vertex Attib</strong></em></p></li><li id="r-965530" data-claire-element-id="965530"><p id="r-965529" data-claire-element-id="965529">Les variables <em><strong>out</strong></em> sont envoyées au shader suivant, soit le <strong>Fragment Shader</strong> dans notre cas</p></li><li id="r-965532" data-claire-element-id="965532"><p id="r-965531" data-claire-element-id="965531">La variable <strong>gl_Position</strong> doit être remplie avec la variable <strong>in_Vertex</strong>. Elle ne doit pas être déclarée en <em><strong>out</strong></em></p></li></ul><p id="r-965534" data-claire-element-id="965534">En ce qui concerne le <strong>Fragment Shader</strong>, vous devez savoir que :</p><ul id="r-965541" data-claire-element-id="965541"><li id="r-965536" data-claire-element-id="965536"><p id="r-965535" data-claire-element-id="965535">Les variables <em><strong>in</strong></em> représentent les variables <em><strong>out</strong></em> du shader précédent, soit le <strong>Vertex Shader</strong> dans notre cas</p></li><li id="r-965538" data-claire-element-id="965538"><p id="r-965537" data-claire-element-id="965537">La sortie du <strong>Fragment Shader</strong> représente la couleur finale du pixel</p></li><li id="r-965540" data-claire-element-id="965540"><p id="r-965539" data-claire-element-id="965539">Elle est représentée par une variable <em><strong>out</strong></em></p></li></ul><p id="r-965542" data-claire-element-id="965542">Il faut absolument que vous connaissez ces points <strong><em>par cœur</em></strong>. Ce sont vraiment les bases de la programmation <strong>GLSL</strong>. ;)</p><h2 id="r-utilisation-de-couleur" data-claire-element-id="965572">Utilisation de couleur</h2><h3 id="r-changer-de-couleur" data-claire-element-id="965552">Changer de couleur</h3><p id="r-965545" data-claire-element-id="965545">Le blanc n'est évidemment pas la seule couleur que l'on peut utiliser. Pour en prendre une autre, il suffit simplement de changer les valeurs données à la variable <strong>out_Color</strong>.</p><p id="r-965546" data-claire-element-id="965546">Par exemple, pour afficher le carré avec la couleur bleue, nous pouvons affecter les valeurs RGB : <strong>0.0, 0.0, 1.0</strong>. Pour la valeur Alpha, il vaut mieux la laisser à <strong>1.0</strong> pour le moment, quelque soit la couleur que l'on veut utiliser :</p><pre id="r-965547" data-claire-element-id="965547"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Sortie Shader

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(0.0, 0.0, 1.0, 1.0);
}</code></pre><p id="r-965548" data-claire-element-id="965548">Si vous relancez le projet (sans le compiler ;) ), vous devriez avoir ceci :</p><figure id="r-965550" data-claire-element-id="965551"><img id="r-965549" data-claire-element-id="965549" src="medias/uploads.siteduzero.com_files_420001_421000_420395.png" alt="Image utilisateur"/></figure><h3 id="r-exercices-40" data-claire-element-id="965558">Exercices</h3><p id="r-965553" data-claire-element-id="965553">Allez, je vais vous donner vos premiers exercices utilisant la programmation en <strong>GLSL</strong>. Ils sont très simples. ^^</p><p id="r-965554" data-claire-element-id="965554"><em><strong>Exercice 1</strong></em> : Coloriez le carré en rouge.</p><p id="r-965555" data-claire-element-id="965555"><em><strong>Exercice 2</strong></em> : Coloriez le carré en violet/rose (avec les composantes rouge et bleu).</p><p id="r-965556" data-claire-element-id="965556"><em><strong>Exercice 3</strong></em> : Coloriez le carré en jaune.</p><p id="r-965557" data-claire-element-id="965557"><em><strong>Exercice 4</strong></em> : Coloriez le carré en gris (n'importe quelle nuance).</p><h3 id="r-solutions-11" data-claire-element-id="965571">Solutions</h3><p id="r-965559" data-claire-element-id="965559"><em><strong>Exercice 1</strong></em> :</p><p id="r-965560" data-claire-element-id="965560">Il n'y a que le <strong>Fragment Shader</strong> à modifier (pour les 4 exercices), l'autre ne change absolument pas. ;)</p><pre id="r-965561" data-claire-element-id="965561"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Sortie Shader

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(1.0, 0.0, 0.0, 1.0);
}</code></pre><p id="r-965562" data-claire-element-id="965562"><em><strong>Exercice 2</strong></em> :</p><p id="r-965563" data-claire-element-id="965563"></p><pre id="r-965564" data-claire-element-id="965564"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Sortie Shader

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(1.0, 0.0, 1.0, 1.0);
}</code></pre><p id="r-965565" data-claire-element-id="965565"><em><strong>Exercice 3 </strong></em> :</p><p id="r-965566" data-claire-element-id="965566"></p><pre id="r-965567" data-claire-element-id="965567"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Sortie Shader

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(1.0, 1.0, 0.0, 1.0);
}</code></pre><p id="r-965568" data-claire-element-id="965568"><em><strong>Exercice 4</strong></em> :</p><p id="r-965569" data-claire-element-id="965569"></p><pre id="r-965570" data-claire-element-id="965570"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Sortie Shader

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(0.5, 0.5, 0.5, 1.0);
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
<span class="arrow"></span>
<span class="next">Préparation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
<span class="next">Gestion de la couleur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Gestiondelacouleur"></a><h2>Gestion de la couleur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
<span class="arrow"></span>
<span class="next">Premier shader</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">
<span class="next">Les shaders démystifiés (Partie 2/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-preparation-33" data-claire-element-id="965595">Préparation</h2><h3 id="r-changement-de-shader" data-claire-element-id="965577">Changement de shader</h3><p id="r-965574" data-claire-element-id="965574">Avant toute chose, vu que nous ajoutons une nouvelle fonctionnalité à notre rendu il nous faut donc créer un nouveau shader. Créons donc deux nouveaux fichiers appelés <strong>couleur2D.vert</strong> et <strong>couleur2D.frag</strong> dans le dossier <strong>Shaders</strong>.</p><p id="r-965575" data-claire-element-id="965575">Il nous faut ensuite ajouter leur chemin dans notre objet <strong>shader</strong> :</p><pre id="r-965576" data-claire-element-id="965576"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Shader

    Shader shader(&quot;Shaders/couleur2D.vert&quot;, &quot;Shaders/couleur2D.frag&quot;);
    shader.charger();

    ....
}</code></pre><h3 id="r-declaration-du-tableau-de-couleurs" data-claire-element-id="965584">Déclaration du tableau de couleurs</h3><p id="r-965578" data-claire-element-id="965578">Il y a bien longtemps, dans une galaxy loin..., nous utilisions des tableaux de couleurs pour afficher nos modèles. Nous ne connaissions pas encore les textures, c'était alors le seul moyen d'afficher quelque chose de non-blanc à l'écran.</p><p id="r-965579" data-claire-element-id="965579">Pour fonctionner correctement, il fallait affecter une couleur pour chaque vertex et chacune d'elles possédait 3 composantes (Rouge Vert Bleu):</p><pre id="r-965580" data-claire-element-id="965580"><code data-claire-semantic="cpp">// Exemple de couleur

float rouge = {1.0, 0.0, 0.0);</code></pre><p id="r-965581" data-claire-element-id="965581">Dans notre code test actuel nous avons 6 vertices, nous aurons donc besoin d'un tableau de <strong>6 couleurs x 3 composantes</strong> soit <strong>18 cases</strong>. Nous utiliserons la couleur <strong>bleu</strong> pour le premier triangle et le <strong>rouge</strong> pour le second :</p><pre id="r-965582" data-claire-element-id="965582"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Shader

    ....



    // Vertices 

    float vertices[] = {-0.5, -0.5,   0.5, -0.5,   0.5, 0.5,    // Triangle 1
                        -0.5, -0.5,   -0.5, 0.5,   0.5, 0.5};   // Triangle 2


    // Couleurs

    float couleurs[] = {0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,    // Triangle 1
                        1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0};   // Triangle 2


    ....
}</code></pre><p id="r-965583" data-claire-element-id="965583">Avec ce tableau, chacun de nos vertices aura sa propre couleur.</p><h3 id="r-gestion-du-vbo-et-du-vao" data-claire-element-id="965594">Gestion du VBO et du VAO</h3><p id="r-965585" data-claire-element-id="965585">Bien évidemment, déclarer un tableau comme ça ne sert pas à grand chose, il faut l'intégrer au <strong>VBO</strong> et au <strong>VAO</strong>.</p><p id="r-965586" data-claire-element-id="965586">Pour ce qui est du premier, il va falloir le redimensionner car il ne peut accueillir que les vertices pour le moment. On commence donc pas créer une variable <strong>tailleCouleursBytes</strong> qui contiendra la taille du tableau de couleurs en bytes :</p><pre id="r-965587" data-claire-element-id="965587"><code data-claire-semantic="cpp">// VBO et taille des données

GLuint vbo;

int tailleVerticesBytes = 12 * sizeof(float);
int tailleCouleursBytes = 18 * sizeof(float);</code></pre><p id="r-965588" data-claire-element-id="965588">On redimensionne ensuite le <strong>VBO</strong> en additionnant les deux tailles de données :</p><pre id="r-965589" data-claire-element-id="965589"><code data-claire-semantic="cpp">// Nouvelle taille du VBO

glBufferData(GL_ARRAY_BUFFER, tailleVerticesBytes + tailleCouleursBytes, 0, GL_STATIC_DRAW);</code></pre><p id="r-965590" data-claire-element-id="965590">Et enfin, on le remplie avec le tableau de couleurs :</p><pre id="r-965591" data-claire-element-id="965591"><code data-claire-semantic="cpp">// Envoi des données

glBufferSubData(GL_ARRAY_BUFFER, 0, tailleVerticesBytes, vertices);
glBufferSubData(GL_ARRAY_BUFFER, tailleVerticesBytes, tailleCouleursBytes, couleurs);</code></pre><p id="r-965592" data-claire-element-id="965592">Au niveau du <strong>VAO</strong>, nous devons juste appeler puis activer le tableau <strong>Vertex Attrib 1</strong> qui correspond à l'envoi des couleurs :</p><pre id="r-965593" data-claire-element-id="965593"><code data-claire-semantic="cpp">// Verrouillage du VAO

glBindVertexArray(vao);


    // Verrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, vbo);


        // Vertex Attrib 0 (Vertices)

        glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
        glEnableVertexAttribArray(0);


        // Vertex Attrib 1 (Couleurs)

        glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(tailleVerticesBytes));
        glEnableVertexAttribArray(1);


    // Déverrouillage du VBO

    glBindBuffer(GL_ARRAY_BUFFER, 0);


// Déverrouillage du VAO

glBindVertexArray(0);</code></pre><h2 id="r-gestions-des-shaders" data-claire-element-id="965642">Gestions des shaders</h2><h3 id="r-le-vertex-shader-2" data-claire-element-id="965615">Le Vertex Shader</h3><p id="r-965596" data-claire-element-id="965596">Contrairement à ce qu'on pourrait penser au premier abord, les couleurs ne sont absolument pas envoyées au <strong>Fragment Shader</strong> mais bel et bien au <strong>Vertex Shader</strong>. C'est lui qui récupère toutes les données issues des tableaux <strong>Vertex Attrib</strong>. Si nous voulons travailler sur les pixels avec une couleur envoyée, alors il faudra la transférer manuellement au <strong>Fragment Shader</strong>.</p><p id="r-965597" data-claire-element-id="965597">Cependant, avant de faire cela il va falloir la récupérer dans notre source, tout comme nous l'avons fait avec le vertex (<strong>in_Vertex</strong>). La variable qui permet d'accéder aux couleurs s'appelle <strong>in_Color</strong>, nous l'avions appelée ainsi lors du linkage du shader. Vu qu'elle possède 3 composantes RGB alors elle sera de type <em><strong>vec3</strong></em>. Si nous avions spécifié la valeur Alpha dans le tableau de couleurs, elle aurait été de type <em><strong>vec4</strong></em>.</p><pre id="r-965598" data-claire-element-id="965598"><code data-claire-semantic="c">// Entrée Shader

in vec3 in_Color;</code></pre><p id="r-965599" data-claire-element-id="965599">Ce qui donne le code source suivant :</p><pre id="r-965600" data-claire-element-id="965600"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec2 in_Vertex;
in vec3 in_Color;


// Fonction main

void main()
{
    // Position finale du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);
}</code></pre><p id="r-965601" data-claire-element-id="965601">Maintenant que l'on a récupéré la couleur du vertex, nous allons pouvoir l'envoyer au <strong>Fragment Shader</strong>. Pour cela, nous allons utiliser ..... une variable <em><strong>out</strong></em> !</p><p id="r-965602" data-claire-element-id="965602">Et oui, rappelez-vous que les variables <em><strong>out</strong></em> du <strong>Vertex Shader</strong> sont automatiquement envoyées au shader suivant. La seule condition pour pouvoir les utiliser est qu'elles doivent être <em><strong>strictement</strong></em> identiques dans les deux codes sources. C'est-à-dire qu'elles doivent avoir le même <strong>type</strong> et surtout le même <strong>nom</strong>. Si vous ne respectez pas l'une de ces deux conditions, alors OpenGL ne fera pas le lien entre les deux. ;)</p><p id="r-965603" data-claire-element-id="965603">Pour envoyer notre couleur donc, nous devons utiliser une variable <em><strong>out</strong></em> qui sera du type <em><strong>vec3</strong></em> de façon à pouvoir envoyer toutes les composantes. Nous l'appellerons simplement <strong>color</strong> :</p><pre id="r-965604" data-claire-element-id="965604"><code data-claire-semantic="c">// Sortie

out vec3 color;</code></pre><p id="r-965605" data-claire-element-id="965605">Ce qui donne le code suivant :</p><pre id="r-965606" data-claire-element-id="965606"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec2 in_Vertex;
in vec3 in_Color;


// Sortie

out vec3 color;


// Fonction main

void main()
{
    // Position finale du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);
}</code></pre><div id="r-965608" data-claire-element-id="965608" data-claire-semantic="question"><p id="r-965607" data-claire-element-id="965607">Pourquoi on ne l'appelle pas <strong>out_Color</strong> ? Vu qu'elle sort du shader on peut la nommer ainsi ?</p></div><p id="r-965609" data-claire-element-id="965609">Vous pouvez certes, mais il y aura un petit problème de logique. En effet, je vous ai dit qu'elle doit avoir le même nom dans les deux codes sources, ce qui voudrait dire que la variable d'entrée <em><strong>in</strong></em> du <strong>Fragment Shader</strong> aurait un nom qui commencerait pas <strong>out_</strong> ? Ce n'est pas logique évidemment. ^^</p><p id="r-965610" data-claire-element-id="965610">Enfin bref, maintenant que nous avons un moyen de communiquer avec le <strong>Fragment Shader</strong>, nous allons pouvoir lui envoyer le contenu de la variable <strong>in_Color</strong>. Nous n'avons pas besoin de constructeur vu qu'elles sont de même type :</p><pre id="r-965611" data-claire-element-id="965611"><code data-claire-semantic="c">void main()
{
    // Position finale du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);


    // Envoi de la couleur au Fragment Shader

    color = in_Color;
}</code></pre><p id="r-965612" data-claire-element-id="965612">Ce qui donne le code source final :</p><pre id="r-965613" data-claire-element-id="965613"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec2 in_Vertex;
in vec3 in_Color;


// Sortie

out vec3 color;


// Fonction main

void main()
{
    // Position finale du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);


    // Envoi de la couleur au Fragment Shader

    color = in_Color;
}</code></pre><p id="r-965614" data-claire-element-id="965614">Et voilà, <strong>Vertex Shader</strong> terminé. :D</p><h3 id="r-le-fragment-shader-1" data-claire-element-id="965641">Le Fragment Shader</h3><p id="r-965616" data-claire-element-id="965616">La <strong>Fragment Shader</strong> va être très simple à programmer car il ne fera que récupérer une couleur pour la renvoyer ensuite dans une variable de sortie <em><strong>out</strong></em>.</p><p id="r-965617" data-claire-element-id="965617">La première chose à faire va être de re-déclarer la variable <strong>color</strong> qui sort du <strong>Vertex Shader</strong> précédent. Et comme vous le savez maintenant, elle doit être exactement identique au code source précédent. On conserve donc le même <strong>type</strong> et le même <strong>nom</strong>, la seule différence va être le mot-clef utilisé car elle ne <em>sort</em> pas mais elle <em>rentre</em> dans le <strong>Fragment Shader</strong>. On utilise donc non pas le mot-clef <em><strong>out</strong></em> mais <em><strong>in</strong></em> :</p><pre id="r-965618" data-claire-element-id="965618"><code data-claire-semantic="c">// Entrée

in vec3 color;</code></pre><p id="r-965619" data-claire-element-id="965619">Ce qui donne :</p><pre id="r-965620" data-claire-element-id="965620"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec3 color;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(1.0, 1.0, 1.0, 1.0);
}</code></pre><p id="r-965621" data-claire-element-id="965621">Le nom et le type sont respectés, la variable <strong>color</strong> est donc utilisable. D'ailleurs, nous allons l'utiliser tout de suite en enlevant le code de la couleur blanc pour affecter son contenu à la variable <strong>out_Color</strong>.</p><p id="r-965622" data-claire-element-id="965622">Si vous faites attention, vous remarquerez qu'il y a un conflit de type entre les deux variables. En effet, l'une est de type <em><strong>vec3</strong></em> alors que l'autre est de type <em><strong>vec4</strong></em>. Pour régler ce problème, il va falloir utiliser .... un constructeur, encore une fois ! ^^</p><p id="r-965623" data-claire-element-id="965623">Et pour mon plus grand plaisir, je vais vous demander de convertir la variable <strong>color</strong> vous-même. Ce n'est pas compliqué bien sûr, nous avons déjà fait cet opération plusieurs fois, vous devez juste convertir un <strong>vec3</strong> et <strong>vec4</strong> en rajoutant la composante Alpha (<strong>1.0</strong>).</p><p id="r-965624" data-claire-element-id="965624">.....</p><p id="r-965625" data-claire-element-id="965625">Vous avez trouvé ?</p><p id="r-965626" data-claire-element-id="965626">Voici la solution :</p><p id="r-965627" data-claire-element-id="965627"></p><pre id="r-965628" data-claire-element-id="965628"><code data-claire-semantic="c">void main()
{
    // Couleur finale du pixel

    out_Color = vec4(color, 1.0);
}</code></pre><p id="r-965629" data-claire-element-id="965629">Il ne manque qu'une coordonnée au <em><strong>vec3</strong></em> pour devenir un <em><strong>vec4</strong></em>. On appelle donc le bon constructeur en ajoutant la composante Alpha à la variable <strong>color</strong>. Le résultat sera une variable de type <em><strong>vec4</strong></em>.</p><p id="r-965630" data-claire-element-id="965630">Ce qui donne le code source final :</p><pre id="r-965631" data-claire-element-id="965631"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec3 color;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(color, 1.0);
}</code></pre><p id="r-965632" data-claire-element-id="965632">Vous pouvez maintenant relancer votre projet, vous devriez avoir le résultat suivant :</p><figure id="r-965634" data-claire-element-id="965635"><img id="r-965633" data-claire-element-id="965633" src="medias/uploads.siteduzero.com_files_420001_421000_420398.png" alt="Image utilisateur"/></figure><p id="r-965636" data-claire-element-id="965636">Notre shader est maintenant capable de gérer les couleurs. :D Vous pouvez même changer le tableau des composantes pour vérifier que tout fonctionne correctement :</p><pre id="r-965637" data-claire-element-id="965637"><code data-claire-semantic="cpp">float couleurs[] = {0.5, 1.0, 0.0,   0.5, 1.0, 0.0,   0.5, 1.0, 0.0,    // Triangle 1
                    0.5, 0.0, 1.0,   0.5, 0.0, 1.0,   0.5, 0.0, 1.0};   // Triangle 2</code></pre><figure id="r-965639" data-claire-element-id="965640"><img id="r-965638" data-claire-element-id="965638" src="medias/uploads.siteduzero.com_files_420001_421000_420399.png" alt="Image utilisateur"/></figure><h2 id="r-exercices-41" data-claire-element-id="965685">Exercices</h2><h3 id="r-enonces-4" data-claire-element-id="965648">Énoncés</h3><p id="r-965643" data-claire-element-id="965643">On continue notre petite vague d'exercices à l'instar de la partie précédente. Je vais monter un peu le niveau cette fois, il faudra réfléchir un peu plus. :p</p><p id="r-965644" data-claire-element-id="965644"><em><strong>Exercice 1</strong></em> : Ajoutez la composante Alpha pour chaque couleur dans le tableau couleurs. Modifiez ensuite le shader pour gérer les couleurs entrantes à 4 composantes. (Pensez à modifier le <strong>VBO</strong> et le <strong>VAO</strong> pour prendre en compte la nouvelle composante.)</p><p id="r-965645" data-claire-element-id="965645"><em><strong>Exercice 2</strong></em> : Inversez la couleur entrante dans le <strong>Fragment Shader</strong> avant de l'affecter à la couleur sortante. Pour vous donner un indice : inverser une couleur revient à inverser l'ordre des composantes en passant de l'ordre RGB à BGR. La composante Alpha reste cependant toujours à la fin. Vous pouvez reprendre le code de l’exercice précédent, ou utiliser celui du cours.</p><p id="r-965646" data-claire-element-id="965646"><em><strong>Exercice 3</strong></em> : Oubliez complétement le tableau de couleurs et créez une variable <strong>maCouleur</strong> (à la place de <strong>Color</strong>) de type <em><strong>vec4</strong></em> dans le <strong>Vertex Shader</strong>. Ses composantes doivent permettre d'afficher du bleu. L'objectif est d'envoyer cette variable au <strong>Fragment Shader</strong> à la place des données issues du tableau <strong>Vertex Attrib</strong>.</p><p id="r-965647" data-claire-element-id="965647"><em><strong>Exercice 4</strong></em> : Reprenez le même principe que l'exercice précédent (voire correction si besoin) sauf que la couleur à envoyer doit dépendre de l’abscisse du vertex. Si la coordonnée <strong>x</strong> est supérieure à zéro alors vous devez envoyer la couleur bleu, si elle est inférieure ou égale à zéro alors vous devez envoyer la couleur rouge.</p><h3 id="r-solutions-12" data-claire-element-id="965684">Solutions</h3><p id="r-965649" data-claire-element-id="965649"><em><strong>Exercice 1</strong></em> :</p><p id="r-965650" data-claire-element-id="965650">Pour ajouter la composante Alpha aux couleurs, il suffit de rajouter la valeur <strong>1.0 </strong>au tableau <strong>couleurs[]</strong> :</p><pre id="r-965651" data-claire-element-id="965651"><code data-claire-semantic="cpp">float couleurs[] = {0.5, 1.0, 0.0, 1.0,   0.5, 1.0, 0.0, 1.0,   0.5, 1.0, 0.0, 1.0,    // Triangle 1
                    0.5, 0.0, 1.0, 1.0,   0.5, 0.0, 1.0, 1.0,   0.5, 0.0, 1.0, 1.0};   // Triangle 2</code></pre><p id="r-965652" data-claire-element-id="965652">Pensez à modifier la variable <strong>tailleCouleursBytes</strong> pour prendre en compte les nouvelles données soit <strong>4 composantes x 3 coordonnées x 2 triangles = 24 valeurs</strong> :</p><pre id="r-965653" data-claire-element-id="965653"><code data-claire-semantic="cpp">// Gestion du VBO

GLuint vbo;
int tailleVerticesBytes = 12 * sizeof(float);
int tailleCouleursBytes = 24 * sizeof(float);</code></pre><p id="r-965654" data-claire-element-id="965654">Pensez également à modifier le paramètre <strong>size</strong> du tableau <strong>Vertex Attrib 1 </strong> pour le passer à <strong>4</strong> (pour <strong>4</strong> composantes) :</p><pre id="r-965655" data-claire-element-id="965655"><code data-claire-semantic="cpp">// Vertex Attrib 1 (Couleurs)

glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(tailleVerticesBytes));
glEnableVertexAttribArray(1);</code></pre><p id="r-965656" data-claire-element-id="965656">Dans le <strong>Vertex Shader</strong>, la variable entrante <strong>in_Color</strong> n'est plus de type <em><strong>vec3</strong></em> mais de type <em><strong>vec4</strong></em> maintenant. La variable sortante <strong>color</strong> devient donc elle-aussi une <em><strong>vec4</strong></em> :</p><pre id="r-965657" data-claire-element-id="965657"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec2 in_Vertex;
in vec4 in_Color;


// Sortie

out vec4 color;


// Fonction main

void main()
{
    // Position finale du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);


    // Envoi de la couleur au Fragment Shader

    color = in_Color;
}</code></pre><p id="r-965658" data-claire-element-id="965658">Dans le <strong>Fragment Shader</strong>, on commence évidemment par changer le type de la variable <strong>color</strong> en <strong><em>vec4</em></strong>. Puis on enlève le constructeur vu qu'elle possède maintenant le même type que la variable sortante <strong>out_Color</strong>. On peut donc l'affecter normalement :</p><pre id="r-965659" data-claire-element-id="965659"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec4 color;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = color;
}</code></pre><p id="r-965660" data-claire-element-id="965660"><em><strong>Exercice 2</strong></em> :</p><p id="r-965661" data-claire-element-id="965661">Pour inverser une couleur, il suffit juste d'inverser les '<em>sous-variables</em>' (<strong>x, y, z</strong>) avant d'affecter la variable <strong>color</strong> à <strong>out_Color</strong>. On peut appeler le constructeur <strong>vec4</strong>() ou affecter les valeurs à la main, comme vous voulez. Mais il est préférable d'utiliser la première solution :</p><pre id="r-965662" data-claire-element-id="965662"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec4 color;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(color.z, color.y, color.x, color.w);
}</code></pre><p id="r-965663" data-claire-element-id="965663">Il y a un moyen de raccourcir encore plus ce code et même d'utiliser d'autres noms pour les composantes, mais je ne vous en parle pas maintenant pour éviter de nous embrouiller l'esprit. ^^</p><p id="r-965664" data-claire-element-id="965664">Le <strong>Vertex Shader</strong> n'a pas besoin d'être modifié car il ne fait qu'envoyer la couleur, il ne fait pas de traitement dessus.</p><p id="r-965665" data-claire-element-id="965665"><em><strong>Exercice 3</strong></em> :</p><p id="r-965666" data-claire-element-id="965666">On commence par supprimer la variable <strong>Color</strong> dans le <strong>Vertex Shader</strong> pour la remplacer par une nouvelle. On la nomme <strong>maCouleur</strong> et on lui donne le type <strong>vec4</strong>. On utilise également le mot-clef <em><strong>out</strong></em> puisqu'elle sort du shader :</p><pre id="r-965667" data-claire-element-id="965667"><code data-claire-semantic="c">// Sortie

out vec4 maCouleur;</code></pre><p id="r-965668" data-claire-element-id="965668">Ensuite, on lui assigne les 4 composantes permettant d'afficher du bleu :</p><pre id="r-965669" data-claire-element-id="965669"><code data-claire-semantic="c">void main()
{
    // Position finale du Vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);


    // Envoi de la couleur au Fragment Shader

    maCouleur = vec4(0.0, 0.0, 1.0, 1.0);
}</code></pre><p id="r-965670" data-claire-element-id="965670">Ce qui donne le code source :</p><pre id="r-965671" data-claire-element-id="965671"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec2 in_Vertex;
in vec4 in_Color;


// Sortie

out vec4 maCouleur;


// Fonction main

void main()
{
    // Position du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);


    // Envoi de la couleur au Fragment Shader

    maCouleur = vec4(0.0, 0.0, 1.0, 1.0);
}</code></pre><p id="r-965672" data-claire-element-id="965672">Quant au <strong>Fragment Shader</strong>, on supprime simplement la variable <em><strong>in</strong></em><strong>Color</strong> pour la remplacer par <strong>maCouleur</strong> afin de respecter les conditions des entrées-sorties :</p><pre id="r-965673" data-claire-element-id="965673"><code data-claire-semantic="c">// Entrée

in vec4 maCouleur;</code></pre><p id="r-965674" data-claire-element-id="965674">Il ne reste plus qu'à assigner le contenu de la variable <strong>maCouleur</strong> à <strong>out_Color</strong>. On n'utilise pas de constructeur vu qu'elles sont de même type :</p><pre id="r-965675" data-claire-element-id="965675"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec4 maCouleur;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = maCouleur;
}</code></pre><p id="r-965676" data-claire-element-id="965676"><em><strong>Exercice 4</strong></em> :</p><p id="r-965677" data-claire-element-id="965677">On reprend le même code que précédemment auquel on va rajouter une condition pour choisir une couleur dans le <strong>Vertex Shader</strong>. Si la coordonnée <strong>x</strong> de la variable <strong>in_Vertex</strong> est supérieure à zéro alors on assigne la couleur <em>bleu</em> à <strong>maCouleur</strong>. Dans le cas contraire, on assigne la couleur <em>rouge</em> :</p><pre id="r-965678" data-claire-element-id="965678"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec2 in_Vertex;
in vec4 in_Color;


// Sortie

out vec4 maCouleur;


// Fonction main

void main()
{
    // Position du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);


    // Si la coordonnée x est supérieure à 0

    if(in_Vertex.x &gt; 0)
        maCouleur = vec4(0.0, 0.0, 1.0, 1.0);


    // Dans le cas inverse

    else
        maCouleur = vec4(1.0, 0.0, 0.0, 1.0);
}</code></pre><p id="r-965679" data-claire-element-id="965679">Il n'y a rien à changer au niveau du <strong>Fragment Shader</strong>.</p><p id="r-965680" data-claire-element-id="965680"><strong>Télécharger (Windows, UNIX/Linux, Mac OS X) : <a href="https://dl.dropboxusercontent.com/s/357o149q85xjxom/Les shaders demystifies (Partie 1-2).zip?token_hash=AAG-nppON2_mxSNGzW6o98GGnrGl939ZeSnNta_Cjx8Yhw&amp;dl=1">code source C++ du chapitre sur les shaders (Partie 1/2)</a></strong></p><p id="r-965681" data-claire-element-id="965681">Nous avons vu pas mal de choses dans ce chapitre, nous avons même appris à programmer nos premiers effets ! :D</p><p id="r-965682" data-claire-element-id="965682">Vous savez maintenant comment gérer les vertices du coté des shaders pour afficher quelque chose à l'écran. Vous savez même gérer les tableaux de couleur pour colorier toutes les surfaces à votre guise. Ces effets sont assez simples et ne gèrent pas la 3D mais au moins, vous avez fait vos premiers pas dans le développement de shaders.</p><p id="r-965683" data-claire-element-id="965683">Si vous êtes prêts, je vous invite à lire le prochain chapitre qui va nous permettre d'apprendre à intégrer la troisième dimension et afficher des textures. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
<span class="arrow"></span>
<span class="next">Premier shader</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">
<span class="next">Les shaders démystifiés (Partie 2/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesshadersdmystifisPartie2_2"></a><h2>Les shaders démystifiés (Partie 2/2)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
<span class="arrow"></span>
<span class="next">Gestion de la couleur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
<span class="next">Les variables uniform</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-965688" data-claire-element-id="965688">Précédemment, nous avons commencé à démystifier un peu les shaders en étudiant leur comportement dans un environnement en deux dimensions. Nous avons même vu comment gérer la couleur grâce aux tableaux <strong>Vertex Attrib</strong> et envoyer des variables d'un shader à un autre.</p><p id="r-965689" data-claire-element-id="965689">Ces échanges de données seront quasiment toujours présents quelque soit les effets que l'on voudra programmer. Si vous n'êtes pas à l'aise avec ça, je vous conseille vivement de relire le chapitre précédent. ;)</p><p id="r-965690" data-claire-element-id="965690">D'ailleurs, ce que nous allons voir aujourd'hui concerne également les échanges de données sauf qu'ici, nous parlerons d'échanges entre l'application principale (en <strong>C++</strong>) et les shaders (en <strong>GLSL</strong>). Grâce à eux, nous pourrons enfin envoyer nos matrices à nos codes sources et nous pourrons enfin gérer la 3D. :D</p><p id="r-965691" data-claire-element-id="965691">Nous parlerons aussi des derniers petits points à connaitre sur la programmation <strong>GLSL</strong>.</p>
</div><a name="Lesvariablesuniform"></a><h2>Les variables uniform</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">
<span class="arrow"></span>
<span class="next">Les shaders démystifiés (Partie 2/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
<span class="next">Gestion de la 3D</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-qu-est-ce-qu-une-variable-uniform" data-claire-element-id="965698">Qu'est-ce qu'une variable uniform ?</h2><p id="r-965692" data-claire-element-id="965692">On commence ce chapitre par une notion que l'on retrouvera dans tous les shaders un tant soit peu développés. ;)</p><p id="r-965693" data-claire-element-id="965693">Les variables <em><strong>uniform</strong></em> sont des variables envoyées depuis une application classique (codée en <strong>C++</strong>) jusqu'à un shader. Elles peuvent être utilisées pour envoyer tous les types de données possibles au niveau du <strong>GLSL</strong> soit les variables classiques (<em><strong>float</strong></em>, <em><strong>int</strong></em>, etc.), les vecteurs et les matrices. Nous connaissons particulièrement ce dernier cas car nous avons déjà eu l'occasion d'envoyer les fameuses matrices <strong>projection</strong> et <strong>modelview</strong>, ce qui permettait d'intégrer la troisième dimension à nos applications.</p><p id="r-965694" data-claire-element-id="965694">D'ailleurs lorsque nous les avons vues, je vous avais fourni deux fonctions totalement incompréhensibles qui permettaient d'envoyer des matrices aux shaders. Elles ressemblaient à ceci :</p><pre id="r-965695" data-claire-element-id="965695"><code data-claire-semantic="cpp">// Envoi des matrices au shader

glUniformMatrix4fv(glGetUniformLocation(shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
glUniformMatrix4fv(glGetUniformLocation(shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));</code></pre><p id="r-965696" data-claire-element-id="965696">Complément incompréhensible bien sûr. :p</p><p id="r-965697" data-claire-element-id="965697">Vous remarquerez cependant l'utilisation du terme <strong>uniform</strong> dans le nom de la fonction <strong>gl<em>Uniform</em>Matrix4fv</strong>(). Ce qui signifie que les matrices sont bien considérées comme des variables <strong>uniform</strong>. Elles arrivent donc directement dans le shader. C'est un exemple d'utilisation que l'on rencontrera tout le temps, mais les matrices ne sont pas les seules valeurs à pouvoir être envoyées comme nous allons le voir.</p><h2 id="r-envoyer-une-variable-simple" data-claire-element-id="965746">Envoyer une variable simple</h2><h3 id="r-le-mot-clef-uniform" data-claire-element-id="965704">Le mot-clef uniform</h3><p id="r-965699" data-claire-element-id="965699">Avant d'étudier en détails les fonctions que l'on vient de voir, nous allons faire un petit détour au niveau des codes sources <strong>GLSL</strong>. Les variables <strong>uniform</strong> se comportent un peu comme les <em><strong>in</strong></em> et les <em><strong>out</strong></em> dans le sens où ils possèdent un mot-clef qui leur est propres. Ce mot-clef est simplement <em><strong>uniform</strong></em>.</p><p id="r-965700" data-claire-element-id="965700">Prenons un petit exemple en déclarant une variable <em><strong>float</strong></em> en tant qu'<em><strong>uniform</strong></em> :</p><pre id="r-965701" data-claire-element-id="965701"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Variable uniform

uniform float maVariable;


// Fonction main

void main()
{
}</code></pre><p id="r-965702" data-claire-element-id="965702">Ce nouveau mot-clef indique au shader que l'application enverra une variable au code source <strong>GLSL</strong>. Bien évidemment, celle-ci se comportera comme une variable classique sauf qu'on ne pourra pas la modifier. Nous pourrons toujours l'<em>utiliser</em> dans des opérations arithmétiques, dans des conditions, ... mais nous ne pourrons jamais <em>modifier</em> sa valeur directement.</p><p id="r-965703" data-claire-element-id="965703">Il faut savoir également qu'une variable <strong>uniform</strong> est accessible dans les deux types de shaders (<strong>Vertex</strong> et <strong>Fragment</strong>), nous n'avons donc pas besoin de les manipuler avec les entrées-sorties ni de spécifier dans quel code source les utiliser. Ça les rend plus simple à utiliser. :)</p><h3 id="r-la-localisation-et-son-utilisation" data-claire-element-id="965735">La localisation et son utilisation</h3><p id="r-965705" data-claire-element-id="965705">On revient maintenant aux fonctions de gestion des <strong>uniform</strong> au niveau de l'application. Nous en avons rapidement survolé une que nous connaissions déjà depuis un moment et qui s’appelait <strong>glUniformMatrix4fv</strong>(). Celle-ci permet d'envoyer une matrice directement au shader.</p><p id="r-965706" data-claire-element-id="965706">Cependant, ce n'est pas la seule fonction qui permet d'envoyer des données. Elle possède plusieurs 'sœurs' qui prennent en compte d'autres types comme les variables simples (<em><strong>float</strong></em>, <em><strong>int</strong></em>, etc.) et les vecteurs. Tous ces cas se gèrent un peu de la même façon, il n'y a que les paramètres à utiliser qui vont changer.</p><p id="r-965707" data-claire-element-id="965707">D'ailleurs nous allons étudier en premier le cas des variables simples car c'est celui qui en requiert le moins. :p Nous aurons besoin pour cela d'utiliser une fonction dont le nom se rapproche fortement de celui que nous connaissons déjà. Elle s'appelle <strong>glUniform1f</strong>() :</p><pre id="r-965708" data-claire-element-id="965708"><code data-claire-semantic="cpp">void glUniform1f(GLint location, GLfloat value);</code></pre><aside id="r-965710" data-claire-element-id="965710" data-claire-semantic="information"><p id="r-965709" data-claire-element-id="965709">A noter qu'il existe aussi les fonctions <strong>glUniform1i</strong>() et <strong>glUniform1ui</strong>() qui permettent d'envoyer respectivement des <em>entiers</em> et des <em>entiers non-signés</em>.</p></aside><ul id="r-965715" data-claire-element-id="965715"><li id="r-965712" data-claire-element-id="965712"><p id="r-965711" data-claire-element-id="965711"><strong>location</strong> : paramètre permettant de retrouver la variable utilisant le mot-clef <em><strong>uniform</strong></em> dans le code source <strong>GLSL</strong></p></li><li id="r-965714" data-claire-element-id="965714"><p id="r-965713" data-claire-element-id="965713"><strong>value</strong> : La valeur (de type <strong><em>float</em></strong>) que vous souhaitez envoyer</p></li></ul><p id="r-965716" data-claire-element-id="965716">Le premier paramètre peut vous sembler un peu flou et c'est tout à fait normal. Pour le comprendre, nous allons faire une analogie avec la fonction <strong>glBindAttribLocation</strong>(). Celle-ci demandait, parmi ses paramètres, le nom correspondant à la variable de destination dans le code <strong>GLSL</strong>. Par exemple, nous l'utilisions pour faire le lien entre la variable <strong>in_Vertex</strong> et le tableau de vertices. Même chose avec la variable <strong>in_Color</strong> et le tableau de couleurs.</p><p id="r-965717" data-claire-element-id="965717">Cette fonction nous permettait donc de spécifier directement un nom pour retrouver son destinataire dans le code <strong>GLSL</strong>.</p><p id="r-965718" data-claire-element-id="965718">Le problème avec les <strong>uniform</strong>, c'est que ce système de nom n'existe pas directement. Il faut passer par une fonction intermédiaire pour faire le lien entre le shader et l'application. Cette fonction intermédiaire s'appelle <strong>glGetUniformLocation</strong>() :</p><pre id="r-965719" data-claire-element-id="965719"><code data-claire-semantic="cpp">GLint glGetUniformLocation(GLuint program, const GLchar *name)</code></pre><ul id="r-965724" data-claire-element-id="965724"><li id="r-965721" data-claire-element-id="965721"><p id="r-965720" data-claire-element-id="965720"><strong>program</strong> : l'ID du programme shader. Nous utiliserons la méthode <strong>glGetProgramID</strong>() pour lui affecter une valeur</p></li><li id="r-965723" data-claire-element-id="965723"><p id="r-965722" data-claire-element-id="965722"><strong>name</strong> : nom de la variable dans le code source <strong>GLSL</strong></p></li></ul><p id="r-965725" data-claire-element-id="965725">Grâce à elle, nous pouvons trouver facilement le paramètre <strong>location</strong> de <strong>glUniform1f</strong>(). ^^</p><p id="r-965726" data-claire-element-id="965726">On reprend notre petit exemple précédent qui contenait la variable <strong><em>uniform</em></strong><strong>maVariable</strong>. Pour récupérer sa localisation au sein du shader, on appelle donc la fonction <strong>glGetUniformLocation</strong>() en donnant en paramètre l'ID du programme ainsi qu'une chaine de caractère contenant le nom &quot;<strong>maVariable</strong>&quot; :</p><pre id="r-965727" data-claire-element-id="965727"><code data-claire-semantic="cpp">// Localisation de maVariable

int localisation = glGetUniformLocation(shader.getProgramID(), &quot;maVariable&quot;);</code></pre><p id="r-965728" data-claire-element-id="965728">Maintenant que l'on connait la localisation de <strong>maVariable</strong>, nous pouvons lui envoyer une valeur. On utilise pour cela la fonction <strong>glUniform1f</strong>() en donnant en paramètre cette fameuse localisation ainsi qu'une valeur (par exemple <strong>8.5</strong>) :</p><pre id="r-965729" data-claire-element-id="965729"><code data-claire-semantic="cpp">// Localisation de maVariable

int localisation = glGetUniformLocation(shader.getProgramID(), &quot;maVariable&quot;);


// Envoi d'une valeur à maVariable

glUniform1f(localisation, 8.5);</code></pre><aside id="r-965731" data-claire-element-id="965731" data-claire-semantic="information"><p id="r-965730" data-claire-element-id="965730">Vous ne devez envoyer vos variable <strong>uniform</strong> qu'<em><strong>après</strong></em> avoir activé votre shader, sinon il aura un peu de mal à les recevoir.</p></aside><p id="r-965732" data-claire-element-id="965732">La variable <em><strong>uniform</strong></em> dans le code <strong>GLSL</strong> possèdera maintenant la valeur <strong>8.5</strong>. ;)</p><p id="r-965733" data-claire-element-id="965733">Petit détail, il est tout à fait possible de combiner les deux fonctions utilisées comme nous l'avons vu pour les matrices :</p><pre id="r-965734" data-claire-element-id="965734"><code data-claire-semantic="cpp">// Envoi d'une valeur à maVariable

glUniform1f(glGetUniformLocation(shader.getProgramID(), &quot;maVariable&quot;), 8.5);</code></pre><h3 id="r-point-recapitulatif" data-claire-element-id="965745">Point récapitulatif</h3><p id="r-965736" data-claire-element-id="965736">Nous allons faire un petit point récapitulatif car ce que nous venons de voir constitue la base de l'envoi de variable au shader. Il n'y a que trois points à retenir alors ouvrez grand vos oreilles (ou plutôt vos yeux :p ) :</p><ul id="r-965743" data-claire-element-id="965743"><li id="r-965738" data-claire-element-id="965738"><p id="r-965737" data-claire-element-id="965737">Premièrement, il faut déclarer une variable avec le mot-clef <em><strong>uniform</strong></em> dans le code source <strong>GLSL</strong>.</p></li><li id="r-965740" data-claire-element-id="965740"><p id="r-965739" data-claire-element-id="965739">Ensuite, on récupère sa localisation grâce à la fonction <strong>glGetUniformLocation</strong>() du coté de l'application <strong>C++</strong></p></li><li id="r-965742" data-claire-element-id="965742"><p id="r-965741" data-claire-element-id="965741">Puis, on envoie la valeur souhaitée grâce à la fonction <strong>glUniform1f</strong>() ou ses variantes</p></li></ul><p id="r-965744" data-claire-element-id="965744">Je le répète, ces 3 points constituent la base du fonctionnement des <strong>uniform</strong>. Retenez-les bien. Nous ferons quelques exercices à la fin de cette partie pour vous familiariser avec eux.</p><h2 id="r-envoyer-un-vecteur" data-claire-element-id="965781">Envoyer un vecteur</h2><h3 id="r-cote-glsl" data-claire-element-id="965750">Coté GLSL</h3><p id="r-965747" data-claire-element-id="965747">Comme nous l'avons vu précédemment, il existe une multitude de variantes de la fonction <strong>glUniform1f</strong>() qui permettent d'envoyer d'autres types de variable que les <em><strong>float</strong></em> ou les <em><strong>int</strong></em>. Nous allons justement voir une de ces variantes qui nous servira à envoyer des vecteurs (à 2, 3, ou 4 coordonnées).</p><p id="r-965748" data-claire-element-id="965748">Pour illustrer cela, nous allons déclarer une variable <strong>position</strong> de type <em><strong>vec3</strong></em> avec le mot-clef <em><strong>uniform</strong></em> dans le <strong>Vertex Shader</strong> :</p><pre id="r-965749" data-claire-element-id="965749"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Variable uniform

uniform vec3 position;


// Fonction main

void main()
{
}</code></pre><h3 id="r-cote-application" data-claire-element-id="965780">Coté application</h3><p id="r-965751" data-claire-element-id="965751">Le détail qui vous a peut-être frappé dans le nom de la fonction <strong>glUniform1f</strong>() est l'utilisation du <em>chiffre</em><strong>1</strong> qui, apparemment, n'avait rien à faire ici. Ce chiffre est en fait très important car il permet de déterminer le nombre de données à envoyer à la variable de destination.</p><p id="r-965752" data-claire-element-id="965752">Lorsqu'il s'agit d'un variable simple comme un <em><strong>float</strong></em>, nous n'avons besoin d'envoyer qu'une seule valeur. Cependant lorsque l'on parle de vecteur, le nombre de données à envoyer devient un peu plus important car il faut affecter une valeur à chacune de ses coordonnées.</p><p id="r-965753" data-claire-element-id="965753">Vu qu'il existe 3 types de vecteur (<em><strong>vec2</strong></em>, <em><strong>vec3</strong></em> et <em><strong>vec4</strong></em>), il existe donc 3 formes possibles pour la fonction <strong>glUniform*</strong>(). La seule chose qui va être modifiée avec celle que l'on connait déjà est le fameux <em>chiffre</em> utilisé à la fin du nom. Pour envoyer un vecteur à 2 coordonnées par exemple, il faudra mettre la valeur <strong>2</strong>, ce qui donnera la fonction suivante :</p><pre id="r-965754" data-claire-element-id="965754"><code data-claire-semantic="c">// Vecteur à 2 coordonnées

void glUniform2f(GLint location, GLfloat valu0, GLfloat value1);</code></pre><ul id="r-965761" data-claire-element-id="965761"><li id="r-965756" data-claire-element-id="965756"><p id="r-965755" data-claire-element-id="965755"><strong>location</strong> : localisation du vecteur au niveau <strong>GLSL</strong></p></li><li id="r-965758" data-claire-element-id="965758"><p id="r-965757" data-claire-element-id="965757"><strong>value0</strong> : valeur pour la coordonnée <strong>x</strong></p></li><li id="r-965760" data-claire-element-id="965760"><p id="r-965759" data-claire-element-id="965759"><strong>valeur1</strong> : valeur pour la coordonnée <strong>y</strong></p></li></ul><p id="r-965762" data-claire-element-id="965762">Pour les vecteurs à 3 ou 4 coordonnées, il faudra mettre le chiffre correspondant au nom de la fonction <strong>glUniform</strong>() :</p><pre id="r-965763" data-claire-element-id="965763"><code data-claire-semantic="cpp">// Vecteur à 3 coordonnées

void glUniform3f(GLint location, GLfloat valu0, GLfloat value1, GLfloat valu2);


// Vecteur à 4 coordonnées

void glUniform4f(GLint location, GLfloat valu0, GLfloat value1, GLfloat valu2, GLfloat value3);</code></pre><ul id="r-965774" data-claire-element-id="965774"><li id="r-965765" data-claire-element-id="965765"><p id="r-965764" data-claire-element-id="965764"><strong>location</strong> : localisation du vecteur au niveau <strong>GLSL</strong></p></li><li id="r-965767" data-claire-element-id="965767"><p id="r-965766" data-claire-element-id="965766"><strong>value0</strong> : valeur pour la coordonnée <strong>x</strong></p></li><li id="r-965769" data-claire-element-id="965769"><p id="r-965768" data-claire-element-id="965768"><strong>valeur1</strong> : valeur pour la coordonnée <strong>y</strong></p></li><li id="r-965771" data-claire-element-id="965771"><p id="r-965770" data-claire-element-id="965770"><strong>valeur2</strong> : valeur pour la coordonnée <strong>z</strong></p></li><li id="r-965773" data-claire-element-id="965773"><p id="r-965772" data-claire-element-id="965772"><strong>valeur3</strong> : valeur pour la coordonnée <strong>w</strong></p></li></ul><p id="r-965775" data-claire-element-id="965775">Si on reprend l'exemple du vecteur <em><strong>vec3</strong></em><strong>position</strong> déclaré dans le shader, la fonction à utiliser sera <strong>glUniform3f</strong>(). Il faudra lui donner en paramètre la localisation de la variable ainsi qu'une valeur pour chacune de ses 3 coordonnées :</p><pre id="r-965776" data-claire-element-id="965776"><code data-claire-semantic="cpp">// Localisation du vecteur position

int localisation = glGetUniformLocation(shader.getProgramID(), &quot;position&quot;);


// Envoi d'une valeur au vecteur position

glUniform3f(localisation, 1.0, 2.0, 3.0);</code></pre><p id="r-965777" data-claire-element-id="965777">Le vecteur <strong>position</strong> est maintenant utilisable dans notre shader :</p><pre id="r-965778" data-claire-element-id="965778"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Variable uniform

uniform vec3 position;


// Fonction main

void main()
{
    // Exemple d'utilisation

    if(position.x &gt;= 0)
        .... ;

    else
        .... ;
}</code></pre><p id="r-965779" data-claire-element-id="965779">Le fonctionnement reste évidemment le même pour les autres types de vecteur.</p><h2 id="r-envoyer-une-matrice" data-claire-element-id="965832">Envoyer une matrice</h2><h3 id="r-cote-glsl-1" data-claire-element-id="965785">Coté GLSL</h3><p id="r-965782" data-claire-element-id="965782">Avant de s'occuper de la partie application, nous allons déclarer une matrice dans le <strong>Vertex Shader</strong>. Nous l’appellerons <strong>modelview</strong> en référence avec une certaine matrice que l'on connait déjà. ;)</p><p id="r-965783" data-claire-element-id="965783">Nous déclarons donc une matrice carrée d'ordre 4 (<strong><em>mat4</em></strong>) avec le mot-clef <em><strong>uniform</strong></em> :</p><pre id="r-965784" data-claire-element-id="965784"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Variable uniform

uniform mat4 modelview;


// Fonction main

void main()
{
}</code></pre><h3 id="r-transposer-une-matrice" data-claire-element-id="965812">&quot;Transposer&quot; une matrice</h3><p id="r-965786" data-claire-element-id="965786">Les envois de matrice se passent quasiment de la même façon que ceux que nous venons d'étudier. A vrai dire, il n'y a que deux paramètres supplémentaires à gérer. Pour envoyer une matrice carrée d'ordre 4 par exemple, la fonction à utiliser s'appelle <strong>glUniformMatrix4fv</strong>() :</p><pre id="r-965787" data-claire-element-id="965787"><code data-claire-semantic="cpp">void glUniformMatrix4fv(GLint location, GLsizei count, GLboolean transpose, const GLfloat *value);</code></pre><ul id="r-965796" data-claire-element-id="965796"><li id="r-965789" data-claire-element-id="965789"><p id="r-965788" data-claire-element-id="965788"><strong>location</strong> : localisation de la matrice au niveau <strong>GLSL</strong></p></li><li id="r-965791" data-claire-element-id="965791"><p id="r-965790" data-claire-element-id="965790"><strong>count</strong> : nombre de sous-tableaux utilisés par la matrice. Nous lui affecterons la valeur <strong>1.0</strong> car nous n'en enverrons qu'un seul.</p></li><li id="r-965793" data-claire-element-id="965793"><p id="r-965792" data-claire-element-id="965792"><strong>transpose</strong> : <em>booléen</em> pouvant prendre la valeur <strong>GL_TRUE</strong> ou <strong>GL_FALSE</strong> et qui permet de transposer une matrice. Nous verrons ce que cela signifie dans un instant</p></li><li id="r-965795" data-claire-element-id="965795"><p id="r-965794" data-claire-element-id="965794"><strong>value</strong> : pointeur sur les valeurs de la matrice. Nous lui donnerons le résultat de la méthode <strong>getValeurs</strong>()</p></li></ul><aside id="r-965798" data-claire-element-id="965798" data-claire-semantic="information"><p id="r-965797" data-claire-element-id="965797">A noter aussi qu'il existe les fonctions <strong>glUniformMatrix2fv</strong>() et <strong>glUniformMatrix3fv</strong>() qui permettent d'envoyer respectivement des matrices carrées d'ordre 2 et 3. Elles prennent les mêmes paramètres que celle que nous étudions actuellement.</p></aside><p id="r-965799" data-claire-element-id="965799">Le paramètre <strong>transpose</strong> peut vous sembler un peu flou pour le moment. C'est parce que nous n'avons pas encore vu ce que voulait dire le terme &quot;<strong><em>transposer</em></strong>&quot; une matrice. C'est pourtant une notion assez simple qui signifie &quot;<em><strong>inverser</strong></em>&quot; les valeurs d'une matrice pour que les lignes se retrouvent à la place des colonnes et les colonnes à la place des lignes :</p><figure id="r-965801" data-claire-element-id="965802"><img id="r-965800" data-claire-element-id="965800" src="medias/uploads.siteduzero.com_files_420001_421000_420404.png" alt="Image utilisateur"/></figure><p id="r-965803" data-claire-element-id="965803">Si vous utilisez <strong>GLM</strong>, ce qui est normalement le cas, vous n'avez pas à vous soucier de ce paramètre car la librairie est en parfaite adéquation avec le <strong>GLSL</strong>. C'est-à-dire que les objets <em><strong>mat4</strong></em> en C++ se lisent aussi en colonne et c'est exactement ce que veut le shader :</p><figure id="r-965805" data-claire-element-id="965806"><img id="r-965804" data-claire-element-id="965804" src="medias/uploads.siteduzero.com_files_420001_421000_420405.png" alt="Image utilisateur"/></figure><p id="r-965807" data-claire-element-id="965807">Si vous utilisez une autre librairie mathématique pour gérer vos matrices, je vous conseille de vérifier leur ordre de lecture car elles doivent peut-être être transposées. C'est-à-dire qu'elles se lisent peut-être en ligne :</p><figure id="r-965809" data-claire-element-id="965810"><img id="r-965808" data-claire-element-id="965808" src="medias/uploads.siteduzero.com_files_421001_422000_421456.png" alt="Image utilisateur"/></figure><p id="r-965811" data-claire-element-id="965811">Si c'est le cas, vous devez les transposer à l'aide du paramètre <strong>transpose</strong>.</p><h3 id="r-cote-application-1" data-claire-element-id="965831">Coté application</h3><p id="r-965813" data-claire-element-id="965813">Ceci étant dit, nous pouvons maintenant repasser à la fonction . Nous allons pouvoir l'utiliser pour envoyer notre matrice <strong>modelview</strong> à la variable du même nom dans le code source <strong>GLSL</strong>.</p><p id="r-965814" data-claire-element-id="965814">Nous savons qu'elle prendra 4 paramètres :</p><ul id="r-965823" data-claire-element-id="965823"><li id="r-965816" data-claire-element-id="965816"><p id="r-965815" data-claire-element-id="965815"><strong>location</strong> : qu'il faudra déterminer comme nous savons déjà le faire</p></li><li id="r-965818" data-claire-element-id="965818"><p id="r-965817" data-claire-element-id="965817"><strong>count</strong> : auquel nous affecterons la valeur <strong>1.0</strong></p></li><li id="r-965820" data-claire-element-id="965820"><p id="r-965819" data-claire-element-id="965819"><strong>transpose</strong> : auquel il faudra affecter la valeur <strong>GL_FALSE</strong> car nous n'avons pas besoin de transposer nos matrices</p></li><li id="r-965822" data-claire-element-id="965822"><p id="r-965821" data-claire-element-id="965821"><strong>value</strong> : qui demande un pointeur sur les valeurs à envoyer</p></li></ul><p id="r-965824" data-claire-element-id="965824">Ainsi, pour envoyer la matrice <strong>modelview</strong> au sahder, nous devrons d'abord la localiser à l'aide de la fonction <strong>glGetUniformLocation</strong>() :</p><pre id="r-965825" data-claire-element-id="965825"><code data-claire-semantic="cpp">// Localisation de la matrice modelview

int localisation = glGetUniformLocation(shader.getProgramID(), &quot;modelview&quot;);</code></pre><p id="r-965826" data-claire-element-id="965826">Puis, nous envoyons ses valeurs grâce à la fonction <strong>glUniformMatrix4fv</strong>() avec les paramètres cités précédemment :</p><pre id="r-965827" data-claire-element-id="965827"><code data-claire-semantic="cpp">// Localisation de la matrice modelview

int localisation = glGetUniformLocation(shader.getProgramID(), &quot;modelview&quot;);


// Envoi de la matrice

glUniformMatrix4fv(localisation, 1, GL_FALSE, value_ptr(modelview));</code></pre><p id="r-965828" data-claire-element-id="965828">La variable <strong>uniform</strong> au niveau du shader contient maintenant les valeurs de la matrice <strong>modelview</strong>.</p><p id="r-965829" data-claire-element-id="965829">Vous êtes à présent capables de comprendre les fameux envois que nous utilisons depuis le chapitre sur la 3D. :p</p><pre id="r-965830" data-claire-element-id="965830"><code data-claire-semantic="cpp">// Envoi des matrices au shader

glUniformMatrix4fv(glGetUniformLocation(shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
glUniformMatrix4fv(glGetUniformLocation(shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));</code></pre><h2 id="r-envoyer-un-tableau" data-claire-element-id="965851">Envoyer un tableau</h2><h3 id="r-cote-glsl-2" data-claire-element-id="965836">Coté GLSL</h3><p id="r-965833" data-claire-element-id="965833">L'envoi de tableaux est parfois utile lorsque vous souhaitez envoyer plusieurs variables en une seule fois. Nous savons déjà comment faire en plus car ce type d'envoi s'effectue exactement de la même façon que les matrices. Les paramètres sont eux-aussi identiques, il n'y a que le nom de la fonction à utiliser qui va changer.</p><p id="r-965834" data-claire-element-id="965834">Au niveau du <strong>GLSL</strong>, il suffit simplement de déclarer un tableau comme nous le ferions en temps normal mais précédé par le mot-clef <em><strong>uniform</strong></em>. Pour déclarer un tableau de 10 cases par exemple, nous ferions ainsi :</p><pre id="r-965835" data-claire-element-id="965835"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Variable uniform

uniform float monTableau[10];


// Fonction main

void main()
{
}</code></pre><h3 id="r-cote-application-2" data-claire-element-id="965850">Coté application</h3><p id="r-965837" data-claire-element-id="965837">La fonction à utiliser est très similaire à celle des matrices au niveau des paramètres. Elle s’appelle : <strong>glUniform1fv</strong>() :</p><pre id="r-965838" data-claire-element-id="965838"><code data-claire-semantic="c">void glUniform1fv(GLint location, GLsizei count, const GLfloat *value);</code></pre><ul id="r-965845" data-claire-element-id="965845"><li id="r-965840" data-claire-element-id="965840"><p id="r-965839" data-claire-element-id="965839"><strong>location</strong> : localisation du tableau au niveau <strong>GLSL</strong></p></li><li id="r-965842" data-claire-element-id="965842"><p id="r-965841" data-claire-element-id="965841"><strong>count</strong> : taille du tableau</p></li><li id="r-965844" data-claire-element-id="965844"><p id="r-965843" data-claire-element-id="965843"><strong>value</strong> : pointeur sur les données</p></li></ul><aside id="r-965847" data-claire-element-id="965847" data-claire-semantic="warning"><p id="r-965846" data-claire-element-id="965846">Attention, la fonction possède la lettre <strong>v</strong> à la fin de son nom, ce qui la différencie de <strong>glUniform1f</strong>().</p></aside><p id="r-965848" data-claire-element-id="965848">Pour envoyer un tableau de 10 <em><strong>float</strong></em> à l'<strong>uniform</strong> précédent, il suffit donc d'appeler la fonction <strong>glUniform1fv()</strong> avec les paramètres suivants :</p><pre id="r-965849" data-claire-element-id="965849"><code data-claire-semantic="cpp">// Tableau de 10 float

float tableau[10] = {1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 1.0};


// Localisation du tableau monTableau

int localisation = glGetUniformLocation(shader.getProgramID(), &quot;monTableau&quot;);


// Envoi des valeurs

glUniform1fv(localisation, 10, tableau);</code></pre><h2 id="r-ce-qu-il-faut-retenir-4" data-claire-element-id="965866">Ce qu'il faut retenir</h2><p id="r-965852" data-claire-element-id="965852">Les variables <strong>uniform</strong> sont un peu complexes au premier abord mais vous avez remarqué qu'ils se gèrent tous de la même façon. La seule difficulté vient du nombre de variantes de la fonction <strong>glUniform*</strong>() à utiliser. Nous allons faire un petit résumé de ce qu'il faut retenir pour éviter de vous emmêler les pinceaux dans le futur.</p><p id="r-965853" data-claire-element-id="965853">Tout d'abord, il faut savoir que les <strong>uniform</strong> sont des variables envoyées de l'application jusqu'au shader. Elles doivent être déclarées avec le mot-clef <em><strong>uniform</strong></em> dans le code <strong>GLSL</strong>.</p><p id="r-965854" data-claire-element-id="965854">Pour envoyer des données, il faut commencer par localiser les variables contenues dans le shader grâce à la fonction <strong>glGetUniformLocation</strong>(). Puis, il faut appeler l'une des variantes suivantes :</p><ul id="r-965863" data-claire-element-id="965863"><li id="r-965856" data-claire-element-id="965856"><p id="r-965855" data-claire-element-id="965855"><strong>glUniform1f</strong>() : pour envoyer des variables simples</p></li><li id="r-965858" data-claire-element-id="965858"><p id="r-965857" data-claire-element-id="965857"><strong>glUniform*f()</strong> : pour envoyer des vecteurs. L'étoile dans le nom permet de définir le type utilisé dans le shader (<em><strong>vec2</strong></em>, <em><strong>vec3</strong></em> ou <em><strong>vec4</strong></em>).</p></li><li id="r-965860" data-claire-element-id="965860"><p id="r-965859" data-claire-element-id="965859"><strong>glUniformMatrix*fv</strong>() : pour envoyer des matrices. Même remarque pour l'étoile mais pour les types de matrice cette fois</p></li><li id="r-965862" data-claire-element-id="965862"><p id="r-965861" data-claire-element-id="965861"><strong>glUniform1fv</strong>() : pour envoyer des tableaux</p></li></ul><p id="r-965864" data-claire-element-id="965864">Enfin, la lettre <em><strong>f</strong></em> dans le nom des fonctions peut être remplacée par <em><strong>i</strong></em> ou <em><strong>ui</strong></em> pour envoyer respectivement des <strong><em>entiers</em></strong> ou des <strong><em>entiers non-signés</em></strong>. Si vous laissez la lettre <em><strong>f</strong></em>, alors vous enverrez des <em><strong>flottants</strong></em>.</p><p id="r-965865" data-claire-element-id="965865">C'est tout ce qu'il faut retenir. :)</p><h2 id="r-exercices-42" data-claire-element-id="965902">Exercices</h2><h3 id="r-enonces-5" data-claire-element-id="965871">Énoncés</h3><p id="r-965867" data-claire-element-id="965867">Comme d'habitude, nous allons faire quelques exercices pour assimiler ce que nous avons vu dans cette partie. Vous avez évidemment le droit de revenir sur le cours pour vous aider. ;)</p><p id="r-965868" data-claire-element-id="965868"><em><strong>Exercice 1</strong></em> : Créez une variable de type <em><strong>float</strong></em> dans votre application que vous appellerez <strong>maCouleur</strong>. Envoyez-la ensuite au <strong>Fragment Shader</strong> pour qu'elle puisse remplacer la composante <strong>rouge</strong> de la variable d'entrée <em><strong>in</strong></em><strong>Color</strong> au moment de l'affecter à la variable de sortie <strong>out_Color</strong>.</p><p id="r-965869" data-claire-element-id="965869"><em><strong>Exercice 2</strong></em> : Créez un objet de type <em><strong>Vecteur</strong></em> dans votre application, ses attributs représenteront une couleur quelconque. Envoyez justement ces attributs au <strong>Fragment Shader</strong> pour définir la couleur du pixel.</p><p id="r-965870" data-claire-element-id="965870"><em><strong>Exercice 3</strong></em> : Re-déclarez les matrices <strong>projection</strong> et <strong>modelview</strong> dans votre application (vous n'avez pas besoin des les initialiser). Envoyez-les ensuite dans le <strong>Vertex Shader</strong> pour les multiplier dans la fonction <strong>main</strong>(). Le résultat doit être contenu dans une variable de type <em><strong>mat4</strong></em>.</p><h3 id="r-solutions-13" data-claire-element-id="965901">Solutions</h3><p id="r-965872" data-claire-element-id="965872"><em><strong>Exercice 1 :</strong></em></p><p id="r-965873" data-claire-element-id="965873">On commence par créer la variable <strong>maCouleur</strong> dans l'application, puis on l'envoie au shader depuis la boucle principale grâce à la fonction <strong>glUniform1f</strong>() :</p><pre id="r-965874" data-claire-element-id="965874"><code data-claire-semantic="cpp">// Variable à envoyer

float maCouleur(1.0);

....


// Boucle principale

while(!m_input.terminer())
{
    ....


    // Localisation de la variable maCouleur

    int localisationMaCouleur = glGetUniformLocation(shader.getProgramID(), &quot;maCouleur&quot;);


    // Envoi de la variable

    glUniform1f(localisationMaCouleur, maCouleur);


    ....
}</code></pre><p id="r-965875" data-claire-element-id="965875">Au niveau du <strong>Fragment Shader</strong>, on déclare la variable <strong>maCouleur</strong> avec le mot-clef <em><strong>uniform</strong></em> :</p><pre id="r-965876" data-claire-element-id="965876"><code data-claire-semantic="c">// Uniform

uniform float maCouleur;</code></pre><p id="r-965877" data-claire-element-id="965877">Puis on modifie l'affectation de la variable de sortie <strong>out_Color</strong> en prenant en compte l'<strong>uniform</strong> et les composantes (y, z) de la variable d'entrée <strong>Color</strong> :</p><pre id="r-965878" data-claire-element-id="965878"><code data-claire-semantic="c">void main()
{
    // Couleur du pixel

    out_Color = vec4(maCouleur, color.y, color.z, 1.0);
}</code></pre><p id="r-965879" data-claire-element-id="965879">Ce qui donne le code source suivant :</p><pre id="r-965880" data-claire-element-id="965880"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec3 color;


// Uniform

uniform float maCouleur;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur du pixel

    out_Color = vec4(maCouleur, color.y, color.z, 1.0);
}</code></pre><p id="r-965881" data-claire-element-id="965881"><em><strong>Exercice 2</strong></em> :</p><p id="r-965882" data-claire-element-id="965882">On commence par créer un objet <em><strong>Vecteur</strong></em> dans l'application, puis on envoie ses coordonnées grâce à la fonction <strong>glUniform3f</strong>() :</p><pre id="r-965883" data-claire-element-id="965883"><code data-claire-semantic="cpp">// Vecteur à envoyer

Vecteur monVecteur(1.0, 0.0, 1.0);

....


// Boucle principale

while(!m_input.terminer())
{
    ....


    // Localisation de la variable monVecteur

    int localisationMonVecteur = glGetUniformLocation(shader.getProgramID(), &quot;monVecteur&quot;);


    // Envoi de la variable

    glUniform3f(localisationMonVecteur, monVecteur.getX(), monVecteur.getY(), monVecteur.getZ());


    ....
}</code></pre><p id="r-965884" data-claire-element-id="965884">Au niveau du <strong>Fragment Shader</strong>, on déclare la variable <strong>monVecteur</strong> de type <em><strong>vec3</strong></em> avec le mot-clef <em><strong>uniform</strong></em> :</p><pre id="r-965885" data-claire-element-id="965885"><code data-claire-semantic="cpp">// Uniform

uniform vec3 monVecteur;</code></pre><p id="r-965886" data-claire-element-id="965886">Puis on utilise le constructeur <strong>vec4</strong>() en donnant en paramètre <strong>monVecteur</strong> ainsi qu'une valeur représentant la composante Alpha (<strong>1.0</strong>) :</p><pre id="r-965887" data-claire-element-id="965887"><code data-claire-semantic="cpp">void main()
{
    // Couleur du pixel

    out_Color = vec4(monVecteur, 1.0);
}</code></pre><p id="r-965888" data-claire-element-id="965888">Ce qui donne le code source suivant :</p><pre id="r-965889" data-claire-element-id="965889"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec3 color;


// Uniform

uniform vec3 monVecteur;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur du pixel

    out_Color = vec4(monVecteur, 1.0);
}</code></pre><p id="r-965890" data-claire-element-id="965890"><em><strong>Exercice 3</strong></em> :</p><p id="r-965891" data-claire-element-id="965891">On commence par déclarer les matrices <strong>projection</strong> et <strong>modelview</strong> comme nous savons le faire depuis un moment déjà. Puis on les localise toutes les deux grâce à la fonction <strong>glGetUniformLocation</strong>() :</p><pre id="r-965892" data-claire-element-id="965892"><code data-claire-semantic="cpp">// Matrices

mat4 projection;
mat4 modelview;


....


// Boucle principale

while(!m_input.terminer())
{
    ....


    // Localisation des matrices

    int localisationProjection = glGetUniformLocation(shader.getProgramID(), &quot;projection&quot;);
    int localisationModelview = glGetUniformLocation(shader.getProgramID(), &quot;modelview&quot;);
}</code></pre><p id="r-965893" data-claire-element-id="965893">Ensuite, on les envoie au shader grâce à la fonction <strong>glUniformMatrix4fv</strong>() en n'oubliant pas des les transposer :</p><pre id="r-965894" data-claire-element-id="965894"><code data-claire-semantic="cpp">// Localisation des matrices

int localisationProjection = glGetUniformLocation(shader.getProgramID(), &quot;projection&quot;);
int localisationModelview = glGetUniformLocation(shader.getProgramID(), &quot;modelview&quot;);


// Envoi des matrices

glUniformMatrix4fv(localisationProjection, 1, GL_FALSE, value_ptr(projection));
glUniformMatrix4fv(localisationModelview, 1, GL_FALSE, value_ptr(modelview));</code></pre><p id="r-965895" data-claire-element-id="965895">Au niveau du <strong>Vertex Shader</strong>, on déclare deux variables <strong>uniform</strong> de type <strong><em>mat4</em></strong> :</p><pre id="r-965896" data-claire-element-id="965896"><code data-claire-semantic="c">// Uniform

uniform mat4 projection;
uniform mat4 modelview;</code></pre><p id="r-965897" data-claire-element-id="965897">Enfin, il ne reste plus qu'à les multiplier en prenant soin de créer une variable pour contenir le résultat de l'opération :</p><pre id="r-965898" data-claire-element-id="965898"><code data-claire-semantic="c">void main()
{
    // Multiplication des deux matrices

    mat4 resultat = projection * modelview;


    ....
}</code></pre><p id="r-965899" data-claire-element-id="965899">Ce qui donne le code source suivant :</p><pre id="r-965900" data-claire-element-id="965900"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec2 in_Vertex;
in vec3 in_Color;


// Uniform

uniform mat4 projection;
uniform mat4 modelview;


// Sortie

out vec3 color;


// Fonction main

void main()
{
    // Multiplication des deux matrices

    mat4 resultat = projection * modelview;
	
	
    // Position finale du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);


    // Envoi de la couleur au Fragment Shader

    color = in_Color;
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">
<span class="arrow"></span>
<span class="next">Les shaders démystifiés (Partie 2/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
<span class="next">Gestion de la 3D</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Gestiondela3D"></a><h2>Gestion de la 3D</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
<span class="arrow"></span>
<span class="next">Les variables uniform</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
<span class="next">Gestion des textures</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-preparation-34" data-claire-element-id="965921">Préparation</h2><p id="r-965904" data-claire-element-id="965904">Dans la partie précédente, nous avons vu ce qu'étaient les variables <strong>uniform</strong> et comment elles fonctionnaient. Nous allons maintenant pouvoir en tirer profit en envoyant nos fameuses matrices à notre shader. Pour rappel, la matrice <strong>modelview</strong> permet de &quot;placer&quot; un modèle dans un monde en 3D. La matrice de <strong>projection</strong> quant à elle permet de transformer, ou plutôt projeter, ce monde vers notre écran; ce dernier n'étant qu'en 2 dimensions.</p><p id="r-965905" data-claire-element-id="965905">Ce qu'il faut comprendre c'est qu'elles ont chacune une utilité bien particulière. Elles sont complémentaires pour afficher quelque chose mais elles sont totalement différentes dans le fond.</p><p id="r-965906" data-claire-element-id="965906">Pour afficher des modèles en 3D, nous aurons donc besoin de les envoyer toutes les deux au shader que l'on utilisera grâce aux <strong>uniform</strong>.</p><p id="r-965907" data-claire-element-id="965907">Le gros avantage avec la préparation du code c'est qu'on va pouvoir supprimer le gros code tout moche de la boucle principale. En effet, nous n'avons plus besoin d'afficher un carré en 2D pour faire nos tests, nous avons besoin de modèles 3D. Et nous avons justement codé deux classes qui permettent d'en afficher (<em><strong>Cube</strong></em> et <em><strong>Caisse</strong></em>), nous n'allons donc pas nous priver de leur utilisation. :p</p><p id="r-965908" data-claire-element-id="965908">On peut donc supprimer tout le code relatif au carré pour ne garder que ceci (sans la boucle <strong>while</strong>) :</p><pre id="r-965909" data-claire-element-id="965909"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Matrices

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Boucle principale

    while(!m_input.terminer())
    {
    }
}</code></pre><p id="r-965910" data-claire-element-id="965910">Profitons-en dès maintenant pour réutiliser notre bonne vielle caméra en déclarant un objet Camera et en la positionnant en 3D au point de coordonnées (3, 3, 3) :</p><pre id="r-965911" data-claire-element-id="965911"><code data-claire-semantic="cpp">// Caméra mobile

Camera camera(vec3(3, 3, 3), vec3(0, 0, 0), vec3(0, 1, 0), 0.5, 0.5);</code></pre><p id="r-965912" data-claire-element-id="965912">Pour tester l'implémentation de la 3D, nous allons utiliser un objet <em><strong>Cube</strong></em>. Nous verrons par la suite la façon de gérer les textures avec un objet <strong>Caisse</strong>. Nous lui donnerons une taille de <strong>2.0</strong> ainsi que le chemin vers deux nouveaux fichiers que nous appellerons <strong>couleur3D.vert</strong> et <strong>couleur3D.frag</strong> (n'oubliez pas de les placer dans le dossier <strong>Shaders</strong> de votre projet) :</p><pre id="r-965913" data-claire-element-id="965913"><code data-claire-semantic="cpp">// Objet Cube

Cube cube(2.0, &quot;Shaders/couleur3D.vert&quot;, &quot;Shaders/couleur3D.frag&quot;);
cube.charger();</code></pre><p id="r-965914" data-claire-element-id="965914">Au niveau de la boucle principale, on supprime tout le code relatif à l'ancien carré pour ne garder que ceci :</p><pre id="r-965915" data-claire-element-id="965915"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    // Gestion des évènements

    m_input.updateEvenements();

    if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
       break;


    // Gestion du déplacement de la caméra

    camera.deplacer();


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


    // Placement de la caméra

    camera.lookAt(modelview);


    
    // Rendu




    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(m_fenetre);


    // Calcul du temps écoulé

    finBoucle = SDL_GetTicks();
    tempsEcoule = finBoucle - debutBoucle;


    // Si nécessaire, on met en pause le programme

    if(tempsEcoule &lt; frameRate)
        SDL_Delay(frameRate - tempsEcoule);
}</code></pre><aside id="r-965917" data-claire-element-id="965917" data-claire-semantic="information"><p id="r-965916" data-claire-element-id="965916">Remarquez les appels aux méthodes <strong>deplacer</strong>() et <strong>lookAt</strong>() de la caméra. N'utilisez pas directement celle de la matrice <strong>modelview</strong>.</p></aside><p id="r-965918" data-claire-element-id="965918">On y ajoute ensuite l'appel à la méthode <strong>afficher</strong>() de l'objet cube. On lui donnera au passage les matrices <strong>projection</strong> et <strong>modelview</strong> :</p><pre id="r-965919" data-claire-element-id="965919"><code data-claire-semantic="cpp">// Placement de la caméra

....



// Affichage du cube

cube.afficher(projection, modelview);


// Actualisation de la fenêtre

....</code></pre><p id="r-965920" data-claire-element-id="965920">La préparation du code est terminée. ;)</p><h2 id="r-integrer-la-troisieme-dimension" data-claire-element-id="965960">Intégrer la troisième dimension</h2><h3 id="r-cote-application-3" data-claire-element-id="965925">Coté application</h3><p id="r-965922" data-claire-element-id="965922">Pour programmer nos premiers shaders &quot;3D&quot;, nous avons vu à l'instant qu'il fallait envoyer les matrices <strong>projection</strong> et <strong>modelview</strong> en tant que variable <strong>uniform</strong>. Nous aurons besoin pour cela de la fonction <strong>glUniformMatrix4fv</strong>() dont nous avons enfin appris son fonctionnement dans la partie précédente.</p><p id="r-965923" data-claire-element-id="965923">Vérifiez donc bien (même s'il ne devrait pas y avoir de problème) qu'elles sont bien présentes dans la méthode <strong>afficher</strong>() du cube :</p><pre id="r-965924" data-claire-element-id="965924"><code data-claire-semantic="cpp">// Verrouillage du VAO

glBindVertexArray(m_vaoID);


    // Envoi des matrices

    glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;projection&quot;), 1, GL_FALSE, value_ptr(projection));
    glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelview&quot;), 1, GL_FALSE, value_ptr(modelview));


    // Rendu

    glDrawArrays(GL_TRIANGLES, 0, 36);


// Déverrouillage du VAO

glBindVertexArray(0);</code></pre><h3 id="r-le-vertex-shader-3" data-claire-element-id="965951">Le Vertex Shader</h3><p id="r-965926" data-claire-element-id="965926">La première chose à faire au niveau du <strong>GLSL</strong> va être la déclaration des matrices avec le mot-clef <em><strong>uniform</strong></em>. D'ailleurs, vu qu'elles sont relatives aux vertices, et non aux pixels, il faut les déclarer dans le <strong>Vertex Shader</strong>.</p><p id="r-965927" data-claire-element-id="965927">On reprend donc le code que nous avons laissé au chapitre précédent auquel on va rajouter les nouveaux <strong>uniform</strong> :</p><pre id="r-965928" data-claire-element-id="965928"><code data-claire-semantic="c">// Uniform

uniform mat4 projection;
uniform mat4 modelview;</code></pre><p id="r-965929" data-claire-element-id="965929">Ce qui donne :</p><pre id="r-965930" data-claire-element-id="965930"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec2 in_Vertex;
in vec3 in_Color;


// Uniform

uniform mat4 projection;
uniform mat4 modelview;


// Sortie

out vec3 color;


// Fonction main

void main()
{
    // Position finale du vertex

    gl_Position = vec4(in_Vertex, 0.0, 1.0);


    // Envoi de la couleur au Fragment Shader

    color = in_Color;
}</code></pre><p id="r-965931" data-claire-element-id="965931">Avant d'aller plus loin, pensez à modifier le type de la variable d'entrée <strong>in_Vertex</strong>. Vu qu'elle possède maintenant <strong>3</strong> coordonnées, son type devient donc <strong>vec3</strong> :</p><pre id="r-965932" data-claire-element-id="965932"><code data-claire-semantic="c">// Entrées

in vec3 in_Vertex;</code></pre><p id="r-965933" data-claire-element-id="965933">La variable <strong>in_Color</strong> ne change pas, elles a toujours ses 3 composantes.</p><p id="r-965934" data-claire-element-id="965934">Contrairement à ce qu'on pourrait penser, la gestion de la 3D est une chose d'assez simple à réaliser. Ce qu'il y a de plus dur à comprendre, c'est l'envoi des variables <strong>uniform</strong>. :p <br/> En fait, il suffit juste de multiplier la variable <strong>in_Vertex</strong> par la matrice <strong>modelview</strong> et <strong>projection</strong>. De cette façon, on peut positionner le vertex dans le monde 3D et le projeter sur l'écran.</p><p id="r-965935" data-claire-element-id="965935">Le seul point sensible auquel il faut faire attention concerne l'ordre des membres dans la multiplication qui doivent se présenter de la manière suivante : <strong>projection x modelview x vertex</strong>. Si vous inversez un seul de ces membres alors votre calcul sera totalement faux. Dans le meilleur des cas, vous afficherez un bout de votre modèle et dans le pire, vous aurez un bel écran noir.</p><div id="r-965937" data-claire-element-id="965937" data-claire-semantic="question"><p id="r-965936" data-claire-element-id="965936">Euh au fait, c'est normal qu'on puisse multiplier une matrice par un vecteur ?</p></div><p id="r-965938" data-claire-element-id="965938">Oui tout à fait, nous avons même vu comment faire dans le chapitre sur les matrices :</p><figure id="r-965940" data-claire-element-id="965941"><img id="r-965939" data-claire-element-id="965939" src="medias/uploads.siteduzero.com_files_420001_421000_420407.png" alt="Image utilisateur"/></figure><p id="r-965942" data-claire-element-id="965942">La seule condition à respecter était le fait que le nombre de <em><strong>colonnes</strong></em> de la matrice soit égal au nombre de <strong><em>coordonnées</em></strong> du vecteur :</p><figure id="r-965944" data-claire-element-id="965945"><img id="r-965943" data-claire-element-id="965943" src="medias/uploads.siteduzero.com_files_420001_421000_420408.png" alt="Image utilisateur"/></figure><p id="r-965946" data-claire-element-id="965946">Pour le moment, notre vertex ne possède que 3 coordonnées, la multiplication est donc impossible. Cependant grâce aux constructeurs, nous allons pouvoir régler ce problème, il suffira juste d'ajouter la valeur <strong>1.0</strong> à la coordonnée <strong>W</strong> comme nous le faisions avant.</p><p id="r-965947" data-claire-element-id="965947">Pour résumer, nous devons multiplier les matrices que nous avons envoyées en <strong>uniform</strong> par la variable d'entrée correspondant au vertex. Vu qu'elles sont toutes considérées comme des variables en <strong>GLSL</strong>, nous allons pouvoir faire cette opération très simplement :</p><pre id="r-965948" data-claire-element-id="965948"><code data-claire-semantic="c">void main()
{
    // Position finale du vertex en 3D

    gl_Position = projection * modelview * vec4(in_Vertex, 1.0);


    // Envoi de la couleur au Fragment Shader

    color = in_Color;
}</code></pre><p id="r-965949" data-claire-element-id="965949">Ce qui donne le code source final :</p><pre id="r-965950" data-claire-element-id="965950"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec3 in_Vertex;
in vec3 in_Color;


// Uniform

uniform mat4 projection;
uniform mat4 modelview;


// Sortie

out vec3 color;


// Fonction main

void main()
{
    // Position finale du vertex en 3D

    gl_Position = projection * modelview * vec4(in_Vertex, 1.0);


    // Envoi de la couleur au Fragment Shader

    color = in_Color;
}</code></pre><h3 id="r-le-fragment-shader-2" data-claire-element-id="965959">Le Fragment Shader</h3><p id="r-965952" data-claire-element-id="965952">Le code du <strong>Fragment Shader</strong> va être super simple à faire car il n'y a aucun modificatione à faire dessus. :p</p><p id="r-965953" data-claire-element-id="965953">En effet, nous n'avons pas modifié le contenu de la variable de sortie <strong>Color</strong> dans le <strong>Vertex Shader</strong> précédent. Il n'y a donc aucune modification à apporter au <strong>Fragment Shader</strong> puisqu'il se contente simplement de recopier cette variable dans sa sortie. Nous pouvons reprendre sans problème le code source du chapitre précédent (même s'il était prévu pour une utilisation 2D à la base) :</p><pre id="r-965954" data-claire-element-id="965954"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec3 color;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(color, 1.0);
}</code></pre><p id="r-965955" data-claire-element-id="965955">Vous pouvez compiler votre projet pour admirer le retour de la 3D dans vos programmes. :D</p><figure id="r-965957" data-claire-element-id="965958"><img id="r-965956" data-claire-element-id="965956" src="medias/uploads.siteduzero.com_files_420001_421000_420452.png" alt="Image utilisateur"/></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
<span class="arrow"></span>
<span class="next">Les variables uniform</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
<span class="next">Gestion des textures</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Gestiondestextures"></a><h2>Gestion des textures</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
<span class="arrow"></span>
<span class="next">Gestion de la 3D</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
<span class="next">Bonnes pratiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-afficher-une-texture" data-claire-element-id="966015">Afficher une texture</h2><h3 id="r-cote-application-4" data-claire-element-id="965973">Coté application</h3><p id="r-965962" data-claire-element-id="965962">Nous allons maintenant passer au dernier shader qui reste encore un peu mystérieux pour le moment : celui qui permet d'afficher des <strong><em>textures</em></strong>.</p><p id="r-965963" data-claire-element-id="965963">Depuis que nous les utilisons, nous n'avons plus besoin de couleur pour afficher quelque chose à l'écran. Ce qui rajoute un semblant de réalisme à nos scènes. Pour les intégrer dans l'application, nous devons utiliser un tableau (différent de celui des couleurs) qui contient des coordonnées de texture. Ces coordonnées permettent de savoir où &quot;<em><strong>plaquer</strong></em>&quot; l'image que l'on veut afficher :</p><figure id="r-965965" data-claire-element-id="965966"><img id="r-965964" data-claire-element-id="965964" src="medias/uploads.siteduzero.com_files_394001_395000_394121.png" alt="Image utilisateur"/></figure><p id="r-965967" data-claire-element-id="965967">Avant de commencer, veuillez créer deux nouveaux fichiers sources que vous appellerez <strong>texture.vert</strong> et <strong>texture.frag</strong>.</p><p id="r-965968" data-claire-element-id="965968">Pour la suite, nous allons supprimer le code relatif au cube pour le remplacer par celui de la classe <em><strong>Caisse</strong></em>. Nous déclarons donc un objet de ce type avec en paramètres le chemin vers le deux nouveaux fichiers créés ainsi qu'un chemin supplémentaire pour sa texture :</p><pre id="r-965969" data-claire-element-id="965969"><code data-claire-semantic="cpp">// Objet Caisse

Caisse caisse(2.0, &quot;Shaders/texture.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Caisse2.jpg&quot;);
caisse.charger();</code></pre><p id="r-965970" data-claire-element-id="965970">Au niveau de la boucle principale, nous n'avons qu'à supprimer l'appel à la méthode <strong>afficher</strong>() du cube pour le remplacer par celui de notre nouvelle caisse :</p><pre id="r-965971" data-claire-element-id="965971"><code data-claire-semantic="cpp">// Placement de la caméra

....



// Affichage de la caisse

caisse.afficher(projection, modelview);


// Actualisation de la fenêtre

....</code></pre><p id="r-965972" data-claire-element-id="965972">Préparation terminée. :)</p><h3 id="r-le-vertex-shader-4" data-claire-element-id="965985">Le Vertex Shader</h3><p id="r-965974" data-claire-element-id="965974">Pour intégrer les textures, nous n'avons pas de grande modification à faire dans le <strong>Vertex Shader</strong> car ce ne sera pas à lui de gérer leur affichage. En effet, ce n'est pas lui qui va prendre les pixels de l'image pour les mettre dans sa sortie, ça c'est le rôle du <strong>Fragment Shader</strong>. ;) La seule chose que l'on va modifier, c'est l'envoi de données au <strong>Fragment Shader</strong>. On n'enverra plus de couleurs mais des coordonnées de texture.</p><p id="r-965975" data-claire-element-id="965975">Dans notre code, on commence par reprendre celui que l'on utilisait précédemment auquel on va supprimer la variable d'entrée <strong>in_Color</strong>, qui est devenue inutile ici, ainsi que la variable de sortie <strong>color</strong> :</p><pre id="r-965976" data-claire-element-id="965976"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec3 in_Vertex;


// Uniform

uniform mat4 projection;
uniform mat4 modelview;


// Fonction main

void main()
{
    // Position finale du vertex en 3D

    gl_Position = projection * modelview * vec4(in_Vertex, 1.0);
}</code></pre><p id="r-965977" data-claire-element-id="965977">Ensuite, on rajoute une nouvelle variable d'entrée qui va nous permettre de récupérer les coordonnées de texture. Nous l'avions appelée <strong>in_TexCoord0</strong> lorsque nous avons utilisé la fonction <strong>glBindAttribLocation</strong>() pour faire le lien avec le tableau <strong>Vertex Attrib 2</strong>. Nous n'avons donc qu'à déclarer cette variable accompagnée du type <strong>vec2</strong> (car il n'y a que 2 coordonnées) ainsi que du mot-clef <em><strong>in</strong></em> :</p><pre id="r-965978" data-claire-element-id="965978"><code data-claire-semantic="c">// Entrées

in vec3 in_Vertex;
in vec2 in_TexCoord0;</code></pre><p id="r-965979" data-claire-element-id="965979">On en profite également pour déclarer une variable de sortie qui copiera le contenu de <strong>in_TexCoord0</strong> pour l'envoyer au <strong>Fragment Shader</strong>. Nous l'appellerons <strong>coordTexture</strong> et sera elle-aussi du type <em><strong>vec2</strong></em>. Elle utilisera cependant le mot-clef <em><strong>out</strong></em> vu qu'elle sort du shader :</p><pre id="r-965980" data-claire-element-id="965980"><code data-claire-semantic="c">// Sortie

out vec2 coordTexture;</code></pre><p id="r-965981" data-claire-element-id="965981">Enfin, pour terminer notre code source, nous devons simplement copier le contenu de la variable d'entrée dans celle de sortie. Le <strong>Fragment Shader</strong> se chargera du reste.</p><pre id="r-965982" data-claire-element-id="965982"><code data-claire-semantic="c">void main()
{
    // Position finale du vertex en 3D

    gl_Position = projection * modelview * vec4(in_Vertex, 1.0);


    // Envoi des coordonnées de texture au Fragment Shader

    coordTexture = in_TexCoord0;
}</code></pre><p id="r-965983" data-claire-element-id="965983">Ce qui donne le code source final :</p><pre id="r-965984" data-claire-element-id="965984"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec3 in_Vertex;
in vec2 in_TexCoord0;


// Uniform

uniform mat4 projection;
uniform mat4 modelview;


// Sortie

out vec2 coordTexture;


// Fonction main

void main()
{
    // Position finale du vertex en 3D

    gl_Position = projection * modelview * vec4(in_Vertex, 1.0);


    // Envoi des coordonnées de texture au Fragment Shader

    coordTexture = in_TexCoord0;
}</code></pre><h3 id="r-le-fragment-shader-3" data-claire-element-id="966014">Le Fragment Shader</h3><p id="r-965986" data-claire-element-id="965986">Le <strong>Fragment Shader</strong> va subir un peu plus de modifications que son prédécesseur. Le premier sera évidemment la disparition de la variable d'entrée <strong>color</strong> qui n'est maintenant plus utilisée je vous le rappelle. ;)</p><p id="r-965987" data-claire-element-id="965987">A la place, nous mettrons la variable <strong>coordTexture</strong> que le <strong>Vertex Shader</strong> nous a gentiment envoyée à l'instant :</p><pre id="r-965988" data-claire-element-id="965988"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec2 coordTexture;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur finale du pixel

    out_Color = vec4(color, 1.0);
}</code></pre><p id="r-965989" data-claire-element-id="965989">Pour la suite, vous vous demandez peut-être comment intégrer une texture au sein d'un code source <strong>GLSL</strong> ? Vu que nous ne savons pas encore le faire, c'est une question qui peut paraître légitime.</p><p id="r-965990" data-claire-element-id="965990">Au risque de vous étonner, les textures sont en fait des variables <strong>uniform</strong> !</p><div id="r-965992" data-claire-element-id="965992" data-claire-semantic="question"><p id="r-965991" data-claire-element-id="965991">Euh des <strong>uniform</strong> ? Mais on a jamais utilisé la fonction <strong>glUniform*</strong>() pour en envoyer ?</p></div><p id="r-965993" data-claire-element-id="965993">Alors oui certes, nous ne l'avons jamais fait. Mais nous aurions pu !</p><p id="r-965994" data-claire-element-id="965994">L'appel à la fonction <strong>glUniform*</strong>() est facultatif si on n'envoie qu'une seule texture par shader. En revanche, si on en envoie plusieurs, il faut le faire pour pouvoir les différencier dans le code source <strong>GLSL</strong>. Nous aurons l'occasion de voir cela dans la partie sur les effets avancés. ;)</p><p id="r-965995" data-claire-element-id="965995">En attendant, cet appel reste facultatif. Cependant, nous devons quand même déclarer les textures en tant que variables <strong>uniform</strong> dans les shaders. D'ailleurs, elles possèdent un type particulier qui s'appelle <em><strong>sampler2D</strong></em> :</p><pre id="r-965996" data-claire-element-id="965996"><code data-claire-semantic="c">// Uniform

uniform sampler2D texture;</code></pre><p id="r-965997" data-claire-element-id="965997">Vous pouvez donner n'importe quel nom à votre texture du moment que vous n'en envoyez qu'une. Le shader saura automatiquement laquelle utiliser.</p><p id="r-965998" data-claire-element-id="965998">L'objectif de cette variable en tout cas va être de récupérer la couleur du pixel recherché pour l'affecter à la variable de sortie <strong>out_Color</strong>. Pour le récupérer, nous allons utiliser notre première fonction prédéfinie dans le <strong>GLSL</strong>. Celle-ci s'appelle <strong>texture</strong>() :</p><pre id="r-965999" data-claire-element-id="965999"><code data-claire-semantic="c">vec4 texture(sampler2D texture, vec2 textCoord);</code></pre><ul id="r-966004" data-claire-element-id="966004"><li id="r-966001" data-claire-element-id="966001"><p id="r-966000" data-claire-element-id="966000"><strong>texture</strong> : la texture contenant les pixels. Nous lui donnerons la variable <strong>uniform texture</strong></p></li><li id="r-966003" data-claire-element-id="966003"><p id="r-966002" data-claire-element-id="966002"><strong>textCoord</strong> : le couple de coordonnées permettant de retrouver un pixel. Nous lui donnerons notre variable d'entrée <strong>coordTexture</strong></p></li></ul><p id="r-966005" data-claire-element-id="966005">Cette fonction renvoie un <em><strong>vec4</strong></em> contentant la couleur du pixel que l'on recherche (composante Alpha comprise).</p><p id="r-966006" data-claire-element-id="966006">Nous devons donc faire appel à cette fonction pour trouver notre couleur finale. Le résultat sera affecté à la variable <strong>out_Color</strong> :</p><pre id="r-966007" data-claire-element-id="966007"><code data-claire-semantic="c">void main()
{
    // Couleur du pixel

    out_Color = texture(texture, coordTexture);
}</code></pre><p id="r-966008" data-claire-element-id="966008">Ce qui donne le code source final :</p><pre id="r-966009" data-claire-element-id="966009"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrée

in vec2 coordTexture;


// Uniform

uniform sampler2D texture;


// Sortie 

out vec4 out_Color;


// Fonction main

void main()
{
    // Couleur du pixel

    out_Color = texture(texture, coordTexture);
}</code></pre><p id="r-966010" data-claire-element-id="966010">Si vous compilez votre code, vous devriez avoir une belle caisse (sans jeu de mot :p ) affichée sur votre écran.</p><figure id="r-966012" data-claire-element-id="966013"><img id="r-966011" data-claire-element-id="966011" src="medias/uploads.siteduzero.com_files_420001_421000_420490.png" alt="Image utilisateur"/></figure><h2 id="r-ce-qu-il-faut-retenir-5" data-claire-element-id="966043">Ce qu'il faut retenir</h2><h3 id="r-point-recapitulatif-1" data-claire-element-id="966031">Point récapitulatif</h3><p id="r-966016" data-claire-element-id="966016">Nous allons faire un dernier point récapitulatif sur ce que nous avons vu dans ces deux dernières parties. Il n'y aura pas eu beaucoup de code nouveau mais il vaut mieux synthétiser toute ça pour éviter d’éventuelles zones d'ombre.</p><p id="r-966017" data-claire-element-id="966017">Ainsi, pour intégrer la troisième dimension, nous devons :</p><ul id="r-966022" data-claire-element-id="966022"><li id="r-966019" data-claire-element-id="966019"><p id="r-966018" data-claire-element-id="966018">Envoyer les matrices <strong>projection</strong> et <strong>modelview</strong> au <strong>Vertex Shader</strong> grâce aux variables <strong>uniform</strong></p></li><li id="r-966021" data-claire-element-id="966021"><p id="r-966020" data-claire-element-id="966020">Les multiplier toutes les deux par le vertex en cours dans l'ordre : <strong>projection * modelview * vertex</strong>. Le résultat final doit être contenu dans la variable prédéfinie <strong>gl_Position</strong></p></li></ul><p id="r-966023" data-claire-element-id="966023">Pour gérer l'affichage de texture, nous devons :</p><ul id="r-966030" data-claire-element-id="966030"><li id="r-966025" data-claire-element-id="966025"><p id="r-966024" data-claire-element-id="966024">Passer les coordonnées du tableau <strong>Vertex Attrib 2</strong> depuis le <strong>Vertex Shader</strong> jusqu'au <strong>Fragment Shader</strong> (avec les mots-clés <em><strong>out</strong></em> et <em><strong>in</strong></em>)</p></li><li id="r-966027" data-claire-element-id="966027"><p id="r-966026" data-claire-element-id="966026">Déclarer la texture en tant que variable <em><strong>uniform</strong></em><em><strong>sampler2D</strong></em> dans le <strong>Fragment Shader</strong></p></li><li id="r-966029" data-claire-element-id="966029"><p id="r-966028" data-claire-element-id="966028">Appeler la fonction <strong>texture</strong>() pour trouver la couleur du pixel cherché. On affecte le résultat à la variable de sortie <strong>out_Color</strong></p></li></ul><h3 id="r-quand-faut-il-changer-de-shader" data-claire-element-id="966042">Quand faut-il &quot;<strong>changer</strong>&quot; de shader ?</h3><p id="r-966032" data-claire-element-id="966032">Avant de terminer, nous allons faire un dernier point sur le <em>changement de shader</em>. Vous vous êtes déjà peut-être demandé quand est-ce que vous devez changer de shader pour afficher un modèle ? Faut-il que vous en reprogrammiez un ou pouvez-vous utiliser celui que vous avez déjà fait ?</p><p id="r-966033" data-claire-element-id="966033">Pour faire simple, vous devez changer de shader à chaque fois que :</p><ul id="r-966038" data-claire-element-id="966038"><li id="r-966035" data-claire-element-id="966035"><p id="r-966034" data-claire-element-id="966034">Vous touchez aux tableaux <strong>Vertex Attribs</strong></p></li><li id="r-966037" data-claire-element-id="966037"><p id="r-966036" data-claire-element-id="966036">Vous voulez envoyer d'autres variables <strong>uniform</strong></p></li></ul><p id="r-966039" data-claire-element-id="966039">Nous avons vu dans ces deux derniers chapitres qu'à chaque fois que nous modifions nos tableaux Vertex Attrib (pour les vertices, les couleurs, etc.), nous devions programmer un autre shader. Nous avions créé de nouveaux fichiers pour chaque changement.</p><p id="r-966040" data-claire-element-id="966040">Évidemment, si vous envoyez une variable <strong>uniform</strong> vous devrez créer un autre shader pour le prendre en compte.</p><p id="r-966041" data-claire-element-id="966041">Si vous ne souhaitez pas utiliser d'effets avancés dans vos applications alors les exemples que nous avons eus l'occasion de voir seront ceux que vous utiliserez <strong>90%</strong> du temps. Ce sont les shaders de base de la programmation <strong>GLSL</strong>. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
<span class="arrow"></span>
<span class="next">Gestion de la 3D</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
<span class="next">Bonnes pratiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Bonnespratiques"></a><h2>Bonnes pratiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
<span class="arrow"></span>
<span class="next">Gestion des textures</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">
<span class="next">Les Frame Buffer Objects</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-optimisation-du-vertex-shader" data-claire-element-id="966059">Optimisation du Vertex Shader</h2><p id="r-966045" data-claire-element-id="966045">Actuellement, nos shaders soufrent d'un énorme manque d'optimisation. En effet si vous avez remarqué, nous multiplions les matrices <strong>projection</strong> et <strong>modelview</strong> dans le <strong>Vertex Shader</strong>. Le problème de cette multiplication c'est qu'elle s'effectue autant de fois qu'il y a de vertex à traiter. Donc si avons par exemple <em><strong>5000</strong></em> vertices à gérer alors elle s'effectuera également <strong><em>5000 fois</em></strong> !</p><p id="r-966046" data-claire-element-id="966046">En temps normal, je vous dirais que ça ne pose pas de problème, que la carte graphique est faite pour ça, etc. Mais là, nous pouvons quand même alléger les calculs en effectuant simplement la multiplication <em><strong>avant</strong></em> d'envoyer les matrices au shader. C'est une opération toute simple à faire car nous avons déjà surchargé l'<strong>opérateur *</strong>.</p><p id="r-966047" data-claire-element-id="966047">D'ailleurs, c'est de cette façon que ça se passait dans les anciennes versions d'OpenGL. ;)</p><p id="r-966048" data-claire-element-id="966048">Au niveau du code C++, il nous suffit juste de déclarer une nouvelle matrice que nous appellerons <strong>modelviewProjection</strong> (en référence à <strong>gl_ModelviewProjectionMatrix</strong> d'OpenGL 2.1) au moment de l'envoyer au shader qui contiendra le résultat de la multiplication de <strong>projection</strong> et <strong>modelview</strong>. Ensuite, nous n'aurons plus qu'à l'envoyer à la place d'envoyer les deux matrices séparément</p><pre id="r-966049" data-claire-element-id="966049"><code data-claire-semantic="cpp">// Verrouillage du VAO

glBindVertexArrays(m_vao);


    // Multiplication des matrices

    mat4 modelviewProjection = projection * modelview;


    // Envoi du résultat

    glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelviewProjection&quot;), 1, GL_FALSE, value_ptr(modelviewProjection));


    // Rendu

    ....

 
// Déverrouillage du VAO

glBindVertexArray(0);</code></pre><p id="r-966050" data-claire-element-id="966050">Au niveau du <strong>Vertex Shader</strong>, nous devons supprimer les deux anciens <strong>uniform</strong> pour les remplacer par un nouveau du nom de <strong>modelviewProjection</strong> :</p><pre id="r-966051" data-claire-element-id="966051"><code data-claire-semantic="c">// Uniform

uniform mat4 modelviewProjection;</code></pre><p id="r-966052" data-claire-element-id="966052">Il ne manque plus qu'à prendre en compte la nouvelle matrice dans le calcul de la position du vertex :</p><pre id="r-966053" data-claire-element-id="966053"><code data-claire-semantic="c">void main()
{
    // Position finale du vertex en 3D

    gl_Position = modelviewProjection * vec4(in_Vertex, 1.0);


    // Envoi des coordonnées de texture

    coordTexture = in_TexCoord0;
}</code></pre><p id="r-966054" data-claire-element-id="966054">Notre <strong>Vertex Shader</strong> ne perd maintenant plus de temps à effectuer une multiplication à chaque fois qu'il doit traiter un vertex. :)</p><p id="r-966055" data-claire-element-id="966055">Il n'y avait que deux lignes à changer au final. Voici à quoi ressemblerait le code permettant d'afficher une texture avec ces petits changements :</p><pre id="r-966056" data-claire-element-id="966056"><code data-claire-semantic="c">// Version du GLSL

#version 150 core


// Entrées

in vec3 in_Vertex;
in vec2 in_TexCoord0;


// Sortie

out vec2 coordTexture;


// Uniform

uniform mat4 modelviewProjection;


// Fonction main

void main()
{
    // Position finale du vertex en 3D

    gl_Position = modelviewProjection * vec4(in_Vertex, 1.0);


    // Envoi des coordonnées de texture

    coordTexture = in_TexCoord0;
}</code></pre><aside id="r-966058" data-claire-element-id="966058" data-claire-semantic="information"><p id="r-966057" data-claire-element-id="966057">Bien entendu, il peut arriver qu'on ait besoin de traiter les deux matrices séparément dans le shader. Si cela arrive, alors on les enverra toutes les deux séparément au lieu, ou en plus, d'envoyer la multiplication seule.</p></aside><h2 id="r-la-methode-envoyermat4" data-claire-element-id="966082">La méthode envoyerMat4()</h2><p id="r-966060" data-claire-element-id="966060">Nous terminons ce chapitre par une méthode simple qui va nous permettre d'économiser l'écriture d'une longue ligne de code répétitive. Je ne sais pas si ça vous fait le même effet mais personnellement, l'appel à la fonction <strong>glUniformMatrix4fv</strong>() m'est extrêmement pénible du fait de sa longueur :</p><pre id="r-966061" data-claire-element-id="966061"><code data-claire-semantic="c">// Envoi de la matrice modelviewProjection

glUniformMatrix4fv(glGetUniformLocation(m_shader.getProgramID(), &quot;modelviewProjection&quot;), 1, GL_FALSE, value_ptr(modelviewProjection));</code></pre><p id="r-966062" data-claire-element-id="966062">Étant donné que nous sommes obligés de faire ceci à chaque fois que l'on veut afficher un modèle, il serait judicieux de coder une méthode qui nous permettrait d'enfermer cette fonction sans avoir à la réutiliser tout le temps. Je pense que vous serez d'accord sur le principe. :p</p><p id="r-966063" data-claire-element-id="966063">Nous allons donc créer une méthode, dans la classe <em><strong>Shader</strong></em>, qui nous permettra de faire cette économie. Nous l'appellerons <strong>envoyerMat4</strong>() car elle n'enverra que des matrices carrées d'ordre 4. Elle prendra en paramètre le nom de la matrice dans le code source <strong>GLSL</strong> ainsi qu'une référence sur un objet de type <em><strong>mat4</strong></em> :</p><pre id="r-966064" data-claire-element-id="966064"><code data-claire-semantic="cpp">void envoyerMat4(std::string nom, glm::mat4 matrice);</code></pre><p id="r-966065" data-claire-element-id="966065">Dans un premier temps, nous devons localiser la variable de destination grâce à la fonction <strong>glGetUniformLocation</strong>() :</p><pre id="r-966066" data-claire-element-id="966066"><code data-claire-semantic="cpp">void Shader::envoyerMat4(std::string nom, glm::mat4 matrice)
{
    // Localisation de la matrice 

    int localisation = glGetUniformLocation(m_programID, nom.c_str());
}</code></pre><p id="r-966067" data-claire-element-id="966067">Ensuite, nous appelons la fameuse fonction <strong>glUniformMatrix4fv</strong>() pour envoyer les valeurs de la matrice :</p><pre id="r-966068" data-claire-element-id="966068"><code data-claire-semantic="cpp">void Shader::envoyerMat4(std::string nom, glm::mat4 matrice)
{
    // Localisation de la matrice 

    int localisation = glGetUniformLocation(m_programID, nom.c_str());


    // Envoi des valeurs

    glUniformMatrix4fv(localisation, 1, GL_FALSE, value_ptr(matrice));
}</code></pre><p id="r-966069" data-claire-element-id="966069">Méthode terminée. :)</p><p id="r-966070" data-claire-element-id="966070">Elle va nous faire gagner un peu temps à chaque fois que nous devrons afficher un modèle. D'ailleurs, le code source deviendra un peu plus compréhensible également :</p><pre id="r-966071" data-claire-element-id="966071"><code data-claire-semantic="cpp">// Mutltiplication des matrices

mat4 modelviewProjection = projection * modelview;


// Envoi du résultat

m_shader.envoyerMat4(&quot;modelviewProjection&quot;, modelviewProjection);</code></pre><p id="r-966072" data-claire-element-id="966072">Nous pouvons même inclure la multiplication directement dans l'appel à la méthode <strong>envoyerMat4</strong>(). Ce qui fait que l'envoi d'une matrice se résumera maintenant à une seule et unique ligne :</p><pre id="r-966073" data-claire-element-id="966073"><code data-claire-semantic="cpp">// Envoi d'une matrice au shader

m_shader.envoyerMat4(&quot;modelviewProjection&quot;, projection * modelview);</code></pre><p id="r-966074" data-claire-element-id="966074">A partir de maintenant, on ne reverra plus les lignes d'envoi de matrice. :D</p><p id="r-966075" data-claire-element-id="966075">L'avantage de cette méthode en plus, c'est qu'elle fonctionne aussi pour les envois séparés de <strong>projection</strong> et de <strong>modelview</strong>. En effet, elle ne fait qu'appeler la fonction <strong>glUniformMatrix4fv</strong>(), ce qui la rend parfaitement compatible avec les autres matrices carrées d'ordre 4.</p><p id="r-966076" data-claire-element-id="966076"><strong>Télécharger (Windows, UNIX/Linux, Mac OS X) : <a href="https://dl.dropboxusercontent.com/s/ehhxxus1kltzrnr/Les shaders demystifies (Partie 2-2).zip?token_hash=AAFRhTVGA-SqDXYZj8wDThF57n-d82_hU-GfFFpmbdeg5w&amp;dl=1">Code Source C++ du chapitre sur les shaders (Partie 2/2)</a></strong></p><p id="r-966077" data-claire-element-id="966077">Nous sommes enfin arrivés à la fin de cette série de chapitres consacrés aux <em><strong>shaders</strong></em>. Nous avons vu pas mal de notions relatives à leur programmation de la compilation à l'aide d'une classe dédiée jusqu'à l'envoi de variable depuis l'application principale.</p><p id="r-966078" data-claire-element-id="966078">J'ai préféré vous occulter toute cette partie au début du tuto car la plupart d'entre vous aurait arrêté sa lecture dès que je vous aurais parlé de ça. C'était beaucoup trop indigeste à mon gout pour être balancé ni vu ni connu en même temps que la découverte d'OpenGL. Un chapitre introductif sur les shaders me semblait plus approprié.</p><p id="r-966079" data-claire-element-id="966079">Néanmoins, toutes les zones d'ombre sont maintenant levées et vous êtes seuls maitres de vos applications. :D</p><p id="r-966080" data-claire-element-id="966080">En ce qui concerne le <strong>GLSL</strong>, nous avons vu les principales notions à connaitre pour faire une application, à savoir la gestion des couleurs, de la 3D et des textures. Si vous souhaitez réaliser une solution pour entreprise, vous n'avez besoin que de ça. En revanche, si vous souhaitez aller plus loin dans le développement, je serai heureux de vous retrouver dans la quatrième partie de ce tuto pour étudier les effets réalistes.</p><p id="r-966081" data-claire-element-id="966081">Mais avant cela, nous devons terminer la partie en cours avec encore un chapitre consacré aux <strong>Frame Buffer Objects</strong>. Nous en aurons besoin dans la quatrième partie alors ne faites pas l'impasse dessus. :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
<span class="arrow"></span>
<span class="next">Gestion des textures</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">
<span class="next">Les Frame Buffer Objects</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesFrameBufferObjects"></a><h2>Les Frame Buffer Objects</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
<span class="arrow"></span>
<span class="next">Bonnes pratiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
<span class="next">Qu&#039;est-ce qu&#039;un FBO ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-966085" data-claire-element-id="966085">Nous voici arrivés au dernier chapitre de cette deuxième partie. Celui-ci concernera une fonctionnalité très utile pour les effets réalises et constitue donc un incontournable de la programmation avancée OpenGL. Il y aura un peu de technique mais rien de vraiment insurmontable, nous verrons tout ce qu'il y a à voir pas à pas pour ne pas être perdu. :)</p><p id="r-966086" data-claire-element-id="966086">Commençons d'ailleurs sans plus tarder ! :pirate:</p><aside id="r-966088" data-claire-element-id="966088" data-claire-semantic="warning"><p id="r-966087" data-claire-element-id="966087">Ce chapitre a eu une naissance assez folklorique, ne vous en faites pas s'il y a des petites erreurs, des images bizarres ou des fautes d’orthographe. Je préfère sortir ce long chapitre maintenant plutôt que d'attendre et lui faire prendre la poussière jusqu'à une validation totale.</p></aside>
</div><a name="Qu039est-cequ039unFBO"></a><h2>Qu&#039;est-ce qu&#039;un FBO ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">
<span class="arrow"></span>
<span class="next">Les Frame Buffer Objects</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
<span class="next">Le Color Buffer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-definitions-14" data-claire-element-id="966127">Définitions</h2><h3 id="r-les-differents-types-de-buffer" data-claire-element-id="966103">Les différents types de buffer</h3><p id="r-966089" data-claire-element-id="966089">Avant de nous intéresser au sujet principal de ce chapitre, nous allons faire un petit retour en arrière sur une fonction que nous utilisons depuis pas mal de temps déjà : la fonction <strong>glClear</strong>() :</p><pre id="r-966090" data-claire-element-id="966090"><code data-claire-semantic="cpp">// Nettoyage de l'écran

glClear(GL_COLOR_BUFFER | GL_DEPTH_BUFFER);</code></pre><p id="r-966091" data-claire-element-id="966091">Celle-ci permet de nettoyer les <em>buffers</em> (zones mémoires ou tampons si vous préférez) qu'ils lui sont donnés en paramètres. Par exemple, nous lui demandons ici de nettoyer le <strong>Color</strong> ainsi que le <strong>Depth Buffer</strong>, le premier correspondant simplement aux pixels affichés sur notre fenêtre et le second à la position des objets 3D les uns par rapport aux autres pour pouvoir les cacher si besoin.</p><p id="r-966092" data-claire-element-id="966092">Si je vous parle de ça, c'est parce qu'il existe encore un autre <em>buffer</em> dont je ne vous ai pas encore parlé, ce qui est un peu normal vu que c'est celui qui est le moins utilisé. :p Il s'agit du <strong>Stencil Buffer</strong> ou en français <strong>tampon du pochoir</strong>. Si vous vous posez la question de savoir ce qu'est un <em>pochoir</em>, sachez que vous en avez déjà probablement utilisé un en maternelle pour dessiner une forme complexe comme un animal par exemple. Je vous laisse regarder sur internet des exemples de pochoirs, vous devriez vite comprendre à quoi ils correspondent en les voyant.</p><p id="r-966093" data-claire-element-id="966093">Le <strong>Stencil Buffer</strong> permet de faire exactement la même chose. Par exemple, au lieu d'afficher une texture carrée représentant un buisson, vous pouvez lui appliquer un pochoir (donc utiliser le <strong>Stencil Buffer</strong>) pour n'afficher que les pixels qui vous intéressent de façon à ne pas vous retrouver avec un buisson carré mais avec un buisson &quot;réaliste&quot;. Je schématise un peu mais vous aurez compris le principe.</p><p id="r-966094" data-claire-element-id="966094">Le problème avec ce buffer, c'est qu'il est assez lourd à mettre en place, il faut activer un tableau <strong>Vertex Attrib</strong> dédié et envoyer ses donnés au shader. Nous ne l'utiliserons pas pour le moment. Si je vous en parle c'est parce que nous devrons gérer le cas où nous en aurions besoin plus tard, vous verrez pourquoi.</p><p id="r-966095" data-claire-element-id="966095">Ce qu'il faut retenir c'est qu'il existe <strong>3</strong> types de <em>buffers</em> :</p><ul id="r-966102" data-claire-element-id="966102"><li id="r-966097" data-claire-element-id="966097"><p id="r-966096" data-claire-element-id="966096"><strong>Color</strong> : qui contient la couleur de chaque pixel de votre fenêtre</p></li><li id="r-966099" data-claire-element-id="966099"><p id="r-966098" data-claire-element-id="966098"><strong>Depth</strong> : qui permet à OpenGL de gérer la profondeur et de cacher les objets</p></li><li id="r-966101" data-claire-element-id="966101"><p id="r-966100" data-claire-element-id="966100"><strong>Stencil</strong> : qui permet de filtrer un rendu avec des pochoirs</p></li></ul><h3 id="r-les-frame-buffers" data-claire-element-id="966126">Les Frame Buffers</h3><p id="r-966104" data-claire-element-id="966104">Cette parenthèse étant faite, nous allons pouvoir passer au sujet principal qui concerne les <strong>Frame Buffer Objets</strong> ou <strong>FBO</strong>. Vous l'aurez deviné, nous allons encore voir des objets OpenGL. :p</p><p id="r-966105" data-claire-element-id="966105">Pour donner une définition simple d'un <strong>FBO</strong>, on pourrait dire qu'il s'agit d'un <em><strong>écran caché</strong></em> qui utilise les <strong>3</strong> types de <em>buffers</em> que nous avons vus à l'instant :</p><figure id="r-966107" data-claire-element-id="966108"><img id="r-966106" data-claire-element-id="966106" src="medias/uploads.siteduzero.com_files_420001_421000_420663.png" alt="Image utilisateur"/></figure><p id="r-966109" data-claire-element-id="966109">Si j'utilise le terme <strong><em>d'écran caché</em></strong> c'est par les <strong>FBO</strong> permettent de faire ce que l'on appelle un rendu off-screen (en dehors de l'écran). C'est-à-dire qu'au lieu d'afficher votre scène dans votre fenêtre, vous le ferrez dans un endroit à part dans la carte graphique comme s'il y en avait une deuxième à l'intérieure. Le rendu sera exactement le même sauf que vous ne le verrez pas directement.</p><div id="r-966111" data-claire-element-id="966111" data-claire-semantic="question"><p id="r-966110" data-claire-element-id="966110">À quoi ça sert d'afficher quelque chose si on ne le voit pas ?</p></div><p id="r-966112" data-claire-element-id="966112">C'est quelque chose d'un peu tordu au premier abord mais je pense que vous allez vite aimer les <strong>FBO</strong> quand vous connaitrez les possibilités qu'ils offrent. En étant associés aux shaders, ils permettent de faire plein d'effets réalistes tels que :</p><ul id="r-966123" data-claire-element-id="966123"><li id="r-966114" data-claire-element-id="966114"><p id="r-966113" data-claire-element-id="966113"><strong>Le flou</strong> : pour la vitesse ou l'éblouissement</p></li><li id="r-966116" data-claire-element-id="966116"><p id="r-966115" data-claire-element-id="966115"><strong>Les reflets</strong> : pour les miroirs et l'eau</p></li><li id="r-966118" data-claire-element-id="966118"><p id="r-966117" data-claire-element-id="966117"><strong>Les ombres dynamiques</strong> : qui sont modifiées à chaque fois que leur &quot;modèle&quot; bouge</p></li><li id="r-966120" data-claire-element-id="966120"><p id="r-966119" data-claire-element-id="966119"><strong>La capture vidéo</strong> : pour filmer un endroit tout en étant dans un autre (caméra de surveillance, télévision, etc.)</p></li><li id="r-966122" data-claire-element-id="966122"><p id="r-966121" data-claire-element-id="966121">...</p></li></ul><p id="r-966124" data-claire-element-id="966124">Une bonne palette d'effets sympathiques en somme. ^^</p><p id="r-966125" data-claire-element-id="966125">Petit détail pour terminer : votre écran lui-même est considéré comme un <strong>Frame Buffer</strong>. Il reprend donc toutes les caractéristiques dont nous venons de parler, sauf pour les effets réalistes parce qu'il est impossible de modifier les pixels une fois qu'ils sont affichés sur l'écran.</p><h2 id="r-fonctionnement-47" data-claire-element-id="966159">Fonctionnement</h2><p id="r-966128" data-claire-element-id="966128">Nous allons aller un peu plus loin dans la structure des <strong>FBO</strong> car ils ont une façon bien particulière de fonctionner, en particulier au niveau de ses 3 <em>buffers</em> qui ne se gèrent pas tous de la même manière. On distinguera d'un coté le <strong>Color Buffer</strong> et de l'autre le <strong>Depth</strong> et le <strong>Stencil Buffer</strong>.</p><h3 id="r-le-color-buffer" data-claire-element-id="966145">Le Color Buffer</h3><p id="r-966129" data-claire-element-id="966129">Comme nous l'avons vu un peu plus haut, un <strong>FBO</strong> peut être considéré comme un <em><strong>écran caché</strong></em> au sein de la carte graphique, nous pouvons donc sans aucun problème faire n'importe quel rendu à l'intérieur. L'intérêt dans tout ça vient du fait que l'on peut modifier les pixels une fois qu'ils sont affichés, ce qui est impossible avec le véritable écran.</p><p id="r-966130" data-claire-element-id="966130">Ces fameux pixels sont contenus dans le <strong>Color Buffer</strong>, celui que nous nettoyons à chaque tour de boucle avec la constante <strong>GL_COLOR_BUFFER</strong>. Et si je peux vous apprendre quelque chose d'étonnant avec lui, c'est qu'il s'agit en fait d'une simple <em><strong>texture</strong></em> !</p><p id="r-966131" data-claire-element-id="966131">Oui, oui vous avez bien lu, le <em>Color Buffer est une texture</em> :</p><figure id="r-966133" data-claire-element-id="966134"><img id="r-966132" data-claire-element-id="966132" src="medias/uploads.siteduzero.com_files_420001_421000_420679.png" alt="Image utilisateur"/></figure><p id="r-966135" data-claire-element-id="966135">C'est un peu logique puisque le but d'OpenGL est d'afficher des pixels sur un écran, et une texture est justement faite pour en contenir plein. L'avantage avec elle, c'est que nous pourrons l'utiliser dans un shader pour la modifier très facilement. Rajouter un effet sera donc un jeu d'enfant. ;)</p><div id="r-966137" data-claire-element-id="966137" data-claire-semantic="question"><p id="r-966136" data-claire-element-id="966136">Ah j'ai une question : le <strong>Color Buffer</strong> de l'écran est lui-aussi une texture ?</p></div><p id="r-966138" data-claire-element-id="966138">Oui on peut dire ça comme ça. C'es comme si on avait une grosse texture, contenant l'affichage de notre scène, plaquée sur la fenêtre SDL.</p><p id="r-966139" data-claire-element-id="966139">Petite précision importante, les <strong>FBO</strong> peuvent contenir jusqu'à <strong>16 Color Buffers</strong>. C'est-à-dire que vous pouvez afficher ou modifier votre rendu <strong>16</strong> fois dans le <strong>même FBO</strong> :</p><figure id="r-966141" data-claire-element-id="966142"><img id="r-966140" data-claire-element-id="966140" src="medias/uploads.siteduzero.com_files_420001_421000_420677.png" alt="Image utilisateur"/></figure><p id="r-966143" data-claire-element-id="966143">Ceci est particulièrement utile si l'on souhaite stocker des données autres que celles relatives à l'affichage. Les ombres en sont un exemple car elles utilisent plusieurs <strong>Color Buffers</strong> pour stocker leurs données.</p><p id="r-966144" data-claire-element-id="966144">Mais bon, pour le moment nous n'en utiliserons qu'un seul ne vous en faites pas, c'est déjà bien assez.</p><h3 id="r-le-depth-et-le-stencil-buffer" data-claire-element-id="966150">Le Depth et le Stencil Buffer</h3><p id="r-966146" data-claire-element-id="966146">Les deux autres buffers (<strong>Depth</strong> et <strong>Stentil</strong>) se gèrent différemment du premier. Leurs données sont un peu plus complexes et ne peuvent pas être représentées par des textures. À la place, nous utiliserons ce que l'on appel des <strong>Render Buffers</strong>, ce sont des espaces mémoires conçues pour accueillir ces types de données :</p><figure id="r-966148" data-claire-element-id="966149"><img id="r-966147" data-claire-element-id="966147" src="medias/uploads.siteduzero.com_files_420001_421000_420678.png" alt="Image utilisateur"/></figure><h3 id="r-en-resume-174" data-claire-element-id="966158">En résumé</h3><p id="r-966151" data-claire-element-id="966151">Pour résumer un peu tout ce flot d'informations : un <strong>Frame Buffer</strong> est composé de 3 <em>sous-buffers</em> (<strong>Color, Depth et Stencil</strong>) :</p><ul id="r-966156" data-claire-element-id="966156"><li id="r-966153" data-claire-element-id="966153"><p id="r-966152" data-claire-element-id="966152">Le premier est représenté pas une <strong>texture</strong> et contient l'affichage d'une scène. Il peut y en avoir jusqu'à <strong>16</strong>.</p></li><li id="r-966155" data-claire-element-id="966155"><p id="r-966154" data-claire-element-id="966154">Les deux autres sont représentés par des <strong>Render Buffer</strong>.</p></li></ul><p id="r-966157" data-claire-element-id="966157">Ce sont les points à connaitre par coeur en ce qui concerne les <strong>FBO</strong>.</p><h2 id="r-programme-du-chapitre" data-claire-element-id="966174">Programme du chapitre</h2><p id="r-966160" data-claire-element-id="966160">Après ce petit bout de théorie, nous allons pouvoir nous lancer dans la pratique pure et dure.</p><p id="r-966161" data-claire-element-id="966161">Je vous retiens encore un peu ici pour vous montrer le programme pour la suite. Nous allons éparpiller le code relatif aux <strong>FBO</strong> dans plusieurs classes, je préfère donc vous exposer clairement les différentes tâches qui nous attendent.</p><p id="r-966162" data-claire-element-id="966162">Celles-ci sont :</p><ul id="r-966171" data-claire-element-id="966171"><li id="r-966164" data-claire-element-id="966164"><p id="r-966163" data-claire-element-id="966163">La modification la classe <em><strong>Texture</strong></em> pour lui permettre de créer des <strong>Color Buffers</strong></p></li><li id="r-966166" data-claire-element-id="966166"><p id="r-966165" data-claire-element-id="966165">La modification des méthodes de copie pour gérer ce nouveau type de texture</p></li><li id="r-966168" data-claire-element-id="966168"><p id="r-966167" data-claire-element-id="966167">L'implémentation des <strong>Render Buffers</strong></p></li><li id="r-966170" data-claire-element-id="966170"><p id="r-966169" data-claire-element-id="966169">La création une classe <strong>Frame Buffer</strong> qui réunira tous les buffers</p></li></ul><p id="r-966172" data-claire-element-id="966172">Nous avons donc pas mal de trucs à faire avec tout ceci.</p><p id="r-966173" data-claire-element-id="966173">Je vous invite naturellement à commencer par la première tâche qui concerne la modification de la classe <em><strong>Texture</strong></em>. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">
<span class="arrow"></span>
<span class="next">Les Frame Buffer Objects</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
<span class="next">Le Color Buffer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LeColorBuffer"></a><h2>Le Color Buffer</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;un FBO ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
<span class="next">Les Render Buffers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-les-taches-1" data-claire-element-id="966188">Les tâches</h2><p id="r-966176" data-claire-element-id="966176">Pour reprendre très rapidement le programme précédent, notre objectif dans cette partie va être la réalisation des deux premières tâches :</p><ul id="r-966185" data-claire-element-id="966185"><li id="r-966178" data-claire-element-id="966178"><p id="r-966177" data-claire-element-id="966177">La modification la classe <em><strong>Texture</strong></em> pour lui permettre de créer des <strong>Color Buffers</strong></p></li><li id="r-966180" data-claire-element-id="966180"><p id="r-966179" data-claire-element-id="966179">La modification des méthodes de copie pour gérer ce nouveau type de texture</p></li><li id="r-966182" data-claire-element-id="966182"><p id="r-966181" data-claire-element-id="966181">L'implémentation des <strong>Render Buffers</strong></p></li><li id="r-966184" data-claire-element-id="966184"><p id="r-966183" data-claire-element-id="966183">La création une classe <strong>Frame Buffer</strong> qui réunira tous les buffers</p></li></ul><p id="r-966186" data-claire-element-id="966186">Je parle bien des deux premières car nous modifierons la classe <em><strong>Texture</strong></em> pour toutes les deux, autant les faire dans la même partie. :)</p><p id="r-966187" data-claire-element-id="966187">Commençons par la première.</p><h2 id="r-creer-un-color-buffer" data-claire-element-id="966258">Créer un Color Buffer</h2><h3 id="r-le-header-13" data-claire-element-id="966206">Le header</h3><p id="r-966189" data-claire-element-id="966189">La fameuse modification de la classe <strong><em>Texture</em></strong> concerne l'ajout d'une nouvelle méthode qui permettra de créer des <em>textures vides</em>. Je dis bien <em>vide</em> parce qu'elle n'est pas chargée depuis une image sur le disque dur, elle ne contient donc aucune donnée au moment de sa création. Ce n'est qu'à l'affichage qu'elle aura ses pixels.</p><p id="r-966190" data-claire-element-id="966190">Avant de créer ladite méthode, nous allons tout d'abord ajouter de nouveaux attributs à la classe <em><strong>Texture</strong></em> qui lui permettront de gérer les textures vides.</p><p id="r-966191" data-claire-element-id="966191">Dans les chapitres précédents, nous utilisions une structure de type <em><strong>SDL_image</strong></em> pour garder en mémoire pas mal d'informations sur une texture comme ses dimensions, le format interne des couleurs, etc. Vu que nous n'en utilisons pas ici, il faudra recréer toutes ces informations à la main à travers des attributs de classe.</p><p id="r-966192" data-claire-element-id="966192">Ces attributs sont les suivants :</p><ul id="r-966203" data-claire-element-id="966203"><li id="r-966194" data-claire-element-id="966194"><p id="r-966193" data-claire-element-id="966193"><strong><em>int</em> largeur</strong> : La largeur de la texture</p></li><li id="r-966196" data-claire-element-id="966196"><p id="r-966195" data-claire-element-id="966195"><strong><em>int</em> hauteur</strong> : Sa hauteur</p></li><li id="r-966198" data-claire-element-id="966198"><p id="r-966197" data-claire-element-id="966197"><strong><em>GLenum</em> format</strong> : Le format des couleurs (3 ou 4 couleurs en comptant le canal Alpha)</p></li><li id="r-966200" data-claire-element-id="966200"><p id="r-966199" data-claire-element-id="966199"><strong><em>GLenum</em> formatInerne</strong> : Le format interne (l'ordre des couleurs)</p></li><li id="r-966202" data-claire-element-id="966202"><p id="r-966201" data-claire-element-id="966201"><strong><em>bool</em> textureVide </strong>: Ce booléen sera utilisé dans les méthodes de copie</p></li></ul><p id="r-966204" data-claire-element-id="966204">En ajoutant le prefix <strong>m_</strong> à ces attributs, on a le header suivant :</p><pre id="r-966205" data-claire-element-id="966205"><code data-claire-semantic="cpp">#ifndef DEF_TEXTURE
#define DEF_TEXTURE


// Includes

....


// Classe Texture

class Texture
{
    public:

    // Méthodes

    ....


    private:

    GLuint m_id;
    std::string m_fichierImage;

    int m_largeur;
    int m_hauteur;
    GLenum m_format;
    GLenum m_formatInterne;
    bool m_textureVide;
};

#endif</code></pre><h3 id="r-les-anciens-constructeurs" data-claire-element-id="966210">Les anciens constructeurs</h3><p id="r-966207" data-claire-element-id="966207">Les nouveaux attributs doivent évidemment être initialisés dans les différents constructeurs, nous leur donnerons tous la valeur <strong>0</strong> :</p><pre id="r-966208" data-claire-element-id="966208"><code data-claire-semantic="cpp">// Constructeur par défaut

Texture::Texture() : m_id(0), m_fichierImage(&quot;&quot;), m_largeur(0), m_hauteur(0), m_format(0), m_formatInterne(0), m_textureVide(false)
{

}


// Autre constructeur

Texture::Texture(std::string fichierImage) : m_id(0), m_fichierImage(fichierImage), m_largeur(0), m_hauteur(0), m_format(0), m_formatInterne(0), m_textureVide(false)
{

}</code></pre><p id="r-966209" data-claire-element-id="966209">Notez que j'ai volontairement occulté le constructeur de copie, nous le verrons à la fin.</p><h3 id="r-un-nouveau-constructeur" data-claire-element-id="966217">Un nouveau constructeur</h3><p id="r-966211" data-claire-element-id="966211">Le problème avec les constructeurs précédents c'est qu'aucun d'entre eux n'est capable de donner de &quot;vraies&quot; valeurs aux attributs, ce qui est normal car ils n'ont aucuns paramètres qui leur permettent de faire cela.</p><p id="r-966212" data-claire-element-id="966212">Pour combler ce manque, nous allons devoir rajouter un nouveau constructeur qui, lui, prendra en paramètres tout ce dont on a besoin pour initialiser nos attributs correctement :</p><pre id="r-966213" data-claire-element-id="966213"><code data-claire-semantic="cpp">Texture(int largeur, int hauteur, GLenum format, GLenum formatInterne, bool textureVide);</code></pre><p id="r-966214" data-claire-element-id="966214">L'implémentation de ce constructeur est assez simple puisqu'il suffit juste de donner le bon paramètre au bon attribut :</p><pre id="r-966215" data-claire-element-id="966215"><code data-claire-semantic="cpp">Texture::Texture(int largeur, int hauteur, GLenum format, GLenum formatInterne, bool textureVide) : m_id(0), m_fichierImage(&quot;&quot;), m_largeur(largeur), 
                 m_hauteur(hauteur), m_format(format), m_formatInterne(formatInterne), m_textureVide(textureVide)
{

}</code></pre><p id="r-966216" data-claire-element-id="966216">Grâce à lui, nous pourrons donner de véritables valeurs à nos nouveaux attributs.</p><h3 id="r-la-methode-chargertexturevide" data-claire-element-id="966257">La méthode chargerTextureVide()</h3><p id="r-966218" data-claire-element-id="966218">L'étape suivante consiste à coder la méthode qui nous permettra de créer des textures vides. Elle utilisera pour cela les attributs précédemment initialisés, elle s'appellera tout simplement <strong>chargerTextureVide</strong>() :</p><pre id="r-966219" data-claire-element-id="966219"><code data-claire-semantic="cpp">void chargerTextureVide();</code></pre><p id="r-966220" data-claire-element-id="966220">Elle ne prendra aucun paramètre.</p><p id="r-966221" data-claire-element-id="966221">Son code sera beaucoup plus simple que celui de la méthode <strong>charger</strong>() car elle n'aura pas besoin de charger une image, d'inverser ses pixels et de déterminer le format des couleurs. Nous avons déjà toutes ces informations grâce à notre nouveau constructeur. :)</p><p id="r-966222" data-claire-element-id="966222">On commence l'implémentation de la méthode en générant un nouvel identifiant d'objet OpenGL grâce à la fonction <strong>glGenTextures</strong>(). On en profitera au passage pour ajouter le code de vérification d'ID à l'aide la fonction <strong>glIsTexture</strong>() :</p><pre id="r-966223" data-claire-element-id="966223"><code data-claire-semantic="cpp">void Texture::chargerTextureVide()
{
    // Destruction d'une éventuelle ancienne texture

    if(glIsTexture(m_id) == GL_TRUE)
        glDeleteTextures(1, &amp;m_id);


    // Génération de l'ID

    glGenTextures(1, &amp;m_id);
}</code></pre><p id="r-966224" data-claire-element-id="966224">On ajoute ensuite le verrouillage a l'aide de la fonction <strong>glBindTexture</strong>() :</p><pre id="r-966225" data-claire-element-id="966225"><code data-claire-semantic="cpp">void Texture::chargerTextureVide()
{
    // Destruction d'une éventuelle ancienne texture

    if(glIsTexture(m_id) == GL_TRUE)
        glDeleteTextures(1, &amp;m_id);


    // Génération de l'ID

    glGenTextures(1, &amp;m_id);


    // Verrouillage

    glBindTexture(GL_TEXTURE_2D, m_id);




    // Déverrouillage

    glBindTexture(GL_TEXTURE_2D, 0);
}</code></pre><p id="r-966226" data-claire-element-id="966226">Une fois le verrouillage enclenché, nous allons appeler la fonction <strong>glTexImage2D</strong>() qui permet de définir les caractéristiques d'une texture (dimensions, formats, etc.). Je vous redonne son prototype ainsi que sa floppé de paramètres :</p><pre id="r-966227" data-claire-element-id="966227"><code data-claire-semantic="cpp">void glTexImage2D(GLenum target,  GLint level,  GLint internalFormat,  GLsizei width,  GLsizei height,  GLint border,  GLenum format,  GLenum type,  const GLvoid * data);</code></pre><ul id="r-966246" data-claire-element-id="966246"><li id="r-966229" data-claire-element-id="966229"><p id="r-966228" data-claire-element-id="966228"><strong>target</strong> : Le type de la texture auquel nous donnerons, comme toujours, la constante <strong>GL_TEXTURE_2D</strong></p></li><li id="r-966231" data-claire-element-id="966231"><p id="r-966230" data-claire-element-id="966230"><strong>level</strong> : Paramètre que nous n'utiliserons pas, nous lui donnerons la valeur <strong>0</strong></p></li><li id="r-966233" data-claire-element-id="966233"><p id="r-966232" data-claire-element-id="966232"><strong>internalFormat</strong> : Le format interne de la texture</p></li><li id="r-966235" data-claire-element-id="966235"><p id="r-966234" data-claire-element-id="966234"><strong>width</strong> : Sa largeur</p></li><li id="r-966237" data-claire-element-id="966237"><p id="r-966236" data-claire-element-id="966236"><strong>height</strong> : Sa hauteur</p></li><li id="r-966239" data-claire-element-id="966239"><p id="r-966238" data-claire-element-id="966238"><strong>border</strong> : Une bordure, nous ne l'utiliserons pas et donnerons la valeur <strong>0</strong></p></li><li id="r-966241" data-claire-element-id="966241"><p id="r-966240" data-claire-element-id="966240"><strong>format</strong> : Le format de la texture</p></li><li id="r-966243" data-claire-element-id="966243"><p id="r-966242" data-claire-element-id="966242"><strong>type</strong> : Type de donnée des pixels (float, int, ...). Nous lui donnerons la constante <strong>GL_UNSIGNED_BYTE</strong></p></li><li id="r-966245" data-claire-element-id="966245"><p id="r-966244" data-claire-element-id="966244"><strong>data</strong> : Pixels de la texture, nous n'en avons pas encore et nous donnerons encore la valeur <strong>0</strong></p></li></ul><p id="r-966247" data-claire-element-id="966247">Refaite une petite lecture lentement pour différencier correctement les paramètres. Remarquez aussi que nous utiliserons tous nos nouveaux attributs.</p><p id="r-966248" data-claire-element-id="966248">En appelant la fonction <strong>glTexImage2D</strong>() avec ces paramètres, on a :</p><pre id="r-966249" data-claire-element-id="966249"><code data-claire-semantic="cpp">// Définition des caractéristiques de la texture

glTexImage2D(GL_TEXTURE_2D, 0, m_formatInterne, m_largeur, m_hauteur, 0, m_format, GL_UNSIGNED_BYTE, 0);</code></pre><p id="r-966250" data-claire-element-id="966250">Pour terminer la méthode, il ne nous manque plus qu'à appliquer les <em>filtres</em> avec la fonction <strong>glTexParameteriv</strong>(). Vous vous souvenez de ce que sont les filtres ? Ils permettent à OpenGL de savoir s'il doit améliorer ou baisser la qualité de la texture en fonction de notre distance par rapport à elle.</p><p id="r-966251" data-claire-element-id="966251">On utilisera les mêmes filtres que ceux de la méthode <strong>charger</strong>() :</p><pre id="r-966252" data-claire-element-id="966252"><code data-claire-semantic="cpp">// Application des filtres

glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);</code></pre><p id="r-966253" data-claire-element-id="966253">Ces filtres permettent à OpenGL d'affiner l'affichage des textures proches et de pixeliser celui des textures éloignées, le premier étant plus gourmand en calcul que le second.</p><p id="r-966254" data-claire-element-id="966254">Si nous réunissons ces bouts de code, on trouve la méthode <strong>chargerTextureVide</strong>() suivante :</p><pre id="r-966255" data-claire-element-id="966255"><code data-claire-semantic="cpp">void Texture::chargerTextureVide()
{
    // Destruction d'une éventuelle ancienne texture

    if(glIsTexture(m_id) == GL_TRUE)
        glDeleteTextures(1, &amp;m_id);


    // Génération de l'ID

    glGenTextures(1, &amp;m_id);


    // Verrouillage

    glBindTexture(GL_TEXTURE_2D, m_id);


        // Définition des caractéristiques de la texture

        glTexImage2D(GL_TEXTURE_2D, 0, m_formatInterne, m_largeur, m_hauteur, 0, m_format, GL_UNSIGNED_BYTE, 0);


        // Application des filtres

        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);


    // Déverrouillage

    glBindTexture(GL_TEXTURE_2D, 0);
}</code></pre><p id="r-966256" data-claire-element-id="966256">Grâce à elle, nous pourrons créer tous les <strong>Colors Buffers</strong> que nous voudrons. :D Il suffira juste de faire attention aux paramètres que nous donnerons.</p><h2 id="r-le-probleme-de-la-copie-de-texture" data-claire-element-id="966285">Le problème de la copie de texture</h2><p id="r-966259" data-claire-element-id="966259">Étant donné que nous avons rajouté des attributs dans la classe, nous devons penser à modifier les méthodes de copie (<em>constructeur</em> et <em>opérateur =</em>) pour éviter les problèmes plus tard. C'est la deuxième tâche sur notre liste.</p><h3 id="r-les-attributs-16" data-claire-element-id="966265">Les attributs</h3><p id="r-966260" data-claire-element-id="966260">On commence par le constructeur.</p><p id="r-966261" data-claire-element-id="966261">En reprenant son code actuel, on remarque que celui-ci ne gère pas les nouveaux attributs :</p><pre id="r-966262" data-claire-element-id="966262"><code data-claire-semantic="cpp">Texture::Texture(Texture const &amp;textureACopier)
{
    // Copie de la texture

    m_fichierImage = textureACopier.m_fichierImage;
    charger();
}</code></pre><p id="r-966263" data-claire-element-id="966263">Nous devons donc corriger cela en utilisant l'opérateur <strong>=</strong> pour chacun d'entre eux :</p><pre id="r-966264" data-claire-element-id="966264"><code data-claire-semantic="cpp">Texture::Texture(Texture const &amp;textureACopier)
{
    // Copie des attributs

    m_fichierImage = textureACopier.m_fichierImage;

    m_largeur = textureACopier.m_largeur;
    m_hauteur = textureACopier.m_hauteur;
    m_format = textureACopier.m_format;
    m_formatInterne = textureACopier.m_formatInterne;
    m_textureVide = textureACopier.m_textureVide;


    // Chargement de la copie

    charger();
}</code></pre><h3 id="r-le-chargement-1" data-claire-element-id="966274">Le chargement</h3><p id="r-966266" data-claire-element-id="966266">Le chargement d'une texture copiée est ce qu'il y a de plus délicat à gérer, surtout dans notre situation car nous avons deux méthodes de chargement : l'une pour les images présentes sur le disque dur et l'autre pour les textures vides.</p><p id="r-966267" data-claire-element-id="966267">Le problème avec la copie ici c'est que la classe <em><strong>Texture</strong></em> est incapable de savoir laquelle des deux elle doit appeler. Pour le moment, elle appelle toujours la méthode charger() quelque soit le type de texture (vide ou image), ce qui va nous poser des problèmes quand on utilisera les <strong>Color Buffer</strong> car eux ont besoin de l'autre méthode.</p><p id="r-966268" data-claire-element-id="966268">Pour éviter cela, nous devons définir manuellement les cas de chargement pour appeler la bonne méthode. Pour nous aider, nous allons nous servir du seul attribut que nous n'avons pas encore utilisé : le booléen <strong>m_textureVide</strong>. Nous lui avions donné une valeur dans tous les constructeurs un peu plus haut.</p><p id="r-966269" data-claire-element-id="966269">Si sa valeur est égale à <strong>true</strong> (c'est-à-dire si la texture est vide) alors nous devons appeler la méthode <strong>chargerTextureVide</strong>(). Si elle est égale à <strong>false</strong> (image SDL), alors nous devons appeler la méthode <strong>charger</strong>(). Un petit bloc <strong>if</strong> sera nécessaire pour faire cette vérification :</p><pre id="r-966270" data-claire-element-id="966270"><code data-claire-semantic="cpp">// Si la texture est vide, alors on appelle la méthode chargerTextureVide()
    
if(m_textureVide)
    chargerTextureVide();
    
    
// Sinon, on appelle la méthode charger() par défaut
   
else
    charger();</code></pre><p id="r-966271" data-claire-element-id="966271">Le constructeur complet :</p><pre id="r-966272" data-claire-element-id="966272"><code data-claire-semantic="cpp">Texture::Texture(Texture const &amp;textureACopier)
{
    // Copie des attributs
    
    m_fichierImage = textureACopier.m_fichierImage;
    
    m_largeur = textureACopier.m_largeur;
    m_hauteur = textureACopier.m_hauteur;
    m_format = textureACopier.m_format;
    m_formatInterne = textureACopier.m_formatInterne;
    m_textureVide = textureACopier.m_textureVide;
    
    
    // Si la texture est vide, alors on appelle la méthode chargerTextureVide()
    
    if(m_textureVide)
        chargerTextureVide();
    
    
    // Sinon, on appelle la méthode charger() par défaut
    
    else
        charger();
}</code></pre><p id="r-966273" data-claire-element-id="966273">Cette fois, la classe appellera la bonne méthode pour charger la texture. :)</p><h3 id="r-probleme-de-copie-des-textures-non-chargees" data-claire-element-id="966280">Problème de copie des textures non chargées</h3><p id="r-966275" data-claire-element-id="966275">Courage, il ne manque plus qu'une condition à gérer et toute cette partie embêtante sera terminée. ^^</p><p id="r-966276" data-claire-element-id="966276">Celle-ci concerne les textures qui n'ont pas encore été chargées au moment de la copie, c'est-à-dire celles dont nous n'avons appelé ni la méthode <strong>charger</strong>(), ni la méthode <strong>chargerTextureVide</strong>(). Que se passerait-il à votre avis si on essayait d'en copier une dans cette situation ? Et bien la copie serait automatiquement chargée même si l'originale ne l'était pas. Cet automatisme peut causer des problèmes et engendrer des bugs dans certains cas.</p><p id="r-966277" data-claire-element-id="966277">Pour éviter cela encore une fois, nous devons rajouter une condition qui vérifiera si la copie doit être chargée ou pas. Nous utiliserons la fonction <strong>glIsTexture</strong>() qui nous permet justement de savoir ceci :</p><pre id="r-966278" data-claire-element-id="966278"><code data-claire-semantic="cpp">Texture::Texture(Texture const &amp;textureACopier)
{
    // Copie des attributs
    
    m_fichierImage = textureACopier.m_fichierImage;
    
    m_largeur = textureACopier.m_largeur;
    m_hauteur = textureACopier.m_hauteur;
    m_format = textureACopier.m_format;
    m_formatInterne = textureACopier.m_formatInterne;
    m_textureVide = textureACopier.m_textureVide;
    
    
    // Si la texture est vide, alors on appelle la méthode chargerTextureVide()
    
    if(m_textureVide &amp;&amp; glIsTexture(textureACopier.m_id) == GL_TRUE)
        chargerTextureVide();
    
    
    // Sinon, on appelle la méthode charger() par défaut
    
    else if(glIsTexture(textureACopier.m_id) == GL_TRUE)
        charger();
}</code></pre><p id="r-966279" data-claire-element-id="966279">Désormais, pour déclencher un des deux chargements, il faudra que la texture originale ait un identifiant valide.</p><h3 id="r-l-operateur-8" data-claire-element-id="966284">L'opérateur =</h3><p id="r-966281" data-claire-element-id="966281">Il ne reste plus qu'une seule chose a faire : recopier le code précédent dans la méthode <strong>operator=</strong>(), en n'oubliant pas de rajouter le <strong>return *this</strong> bien sûr :</p><pre id="r-966282" data-claire-element-id="966282"><code data-claire-semantic="cpp">Texture&amp; Texture::operator=(Texture const &amp;textureACopier)
{
    // Copie des attributs
    
    m_fichierImage = textureACopier.m_fichierImage;
    
    m_largeur = textureACopier.m_largeur;
    m_hauteur = textureACopier.m_hauteur;
    m_format = textureACopier.m_format;
    m_formatInterne = textureACopier.m_formatInterne;
    m_textureVide = textureACopier.m_textureVide;
    
    
    // Si la texture est vide, alors on appelle la méthode chargerTextureVide()
    
    if(m_textureVide &amp;&amp; glIsTexture(textureACopier.m_id) == GL_TRUE)
        chargerTextureVide();
    
    
    // Sinon, on appelle la méthode charger() par défaut
    
    else if(glIsTexture(textureACopier.m_id) == GL_TRUE)
        charger();


    // Retour du pointeur *this

    return *this;
}</code></pre><p id="r-966283" data-claire-element-id="966283">Les modifications dans la classe <em><strong>Texture</strong></em> sont terminées. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;un FBO ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
<span class="next">Les Render Buffers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesRenderBuffers"></a><h2>Les Render Buffers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
<span class="arrow"></span>
<span class="next">Le Color Buffer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
<span class="next">Le Frame Buffer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-les-taches-2" data-claire-element-id="966298">Les tâches</h2><p id="r-966287" data-claire-element-id="966287">Reprenons la petite liste de tâches que nous avons à faire pour créer un <strong>FBO</strong>. Dans cette partie, nous allons nous occuper des deux dernières :</p><ul id="r-966296" data-claire-element-id="966296"><li id="r-966289" data-claire-element-id="966289"><p id="r-966288" data-claire-element-id="966288">La modification la classe <em><strong>Texture</strong></em> pour lui permettre de créer des <strong>Color Buffers</strong></p></li><li id="r-966291" data-claire-element-id="966291"><p id="r-966290" data-claire-element-id="966290">La modification des méthodes de copie pour gérer ce nouveau type de texture</p></li><li id="r-966293" data-claire-element-id="966293"><p id="r-966292" data-claire-element-id="966292">L'implémentation des <strong>Render Buffers</strong></p></li><li id="r-966295" data-claire-element-id="966295"><p id="r-966294" data-claire-element-id="966294">La création une classe <strong>Frame Buffer</strong> qui réunira tous les buffers</p></li></ul><p id="r-966297" data-claire-element-id="966297">Ces deux tâches sont liées entre elles car les <strong>Render Buffers</strong> sont créés à l'intérieur de la classe <em><strong>FrameBuffer</strong></em>. Nous commencerons par parler d'elle et de ses attributs avant d'attaquer les <strong>Render Buffers</strong>.</p><h2 id="r-la-classe-framebuffer" data-claire-element-id="966337">La classe FrameBuffer</h2><h3 id="r-le-header-14" data-claire-element-id="966328">Le header</h3><p id="r-966299" data-claire-element-id="966299">La classe <em><strong>FrameBuffer</strong></em> constitue évidemment le coeur des <strong>FBO</strong>, elle devra gérer la création et l'utilisation de tous les <em>buffers</em>. Elle appellera par la méthode <strong>chargerTextureVide</strong>() que nous avons codée dans la partie précédente. ;)</p><p id="r-966300" data-claire-element-id="966300">Son header de base est celui-ci :</p><pre id="r-966301" data-claire-element-id="966301"><code data-claire-semantic="cpp">#ifndef DEF_FRAMEBUFFER
#define DEF_FRAMEBUFFER


// Include Windows

#ifdef WIN32
#include &lt;GL/glew.h&gt;


// Include Mac

#elif __APPLE__
#define GL3_PROTOTYPES 1
#include &lt;OpenGL/gl3.h&gt;


// Include UNIX/Linux

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif


// Classe FrameBuffer

class FrameBuffer
{
    public:

    private:
};

#endif</code></pre><p id="r-966302" data-claire-element-id="966302">Cette classe possédera pas mal d'attributs pour fonctionner correctement :</p><ul id="r-966313" data-claire-element-id="966313"><li id="r-966304" data-claire-element-id="966304"><p id="r-966303" data-claire-element-id="966303"><strong><em>GLuint</em> m_id</strong> : identifiant OpenGL représentant le <strong>FBO</strong></p></li><li id="r-966306" data-claire-element-id="966306"><p id="r-966305" data-claire-element-id="966305"><strong><em>float</em> m_largeur</strong> : largeur du <strong>FBO</strong>. On peut comparer cet attribut à la largeur de la fenêtre SDL</p></li><li id="r-966308" data-claire-element-id="966308"><p id="r-966307" data-claire-element-id="966307"><strong><em>float</em> m_hauteur</strong> : même chose pour la hauteur</p></li><li id="r-966310" data-claire-element-id="966310"><p id="r-966309" data-claire-element-id="966309"><strong><em>vector</em> m_couleursBuffers</strong> : tableau dynamique qui contiendra tous les <strong>Colors Buffers</strong> désirés</p></li><li id="r-966312" data-claire-element-id="966312"><p id="r-966311" data-claire-element-id="966311"><strong><em>GLuint</em> m_depthBufferID</strong> : identifiant du <strong>Depth Buffer</strong></p></li></ul><div id="r-966315" data-claire-element-id="966315" data-claire-semantic="question"><p id="r-966314" data-claire-element-id="966314">On ne crée par d'attribut pour le <strong>Stencil Buffer</strong> ?</p></div><p id="r-966316" data-claire-element-id="966316">Non nous n'en avons pas besoin, vous verrez pourquoi dans la partie suivante. :)</p><p id="r-966317" data-claire-element-id="966317">Cette petite flopée d’attributs permettra de gérer tous les aspects de nos futurs <strong>FBO</strong>. Nous en rajouterons quelqu'uns dans la dernière partie consacrée aux améliorations.</p><pre id="r-966318" data-claire-element-id="966318"><code data-claire-semantic="cpp">// Attributs 

GLuint m_id;
    
int m_largeur;
int m_hauteur;
    
std::vector&lt;Texture&gt; m_colorBuffers;
GLuint m_depthBufferID;</code></pre><p id="r-966319" data-claire-element-id="966319">Le header comportera aussi son constructeur par défaut :</p><pre id="r-966320" data-claire-element-id="966320"><code data-claire-semantic="cpp">FrameBuffer();</code></pre><p id="r-966321" data-claire-element-id="966321">Ainsi qu'un second constructeur qui prendra en paramètres la largeur et la hauteur du <strong>FBO</strong>. Nous passerons leur valeur aux attributs du même nom :</p><pre id="r-966322" data-claire-element-id="966322"><code data-claire-semantic="cpp">FrameBuffer(int largeur, int hauteur);</code></pre><p id="r-966323" data-claire-element-id="966323">Ce sera ce constructeur que l'on utilisera principalement. ;)</p><p id="r-966324" data-claire-element-id="966324">Enfin, nous ajoutons aussi le destructeur qui ne change décidément pas de forme :</p><pre id="r-966325" data-claire-element-id="966325"><code data-claire-semantic="cpp">~FrameBuffer();</code></pre><p id="r-966326" data-claire-element-id="966326">Si on résume tout ça :</p><pre id="r-966327" data-claire-element-id="966327"><code data-claire-semantic="cpp">#ifndef DEF_FRAMEBUFFER
#define DEF_FRAMEBUFFER


// Include Windows

#ifdef WIN32
#include &lt;GL/glew.h&gt;


// Include Mac

#elif __APPLE__
#define GL3_PROTOTYPES 1
#include &lt;OpenGL/gl3.h&gt;


// Include UNIX/Linux

#else
#define GL3_PROTOTYPES 1
#include &lt;GL3/gl3.h&gt;

#endif


// Includes communs

#include &lt;vector&gt;
#include &quot;Texture.h&quot;


// Classe

class FrameBuffer
{
    public:

    FrameBuffer();
    FrameBuffer(int largeur, int hauteur);
    ~FrameBuffer();


    private:

    GLuint m_id;
    
    int m_largeur;
    int m_hauteur;
    
    std::vector&lt;Texture&gt; m_colorBuffers;
    GLuint m_depthBufferID;
};

#endif</code></pre><h3 id="r-les-constructeurs-et-le-destructeur-2" data-claire-element-id="966336">Les constructeurs et le destructeur</h3><p id="r-966329" data-claire-element-id="966329">Passons tout de suite à l'implémentation des quelques pseudo-méthodes que nous avons déclarés, nous en seront débarrassés. :)</p><p id="r-966330" data-claire-element-id="966330">Le premier constructeur est assez simple (comme d'habitude) puisqu'il ne fait que mettre des valeurs nulles aux attributs. Nous leur donnerons tous la valeur <strong>0</strong> :</p><pre id="r-966331" data-claire-element-id="966331"><code data-claire-semantic="cpp">FrameBuffer::FrameBuffer() : m_id(0), m_largeur(0), m_hauteur(0), m_colorBuffers(0), m_depthBufferID(0)
{

}</code></pre><p id="r-966332" data-claire-element-id="966332">Le second quant à lui sera un poil différent puisqu'il prendra <strong>2</strong> paramètres qui correspondent aux dimensions du <strong>FBO</strong>. Les autres attributs seront initialisés avec la valeur <strong>0</strong> :</p><pre id="r-966333" data-claire-element-id="966333"><code data-claire-semantic="cpp">FrameBuffer::FrameBuffer(int largeur, int hauteur) : m_id(0), m_largeur(largeur), m_hauteur(hauteur), 
                                                     m_colorBuffers(0), m_depthBufferID(0)
{

}</code></pre><p id="r-966334" data-claire-element-id="966334">Pour ce qui est du destructeur, celui-ci ne va pas détruire grand chose pour le moment. Nous le remplirons une fois que nous aurons terminé l'implémentation de toutes les méthodes.</p><pre id="r-966335" data-claire-element-id="966335"><code data-claire-semantic="cpp">FrameBuffer::~FrameBuffer()
{

}</code></pre><h2 id="r-la-methode-creerrenderbuffer" data-claire-element-id="966404">La méthode creerRenderBuffer()</h2><h3 id="r-explications-61" data-claire-element-id="966348">Explications</h3><p id="r-966338" data-claire-element-id="966338">Maintenant que nous avons un squelette de classe défini, nous allons pouvoir passer à la troisième tâche que nous attend sur la liste : la création des <strong>Render Buffers</strong>.</p><p id="r-966339" data-claire-element-id="966339">Comme je vous l'ai dit tout à l'heure, les <strong>Render Buffers</strong> ne seront pas codés dans une classe dédiée, ils ne sont pas aussi importants que les textures donc ils n'ont pas besoin d'être séparés du reste. Nous les utiliserons pour gérer le <strong>Depth</strong> et le <strong>Stencil Buffer</strong> qui, contrairement au <strong>Color</strong>, ne sont pas représentables par des textures (souvenez-vous du petit schéma dans l'introduction).</p><p id="r-966340" data-claire-element-id="966340">Pour les créer, nous allons implémenter une méthode qui se chargera de générer et de configurer un <strong>Render Buffer</strong> à partir d'un identifiant OpenGL. De cette façon, nous initialiserons un buffer très simplement en utilisant seulement une lignes de code. :)</p><p id="r-966341" data-claire-element-id="966341">La méthode en question s'appellera <strong>creerRenderBuffer</strong>() et prendra 2 paramètres :</p><pre id="r-966342" data-claire-element-id="966342"><code data-claire-semantic="cpp">void creerRenderBuffer(GLuint &amp;id, GLenum formatInterne);</code></pre><ul id="r-966347" data-claire-element-id="966347"><li id="r-966344" data-claire-element-id="966344"><p id="r-966343" data-claire-element-id="966343"><strong>id</strong> : L'identifiant qui représentera le <strong>Render Buffer</strong></p></li><li id="r-966346" data-claire-element-id="966346"><p id="r-966345" data-claire-element-id="966345"><strong>formatInterne</strong> : Format interne du buffer. C'est un paramètre que l'on voit plus souvent avec les textures, nous verrons pourquoi nous l'utilisons ici aussi</p></li></ul><h3 id="r-generation-de-l-identifiant-1" data-claire-element-id="966372">Génération de l'identifiant</h3><p id="r-966349" data-claire-element-id="966349">L'avantage des <strong>Render Buffers</strong> c'est que ce sont des objets OpenGL, ils se gèrent donc de la même façon que les <strong>VBO</strong>, les <strong>VAO</strong> et les <strong>textures</strong>. C'est-à-dire qu'ils ont besoin d'un <em><strong>identifiant</strong></em> et d'un verrouillage pour leur configuration (et à fortiori pour leur utilisation). Nous retrouverons ainsi, une fois de plus, toutes les fonctions du type <strong>glGenXXX</strong>(), <strong>glBindXXX</strong>() etc. ^^</p><p id="r-966350" data-claire-element-id="966350">Je vais passer rapidement sur ces deux notions que nous avons l'habitude de voir maintenant. La première est la génération d'identifiant, elle se fait ici avec la fonction <strong>glGenRenderbuffers</strong>() :</p><pre id="r-966351" data-claire-element-id="966351"><code data-claire-semantic="cpp">void glGenRenderbuffers(GLsizei number, GLuint *renderbuffers);</code></pre><ul id="r-966356" data-claire-element-id="966356"><li id="r-966353" data-claire-element-id="966353"><p id="r-966352" data-claire-element-id="966352"><strong>number</strong> : Le nombre d'ID à initialiser. Nous lui donnerons toujours la valeur 1</p></li><li id="r-966355" data-claire-element-id="966355"><p id="r-966354" data-claire-element-id="966354"><strong>renderbuffers</strong> : Un tableau de type <em><strong>GLuint</strong></em> ou l'adresse d'une variable de même type représentant le ou les <strong>Render Buffer(s)</strong></p></li></ul><p id="r-966357" data-claire-element-id="966357">Nous appellerons cette fonction en donnant en paramètre la valeur <strong>1</strong> ainsi que l'adresse de la variable <strong>id</strong> (qui est elle-même un paramètre de la méthode <strong>creerRenderBuffer</strong>()) :</p><pre id="r-966358" data-claire-element-id="966358"><code data-claire-semantic="cpp">void FrameBuffer::creerRenderBuffer(GLuint &amp;id, GLenum formatInterne)
{
    // Génération de l'identifiant

    glGenRenderbuffers(1, &amp;id);
}</code></pre><p id="r-966359" data-claire-element-id="966359">On profite de cette génération pour inclure la vérification d'un &quot;précédent chargement&quot; qui s'applique à tous les objets OpenGL, et donc aux <strong>Render Buffers</strong>, afin d'éviter d'éventuelles fuites de mémoire. Nous utiliserons pour cela la fonction <strong>glIsRenderbuffer</strong>() :</p><pre id="r-966360" data-claire-element-id="966360"><code data-claire-semantic="cpp">GLboolean glIsRenderbuffer(GLuint renderbuffer);</code></pre><p id="r-966361" data-claire-element-id="966361">La fonction renvoie la valeur <strong>GL_FALSE</strong> si aucun chargement n'a été effectué sur l'objet donné ou <strong>GL_TRUE</strong> si c'est le cas.</p><p id="r-966362" data-claire-element-id="966362">Si nous tombons sur la première valeur, nous n'aurons rien à faire. En revanche, si la fonction nous renvoie <strong>GL_TRUE</strong> il faudra faire attention à détruire le <strong>Render Buffer</strong> avant de le charger à nouveau. La fonction permettant cette destruction s'appelle <strong>glDeleteRenderbuffers</strong>() :</p><pre id="r-966363" data-claire-element-id="966363"><code data-claire-semantic="cpp">void glDeleteRenderbuffers(GLsizei number, GLuint *renderbuffers);</code></pre><p id="r-966364" data-claire-element-id="966364">Elle prend exactement les mêmes paramètres que <strong>glGenRenderbuffers</strong>(), à savoir :</p><ul id="r-966369" data-claire-element-id="966369"><li id="r-966366" data-claire-element-id="966366"><p id="r-966365" data-claire-element-id="966365"><strong>number</strong> : Le nombre d'ID à détruire</p></li><li id="r-966368" data-claire-element-id="966368"><p id="r-966367" data-claire-element-id="966367"><strong>renderbuffers</strong> : Un tableau de type <em><strong>GLuint</strong></em> ou l'adresse d'une variable de même type contenant le ou les objet(s) à détruire</p></li></ul><p id="r-966370" data-claire-element-id="966370">Comme à l'accoutumé, nous appellerons les deux fonctions que nous venons de voir juste avant la génération d'ID :</p><pre id="r-966371" data-claire-element-id="966371"><code data-claire-semantic="cpp">void FrameBuffer::creerRenderBuffer(GLuint &amp;id, GLenum formatInterne)
{
    // Destruction d'un éventuel ancien Render Buffer

    if(glIsRenderbuffer(id) == GL_TRUE)
        glDeleteRenderbuffers(1, &amp;id);


    // Génération de l'identifiant

    glGenRenderbuffers(1, &amp;id);
}</code></pre><h3 id="r-configuration-47" data-claire-element-id="966403">Configuration</h3><p id="r-966373" data-claire-element-id="966373">Maintenant que nous avons un <strong>Render Buffer</strong> généré, il ne nous reste plus qu'à le configurer. Cette étape commence évidemment par le &quot;<strong>verrouillage</strong>&quot; de façon à ce qu'OpenGL sache sur quel objet il doit travailler. Nous utiliserons pour cela la fonction <strong>glBindRenderbuffer</strong>() :</p><pre id="r-966374" data-claire-element-id="966374"><code data-claire-semantic="cpp">void glBindRenderbuffer(GLenum target, GLuint renderbuffer);</code></pre><ul id="r-966379" data-claire-element-id="966379"><li id="r-966376" data-claire-element-id="966376"><p id="r-966375" data-claire-element-id="966375"><strong>target</strong> : Le fameux paramètre <strong>target</strong> :p qui correspond toujours au type de l'objet que l'on veut verrouiller. Dans notre cas, nous lui donnerons la constante <strong>GL_RENDERBUFFER</strong></p></li><li id="r-966378" data-claire-element-id="966378"><p id="r-966377" data-claire-element-id="966377"><strong>renderbuffer</strong> : Identifiant représentant le <strong>Render Buffer</strong></p></li></ul><p id="r-966380" data-claire-element-id="966380">Nous appellerons cette fonction deux fois : une fois pour le verrouillage et une autre pour le déverrouillage. Le premier appel prendra en paramètre l'<strong>identifiant</strong> à verrouiller tandis que le second prendra la valeur <strong>0</strong> :</p><pre id="r-966381" data-claire-element-id="966381"><code data-claire-semantic="cpp">void FrameBuffer::creerRenderBuffer(GLuint &amp;id, GLenum formatInterne)
{
    // Destruction d'un éventuel ancien Render Buffer

    if(glIsRenderbuffer(id) == GL_TRUE)
        glDeleteRenderbuffers(1, &amp;id);


    // Génération de l'identifiant

    glGenRenderbuffers(1, &amp;id);


    // Verrouillage

    glBindRenderbuffer(GL_RENDERBUFFER, id);


    // Déverrouillage

    glBindRenderbuffer(GL_RENDERBUFFER, 0);
}</code></pre><p id="r-966382" data-claire-element-id="966382">Le <strong>Render Buffer</strong> est à présent verrouillé et prêt à être configuré. Cette opération va d'ailleurs être beaucoup plus simple que celle des autres objets OpenGL car nous n'avons besoin ici que d'une seule et unique fonction.</p><p id="r-966383" data-claire-element-id="966383">La fonction en question peut d'ailleurs nous faire penser à <strong>glTexImage2D</strong>() car elle permet de définir le format et les dimensions du <strong>Render Buffer</strong>. Elle possède cependant moins de paramètres qu'elle, ce qui la rend tout de même plus agréable à utiliser. :p</p><p id="r-966384" data-claire-element-id="966384">Cette fameuse fonction s'appelle <strong>glRenderbufferStorage</strong>() :</p><pre id="r-966385" data-claire-element-id="966385"><code data-claire-semantic="cpp">void glRenderbufferStorage(GLenum target, GLenum internalformat, GLsizei width, GLsizei height);</code></pre><ul id="r-966394" data-claire-element-id="966394"><li id="r-966387" data-claire-element-id="966387"><p id="r-966386" data-claire-element-id="966386"><strong>target</strong> : Type de l'objet que l'on veut verrouiller, donc <strong>GL_RENDERBUFFER</strong> ici</p></li><li id="r-966389" data-claire-element-id="966389"><p id="r-966388" data-claire-element-id="966388"><strong>internalformat</strong> : Format interne du buffer, nous allons faire un petit aparté dessus dans un instant</p></li><li id="r-966391" data-claire-element-id="966391"><p id="r-966390" data-claire-element-id="966390"><strong>width</strong> : largeur du buffer</p></li><li id="r-966393" data-claire-element-id="966393"><p id="r-966392" data-claire-element-id="966392"><strong>height</strong> : hauteur du buffer</p></li></ul><p id="r-966395" data-claire-element-id="966395">Vous vous souvenez du paramètre <strong>formatInterne</strong> dont je vous parlé tout à l'heure ? Celui de la méthode <strong>creerRenderBuffer</strong>() ? Et bien c'est ici que nous allons l'utiliser.</p><p id="r-966396" data-claire-element-id="966396">Ce dernier permet de définir le &quot;<em>type</em>&quot; de donnée à stocker dans le <strong>buffer</strong>. Par exemple, les données relatives à la profondeur (<strong>Depth</strong>) ne sont pas du tout les mêmes que celles relatives aux pochoirs (<strong>Stencil</strong>), et pourtant ce sont tous les deux des <strong>Render Buffers</strong>. Pour marquer cette différence, il faut indiquer dès maintenant le type de donnée qu’accueillera le <strong>buffer</strong>.</p><p id="r-966397" data-claire-element-id="966397">Pour cela, nous allons donner le paramètre <strong>formatInterne</strong> à la fonction <strong>glRenderbufferStorage</strong>(). Nous lui donnerons également les dimensions du <strong>FBO</strong> à l'aide des attributs <strong>m_largeur</strong> et <strong>m_hauteur</strong> :</p><pre id="r-966398" data-claire-element-id="966398"><code data-claire-semantic="cpp">// Configuration du Render Buffer

glRenderbufferStorage(GL_RENDERBUFFER, formatInterne, m_largeur, m_hauteur);</code></pre><p id="r-966399" data-claire-element-id="966399">Avec cet appel, nous demandons à créer un <strong>Render Buffer</strong> du type donné par le paramètre <strong>formatInterne</strong> (nous verrons ses valeurs possibles dans la partie qui suit) le tout avec les dimensions de notre <strong>FBO</strong> initial.</p><p id="r-966400" data-claire-element-id="966400">Si on ajoute ceci à notre méthode, on obtient :</p><pre id="r-966401" data-claire-element-id="966401"><code data-claire-semantic="cpp">void FrameBuffer::creerRenderBuffer(GLuint &amp;id, GLenum formatInterne)
{
    // Destruction d'un éventuel ancien Render Buffer

    if(glIsRenderbuffer(id) == GL_TRUE)
        glDeleteRenderbuffers(1, &amp;id);


    // Génération de l'identifiant

    glGenRenderbuffers(1, &amp;id);


    // Verrouillage

    glBindRenderbuffer(GL_RENDERBUFFER, id);


        // Configuration du Render Buffer

        glRenderbufferStorage(GL_RENDERBUFFER, formatInterne, m_largeur, m_hauteur);


    // Déverrouillage

    glBindRenderbuffer(GL_RENDERBUFFER, 0);
}</code></pre><p id="r-966402" data-claire-element-id="966402">La méthode <strong>creerRenderBuffer</strong>() est maintenant terminée, nous pouvons l'utiliser quand bon nous semble. C'est d'ailleurs ce que nous allons faire tout de suite en utilisant tout ce que l'on vient de faire (<strong>Color</strong> et <strong>Render Buffers</strong>) dans le but de créer enfin notre premier <strong>FBO</strong>. :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
<span class="arrow"></span>
<span class="next">Le Color Buffer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
<span class="next">Le Frame Buffer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LeFrameBuffer"></a><h2>Le Frame Buffer</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
<span class="arrow"></span>
<span class="next">Les Render Buffers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
<span class="next">Utilisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-la-methode-charger-4" data-claire-element-id="966569">La méthode charger()</h2><h3 id="r-une-impression-de-deja-vu" data-claire-element-id="966414">Une impression de déjà-vu</h3><p id="r-966406" data-claire-element-id="966406">Après avoir créé les deux types de buffers dans les parties précédentes, nous allons enfin pouvoir les associer au <strong>FBO</strong>. Si vous vous sentez un peu perdus entre tous ces buffers, vous pouvez faire une petite analogie avec les shaders : d'un coté vous avez les <em><strong>Color</strong></em> et <em><strong>Render Buffers</strong></em> (les <strong>Vertex</strong> et <strong>Fragment Shaders</strong>) et de l'autre le <strong><em>Frame Buffer</em></strong> qui va les utiliser (Le <strong>Programme</strong>). Je vous redonne le schéma du début pour vous resituer :</p><figure id="r-966408" data-claire-element-id="966409"><img id="r-966407" data-claire-element-id="966407" src="medias/uploads.siteduzero.com_files_420001_421000_420678.png" alt="Image utilisateur"/></figure><p id="r-966410" data-claire-element-id="966410">La comparaison avec les shaders ne s'arrête pas là d'ailleurs car nous retrouvons des notions similaires telles que l'association des buffers avec le <strong>FBO</strong>, le &quot;<strong><em>attachment</em></strong>&quot;, ainsi que la vérification d'intégrité qui sera ici beaucoup moins longue à coder je vous rassure :p</p><p id="r-966411" data-claire-element-id="966411">Nous ferons tout ça dans une nouvelle méthode qui s'appellera tout simplement <strong>charger</strong>() :</p><pre id="r-966412" data-claire-element-id="966412"><code data-claire-semantic="cpp">bool charger();</code></pre><p id="r-966413" data-claire-element-id="966413">Elle retournera un booléen pour confirmer ou non la réussite du chargement. Pensez à inclure ce prototype dans le header de la classe <em><strong>FrameBuffer</strong></em>.</p><h3 id="r-la-generation-d-identifiant" data-claire-element-id="966444">La génération d'identifiant</h3><p id="r-966415" data-claire-element-id="966415">Allez, on se met dans le bain directement et on commence à coder notre nouvelle méthode dès maintenant. Le début sera très similaire à ce que nous avons fait jusqu'à présent car les <strong>Frame Buffers</strong> sont eux-aussi des objets OpenGL (et oui encore :p ). On retrouvera donc une fois de plus la génération d'identifiant, la vérification de double chargement et le verrouillage.</p><p id="r-966416" data-claire-element-id="966416">La première de ces opérations sera assurée par la fonction <strong>glGenFrambuffers</strong>() :</p><pre id="r-966417" data-claire-element-id="966417"><code data-claire-semantic="cpp">void glGenFramebuffers(GLsizei number,  GLuint *ids);</code></pre><ul id="r-966422" data-claire-element-id="966422"><li id="r-966419" data-claire-element-id="966419"><p id="r-966418" data-claire-element-id="966418"><strong>number</strong> : Le nombre d'ID à initialiser. Nous lui donnerons la valeur 1</p></li><li id="r-966421" data-claire-element-id="966421"><p id="r-966420" data-claire-element-id="966420"><strong>ids</strong> : Un tableau de type <em><strong>GLuint</strong></em> ou l'adresse d'une variable de même type représentant le ou les <strong>FBO</strong></p></li></ul><p id="r-966423" data-claire-element-id="966423">Le verrouillage quant à lui, sera effectué par la fonction <strong>glBindFramebuffer</strong>() :</p><pre id="r-966424" data-claire-element-id="966424"><code data-claire-semantic="cpp">void glBindFramebuffer(GLenum target, GLuint framebuffer);</code></pre><ul id="r-966429" data-claire-element-id="966429"><li id="r-966426" data-claire-element-id="966426"><p id="r-966425" data-claire-element-id="966425"><strong>target</strong> : Type d'objet à verrouiller, ici nous lui donnerons toujours la valeur <strong>GL_FRAME_BUFFER</strong></p></li><li id="r-966428" data-claire-element-id="966428"><p id="r-966427" data-claire-element-id="966427"><strong>framebuffer</strong> : Identifiant représentant le <strong>FBO</strong></p></li></ul><p id="r-966430" data-claire-element-id="966430">Nous utiliserons ces deux fonctions au début de la méthode <strong>charger</strong>(). L'identifiant à donner sera évidemment l'attribut <strong>m_id</strong> de notre classe <strong>FrameBuffer</strong> :</p><pre id="r-966431" data-claire-element-id="966431"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Génération d'un id

    glGenFramebuffers(1, &amp;m_id);


    // Verrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, m_id);

  
    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
}</code></pre><p id="r-966432" data-claire-element-id="966432">Remarquez le dernier appel qui permet de déverrouiller le <strong>FBO</strong>.</p><p id="r-966433" data-claire-element-id="966433">Comme d'habitude, on en profite au passage pour inclure le code qui permet d'éviter le double chargement. Nous utiliserons pour cela les fonctions <strong>glIsFramebuffer</strong>() et <strong>glDeleteFramebuffers</strong>() :</p><pre id="r-966434" data-claire-element-id="966434"><code data-claire-semantic="cpp">GLboolean glIsFramebuffer(GLuint framebuffer);

void glDeleteFramebuffers(GLsizei number, GLuint *framebuffers);</code></pre><ul id="r-966439" data-claire-element-id="966439"><li id="r-966436" data-claire-element-id="966436"><p id="r-966435" data-claire-element-id="966435">La première renverra la valeur <strong>GL_FALSE</strong> si aucun chargement n'a été effectué ou <strong>GL_TRUE</strong> si c'est le cas.</p></li><li id="r-966438" data-claire-element-id="966438"><p id="r-966437" data-claire-element-id="966437">La seconde prendra les mêmes paramètres que la fonction de génération d'ID.</p></li></ul><p id="r-966440" data-claire-element-id="966440">Nous appellerons ces fonctions avec un bloc <strong>if</strong> de la même façon que d'habitude. Je vous conseille cependant de mettre des accolades à votre bloc car nous rajouterons une instruction dans très peu de temps. ;)</p><pre id="r-966441" data-claire-element-id="966441"><code data-claire-semantic="cpp">// Vérification d'un éventuel ancien FBO

if(glIsFramebuffer(m_id) == GL_TRUE)
{
    glDeleteFramebuffers(1, &amp;m_id);
}</code></pre><p id="r-966442" data-claire-element-id="966442">Si on ajoute ceci au code que nous avions déjà :</p><pre id="r-966443" data-claire-element-id="966443"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Vérification d'un éventuel ancien FBO

    if(glIsFramebuffer(m_id) == GL_TRUE)
    {
        glDeleteFramebuffers(1, &amp;m_id);
    }


    // Génération d'un id

    glGenFramebuffers(1, &amp;m_id);


    // Verrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, m_id);

  
    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
}</code></pre><h3 id="r-le-color-buffer-2" data-claire-element-id="966467">Le Color Buffer</h3><p id="r-966445" data-claire-element-id="966445">Comme dit un peu plus, la configuration du <strong>FBO</strong> va être d'une simplicité enfantine. Nous avons déjà tout codé dans les parties précédentes, nous n'avons juste qu'à appeler nos nouvelles méthodes pour créer nos différents buffers.</p><p id="r-966446" data-claire-element-id="966446">Le premier dont nous allons nous occuper est le <strong>Color Buffer</strong>. En théorie, nous devrions gérer le cas où nous en utiliserions <strong>16</strong> comme le permet OpenGL, cependant je ne veux pas vous alourdir encore plus les explications surtout avec tout ce que l'on a vu jusqu'à maintenant. Nous verrons donc cela dans la dernière partie de ce chapitre qui sera consacrée aux améliorations.</p><p id="r-966447" data-claire-element-id="966447">En attendant, nous allons gérer le cas où nous utilisons un seul et unique <strong>Color Buffer</strong> qui correspond, je vous le rappelle, à une texture. La première étape consistera à créer un nouvel objet de type <em><strong>Texture</strong></em> grâce au nouveau constructeur de cette classe.</p><pre id="r-966448" data-claire-element-id="966448"><code data-claire-semantic="cpp">Texture(int largeur, int hauteur, GLenum format, GLenum formatInterne, bool textureVide);</code></pre><p id="r-966449" data-claire-element-id="966449">Celui-ci prendra en paramètres :</p><ul id="r-966458" data-claire-element-id="966458"><li id="r-966451" data-claire-element-id="966451"><p id="r-966450" data-claire-element-id="966450">Les <strong>dimensions du FBO</strong> : parce qu'il faut bien que les <strong>buffers</strong> fassent la même taille que lui. Ces dimensions sont représentées par les attributs <strong>m_largeur</strong> et <strong>m_hauteur</strong> de notre classe</p></li><li id="r-966453" data-claire-element-id="966453"><p id="r-966452" data-claire-element-id="966452">Le <strong>format</strong> : qui correspond au format des couleurs (3 ou 4 couleurs avec le canal Alpha). Nous lui affecterons la constante <strong>GL_RGBA</strong></p></li><li id="r-966455" data-claire-element-id="966455"><p id="r-966454" data-claire-element-id="966454">Le <strong>format interne</strong> des couleurs : qui correspond au interne de la texture (l'ordre des couleurs). Bizarrement, nous lui affecterons la constante <strong>GL_RGBA</strong>, celle-ci fonctionne pour les deux paramètres</p></li><li id="r-966457" data-claire-element-id="966457"><p id="r-966456" data-claire-element-id="966456">Le <strong>booléen textureVide</strong> : qui sera utile en cas de copie de texture pour savoir quelle méthode appeler (<strong>charger</strong>() ou <strong>chargerTextureVide</strong>()). Il faut lui affecter la valeur <strong>true</strong> évidemment</p></li></ul><p id="r-966459" data-claire-element-id="966459">Nous créons donc un objet <em><strong>Texture</strong></em> en utilisant ce constructeur :</p><pre id="r-966460" data-claire-element-id="966460"><code data-claire-semantic="cpp">// Création du Color Buffer

Texture colorBuffer(m_largeur, m_hauteur, GL_RGBA, GL_RGBA, true);</code></pre><p id="r-966461" data-claire-element-id="966461">Ensuite, on appelle la méthode <strong>chargerTextureVide</strong>() de notre nouvel objet de façon à l'initialiser avec les bonnes dimensions et les bons formats :</p><pre id="r-966462" data-claire-element-id="966462"><code data-claire-semantic="cpp">// Création du Color Buffer

Texture colorBuffer(m_largeur, m_hauteur, GL_RGBA, GL_RGBA, true);
colorBuffer.chargerTextureVide();</code></pre><p id="r-966463" data-claire-element-id="966463">Enfin, on l'ajoute au tableau dynamique <strong>m_colorBuffers</strong>. Ce dernier ne contiendra qu'une seule texture pour le moment mais n'oubliez pas que nous allons gérer les autre cas un peu plus tard :</p><pre id="r-966464" data-claire-element-id="966464"><code data-claire-semantic="cpp">// Création du Color Buffer

Texture colorBuffer(m_largeur, m_hauteur, GL_RGBA, GL_RGBA, true);
colorBuffer.chargerTextureVide();


// Ajout au tableau

m_colorBuffers.push_back(colorBuffer);</code></pre><p id="r-966465" data-claire-element-id="966465">Petit récap :</p><pre id="r-966466" data-claire-element-id="966466"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Vérification d'un éventuel ancien FBO

    if(glIsFramebuffer(m_id) == GL_TRUE)
    {
        glDeleteFramebuffers(1, &amp;m_id);
    }


    // Génération d'un id

    glGenFramebuffers(1, &amp;m_id);


    // Verrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, m_id);


        // Création du Color Buffer

        Texture colorBuffer(m_largeur, m_hauteur, GL_RGBA, GL_RGBA, true);
        colorBuffer.chargerTextureVide();


        // Ajout au tableau

        m_colorBuffers.push_back(colorBuffer);

  
    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
}</code></pre><h3 id="r-le-depth-et-le-stencil-buffer-1" data-claire-element-id="966495">Le Depth et le Stencil Buffer</h3><p id="r-966468" data-claire-element-id="966468">Bien, on passe maintenant aux <strong>Render Buffers</strong>.</p><p id="r-966469" data-claire-element-id="966469">Dans la partie précédente, nous avons codé une méthode permettant d'en créer un très facilement. Son prototype est le suivant :</p><pre id="r-966470" data-claire-element-id="966470"><code data-claire-semantic="cpp">void creerRenderBuffer(GLuint &amp;id, GLenum formatInterne);</code></pre><ul id="r-966475" data-claire-element-id="966475"><li id="r-966472" data-claire-element-id="966472"><p id="r-966471" data-claire-element-id="966471"><strong>id</strong> : référence sur l'identifiant représentant le buffer créé</p></li><li id="r-966474" data-claire-element-id="966474"><p id="r-966473" data-claire-element-id="966473"><strong>formatInterne</strong> : Format interne du buffer</p></li></ul><p id="r-966476" data-claire-element-id="966476">Fut un temps, nous aurions appelé cette méthode deux fois : une pour le <strong>Depth Buffer</strong> et l'autre pour le <strong>Stencil</strong>. Cependant, les choses ont changés et ce système ne semble plus fonctionner avec OpenGL 3. Au lieu d'avoir deux buffers séparés, nous n'en avons maintenant plus qu'un seul qui remplit le rôle du Depth et du Stencil.</p><p id="r-966477" data-claire-element-id="966477">Notre petit schéma n'est donc plus exact, il doit être modifié pour fusionner les deux <strong>Render Buffers</strong> :</p><figure id="r-966479" data-claire-element-id="966480"><img id="r-966478" data-claire-element-id="966478" src="medias/uploads.siteduzero.com_files_421001_422000_421418.png" alt="Image utilisateur"/></figure><p id="r-966481" data-claire-element-id="966481">Ce schéma est plus proche de la réalité. :)</p><p id="r-966482" data-claire-element-id="966482">En définitif, nous n'appellerons pas la méthode <strong>creerRenderBuffer</strong>() deux fois mais une seule fois. Nous lui donnerons en paramètre l'attribut <strong>m_depthBufferID</strong> qui accueillera le &quot;double-buffer&quot; ainsi que la constante <em><strong>GL_DEPTH24_STENCIL8</strong></em> pour le format interne. Cette constante permet de :</p><ul id="r-966487" data-claire-element-id="966487"><li id="r-966484" data-claire-element-id="966484"><p id="r-966483" data-claire-element-id="966483">Définir une profondeur de <strong>24bits</strong> pour le <strong>Depth Buffer</strong>. Nous avons utilisé le même nombre au moment de configurer le contexte OpenGL avec la fonction <strong>SDL_GL_SetAttribute</strong>()</p></li><li id="r-966486" data-claire-element-id="966486"><p id="r-966485" data-claire-element-id="966485">Même chose pour le <strong>Stencil Buffer</strong> mais avec seulement <strong>8 bits</strong> cette fois-ci. Ce buffer prend moins de place en mémoire</p></li></ul><p id="r-966488" data-claire-element-id="966488">L'appel final ressemble donc à ceci :</p><pre id="r-966489" data-claire-element-id="966489"><code data-claire-semantic="cpp">// Création du Depth et du Stencil Buffer

creerRenderBuffer(m_depthBufferID, GL_DEPTH24_STENCIL8);</code></pre><aside id="r-966491" data-claire-element-id="966491" data-claire-semantic="warning"><p id="r-966490" data-claire-element-id="966490">Attention, nous utilisons bien une <em><strong>référence</strong></em> pour le premier paramètre, ce n'est donc pas une copie qui est envoyée à la méthode.</p></aside><p id="r-966492" data-claire-element-id="966492">Quelle simplicité, nous venons de créer un double-buffer en seulement une lignes de code. :p</p><p id="r-966493" data-claire-element-id="966493">Petite récap :</p><pre id="r-966494" data-claire-element-id="966494"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Vérification d'un éventuel ancien FBO

    if(glIsFramebuffer(m_id) == GL_TRUE)
    {
        glDeleteFramebuffers(1, &amp;m_id);
    }


    // Génération d'un id

    glGenFramebuffers(1, &amp;m_id);


    // Verrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, m_id);


        // Création du Color Buffer

        Texture colorBuffer(m_largeur, m_hauteur, GL_RGBA, GL_RGBA, true);
        colorBuffer.chargerTextureVide();


        // Ajout au tableau

        m_colorBuffers.push_back(colorBuffer);


        // Création du Depth et du Stencil Buffer

        creerRenderBuffer(m_depthBufferID, GL_DEPTH24_STENCIL8);

  
    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
}</code></pre><h3 id="r-association-attachment" data-claire-element-id="966533">Association (Attachment)</h3><p id="r-966496" data-claire-element-id="966496">Nos différentes buffers sont maintenant créés et prêts à être utilisés. Cependant ils ne sont pas d'une grande utilité pour le moment, ils sont tous éparpillés dans plusieurs attributs et OpenGL ne connait même pas leur existence. Pour remédier à ce problème, nous allons les associer au <strong>FBO</strong>, un peu comme nous avons associé les shaders au programme.</p><p id="r-966497" data-claire-element-id="966497">Pour faire cela, nous aurons besoin de deux fonctions : l'une est dédiée aux <strong>Color Buffers</strong> et l'autre aux <strong>Render Buffers</strong>. Je vais vous demander un peu d'attention pour leur explication car ce sont certainement les fonctions OpenGL les plus importantes de ce chapitre.</p><p id="r-966498" data-claire-element-id="966498">La première s'appelle <strong>glFramebufferTexture2D</strong>() (un peu compliqué comme nom ^^ ) :</p><pre id="r-966499" data-claire-element-id="966499"><code data-claire-semantic="cpp">void glFramebufferTexture2D(GLenum target, GLenum attachment, GLenum textarget, GLuint texture, GLint level);</code></pre><ul id="r-966510" data-claire-element-id="966510"><li id="r-966501" data-claire-element-id="966501"><p id="r-966500" data-claire-element-id="966500"><strong>target</strong> : Le paramètre target du <strong>FBO</strong>, soit <strong>GL_FRAMEBUFFER</strong> ici</p></li><li id="r-966503" data-claire-element-id="966503"><p id="r-966502" data-claire-element-id="966502"><strong>attachment</strong> : Paramètre SUPER important que nous allons développer dans un instant</p></li><li id="r-966505" data-claire-element-id="966505"><p id="r-966504" data-claire-element-id="966504"><strong>textarget</strong> : Le paramètre target de la texture cette fois, soit <strong>GL_TEXTURE_2D</strong></p></li><li id="r-966507" data-claire-element-id="966507"><p id="r-966506" data-claire-element-id="966506"><strong>texture</strong> : L'identifiant de la texture à associer. Nous utiliserons le getter <strong>getID</strong>() de notre <strong>Color Buffer</strong></p></li><li id="r-966509" data-claire-element-id="966509"><p id="r-966508" data-claire-element-id="966508"><strong>level</strong> : Paramètre que l'on a déjà rencontré dans le chapitre sur les textures. Nous l'avions laissé à <strong>0</strong> et c'est ce que nous allons faire ici aussi</p></li></ul><p id="r-966511" data-claire-element-id="966511">Le paramètre auquel il faut faire attention ici est évidemment le paramètre <strong>attachment</strong>. Ce dernier correspond au point d'attache, ou plus grossièrement à l'index du <strong>Color Buffer</strong>. N'oubliez pas que nous pouvons en créer jusqu'à <strong>16</strong>, il faut qu'OpenGL donne un index à chacun d'entre eux pour pouvoir les reconnaitre au moment de l'affichage.</p><p id="r-966512" data-claire-element-id="966512">C'est précisément ce que fait le paramètre <strong>attachment</strong>, il permet de différencier les buffers au moment de les associer. Les valeurs qu'il peut prendre correspondent aux constantes allant de <strong>GL_COLOR_ATTACHMENT0</strong> à <strong>GL_COLOR_ATTACHMENT15</strong>. Dans notre cas, nous n'utiliserons que la première car nous n'avons qu'un seul buffer à gérer.</p><p id="r-966513" data-claire-element-id="966513">Au final, l'appel à la fonction <strong>glFramebufferTexture2D</strong>() ressemblera à ceci :</p><pre id="r-966514" data-claire-element-id="966514"><code data-claire-semantic="cpp">// Association du Color Buffer

glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, m_colorBuffers[0].getID(), 0);</code></pre><p id="r-966515" data-claire-element-id="966515">La seconde fonction d'association ressemble fortement à la première, ses paramètres sont assez semblables sauf qu'ils permettent de gérer les <strong>Render Buffers</strong>. La fonction s'appelle <strong>glFramebufferRenderbuffer</strong>() :</p><pre id="r-966516" data-claire-element-id="966516"><code data-claire-semantic="cpp">void glFramebufferRenderbuffer(GLenum target, GLenum attachment, GLenum renderbuffertarget, GLuint renderbuffer);</code></pre><ul id="r-966525" data-claire-element-id="966525"><li id="r-966518" data-claire-element-id="966518"><p id="r-966517" data-claire-element-id="966517"><strong>target</strong> : Le paramètre target du <strong>FBO</strong>, soit <strong>GL_FRAMEBUFFER</strong></p></li><li id="r-966520" data-claire-element-id="966520"><p id="r-966519" data-claire-element-id="966519"><strong>attachment</strong> : Paramètre que l'on va développer dans un instant ;)</p></li><li id="r-966522" data-claire-element-id="966522"><p id="r-966521" data-claire-element-id="966521"><strong>renderbuffertarget</strong> : Le paramètre target du <strong>Reder Buffer</strong> cette fois, celui que nous avons utilisé pour le configurer. Nous lui donnerons donc la constante <strong>GL_RENDERBUFFER</strong></p></li><li id="r-966524" data-claire-element-id="966524"><p id="r-966523" data-claire-element-id="966523"><strong>renderbuffer</strong> : L'identifiant du <strong>Render Buffer</strong> à associer. Nous lui donnerons l'attribut <strong>m_depthBufferID</strong> qui contient le <strong>Depth</strong> et le <strong>Stencil Buffer</strong></p></li></ul><p id="r-966526" data-claire-element-id="966526">Le principe du paramètre <strong>attachment</strong> ne change pas vraiment par rapport au précédent on parle toujours du <em>point d'attache</em>, sauf qu'ici OpenGL n'attend plus un index mais le type de <strong>Render Buffer</strong> que l'on souhaite associer.</p><p id="r-966527" data-claire-element-id="966527">Là-aussi, nous devrions en théorie appeler cette fonction deux fois pour le <strong>Depth</strong> et le <strong>Stencil Buffer</strong>, cependant avec la fusion de ces derniers, nous n'aurons besoin que d'un seul appel.</p><p id="r-966528" data-claire-element-id="966528">Le paramètre <strong>attachment</strong> prendra une constante assez proche de celle que l'on a utilisée pour la méthode <strong>creerRenderBuffer</strong>() et qui s'appelle : <strong>GL_DEPTH_STENCIL_ATTACHMENT</strong>. L'appel à la fonction <strong>glFramebufferRenderbuffer</strong>() ressemblera donc à ceci :</p><pre id="r-966529" data-claire-element-id="966529"><code data-claire-semantic="cpp">// Association du Depth et du Stencil Buffer

glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_STENCIL_ATTACHMENT, GL_RENDERBUFFER, m_depthBufferID);</code></pre><p id="r-966530" data-claire-element-id="966530">Avec cet appel, on associe le double-buffer que l'on a créé précédemment avec le point d'attache <strong>GL_DEPTH_STENCIL_ATTACHMENT</strong>. Le <strong>FBO</strong> possède maintenant tous les buffers dont il a besoin pour fonctionner. ^^</p><p id="r-966531" data-claire-element-id="966531">Si on récapitule tout ça :</p><pre id="r-966532" data-claire-element-id="966532"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Vérification d'un éventuel ancien FBO

    if(glIsFramebuffer(m_id) == GL_TRUE)
    {
        glDeleteFramebuffers(1, &amp;m_id);
    }


    // Génération d'un id

    glGenFramebuffers(1, &amp;m_id);


    // Verrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, m_id);


        // Création du Color Buffer

        Texture colorBuffer(m_largeur, m_hauteur, GL_RGBA, GL_RGBA, true);
        colorBuffer.chargerTextureVide();


        // Ajout au tableau

        m_colorBuffers.push_back(colorBuffer);


        // Création du Depth et du Stencil Buffer

        creerRenderBuffer(m_depthBufferID, GL_DEPTH24_STENCIL8);


        // Association du Color Buffer

        glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, m_colorBuffers[0].getID(), 0);


        // Association du Depth et du Stencil Buffer

        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_STENCIL_ATTACHMENT, GL_RENDERBUFFER, m_depthBufferID);

  
    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
}</code></pre><h3 id="r-verification-de-la-construction" data-claire-element-id="966568">Vérification de la construction</h3><p id="r-966534" data-claire-element-id="966534">En théorie, nous sommes maintenant capables d'utiliser notre classe <em><strong>FrameBuffer</strong></em> sans ajouter de code quelconque. Cependant, faire cela serait assez imprudent car nous ne savons absolument pas si notre <strong>FBO</strong> est valide ou non.</p><p id="r-966535" data-claire-element-id="966535">Pour éviter d'être surpris lors de notre prochain affichage, nous allons coder encore un petit bloc dans la méthode <strong>charger</strong>() qui nous permettra de vérifier ce que l'on peut appeler l'<em>intégrité du <strong>FBO</strong></em>. Si une erreur s'est produite au moment de sa construction (buffer, association, etc.) OpenGL nous le fera savoir, et nous devrons réagir en conséquence.</p><div id="r-966537" data-claire-element-id="966537" data-claire-semantic="question"><p id="r-966536" data-claire-element-id="966536">Mais euh comment on fait pour savoir si le <strong>FBO</strong> est mal construit ?</p></div><p id="r-966538" data-claire-element-id="966538">La réponse est très simple : il existe une fonction pour nous le dire, tout comme avec les shaders.</p><p id="r-966539" data-claire-element-id="966539">Heureusement pour nous, la fonction en question est moins compliquée à utiliser que celle des shaders une fois de plus. Vous vous souvenez qu'avec eux, il fallait vérifier s'il y avait une erreur, récupérer la taille du message et l'afficher. Avec les <strong>FBO</strong>, nous n'avons pas à faire tout ça. :) Mais en contrepartie, nous n'aurons pas de détails précis sur l'erreur remontée. Ce n'est pas trop grave ici car nous n'avons pas de code source à vérifier, l'erreur est donc moins susceptible de venir de nous.</p><p id="r-966540" data-claire-element-id="966540">Cette fonction de vérification s'appelle <strong>glCheckFramebufferStatus</strong>() :</p><pre id="r-966541" data-claire-element-id="966541"><code data-claire-semantic="cpp">GLenum glCheckFramebufferStatus(GLenum target);</code></pre><ul id="r-966544" data-claire-element-id="966544"><li id="r-966543" data-claire-element-id="966543"><p id="r-966542" data-claire-element-id="966542"><strong>target</strong> : Le paramètre target des <strong>FBO</strong> ! La constante <strong>GL_FRAMEBUFFER</strong>. Oui c'est un peu spécial mais je vous rassure, la fonction fonctionne correctement.</p></li></ul><p id="r-966545" data-claire-element-id="966545">Elle renvoie plusieurs constantes en cas d'erreur ou <strong>GL_FRAMEBUFFER_COMPLETE</strong> si tout s'est bien passé. Pour plus de simplicité, nous n'utiliserons que cette dernière. ;)</p><p id="r-966546" data-claire-element-id="966546">Nous commençons donc notre code en vérifiant la valeur renvoyée par la fonction <strong>glCheckFramebufferStatus</strong>(). Si elle est différente de <strong>GL_FRAMEBUFFER_COMPLETE</strong> alors on entre dans un bloc <strong>if</strong> :</p><pre id="r-966547" data-claire-element-id="966547"><code data-claire-semantic="cpp">// Vérification de l'intégrité du FBO

if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
{

}</code></pre><p id="r-966548" data-claire-element-id="966548">Si le programme entre dans ce bloc, c'est qu'il s'est passé quelque chose de mauvais dans la méthode (un <strong>Render Buffer</strong> mal initialisé par exemple). Si cela arrive, il faudra libérer toute la mémoire prise par les différents objets.</p><p id="r-966549" data-claire-element-id="966549">Pour cela, nous allons appeler la fonction <strong>glDeleteFramebuffers</strong>() pour détruire le <strong>FBO</strong> et la fonction <strong>glDeleteRenderbuffers</strong>() pour détruire le double-buffer gérant le <strong>Depth</strong> et le <strong>Stencil</strong> :</p><pre id="r-966550" data-claire-element-id="966550"><code data-claire-semantic="cpp">// Vérification de l'intégrité du FBO

if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
{
    // Libération des buffers

    glDeleteFramebuffers(1, &amp;m_id);
    glDeleteRenderbuffers(1, &amp;m_depthBufferID);
}</code></pre><div id="r-966552" data-claire-element-id="966552" data-claire-semantic="question"><p id="r-966551" data-claire-element-id="966551">Hum au fait, on ne libère pas tout là ... Il manque encore le <strong>Color Buffer</strong> non ?</p></div><p id="r-966553" data-claire-element-id="966553">Oui c'est exact ! Je l'ai gardé pour la fin celui-la. :p</p><p id="r-966554" data-claire-element-id="966554">En fait, ce buffer-la est un peu spécial vu qu'il s'agit d'une <em><strong>texture</strong></em>. Sa libération dépend donc entièrement de son destructeur. Pour l'appeler, il nous suffit simplement de supprimer la texture dans le tableau <em><strong>m_colorBuffers</strong></em>, le programme appellera automatiquement le destructeur concerné. C'est une des bases du C++.</p><p id="r-966555" data-claire-element-id="966555">Pour supprimer la texture, nous n'allons pas utiliser la méthode <strong>pop_back</strong>() contrairement à ce qu'on pourrait penser. A la place, nous allons prendre un peu d'avance et imaginer que nous ayons <em>7</em><strong>7 Color Buffers</strong> à détruire. Si nous étions dans ce cas, nous n'appellerions pas la même méthode <em><strong>7</strong></em> fois d'affilé. Ce serait une perte de temps, surtout que la classe <em><strong>vector</strong></em> nous fourni une jolie méthode qui permet de vider entièrement son contenu. Cette méthode s'appelle <strong>clear</strong>().</p><p id="r-966556" data-claire-element-id="966556">Si nous l'utilisons, le tableau se videra entièrement et le programme appellera automatiquement les destructeurs de tous les objets qu'il contient. ^^</p><p id="r-966557" data-claire-element-id="966557">Donc au final, pour libérer la mémoire prise par toutes les textures, nous appellerons la méthode <strong>clear</strong>() :</p><pre id="r-966558" data-claire-element-id="966558"><code data-claire-semantic="cpp">// Vérification de l'intégrité du FBO

if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
{
    // Libération des buffers

    glDeleteFramebuffers(1, &amp;m_id);
    glDeleteRenderbuffers(1, &amp;m_depthBufferID);

    m_colorBuffers.clear();
}</code></pre><p id="r-966559" data-claire-element-id="966559">Maintenant, tous nos objets sont détruits proprement et la mémoire est libérée.</p><p id="r-966560" data-claire-element-id="966560">Il ne reste plus qu'à afficher un message d'erreur pour conclure le tout et renvoyer la valeur <strong>false</strong> :</p><pre id="r-966561" data-claire-element-id="966561"><code data-claire-semantic="cpp">// Vérification de l'intégrité du FBO

if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
{
    // Libération des buffers

    glDeleteFramebuffers(1, &amp;m_id);
    glDeleteRenderbuffers(1, &amp;m_depthBufferID);

    m_colorBuffers.clear();


    // Affichage d'un message d'erreur et retour de la valeur false

    std::cout &lt;&lt; &quot;Erreur : le FBO est mal construit&quot; &lt;&lt; std::endl;

    return false;
}</code></pre><p id="r-966562" data-claire-element-id="966562">Si on récapitule toute notre méthode <strong>charger</strong>() :</p><pre id="r-966563" data-claire-element-id="966563"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Vérification d'un éventuel ancien FBO

    if(glIsFramebuffer(m_id) == GL_TRUE)
    {
        glDeleteFramebuffers(1, &amp;m_id);
    }


    // Génération d'un id

    glGenFramebuffers(1, &amp;m_id);


    // Verrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, m_id);


        // Création du Color Buffer

        Texture colorBuffer(m_largeur, m_hauteur, GL_RGBA, GL_RGBA, true);
        colorBuffer.chargerTextureVide();


        // Ajout au tableau

        m_colorBuffers.push_back(colorBuffer);


        // Création du Depth et du Stencil Buffer

        creerRenderBuffer(m_depthBufferID, GL_DEPTH24_STENCIL8);


        // Association du Color Buffer

        glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, m_colorBuffers[0].getID(), 0);


        // Association du Depth et du Stencil Buffer

        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_STENCIL_ATTACHMENT, GL_RENDERBUFFER, m_depthBufferID);


        // Vérification de l'intégrité du FBO

        if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
        {
            // Libération des buffers

            glDeleteFramebuffers(1, &amp;m_id);
            glDeleteRenderbuffers(1, &amp;m_depthBufferID);

            m_colorBuffers.clear();


            // Affichage d'un message d'erreur et retour de la valeur false

            std::cout &lt;&lt; &quot;Erreur : le FBO est mal construit&quot; &lt;&lt; std::endl;

            return false;
        }
  

    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);
}</code></pre><p id="r-966564" data-claire-element-id="966564">Il ne manque plus que la touche finale : le renvoi de la valeur <strong>true</strong> pour indiquer que tout s'est bien passé (tant que la condition précédente n'a pas été déclenchée) :</p><pre id="r-966565" data-claire-element-id="966565"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Création du FBO + Vérification

    ....


    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);


    // Si tout s'est bien passé, on renvoie la valeur true

    return true;
}</code></pre><p id="r-966566" data-claire-element-id="966566">Cette fois, nous avons enfin terminé tout le codage des <strong>Frame Buffer</strong>. :D Nous avons créé tout ce dont ils avaient besoin pour fonctionner. Nous avons même inclus un code de vérification en cas d'erreur.</p><p id="r-966567" data-claire-element-id="966567">On passe maintenant aux derniers détails à régler avant d'utiliser notre premier <strong>FBO</strong> dans une scène 3D. :D</p><h2 id="r-petit-rajout" data-claire-element-id="966576">Petit rajout</h2><p id="r-966570" data-claire-element-id="966570">On commence tout de suite les petits détails par la première vérification de la méthode <strong>charger</strong>(), celle qui concerne le cas des double chargements. Je vous avais demandé de rajouter des accolades à votre bloc <strong>if</strong> car nous allions rajouter quelques lignes de code :</p><pre id="r-966571" data-claire-element-id="966571"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Vérification d'un éventuel ancien FBO

    if(glIsFramebuffer(m_id) == GL_TRUE)
    {
        glDeleteFramebuffers(1, &amp;m_id);
    }


    // Génération d'un id

    ....
}</code></pre><p id="r-966572" data-claire-element-id="966572">Les lignes de code concernées sont en fait celles qui permettent de détruire tous les objets OpenGL. Le but de cette vérification est de nettoyer un éventuel ancien chargement, il faut donc penser à détruire tous les objets qui étaient présents avant.</p><p id="r-966573" data-claire-element-id="966573">Cependant, nous n'ajouterons que la destruction des <strong>Colors Buffers</strong> car les <strong>Render Buffers</strong> sont détruits automatiquement au début de la méthode <strong>creerRenderBuffer</strong>(). Il est donc inutile de les détruire une seconde fois. ;)</p><p id="r-966574" data-claire-element-id="966574">Donc au final, nous n'ajoutons que l'appel à la méthode <strong>clear</strong>() pour l'attribut <strong>m_colorBuffers</strong> :</p><pre id="r-966575" data-claire-element-id="966575"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Vérification d'un éventuel ancien FBO

    if(glIsFramebuffer(m_id) == GL_TRUE)
    {
        // Destruction du Frame Buffer

        glDeleteFramebuffers(1, &amp;m_id);


        // Libération des Color Buffers

        m_colorBuffers.clear();
    }


    // Génération d'un id

    ....
}</code></pre><h2 id="r-le-destructeur-9" data-claire-element-id="966579">Le destructeur</h2><p id="r-966577" data-claire-element-id="966577">Contrairement au début du chapitre, le destructeur va enfin pouvoir se remplir un peu pour lui permettre de détruire tous les objets OpenGL. Pour nous faciliter la vie en plus, nous allons faire les faignants et reprendre le code de destruction que nous déjà avons fait au moment de vérifier l'intégrité du <strong>FBO</strong>. :p En effet, ce code-la détruit proprement les différents objets OpenGL utilisés, à savoir tous les <strong>Color Buffers</strong>, le <strong>double Render Buffer</strong> (<strong>Depth</strong> et <strong>Stencil</strong>) et le <strong>FBO</strong> en lui-même pour finir :</p><pre id="r-966578" data-claire-element-id="966578"><code data-claire-semantic="cpp">FrameBuffer::~FrameBuffer()
{
    // Destruction des buffers

    glDeleteFramebuffers(1, &amp;m_id);
    glDeleteRenderbuffers(1, &amp;m_depthBufferID);

    m_colorBuffers.clear();
}</code></pre><h2 id="r-quelques-getters" data-claire-element-id="966591">Quelques getters</h2><p id="r-966580" data-claire-element-id="966580">On termine cette partie avec quelques getters qui nous serviront à manipuler nos <strong>FBO</strong> sans problème. Nous en aurons exactement besoin de quatre : le premier permettra de récupérer l'identifiant du <strong>FBO</strong>, le deuxième permettra de récupérer ceux des différents <strong>Color Buffer</strong> et les deux derniers s'occuperont de renvoyer la largeur et la hauteur. Voici leur prototype :</p><pre id="r-966581" data-claire-element-id="966581"><code data-claire-semantic="cpp">GLuint getID() const;
GLuint getColorBufferID(unsigned int index) const;

int getLargeur() const;
int getHauteur() const;</code></pre><aside id="r-966583" data-claire-element-id="966583" data-claire-semantic="information"><p id="r-966582" data-claire-element-id="966582">Remarquez que le second getter prend en paramètre une variable de type <em><strong>unsigned int</strong></em> qui permettra de récupérer un <strong>Color Buffer</strong> dans le tableau-attribut <strong>m_colorBuffers</strong>.</p></aside><p id="r-966584" data-claire-element-id="966584">L'implémentation de la première méthode se passe de commentaire, il suffit de renvoyer la valeur de l'attribut <strong>m_id</strong> :</p><pre id="r-966585" data-claire-element-id="966585"><code data-claire-semantic="cpp">GLuint FrameBuffer::getID() const
{
    return m_id;
}</code></pre><p id="r-966586" data-claire-element-id="966586">Au niveau de la seconde méthode, on ne peut pas se contenter de renvoyer l'attribut <strong>m_colorBuffers</strong> car cela casserait la règle de l'encapsulation (il ne faut pas pouvoir accéder à un attribut en dehors de sa classe d'origine). A la place, nous allons utiliser un index pour récupérer une texture dans ce tableau et appeler ensuite sa propre méthode <strong>getID</strong>(). De cette façon, on peut renvoyer l'identifiant du <strong>Color Buffer</strong> souhaité sans avoir à accéder directement à l'attribut <strong>m_colorBuffers</strong> en dehors de la classe. :)</p><pre id="r-966587" data-claire-element-id="966587"><code data-claire-semantic="cpp">GLuint FrameBuffer::getColorBufferID(unsigned int index) const
{
    return m_colorBuffers[index].getID();
}</code></pre><p id="r-966588" data-claire-element-id="966588">Les deux derniers getters renverront simplement les attributs <strong>m_largeur</strong> et <strong>m_hauteur</strong> :</p><pre id="r-966589" data-claire-element-id="966589"><code data-claire-semantic="cpp">int FrameBuffer::getLargeur() const
{
    return m_largeur;
}

int FrameBuffer::getHauteur() const
{
    return m_hauteur;
}</code></pre><p id="r-966590" data-claire-element-id="966590">Grâce à ces getters, nous pourrons utiliser nos <strong>FBO</strong> facilement. ^^ Et c'est justement ce que nous allons faire maintenant.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
<span class="arrow"></span>
<span class="next">Les Render Buffers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
<span class="next">Utilisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisation"></a><h2>Utilisation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
<span class="arrow"></span>
<span class="next">Le Frame Buffer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
<span class="next">Améliorations simples</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-quelques-explications-8" data-claire-element-id="966616">Quelques explications</h2><p id="r-966593" data-claire-element-id="966593">Après toutes les péripéties des précédentes parties, nous allons pouvoir nous reposer un peu. L'utilisation des <strong>FBO</strong> est une chose assez simple si on la compare à la configuration car il n'y a pas grand chose à faire.</p><p id="r-966594" data-claire-element-id="966594">L'objectif de cette partie va être de faire un rendu d'une caisse à l'intérieur d'un carré, que l'on peut comparer un à second écran :</p><figure id="r-966596" data-claire-element-id="966597"><img id="r-966595" data-claire-element-id="966595" src="medias/uploads.siteduzero.com_files_421001_422000_421414.png" alt="Image utilisateur"/></figure><p id="r-966598" data-claire-element-id="966598">Avec ceci, nous ne verrons plus la caisse comme un modèle 3D mais comme une simple image sur un écran de télévision. Nous ajouterons même une petite rotation pour prouver que le rendu se fait en temps réel.</p><p id="r-966599" data-claire-element-id="966599">Mais avant cela, nous allons voir ensemble quelques notions relatives à l'utilisation des <strong>FBO</strong>. Elles ne sont pas compliquées à comprendre mais il faut mieux les voir pour éviter d'être surpris par certains points plus tard.</p><h3 id="r-les-passes-1" data-claire-element-id="966605">Les passes</h3><p id="r-966600" data-claire-element-id="966600">La première chose à savoir à propos de l'utilisation des <strong>FBO</strong> c'est qu'elle est axée autour de deux étapes, ou de deux <em><strong>passes</strong></em>.</p><p id="r-966601" data-claire-element-id="966601">La première <strong><em>passe</em></strong> consiste à effectuer le rendu de ce qui se trouvera dans le <strong>FBO</strong>. Dans notre cas, ce serait uniquement une caisse. Si nous voulions faire une caméra de sécurité, il y aurait une salle, des personnages, des bureaux, etc. En gros tout ce qui se trouve dans le champ de vision de la caméra.</p><p id="r-966602" data-claire-element-id="966602">Tous ces rendus ne s'affichent pas sur l'écran évidemment mais dans le <strong>Color Buffer</strong> du <strong>FBO</strong> qui est une simple texture en deux dimensions.</p><p id="r-966603" data-claire-element-id="966603">La seconde <em><strong>passe</strong></em> quant à elle consiste à faire le rendu &quot;<em>normal</em>&quot; de la scène 3D, exactement comme nous l'avons toujours fait jusque là. La seule différence sera l'ajout d'un carré, ou tout autre surface, sur laquelle nous afficherons la texture du <strong>FBO</strong>. Pour reprendre l'exemple de la caméra, nous ajouterions une carré représentant une télévision quelque part dans notre scène sur laquelle viendrait s'afficher le rendu du <strong>FBO</strong>. Nous pourrions ainsi observer ce qui se trouve dans une salle tout en étant à un autre endroit.</p><p id="r-966604" data-claire-element-id="966604">Bien entendu, nous pouvons faire beaucoup plus de choses, notamment des ajouts d'effets sur la texture, mais vous avez au moins un aperçu de ce que sont les <strong>passes</strong>.</p><h3 id="r-la-resolution-d-un-fbo" data-claire-element-id="966612">La résolution d'un FBO</h3><p id="r-966606" data-claire-element-id="966606">La résolution des <strong>FBO</strong> est notion importante à prendre en compte car elle impacte directement les performances de votre application.</p><p id="r-966607" data-claire-element-id="966607">Il faut savoir qu'un <strong>FBO</strong> fera très rarement la taille de votre véritable écran. Il est tout à fait possible de procéder ainsi mais les ressources consommées seront trop importantes du fait des deux passes. C'est comme si vous travailliez avec des textures de 2048x2048 ...</p><p id="r-966608" data-claire-element-id="966608">Le choix de la résolution dépend de ce que vous voulez faire avec votre <strong>FBO</strong>. Un effet de miroir demandera plus de précision qu'un effet de flou par exemple. Il faudra jauger en fonction des situations.</p><aside id="r-966610" data-claire-element-id="966610" data-claire-semantic="information"><p id="r-966609" data-claire-element-id="966609">Sachez que les options graphiques dans les jeux-vidéo permettent de déterminer cette précision (Qualité des ombres, des reflets, etc.)</p></aside><p id="r-966611" data-claire-element-id="966611">Dans ce cas, nous utiliserons une résolution de 512x512. Cela nous rapprochera du pack de textures que nous utilisons.</p><h3 id="r-les-matrices-11" data-claire-element-id="966615">Les matrices</h3><p id="r-966613" data-claire-element-id="966613">Étant donné que nous avons deux affichages différents, nous allons devoir utiliser deux couples de matrices différents. Nous aurons ainsi une matrice <strong>projection</strong> et <strong>modelview</strong> dédiées à la première passe, et un autre couple pour le rendu normal.</p><p id="r-966614" data-claire-element-id="966614">Même si l'on fait deux fois le même affichage il vaut mieux séparer les matrices, en particulier la matrice <strong>projection</strong> car c'est elle qui gère la résolution finale. Souvenez-vous de ce que fait sa méthode <strong>perspective</strong>().</p><h2 id="r-premiere-utilisation-5" data-claire-element-id="966742">Première utilisation</h2><p id="r-966617" data-claire-element-id="966617">Après ces petites explications, nous pouvons passer à la pratique. Le but est d'afficher une caisse dans une sorte de télé, nous allons le faire en faisant attention aux quelques points que nous avons vus à l'instant.</p><h3 id="r-creation-du-fbo" data-claire-element-id="966621">Création du FBO</h3><p id="r-966618" data-claire-element-id="966618">Premièrement, nous allons reprendre le code du dernier chapitre et ajouter quelques lignes de code pour créer notre <strong>FBO</strong>. Celui-ci sera contenu dans un objet <em><strong>FrameBuffer</strong></em> et sa résolution de 512x512 pixels :</p><pre id="r-966619" data-claire-element-id="966619"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Frame Buffer

    FrameBuffer frameBuffer(512, 512);
    frameBuffer.charger();


    // Matrices

    ....
}</code></pre><p id="r-966620" data-claire-element-id="966620">N'oubliez pas d'inclure le header <strong>FrameBuffer.h</strong> pour ne pas avoir d'erreur au moment de la compilation. N'oubliez pas non plus d'appeler la méthode <strong>charger</strong>().</p><h3 id="r-les-matrices-12" data-claire-element-id="966629">Les matrices</h3><p id="r-966622" data-claire-element-id="966622">Maintenant que le <strong>FBO</strong> est créé, nous pouvons passer à la création du second couple de matrices, celles qui seront dédiées à la première passe. Ces matrices porteront quasiment le même nom que celles que nous avons l'habitude de manipuler :</p><pre id="r-966623" data-claire-element-id="966623"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Frame Buffer

    FrameBuffer frameBuffer(512, 512);
    frameBuffer.charger();


    // Matrices (première passe)

    mat4 projectionFBO, modelviewFBO;

    ....
}</code></pre><p id="r-966624" data-claire-element-id="966624">L'initialisation de ces matrices sera elle-aussi quasiment identique. La seule chose qui va différer dans cette initialisation c'est le rapport des pixels pour la matrice de projection (le <strong>ratio</strong>).</p><p id="r-966625" data-claire-element-id="966625">De base, celui-ci est relatif à la taille de votre fenêtre, tout dépend de ce que vous avez mis avant. Cependant le rendu de la première passe s'effectue dans le <strong>FBO</strong>, le rapport doit donc est relatif à la taille de ce dernier. Vu que nous avons spécifié une taille de 512x512 pixels, le rapport sera donc de <strong>512 / 512</strong>. Nous utiliserons les getters sur la largeur et la hauteur du <strong>FBO</strong> pour avoir accès à ces valeurs, ce qui sera utile en cas de changement de ces dimensions :</p><pre id="r-966626" data-claire-element-id="966626"><code data-claire-semantic="cpp">// Matrices (première passe)

mat4 projectionFBO;
mat4 modelviewFBO;


// Initialisation

projectionFBO = perspective(70.0, (double)frameBuffer.getLargeur() / frameBuffer.getHauteur(), 1.0, 100.0);
modelviewFBO = mat4(1.0);</code></pre><p id="r-966627" data-claire-element-id="966627">Si vous vous posez la question, sachez que l'autre couple de matrices n'a pas besoin d'être modifié, elles sont très bien comme ça. :)</p><pre id="r-966628" data-claire-element-id="966628"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Frame Buffer

    FrameBuffer frameBuffer(512, 512);
    frameBuffer.charger();


    // Matrices (première passe)

    mat4 projectionFBO;
    mat4 modelviewFBO;

    projectionFBO = perspective(70.0, (double)frameBuffer.getLargeur() / frameBuffer.getHauteur(), 1.0, 100.0);
    modelviewFBO = mat4(1.0);


    // Matrices (seconde passe)

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);



    // Caméra

    ....
}</code></pre><h3 id="r-la-premiere-passe" data-claire-element-id="966681">La première passe</h3><p id="r-966630" data-claire-element-id="966630">Tous nos objets sont maintenant en place, il ne manque plus qu'à passer aux deux passes. Dans la première, nous allons juste afficher une caisse dans le <strong>FBO</strong>. Créez donc, si ce n'est déjà fait, un objet <em><strong>Caisse</strong></em>. Ajoutez également une variable de type <em><strong>float</strong></em>, elle nous permettra de le faire pivoter sur lui-même :</p><pre id="r-966631" data-claire-element-id="966631"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Frame Buffer, Matrices et Caméra

    ....


    // Objet Caisse

    Caisse caisse(2.0, &quot;Shaders/textureMVP.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Caisse2.jpg&quot;);
    caisse.charger();

    float angle = 0.0;


    // Boucle principale 

    ....
}</code></pre><aside id="r-966633" data-claire-element-id="966633" data-claire-semantic="warning"><p id="r-966632" data-claire-element-id="966632">La classe <em><strong>Caisse</strong></em> a été modifiée dans le chapitre précédent pour gérer l'envoi de la matrice <strong>modelviewProjection</strong> et non les matrices <strong>projection</strong> et <strong>modelview</strong> séparément. Si vous n'avez pas modifié les classes <em><strong>Caisse</strong></em> et <em><strong>Cube</strong></em> et bien faites-le ( :p ) ou donnez le shader &quot;<strong>texture.vert</strong>&quot; à votre objet et non &quot;<strong>textureMVP.vert</strong>&quot;.</p></aside><p id="r-966634" data-claire-element-id="966634">Étant donné que les <strong>FBO</strong> se comportent comme des écrans, nous n'avons pas à modifier notre manière d'effectuer nos rendus. Il nous faut toujours nettoyer les buffers avec la fonction <strong>glClear</strong>(), repositionner la caméra, etc. La seule chose qui ne sera pas présente ce sera la <em>limitation Frame Rate </em>qui elle concerne l'application entière et pas juste un <strong>FBO</strong>.</p><p id="r-966635" data-claire-element-id="966635">Pour être plus précis, nous devons :</p><ul id="r-966644" data-claire-element-id="966644"><li id="r-966637" data-claire-element-id="966637"><p id="r-966636" data-claire-element-id="966636">Nettoyer les buffers</p></li><li id="r-966639" data-claire-element-id="966639"><p id="r-966638" data-claire-element-id="966638">Ré-initialiser la matrice <strong>modelview</strong></p></li><li id="r-966641" data-claire-element-id="966641"><p id="r-966640" data-claire-element-id="966640">Replacer la caméra</p></li><li id="r-966643" data-claire-element-id="966643"><p id="r-966642" data-claire-element-id="966642">Afficher la caisse, rotation comprise</p></li></ul><p id="r-966645" data-claire-element-id="966645">Nous avons déjà vu ce code pas mal de fois, je passerai donc les explications pour celui-ci. ^^ Faites juste attention à utiliser les matrices réservées au <strong>FBO</strong>.</p><pre id="r-966646" data-claire-element-id="966646"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // Gestion des évènements

    ....


  
    /* ***** Première passe ***** */


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


    // Placement de la caméra

    modelviewFBO = lookAt(vec3(3, 0, 3), vec3(0, 0, 0), vec3(0, 1, 0));


    // Gestion de la rotation de la caisse

    angle += 2;

    if(angle &gt; 360)
        angle -= 360;


    mat4 sauvegardeModelviewFBO = modelviewFBO;

            modelviewFBO = rotate(modelviewFBO, angle, vec3(0, 1, 0));
            caisse.afficher(projectionFBO, modelviewFBO);

    modelviewFBO = sauvegardeModelviewFBO;


    // Actualisation de la fenêtre

    ....
}</code></pre><p id="r-966647" data-claire-element-id="966647">Remarquez ici que l'on n'utilise pas la caméra mobile, on se place au niveau d'un point fixe. Si nous faisons cela, c'est pour éviter que le contenu du <strong>FBO</strong> ne change en fonction des mouvements de la caméra. Si vous faites un test avec elle, vous remarquez que votre cube n'apparait qu'à certains endroits car votre point de vue est modifié en permanence.</p><div id="r-966649" data-claire-element-id="966649" data-claire-semantic="question"><p id="r-966648" data-claire-element-id="966648">Mais si on ne change rien ce code, le rendu va se faire sur l'écran non ?</p></div><p id="r-966650" data-claire-element-id="966650">Oui évidemment si on ne dit rien à OpenGL il va comprendre qu'il doit tout afficher sur l'écran.</p><p id="r-966651" data-claire-element-id="966651">Pour lui dire d'utiliser le <strong>FBO</strong>, nous allons devoir ajouter deux choses :</p><ul id="r-966656" data-claire-element-id="966656"><li id="r-966653" data-claire-element-id="966653"><p id="r-966652" data-claire-element-id="966652">Premièrement, nous allons devoir encadrer toutes les étapes précédentes par le verrouillage du <strong>FBO</strong> que l'on veut remplir. Il faudra donc appeler la fonction <strong>glBindFramebuffer</strong>() juste avant l'appel à <strong>glClear</strong>() et une autre fois après avoir affiché tous nos objets.</p></li><li id="r-966655" data-claire-element-id="966655"><p id="r-966654" data-claire-element-id="966654">Ensuite, nous allons redimensionner <strong><em>virtuellement</em></strong> la fenêtre, ou plutôt le contexte OpenGL. Nous devons faire cela car celui-ci considère toujours qu'il est dans une fenêtre dont les dimensions sont celles que nous avons spécifiées au début du programme. Une petite fonction lui permettra de redimensionner son espace d'affichage pour correspondre aux dimensions du <strong>FBO</strong>.</p></li></ul><p id="r-966657" data-claire-element-id="966657">Le verrouillage va être très simple à faire car il nous suffit d'appeler la fonction <strong>glBindFramebuffer</strong>() au début et à la fin de l'affichage de la première passe :</p><pre id="r-966658" data-claire-element-id="966658"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // Gestion des évènements

    ....


  
    /* ***** Première passe ***** */


    // Verrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer.getID());


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


        // Placement de la caméra

        modelviewFBO = lookAt(vec3(3, 0, 3), vec3(0, 0, 0), vec3(0, 1, 0));


        // Gestion de la rotation de la caisse

        angle += 2;

        if(angle &gt; 360)
            angle -= 360;


        // Affichage de la caisse

        mat4 sauvegardeModelviewFBO = modelviewFBO;

            modelviewFBO = rotate(modelviewFBO, angle, vec3(0, 1, 0));
            caisse.afficher(projectionFBO, modelviewFBO);

        modelviewFBO = sauvegardeModelviewFBO;


    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);


    // Actualisation de la fenêtre

    ....
}</code></pre><p id="r-966659" data-claire-element-id="966659">Le redimensionnement de la fenêtre est une notion qui peut vous paraitre un peu bizarre, mais pour vous donner un exemple voici ce qui se passerait si nous ne faisions pas cette étape :</p><figure id="r-966661" data-claire-element-id="966662"><img id="r-966660" data-claire-element-id="966660" src="medias/uploads.siteduzero.com_files_421001_422000_421415.png" alt="Image utilisateur"/></figure><p id="r-966663" data-claire-element-id="966663">Dans ce cas, <strong>OpenGL</strong> et le <strong>FBO</strong> ne travaillent pas avec les mêmes dimensions, la caisse peut se retrouver alors déformée, tronquée, ou je ne sais quoi d'autre.</p><p id="r-966664" data-claire-element-id="966664">Pour éviter cela, nous allons dire à OpenGL de travailler temporairement avec les dimensions du <strong>FBO</strong> (512x512 ici). Ceci se fait grâce à la fonction <strong>glViewport</strong>() :</p><pre id="r-966665" data-claire-element-id="966665"><code data-claire-semantic="cpp">void glViewport(GLint x, GLint y, GLsizei width, GLsizei height);</code></pre><ul id="r-966674" data-claire-element-id="966674"><li id="r-966667" data-claire-element-id="966667"><p id="r-966666" data-claire-element-id="966666"><strong>x</strong> : abscisse où commence le redimensionnement. Le point de coordonnées <strong>(0; 0)</strong> correspond au coin inférieur gauche de votre fenêtre</p></li><li id="r-966669" data-claire-element-id="966669"><p id="r-966668" data-claire-element-id="966668"><strong>y</strong> : ordonnée où commence le redimensionnement</p></li><li id="r-966671" data-claire-element-id="966671"><p id="r-966670" data-claire-element-id="966670"><strong>width</strong> : nouvelle largeur de la zone d'affichage</p></li><li id="r-966673" data-claire-element-id="966673"><p id="r-966672" data-claire-element-id="966672"><strong>height</strong> : nouvelle hauteur</p></li></ul><p id="r-966675" data-claire-element-id="966675">Cette fonction est à appeler juste après la fonction de nettoyage <strong>glClear</strong>() :</p><pre id="r-966676" data-claire-element-id="966676"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // Gestion des évènements

    ....



    /* ***** Première passe ***** */


    // Verrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer.getID());


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


        // Redimensionnement de la zone d'affichage

        glViewport(0, 0, frameBuffer.getLargeur(), frameBuffer.getHauteur());


        // Placement de la caméra

        modelviewFBO = lookAt(vec3(3, 0, 3), vec3(0, 0, 0), vec3(0, 1, 0));


        // Gestion de la rotation de la caisse

        angle += 2;

        if(angle &gt; 360)
            angle -= 360;


        // Affichage de la caisse

        mat4 sauvegardeModelviewFBO = modelviewFBO;

            modelviewFBO = rotate(modelviewFBO, angle, vec3(0, 1, 0));
            caisse.afficher(projectionFBO, modelviewFBO);

        modelviewFBO = sauvegardeModelviewFBO;


    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);


    // Actualisation de la fenêtre

    ....
}</code></pre><aside id="r-966678" data-claire-element-id="966678" data-claire-semantic="information"><p id="r-966677" data-claire-element-id="966677">Vu que nous avons redimensionné l'espace de travail d'OpenGL ici, nous allons devoir refaire la même chose pour le rendu normal.</p></aside><p id="r-966679" data-claire-element-id="966679">Si tout s'est bien passé jusque là, vous devriez avoir le rendu de votre caisse à l'intérieur de votre <strong>FBO</strong>, et plus précisément à l'intérieur de la <em>texture</em> qu'est le <strong>Color Buffer</strong>.</p><p id="r-966680" data-claire-element-id="966680">Si vous pensez qu'il y a trop de choses à apprendre, ne vous inquiétez pas nous allons faire un point récapitulatif à la fin de cette partie. ^^</p><h3 id="r-la-seconde-passe" data-claire-element-id="966702">La seconde passe</h3><p id="r-966682" data-claire-element-id="966682">La seconde passe est la dernière étape d'implémentation d'un <strong>FBO</strong>, elle consiste simplement à afficher le contenu de son <strong>Color Buffer</strong> sur une surface. Si vous avez une scène 3D, c'est le moment de l'afficher également.</p><p id="r-966683" data-claire-element-id="966683">Il n'y a pas de nouvelles notions à apprendre ici, il faut effectuer le rendu comme d'habitude. Le seul petit ajout sera le redimensionnement de la zone d'affichage qui est réduite à 512x512 pour le moment. Il faudra remettre les dimensions de la fenêtre SDL.</p><p id="r-966684" data-claire-element-id="966684">Pour commencer, nous allons afficher un carré qui accueillera la texture du <strong>FBO</strong>. Ajoutez donc le code suivant après déclaré la caisse. Je passe un peu son explication, le chapitre est assez dense comme ça, il permet juste d'afficher un carré avec une gestion des <strong>VBO/VAO</strong>. Les coordonnées de textures sont également présentes, elles permettront de faire le lien avec la texture du <strong>FBO</strong>.</p><pre id="r-966685" data-claire-element-id="966685"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Frame Buffer, Matrices et Caméra

    ....


    // Objet Caisse

    ...


    // Vertices

    float vertices[] = {0, 0, 0,   4, 0, 0,   4, 4, 0,     // Triangle 1
    			0, 0, 0,   0, 4, 0,   4, 4, 0};    // Triangle 2

    float coordTexture[] = {0, 0,   1, 0,   1, 1,          // Triangle 1
			    0, 0,   0, 1,   1, 1};         // Triangle 2



    /* ***** Gestion du VBO ***** */

    GLuint vbo;
    int tailleVerticesBytes = 18 * sizeof(float);
    int tailleCoordTextureBytes = 12 * sizeof(float);


    // Génération du VBO

    glGenBuffers(1, &amp;vbo);


    // Verrouillage

    glBindBuffer(GL_ARRAY_BUFFER, vbo);

	// Remplissage

	glBufferData(GL_ARRAY_BUFFER, tailleVerticesBytes + tailleCoordTextureBytes, 0, GL_STATIC_DRAW);
	glBufferSubData(GL_ARRAY_BUFFER, 0, tailleVerticesBytes, vertices);
	glBufferSubData(GL_ARRAY_BUFFER, tailleVerticesBytes, tailleCoordTextureBytes, coordTexture);


    // Déverrouillage

    glBindBuffer(GL_ARRAY_BUFFER, 0);


    /* ***** Gestion du VAO ***** */

    GLuint vao;


    // Génération du VAO

    glGenVertexArrays(1, &amp;vao);


    // Verrouillage du VAO

    glBindVertexArray(vao);

	// Verrouillage du VBO

	glBindBuffer(GL_ARRAY_BUFFER, vbo);


		// Vertex Attrib 0 (Vertices)

		glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
		glEnableVertexAttribArray(0);


		 // Vertex Attrib 0 (Vertices)

		glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(tailleVerticesBytes));
		glEnableVertexAttribArray(2);


	// Déverrouillage du VBO

	glBindBuffer(GL_ARRAY_BUFFER, 0);


    // Déverrouillage du VAO

    glBindVertexArray(0);


    // Shader

    Shader shaderTexture(&quot;Shaders/textureMVP.vert&quot;, &quot;Shaders/texture.frag&quot;);
    shaderTexture.charger();


    // Boucle principale

    while(!m_input.terminer())
    {
        ....
    }
}</code></pre><p id="r-966686" data-claire-element-id="966686">Dans le prochain chapitre, nous créerons une classe dédiée pour les carrés. Cela évitera d'avoir à inclure des gros bouts de code comme celui-là. :)</p><p id="r-966687" data-claire-element-id="966687">Une fois le carré déclaré, il me manque plus qu'à l'afficher. Pour cela nous allons répéter les mêmes opérations d'affichage que l'on a l'habitude de faire, à savoir:</p><ul id="r-966698" data-claire-element-id="966698"><li id="r-966689" data-claire-element-id="966689"><p id="r-966688" data-claire-element-id="966688">Activer le shader</p></li><li id="r-966691" data-claire-element-id="966691"><p id="r-966690" data-claire-element-id="966690">Verrouiller le <strong>VAO</strong></p></li><li id="r-966693" data-claire-element-id="966693"><p id="r-966692" data-claire-element-id="966692">Envoyer les matrices</p></li><li id="r-966695" data-claire-element-id="966695"><p id="r-966694" data-claire-element-id="966694">Verrouiller la texture</p></li><li id="r-966697" data-claire-element-id="966697"><p id="r-966696" data-claire-element-id="966696">Afficher le tout</p></li></ul><pre id="r-966699" data-claire-element-id="966699"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // Gestion des évènements

    ....



    /* ***** Première passe ***** */


    ....



    /* ***** Seconde passe ***** */


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


    // Gestion de la caméra

    camera.lookAt(modelview);


    // Activation du shader

    glUseProgram(shaderTexture.getProgramID());


	// Verrouillage du VAO

	glBindVertexArray(vao);

	
	    // Envoi des matrices

            shaderTexture.envoyerMat4(&quot;modelviewProjection&quot;, projection * modelview);


	    // Verrouillage de la texture

	    glBindTexture(GL_TEXTURE_2D, frameBuffer.getColorBufferID(0));


		// Rendu

		glDrawArrays(GL_TRIANGLES, 0, 6);

		
	    // Déverrouillage de la texture

            glBindTexture(GL_TEXTURE_2D, 0);
	

        // Verrouillage du VAO

        glBindVertexArray(0);


    // Désactivation du shader

    glUseProgram(0);


    // Gestion du Frame Rate

    ....
}</code></pre><p id="r-966700" data-claire-element-id="966700">N'oublions pas la touche finale qui consiste à redimensionner de la zone d'affichage. Nous utiliserons les attributs <strong>m_largeurFenetre</strong> et <strong>m_hauteurFenetre</strong> avec la fonction <strong>glViewport</strong>() pour régler ce petit détail :</p><pre id="r-966701" data-claire-element-id="966701"><code data-claire-semantic="cpp">/* ***** Seconde passe ***** */


// Nettoyage de l'écran

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


// Redimensionnement de la zone d'affichage

glViewport(0, 0, m_largeurFenetre, m_hauteurFenetre);


// Gestion de la caméra

camera.lookAt(modelview);</code></pre><h3 id="r-recapitulatif-de-la-methode-boucleprincipale" data-claire-element-id="966741">Récapitulatif de la méthode bouclePrincipale()</h3><p id="r-966703" data-claire-element-id="966703">La méthode <strong>bouclePrincipale</strong>() accueille pas mal de code en ce moment, nous allons tout récapituler pour être sûr qu'il ne vous manque pas un bout quelque part.</p><p id="r-966704" data-claire-element-id="966704">Voici les objets à déclarer au début de votre méthode (attention au <strong>shader de la caisse</strong> je le répète ;) ) :</p><pre id="r-966705" data-claire-element-id="966705"><code data-claire-semantic="cpp">void SceneOpenGL::bouclePrincipale()
{
    // Variables

    unsigned int frameRate (1000 / 50);
    Uint32 debutBoucle(0), finBoucle(0), tempsEcoule(0);


    // Frame Buffer

    FrameBuffer frameBuffer(512, 512);
    frameBuffer.charger();


    // Matrices (première passe)

    mat4 projectionFBO;
    mat4 modelviewFBO;

    projectionFBO = perspective(70.0, (double)frameBuffer.getLargeur() / frameBuffer.getHauteur(), 1.0, 100.0);
    modelviewFBO = mat4(1.0);


    // Matrices (seconde passe)

    mat4 projection;
    mat4 modelview;

    projection = perspective(70.0, (double) m_largeurFenetre / m_hauteurFenetre, 1.0, 100.0);
    modelview = mat4(1.0);


    // Caméra mobile

    Camera camera(vec3(3, 3, 3), vec3(0, 0, 0), vec3(0, 1, 0), 0.5, 0.5);
    m_input.afficherPointeur(false);
    m_input.capturerPointeur(true);


    // Objet Caisse

    Caisse caisse(2.0, &quot;Shaders/textureMVP.vert&quot;, &quot;Shaders/texture.frag&quot;, &quot;Textures/Caisse2.jpg&quot;);
    caisse.charger();

    float angle = 0.0;


    // Vertices

    float vertices[] = {0, 0, 0,   4, 0, 0,   4, 4, 0,     // Triangle 1
    			0, 0, 0,   0, 4, 0,   4, 4, 0};    // Triangle 2

    float coordTexture[] = {0, 0,   1, 0,   1, 1,          // Triangle 1
			    0, 0,   0, 1,   1, 1};         // Triangle 2


    /* ***** Gestion du VBO ***** */

    GLuint vbo;
    int tailleVerticesBytes = 18 * sizeof(float);
    int tailleCoordTextureBytes = 12 * sizeof(float);


    // Génération du VBO

    glGenBuffers(1, &amp;vbo);


    // Verrouillage

    glBindBuffer(GL_ARRAY_BUFFER, vbo);

	// Remplissage

	glBufferData(GL_ARRAY_BUFFER, tailleVerticesBytes + tailleCoordTextureBytes, 0, GL_STATIC_DRAW);
	glBufferSubData(GL_ARRAY_BUFFER, 0, tailleVerticesBytes, vertices);
	glBufferSubData(GL_ARRAY_BUFFER, tailleVerticesBytes, tailleCoordTextureBytes, coordTexture);


    // Déverrouillage

    glBindBuffer(GL_ARRAY_BUFFER, 0);


    /* ***** Gestion du VAO ***** */

    GLuint vao;


    // Génération du VAO

    glGenVertexArrays(1, &amp;vao);


    // Verrouillage du VAO

    glBindVertexArray(vao);

	// Verrouillage du VBO

	glBindBuffer(GL_ARRAY_BUFFER, vbo);


		// Vertex Attrib 0 (Vertices)

		glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));
		glEnableVertexAttribArray(0);


		 // Vertex Attrib 0 (Vertices)

		glVertexAttribPointer(2, 2, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(tailleVerticesBytes));
		glEnableVertexAttribArray(2);


	// Déverrouillage du VBO

	glBindBuffer(GL_ARRAY_BUFFER, 0);


    // Déverrouillage du VAO

    glBindVertexArray(0);


    // Shader

    Shader shaderTexture(&quot;Shaders/textureMVP.vert&quot;, &quot;Shaders/texture.frag&quot;);
    shaderTexture.charger();


    // Boucle principale

    while(!m_input.terminer())
    {
        ....
    }
}</code></pre><p id="r-966706" data-claire-element-id="966706">Et voici ce que contient la boucle principale :</p><pre id="r-966707" data-claire-element-id="966707"><code data-claire-semantic="cpp">// Boucle principale

while(!m_input.terminer())
{
    // On définit le temps de début de boucle

    debutBoucle = SDL_GetTicks();


    // Gestion des évènements

    m_input.updateEvenements();

    if(m_input.getTouche(SDL_SCANCODE_ESCAPE))
        break;

    camera.deplacer(m_input);



    /* ***** Première Passe ***** */
 

    // Verrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, frameBuffer.getID());


        // Nettoyage de l'écran

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


        // Redimensionnement de la zone d'affichage

        glViewport(0, 0, frameBuffer.getLargeur(), frameBuffer.getHauteur());


        // Placement de la caméra

        modelviewFBO = lookAt(vec3(3, 0, 3), vec3(0, 0, 0), vec3(0, 1, 0));


        // Gestion de la rotation de la caisse

        angle += 2;

        if(angle &gt; 360)
            angle -= 360;


        // Affichage de la caisse

        mat4 sauvegardeModelviewFBO = modelviewFBO;

            modelviewFBO = rotate(modelviewFBO, angle, vec3(0, 1, 0));
            caisse.afficher(projectionFBO, modelviewFBO);

        modelviewFBO = sauvegardeModelviewFBO;


    // Déverrouillage du Frame Buffer

    glBindFramebuffer(GL_FRAMEBUFFER, 0);



    /* ***** Seconde Passe ***** */


    // Nettoyage de l'écran

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);


    // Redimensionnement de la zone d'affichage

    glViewport(0, 0, m_largeurFenetre, m_hauteurFenetre);


    // Gestion de la caméra

    camera.lookAt(modelview);


    // Activation du shader

    glUseProgram(shaderTexture.getProgramID());


	// Verrouillage du VAO

	glBindVertexArray(vao);

	
	    // Envoi des matrices

            shaderTexture.envoyerMat4(&quot;modelviewProjection&quot;, projection * modelview);


	    // Verrouillage de la texture

	    glBindTexture(GL_TEXTURE_2D, frameBuffer.getColorBufferID(0));


		// Rendu

		glDrawArrays(GL_TRIANGLES, 0, 6);

		
	    // Déverrouillage de la texture

            glBindTexture(GL_TEXTURE_2D, 0);
	

        // Verrouillage du VAO

        glBindVertexArray(0);


    // Désactivation du shader

    glUseProgram(0);


    // Actualisation de la fenêtre

    SDL_GL_SwapWindow(m_fenetre);


    // Calcul du temps écoulé

    finBoucle = SDL_GetTicks();
    tempsEcoule = finBoucle - debutBoucle;


    // Si nécessaire, on met en pause le programme

    if(tempsEcoule &lt; frameRate)
        SDL_Delay(frameRate - tempsEcoule);
}</code></pre><p id="r-966708" data-claire-element-id="966708">Si vous êtes prêts, vous pouvez compiler tout ça pour voir ce que cela donne. :D</p><figure id="r-966710" data-claire-element-id="966711"><img id="r-966709" data-claire-element-id="966709" src="medias/uploads.siteduzero.com_files_421001_422000_421416.png" alt="Image utilisateur"/></figure><div id="r-966713" data-claire-element-id="966713" data-claire-semantic="question"><p id="r-966712" data-claire-element-id="966712">C'est un peu bizarre ton truc on ne voit pas grand chose. :(</p></div><p id="r-966714" data-claire-element-id="966714">Bon j'avoue, on ne voit pas grand chose.</p><p id="r-966715" data-claire-element-id="966715">On va ajouter un appel à la fonction <strong>glClearColor</strong>() juste avant d'appeler <strong>glClear</strong>() au niveau de la première passe. Cette fonction permet de donner une couleur par défaut à votre affichage au moment où les buffers sont nettoyés :</p><pre id="r-966716" data-claire-element-id="966716"><code data-claire-semantic="cpp">void glClearColor(GLfloat red, GLfloat green, GLfloat blue, GLfloat alpha)</code></pre><ul id="r-966725" data-claire-element-id="966725"><li id="r-966718" data-claire-element-id="966718"><p id="r-966717" data-claire-element-id="966717"><strong>red</strong> : composante rouge de la couleur par défaut</p></li><li id="r-966720" data-claire-element-id="966720"><p id="r-966719" data-claire-element-id="966719"><strong>green</strong> : composante verte</p></li><li id="r-966722" data-claire-element-id="966722"><p id="r-966721" data-claire-element-id="966721"><strong>blue</strong> : composante bleue</p></li><li id="r-966724" data-claire-element-id="966724"><p id="r-966723" data-claire-element-id="966723"><strong>alpha</strong> : composante alpha</p></li></ul><p id="r-966726" data-claire-element-id="966726">Appelons cette fonction dans la première passe juste avant <strong>glClear</strong>(), nous donnerons une couleur grise par défaut :</p><pre id="r-966727" data-claire-element-id="966727"><code data-claire-semantic="cpp">/* ***** Première passe ***** */


// Nettoyage de l'écran

glClearColor(0.5, 0.5, 0.5, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</code></pre><p id="r-966728" data-claire-element-id="966728">Le problème avec cette fonction est qu'elle applique la couleur par défaut à tous les <strong>FBO</strong>, écran compris. Pour remettre la couleur qu'il y avait avant il faut donc faire la même chose qu'avec <strong>glViewport</strong>() et rappeler la fonction une seconde fois au moment de la seconde passe.</p><p id="r-966729" data-claire-element-id="966729">C'est donc ce que nous allons faire en remettant cette fois la couleur noir :</p><pre id="r-966730" data-claire-element-id="966730"><code data-claire-semantic="cpp">/* ***** Seconde passe ***** */


// Nettoyage de l'écran

glClearColor(0.0, 0.0, 0.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);</code></pre><p id="r-966731" data-claire-element-id="966731">Recompilons maintenant tout cela :</p><figure id="r-966733" data-claire-element-id="966734"><img id="r-966732" data-claire-element-id="966732" src="medias/uploads.siteduzero.com_files_421001_422000_421414.png" alt="Image utilisateur"/></figure><figure id="r-966736" data-claire-element-id="966737"><img id="r-966735" data-claire-element-id="966735" src="medias/uploads.siteduzero.com_files_421001_422000_421417.png" alt="Image utilisateur"/></figure><p id="r-966738" data-claire-element-id="966738">C'est déjà un peu mieux.</p><p id="r-966739" data-claire-element-id="966739">Faites le tour de votre carré pour voir que votre caisse n'existe pas en 3D, elle est contenue dans une simple texture 2D. Grâce aux <strong>FBO</strong>, nous sommes en théorie capables d'appliquer n'importe quel effet sur cet affichage à l'aide des shaders (déformation, miroir, flou, ombre, etc.).</p><p id="r-966740" data-claire-element-id="966740">Cet exemple n'est pas bien parlant, mais le TP qui va arriver juste après ce chapitre, vous devrez ên faire une utilisation plus utile. ^^</p><h2 id="r-ce-qu-il-faut-retenir-6" data-claire-element-id="966756">Ce qu'il faut retenir</h2><p id="r-966743" data-claire-element-id="966743">Piouf, nous aurons vu pas mal de choses dans ce chapitre. Entre la création d'un <strong>FBO</strong> et son utilisation finale, il y a plein de petites notions auxquelles il faut faire attention. Nous allons résumé tout cela en quelques points pour synthétiser toute cette partie.</p><h3 id="r-les-preparatifs-1" data-claire-element-id="966747">Les préparatifs</h3><p id="r-966744" data-claire-element-id="966744">Premièrement, l'utilisation d'un <strong>FBO</strong> est divisée en deux étapes que l'on appelle <em><strong>passe</strong></em>. La première contient les éléments affichés uniquement dans le <strong>FBO</strong>. La seconde quant à elle se concentre sur l'affichage normal de la scène (plus le contenu du <strong>FBO</strong>).</p><p id="r-966745" data-claire-element-id="966745">Avant même de commencer la première passe, il faut déterminer les <em><strong>dimensions </strong></em>du <strong>FBO</strong>. Plus elles seront grandes, meilleur sera votre rendu. Cependant cela impactera sur les performances de votre application final. Il est préférable de choisir des dimensions moins importantes pour économiser au maximum vos ressources.</p><p id="r-966746" data-claire-element-id="966746">Enfin, le dernier point à retenir pour les préparatifs est la création d'un second <strong>couple de matrices</strong> spécialement dédié à la première passe. On évite ainsi d'éventuelles erreurs en rapport avec la seconde. La matrice <strong>projection</strong> doit prendre en compte le rapport des dimensions du <strong>FBO</strong> dans la méthode <strong>perspective</strong>().</p><h3 id="r-la-premiere-passe-1" data-claire-element-id="966751">La première passe</h3><p id="r-966748" data-claire-element-id="966748">La première passe commence par le verrouillage du <strong>FBO</strong> à l'aide de la fonction <strong>glBindFramebuffer</strong>(). Incluez le déverrouillage immédiatement après pour ne pas oublier de le faire.</p><p id="r-966749" data-claire-element-id="966749">Le rendu se comporte ensuite de la même façon qu'un rendu classique. Cela va de la fonction <strong>glClear</strong>(), qui permet de nettoyer les buffers du <strong>FBO</strong> jusqu'au dernier objet que vous souhaitez afficher. Petite précision importante : Il est préférable de se positionner d'un point de vu <em><strong>fixe</strong></em>, et non mobile. Préférez donc la méthode <strong>lookAt</strong>() de la matrice <strong>modelview</strong>.</p><p id="r-966750" data-claire-element-id="966750">Pensez à appeler la fonction <strong>glViewport</strong>() pour redimensionner la zone d'affichage en fonction des dimensions du <strong>FBO</strong>.</p><h3 id="r-la-seconde-passe-1" data-claire-element-id="966755">La seconde passe</h3><p id="r-966752" data-claire-element-id="966752">Le rendu de la second passe se concentre sur le rendu normal de la scène 3D. On retrouve ainsi tous les objets qui la composent, même ceux faisant partie du <strong>FBO</strong>.</p><p id="r-966753" data-claire-element-id="966753">Pensez la encore à appeler la fonction <strong>glViewport</strong>() pour redimensionner la zone d'affichage en fonction des dimensions de votre fenêtre.</p><p id="r-966754" data-claire-element-id="966754">Affichez enfin le contenu du <strong>Color Buffer</strong> du <strong>FBO</strong> sur une surface comme vous le feriez pour une texture classique.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
<span class="arrow"></span>
<span class="next">Le Frame Buffer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
<span class="next">Améliorations simples</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Amliorationssimples"></a><h2>Améliorations simples</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
<span class="arrow"></span>
<span class="next">Utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
<span class="next">Gérer plusieurs Color Buffers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-966758" data-claire-element-id="966758">Dans cette partie, nous allons faire plusieurs modifications dans notre classe <em><strong>FrameBuffer</strong></em>. Nous allons tout d'abord voir comment économiser un peu de ressources en évitant d'utiliser le <strong>Stencil Buffer</strong> lorsque l'on n'en a pas besoin. Nous implémenterons ensuite le constructeur de copie, vous savez déjà à quoi il peut bien service. ^^ Enfin, nous verrons ensemble, dans une ultime partie, comment gérer plusieurs <strong>Color Buffers</strong>. Ce sera un peu technique, je ferai donc un point récapitulatif dessus à la fin.</p><h2 id="r-eviter-la-creation-du-stencil-buffer" data-claire-element-id="966795">Éviter la création du Stencil Buffer</h2><h3 id="r-un-nouvel-attribut" data-claire-element-id="966763">Un nouvel attribut</h3><p id="r-966759" data-claire-element-id="966759">Le premier point que nous allons gérer concerne l'économie de ressources relatives au <strong>Stencil Buffer</strong>. En effet celui-ci n'est pas souvent utilisé, d'ailleurs nous ne l'avons jamais utilisé, nous pouvons donc éviter sa création dans la méthode <strong>charger</strong>() lorsque nous n'en avons pas besoin.</p><p id="r-966760" data-claire-element-id="966760">Pour cela, nous allons ajouter un nouvel attribut nommé <strong>m_utiliserStencilBuffer</strong> de type <em><strong>bool</strong></em> :</p><pre id="r-966761" data-claire-element-id="966761"><code data-claire-semantic="cpp">// Classe

class FrameBuffer
{
    public:

    ....


    private:

    GLuint m_id;

    int m_largeur;
    int m_hauteur;

    std::vector&lt;Texture&gt; m_colorBuffers;
    GLuint m_depthBufferID;

    bool m_utiliserStencilBuffer;
};</code></pre><p id="r-966762" data-claire-element-id="966762">Celui-ci permettra de dire si oui ou non, nous devons créer le <strong>Stencil Buffer</strong>.</p><h3 id="r-modification-du-constructeur" data-claire-element-id="966772">Modification du constructeur</h3><p id="r-966764" data-claire-element-id="966764">Pour lui donner une valeur au moment au moment de créer un objet <strong>FrameBuffer</strong>, nous allons légèrement modifier le constructeur. Pour le moment, le prototype est le suivant :</p><pre id="r-966765" data-claire-element-id="966765"><code data-claire-semantic="cpp">FrameBuffer(int largeur, int hauteur);</code></pre><p id="r-966766" data-claire-element-id="966766">Nous allons ajouter un autre paramètre pour lui permettre de donner une valeur à notre nouveau booléen. De préférence, nous l'ajouterons avec une valeur par défaut égale à <strong>false</strong> car le <strong>Stencil Buffer</strong> n'est pas souvent utilisé :</p><pre id="r-966767" data-claire-element-id="966767"><code data-claire-semantic="cpp">FrameBuffer(int largeur, int hauteur, bool utiliserStencilBuffer = false);</code></pre><p id="r-966768" data-claire-element-id="966768">Bien entendu, il faut modifier le constructeur dans le fichier <strong>.cpp</strong>. Il faut ajouter ce nouveau paramètre ainsi que l'initialisation du booléen :</p><pre id="r-966769" data-claire-element-id="966769"><code data-claire-semantic="cpp">FrameBuffer::FrameBuffer(int largeur, int hauteur, bool utiliserStencilBuffer) : m_id(0), m_largeur(largeur), m_hauteur(hauteur),
                                                                                 m_colorBuffers(0), m_depthBufferID(0),
                                                                                 m_utiliserStencilBuffer(utiliserStencilBuffer)
{

}</code></pre><p id="r-966770" data-claire-element-id="966770">Pour compléter les modifications, pensons à initialiser le booléen dans le constructeur par défaut avec une valeur égale à <strong>false</strong> :</p><pre id="r-966771" data-claire-element-id="966771"><code data-claire-semantic="cpp">FrameBuffer::FrameBuffer() : m_id(0), m_largeur(0), m_hauteur(0), m_colorBuffers(0), m_depthBufferID(0), m_utiliserStencilBuffer(false)
{

}</code></pre><h3 id="r-creation-des-render-buffers" data-claire-element-id="966782">Création des Render Buffers</h3><p id="r-966773" data-claire-element-id="966773">Maintenant que le booléen possède une valeur (soit <strong>false</strong> par défaut, soit <strong>true</strong> par le programmeur) nous pouvons l'utiliser dans la méthode <strong>charger</strong>() pour nous permettre de bloquer ou non le chargement du <strong>Stencil Buffer</strong>.</p><p id="r-966774" data-claire-element-id="966774">Mais avant cela, nous allons revenir à la création du <strong>double-Render Buffer</strong> et se demander : comment peut-on séparer le <strong>Depth</strong> et le Stencil <strong>Buffer</strong> ? Car je vous rappelle que les deux se trouve dans le même buffer.</p><p id="r-966775" data-claire-element-id="966775">La réponse est en fait très simple et se situe au niveau du <em>format interne</em>, celui que nous donnons à la méthode <strong>creerRenderBuffer</strong>() :</p><pre id="r-966776" data-claire-element-id="966776"><code data-claire-semantic="cpp">// Création du Depth et du Stencil Buffer

creerRenderBuffer(m_depthBufferID, GL_DEPTH24_STENCIL8);</code></pre><p id="r-966777" data-claire-element-id="966777">Pour le moment, nous lui donnons la constante <strong>GL_DEPTH24_STENCIL8</strong> pour dire à OpenGL de créer un <strong>double-RenderBuffer</strong> contenant le <strong>Depth</strong> et le <strong>Stencil</strong>.</p><p id="r-966778" data-claire-element-id="966778">Pour ne garder que le <strong>Depth</strong>, il suffit juste de changer la constante en <strong>GL_DEPTH_COMPONENT24</strong>. Avec elle, OpenGL comprendrait qu'il ne doit créer que le <strong>Depth Buffer</strong>. L'appel à la méthode <strong>creerRenderBuffer</strong>() ressemblerait donc à ceci :</p><pre id="r-966779" data-claire-element-id="966779"><code data-claire-semantic="cpp">// Création du Depth Buffer

creerRenderBuffer(m_depthBufferID, GL_DEPTH_COMPONENT24);</code></pre><p id="r-966780" data-claire-element-id="966780">En définitif, si le booléen <strong>m_utiliserStencilBuffer</strong> est égal à la valeur <strong>true</strong> alors on conserve le <strong>double-Render Buffer</strong>, sinon on utilise la nouvelle constante pour ne garder que le <strong>Depth Buffer</strong> :</p><pre id="r-966781" data-claire-element-id="966781"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Début de la méthode

    ....


    // Création du Depth Buffer et du Stencil Buffer (si besoin)

    if(m_utiliserStencilBuffer == true)
        creerRenderBuffer(m_depthBufferID, GL_DEPTH24_STENCIL8);

    else
        creerRenderBuffer(m_depthBufferID, GL_DEPTH_COMPONENT24);


    // Association du Color Buffer

    ....
}</code></pre><h3 id="r-association-des-renders-buffers" data-claire-element-id="966789">Association des Renders Buffers</h3><p id="r-966783" data-claire-element-id="966783">L'appel à la fonction <strong>glFramebufferRenderbuffer</strong>() doit également être modifié. En effet, son paramètre <strong>attachment</strong> permet de spécifier le point d'attache du <strong>Render buffer</strong>, sa valeur est pour le moment égale à la constante <strong>GL_DEPTH_STENCIL_ATTACHMENT</strong> :</p><pre id="r-966784" data-claire-element-id="966784"><code data-claire-semantic="cpp">// Association du Depth et du Stencil Buffer

glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_STENCIL_ATTACHMENT, GL_RENDERBUFFER, m_depthBufferID);</code></pre><p id="r-966785" data-claire-element-id="966785">Dans le cas où le booléen est à <strong>false</strong>, il faudrait changer cette constante car le <strong>Stencil Buffer</strong> n'existe pas. Celle-ci deviendrait alors <strong>GL_DEPTH_ATTACHMENT</strong> :</p><pre id="r-966786" data-claire-element-id="966786"><code data-claire-semantic="cpp">// Association du Depth Buffer

glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, m_depthBufferID);</code></pre><p id="r-966787" data-claire-element-id="966787">En utilisant le booléen, l'association du <strong>Render Buffer</strong> ressemblerait donc à :</p><pre id="r-966788" data-claire-element-id="966788"><code data-claire-semantic="cpp">bool FrameBuffer::charger()
{
    // Début de la méthode

    ....


    // Association du Color Buffer

    ....


    // Création du Depth Buffer et du Stencil Buffer (si besoin)

    if(m_utiliserStencilBuffer == true)
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_STENCIL_ATTACHMENT, GL_RENDERBUFFER, m_depthBufferID);

    else
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, m_depthBufferID);


    // Vérification de l'intégrité du FBO

    ....
}</code></pre><h3 id="r-creation-d-un-objet-framebuffer" data-claire-element-id="966794">Création d'un objet FrameBuffer</h3><p id="r-966790" data-claire-element-id="966790">Au final, si vous souhaitez utiliser le <strong>Stencil Buffer</strong> avec un <strong>FBO</strong> vous devrez ajouter la valeur <strong>true</strong> au constructeur :</p><pre id="r-966791" data-claire-element-id="966791"><code data-claire-semantic="cpp">// Frame Buffer avec Stencil Buffer

FrameBuffer frameBuffer(512, 512, true);</code></pre><p id="r-966792" data-claire-element-id="966792">Si vous ne souhaitez pas l'utiliser, soit vous ne mettez pas de booléen, soit vous mettez la valeur <strong>false</strong> :</p><pre id="r-966793" data-claire-element-id="966793"><code data-claire-semantic="cpp">// Frame Buffer sans Stencil Buffer

FrameBuffer frameBuffer(512, 512);</code></pre><h2 id="r-le-constructeur-de-copie-3" data-claire-element-id="966805">Le constructeur de copie</h2><p id="r-966796" data-claire-element-id="966796">Le constructeur de copie est une pseudo-méthode que nous avons l'habitude de rencontrer maintenant. Vous savez que les objets OpenGL ne peuvent être copiés comme de simples variables, ils doivent être totalement rechargés dans leur copie exactement comme s'il s'agissait de pointeurs. On ne risque ainsi pas de perdre des données si un objet original est détruit.</p><p id="r-966797" data-claire-element-id="966797">Le constructeur de copie est assez simple puisqu'il ne prend en paramètre qu'une <em>référence constante</em> sur un objet de même type, ici <em><strong>FrameBuffer</strong></em> :</p><pre id="r-966798" data-claire-element-id="966798"><code data-claire-semantic="cpp">FrameBuffer(const FrameBuffer &amp;frameBufferACopier);</code></pre><p id="r-966799" data-claire-element-id="966799">Son implémentation commencera comme d'habitude par la copie des attributs variables. Si on regarde notre liste d'attributs, on remarque qu'il n'y en a que trois : <strong>m_largeur</strong>, <strong>m_hauteur</strong> et <strong>m_utiliserStencilBuffer</strong>.</p><pre id="r-966800" data-claire-element-id="966800"><code data-claire-semantic="cpp">FrameBuffer::FrameBuffer(const FrameBuffer &amp;frameBufferACopier)
{
    // Copie de la largeur, de la hauteur et du booléen

    m_largeur = frameBufferACopier.m_largeur;
    m_hauteur = frameBufferACopier.m_hauteur;
    m_utiliserStencilBuffer = frameBufferACopier.m_utiliserStencilBuffer;
}</code></pre><p id="r-966801" data-claire-element-id="966801">Ces trois attributs peuvent être copiés directement. En revanche, les autres sont( ou contiennent) des objets OpenGL ils ne peuvent donc pas être copiés par le signe <strong>=</strong>. La méthode qui leur donne une valeur est la méthode <strong>charger</strong>(). C'est elle qui charge le <strong>FBO</strong> et qui permet de gérer un identifiant à tous ces attributs.</p><p id="r-966802" data-claire-element-id="966802">Nous l'appellerons donc cette méthode pour simuler une copie de ces attributs :</p><pre id="r-966803" data-claire-element-id="966803"><code data-claire-semantic="cpp">FrameBuffer::FrameBuffer(const FrameBuffer &amp;frameBufferACopier)
{
    // Copie de la largeur, de la hauteur et du booléen

    m_largeur = frameBufferACopier.m_largeur;
    m_hauteur = frameBufferACopier.m_hauteur;
    m_utiliserStencilBuffer = frameBufferACopier.m_utiliserStencilBuffer;


    // Chargement de la copie du Frame Buffer

    charger();
}</code></pre><p id="r-966804" data-claire-element-id="966804">Le constructeur de copie est maintenant complet. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
<span class="arrow"></span>
<span class="next">Utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
<span class="next">Gérer plusieurs Color Buffers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="GrerplusieursColorBuffers"></a><h2>Gérer plusieurs Color Buffers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
<span class="arrow"></span>
<span class="next">Améliorations simples</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-966807" data-claire-element-id="966807">Cette partie est en cours de ré-écriture, sa précédente version était trop lourde et inutilement complexe. Néanmoins, vous avez déjà pratiquement tout vu sur les <strong>FBO</strong>. ^^</p><p id="r-966808" data-claire-element-id="966808"><strong>Télécharger (Windows, UNIX/Linux, Mac OS X) : <a href="https://dl.dropboxusercontent.com/s/4ky01lio7hfs5vc/Les Frame Buffer Objects.zip?token_hash=AAHBi-1nXMr241zc2yXml9vv3d39ghTfipO9HofhTClyVQ&amp;dl=1">Code Source C++ du chapitre sur les Frame Buffers Objects</a></strong></p><p id="r-966809" data-claire-element-id="966809">Ce chapitre était un peu compliqué et il y avait pas mal de notions à assimiler en une fois. Vous comprendrez pourquoi je l'ai placé à la fin des notions avancées.</p><p id="r-966810" data-claire-element-id="966810">Les <strong>Frame Buffers</strong> permettent de faire pas mal de choses mais il faut avoir un minimum de connaissances en OpenGL pour connaitre leur fonctionnement. Je vous rassure tout de suite, si je vous ai fait un chapitre dessus c'est parce que vous êtes tout à fait capables de les utiliser. ^^</p><p id="r-966811" data-claire-element-id="966811">Après tout ce que vous avez vu jusqu'à présent, vous avez une bonne vu d'ensemble de ce que propose OpenGL. Il y a plein d'autres fonctionnalités à voir évidemment, mais à partir de maintenant nous n'allons pas vraiment apprendre de nouvelles notions pures et dures mais nous allons plutôt utiliser tout ce que nous avons vu pour faire de véritables rendus. Nous allons apprendre à charger des modèles 3D statiques et animés, utiliser des SkyBox, des heigh maps, et bien évidemment des effets ralistes avec les shaders.</p><p id="r-966812" data-claire-element-id="966812">Avant de passer à ce programme, je vous invite à faire un petit TP, basé sur le premier que vous avez déjà fait, pour mettre en pratique ce que nous avons vu dans cette deuxième partie. Il y aura des <strong>VBO</strong>, des <strong>VAO</strong>, des <strong>shaders</strong> et bien évidemment des <strong>FBO</strong>. :p</p><p id="r-966813" data-claire-element-id="966813">Ce tutoriel est loin d'être terminé, nous avons encore pas mal de choses à voir et à apprendre ensemble ^^ . Pour vous donner un avant-goût des prochains chapitres, sachez que :</p><ul id="r-966818" data-claire-element-id="966818"><li id="r-966815" data-claire-element-id="966815"><p id="r-966814" data-claire-element-id="966814">La <strong>troisième partie</strong> sera consacrée aux techniques du jeu vidéo en général, comme le chargement de modèles 3D animés et non-animés, les polices d'écriture, ...</p></li><li id="r-966817" data-claire-element-id="966817"><p id="r-966816" data-claire-element-id="966816">La <strong>quatrième partie</strong> sera consacrée à l'élaboration d'effets avancés comme la lumière, le bump mapping, l'eau, ...</p></li></ul><p id="r-966819" data-claire-element-id="966819">Si vous avez des remarques ou des éléments que vous aimeriez que je développe, merci de m'en faire part dans les commentaires de ce tutoriel. Toute critique (constructive) sera la bienvenue :) .</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3">Développez vos applications 3D avec OpenGL 3.3</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Les bases d&#039;OpenGL 3
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-21">Introduction</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-opengl-2">
Qu&#039;est-ce qu&#039;OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/installer-les-differents-outils">
Installer les différents outils
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-opengl-2-1-et-3-3">
Différences entre OpenGL 2.1 et 3.3
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creer-une-fenetre-avec-la-sdl-2-0">Créer une fenêtre avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-de-l-ide">
Préparation de l&#039;IDE
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-programme-3">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-parametres-opengl">
Les paramètres OpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-affichage">Premier affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-fonctionnement-d-opengl">
Le fonctionnement d&#039;OpenGL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/afficher-un-triangle-3">
Afficher un triangle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-sceneopengl-1">
La classe SceneOpenGL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-aux-shaders-1">Introduction aux shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-shader-1">
Qu&#039;est-ce qu&#039;un Shader ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-des-shaders">
Utilisation des shaders
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-de-couleurs-3">
Un peu de couleurs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-matrices-8">Les matrices</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-23">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/partie-theorique">
Partie théorique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-matricielle">
Transformations au niveau matricielle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/transformations-au-niveau-geometrique">
Transformations au niveau géométrique
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-1-2">La troisième dimension (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-matrice-de-projection">
La matrice de projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-de-la-projection">
Utilisation de la projection
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/exemples-de-transformations">
Exemples de transformations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-troisieme-dimension-partie-2-2">La troisième dimension (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-1">
La caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/affichage-d-un-cube-1">
Affichage d&#039;un Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-cube-1">
La classe Cube
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-rate">
Le Frame Rate
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/push-et-pop-2">Push et Pop</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-problematique-4">
La problématique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/sauvegarde-et-restauration">
Sauvegarde et Restauration
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-evenements-avec-la-sdl-2-0">Les évènements avec la SDL 2.0</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/differences-entre-la-sdl-1-2-et-2-0">
Différences entre la SDL 1.2 et 2.0
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-classe-input-1">
La classe Input
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-methodes-indispensables">
Les méthodes indispensables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-textures-2">Les textures</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/introduction-124">
Introduction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/chargement-4">
Chargement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/plaquage">
Plaquage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-12">
Améliorations
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/aller-plus-loin-35">
Aller plus loin
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-camera-3">La caméra</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctionnement-45">
Fonctionnement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/implementation-de-la-camera-4">
Implémentation de la caméra
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fixer-un-point">
Fixer un point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-33">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/tp-une-relique-retrouvee">TP : Une relique retrouvée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-consignes-11">
Les consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/correction-84">
Correction
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Les notions avancées
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-buffer-objects-1">Les Vertex Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/c-est-quoi-un-vbo">
C&#039;est quoi un VBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-39">
Création
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-91">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/mise-a-jour-des-donnees-1">
Mise à jour des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-6">
Un autre exemple
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-vertex-array-objects">Les Vertex Array Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/encore-un-objet-opengl">
Encore un objet OpenGL ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-et-utilisation">
Création et Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-autre-exemple-7">
Un autre exemple
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-3-3-et-mac-os-x">
OpenGL 3.3 et Mac OS X
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/la-compilation-de-shaders">La compilation de shaders</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/piqure-de-rappel">
Piqûre de rappel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/compilation-des-sources">
Compilation des sources
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/creation-du-programme-2">
Création du programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-et-ameliorations">
Utilisation et améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/opengl-shading-language-1">OpenGL Shading Language</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/un-peu-d-histoire-20">
Un peu d&#039;histoire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-42">
Les variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-structures-de-controle-1">
Les structures de contrôle
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/fonctions-predefinies">
Fonctions prédéfinies
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-1-2">Les shaders démystifiés (Partie 1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/preparation-32">
Préparation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/premier-shader">
Premier shader
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-couleur">
Gestion de la couleur
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-shaders-demystifies-partie-2-2">Les shaders démystifiés (Partie 2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-variables-uniform">
Les variables uniform
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-de-la-3d">
Gestion de la 3D
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gestion-des-textures">
Gestion des textures
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/bonnes-pratiques-3">
Bonnes pratiques
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-frame-buffer-objects">Les Frame Buffer Objects</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/qu-est-ce-qu-un-fbo">
Qu&#039;est-ce qu&#039;un FBO ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-color-buffer-1">
Le Color Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/les-render-buffers">
Les Render Buffers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/le-frame-buffer">
Le Frame Buffer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/utilisation-94">
Utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
Améliorations simples
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/gerer-plusieurs-color-buffers">
Gérer plusieurs Color Buffers
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-vos-applications-3d-avec-opengl-3-3/ameliorations-simples">
<span class="arrow"></span>
<span class="next">Améliorations simples</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/developpez-vos-applications-3d-avec-opengl-3-3.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 03:56:40 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/developpez-vos-applications-3d-avec-opengl-3-3.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:46:25 GMT -->
</html>