<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/developpez-votre-propre-plug-in-jquery.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 05:39:15 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/developpez-votre-propre-plug-in-jquery.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:00:01 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Développez votre propre plug-in jQuery !</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/developpez-votre-propre-plug-in-jquery.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Développez votre propre plug-in jQuery !</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Dveloppezvotrepropreplug-injQuery">Développez votre propre plug-in jQuery !</a><br/><a href="#Un...plug-in">Un... plug-in ?</a><br/><a href="#Lecodeminimumdenotreplug-in">Le code minimum de notre plug-in</a><br/><a href="#Notrepremierplug-in">Notre premier plug-in !</a><br/><a href="#Unpeudepersonnalitaveclesparamtres">Un peu de personnalité avec les paramètres</a><br/><a href="#TPunegaleried039images">TP : une galerie d&#039;images</a><br/></div>
<a name="Dveloppezvotrepropreplug-injQuery"></a><h2>Développez votre propre plug-in jQuery !</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-plug-in">
<span class="next">Un... plug-in ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-533954" data-claire-element-id="533954"><strong>jQuery</strong> est une bibliothèque <strong>JavaScript</strong> très populaire qui est de plus en plus utilisée. De nombreux sites l'ont en effet adoptée pour ses effets dynamiques qui donnent un aspect très professionnel.</p><p id="r-533955" data-claire-element-id="533955">Une des forces majeures de <strong>jQuery</strong> est la possibilité d'y ajouter ses propres plug-ins, nous permettant ainsi de réutiliser rapidement et facilement nos codes, mais aussi de les proposer de façon pratique au reste de la communauté.</p><p id="r-533956" data-claire-element-id="533956">Le but de ce tuto est de vous apprendre à développer vos propres plug-ins : vous verrez que ça n'a rien de sorcier :D !</p><aside id="r-533958" data-claire-element-id="533958" data-claire-semantic="warning"><p id="r-533957" data-claire-element-id="533957">Il va de soit que pour développer un plug-in <strong>jQuery</strong>, il est nécessaire d'avoir un minimum de connaissances en... <strong>jQuery</strong> :p <br/> Si ce n'est pas votre cas, je vous invite à lire <a href="http://www.siteduzero.com/tutoriel-3-160891-jquery-ecrivez-moins-pour-faire-plus.html">ce tuto</a>, signé tit_toinou :) .</p></aside>
</div><a name="Un...plug-in"></a><h2>Un... plug-in ?</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/le-code-minimum-de-notre-plug-in">
<span class="next">Le code minimum de notre plug-in</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-533959" data-claire-element-id="533959">Commençons par le commencement : qu'est-ce qu'un plug-in concrètement ? De façon globale, il s'agit d'un module, d'un petit logiciel qui ajoute des fonctionnalités à un programme donné afin que ce dernier réponde à des besoins plus précis.</p><p id="r-533960" data-claire-element-id="533960">Pour l'anecdote, <em>plug-in</em> est un terme anglais qui signifie <em>brancher</em>. Cela résume bien leur rôle : on peut très bien imaginer un plug-in comme étant une drôle de boîte que l'on branche sur un appareil pour l'améliorer ^^ . En français, il est plutôt recommandé de parler de <em>module d'extension</em>, mais le terme anglais est bien plus utilisé, alors c'est celui-ci que nous allons utiliser.</p><p id="r-533961" data-claire-element-id="533961">Revenons à ce qui nous intéresse : <strong>jQuery</strong> ! Ici, un plug-in n'est pas un gros logiciel tout compliqué à développer... Non non, un plug-in <strong>jQuery</strong>, c'est une simple fonction JavaScript !</p><p id="r-533962" data-claire-element-id="533962">Pour être exécutée, cette drôle de fonction devra être appelée en tant que méthode de nos éléments, comme ceci :</p><pre id="r-533963" data-claire-element-id="533963"><code data-claire-semantic="javascript">$('p').notreSuperPlugIn();
//Là, tous les paragraphes de notre page verront notre plug-in appliqué sur eux !</code></pre><p id="r-533964" data-claire-element-id="533964">Il ne reste plus qu'à coder notre super plug-in :p .</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery">Développez votre propre plug-in jQuery !</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-plug-in">
Un... plug-in ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/le-code-minimum-de-notre-plug-in">
Le code minimum de notre plug-in
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/notre-premier-plug-in">
Notre premier plug-in !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-peu-de-personnalite-avec-les-parametres">
Un peu de personnalité avec les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/tp-une-galerie-d-images-1">
TP : une galerie d&#039;images
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/le-code-minimum-de-notre-plug-in">
<span class="next">Le code minimum de notre plug-in</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lecodeminimumdenotreplug-in"></a><h2>Le code minimum de notre plug-in</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-plug-in">
<span class="arrow"></span>
<span class="next">Un... plug-in ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/notre-premier-plug-in">
<span class="next">Notre premier plug-in !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-la-fonction-jquery-fn" data-claire-element-id="533975">La fonction <em>jQuery.fn</em></h2><p id="r-533966" data-claire-element-id="533966">Avant de s'attaquer à quelque chose de complexe, commençons par voir les bases : comment ajouter un plug-in à <strong>jQuery</strong> :-° ?</p><p id="r-533967" data-claire-element-id="533967">Nous allons nous baser sur la fonction jQuery.fn. Celle-ci est en quelque sorte la fonction mère de <strong>jQuery</strong>. C'est elle qui nous permet d'écrire <code data-claire-semantic="javascript">$('#element').show() </code>, <code data-claire-semantic="javascript">$('#element').fadeTo() </code> etc... Et c'est donc elle qui nous permettra d'écrire notre plug-in.</p><p id="r-533968" data-claire-element-id="533968">Mais comment ? Ça commence plutôt mal car il y a plusieurs façons de faire !</p><p id="r-533969" data-claire-element-id="533969">La première étend notre fonction jQuery.fn avec une notation JSON contenant notre plug-in. L'avantage est que nous pouvons ainsi définir plusieurs plug-ins d'un coup :</p><pre id="r-533970" data-claire-element-id="533970"><code data-claire-semantic="javascript">jQuery.extend(jQuery.fn,
{		
    notreSuperPlugIn: function(parametres)
    {
        //Code de notre plug-in ici
    },
    secondPlugIn: function(parametres)
    {
        //Code du second plug-in ici
    }
});</code></pre><p id="r-533971" data-claire-element-id="533971">Cette pratique est cependant déconseillée : il est préférable de n'avoir qu'un plug-in par fichier, c'est plus propre, plus facile à maintenir, ça fait des fichiers moins gros... Cela dit, si vous avez en projet une bibliothèque de plug-ins étant liés les uns avec les autres, cette solution vous conviendra :) .</p><p id="r-533972" data-claire-element-id="533972">Mais pour l'instant, évitons de voir trop grand et préférons la seconde méthode : celle-ci ajoute simplement notre plug-in à jQuery.fn, de la même manière que n'importe quelle fonction :</p><pre id="r-533973" data-claire-element-id="533973"><code data-claire-semantic="javascript">jQuery.fn.notreSuperPlugIn=function(parametres)
{
   //Code de notre plug-in ici
};</code></pre><p id="r-533974" data-claire-element-id="533974">Nous adopterons donc cette dernière solution dans la suite de ce tuto : elle a l'avantage d'être plus claire, plus explicite mais, surtout, plus rapide à écrire.</p><h2 id="r-enfermons-notre-plug-in" data-claire-element-id="533979">Enfermons notre plug-in !</h2><p id="r-533976" data-claire-element-id="533976">Cependant, si vous utilisez <strong>jQuery</strong> depuis quelque temps, vous devez avoir l'habitude d'utiliser dans vos codes le <strong>$</strong> plutôt que le mot <strong>jQuery</strong>. Pour ce faire, nous allons mettre la définition de notre plug-in à l'intérieur d'une fonction anonyme et d'une <a href="http://www.siteduzero.com/tutoriel-3-123380-les-closures-en-javascript.html">closure</a>, de cette manière :</p><pre id="r-533977" data-claire-element-id="533977"><code data-claire-semantic="javascript">(function($)
{
    $.fn.notreSuperPlugIn=function(parametres)
    {
       //Code de notre plug-in ici
    };
})(jQuery);</code></pre><p id="r-533978" data-claire-element-id="533978">Cette syntaxe peut paraître curieuse aux premiers abords, mais elle est toute logique : on met entre parenthèses notre fonction anonyme et on l'appelle aussitôt avec l'argument <strong>jQuery</strong>. Ainsi, dans toute notre fonction, <strong>$</strong> aura la valeur... <strong>jQuery</strong> :D !<br/> C'est une technique pour éviter les conflits avec les autres librairies JavaScript utilisant aussi le <strong>$</strong>.</p><h2 id="r-recuperer-les-elements-utilisant-le-plug-in" data-claire-element-id="533990">Récupérer les éléments utilisant le plug-in</h2><p id="r-533980" data-claire-element-id="533980">Il est temps désormais de récupérer les différents éléments sur lesquels on doit appliquer notre super plug-in. Pour cela, tentons déjà de comprendre ce qui se passe lorsqu'on fait appel à ce dernier. C'est-à-dire, comme on l'a vu au chapitre précédent, quand on écrit ceci :</p><pre id="r-533981" data-claire-element-id="533981"><code data-claire-semantic="javascript">$('p').notreSuperPlugIn();</code></pre><p id="r-533982" data-claire-element-id="533982">Ici, nous voulons appliquer notre plug-in sur tous les paragraphes. En fait, cela revient à appeler une méthode de nos paragraphes. Si vous avez des notions en POO, vous savez que pour accéder à l'élément appelant la méthode, il faut utiliser le mot-clé <strong>this</strong>. Si vous n'avez pas de notions en POO, sachez simplement que pour accéder à l'élément appelant la méthode, il faut utiliser le mot-clé <strong>this</strong>.</p><p id="r-533983" data-claire-element-id="533983">Ainsi, le mot-clé <strong>this</strong> dans notre plug-in fait référence à l'objet <strong>jQuery</strong> appelant notre plug-in ! De petits exemples pour que vous compreniez bien :</p><pre id="r-533984" data-claire-element-id="533984"><code data-claire-semantic="javascript">$('div').notreSuperPlugIn(); //this fera référence à l'objet jQuery $('div')
$('#header').notreSuperPlugIn(); //this fera référence à l'objet jQuery $('#header')
$('table.commentaire').notreSuperPlugIn(); //this fera référence à l'objet jQuery $('table.commentaire')</code></pre><p id="r-533985" data-claire-element-id="533985">... Bref, je crois que vous avez compris le principe :) .</p><p id="r-533986" data-claire-element-id="533986">Vous savez probablement qu'un objet <strong>jQuery</strong> peut faire lui-même référence à plusieurs éléments de notre page Web. Ainsi, <code data-claire-semantic="javascript">$('div') </code> fait référence à toutes les <code data-claire-semantic="html">&lt;div&gt; </code> de notre page !</p><p id="r-533987" data-claire-element-id="533987">Et donc, pour pouvoir appliquer notre plug-in sur tous les éléments de notre objet <strong>jQuery</strong>, nous utiliserons la fonction each() :</p><pre id="r-533988" data-claire-element-id="533988"><code data-claire-semantic="javascript">(function($)
{
    $.fn.notreSuperPlugIn=function(parametres)
    {
       this.each(function()
       {
           //Code de notre plug-in ici
       });
    };
})(jQuery);</code></pre><p id="r-533989" data-claire-element-id="533989">On retrouve notre cher mot-clé <strong>this</strong>, qui représente notre objet <strong>jQuery</strong> appelant le plug-in. Et c'est dans la fonction each() que l'on écrira notre code.</p><h2 id="r-ne-cassons-pas-la-chaine" data-claire-element-id="534001">Ne cassons pas la chaîne !</h2><p id="r-533991" data-claire-element-id="533991">Il reste toutefois un petit quelque chose à ajouter pour avoir une bonne base. Vous n'êtes pas sans savoir que <strong>jQuery</strong> a pour particularité de chaîner ses fonctions. Comprenez par là que l'on peut faire ceci sans problème :</p><pre id="r-533992" data-claire-element-id="533992"><code data-claire-semantic="javascript">$('p').css('color','red').appendTo($('div')).show();</code></pre><p id="r-533993" data-claire-element-id="533993">Cela est possible car chacune des fonctions, que ce soit css(), appendTo(), show() ainsi que la grande majorité des fonctions de la bibliothèque, renvoient en valeur de retour l'objet <strong>jQuery</strong> qui les a appelées.</p><p id="r-533994" data-claire-element-id="533994">Pour respecter cette philosophie, notre plug-in doit permettre de s'ajouter dans cette chaîne, comme ceci :</p><pre id="r-533995" data-claire-element-id="533995"><code data-claire-semantic="javascript">$('p').css('color','red').notreSuperPlugIn().appendTo($('div')).show();</code></pre><p id="r-533996" data-claire-element-id="533996">Pour ce faire, rien de plus simple, il suffit de renvoyer l'objet <strong>jQuery</strong> appelant notre plug-in... Vous savez, notre fameux mot-clé <strong>this</strong>.</p><pre id="r-533997" data-claire-element-id="533997"><code data-claire-semantic="javascript">(function($)
{
    $.fn.notreSuperPlugIn=function(parametres)
    {
       this.each(function()
       {
           //Code de notre plug-in ici
       });

       return this;
    };
})(jQuery);</code></pre><p id="r-533998" data-claire-element-id="533998">Bien entendu, la fonction each() renvoie elle aussi l'objet <strong>jQuery</strong> l'ayant appelé. Ainsi, il est également possible d'écrire ceci :</p><pre id="r-533999" data-claire-element-id="533999"><code data-claire-semantic="javascript">(function($)
{
    $.fn.notreSuperPlugIn=function(parametres)
    {
       return this.each(function()
       {
           //Code de notre plug-in ici
       });
    };
})(jQuery);</code></pre><p id="r-534000" data-claire-element-id="534000">Ceci sera donc notre code de base pour tous nos futurs plug-ins. Ce n'est pas bien compliqué en fait, il faut juste le savoir, c'est tout :) .</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery">Développez votre propre plug-in jQuery !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-plug-in">
Un... plug-in ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/le-code-minimum-de-notre-plug-in">
Le code minimum de notre plug-in
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/notre-premier-plug-in">
Notre premier plug-in !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-peu-de-personnalite-avec-les-parametres">
Un peu de personnalité avec les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/tp-une-galerie-d-images-1">
TP : une galerie d&#039;images
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-plug-in">
<span class="arrow"></span>
<span class="next">Un... plug-in ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/notre-premier-plug-in">
<span class="next">Notre premier plug-in !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Notrepremierplug-in"></a><h2>Notre premier plug-in !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/le-code-minimum-de-notre-plug-in">
<span class="arrow"></span>
<span class="next">Le code minimum de notre plug-in</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-peu-de-personnalite-avec-les-parametres">
<span class="next">Un peu de personnalité avec les paramètres</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-debutons-par-un-plug-in-basique" data-claire-element-id="534009">Débutons par un plug-in basique</h2><p id="r-534003" data-claire-element-id="534003">Maintenant qu'on a le code de base, le reste va vite couler de source : ça ne sera que du code <strong>jQuery</strong> traditionnel !</p><p id="r-534004" data-claire-element-id="534004">Commençons par un plug-in simple. On va l'appeler <em>hoverFade</em> il abaissera lentement l'opacité de nos éléments au passage de la souris dessus. Une fois l'opacité à 0, il remettra rapidement l'opacité de l'élément à la normale. Cela peut donner un effet sympa pour nos liens par exemple, ça changera d'un simple changement de couleur :p .</p><p id="r-534005" data-claire-element-id="534005">On aura donc besoin des fonctions fadeOut() et fadeIn() :) .</p><p id="r-534006" data-claire-element-id="534006">Essayez de le faire vous-même avant de regarder le code ci-dessous, c'est en essayant qu'on apprend !</p><pre id="r-534007" data-claire-element-id="534007"><code data-claire-semantic="javascript">(function($)
{ 
	$.fn.hoverFade=function()
	{
	   return this.each(function()
	   {
		//On veut que l'élément change au passage de la souris, on utilise donc mouseover() !
		$(this).mouseover(function()
		{
			//On diminue donc l'opacité lentement
			$(this).fadeOut('slow',function()
			{
				//Une fois l'élément invisible, on le fait réapparaitre rapidement !
				$(this).fadeIn('fast');
			});
		});
	   });						   
	};
})(jQuery);</code></pre><p id="r-534008" data-claire-element-id="534008">Il me semble inutile d'expliquer ce code, les commentaires sont assez explicites je pense. Vous pouvez cependant vous demandez pourquoi j'utilise <code data-claire-semantic="javascript">$(this) </code> et non notre mot-clé <strong>this</strong>.<br/> C'est tout simplement parce que nous codons dorénavant dans la fonction each(), et non plus directement dans notre plug-in ! Et, dans each(), pour accéder à notre élément on utilise... <code data-claire-semantic="javascript">$(this) </code> ^^ .</p><h2 id="r-et-si-on-testait" data-claire-element-id="534023">Et si on testait ?</h2><p id="r-534010" data-claire-element-id="534010">Ça serait mieux, non :D ? Commençons par enregistrer le plug-in dans un fichier : pour ce faire, on utilise généralement deux méthodes différentes, selon la version de votre fichier :</p><ul id="r-534015" data-claire-element-id="534015"><li id="r-534012" data-claire-element-id="534012"><p id="r-534011" data-claire-element-id="534011">La version de développement : c'est celle qu'on a actuellement, avec le code bien présenté, indenté et commenté. Il est facile à maintenir et permet aux autres développeurs de comprendre ce que vous avez fait. On le nomme généralement de cette façon : <strong>jquery.nomDuPlugIn.js</strong>.</p></li><li id="r-534014" data-claire-element-id="534014"><p id="r-534013" data-claire-element-id="534013">La version de production : c'est bien évidemment le même code que la version de développement, mais sans l'indentation, sans les commentaires et les retours à la ligne, et qui tient le plus souvent sur une seule ligne ! Le fichier n'est alors plus du tout lisible et le maintenir est un enfer... Mais il a l'avantage d'être plus léger, ce qui le rend idéal pour l'intégrer dans les sites, d'où le terme de &quot;production&quot;. Pour transformer notre fichier de développement en version de production, on utilise généralement des outils faits pour, comme le site <a href="http://jscompress.com/">jscompress</a>. On nomme généralement la version de production de cette façon : <strong>jquery.nomDuPlugIn-min.js</strong>.</p></li></ul><p id="r-534016" data-claire-element-id="534016">Bien entendu, il est préférable de conserver les deux versions. De plus, si vous voulez proposer votre plug-in au reste du monde, il est préférable de mettre à disposition les deux versions également ^^ .</p><p id="r-534017" data-claire-element-id="534017">Bon, alors, nommons notre fichier <strong>jquery.hoverFade.js</strong> et créons une page HTML pour le tester !</p><pre id="r-534018" data-claire-element-id="534018"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitionnal//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; &gt;
	&lt;head&gt;
		&lt;title&gt;Notre super plug-in jQuery !&lt;/title&gt;
		&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=charset=iso-8859-1&quot; /&gt;
		&lt;script type=&quot;text/javascript&quot; src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js&quot;&gt;&lt;/script&gt;
		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery.hoverFade.js&quot;&gt;&lt;/script&gt;
		&lt;script type=&quot;text/javascript&quot;&gt;			
			$(function()
			{
				$('a, h1').hoverFade().css('color','red');
			});
		&lt;/script&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;h1&gt;Lorem ipsum dolor sit amet&lt;/h1&gt;
                &lt;p&gt;
                   Lorem ipsum dolor sit amet, &lt;a href=&quot;#&quot;&gt;consectetur adipiscing&lt;/a&gt; elit. Praesent sit amet libero odio.
                   Maecenas auctor varius lorem at commodo. Praesent egestas consectetur hendrerit. Pellentesque
                   condimentum dictum enim, scelerisque convallis erat mollis quis. Ut cursus tellus sed odio feugiat
                   aliquam. Aenean vel orci nunc. Cras pharetra tortor a elit laoreet &lt;a href=&quot;#&quot;&gt;non ornare magna fermentum&lt;/a&gt;. Fusce
                   convallis tincidunt rhoncus. Nunc ac elit in tellus facilisis euismod. Donec vel mi urna. Aliquam in
                   urna dolor, &lt;a href=&quot;#&quot;&gt;non blandit sapien&lt;/a&gt;. Proin consequat, arcu non dignissim semper, nibh tellus condimentum
                   turpis, vel ornare ipsum massa rhoncus eros.
                &lt;/p&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-534019" data-claire-element-id="534019"><a href="http://mariouniversalis.no-ip.org/tutoSdZ/jqueryPlugins/exemple1.html">Tester !</a></p><p id="r-534020" data-claire-element-id="534020">N'oubliez pas bien sûr d'inclure le plug-in via une balise <code data-claire-semantic="html">&lt;script&gt; </code> dans le <code data-claire-semantic="html">&lt;head&gt; </code> ! Veillez aussi à inclure <strong>jQuery</strong>, sans ça notre plug-in ne pourra pas fonctionner :p . <br/> J'ai choisi pour ma part d'inclure le fichier hébergé par Google.</p><p id="r-534021" data-claire-element-id="534021">Enfin, une troisième balise <code data-claire-semantic="html">&lt;script&gt; </code> a été ajoutée afin d'appliquer notre plug-in sur les éléments que l'on souhaite. Dans l'exemple ci-dessus, les liens seront donc animés au passage de la souris, ainsi que les titres de premier niveau. L'appel à la fonction .css() n'est là que pour vérifier que le chaînage fonctionne bien :) .</p><p id="r-534022" data-claire-element-id="534022">Ce n'est donc pas si compliqué, n'est-ce pas :D ?</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery">Développez votre propre plug-in jQuery !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-plug-in">
Un... plug-in ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/le-code-minimum-de-notre-plug-in">
Le code minimum de notre plug-in
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/notre-premier-plug-in">
Notre premier plug-in !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-peu-de-personnalite-avec-les-parametres">
Un peu de personnalité avec les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/tp-une-galerie-d-images-1">
TP : une galerie d&#039;images
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/le-code-minimum-de-notre-plug-in">
<span class="arrow"></span>
<span class="next">Le code minimum de notre plug-in</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-peu-de-personnalite-avec-les-parametres">
<span class="next">Un peu de personnalité avec les paramètres</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unpeudepersonnalitaveclesparamtres"></a><h2>Un peu de personnalité avec les paramètres</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/notre-premier-plug-in">
<span class="arrow"></span>
<span class="next">Notre premier plug-in !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/tp-une-galerie-d-images-1">
<span class="next">TP : une galerie d&#039;images</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-les-parametres-simples" data-claire-element-id="534041">Les paramètres simples</h2><p id="r-534025" data-claire-element-id="534025">Notre plug-in ci-dessus est bien sympathique, quoique vraiment primaire.</p><p id="r-534026" data-claire-element-id="534026">Il serait intéressant de proposer à l'utilisateur de le paramétrer. Par exemple, notre plug-in <em>hoverFade()</em> impose actuellement une vitesse d'animation. Ça pourrait être sympathique de paramétrer cette vitesse non :) ?</p><p id="r-534027" data-claire-element-id="534027">La façon de procéder à laquelle vous pensez sans doute est la suivante :</p><pre id="r-534028" data-claire-element-id="534028"><code data-claire-semantic="javascript">(function($)
{ 
	$.fn.hoverFade=function(vitesseFadeOut, vitesseFadeIn)
	{
	   return this.each(function()
	   {
		//On veut que l'élément change au passage de la souris, on utilise donc mouseover() !
		$(this).mouseover(function()
		{
			//On diminue donc l'opacité lentement
			$(this).fadeOut(vitesseFadeOut,function()
			{
				//Une fois l'élément invisible, on le fait réapparaitre rapidement !
				$(this).fadeIn(vitesseFadeIn);
			});
		});
	   });						   
	};
})(jQuery);</code></pre><p id="r-534029" data-claire-element-id="534029">Pour ensuite l'appeler de cette façon :</p><pre id="r-534030" data-claire-element-id="534030"><code data-claire-semantic="javascript">$('p').hoverFade(2500,2000);</code></pre><p id="r-534031" data-claire-element-id="534031">Cette solution fonctionne, même si dans l'idéal il faudrait vérifier les valeurs envoyées. Cependant, elle n'est pas des plus pratique.</p><p id="r-534032" data-claire-element-id="534032">Pourquoi ? Imaginons la plug-in suivant :</p><pre id="r-534033" data-claire-element-id="534033"><code data-claire-semantic="javascript">$.fn.unSuperPlugIn=function(vitesse, couleur, largeur, hauteur, position_x, position_y, cible){};</code></pre><p id="r-534034" data-claire-element-id="534034">Peu importe ce que fait ce plug-in, intéressons uniquement aux paramètres. Imaginons que nous souhaitons ne renseigner que la position de notre élément. Nous serions obligés d'indiquer tous les paramètres précédents, à savoir la vitesse, la couleur et les dimensions... Pas très pratique n'est-ce pas ? :o</p><p id="r-534035" data-claire-element-id="534035">Imaginons de plus que vous mettiez plus tard à jour votre plug-in en ajoutant un paramètre : tous les anciens scripts l'utilisant ne fonctionneront plus, la rétro-compatibilité est inexistante !</p><p id="r-534036" data-claire-element-id="534036">Ceci est clairement un problème... Mais heureusement, il existe une solution simple pour le résoudre :D .<br/> L'idée est de n'admettre qu'un seul paramètre à notre plug-in. Ce paramètre sera une sorte de &quot;super variable&quot; qui en contiendra plusieurs autres &quot;normales&quot;. Ce paramètre sera ce qu'on appelle un <a href="http://www.siteduzero.com/tutoriel-3-320998-les-objets-et-les-tableaux.html#ss_part_5"><strong>objet littéral</strong></a>. Nous l'avons déjà un peu évoqué dans la première partie de ce tuto, si vous vous rappelez :) .</p><p id="r-534037" data-claire-element-id="534037">Cependant, si on veut permettre de ne préciser que quelques paramètres, il nous faut des valeurs par défaut ! Celles-ci seront elles aussi stockées dans un objet littéral. Si on en reste là, on a donc deux objets différents : un fourni par l'utilisateur, et un autre contenant nos valeurs par défaut. Mais il faut les mettre en commun pour savoir comment traiter les paramètres ! Pour cela, on utilise la fonction jQuery.extend(), qui permet de &quot;fusionner&quot; des objets en un seul ^^ .</p><pre id="r-534038" data-claire-element-id="534038"><code data-claire-semantic="javascript">(function($)
{ 
	$.fn.hoverFade=function(options)
	{
	   //options est donc un objet littéral, ne l'oublions pas !
           
           //On définit nos paramètres par défaut
           var defauts=
           {
               &quot;vitesseFadeOut&quot;: &quot;slow&quot;,
               &quot;vitesseFadeIn&quot;: &quot;fast&quot;
           };  
           
           //On fusionne nos deux objets ! =D
           var parametres=$.extend(defauts, options); 
           
           return this.each(function()
	   {
		//On accèdera à la vitesse du fadeOut via parametres.vitesseFadeOut
                //et à celle du fadeIn via parametres.vitesseFadeIn
              
                //On veut que l'élément change au passage de la souris, on utilise donc mouseover() !
                $(this).mouseover(function()
                {
                    //On diminue donc l'opacité lentement
                    $(this).fadeOut(parametres.vitesseFadeOut,function()
                    {
                       //Une fois l'élément invisible, on le fait réapparaître rapidement !
                       $(this).fadeIn(parametres.vitesseFadeIn);
                    });
                });
	   });						   
	};
})(jQuery);</code></pre><p id="r-534039" data-claire-element-id="534039">Pour appeler notre plug-in, il est possible de préciser un des paramètres, les deux, ou aucun :D .</p><pre id="r-534040" data-claire-element-id="534040"><code data-claire-semantic="javascript">$('a').hoverFade();
$('h1').hoverFade({&quot;vitesseFadeIn&quot;: 2350});
$('#test').hoverFade({&quot;vitesseFadeIn&quot;: 2350,&quot;vitesseFadeOut&quot;: &quot;normal&quot;});</code></pre><h2 id="r-des-fonctions-en-parametre" data-claire-element-id="534050">Des fonctions en paramètre !</h2><p id="r-534042" data-claire-element-id="534042">En JavaScript, une variable peut très bien stocker une fonction entière. A ce titre, il est possible de passer des fonctions en paramètre à nos plug-ins ! Tentons d'ajouter un <em>callback</em> à notre plug-in, ou si vous préférez une fonction qui sera appelée une fois l'animation finie. Ajoutons déjà notre nouveau paramètre dans les valeurs par défaut :</p><pre id="r-534043" data-claire-element-id="534043"><code data-claire-semantic="javascript">var defauts=
{
    &quot;vitesseFadeOut&quot;: &quot;slow&quot;,
    &quot;vitesseFadeIn&quot;: &quot;fast&quot;,
    &quot;callback&quot;: null
};</code></pre><p id="r-534044" data-claire-element-id="534044">A la fin de l'exécution de notre plug-in, il faut donc lancer cette fonction si elle existe :</p><pre id="r-534045" data-claire-element-id="534045"><code data-claire-semantic="javascript">$(this).mouseover(function()
{
     //On diminue donc l'opacité lentement
     $(this).fadeOut(parametres.vitesseFadeOut,function()
     {
          //Une fois l'élément invisible, on le fait réapparaitre rapidement !
          $(this).fadeIn(parametres.vitesseFadeIn,function()
          {
               //Si le parametre callback ne vaut pas null, c'est qu'on a précisé une fonction !
               if(parametres.callback)
               {
                  parametres.callback();
               }
          });
     });
});</code></pre><p id="r-534046" data-claire-element-id="534046">Ainsi, si nous appelons notre plug-in de cette manière :</p><pre id="r-534047" data-claire-element-id="534047"><code data-claire-semantic="javascript">$('a, h1').hoverFade({&quot;callback&quot;: function()
{
    alert('Animation finie !');
}});</code></pre><p id="r-534048" data-claire-element-id="534048"><a href="http://mariouniversalis.no-ip.org/tutoSdZ/jqueryPlugins/exemple2.html">Tester !</a></p><p id="r-534049" data-claire-element-id="534049">Une pop-up s'affichera à la fin de l'animation :) .</p><h2 id="r-des-parametres-pour-nos-fonctions-parametres" data-claire-element-id="534063">Des paramètres pour nos fonctions-paramètres</h2><p id="r-534051" data-claire-element-id="534051">Là, ça commence à devenir tordu :p . Pourquoi ne pas donner de paramètres aux fonctions que l'on passe en paramètre ? De cette façon :</p><pre id="r-534052" data-claire-element-id="534052"><code data-claire-semantic="javascript">$('a, h1').hoverFade({&quot;callback&quot;: function(data)
{
    alert('Voici ce que contient data : '+data);
}});</code></pre><p id="r-534053" data-claire-element-id="534053">Bien entendu, si on teste ce code on verra que data vaut <strong>undefined</strong>. Et pour cause, on ne l'a pas défini :p . Rappelez-vous comment nous avons procédé tout à l'heure : nous avons appelé la fonction dans le code du plug-in, via l'instruction suivante :</p><pre id="r-534054" data-claire-element-id="534054"><code data-claire-semantic="javascript">if(parametres.callback)
{
    parametres.callback();
}</code></pre><p id="r-534055" data-claire-element-id="534055">Là, vous devriez commencer à comprendre le principe : puisque c'est là qu'on appelle notre fonction, c'est ici qu'on lui fournit la liste des paramètres !</p><pre id="r-534056" data-claire-element-id="534056"><code data-claire-semantic="javascript">if(parametres.callback)
{
    parametres.callback(&quot;toto&quot;,23,$(this).text());
}</code></pre><p id="r-534057" data-claire-element-id="534057">Lorsqu'on appelle notre plug-in, nous pouvons accéder à ces variables en leur donnant n'importe quel nom (même si ce n'est évidemment pas conseillé, autant faire un code clair et compréhensible ;) ) :</p><pre id="r-534058" data-claire-element-id="534058"><code data-claire-semantic="javascript">$('a, h1').hoverFade({&quot;callback&quot;: function(data,radiateur,chocolat)
{
    alert(&quot;Voici ce que contient data : &quot; + data + &quot;\nEt radiateur : &quot; + radiateur + &quot;\nEt enfin chocolat : &quot; + chocolat);
}});</code></pre><p id="r-534059" data-claire-element-id="534059"><a href="http://mariouniversalis.no-ip.org/tutoSdZ/jqueryPlugins/exemple3.html">Tester !</a></p><p id="r-534060" data-claire-element-id="534060">Si vous décidez de mettre des paramètres à vos fonctions-paramètres, sachez qu'il n'est pas nécessaire de les indiquer lorsque vous appelez votre plug-in. La fonction se lancera sans erreur et fonctionnera tout de même, vous ne pourrez juste pas accéder aux variables envoyées par le plug-in ^^ .</p><pre id="r-534061" data-claire-element-id="534061"><code data-claire-semantic="javascript">$('a, h1').hoverFade({&quot;callback&quot;: function()
{
    //On peut mettre ce que l'on veut ici, on ne peut juste pas accéder aux trois variables qu'on l'on a défini dans notre plug-in =)
    alert(&quot;Voici ce que contient data : &quot; + data + &quot;\nEt radiateur : &quot; + radiateur + &quot;\nEt enfin chocolat : &quot; + chocolat);
    //Puisqu'on essaye d'accéder aux variables, le script plante, alors attention !
}});</code></pre><p id="r-534062" data-claire-element-id="534062">Bien évidemment, pour notre petit plug-in <em>hoverFade</em>, les paramètres dans les fonctions-paramètres ne sont pas très utiles.<br/> Afin de conclure ce tuto, nous allons donc développer ensemble un plug-in bien plus complexe que celui-ci :D .</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery">Développez votre propre plug-in jQuery !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-plug-in">
Un... plug-in ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/le-code-minimum-de-notre-plug-in">
Le code minimum de notre plug-in
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/notre-premier-plug-in">
Notre premier plug-in !
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-peu-de-personnalite-avec-les-parametres">
Un peu de personnalité avec les paramètres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/tp-une-galerie-d-images-1">
TP : une galerie d&#039;images
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/notre-premier-plug-in">
<span class="arrow"></span>
<span class="next">Notre premier plug-in !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/tp-une-galerie-d-images-1">
<span class="next">TP : une galerie d&#039;images</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPunegaleried039images"></a><h2>TP : une galerie d&#039;images</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-peu-de-personnalite-avec-les-parametres">
<span class="arrow"></span>
<span class="next">Un peu de personnalité avec les paramètres</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-534065" data-claire-element-id="534065">Afin de vous faire un peu exercer et appliquer tout ce qu'on a vu, nous allons faire un plug-in plus complexe que <em>hoverFade</em>. Je vous propose donc de réaliser une petite galerie de défilement d'images :) .</p><h2 id="r-ce-que-nous-allons-realiser" data-claire-element-id="534068">Ce que nous allons réaliser</h2><p id="r-534066" data-claire-element-id="534066">Notre plug-in agira sur un élément contenant des images, et uniquement des images. Ces images s'afficheront dans cet élément une par une, en s'effaçant progressivement pour faire apparaître la suivante. L'élément affecté deviendra donc une petite galerie d'images à lui tout seul :) .</p><p id="r-534067" data-claire-element-id="534067">Éventuellement, le plug-in ajoutera un lien sur ces images pour les rendre cliquables.</p><h2 id="r-les-parametres-du-plug-in" data-claire-element-id="534088">Les paramètres du plug-in</h2><p id="r-534069" data-claire-element-id="534069">Bien entendu, le plug-in sera personnalisable à travers les paramètres suivants :</p><ul id="r-534084" data-claire-element-id="534084"><li id="r-534071" data-claire-element-id="534071"><p id="r-534070" data-claire-element-id="534070"><strong>interval</strong> : Intervalle entra chaque image, en millisecondes. <em>Défaut : 5000.</em></p></li><li id="r-534073" data-claire-element-id="534073"><p id="r-534072" data-claire-element-id="534072"><strong>width</strong> : Largeur de la galerie. <em>Défaut : '300px'.</em></p></li><li id="r-534075" data-claire-element-id="534075"><p id="r-534074" data-claire-element-id="534074"><strong>height</strong> : Hauteur de la galerie. <em>Défaut : '150px'.</em></p></li><li id="r-534077" data-claire-element-id="534077"><p id="r-534076" data-claire-element-id="534076"><strong>scaleWidth</strong> : Doit-on adapter la largeur de l'image ? <em>Défaut : true.</em></p></li><li id="r-534079" data-claire-element-id="534079"><p id="r-534078" data-claire-element-id="534078"><strong>scaleHeight</strong> : Doit-on adapter la hauteur de l'image ? <em>Défaut : true.</em></p></li><li id="r-534081" data-claire-element-id="534081"><p id="r-534080" data-claire-element-id="534080"><strong>makeLinks</strong> : Doit-on créer des liens ? <em>Défaut : false.</em></p></li><li id="r-534083" data-claire-element-id="534083"><p id="r-534082" data-claire-element-id="534082"><strong>callback</strong> : Fonction appelée à chaque nouvelle image. <em>Défaut : null.</em></p></li></ul><p id="r-534085" data-claire-element-id="534085">Les paramètres <em>scaleWidth</em> et <em>scaleHeight</em> indiquent si le plug-in doit adapter la taille des images aux dimensions de l'élément contenant (définies par <em>width</em> et <em>height</em>).</p><p id="r-534086" data-claire-element-id="534086">Le paramètre <em>callback</em> sera une fonction appelée (si elle est définie bien sûr !) à chaque fois qu'une image apparaît. Cette fonction aura comme paramètre l'image qui vient d'apparaître.</p><p id="r-534087" data-claire-element-id="534087"><em>makeLinks</em> indique si les images seront cliquables ou non. Si oui, on admettra que le plug-in récupérera le lien via l'attribut <strong>alt</strong> des images.</p><h2 id="r-le-code-html" data-claire-element-id="534092">Le code HTML</h2><p id="r-534089" data-claire-element-id="534089">Trouvez ci-dessous le code HTML sur lequel vous pourrez tester votre plug-in (que j'ai nommé très originalement <em>imageSlide</em> :p ) :</p><pre id="r-534090" data-claire-element-id="534090"><code data-claire-semantic="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitionnal//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; &gt;
	&lt;head&gt;
		&lt;title&gt;Le plug-in imageSlide !&lt;/title&gt;
		&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=charset=iso-8859-1&quot; /&gt;
		&lt;script type=&quot;text/javascript&quot; src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js&quot;&gt;&lt;/script&gt;
		&lt;script type=&quot;text/javascript&quot; src=&quot;jquery.imageSlide.js&quot;&gt;&lt;/script&gt;
		&lt;script type=&quot;text/javascript&quot;&gt;			
			$(function()
			{
				$('#galerie').imageSlide(); //Appel par défaut du plug-in
			});
		&lt;/script&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;div style=&quot;text-align: center;&quot;&gt;
			&lt;h1&gt;Le plug-in imageSlide !&lt;/h1&gt;
			&lt;p id=&quot;galerie&quot; style=&quot;margin: auto;&quot;&gt;
				&lt;img src=&quot;1.jpg&quot; title=&quot;Zèbre&quot; alt=&quot;http://fr.wikipedia.org/wiki/Z%C3%A8bre&quot; /&gt;
				&lt;img src=&quot;2.jpg&quot; title=&quot;Pont&quot; alt=&quot;http://fr.wikipedia.org/wiki/Pont&quot; /&gt;
				&lt;img src=&quot;3.jpg&quot; title=&quot;Plage&quot; alt=&quot;http://fr.wikipedia.org/wiki/Plage&quot; /&gt;
				&lt;img src=&quot;4.jpg&quot; title=&quot;Fleurs&quot; alt=&quot;http://fr.wikipedia.org/wiki/Fleur&quot; /&gt;
			&lt;/p&gt;
			&lt;p id=&quot;description&quot;&gt;Zèbre&lt;/p&gt;
			&lt;p style=&quot;tetx-align: right;&quot;&gt;Images provenant de &lt;a href=&quot;http://www.freephotobank.org/&quot;&gt;http://www.freephotobank.org/&lt;/a&gt;.&lt;/p&gt;
		&lt;/div&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-534091" data-claire-element-id="534091">J'ai ajouté un petit paragraphe d'id <strong>description</strong> pour le test du plug-in : celui-ci contiendra le <strong>title</strong> de l'image qui vient d'apparaître. Il vous faudra donc utiliser le paramètre <em>callback</em> pour ça :) .<br/> Les images que j'ai utilisées proviennent du site <a href="http://www.freephotobank.org/">http://www.freephotobank.org/</a> (d'où les crédits dans le code :p ), vous pouvez bien évidemment utiliser les vôtres ^^ .</p><h2 id="r-quelques-conseils-avant-de-commencer" data-claire-element-id="534108">Quelques conseils avant de commencer</h2><p id="r-534093" data-claire-element-id="534093">Le premier conseil que je peux vous donner est de ne pas foncer tête baissée dans le code : c'est le meilleur moyen pour aller droit dans le mur !<br/> Analysez bien la problématique du TP et procédez par étape. Par exemple, commencez par coder le plug-in dans sa façon de fonctionner la plus globale, comme s'il n'avait pas de paramètres, en ne prenant en compte que leurs valeurs par défaut. Une fois que cette version du plug-in fonctionne correctement, et donc que vous avez une base saine, vous pouvez vous attaquer aux paramètres ;) .</p><p id="r-534094" data-claire-element-id="534094">Voici également quelques pistes qui vous seront sans doute utiles :</p><ul id="r-534105" data-claire-element-id="534105"><li id="r-534096" data-claire-element-id="534096"><p id="r-534095" data-claire-element-id="534095">Dans le cas où les images sont plus grandes que la galerie et qu'elles ne doivent pas s'adapter à la taille de ce dernier, il serait préférable de fixer la propriété CSS <strong>overflow</strong> de la galerie à <strong>hidden</strong>.</p></li><li id="r-534098" data-claire-element-id="534098"><p id="r-534097" data-claire-element-id="534097">Pour ne pas vous mélanger trop avec tous les <code data-claire-semantic="javascript">$(this) </code> qui risquent d'y avoir dans votre code, je vous conseille de stocker l'élément principal dans une variable. Ça sera plus clair et plus facile à maintenir :) .</p></li><li id="r-534100" data-claire-element-id="534100"><p id="r-534099" data-claire-element-id="534099">Pour parcourir les images, vous aurez probablement à récupérer le nombre d'images de la galerie. Un compteur vous sera également utile, en particulier combiné avec le sélecteur eq() de <strong>jQuery</strong> ^^ .</p></li><li id="r-534102" data-claire-element-id="534102"><p id="r-534101" data-claire-element-id="534101">Afin d'adapter les dimensions des images à la taille de la galerie, il suffit simplement de mettre les propriétés CSS <strong>width</strong> et/ou <strong>height</strong> à <strong>100%</strong>.</p></li><li id="r-534104" data-claire-element-id="534104"><p id="r-534103" data-claire-element-id="534103">Pour faire propre, vérifiez que le paramètre <em>interval</em> n'est pas trop petit. S'il vaut moins de 1000 millisecondes, fixez-le à 1000 : en effet, si les images défilent trop vite ça risque non seulement de faire mal aux yeux, mais aussi de faire chauffer un peu trop le pauvre moteur JavaScript de l'utilisateur ^^ .</p></li></ul><p id="r-534106" data-claire-element-id="534106">Bon, ça devrait suffire je suppose, je vais vous laisser réfléchir un peu quand même :D .</p><p id="r-534107" data-claire-element-id="534107">Aller, bonne chance à tous !</p><h2 id="r-correction-185" data-claire-element-id="534120">Correction</h2><p id="r-534109" data-claire-element-id="534109">Je vous invite vivement à ne consulter cette correction que si vous avez réellement essayé. Recopier bêtement le code n'aurait aucun intérêt pédagogique et ce tuto ne vous aurait servi à rien :( . Sur ce, voici donc ma solution. Ce n'est pas la seule façon de coder ce plug-in et ce n'est probablement pas la meilleure. Mais au moins elle fonctionne, et elle applique tout ce qu'on a vu :D .</p><pre id="r-534110" data-claire-element-id="534110"><code data-claire-semantic="javascript">(function($)
{ 
	$.fn.imageSlide=function(options)
	{     
            //On définit nos paramètres par défaut
            var defauts=
            {
		'interval': 5000,		//Intervalle entre chaque image, en millisecondes
		'width': '300px',		//Largeur de la galerie
		'height': '150px',		//Hauteur de la galerie
		'scaleWidth': true,		//Doit-on adapter la largeur de l'image ?
		'scaleHeight': true,	        //Doit-on adapter la hauteur de l'image ?
		'makeLinks': false,		//Doit-on créer des liens ?
		'callback': null		//Fonction appelée à chaque nouvelle image
            };  
           
            //On fusionne nos deux objets ! =D
            var parametres=$.extend(defauts, options);
		
	    //Si l'intervalle est trop court, on le fixe à 1 seconde
	    //pour éviter que le défilement soit trop rapide
	    parametres.interval=Math.max(1000,parametres.interval);
		
            return this.each(function()
	    {
			//On stocke notre élément dans une variable par commodité
			var element=$(this);
							
			//On compte le nombre d'images de notre galerie
			var totalImages=element.find('img').length;
			
			//Le compteur pour nous permettre de parcourir les images
			var compteur=0;
				
			//On modifie le style de notre galerie
			element.css(
			{
				'border': '1px solid #000',
				'width': parametres.width,
				'height': parametres.height,
				'overflow': 'hidden'
			}).find('img').each(function(id) //Puis on parcourt enfin chaque image !
			{
				//Si on doit adapter les dimensions des images, on le fait
				if(parametres.scaleWidth)
				{
					$(this).css('width','100%')
				}
				if(parametres.scaleHeight)
				{
					$(this).css('height','100%')
				}
				//Si on fait des liens, on change le curseur et on 
				//enlève la bordure bleue toute moche
				if(parametres.makeLinks)
				{
					$(this).css(
					{
						'cursor': 'pointer',
						'border': '0px'
					});
					//Et on entoure l'image de son lien, récupéré via le alt !
					$(this).wrap('&lt;a href=&quot;'+$(this).attr('alt')+'&quot;&gt;&lt;/a&gt;');
				}					
				
				//On ne fait apparaitre que la première image
				if(id&gt;0)
				{
					$(this).hide();
				}
			});
			
			//Et on définit enfin notre défilement
			setInterval(function()
			{	
				//On récupère l'image actuellement visible et on la fait disparaitre
				element.find('img:eq('+compteur+')').fadeOut(function()
				{						
					//On incrémente le compteur si on n'est pas sur la dernière image
					//Sinon, on le remet à 0		
					if(compteur!=totalImages-1)
					{
						compteur++;
					}
					else
					{
						compteur=0;
					}
					//Et on fait donc apparaitre l'image suivante
					element.find('img:eq('+compteur+')').fadeIn(function()
					{
						//Et si on a une fonction définie, on l'appelle !
						//Et on lui passe notre image en paramètre
						if(parametres.callback)
						{
							parametres.callback($(this));
						}
					});
				});
			},parametres.interval);
		});						   
	};
})(jQuery);</code></pre><p id="r-534111" data-claire-element-id="534111">J'ai commenté le code pour que vous compreniez bien ce que je fais. Vous voyez que le tout est en fait très simple : je me contente d'appliquer ce qu'on l'a vu tout au long du tuto pour la mise en place du plug-in. Tout le reste est du code <strong>jQuery</strong> relativement basique ^^ .</p><p id="r-534112" data-claire-element-id="534112">Si on reprend notre code HTML précédent, voici une des nombreuses façons d'appeler notre plug-in :</p><pre id="r-534113" data-claire-element-id="534113"><code data-claire-semantic="javascript">$('#galerie').imageSlide(
{
	'width': '500px',
	'height': '300px',
	'makeLinks': true,
	'callback': function(image)
	{
		$('#description').text(image.attr('title'));
	}
});</code></pre><p id="r-534114" data-claire-element-id="534114"><a href="http://mariouniversalis.no-ip.org/tutoSdZ/jqueryPlugins/exemple4.html">Tester !</a></p><p id="r-534115" data-claire-element-id="534115">Le rendu final est plutôt sympatoche, non :D ?</p><p id="r-534116" data-claire-element-id="534116">Alors, est-ce difficile de créer son propre plug-in <strong>jQuery</strong> :) ?</p><p id="r-534117" data-claire-element-id="534117">Avec un peu de travail et beaucoup de patience, nous pouvons faire des choses vraiment très intéressantes, à l'image de <a href="http://jqueryui.com/">jQuery UI</a>, plug-in officiel permettant de réaliser de véritables interfaces fluides pour nos utilisateurs.</p><p id="r-534118" data-claire-element-id="534118">Avant de vous laisser partir, je me permets de vous donner un ultime conseil : si vous avez pour ambition de distribuer votre plug-in aux autres développeurs, pensez à bien le documenter ! Que fait-il, comment fonctionne-t-il, comment utiliser ses paramètres etc... La qualité et le succès d'un plug-in dépendent en partie de la clarté de sa documentation, pensez-y ;) .</p><p id="r-534119" data-claire-element-id="534119">Aller, soyez imaginatifs, et développez-nous de beaux plug-ins !</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery">Développez votre propre plug-in jQuery !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-plug-in">
Un... plug-in ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/le-code-minimum-de-notre-plug-in">
Le code minimum de notre plug-in
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/notre-premier-plug-in">
Notre premier plug-in !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-peu-de-personnalite-avec-les-parametres">
Un peu de personnalité avec les paramètres
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/tp-une-galerie-d-images-1">
TP : une galerie d&#039;images
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/developpez-votre-propre-plug-in-jquery/un-peu-de-personnalite-avec-les-parametres">
<span class="arrow"></span>
<span class="next">Un peu de personnalité avec les paramètres</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/developpez-votre-propre-plug-in-jquery.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 05:39:15 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/developpez-votre-propre-plug-in-jquery.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:00:01 GMT -->
</html>