<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/montez-votre-site-dans-le-cloud-avec-google-app-engine.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:32:25 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/montez-votre-site-dans-le-cloud-avec-google-app-engine.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:32:08 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Montez votre site dans le cloud avec Google App Engine</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Montez votre site dans le cloud avec Google App Engine</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#MontezvotresitedanslecloudavecGoogleAppEngine">Montez votre site dans le cloud avec Google App Engine</a><br/><a href="#Quest-cequeGoogleAppEngine">Qu’est-ce que Google App Engine ?</a><br/><a href="#Commentestnlecloud">Comment est né le cloud ?</a><br/><a href="#Commentfonctionnelecloud">Comment fonctionne le cloud ?</a><br/><a href="#GoogleAppEnginelecloudselonGoogle">Google App Engine, le cloud selon Google</a><br/><a href="#InstallerGoogleAppEngineavecEclipse">Installer Google App Engine avec Eclipse</a><br/><a href="#InstallerEclipse">Installer Eclipse</a><br/><a href="#InstallerlepluginGoogleAppEngine">Installer le plugin Google App Engine</a><br/><a href="#Creretdployersapremireapplication">Créer et déployer sa première application</a><br/><a href="#Crationdel039application">Création de l&#039;application</a><br/><a href="#Structuredesfichiersd039unprojetAppEngine">Structure des fichiers d&#039;un projet App Engine</a><br/><a href="#Excuterl039applicationAppEngine">Exécuter l&#039;application App Engine</a><br/><a href="#Dployerl039applicationAppEnginesurlesserveursdeGoogle">Déployer l&#039;application App Engine sur les serveurs de Google</a><br/><a href="#CommentstockerdesdonnesdansleCloud">Comment stocker des données dans le Cloud ?</a><br/><a href="#Uneaffaired039architecturedeserveurs">Une affaire d&#039;architecture de serveurs</a><br/><a href="#Stockerouimaiso">Stocker, oui mais où ?</a><br/><a href="#GoogleCloudSQL">Google Cloud SQL</a><br/><a href="#ActiverGoogleCloudSQLdansl039APIConsole">Activer Google Cloud SQL dans l&#039;API Console</a><br/><a href="#CrerunprojetGoogleCloudSQL">Créer un projet Google Cloud SQL</a><br/><a href="#ExempleCloudSQLdansuneapplication">Exemple : Cloud SQL dans une application</a><br/><a href="#LeDatastore">Le Datastore</a><br/><a href="#ComprendreleDatastore">Comprendre le Datastore</a><br/><a href="#ManipulerleDatastorebasniveau">Manipuler le Datastore à bas niveau</a><br/><a href="#ExempleleDatastoredansuneapplication">Exemple : le Datastore dans une application</a><br/><a href="#ManipulerleDataStoreavecObjectify">Manipuler le DataStore avec Objectify</a><br/><a href="#ConfigurerObjectify">Configurer Objectify</a><br/><a href="#Crerdesobjetspersistables">Créer des objets persistables</a><br/><a href="#Oprationssurlescls">Opérations sur les clés</a><br/><a href="#Lesrequtes">Les requêtes</a><br/><a href="#MiseencacheavecMemcache">Mise en cache avec Memcache</a><br/><a href="#Lestransactions">Les transactions</a><br/><a href="#ExempleObjectifydansuneapplication">Exemple : Objectify dans une application</a><br/><a href="#StockerdesfichierssurGoogleCloudStorage">Stocker des fichiers sur Google Cloud Storage</a><br/><a href="#UploadersurleBlobstore">Uploader sur le Blobstore</a><br/><a href="#PrincipesdeGoogleCloudStorage">Principes de Google Cloud Storage</a><br/><a href="#ActiverGoogleCloudStorage">Activer Google Cloud Storage</a><br/><a href="#RelierCloudStoragesonapplication">Relier Cloud Storage à son application</a><br/><a href="#UtiliserCloudStoragedanssonapplication">Utiliser Cloud Storage dans son application</a><br/><a href="#TPetvoicile...CloudUploader">TP : et voici le... Cloud Uploader</a><br/><a href="#Consignes">Consignes</a><br/><a href="#Correction">Correction</a><br/><a href="#Allerplusloin">Aller plus loin</a><br/><a href="#GoogleAccountsAPIauthentifiezvosvisiteurs">Google Accounts API : authentifiez vos visiteurs</a><br/><a href="#Authentifierlesutilisateurs">Authentifier les utilisateurs</a><br/><a href="#ProtgerdesURLs">Protéger des URLs</a><br/><a href="#MailAPIenvoyezetrceptionnezdese-mails">Mail API : envoyez et réceptionnez des e-mails</a><br/><a href="#Envoyerdese-mails">Envoyer des e-mails</a><br/><a href="#Recevoirdese-mails">Recevoir des e-mails</a><br/><a href="#ImageAPItransformezdesimages">Image API : transformez des images</a><br/><a href="#TransformerdesimagesdepuisleBlobstore">Transformer des images depuis le Blobstore</a><br/><a href="#TransformerdesimagesdepuisleurURL">Transformer des images depuis leur URL</a><br/><a href="#Cronsexcutezdestchesintervallesrguliers">Crons : exécutez des tâches à intervalles réguliers</a><br/><a href="#Configurerdestchescron">Configurer des tâches cron</a><br/><a href="#ProtgerlesURLsdescrons">Protéger les URLs des crons</a><br/><a href="#CloudEndpointscrezdesAPIsetgnrezdesappsAndroidampiPhone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a><br/><a href="#PremierspasavecCloudEndpoints">Premiers pas avec Cloud Endpoints</a><br/><a href="#LesannotationsCloudEndpoints">Les annotations Cloud Endpoints</a><br/></div>
<a name="MontezvotresitedanslecloudavecGoogleAppEngine"></a><h2>Montez votre site dans le cloud avec Google App Engine</h2><div class="content" role="article">
<p id="r-951235" data-claire-element-id="951235">Depuis un moment, on vous bassine avec le même mot : <em>cloud</em>. Vous entendez des choses comme : « Utilise le cloud, et tous tes problèmes seront réglés ! ». Et vous, vous vous demandez ce qui leur prend à parler de <em>cloud</em> à tout va… Le pire, c’est que vous ne savez même pas vraiment ce que c’est !</p><p id="r-951236" data-claire-element-id="951236">Je vous propose de découvrir le fonctionnement du <em>cloud</em> avec Google App Engine. Vous n'avez jamais rêvé d'utiliser les serveurs de Google ? De stocker des informations dans leurs gigantesques bases de données ? D'utiliser des centaines de processeurs pour faire vos calculs les plus gourmands ?</p><p id="r-951237" data-claire-element-id="951237">Google App Engine vous permet d'héberger votre site sur les serveurs de Google et de bénéficier d'une puissance qui peut s'adapter au trafic de votre site. Besoin de plus de serveurs ? Il suffit de demander, ça se met en place tout seul ! Et le mieux dans tout ça, c'est qu'on peut s'en servir gratuitement tant que le trafic ne dépasse par 5 millions de pages vues par mois, ce qui laisse de la marge !</p><p id="r-951238" data-claire-element-id="951238">Direction les nuages !</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Quest-cequeGoogleAppEngine"></a><h2>Qu’est-ce que Google App Engine ?</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
<span class="next">Comment est né le cloud ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-951239" data-claire-element-id="951239">Cloud, cloud, cloud... Les gens n'ont que ce mot-là à la bouche en ce moment ? Qu'est-ce que c'est ? A quoi ça sert ?</p><p id="r-951240" data-claire-element-id="951240">Google App Engine est justement une de ces solutions cloud. C'est un service qui vous permet d’utiliser les mécanismes du &quot;cloud computing&quot; et de bénéficier de leurs avantages pour votre prochain site web.</p><p id="r-951241" data-claire-element-id="951241">Comme vous devez avoir une bonne compréhension globale des principes du cloud avant toute chose, je vais justement vous expliquer dans ce premier chapitre <strong>ce qu’est le cloud</strong> et comment ça fonctionne. Puis, je vous parlerai plus précisément de <strong>Google App Engine</strong>, le cloud « façon Google », pour que vous puissiez décider si vous ferez votre prochain site avec ces nouvelles technologies. :)</p>
</div><a name="Commentestnlecloud"></a><h2>Comment est né le cloud ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">
<span class="arrow"></span>
<span class="next">Qu’est-ce que Google App Engine ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
<span class="next">Comment fonctionne le cloud ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951242" data-claire-element-id="951242">Mettons les choses au clair : « cloud » est d’abord un <em>terme marketing</em>. Voilà pourquoi vous l’entendez souvent. On aimerait que vous disiez « je veux utiliser le cloud pour mon site web »… Bien qu’il s’agisse d’un tutoriel sur le cloud (et donc quelque part à la gloire du cloud !), j’aimerais aiguiser votre esprit critique avant d’aller plus loin.</p><p id="r-951243" data-claire-element-id="951243">Comment est né le mot <em>cloud</em> ? Comment a-t-on découvert et mis en place ces nouvelles techniques ? Laissez-moi vous raconter la petite histoire du cloud à travers l'histoire d'Amazon Web Services, qui a précédé le lancement de Google App Engine.</p><p id="r-951244" data-claire-element-id="951244">Remontons quelques années en arrière. Juillet 2002. Amazon est un site de vente en ligne qui cartonne. Simple site de vente de livres à l’origine, on peut aujourd’hui tout acheter : jeux vidéo, matériel hi-fi, vêtements, chaussures… Pour évoluer et gérer de plus en plus de clients, Amazon a dû construire lui-même une très grosse infrastructure technique. Eh oui, il faut des serveurs, beaucoup de serveurs.</p><h2 id="r-des-datacenters-et-des-serveurs-par-milliers" data-claire-element-id="951259">Des datacenters et des serveurs par milliers</h2><p id="r-951245" data-claire-element-id="951245">Un site comme Amazon est donc hébergé sur d’innombrables serveurs, eux-mêmes regroupés dans des grands entrepôts appelés datacenters. Tous les très gros sites ont leurs propres datacenters, et Google ne fait évidemment pas exception à la règle.</p><figure id="r-un-datacenter-avec-des-baies-de-serveurs" data-claire-element-id="951248"><img id="r-951246" data-claire-element-id="951246" src="medias/uploads.siteduzero.com_files_421001_422000_421022.jpg" alt="Un datacenter avec des baies de serveurs"/><figcaption>Un datacenter avec des baies de serveurs</figcaption></figure><p id="r-951249" data-claire-element-id="951249">On se croirait dans un décor de science-fiction, et pourtant c'est bien dans des endroits comme celui-ci que tous les plus gros sites web du monde sont hébergés (bon ok la photo a peut-être <em>légèrement </em>été retouchée sur Photoshop :-° ).</p><p id="r-951250" data-claire-element-id="951250">Google a diffusé une vidéo de l'un de ses datacenters, c'est assez impressionnant et ça mérite vraiment le coup d'oeil. On peut aussi y naviguer avec <a href="https://maps.google.fr/maps?q=google%2Bdata%2Bcenters&amp;layer=c&amp;z=17&amp;sll=35.898753,-81.547736&amp;cid=7373938251588581469&amp;panoid=oCJRD4a1rZIgwZXh3ay1tw&amp;cbp=13,305.62691451197338,,0,0&amp;hl=fr&amp;gl=fr&amp;ved=0CBAQ2wU&amp;sa=X&amp;ei=1G9mUbO9IOi8iwaaxoCICA">Google Street View</a> !</p><figure id="r-951253" data-claire-element-id="951253"><p id="r-951251" data-claire-element-id="951252"><a href="http://www.youtube.com/watch?feature=player_embedded&amp;v=avP5d16wEp0"><img id="r-951252" data-claire-element-id="951251" src="medias/uploads.siteduzero.com_files_421001_422000_421103.jpg" alt="Vidéo d'un datacenter de Google"/>Vidéo d'un datacenter de Google</a></p></figure><p id="r-951254" data-claire-element-id="951254">Chaque colonne que vous voyez est appelée une baie de serveurs. A l'intérieur, on peut trouver facilement 15, 20, 30 serveurs. Zoomons un peu sur eux:</p><figure id="r-zoom-sur-les-serveurs" data-claire-element-id="951257"><img id="r-951255" data-claire-element-id="951255" src="medias/uploads.siteduzero.com_files_421001_422000_421021.jpg" alt="Zoom sur les serveurs"/><figcaption>Zoom sur les serveurs</figcaption></figure><p id="r-951258" data-claire-element-id="951258">Les serveurs sont des ordinateurs comme les autres. Ils ont des ports USB, des ports Ethernet, et évidemment un bouton Power. ;)</p><h2 id="r-que-faire-des-serveurs-inutilises" data-claire-element-id="951274">Que faire des serveurs inutilisés ?</h2><p id="r-951260" data-claire-element-id="951260">Pour faire face à la demande qui grandissait de jour en jour, Amazon a dû installer des dizaines de milliers de serveurs dans le monde, eux-mêmes répartis dans de multiples datacenters qui lui appartiennent : aux Etats-Unis, en Irlande, en Asie… Ces datacenters ont poussé comme des champignons ces dernières années.</p><p id="r-951261" data-claire-element-id="951261">Tous ces serveurs ne sont pas utilisés en même temps. Certains sont prêts pour faire face à la demande lors des pics de vente (comme Noël). Mais alors, que faire de ces serveurs qui dorment ?</p><p id="r-951262" data-claire-element-id="951262">Les ingénieurs d’Amazon ont alors eu l’idée de les louer à d’autres développeurs web. Mais pas comme n’importe quel hébergeur web qui louerait des serveurs dédiés, attention : Amazon s’est dit « on ne va pas louer la machine physique elle-même mais la puissance de nos machines ». Ainsi, les entreprises n'auront plus besoin d'acheter des tonnes de serveurs comme eux juste pour être prêt en cas de pic de trafic : ils devront simplement demander d'utiliser temporairement plus de serveurs les jours où ils ont plus de visiteurs.</p><div id="r-951264" data-claire-element-id="951264" data-claire-semantic="question"><p id="r-951263" data-claire-element-id="951263">Quelle est la différence avec un hébergeur qui loue des serveurs ? :euh:</p></div><p id="r-951265" data-claire-element-id="951265">Dans le cas d'un hébergement traditionnel, vous achetez ou louez vos propres serveurs. Vous pouvez dire, si vous allez dans le datacenter : « ces serveurs-là, ce sont les miens ! » (et si vous les avez achetés, vous pouvez même graver votre nom dessus :p ).</p><p id="r-951266" data-claire-element-id="951266">Les ingénieurs d’Amazon ont eu l’idée de « cacher » le fonctionnement de leurs serveurs et de vendre uniquement de la puissance de calcul et du stockage. Bien sûr, au final, c’est toujours un vrai serveur qui répond à vos requêtes (un serveur branché sur une prise électrique avec un disque dur et tout !). Mais la différence est que vous ne savez pas quel est le serveur qui répond aux requêtes. Parfois, le serveur change dans la journée et vous n’êtes pas au courant, mais ça n’est pas grave : ce qui compte, c’est que votre site fonctionne toujours !</p><p id="r-951267" data-claire-element-id="951267">L’intérêt de ce fonctionnement, c’est que vous n’avez plus à vous préoccuper des problèmes physiques des machines. Si un disque dur tombe en panne, ce n'est pas à vous d'aller le remplacer. Vous avez juste besoin de demander à votre site de démarrer sur une autre machine.</p><p id="r-951268" data-claire-element-id="951268">Voilà comment le cloud (ou cloud computing) est né. Ca n’a rien de magique : il y a toujours des serveurs, des processeurs et des disques durs. Sauf qu’au lieu de vous louer un serveur précis avec son numéro de série, on vous loue « la puissance d’un serveur » et on vous garantit que le service fonctionnera toujours, même en cas de panne matérielle.</p><aside id="r-951270" data-claire-element-id="951270" data-claire-semantic="information"><p id="r-951269" data-claire-element-id="951269">Le cloud est généralement matérialisé par un nuage qui dit « vous ne voyez pas ce qu’il y a à l’intérieur mais ne vous inquiétez pas ça fonctionne ». Soyons un peu critiques toutefois : les problèmes, même s’ils sont rares, peuvent toujours survenir. Amazon, Google et Microsoft ont tous les trois connu des ennuis avec leur infrastructure de cloud, qui parfois n’a pas fonctionné pendant plusieurs heures à cause d’un gros bug technique.<br/> Heureusement, cela reste rare, mais il faut quand même le savoir !</p></aside><figure id="r-encore-un-disque-grille-j-aurais-du-passer-au-cloud" data-claire-element-id="951273"><img id="r-951271" data-claire-element-id="951271" src="medias/uploads.siteduzero.com_files_421001_422000_421024.jpg" alt="Encore un disque grillé... j'aurais dû passer au cloud !"/><figcaption>Encore un disque grillé... j'aurais dû passer au cloud !</figcaption></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">
<span class="arrow"></span>
<span class="next">Qu’est-ce que Google App Engine ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
<span class="next">Comment fonctionne le cloud ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Commentfonctionnelecloud"></a><h2>Comment fonctionne le cloud ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
<span class="arrow"></span>
<span class="next">Comment est né le cloud ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
<span class="next">Google App Engine, le cloud selon Google</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951276" data-claire-element-id="951276">Bon, c'est bien beau tout ça, mais si on rentrait un peu dans le vif du sujet ? Par exemple, comment fonctionne le cloud ? Ah... Ca, c'est une question délicate, parce qu'il existe plusieurs types de cloud !</p><h2 id="r-les-differents-types-de-cloud-1" data-claire-element-id="951295">Les différents types de cloud</h2><p id="r-951277" data-claire-element-id="951277">Si le cloud est difficile à saisir pour beaucoup de gens, c’est parce que c’est un terme très large qui englobe beaucoup de concepts. Je vous propose pour commencer de retenir les termes suivants, qui font tous partie de la grande famille du cloud :</p><ul id="r-951286" data-claire-element-id="951286"><li id="r-951280" data-claire-element-id="951280"><p id="r-951278" data-claire-element-id="951278"><strong>IaaS</strong> (Infrastructure as a Service) : un prestataire vous fournit un accès à tout ou partie de son infrastructure technique, c’est-à-dire à ses serveurs. C’est ce que faisait Amazon à ses débuts dans l'histoire que je viens de vous raconter (ils font d'autres services cloud aussi maintenant).</p><p id="r-951279" data-claire-element-id="951279"><em>Analogie : imaginez que vous faites un voyage à travers les Etats-Unis avec 3 amis. Vous avez besoin d’une voiture ; vous faites donc appel à un service de location de voitures. Si la voiture a un problème technique, vous devrez juste la ramener chez le loueur et on vous en donnera une autre. Ce n'est pas à vous de régler les problèmes de moteur de la voiture. <br/> Avec un IaaS, vous déléguez donc la gestion de ces problèmes matériels. En revanche, si d’autres amis décident de se joindre à votre voyage en cours de route, il faudra demander vous-mêmes d’autres voitures pour transporter tout ce petit monde.</em></p></li><li id="r-951283" data-claire-element-id="951283"><p id="r-951281" data-claire-element-id="951281"><strong>PaaS</strong> (Platform as a Service) : on vous fournit non seulement un accès à l’infrastructure, mais on s’occupe aussi de gérer le nombre de machines nécessaires pour que votre application fonctionne bien quelle que soit la charge de trafic. On vous donne aussi accès à des fonctionnalités comme par exemple des bases de données, des serveurs de cache, des serveurs d’e-mail… C’est le cas de Google App Engine : vous bénéficiez des serveurs de Google pour stocker votre site, mais aussi des fonctionnalités très puissantes de gestion de la charge, un accès aux bases de données Google, aux serveurs d’envoi d’e-mails, etc.</p><p id="r-951282" data-claire-element-id="951282"><em>Analogie : reprenons notre voyage à travers les Etats-Unis avec un groupe d’amis. Avec un PaaS, vous ne louez plus directement les voitures : vous embauchez les services d’une personne responsable de vérifier si le voyage se déroule toujours dans les meilleures conditions (appelons cette personne le “concierge”).<br/> Si 3 nouveaux amis vous rejoignent en cours de route, le concierge s’en apercevra et louera une seconde voiture sans que vous ayez besoin de le demander. Si d’un coup 20 nouveaux amis se joignent à votre voyage, il remplacera les voitures par un bus qu’il affrêtera spécialement pour vous.<br/> C’est exactement ce que fait un PaaS comme Google App Engine : il vérifie que les visiteurs qui vont sur votre site le font dans les meilleures conditions. Il rajoute ou retire des serveurs en fonction du trafic. Vous pourriez presque lui demander des rafraîchissements quand vous avez soif ! ;)</em></p></li><li id="r-951285" data-claire-element-id="951285"><p id="r-951284" data-claire-element-id="951284"><strong>SaaS</strong> (Software as a Service) : on vous fournit l’accès à un logiciel sous forme de service. Avant, vous deviez installer le logiciel sur votre machine (ex : Microsoft Office). Aujourd’hui, le logiciel se présente sous la forme d’une application web (qui n’est rien d’autre qu’une sorte de super site web !). Vous devez juste vous rendre à une adresse et vous pouvez l’utiliser (ex : Microsoft Office 360, Google Apps…).</p></li></ul><p id="r-951287" data-claire-element-id="951287">La différence entre un IaaS et un PaaS est ce qu'il y a de plus difficile à comprendre. Je me suis permis de résumer mon analogie de la location de voiture dans un schéma pour vous aider à retenir le principe :</p><figure id="r-la-difference-entre-un-iaas-et-un-paas-imagee-avec-un-exemple" data-claire-element-id="951290"><img id="r-951288" data-claire-element-id="951288" src="medias/uploads.siteduzero.com_files_421001_422000_421374.png" alt="La différence entre un IaaS et un PaaS imagée avec un exemple"/><figcaption>La différence entre un IaaS et un PaaS imagée avec un exemple</figcaption></figure><p id="r-951291" data-claire-element-id="951291">Toutes ces offres de Cloud fournissent des services à différents niveaux. Comme les langages de programmation, certains services sont &quot;bas niveau&quot; (proche de la machine) et d'autres sont &quot;haut niveau&quot; (grosse abstraction, éloignée du fonctionnement de la machine) :</p><figure id="r-les-differents-types-de-cloud" data-claire-element-id="951294"><img id="r-951292" data-claire-element-id="951292" src="medias/uploads.siteduzero.com_files_421001_422000_421264.png" alt="Les différents types de cloud"/><figcaption>Les différents types de cloud</figcaption></figure><h2 id="r-le-calcul-du-cout" data-claire-element-id="951306">Le calcul du coût</h2><p id="r-951296" data-claire-element-id="951296">Une des grandes innovations du cloud computing, c’est qu’on vous facture uniquement la puissance dont vous avez besoin. Avant, vous deviez prendre et payer 50 serveurs au cas où il y ait un pic de trafic sur votre site. Aujourd’hui, le nombre de serveurs que vous utilisez peut changer d’une minute à l’autre. On vous facture les serveurs à l’heure, et parfois même à la minute ou à la seconde !</p><p id="r-951297" data-claire-element-id="951297">Si vous avez un pic de trafic sur votre site, vous paierez un petit peu plus pendant quelques heures mais vous n’aurez pas besoin d’acheter et de monter des serveurs dont vous n’aurez peut-être plus besoin ensuite.</p><p id="r-951298" data-claire-element-id="951298">La plupart des services de cloud peuvent être utilisés gratuitement pour commencer. Si vous avez besoin d’un tout petit peu de puissance, c’est donc gratuit !</p><div id="r-951300" data-claire-element-id="951300" data-claire-semantic="question"><p id="r-951299" data-claire-element-id="951299">Comment ?! Mais il faut bien payer à un moment non ?</p></div><p id="r-951301" data-claire-element-id="951301">Oui, mais seulement si votre site grossit et commence à accueillir beaucoup de visiteurs. Dans ce cas, vous aurez besoin de plus de puissance et il faudra commencer à payer.</p><p id="r-951302" data-claire-element-id="951302">Chez Google App Engine, vous pouvez par exemple utiliser gratuitement le service avec 1 Go de stockage et l’équivalent de 5 millions de pages vues par mois.</p><p id="r-951303" data-claire-element-id="951303">A vous de surveiller votre consommation ensuite car les services de cloud peuvent finir par être coûteux si votre site commence à grossir beaucoup !</p><aside id="r-951305" data-claire-element-id="951305" data-claire-semantic="information"><p id="r-951304" data-claire-element-id="951304">Google App Engine vous permet d'indiquer combien vous êtes prêts à payer par jour pour héberger votre site. Si vous dépassez cette limite, vous ne serez pas facturé plus, mais votre site refusera des visiteurs. A vous ensuite de décider si vous êtes prêts à augmenter cette limite, mais au moins vous ne risquez pas de surprise avec une grosse facture en fin de mois. :)</p></aside><h2 id="r-cloud-or-no-cloud" data-claire-element-id="951325">Cloud or no cloud ?</h2><p id="r-951307" data-claire-element-id="951307">Faut-il partir sur une infrastructure cloud pour votre prochain site ? Il n’y a que vous qui puissiez le décider. Voici quelques éléments vous permettant de faire votre choix en toute objectivité si vous hésitez à vous lancer dans une plateforme PaaS comme Google App engine :</p><ul id="r-951316" data-claire-element-id="951316"><li id="r-951309" data-claire-element-id="951309"><p id="r-951308" data-claire-element-id="951308">Le cloud vous permet de commencer gratuitement dans la plupart des cas.</p></li><li id="r-951311" data-claire-element-id="951311"><p id="r-951310" data-claire-element-id="951310">Vous n’avez rien à faire si le trafic de votre site grossit : vous utiliserez automatiquement plus de serveurs (et ferez chauffer votre CB :-° ).</p></li><li id="r-951313" data-claire-element-id="951313"><p id="r-951312" data-claire-element-id="951312">Vous n’avez pas à gérer les problèmes techniques « bas niveau » comme la perte d’un disque dur ou même d’un serveur entier. Tout cela est transparent pour vous.</p></li><li id="r-951315" data-claire-element-id="951315"><p id="r-951314" data-claire-element-id="951314">Dans le cas d’un PaaS comme Google App Engine, vous bénéficiez de fonctionnalités très pratiques qui vous évitent d’avoir à installer et maintenir un serveur de base de données, d’e-mails, etc.</p></li></ul><p id="r-951317" data-claire-element-id="951317">En revanche :</p><ul id="r-951324" data-claire-element-id="951324"><li id="r-951319" data-claire-element-id="951319"><p id="r-951318" data-claire-element-id="951318">Vous devez adapter votre site pour qu’il fonctionne avec les limitations et fonctionnalités offertes par votre PaaS. Il y a des règles à suivre quand vous développez : vous n'avez en général pas accès au système d'exploitation du serveur et vous ne pouvez pas y stocker des fichiers. Il faut les stocker sur d'autres serveurs en faisant appel à un <em>service</em> de stockage.</p></li><li id="r-951321" data-claire-element-id="951321"><p id="r-951320" data-claire-element-id="951320">Si vous voulez changer de prestataire, c’est compliqué. Il faut parfois recoder tout ou partie de votre site pour qu’il fonctionne sur un autre PaaS.</p></li><li id="r-951323" data-claire-element-id="951323"><p id="r-951322" data-claire-element-id="951322">Les bugs techniques sont rares mais peuvent toujours survenir, quoique le service marketing veuille bien tenter de vous faire croire. Ne faites pas une confiance aveugle dans votre cloud et demandez des SLA (Service Level Agreement) pour garantir financièrement le bon fonctionnement du site si vous êtes une entreprise et que le site est critique pour vous. Avec des SLA, le fournisseur aura des pénalités si votre site ne fonctionne pas pendant plusieurs heures par sa faute.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
<span class="arrow"></span>
<span class="next">Comment est né le cloud ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
<span class="next">Google App Engine, le cloud selon Google</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="GoogleAppEnginelecloudselonGoogle"></a><h2>Google App Engine, le cloud selon Google</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
<span class="arrow"></span>
<span class="next">Comment fonctionne le cloud ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">
<span class="next">Installer Google App Engine avec Eclipse</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951327" data-claire-element-id="951327">Rentrons un peu plus dans le détail du fonctionnement de Google App Engine. Pour commencer, il faut savoir que Google propose plusieurs services cloud :</p><ul id="r-951338" data-claire-element-id="951338"><li id="r-951329" data-claire-element-id="951329"><p id="r-951328" data-claire-element-id="951328"><strong>App Engine</strong> : le service PaaS de Google, la star de la maison. De gros sites comme Khan Academy ou Pulse l’utilisent. <em>C'est ce service que nous étudierons dans ce tutoriel.</em></p></li><li id="r-951331" data-claire-element-id="951331"><p id="r-951330" data-claire-element-id="951330"><strong>Compute Engine</strong> : le service IaaS de Google. Si vous avez besoin de puissance de calcul brute (pour calculer des modèles mathématiques par exemple), c’est ce qu’il faut utiliser.</p></li><li id="r-951333" data-claire-element-id="951333"><p id="r-951332" data-claire-element-id="951332"><strong>Cloud Storage</strong> : un service potentiellement « illimité » de stockage de fichiers dans le cloud. C'est donc un... DaaS. C'est bien, je vois que vous suivez. :p</p></li><li id="r-951335" data-claire-element-id="951335"><p id="r-951334" data-claire-element-id="951334"><strong>Big Query</strong> : des fonctionnalités permettant d’analyser de grosses quantités de données en peu de temps (on parle de Big Data). Très utile pour les entreprises qui veulent faire de la Business Intelligence (BI) pour avoir des indicateurs de tendance basés parfois sur plusieurs Tera Octets de données.</p></li><li id="r-951337" data-claire-element-id="951337"><p id="r-951336" data-claire-element-id="951336"><strong>Cloud SQL</strong> : une base de données MySQL distribuée dans le cloud. Vous n’avez pas besoin d’installer ni de mettre à jour MySQL. Pas même besoin de le configurer. Vous pouvez créer des serveurs SQL répliqués en quelques clics si vous avez besoin de plus de puissance.</p></li></ul><figure id="r-les-services-de-cloud-de-google" data-claire-element-id="951341"><img id="r-951339" data-claire-element-id="951339" src="medias/uploads.siteduzero.com_files_421001_422000_421046.png" alt="Les services de Cloud de Google"/><figcaption>Les services de Cloud de Google</figcaption></figure><h2 id="r-comment-fonctionne-app-engine" data-claire-element-id="951348">Comment fonctionne App Engine ?</h2><p id="r-951342" data-claire-element-id="951342">Le rôle d'App Engine est de &quot;masquer&quot; le fonctionnement et la complexité des serveurs de Google. Lorsqu'un visiteur se connecte à votre site, il arrive sur le <em>load balancer</em> (répartiteur de charge) de Google, qui va chercher un serveur disponible et pas trop chargé pour gérer la demande de votre visiteur. Si votre site a besoin d'accéder à des données, ce qui est fréquent, il fera appel à une autre zone de serveurs appelée DataStore (c'est en quelque sorte la base de données).</p><p id="r-951343" data-claire-element-id="951343">Tout ceci est résumé dans ce schéma fourni par Google :</p><figure id="r-951346" data-claire-element-id="951346"><p id="r-951344" data-claire-element-id="951345"><a href="medias/uploads.siteduzero.com_files_421001_422000_421026.png"><img id="r-951345" data-claire-element-id="951344" src="medias/uploads.siteduzero.com_thb_421001_422000_421026.png" alt="L'architecture de Google App Engine"/>L'architecture de Google App Engine</a></p></figure><p id="r-951347" data-claire-element-id="951347">Pas besoin de le comprendre et de le retenir par coeur. :p <br/> Retenez simplement ce que je viens de vous expliquer, ce sera déjà pas mal !</p><h2 id="r-quels-langages-sont-supportes-par-app-engine" data-claire-element-id="951363">Quels langages sont supportés par App Engine ?</h2><p id="r-951349" data-claire-element-id="951349">Les plateformes PaaS comme Google App Engine supportent un nombre limité de langages de programmation. En effet, elles fournissent des fonctionnalités supplémentaires sous la forme de bibliothèques, il faut donc que Google ait développé les fonctionnalités correspondantes pour ces langages.</p><p id="r-951350" data-claire-element-id="951350">Voici les 3 langages supportés par Google à l’heure actuelle (cette liste est susceptible de s'agrandir à l'avenir) :</p><ul id="r-951357" data-claire-element-id="951357"><li id="r-951352" data-claire-element-id="951352"><p id="r-951351" data-claire-element-id="951351">Java</p></li><li id="r-951354" data-claire-element-id="951354"><p id="r-951353" data-claire-element-id="951353">Python</p></li><li id="r-951356" data-claire-element-id="951356"><p id="r-951355" data-claire-element-id="951355">Go</p></li></ul><aside id="r-951359" data-claire-element-id="951359" data-claire-semantic="information"><p id="r-951358" data-claire-element-id="951358">En réalité, tout langage pouvant utiliser la machine virtuelle Java peut aussi fonctionner : c’est le cas de Ruby et de Scala par exemple. Dans la pratique, la plupart des gens utilisent soit Java, soit Python. Go est un langage créé par Google assez spécifique et encore expérimental, nous n’en parlerons pas ici.</p></aside><p id="r-951360" data-claire-element-id="951360">Dans ce cours, je supposerai que vous savez déjà créer des sites web avec un de ces langages. Mes exemples seront basés sur un site Java EE développé en Java. Allez donc lire les cours sur <a href="../www.siteduzero.com/informatique/tutoriels/apprenez-a-programmer-en-java.html">Java</a> et <a href="../www.siteduzero.com/informatique/tutoriels/creez-votre-application-web-avec-java-ee.html">Java EE</a> (ou sur <a href="../www.siteduzero.com/informatique/tutoriels/apprenez-a-programmer-en-python.html">Python</a> et <a href="../www.siteduzero.com/informatique/tutoriels/developpez-votre-site-web-avec-le-framework-django.html">Django</a>) pour apprendre la création de sites web dynamiques avec ces langages.</p><p id="r-951361" data-claire-element-id="951361">Lorsque vous saurez créer des sites en Java ou Python, vous pourrez ensuite découvrir avec moi comment on fait des sites dans le cloud avec Google App Engine !</p><p id="r-951362" data-claire-element-id="951362">Allez, vous en savez assez sur le cloud. :) <br/> Dans le prochain chapitre, nous allons voir comment mettre en place les outils de développement pour créer un site web en Java en utilisant Google App Engine. Nous allons en fait simuler le fonctionnement des serveurs de Google sur notre propre machine pour créer notre site !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
<span class="arrow"></span>
<span class="next">Comment fonctionne le cloud ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">
<span class="next">Installer Google App Engine avec Eclipse</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="InstallerGoogleAppEngineavecEclipse"></a><h2>Installer Google App Engine avec Eclipse</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
<span class="arrow"></span>
<span class="next">Google App Engine, le cloud selon Google</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
<span class="next">Installer Eclipse</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-951366" data-claire-element-id="951366">Maintenant que nous savons un peu mieux ce qu'est le Cloud et en quoi consiste Google App Engine, si nous passions un peu à la pratique ? Avant de commencer à développer notre premier site utilisant App Engine, il va nous falloir transformer notre ordinateur en &quot;mini-serveur Google&quot; pour pouvoir faire plus facilement nos tests par la suite.</p><p id="r-951367" data-claire-element-id="951367">Heureusement, Google nous fournit tous les outils dont nous avons besoin pour développer. Ces outils varient en fonction du langage que vous utilisez : Java, Python ou Go. Comme je vous l'ai dit, je ne peux pas présenter tous les langages à la fois, j'ai donc choisi de faire mes exemples en Java.<br/> (<em>insérez ici le traditionnel troll sur Java une bonne fois pour toutes, qu'on puisse continuer tranquillement ensuite :-° </em>)</p><p id="r-951368" data-claire-element-id="951368">La plupart des développeurs Java saints de corps et d'esprit (oui ça existe) utilisent un IDE comme Eclipse. Google y a pensé et nous fournit justement un kit de développement App Engine sous la forme d'un plugin Eclipse !</p><aside id="r-951370" data-claire-element-id="951370" data-claire-semantic="information"><p id="r-951369" data-claire-element-id="951369">Pour information, Google fournit aussi le <a href="https://developers.google.com/appengine/docs/java/tools/maven">support de Maven</a> pour les projets App Engine. Cela intéressera ceux qui ont l'habitude de l'utiliser pour générer leurs projets Java EE.</p></aside>
</div><a name="InstallerEclipse"></a><h2>Installer Eclipse</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">
<span class="arrow"></span>
<span class="next">Installer Google App Engine avec Eclipse</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
<span class="next">Installer le plugin Google App Engine</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951371" data-claire-element-id="951371">Si vous avez l'habitude de développer en Java et de faire du Java EE, vous devriez déjà utiliser Eclipse régulièrement. Vous pouvez donc sauter cette étape qui ne vous apprendra rien de nouveau.</p><p id="r-951372" data-claire-element-id="951372">Cependant, si vous n'avez pas déjà Eclipse, et puisqu'un rappel ne fait jamais de mal, voici ce qu'il faut faire : il faut télécharger Eclipse (nooon ?). Allez sur la section <a href="http://www.eclipse.org/downloads/">téléchargement d'Eclipse</a> et sélectionnez la version d'Eclipse de votre choix.</p><p id="r-951373" data-claire-element-id="951373">La version la plus téléchargée est &quot;Eclipse for Java EE developers&quot;, c'est celle qui convient le mieux dans notre cas. Si vous utilisez une autre version vous ne devriez pas rencontrer de problème rassurez-vous.</p><figure id="r-951375" data-claire-element-id="951376"><img id="r-951374" data-claire-element-id="951374" src="medias/uploads.siteduzero.com_files_421001_422000_421047.png" alt="Image utilisateur"/></figure><p id="r-951377" data-claire-element-id="951377">Lors du premier lancement, Eclipse vous demandera de choisir un &quot;workspace&quot;, un dossier dans lequel il déposera vos projets de développement Java. Vous pouvez laisser la valeur proposée par défaut et continuer.</p><aside id="r-951379" data-claire-element-id="951379" data-claire-semantic="warning"><p id="r-951378" data-claire-element-id="951378">Eclipse étant lui-même un programme Java, vous devez avoir installé Java auparavant. Vous aurez besoin du JDK (Java Development Kit) pour l'utiliser. <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Téléchargez le JDK</a> sur le site d'Oracle si vous ne l'avez pas déjà.</p></aside><aside id="r-951381" data-claire-element-id="951381" data-claire-semantic="information"><p id="r-951380" data-claire-element-id="951380">Vous m'excuserez, je passe volontairement un peu vite sur tout ça, car ce ne sont normalement que des rappels pour vous. Si vous êtes perdus, c'est que vous ne connaissez probablement pas <a href="../www.siteduzero.com/informatique/tutoriels/apprenez-a-programmer-en-java.html">Java</a> et <a href="../www.siteduzero.com/informatique/tutoriels/creez-votre-application-web-avec-java-ee.html">Java EE</a>. Lisez les tutoriels correspondants avant d'utiliser Google App Engine. :)</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">
<span class="arrow"></span>
<span class="next">Installer Google App Engine avec Eclipse</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
<span class="next">Installer le plugin Google App Engine</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="InstallerlepluginGoogleAppEngine"></a><h2>Installer le plugin Google App Engine</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
<span class="arrow"></span>
<span class="next">Installer Eclipse</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">
<span class="next">Créer et déployer sa première application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951383" data-claire-element-id="951383">Installer le plugin Google App Engine dans Eclipse est vraiment très simple. Allez dans le menu <strong>Help &gt; Install New Software</strong>.</p><p id="r-951384" data-claire-element-id="951384">Une fenêtre apparaît, où l'on vous demande où trouver de nouveaux plugins. Rentrez l'adresse suivante (si vous avez la version 4.2 d'Eclipse comme moi, sinon changez l'URL) :</p><p id="r-951385" data-claire-element-id="951385"><a href="http://dl.google.com/eclipse/plugin/4.2">http://dl.google.com/eclipse/plugin/4.2</a></p><p id="r-951386" data-claire-element-id="951386">Appuyez sur Entrée. La liste des plugins disponibles se charge. Je vous invite à cocher ceux-ci :</p><ul id="r-951393" data-claire-element-id="951393"><li id="r-951388" data-claire-element-id="951388"><p id="r-951387" data-claire-element-id="951387">Google Plugin for Eclipse</p></li><li id="r-951390" data-claire-element-id="951390"><p id="r-951389" data-claire-element-id="951389">SDK &gt; Google App Engine Java SDK</p></li><li id="r-951392" data-claire-element-id="951392"><p id="r-951391" data-claire-element-id="951391">SDK &gt; Google Web Toolkit SDK (facultatif)</p></li></ul><p id="r-951394" data-claire-element-id="951394">Votre fenêtre devrait alors ressembler à ceci :</p><figure id="r-selection-des-plugins-a-installer" data-claire-element-id="951397"><img id="r-951395" data-claire-element-id="951395" src="medias/uploads.siteduzero.com_files_421001_422000_421048.png" alt="Sélection des plugins à installer"/><figcaption>Sélection des plugins à installer</figcaption></figure><p id="r-951398" data-claire-element-id="951398">Vous pouvez installer d'autres plugins si vous le voulez mais ça ne nous sera pas nécessaire ici. Cliquez ensuite sur Next.</p><figure id="r-validation-des-elements-a-installer" data-claire-element-id="951401"><img id="r-951399" data-claire-element-id="951399" src="medias/uploads.siteduzero.com_files_421001_422000_421052.png" alt="Validation des éléments à installer"/><figcaption>Validation des éléments à installer</figcaption></figure><p id="r-951402" data-claire-element-id="951402">On vous demande de vérifier ce que vous allez installer. Cliquez encore sur Next.</p><figure id="r-validation-de-la-licence" data-claire-element-id="951405"><img id="r-951403" data-claire-element-id="951403" src="medias/uploads.siteduzero.com_files_421001_422000_421049.png" alt="Validation de la licence"/><figcaption>Validation de la licence</figcaption></figure><p id="r-951406" data-claire-element-id="951406">Vous devez valider la licence d'utilisation. Cliquez sur &quot;I accept the terms of the license agreements&quot; et continuez. L'installation devrait commencer.</p><p id="r-951407" data-claire-element-id="951407">Au bout d'un moment, vous verrez le message suivant :</p><figure id="r-validation-de-la-signature" data-claire-element-id="951410"><img id="r-951408" data-claire-element-id="951408" src="medias/uploads.siteduzero.com_files_421001_422000_421050.png" alt="Validation de la signature"/><figcaption>Validation de la signature</figcaption></figure><p id="r-951411" data-claire-element-id="951411">Pas de panique. Eclipse avertit qu'il y a du contenu non signé (qui pourrait ne pas provenir de Google) dans ce que vous téléchargez. En réalité il n'y a pas de problème, cliquez sur OK pour continuer l'installation.</p><p id="r-951412" data-claire-element-id="951412">A la fin, on vous demandera de redémarrer Eclipse pour finaliser l'installation :</p><figure id="r-redemarrage-d-eclipse" data-claire-element-id="951415"><img id="r-951413" data-claire-element-id="951413" src="medias/uploads.siteduzero.com_files_421001_422000_421051.png" alt="Redémarrage d'Eclipse"/><figcaption>Redémarrage d'Eclipse</figcaption></figure><p id="r-951416" data-claire-element-id="951416">Une fois Eclipse redémarré, c'est fini ! Si vous lancez un nouveau projet ou que vous fermez simplement l'écran de bienvenue, vous devriez voir une icône Google (représentée par un &quot;g&quot;) qui vous donne accès aux fonctionnalités de Google App Engine que nous avons installé :</p><figure id="r-le-menu-google-dans-eclipse" data-claire-element-id="951419"><img id="r-951417" data-claire-element-id="951417" src="medias/uploads.siteduzero.com_files_421001_422000_421053.png" alt="Le menu Google dans Eclipse"/><figcaption>Le menu Google dans Eclipse</figcaption></figure><p id="r-951420" data-claire-element-id="951420">Voilà, vous avez installé Google App Engine sur votre ordinateur et vous êtes maintenant prêts à programmer ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
<span class="arrow"></span>
<span class="next">Installer Eclipse</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">
<span class="next">Créer et déployer sa première application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Creretdployersapremireapplication"></a><h2>Créer et déployer sa première application</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
<span class="arrow"></span>
<span class="next">Installer le plugin Google App Engine</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
<span class="next">Création de l&#039;application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-951423" data-claire-element-id="951423">Maintenant que nous avons installé Eclipse et le plugin Google App Engine, tout est prêt pour que nous commencions à créer notre première application App Engine !</p><p id="r-951424" data-claire-element-id="951424">Dans ce chapitre, nous allons nous familiariser avec les outils que nous donne le plugin App Engine. Vous allez voir que créer une première application est vraiment très très simple. Nous irons même jusqu'à la déployer (c'est-à-dire la mettre en ligne) sur les serveurs de Google !</p><p id="r-951425" data-claire-element-id="951425">Je vous rappelle que vous devez déjà avoir des connaissances sur Java EE pour suivre ce tutoriel (je voudrais bien tout vous réexpliquer mais ce serait vraiment trop long, et puis on a un <a href="../www.siteduzero.com/informatique/tutoriels/creez-votre-application-web-avec-java-ee.html">super tutoriel sur le Site du Zéro sur Java EE</a> !). Je montrerai rapidement certains concepts, comme les servlets et les JSP, sans trop m'attarder dessus. Je vous montrerai surtout ce qui <em>change</em> par rapport à une application Java EE classique.</p>
</div><a name="Crationdel039application"></a><h2>Création de l&#039;application</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">
<span class="arrow"></span>
<span class="next">Créer et déployer sa première application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
<span class="next">Structure des fichiers d&#039;un projet App Engine</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951426" data-claire-element-id="951426">Pour créer une nouvelle application App Engine, utilisez le bouton &quot;g&quot; de Google qui a été ajouté lorsque vous avez installé le plugin. Sélectionnez &quot;New Web Application Project&quot;.</p><figure id="r-nouvelle-application-app-engine" data-claire-element-id="951429"><img id="r-951427" data-claire-element-id="951427" src="medias/uploads.siteduzero.com_files_421001_422000_421060.png" alt="Nouvelle application App Engine"/><figcaption>Nouvelle application App Engine</figcaption></figure><p id="r-951430" data-claire-element-id="951430">Un assistant de création de projet s'ouvre. A l'intérieur :</p><ul id="r-951439" data-claire-element-id="951439"><li id="r-951432" data-claire-element-id="951432"><p id="r-951431" data-claire-element-id="951431">Donnez un nom à votre premier projet (par exemple &quot;MaPremiereApplication&quot;)</p></li><li id="r-951434" data-claire-element-id="951434"><p id="r-951433" data-claire-element-id="951433">Donnez un nom au Package que vous allez créer (par exemple &quot;maPremiereApplication&quot;)</p></li><li id="r-951436" data-claire-element-id="951436"><p id="r-951435" data-claire-element-id="951435">Vérifiez que les cases &quot;Use Google App Engine&quot; et &quot;Generate project sample code&quot; sont cochées.</p></li><li id="r-951438" data-claire-element-id="951438"><p id="r-951437" data-claire-element-id="951437">En revanche, décochez &quot;Use Google Web Toolkit&quot; si vous l'avez installé, il ne nous sera pas utile ici et alourdira inutilement le projet.</p></li></ul><figure id="r-preparation-de-l-application" data-claire-element-id="951442"><img id="r-951440" data-claire-element-id="951440" src="medias/uploads.siteduzero.com_files_421001_422000_421061.png" alt="Préparation de l'application"/><figcaption>Préparation de l'application</figcaption></figure><p id="r-951443" data-claire-element-id="951443">Cliquez sur Finish. Le plugin App Engine se charge de créer et d'organiser les fichiers de votre application tout seul !</p><p id="r-951444" data-claire-element-id="951444">Et si on regardait un peu comment ces fichiers sont organisés maintenant ? :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">
<span class="arrow"></span>
<span class="next">Créer et déployer sa première application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
<span class="next">Structure des fichiers d&#039;un projet App Engine</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Structuredesfichiersd039unprojetAppEngine"></a><h2>Structure des fichiers d&#039;un projet App Engine</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
<span class="arrow"></span>
<span class="next">Création de l&#039;application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
<span class="next">Exécuter l&#039;application App Engine</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951446" data-claire-element-id="951446">En générant notre premier projet, le plugin App Engine a créé toute une architecture de fichiers et de dossiers. Elle ne devrait pas trop vous dépayser si vous avez l'habitude de développer en Java EE.</p><figure id="r-structure-des-fichiers-d-un-projet-app-engine" data-claire-element-id="951449"><img id="r-951447" data-claire-element-id="951447" src="medias/uploads.siteduzero.com_files_421001_422000_421062.png" alt="Structure des fichiers d'un projet App Engine"/><figcaption>Structure des fichiers d'un projet App Engine</figcaption></figure><p id="r-951450" data-claire-element-id="951450">J'ai surligné les fichiers qui méritent qu'on y jette un oeil. Je vous propose qu'on en parle un petit peu. :)</p><h2 id="r-mapremiereappservelet-java" data-claire-element-id="951457">MaPremiereAppServelet.java</h2><p id="r-951451" data-claire-element-id="951451">C'est un fichier de code source Java. On l'appelle <em>servlet</em> quand on développe des applications web Java EE.</p><p id="r-951452" data-claire-element-id="951452">Ce fichier contient une classe qui peut interagir avec le serveur web. Elle peut récupérer les données envoyées par le visiteur depuis un formulaire et les traiter par exemple.</p><p id="r-951453" data-claire-element-id="951453">Le code généré par le plugin ressemble à ceci :</p><pre id="r-951454" data-claire-element-id="951454"><code data-claire-semantic="java">package maPremiereApp;

import java.io.IOException;
import javax.servlet.http.*;

@SuppressWarnings(&quot;serial&quot;)
public class MaPremiereAppServlet extends HttpServlet {
	public void doGet(HttpServletRequest req, HttpServletResponse resp)
			throws IOException {
		resp.setContentType(&quot;text/plain&quot;);
		resp.getWriter().println(&quot;Hello, world&quot;);
	}
}</code></pre><p id="r-951455" data-claire-element-id="951455">Tout se passe dans la méthode doGet() qui est appelée quand le visiteur demande la page. Ici, la servlet ne fait rien de particulier : elle affiche &quot;Hello, world&quot; sur la page sous forme de texte brut. Elle pourrait néanmoins faire beaucoup d'autres choses, comme récupérer les données envoyées par un formulaire, demander à les stocker dans une base de données de Google, envoyer des emails à l'aide des serveurs utilisés par GMail et bien d'autres choses. Nous verrons comment faire tout cela dans les prochains chapitres !</p><p id="r-951456" data-claire-element-id="951456">Cette servlet ressemble en tous points à une servlet d'application Java EE classique, si ce n'est qu'on peut accéder à tous les services offerts par les bibliothèques d'App Engine.</p><h2 id="r-appengine-web-xml" data-claire-element-id="951496">appengine-web.xml</h2><p id="r-951458" data-claire-element-id="951458">C'est un fichier de configuration propre à App Engine. C'est en fait le seul de la liste que je vous présente qui diffère d'un projet Java EE classique (si on ne tient pas compte des nombreuses bibliothèques d'App Engine qui ont été chargées mais que nous n'avons aucun besoin d'ouvrir).</p><p id="r-951459" data-claire-element-id="951459">Eclipse a la fâcheuse tendance à afficher ce fichier dans une interface spécifique, alors que ce n'est en fait qu'un simple fichier XML :</p><figure id="r-eclipse-affiche-les-xml-dans-une-interface-specifique" data-claire-element-id="951462"><img id="r-951460" data-claire-element-id="951460" src="medias/uploads.siteduzero.com_files_421001_422000_421063.png" alt="Eclipse affiche les XML dans une interface spécifique"/><figcaption>Eclipse affiche les XML dans une interface spécifique</figcaption></figure><p id="r-951463" data-claire-element-id="951463">Pour changer de mode de visualisation, cliquez sur l'onglet &quot;Source&quot; en bas à gauche. Vous devriez alors voir le vrai code XML :</p><pre id="r-951464" data-claire-element-id="951464"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;appengine-web-app xmlns=&quot;http://appengine.google.com/ns/1.0&quot;&gt;
  &lt;application&gt;&lt;/application&gt;
  &lt;version&gt;1&lt;/version&gt;

  &lt;!--
    Allows App Engine to send multiple requests to one instance in parallel:
  --&gt;
  &lt;threadsafe&gt;true&lt;/threadsafe&gt;

  &lt;!-- Configure java.util.logging --&gt;
  &lt;system-properties&gt;
    &lt;property name=&quot;java.util.logging.config.file&quot; value=&quot;WEB-INF/logging.properties&quot;/&gt;
  &lt;/system-properties&gt;

  &lt;!--
    HTTP Sessions are disabled by default. To enable HTTP sessions specify:

      &lt;sessions-enabled&gt;true&lt;/sessions-enabled&gt;

    It's possible to reduce request latency by configuring your application to
    asynchronously write HTTP session data to the datastore:

      &lt;async-session-persistence enabled=&quot;true&quot; /&gt;

    With this feature enabled, there is a very small chance your app will see
    stale session data. For details, see
    http://code.google.com/appengine/docs/java/config/appconfig.html#Enabling_Sessions
  --&gt;

&lt;/appengine-web-app&gt;</code></pre><p id="r-951465" data-claire-element-id="951465">Le fichier est assez simple en fait. Google a laissé quelques commentaires pour nous aiguiller si on veut compléter le fichier.</p><div id="r-951467" data-claire-element-id="951467" data-claire-semantic="question"><p id="r-951466" data-claire-element-id="951466">A quoi sert ce fichier en fait ?</p></div><p id="r-951468" data-claire-element-id="951468">Il donne des informations générales sur votre application App Engine : son nom, sa version... Il permet d'activer certaines fonctionnalités comme les sessions, des services de Google, etc.</p><h3 id="r-le-nom-et-la-version" data-claire-element-id="951475">Le nom et la version</h3><p id="r-951469" data-claire-element-id="951469">Pour le moment, l'application n'a pas de nom. On devrait d'ailleurs plus exactement parler d'identifiant, car l'application doit avoir un nom unique sur les serveurs de Google, nous verrons cela un peu plus tard.</p><p id="r-951470" data-claire-element-id="951470">Le numéro de version permet, lui, d'identifier la version de votre application. Vous pouvez tester une nouvelle version de votre application en ligne pendant que vos visiteurs sont sur une ancienne version. Et lorsque vous trouvez que votre nouvelle version fonctionne bien, il ne vous faudra que quelques clics dans l'interface d'administration de Google pour rediriger vos visiteurs vers la nouvelle version !</p><p id="r-951471" data-claire-element-id="951471">Par exemple, si votre site a pour nom &quot;monsupersite&quot;, il sera accessible par défaut à cette adresse :</p><p id="r-951472" data-claire-element-id="951472"><a href="http://monsupersite.appspot.com/">http://monsupersite.appspot.com</a></p><p id="r-951473" data-claire-element-id="951473">Et si vous voulez tester spécifiquement la version 57 de votre application, il vous suffira d'aller à l'adresse :</p><p id="r-951474" data-claire-element-id="951474"><a href="http://57.monsupersite.appspot.com/">http://57.monsupersite.appspot.com</a></p><h3 id="r-la-declaration-des-fichiers-statiques" data-claire-element-id="951495">La déclaration des fichiers statiques</h3><p id="r-951476" data-claire-element-id="951476">Le fichier appengine-web.xml permet aussi d'indiquer où se trouvent les fichiers statiques de votre site, c'est-à-dire les images (PNG, JPEG...), les CSS, les Javascript, etc. En gros, tout ce qui n'est pas du code Java.</p><p id="r-951477" data-claire-element-id="951477">Tous les fichiers de votre site n'ont pas besoin de subir de traitement particulier par les serveurs de Google. Un PNG est un PNG, il n'est (normalement) pas modifié par le serveur avant envoi au visiteur, alors qu'une servlet requiert une exécution par un processeur. On vous demande donc d'indiquer où sont ces fichiers statiques pour que Google puisse les mettre à part sur des serveurs spécifiques qui n'ont pas besoin d'autant de puissance processeur.</p><figure id="r-les-fichiers-statiques-sont-stockes-sur-des-serveurs-differents-des-servlets-et-jsps" data-claire-element-id="951480"><img id="r-951478" data-claire-element-id="951478" src="medias/uploads.siteduzero.com_files_421001_422000_421064.png" alt="Les fichiers statiques sont stockés sur des serveurs différents des servlets et JSPs"/><figcaption>Les fichiers statiques sont stockés sur des serveurs différents des servlets et JSPs</figcaption></figure><p id="r-951481" data-claire-element-id="951481">L'avantage de mettre les fichiers statiques sur des serveurs spécifiques, c'est que Google peut ainsi les dupliquer sur plusieurs serveurs via un CDN (Content Delivery Network). Ainsi, chaque visiteur ira récupérer les fichiers statiques sur le serveur le plus proche de lui, ce qui rendra leur téléchargement plus rapide. :)</p><figure id="r-avec-un-cdn-le-visiteur-telecharge-les-fichiers-depuis-le-serveur-le-plus-proche" data-claire-element-id="951484"><img id="r-951482" data-claire-element-id="951482" src="medias/uploads.siteduzero.com_files_421001_422000_421104.png" alt="Avec un CDN, le visiteur télécharge les fichiers depuis le serveur le plus proche"/><figcaption>Avec un CDN, le visiteur télécharge les fichiers depuis le serveur le plus proche</figcaption></figure><p id="r-951485" data-claire-element-id="951485">Pour indiquer à Google quels sont les fichiers statiques, vous devrez ajouter des balises XML incluant ou excluant des fichiers. Par exemple :</p><pre id="r-951486" data-claire-element-id="951486"><code data-claire-semantic="xml">&lt;static-files&gt;
    &lt;include path=&quot;/**.png&quot; /&gt;
    &lt;include path=&quot;/javascript/*.js&quot; /&gt;
    &lt;exclude path=&quot;/generator/**.png&quot; /&gt;
&lt;/static-files&gt;</code></pre><p id="r-951487" data-claire-element-id="951487">On a 2 règles d'inclusion et 1 règle d'exclusion dans cet exemple :</p><ul id="r-951494" data-claire-element-id="951494"><li id="r-951489" data-claire-element-id="951489"><p id="r-951488" data-claire-element-id="951488">Tous les fichiers .png seront considérés comme statiques et entreposés dans des serveurs de stockage (à une exception près que je vous indiquerai juste après). Les deux étoiles ** signifient que Google peut aller chercher les .png dans tous les sous-dossiers.</p></li><li id="r-951491" data-claire-element-id="951491"><p id="r-951490" data-claire-element-id="951490">Tous les fichiers .js dans le dossier /javascript uniquement seront considérés statiques.</p></li><li id="r-951493" data-claire-element-id="951493"><p id="r-951492" data-claire-element-id="951492">En revanche, les fichiers .png du dossier &quot;generator&quot; seront exclus des fichiers statiques (ils seront bien placés sur les serveurs d'exécution). C'est utile si, par exemple, le dossier generator contient en réalité du code Java qui génère des PNG et qui les présente sous la forme de fichiers PNG pour le navigateur.</p></li></ul><h2 id="r-web-xml" data-claire-element-id="951509">web.xml</h2><p id="r-951497" data-claire-element-id="951497">C'est le fichier de configuration &quot;classique&quot; de votre application Java EE. Il ne faut pas le confondre avec appengine-web.xml :</p><ul id="r-951502" data-claire-element-id="951502"><li id="r-951499" data-claire-element-id="951499"><p id="r-951498" data-claire-element-id="951498">appengine-web.xml contient la configuration de votre application Java EE App Engine, c'est-à-dire de tout ce qui est spécifique à App Engine dans votre application (comme la définition de fichiers statiques pour que Google sache sur quels serveurs les placer).</p></li><li id="r-951501" data-claire-element-id="951501"><p id="r-951500" data-claire-element-id="951500">web.xml contient la configuration générale de votre application Java EE, comme par exemple la liste des servlets et l'adresse correspondant à chacune d'elle sur votre site.</p></li></ul><p id="r-951503" data-claire-element-id="951503">Ce fichier est couramment modifié quand on développe une application Java EE. Il devrait vous être familier. Ici, pour le moment, le fichier contient ceci :</p><pre id="r-951504" data-claire-element-id="951504"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;
xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; version=&quot;2.5&quot;&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;MaPremiereApp&lt;/servlet-name&gt;
		&lt;servlet-class&gt;maPremiereApp.MaPremiereAppServlet&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;MaPremiereApp&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/mapremiereapp&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;welcome-file-list&gt;
		&lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
	&lt;/welcome-file-list&gt;
&lt;/web-app&gt;</code></pre><p id="r-951505" data-claire-element-id="951505">On voit par exemple que la servlet MaPremiereApp (dont on a vu le code Java tout à l'heure) est appelée quand le visiteur essaie d'accéder à la page /mapremiereapp de votre site.<br/> Le fichier index.html est appelé par défaut à la racine de votre site. C'est donc lui qui sera chargé comme page d'accueil.</p><h3 id="r-index-html-2" data-claire-element-id="951508">index.html</h3><p id="r-951506" data-claire-element-id="951506">C'est la page qui sera affichée à votre visiteur à l'accueil de votre site. Il s'agit d'une page HTML tout ce qu'il y a de plus basique.</p><p id="r-951507" data-claire-element-id="951507">Nous pouvons bien entendu la modifier ou même demander au fichier web.xml d'appeler une servlet à la place de cette page statique pour l'accueil de notre site.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
<span class="arrow"></span>
<span class="next">Création de l&#039;application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
<span class="next">Exécuter l&#039;application App Engine</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Excuterl039applicationAppEngine"></a><h2>Exécuter l&#039;application App Engine</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
<span class="arrow"></span>
<span class="next">Structure des fichiers d&#039;un projet App Engine</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
<span class="next">Déployer l&#039;application App Engine sur les serveurs de Google</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951511" data-claire-element-id="951511">Pour tester votre site, il suffit de cliquer sur le bouton &quot;Debug&quot; (ou &quot;Run&quot;) de la barre d'outils, et de sélectionner : &quot;Debug as&quot; &gt; &quot;Web Application&quot; :</p><figure id="r-execution-de-l-application-depuis-eclipse" data-claire-element-id="951514"><img id="r-951512" data-claire-element-id="951512" src="medias/uploads.siteduzero.com_files_421001_422000_421065.png" alt="Exécution de l'application depuis Eclipse"/><figcaption>Exécution de l'application depuis Eclipse</figcaption></figure><p id="r-951515" data-claire-element-id="951515">La console en bas d'Eclipse devrait afficher des messages pendant quelques secondes avant d'indiquer : &quot;<em>INFO: Dev App Server is now running</em>&quot;. Cela signifie que le mini-serveur Google tourne maintenant sur votre machine et que vous pouvez tester votre site !</p><p id="r-951516" data-claire-element-id="951516">Si vous regardez bien, on vous indique à quelle adresse locale vous pouvez tester votre site :</p><p id="r-951517" data-claire-element-id="951517">INFO: Server default is running at http://localhost:8888/</p><p id="r-951518" data-claire-element-id="951518">Allez donc à l'adresse http://localhost:8888 dans votre navigateur, vous devriez voir la page d'accueil s'afficher :</p><figure id="r-ouverture-du-site-dans-le-navigateur-sur-localhost-8888" data-claire-element-id="951521"><img id="r-951519" data-claire-element-id="951519" src="medias/uploads.siteduzero.com_files_421001_422000_421066.png" alt="Ouverture du site dans le navigateur (sur localhost:8888)"/><figcaption>Ouverture du site dans le navigateur (sur localhost:8888)</figcaption></figure><p id="r-951522" data-claire-element-id="951522">Il s'agit là du fichier index.html que nous avons vu tout à l'heure dans le projet sous Eclipse. Si vous cliquez sur le lien &quot;MaPremiereApp&quot;, la servlet MaPremiereApp sera chargée et s'exécutera. Comme je vous l'ai dit, cette servlet ne fait rien de bien excitant pour le moment : elle affiche juste &quot;Hello, world&quot; !</p><figure id="r-affichage-de-la-servlet-dans-le-navigateur" data-claire-element-id="951525"><img id="r-951523" data-claire-element-id="951523" src="medias/uploads.siteduzero.com_files_421001_422000_421067.png" alt="Affichage de la servlet dans le navigateur"/><figcaption>Affichage de la servlet dans le navigateur</figcaption></figure><p id="r-951526" data-claire-element-id="951526">Il faut aussi savoir que Google génère automatiquement une administration pour contrôler et surveiller votre site. Vous pouvez y accéder en allant à l'adresse http://localhost:8888/_ah/admin :</p><figure id="r-l-administration-automatiquement-generee-par-google-pour-gerer-votre-application" data-claire-element-id="951529"><img id="r-951527" data-claire-element-id="951527" src="medias/uploads.siteduzero.com_files_421001_422000_421068.png" alt="L'administration automatiquement générée par Google pour gérer votre application"/><figcaption>L'administration automatiquement générée par Google pour gérer votre application</figcaption></figure><p id="r-951530" data-claire-element-id="951530">D'ici, vous pourrez surveiller votre application : voir les données stockées dans le Datastore (la &quot;base de données Google&quot;, que nous étudierons plus tard), simuler des emails entrants, désactiver des fonctionnalités pour voir le comportement de l'application en mode dégradé, etc.</p><p id="r-951531" data-claire-element-id="951531">Bon, nous avons exécuté l'application qui a été générée par Google, ce n'était pas bien difficile. Je vous propose de la déployer maintenant sur les serveurs de Google. :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
<span class="arrow"></span>
<span class="next">Structure des fichiers d&#039;un projet App Engine</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
<span class="next">Déployer l&#039;application App Engine sur les serveurs de Google</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Dployerl039applicationAppEnginesurlesserveursdeGoogle"></a><h2>Déployer l&#039;application App Engine sur les serveurs de Google</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
<span class="arrow"></span>
<span class="next">Exécuter l&#039;application App Engine</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">
<span class="next">Comment stocker des données dans le Cloud ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951533" data-claire-element-id="951533">Pour pouvoir envoyer notre application App Engine sur les serveurs de Google, nous devons d'abord réserver un identifiant d'application. Nous pourrons ensuite dans un second temps déployer l'application directement depuis Eclipse !</p><h2 id="r-declarer-l-application-aupres-de-google" data-claire-element-id="951554">Déclarer l'application auprès de Google</h2><p id="r-951534" data-claire-element-id="951534">Commencez par vous rendre à l'adresse suivante : <a href="https://appengine.google.com/">https://appengine.google.com/</a><br/> C'est ici que vous pourrez créer et gérer vos application App Engine.</p><p id="r-951535" data-claire-element-id="951535">Si vous n'avez pas déjà de compte Google (un compte GMail par exemple) il vous faudra en créer un et vous connecter. Une fois que c'est fait, vous devriez voir l'écran suivant :</p><figure id="r-l-interface-d-administration-de-vos-projets-app-engine-chez-google" data-claire-element-id="951538"><img id="r-951536" data-claire-element-id="951536" src="medias/uploads.siteduzero.com_files_421001_422000_421069.png" alt="L'interface d'administration de vos projets App Engine chez Google"/><figcaption>L'interface d'administration de vos projets App Engine chez Google</figcaption></figure><p id="r-951539" data-claire-element-id="951539">Cliquez sur &quot;Create Application&quot; pour commencer la déclaration de votre application chez Google. La première fois, on vous demandera sûrement une authentification supplémentaire, pour &quot;éviter les abus&quot; vous dit-on. Il suffit d'indiquer votre numéro de téléphone portable, d'attendre de recevoir un SMS contenant un code secret et de l'écrire sur la page.</p><p id="r-951540" data-claire-element-id="951540">Une fois que c'est fait, un simple formulaire vous demande de créer l'identifiant de votre application et de lui donner un nom :</p><figure id="r-creation-de-l-application-4" data-claire-element-id="951543"><img id="r-951541" data-claire-element-id="951541" src="medias/uploads.siteduzero.com_files_421001_422000_421070.png" alt="Création de l'application"/><figcaption>Création de l'application</figcaption></figure><p id="r-951544" data-claire-element-id="951544">Vous devrez utiliser un identifiant d'application libre. Cliquez sur &quot;Check Availability&quot; pour vérifier si celui que vous voulez prendre est disponible.</p><p id="r-951545" data-claire-element-id="951545">Le formulaire vous demande si vous voulez restreindre les utilisateurs qui se connecteront sur votre site à des comptes Google spécifiques à un domaine (par exemple le domaine d'une entreprise si vous faites une application pour votre entreprise). N'y touchez pas, ça ne nous sert à rien ici.</p><p id="r-951546" data-claire-element-id="951546">Validez la licence... et voilà !</p><p id="r-951547" data-claire-element-id="951547">On vous propose un lien vers le dashboard (tableau de bord) de votre application. D'ici, vous pouvez voir tout ce qui se passe sur votre site et contrôler toute votre application !</p><figure id="r-administration-de-l-application" data-claire-element-id="951550"><img id="r-951548" data-claire-element-id="951548" src="medias/uploads.siteduzero.com_files_421001_422000_421071.png" alt="Administration de l'application"/><figcaption>Administration de l'application</figcaption></figure><div id="r-951552" data-claire-element-id="951552" data-claire-semantic="question"><p id="r-951551" data-claire-element-id="951551">Quelle est la différence entre cette zone admin et celle que nous avons vue un peu plus tôt après avoir testé le site en local ?</p></div><p id="r-951553" data-claire-element-id="951553">L'admin du site local permet de faire des tests précis pour débugger temporairement votre application. En revanche, l'admin que vous avez maintenant sous les yeux est beaucoup plus complète : elle vous donne des indications sur l'application qui est en ligne et disponible à tous. Vous pouvez voir le trafic, mettre en maintenance votre site, augmenter la puissance des serveurs, et bien d'autres choses ! :)</p><h2 id="r-deploiement-direction-les-serveurs-de-google" data-claire-element-id="951583">Déploiement : direction les serveurs de Google !</h2><p id="r-951555" data-claire-element-id="951555">Maintenant que Google nous connaît et que nous avons réservé un identifiant, nous pouvons retourner dans Eclipse et envoyer notre site !</p><p id="r-951556" data-claire-element-id="951556">Il faut d'abord indiquer l'identifiant de l'application dans le fichier appengine-web.xml dans la balise <code data-claire-semantic="xml">&lt;application&gt;&lt;/application&gt;</code> :</p><pre id="r-951557" data-claire-element-id="951557"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;appengine-web-app xmlns=&quot;http://appengine.google.com/ns/1.0&quot;&gt;
  &lt;application&gt;sdz-mapremiereapp&lt;/application&gt;
  &lt;version&gt;1&lt;/version&gt;</code></pre><aside id="r-951559" data-claire-element-id="951559" data-claire-semantic="error"><p id="r-951558" data-claire-element-id="951558">Ne copiez pas le même nom d'application que moi ! Je l'ai réservé en rédigeant ce tutoriel, vous ne pouvez donc pas avoir créé une application ayant le même nom que moi.<br/> Indiquez le nom que vous avez réservé à la place.</p></aside><p id="r-951560" data-claire-element-id="951560">Vous pouvez maintenant déployer ! Allez dans le menu Google et cliquez sur &quot;Deploy to App Engine&quot; :</p><figure id="r-demandez-le-deploiement-depuis-le-menu-google" data-claire-element-id="951563"><img id="r-951561" data-claire-element-id="951561" src="medias/uploads.siteduzero.com_files_421001_422000_421072.png" alt="Demandez le déploiement depuis le menu Google"/><figcaption>Demandez le déploiement depuis le menu Google</figcaption></figure><p id="r-951564" data-claire-element-id="951564">La première fois, on vous demandera de vous connecter à votre compte Google pour qu'on puisse vous identifier. Rentrez votre login et votre mot de passe. Une fois connecté, on vous demande de valider avant de déployer :</p><figure id="r-validation-avant-deploiement" data-claire-element-id="951567"><img id="r-951565" data-claire-element-id="951565" src="medias/uploads.siteduzero.com_files_421001_422000_421073.png" alt="Validation avant déploiement"/><figcaption>Validation avant déploiement</figcaption></figure><p id="r-951568" data-claire-element-id="951568">Cliquez tout simplement sur &quot;Deploy&quot; : votre site part alors sur les serveurs de Google comme un grand !</p><figure id="r-le-deploiement-est-en-cours-vous-n-avez-rien-a-faire" data-claire-element-id="951571"><img id="r-951569" data-claire-element-id="951569" src="medias/uploads.siteduzero.com_files_421001_422000_421074.png" alt="Le déploiement est en cours, vous n'avez rien à faire !"/><figcaption>Le déploiement est en cours, vous n'avez rien à faire !</figcaption></figure><aside id="r-951573" data-claire-element-id="951573" data-claire-semantic="information"><p id="r-951572" data-claire-element-id="951572">Le déploiement d'une application App Engine est une sorte de FTP amélioré. Vous n'avez pas besoin d'indiquer les fichiers qui ont changé, Google se charge de tout !</p></aside><p id="r-951574" data-claire-element-id="951574">Voilà, votre site est maintenant disponible à une adresse de la forme : http://<em>applicationid</em>.appspot.com (remplacez <em>applicationid</em> par l'identifiant de votre application).</p><p id="r-951575" data-claire-element-id="951575">Dans mon cas, l'application est disponible à cette adresse :</p><p id="r-951576" data-claire-element-id="951576"><a href="http://sdz-mapremiereapp.appspot.com/">http://sdz-mapremiereapp.appspot.com/</a></p><p id="r-951577" data-claire-element-id="951577">Allez-y, je l'ai envoyée au moment où j'ai écrit ce tutoriel et elle tourne toujours à l'heure où vous lisez ces lignes ! Google se charge de gérer les serveurs et de faire en sorte que les sites web soient toujours en ligne, c'est l'intérêt justement d'utiliser une solution de cloud PaaS (Platform as a Service) comme Google App Engine. :)</p><div id="r-951579" data-claire-element-id="951579" data-claire-semantic="question"><p id="r-951578" data-claire-element-id="951578">Mais... Mon site est dans un sous-domaine de appspot.com, je n'aime pas l'adresse que ça lui donne ! Il n'y a pas moyen de changer ça ? :o</p></div><p id="r-951580" data-claire-element-id="951580">Bien sûr que si ! :D</p><p id="r-951581" data-claire-element-id="951581">Vous pouvez tout à fait faire en sorte que votre site soit disponible depuis <a href="http://www.monsupersite.com/">www.monsupersite.com</a> (si vous avez acheté le nom de domaine), pour ne pas que vos visiteurs voient un &quot;appspot.com&quot; qui n'a rien à faire là pour eux.</p><p id="r-951582" data-claire-element-id="951582">Il faut aller dans l'administration de l'application, section &quot;Administration&quot; &gt; &quot;Application Settings&quot; et cliquer sur le bouton &quot;Add Domain&quot; dans &quot;Domain Setup&quot;. Il faudra associer au préalable le domaine avec Google Apps et modifier les entrées DNS auprès du registrar chez qui vous avez acheté le nom de domaine. Toutes les instructions sont données dans la <a href="https://developers.google.com/appengine/docs/domain?hl=fr">documentation de Google</a>. Allez, ne faites pas cette tête, un peu de lecture de documentation ne peut pas vous faire de mal !</p><h2 id="r-et-maintenant-7" data-claire-element-id="951586">Et maintenant</h2><p id="r-951584" data-claire-element-id="951584">Bravo, vous avez réussi à déployer votre première application Google App Engine !</p><p id="r-951585" data-claire-element-id="951585">Dans la suite de ce cours, nous allons découvrir dans le détail toutes les fonctionnalités offertes par Google App Engine : comment stocker des données dans le Datastore, comment authentifier les utilisateurs depuis leur compte Google, envoyer des e-mails, gérer le cache et bien d'autres choses !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
<span class="arrow"></span>
<span class="next">Exécuter l&#039;application App Engine</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">
<span class="next">Comment stocker des données dans le Cloud ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CommentstockerdesdonnesdansleCloud"></a><h2>Comment stocker des données dans le Cloud ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
<span class="arrow"></span>
<span class="next">Déployer l&#039;application App Engine sur les serveurs de Google</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
<span class="next">Une affaire d&#039;architecture de serveurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-951590" data-claire-element-id="951590">Le stockage de données est le point le plus important, que dis-je, le plus fondamental, le plus <em>crucial</em> d'une application web ! Où stocker la liste de vos membres ? Les messages qu'ils postent ? Les commandes qu'ils effectuent ? Les fichiers qu'ils envoient ?</p><p id="r-951591" data-claire-element-id="951591">Ce n'est pas un hasard si, après avoir découvert les bases d'App Engine, nous enchaînons tout de suite sur le stockage des données. C'est vraiment le vif du sujet.</p><p id="r-951592" data-claire-element-id="951592">Bien sûr, App Engine nous offre beaucoup d'autres services (et je vous les présenterai dans une prochaine partie). Mais votre site web ne sert à rien si vous ne savez pas comment y stocker des données. Nous allons donc passer du temps à découvrir les choix qui s'offrent à nous dans ce chapitre, puis à apprendre à nous servir des différents moyens de stockage à notre disposition dans les prochains chapitres.</p><p id="r-951593" data-claire-element-id="951593">Vous allez voir, avec une architecture Cloud comme Google App Engine il y a des choses qu'on avait pris l'habitude de faire qui ne sont plus possibles. Ecrire un fichier sur le disque du serveur est par exemple interdit ! Pourquoi ? Ah ah, il y a une vraie raison à ça, je vais vous l'expliquer. :)</p>
</div><a name="Uneaffaired039architecturedeserveurs"></a><h2>Une affaire d&#039;architecture de serveurs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">
<span class="arrow"></span>
<span class="next">Comment stocker des données dans le Cloud ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
<span class="next">Stocker, oui mais où ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951594" data-claire-element-id="951594">Avant d'aller plus loin, il faut qu'on parle ensemble de l'architecture des serveurs d'un site web. C'est une notion indispensable pour comprendre la suite.</p><p id="r-951595" data-claire-element-id="951595">Comme vous le savez peut-être, les serveurs peuvent fournir différents <em>services</em> :</p><ul id="r-951602" data-claire-element-id="951602"><li id="r-951597" data-claire-element-id="951597"><p id="r-951596" data-claire-element-id="951596"><strong>Le serveur web</strong> : c'est lui qui répond directement aux requêtes des clients et qui exécute les instructions de la page en Java, Python, PHP... Son rôle revient grosso modo le plus souvent à renvoyer une page HTML au client.</p></li><li id="r-951599" data-claire-element-id="951599"><p id="r-951598" data-claire-element-id="951598"><strong>Le serveur de stockage de fichiers</strong> : il se contente de stocker des fichiers statiques (donc pas de Java, Python ou PHP là-dedans!). Ca concerne aussi bien les images de votre site, les images uploadées par vos visiteurs, les fichiers CSS, les fichiers JS, etc. Ces fichiers peuvent être efficacement servis via un CDN (un ensemble de serveurs répartis sur la planète).</p></li><li id="r-951601" data-claire-element-id="951601"><p id="r-951600" data-claire-element-id="951600"><strong>Le serveur de base de données</strong> : il enregistre les informations de façon structurée. Il stocke la liste des membres, la liste des messages, la liste des commandes, etc.</p></li></ul><p id="r-951603" data-claire-element-id="951603">Ces serveurs peuvent être tous regroupés au sein d'une même machine physique. Une seule machine peut en théorie faire toutes ces choses-là à la fois. C'est l'architecture serveur la plus simple :</p><figure id="r-l-architecture-la-plus-simple-un-seul-serveur-fait-tous-les-services" data-claire-element-id="951606"><img id="r-951604" data-claire-element-id="951604" src="medias/uploads.siteduzero.com_files_421001_422000_421385.png" alt="L'architecture la plus simple : un seul serveur fait tous les services"/><figcaption>L'architecture la plus simple : un seul serveur fait tous les services</figcaption></figure><p id="r-951607" data-claire-element-id="951607">Cette architecture est la plus facile à mettre en place. Mais elle a un gros défaut : si la machine rend l'âme, votre site web ne fonctionnera plus du tout ! Pire, si le disque dur est grillé et que vous n'avez pas de sauvegardes, non seulement vous perdez toutes les données de la base, mais aussi tous les fichiers stockés !</p><p id="r-951608" data-claire-element-id="951608">Pour remédier à ce problème, on commence par séparer les services sur différentes machines physiques :</p><figure id="r-les-services-sont-repartis-sur-des-serveurs-differents" data-claire-element-id="951611"><img id="r-951609" data-claire-element-id="951609" src="medias/uploads.siteduzero.com_files_421001_422000_421386.png" alt="Les services sont répartis sur des serveurs différents"/><figcaption>Les services sont répartis sur des serveurs différents</figcaption></figure><p id="r-951612" data-claire-element-id="951612">Cette architecture est déjà bien meilleure. On évite de surcharger le serveur web (souvent appelé le &quot;frontal web&quot;) car on répartit le reste des activités sur d'autres serveurs : un serveur de stockage de fichiers, un serveur de base de données...</p><aside id="r-951614" data-claire-element-id="951614" data-claire-semantic="information"><p id="r-951613" data-claire-element-id="951613">Comme vous le voyez, les clients accèdent directement au frontal web (pour lui demander la page HTML) et au serveur de fichiers (pour lui demander les autres fichiers statiques, comme les CSS, JS, images...). En revanche ils n'ont pas à accéder au serveur de base de données directement. C'est le frontal web qui y fait appel pour récupérer des informations stockées et construire la page HTML.</p></aside><p id="r-951615" data-claire-element-id="951615">Mais il y a toujours un défaut : si le disque du serveur de base de données rend l'âme, il n'y a plus de base de données ! Si le frontal web devient surchargé, il ne peut plus traiter les demandes et n'a plus assez de puissance pour exécuter les fichiers Java / Python / PHP / etc. Du coup, on commence à redonder chaque serveur pour chaque service. On en met plusieurs :</p><figure id="r-on-redonde-les-serveurs-pour-eviter-les-pannes-et-avoir-plus-de-puissance" data-claire-element-id="951618"><img id="r-951616" data-claire-element-id="951616" src="medias/uploads.siteduzero.com_files_421001_422000_421387.png" alt="On redonde les serveurs pour éviter les pannes et avoir plus de puissance"/><figcaption>On redonde les serveurs pour éviter les pannes et avoir plus de puissance</figcaption></figure><p id="r-951619" data-claire-element-id="951619">Et là ça devient vraiment compliqué : comment indiquer au client quel serveur il doit appeler ? Comment gérer la charge de chaque machine ? Comment empêcher que des clients appellent une machine qui ne répond plus ?</p><p id="r-951620" data-claire-element-id="951620">C'est là qu'un service de Cloud en PaaS comme Google App Engine fait des merveilles : il simplifie toute la gestion des serveurs pour que vous n'ayez plus à vous en préoccuper. Vous n'avez plus besoin de savoir ce qui se passe au niveau des serveurs.</p><p id="r-951621" data-claire-element-id="951621">En général, on représente ce principe de façon très simple : sous la forme d'un nuage qui masque la complexité (d'où le nom &quot;cloud&quot;).</p><figure id="r-le-cloud-masque-la-gestion-des-serveurs-pour-vous-simplifier-la-vie" data-claire-element-id="951624"><img id="r-951622" data-claire-element-id="951622" src="medias/uploads.siteduzero.com_files_421001_422000_421388.png" alt="Le Cloud masque la gestion des serveurs pour vous simplifier la vie"/><figcaption>Le Cloud masque la gestion des serveurs pour vous simplifier la vie</figcaption></figure><p id="r-951625" data-claire-element-id="951625">Cette simplicité apparente ne doit pas vous tromper. Si vous ne manipulez plus les serveurs directement, vous allez quand même devoir utiliser les <em>services </em>fournis par Google dans votre application pour qu'elle fonctionne. Quels sont ces services ? C'est ce que nous allons voir maintenant !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">
<span class="arrow"></span>
<span class="next">Comment stocker des données dans le Cloud ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
<span class="next">Stocker, oui mais où ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Stockerouimaiso"></a><h2>Stocker, oui mais où ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
<span class="arrow"></span>
<span class="next">Une affaire d&#039;architecture de serveurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">
<span class="next">Google Cloud SQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951627" data-claire-element-id="951627">Nous venons de voir que l'architecture des serveurs du Cloud était... nébuleuse. On ne sait pas combien de serveurs sont utilisés par Google App Engine : ce nombre augmente ou diminue tout seul au fil du temps. Il ne faut plus penser en serveurs mais en <em>services</em>. App Engine nous fournit une flopée de services pour résoudre nos problèmes les plus courants. Dans cette partie du cours, nous nous intéressons aux services de stockage.</p><h2 id="r-les-services-de-stockage-d-app-engine" data-claire-element-id="951666">Les services de stockage d'App Engine</h2><p id="r-951628" data-claire-element-id="951628">Réfléchissez un instant. Qu'avez-vous l'habitude de stocker d'habitude ?<br/> On pourrait distinguer deux types de besoins :</p><ul id="r-951633" data-claire-element-id="951633"><li id="r-951630" data-claire-element-id="951630"><p id="r-951629" data-claire-element-id="951629"><strong>Stocker des informations</strong> : on a très régulièrement besoin d'enregistrer des informations. Ca peut être le nom d'un nouveau membre, un message qu'il laisse, une commande qu'il effectue sur le site...</p></li><li id="r-951632" data-claire-element-id="951632"><p id="r-951631" data-claire-element-id="951631"><strong>Stocker des fichiers</strong> : on a parfois besoin de stocker de nouveaux fichiers, que ce soient des images, des .zip, etc. Ces fichiers sont le plus souvent uploadés par les utilisateurs du site web.</p></li></ul><p id="r-951634" data-claire-element-id="951634">Pour répondre à ces besoins, Google App Engine fournit différents services :</p><ul id="r-951644" data-claire-element-id="951644"><li id="r-951641" data-claire-element-id="951641"><p id="r-951635" data-claire-element-id="951635">Pour le<strong> stockage d'informations,</strong> on a en général besoin d'une base de données. C'est en effet le moyen le plus sûr et le plus structuré pour &quot;ranger&quot; les informations. Google App Engine propose 2 types de bases de données :</p><ul id="r-951640" data-claire-element-id="951640"><li id="r-951637" data-claire-element-id="951637"><p id="r-951636" data-claire-element-id="951636">Une base de données relationnelle SQL : c'est le service <em>Google Cloud SQL</em>. Il s'agit en fait d'une base de données MySQL gérée en Cloud.</p></li><li id="r-951639" data-claire-element-id="951639"><p id="r-951638" data-claire-element-id="951638">Une base de données non relationnelle NoSQL : c'est le service <em>Datastore</em>. Il est basé sur Big Table, le système de stockage créé par Google pour ses propres services pour des besoins de performance (qui a d'ailleurs lui-même inspiré en bonne partie le mouvement NoSQL).</p></li></ul></li><li id="r-951643" data-claire-element-id="951643"><p id="r-951642" data-claire-element-id="951642"><strong>Pour le stockage de fichiers</strong>, on utilisera le service <em>Google Cloud Storage</em>. A noter qu'il existe aussi le <em>Blobstore</em> qui fait globalement la même chose mais avec moins de fonctionnalités (et comme il tend à être remplacé par Google Cloud Storage nous n'en parlerons pas ici).</p></li></ul><p id="r-951645" data-claire-element-id="951645">Résumons dans un schéma les différents choix qui s'offrent à nous :</p><figure id="r-les-services-de-stockage-cloud-de-google" data-claire-element-id="951648"><img id="r-951646" data-claire-element-id="951646" src="medias/uploads.siteduzero.com_files_421001_422000_421389.png" alt="Les services de stockage Cloud de Google"/><figcaption>Les services de stockage Cloud de Google</figcaption></figure><div id="r-951650" data-claire-element-id="951650" data-claire-semantic="question"><p id="r-951649" data-claire-element-id="951649">Ok, je sais faire la différence entre des fichiers et des données. Par contre, comment je sais moi si mes données sont &quot;fortement structurées&quot; ? :euh:</p></div><p id="r-951651" data-claire-element-id="951651">C'est clairement la question la plus délicate. Tout dépend de votre modèle de données, de l'importance des données que va traiter votre site et de bien d'autres choses. Voici d'autres façons de le voir pour vous aider à choisir :</p><ul id="r-951660" data-claire-element-id="951660"><li id="r-951653" data-claire-element-id="951653"><p id="r-951652" data-claire-element-id="951652">Si vous adaptez un site déjà existant sur Google App Engine et que vous utilisez une base de données relationnelle comme MySQL, il est inutile de tout changer. Utilisez la base de données relationnelle <strong>Google Cloud SQL</strong>. Elle sera compatible.</p></li><li id="r-951655" data-claire-element-id="951655"><p id="r-951654" data-claire-element-id="951654">Si vous êtes curieux de découvrir une nouvelle façon de stocker les données, que vous avez toujours entendu parler de NoSQL mais que vous n'avez jamais eu l'occasion de vous y mettre, essayez-vous au <strong>Datastore</strong>.</p></li><li id="r-951657" data-claire-element-id="951657"><p id="r-951656" data-claire-element-id="951656">Si vous préférez opter pour la prudence et que vous avez vos habitudes pour créer une base de données, ne changez pas tout et utilisez <strong>Google Cloud SQL</strong>. Vous saurez vous y retrouver rapidement.</p></li><li id="r-951659" data-claire-element-id="951659"><p id="r-951658" data-claire-element-id="951658">Si vous créez un nouveau site et que vous anticipez un très fort trafic, beaucoup de lectures et d'écritures simultanées, utilisez le <strong>Datastore</strong>. Le fait qu'il soit basé sur Big Table, le système de stockage utilisé par Google lui-même, vous indique à quel point il peut être performant. En contrepartie, vous ne pourrez cependant plus utiliser certaines fonctionnalités non essentielles des bases de données SQL.</p></li></ul><p id="r-951661" data-claire-element-id="951661">Les bases de données SQL comme MySQL structurent les informations sous forme de tableaux (appelés les tables). Vous connaissez certainement déjà ça.<br/> En revanche, les bases NoSQL comme le Datastore sont beaucoup plus basiques : elles stockent des paires de données clé-valeur. Par exemple : <code>pseudo = &quot;Mateo21&quot;</code>. Les données sont assemblées entre elles mais de façon beaucoup moins forte et structurée que dans une base SQL. En fait, il faut imaginer que le Datastore ressemble plus à un système de stockage XML qu'à des tableaux.</p><figure id="r-differences-entre-les-structures-sql-et-nosql" data-claire-element-id="951664"><img id="r-951662" data-claire-element-id="951662" src="medias/uploads.siteduzero.com_files_421001_422000_421392.png" alt="Différences entre les structures SQL et NoSQL"/><figcaption>Différences entre les structures SQL et NoSQL</figcaption></figure><p id="r-951665" data-claire-element-id="951665">Nous y reviendrons bien plus en détail quand nous parlerons du Datastore. ;)</p><h2 id="r-pas-de-configuration-a-faire-mais-de-nouvelles-regles" data-claire-element-id="951687">Pas de configuration à faire, mais de nouvelles règles</h2><p id="r-951667" data-claire-element-id="951667">L'intérêt de tous ces services de stockage Cloud est que vous n'avez pas à gérer le nombre de serveurs nécessaires pour que votre application fonctionne. Vous n'avez pas besoin non plus d'installer les logiciels, de les configurer et de faire les mises à jour. Par exemple, Google Cloud SQL, qui est basé sur MySQL, vous épargne toute l'installation et la configuration de MySQL. S'il y a une mise à jour de sécurité à faire, c'est Google qui s'en charge de façon transparente pour vous.</p><aside id="r-951669" data-claire-element-id="951669" data-claire-semantic="information"><p id="r-951668" data-claire-element-id="951668">Pour information, Google Cloud Storage et Google Cloud SQL peuvent être utilisés de façon totalement indépendante à Google App Engine. Si vous avez besoin de stocker des fichiers ou de monter une base de données MySQL, vous pouvez le faire sans avoir à créer un site web sur App Engine. Rendez-vous sur <a href="https://code.google.com/apis/console">Google API console</a> et activez le service dont vous avez besoin !</p></aside><p id="r-951670" data-claire-element-id="951670">Cette simplicité s'accompagne cependant de nouvelles règles. Avec l'architecture cloud de Google App Engine, vous ne savez pas combien de frontaux web sont utilisés pour faire tourner votre site. Ce nombre augmente ou diminue tout seul au fil du temps en fonction des besoins. Potentiellement, plusieurs frontaux web peuvent tourner en même temps. Tôt ou tard, vous allez vous poser une question anodine et pourtant très importante : <strong>si un visiteur envoie un fichier via un formulaire, où doit-on le stocker ?</strong></p><p id="r-951671" data-claire-element-id="951671">Si vous aviez une architecture simple avec un seul serveur, vous pourriez stocker le fichier quelque part sur votre serveur et ça fonctionnerait. Mais ce n'est plus possible avec de multiples serveurs sur App Engine : s'il y a à un moment donné 3 frontaux A, B et C et qu'un visiteur uploade sur le frontal A, les frontaux B et C ne posséderont pas le fichier !</p><figure id="r-les-frontaux-web-de-google-app-engine-ne-sont-pas-faits-pour-stocker-les-donnees" data-claire-element-id="951674"><img id="r-951672" data-claire-element-id="951672" src="medias/uploads.siteduzero.com_files_421001_422000_421442.png" alt="Les frontaux web de Google App Engine ne sont pas faits pour stocker les données"/><figcaption>Les frontaux web de Google App Engine ne sont pas faits pour stocker les données</figcaption></figure><p id="r-951675" data-claire-element-id="951675">La même chose est valable pour les fichiers comme pour les données d'une base. Impensable de stocker ça sur les frontaux web vu qu'ils sont nombreux et peuvent naître comme mourir à chaque instant en fonction du trafic ! <strong>Voilà pourquoi Google nous interdit d'écrire des fichiers sur les frontaux web.</strong> Cela fait partie des nouvelles règles que nous allons devoir respecter.</p><p id="r-951676" data-claire-element-id="951676">La solution est d'utiliser les services de Google, comme Google Cloud Storage pour le stockage de fichiers uploadés.</p><figure id="r-utiliser-des-serveurs-speciaux-permet-a-tout-le-monde-de-retrouver-les-donnees" data-claire-element-id="951679"><img id="r-951677" data-claire-element-id="951677" src="medias/uploads.siteduzero.com_files_421001_422000_421443.png" alt="Utiliser des serveurs spéciaux permet à tout le monde de retrouver les données"/><figcaption>Utiliser des serveurs spéciaux permet à tout le monde de retrouver les données</figcaption></figure><aside id="r-951681" data-claire-element-id="951681" data-claire-semantic="information"><p id="r-951680" data-claire-element-id="951680">Les frontaux web d'App Engine sont dits <em>stateless</em>. Cela veut dire qu'ils ne fournissent que de la puissance de calcul pour créer vos pages web. Ils ne stockent <em>aucune </em>donnée, ils n'ont pas d'état, c'est pour ça qu'on dit qu'ils sont <em>stateless</em>.<br/> Cela permet à App Engine de tuer à tout moment une machine si le trafic est faible ou si elle ne répond plus (pour ne pas bloquer tout le reste des serveurs). Oui je sais, c'est terrible, le monde des serveurs est sans pitié. :diable:</p></aside><div id="r-951683" data-claire-element-id="951683" data-claire-semantic="question"><p id="r-951682" data-claire-element-id="951682">Google Cloud Storage, Google Cloud SQL, le Datastore... Ca fait quand même beaucoup de services qu'il va falloir apprendre à utiliser. Va-t-on tous les passer en revue ? :o</p></div><p id="r-951684" data-claire-element-id="951684">Mais bien sûr ! Qu'alliez-vous croire, je ne comptais pas vous abandonner en chemin ! ;)</p><p id="r-951685" data-claire-element-id="951685">En vérité, je ne vous expliquerai pas le langage SQL ici. Il y a déjà un très bon <a href="../www.siteduzero.com/informatique/tutoriels/administrez-vos-bases-de-donnees-avec-mysql.html">tutoriel sur MySQL</a> si vous avez besoin d'apprendre ce langage. Je vous expliquerai en revanche comme mettre en place Google Cloud SQL et comment l'utiliser dans votre application App Engine.<br/> Je vous présenterai aussi Google Cloud Storage, mais il n'est pas non plus très complexe à prendre en main.</p><p id="r-951686" data-claire-element-id="951686">En revanche, le Datastore méritera qu'on y passe plus de temps. Plusieurs chapitres complets y seront consacrés, car nous devons nous mettre dans la philosophie NoSQL, comprendre les spécificités du Datastore, construire et optimiser notre application App Engine. Bref, nous allons avoir du pain sur la planche !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
<span class="arrow"></span>
<span class="next">Une affaire d&#039;architecture de serveurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">
<span class="next">Google Cloud SQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="GoogleCloudSQL"></a><h2>Google Cloud SQL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
<span class="arrow"></span>
<span class="next">Stocker, oui mais où ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
<span class="next">Activer Google Cloud SQL dans l&#039;API Console</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-951690" data-claire-element-id="951690">Nous venons de faire un tour d'horizon des différentes méthodes de stockage dans le Cloud de Google. Comme vous avez dû le constater, ce ne sont pas les services qui manquent, mais encore faut-il savoir les utiliser !</p><p id="r-951691" data-claire-element-id="951691">Le premier service que j'aimerais vous présenter ici est Google Cloud SQL. Je commence par lui, et non par le Datastore, pour différentes raisons :</p><ul id="r-951696" data-claire-element-id="951696"><li id="r-951693" data-claire-element-id="951693"><p id="r-951692" data-claire-element-id="951692">Les bases de données SQL sont en général connues des développeurs web. Je ne prends pas beaucoup de risques en affirmant que vous avez déjà dû en manipuler une, alors que le Datastore vous est encore complètement inconnu.</p></li><li id="r-951695" data-claire-element-id="951695"><p id="r-951694" data-claire-element-id="951694">Google Cloud SQL est en fait d'une base de données MySQL dans le Cloud. Si vous avez un dump (une sauvegarde) d'une base MySQL, vous pourrez le stocker dans Google Cloud SQL et commencer à l'utiliser tout de suite.</p></li></ul><p id="r-951697" data-claire-element-id="951697">Google Cloud SQL est donc un bon moyen pour nous de découvrir un service de stockage Cloud sans être trop dépaysés. :)</p><aside id="r-951699" data-claire-element-id="951699" data-claire-semantic="information"><p id="r-951698" data-claire-element-id="951698">Nous allons ici associer une base de données Google Cloud SQL à une application App Engine... mais ce n'est absolument pas obligatoire. Sachez qu'on peut aussi utiliser Google Cloud SQL de façon totalement indépendante. Si vous avez &quot;juste&quot; besoin d'une base de données gérée dans le Cloud (pour ne pas avoir à vous occuper de l'installation, de la configuration et de la maintenance), Google Cloud SQL est peut-être la réponse que vous cherchez.</p></aside><p id="r-951700" data-claire-element-id="951700">Nous allons commencer par voir comment créer une instance Google Cloud SQL. Nous verrons ensuite comment la connecter à notre application Java EE sous App Engine. Enfin, pour que vous ayez un exemple complet sous les yeux, je vous montrerai comment réaliser un mini livre d'or sous App Engine en utilisant Google Cloud SQL pour le stockage ! :)</p><aside id="r-951702" data-claire-element-id="951702" data-claire-semantic="warning"><p id="r-951701" data-claire-element-id="951701">Contrairement au Datastore, Google Cloud SQL ne peut pas être utilisé gratuitement même si on a un petit trafic. Il faut payer (un peu) pour pouvoir l'utiliser. Le prix dépend de la puissance nécessaire et du temps que vous souhaitez l'utiliser (ça démarre à 0,10$ / 0,30$ de l'heure environ).<br/> Notez qu'il existe aussi une version d'essai gratuite de Cloud SQL... mais valable uniquement jusqu'en Juin 2013.</p></aside>
</div><a name="ActiverGoogleCloudSQLdansl039APIConsole"></a><h2>Activer Google Cloud SQL dans l&#039;API Console</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">
<span class="arrow"></span>
<span class="next">Google Cloud SQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
<span class="next">Créer un projet Google Cloud SQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951703" data-claire-element-id="951703">Google Cloud SQL étant un service indépendant, on l'active dans l'interface <a href="https://code.google.com/apis/console">Google APIs Console</a>. C'est l'interface qui regroupe progressivement tous les accès aux API de Google, de l'API Google Maps à l'API Google+, en passant par Google Calendar et bien d'autres.</p><p id="r-951704" data-claire-element-id="951704">Commencez donc par vous rendre sur l'interface API Console à l'adresse suivante :<br/><a href="https://code.google.com/apis/console">https://code.google.com/apis/console</a></p><p id="r-951705" data-claire-element-id="951705">La première fois, Google API Console vous accueille en vous demandant de créer un nouveau &quot;projet API console&quot;. Cela permet de regrouper vos différents projets qui utilisent les APIs de Google.</p><figure id="r-google-api-console-vous-demande-de-creer-un-nouveau-projet" data-claire-element-id="951708"><img id="r-951706" data-claire-element-id="951706" src="medias/uploads.siteduzero.com_files_421001_422000_421395.png" alt="Google API Console vous demande de créer un nouveau projet"/><figcaption>Google API Console vous demande de créer un nouveau projet</figcaption></figure><p id="r-951709" data-claire-element-id="951709">Cliquez sur le bouton pour créer un nouveau projet. La liste de toutes les APIs de Google utilisables apparaît. Oui, il y en a beaucoup !</p><figure id="r-la-liste-de-toutes-les-apis-utilisables" data-claire-element-id="951712"><img id="r-951710" data-claire-element-id="951710" src="medias/uploads.siteduzero.com_files_421001_422000_421396.png" alt="La liste de toutes les APIs utilisables"/><figcaption>La liste de toutes les APIs utilisables</figcaption></figure><p id="r-951713" data-claire-element-id="951713">Repérez &quot;Google Cloud SQL&quot; dans la liste et cliquez sur le bouton pour l'activer.</p><figure id="r-activez-google-cloud-sql" data-claire-element-id="951716"><img id="r-951714" data-claire-element-id="951714" src="medias/uploads.siteduzero.com_files_421001_422000_421397.png" alt="Activez Google Cloud SQL"/><figcaption>Activez Google Cloud SQL</figcaption></figure><p id="r-951717" data-claire-element-id="951717">On vous demande de donner un nom à votre projet Google Cloud SQL. Indiquez le nom que vous voulez :</p><figure id="r-donnez-un-nom-a-votre-projet-cloud-sql" data-claire-element-id="951720"><img id="r-951718" data-claire-element-id="951718" src="medias/uploads.siteduzero.com_files_421001_422000_421398.png" alt="Donnez un nom à votre projet Cloud SQL"/><figcaption>Donnez un nom à votre projet Cloud SQL</figcaption></figure><p id="r-951721" data-claire-element-id="951721">... puis validez les conditions d'utilisation :</p><figure id="r-validez-les-conditions-d-utilisation" data-claire-element-id="951724"><img id="r-951722" data-claire-element-id="951722" src="medias/uploads.siteduzero.com_files_421001_422000_421399.png" alt="Validez les conditions d'utilisation"/><figcaption>Validez les conditions d'utilisation</figcaption></figure><p id="r-951725" data-claire-element-id="951725">Ouf, vous y êtes ! Vous devriez voir un lien &quot;Google Cloud SQL&quot; apparaître dans le menu de gauche :</p><figure id="r-un-lien-google-cloud-sql-est-apparu-dans-le-menu" data-claire-element-id="951728"><img id="r-951726" data-claire-element-id="951726" src="medias/uploads.siteduzero.com_files_421001_422000_421400.png" alt="Un lien Google Cloud SQL est apparu dans le menu"/><figcaption>Un lien Google Cloud SQL est apparu dans le menu</figcaption></figure><div id="r-951730" data-claire-element-id="951730" data-claire-semantic="question"><p id="r-951729" data-claire-element-id="951729">Euh... Qu'est-ce que c'est le point d'exclamation à côté de &quot;Billing&quot; ? :euh:</p></div><p id="r-951731" data-claire-element-id="951731">Ca, c'est le signal que Google vous demande de sortir la carte bancaire. :p <br/> Rendez-vous dans la section Billing pour rentrer les informations de paiement. Elles seront utilisées uniquement pendant le temps que vous utiliserez des instances Google Cloud SQL. Comme je le disais en introduction, une utilisation courte de quelques heures coûte autour de 1$ (pour vous donner une idée).</p><aside id="r-951733" data-claire-element-id="951733" data-claire-semantic="information"><p id="r-951732" data-claire-element-id="951732">Le service Google Cloud SQL peut être exceptionnellement testé gratuitement jusqu'en Juin 2013. Après ça, même pour la plus petite instance, il faudra payer (un petit peu).</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">
<span class="arrow"></span>
<span class="next">Google Cloud SQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
<span class="next">Créer un projet Google Cloud SQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CrerunprojetGoogleCloudSQL"></a><h2>Créer un projet Google Cloud SQL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
<span class="arrow"></span>
<span class="next">Activer Google Cloud SQL dans l&#039;API Console</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
<span class="next">Exemple : Cloud SQL dans une application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951735" data-claire-element-id="951735">Maintenant que nous avons activé Google Cloud SQL (et que nous avons entré les informations de paiement dans la section &quot;Billing&quot;) nous pouvons créer une instance Google Cloud SQL. Cela consiste à demander à Google de lancer des serveurs MySQL dans le Cloud. Google démarrera alors des machines en fonction de vos besoins.</p><p id="r-951736" data-claire-element-id="951736">Je rappelle que notre but est au final de créer des tables dans la base de données. Courage, sur l'ensemble du processus, nous venons de faire la moitié. :)</p><figure id="r-nous-sommes-a-la-moitie-du-chemin" data-claire-element-id="951739"><img id="r-951737" data-claire-element-id="951737" src="medias/uploads.siteduzero.com_files_421001_422000_421408.png" alt="Nous sommes à la moitié du chemin !"/><figcaption>Nous sommes à la moitié du chemin !</figcaption></figure><h2 id="r-creer-un-projet-app-engine-facultatif" data-claire-element-id="951743">Créer un projet App Engine (facultatif)</h2><p id="r-951740" data-claire-element-id="951740">Avant ça, je vous invite à créer d'abord un nouveau projet App Engine pour nos tests. En effet, en créant un projet Google Cloud SQL, on vous demandera le nom de votre projet App Engine (si vous voulez utiliser Cloud SQL avec App Engine). Autant commencer par là donc. :)</p><p id="r-951741" data-claire-element-id="951741">Vous savez déjà créer un projet App Engine. Il suffit de vous rendre sur <a href="https://appengine.google.com/">https://appengine.google.com</a> et de cliquer sur &quot;Create Application&quot;. Pour mémoire, nous en avons parlé dans un <a href="../www.siteduzero.com/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google.html">chapitre précédent</a>.</p><p id="r-951742" data-claire-element-id="951742">Pour ma part, je vais appeler le projet <code>sdz-guestbook-cloudsql</code>, car nous allons faire un petit livre d'or (<em>guestbook</em>) par la suite.</p><h2 id="r-creer-le-projet-cloud-sql" data-claire-element-id="951779">Créer le projet Cloud SQL</h2><p id="r-951744" data-claire-element-id="951744">Retour à l'API Console. Cliquez dans le menu sur &quot;Google Cloud SQL&quot; que vous avez activé. Vérifiez qu'il n'y a pas de point d'exclamation devant la section &quot;Billing&quot; (sinon vous ne pourrez pas créer d'instance !).</p><p id="r-951745" data-claire-element-id="951745">Cliquez sur &quot;New instance&quot;. Une fenêtre apparaît. Elle vous demande les informations nécessaires pour créer votre instance Cloud SQL :</p><figure id="r-configuration-de-google-cloud-sql-dans-eclipse" data-claire-element-id="951748"><img id="r-951746" data-claire-element-id="951746" src="medias/uploads.siteduzero.com_files_421001_422000_421449.png" alt="Configuration de Google Cloud SQL dans Eclipse"/><figcaption>Configuration de Google Cloud SQL dans Eclipse</figcaption></figure><p id="r-951749" data-claire-element-id="951749">Il y a plusieurs champs à saisir et il faut bien comprendre ce que vous faites :</p><ul id="r-951764" data-claire-element-id="951764"><li id="r-951751" data-claire-element-id="951751"><p id="r-951750" data-claire-element-id="951750"><strong>Name </strong>: c'est le nom de l'instance. Il doit être unique et ne pas avoir déjà été utilisé par quelqu'un d'autre. Utilisez des caractères simples (pas de caractères spéciaux ni d'espaces).</p></li><li id="r-951755" data-claire-element-id="951755"><p id="r-951752" data-claire-element-id="951752"><strong>Location Options</strong> : vous permet d'indiquer si vous voulez utiliser les datacenters de Google aux Etats-Unis ou en Europe. Idéalement, je choisirais l'Europe pour des questions de performance pour ma part... cependant, il faut que l'instance App Engine avec laquelle vous vous connectez soit sur le même continent pour que ça fonctionne. Or, les instances App Engine gratuites sont forcément situées aux Etats-Unis. On se contentera donc des Etats-Unis.</p><aside id="r-951754" data-claire-element-id="951754" data-claire-semantic="information"><p id="r-951753" data-claire-element-id="951753">Notez que le choix du lieu de stockage n'est pas qu'une question de performances... Si on vous offre ce choix, c'est aussi pour des raisons juridiques.<br/> En effet, toute donnée stockée aux Etats-Unis (que ce soit chez Google ou n'importe qui d'autre) peut potentiellement être lue par le gouvernement américain. C'est une loi qui permet cela : le &quot;Patriot Act&quot;. Il est donc en général plus prudent d'héberger ses données en Europe quand c'est possible pour des raisons de confidentialité.</p></aside></li><li id="r-951757" data-claire-element-id="951757"><p id="r-951756" data-claire-element-id="951756"><strong>Size </strong>: la puissance de la machine qui hébergera MySQL. La taille D0 est la version gratuite (valable jusqu'en Juin 2013). Les tailles au-dessus coûtent chacune de plus en plus cher (<a href="https://developers.google.com/cloud-sql/docs/billing?hl=fr">voir les prix</a>) et disposent de plus de mémoire.</p></li><li id="r-951759" data-claire-element-id="951759"><p id="r-951758" data-claire-element-id="951758"><strong>Replication mode</strong> : choisissez entre Synchronous (synchrone) et Asynchronous (asynchrone). C'est le mode de copie des données d'un serveur à un autre (pour éviter la perte de données si le serveur tombe). Avec Synchronous, vous avez la garantie de ne perdre aucune donnée, mais les écritures dans la base seront plus longues. Avec Asynchronous, vous pouvez perdre les dernières millisecondes (voire les dernières secondes) d'écriture quand un serveur tombe, mais l'ensemble des écritures sera plus rapide. Je vous conseille de choisir Asynchronous sauf si les données que vous comptez héberger sont vraiment critiques et que perdre la moindre information serait une catastrophe (donc si vous êtes une banque, cochez Synchronous :p ).</p></li><li id="r-951761" data-claire-element-id="951761"><p id="r-951760" data-claire-element-id="951760"><strong>Pricing plan</strong> : c'est le mode de calcul du paiement. Vous avez le choix entre &quot;Per use&quot; et &quot;Package&quot; (pour la taille gratuite D0 cette option est désactivée). Le mode &quot;Per use&quot; est le plus flexible : Google compte le nombre d'heures que vous utilisez l'instance et vous les facture. Le mode &quot;Package&quot; vous permet de payer à la journée et vous permet d'avoir des réductions. Sélectionnez &quot;Per use&quot; si vous hésitez pour commencer, c'est le plus flexible.</p></li><li id="r-951763" data-claire-element-id="951763"><p id="r-951762" data-claire-element-id="951762"><strong>Authorized applications</strong> : ce sont les noms des applications App Engine qui utiliseront votre instance Cloud SQL. Si vous ne voulez pas utiliser Cloud SQL avec App Engine (je vous rappelle que ce n'est pas obligatoire), vous pouvez laisser cette section vide. Pour ma part, je vais indiquer le nom de l'application App Engine que j'ai créée tout à l'heure : <code>sdz-guestbook-cloudsql</code>.</p></li></ul><p id="r-951765" data-claire-element-id="951765">Ouf ! Au bout de quelques secondes, l'instance Google Cloud SQL est créée et le tableau de bord s'affiche :</p><figure id="r-le-tableau-de-bord-de-l-instance-google-cloud-sql" data-claire-element-id="951768"><img id="r-951766" data-claire-element-id="951766" src="medias/uploads.siteduzero.com_files_421001_422000_421402.png" alt="Le tableau de bord de l'instance Google Cloud SQL"/><figcaption>Le tableau de bord de l'instance Google Cloud SQL</figcaption></figure><p id="r-951769" data-claire-element-id="951769">De là, vous avez plusieurs onglets que vous pouvez consulter :</p><ul id="r-951776" data-claire-element-id="951776"><li id="r-951771" data-claire-element-id="951771"><p id="r-951770" data-claire-element-id="951770"><strong>Logs </strong>: vous permet d'avoir les logs d'utilisation de l'instance.</p></li><li id="r-951773" data-claire-element-id="951773"><p id="r-951772" data-claire-element-id="951772"><strong>SQL Prompt</strong> : vous permet de saisir des commandes SQL (pour tester, pour faire des modifications &quot;à chaud&quot;...).</p></li><li id="r-951775" data-claire-element-id="951775"><p id="r-951774" data-claire-element-id="951774"><strong>Backups </strong>: vous permet de configurer les heures des sauvegardes. Les sauvegardes sont automatiques et incluses dans le prix des instances Cloud SQL.</p></li></ul><aside id="r-951778" data-claire-element-id="951778" data-claire-semantic="warning"><p id="r-951777" data-claire-element-id="951777">Il faut bien comprendre que nous venons de créer une <em>instance </em>Cloud SQL. En gros, nous venons de monter un serveur.<br/> Sur une instance, vous pouvez créer plusieurs bases de données, qui elles-mêmes peuvent contenir plusieurs tables.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
<span class="arrow"></span>
<span class="next">Activer Google Cloud SQL dans l&#039;API Console</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
<span class="next">Exemple : Cloud SQL dans une application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ExempleCloudSQLdansuneapplication"></a><h2>Exemple : Cloud SQL dans une application</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
<span class="arrow"></span>
<span class="next">Créer un projet Google Cloud SQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">
<span class="next">Le Datastore</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951781" data-claire-element-id="951781">Résumons :</p><ol id="r-951788" data-claire-element-id="951788"><li id="r-951783" data-claire-element-id="951783"><p id="r-951782" data-claire-element-id="951782">Nous avons activé l'utilisation de Google Cloud SQL dans l'API Console de Google</p></li><li id="r-951785" data-claire-element-id="951785"><p id="r-951784" data-claire-element-id="951784">Nous avons créé une application App Engine pour nos tests (j'ai appelé la mienne sdz-guestbook-cloudsql)</p></li><li id="r-951787" data-claire-element-id="951787"><p id="r-951786" data-claire-element-id="951786">Nous avons créé une instance Google Cloud SQL qui est prête à recevoir des instructions</p></li></ol><p id="r-951789" data-claire-element-id="951789">Il ne reste plus que l'essentiel... Découvrir comment utiliser Google Cloud SQL dans notre application App Engine ! :D</p><p id="r-951790" data-claire-element-id="951790">Je vous propose de découvrir tout cela à travers un exemple. Nous allons créer un mini livre d'or : les visiteurs du site pourront poster leur nom et un message pour nous dire combien ils aiment notre site.</p><figure id="r-l-application-de-livre-d-or-que-nous-allons-creer-sur-cloud-sql-et-app-engine" data-claire-element-id="951793"><img id="r-951791" data-claire-element-id="951791" src="medias/uploads.siteduzero.com_files_421001_422000_421419.png" alt="L'application de livre d'or que nous allons créer sur Cloud SQL et App Engine"/><figcaption>L'application de livre d'or que nous allons créer sur Cloud SQL et App Engine</figcaption></figure><h2 id="r-creation-du-schema-sql" data-claire-element-id="951818">Création du schéma SQL</h2><p id="r-951794" data-claire-element-id="951794">Pour commencer, il faut créer la base de données. L'API Console nous donne justement accès à un formulaire permettant de saisir des requêtes SQL. Vous vous souvenez de la commande SQL qui permet de créer une base ?</p><pre id="r-951795" data-claire-element-id="951795"><code data-claire-semantic="sql">CREATE DATABASE guestbook;</code></pre><p id="r-951796" data-claire-element-id="951796">On ne l'exécute pas tous les jours, c'est vrai. ;)</p><p id="r-951797" data-claire-element-id="951797">Rentrez-la dans le formulaire de l'API Console :</p><figure id="r-creation-d-une-base-avec-une-commande-sql" data-claire-element-id="951800"><img id="r-951798" data-claire-element-id="951798" src="medias/uploads.siteduzero.com_files_421001_422000_421403.png" alt="Création d'une base avec une commande SQL"/><figcaption>Création d'une base avec une commande SQL</figcaption></figure><p id="r-951801" data-claire-element-id="951801">Cliquez sur &quot;Execute&quot;. Vous venez de créer une nouvelle base ! Sélectionnez-la dans le menu déroulant pour pouvoir exécuter vos prochaines requêtes au sein de cette base :</p><figure id="r-choisissez-la-base-que-vous-venez-de-creer-pour-la-prochaine-commande" data-claire-element-id="951804"><img id="r-951802" data-claire-element-id="951802" src="medias/uploads.siteduzero.com_files_421001_422000_421404.png" alt="Choisissez la base que vous venez de créer pour la prochaine commande"/><figcaption>Choisissez la base que vous venez de créer pour la prochaine commande</figcaption></figure><p id="r-951805" data-claire-element-id="951805">Parfait. Il ne nous reste plus qu'à créer notre table qui va stocker les messages du livre d'or. Pour notre exemple on va faire très simple : une table qui stocke le nom et le message du visiteur.</p><p id="r-951806" data-claire-element-id="951806">La commande SQL suivante permet de créer notre table :</p><pre id="r-951807" data-claire-element-id="951807"><code data-claire-semantic="sql">CREATE TABLE messages (name VARCHAR(255), message TEXT, id INT NOT NULL AUTO_INCREMENT, PRIMARY KEY(id))</code></pre><p id="r-951808" data-claire-element-id="951808">Voilà qui est fait ! :D Si vous voulez vérifier que tout s'est bien passé, vous pouvez exécuter la commande suivante pour afficher la structure de votre table :</p><pre id="r-951809" data-claire-element-id="951809"><code data-claire-semantic="sql">DESCRIBE messages;</code></pre><p id="r-951810" data-claire-element-id="951810">Résultat :</p><figure id="r-la-structure-de-la-table-que-nous-venons-de-creer" data-claire-element-id="951813"><img id="r-951811" data-claire-element-id="951811" src="medias/uploads.siteduzero.com_files_421001_422000_421405.png" alt="La structure de la table que nous venons de créer"/><figcaption>La structure de la table que nous venons de créer</figcaption></figure><div id="r-951815" data-claire-element-id="951815" data-claire-semantic="question"><p id="r-951814" data-claire-element-id="951814">Mais au fait, il n'existe pas des logiciels bien faits pour administrer visuellement une base de données MySQL ? Du genre MySQL Admin ou phpMyAdmin ?</p></div><p id="r-951816" data-claire-element-id="951816">Si si. Vous pouvez utiliser un logiciel qui supporte les connexions via JDBC comme <a href="http://squirrel-sql.sourceforge.net/">Squirrel Sql</a>. Google donne dans sa doc des instructions pour vous <a href="https://developers.google.com/cloud-sql/docs/admin_tools">connecter à une base Cloud SQL depuis Squirrel sql</a>. Cela vous permettra d'administrer un peu plus visuellement votre base de données. :)</p><p id="r-951817" data-claire-element-id="951817">En revanche, vous ne pourrez pas utiliser d'outil comme phpMyAdmin car il ne supporte pas les connexions via JDBC.</p><h2 id="r-creation-de-l-application-app-engine" data-claire-element-id="951877">Création de l'application App Engine</h2><p id="r-951819" data-claire-element-id="951819">Retournons sur Eclipse où nous allons écrire le code du livre d'or utilisant Cloud SQL. On va créer une nouvelle application App Engine comme on a appris à le faire. Allez dans <code>File / New / Web Application Project</code>.</p><aside id="r-951821" data-claire-element-id="951821" data-claire-semantic="information"><p id="r-951820" data-claire-element-id="951820">Le plugin Eclipse de Google App Engine est capable de travailler avec un MySQL installé sur votre machine pour simuler le fonctionnement de Google Cloud SQL en local. En clair, même si vous n'avez pas créé d'instance en ligne tout à l'heure, vous allez pouvoir tester sur votre machine les codes qui vont suivre sans problème !</p></aside><p id="r-951822" data-claire-element-id="951822">Je vais appeler le projet &quot;guestbookCloudSql&quot;. Je laisse coché &quot;Generate sample code&quot; pour avoir un peu de code sur lequel me baser et je décoche &quot;Use Google Web Toolkit&quot; qui ne nous sert pas ici.</p><h3 id="r-activation-de-google-cloud-sql-dans-eclipse" data-claire-element-id="951842">Activation de Google Cloud SQL dans Eclipse</h3><p id="r-951823" data-claire-element-id="951823">Par défaut, Google Cloud SQL n'est pas activé. Faites un clic droit sur le nom du projet (GuestbookCloudSql) dans l'arborescence et sélectionnez Properties. Dans la fenêtre qui s'ouvre, rendez-vous dans la section Google / App Engine et cochez la case &quot;Enable Google Cloud SQL&quot;.</p><figure id="r-configuration-de-google-cloud-sql-dans-eclipse-1" data-claire-element-id="951826"><img id="r-951824" data-claire-element-id="951824" src="medias/uploads.siteduzero.com_files_421001_422000_421406.png" alt="Configuration de Google Cloud SQL dans Eclipse"/><figcaption>Configuration de Google Cloud SQL dans Eclipse</figcaption></figure><p id="r-951827" data-claire-element-id="951827">On y distingue 2 types d'instance :</p><ul id="r-951832" data-claire-element-id="951832"><li id="r-951829" data-claire-element-id="951829"><p id="r-951828" data-claire-element-id="951828"><strong>L'instance de développement</strong> : vous pouvez utiliser soit une instance MySQL locale quand vous développez, soit une instance Google Cloud SQL en ligne.</p></li><li id="r-951831" data-claire-element-id="951831"><p id="r-951830" data-claire-element-id="951830"><strong>L'instance de production</strong> : c'est l'instance qui sera utilisée lorsque votre application sera déployée en ligne.</p></li></ul><p id="r-951833" data-claire-element-id="951833">Si vous voulez utiliser une instance MySQL locale, il vous faudra installer MySQL vous-mêmes sur votre machine. Cliquez ensuite sur &quot;Configure&quot; dans la fenêtre pour indiquer à Eclipse comment s'y connecter.</p><p id="r-951834" data-claire-element-id="951834">Pour ma part je vais faire très simple ici : je vais utiliser la même instance Google Cloud SQL en ligne pour développer que pour la production. C'est très mal, je sais, mais j'ai la flême d'installer MySQL sur ma machine et je n'ai pas envie de payer 2 instances Cloud SQL juste pour faire ce tutoriel, j'espère que vous ne m'en voudrez pas. :D</p><p id="r-951835" data-claire-element-id="951835">Je vais donc cliquer sur les liens &quot;Configure&quot; à droite de &quot;Use Google Cloud SQL instance&quot; et de &quot;App Engine SQL instance&quot;. Je vais y rentrer les informations pour me connecter à la base :</p><figure id="r-connexion-aux-instances-cloud-sql" data-claire-element-id="951838"><img id="r-951836" data-claire-element-id="951836" src="medias/uploads.siteduzero.com_files_421001_422000_421407.png" alt="Connexion aux instances Cloud SQL"/><figcaption>Connexion aux instances Cloud SQL</figcaption></figure><p id="r-951839" data-claire-element-id="951839">Le nom de l'instance (instance name) est affiché sur le tableau de bord sur l'API Console. C'est un nom unique qui représente votre instance Cloud SQL chez Google.</p><aside id="r-951841" data-claire-element-id="951841" data-claire-semantic="information"><p id="r-951840" data-claire-element-id="951840">Notez que par défaut seul le compte root (sans mot de passe) est créé. J'utilise celui-ci pour mes exemples. Dans la pratique, vous devriez créer des utilisateurs et leur donner des droits plus limités (parce que root bon, hein, il peut tout faire :-° ). Lisez la <a href="http://dev.mysql.com/doc/refman/5.1/en/adding-users.html">doc de MySQL sur la création d'utilisateurs</a> pour en savoir plus.</p></aside><h3 id="r-utiliser-cloud-sql-depuis-l-application-app-engine" data-claire-element-id="951876">Utiliser Cloud SQL depuis l'application App Engine</h3><p id="r-951843" data-claire-element-id="951843">Allez, il est temps de coder. :) <br/> Vous allez voir, il n'y a rien de bien particulier par rapport à une application Java EE classique... si ce n'est la façon de se connecter à la base.</p><p id="r-951844" data-claire-element-id="951844">Je vous ai fait créer une Web Application basique avec un peu de code de base. Je vous propose de faire une application qui fonctionne sur une seule page (la page d'accueil &quot;/&quot;). On agira différemment sur cette page en fonction de la méthode d'appel du client :</p><ul id="r-951849" data-claire-element-id="951849"><li id="r-951846" data-claire-element-id="951846"><p id="r-951845" data-claire-element-id="951845">Avec la méthode <strong>HTTP GET</strong>, on affichera un formulaire pour remplir le livre d'or et la liste des derniers messages postés.</p></li><li id="r-951848" data-claire-element-id="951848"><p id="r-951847" data-claire-element-id="951847">Si le visiteur envoie des données avec la méthode <strong>HTTP POST</strong> sur la même URL, nous enregistrerons les informations en base et nous le redirigerons vers la même page en GET.</p></li></ul><p id="r-951850" data-claire-element-id="951850">Nous allons travailler sur 3 fichiers pour faire très simple :</p><ul id="r-951857" data-claire-element-id="951857"><li id="r-951852" data-claire-element-id="951852"><p id="r-951851" data-claire-element-id="951851"><code>src/guestbook/GuestbookServlet.java</code> : c'est notre servlet qui contiendra les instructions pour manipuler la base de données Cloud SQL. On y implémentera les méthodes <code>doGet</code> et <code>doPost</code>.</p></li><li id="r-951854" data-claire-element-id="951854"><p id="r-951853" data-claire-element-id="951853"><code>war/WEB-INF/guestbook.jsp</code> : c'est notre JSP qui affichera le formulaire et les messages.</p></li><li id="r-951856" data-claire-element-id="951856"><p id="r-951855" data-claire-element-id="951855"><code>war/WEB-INF/web.xml</code> : le fichier de configuration qui permet d'indiquer les routes (URLs) de notre application.</p></li></ul><p id="r-951858" data-claire-element-id="951858">Commençons par le fichier web.xml de configuration, c'est le plus simple :</p><pre id="r-951859" data-claire-element-id="951859"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;
xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; version=&quot;2.5&quot;&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;Guestbook&lt;/servlet-name&gt;
		&lt;servlet-class&gt;guestbook.GuestbookServlet&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;Guestbook&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;welcome-file-list&gt;
		&lt;welcome-file&gt;guestbook.jsp&lt;/welcome-file&gt;
	&lt;/welcome-file-list&gt;
&lt;/web-app&gt;</code></pre><p id="r-951860" data-claire-element-id="951860">On indique que notre servlet Guestbook correspond à l'URL &quot;/&quot; (la page d'accueil). On affiche par défaut au visiteur la page guestbook.jsp.</p><p id="r-951861" data-claire-element-id="951861">La JSP est très simple, c'est pratiquement du HTML. On va y récupérer une variable messages qui contiendra les résultats de la base de données. On fait une boucle dessus pour afficher les messages après avoir créé le formulaire :</p><pre id="r-951862" data-claire-element-id="951862"><code data-claire-semantic="jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ page import=&quot;java.sql.*&quot;%&gt;

&lt;!DOCTYPE html&gt;

&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Livre d'or&lt;/title&gt;
		&lt;meta charset=&quot;utf-8&quot; /&gt;
	&lt;/head&gt;

	&lt;body&gt;
		&lt;h1&gt;Vous avez aimé mon site ? Dites-le dans Cloud SQL !&lt;/h1&gt;
		&lt;form action=&quot;/post&quot; method=&quot;post&quot;&gt;
			&lt;p&gt;
				&lt;label&gt;Votre nom : &lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;/label&gt;
			&lt;/p&gt;
			&lt;p&gt;
				&lt;label&gt;Votre message :&lt;br /&gt;
				&lt;textarea name=&quot;message&quot; style=&quot;width: 200px; height: 100px;&quot;&gt;&lt;/textarea&gt;&lt;/label&gt;
			&lt;/p&gt;
			&lt;p&gt;
				&lt;input type=&quot;submit&quot; /&gt;
			&lt;/p&gt;
		&lt;/form&gt;
	
		&lt;h1&gt;Ils ont aimé :&lt;/h1&gt;
		&lt;%
			ResultSet messages = (ResultSet) request.getAttribute(&quot;messages&quot;);
			while (messages.next()) {
		%&gt;
		&lt;p&gt;
			&lt;strong&gt;&lt;%= messages.getString(&quot;name&quot;) %&gt;&lt;/strong&gt; a écrit :&lt;br /&gt;
			&lt;%= messages.getString(&quot;message&quot;) %&gt;
		&lt;/p&gt;
		&lt;%
			}
		%&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-951863" data-claire-element-id="951863">Reste maintenant le coeur, le plus &quot;dur&quot; si on peut l'appeler comme ça, c'est-à-dire la servlet. C'est là que ça se passe :</p><pre id="r-951864" data-claire-element-id="951864"><code data-claire-semantic="java">package guestbook;

import java.io.IOException;
import java.sql.*;
import javax.servlet.ServletException;
import javax.servlet.http.*;
import com.google.appengine.api.rdbms.AppEngineDriver;

@SuppressWarnings(&quot;serial&quot;)
public class GuestbookServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp) {
        try {
            Connection c = null;
            DriverManager.registerDriver(new AppEngineDriver());
            c = DriverManager.getConnection(&quot;jdbc:google:rdbms://simple-it.fr:testcloudsql:test-cloud-sql/guestbook&quot;);

            ResultSet resultats = c.createStatement().executeQuery(&quot;SELECT name, message FROM messages ORDER BY id DESC LIMIT 20&quot;);
            req.setAttribute(&quot;messages&quot;, resultats);
            this.getServletContext().getRequestDispatcher(&quot;/WEB-INF/guestbook.jsp&quot;).forward(req, resp);
        } catch (ServletException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public void doPost(HttpServletRequest req, HttpServletResponse resp) {	
        try {
            Connection c = null;
            DriverManager.registerDriver(new AppEngineDriver());
            c = DriverManager.getConnection(&quot;jdbc:google:rdbms://simple-it.fr:testcloudsql:test-cloud-sql/guestbook&quot;);

            PreparedStatement stmt = c.prepareStatement(&quot;INSERT INTO messages (name, message) VALUES( ? , ? )&quot;);
            stmt.setString(1, req.getParameter(&quot;name&quot;));
            stmt.setString(2, req.getParameter(&quot;message&quot;));
            stmt.executeUpdate();
            resp.sendRedirect(&quot;/&quot;);
        } catch (SQLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code></pre><div id="r-951866" data-claire-element-id="951866" data-claire-semantic="question"><p id="r-951865" data-claire-element-id="951865">Bon tout ça c'est beaucoup de blabla, c'est du Java EE classique. Qu'est-ce qu'il faut retenir, qu'est-ce qui est spécifique à App Engine ?</p></div><p id="r-951867" data-claire-element-id="951867">Eh bien tout d'abord on charge le package qui contient le <em>driver</em> Google pour manipuler la base de données :</p><pre id="r-951868" data-claire-element-id="951868"><code data-claire-semantic="java">import com.google.appengine.api.rdbms.AppEngineDriver;</code></pre><p id="r-951869" data-claire-element-id="951869">Ensuite, on charge le driver et on se connecte à notre base :</p><pre id="r-951870" data-claire-element-id="951870"><code data-claire-semantic="java">DriverManager.registerDriver(new AppEngineDriver());
c = DriverManager.getConnection(&quot;jdbc:google:rdbms://simple-it.fr:testcloudsql:test-cloud-sql/guestbook&quot;);</code></pre><aside id="r-951872" data-claire-element-id="951872" data-claire-semantic="information"><p id="r-951871" data-claire-element-id="951871">Remplacez simple-it.fr:testcloudsql:test-cloud-sql par le nom de votre instance Cloud SQL. Remplacez le &quot;/guestbook&quot; qui suit par le nom de votre base de données.<br/> En résumé, la syntaxe est <code>jdbc:google:rdbms://&lt;NOM_INSTANCE&gt;/&lt;NOM_BASE&gt;</code></p></aside><p id="r-951873" data-claire-element-id="951873">Voilà ce qu'il faut savoir. :) <br/> Tout le reste n'est en effet que du Java EE classique : exécution de requêtes SQL et requêtes préparées, comme vous devez avoir l'habitude d'en faire !</p><p id="r-951874" data-claire-element-id="951874">Si vous voulez tester l'application, je l'ai mise en ligne ici : <a href="http://sdz-guestbook-cloudsql.appspot.com/"><strong>http://sdz-guestbook-cloudsql.appspot.com/</strong></a></p><p id="r-951875" data-claire-element-id="951875">Voilà l'essentiel de ce qu'il faut savoir sur Google Cloud SQL ! Vous avez appris à créer une instance et à vous y connecter depuis votre application App Engine.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
<span class="arrow"></span>
<span class="next">Créer un projet Google Cloud SQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">
<span class="next">Le Datastore</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LeDatastore"></a><h2>Le Datastore</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
<span class="arrow"></span>
<span class="next">Exemple : Cloud SQL dans une application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
<span class="next">Comprendre le Datastore</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-951880" data-claire-element-id="951880">Le Datastore est la voie royale pour stocker des données sur Google App Engine. C'est clairement l'outil que Google nous conseille d'utiliser. Vous pouvez vous en servir gratuitement (jusqu'à une certaine limite de trafic) et on ne vous en dit que du bien : il serait rapide, capable de gérer de fortes charges, réparti sur de multiples datacenters... On dit même qu'il serait basé sur Big Table, la technologie qu'utilise Google pour stocker toutes ses données, notamment les résultats d'indexation des milliards de pages web par le GoogleBot. Allons bon, rien que ça !</p><p id="r-951881" data-claire-element-id="951881">Le Datastore fonctionne en mode High Replication Datastore (HRD). Ce système est très résilient aux erreurs : il fait en sorte que vos données soient copiées sur de multiples datacenters ! L'objectif est que votre application puisse continuer à fonctionner même en cas d'évènement catastrophique (du genre si un datacenter prend feu, un continent est englouti sous les eaux... :-° ).</p><figure id="r-les-donnees-stockees-dans-le-datastore-sont-repliquees-dans-de-multiples-datacenters" data-claire-element-id="951884"><img id="r-951882" data-claire-element-id="951882" src="medias/uploads.siteduzero.com_files_421001_422000_421428.png" alt="Les données stockées dans le Datastore sont répliquées dans de multiples datacenters"/><figcaption>Les données stockées dans le Datastore sont répliquées dans de multiples datacenters</figcaption></figure><p id="r-951885" data-claire-element-id="951885">Si le Datastore est alléchant, il est néanmoins très différent d'une base de données SQL comme MySQL... Pour vous et moi qui sommes habitués aux bases SQL, c'est un changement très important : le Datastore est ce qu'on appelle une base de données NoSQL.</p><div id="r-951887" data-claire-element-id="951887" data-claire-semantic="question"><p id="r-951886" data-claire-element-id="951886">Une base de données NoSQL ? Ce sont des réactionnaires qui disent &quot;Non au SQL !&quot; c'est ça ?</p></div><p id="r-951888" data-claire-element-id="951888">Non, pas vraiment. :D <br/> En fait beaucoup de gens croient que &quot;NoSQL&quot; est une opposition au SQL, alors que c'est en fait l'acronyme de &quot;Not Only SQL&quot; (<em>pas seulement du SQL</em>). On y reprend des principes de SQL mais pas tous. L'objectif est de se débarrasser de tout ce qui empêche habituellement les sites basés sur SQL de croître avec un fort trafic. Cela implique une philosophie assez différente au final !</p><p id="r-951889" data-claire-element-id="951889">Dans ce chapitre, je vais commencer par vous expliquer comment fonctionne le Datastore dans les grandes lignes avant de vous montrer comment vous en servir dans votre application.</p><p id="r-951890" data-claire-element-id="951890"><strong>Ne sautez pas ce chapitre !</strong> Utiliser Google App Engine sans utiliser le Datastore ce serait comme... eh bien, ce serait comme... Enfin, vous voyez ce que je veux dire. :p</p>
</div><a name="ComprendreleDatastore"></a><h2>Comprendre le Datastore</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">
<span class="arrow"></span>
<span class="next">Le Datastore</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
<span class="next">Manipuler le Datastore à bas niveau</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951891" data-claire-element-id="951891">Ouvrez grands vos yeux et vos oreilles, c'est le moment d'être attentifs ! Pour utiliser le Datastore, il faut comprendre comment il fonctionne. Et là, vous ne pourrez pas vous baser sur votre expérience dans une base de données comme MySQL, Oracle ou PostgreSQL car le Datastore fonctionne très différemment !</p><aside id="r-951893" data-claire-element-id="951893" data-claire-semantic="information"><p id="r-951892" data-claire-element-id="951892">Si vous avez déjà utilisé une base de données NoSQL comme MongoDB ou Redis, certains principes vous seront déjà connus. Néanmoins, je vous recommande aussi la lecture de cette section car le Datastore a ses propres spécificités.</p></aside><h2 id="r-le-datastore-n-est-pas-une-base-de-donnees-relationnelle" data-claire-element-id="951900">Le Datastore n'est PAS une base de données relationnelle</h2><p id="r-951894" data-claire-element-id="951894">C'est la première chose à vous mettre dans la tête. Oubliez ce que vous croyez savoir sur les bases de données relationnelles comme MySQL ou PostgreSQL.</p><p id="r-951895" data-claire-element-id="951895">Le Datastore est à plusieurs égards beaucoup plus basique et bas niveau qu'une base de données classique. Imaginez le Datastore comme un espace géant prêt à accepter des données. N'importe quelles données. Vous lui envoyez du contenu et il vous le stocke. Quand vous en avez à nouveau besoin, il vous suffit de le lui demander.</p><div id="r-951897" data-claire-element-id="951897" data-claire-semantic="question"><p id="r-951896" data-claire-element-id="951896">Mais... On ne doit pas commencer par créer une base ? Des tables ?</p></div><p id="r-951898" data-claire-element-id="951898">Non ! Le Datastore n'utilise pas de tables. Il n'y a pas de schéma SQL : on dit que le Datastore est <em>schemaless </em>(sans schéma).</p><p id="r-951899" data-claire-element-id="951899">On n'a pas besoin de décrire comment sont formées les données avant de les stocker. Le Datastore vous dit tout simplement : &quot;<em>Envoie-moi ce que tu veux stocker, ne te prends pas la tête à créer des tables ou à m'indiquer les relations entre les données. Donne-moi, je stocke, c'est tout.</em>&quot;</p><h2 id="r-a-la-base-une-cle-et-une-valeur" data-claire-element-id="951913">A la base : une clé et une valeur</h2><p id="r-951901" data-claire-element-id="951901">Le Datastore peut être utilisé de façon massive, avec beaucoup de données et de requêtes simultanées. Pourtant, à son plus bas niveau, il fonctionne de façon très simple : il accepte des clés et des valeurs. Exactement comme une HashMap (<a href="../www.siteduzero.com/informatique/tutoriels/apprenez-a-programmer-en-c/les-tables-de-hachage.html">table de hachage</a>).</p><p id="r-951902" data-claire-element-id="951902">A son niveau le plus basique, le Datastore ressemble donc à ça :</p><figure id="r-le-datastore-stocke-des-paires-cle-valeur" data-claire-element-id="951905"><img id="r-951903" data-claire-element-id="951903" src="medias/uploads.siteduzero.com_files_421001_422000_421420.png" alt="Le Datastore stocke des paires clé-valeur"/><figcaption>Le Datastore stocke des paires clé-valeur</figcaption></figure><p id="r-951906" data-claire-element-id="951906">Le Datastore est capable de stocker beaucoup, beaucoup, beaucoup de paires clé-valeur :</p><figure id="r-le-datastore-est-capable-de-stocker-un-grand-nombre-de-paires-cle-valeur" data-claire-element-id="951909"><img id="r-951907" data-claire-element-id="951907" src="medias/uploads.siteduzero.com_files_421001_422000_421421.png" alt="Le Datastore est capable de stocker un grand nombre de paires clé-valeur"/><figcaption>Le Datastore est capable de stocker un grand nombre de paires clé-valeur</figcaption></figure><div id="r-951911" data-claire-element-id="951911" data-claire-semantic="question"><p id="r-951910" data-claire-element-id="951910">Mais... ce n'est pas structuré ! Ca fait juste un grand bazar ! On ne va quand même pas mélanger des noms de membres, des messages, des commandes...</p></div><p id="r-951912" data-claire-element-id="951912">En fait, le Datastore est un peu plus malin que ça. Il vous permet de regrouper les données dans des <em>entités</em>.</p><h2 id="r-les-entites-organisent-un-peu-les-donnees" data-claire-element-id="951926">Les entités organisent (un peu) les données</h2><p id="r-951914" data-claire-element-id="951914">Le Datastore a un concept d'<strong>entités</strong>. C'est ce qui nous aide à structurer les informations.</p><p id="r-951915" data-claire-element-id="951915">Les entités sont des regroupements d'une ou plusieurs paires clé-valeur. Elles ressemblent à ceci :</p><figure id="r-le-datastore-stocke-des-entites-qui-regroupent-les-paires-cle-valeur" data-claire-element-id="951918"><img id="r-951916" data-claire-element-id="951916" src="medias/uploads.siteduzero.com_files_421001_422000_421422.png" alt="Le Datastore stocke des entités qui regroupent les paires clé-valeur"/><figcaption>Le Datastore stocke des entités qui regroupent les paires clé-valeur</figcaption></figure><p id="r-951919" data-claire-element-id="951919">Le Datastore est aussi capable d'associer les entités entre elles. Une entité peut avoir une entité parente, qui peut elle-même avoir une entité parente, etc.<br/> On peut aussi stocker des entités sans parent.</p><figure id="r-les-entites-peuvent-avoir-une-relation-de-parente" data-claire-element-id="951922"><img id="r-951920" data-claire-element-id="951920" src="medias/uploads.siteduzero.com_files_421001_422000_421423.png" alt="Les entités peuvent avoir une relation de parenté"/><figcaption>Les entités peuvent avoir une relation de parenté</figcaption></figure><div id="r-951924" data-claire-element-id="951924" data-claire-semantic="question"><p id="r-951923" data-claire-element-id="951923">Cela m'a l'air quand même sacrément désorganisé ! Les deux enfants de l'entité rouge ont chacun un nombre de paires clé-valeur différentes !</p></div><p id="r-951925" data-claire-element-id="951925">Oui, mais c'est comme ça. Le Datastore est très flexible et ne vous impose pas grand chose. Si vous voulez stocker 2 informations dans une entité, vous pouvez le faire. Si vous voulez en ajouter, faites-le, on ne vous dira rien.</p><h2 id="r-imaginez-que-les-entites-sont-comme-des-objets" data-claire-element-id="951934">Imaginez que les entités sont comme des objets</h2><p id="r-951927" data-claire-element-id="951927">Un élément m'a aidé à bien comprendre le Datastore. Je me suis mis à imaginer que les entités sont comme des objets en Java. Un objet possède plusieurs attributs : ce sont les paires clé-valeur. La clé correspond au nom de l'attribut, et la valeur... à sa valeur.</p><p id="r-951928" data-claire-element-id="951928">Pour reprendre un exemple que j'aime bien, imaginez un Personnage d'un jeu vidéo. Il possède des attributs : un nom, un niveau de vie... Il possède aussi une Arme qui a ses propres caractéristiques. Les entités dans le Datastore pourraient être représentées comme ceci :</p><figure id="r-les-entites-sont-comme-des-objets" data-claire-element-id="951931"><img id="r-951929" data-claire-element-id="951929" src="medias/uploads.siteduzero.com_files_421001_422000_421424.png" alt="Les entités sont comme des objets"/><figcaption>Les entités sont comme des objets</figcaption></figure><aside id="r-951933" data-claire-element-id="951933" data-claire-semantic="warning"><p id="r-951932" data-claire-element-id="951932">Les entités d'un même groupe (celles qui sont reliées par un lien de parenté) sont stockées sur un même serveur par Google pour assurer l'intégrité des données. C'est pratique mais ça n'aide pas à répartir la charge entre de multiples serveurs.<br/> Retenez donc qu'il faut utiliser les relations entre entités avec parcimonie. C'est puissant mais, si on l'utilise de façon trop massive à une grande échelle, cela empêchera votre application de monter en charge avec plus de trafic et de données.</p></aside><h2 id="r-comment-identifier-une-entite" data-claire-element-id="951956">Comment identifier une entité ?</h2><p id="r-951935" data-claire-element-id="951935">Résumons. Les entités sont des groupes de données qui vivent dans l'espace intersidéral du Datastore. Il peut y en avoir une très grande quantité. Parfois, certaines entités sont reliées entre elles : elles ont une relation de parenté.</p><p id="r-951936" data-claire-element-id="951936">Les données (paires clé-valeur) au sein des entités sont appelées des <strong>propriétés</strong>. Celles-ci stockent obligatoirement des données basiques, comme du texte ou des nombres. La doc de Google nous donne tous les <a href="https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types">types autorisés pour les propriétés d'une entité</a>. Vous constaterez qu'il y a les types de base de Java mais aussi quelques types un peu plus riches, comme des coordonnées géographiques, mais en gros on ne peut rien y stocker de bien plus complexe (si vous avez besoin de stocker un objet, il faut créer une autre entité).</p><p id="r-951937" data-claire-element-id="951937">Nous voulons maintenant savoir comment repérer une entité. Vu qu'il y en a des milliers (que dis-je, des millions voire des milliards !) qui vivent au sein du Datastore, il va falloir leur donner un nom unique pour les repérer ! Une fois qu'on aura l'entité, on saura alors facilement lire et modifier toutes ses propriétés.</p><p id="r-951938" data-claire-element-id="951938">Pour identifier une entité, Google utilise la combinaison de 3 informations :</p><ul id="r-951945" data-claire-element-id="951945"><li id="r-951940" data-claire-element-id="951940"><p id="r-951939" data-claire-element-id="951939">Un type (<em>kind</em>) : c'est le type de données de votre entité. Par exemple, on peut dire que le type de données de mon personnage est... &quot;Personnage&quot;. C'est ma <em>classe </em>&quot;Personnage&quot;.</p></li><li id="r-951942" data-claire-element-id="951942"><p id="r-951941" data-claire-element-id="951941">Un identifiant (<em>identifier</em>) : il peut s'agir soit d'une chaîne de caractères soit d'un nombre. Vous pouvez le définir vous-mêmes ou bien laisser Google générer un nombre pour vous.</p></li><li id="r-951944" data-claire-element-id="951944"><p id="r-951943" data-claire-element-id="951943">Un parent (<em>ancestor path</em>) : si l'entité possède un parent, celui-ci aidera à identifier l'entité de façon unique. Si l'entité ne possède pas de parent, on dit que c'est une entité racine (<em>root</em>). Dans ce cas l'<em>ancestor path</em> vaut null.</p></li></ul><aside id="r-951947" data-claire-element-id="951947" data-claire-semantic="warning"><p id="r-951946" data-claire-element-id="951946">Une fois l'identifiant défini, il n'est plus possible de le changer !</p></aside><p id="r-951948" data-claire-element-id="951948">En résumé :</p><figure id="r-structure-d-un-identificateur-d-entite" data-claire-element-id="951951"><img id="r-951949" data-claire-element-id="951949" src="medias/uploads.siteduzero.com_files_421001_422000_421427.png" alt="Structure d'un identificateur d'entité"/><figcaption>Structure d'un identificateur d'entité</figcaption></figure><p id="r-951952" data-claire-element-id="951952">Si on le rapportait à notre exemple précédent avec des personnages et des armes, ça donnerait quelque chose de ce genre :</p><figure id="r-exemples-d-identificateurs" data-claire-element-id="951955"><img id="r-951953" data-claire-element-id="951953" src="medias/uploads.siteduzero.com_files_421001_422000_421426.png" alt="Exemples d'identificateurs"/><figcaption>Exemples d'identificateurs</figcaption></figure><h2 id="r-les-operations-7" data-claire-element-id="951969">Les opérations</h2><p id="r-951957" data-claire-element-id="951957">Maintenant que nous savons comment le Datastore de Google stocke les entités, il ne nous reste plus qu'une chose à voir avant de commencer à coder : quelles actions peut-on faire sur une telle base ?</p><p id="r-951958" data-claire-element-id="951958">Il y a 4 opérations de base disponibles dans une base de données NoSQL comme le Datastore :</p><ul id="r-951967" data-claire-element-id="951967"><li id="r-951960" data-claire-element-id="951960"><p id="r-951959" data-claire-element-id="951959"><code>get()</code> : récupère une entité en fonction de son identifiant</p></li><li id="r-951962" data-claire-element-id="951962"><p id="r-951961" data-claire-element-id="951961"><code>put()</code> : écrit une entité (ou en écrase une)</p></li><li id="r-951964" data-claire-element-id="951964"><p id="r-951963" data-claire-element-id="951963"><code>delete()</code> : supprime une entité via son identifiant</p></li><li id="r-951966" data-claire-element-id="951966"><p id="r-951965" data-claire-element-id="951965"><code>query()</code> : retrouve des entités en fonction de certains critères de recherche</p></li></ul><p id="r-951968" data-claire-element-id="951968">Voilà, vous en savez assez sur les concepts du Datastore. Place au code maintenant ! :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">
<span class="arrow"></span>
<span class="next">Le Datastore</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
<span class="next">Manipuler le Datastore à bas niveau</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ManipulerleDatastorebasniveau"></a><h2>Manipuler le Datastore à bas niveau</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
<span class="arrow"></span>
<span class="next">Comprendre le Datastore</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
<span class="next">Exemple : le Datastore dans une application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-951971" data-claire-element-id="951971">Google nous propose plusieurs moyens d'accéder au Datastore. Je vais vous montrer ici la méthode de base, c'est-à-dire la méthode la plus bas niveau. Cela vous permettra de bien comprendre comment fonctionne le Datastore dans ses entrailles et de faire le lien avec ce que je viens de vous expliquer précédemment.</p><p id="r-951972" data-claire-element-id="951972">De l'aveu même de Google, manipuler le Datastore à bas niveau n'est pas le plus pratique. On recommande d'utiliser une couche d'abstraction comme la bibliothèque Objectify qui mappe vos objets au Datastore (c'est une sorte d'ORM pour le Datastore). Je vous en parlerai dans un prochain chapitre car c'est certainement avec Objectify que vous réaliserez la plupart de vos vraies applications. En attendant, un peu de pratique à bas niveau ne peut pas vous faire de mal !</p><p id="r-951973" data-claire-element-id="951973">Contrairement à Google Cloud SQL, vous n'avez rien à activer pour utiliser le Datastore. En fait, une instance locale du Datastore tourne déjà sur votre machine si vous avez installé le plugin Eclipse ! En somme, il est beaucoup plus facile de se lancer dans une application utilisant le Datastore. :)</p><aside id="r-951975" data-claire-element-id="951975" data-claire-semantic="information"><p id="r-951974" data-claire-element-id="951974">Notez que le Datastore peut aussi être utilisé depuis une application externe avec le service Cloud Datastore. Celui-ci est activable depuis l'API Console mais nous ne le ferons pas ici car ce n'est pas nécessaire pour s'en servir depuis une application App Engine.</p></aside><h2 id="r-recuperation-du-service-datastore" data-claire-element-id="951981">Récupération du service Datastore</h2><p id="r-951976" data-claire-element-id="951976">Avant toute chose, vous devez importer les APIs du Datastore dans votre application :</p><pre id="r-951977" data-claire-element-id="951977"><code data-claire-semantic="java">import com.google.appengine.api.datastore.*;</code></pre><p id="r-951978" data-claire-element-id="951978">Ensuite, vous devez récupérer un objet représentant le service du Datastore. On fait appel à une <em>factory</em> qui nous renvoie l'objet dont nous allons avoir besoin. Cela se fait en une ligne :</p><pre id="r-951979" data-claire-element-id="951979"><code data-claire-semantic="java">DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();</code></pre><p id="r-951980" data-claire-element-id="951980">Vous êtes prêts à utiliser le Datastore !</p><h2 id="r-creer-une-entite-1" data-claire-element-id="952014">Créer une entité</h2><p id="r-951982" data-claire-element-id="951982">Pour créer une entité, 3 opérations sont nécessaires :</p><ul id="r-951989" data-claire-element-id="951989"><li id="r-951984" data-claire-element-id="951984"><p id="r-951983" data-claire-element-id="951983">Créez l'objet représentant l'entité, de type Entity</p></li><li id="r-951986" data-claire-element-id="951986"><p id="r-951985" data-claire-element-id="951985">Assignez-lui une ou plusieurs propriétés (ce sont les paires clé-valeur)</p></li><li id="r-951988" data-claire-element-id="951988"><p id="r-951987" data-claire-element-id="951987">Demandez l'écriture de l'entité au Datastore avec la méthode <code data-claire-semantic="java">put()</code></p></li></ul><p id="r-951990" data-claire-element-id="951990">Essayons de recréer l'entité Personnage que j'avais inventée pour vous expliquer le fonctionnement du Datastore :</p><figure id="r-les-entites-que-nous-allons-creer" data-claire-element-id="951993"><img id="r-951991" data-claire-element-id="951991" src="medias/uploads.siteduzero.com_files_421001_422000_421424.png" alt="Les entités que nous allons créer"/><figcaption>Les entités que nous allons créer</figcaption></figure><pre id="r-951994" data-claire-element-id="951994"><code data-claire-semantic="java">// Crée l'entité de type (kind) &quot;Personnage&quot;
Entity personnage = new Entity(&quot;Personnage&quot;);

// Assigne des propriétés à l'entité
personnage.setProperty(&quot;nom&quot;, &quot;Groknan le Barbare&quot;);
personnage.setProperty(&quot;niveau&quot;, 25);
personnage.setProperty(&quot;vie&quot;, 100);

// Enregistre l'entité dans le Datastore
datastore.put(personnage);</code></pre><p id="r-951995" data-claire-element-id="951995">Ici, Google a assigné un identifiant numérique automatiquement à l'entité. Si vous voulez lui donner votre propre identifiant, il suffit d'ajouter un second paramètre lorsque vous créez l'entité :</p><pre id="r-951996" data-claire-element-id="951996"><code data-claire-semantic="java">// Crée l'entité de type (kind) &quot;Personnage&quot; avec l'ID &quot;groknan&quot;
Entity personnage = new Entity(&quot;Personnage&quot;, &quot;groknan&quot;);</code></pre><p id="r-951997" data-claire-element-id="951997">Si vous exécutez ce code sur votre machine, le Datastore installé localement va stocker les données. Vous pouvez voir les données enregistrées en vous rendant dans la console d'administration intégrée à l'application. Pour mémoire, vous devriez la trouver à l'adresse :</p><p id="r-951998" data-claire-element-id="951998"><a href="http://localhost:8888/_ah/admin">http://localhost:8888/_ah/admin</a></p><p id="r-951999" data-claire-element-id="951999">On y voit l'entité qu'on vient de créer :</p><figure id="r-le-datastore-viewer-integre-a-votre-application-permet-de-voir-les-entites" data-claire-element-id="952002"><img id="r-952000" data-claire-element-id="952000" src="medias/uploads.siteduzero.com_files_421001_422000_421444.png" alt="Le Datastore viewer intégré à votre application permet de voir les entités"/><figcaption>Le Datastore viewer intégré à votre application permet de voir les entités</figcaption></figure><p id="r-952003" data-claire-element-id="952003">Le Datastore viewer vous permet de filtrer les données par entité. Vous pouvez les supprimer manuellement à partir d'ici : cliquez sur les cases correspondant aux entités à supprimer et cliquez sur &quot;Delete&quot;.</p><p id="r-952004" data-claire-element-id="952004">La clé (key) de l'entité que vous voyez ici est la combinaison du type (ici &quot;Personnage&quot;), de la clé (ici &quot;groknan&quot;) et des ancêtres (ici, il n'y a aucun ancêtre). C'est elle qui permet à Google de retrouver rapidement l'entité au sein du Datastore, sur le même principe de fonctionnement qu'une HashMap (table de hachage).</p><aside id="r-952006" data-claire-element-id="952006" data-claire-semantic="information"><p id="r-952005" data-claire-element-id="952005">Notez que les données ne sont pas supprimées lorsque vous arrêtez le serveur local. Si vous voulez supprimer <em>toute</em> la base locale, il vous suffit de supprimer le fichier war/WEB-INF/appengine-generated/local_db.bin qui a été généré.</p></aside><p id="r-952007" data-claire-element-id="952007">Si nous voulons aussi créer l'arme du personnage, il faut spécifier la clé de son parent dans un troisième paramètre en créant l'entité :</p><pre id="r-952008" data-claire-element-id="952008"><code data-claire-semantic="java">Entity arme = new Entity(&quot;Arme&quot;, &quot;pourfendeur&quot;, personnage.getKey());</code></pre><p id="r-952009" data-claire-element-id="952009">On récupère comme vous le voyez la clé du parent en faisant appel à <code data-claire-semantic="java">personnage.getKey()</code>.</p><p id="r-952010" data-claire-element-id="952010">Résumons tout ceci dans un code qui crée le personnage et l'arme comme entité fille :</p><pre id="r-952011" data-claire-element-id="952011"><code data-claire-semantic="java">DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();
            
Entity personnage = new Entity(&quot;Personnage&quot;, &quot;groknan&quot;);

personnage.setProperty(&quot;nom&quot;, &quot;Groknan le Barbare&quot;);
personnage.setProperty(&quot;niveau&quot;, 25);
personnage.setProperty(&quot;vie&quot;, 100);

Entity arme = new Entity(&quot;Arme&quot;, &quot;pourfendeur&quot;, personnage.getKey());

arme.setProperty(&quot;nom&quot;, &quot;Pourfendeur des faibles&quot;);
arme.setProperty(&quot;degats&quot;, 250);

datastore.put(personnage);
datastore.put(arme);</code></pre><aside id="r-952013" data-claire-element-id="952013" data-claire-semantic="information"><p id="r-952012" data-claire-element-id="952012">Effectuer deux <code data-claire-semantic="java">put()</code> d'affilée comme ceci n'est pas très performant car cela provoque 2 appels au Datastore. Si vous avez plusieurs entités à enregistrer d'un coup, regroupez-les au sein d'une liste d'entités (<code data-claire-semantic="java">List&lt;Entity&gt; entites =</code> ...) puis faites un <code data-claire-semantic="java">put(entites);</code></p></aside><h2 id="r-mettre-a-jour-une-entite" data-claire-element-id="952016">Mettre à jour une entité</h2><p id="r-952015" data-claire-element-id="952015">Surprise ! :D <br/> Le Datastore ne fait pas la différence entre la création et la mise à jour d'une entité. Si vous voulez modifier une entité existante, appelez simplement <code data-claire-semantic="java">put()</code> : vous écraserez l'ancienne entité par la nouvelle.</p><h2 id="r-recuperer-une-entite-grace-a-sa-cle" data-claire-element-id="952032">Récupérer une entité grâce à sa clé</h2><p id="r-952017" data-claire-element-id="952017">La méthode <code data-claire-semantic="java">get()</code> permet de récupérer une entité en se basant sur sa clé. Elle attend un objet de type Key qui représente la clé de l'entité.</p><p id="r-952018" data-claire-element-id="952018">Il faut commencer par créer la clé qui correspond à l'entité que l'on recherche :</p><pre id="r-952019" data-claire-element-id="952019"><code data-claire-semantic="java">Key clePersonnage = KeyFactory.createKey(&quot;Personnage&quot;, &quot;groknan&quot;);</code></pre><p id="r-952020" data-claire-element-id="952020">L'objet clePersonnage représente la clé de l'entité de type &quot;Personnage&quot; et d'ID &quot;groknan&quot;.</p><aside id="r-952023" data-claire-element-id="952023" data-claire-semantic="information"><p id="r-952021" data-claire-element-id="952021">Si on souhaite créer une clé correspondant à une entité fille, il faut impérativement indiquer la clé du parent en premier paramètre. Pour l'arme, ça donnerait :</p><pre id="r-952022" data-claire-element-id="952022"><code data-claire-semantic="java">Key cleArme = KeyFactory.createKey(clePersonnage, &quot;Arme&quot;, &quot;pourfendeur&quot;);</code></pre></aside><p id="r-952024" data-claire-element-id="952024">On peut ensuite appeler la méthode <code data-claire-semantic="java">get()</code> en lui transmettant la clé :</p><pre id="r-952025" data-claire-element-id="952025"><code data-claire-semantic="java">Entity personnageTrouve = datastore.get(clePersonnage);</code></pre><p id="r-952026" data-claire-element-id="952026">Maintenant qu'on possède l'entité, si on souhaite récupérer une de ses propriétés, on peut appeler <code data-claire-semantic="java"><a href="https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/PropertyContainer#getProperty%28java.lang.String%29">getProperty()</a></code> :</p><pre id="r-952027" data-claire-element-id="952027"><code data-claire-semantic="java">String nomPersonnage = (String) personnageTrouve.getProperty(&quot;nom&quot;);</code></pre><p id="r-952028" data-claire-element-id="952028">Notez qu'il existe aussi la méthode <code data-claire-semantic="java"><a href="https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/PropertyContainer#getProperties%28%29">getProperties()</a></code> qui renvoie une Map de toutes les propriétés contenues dans l'entité.</p><div id="r-952030" data-claire-element-id="952030" data-claire-semantic="question"><p id="r-952029" data-claire-element-id="952029">Et si je ne connais pas la clé ? Disons, si je veux récupérer tous les personnages qui ont 100 de vie, comment je fais ?</p></div><p id="r-952031" data-claire-element-id="952031">Alors là, il faut effectuer une requête (<em>query</em>). Nous allons en parler juste après, c'est là que les choses vont se corser...</p><h2 id="r-supprimer-une-entite" data-claire-element-id="952037">Supprimer une entité</h2><p id="r-952033" data-claire-element-id="952033">Pour supprimer une entité, il suffit de connaître sa clé et d'appeler <code data-claire-semantic="java">delete()</code> :</p><pre id="r-952034" data-claire-element-id="952034"><code data-claire-semantic="java">Key clePersonnage = KeyFactory.createKey(&quot;Personnage&quot;, &quot;groknan&quot;);

datastore.delete(clePersonnage);</code></pre><aside id="r-952036" data-claire-element-id="952036" data-claire-semantic="warning"><p id="r-952035" data-claire-element-id="952035">Il n'y a pas de suppression automatique en cascade dans le Datastore. Si vous supprimez le personnage, les entités filles (comme l'arme) ne seront pas supprimées. Elles auront toujours le personnage pour parent, même si celui-ci n'existe plus.<br/> C'est à vous de gérer la suppression en cascade au sein du code de votre application si vous ne voulez pas vous retrouver dans ce genre de situation. ;)</p></aside><h2 id="r-retrouver-une-entite-avec-une-requete" data-claire-element-id="952071">Retrouver une entité avec une requête</h2><p id="r-952038" data-claire-element-id="952038">Pour retrouver une entité si vous ne connaissez pas sa clé, il faut construire une requête (<em>query</em>). Comme je vous le disais, c'est à partir de là que les choses se corsent...</p><p id="r-952039" data-claire-element-id="952039">En effet, la création d'une requête à bas niveau dans le Datastore est particulièrement complexe. Je vais vous montrer quelques exemples simples pour que vous ayez une idée de la façon dont ça fonctionne, mais je ne vais pas essayer d'être aussi exhaustif que la <a href="https://developers.google.com/appengine/docs/java/datastore/queries">documentation de Google sur les requêtes</a>. En fait, je préfère qu'on passe plus de temps ensemble à voir comment construire des requêtes avec la bibliothèque Objectify dans un prochain chapitre, car celle-ci nous simplifie pas mal la vie. En attendant, pour notre culture générale, voyons comment faire une requête bas niveau dans l'API. :)</p><p id="r-952040" data-claire-element-id="952040">Pour faire une requête dans la base du Datastore, on crée un objet de type Query. Une requête est constituée :</p><ul id="r-952047" data-claire-element-id="952047"><li id="r-952042" data-claire-element-id="952042"><p id="r-952041" data-claire-element-id="952041">D'un type d'entité</p></li><li id="r-952044" data-claire-element-id="952044"><p id="r-952043" data-claire-element-id="952043">De filtres (optionnel)</p></li><li id="r-952046" data-claire-element-id="952046"><p id="r-952045" data-claire-element-id="952045">De demandes d'ordonnancement (optionnel)</p></li></ul><h3 id="r-le-type-d-entite" data-claire-element-id="952053">Le type d'entité</h3><p id="r-952048" data-claire-element-id="952048">Dans sa forme la plus simple, la requête demande toutes les entités d'un même type :</p><pre id="r-952049" data-claire-element-id="952049"><code data-claire-semantic="java">Query q = new Query(&quot;Personnage&quot;);
List&lt;Entity&gt; results = datastore.prepare(q).asList(FetchOptions.Builder.withDefaults());</code></pre><p id="r-952050" data-claire-element-id="952050">Dans la première ligne, je construis la requête. Ici, je demande tout ce que le Datastore possède comme entités de type Personnage.<br/> Dans la seconde ligne, je prépare la requête et demande son exécution au Datastore. Je lui demande ici de me retourner une liste d'entités.</p><p id="r-952051" data-claire-element-id="952051">Je peux ensuite parcourir la liste qui m'a été retournée et effectuer des actions :</p><pre id="r-952052" data-claire-element-id="952052"><code data-claire-semantic="java">for (Entity result : results) {
    // Effectuer des actions sur l'entité result
}</code></pre><h3 id="r-les-filtres-8" data-claire-element-id="952059">Les filtres</h3><p id="r-952054" data-claire-element-id="952054">Le Datastore nous permet de filtrer les entités en fonction de leurs propriétés. On peut ainsi demander : &quot;Donne-moi toutes les entités (de type Personnage) dont le niveau de vie est à 100.&quot;.</p><pre id="r-952055" data-claire-element-id="952055"><code data-claire-semantic="java">Query q = new Query(&quot;Personnage&quot;).setFilter(new Query.FilterPredicate(&quot;vie&quot;, Query.FilterOperator.EQUAL, 100));</code></pre><p id="r-952056" data-claire-element-id="952056">Ici, on a créé une requête sur les entités de type Personnage avec un filtre qui indique qu'on souhaite uniquement les entités dont la propriété vie vaut 100. On peut aussi utiliser d'autres opérateurs comme &quot;supérieur ou égal&quot;, &quot;inférieur à&quot;, &quot;différent de&quot;, etc. On peut aussi combiner plusieurs filtres avec des opérateurs logiques comme &quot;OU&quot; ou &quot;ET&quot;. Vous trouverez <a href="https://developers.google.com/appengine/docs/java/datastore/queries#Filters">plus d'informations sur les filtres</a> dans la doc.</p><p id="r-952057" data-claire-element-id="952057">Enfin, il faut savoir qu'on peut filtrer en fonction des ancêtres d'une entité. Je peux demander toutes les armes d'un ancêtre précis en fonction de sa clé. Par exemple, si je veux toutes les armes dans le même groupe d'entités que mon personnage &quot;groknan&quot; (c'est-à-dire toutes les armes qui appartiennent à groknan), j'écrirai :</p><pre id="r-952058" data-claire-element-id="952058"><code data-claire-semantic="java">Query q = new Query(&quot;Arme&quot;).setAncestor(KeyFactory.createKey(&quot;Personnage&quot;, &quot;groknan&quot;));</code></pre><h3 id="r-les-ordonnancements" data-claire-element-id="952064">Les ordonnancements</h3><p id="r-952060" data-claire-element-id="952060">Pour récupérer les résultats dans un ordre particulier en fonction de leurs propriétés, on fera appel à la méthode <code data-claire-semantic="java">addSort()</code> :</p><pre id="r-952061" data-claire-element-id="952061"><code data-claire-semantic="java">Query q = new Query(&quot;Personnage&quot;).addSort(&quot;vie&quot;, SortDirection.ASCENDING);</code></pre><p id="r-952062" data-claire-element-id="952062">On peut combiner et chaîner les appels à <code data-claire-semantic="java">addSort()</code> si on veut faire plusieurs tris d'affilée.</p><pre id="r-952063" data-claire-element-id="952063"><code data-claire-semantic="java">Query q = new Query(&quot;Personnage&quot;).addSort(&quot;vie&quot;, SortDirection.ASCENDING).addSort(&quot;niveau&quot;, SortDirection.DESCENDING);</code></pre><h3 id="r-limiter-le-nombre-de-resultats" data-claire-element-id="952067">Limiter le nombre de résultats</h3><p id="r-952065" data-claire-element-id="952065">Il est possible (et même recommandé) de limiter le nombre de résultats pour ne pas récupérer un trop grand nombre d'entités. Cela se fait au moment de la demande d'exécution de la requête comme ceci :</p><pre id="r-952066" data-claire-element-id="952066"><code data-claire-semantic="java">List&lt;Entity&gt; results = datastore.prepare(q).asList(FetchOptions.Builder.withLimit(5));</code></pre><h3 id="r-aller-plus-loin-43" data-claire-element-id="952070">Aller plus loin</h3><p id="r-952068" data-claire-element-id="952068">Je ne vous ai fait qu'une très brève introduction au système de requêtes bas niveau de l'API du Datastore. Il y a beaucoup d'autres options et d'autres choses à savoir mais, comme je vous l'ai dit, je ne souhaite pas rentrer trop dans le détail ici. Si vous voulez en savoir plus, consultez la <a href="https://developers.google.com/appengine/docs/java/datastore/queries">doc sur les requêtes</a>.</p><p id="r-952069" data-claire-element-id="952069">Manipuler la bibliothèque bas niveau est, comme vous le voyez, assez complexe. Il faut appeler les bonnes méthodes, passer les bons objets... Il n'y a pas de &quot;langage de requête&quot; comme c'est le cas en SQL.<br/> Heureusement, la plupart des développeurs App Engine ne sont pas fous et utilisent une bibliothèque comme Objectify qui est plébiscitée car elle nous simplifie grandement le travail. Je vous la présenterai dans un prochain chapitre. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
<span class="arrow"></span>
<span class="next">Comprendre le Datastore</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
<span class="next">Exemple : le Datastore dans une application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ExempleleDatastoredansuneapplication"></a><h2>Exemple : le Datastore dans une application</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
<span class="arrow"></span>
<span class="next">Manipuler le Datastore à bas niveau</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">
<span class="next">Manipuler le DataStore avec Objectify</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-creation-d-un-livre-d-or-utilisant-le-datastore" data-claire-element-id="952085">Création d'un livre d'or utilisant le Datastore</h2><p id="r-952073" data-claire-element-id="952073">Je vous propose d'adapter le petit livre d'or que nous avions fait pour expérimenter Cloud SQL dans le chapitre précédent. Créez une nouvelle application &quot;GuestbookDatastore&quot; avec un peu de code de base.</p><p id="r-952074" data-claire-element-id="952074">On y reprend le même fichier web.xml de configuration :</p><pre id="r-952075" data-claire-element-id="952075"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;
xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;
xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; version=&quot;2.5&quot;&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;Guestbook&lt;/servlet-name&gt;
		&lt;servlet-class&gt;guestbook.GuestbookServlet&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;Guestbook&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;welcome-file-list&gt;
		&lt;welcome-file&gt;guestbook.jsp&lt;/welcome-file&gt;
	&lt;/welcome-file-list&gt;
&lt;/web-app&gt;</code></pre><p id="r-952076" data-claire-element-id="952076">L'application fonctionne sur une seule URL, la racine &quot;/&quot;. Avec la méthode HTTP GET, on affiche le formulaire et les derniers messages. Avec la méthode HTTP POST, on enregistre le message et on redirige vers la même page en GET pour lister les résultats.</p><p id="r-952077" data-claire-element-id="952077">Voici à quoi ressemble notre servlet :</p><pre id="r-952078" data-claire-element-id="952078"><code data-claire-semantic="java">package guestbook;

import java.io.IOException;
import java.util.Date;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.http.*;
import com.google.appengine.api.datastore.*;
import com.google.appengine.api.datastore.Query.SortDirection;

@SuppressWarnings(&quot;serial&quot;)
public class GuestbookServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp) {
        try {
            DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();

            // Demande tous les 5 derniers messages triés par date décroissante
            Query q = new Query(&quot;Message&quot;).addSort(&quot;date&quot;, SortDirection.DESCENDING);
            List&lt;Entity&gt; results = datastore.prepare(q).asList(FetchOptions.Builder.withLimit(5));

            req.setAttribute(&quot;messages&quot;, results);
            this.getServletContext().getRequestDispatcher(&quot;/WEB-INF/guestbook.jsp&quot;).forward(req, resp);
        } catch (ServletException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void doPost(HttpServletRequest req, HttpServletResponse resp) {	
        try {
            DatastoreService datastore = DatastoreServiceFactory.getDatastoreService();

            // Stocke le message posté
            Entity message = new Entity(&quot;Message&quot;);

            message.setProperty(&quot;name&quot;, req.getParameter(&quot;name&quot;));
            message.setProperty(&quot;message&quot;, req.getParameter(&quot;message&quot;));
            message.setProperty(&quot;date&quot;, new Date());

            datastore.put(message);

            resp.sendRedirect(&quot;/&quot;);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code></pre><p id="r-952079" data-claire-element-id="952079">Il n'y a absolument rien de compliqué dans ce code : on crée un seul type d'entité (&quot;Message&quot;) et on le stocke avec 3 propriétés. A l'affichage, la requête récupère les derniers messages et les transmet à la JSP. Celle-ci n'a ensuite plus qu'à itérer sur cette liste d'entités :</p><pre id="r-952080" data-claire-element-id="952080"><code data-claire-semantic="jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ page import=&quot;com.google.appengine.api.datastore.*&quot; %&gt;
&lt;%@ page import=&quot;java.util.List&quot; %&gt;


&lt;!DOCTYPE html&gt;

&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Livre d'or&lt;/title&gt;
		&lt;meta charset=&quot;utf-8&quot; /&gt;
	&lt;/head&gt;

	&lt;body&gt;
		&lt;h1&gt;Vous avez aimé mon site ? Dites-le !&lt;/h1&gt;
		&lt;form action=&quot;/post&quot; method=&quot;post&quot;&gt;
			&lt;p&gt;
				&lt;label&gt;Votre nom : &lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;/label&gt;
			&lt;/p&gt;
			&lt;p&gt;
				&lt;label&gt;Votre message :

				&lt;textarea name=&quot;message&quot; style=&quot;width: 200px; height: 100px;&quot;&gt;&lt;/textarea&gt;&lt;/label&gt;
			&lt;/p&gt;
			&lt;p&gt;
				&lt;input type=&quot;submit&quot; /&gt;
			&lt;/p&gt;
		&lt;/form&gt;
	
		&lt;h1&gt;Ils ont aimé :&lt;/h1&gt;
		&lt;p&gt;&lt;em&gt;(et c'est stocké dans le Datastore !)&lt;/em&gt;&lt;/p&gt;
		&lt;%
			List&lt;Entity&gt; messages = (List&lt;Entity&gt;) request.getAttribute(&quot;messages&quot;);
			for (Entity message : messages) {
		%&gt;
		&lt;p&gt;
			&lt;strong&gt;&lt;%= message.getProperty(&quot;name&quot;) %&gt;&lt;/strong&gt; a écrit :

			&lt;%= message.getProperty(&quot;message&quot;) %&gt;
		&lt;/p&gt;
		&lt;%
			}
		%&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-952081" data-claire-element-id="952081">Et voilà notre livre d'or utilisant le Datastore ! :)</p><figure id="r-le-livre-d-or-utilisant-le-datastore" data-claire-element-id="952084"><img id="r-952082" data-claire-element-id="952082" src="medias/uploads.siteduzero.com_files_421001_422000_421446.png" alt="Le livre d'or utilisant le Datastore"/><figcaption>Le livre d'or utilisant le Datastore</figcaption></figure><h2 id="r-des-requetes-qui-retournent-des-resultats-a-jour" data-claire-element-id="952111">Des requêtes qui retournent des résultats à jour</h2><div id="r-952087" data-claire-element-id="952087" data-claire-semantic="question"><p id="r-952086" data-claire-element-id="952086">Euh, je viens de tester mais ça n'a pas l'air de marcher très bien. Mes nouveaux messages ne s'affichent pas tout de suite après avoir été postés. :euh:</p></div><p id="r-952088" data-claire-element-id="952088">Fichtre ! Le Datastore serait-il lent ?!</p><p id="r-952089" data-claire-element-id="952089">En fait, le Datastore est asynchrone. Lorsque vous demandez à enregistrer une entité, il rend la main à votre application en lui disant &quot;<em>C'est noté, je vais stocker ça.</em>&quot;... mais contrairement à ce qu'on a l'habitude avec SQL, les données ne sont pas forcément stockées tout de suite.</p><p id="r-952090" data-claire-element-id="952090">On peut régler le problème en changeant un peu notre requête. Il faut savoir qu'on distingue 2 types de requêtes dans le Datastore :</p><ul id="r-952095" data-claire-element-id="952095"><li id="r-952092" data-claire-element-id="952092"><p id="r-952091" data-claire-element-id="952091">Celles qui recherchent des objets <strong>sans parent</strong> : elles sont <em>eventually consistent</em>. Il est possible que vous n'obteniez pas des données complètement à jour. Ce type de requête est le plus rapide.</p></li><li id="r-952094" data-claire-element-id="952094"><p id="r-952093" data-claire-element-id="952093">Celles qui recherchent des objets <strong>qui ont un parent commun</strong> : elles sont <em>strongly consistent</em>. Vous êtes sûr d'obtenir les données les plus à jour. En revanche, ce type de requête est plus long.</p></li></ul><p id="r-952096" data-claire-element-id="952096">Comme vous l'avez vu, nous avons fait des requêtes sans parent, ce qui explique pourquoi elles retournent parfois des résultats qui ne sont pas encore à jour.</p><figure id="r-nos-entites-message-n-ont-pas-d-ancetre-il-y-a-un-risque-que-nous-recuperions-des-donnees-pas-encore-a-jour" data-claire-element-id="952099"><img id="r-952097" data-claire-element-id="952097" src="medias/uploads.siteduzero.com_files_421001_422000_421447.png" alt="Nos entités Message n'ont pas d'ancêtre : il y a un risque que nous récupérions des données pas encore à jour"/><figcaption>Nos entités Message n'ont pas d'ancêtre : il y a un risque que nous récupérions des données pas encore à jour</figcaption></figure><p id="r-952100" data-claire-element-id="952100">Si on veut avoir des résultats à jour, il faut indiquer un parent commun. Contrairement à ce que vous pourriez penser, on n'est pas obligé de créer une entité parente. Il suffit d'indiquer une clé parente commune pour chacun des messages, même si cette clé ne correspond à aucune entité réelle.</p><figure id="r-nos-entites-message-ont-un-ancetre-les-donnees-recuperees-seront-forcement-a-jour" data-claire-element-id="952103"><img id="r-952101" data-claire-element-id="952101" src="medias/uploads.siteduzero.com_files_421001_422000_421448.png" alt="Nos entités Message ont un ancêtre : les données récupérées seront forcément à jour"/><figcaption>Nos entités Message ont un ancêtre : les données récupérées seront forcément à jour</figcaption></figure><p id="r-952104" data-claire-element-id="952104">En clair, il nous suffit de définir une clé correspond à un ancêtre (même s'il est fictif) quand on crée les messages :</p><pre id="r-952105" data-claire-element-id="952105"><code data-claire-semantic="java">Entity message = new Entity(&quot;Message&quot;, KeyFactory.createKey(&quot;LivreOr&quot;, &quot;livre&quot;));</code></pre><p id="r-952106" data-claire-element-id="952106">... et de demander les messages dépendant de cet ancêtre pour être sûr d'avoir des données toujours à jour :</p><pre id="r-952107" data-claire-element-id="952107"><code data-claire-semantic="java">Query q = new Query(&quot;Message&quot;).setAncestor(KeyFactory.createKey(&quot;LivreOr&quot;, &quot;livre&quot;)).addSort(&quot;date&quot;, SortDirection.DESCENDING);</code></pre><p id="r-952108" data-claire-element-id="952108">Et voilà ! Testez le code, vous verrez que cette fois les données récupérées seront toujours à jour !</p><aside id="r-952110" data-claire-element-id="952110" data-claire-semantic="warning"><p id="r-952109" data-claire-element-id="952109">Comme toutes les bonnes choses, il ne faut pas en abuser. Les données dépendant d'un ancêtre commun sont forcément stockées sur le même serveur chez Google comme je vous l'avais expliqué. C'est pratique mais ça a ses limites.<br/> Si on manipule mal trop de données dépendant d'un ancêtre commun, on risque de congestionner son application et celle-ci risque de ralentir. Ce serait un peu dommage alors que la promesse du Datastore est quand même de nous permettre de passer à l'échelle !</p></aside><h2 id="r-tester-l-application" data-claire-element-id="952114">Tester l'application</h2><p id="r-952112" data-claire-element-id="952112">Si vous voulez tester l'application, je l'ai uploadée sur les serveurs d'App Engine à l'adresse suivante : <a href="http://sdz-guestbook-datastore.appspot.com/"><strong>http://sdz-guestbook-datastore.appspot.com/</strong></a></p><p id="r-952113" data-claire-element-id="952113">Voilà, nous nous sommes suffisamment amusés avec l'API bas niveau du Datastore comme ça, il est temps de découvrir l'incontournable bibliothèque Objectify !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
<span class="arrow"></span>
<span class="next">Manipuler le Datastore à bas niveau</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">
<span class="next">Manipuler le DataStore avec Objectify</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ManipulerleDataStoreavecObjectify"></a><h2>Manipuler le DataStore avec Objectify</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
<span class="arrow"></span>
<span class="next">Exemple : le Datastore dans une application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
<span class="next">Configurer Objectify</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-952117" data-claire-element-id="952117">On vient de le voir : le Datastore est un système puissant mais son API bas niveau est assez délicate à utiliser, notamment son système de requêtes. De l'avis de plusieurs développeurs que j'ai rencontrés (y compris des gens de chez Google !), <strong>il est recommandé d'utiliser la bibliothèque Objectify pour travailler avec le Datastore aujourd'hui</strong>.</p><p id="r-952118" data-claire-element-id="952118">Contrairement au Datastore lui-même, la lib Objectify n'est pas maintenue par Google lui-même mais par un développeur externe. Objectify est particulièrement suivi et maintenu, c'est donc un excellent choix pour développer avec le Datastore.</p><p id="r-952119" data-claire-element-id="952119">Objectify se veut être une API &quot;<em>ni trop bas niveau, ni trop haut niveau&quot;</em>. Elle est (heureusement) plus haut niveau que l'API de base que nous venons de découvrir, mais elle ne nous empêche pas d'effectuer des actions basiques si nécessaire.</p><p id="r-952120" data-claire-element-id="952120">Objectify est un peu comme un ORM pour le Datastore : son rôle est de persister (stocker) vos objets dans le Datastore.</p><figure id="r-objectify-permet-de-stocker-des-objets-dans-le-datastore-et-de-les-ressortir" data-claire-element-id="952123"><img id="r-952121" data-claire-element-id="952121" src="medias/uploads.siteduzero.com_files_421001_422000_421450.png" alt="Objectify permet de stocker des objets dans le Datastore et de les ressortir"/><figcaption>Objectify permet de stocker des objets dans le Datastore et de les ressortir</figcaption></figure><p id="r-952124" data-claire-element-id="952124">Objectify s'occupe de la création d'entités et de clés et de la relation entre ces éléments. Mieux : il utilise automatiquement le service Memcache de Google qui permet de mettre en cache des données pour aller encore plus vite et vous éviter d'appeler systématiquement le Datastore.</p><p id="r-952125" data-claire-element-id="952125">Objectify est suffisamment simple à comprendre et pourtant très puissant. La plupart des vraies applications sur App Engine l'utilisent aujourd'hui. Bref, c'est à se demander ce qu'on attend pour commencer ! :D</p>
</div><a name="ConfigurerObjectify"></a><h2>Configurer Objectify</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">
<span class="arrow"></span>
<span class="next">Manipuler le DataStore avec Objectify</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
<span class="next">Créer des objets persistables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952126" data-claire-element-id="952126">Objectify est une bibliothèque créée par un développeur tiers. Elle n'est pas installée automatiquement avec le plugin App Engine pour Eclipse. Heureusement, son installation et sa configuration sont simples. :)</p><p id="r-952127" data-claire-element-id="952127">Le projet Objectify est hébergé sur Google Code à l'adresse suivante : <a href="https://code.google.com/p/objectify-appengine/"><strong>https://code.google.com/p/objectify-appengine/</strong></a></p><aside id="r-952129" data-claire-element-id="952129" data-claire-semantic="information"><p id="r-952128" data-claire-element-id="952128">Le site d'Objectify possède un <a href="https://code.google.com/p/objectify-appengine/wiki/Concepts?tm=6">excellent wiki</a> qui documente le projet, que je vous recommanderai de lire en complément de ce tutoriel. Le wiki décrit par ailleurs très bien le fonctionnement du Datastore lui-même.</p></aside><p id="r-952130" data-claire-element-id="952130">Pour utiliser Objectify, il faut télécharger 2 bibliothèques sous la forme de fichiers .jar :</p><ul id="r-952135" data-claire-element-id="952135"><li id="r-952132" data-claire-element-id="952132"><p id="r-952131" data-claire-element-id="952131"><strong>Objectify</strong> : on peut télécharger Objectify sur Maven Central. Si vous voulez le télécharger manuellement, vous le trouverez <a href="http://repo1.maven.org/maven2/com/googlecode/objectify/objectify/">dans ce répertoire</a>. Prenez le fichier .jar correspondant à la dernière version (par exemple 4.0b3/objectify-4.0b3.jar)</p></li><li id="r-952134" data-claire-element-id="952134"><p id="r-952133" data-claire-element-id="952133"><strong>Guava </strong>: c'est une bibliothèque offrant des fonctionnalités de base de Java, créée par Google et utilisée notamment par Objectify. Vous en aurez besoin pour faire fonctionner Objectify. Vous pouvez télécharger le .jar sur le <a href="https://code.google.com/p/guava-libraries/">site de Guava</a>.</p></li></ul><p id="r-952136" data-claire-element-id="952136">Placez ces fichiers dans le dossier WEB-INF/lib de votre projet.</p><figure id="r-objectify-et-guava-sont-installes-dans-le-dossier-web-inf-lib" data-claire-element-id="952139"><img id="r-952137" data-claire-element-id="952137" src="medias/uploads.siteduzero.com_files_421001_422000_421454.png" alt="Objectify et Guava sont installés dans le dossier WEB-INF/lib"/><figcaption>Objectify et Guava sont installés dans le dossier WEB-INF/lib</figcaption></figure><p id="r-952140" data-claire-element-id="952140">Ajoutez-les ensuite au <em>build path</em> : clic droit sur le projet / Properties / Java Build Path / Onglet &quot;Libraries&quot; puis cliquez sur &quot;Add JARs&quot; et sélectionnez les .jar que vous venez d'ajouter à votre projet.</p><p id="r-952141" data-claire-element-id="952141">Ensuite, vous devez modifier le fichier web.xml et y ajouter les lignes suivantes qui permettront à Objectify de fonctionner correctement :</p><pre id="r-952142" data-claire-element-id="952142"><code data-claire-semantic="xml">&lt;filter&gt;
        &lt;filter-name&gt;ObjectifyFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;com.googlecode.objectify.ObjectifyFilter&lt;/filter-class&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
        &lt;filter-name&gt;ObjectifyFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</code></pre><p id="r-952143" data-claire-element-id="952143">Objectify est maintenant prêt à être utilisé dans votre projet !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">
<span class="arrow"></span>
<span class="next">Manipuler le DataStore avec Objectify</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
<span class="next">Créer des objets persistables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Crerdesobjetspersistables"></a><h2>Créer des objets persistables</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
<span class="arrow"></span>
<span class="next">Configurer Objectify</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
<span class="next">Opérations sur les clés</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952145" data-claire-element-id="952145">Objectify se charge de stocker vos objets Java dans le Datastore et, inversement, d'extraire du Datastore des données pour reformer des objets Java. On dit qu'Objectify travaille sur des POJO (<em>Plain Old Java Object</em>, ou &quot;<em>Bons vieux objets Java</em>&quot;), ce qui signifie qu'on travaille sur des objets Java de base (par opposition à des objets plus complexes comme les Enterprise Java Beans).</p><p id="r-952146" data-claire-element-id="952146">Pour travailler avec Objectify, il va falloir créer des objets et leur ajouter des annotations spécifiques. Je vous propose encore une fois de reprendre mon super exemple du Personnage et de son Arme (décidément je l'aime bien ce Groknan le Barbare) :</p><figure id="r-les-entites-que-nous-allons-creer-1" data-claire-element-id="952149"><img id="r-952147" data-claire-element-id="952147" src="medias/uploads.siteduzero.com_files_421001_422000_421424.png" alt="Les entités que nous allons créer"/><figcaption>Les entités que nous allons créer</figcaption></figure><p id="r-952150" data-claire-element-id="952150">Allez, on se motive et on crée notre objet Personnage pour commencer !</p><pre id="r-952151" data-claire-element-id="952151"><code data-claire-semantic="java">public class Personnage {
    String nom;
    int niveau;
    int vie;

    public Personnage (String nom, int niveau) {
        this.nom = nom;
        this.niveau = niveau;
        this.vie = 100;
    }
}</code></pre><p id="r-952152" data-claire-element-id="952152">Ahhh, créer à nouveau des bons vieux objets Java à la main, y'a pas à dire ça dérouille. :D</p><p id="r-952153" data-claire-element-id="952153">Bon pour le moment notre objet est tout ce qu'il y a de plus classique. Des attributs, un constructeur... On pourrait y ajouter des getters et setters aussi mais je ne le fais pas là pour garder un code court et lisible.</p><p id="r-952154" data-claire-element-id="952154">Alors, comment faire pour expliquer à Objectify comment cet objet fonctionne ? On va lui ajouter des annotations ! Pour commencer on doit importer les annotations d'Objectify :</p><pre id="r-952155" data-claire-element-id="952155"><code data-claire-semantic="java">import com.googlecode.objectify.annotation.*;</code></pre><h2 id="r-les-principales-annotations" data-claire-element-id="952189">Les principales annotations</h2><h3 id="r-entity-l-entite" data-claire-element-id="952159">@Entity : l'entité</h3><p id="r-952156" data-claire-element-id="952156">On va rajouter une annotation @Entity devant la définition de la classe pour qu'Objectify sache qu'il s'agit d'une classe qu'il peut persister.</p><pre id="r-952157" data-claire-element-id="952157"><code data-claire-semantic="java">@Entity
public class Personnage {
    // ...
}</code></pre><p id="r-952158" data-claire-element-id="952158">Ensuite, nous devons annoter les attributs de la classe (Objectify ne s'intéresse pas aux méthodes). Il faut dire à Objectify quel est l'attribut qui tient lieu d'ID, quels attributs doivent être ignorés pour ne pas être persistés, quels attributs doivent être indexés, quelles sont les relations avec d'autres classes...</p><h3 id="r-id-l-id" data-claire-element-id="952166">@Id : l'ID</h3><p id="r-952160" data-claire-element-id="952160">Si on crée un attribut ID annoté @Id de type Long, Google génèrera un numéro automatiquement :</p><pre id="r-952161" data-claire-element-id="952161"><code data-claire-semantic="java">@Id Long id; // Google génèrera un ID automatiquement (car type Long)</code></pre><p id="r-952162" data-claire-element-id="952162">Si on crée un attribut ID annoté @Id de type String, ce sera à nous de définir une chaîne de caractères unique :</p><pre id="r-952163" data-claire-element-id="952163"><code data-claire-semantic="java">@Id String id; // Ce sera à nous de générer des ID uniques (car type String)</code></pre><aside id="r-952165" data-claire-element-id="952165" data-claire-semantic="information"><p id="r-952164" data-claire-element-id="952164">Toute classe-entité doit avoir un attribut annoté @Id. C'est la seule annotation réellement obligatoire.</p></aside><h3 id="r-ignore-les-attributs-ignores" data-claire-element-id="952169">@Ignore : les attributs ignorés</h3><p id="r-952167" data-claire-element-id="952167">Par défaut, Objectify va persister tous les attributs dans le Datastore. Si certains n'ont pas besoin d'être enregistrés (parce qu'ils ne servent que temporairement par exemple), on peut leur rajouter l'annotation @Ignore : Objectify ne les enregistrera pas.</p><pre id="r-952168" data-claire-element-id="952168"><code data-claire-semantic="java">@Ignore boolean tempInfo; // Ne sera pas stocké dans le Datastore</code></pre><h3 id="r-index-les-index" data-claire-element-id="952175">@Index : les index</h3><p id="r-952170" data-claire-element-id="952170">Par défaut, les attributs ne seront pas indexés dans le Datastore. Objectify préfère ne pas les indexer à moins que vous ne le demandiez car ils consomment des ressources et &quot;coûtent&quot; dans votre quota d'usage du Datastore.<br/> Pourtant, les index sont obligatoires si vous voulez faire des requêtes sur ces attributs par la suite. Si vous savez que vous ferez une recherche sur un champ, ajoutez-lui l'annotation @Index :</p><pre id="r-952171" data-claire-element-id="952171"><code data-claire-semantic="java">@Index int niveau; // Cet attribut sera indexé</code></pre><p id="r-952172" data-claire-element-id="952172">A l'inverse, si vous voulez indexer tous les attributs par défaut sur une classe, vous pouvez ajouter l'annotation @Index <em>avant</em> la définition de la classe et utiliser @Unindex si vous ne voulez pas indexer certains attributs :</p><pre id="r-952173" data-claire-element-id="952173"><code data-claire-semantic="java">@Entity
@Index // Active l'indexation par défaut
public class Personnage {
    @Id String id; // Sera indexé (les ID sont toujours indexés)
    @Unindex String nom; // Ne sera pas indexé
    int niveau; // Sera indexé
    int vie; // Sera indexé
}</code></pre><p id="r-952174" data-claire-element-id="952174">Nous reviendrons plus en détail sur les index car c'est un concept très important du Datastore.</p><h3 id="r-parent-l-entite-parente" data-claire-element-id="952181">@parent : l'entité parente</h3><p id="r-952176" data-claire-element-id="952176">Vous pouvez définir l'entité parente avec l'annotation @Parent. Pour faire référence à l'entité parente, Objectify nous fournit la classe <code data-claire-semantic="java">Key&lt;?&gt;</code> (mais vous pouvez aussi utiliser la simple classe <code data-claire-semantic="java">Key</code> fournie par l'API bas niveau). Exemple :</p><pre id="r-952177" data-claire-element-id="952177"><code data-claire-semantic="java">@Parent Key&lt;AutreClasse&gt; parent;</code></pre><p id="r-952178" data-claire-element-id="952178">L'entité fera alors partie du même groupe d'entités que le parent. Cela nous serait utile par exemple pour définir qui est le parent de l'Arme dans nos exemples.</p><aside id="r-952180" data-claire-element-id="952180" data-claire-semantic="warning"><p id="r-952179" data-claire-element-id="952179">Le parent fait partie de l'identifiant (souvenez-vous : identifiant = type + ID + parent). Or, vous ne pouvez pas changer l'identifiant d'une entité dans le Datastore.<br/> Par conséquent, si vous modifiez l'attribut parent, le Datastore considèrera qu'il s'agit d'une nouvelle entité et la stockera en plus de l'ancienne.</p></aside><h3 id="r-d-autres-annotations" data-claire-element-id="952188">D'autres annotations</h3><p id="r-952182" data-claire-element-id="952182">Objectify fournit plusieurs autres annotations qui peuvent vous êtres utiles dans des cas plus précis. Je ne vous les présente pas toutes ici mais je vous invite :</p><ul id="r-952187" data-claire-element-id="952187"><li id="r-952184" data-claire-element-id="952184"><p id="r-952183" data-claire-element-id="952183">A lire la <a href="https://code.google.com/p/objectify-appengine/wiki/Entities">doc sur les entités</a>, très complète (heureusement, car c'est la doc officielle :D )</p></li><li id="r-952186" data-claire-element-id="952186"><p id="r-952185" data-claire-element-id="952185">A lire la <a href="https://code.google.com/p/objectify-appengine/wiki/AnnotationReference">référence sur les annotations</a> qui résume toutes les annotations disponibles</p></li></ul><h2 id="r-definition-d-un-constructeur-sans-parametres" data-claire-element-id="952192">Définition d'un constructeur sans paramètres</h2><p id="r-952190" data-claire-element-id="952190">Pour qu'Objectify puisse fonctionner, vous devez obligatoirement définir un constructeur sans paramètres (même s'il ne fait rien) dans une classe-entité :</p><pre id="r-952191" data-claire-element-id="952191"><code data-claire-semantic="java">@Entity
public class Personnage {
    // Attributs

    private Personnage() {} // Obligatoire pour Objectify

    public Personnage (String nom, int niveau) {
        // ...
    }
}</code></pre><h2 id="r-enregistrement-des-entites-aupres-d-objectify" data-claire-element-id="952195">Enregistrement des entités auprès d'Objectify</h2><p id="r-952193" data-claire-element-id="952193">En plus des annotations, vous devez indiquer à Objectify quelles sont vos classes-entités au chargement de l'application. Pour cela, le mieux est d'effectuer une définition <em>static</em> dans votre servlet comme ceci :</p><pre id="r-952194" data-claire-element-id="952194"><code data-claire-semantic="java">import com.googlecode.objectify.ObjectifyService;

@SuppressWarnings(&quot;serial&quot;)
public class ObjectifyTestsServlet extends HttpServlet {
    static {
        ObjectifyService.register(Personnage.class); // Fait connaître votre classe-entité à Objectify
    }
    
    public void doGet(HttpServletRequest req, HttpServletResponse resp) {
        // ...
    }
}</code></pre><h2 id="r-exemple-complet-avec-le-personnage-et-l-arme" data-claire-element-id="952202">Exemple complet avec le Personnage et l'Arme</h2><p id="r-952196" data-claire-element-id="952196">Pour résumer, voici le code que je vous propose d'utiliser pour nos classes Personnage et Arme :</p><pre id="r-952197" data-claire-element-id="952197"><code data-claire-semantic="java">import com.googlecode.objectify.annotation.*;

@Entity
@Index
public class Personnage {
    @Id String id;
    @Unindex String nom;
    int niveau;
    int vie;

    private Personnage() {}
    
    public Personnage (String nom, int niveau) {
        this.id = nom;
        this.nom = nom;
        this.niveau = niveau;
        this.vie = 100;
    }
}</code></pre><pre id="r-952198" data-claire-element-id="952198"><code data-claire-semantic="java">import com.googlecode.objectify.Key;
import com.googlecode.objectify.annotation.*;

@Entity
public class Arme {
    @Id Long id;
    @Parent Key&lt;Personnage&gt; parent;
    String nom;
    int degats;
    
    private Arme() {}
    public Arme(String nom, int degats, Key&lt;Personnage&gt; parent) {
        this.nom = nom;
        this.degats = degats;
        this.parent = parent;
    }
}</code></pre><p id="r-952199" data-claire-element-id="952199">Dans notre servlet, il ne faut pas oublier d'enregistrer les classes auprès d'Objectify au chargement de l'application via une définition <em>static</em> :</p><pre id="r-952200" data-claire-element-id="952200"><code data-claire-semantic="java">import com.googlecode.objectify.ObjectifyService;

@SuppressWarnings(&quot;serial&quot;)
public class ObjectifyTestsServlet extends HttpServlet {
    static {
        ObjectifyService.register(Personnage.class);
        ObjectifyService.register(Arme.class);
    }
    
    public void doGet(HttpServletRequest req, HttpServletResponse resp) {
        // ...
    }
}</code></pre><p id="r-952201" data-claire-element-id="952201">Voilà à quoi pourrait ressembler la définition de nos objets POJO pour Objectify. Voyons voir maintenant combien il est simple de les manipuler. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
<span class="arrow"></span>
<span class="next">Configurer Objectify</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
<span class="next">Opérations sur les clés</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Oprationssurlescls"></a><h2>Opérations sur les clés</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
<span class="arrow"></span>
<span class="next">Créer des objets persistables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
<span class="next">Les requêtes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952204" data-claire-element-id="952204">Comme l'API bas niveau du Datastore, Objectify nous permet d'effectuer des opérations basiques sur les entités via leurs clés :</p><ul id="r-952211" data-claire-element-id="952211"><li id="r-952206" data-claire-element-id="952206"><p id="r-952205" data-claire-element-id="952205">Ecrire une entité</p></li><li id="r-952208" data-claire-element-id="952208"><p id="r-952207" data-claire-element-id="952207">Récupérer une entité grâce à sa clé</p></li><li id="r-952210" data-claire-element-id="952210"><p id="r-952209" data-claire-element-id="952209">Supprimer une entité grâce à sa clé</p></li></ul><p id="r-952212" data-claire-element-id="952212">Nous nous intéressons ici à ces opérations simples. Nous verrons juste après comment effectuer des requêtes, ce qui est un poil plus complexe mais quand même bien plus lisible que l'API bas niveau. ;)</p><h2 id="r-charger-l-instance-objectify" data-claire-element-id="952221">Charger l'instance Objectify</h2><p id="r-952213" data-claire-element-id="952213">Pour travailler avec Objectify, on doit d'abord récupérer son instance. Cela se fait comme ceci :</p><pre id="r-952214" data-claire-element-id="952214"><code data-claire-semantic="java">ObjectifyService.ofy()</code></pre><p id="r-952215" data-claire-element-id="952215">Le principe d'Objectify est que vous pouvez enchaîner plusieurs appels sur cette instance. Par exemple, pour charger un objet en fonction de sa clé on ferait :</p><pre id="r-952216" data-claire-element-id="952216"><code data-claire-semantic="java">Objet monObjet = ObjectifyService.ofy().load().key(cle).now();</code></pre><p id="r-952217" data-claire-element-id="952217">Comme vous allez devoir écrire <code data-claire-semantic="java">ObjectifyService.ofy()</code> de nombreuses fois, il est recommandé d'effectuer une définition statique au début du fichier :</p><pre id="r-952218" data-claire-element-id="952218"><code data-claire-semantic="java">import static com.googlecode.objectify.ObjectifyService.ofy;</code></pre><p id="r-952219" data-claire-element-id="952219">Vous pouvez alors écrire simplement <code data-claire-semantic="java">ofy()</code> au lieu de <code data-claire-semantic="java">ObjectifyService.ofy()</code> :</p><pre id="r-952220" data-claire-element-id="952220"><code data-claire-semantic="java">Objet monObjet = ofy().load().key(cle).now();</code></pre><h2 id="r-ecrire-une-entite" data-claire-element-id="952229">Ecrire une entité</h2><p id="r-952222" data-claire-element-id="952222">Objectify travaille sur des objets. La première chose à faire est donc, dans votre servlet, de créer des objets comme vous avez l'habitude de le faire en Java :</p><pre id="r-952223" data-claire-element-id="952223"><code data-claire-semantic="java">Personnage p = new Personnage(&quot;groknan&quot;, 25);</code></pre><p id="r-952224" data-claire-element-id="952224">Notre Personnage p peut ensuite être persisté dans le Datastore avec cette simple commande :</p><pre id="r-952225" data-claire-element-id="952225"><code data-claire-semantic="java">ofy().save().entity(p); // Asynchrone (pas enregistré immédiatement)</code></pre><p id="r-952226" data-claire-element-id="952226">Par défaut, les sauvegardes sont asynchrones. Cela signifie que le Datastore rend la main à votre programme avant d'avoir enregistré les données. C'est la méthode la plus rapide mais, si vous avez besoin des données que vous venez d'enregistrer immédiatement après, vous voudrez peut-être forcer l'enregistrement de façon synchrone comme c'est le cas en SQL. Pour ça, rajoutez juste un appel à <code data-claire-semantic="java">now()</code> à la chaîne :</p><pre id="r-952227" data-claire-element-id="952227"><code data-claire-semantic="java">ofy().save().entity(p).now(); // Synchrone (enregistré immédiatement)</code></pre><p id="r-952228" data-claire-element-id="952228">Il n'y a rien de plus compliqué que ça : vous savez sauvegarder des objets dans le Datastore avec Objectify ! Magique non ? :D</p><h2 id="r-recuperer-une-entite" data-claire-element-id="952246">Récupérer une entité</h2><p id="r-952230" data-claire-element-id="952230">Pour récupérer une entité, vous devez connaître sa clé. Je vous rappelle qu'une clé est simplement un identifiant constitué du type + de l'ID + du parent.</p><h3 id="r-les-cles-avec-objectify" data-claire-element-id="952236">Les clés avec Objectify</h3><p id="r-952231" data-claire-element-id="952231">Le Datastore nous fournissait déjà la classe <code data-claire-semantic="java">Key</code> qui représente une clé. Cette classe s'utilise comme ceci pour rappel :</p><pre id="r-952232" data-claire-element-id="952232"><code data-claire-semantic="java">Key clePersonnage = KeyFactory.createKey(&quot;Personnage&quot;, &quot;groknan&quot;); // API bas niveau</code></pre><p id="r-952233" data-claire-element-id="952233">Mais Objectify fournit une légère variante : la classe <code data-claire-semantic="java">Key&lt;?&gt;</code> (qui indique en plus le type d'objet stocké). On peut l'utiliser comme ceci :</p><pre id="r-952234" data-claire-element-id="952234"><code data-claire-semantic="java">Key&lt;Personnage&gt; clePersonnage = Key.create(Personnage.class, &quot;groknan&quot;);</code></pre><p id="r-952235" data-claire-element-id="952235">Les deux types de clés sont utilisables dans Objectify. A noter qu'il existe aussi le type <code data-claire-semantic="java"><a href="https://code.google.com/p/objectify-appengine/wiki/Entities#Ref%3C?%3E_s">Ref&lt;?&gt;</a></code> qui fonctionne comme <code data-claire-semantic="java">Key&lt;?&gt;</code> mais qui permet de manipuler les sous-objets plus facilement.</p><h3 id="r-charger-un-objet-grace-a-sa-cle" data-claire-element-id="952239">Charger un objet grâce à sa clé</h3><p id="r-952237" data-claire-element-id="952237">Pour charger un objet, je crée d'abord sa clé (soit avec la classe <code data-claire-semantic="java">Key</code> bas niveau du Datastore, soit avec la classe <code data-claire-semantic="java">Key&lt;?&gt;</code> d'Objectify) puis je demande son chargement :</p><pre id="r-952238" data-claire-element-id="952238"><code data-claire-semantic="java">Key&lt;Personnage&gt; cleGroknan = Key.create(Personnage.class, &quot;groknan&quot;); 
Personnage r = ofy().load().key(cleGroknan).now();</code></pre><h3 id="r-charger-un-objet-sans-creer-de-cle" data-claire-element-id="952245">Charger un objet sans créer de clé</h3><p id="r-952240" data-claire-element-id="952240">Plus fort que le Roquefort, Objectify nous permet de charger un objet sans passer par l'étape préalable de création d'une clé :</p><pre id="r-952241" data-claire-element-id="952241"><code data-claire-semantic="java">Personnage r = ofy().load().type(Personnage.class).id(&quot;groknan&quot;).now();</code></pre><p id="r-952242" data-claire-element-id="952242">Il s'agit juste d'une syntaxe plus pratique créée par Objectify, elle a le même effet que si vous étiez passés par la création d'une clé.</p><p id="r-952243" data-claire-element-id="952243">Si on veut récupérer une entité qui a un parent, il faudra ajouter un appel à <code data-claire-semantic="java">parent()</code> dans la chaîne comme ceci :</p><pre id="r-952244" data-claire-element-id="952244"><code data-claire-semantic="java">Arme a = ofy().load().type(Arme.class).parent(personnage).id(&quot;pourfendeur&quot;).now();</code></pre><h2 id="r-supprimer-une-entite-1" data-claire-element-id="952253">Supprimer une entité</h2><p id="r-952247" data-claire-element-id="952247">En tant que roi du Datastore, vous avez droit de vie et de mort sur vos entités. Il n'y a rien de plus simple : indiquez en paramètre l'objet que vous voulez supprimer du Datastore.</p><pre id="r-952248" data-claire-element-id="952248"><code data-claire-semantic="java">ofy().delete().entity(objetASupprimer).now();</code></pre><p id="r-952249" data-claire-element-id="952249">Si vous voulez varier les plaisirs, vous pouvez aussi supprimer l'entité via sa clé :</p><pre id="r-952250" data-claire-element-id="952250"><code data-claire-semantic="java">ofy().delete().key(cleObjetASupprimer).now();</code></pre><p id="r-952251" data-claire-element-id="952251">Ou utiliser la syntaxe offerte par Objectify qui vous évite d'avoir à créer une clé :</p><pre id="r-952252" data-claire-element-id="952252"><code data-claire-semantic="java">ofy().delete().type(Personnage.class).id(&quot;groknan&quot;).now();</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
<span class="arrow"></span>
<span class="next">Créer des objets persistables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
<span class="next">Les requêtes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesrequtes"></a><h2>Les requêtes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
<span class="arrow"></span>
<span class="next">Opérations sur les clés</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
<span class="next">Mise en cache avec Memcache</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-filtrer-et-recuperer-une-liste-d-entites" data-claire-element-id="952262">Filtrer et récupérer une liste d'entités</h2><p id="r-952255" data-claire-element-id="952255">Exécuter des requêtes avec Objectify est beaucoup beaucoup beaucoup (beaucoup) plus pratique que l'API bas niveau du Datastore. En fait, la syntaxe de base est la même que le chargement via une clé. Il vous suffit de rajouter des filtres via <code data-claire-semantic="java">filter()</code> et d'indiquer que vous voulez qu'on vous retourne une liste avec <code data-claire-semantic="java">list()</code> :</p><pre id="r-952256" data-claire-element-id="952256"><code data-claire-semantic="java">// Retourne tous les personnages dont la vie est supérieure à 50
List&lt;Personnage&gt; personnages = ofy().load().type(Personnage.class).filter(&quot;vie &gt;&quot;, 50).list();</code></pre><p id="r-952257" data-claire-element-id="952257">Comme vous le voyez, l'opérateur est indiqué dans le filtre avec un symbole. Les opérateurs supportés sont : <code data-claire-semantic="java">&gt;, &gt;=, &lt;, &lt;=, in, !=, &lt;&gt;, =, ==</code>. Il y a de quoi faire. :)</p><p id="r-952258" data-claire-element-id="952258">Notez que si vous ne mettez pas d'opérateur, cela correspond à une égalité :</p><pre id="r-952259" data-claire-element-id="952259"><code data-claire-semantic="java">// Pas d'opérateur : retourne tous les personnages dont la vie est égale à 50
List&lt;Personnage&gt; personnages = ofy().load().type(Personnage.class).filter(&quot;vie&quot;, 50).list();</code></pre><aside id="r-952261" data-claire-element-id="952261" data-claire-semantic="error"><p id="r-952260" data-claire-element-id="952260">Vous ne pouvez effectuer des requêtes que sur des propriétés indexées par le Datastore. Je vous rappelle que par défaut Objectify n'indexe pas les attributs des classes, sauf si vous utilisez l'annotation <code data-claire-semantic="java">@Index</code>. Vérifiez donc que vous avez correctement défini vos index avant d'effectuer des requêtes !</p></aside><h2 id="r-filtrer-par-ancetre" data-claire-element-id="952267">Filtrer par ancêtre</h2><p id="r-952263" data-claire-element-id="952263">Si les entités sur lesquelles vous effectuez une requête ont un parent (aussi appelé &quot;ancêtre&quot;), vous devez rajouter <code data-claire-semantic="java">.ancestor()</code> à votre requête :</p><pre id="r-952264" data-claire-element-id="952264"><code data-claire-semantic="java">// Récupère toutes les armes qui ont pour ancêtre mon objet personnage
List&lt;Arme&gt; armes = ofy().load().type(Arme.class).ancestor(personnage).list();</code></pre><p id="r-952265" data-claire-element-id="952265">Vous pouvez aussi rechercher parmi les ancêtres via leur clé avec la même méthode :</p><pre id="r-952266" data-claire-element-id="952266"><code data-claire-semantic="java">List&lt;Arme&gt; armes = ofy().load().type(Arme.class).ancestor(KeyFactory.createKey(&quot;Personnage&quot;, &quot;groknan&quot;)).list();</code></pre><h2 id="r-ordonner-les-resultats" data-claire-element-id="952271">Ordonner les résultats</h2><p id="r-952268" data-claire-element-id="952268">Pour ordonner les résultats, rajoutez des appels à <code data-claire-semantic="java">order()</code> dans votre chaîne d'appels :</p><pre id="r-952269" data-claire-element-id="952269"><code data-claire-semantic="java">// Triera les personnages par niveau de vie croissant
List&lt;Personnage&gt; personnages = ofy().load().type(Personnage.class).filter(&quot;niveau &gt;&quot;, 30).order(&quot;vie&quot;).list();</code></pre><p id="r-952270" data-claire-element-id="952270">Vous pouvez aussi trier par niveau de vie décroissant avec un symbole moins : <code data-claire-semantic="java">.order(&quot;-vie&quot;) // Décroissant</code><br/> Et bien entendu vous pouvez effectuer plusieurs tris d'affilée si nécessaire !</p><h2 id="r-limiter-le-nombre-de-resultats-1" data-claire-element-id="952274">Limiter le nombre de résultats</h2><p id="r-952272" data-claire-element-id="952272">Il est toujours conseillé de limiter le nombre de résultats, surtout quand vous risquez d'en récupérer un très grand nombre. Pour cela, faites un appel à <code data-claire-semantic="java">limit()</code> à la fin de votre chaîne, juste avant de demander la <code data-claire-semantic="java">list()</code> :</p><pre id="r-952273" data-claire-element-id="952273"><code data-claire-semantic="java">// Récupère maximum 10 personnages
List&lt;Personnage&gt; personnages = ofy().load().type(Personnage.class).filter(&quot;niveau &gt;&quot;, 30).limit(10).list();</code></pre><h2 id="r-recuperer-le-premier-resultat" data-claire-element-id="952277">Récupérer le premier résultat</h2><p id="r-952275" data-claire-element-id="952275">Si vous savez que la requête ne va vous retourner qu'un seul résultat, vous pouvez demander le premier résultat de la liste avec <code data-claire-semantic="java">first()</code> à la place de <code data-claire-semantic="java">list()</code> :</p><pre id="r-952276" data-claire-element-id="952276"><code data-claire-semantic="java">// Retourne le premier personnage dont la vie est supérieure à 50
Personnage personnages = ofy().load().type(Personnage.class).filter(&quot;vie &gt;&quot;, 50).first().now();</code></pre><h2 id="r-recuperer-les-cles" data-claire-element-id="952281">Récupérer les clés</h2><p id="r-952278" data-claire-element-id="952278">Objectify peut aussi vous retourner uniquement les clés des entités plutôt que les entités elles-mêmes. C'est plus rapide à charger et cela vous permet d'effectuer une suppression de masse. Que diriez-vous de supprimer tous les personnages trop faibles de la surface de votre application ? :D</p><pre id="r-952279" data-claire-element-id="952279"><code data-claire-semantic="java">Iterable&lt;Key&lt;Personnage&gt;&gt; clesPersonnagesFaibles = ofy().load().type(Personnage.class).filter(&quot;vie &lt;&quot;, 30).keys();

// Supprime tous les personnages faibles
ofy().delete().keys(clesPersonnagesFaibles);</code></pre><p id="r-952280" data-claire-element-id="952280">Bref, l'exécution de requêtes dans le Datastore avec Objectify est un vrai plaisir. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
<span class="arrow"></span>
<span class="next">Opérations sur les clés</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
<span class="next">Mise en cache avec Memcache</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="MiseencacheavecMemcache"></a><h2>Mise en cache avec Memcache</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
<span class="arrow"></span>
<span class="next">Les requêtes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
<span class="next">Les transactions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952283" data-claire-element-id="952283">App Engine offre un service de Memcache. Pour ceux qui ne connaissent pas Memcache, il s'agit d'un logiciel qui tourne uniquement en mémoire vive (RAM) sur des serveurs et qui stocke des paires clé-valeur.</p><div id="r-952285" data-claire-element-id="952285" data-claire-semantic="question"><p id="r-952284" data-claire-element-id="952284">Euh... c'est ce que fait le Datastore ça non ?</p></div><p id="r-952286" data-claire-element-id="952286">Non, pour le coup ça c'est vraiment très basique. Il n'y a pas de notion d'entités : juste des clés et des valeurs. Par ailleurs, les données sont stockées en RAM et peuvent disparaître à tout moment. Il n'y a pas de garantie que les données seront toujours disponibles.</p><p id="r-952287" data-claire-element-id="952287">Memcache se révèle en fait un excellent complément au Datastore. Puisqu'il ne nécessite pas d'accéder à des disques, il est <em>beaucoup</em> plus performant que le Datastore (en gros, une requête Memcache va 10 fois plus vite qu'une requête dans le Datastore). On serait tenté de tout mettre dans Memcache mais il ne faut pas oublier que les données peuvent vraiment être perdues à tout moment : si le serveur redémarre tout est perdu et s'il n'y a plus de place en mémoire Memcache supprime arbitrairement de vieilles données en cache.</p><p id="r-952288" data-claire-element-id="952288">Il faut savoir que le service Memcache chez Google est <strong>gratuit</strong>. Google veut nous encourager à utiliser intensivement Memcache pour alléger la charge des serveurs du Datastore. Nous n'allons donc pas nous en priver. :D</p><p id="r-952289" data-claire-element-id="952289">En pratique, l'utilisation combinée de Memcache et du Datastore se fait comme ceci :</p><ol id="r-952298" data-claire-element-id="952298"><li id="r-952291" data-claire-element-id="952291"><p id="r-952290" data-claire-element-id="952290">On s'apprête à faire une requête dans le Datastore pour récupérer des données</p></li><li id="r-952293" data-claire-element-id="952293"><p id="r-952292" data-claire-element-id="952292">On demande d'abord à Memcache s'il possède déjà ces données</p></li><li id="r-952295" data-claire-element-id="952295"><p id="r-952294" data-claire-element-id="952294">Si Memcache les possède, on aura récupéré les données 10x plus rapidement et sans passer par le Datastore</p></li><li id="r-952297" data-claire-element-id="952297"><p id="r-952296" data-claire-element-id="952296">Si Memcache ne les possède pas, on fait une requête classique au Datastore et on stocke le résultat dans Memcache pour que la prochaine requête aille plus vite.</p></li></ol><figure id="r-la-mise-en-cache-avec-memcache" data-claire-element-id="952301"><img id="r-952299" data-claire-element-id="952299" src="medias/uploads.siteduzero.com_files_421001_422000_421464.png" alt="La mise en cache avec Memcache"/><figcaption>La mise en cache avec Memcache</figcaption></figure><p id="r-952302" data-claire-element-id="952302">Google propose des <a href="https://developers.google.com/appengine/docs/java/memcache/overview">APIs bas niveau</a> pour accéder à Memcache. Vous pouvez vraiment y stocker tout ce que vous voulez (vous n'êtes pas obligés de l'utiliser en conjonction avec le Datastore), le tout est de retenir que la donnée peut disparaître à tout moment et qu'il faut que vous soyez capables de la récupérer ailleurs pour la remettre dans Memcache si nécessaire.</p><p id="r-952303" data-claire-element-id="952303">Objectify est capable de faire une utilisation intelligente de Memcache. Pour activer le système de cache, il suffit de rajouter l'annotation @Cache devant vos classes persistables :</p><pre id="r-952304" data-claire-element-id="952304"><code data-claire-semantic="java">@Entity
@Cache
public class Message {

}</code></pre><p id="r-952305" data-claire-element-id="952305">Et... c'est tout ! :D <br/> Objectify se charge de tout le travail : lorsque vous faites une requête, il ira vérifier si la donnée est déjà en cache. Il ira la mettre en cache si elle ne l'est pas pour être capable de récupérer les données beaucoup plus rapidement la seconde fois.</p><p id="r-952306" data-claire-element-id="952306">Il n'y a que des avantages à cette méthode :</p><ul id="r-952313" data-claire-element-id="952313"><li id="r-952308" data-claire-element-id="952308"><p id="r-952307" data-claire-element-id="952307">Les appels au Datastore pour la même requête sont de l'ordre de 10x plus rapides à partir de la seconde requête</p></li><li id="r-952310" data-claire-element-id="952310"><p id="r-952309" data-claire-element-id="952309">Vous n'appelez plus le Datastore et donc vous utilisez moins de quota de lecture/écriture (donc vous payez moins au final)</p></li><li id="r-952312" data-claire-element-id="952312"><p id="r-952311" data-claire-element-id="952311">Tout l'usage de Memcache étant gratuit, vous ne payez rien de plus !</p></li></ul><p id="r-952314" data-claire-element-id="952314">Dans de rares cas néanmoins, vous ne voudrez probablement pas mettre les données en cache. Mais à mon sens cela concerne vraiment une minorité de cas. Je vous recommande vivement d'activer le cache autant que possible.</p><p id="r-952315" data-claire-element-id="952315">Par défaut, il faut savoir que les données restent en cache aussi longtemps que possible (jusqu'à ce que Memcache décide qu'il veut supprimer vos données). Vous pouvez demander à ce que les données soient supprimées au bout d'un certain temps pour forcer le rafraîchissement du cache :</p><pre id="r-952316" data-claire-element-id="952316"><code data-claire-semantic="java">@Entity
@Cache(expirationSeconds=600) // Le cache expirera au bout de 10 minutes
public class Message {

}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
<span class="arrow"></span>
<span class="next">Les requêtes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
<span class="next">Les transactions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lestransactions"></a><h2>Les transactions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
<span class="arrow"></span>
<span class="next">Mise en cache avec Memcache</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
<span class="next">Exemple : Objectify dans une application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952318" data-claire-element-id="952318">Les transactions sont indispensables dans un grand nombre d'applications. Elles vous permettent d'exécuter plusieurs requêtes d'affilée et de vous assurer qu'elles ont bien fonctionné avant de réellement enregistrer les données.</p><h2 id="r-pourquoi-des-transactions" data-claire-element-id="952341">Pourquoi des transactions ?</h2><p id="r-952319" data-claire-element-id="952319">Imaginez une application qui effectuerait les opérations suivantes :</p><ol id="r-952332" data-claire-element-id="952332"><li id="r-952321" data-claire-element-id="952321"><p id="r-952320" data-claire-element-id="952320">Lecture de données depuis le Datastore</p></li><li id="r-952323" data-claire-element-id="952323"><p id="r-952322" data-claire-element-id="952322">Calculs</p></li><li id="r-952325" data-claire-element-id="952325"><p id="r-952324" data-claire-element-id="952324">Ecriture de données</p></li><li id="r-952327" data-claire-element-id="952327"><p id="r-952326" data-claire-element-id="952326">Ecriture d'autres données</p></li><li id="r-952329" data-claire-element-id="952329"><p id="r-952328" data-claire-element-id="952328">Lecture d'autres données</p></li><li id="r-952331" data-claire-element-id="952331"><p id="r-952330" data-claire-element-id="952330">Ecriture d'autres données</p></li></ol><p id="r-952333" data-claire-element-id="952333">Si une écriture échoue au milieu et que vous voudriez tout annuler (pour faire &quot;comme si rien ne s'était passé&quot;), il faut placer l'ensemble de ces instructions au sein d'une même transaction.<br/> Si toutes les requêtes de la transaction réussissent, on dit qu'on <em>commit</em> la transaction. S'il y a un échec, on dit qu'on <em>rollback</em> (annule) la transaction.</p><p id="r-952334" data-claire-element-id="952334">J'aime bien illustrer les transactions avec le bon vieil exemple de la banque. Imaginez : vous êtes une banque. Vous gérez beaucoup de sous, d'accord, mais vous avez aussi la responsabilité de la gestion de cet argent. Si un client A fait un virement de 100€ vers le client B, vous devez faire 2 requêtes :</p><ol id="r-952339" data-claire-element-id="952339"><li id="r-952336" data-claire-element-id="952336"><p id="r-952335" data-claire-element-id="952335">Retirer 100€ du compte du client A</p></li><li id="r-952338" data-claire-element-id="952338"><p id="r-952337" data-claire-element-id="952337">Ajouter 100€ au compte du client B</p></li></ol><p id="r-952340" data-claire-element-id="952340">C'est typiquement le cas où une transaction est indispensable. Imaginez que quelque chose échoue entre les deux (votre application est arrêtée par exemple). Sans transaction, le client A aura perdu de l'argent mais le client B ne l'aura pas récupéré !<br/><em>(certes, on pourrait en profiter pour faire glisser discrètement l'argent dans un paradis fiscal mais ce n'est pas le sujet :-° )</em></p><h2 id="r-les-transactions-avec-objectify" data-claire-element-id="952358">Les transactions avec Objectify</h2><p id="r-952342" data-claire-element-id="952342">Objectify fournit un système très pratique pour effectuer des transactions. On pourrait aussi le faire avec l'API bas niveau mais je préfère vous montrer directement la méthode Objectify.</p><p id="r-952343" data-claire-element-id="952343">Il y a 2 cas :</p><ul id="r-952348" data-claire-element-id="952348"><li id="r-952345" data-claire-element-id="952345"><p id="r-952344" data-claire-element-id="952344">Soit votre transaction doit retourner des données (sous forme d'un objet)</p></li><li id="r-952347" data-claire-element-id="952347"><p id="r-952346" data-claire-element-id="952346">Soit votre transaction ne doit pas retourner de données</p></li></ul><h3 id="r-une-transaction-qui-ne-retourne-pas-de-donnees" data-claire-element-id="952353">Une transaction qui ne retourne pas de données</h3><p id="r-952349" data-claire-element-id="952349">Si votre transaction ne doit pas retourner de données, voici comment on l'écrirait avec Objectify :</p><pre id="r-952350" data-claire-element-id="952350"><code data-claire-semantic="java">import com.googlecode.objectify.VoidWork;

ofy().transact(new VoidWork() {
    public void vrun() { // Tout ce qui est exécuté dans cette méthode appartient à la même transaction
        Objet objet = ofy().load().key(cle).now();
        /* Modification de l'objet... */
        ofy().save().entity(objet);
    }
}</code></pre><p id="r-952351" data-claire-element-id="952351">On fait un appel à la méthode <code data-claire-semantic="java">transact()</code> dans laquelle on crée un objet de type <code data-claire-semantic="java">VoidWork</code> qui possède une méthode <code data-claire-semantic="java">vrun()</code>. Toute la transaction doit être codée dans la méthode <code data-claire-semantic="java">vrun()</code> : les lectures dans la base, les modifications, les calculs, les enregistrements...</p><p id="r-952352" data-claire-element-id="952352">S'il y a un échec, Objectify demandera l'annulation de tout ce qui a été fait au sein de la méthode.</p><h3 id="r-une-transaction-qui-retourne-des-donnees" data-claire-element-id="952357">Une transaction qui retourne des données</h3><p id="r-952354" data-claire-element-id="952354">Voici un exemple de transaction qui retourne cette fois des données :</p><pre id="r-952355" data-claire-element-id="952355"><code data-claire-semantic="java">import com.googlecode.objectify.Work;

Objet monObjet = ofy().transact(new Work&lt;Objet&gt;() {
    public Objet run() {
        Objet objet = ofy().load().key(cle).now();
        /* Modification de l'objet... */
        ofy().save().entity(objet);
        return objet;
    }
});</code></pre><p id="r-952356" data-claire-element-id="952356">La seule différence est qu'on fait ici appel à un objet de type <code data-claire-semantic="java">Work</code> qui possède une méthode <code data-claire-semantic="java">run()</code> retournant un objet.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
<span class="arrow"></span>
<span class="next">Mise en cache avec Memcache</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
<span class="next">Exemple : Objectify dans une application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ExempleObjectifydansuneapplication"></a><h2>Exemple : Objectify dans une application</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
<span class="arrow"></span>
<span class="next">Les transactions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">
<span class="next">Stocker des fichiers sur Google Cloud Storage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952360" data-claire-element-id="952360">Rien de tel pour s'assurer qu'on a bien compris que de reprendre notre bon vieil exemple du livre d'or et de l'adapter à Objectify !</p><p id="r-952361" data-claire-element-id="952361">Je rappelle à quoi ressemble le livre d'or (sur une seule page) que nous allons créer :</p><figure id="r-le-livre-d-or-que-nous-allons-creer-avec-objectify" data-claire-element-id="952364"><img id="r-952362" data-claire-element-id="952362" src="medias/uploads.siteduzero.com_files_421001_422000_421446.png" alt="Le livre d'or que nous allons créer avec Objectify"/><figcaption>Le livre d'or que nous allons créer avec Objectify</figcaption></figure><p id="r-952365" data-claire-element-id="952365">Commençons par définir la classe Message. Elle représentera les objets que nous allons persister dans le Datastore.<br/> La classe doit définir la structure de nos objets persistables. On doit y écrire des annotations qui indiquent à Objectify où est l'ID, les champs qui doivent être indexés...</p><pre id="r-952366" data-claire-element-id="952366"><code data-claire-semantic="java">import java.util.Date;
import com.googlecode.objectify.annotation.*;

@Entity
@Cache
public class Message {
    @Id Long id; // Sera généré automatiquement
    @Index Date date;
    String name;
    String message;
    
    private Message() {}
    public Message(String name, String message) {
        this.name = name;
        this.message = message;
        this.date = new Date();
    }
    
    public Date getDate() {
        return date;
    }
    public void setDate(Date date) {
        this.date = date;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getMessage() {
        return message;
    }
    public void setMessage(String message) {
        this.message = message;
    }
}</code></pre><p id="r-952367" data-claire-element-id="952367">Hormis les annotations, cette classe est vraiment très basique ! On y active le cache Memcache avec l'annotation @Cache pour réduire automatiquement la charge sur le Datastore.</p><p id="r-952368" data-claire-element-id="952368">Avec Objectify, le code de la servlet devient de son côté vraiment concis :</p><pre id="r-952369" data-claire-element-id="952369"><code data-claire-semantic="java">import java.io.IOException;
import java.util.List;

import javax.servlet.ServletException;
import javax.servlet.http.*;

import com.googlecode.objectify.ObjectifyService;
import static com.googlecode.objectify.ObjectifyService.ofy;

@SuppressWarnings(&quot;serial&quot;)
public class GuestbookServlet extends HttpServlet {
    // Enregistrement de la classe persistable auprès d'Objectify
    static {
        ObjectifyService.register(Message.class);
    }
    
    public void doGet(HttpServletRequest req, HttpServletResponse resp) {
        try {
            // Requête Objectify
            List&lt;Message&gt; messages = ofy().load().type(Message.class).order(&quot;-date&quot;).limit(5).list();
            
            req.setAttribute(&quot;messages&quot;, messages);
            this.getServletContext().getRequestDispatcher(&quot;/WEB-INF/guestbook.jsp&quot;).forward(req, resp);
        } catch (ServletException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void doPost(HttpServletRequest req, HttpServletResponse resp) {	
        try {
            // Création de l'objet
            Message message = new Message(req.getParameter(&quot;name&quot;), req.getParameter(&quot;message&quot;));
            // Enregistrement de l'objet dans le Datastore avec Objectify
            ofy().save().entity(message).now();

            resp.sendRedirect(&quot;/&quot;);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}</code></pre><aside id="r-952371" data-claire-element-id="952371" data-claire-semantic="information"><p id="r-952370" data-claire-element-id="952370">La requête trie par date, donc il faut un index sur la date pour que le Datastore puisse effectuer la requête. C'est pour cela que j'ai ajouté une annotation @Index devant l'attribut date de la classe Message.</p></aside><p id="r-952372" data-claire-element-id="952372">La JSP récupère simplement une liste de messages et fait une boucle pour les afficher, rien de bien particulier :</p><pre id="r-952373" data-claire-element-id="952373"><code data-claire-semantic="jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;%@ page import=&quot;java.util.List&quot; %&gt;
&lt;%@ page import=&quot;guestbook.Message&quot; %&gt;


&lt;!DOCTYPE html&gt;

&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Livre d'or&lt;/title&gt;
		&lt;meta charset=&quot;utf-8&quot; /&gt;
	&lt;/head&gt;

	&lt;body&gt;
		&lt;h1&gt;Vous avez aimé mon site ? Dites-le dans le Datastore !&lt;/h1&gt;
		&lt;form action=&quot;/post&quot; method=&quot;post&quot;&gt;
			&lt;p&gt;
				&lt;label&gt;Votre nom : &lt;input type=&quot;text&quot; name=&quot;name&quot; /&gt;&lt;/label&gt;
			&lt;/p&gt;
			&lt;p&gt;
				&lt;label&gt;Votre message :&lt;br /&gt;
				&lt;textarea name=&quot;message&quot; style=&quot;width: 200px; height: 100px;&quot;&gt;&lt;/textarea&gt;&lt;/label&gt;
			&lt;/p&gt;
			&lt;p&gt;
				&lt;input type=&quot;submit&quot; /&gt;
			&lt;/p&gt;
		&lt;/form&gt;
	
		&lt;h1&gt;Ils ont aimé :&lt;/h1&gt;
		&lt;%
			List&lt;Message&gt; messages = (List&lt;Message&gt;) request.getAttribute(&quot;messages&quot;);
			for (Message message : messages) {
		%&gt;
		&lt;p&gt;
			&lt;strong&gt;&lt;%= message.getName() %&gt;&lt;/strong&gt; a écrit :&lt;br /&gt;
			&lt;%= message.getMessage() %&gt;
		&lt;/p&gt;
		&lt;%
			}
		%&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-952374" data-claire-element-id="952374">Enfin, n'oublions pas le fichier web.xml qui doit comporter les lignes spécifiques à Objectify pour que notre application puisse fonctionner correctement :</p><pre id="r-952375" data-claire-element-id="952375"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:web=&quot;http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;
	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot;
	version=&quot;2.5&quot;&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;Guestbook&lt;/servlet-name&gt;
		&lt;servlet-class&gt;guestbook.GuestbookServlet&lt;/servlet-class&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;Guestbook&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
	&lt;welcome-file-list&gt;
		&lt;welcome-file&gt;guestbook.jsp&lt;/welcome-file&gt;
	&lt;/welcome-file-list&gt;
	&lt;filter&gt;
		&lt;filter-name&gt;ObjectifyFilter&lt;/filter-name&gt;
		&lt;filter-class&gt;com.googlecode.objectify.ObjectifyFilter&lt;/filter-class&gt;
	&lt;/filter&gt;
	&lt;filter-mapping&gt;
		&lt;filter-name&gt;ObjectifyFilter&lt;/filter-name&gt;
		&lt;url-pattern&gt;/*&lt;/url-pattern&gt;
	&lt;/filter-mapping&gt;
&lt;/web-app&gt;</code></pre><div id="r-952377" data-claire-element-id="952377" data-claire-semantic="question"><p id="r-952376" data-claire-element-id="952376">Euh... j'ai à nouveau parfois le problème : je poste un message et il ne s'affiche pas immédiatement après...</p></div><p id="r-952378" data-claire-element-id="952378">Oui, Objectify se base sur le Datastore et il y a un principe de base du Datastore qui dit : &quot;les données que vous récupérez ne sont pas forcément immédiatement à jour, si vous voulez des données à jour regroupez-les au sein d'un même groupe d'entités&quot;.</p><p id="r-952379" data-claire-element-id="952379">Pour faire ça avec Objectify, il faut que je rajoute un attribut qui représente le parent dans la classe Message, avec l'annotation @Parent :</p><pre id="r-952380" data-claire-element-id="952380"><code data-claire-semantic="java">public class Message {
    // ...
    @Parent Key parent;
    
    private Message() {}
    public Message(String name, String message) {
        // ...
        this.parent = KeyFactory.createKey(&quot;LivreOr&quot;, &quot;livreOr&quot;);
    }</code></pre><p id="r-952381" data-claire-element-id="952381">Je ne crée pas d'entité parente mais ce n'est pas obligatoire comme je vous l'avais expliqué : il me suffit de donner un même ancêtre à tous les messages du livre d'or pour les regrouper dans un même groupe d'entités.</p><p id="r-952382" data-claire-element-id="952382">Ma requête Objectify dans la servlet doit maintenant indiquer qui est l'ancêtre :</p><pre id="r-952383" data-claire-element-id="952383"><code data-claire-semantic="java">List&lt;Message&gt; messages = ofy().load().type(Message.class).ancestor(KeyFactory.createKey(&quot;LivreOr&quot;, &quot;livreOr&quot;)).order(&quot;-date&quot;).limit(5).list();</code></pre><p id="r-952384" data-claire-element-id="952384">Voilà c'est tout, vous avez maintenant l'assurance d'avoir des données toujours à jour. :)</p><p id="r-952385" data-claire-element-id="952385">Encore une fois, je le répète car c'est important : n'abusez pas de cette technique. Si vous regroupez aveuglément toutes les entités de votre application au sein d'un même groupe, vous aurez rapidement des problèmes de performance, ce qui serait le comble !<br/> Vos visiteurs n'ont pas forcément toujours besoin de voir des données à jour à la milliseconde près. Faites des regroupements uniquement lorsque c'est nécessaire.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
<span class="arrow"></span>
<span class="next">Les transactions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">
<span class="next">Stocker des fichiers sur Google Cloud Storage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="StockerdesfichierssurGoogleCloudStorage"></a><h2>Stocker des fichiers sur Google Cloud Storage</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
<span class="arrow"></span>
<span class="next">Exemple : Objectify dans une application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
<span class="next">Uploader sur le Blobstore</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-952388" data-claire-element-id="952388">Nous avons vu de long en large comment nous pouvions stocker des données sur Google App Engine : via Cloud SQL, dans le Datastore, dans le Datastore via Objectify... Mais nous ne savons toujours pas stocker des fichiers sur le Cloud de Google !</p><p id="r-952389" data-claire-element-id="952389">Je vous avais dit qu'App Engine nous interdisait de stocker les données sur leurs serveurs web pour une raison simple : ceux-ci ne communiquent pas entre eux et chaque serveur peut être arrêté à tout instant.</p><figure id="r-les-frontaux-web-de-google-app-engine-ne-sont-pas-faits-pour-stocker-les-fichiers" data-claire-element-id="952392"><img id="r-952390" data-claire-element-id="952390" src="medias/uploads.siteduzero.com_files_421001_422000_421442.png" alt="Les frontaux web de Google App Engine ne sont pas faits pour stocker les fichiers"/><figcaption>Les frontaux web de Google App Engine ne sont pas faits pour stocker les fichiers</figcaption></figure><p id="r-952393" data-claire-element-id="952393">La solution passe par l'utilisation d'un service externe comme Google Cloud Storage qui est fait pour stocker ces fichiers :</p><figure id="r-utiliser-des-serveurs-speciaux-permet-a-tout-le-monde-de-retrouver-les-fichiers" data-claire-element-id="952396"><img id="r-952394" data-claire-element-id="952394" src="medias/uploads.siteduzero.com_files_421001_422000_421443.png" alt="Utiliser des serveurs spéciaux permet à tout le monde de retrouver les fichiers"/><figcaption>Utiliser des serveurs spéciaux permet à tout le monde de retrouver les fichiers</figcaption></figure><p id="r-952397" data-claire-element-id="952397">Il faut savoir que Google propose 2 méthodes de stockage de fichiers :</p><ul id="r-952402" data-claire-element-id="952402"><li id="r-952399" data-claire-element-id="952399"><p id="r-952398" data-claire-element-id="952398"><strong>Le Blobstore</strong> : c'est un système de stockage de fichiers intégré à App Engine. Pratique et stable, il est intégré à votre application et rapidement utilisable, tout comme le Datastore. Vous pouvez stocker des fichiers d'une taille de 2 Go chacun maximum. Vous disposez de 5 Go de stockage gratuit avec votre application App Engine.</p></li><li id="r-952401" data-claire-element-id="952401"><p id="r-952400" data-claire-element-id="952400"><strong>Google Cloud Storage</strong> : c'est un autre système de stockage de fichiers qui utilise une autre architecture de serveurs. Il possède plus de barrières à l'entrée : il s'agit d'un autre service qu'il faut activer (via API Console), il ne propose pas de stockage gratuit et il est encore assez jeune. Malgré ces éléments qui peuvent être rebutants au début, il possède de nombreux avantages : vous pourrez uploader de très gros fichiers (jusqu'à plusieurs To), gérer plus finement les droits d'accès et vous disposerez d'une API REST complète pour l'utiliser depuis des applications externes.</p></li></ul><p id="r-952403" data-claire-element-id="952403">Google Cloud Storage est clairement la solution la plus complète. Elle constitue le futur du stockage de fichiers pour les applications App Engine. Néanmoins, le Blobstore ne manque pas d'intérêt lui aussi, parce qu'on peut l'utiliser gratuitement (jusqu'à une certaine limite) et qu'il est plus simple à configurer au sein d'une application App Engine.</p><p id="r-952404" data-claire-element-id="952404">Je vous présenterai donc les deux solutions au sein de ce chapitre, en commençant par le Blobstore qui vous permettra de gérer vos premiers uploads rapidement. Si vous voulez aller plus loin, lisez les sections sur Cloud Storage mais préparez-vous à un peu plus de configuration avant de pouvoir l'utiliser.</p>
</div><a name="UploadersurleBlobstore"></a><h2>Uploader sur le Blobstore</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">
<span class="arrow"></span>
<span class="next">Stocker des fichiers sur Google Cloud Storage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
<span class="next">Principes de Google Cloud Storage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952405" data-claire-element-id="952405">Le Blobstore est un système de stockage déjà intégré à votre application. De la même façon que le Datastore stocke des données, le Blobstore stocke des fichiers.</p><h2 id="r-principe-du-blobstore" data-claire-element-id="952416">Principe du Blobstore</h2><p id="r-952406" data-claire-element-id="952406">On utilise typiquement le Blobstore en combinaison avec des formulaires d'upload de fichiers. Dans ce cas, on crée un formulaire qu'on redirige vers une URL qui nous est fournie par le Blobstore :</p><pre id="r-952407" data-claire-element-id="952407"><code data-claire-semantic="jsp">&lt;form action=&quot;&lt;%= blobstoreService.createUploadUrl(&quot;/upload&quot;) %&gt;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;

&lt;/form&gt;</code></pre><p id="r-952408" data-claire-element-id="952408">C'est le Blobstore qui récupère le formulaire et non votre application directement. Le Blobstore se charge de stocker les fichiers soumis avec le formulaire.</p><div id="r-952410" data-claire-element-id="952410" data-claire-semantic="question"><p id="r-952409" data-claire-element-id="952409">Et si mon formulaire contient d'autres champs comme des champs texte, comment je récupère les données ?</p></div><p id="r-952411" data-claire-element-id="952411">C'est là que le Blobstore est malin. Une fois qu'il a fini de stocker les fichiers uploadés par le visiteur, il renvoie le reste du formulaire à votre application... sans les fichiers mais avec des informations sur l'emplacement où les fichiers ont été sauvegardés. Votre application peut ensuite effectuer le reste du traitement, comme sauvegarder les données du formulaire dans le Datastore.</p><p id="r-952412" data-claire-element-id="952412">Résumons :</p><figure id="r-le-blobstore-stocke-les-fichiers-transmis-et-renvoie-le-formulaire-a-traiter-a-votre-application" data-claire-element-id="952415"><img id="r-952413" data-claire-element-id="952413" src="medias/uploads.siteduzero.com_files_421001_422000_421475.png" alt="Le Blobstore stocke les fichiers transmis et renvoie le formulaire à traiter à votre application"/><figcaption>Le Blobstore stocke les fichiers transmis et renvoie le formulaire à traiter à votre application</figcaption></figure><h2 id="r-utilisation-du-blobstore-dans-une-application-app-engine" data-claire-element-id="952436">Utilisation du Blobstore dans une application App Engine</h2><p id="r-952417" data-claire-element-id="952417">Commençons pour cette fois par la JSP. Nous devons simplement récupérer le service du Blobstore dans la JSP et renvoyer le formulaire vers l'adresse fournie par le Blobstore :</p><pre id="r-952418" data-claire-element-id="952418"><code data-claire-semantic="jsp">&lt;%@ page import=&quot;com.google.appengine.api.blobstore.*&quot; %&gt;

&lt;%
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
%&gt;

&lt;!DOCTYPE html&gt;

&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Envoi de fichiers dans le Cloud&lt;/title&gt;
		&lt;meta charset=&quot;utf-8&quot; /&gt;
	&lt;/head&gt;

	&lt;body&gt;
		&lt;h1&gt;Envoyez un fichier dans le Cloud !&lt;/h1&gt;
		&lt;form action=&quot;&lt;%= blobstoreService.createUploadUrl(&quot;/upload&quot;) %&gt;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
			&lt;p&gt;
				&lt;label&gt;Fichier à envoyer : &lt;input type=&quot;file&quot; name=&quot;uploadedFile&quot; /&gt;&lt;/label&gt;
			&lt;/p&gt;
			&lt;p&gt;
				&lt;label&gt;Description du fichier : &lt;input type=&quot;text&quot; name=&quot;description&quot; /&gt;&lt;/label&gt;
			&lt;/p&gt;
			&lt;p&gt;
				&lt;input type=&quot;submit&quot; /&gt;
			&lt;/p&gt;
		&lt;/form&gt;
        &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-952419" data-claire-element-id="952419">L'appel à <code data-claire-semantic="jsp">&lt;%= blobstoreService.createUploadUrl(&quot;/upload&quot;) %&gt;</code> renvoie vers une URL générée par le Blobstore (typiquement une URL un peu longue comme /_ah/upload/aglub19hcHBfaWRyGwsScV8fQmxvYlVwbG9hZFNlc3Npb05fXxgWDA). En paramètre, nous indiquons à quelle adresse le Blobstore doit rediriger le reste du formulaire (ici &quot;/upload&quot;).</p><p id="r-952420" data-claire-element-id="952420">Nous devons donc créer une Servlet qui répond à l'adresse /upload :</p><pre id="r-952421" data-claire-element-id="952421"><code data-claire-semantic="java">// Répond sur /upload

import com.google.appengine.api.blobstore.*;

@SuppressWarnings(&quot;serial&quot;)
public class UploadServlet extends HttpServlet {    
    public void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
            BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

            // Récupère une Map de tous les champs d'upload de fichiers
            Map&lt;String, List&lt;BlobKey&gt;&gt; blobs = blobstoreService.getUploads(req);

            // Récupère la liste des fichiers uploadés dans le champ &quot;uploadedFile&quot;
            // (il peut y en avoir plusieurs si c'est un champ d'upload multiple, d'où la List)
            List&lt;BlobKey&gt; blobKeys = blobs.get(&quot;uploadedFile&quot;);

            // Récupère la clé identifiant du fichier uploadé dans le Blobstore (à sauvegarder)
            String cleFichierUploade = blobKeys.get(0).getKeyString();

            // On peut récupérer les autres champs du formulaire comme d'habitude
            String autreChamp = req.getParameter(&quot;description&quot;);
            // ...
    }
}</code></pre><p id="r-952422" data-claire-element-id="952422">Cette servlet est appelée par le Blobstore après qu'il ait stocké les fichiers envoyés dans le formulaire.</p><p id="r-952423" data-claire-element-id="952423">La première étape, simple, consiste à récupérer le service du Blobstore. A partir de là, on obtient une Map associant les champs d'uploads du formulaire à une liste de fichiers uploadés. En général, un champ = un fichier mais il est possible aussi d'uploader plusieurs fichiers par champ avec l'attribut <code data-claire-semantic="html">multiple</code> de HTML5 (voilà pourquoi on manipule une Map contenant une List).</p><p id="r-952424" data-claire-element-id="952424">On peut obtenir à chaque fois une chaîne représentant le fichier dans le Blobstore, qu'on stockera en général dans le Datastore pour y accéder à nouveau par la suite. C'est une clé de type BlobKey.<br/> On peut aussi récupérer le reste des champs du formulaire comme on le ferait d'habitude.</p><div id="r-952426" data-claire-element-id="952426" data-claire-semantic="question"><p id="r-952425" data-claire-element-id="952425">Et comment je fais ensuite pour afficher le fichier uploadé moi ?</p></div><p id="r-952427" data-claire-element-id="952427">Il vous faut la clé du fichier. Imaginez une autre servlet, qui répond par exemple sur l'adresse <code>/image?blob-key=xxx</code>. Dans la servlet, il vous suffit de récupérer cette clé et de faire appel à la méthode <code data-claire-semantic="java">serve()</code> pour que la servlet réponde par le fichier. Par exemple :</p><pre id="r-952428" data-claire-element-id="952428"><code data-claire-semantic="java">// Répond sur /image

import com.google.appengine.api.blobstore.*;

public class ImageServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException, ServletException {
        BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
        
        if (req.getParameter(&quot;blob-key&quot;) != null) {
            BlobKey blobKey = new BlobKey(req.getParameter(&quot;blob-key&quot;));
            blobstoreService.serve(blobKey, resp);
        }
}</code></pre><div id="r-952430" data-claire-element-id="952430" data-claire-semantic="question"><p id="r-952429" data-claire-element-id="952429">Donc on fait une servlet juste pour fournir un fichier ?</p></div><p id="r-952431" data-claire-element-id="952431">Oui. C'est pratique si on veut faire du traitement mais coûteux en ressources serveurs s'il s'agit juste de fournir un fichier statique comme une image (ce qui est souvent le cas). Dans ce cas, il y a une autre méthode qui consiste à récupérer l'URL du fichier directement. Il faut passer pour cela par un autre service de Google : ImageService.</p><p id="r-952432" data-claire-element-id="952432">On doit charger le service d'images :</p><pre id="r-952433" data-claire-element-id="952433"><code data-claire-semantic="java">import com.google.appengine.api.images.*;</code></pre><pre id="r-952434" data-claire-element-id="952434"><code data-claire-semantic="java">public void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
        BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
        ImagesService imagesService = ImagesServiceFactory.getImagesService(); // Récupération du service d'images

        Map&lt;String, List&lt;BlobKey&gt;&gt; blobs = blobstoreService.getUploads(req);
        List&lt;BlobKey&gt; blobKeys = blobs.get(&quot;uploadedFile&quot;);
        
        // Récupération de l'URL de l'image
        String urlImage = imagesService.getServingUrl(ServingUrlOptions.Builder.withBlobKey(blobKeys.get(0)));
}</code></pre><p id="r-952435" data-claire-element-id="952435">Vous pouvez ensuite stocker l'url de l'image où vous le souhaitez pour l'inclure directement dans vos pages web. Attention cependant à ne pas perdre la BlobKey qui vous sera indispensable si vous voulez effectuer d'autres opérations (comme supprimer l'image par la suite).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">
<span class="arrow"></span>
<span class="next">Stocker des fichiers sur Google Cloud Storage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
<span class="next">Principes de Google Cloud Storage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="PrincipesdeGoogleCloudStorage"></a><h2>Principes de Google Cloud Storage</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
<span class="arrow"></span>
<span class="next">Uploader sur le Blobstore</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
<span class="next">Activer Google Cloud Storage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952438" data-claire-element-id="952438">Nous venons de voir comment utiliser le Blobstore, qui est un moyen pratique et rapide de stocker des fichiers avec App Engine. Je vous propose que l'on s'intéresse maintenant à un autre service de stockage, Google Cloud Storage, qui est plus récent et plus complet (mais aussi plus complexe à prendre en main).</p><p id="r-952439" data-claire-element-id="952439">Google Cloud Storage vous permet de stocker sur les serveurs de Google toutes sortes de fichiers d'une taille pouvant aller jusqu'à plusieurs Teraoctets. Les fichiers peuvent être stockés soit aux Etats-Unis soit en Europe, ce qui peut être pratique pour optimiser les temps d'accès et pour la confidentialité des données. Les fichiers sont eux-mêmes répartis sur plusieurs datacenters pour éviter les pertes accidentelles de données.<br/> Cloud Storage est un peu l'équivalent du service Amazon S3 chez Google.</p><p id="r-952440" data-claire-element-id="952440">Il y a 3 types d'éléments sur Cloud Storage :</p><ul id="r-952447" data-claire-element-id="952447"><li id="r-952442" data-claire-element-id="952442"><p id="r-952441" data-claire-element-id="952441"><strong>Les projets</strong> : vous pouvez gérer plusieurs projets Cloud Storage. En général, un projet correspond à un site web. On crée ces projets dans l'API Console de Google.</p></li><li id="r-952444" data-claire-element-id="952444"><p id="r-952443" data-claire-element-id="952443"><strong>Les buckets</strong> : chaque projet peut gérer plusieurs buckets, qui sont des espaces de stockage différents. On peut les voir comme des dossiers mais les buckets ne peuvent pas être imbriqués contrairement aux dossiers. Chaque bucket définit des droits d'accès différents.</p></li><li id="r-952446" data-claire-element-id="952446"><p id="r-952445" data-claire-element-id="952445"><strong>Les objets</strong> : ce sont les fichiers et dossiers que vous stockez. Les fichiers peuvent peser jusqu'à plusieurs Teraoctets. Un fichier se trouve dans un et un seul bucket à la fois.</p></li></ul><figure id="r-structure-de-cloud-storage" data-claire-element-id="952450"><img id="r-952448" data-claire-element-id="952448" src="medias/uploads.siteduzero.com_files_421001_422000_421469.png" alt="Structure de Cloud Storage"/><figcaption>Structure de Cloud Storage</figcaption></figure><p id="r-952451" data-claire-element-id="952451">Chaque objet possède un contenu (le contenu du fichier lui-même) et des métadonnées. Ces métadonnées sont des paires clé-valeur qui stockent des informations sur l'objet.</p><p id="r-952452" data-claire-element-id="952452">Pour manipuler Cloud Storage, Google vous propose plusieurs méthodes :</p><ul id="r-952459" data-claire-element-id="952459"><li id="r-952454" data-claire-element-id="952454"><p id="r-952453" data-claire-element-id="952453"><strong>Une interface graphique web</strong> : accessible depuis l'API Console, elle vous donne une vue d'ensemble de ce qui est stocké sur Cloud Storage. Elle est accessible depuis un lien dans l'API Console ou directement à l'adresse <a href="https://storage.cloud.google.com/NOM_BUCKET">https://storage.cloud.google.com/NOM_BUCKET</a> (remplacez NOM_BUCKET par le nom de votre bucket lorsque vous en aurez créé un). On va voir dans un instant comment l'utiliser et comment y créer des buckets.</p></li><li id="r-952456" data-claire-element-id="952456"><p id="r-952455" data-claire-element-id="952455"><strong>Un outil en ligne de commande</strong> : Google propose le programme Python <code data-claire-semantic="console">gsutil</code> utilisable en ligne de commande qui vous permet d'effectuer toutes les opérations que vous souhaitez sur Cloud Storage. Vous trouverez des <a href="https://developers.google.com/storage/docs/gsutil_install">instructions pour l'installer</a> dans la doc.</p></li><li id="r-952458" data-claire-element-id="952458"><p id="r-952457" data-claire-element-id="952457"><strong>Des APIs</strong> : Google propose des APIs XML et JSON que vous pouvez manipuler de façon externe en Java, Python, JavaScript... Vous pouvez aussi manipuler Cloud Storage directement depuis une application App Engine, et ça tombe bien car c'est justement ce que nous allons faire !</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
<span class="arrow"></span>
<span class="next">Uploader sur le Blobstore</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
<span class="next">Activer Google Cloud Storage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ActiverGoogleCloudStorage"></a><h2>Activer Google Cloud Storage</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
<span class="arrow"></span>
<span class="next">Principes de Google Cloud Storage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
<span class="next">Relier Cloud Storage à son application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952461" data-claire-element-id="952461">Google Cloud Storage est un service qui peut être utilisé indépendamment d'App Engine. Le principe est le même que pour Google Cloud SQL : vous devez l'activer dans l'API Console. Rendez-vous donc sur :</p><p id="r-952462" data-claire-element-id="952462"><a href="https://code.google.com/apis/console">https://code.google.com/apis/console</a></p><p id="r-952463" data-claire-element-id="952463">Là, dans la section &quot;Services&quot;, repérez &quot;Google Cloud Storage&quot; et activez-le :</p><figure id="r-activation-de-google-cloud-storage" data-claire-element-id="952466"><img id="r-952464" data-claire-element-id="952464" src="medias/uploads.siteduzero.com_files_421001_422000_421470.png" alt="Activation de Google Cloud Storage"/><figcaption>Activation de Google Cloud Storage</figcaption></figure><p id="r-952467" data-claire-element-id="952467">Vous devriez voir le service apparaître dans le menu :</p><figure id="r-google-cloud-storage-est-active-et-apparait-dans-le-menu" data-claire-element-id="952470"><img id="r-952468" data-claire-element-id="952468" src="medias/uploads.siteduzero.com_files_421001_422000_421471.png" alt="Google Cloud Storage est activé et apparaît dans le menu"/><figcaption>Google Cloud Storage est activé et apparaît dans le menu</figcaption></figure><aside id="r-952472" data-claire-element-id="952472" data-claire-semantic="information"><p id="r-952471" data-claire-element-id="952471">Cloud Storage requiert que vous ayez entré les informations de paiement (<em>billing</em>) pour l'utiliser.</p></aside><p id="r-952473" data-claire-element-id="952473">Le lien dans le menu ouvre une page vous donnant des informations sur les différentes possibilités d'utilisation de Cloud Storage. Un lien vous mène à une interface web qui vous permet de voir l'état de votre projet Cloud Storage :</p><figure id="r-l-interface-web-de-cloud-storage" data-claire-element-id="952476"><img id="r-952474" data-claire-element-id="952474" src="medias/uploads.siteduzero.com_files_421001_422000_421472.png" alt="L'interface web de Cloud Storage"/><figcaption>L'interface web de Cloud Storage</figcaption></figure><p id="r-952477" data-claire-element-id="952477">La première étape est de créer un bucket. Cliquez sur le bouton correspondant dans l'interface et entrez un nom de bucket :</p><figure id="r-un-bucket-a-ete-cree" data-claire-element-id="952480"><img id="r-952478" data-claire-element-id="952478" src="medias/uploads.siteduzero.com_files_421001_422000_421473.png" alt="Un bucket a été créé"/><figcaption>Un bucket a été créé</figcaption></figure><aside id="r-952482" data-claire-element-id="952482" data-claire-semantic="warning"><p id="r-952481" data-claire-element-id="952481">Le nom du bucket doit être unique parmi tous ceux déjà créés sur Cloud Storage. Vous ne pourrez donc pas l'appeler &quot;test&quot; par exemple car quelqu'un en a déjà créé un avec ce nom avant vous.</p></aside><p id="r-952483" data-claire-element-id="952483">A l'intérieur d'un bucket, vous pouvez stocker tous les fichiers et dossiers que vous voulez. L'interface web vous fournit un bouton pour uploader et vous pouvez même faire un glisser-déposer :</p><figure id="r-des-fichiers-et-dossiers-stockes-dans-un-bucket" data-claire-element-id="952486"><img id="r-952484" data-claire-element-id="952484" src="medias/uploads.siteduzero.com_files_421001_422000_421474.png" alt="Des fichiers et dossiers stockés dans un bucket"/><figcaption>Des fichiers et dossiers stockés dans un bucket</figcaption></figure><p id="r-952487" data-claire-element-id="952487">Les fichiers que vous stockez sont disponibles à une adresse de la forme suivante :</p><p id="r-952488" data-claire-element-id="952488"><code>https://storage.cloud.google.com/BUCKET/FICHIER</code></p><p id="r-952489" data-claire-element-id="952489">Par défaut, le contenu des buckets est protégé et n'est pas accessible de l'extérieur (seul vous qui êtes connecté pouvez le voir). Nous verrons plus loin comment changer les droits d'accès aux buckets.</p><div id="r-952491" data-claire-element-id="952491" data-claire-semantic="question"><p id="r-952490" data-claire-element-id="952490">Tout ça ressemble à un bête FTP en ligne ! Quel est l'intérêt ?</p></div><p id="r-952492" data-claire-element-id="952492">L'interface web est simple et ne propose rien d'extraordinaire. Tout l'intérêt de Cloud Storage est qu'on peut y accéder depuis des applications externes avec les APIs fournies par Google.</p><p id="r-952493" data-claire-element-id="952493">En ce qui nous concerne, nous allons nous concentrer sur l'utilisation de Cloud Storage dans une application App Engine !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
<span class="arrow"></span>
<span class="next">Principes de Google Cloud Storage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
<span class="next">Relier Cloud Storage à son application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="RelierCloudStoragesonapplication"></a><h2>Relier Cloud Storage à son application</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
<span class="arrow"></span>
<span class="next">Activer Google Cloud Storage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
<span class="next">Utiliser Cloud Storage dans son application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952495" data-claire-element-id="952495">Nous devons maintenant indiquer à Cloud Storage que notre application a le droit de modifier notre bucket, c'est-à-dire d'y lire et d'y écrire des fichiers. C'est la partie que j'ai trouvée la plus délicate pour ma part, alors suivez bien mes instructions dans l'ordre. ;)</p><h2 id="r-le-service-account-name" data-claire-element-id="952501">Le Service Account Name</h2><p id="r-952496" data-claire-element-id="952496">Pour commencer, vous devez <strong>récupérer le Service Account Name</strong> de votre application App Engine. Il faut que vous ayez déjà créé votre application sur l'interface en ligne pour en avoir un. Une fois que c'est fait, allez dans la console d'administration App Engine du projet, section Administration / Application settings :</p><figure id="r-le-service-account-name-nous-permettra-d-autoriser-notre-application-sur-cloud-storage" data-claire-element-id="952499"><img id="r-952497" data-claire-element-id="952497" src="medias/uploads.siteduzero.com_files_421001_422000_421476.png" alt="Le Service Account Name nous permettra d'autoriser notre application sur Cloud Storage"/><figcaption>Le Service Account Name nous permettra d'autoriser notre application sur Cloud Storage</figcaption></figure><p id="r-952500" data-claire-element-id="952500">Dans le cas de mon projet, le service account name est l'email : <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="1d6e7967307a68786e697f72727630797c697c6e69726f785d7c6d6d6e6d7269337a6e786f6b747e787c7e7e72687369337e7270">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></p><h2 id="r-les-acl" data-claire-element-id="952517">Les ACL</h2><p id="r-952502" data-claire-element-id="952502">Vous devez autoriser le service account name dans les ACL (Access Control List) du bucket Cloud Storage. L'avantage de Cloud Storage est justement qu'on peut définir de façon très précise qui a le droit de faire quoi dans un bucket, mais les ACL sont un petit peu complexes à manipuler.</p><p id="r-952503" data-claire-element-id="952503">Pour commencer, vous aurez besoin du programme en ligne de commande gsutil. Je vous rappelle que vous pouvez trouver les <a href="https://developers.google.com/storage/docs/gsutil_install">instructions pour l'installer</a> dans la doc.</p><h3 id="r-configurer-l-application-gsutil" data-claire-element-id="952507">Configurer l'application gsutil</h3><p id="r-952504" data-claire-element-id="952504">Ouvrez ensuite votre console et exécutez pour commencer la commande :</p><pre id="r-952505" data-claire-element-id="952505"><code data-claire-semantic="console">gsutil config</code></pre><p id="r-952506" data-claire-element-id="952506">Suivez les instructions qu'on vous donne. Il vous faudra charger votre navigateur à une URL précise et retourner un identifiant pour que le programme gsutil reconnaisse que vous êtes bien le propriétaire du bucket.</p><h3 id="r-autoriser-votre-application-app-engine-a-ecrire-dans-le-bucket" data-claire-element-id="952512">Autoriser votre application App Engine à écrire dans le bucket</h3><p id="r-952508" data-claire-element-id="952508">Ensuite, ajoutez à votre application le droit de lecture et d'écriture sur le bucket comme ceci :</p><pre id="r-952509" data-claire-element-id="952509"><code data-claire-semantic="console">gsutil chacl -u <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="8ec7cad1cfdedec2c7cdcfdac7c1c0ceeffefefdfee1faa0e9fdebfcf8e7edebefedede1fbe0faa0ede1e3">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>:W gs://NOM_BUCKET</code></pre><p id="r-952510" data-claire-element-id="952510">Pensez à remplacer ID_APPLICATION par le nom de votre application et NOM_BUCKET par le nom du bucket concerné.</p><p id="r-952511" data-claire-element-id="952511">Ouf ! Votre application a maintenant le droit d'accéder au bucket. :)</p><h3 id="r-autoriser-tout-le-monde-a-voir-les-fichiers" data-claire-element-id="952516">Autoriser tout le monde à voir les fichiers</h3><p id="r-952513" data-claire-element-id="952513">Par défaut, vous êtes le seul à pouvoir lire les fichiers stockées dans le bucket. Le plus simple pour autoriser tout le monde à voir les fichiers dans le bucket est de lancer la commande qui change les ACL par défaut pour les nouveaux objets uploadés :</p><pre id="r-952514" data-claire-element-id="952514"><code data-claire-semantic="console">gsutil chdefacl -g AllUsers:R gs://NOM_BUCKET</code></pre><p id="r-952515" data-claire-element-id="952515">Tous les nouveaux fichiers uploadés seront alors lisibles par tout le monde à une URL de la forme : <a href="http://storage.googleapis.com/NOM_BUCKET/NOM_FICHIER">http://storage.googleapis.com/NOM_BUCKET/NOM_FICHIER</a></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
<span class="arrow"></span>
<span class="next">Activer Google Cloud Storage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
<span class="next">Utiliser Cloud Storage dans son application</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UtiliserCloudStoragedanssonapplication"></a><h2>Utiliser Cloud Storage dans son application</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
<span class="arrow"></span>
<span class="next">Relier Cloud Storage à son application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">
<span class="next">TP : et voici le... Cloud Uploader</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952519" data-claire-element-id="952519">Maintenant que notre application a accès à notre bucket Google Cloud Storage, il ne nous reste plus qu'à écrire le code qui uploade sur Google Cloud Storage. Et là, surprise ! Le fonctionnement est basé sur le Blobstore que nous venons de voir il y a peu. Nous aurons donc très peu de choses à adapter.</p><p id="r-952520" data-claire-element-id="952520">Vous allez devoir créer une JSP avec un formulaire qui redirige encore une fois vers une URL fournie par le BlobstoreService :</p><pre id="r-952521" data-claire-element-id="952521"><code data-claire-semantic="jsp">&lt;form action=&quot;&lt;%= blobstoreService.createUploadUrl(&quot;/upload&quot;, UploadOptions.Builder.withGoogleStorageBucketName(&quot;NOM_BUCKET&quot;)) %&gt;&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
	
&lt;/form&gt;</code></pre><p id="r-952522" data-claire-element-id="952522">Cette fois, la différence est qu'on ajoute un second paramètre qui indique au BlobstoreService qu'on veut en fait stocker sur Google Cloud Storage et non dans le BlobStore. Pensez à remplacer &quot;NOM_BUCKET&quot; par le nom de votre bucket bien entendu. ;)</p><p id="r-952523" data-claire-element-id="952523">Reste à créer une servlet qui répond sur l'URL indiquée dans la JSP (ici &quot;/upload&quot;), qui peut récupérer les informations sur les fichiers uploadés ainsi que les autres champs de formulaire :</p><pre id="r-952524" data-claire-element-id="952524"><code data-claire-semantic="java">// Répond sur /upload

public void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
        BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
        ImagesService imagesService = ImagesServiceFactory.getImagesService();

        Map&lt;String, List&lt;BlobKey&gt;&gt; blobs = blobstoreService.getUploads(req);
        List&lt;BlobKey&gt; blobKeys = blobs.get(&quot;uploadedFile&quot;);
        
        // Clé à stocker pour effectuer des opérations sur le fichier
        String cleFichierUploade = blobKeys.get(0).getKeyString();
        
        // URL du fichier pour afficher directement le fichier
        String urlImage = imagesService.getServingUrl(ServingUrlOptions.Builder.withBlobKey(blobKeys.get(0)));

        // ...
}</code></pre><p id="r-952525" data-claire-element-id="952525">Le fonctionnement est strictement le même dans la servlet que pour le Blobstore. Avec les mêmes méthodes, on récupère une BlobKey (qui représente cette fois le fichier dans Cloud Storage) et l'URL du fichier. A vous maintenant de stocker ces informations (par exemple dans le Datastore) pour manipuler le fichier par la suite. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
<span class="arrow"></span>
<span class="next">Relier Cloud Storage à son application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">
<span class="next">TP : et voici le... Cloud Uploader</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPetvoicile...CloudUploader"></a><h2>TP : et voici le... Cloud Uploader</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
<span class="arrow"></span>
<span class="next">Utiliser Cloud Storage dans son application</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
<span class="next">Consignes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-952528" data-claire-element-id="952528">Assez de théorie, il est temps de pratiquer ! J'aimerais que vous vous exerciez dans un TP assez simple en jouant vraiment le jeu : essayez de répondre du mieux possible à l'exercice avec les connaissances que vous avez acquises dans les derniers chapitres. Vous avez le droit de relire autant que vous le voulez les chapitres précédents, mais ne regardez pas la solution... sauf si vous êtes désespérés. ;)</p><p id="r-952529" data-claire-element-id="952529">Dans ce TP, je vous propose de réunir vos connaissances sur le Datastore, Objectify, le Blobstore et Cloud Storage au sein d'une même application App Engine. Son nom : le... <strong>Cloud Uploader</strong> (c'est vraiment un nom de mon invention mais à l'allure où avancent les projets chez Google je ne serais pas étonné que ce soit bientôt le nom d'un nouveau service :p ).</p><p id="r-952530" data-claire-element-id="952530">Votre mission, si vous l'acceptez : créer une page où des milliers de visiteurs vont pouvoir uploader des images de leur choix et voter pour celle qu'ils préfèrent. Vous utiliserez évidemment l'infrastructure Cloud de Google App Engine pour faire en sorte que votre application supporte un grand nombre de visiteurs !</p>
</div><a name="Consignes"></a><h2>Consignes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">
<span class="arrow"></span>
<span class="next">TP : et voici le... Cloud Uploader</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952531" data-claire-element-id="952531">Vous allez devoir réaliser un système d'upload d'icônes dans le Cloud en vous basant sur l'infrastructure App Engine. L'application sera capable de :</p><ul id="r-952536" data-claire-element-id="952536"><li id="r-952533" data-claire-element-id="952533"><p id="r-952532" data-claire-element-id="952532">Lister les 9 dernières icônes uploadées par date décroissante, ainsi que leur description</p></li><li id="r-952535" data-claire-element-id="952535"><p id="r-952534" data-claire-element-id="952534">Uploader de nouvelles icônes avec une description</p></li></ul><p id="r-952537" data-claire-element-id="952537">Pour rester simple, je vous propose de tout faire sur une page. Voici à quoi ressemble l'application que je vous propose de créer (notez que je me suis basé sur <a href="http://twitter.github.io/bootstrap/">Bootstrap</a> pour mettre en place rapidement un petit design) :</p><figure id="r-l-application-que-vous-allez-devoir-realiser" data-claire-element-id="952540"><img id="r-952538" data-claire-element-id="952538" src="medias/uploads.siteduzero.com_files_421001_422000_421489.png" alt="L'application que vous allez devoir réaliser"/><figcaption>L'application que vous allez devoir réaliser</figcaption></figure><p id="r-952541" data-claire-element-id="952541">La structure est très simple : l'application liste les dernières icônes uploadées, permet leur suppression et propose un formulaire en bas de page pour en ajouter de nouvelles.</p><p id="r-952542" data-claire-element-id="952542">Quelques instructions :</p><ul id="r-952547" data-claire-element-id="952547"><li id="r-952544" data-claire-element-id="952544"><p id="r-952543" data-claire-element-id="952543">Vous devrez stocker les fichiers dans le <strong>Blobstore</strong>. Vous pourrez aussi les stocker dans Cloud Storage dans un second temps, la syntaxe étant quasiment la même, mais je me concentrerai sur le Blobstore ici.</p></li><li id="r-952546" data-claire-element-id="952546"><p id="r-952545" data-claire-element-id="952545">Vous devrez stocker les informations concernant les icônes dans le Datastore en utilisant la bibliothèque <strong>Objectify</strong>.</p></li></ul><p id="r-952548" data-claire-element-id="952548">A vous de bien construire votre POJO (objet de base Java) qui représente les uploads dans le Blobstore ! Pour le reste vous êtes libre de faire comme vous voulez. :)</p><p id="r-952549" data-claire-element-id="952549">Si cela peut vous être utile, voici le canevas de la page web que j'ai créée en utilisant <a href="http://twitter.github.io/bootstrap/">Bootstrap</a> :</p><pre id="r-952550" data-claire-element-id="952550"><code data-claire-semantic="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Cloud Uploader&lt;/title&gt;
&lt;meta charset=&quot;utf-8&quot; /&gt;
&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
&lt;link href=&quot;css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; media=&quot;screen&quot;&gt;
&lt;link href=&quot;css/style.css&quot; rel=&quot;stylesheet&quot; media=&quot;screen&quot;&gt;
&lt;/head&gt;
&lt;body&gt;

	&lt;div class=&quot;container-narrow&quot;&gt;

		&lt;div class=&quot;masthead&quot;&gt;
			&lt;ul class=&quot;nav nav-pills pull-right&quot;&gt;
				&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;/&quot;&gt;Accueil&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;#list&quot;&gt;Liste des icônes&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;#upload&quot;&gt;Upload&lt;/a&gt;&lt;/li&gt;
			&lt;/ul&gt;
			&lt;h3 class=&quot;muted&quot;&gt;Cloud Uploader&lt;/h3&gt;
		&lt;/div&gt;

		&lt;hr /&gt;

		&lt;div class=&quot;jumbotron&quot;&gt;
			&lt;h1&gt;
				Vos icônes&lt;br /&gt;dans le Cloud
			&lt;/h1&gt;
			&lt;p class=&quot;lead&quot;&gt;En un clic, uploadez vos icônes dans le Cloud de
				Google et votez pour votre icône préférée !&lt;/p&gt;
			&lt;a class=&quot;btn btn-large btn-success&quot; href=&quot;#upload&quot;&gt;Uploader une
				icône&lt;/a&gt;
		&lt;/div&gt;

		&lt;hr /&gt;

		&lt;div class=&quot;row-fluid iconlist&quot; id=&quot;list&quot;&gt;

			&lt;h2&gt;Liste des icônes&lt;/h2&gt;

			&lt;p&gt;
				&lt;span class=&quot;label&quot;&gt;Note&lt;/span&gt; Seules les 9 dernières icônes
				uploadées sont présentées ici.
			&lt;/p&gt;

			&lt;!-- Liste des icônes --&gt;

		&lt;/div&gt;

		&lt;hr /&gt;

		&lt;div class=&quot;row-fluid iconlist&quot; id=&quot;upload&quot;&gt;

			&lt;h2&gt;Uploader une icône&lt;/h2&gt;

			&lt;!-- Formulaire --&gt;

		&lt;/div&gt;

	&lt;/div&gt;
	&lt;script src=&quot;http://code.jquery.com/jquery.js&quot;&gt;&lt;/script&gt;
	&lt;script src=&quot;js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-952551" data-claire-element-id="952551">Bon courage ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">
<span class="arrow"></span>
<span class="next">TP : et voici le... Cloud Uploader</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Correction"></a><h2>Correction</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
<span class="arrow"></span>
<span class="next">Consignes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
<span class="next">Aller plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952553" data-claire-element-id="952553">Allez hop, je corrige les copies ! :D</p><p id="r-952554" data-claire-element-id="952554">Ca n'a pas été trop dur ? Le plus gros du travail consistait à créer correctement sa classe d'entité pour Objectify, le reste suit normalement assez bien tout seul. ;)</p><h2 id="r-l-entite-2" data-claire-element-id="952564">L'entité</h2><p id="r-952555" data-claire-element-id="952555">Commençons justement par notre entité. J'ai créé une classe Upload qui représente chaque upload :</p><pre id="r-952556" data-claire-element-id="952556"><code data-claire-semantic="java">import com.google.appengine.api.blobstore.BlobKey;
import com.google.appengine.api.images.ImagesService;
import com.google.appengine.api.images.ImagesServiceFactory;
import com.google.appengine.api.images.ServingUrlOptions;

import java.util.Date;
import com.googlecode.objectify.annotation.*;


@Entity
@Cache
public class Upload {
    @Id Long id;
    @Index Date date;
    String url;
    @Index BlobKey key;
    String description;
    
    private Upload() {}
    public Upload(BlobKey key, String description) {
        ImagesService imagesService = ImagesServiceFactory.getImagesService();
        
        this.date = new Date();
        this.key = key;
        this.url = imagesService.getServingUrl(ServingUrlOptions.Builder.withBlobKey(key));
        this.description = description;
    }
    

    public String getUrl() {
        return url;
    }
    public BlobKey getKey() {
        return key;
    }
    public String getKeyString() {
        return key.getKeyString();
    }
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }
    
}</code></pre><p id="r-952557" data-claire-element-id="952557">J'y stocke la BlobKey représentant l'upload mais aussi directement l'URL (pour des raisons de performance), la description, la date d'upload, etc. J'ai généré quelques getters et setters pour l'utiliser facilement depuis l'extérieur de la classe.</p><p id="r-952558" data-claire-element-id="952558">J'ai choisi d'activer 2 index :</p><ul id="r-952563" data-claire-element-id="952563"><li id="r-952560" data-claire-element-id="952560"><p id="r-952559" data-claire-element-id="952559">La date, car mes icônes seront triées par date décroissante</p></li><li id="r-952562" data-claire-element-id="952562"><p id="r-952561" data-claire-element-id="952561">La BlobKey car je dois pouvoir retrouver facilement une icône précise et la supprimer</p></li></ul><h2 id="r-la-jsp" data-claire-element-id="952568">La JSP</h2><p id="r-952565" data-claire-element-id="952565">J'ai ensuite créé la JSP. Je suppose que j'y reçois une liste d'uploads et j'y génère aussi un formulaire d'upload :</p><pre id="r-952566" data-claire-element-id="952566"><code data-claire-semantic="jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot;%&gt;
&lt;%@ page import=&quot;java.util.List&quot;%&gt;
&lt;%@ page import=&quot;com.google.appengine.api.blobstore.*&quot;%&gt;
&lt;%@ page import=&quot;cloudupload.Upload&quot;%&gt;

&lt;%
    BlobstoreService blobstoreService = BlobstoreServiceFactory
            .getBlobstoreService();
%&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Cloud Uploader&lt;/title&gt;
&lt;meta charset=&quot;utf-8&quot; /&gt;
&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
&lt;link href=&quot;css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; media=&quot;screen&quot;&gt;
&lt;link href=&quot;css/style.css&quot; rel=&quot;stylesheet&quot; media=&quot;screen&quot;&gt;
&lt;/head&gt;
&lt;body&gt;

	&lt;div class=&quot;container-narrow&quot;&gt;

		&lt;div class=&quot;masthead&quot;&gt;
			&lt;ul class=&quot;nav nav-pills pull-right&quot;&gt;
				&lt;li class=&quot;active&quot;&gt;&lt;a href=&quot;/&quot;&gt;Accueil&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;#list&quot;&gt;Liste des icônes&lt;/a&gt;&lt;/li&gt;
				&lt;li&gt;&lt;a href=&quot;#upload&quot;&gt;Upload&lt;/a&gt;&lt;/li&gt;
			&lt;/ul&gt;
			&lt;h3 class=&quot;muted&quot;&gt;Cloud Uploader&lt;/h3&gt;
		&lt;/div&gt;

		&lt;hr /&gt;

		&lt;div class=&quot;jumbotron&quot;&gt;
			&lt;h1&gt;
				Vos icônes&lt;br /&gt;dans le Cloud
			&lt;/h1&gt;
			&lt;p class=&quot;lead&quot;&gt;En un clic, uploadez vos icônes dans le Cloud de
				Google et votez pour votre icône préférée !&lt;/p&gt;
			&lt;a class=&quot;btn btn-large btn-success&quot; href=&quot;#upload&quot;&gt;Uploader une
				icône&lt;/a&gt;
		&lt;/div&gt;

		&lt;hr /&gt;

		&lt;div class=&quot;row-fluid iconlist&quot; id=&quot;list&quot;&gt;

			&lt;h2&gt;Liste des icônes&lt;/h2&gt;

			&lt;p&gt;
				&lt;span class=&quot;label&quot;&gt;Note&lt;/span&gt; Seules les 9 dernières icônes
				uploadées sont présentées ici.
			&lt;/p&gt;

			&lt;%
			    List&lt;Upload&gt; uploads = (List&lt;Upload&gt;) request.getAttribute(&quot;uploads&quot;);
				if (uploads.size() == 0) {
				    %&gt;

			&lt;p&gt;
				&lt;em&gt;Aucune icône uploadée&lt;/em&gt;
			&lt;/p&gt;

			&lt;%
				}
				else {
				int i = 0;
			    for (Upload upload : uploads) {
			        if ((i % 3) == 0) {
			%&gt;
			&lt;div class=&quot;row&quot;&gt;
				&lt;% } %&gt;

				&lt;div class=&quot;span4&quot;&gt;
					&lt;figure&gt;
						&lt;img src=&quot;&lt;%=upload.getUrl()%&gt;&quot; alt=&quot;Image utilisateur&quot;
							class=&quot;img-polaroid&quot; style=&quot;max-width: 100px;&quot; /&gt;
						&lt;figcaption&gt;&lt;a class=&quot;close&quot; href=&quot;/?delete=&lt;%=upload.getKeyString() %&gt;&quot;&gt;&amp;times;&lt;/a&gt; &lt;%=upload.getDescription()%&gt;&lt;/figcaption&gt;
					&lt;/figure&gt;
				&lt;/div&gt;

				&lt;%
			if ((i % 3) == 2 || i == uploads.size() - 1) {
				%&gt;
			&lt;/div&gt;
			&lt;%			}
						i++;
					}
			    }%&gt;

		&lt;/div&gt;

		&lt;hr /&gt;

		&lt;div class=&quot;row-fluid iconlist&quot; id=&quot;upload&quot;&gt;

			&lt;h2&gt;Uploader une icône&lt;/h2&gt;

			&lt;form
				action=&quot;&lt;%= blobstoreService.createUploadUrl(&quot;/&quot;) %&gt;&quot;
				method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;
				&lt;p&gt;
					&lt;label&gt;Fichier à envoyer : &lt;input type=&quot;file&quot;
						name=&quot;uploadedFile&quot; /&gt;&lt;/label&gt;
				&lt;/p&gt;
				&lt;p&gt;
					&lt;label&gt;Description du fichier : &lt;input type=&quot;text&quot;
						name=&quot;description&quot; /&gt;&lt;/label&gt;
				&lt;/p&gt;
				&lt;div class=&quot;form-actions&quot;&gt;
					&lt;input type=&quot;submit&quot; class=&quot;btn&quot; /&gt;
				&lt;/div&gt;
			&lt;/form&gt;
		&lt;/div&gt;

	&lt;/div&gt;
	&lt;script src=&quot;http://code.jquery.com/jquery.js&quot;&gt;&lt;/script&gt;
	&lt;script src=&quot;js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-952567" data-claire-element-id="952567">Le code n'a rien de bien compliqué, si ce n'est mes petits calculs pour afficher correctement 3 icônes par ligne mais c'est juste pour le design. ;) <br/> Je récupère toutes les infos sur les icônes via les getters que j'ai générés dans la classe Upload.</p><h2 id="r-la-servlet-3" data-claire-element-id="952576">La servlet</h2><p id="r-952569" data-claire-element-id="952569">Il reste maintenant à écrire le coeur de l'application : la servlet !</p><pre id="r-952570" data-claire-element-id="952570"><code data-claire-semantic="java">package cloudupload;

import static com.googlecode.objectify.ObjectifyService.ofy;

import java.io.IOException;
import java.util.List;
import java.util.Map;

import javax.servlet.ServletException;
import javax.servlet.http.*;

import com.google.appengine.api.blobstore.*;
import com.googlecode.objectify.ObjectifyService;

@SuppressWarnings(&quot;serial&quot;)
public class CloudUploadServlet extends HttpServlet {
    static {
        ObjectifyService.register(Upload.class);
    }

    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException, ServletException {
        BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

        // Récupère les derniers uploads
        List&lt;Upload&gt; uploads = ofy().load().type(Upload.class).order(&quot;-date&quot;).limit(9).list();
        req.setAttribute(&quot;uploads&quot;, uploads);

        // Supprime un upload si on l'a demandé
        if (req.getParameter(&quot;delete&quot;) != null) {
            BlobKey deleteUploadData = new BlobKey(req.getParameter(&quot;delete&quot;));
            Upload deleteUploadInfos = ofy().load().type(Upload.class).filter(&quot;key&quot;, deleteUploadData).first().now();
            if (deleteUploadInfos != null) {
                blobstoreService.delete(deleteUploadData);
                ofy().delete().entity(deleteUploadInfos).now();
            }
        }

        this.getServletContext().getRequestDispatcher(&quot;/WEB-INF/formUpload.jsp&quot;).forward(req, resp);
    }

    public void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

        Map&lt;String, List&lt;BlobKey&gt;&gt; blobs = blobstoreService.getUploads(req);
        List&lt;BlobKey&gt; blobKeys = blobs.get(&quot;uploadedFile&quot;);

        Upload upload = new Upload(blobKeys.get(0), req.getParameter(&quot;description&quot;));

        ofy().save().entity(upload).now();

        resp.sendRedirect(&quot;/&quot;);

    }
}</code></pre><p id="r-952571" data-claire-element-id="952571">La servlet gère le listing des icônes, la suppression des icônes (avec la méthode GET) et l'envoi d'icônes (avec la méthode POST) au sein de la seule page de l'application.</p><p id="r-952572" data-claire-element-id="952572">Dans la méthode <code data-claire-semantic="java">doPost()</code> on récupère le fichier uploadé et on crée un objet de type Upload avec la BlobKey et la description. La classe se charge de générer le reste : l'URL, la date d'upload...</p><p id="r-952573" data-claire-element-id="952573">Dans la méthode <code data-claire-semantic="java">doGet()</code>, on récupère les 9 derniers uploads triés par date, d'où la nécessité d'un index sur le champ date. On vérifie si on a demandé une suppression (avec le paramètre delete) et, si c'est le cas, on récupère l'objet à supprimer avec une requête Objectify et on demande la suppression de l'image dans le Blobstore ainsi que de ses infos dans le Datastore.</p><aside id="r-952575" data-claire-element-id="952575" data-claire-semantic="information"><p id="r-952574" data-claire-element-id="952574">Lors du développement de l'application, j'ai constaté que si le champ description contient des accents, le blobstoreService s'emmêle les pinceaux et renvoie un charset ISO au lieu de UTF-8. C'est manifestement un bug du serveur local : le problème n'apparaît pas une fois l'application déployée en ligne.</p></aside><h2 id="r-tester-l-application-1" data-claire-element-id="952581">Tester l'application</h2><p id="r-952577" data-claire-element-id="952577">J'ai déployé mon application en ligne à l'adresse suivante si vous voulez la tester :</p><p id="r-952578" data-claire-element-id="952578"><a href="http://sdz-cloudupload.appspot.com/"><strong>http://sdz-cloudupload.appspot.com/</strong></a></p><p id="r-952579" data-claire-element-id="952579">Vous pouvez aussi télécharger l'archive complète de l'application (attention c'est un peu gros) :</p><p id="r-952580" data-claire-element-id="952580"><a href="http://www.sdz-files.com/cours/appengine/cloudupload.zip"><strong>http://www.sdz-files.com/cours/appengine/cloudupload.zip</strong></a> (18 Mo)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
<span class="arrow"></span>
<span class="next">Consignes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
<span class="next">Aller plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Allerplusloin"></a><h2>Aller plus loin</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
<span class="arrow"></span>
<span class="next">Correction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">
<span class="next">Google Accounts API : authentifiez vos visiteurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952583" data-claire-element-id="952583">L'application que nous venons de faire est minimale et ne propose pas beaucoup de fonctionnalités. Elle ne fait pas non plus beaucoup de tests, vous devriez en ajouter. Voici quelques idées en vrac de ce que vous pourriez faire pour l'améliorer et pour vous entraîner :</p><ul id="r-952598" data-claire-element-id="952598"><li id="r-952585" data-claire-element-id="952585"><p id="r-952584" data-claire-element-id="952584">Utilisez Google Cloud Storage au lieu du Blobstore pour stocker les fichiers</p></li><li id="r-952587" data-claire-element-id="952587"><p id="r-952586" data-claire-element-id="952586">Vérifiez que les fichiers uploadés sont bien des PNG avant de les autoriser. Normalement, le blobstoreService transmet à votre application des infos sur un fichier déjà uploadé. Il vous faudra demander sa suppression dans la méthode doPost() pour annuler l'upload.</p></li><li id="r-952589" data-claire-element-id="952589"><p id="r-952588" data-claire-element-id="952588">Redimensionnez l'image à une taille de 100x100. Le <a href="https://developers.google.com/appengine/docs/java/images/overview">service d'images</a> d'App Engine fournit des fonctionnalités pour manipuler l'image directement stockée sur le Blobstore !</p></li><li id="r-952591" data-claire-element-id="952591"><p id="r-952590" data-claire-element-id="952590">Proposez de renommer les images après upload</p></li><li id="r-952593" data-claire-element-id="952593"><p id="r-952592" data-claire-element-id="952592">Proposez de retourner les images après upload, là encore en utilisant le <a href="https://developers.google.com/appengine/docs/java/images/overview">service d'images</a></p></li><li id="r-952595" data-claire-element-id="952595"><p id="r-952594" data-claire-element-id="952594">Ajoutez une page qui liste toutes les icônes et pas seulement les dernières</p></li><li id="r-952597" data-claire-element-id="952597"><p id="r-952596" data-claire-element-id="952596">Proposez à vos visiteurs de voter pour l'icône qu'ils préfèrent et triez les icônes en fonction des votes !</p></li></ul><p id="r-952599" data-claire-element-id="952599">Voilà qui devrait vous donner de quoi vous occuper un moment. Amusez-vous bien ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
<span class="arrow"></span>
<span class="next">Correction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">
<span class="next">Google Accounts API : authentifiez vos visiteurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="GoogleAccountsAPIauthentifiezvosvisiteurs"></a><h2>Google Accounts API : authentifiez vos visiteurs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
<span class="arrow"></span>
<span class="next">Aller plus loin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
<span class="next">Authentifier les utilisateurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-952603" data-claire-element-id="952603">Nous avons passé suffisamment de temps sur des choses un peu compliquées : Cloud SQL, Datastore, Blobstore, Cloud Storage, Objectify... Je vous propose de souffler un peu et de découvrir par la même occasion d'autres services qui sont fournis par l'API de Google App Engine.</p><p id="r-952604" data-claire-element-id="952604">Parce que oui, les services d'App Engine ne se limitent pas au stockage ! On peut aussi télécharger des fichiers, manipuler des images, planifier des tâches, générer des APIs... et authentifier ses utilisateurs facilement. C'est justement ce dernier point que nous allons voir ici.</p><p id="r-952605" data-claire-element-id="952605">Google App Engine nous permet en un rien d'effort de créer une section membres sur notre site. Vos membres pourront se connecter avec leur compte Google ou même avec un OpenID, et vous n'avez presque rien à coder pour ça !</p>
</div><a name="Authentifierlesutilisateurs"></a><h2>Authentifier les utilisateurs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">
<span class="arrow"></span>
<span class="next">Google Accounts API : authentifiez vos visiteurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
<span class="next">Protéger des URLs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952606" data-claire-element-id="952606">Google App Engine nous permet d'authentifier nos utilisateurs par 3 méthodes différentes :</p><ul id="r-952613" data-claire-element-id="952613"><li id="r-952608" data-claire-element-id="952608"><p id="r-952607" data-claire-element-id="952607"><strong>Google Accounts</strong> : vous pouvez autoriser toute personne possédant un compte Google à se connecter à votre application. Les comptes Google sont généralement des adresses e-mail @gmail.com mais il peut parfois s'agir d'autres e-mails dans certains cas.</p></li><li id="r-952610" data-claire-element-id="952610"><p id="r-952609" data-claire-element-id="952609"><strong>Google Accounts d'un domaine</strong> : si vous réalisez une application pour les besoins d'un groupe ou d'une entreprise qui possède un compte Google Apps, c'est la méthode idéale. Seules les personnes appartenant à votre domaine (par ex. *@entreprise.com) pourront se connecter à votre application.</p></li><li id="r-952612" data-claire-element-id="952612"><p id="r-952611" data-claire-element-id="952611"><strong>OpenID</strong> : toute personne possédant un compte OpenID pourra se connecter à votre application. Il n'est pas nécessaire dans ce cas de posséder un compte Google mais il faut que la personne ait déjà créé un compte chez un fournisseur OpenID comme <a href="https://www.myopenid.com/">myOpenID</a>. Ce fournisseur joue le rôle de tiers de confiance pour authentifier les utilisateurs.</p></li></ul><p id="r-952614" data-claire-element-id="952614">Vous devez choisir l'une de ces méthodes au moment de la création de l'application en ligne sur <a href="https://appengine.google.com/">https://appengine.google.com</a>. Souvenez-vous, vous avez déjà vu ces options :</p><figure id="r-options-d-authentification-a-la-creation-de-l-application" data-claire-element-id="952617"><img id="r-952615" data-claire-element-id="952615" src="medias/uploads.siteduzero.com_files_421001_422000_421484.png" alt="Options d'authentification à la création de l'application"/><figcaption>Options d'authentification à la création de l'application</figcaption></figure><p id="r-952618" data-claire-element-id="952618">Dans la plupart des cas, vous laisserez l'option par défaut qui est la plus simple. Elle permet à toute personne possédant un compte Google de se connecter facilement à votre application.</p><p id="r-952619" data-claire-element-id="952619">Dans votre code, vous avez juste besoin de générer :</p><ul id="r-952624" data-claire-element-id="952624"><li id="r-952621" data-claire-element-id="952621"><p id="r-952620" data-claire-element-id="952620">Une URL pour se connecter</p></li><li id="r-952623" data-claire-element-id="952623"><p id="r-952622" data-claire-element-id="952622">Une URL pour se déconnecter</p></li></ul><p id="r-952625" data-claire-element-id="952625">Google se charge du reste. :)</p><p id="r-952626" data-claire-element-id="952626">On peut faire tout ça directement dans la JSP.</p><pre id="r-952627" data-claire-element-id="952627"><code data-claire-semantic="jsp">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;

&lt;%@ page import=&quot;com.google.appengine.api.users.*&quot; %&gt;

&lt;% UserService userService = UserServiceFactory.getUserService(); %&gt;

&lt;!DOCTYPE html&gt;

&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Application App Engine&lt;/title&gt;
		&lt;meta charset=&quot;utf-8&quot; /&gt;
	&lt;/head&gt;

	&lt;body&gt;
		&lt;h1&gt;Bienvenue dans mon application&lt;/h1&gt;
		
		&lt;% if (userService.getCurrentUser() == null) { %&gt;
			&lt;p&gt;&lt;a href=&quot;&lt;%= userService.createLoginURL(&quot;/&quot;) %&gt;&quot;&gt;Se connecter&lt;/a&gt;&lt;/p&gt;
		&lt;% }
		else { %&gt;
			&lt;p&gt;Bonjour &lt;%= userService.getCurrentUser().getNickname() %&gt;&lt;/p&gt;
			&lt;p&gt;&lt;a href=&quot;&lt;%= userService.createLogoutURL(&quot;/&quot;) %&gt;&quot;&gt;Se déconnecter&lt;/a&gt;&lt;/p&gt;
		&lt;% } %&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-952628" data-claire-element-id="952628">Ce code est très simple : on récupère le service UserService de Google et on vérifie si l'utilisateur est déjà connecté avec <code data-claire-semantic="java">userService.getCurrentUser()</code>. Cette méthode renvoie <code data-claire-semantic="java">null</code> si l'utilisateur n'est pas connecté, et elle renvoie un objet de type User s'il est connecté.</p><aside id="r-952630" data-claire-element-id="952630" data-claire-semantic="information"><p id="r-952629" data-claire-element-id="952629">Notez que le Datastore est capable de stocker des propriétés de type User directement (en plus des types standard int, Long, Date...). Vous pouvez donc vous en servir pour établir une liste de vos membres.</p></aside><p id="r-952631" data-claire-element-id="952631">Selon si l'utilisateur est connecté ou non, vous pouvez générer une URL de connexion ou de déconnexion avec <code data-claire-semantic="java">userService.createLoginURL(&quot;/&quot;)</code> et <code data-claire-semantic="java">userService.createLogoutURL(&quot;/&quot;)</code>. La valeur en paramètre indique où l'utilisateur doit ensuite être redirigé sur votre site (ici, &quot;/&quot; correspond à l'accueil).</p><p id="r-952632" data-claire-element-id="952632">On peut ensuite récupérer le pseudonyme de l'utilisateur avec <code data-claire-semantic="java">userService.getCurrentUser().getNickname()</code> (qui peut être aussi son e-mail) ou bien directement l'e-mail avec <code data-claire-semantic="java">userService.getCurrentUser().getEmail()</code>.</p><p id="r-952633" data-claire-element-id="952633">Si vous testez ce code en local, vous verrez que le serveur &quot;simule&quot; une mini-page de connexion qui ressemble à ceci :</p><figure id="r-la-fausse-page-de-connexion-en-local" data-claire-element-id="952636"><img id="r-952634" data-claire-element-id="952634" src="medias/uploads.siteduzero.com_files_421001_422000_421485.png" alt="La fausse page de connexion en local"/><figcaption>La fausse page de connexion en local</figcaption></figure><p id="r-952637" data-claire-element-id="952637">Vous pouvez rentrer n'importe quelle adresse, vous serez immédiatement connecté.</p><p id="r-952638" data-claire-element-id="952638">Bien sûr, une fois votre application en ligne, vos utilisateurs passeront par le vrai processus de connexion d'un compte Google :</p><figure id="r-la-vraie-page-de-connexion-une-fois-l-application-en-ligne" data-claire-element-id="952641"><img id="r-952639" data-claire-element-id="952639" src="medias/uploads.siteduzero.com_files_421001_422000_421486.png" alt="La vraie page de connexion une fois l'application en ligne"/><figcaption>La vraie page de connexion une fois l'application en ligne</figcaption></figure><p id="r-952642" data-claire-element-id="952642">Et voilà, vous venez de mettre en place un super système de connexion sur votre site en quelques minutes à peine ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">
<span class="arrow"></span>
<span class="next">Google Accounts API : authentifiez vos visiteurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
<span class="next">Protéger des URLs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ProtgerdesURLs"></a><h2>Protéger des URLs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
<span class="arrow"></span>
<span class="next">Authentifier les utilisateurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">
<span class="next">Mail API : envoyez et réceptionnez des e-mails</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952644" data-claire-element-id="952644">Google App Engine nous fournit un moyen basique et très simple de protéger rapidement tout un groupe d'URLs.</p><p id="r-952645" data-claire-element-id="952645">Il suffit d'éditer le fichier web.xml et d'y ajouter les lignes suivantes :</p><pre id="r-952646" data-claire-element-id="952646"><code data-claire-semantic="xml">&lt;security-constraint&gt;
	&lt;web-resource-collection&gt;
		&lt;url-pattern&gt;/admin/*&lt;/url-pattern&gt;
	&lt;/web-resource-collection&gt;
	&lt;auth-constraint&gt;
		&lt;role-name&gt;admin&lt;/role-name&gt;
	&lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</code></pre><p id="r-952647" data-claire-element-id="952647">Ici, je protège toutes les URLs commençant par /admin/ et je les réserve uniquement aux admins.</p><p id="r-952648" data-claire-element-id="952648">Les admins de l'application sont ceux qui ont un rôle de viewer, developer ou owner au sein de l'application. On les ajoute dans le menu Administration / Permissions du dashboard App Engine :</p><figure id="r-ajout-de-roles-dans-le-dashboard-d-app-engine" data-claire-element-id="952651"><img id="r-952649" data-claire-element-id="952649" src="medias/uploads.siteduzero.com_files_421001_422000_421487.png" alt="Ajout de rôles dans le dashboard d'App Engine"/><figcaption>Ajout de rôles dans le dashboard d'App Engine</figcaption></figure><p id="r-952652" data-claire-element-id="952652">En développement local, vous pouvez simuler une connexion administrateur en cliquant sur &quot;Sign in as administrator&quot; dans la fausse page de connexion qui est générée.</p><aside id="r-952654" data-claire-element-id="952654" data-claire-semantic="information"><p id="r-952653" data-claire-element-id="952653">Ce moyen d'authentification est vraiment très basique. Si vous avez besoin d'un moyen plus fin d'authentifier les utilisateurs (et si vous ne voulez pas avoir à rajouter à la main des admins dans le dashboard), vous devrez coder vous-mêmes un système d'authentification dans vos servlets.</p></aside><p id="r-952655" data-claire-element-id="952655">De la même façon, vous pouvez réserver des pages à tous vos membres connectés avec un compte Google. Il vous suffit d'indiquer le rôle &quot;*&quot; :</p><pre id="r-952656" data-claire-element-id="952656"><code data-claire-semantic="xml">&lt;security-constraint&gt;
	&lt;web-resource-collection&gt;
		&lt;url-pattern&gt;/membres/*&lt;/url-pattern&gt;
		&lt;url-pattern&gt;/upload/*&lt;/url-pattern&gt;
	&lt;/web-resource-collection&gt;
	&lt;auth-constraint&gt;
		&lt;role-name&gt;*&lt;/role-name&gt;
	&lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</code></pre><p id="r-952657" data-claire-element-id="952657">Ici, tout le contenu des dossiers /membres/ et /upload/ sera réservé aux membres connectés.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
<span class="arrow"></span>
<span class="next">Authentifier les utilisateurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">
<span class="next">Mail API : envoyez et réceptionnez des e-mails</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="MailAPIenvoyezetrceptionnezdese-mails"></a><h2>Mail API : envoyez et réceptionnez des e-mails</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
<span class="arrow"></span>
<span class="next">Protéger des URLs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
<span class="next">Envoyer des e-mails</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-952660" data-claire-element-id="952660">Parmi les services fournis par App Engine, l'un d'eux devrait éveiller votre intérêt : la Mail API. Ce service permet :</p><ul id="r-952665" data-claire-element-id="952665"><li id="r-952662" data-claire-element-id="952662"><p id="r-952661" data-claire-element-id="952661">D'envoyer des e-mails : votre application peut envoyer des e-mails en bénéficiant de l'architecture de serveurs mail de Google (la même que GMail !).</p></li><li id="r-952664" data-claire-element-id="952664"><p id="r-952663" data-claire-element-id="952663">De recevoir des e-mails : votre application peut recevoir et traiter automatiquement des e-mails qu'on lui envoie.</p></li></ul><p id="r-952666" data-claire-element-id="952666">Les deux fonctionnalités sont réellement puissantes et vous permettent d'imaginer de nouvelles interactions avec vos visiteurs. Nous allons découvrir comment nous en servir ! :)</p>
</div><a name="Envoyerdese-mails"></a><h2>Envoyer des e-mails</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">
<span class="arrow"></span>
<span class="next">Mail API : envoyez et réceptionnez des e-mails</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
<span class="next">Recevoir des e-mails</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952667" data-claire-element-id="952667">Sur App Engine, vous pouvez envoyer des e-mails à un ou plusieurs destinataires à la fois. En revanche, il y a une restriction sur l'expéditeur. Celui-ci <em>doit</em> être :</p><ul id="r-952672" data-claire-element-id="952672"><li id="r-952669" data-claire-element-id="952669"><p id="r-952668" data-claire-element-id="952668">Soit un <strong>administrateur de l'application</strong>, du type <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="28494c4541466845474649585844414b495c414746064b474506">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script> Ces e-mails sont définis dans le dashboard d'App Engine.</p></li><li id="r-952671" data-claire-element-id="952671"><p id="r-952670" data-claire-element-id="952670">Soit l'<strong>e-mail de l'utilisateur</strong> actuellement connecté à l'application, s'il utilise un compte Google.</p></li></ul><p id="r-952673" data-claire-element-id="952673">App Engine implémente les interfaces de JavaMail, ce qui fait que le code ne devrait pas vous surprendre si vous avez déjà envoyé des e-mails en Java. Seules particularités : l'expéditeur est restreint (comme je viens de vous l'expliquer) et il n'est pas nécessaire de définir de serveur SMTP étant donné que Google sait déjà qu'il doit utiliser les siens.</p><p id="r-952674" data-claire-element-id="952674">Je vous propose ce code que je recopie sans honte ni vergogne depuis la <a href="https://developers.google.com/appengine/docs/java/mail/overview">documentation</a> :</p><pre id="r-952675" data-claire-element-id="952675"><code data-claire-semantic="java">import java.io.IOException;
import java.util.Properties;
import javax.servlet.http.*;
import javax.mail.*;
import javax.mail.internet.*;

@SuppressWarnings(&quot;serial&quot;)
public class TestsServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {
        try {
            Properties props = new Properties();
            Session session = Session.getDefaultInstance(props, null);
            
            String message = &quot;Corps du message&quot;;
            
            Message msg = new MimeMessage(session);
            msg.setFrom(new InternetAddress(&quot;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="adccc9c0c4c3edc0c2c3ccddddc1c4ceccd9c4c2c383cec2c0">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&quot;, &quot;Administrateur&quot;));
            msg.addRecipient(Message.RecipientType.TO,
                             new InternetAddress(&quot;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="d4a6bbb6b1a6a094bda7a4fab7bbb9">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&quot;, &quot;Robert&quot;));
            msg.setSubject(&quot;Bienvenue sur mon application !&quot;);
            msg.setText(message);
            Transport.send(msg);
        } catch (MessagingException e) {
            e.printStackTrace();
        }
    }
}</code></pre><p id="r-952676" data-claire-element-id="952676">Vous pouvez vous baser dessus pour définir le corps du message, l'expéditeur, le destinataire et le sujet de l'e-mail.</p><p id="r-952677" data-claire-element-id="952677">Si vous testez le code en local, aucun e-mail ne sera envoyé. Les informations sur l'e-mail seront en revanche loggées dans la console :</p><pre id="r-952678" data-claire-element-id="952678"><code data-claire-semantic="console">17 mai 2013 15:45:35 com.google.appengine.api.mail.dev.LocalMailService log
INFO: MailService.send
17 mai 2013 15:45:35 com.google.appengine.api.mail.dev.LocalMailService log
INFO:   From: Administrateur &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="d9b8bdb4b0b799b4b6b7b8a9a9b5b0bab8adb0b6b7f7bab6b4">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;
17 mai 2013 15:45:35 com.google.appengine.api.mail.dev.LocalMailService log
INFO:   To: Robert &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="bfcdd0dddacdcbffd6cccf91dcd0d2">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;
17 mai 2013 15:45:35 com.google.appengine.api.mail.dev.LocalMailService log
INFO:   Reply-to: Administrateur &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="3b5a5f5652557b5654555a4b4b5752585a4f52545515585456">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;
17 mai 2013 15:45:35 com.google.appengine.api.mail.dev.LocalMailService log
INFO:   Subject: Bienvenue sur mon application !
17 mai 2013 15:45:35 com.google.appengine.api.mail.dev.LocalMailService log
INFO:   Body:
17 mai 2013 15:45:35 com.google.appengine.api.mail.dev.LocalMailService log
INFO:     Content-type: text/plain
17 mai 2013 15:45:35 com.google.appengine.api.mail.dev.LocalMailService log
INFO:     Data length: 16</code></pre><p id="r-952679" data-claire-element-id="952679">Evidemment une fois votre application en ligne l'e-mail sera bel et bien envoyé par les serveurs e-mail de Google !</p><aside id="r-952681" data-claire-element-id="952681" data-claire-semantic="information"><p id="r-952680" data-claire-element-id="952680">En cas d'échec de l'envoi de l'e-mail (par exemple si le destinataire n'existe pas), l'expéditeur recevra une erreur par e-mail. En revanche votre application ne recevra pas d'information sur l'échec de l'envoi.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">
<span class="arrow"></span>
<span class="next">Mail API : envoyez et réceptionnez des e-mails</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
<span class="next">Recevoir des e-mails</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Recevoirdese-mails"></a><h2>Recevoir des e-mails</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
<span class="arrow"></span>
<span class="next">Envoyer des e-mails</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">
<span class="next">Image API : transformez des images</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952683" data-claire-element-id="952683">Les applications App Engine peuvent aussi recevoir des e-mails ! C'est un moyen très pratique d'établir une interface avec les utilisateurs (ce qui devrait vous intéresser si vous développez un outil de support client par exemple).</p><p id="r-952684" data-claire-element-id="952684">Le principe est le suivant :</p><ul id="r-952689" data-claire-element-id="952689"><li id="r-952686" data-claire-element-id="952686"><p id="r-952685" data-claire-element-id="952685">L'utilisateur envoie un e-mail à une adresse du type <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="49282d3b2c3a3a2c09283939202d672839393a39263d24282025672a2624">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></p></li><li id="r-952688" data-claire-element-id="952688"><p id="r-952687" data-claire-element-id="952687">App Engine reçoit l'e-mail et retransmet à votre application son contenu sous la forme d'un paramètre POST</p></li></ul><figure id="r-app-engine-recupere-les-e-mails-et-les-reposte-a-votre-application" data-claire-element-id="952692"><img id="r-952690" data-claire-element-id="952690" src="medias/uploads.siteduzero.com_files_421001_422000_421490.png" alt="App Engine récupère les e-mails et les reposte à votre application"/><figcaption>App Engine récupère les e-mails et les reposte à votre application</figcaption></figure><p id="r-952693" data-claire-element-id="952693">Pour activer la réception d'e-mails, ajoutez ces lignes dans votre fichier appengine-web.xml :</p><pre id="r-952694" data-claire-element-id="952694"><code data-claire-semantic="xml">&lt;inbound-services&gt;
	&lt;service&gt;mail&lt;/service&gt;
&lt;/inbound-services&gt;</code></pre><p id="r-952695" data-claire-element-id="952695">A partir de maintenant, tout le monde peut vous envoyer des e-mails à n'importe quelle adresse de la forme <code>*@appid.appspotmail.com</code> (où appid est l'ID de votre application sur App Engine). Par exemple, si un visiteur envoie un e-mail à <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="ea8b838e8faa8b9a9a838ec48b9a9a999a859e878b8386c4898587">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>, App Engine provoquera un appel POST vers l'URL /_ah/mail/aide. A vous ensuite de créer la servlet correspondante.</p><aside id="r-952697" data-claire-element-id="952697" data-claire-semantic="information"><p id="r-952696" data-claire-element-id="952696">Notez qu'il n'est malheureusement pas possible de changer la forme de l'adresse e-mail de réception (en appspotmail.com), même si vous possédez votre propre nom de domaine. :(</p></aside><p id="r-952698" data-claire-element-id="952698">Pour faire simple et gérer tous les e-mails au même endroit, je vous proposer de mapper les appels à /_ah/mail/* vers une servlet. Ajoutez dans le fichier web.xml le code suivant par exemple :</p><pre id="r-952699" data-claire-element-id="952699"><code data-claire-semantic="xml">&lt;servlet&gt;
	&lt;servlet-name&gt;mailhandler&lt;/servlet-name&gt;
	&lt;servlet-class&gt;MailHandlerServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;mailhandler&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/_ah/mail/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
&lt;security-constraint&gt;
	&lt;web-resource-collection&gt;
		&lt;url-pattern&gt;/_ah/mail/*&lt;/url-pattern&gt;
	&lt;/web-resource-collection&gt;
	&lt;auth-constraint&gt;
		&lt;role-name&gt;admin&lt;/role-name&gt;
	&lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</code></pre><aside id="r-952701" data-claire-element-id="952701" data-claire-semantic="information"><p id="r-952700" data-claire-element-id="952700">Si un visiteur envoie un e-mail à <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="54353d3031143524243d307a35242427243b2039353d387a373b39">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>, App Engine provoquera un appel vers /_ah/mail/aide. Vous pouvez donc créer plusieurs servlets qui réceptionnent différentes adresses e-mails.<br/> Dans mes exemples, je fais simple et je réceptionne tous les e-mails au même endroit.</p></aside><p id="r-952702" data-claire-element-id="952702">Il ne vous reste plus qu'à créer la servlet MailHandlerServlet et d'y implémenter une méthode <code data-claire-semantic="java">doPost()</code> pour réceptionner le contenu de l'e-mail !</p><pre id="r-952703" data-claire-element-id="952703"><code data-claire-semantic="java">public class MailHandlerServlet extends HttpServlet {
    public void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {

        try {
            // On extrait le message de la requête POST
            Properties props = new Properties(); 
            Session session = Session.getDefaultInstance(props, null); 
            MimeMessage message = new MimeMessage(session, req.getInputStream());
            
            // On peut ensuite récupérer toutes les informations que l'on veut 
            message.getSubject();
            message.getFrom();
            message.getContent();
            
        } catch (MessagingException e) {
            e.printStackTrace();
        }
    }
}</code></pre><p id="r-952704" data-claire-element-id="952704">Vous pouvez utiliser toutes les méthodes de la classe MimeMessage pour récupérer le contenu du message et effectuer tous les traitements que vous voulez ! :)</p><p id="r-952705" data-claire-element-id="952705">Si vous voulez tester localement comment votre application se comporte quand elle reçoit un e-mail, rendez-vous dans le backend local, section &quot;Inbound Mail&quot; (typiquement <a href="http://localhost:8888/_ah/admin/inboundmail">http://localhost:8888/_ah/admin/inboundmail</a>). Vous pourrez simuler l'envoi d'un e-mail vers votre application.</p><figure id="r-vous-pouvez-simuler-la-reception-d-un-e-mail-dans-le-backend-en-local" data-claire-element-id="952708"><img id="r-952706" data-claire-element-id="952706" src="medias/uploads.siteduzero.com_files_421001_422000_421492.png" alt="Vous pouvez simuler la réception d'un e-mail dans le backend en local"/><figcaption>Vous pouvez simuler la réception d'un e-mail dans le backend en local</figcaption></figure><p id="r-952709" data-claire-element-id="952709">Bref, vous avez tout ce qu'il faut pour développer de belles fonctionnalités pour votre application ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
<span class="arrow"></span>
<span class="next">Envoyer des e-mails</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">
<span class="next">Image API : transformez des images</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ImageAPItransformezdesimages"></a><h2>Image API : transformez des images</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
<span class="arrow"></span>
<span class="next">Recevoir des e-mails</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
<span class="next">Transformer des images depuis le Blobstore</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-952712" data-claire-element-id="952712">Google propose les services de ses serveurs pour effectuer des manipulations simples sur des images. Ces manipulations ne nécessitent pas d'utiliser la puissance de calcul de vos frontaux App Engine : elles sont effectuées sur des serveurs spéciaux de traitement des images.</p><p id="r-952713" data-claire-element-id="952713">Cette Image API se révèle très pratique car elle est capable de travailler directement sur des images stockées dans le Blobstore (mais pas dans Google Cloud Storage malheureusement). Nous pouvons donc manipuler des images après leur envoi dans le Blobstore, voire même générer dynamiquement des versions transformées des images directement en changeant l'URL !</p>
</div><a name="TransformerdesimagesdepuisleBlobstore"></a><h2>Transformer des images depuis le Blobstore</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">
<span class="arrow"></span>
<span class="next">Image API : transformez des images</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
<span class="next">Transformer des images depuis leur URL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-traitement-d-images-par-le-service-d-images" data-claire-element-id="952736">Traitement d'images par le service d'images</h2><p id="r-952714" data-claire-element-id="952714">Pour transformer des images, on fait appel à un ImageService. On le récupère grâce à la factory qui nous est fournie par l'API d'App Engine.</p><p id="r-952715" data-claire-element-id="952715">J'aime bien travailler à partir de codes d'exemple, donc commençons par un exemple. Voici un code qui récupère une image depuis le Blobstore (grâce à sa BlobKey) et qui la retourne horizontalement :</p><pre id="r-952716" data-claire-element-id="952716"><code data-claire-semantic="java">// Récupère le service d'images
ImagesService imagesService = ImagesServiceFactory.getImagesService();

// Récupère une image dans le Blobstore, représentée par sa blobKey
Image oldImage = ImagesServiceFactory.makeImageFromBlob(blobKey);

// Effectue une transformation (ici un retournement horizontal)
Transform transform = ImagesServiceFactory.makeHorizontalFlip();
Image newImage = imagesService.applyTransform(transform, oldImage);

// Récupère le contenu de l'image transformée
byte[] newImageData = newImage.getImageData();

// Vous pouvez ensuite sauvegarder l'image où bon vous semble !</code></pre><p id="r-952717" data-claire-element-id="952717">Il faut savoir que l'API est capable de travailler avec les formats d'images suivants :</p><ul id="r-952732" data-claire-element-id="952732"><li id="r-952719" data-claire-element-id="952719"><p id="r-952718" data-claire-element-id="952718">JPEG</p></li><li id="r-952721" data-claire-element-id="952721"><p id="r-952720" data-claire-element-id="952720">PNG</p></li><li id="r-952723" data-claire-element-id="952723"><p id="r-952722" data-claire-element-id="952722">WEBP</p></li><li id="r-952725" data-claire-element-id="952725"><p id="r-952724" data-claire-element-id="952724">GIF</p></li><li id="r-952727" data-claire-element-id="952727"><p id="r-952726" data-claire-element-id="952726">BMP</p></li><li id="r-952729" data-claire-element-id="952729"><p id="r-952728" data-claire-element-id="952728">TIFF</p></li><li id="r-952731" data-claire-element-id="952731"><p id="r-952730" data-claire-element-id="952730">ICO</p></li></ul><p id="r-952733" data-claire-element-id="952733">Elle peut enregistrer en revanche uniquement en JPEG, WEBP et PNG.</p><aside id="r-952735" data-claire-element-id="952735" data-claire-semantic="information"><p id="r-952734" data-claire-element-id="952734">Le format WEBP a été inventé par Google. C'est un format public qui se présente comme le futur du JPEG, car il est capable de mieux compresser les images.</p></aside><h2 id="r-les-transformations-8" data-claire-element-id="952775">Les transformations</h2><p id="r-952737" data-claire-element-id="952737">L'Image API propose un certain nombre de transformations basiques.</p><h3 id="r-redimensionnement-7" data-claire-element-id="952743">Redimensionnement</h3><p id="r-952738" data-claire-element-id="952738">Vous pouvez redimensionner une image avec la transformation <code data-claire-semantic="java">makeResize()</code> :</p><pre id="r-952739" data-claire-element-id="952739"><code data-claire-semantic="java">Transform resize = ImagesServiceFactory.makeResize(200, 300);</code></pre><figure id="r-redimensionnement-d-une-image" data-claire-element-id="952742"><img id="r-952740" data-claire-element-id="952740" src="medias/uploads.siteduzero.com_files_421001_422000_421493.png" alt="Redimensionnement d'une image"/><figcaption>Redimensionnement d'une image</figcaption></figure><h3 id="r-rotation-17" data-claire-element-id="952749">Rotation</h3><p id="r-952744" data-claire-element-id="952744">Pour faire une rotation de l'image, appelez <code data-claire-semantic="java">makeRotate()</code> et indiquez une valeur en degrés :</p><pre id="r-952745" data-claire-element-id="952745"><code data-claire-semantic="java">Transform resize = ImagesServiceFactory.makeRotate(90);</code></pre><figure id="r-rotation-d-une-image-1" data-claire-element-id="952748"><img id="r-952746" data-claire-element-id="952746" src="medias/uploads.siteduzero.com_files_421001_422000_421494.png" alt="Rotation d'une image"/><figcaption>Rotation d'une image</figcaption></figure><h3 id="r-retournement-horizontal" data-claire-element-id="952755">Retournement horizontal</h3><p id="r-952750" data-claire-element-id="952750">Vous pouvez retourner horizontalement une image avec <code data-claire-semantic="java">makeHorizontalFlip()</code> :</p><pre id="r-952751" data-claire-element-id="952751"><code data-claire-semantic="java">Transform resize = ImagesServiceFactory.makeHorizontalFlip();</code></pre><figure id="r-retournement-horizontal-d-une-image" data-claire-element-id="952754"><img id="r-952752" data-claire-element-id="952752" src="medias/uploads.siteduzero.com_files_421001_422000_421495.png" alt="Retournement horizontal d'une image"/><figcaption>Retournement horizontal d'une image</figcaption></figure><h3 id="r-retournement-vertical" data-claire-element-id="952761">Retournement vertical</h3><p id="r-952756" data-claire-element-id="952756">Vous pouvez retourner verticalement une image avec <code data-claire-semantic="java">makeVerticalFlip()</code> :</p><pre id="r-952757" data-claire-element-id="952757"><code data-claire-semantic="java">Transform resize = ImagesServiceFactory.makeVerticalFlip();</code></pre><figure id="r-retournement-vertical-d-une-image" data-claire-element-id="952760"><img id="r-952758" data-claire-element-id="952758" src="medias/uploads.siteduzero.com_files_421001_422000_421496.png" alt="Retournement vertical d'une image"/><figcaption>Retournement vertical d'une image</figcaption></figure><h3 id="r-decoupage-3" data-claire-element-id="952767">Découpage</h3><p id="r-952762" data-claire-element-id="952762">Vous pouvez effectuer un découpage (crop) d'une image avec <code data-claire-semantic="java">makeCrop()</code>. Indiquez les coordonnées (X,Y) du point en haut à gauche suivies des coordonnées (X,Y) du point en bas à droite de la zone que vous voulez récupérer dans l'image :</p><pre id="r-952763" data-claire-element-id="952763"><code data-claire-semantic="java">Transform resize = ImagesServiceFactory.makeCrop(20, 20, 60, 60);</code></pre><figure id="r-decoupage-d-une-image-1" data-claire-element-id="952766"><img id="r-952764" data-claire-element-id="952764" src="medias/uploads.siteduzero.com_files_421001_422000_421497.png" alt="Découpage d'une image"/><figcaption>Découpage d'une image</figcaption></figure><h3 id="r-amelioration-automatique" data-claire-element-id="952774">Amélioration automatique</h3><p id="r-952768" data-claire-element-id="952768">Google propose une fonctionnalité qui améliore automatiquement le contraste et les couleurs d'une image, sous le nom &quot;I'm feeling lucky&quot; (on aura reconnu le clin d'oeil !). Le nom de cette fonction magique est <code data-claire-semantic="java">makeImFeelingLucky()</code> :</p><pre id="r-952769" data-claire-element-id="952769"><code data-claire-semantic="java">Transform resize = ImagesServiceFactory.makeImFeelingLucky();</code></pre><figure id="r-amelioration-d-une-image-i-m-feeling-lucky" data-claire-element-id="952772"><img id="r-952770" data-claire-element-id="952770" src="medias/uploads.siteduzero.com_files_421001_422000_421498.png" alt="Amélioration d'une image I'm feeling lucky"/><figcaption>Amélioration d'une image I'm feeling lucky</figcaption></figure><p id="r-952773" data-claire-element-id="952773">Bon cette transformation est en général plus pertinente sur une photo que sur une image PNG je vous l'accorde. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">
<span class="arrow"></span>
<span class="next">Image API : transformez des images</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
<span class="next">Transformer des images depuis leur URL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TransformerdesimagesdepuisleurURL"></a><h2>Transformer des images depuis leur URL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
<span class="arrow"></span>
<span class="next">Transformer des images depuis le Blobstore</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">
<span class="next">Crons : exécutez des tâches à intervalles réguliers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952777" data-claire-element-id="952777">Si vous ne voulez pas avoir à enregistrer une nouvelle image, Google propose un service très pratique qui permet de transformer des images <em>dynamiquement</em> simplement en changeant la forme de l'URL !</p><p id="r-952778" data-claire-element-id="952778">Vous vous souvenez de la méthode <code data-claire-semantic="java">getServingUrl()</code> ?</p><pre id="r-952779" data-claire-element-id="952779"><code data-claire-semantic="java">String urlImage = imagesService.getServingUrl(ServingUrlOptions.Builder.withBlobKey(blobKey));</code></pre><p id="r-952780" data-claire-element-id="952780">Cette méthode renvoie une URL qui fournit directement l'image de façon efficace (c'est-à-dire sans avoir à passer par une servlet).</p><p id="r-952781" data-claire-element-id="952781">On peut ajouter un suffixe à l'URL pour effectuer des transformations très facilement ! Imaginons par exemple que votre URL ressemble à ceci :</p><pre id="r-952782" data-claire-element-id="952782"><code>http://appid.appspot.com/identifiantimage</code></pre><p id="r-952783" data-claire-element-id="952783">Vous pouvez ajouter 2 suffixes :</p><ul id="r-952788" data-claire-element-id="952788"><li id="r-952785" data-claire-element-id="952785"><p id="r-952784" data-claire-element-id="952784"><code>=sXX</code> : où XX est la nouvelle taille de l'image (au niveau de son côté le plus large). Cela vous permet d'effectuer un redimensionnement à la volée !</p></li><li id="r-952787" data-claire-element-id="952787"><p id="r-952786" data-claire-element-id="952786"><code>=sXX-c</code> : où XX indique où l'image doit être coupée.</p></li></ul><p id="r-952789" data-claire-element-id="952789">Par exemple :</p><pre id="r-952790" data-claire-element-id="952790"><code>http://appid.appspot.com/identifiantimage=s100</code></pre><p id="r-952791" data-claire-element-id="952791">... vous retournera automatiquement une image redimensionnée à 100px de large et de haut maximum. :)</p><p id="r-952792" data-claire-element-id="952792">Pour obtenir l'URL de la &quot;version 100px&quot; de l'image, il nous suffit donc d'adapter notre code comme ceci :</p><pre id="r-952793" data-claire-element-id="952793"><code data-claire-semantic="java">String urlMiniImage = imagesService.getServingUrl(ServingUrlOptions.Builder.withBlobKey(blobKey) + &quot;=s100&quot;);</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
<span class="arrow"></span>
<span class="next">Transformer des images depuis le Blobstore</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">
<span class="next">Crons : exécutez des tâches à intervalles réguliers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Cronsexcutezdestchesintervallesrguliers"></a><h2>Crons : exécutez des tâches à intervalles réguliers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
<span class="arrow"></span>
<span class="next">Transformer des images depuis leur URL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
<span class="next">Configurer des tâches cron</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-952796" data-claire-element-id="952796">Vous connaissez les crons ? Sous Linux, c'est le système qui permet d'exécuter des tâches à intervalles réguliers sur une machine. Cela peut être très utile dans tout un tas d'occasions : si vous voulez régénérer les caches de votre application à intervalles réguliers, envoyer un e-mail quotidien à vos membres qui fêtent leur anniversaire, etc.</p><p id="r-952797" data-claire-element-id="952797">Avec App Engine, on n'a pas accès au serveur pour y configurer des crons comme on le ferait d'habitude, mais on dispose d'une autre technique : il suffit d'éditer un fichier XML de crons et Google planifiera automatiquement l'exécution de vos tâches !</p><p id="r-952798" data-claire-element-id="952798">Le système de crons est d'ailleurs très complet et vous permet de planifier des tâches de façon beaucoup plus simple que sous Linux je trouve. :)</p>
</div><a name="Configurerdestchescron"></a><h2>Configurer des tâches cron</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">
<span class="arrow"></span>
<span class="next">Crons : exécutez des tâches à intervalles réguliers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
<span class="next">Protéger les URLs des crons</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952799" data-claire-element-id="952799">Google peut appeler automatiquement certaines URLs de votre application à intervalles réguliers. Il exécute de simples appels GET sur les URLs que vous spécifiez.</p><p id="r-952800" data-claire-element-id="952800">Vous devez créer un fichier cron.xml dans le dossier WEB-INF de votre application. Ce fichier peut avoir la forme suivante :</p><pre id="r-952801" data-claire-element-id="952801"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;cronentries&gt;
	&lt;cron&gt;
		&lt;url&gt;/recache&lt;/url&gt;
		&lt;description&gt;Met à jour le cache régulièrement&lt;/description&gt;
		&lt;schedule&gt;every 2 minutes&lt;/schedule&gt;
	&lt;/cron&gt;
	&lt;cron&gt;
		&lt;url&gt;/rapport&lt;/url&gt;
		&lt;description&gt;Envoie un rapport hebdomadaire&lt;/description&gt;
		&lt;schedule&gt;every monday 09:00&lt;/schedule&gt;
		&lt;timezone&gt;Europe/Paris&lt;/timezone&gt;
	&lt;/cron&gt;
&lt;/cronentries&gt;</code></pre><p id="r-952802" data-claire-element-id="952802">Dans cet exemple, le fichier contient 2 tâches cron. Pour chaque tâche cron, vous devez indiquer :</p><ul id="r-952811" data-claire-element-id="952811"><li id="r-952804" data-claire-element-id="952804"><p id="r-952803" data-claire-element-id="952803"><strong>Une URL</strong> : c'est l'URL qui sera appelée par le planificateur cron de Google. Cette URL de votre application sera appelée avec la méthode GET.</p></li><li id="r-952806" data-claire-element-id="952806"><p id="r-952805" data-claire-element-id="952805"><strong>Une description</strong> : pour vous souvenir de ce que fait la tâche cron.</p></li><li id="r-952808" data-claire-element-id="952808"><p id="r-952807" data-claire-element-id="952807"><strong>Un horaire ou une récurrence</strong> : c'est le rôle de la balise <code data-claire-semantic="xml">&lt;schedule&gt;</code>. Elle accepte une syntaxe assez riche qui vous permet de faire un peu tout ce que vous voulez (pour peu que vous l'écriviez en anglais :p ).</p></li><li id="r-952810" data-claire-element-id="952810"><p id="r-952809" data-claire-element-id="952809"><strong>Une zone horaire</strong> : si, comme moi, vous n'habitez pas à côté du datacenter de Google, il est préférable d'indiquer une zone horaire dans le <a href="http://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones">format standard</a>. Sinon vous risquez de subir un sérieux décalage horaire !</p></li></ul><p id="r-952812" data-claire-element-id="952812">Le plus important est de bien définir la balise <code data-claire-semantic="xml">&lt;schedule&gt;</code>. Elle accepte une syntaxe riche qui est plutôt bien décrite dans la <a href="https://developers.google.com/appengine/docs/java/config/cron#The_Schedule_Format">documentation</a>.</p><p id="r-952813" data-claire-element-id="952813">Voici quelques exemples pour vous inspirer :</p><pre id="r-952814" data-claire-element-id="952814"><code>// Toutes les 12 heures
every 12 hours

// Toutes les 10 minutes
every 10 minutes

// Toutes les 5 minutes entre 10h et 14h
every 5 minutes from 10:00 to 14:00

// Les seconds et troisièmes mardis, mercredis et jeudis du mois de mars à 17h
2nd,third mon,wed,thu of march 17:00

// Chaque lundi à 9h
every monday 09:00

// Les premiers lundis de septembre, octobre et novembre à 17h
1st monday of sep,oct,nov 17:00

// Chaque jour à minuit
every day 00:00</code></pre><p id="r-952815" data-claire-element-id="952815">Voilà qui devrait vous permettre de créer toutes les récurrences dont vous rêvez et même plus ! ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">
<span class="arrow"></span>
<span class="next">Crons : exécutez des tâches à intervalles réguliers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
<span class="next">Protéger les URLs des crons</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ProtgerlesURLsdescrons"></a><h2>Protéger les URLs des crons</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
<span class="arrow"></span>
<span class="next">Configurer des tâches cron</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">
<span class="next">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952817" data-claire-element-id="952817">En général, vous ne voulez pas que vos visiteurs puissent se rendre aux URLs normalement exécutées par des crons... sinon ils risqueraient de lancer des tâches potentiellement lourdes n'importe quand !</p><p id="r-952818" data-claire-element-id="952818">Heureusement, les tâches cron s'exécutent en mode administrateur. Cela signifie que vous pouvez protéger vos crons en les réservant uniquement aux administrateurs. Pour cela, il suffit d'éditer le fichier web.xml et d'y ajouter les règles de sécurité suivantes :</p><pre id="r-952819" data-claire-element-id="952819"><code data-claire-semantic="xml">&lt;security-constraint&gt;
	&lt;web-resource-collection&gt;
		&lt;url-pattern&gt;/cron/*&lt;/url-pattern&gt;
	&lt;/web-resource-collection&gt;
	&lt;auth-constraint&gt;
		&lt;role-name&gt;admin&lt;/role-name&gt;
	&lt;/auth-constraint&gt;
&lt;/security-constraint&gt;</code></pre><p id="r-952820" data-claire-element-id="952820">Ainsi, toutes vos tâches cron seront protégées des utilisateurs, pour peu que vous les placiez dans le cas présent dans un dossier /cron/.</p><aside id="r-952822" data-claire-element-id="952822" data-claire-semantic="error"><p id="r-952821" data-claire-element-id="952821">Attention : si vous protégez les URLs des crons en les réservant à tous les utilisateurs connectés (avec le rôle *) au lieu de cibler les administrateurs, le planificateur cron ne pourra <em>pas</em> y accéder !</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
<span class="arrow"></span>
<span class="next">Configurer des tâches cron</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">
<span class="next">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CloudEndpointscrezdesAPIsetgnrezdesappsAndroidampiPhone"></a><h2>Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
<span class="arrow"></span>
<span class="next">Protéger les URLs des crons</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
<span class="next">Premiers pas avec Cloud Endpoints</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-952825" data-claire-element-id="952825">Le but de Cloud Endpoints est de relier l'ensemble de vos applications (web, mobile...) en générant une API. C'est une fonctionnalité récente de Google App Engine déjà promise à un bel avenir. Google résume de façon très synthétique le principe dans un seul schéma :</p><figure id="r-cloud-endpoints-connecte-votre-application-backend-avec-vos-applications-frontend" data-claire-element-id="952828"><img id="r-952826" data-claire-element-id="952826" src="medias/uploads.siteduzero.com_files_421001_422000_421521.png" alt="Cloud Endpoints connecte votre application backend avec vos applications frontend"/><figcaption>Cloud Endpoints connecte votre application backend avec vos applications frontend</figcaption></figure><ul id="r-952833" data-claire-element-id="952833"><li id="r-952830" data-claire-element-id="952830"><p id="r-952829" data-claire-element-id="952829">Sur la droite, vous avez le <em>backend</em>. C'est votre application qui tourne sur App Engine. C'est elle qui effectue tous les calculs et tout le stockage (sur le Datastore par exemple).</p></li><li id="r-952832" data-claire-element-id="952832"><p id="r-952831" data-claire-element-id="952831">Sur la gauche, vous avez vos <em>frontends</em>. Ce sont les interfaces de votre application dont se servent vos utilisateurs. Ces dernières années, les interfaces se sont multipliées : Web (navigateur), application Android, application iOS...</p></li></ul><p id="r-952834" data-claire-element-id="952834">Vous pourriez réécrire autant de fois que nécessaire votre application : une fois en version web, une fois en version Android, une fois en version iOS (et demain en version Blackberry, Windows Phone... ?). Mais ce serait long, fastidieux et lourd à maintenir.</p><p id="r-952835" data-claire-element-id="952835">La bonne pratique de programmation est de séparer son application en deux parties logiques : le backend (en gros le modèle et le contrôleur) et le frontend (en gros la vue). Comme les interfaces changent en fonction des appareils (sur le Web on a du HTML5, sur Android des widgets Java, sur iOS des composants Objective-C...), on est obligé de multiplier les frontends. En revanche, on peut ne créer qu'un seul backend qui fait les calculs et le stockage... sur App Engine par exemple. ;)</p><p id="r-952836" data-claire-element-id="952836">En résumé, dans ce modèle les calculs et le stockage sont sur App Engine, tandis que les interfaces sont dans des applis mobiles et des sites web séparés.</p><p id="r-952837" data-claire-element-id="952837">L'ensemble des appareils communique avec une API. Celle-ci est le plus souvent une API <a href="https://fr.wikipedia.org/wiki/Representational_State_Transfer">REST</a> qui échange des informations dans un format JSON.</p><aside id="r-952839" data-claire-element-id="952839" data-claire-semantic="information"><p id="r-952838" data-claire-element-id="952838">Sans rentrer dans le détail, le principe de REST est de créer des interfaces respectant le fonctionnement de HTTP, avec les méthodes GET, POST, PUT, DELETE... L'API répond sur des URLs qui ont une forme particulière. Par exemple : une requête GET sur /membre/mateo21 renverra toutes les informations sur le membre mateo21. Une requête HTTP DELETE sur /membre/mateo21 supprimera le membre mateo21, etc.</p></aside><p id="r-952840" data-claire-element-id="952840">Cloud Endpoints se charge de construire et de gérer l'API de votre application pour vous. Cela vous évite d'avoir à écrire du code parfois complexe pour faire fonctionner l'API. En plus, Cloud Endpoints se charge de gérer la sécurité et l'authentification OAuth 2.0 de votre API (et vu qu'on a dû le faire à la main pour le Site du Zéro récemment je peux vous dire que c'est pas de la tarte :p ).</p><p id="r-952841" data-claire-element-id="952841">Enfin, et c'est là que ça devient particulièrement intéressant : Cloud Endpoints peut générer des applications Web (JavaScript), Android (Java) et iPhone (Objective-C) à partir de votre API ! Pour être exact, il crée un code <em>bootstrap</em>, c'est-à-dire un code prêt à être rempli, dans lequel vous n'avez plus qu'à écrire la vue de votre application Android par exemple. Un sacré gain de temps !</p>
</div><a name="PremierspasavecCloudEndpoints"></a><h2>Premiers pas avec Cloud Endpoints</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">
<span class="arrow"></span>
<span class="next">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
<span class="next">Les annotations Cloud Endpoints</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952842" data-claire-element-id="952842">Cloud Endpoints peut être délicat à prendre en main quand on ne sait pas par où commencer. Aussi, avant de rentrer dans les détails du fonctionnement de Cloud Endpoints, je vous propose de découvrir par la pratique une micro-application basique utilisant Endpoints, que nous complèterons progressivement. :)</p><h2 id="r-le-code-26" data-claire-element-id="952871">Le code</h2><h3 id="r-la-classe-testendpoint" data-claire-element-id="952857">La classe TestEndpoint</h3><p id="r-952843" data-claire-element-id="952843">Créez un nouveau projet &quot;Web Application Project&quot; que vous appellerez par exemple &quot;Test&quot; et décochez &quot;Google Web Toolkit&quot; car nous n'en aurons pas besoin ici. L'assistant va générer un fichier de servlet : ignorez-le, il ne nous est pas utile ici. Créez plutôt un nouveau fichier contenant une nouvelle classe appelée &quot;TestEndpoint&quot;. Placez-y avec le code suivant :</p><pre id="r-952844" data-claire-element-id="952844"><code data-claire-semantic="java">package tests;

import com.google.api.server.spi.config.Api;

@Api(name = &quot;monapi&quot;)
public class TestEndpoint {
    
    // Méthode de l'API
    public Membre getMembre() {
        Membre membre = new Membre(&quot;Mateo21&quot;);
        return membre;
    }

    // Classe représentant les données à transmettre
    public class Membre {
        public String nom;

        public Membre(String nom) {
            this.nom = nom;
        }
    }
}</code></pre><p id="r-952845" data-claire-element-id="952845">Vous constaterez que la classe TestEndpoint contient une autre classe Membre représentant un membre. Il n'est pas obligatoire de les imbriquer (on aurait pu faire 2 fichiers) mais par contre nous avons bien besoin de 2 classes :</p><ul id="r-952850" data-claire-element-id="952850"><li id="r-952847" data-claire-element-id="952847"><p id="r-952846" data-claire-element-id="952846">Une classe représentant l'API (ici TestEndpoint) dans laquelle chaque méthode est une fonctionnalité différente de l'API.</p></li><li id="r-952849" data-claire-element-id="952849"><p id="r-952848" data-claire-element-id="952848">Une classe représentant les données (ici Membre) dans laquelle Cloud Endpoint va récupérer les attributs pour connaître les données transmettre.</p></li></ul><p id="r-952851" data-claire-element-id="952851">La classe représentant l'API (TestEndpoint) est précédée d'une annotation :</p><pre id="r-952852" data-claire-element-id="952852"><code data-claire-semantic="java">@Api(name = &quot;monapi&quot;)
public class TestEndpoint {
    // ...
}</code></pre><p id="r-952853" data-claire-element-id="952853">Celle-ci indique que la classe qui suit fournit les fonctionnalités d'une API. Elle contient un paramètre : le nom de l'API (qu'on retrouvera dans l'URL). On peut y ajouter d'autres paramètres, j'y reviendrai plus tard.</p><div id="r-952855" data-claire-element-id="952855" data-claire-semantic="question"><p id="r-952854" data-claire-element-id="952854">Alerte ! Je viens de voir que les attributs de la classe Membre étaient publics ! Ca ne se fait pas !</p></div><p id="r-952856" data-claire-element-id="952856">Oui je sais, mais je l'ai fait quand même pour rester simple ici. :D <br/> En fait, Cloud Endpoints va analyser la classe Membre et extraire toutes les données publiques. Heureusement, vous n'êtes pas obligés de rendre les attributs publics : vous pouvez aussi passer par des getters et setters qui vérifient que l'utilisateur ne rentre pas n'importe quoi. Cloud Endpoints saura reconnaître les getters et setters : si vous rendez votre attribut &quot;nom&quot; privé et que vous créez une méthode publique getNom(), cela marche aussi. :)</p><h3 id="r-adapter-le-fichier-web-xml" data-claire-element-id="952863">Adapter le fichier web.xml</h3><p id="r-952858" data-claire-element-id="952858">Dans le fichier web.xml, ajoutez les lignes suivantes pour associer votre classe à l'API :</p><pre id="r-952859" data-claire-element-id="952859"><code data-claire-semantic="xml">&lt;servlet&gt;
	&lt;servlet-name&gt;SystemServiceServlet&lt;/servlet-name&gt;
	&lt;servlet-class&gt;com.google.api.server.spi.SystemServiceServlet&lt;/servlet-class&gt;
	&lt;init-param&gt;
		&lt;param-name&gt;services&lt;/param-name&gt;
		&lt;param-value&gt;tests.TestEndpoint&lt;/param-value&gt;
	&lt;/init-param&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;SystemServiceServlet&lt;/servlet-name&gt;
	&lt;url-pattern&gt;/_ah/spi/*&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;</code></pre><aside id="r-952862" data-claire-element-id="952862" data-claire-semantic="information"><p id="r-952860" data-claire-element-id="952860">Si vous avez plusieurs classes fournissant une API, vous pouvez les ajouter à la suite séparées par des virgules dans <code data-claire-semantic="xml">&lt;param-value&gt;</code> :</p><pre id="r-952861" data-claire-element-id="952861"><code data-claire-semantic="xml">&lt;param-value&gt;tests.TestEndpoint,tests.OtherEndpoint,tests.SuperEndpoint&lt;/param-value&gt;</code></pre></aside><h3 id="r-tester-l-api" data-claire-element-id="952870">Tester l'API</h3><p id="r-952864" data-claire-element-id="952864">Il ne vous reste plus qu'à lancer votre application. Rendez-vous ensuite à l'adresse suivante :</p><p id="r-952865" data-claire-element-id="952865"><a href="http://localhost:8888/_ah/api/monapi/v1/membre/">http://localhost:8888/_ah/api/monapi/v1/membre/</a></p><p id="r-952866" data-claire-element-id="952866">Si tout va bien, la page devrait afficher des données en format JSON :</p><pre id="r-952867" data-claire-element-id="952867"><code data-claire-semantic="javascript">{
  &quot;nom&quot; : &quot;Mateo21&quot;
}</code></pre><aside id="r-952869" data-claire-element-id="952869" data-claire-semantic="information"><p id="r-952868" data-claire-element-id="952868">Et si vous avez un message &quot;Error 404&quot;... c'est que tout va mal. :D Vérifiez que vous n'avez pas fait d'erreur dans les codes que je viens de vous donner, en particulier que vous n'avez pas oublié de mettre à jour le fichier web.xml. Vérifiez aussi que vous avez une version récente du plugin Google pour Eclipse, car Cloud Endpoints est une fonctionnalité récente qui ne marche pas avec les vieilles versions du plugin.</p></aside><h2 id="r-les-explications-5" data-claire-element-id="952896">Les explications</h2><div id="r-952873" data-claire-element-id="952873" data-claire-semantic="question"><p id="r-952872" data-claire-element-id="952872">Peut-on m'expliquer ce qui vient de se passer ? J'ai suivi les instructions, ça marche, mais je ne comprends pas ce que je fais ! :(</p></div><p id="r-952874" data-claire-element-id="952874">Pas de panique ! Je voulais qu'on travaille ensemble sur un premier code basique qui marche pour qu'on ait une base sur laquelle discuter. C'est le moment des explications.</p><p id="r-952875" data-claire-element-id="952875">Quand vous annotez une classe avec @Api, Google App Engine sait qu'il doit utiliser des fonctionnalités de Cloud Endpoints. Celui-ci prend le relai et analyse comment votre classe (ici TestEndpoint) est constituée. Il repère les méthodes qu'elle contient et, en fonction de leur nom et du type de données qu'elles retournent, génère des URLs (routes) pour votre API.</p><p id="r-952876" data-claire-element-id="952876">Dans notre test, il n'y a qu'une seule méthode :</p><pre id="r-952877" data-claire-element-id="952877"><code data-claire-semantic="java">public Membre getMembre() {
    Membre membre = new Membre(&quot;Mateo21&quot;);
    return membre;
}</code></pre><p id="r-952878" data-claire-element-id="952878">Cette méthode commençant par &quot;get&quot; et retournant un objet de type Membre, Endpoints sait qu'il doit générer une route /membre/ qui doit renvoyer en JSON le contenu de l'objet Membre (c'est-à-dire tous ses attributs publics). La classe Membre est constituée des attributs suivants :</p><pre id="r-952879" data-claire-element-id="952879"><code data-claire-semantic="java">public class Membre {
    public String nom;

    // ...
}</code></pre><p id="r-952880" data-claire-element-id="952880">Elle possède un seul attribut (auquel on peut accéder parce qu'il est public, mais on aurait aussi pu créer un getter), donc Endpoints renvoie cet attribut dans le JSON :</p><pre id="r-952881" data-claire-element-id="952881"><code data-claire-semantic="javascript">{
  &quot;nom&quot; : &quot;Mateo21&quot;
}</code></pre><p id="r-952882" data-claire-element-id="952882">Essayez d'ajouter un second attribut et de lui donner une valeur pour voir ! Par exemple, essayez d'obtenir le résultat suivant pour vous entraîner :</p><pre id="r-952883" data-claire-element-id="952883"><code data-claire-semantic="javascript">{
  &quot;nom&quot; : &quot;Mateo21&quot;,
  &quot;pays&quot; : &quot;France&quot;
}</code></pre><div id="r-952885" data-claire-element-id="952885" data-claire-semantic="question"><p id="r-952884" data-claire-element-id="952884">Et à quoi sert ce JSON au juste ?</p></div><p id="r-952886" data-claire-element-id="952886">Si vous avez déjà développé avec des APIs, vous ne devriez pas vous poser la question. Si c'est votre première fois avec une API en revanche, je comprends votre interrogation. :p</p><p id="r-952887" data-claire-element-id="952887">En fait, ce JSON correspond au code qui transitera entre votre backend (sur App Engine) et votre frontend (l'application web, l'application Android, iOS...). C'est comme ça que les différentes parties de votre application vont pouvoir communiquer.</p><p id="r-952888" data-claire-element-id="952888">Par exemple, si vous avez une application Android, elle devra effectuer une requête HTTP GET sur <a href="http://www.votresite.com/_ah/api/monapi/v1/membre/">http://www.votresite.com/_ah/api/monapi/v1/membre/</a> pour récupérer le JSON et en extraire les informations. Voilà comment on peut faire communiquer 2 applications entre elles !</p><div id="r-952890" data-claire-element-id="952890" data-claire-semantic="question"><p id="r-952889" data-claire-element-id="952889">Et pourquoi l'URL a-t-elle cette forme ? Je n'aurais jamais pu la deviner !</p></div><p id="r-952891" data-claire-element-id="952891">C'est vrai. L'URL a une forme bien précise :</p><pre id="r-952892" data-claire-element-id="952892"><code>http://localhost:8888/_ah/api/monapi/v1/membre/</code></pre><p id="r-952893" data-claire-element-id="952893">On peut décomposer l'URL comme ceci :</p><pre id="r-952894" data-claire-element-id="952894"><code>http://localhost:8888/&lt;prefixe&gt;/&lt;nom_api&gt;/&lt;version_api&gt;/&lt;objet&gt;/</code></pre><p id="r-952895" data-claire-element-id="952895">Chacun de ces éléments peut être modifié en ajoutant des options aux annotations. C'est justement ce que nous allons voir maintenant : on peut largement personnaliser notre API avec les annotations !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">
<span class="arrow"></span>
<span class="next">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
<span class="next">Les annotations Cloud Endpoints</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesannotationsCloudEndpoints"></a><h2>Les annotations Cloud Endpoints</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
<span class="arrow"></span>
<span class="next">Premiers pas avec Cloud Endpoints</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-952898" data-claire-element-id="952898">Cloud Endpoints nous permet de créer 2 types d'annotations :</p><ul id="r-952903" data-claire-element-id="952903"><li id="r-952900" data-claire-element-id="952900"><p id="r-952899" data-claire-element-id="952899">Des annotations globales, qui définissent le comportement global de l'API</p></li><li id="r-952902" data-claire-element-id="952902"><p id="r-952901" data-claire-element-id="952901">Des annotations par méthode, qui définissent le comportement de chaque méthode / route de l'API</p></li></ul><h2 id="r-les-annotations-globales-api" data-claire-element-id="952940">Les annotations globales @Api</h2><p id="r-952904" data-claire-element-id="952904">Commençons par les annotations globales. Comme vous l'avez vu, on a ajouté une annotation @Api devant la classe qui contient les méthodes de l'API :</p><pre id="r-952905" data-claire-element-id="952905"><code data-claire-semantic="java">@Api(name = &quot;monapi&quot;)
public class TestEndpoint {
    // ...
}</code></pre><p id="r-952906" data-claire-element-id="952906">Vous pouvez ajouter un certain nombre de paramètres à cette annotation comme nous l'indique <a href="https://developers.google.com/appengine/docs/java/endpoints/annotations">la doc</a>. En voici quelques-unes intéressantes :</p><table id="r-952934" data-claire-element-id="952934"><thead id="r-952912" data-claire-element-id="952912"><tr id="r-952911" data-claire-element-id="952911"><th id="r-952908" data-claire-element-id="952908"><p id="r-952907" data-claire-element-id="952907">Paramètre</p></th><th id="r-952910" data-claire-element-id="952910"><p id="r-952909" data-claire-element-id="952909">Description</p></th></tr></thead><tbody id="r-952933" data-claire-element-id="952933"><tr id="r-952917" data-claire-element-id="952917"><td id="r-952914" data-claire-element-id="952914"><p id="r-952913" data-claire-element-id="952913">root</p></td><td id="r-952916" data-claire-element-id="952916"><p id="r-952915" data-claire-element-id="952915">L'adresse racine de l'URL de l'API</p></td></tr><tr id="r-952922" data-claire-element-id="952922"><td id="r-952919" data-claire-element-id="952919"><p id="r-952918" data-claire-element-id="952918">name</p></td><td id="r-952921" data-claire-element-id="952921"><p id="r-952920" data-claire-element-id="952920">Le nom de l'API</p></td></tr><tr id="r-952927" data-claire-element-id="952927"><td id="r-952924" data-claire-element-id="952924"><p id="r-952923" data-claire-element-id="952923">version</p></td><td id="r-952926" data-claire-element-id="952926"><p id="r-952925" data-claire-element-id="952925">Le numéro de version de l'API</p></td></tr><tr id="r-952932" data-claire-element-id="952932"><td id="r-952929" data-claire-element-id="952929"><p id="r-952928" data-claire-element-id="952928">description</p></td><td id="r-952931" data-claire-element-id="952931"><p id="r-952930" data-claire-element-id="952930">Une courte description de l'API</p></td></tr></tbody></table><aside id="r-952936" data-claire-element-id="952936" data-claire-semantic="information"><p id="r-952935" data-claire-element-id="952935">Il y a d'autres paramètres comme l'indique <a href="https://developers.google.com/appengine/docs/java/endpoints/annotations">la doc</a>, utilisés notamment pour l'authentification des applications Android, iOS... Je ne traiterai pas ce sujet plus complexe ici pour le moment.</p></aside><p id="r-952937" data-claire-element-id="952937">En somme, on peut écrire l'annotation avec des paramètres comme ceci :</p><pre id="r-952938" data-claire-element-id="952938"><code data-claire-semantic="java">@Api(
        name = &quot;monapi&quot;,
        version = &quot;v2&quot;,
        description = &quot;Une API de test qui manipule des membres&quot;
    )
public class TestEndpoint {
    // ...
}</code></pre><p id="r-952939" data-claire-element-id="952939">Dans ce cas, l'API sera accessible à l'adresse : http://localhost:8888/_ah/api/monapi/v2/</p><h2 id="r-les-annotations-par-methode-apimethod" data-claire-element-id="952987">Les annotations par méthode @ApiMethod</h2><p id="r-952941" data-claire-element-id="952941">Endpoints est capable de générer automatiquement une API en fonction du nom des méthodes, en se basant sur leur préfixe, leurs paramètres et leur type de retour. C'est pratique mais dans la réalité assez complexe car il faut respecter scrupuleusement certaines règles pour que ça fonctionne. Ainsi, Endpoints sait qu'une méthode getMembre() doit renvoyer un objet de type Membre, qu'une méthode listMembre va renvoyer une liste de membres, que deleteMembre va supprimer un membre, etc.</p><p id="r-952942" data-claire-element-id="952942">Plutôt que de vous baser sur les noms (ce qui est un peu complexe, la documentation n'étant pas très claire à ce sujet je trouve), vous pouvez ajouter une annotation @ApiMethod à vos méthodes. Ainsi, vous pouvez définir clairement le chemin de l'API, la méthode à utiliser (GET, POST, DELETE...), etc.</p><p id="r-952943" data-claire-element-id="952943">Voici quelques-uns des paramètres que vous pouvez utiliser :</p><table id="r-952966" data-claire-element-id="952966"><thead id="r-952949" data-claire-element-id="952949"><tr id="r-952948" data-claire-element-id="952948"><th id="r-952945" data-claire-element-id="952945"><p id="r-952944" data-claire-element-id="952944">Paramètre</p></th><th id="r-952947" data-claire-element-id="952947"><p id="r-952946" data-claire-element-id="952946">Description</p></th></tr></thead><tbody id="r-952965" data-claire-element-id="952965"><tr id="r-952954" data-claire-element-id="952954"><td id="r-952951" data-claire-element-id="952951"><p id="r-952950" data-claire-element-id="952950">name</p></td><td id="r-952953" data-claire-element-id="952953"><p id="r-952952" data-claire-element-id="952952">Un nom unique pour cette fonctionnalité de l'API.</p></td></tr><tr id="r-952959" data-claire-element-id="952959"><td id="r-952956" data-claire-element-id="952956"><p id="r-952955" data-claire-element-id="952955">path</p></td><td id="r-952958" data-claire-element-id="952958"><p id="r-952957" data-claire-element-id="952957">Le chemin permettant d'accéder à cette fonctionnalité.</p></td></tr><tr id="r-952964" data-claire-element-id="952964"><td id="r-952961" data-claire-element-id="952961"><p id="r-952960" data-claire-element-id="952960">httpMethod</p></td><td id="r-952963" data-claire-element-id="952963"><p id="r-952962" data-claire-element-id="952962">La méthode HTTP permettant d'y accéder (GET, POST, PUT, DELETE...).</p></td></tr></tbody></table><p id="r-952967" data-claire-element-id="952967">Il existe d'autres paramètres pour l'authentification OAuth 2 mais je ne les détaille pas ici pour rester simple.</p><h3 id="r-annotations-sans-parametres" data-claire-element-id="952972">Annotations sans paramètres</h3><p id="r-952968" data-claire-element-id="952968">Prenons un exemple pour tester. Par exemple, nous voulons créer une route /membres/liste qui renvoie la liste des membres :</p><pre id="r-952969" data-claire-element-id="952969"><code data-claire-semantic="java">@ApiMethod(
        path = &quot;membres/liste&quot;,
        httpMethod = HttpMethod.GET
    )
public Membre[] listeMembres() {
    
    // Récupère la liste des membres...
    
    return listeMembres;
}</code></pre><p id="r-952970" data-claire-element-id="952970">Si on se rend sur http://localhost:8888/_ah/api/monapi/v1/membres/liste avec la méthode GET, on obtient une liste de membres :</p><pre id="r-952971" data-claire-element-id="952971"><code data-claire-semantic="java">{
    &quot;items&quot;: [
        {
            &quot;nom&quot;: &quot;robert&quot;
        },
        {
            &quot;nom&quot;: &quot;francis&quot;
        }
    ]
}</code></pre><h3 id="r-les-parametres-11" data-claire-element-id="952986">Les paramètres</h3><p id="r-952973" data-claire-element-id="952973">Si votre méthode doit prendre des paramètres, vous devez les lier à la requête du client. Pour cela, il faut faire précéder les paramètres de la méthode d'une annotation @Named et réutiliser le nom du paramètre dans le chemin.</p><p id="r-952974" data-claire-element-id="952974">Imaginez par exemple qu'on souhaite changer le nom d'un membre. On pourra procéder comme ceci :</p><pre id="r-952975" data-claire-element-id="952975"><code data-claire-semantic="java">@ApiMethod(
        path = &quot;membre/{anciennom}/{nvnom}&quot;,
        httpMethod = HttpMethod.PUT
    )
public Membre updateName(@Named(&quot;anciennom&quot;) String ancienNom, @Named(&quot;nvnom&quot;) String nouveauNom) {
    
    // Modifie le nom du membre...
    
    return membre;
}</code></pre><p id="r-952976" data-claire-element-id="952976">Le chemin sera par exemple http://localhost:8888/_ah/api/monapi/v1/membre/francis/rob pour renommer le membre &quot;francis&quot; en &quot;rob&quot;. Comme c'est la coutume dans ce genre d'API, on renvoie l'objet qu'on vient de modifier (le membre avec son nouveau nom).</p><aside id="r-952978" data-claire-element-id="952978" data-claire-semantic="information"><p id="r-952977" data-claire-element-id="952977">Dans mon code je n'ai pas mis les appels à la base de données, mais normalement on est censé modifier le nom du membre dans la base !</p></aside><p id="r-952979" data-claire-element-id="952979">Attention, cette fois j'utilise la méthode HTTP PUT (et non pas GET). Vous ne pourrez pas tester cette route facilement avec votre navigateur... sauf si vous utilisez un outil spécialisé comme <a href="https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm">Postman</a> (plugin Google Chrome).</p><p id="r-952980" data-claire-element-id="952980">Vous pouvez y insérer l'URL de votre API et modifier la méthode HTTP dans la liste déroulante. Vous y voyez le résultat de votre requête en JSON !</p><figure id="r-le-plugin-postman-pour-google-chrome-permet-de-tester-son-api" data-claire-element-id="952983"><img id="r-952981" data-claire-element-id="952981" src="medias/uploads.siteduzero.com_files_421001_422000_421550.png" alt="Le plugin Postman pour Google Chrome permet de tester son API"/><figcaption>Le plugin Postman pour Google Chrome permet de tester son API</figcaption></figure><aside id="r-952985" data-claire-element-id="952985" data-claire-semantic="information"><p id="r-952984" data-claire-element-id="952984">Maintenant que vous savez générer votre API, jetez un oeil à la doc du côté de la génération d'applications clientes ! Cloud Endpoints vous facilite aussi la vie du côté de l'interface <em>frontend</em> notamment si vous développez une application <a href="https://developers.google.com/appengine/docs/java/endpoints/consume_android">Android</a> (en Java), <a href="https://developers.google.com/appengine/docs/java/endpoints/consume_ios">iOS</a> (en Objective C) ou <a href="https://developers.google.com/appengine/docs/java/endpoints/consume_js">Web</a> (en JavaScript).<br/> Cela vous évite d'avoir à écrire tout le code qui récupère et traite le JSON de l'API, ainsi que toute la gestion de l'authentification OAuth 2 !</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine">Montez votre site dans le cloud avec Google App Engine</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Débutez avec Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/qu-est-ce-que-google-app-engine">Qu’est-ce que Google App Engine ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-est-ne-le-cloud">
Comment est né le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-fonctionne-le-cloud">
Comment fonctionne le cloud ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-app-engine-le-cloud-selon-google">
Google App Engine, le cloud selon Google
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-google-app-engine-avec-eclipse">Installer Google App Engine avec Eclipse</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-eclipse-1">
Installer Eclipse
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/installer-le-plugin-google-app-engine">
Installer le plugin Google App Engine
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-et-deployer-sa-premiere-application">Créer et déployer sa première application</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creation-de-l-application-3">
Création de l&#039;application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/structure-des-fichiers-d-un-projet-app-engine-1">
Structure des fichiers d&#039;un projet App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/executer-l-application-app-engine">
Exécuter l&#039;application App Engine
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/deployer-l-application-app-engine-sur-les-serveurs-de-google">
Déployer l&#039;application App Engine sur les serveurs de Google
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Stockez toutes vos données
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comment-stocker-des-donnees-dans-le-cloud">Comment stocker des données dans le Cloud ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/une-affaire-d-architecture-de-serveurs">
Une affaire d&#039;architecture de serveurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-oui-mais-ou">
Stocker, oui mais où ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-cloud-sql">Google Cloud SQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-sql-dans-l-api-console">
Activer Google Cloud SQL dans l&#039;API Console
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-un-projet-google-cloud-sql">
Créer un projet Google Cloud SQL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-cloud-sql-dans-une-application">
Exemple : Cloud SQL dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/le-datastore">Le Datastore</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/comprendre-le-datastore">
Comprendre le Datastore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-a-bas-niveau">
Manipuler le Datastore à bas niveau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-le-datastore-dans-une-application">
Exemple : le Datastore dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/manipuler-le-datastore-avec-objectify">Manipuler le DataStore avec Objectify</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-objectify">
Configurer Objectify
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/creer-des-objets-persistables">
Créer des objets persistables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/operations-sur-les-cles">
Opérations sur les clés
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-requetes-5">
Les requêtes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mise-en-cache-avec-memcache">
Mise en cache avec Memcache
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-transactions">
Les transactions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/exemple-objectify-dans-une-application">
Exemple : Objectify dans une application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/stocker-des-fichiers-sur-google-cloud-storage">Stocker des fichiers sur Google Cloud Storage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/uploader-sur-le-blobstore">
Uploader sur le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/principes-de-google-cloud-storage">
Principes de Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/activer-google-cloud-storage">
Activer Google Cloud Storage
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/relier-cloud-storage-a-son-application">
Relier Cloud Storage à son application
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/utiliser-cloud-storage-dans-son-application">
Utiliser Cloud Storage dans son application
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/tp-et-voici-le-cloud-uploader">TP : et voici le... Cloud Uploader</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/consignes-13">
Consignes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/correction-221">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/aller-plus-loin-44">
Aller plus loin
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Les services de Google App Engine
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/google-accounts-api-authentifiez-vos-visiteurs">Google Accounts API : authentifiez vos visiteurs</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/authentifier-les-utilisateurs">
Authentifier les utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-des-urls">
Protéger des URLs
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/mail-api-envoyez-et-receptionnez-des-e-mails">Mail API : envoyez et réceptionnez des e-mails</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/envoyer-des-e-mails">
Envoyer des e-mails
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/recevoir-des-e-mails">
Recevoir des e-mails
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/image-api-transformez-des-images">Image API : transformez des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-le-blobstore">
Transformer des images depuis le Blobstore
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/transformer-des-images-depuis-leur-url">
Transformer des images depuis leur URL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/crons-executez-des-taches-a-intervalles-reguliers">Crons : exécutez des tâches à intervalles réguliers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/configurer-des-taches-cron">
Configurer des tâches cron
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/proteger-les-urls-des-crons">
Protéger les URLs des crons
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/cloud-endpoints-creez-des-apis-et-generez-des-apps-android-iphone">Cloud Endpoints : créez des APIs et générez des apps Android &amp; iPhone</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
Premiers pas avec Cloud Endpoints
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/les-annotations-cloud-endpoints">
Les annotations Cloud Endpoints
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/montez-votre-site-dans-le-cloud-avec-google-app-engine/premiers-pas-avec-cloud-endpoints">
<span class="arrow"></span>
<span class="next">Premiers pas avec Cloud Endpoints</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/montez-votre-site-dans-le-cloud-avec-google-app-engine.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:35:15 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/montez-votre-site-dans-le-cloud-avec-google-app-engine.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:32:29 GMT -->
</html>