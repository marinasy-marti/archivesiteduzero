<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-un-depot-launchpad.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:34:10 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-un-depot-launchpad.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:52:47 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Créer un dépôt Launchpad</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/creer-un-depot-launchpad.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Créer un dépôt Launchpad</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#CrerundptLaunchpad">Créer un dépôt Launchpad</a><br/><a href="#CrationducompteLaunchpad">Création du compte Launchpad</a><br/><a href="#DebiandansUbuntu">Debian dans Ubuntu</a><br/><a href="#Murmurerl039oreilledes.deb">Murmurer à l&#039;oreille des .deb</a><br/><a href="#Installationautomatique">Installation automatique !</a><br/><a href="#Empaquetageetchasseauxbugs">Empaquetage et chasse aux bugs</a><br/></div>
<a name="CrerundptLaunchpad"></a><h2>Créer un dépôt Launchpad</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/creation-du-compte-launchpad">
<span class="next">Création du compte Launchpad</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-335259" data-claire-element-id="335259">Ça y est ! Votre œuvre est désormais terminée, vous avez réussi à vous débarrasser des dernières anomalies et voilà que se pose une question cruciale : que faire pour diffuser votre programme le plus largement possible ?</p><p id="r-335260" data-claire-element-id="335260">Eh oui, ce n'est pas tout de créer un programme qui va révolutionner la vie des gens, encore faut-il qu'ils y aient accès.<br/> Ce tutoriel tâchera de résoudre ce problème en vous permettant de créer votre propre dépôt afin de laisser vivre votre programme. ^^</p><p id="r-335261" data-claire-element-id="335261">Nous utiliserons <em>Launchpad</em>. Des notions de shell seront nécessaires (cf. <a href="http://www.siteduzero.com/tutoriel-3-105678-introduction-aux-scripts-shell.html">le tuto de M@teo21</a>) mais également la notion de ce qu'est un paquet .deb (cf. <a href="http://www.siteduzero.com/tutoriel-3-426022-creer-un-paquet-deb.html">le tuto de outadoc</a>).</p><p id="r-335262" data-claire-element-id="335262">Je vous conseille également d'installer avec <em>apt-get</em> les paquets suivants :</p><p id="r-335263" data-claire-element-id="335263"><code data-claire-semantic="console">debhelper cdbs lintian build-essential fakeroot devscripts pbuilder dh-make debootstrap</code></p><p id="r-335264" data-claire-element-id="335264">Il s'agit un peu de votre trousse à outils pour mener à bien le processus que présente ce tutoriel ! :magicien:</p><p id="r-335265" data-claire-element-id="335265">Commençons tout de suite, nous avons du pain sur la planche. :p</p>
</div><a name="CrationducompteLaunchpad"></a><h2>Création du compte Launchpad</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/debian-dans-ubuntu">
<span class="next">Debian dans Ubuntu</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-335266" data-claire-element-id="335266">C'est bon ! Votre choix est fait, vous allez bénéficier de ce que peut offrir votre propre dépôt <em>Launchpad</em>.<br/><em>Launchpad</em> vous permettra de mettre à disposition vos sources, compilera pour la <em>release </em>32 ou 64 bits d'Ubuntu (nous travaillerons d'ailleurs sur Ubuntu Lucid Lynx 10.04) et les rendra disponibles 24 heures sur 24 avec la possibilité de faire une mise à jour depuis apt-get… votre propre dépôt en somme. ^^</p><p id="r-335267" data-claire-element-id="335267">Pour ce faire, il faudra d'abord obtenir une clé de cryptage qui vous est propre en tant que développeur. Elle servira, entre autres, à signer vos paquets et à valider votre compte <em>Launchpad</em>.</p><p id="r-335268" data-claire-element-id="335268">Nous allons générer une clé sous Ubuntu.</p><p id="r-335269" data-claire-element-id="335269">Rendons-nous dans <em>Applications › Accessoires › Mots de passe et clés de chiffrement</em>. Une fois la fenêtre ouverte, vous pourrez cliquer sur l'onglet <em>Mes clés personnelles</em>. Puis vous cliquerez en haut dans <em>Fichier › Nouveau</em> et sélectionnerez <strong>Clé PGP</strong>.</p><figure id="r-335271" data-claire-element-id="335272"><img id="r-335270" data-claire-element-id="335270" src="medias/uploads.siteduzero.com_files_314001_315000_314699.png" alt="Image utilisateur"/></figure><p id="r-335273" data-claire-element-id="335273">Saisissez donc vos informations personnelles (comme ci-dessus), et lancez la création de la clé. Elle se trouvera ensuite dans la liste de vos clés personnelles.</p><p id="r-335274" data-claire-element-id="335274">Merveilleux ! Votre clé a été générée mais pour l'instant, seul votre PC la connaît. On va donc synchroniser la liste de clés avec le serveur pour lui signaler qu'on a créé une nouvelle clé et qu'on aimerait bien qu'il la reconnaisse. Allez dans la barre du haut et cliquez sur <em>Distant › Synchroniser et publier des clés</em>.</p><p id="r-335275" data-claire-element-id="335275">Et voilà, en principe, après une petite attente, tout devrait être fonctionnel… du moins pour la clé !</p><p id="r-335276" data-claire-element-id="335276">Zut, on n'y est pas encore… :euh: Mais à présent, on peut s'authentifier auprès de <em>Launchpad </em>et s'attaquer à la création du compte : il faut maintenant se rendre sur <a href="https://launchpad.net/">le site de <em>Launchpad</em></a> et créer son compte en cliquant en haut à droite, sur<em> Register</em>.</p><aside id="r-335278" data-claire-element-id="335278" data-claire-semantic="warning"><p id="r-335277" data-claire-element-id="335277">Il existe quelques problèmes avec Firefox au niveau du <em>referer header</em>. Corrigez cela avec une extension Firefox ou utilisez un autre navigateur !</p></aside><p id="r-335279" data-claire-element-id="335279">Cliquez ensuite sur <em>Create new account</em> et renseignez les informations demandées. La suite de la création du compte ne devrait pas vous poser de gros problèmes. Passons ensuite à l'importation de la clé PGP.</p><p id="r-335280" data-claire-element-id="335280">En retournant dans <em>Mots de passe et clés de chiffrement</em>, nous pourrons accéder à l'empreinte de la clé. Pour ce faire, clic droit <em>Propriétés › Détails</em> et il ne vous reste plus qu'à copier la liste de caractère sous <strong>empreinte</strong>.</p><p id="r-335281" data-claire-element-id="335281">Rendez-vous sur votre page <em>Launchpad</em>, après vous y être connecté. Vous devriez voir un lien, sous <em>openPGP keys</em>, vous invitant à rajouter votre clé. Ajoutez la <strong>fingerprint</strong> qui est l'empreinte de votre clé. <em>Launchpad</em> va alors questionner le serveur d'Ubuntu pour savoir si votre clé est valide. Si vous rencontrez un problème, vous avez peut-être oublié de synchroniser votre clé.</p><p id="r-335282" data-claire-element-id="335282">Maintenant, un petit saut vers la messagerie s'impose ! Un mail devrait être arrivé de leur part, charmante intention, mais… mais c'est incompréhensible ! o_O En fait, le contenu que vous voyez là est crypté et seule votre clé pourra le décrypter.</p><p id="r-335283" data-claire-element-id="335283">Copiez-collez le mail dans un fichier texte. Lancez votre terminal et placez-vous dans le dossier où se trouve votre fichier. Ensuite, écrivez cette commande :</p><pre id="r-335284" data-claire-element-id="335284"><code data-claire-semantic="console">gpg --decrypt monMail.txt</code></pre><p id="r-335285" data-claire-element-id="335285">Et voilà, les explications sont à présent tout à fait compréhensibles. Vous pouvez maintenant suivre les instructions pour valider votre clé auprès de <em>Launchpad</em>. ;)</p><aside id="r-335287" data-claire-element-id="335287" data-claire-semantic="information"><p id="r-335286" data-claire-element-id="335286">Des logiciels de messagerie comme Thunderbird proposent directement le décryptage.</p></aside><p id="r-335288" data-claire-element-id="335288">De retour sur votre page <em>Launchpad</em>, vous allez signer le code de conduite d'Ubuntu en suivant simplement les étapes. À noter que, pour signer avec votre clé, vous devrez utiliser l'option <code>--sign</code> puis leur renvoyer le code de conduite et la signature.</p><p id="r-335289" data-claire-element-id="335289">Pfiou ! Voilà qui est enfin fait. Nous venons de créer notre compte <em>Launchpad</em> et tout est désormais prêt pour y mettre nos programmes sauf peut-être… les programmes. :(</p><p id="r-335290" data-claire-element-id="335290">Amorçons déjà la partie suivante ; vous pouvez créer un nouveau PPA en cliquant sur <em>Create a new PPA </em>dans <em>Personal Package Archives</em>.<br/> La <em>Personal Package Archive</em> sera un petit coin où vous pourrez mettre tout ce qui est relatif à un projet : des binaires, un fichier source, des informations et le tout avec une URL. Vous pouvez en créer pour chacun de vos projets mais, partant du fait que vous êtes sur <em>Launchpad</em> pour la première fois, on va se contenter d'un seul et unique projet. :-°</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad">Créer un dépôt Launchpad</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/creation-du-compte-launchpad">
Création du compte Launchpad
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/debian-dans-ubuntu">
Debian dans Ubuntu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/murmurer-a-l-oreille-des-deb">
Murmurer à l&#039;oreille des .deb
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/installation-automatique">
Installation automatique !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/empaquetage-et-chasse-aux-bugs">
Empaquetage et chasse aux bugs
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/debian-dans-ubuntu">
<span class="next">Debian dans Ubuntu</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="DebiandansUbuntu"></a><h2>Debian dans Ubuntu</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/creation-du-compte-launchpad">
<span class="arrow"></span>
<span class="next">Création du compte Launchpad</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/murmurer-a-l-oreille-des-deb">
<span class="next">Murmurer à l&#039;oreille des .deb</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-335292" data-claire-element-id="335292">Partie amusante du tutoriel, nous allons créer une architecture Debian dans notre dossier afin de guider <em>Launchpad</em> quand il fabriquera les <strong>.deb</strong>. Le but sera donc de créer <strong>un paquet source.</strong></p><div id="r-335294" data-claire-element-id="335294" data-claire-semantic="question"><p id="r-335293" data-claire-element-id="335293">Architecture « Debian » ? Mais nous ne sommes pas sous Ubuntu ? o_O</p></div><p id="r-335295" data-claire-element-id="335295">Évidemment, mais Ubuntu est une dérivée de Debian, tout comme Debian est une dérivée de Linux. L'architecture étant semblable, ce tutoriel peut servir à des personnes réalisant des versions pour Debian ou Knoppix. Comme je l'ai dit plus haut, lisez le tutoriel d'outadoc pour fabriquer des <strong>.deb</strong>, ça vous permettra de mieux comprendre ce que nous allons faire ici, qui est un peu plus compliqué.</p><p id="r-335296" data-claire-element-id="335296">En effet, quand vous créez une archive Debian, il suffit de préciser où vous voulez chaque fichier, quelques fichiers intéressants (changelog, readme, control, etc.) et l'installeur disposera tout correctement sur l'ordinateur de l'utilisateur.<br/> Oui mais, pour nous, c'est <em>Launchpad</em> qui va créer le ce fichier. On va donc devoir lui montrer comment il doit créer ces fichiers. Le gros point positif, c'est que Launchpad est suffisamment bien équipé pour compiler dans les environnements que vous souhaitez. Vous pourrez ainsi, par exemple, obtenir une version 32 bits et une version 64 bits pour Ubuntu Lucid Lynx.</p><p id="r-335297" data-claire-element-id="335297">C'est d'ailleurs — curieusement — ce que nous allons faire… :-°</p><aside id="r-335299" data-claire-element-id="335299" data-claire-semantic="information"><p id="r-335298" data-claire-element-id="335298">Voici quelques faits que je vais présupposer pour faciliter la compréhension : nous tournons sur Ubuntu Lucid et nous avons réalisé un programme en C++ sous Qt, dont nous souhaitons obtenir un paquet pour une architecture en 32 bits et une en 64 bits. Nous souhaitons aussi rendre les sources disponibles sur <em>Launchpad</em>. Pourquoi Qt ? Car M@teo21 a rendu cette bibliothèque très utilisée par les programmeurs en herbe qui traînent ici grâce à son très bon tutoriel ! ^^</p></aside><p id="r-335300" data-claire-element-id="335300">Créez ou choisissez un dossier où travailler, car c'est parti ! :p Dans celui-ci, vous allez créer trois dossiers : <code data-claire-semantic="console">debian src datas</code>. Attention à la casse !</p><ul id="r-335307" data-claire-element-id="335307"><li id="r-335302" data-claire-element-id="335302"><p id="r-335301" data-claire-element-id="335301"><strong>datas</strong> sera le dossier dans lequel nous retracerons l'architecture d'Ubuntu en ne plaçant que les dossiers nécessaires ;</p></li><li id="r-335304" data-claire-element-id="335304"><p id="r-335303" data-claire-element-id="335303"><strong>debian</strong> sera le dossier où nous placerons les règles de fabrication du paquet <strong>.deb</strong> ainsi que les sources, vu que nous les voulons disponibles sur <em>Launchpad</em> ;</p></li><li id="r-335306" data-claire-element-id="335306"><p id="r-335305" data-claire-element-id="335305">enfin, <strong>src</strong> sera le dossier dans lequel nous mettrons les précieuses sources du programme pour <em>Launchpad</em>.</p></li></ul><p id="r-335308" data-claire-element-id="335308">Ouvrons d'abord <code data-claire-semantic="console">src</code> : vous devez créer un dossier par exécutable (surtout parce que c'est plus propre et que ça vous facilitera l'écriture du Makefile ^^ ). J'imagine que vous n'en êtes pas à des programmes qui nécessitent une dizaine de binaires donc vous n'en créerez qu'un. Le mien s'appelle monProgramme.</p><p id="r-335309" data-claire-element-id="335309">Ce dossier contiendra tout ce qui est nécessaire à la compilation. Vos sources, en somme.</p><p id="r-335310" data-claire-element-id="335310">Rendons-nous à présent dans le dossier <code data-claire-semantic="console">debian</code>. Dedans, vous devez créer un dossier <code data-claire-semantic="console">source</code>.</p><p id="r-335311" data-claire-element-id="335311">Une fois cette petite broutille faite, nous pouvons faire un saut dans le dossier <code data-claire-semantic="console">datas</code>. Nous allons y reproduire exactement ce qui nous intéresse pour le fonctionnement. Ce que je présente ici est évidemment minimal. Libre à vous d'en faire davantage si vous vous sentez créatif ou que votre programme l'exige.</p><p id="r-335312" data-claire-element-id="335312">On commence par créer un dossier <code data-claire-semantic="console">usr</code> dans lequel on placera les dossiers <code data-claire-semantic="console">bin</code>et <code data-claire-semantic="console">share</code>.<br/> Le dossier <strong>bin</strong> est important. Il contiendra le fichier qui sera appelé par le programme quand nous taperons son nom. Comme dans le terminal lorsque vous tapez</p><pre id="r-335313" data-claire-element-id="335313"><code data-claire-semantic="console">vlc</code></pre><p id="r-335314" data-claire-element-id="335314">Et une fenêtre VLC s'ouvre.</p><p id="r-335315" data-claire-element-id="335315">Rien de bien magique à tout cela, le secret se cache dans le dossier <code data-claire-semantic="console">bin</code>.</p><p id="r-335316" data-claire-element-id="335316">Dans le dossier <code data-claire-semantic="console">share</code>, nous ajouterons notre programme à la barre dans la liste des <em>Applications</em>.<br/> Nous allons créer un dossier <em>applications</em> étant donné que nous souhaitons l'y faire apparaître. Dans ce dossier, je vais créer un fichier, à l'aide de vim, qui se nommera <strong>monProjet.desktop</strong> et qui permettra son lancement.<br/> Dans ce fichier, je vais rentrer ceci :</p><pre id="r-335317" data-claire-element-id="335317"><code data-claire-semantic="console">[Desktop Entry]
Version=0.1.0
Encoding=UTF-8
Name=monProjet
GenericName=monProjet
Comment=monProjet est un jeu video
Exec=/usr/share/monProjet/monProjet
Icon=/usr/share/pixmaps/monProjetIcon.png
Terminal=false
Type=Application
Categories=Application;Game;
Name[fr_FR]=monProjet</code></pre><p id="r-335318" data-claire-element-id="335318">Quelques éclaircissements s'imposent :</p><ul id="r-335329" data-claire-element-id="335329"><li id="r-335320" data-claire-element-id="335320"><p id="r-335319" data-claire-element-id="335319"><strong>Version</strong> est en fait la version de mon projet, soit <em>0.1.0</em> ;</p></li><li id="r-335322" data-claire-element-id="335322"><p id="r-335321" data-claire-element-id="335321"><strong>Encoding</strong> est simplement l'encodage du fichier. Évidemment, mon jeu est en UTF-8 afin de bien gérer les accents ; ^^</p></li><li id="r-335324" data-claire-element-id="335324"><p id="r-335323" data-claire-element-id="335323"><strong>Exec</strong> est la commande à exécuter pour lancer le programme depuis le dossier : il s'agit de <em>monProjet</em> dans <em>/usr/share</em>. C'est en fait le nom du fichier compilé que nous mettrons dans le dossier <em>bin</em> ;</p></li><li id="r-335326" data-claire-element-id="335326"><p id="r-335325" data-claire-element-id="335325"><strong>Icon</strong> est l'adresse de la petite icône qui symbolisera le jeu. Je ne vous en ai pas encore parlé mais on s'en charge juste après. Vous pouvez tout de même remplir ce champ à l'avance ; ;)</p></li><li id="r-335328" data-claire-element-id="335328"><p id="r-335327" data-claire-element-id="335327"><strong>Categories</strong> permettra de situer le jeu ; je le place dans les applications › les jeux. Observez les autres desktop pour vous forger une bonne idée des autres noms de catégories. ;)</p></li></ul><p id="r-335330" data-claire-element-id="335330">Je pense avoir précisé les points les plus difficiles à comprendre, à vous de créer le fichier selon vos besoins.<br/> Nous sommes donc toujours dans <strong>share</strong> et nous allons créer le dossier <strong>pixmaps</strong> dans lequel nous placerons notre <strong>monProjetIcon.png</strong>. Le format .png n'est pas obligatoire pour autant.</p><p id="r-335331" data-claire-element-id="335331">Le dernier des dossiers à placer dans <strong>share</strong> sera le dossier monProjet dans lequel vous pourrez placer les fichiers éventuellement utiles à votre programme (vidéos, plugins, textures, etc.) en n'oubliant pas de faire en sorte que votre programme aille les chercher là où ils se trouvent effectivement.</p><p id="r-335332" data-claire-element-id="335332">Bien ! Les dossiers sont créés. Pfiou, c'est un peu fatigant tout ça. :euh:</p><p id="r-335333" data-claire-element-id="335333">C'est tout à fait normal, on fait ici un premier projet. Une fois tous les fichiers correctement créés, ce sera plus simple de faire une petite mise à jour. Et dire que dans les gros projets, il y a des gens dont c'est la spécialité de faire ça. :o</p><p id="r-335334" data-claire-element-id="335334">À présent que les dossiers sont faits, nous allons nous attaquer aux fichiers nécessaires pour le <strong>.deb</strong> ! ^^</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad">Créer un dépôt Launchpad</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/creation-du-compte-launchpad">
Création du compte Launchpad
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/debian-dans-ubuntu">
Debian dans Ubuntu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/murmurer-a-l-oreille-des-deb">
Murmurer à l&#039;oreille des .deb
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/installation-automatique">
Installation automatique !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/empaquetage-et-chasse-aux-bugs">
Empaquetage et chasse aux bugs
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/creation-du-compte-launchpad">
<span class="arrow"></span>
<span class="next">Création du compte Launchpad</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/murmurer-a-l-oreille-des-deb">
<span class="next">Murmurer à l&#039;oreille des .deb</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Murmurerl039oreilledes.deb"></a><h2>Murmurer à l&#039;oreille des .deb</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/debian-dans-ubuntu">
<span class="arrow"></span>
<span class="next">Debian dans Ubuntu</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/installation-automatique">
<span class="next">Installation automatique !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-335336" data-claire-element-id="335336">Partie intéressante, bien que connue de ceux qui savent déjà faire des .deb, nous allons configurer les fichiers pour bien expliquer comment on veut que tout ça soit mis. Ce ne sera pas bien compliqué. ^^</p><p id="r-335337" data-claire-element-id="335337">Tout d'abord, où allons-nous mettre ces fichiers ? Dans le dossier <strong>debian</strong> bien sûr ! Comme je l'ai dit, ce dossier permettra à <em>dpkg</em> d'avoir tout en main pour faire le <strong>.deb</strong>. Mais vous ne vous souciez pas de <em>dpkg</em>, c'est le problème de <em>Launchpad</em> de savoir comment il fonctionne. Vous devez juste lui donner ce dont il a besoin pour fonctionner.</p><p id="r-335338" data-claire-element-id="335338">Dans <strong>debian</strong>, nous allons créer un fichier <strong>changelog</strong> :</p><pre id="r-335339" data-claire-element-id="335339"><code>monProjet (0.1.0) lucid; urgency=low

  * Initial Release.

 -- Jean Dumoulin &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="a0cac5c1cee0c4d5cdcfd5ccc9ce8ec3cfcd">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;  Sun, 15 May 2011 08:22:49 +0200</code></pre><p id="r-335340" data-claire-element-id="335340">Ce fichier comporte simplement les dernières informations sur le <em>package </em>:</p><ul id="r-335353" data-claire-element-id="335353"><li id="r-335342" data-claire-element-id="335342"><p id="r-335341" data-claire-element-id="335341">son nom (qui est <em>monProjet</em>) ;</p></li><li id="r-335344" data-claire-element-id="335344"><p id="r-335343" data-claire-element-id="335343">sa version (qui est <em>0.1.0</em>) ;</p></li><li id="r-335346" data-claire-element-id="335346"><p id="r-335345" data-claire-element-id="335345">la version compatible qui, dans ce cas, est <em>Lucid</em> car nous travaillons sur la dernière version d'Ubuntu ;</p></li><li id="r-335348" data-claire-element-id="335348"><p id="r-335347" data-claire-element-id="335347">l'<em>urgency</em> est une propriété pour que <em>Launchpad </em>estime la priorité de construction du <em>package</em>. On n'est pas à une heure ou deux près (selon le temps et les ressources en place, <em>Launchpad </em>peut prendre une demi-journée pour lancer ça) donc <em>low</em> est très bien ;</p></li><li id="r-335350" data-claire-element-id="335350"><p id="r-335349" data-claire-element-id="335349">un petit commentaire sur les changements : on sort la première release ;</p></li><li id="r-335352" data-claire-element-id="335352"><p id="r-335351" data-claire-element-id="335351">votre nom et votre adresse mail, ainsi que la date.</p></li></ul><p id="r-335354" data-claire-element-id="335354">Voilà, <em>changelog </em>a toutes les infos. Le plus important, pour permettre au serveur de comparer les infos, est surtout la ligne contenant le nom, la version et la distribution évidemment (même s'il pourrait ne pas créer votre paquet s'il manque des informations).</p><p id="r-335355" data-claire-element-id="335355">On crée ensuite un fichier <strong>control</strong> :</p><pre id="r-335356" data-claire-element-id="335356"><code>Source: monProjet
Section: games
Priority: optional
Maintainer: Jean Dumoulin &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="dcb6b9bdb29cb8a9b1b3a9b0b5b2f2bfb3b1">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;
Build-Depends: debhelper (&gt;= 7), qt4-qmake,  libqt4-opengl-dev, libqt4-dev
Standards-Version: 3.8.3
Homepage: https://launchpad.net/~jeandumoulin/+archive/monProjet

Package: monProjet
Architecture: any
Depends: libqt4-opengl,libqtgui4,libqtcore4 
Description: mon jeu fait par moi
C'est un jeu merveilleux auquel chacun devrait jouer.</code></pre><p id="r-335357" data-claire-element-id="335357">Pour la suite, rien de bien compliqué :</p><ul id="r-335368" data-claire-element-id="335368"><li id="r-335359" data-claire-element-id="335359"><p id="r-335358" data-claire-element-id="335358">la <em>source</em> (ici, on développe monProjet) ;</p></li><li id="r-335361" data-claire-element-id="335361"><p id="r-335360" data-claire-element-id="335360">la <em>section</em> qui, dans mon cas, est <strong>games</strong> ;</p></li><li id="r-335363" data-claire-element-id="335363"><p id="r-335362" data-claire-element-id="335362">la <em>priorité</em> qui est l'importance de la mise à jour du paquet ;</p></li><li id="r-335365" data-claire-element-id="335365"><p id="r-335364" data-claire-element-id="335364">le <em>maintainer</em> qui contient toujours vos informations ;</p></li><li id="r-335367" data-claire-element-id="335367"><p id="r-335366" data-claire-element-id="335366">les <em>build-depends</em> qui représentent le nécessaire pour que <em>Launchpad</em> puisse compiler. Dans mon cas, j'utilise Qt et Qt-openGL, j'indique donc les <em>libraries </em>de développement : <strong>qt4-qmake</strong> pour permettre de générer le <strong>qmake</strong>, <strong>libqt4-opengl-dev </strong>pour tout ce qui implique<em> openGL</em> sous<em> Qt, libqt4-dev</em> qui contient les fonctions Qt.</p></li></ul><p id="r-335369" data-claire-element-id="335369">Rien de bien compliqué jusqu'à <em>Architecture</em> où, avec <strong>any</strong>, vous spécifiez que vous souhaitez que votre programme soit compilé sur toutes les architectures. Les <em>Depends</em> seront les dépendances nécessaires à l'utilisation, et non pas à la compilation, donc pas de <code data-claire-semantic="console">-dev</code> ou de <code data-claire-semantic="console">-devel</code>.</p><p id="r-335370" data-claire-element-id="335370">Un dernier détail : pour la <em>Description</em>, la première ligne est une description courte puis, en allant à la ligne, vous pouvez en écrire une plus longue.</p><p id="r-335371" data-claire-element-id="335371">Passons à <strong>copyright</strong> :</p><pre id="r-335372" data-claire-element-id="335372"><code>This work was packaged for Debian by:

    Jean Dumoulin &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="7f151a1e113f1b0a12100a131611511c1012">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt; on Sun, 15 May 2011 08:22:49 +0200

It was downloaded from:

    https://launchpad.net/~jeandumoulin/+archive/monProjet

Upstream Author(s):

    Jean Dumoulin &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="b5dfd0d4dbf5d1c0d8dac0d9dcdb9bd6dad8">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;

Copyright:

    &lt;Copyright (C) 2011 Jean Dumoulin&gt;

License:

        GNU General Public License v3.0

On Debian systems, the complete text of the GNU General
Public License version 3 can be found in `/usr/share/common-licenses/GPL-3'.

The Debian packaging is:

    Copyright (C) 2011 Jean Dumoulin &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="432926222d0327362e2c362f2a2d6d202c2e">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;

and is licensed under the GPL version 3, 
see `/usr/share/common-licenses/GPL-3'.</code></pre><p id="r-335373" data-claire-element-id="335373">Rien de très compliqué pour ce fichier. Si vous ne souhaitez pas de licence GPL ou, plutôt, une licence LGPL, libre à vous de l'éditer en conséquence.</p><p id="r-335374" data-claire-element-id="335374">En remontant à la racine de votre projet, vous pouvez également créer les fichiers README, INSTALL, COPYING, AUTHORS et NEWS mais leur création ne fait pas partie du tutoriel et ces fichiers ne sont qu'informatifs pour les utilisateurs.</p><p id="r-335375" data-claire-element-id="335375">À noter que vous pouvez également générer ces fichiers puis les modifier vous-mêmes grâce à la commande <code data-claire-semantic="console">dh_make</code> dont je vous conseille de lire <a href="http://manpages.ubuntu.com/manpages/lucid/man8/dh_make.8.html">la documentation</a>. Faites attention : l'arborescence des dossiers ainsi que leurs noms ne seront pas vraiment corrects, et il faudra donc les modifier.</p><div id="r-335377" data-claire-element-id="335377" data-claire-semantic="question"><p id="r-335376" data-claire-element-id="335376">Tout ça, c'est bien joli mais tu m'avais dit que <em>Launchpad </em>compilait mon code source. On n'a encore rien fait pour qu'il le fasse… :euh:</p></div><p id="r-335378" data-claire-element-id="335378">C'est vrai, nous avons surtout travaillé sur le paquet debian qu'il va générer. Nous allons donc, à présent, nous attaquer à l'installation. ^^</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad">Créer un dépôt Launchpad</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/creation-du-compte-launchpad">
Création du compte Launchpad
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/debian-dans-ubuntu">
Debian dans Ubuntu
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/murmurer-a-l-oreille-des-deb">
Murmurer à l&#039;oreille des .deb
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/installation-automatique">
Installation automatique !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/empaquetage-et-chasse-aux-bugs">
Empaquetage et chasse aux bugs
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/debian-dans-ubuntu">
<span class="arrow"></span>
<span class="next">Debian dans Ubuntu</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/installation-automatique">
<span class="next">Installation automatique !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Installationautomatique"></a><h2>Installation automatique !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/murmurer-a-l-oreille-des-deb">
<span class="arrow"></span>
<span class="next">Murmurer à l&#039;oreille des .deb</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/empaquetage-et-chasse-aux-bugs">
<span class="next">Empaquetage et chasse aux bugs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-335380" data-claire-element-id="335380">Quelle horrible question que de savoir comment faire en sorte que Launchpad compile de lui-même et fasse une installation.<br/> C'est parce que cette partie est peu documentée que je me suis motivé à faire ce tutoriel. Il m'aura fallu des semaines pour trouver comment faire mais, à présent, je vais pouvoir vous expliquer tout ça. ^^</p><p id="r-335381" data-claire-element-id="335381">Il n'y a rien de bien compliqué mais, comme toujours, il suffisait d'y penser ! :-°</p><p id="r-335382" data-claire-element-id="335382">Commençons par créer un fichier <strong>config.ac</strong> à la racine :</p><pre id="r-335383" data-claire-element-id="335383"><code>#                                               -*- Autoconf -*-
# Process this file with autoconf to produce a configure script.

AC_PREREQ([2.65])
AC_INIT([monProjet], [0.1.0], [<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="365c5357587652435b59435a5f581855595b">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>])
AM_INIT_AUTOMAKE([readme-alpha])
AC_CONFIG_SRCDIR([config.h.in])
AC_CONFIG_HEADERS([config.h])

# Checks for programs.
AC_PROG_CC

# Checks for libraries.
# FIXME: Replace `main' with a function in `-lappindicator':
AC_CHECK_LIB([appindicator], [main])
# FIXME: Replace `main' with a function in `-lcairo':
AC_CHECK_LIB([cairo], [main])
# FIXME: Replace `main' with a function in `-lfontconfig':
AC_CHECK_LIB([fontconfig], [main])
# FIXME: Replace `main' with a function in `-lfreetype':
AC_CHECK_LIB([freetype], [main])
# FIXME: Replace `main' with a function in `-lm':
AC_CHECK_LIB([m], [main])
# FIXME: Replace `main' with a function in `-lnotify':
AC_CHECK_LIB([notify], [main])
# FIXME: Replace `main' with a function in `-lpng12':
AC_CHECK_LIB([png12], [main])
# FIXME: Replace `main' with a function in `-lpthread':
AC_CHECK_LIB([pthread], [main])
# FIXME: Replace `main' with a function in `-lrt':
AC_CHECK_LIB([rt], [main])

# Checks for header files.
AC_CHECK_HEADERS([malloc.h stdlib.h string.h sys/time.h unistd.h])

# Checks for typedefs, structures, and compiler characteristics.
AC_TYPE_MODE_T
AC_TYPE_PID_T

# Checks for library functions.
AC_FUNC_FORK
AC_FUNC_MALLOC
AC_FUNC_REALLOC
AC_CHECK_FUNCS([gettimeofday memset mkdir pow])

AC_OUTPUT</code></pre><ul id="r-335388" data-claire-element-id="335388"><li id="r-335385" data-claire-element-id="335385"><p id="r-335384" data-claire-element-id="335384">la première ligne permet de spécifier la version d'autoconf à utiliser. Pour ma part, je tourne sur la 2.65 ;</p></li><li id="r-335387" data-claire-element-id="335387"><p id="r-335386" data-claire-element-id="335386">dans la seconde, je donne le nom du projet, sa version et mon adresse mail (qui n'est pas ma vraie, inutile donc de spammer ce pauvre monsieur Dumoulin pour avoir de l'aide sur ce tutoriel. Contactez-moi plutôt sur le Site du Zéro ^^ ).</p></li></ul><p id="r-335389" data-claire-element-id="335389">Pour le reste, je n'expliquerai pas le fichier. Dites-vous simplement qu'il est optimisé pour permettre une configuration facile <em>via</em> quelques commandes dans la console et que la modification de sa configuration donnerait matière suffisante à un autre tutoriel.</p><aside id="r-335391" data-claire-element-id="335391" data-claire-semantic="information"><p id="r-335390" data-claire-element-id="335390">Vous pouvez également vous faciliter grandement la vie en utilisant la commande « autoscan » qui créera un <em>config.scan</em> à adapter comme ci-dessus et à renommer en <em>configure.ac</em>.</p></aside><p id="r-335392" data-claire-element-id="335392">Créons ensuite le fichier qui gèrera toute l'installation, le <strong>Makefile.am</strong> :</p><pre id="r-335393" data-claire-element-id="335393"><code>#polythello: Makefile.am 20011

AUTOMAKE_OPTIONS= gnu 
SUBDIRS = src/polythello

install:
        cp -p -r &quot;./src/monProjet&quot; &quot;./debian/source/&quot;
        ./src/monProjet/install-sh
        mkdir -p &quot;./debian/monProjet&quot;
        cp -p -r &quot;./datas/usr&quot; &quot;./debian/monProjet/&quot;
        cp -p &quot;./src/monProjet/monProjet&quot; &quot;./debian/monProjet/usr/bin/monProjet&quot;
        cp -p &quot;./src/monProjet/monProjet&quot; &quot;./debian/monProjet/usr/share/monProjet&quot;
        
distclean:
        -rm -f $(am__CONFIG_DISTCLEAN_FILES)
        -rm -f Makefile</code></pre><ul id="r-335408" data-claire-element-id="335408"><li id="r-335395" data-claire-element-id="335395"><p id="r-335394" data-claire-element-id="335394">Ce fichier copie d'abord les sources dans le bon répertoire pour qu'elles accompagnent le <em>debian</em>. Les options <strong>-r</strong> et <strong>-p</strong> veulent dire que la copie est récursive pour l'ensemble du dossier et qu'elle préserve les attributs des fichiers (par exemple, si un fichier est exécutable dans le dossier original, il le sera toujours dans le dossier copié).</p></li><li id="r-335397" data-claire-element-id="335397"><p id="r-335396" data-claire-element-id="335396">La préservation me permet la seconde ligne, où un habile fichier bash compile nos sources.</p></li><li id="r-335399" data-claire-element-id="335399"><p id="r-335398" data-claire-element-id="335398">Je crée un répertoire pour ce programme dans <em>debian</em>.</p></li><li id="r-335401" data-claire-element-id="335401"><p id="r-335400" data-claire-element-id="335400">Je copie toute la structure de fichiers que l'on a créée pour les mettre dans mon dossier <em>debian</em>.</p></li><li id="r-335403" data-claire-element-id="335403"><p id="r-335402" data-claire-element-id="335402">Le binaire, une fois compilé par <em>install-sh</em>, est placé dans <em>/usr/bin</em> afin qu'on puisse le lancer en l'appelant via la console.</p></li><li id="r-335405" data-claire-element-id="335405"><p id="r-335404" data-claire-element-id="335404">On procède de même dans <em>/usr/share/monProjet</em>.</p></li><li id="r-335407" data-claire-element-id="335407"><p id="r-335406" data-claire-element-id="335406">Vous pouvez laisser <strong>distclean</strong> comme ça ; il fait juste du nettoyage une fois que tout a bien été réalisé.</p></li></ul><aside id="r-335410" data-claire-element-id="335410" data-claire-semantic="information"><p id="r-335409" data-claire-element-id="335409">Pour ceux que ça étonnera, je ne passe en effet pas par un <em>Makefile.am</em> pour chaque binaire mais je crée un seul fichier <em>Makefile.am</em> pour tout le projet.<br/> La raison est simple : je profite du fait que <em>Launchpad </em>saura quelles bibliothèques il faut pour compiler (grâce à <em>Build-depends</em> dans mon fichier <em>control</em>, rappelez-vous !) pour le laisser se débrouiller avec mon script bash qui devrait tourner sans problème.</p></aside><p id="r-335411" data-claire-element-id="335411">Je vais donc simplement écrire, dans mon script bash <em>install-sh</em>, les lignes de commande qui me permettent de compiler, et le <em>Makefile.am</em> le lancera.</p><p id="r-335412" data-claire-element-id="335412">Rendons-nous dans <em>src/monProjet/</em> pour créer ce fichier <strong>install-sh</strong> :</p><pre id="r-335413" data-claire-element-id="335413"><code data-claire-semantic="bash">#!/bin/sh

qmake src/monProjet/projet.pro
make -B</code></pre><p id="r-335414" data-claire-element-id="335414">Je vais profiter du fait que j'utilise Qt pour employer <code data-claire-semantic="console">qmake</code> (enfin, si vous avez développé votre programme pour le terminal ou avec la SDL, ça ne changera pas grand-chose. Vous devriez savoir compiler en ligne de commande. :-° )</p><p id="r-335415" data-claire-element-id="335415">Le <strong>-B</strong> après <em>make</em> sert à forcer la compilation même si qmake ne détecte pas de changement de sources. Ainsi, on évite quelques bugs possibles et puis, si vous avez fait une boulette lors de votre configuration et que qmake refuse de reprendre l'installation parce qu'il a déjà compilé, vous éviterez ainsi ce problème.</p><aside id="r-335417" data-claire-element-id="335417" data-claire-semantic="warning"><p id="r-335416" data-claire-element-id="335416">N'oubliez pas de rendre votre fichier exécutable, en lui donnant les permissions 755 ou en lançant la commande <code data-claire-semantic="console">chmod +x Makefile.am</code>.</p></aside><div id="r-335419" data-claire-element-id="335419" data-claire-semantic="question"><p id="r-335418" data-claire-element-id="335418">Mais euh… Pourquoi ton fichier .pro s'appelle <strong>projet</strong> ? Il ne risque pas de compiler un fichier qui s'appellerait <strong>projet</strong>, après quoi il faudrait renommer toute l'installation ? :euh:</p></div><p id="r-335420" data-claire-element-id="335420">Petite astuce : quand vous ouvrez votre fichier .pro, vous pouvez spécifier le nom et l'emplacement du programme compilé dans le paramètre <strong>TARGET</strong>. C'est une petite astuce qui devrait être utile aux développeurs sous Qt. ;)</p><p id="r-335421" data-claire-element-id="335421">Bon, ben ce n'était pas si terrible. J'espère ne pas vous avoir fichu la frousse au début de cette partie et que vous me suivez encore.<br/> Prenez une petite pause, sortez un soda bien frais car maintenant, on va éprouver ce que nous avons créé ; nous allons tout construire et gare aux bugs ! :diable:</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad">Créer un dépôt Launchpad</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/creation-du-compte-launchpad">
Création du compte Launchpad
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/debian-dans-ubuntu">
Debian dans Ubuntu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/murmurer-a-l-oreille-des-deb">
Murmurer à l&#039;oreille des .deb
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/installation-automatique">
Installation automatique !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/empaquetage-et-chasse-aux-bugs">
Empaquetage et chasse aux bugs
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/murmurer-a-l-oreille-des-deb">
<span class="arrow"></span>
<span class="next">Murmurer à l&#039;oreille des .deb</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/empaquetage-et-chasse-aux-bugs">
<span class="next">Empaquetage et chasse aux bugs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Empaquetageetchasseauxbugs"></a><h2>Empaquetage et chasse aux bugs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/installation-automatique">
<span class="arrow"></span>
<span class="next">Installation automatique !</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-335423" data-claire-element-id="335423">Nous voici enfin dans la partie du tutoriel où on peut tester si tout tourne. Le seul problème sera le nombre de bugs qui arriveront.</p><aside id="r-335426" data-claire-element-id="335426" data-claire-semantic="warning"><p id="r-335424" data-claire-element-id="335424">Si vous avez bien suivi mes indications, le paquet se construira et s'installera sans problème. Mais si vous vous êtes trompés, vous devrez débugger en lisant bien les messages d'erreur de la console.</p><p id="r-335425" data-claire-element-id="335425">La plupart des bugs proviendront sûrement de problèmes dus à votre position dans le Makefile.am. Ajoutez <em>/bin/pwd</em> dans les commandes de l'installateur pour savoir où il se trouve entre deux commandes durant l'installation, si vous pensez qu'un bug pourrait provenir d'un chemin relatif vers un fichier incorrect. Ainsi, mon fichier <em>install-sh</em> n'appelle pas le <em>projet.pro</em> par rapport à son chemin relatif mais par rapport à celui du <em>Makefile.am</em>.<br/> Faites également attention au « versionnage » de votre package (si vous mettez à jour, changez bien toutes les versions car <em>Launchpad </em>refusera des paquets dont la version existe déjà ou est antérieure à la version compilée actuelle) et aux informations que vous communiquez dans <em>control</em> et <em>changelog</em>.<br/> Des bugs, dès lors non signalés, peuvent également survenir si certains de vos fichiers sont mal placés dans <em>datas</em> et s'installent donc mal depuis la racine de l'utilisateur.</p></aside><p id="r-335427" data-claire-element-id="335427">Pour les consignes aux victimes des affreux bugs, c'est fini. Passons donc à ce que vous attendez tant ! :)</p><p id="r-335428" data-claire-element-id="335428">Nous allons <strong>copier</strong> tout ce qui se trouve à la racine du projet, créer un dossier <strong>test</strong> dans lequel nous mettrons un dossier <strong>monProjet-0.1.0</strong> ou le nom de votre projet et sa version. Dans ce dernier dossier, nous collons tout ce qu'on a copié précédemment.</p><p id="r-335429" data-claire-element-id="335429">Voilà. Ainsi, si vous avez quelques problèmes lors de vos tests, vous gardez la version originale à portée de main. ^^</p><p id="r-335430" data-claire-element-id="335430">Nous sommes donc dans ce nouveau dossier dans la console et nous allons lancer la configuration automatique de ce dont nous aurons besoin (grâce au <strong>configure.ac</strong> que nous avons créé tout à l'heure et qui va devenir un fichier <strong>configure</strong>).</p><pre id="r-335431" data-claire-element-id="335431"><code data-claire-semantic="console">&gt;aclocal
&gt;autoheader
&gt;automake --gnu --copy --add-missing
&gt;autoconf</code></pre><p id="r-335432" data-claire-element-id="335432">Vous noterez que <code data-claire-semantic="console">automake</code> va créer les fichiers nécessaires à l'installation que nous aurions oubliés.</p><aside id="r-335434" data-claire-element-id="335434" data-claire-semantic="warning"><p id="r-335433" data-claire-element-id="335433">Si un problème survient avec <code data-claire-semantic="console">automake</code>, les <em>makefiles </em>sont défectueux et à revoir. Si <code data-claire-semantic="console">autoconf</code> échoue, ce sera dû à <strong>config.ac</strong>.</p></aside><p id="r-335435" data-claire-element-id="335435">Voilà ! <strong>configure</strong> existe, et, si tout va bien, <em>Launchpad </em>devrait faire :</p><pre id="r-335436" data-claire-element-id="335436"><code data-claire-semantic="console">&gt;./configure
&gt;make</code></pre><p id="r-335437" data-claire-element-id="335437">Et tout sera installé.</p><p id="r-335438" data-claire-element-id="335438">D'ailleurs, je vous invite à utiliser ces commandes afin de vérifier que tout s'installe bien. Observez ensuite le dossier <strong>debian</strong> et, si tout a été copié correctement ainsi que le binaire, c'est déjà un bon point.<br/> Sinon, il faudra passer en mode <strong>débug</strong> ! :magicien:</p><p id="r-335439" data-claire-element-id="335439">Une fois l'installation correctement effectuée dans le <em>debian</em>, vous pouvez effacer votre répertoire <strong>monProjet-0.1.0</strong> puis recopier à nouveau les données du répertoire et relancer toutes les commandes jusque <strong>autoconf</strong>.</p><p id="r-335440" data-claire-element-id="335440">Nous avons donc un programme compilable mais nous devons le mettre sous forme d'un paquet pour <em>Launchpad</em>.<br/> Il va falloir taper ceci dans le terminal :</p><pre id="r-335441" data-claire-element-id="335441"><code data-claire-semantic="console">&gt;debuild -S -sa --lintian</code></pre><p id="r-335442" data-claire-element-id="335442"><code data-claire-semantic="console">-S</code> permet de conserver les sources et <code data-claire-semantic="console">-sa</code> signifie que vous n'améliorez pas une source existante mais que vous en créez une. <strong>--lintian</strong> permet d'avoir quelques informations plus claires sur les étapes afin de mieux repérer les bugs.</p><p id="r-335443" data-claire-element-id="335443">Pour plus d'informations, lisez le <em>man debuild</em>.</p><p id="r-335444" data-claire-element-id="335444">Voilà, le paquet est fait !</p><p id="r-335445" data-claire-element-id="335445"><strong>Nous pouvons l'uploader sur <em>Lau</em>…</strong> Ah mais non ! <em>Launchpad</em> peut attendre des heures et des heures avant de compiler vos sources ( :waw: ), il vaudrait mieux vérifier que tout est bien installable avant de leur envoyer.</p><p id="r-335446" data-claire-element-id="335446">Nous allons donc utiliser <strong>pbuilder</strong>.<br/> Pour ce faire, voici la marche à suivre :</p><pre id="r-335447" data-claire-element-id="335447"><code data-claire-semantic="console">&gt;cd ..
&gt;sudo pbuilder build monProjet_0.1.0.dsc</code></pre><p id="r-335448" data-claire-element-id="335448">C'est parti ! Il va simuler l'installation des paquets, la compilation et la création du .deb tranquillement.</p><p id="r-335449" data-claire-element-id="335449">Si vous ne constatez aucun message d'erreur, vous pouvez vous rendre dans <strong>/var/cache/pbuilder/result</strong> où un .deb vous attendra.</p><p id="r-335450" data-claire-element-id="335450">Il n'y a plus qu'à l'installer pour vérifier que tout soit correct :</p><pre id="r-335451" data-claire-element-id="335451"><code data-claire-semantic="console">&gt;cd /var/cache/pbuilder/result
&gt;sudo dpkg -i monProjet_0.1.0.deb
&gt;monProjet</code></pre><p id="r-335452" data-claire-element-id="335452">Simplement, nous nous rendons là où se situe le .deb, nous l'installons puis nous testons la commande <strong>monProjet</strong> qui doit fonctionner si un binaire monProjet se trouve dans <em>/usr/bin</em>.<br/> Si tout va bien, vous pouvez également cliquer sur <em>Applications › Jeux</em> et <em>monProjet</em> sera là.</p><p id="r-335453" data-claire-element-id="335453">Sinon, quelque chose n'a pas été et il faut enfiler sa panoplie de débuggeur pour trouver où ça coince. :zorro:</p><p id="r-335454" data-claire-element-id="335454">Allez hop, on nettoie tout maintenant pour que ça fonctionne. Lançons donc un :</p><pre id="r-335455" data-claire-element-id="335455"><code data-claire-semantic="console">&gt;sudo dpkg -r monProjet_0.1.0.deb</code></pre><p id="r-335456" data-claire-element-id="335456">Et hop, le voilà désinstallé.</p><p id="r-335457" data-claire-element-id="335457">Revenons dans notre dossier <strong>test</strong>. Un fichier terminant par _source.changes devrait également être présent. C'est celui-là que nous enverrons à <em>Launchpad</em>.</p><p id="r-335458" data-claire-element-id="335458">Nous allons donc écrire :</p><pre id="r-335459" data-claire-element-id="335459"><code data-claire-semantic="console">&gt;dput ppa:jeandumoulin/monProjet monProjet_0.1.0_source.changes</code></pre><p id="r-335460" data-claire-element-id="335460">Et hop, si tout se passe bien, il a tout téléchargé.</p><p id="r-335461" data-claire-element-id="335461">Il vous reconnaîtra grâce à la signature que nous avons faite avec notre clé PGP sur le paquet lors de l'utilisation de debuild (« ah ben oui, c'est pour ça qu'il fallait un mot de passe » :o ).</p><p id="r-335462" data-claire-element-id="335462">Vous allez recevoir un mail qui vous dira si le paquet est accepté ou refusé et les informations sur ce refus. En principe, si vous avez bien suivi les étapes ci-dessus, il vous acceptera sans problème.</p><p id="r-335463" data-claire-element-id="335463">Une fois le mail d'acceptation reçu, rendez-vous sur votre page <em>Launchpad</em>, dans le dépôt monProjet que nous avions créé et, dans la barre de droite, cliquez sur <strong>View package details</strong>.</p><p id="r-335464" data-claire-element-id="335464">Vous arriverez sur une page de ce genre :</p><figure id="r-335466" data-claire-element-id="335467"><img id="r-335465" data-claire-element-id="335465" src="medias/uploads.siteduzero.com_files_315001_316000_315152.png" alt="Image utilisateur"/></figure><p id="r-335468" data-claire-element-id="335468">Vous y trouverez toutes les informations sur votre paquet, je vous laisse regarder. Juste un petit détail intéressant : si, dans <strong>Source</strong>, vous cliquez sur la petite flèche, toutes les informations propres au paquet vont défiler, dont les informations sur la construction du .deb pour architecture 32 et 64 bits.<br/> En cliquant dessus, vous aurez une idée de la priorité et le temps qu'il reste avant création du <strong>.deb </strong>. Si un problème a lieu lors de sa création, vous pourrez également avoir accès aux logs mais, vu que nous avons tout testé en interne, ça devrait aller ! ^^</p><p id="r-335469" data-claire-element-id="335469">On peut dire que ce tutoriel ne manquait pas de piquant.</p><p id="r-335470" data-claire-element-id="335470">J'espère qu'il vous a apporté une aide précieuse. Pour ma part, je remercie <strong>darkevolution</strong> du forum ubuntu-fr qui m'a donné de précieux conseils pour parvenir à vous offrir ce petit cours alors que je pataugeais encore il y a quelques jours en essayant de créer un dépôt pour mon projet de fin d'année. :-°</p><p id="r-335471" data-claire-element-id="335471">J'espère pour vous que ce premier logiciel distribué sera suivi de nombreux autres ! ;)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad">Créer un dépôt Launchpad</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/creation-du-compte-launchpad">
Création du compte Launchpad
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/debian-dans-ubuntu">
Debian dans Ubuntu
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/murmurer-a-l-oreille-des-deb">
Murmurer à l&#039;oreille des .deb
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/installation-automatique">
Installation automatique !
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/empaquetage-et-chasse-aux-bugs">
Empaquetage et chasse aux bugs
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/creer-un-depot-launchpad/installation-automatique">
<span class="arrow"></span>
<span class="next">Installation automatique !</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/creer-un-depot-launchpad.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:34:11 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/creer-un-depot-launchpad.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:52:48 GMT -->
</html>