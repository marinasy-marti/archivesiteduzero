<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/utilisez-macports.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:27:42 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/utilisez-macports.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:31:08 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Utilisez MacPorts !</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/utilisez-macports.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Utilisez MacPorts !</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#UtilisezMacPorts">Utilisez MacPorts !</a><br/><a href="#NotionsPrliminaires">Notions Préliminaires</a><br/><a href="#InstallerMacPorts">Installer MacPorts</a><br/><a href="#SeservirdeMacPorts">Se servir de MacPorts</a><br/><a href="#Plusd039options">Plus d&#039;options</a><br/></div>
<a name="UtilisezMacPorts"></a><h2>Utilisez MacPorts !</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/notions-preliminaires">
<span class="next">Notions Préliminaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-444487" data-claire-element-id="444487">Il existe de nombreuses façons d'installer un logiciel sous Mac OS X. La première consiste à faire comme la plupart des utilisateurs, et de télécharger le logiciel sur Internet, pour l'installer ensuite. Cette façon de procéder fonctionne pour beaucoup de programmes, mais parfois certains programmes spécifiques ne sont pas disponibles sous une forme facilement installable, voire ne sont carrément pas disponibles pour Mac. Il existe cependant des moyens <em>détournés</em> d'installer ces programmes. :)</p><p id="r-444488" data-claire-element-id="444488">MacPorts est ce qu'on appelle un gestionnaire de paquets. C'est un logiciel qui se charge d'installer un programme demandé : il va le télécharger, le &quot;préparer&quot;, et l'installer sur votre ordinateur, sans que vous ayez à faire autre chose que lui dire &quot;installe-moi ce logiciel.&quot; ;)</p>
</div><a name="NotionsPrliminaires"></a><h2>Notions Préliminaires</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/installer-macports">
<span class="next">Installer MacPorts</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-444489" data-claire-element-id="444489">C'est un fait, beaucoup de logiciels disponibles sur le Web sont très faciles d'installation. La plupart sont disponibles sous forme d'exécutable : c'est un fichier contenant du <em><a href="http://fr.wikipedia.org/wiki/Code_machine">code binaire</a></em> directement utilisable par votre ordinateur. Il n'y a donc aucune manipulation particulière à faire, à part installer le logiciel de la manière indiquée. :)</p><p id="r-444490" data-claire-element-id="444490">En revanche, certains logiciels (beaucoup en fait, mais peu connus sous Mac), particulièrement les <a href="http://fr.wikipedia.org/wiki/Logiciel libre">logiciels libres</a>, sont disponibles sous la forme de <em><a href="http://fr.wikipedia.org/wiki/Code_source">code source</a></em>. Ce code source décrit le fonctionnement du programme de façon claire pour un humain, mais l'ordinateur ne sait pas le lire. Il faut pour cela <em>compiler</em> le code source (avec un <a href="http://fr.wikipedia.org/wiki/Compilateur">compilateur</a>), c'est-à-dire le transformer en <em>code binaire</em>, utilisable par votre ordinateur. Cette manipulation, même si elle est simple dans beaucoup de cas, peut s'avérer très complexe sur Mac, tout particulièrement lorsque le logiciel que l'on cherche à compiler ne se présente pas pour Mac à l'origine (mais une fois compilé il fonctionne très bien).</p><p id="r-444491" data-claire-element-id="444491">Les <a href="http://fr.wikipedia.org/wiki/Dépendance_logicielle">dépendances</a> sont un des problèmes épineux que l'on rencontre lors de l'installation de tels logiciels. En effet, pour bien fonctionner, un programme est souvent dépendant de plusieurs autres programmes ou bibliothèques, qu'il faut aussi installer. Et bien souvent ces bibliothèques ont besoin d'autres bibliothèques pour être compilées, etc. :( Voici un schéma en guise d'exemple :</p><figure id="r-444493" data-claire-element-id="444494"><img id="r-444492" data-claire-element-id="444492" src="medias/uploads.siteduzero.com_files_206001_207000_206602.png" alt="Image utilisateur"/></figure><p id="r-444495" data-claire-element-id="444495"><em>Pour installer <code>wget</code>, il faut d'abord installer tout ça.</em></p><p id="r-444496" data-claire-element-id="444497"><a href="http://www.macports.org/"><img id="r-444497" data-claire-element-id="444496" src="medias/uploads.siteduzero.com_files_206001_207000_206328.png" alt="Image utilisateur"/></a>C'est là que le gestionnaire de paquets entre en scène. Il dispose d'une liste de <em><a href="http://fr.wikipedia.org/wiki/Paquetage_(logiciel)">paquets</a></em>. Les paquets sont des programmes disposés sous une forme compréhensible pour le gestionnaire : il y a une liste des dépendances, un mode d'emploi pour la compilation et l'installation, de la documentation, etc. Tout est centralisé. Il suffit de dire au gestionnaire &quot;installe-moi le logiciel X&quot;, et il installera les dépendances de ce logiciel, téléchargera et compilera le logiciel, et enfin l'installera, ainsi que sa documentation, au bon endroit sur votre disque dur. ;)</p><aside id="r-444499" data-claire-element-id="444499" data-claire-semantic="information"><p id="r-444498" data-claire-element-id="444498">Beaucoup de gestionnaires de paquets sous GNU/Linux téléchargent directement les formes binaires des logiciels. C'est le cas d'APT sur Debian et ses dérivés.<br/> MacPorts fait en revanche partie des gestionnaires de paquets qui téléchargent le code source du programme et le compilent.</p></aside><p id="r-444500" data-claire-element-id="444500">Évidement, un gestionnaire de paquets peut être utilisé pour désinstaller un logiciel précédemment installé, et aussi supprimer les dépendances devenues inutiles. Il peut aussi être utilisé pour mettre à jour un logiciel et ses dépendances. :)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports">Utilisez MacPorts !</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/notions-preliminaires">
Notions Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/installer-macports">
Installer MacPorts
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/se-servir-de-macports">
Se servir de MacPorts
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/plus-d-options">
Plus d&#039;options
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/installer-macports">
<span class="next">Installer MacPorts</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="InstallerMacPorts"></a><h2>Installer MacPorts</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/notions-preliminaires">
<span class="arrow"></span>
<span class="next">Notions Préliminaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/se-servir-de-macports">
<span class="next">Se servir de MacPorts</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-444502" data-claire-element-id="444502">Voici le site du projet MacPorts : <a href="http://www.macports.org/">http://www.macports.org/</a><br/> Vous pouvez y trouver (en anglais) les <a href="http://www.macports.org/install.php">instructions d'installation</a>, la <a href="http://guide.macports.org/">documentation</a>, la <a href="http://www.macports.org/ports.php?by=all">liste des paquets disponibles</a>, etc. Nous allons ici détailler la démarche d'installation. :)</p><p id="r-444503" data-claire-element-id="444503">On a dit que MacPorts compilait le code source des programme qu'il voulait installer. Malheureusement, MacPorts n'est pas un compilateur : il faut donc en installer un. ;) Apple fournit sur son DVD d'installation des logiciels &quot;optionnels&quot; lors de l'installation de Mac OS X sur un ordinateur. Il y a notamment les <strong><a href="http://fr.wikipedia.org/wiki/Xcode">Xcode Tools</a></strong>. C'est une suite de logiciels permettant le développement de programmes sous Mac OS X. Si vous ne les avez pas déjà installés, faites-le : il y a un installeur sur le DVD. Parmi ces Xcode Tools, il y a le compilateur <a href="http://fr.wikipedia.org/wiki/GNU_Compiler_Collection">GCC</a> (qui est d'ailleurs nécessaire au développement d'applications sur Mac). C'est lui que MacPorts utilise pour compiler les programmes qu'il installe.</p><p id="r-444504" data-claire-element-id="444504">Il y a une deuxième installation préliminaire à faire : installer <a href="http://fr.wikipedia.org/wiki/X Window System">X11</a>. X11 est le serveur graphique utilisé sur GNU/Linux. Il est nécessaire quand on installe des programmes qui n'ont pas étés développés pour Mac OS X. Pour les versions de Mac OS supérieures à 10.5, X11 est installé par défaut dans le dossier <em>/Applications/Utilitaires</em>. Si vous avez une version antérieure à 10.5, ou que X11 n'est tout simplement pas installé, il est disponible sur le DVD d'installation de Mac OS X. ;)</p><p id="r-444505" data-claire-element-id="444505">Vous pouvez à présent télécharger l'installeur de MacPorts <a href="http://www.macports.org/install.php">ici</a> (choisissez le lien qui correspond à votre version).<br/> Lancez l'installeur :</p><figure id="r-444507" data-claire-element-id="444508"><img id="r-444506" data-claire-element-id="444506" src="medias/uploads.siteduzero.com_files_206001_207000_206330.png" alt="Image utilisateur"/></figure><p id="r-444509" data-claire-element-id="444509">Il ne vous reste plus qu'à créer un dossier « MacPorts » dans votre dossier <em>Applications</em>, et voilà ! MacPorts est installé sur votre ordinateur, prêt à fonctionner ! :D</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports">Utilisez MacPorts !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/notions-preliminaires">
Notions Préliminaires
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/installer-macports">
Installer MacPorts
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/se-servir-de-macports">
Se servir de MacPorts
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/plus-d-options">
Plus d&#039;options
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/notions-preliminaires">
<span class="arrow"></span>
<span class="next">Notions Préliminaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/se-servir-de-macports">
<span class="next">Se servir de MacPorts</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="SeservirdeMacPorts"></a><h2>Se servir de MacPorts</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/installer-macports">
<span class="arrow"></span>
<span class="next">Installer MacPorts</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/plus-d-options">
<span class="next">Plus d&#039;options</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-444511" data-claire-element-id="444511">Il existe plusieurs façons de se servir de MacPorts. La méthode principale consiste à utiliser la <em>ligne de commande</em>. On peut donc s'adresser à MacPorts <em>via</em> des commandes, comme <code>install</code>, <code>upgrade</code>, etc. Il y a une commande pour chaque action possible.</p><aside id="r-444513" data-claire-element-id="444513" data-claire-semantic="information"><p id="r-444512" data-claire-element-id="444512">On utilise donc MacPorts avec l'application Terminal, située dans <em>/Applications/Utilitaires</em>. Contrairement à ce que beaucoup de gens pensent au premier abord, la ligne de commande n'est absolument pas dangereuse, et surtout pas avec MacPorts.</p></aside><p id="r-444514" data-claire-element-id="444514">Avant de commencer, il faut savoir que MacPorts s'installe dans le dossier <em>/opt/local</em>. Vous pouvez regarder dans <em>Macintosh HD</em>, il y a bien un nouveau dossier <em>opt</em>. Le problème, c'est que la commande de MacPorts se trouve dans ce dossier, et que celui-ci ne figure pas dans la variable <code>$PATH</code> (elle contient les dossiers où se trouvent les commandes : si MacPorts n'y est pas, on ne peut pas l'utiliser correctement). Il faut donc l'y ajouter.</p><p id="r-444515" data-claire-element-id="444515">Ouvrez donc Terminal, tapez la commande <code data-claire-semantic="console">echo 'export PATH=${PATH}:/opt/local/bin' &gt;&gt; ~/.profile</code> et appuyez sur &lt;Entrée&gt;. Relancez le Terminal, et tapez la commande <code data-claire-semantic="console">port</code>. C'est la commande de MacPorts.</p><pre id="r-444516" data-claire-element-id="444516"><code data-claire-semantic="console">MacPorts 1.8.1
Entering interactive mode... (&quot;help&quot; for help, &quot;quit&quot; to quit)
[Users/rosewood] &gt;</code></pre><p id="r-444517" data-claire-element-id="444517">Ici, vous êtes en mode interactif, c'est-à-dire que vous êtes <em>à l'intérieur</em> de MacPorts (plus possible de tout casser :p ).<br/> Vous l'aurez compris, MacPorts affiche sa version, un message d'accueil, ainsi qu'un <em>prompt</em>. Le texte entre crochets vous indique dans quel dossier vous vous situez (ici <code>Users/rosewood</code>).</p><p id="r-444518" data-claire-element-id="444518">Pour quitter tout ça, entrez la commande <code data-claire-semantic="console">quit</code>.</p><h2 id="r-les-ports-2" data-claire-element-id="444528">Les <code>ports</code></h2><p id="r-444519" data-claire-element-id="444519">Les <code>ports</code> sont les paquets dont on a parlé précédemment. Vous pouvez afficher la totalité des paquets avec la commande <code data-claire-semantic="console">list</code> :</p><pre id="r-444520" data-claire-element-id="444520"><code data-claire-semantic="console">[Users/rosewood] &gt; list
AppHack                        @1.1            aqua/AppHack
AppKiDo                        @0.971          aqua/AppKiDo
AquaLess                       @1.6            aqua/AquaLess
ArpSpyX                        @1.1            aqua/ArpSpyX
AssignmentTrackerX             @2.0beta3.1     aqua/AssignmentTrackerX
BigSQL                         @1.0            aqua/BigSQL
BiggerSQL                      @1.3.8          aqua/BiggerSQL
Books                          @3.2.4          aqua/Books
BwanaDik                       @3.2.1          aqua/BwanaDik
Cenon                          @3.83           aqua/Cenon

[[ Je coupe, c'est trop long :p ]]

zope-portaltransforms          @1.3.3          zope/zope-portaltransforms
zope-revisionmanager           @1.3.2          zope/zope-revisionmanager
zope-stripogram                @1.4            zope/zope-stripogram
zope-usersniffer               @1.21           zope/zope-usersniffer
zope-usertrack                 @1.1            zope/zope-usertrack
zope-validation                @1.3.1          zope/zope-validation
zope-zopetree                  @1.3            zope/zope-zopetree
zope-zopezen                   @0.5            zope/zope-zopezen
zope-zphotoslides              @1.3            zope/zope-zphotoslides
zope-zsyncer                   @0.6.1          zope/zope-zsyncer
[Users/rosewood] &gt;</code></pre><p id="r-444521" data-claire-element-id="444521">J'ai compté, il y a <strong>6435</strong> lignes :p . Vous remarquerez que le <em>prompt</em> est de nouveau là, vous pouvez donc taper une autre commande.</p><p id="r-444522" data-claire-element-id="444522">Dans la liste des paquets qui s'est affichée, vous pouvez déjà avoir un peu plus d'informations sur un paquet : vous avez son nom, sa version (<code>@1.3.1</code>), et sa catégorie (<code>aqua</code><code>/AquaLess</code>).</p><p id="r-444523" data-claire-element-id="444523">Le problème avec la commande <code>list</code>, c'est que si elle fait une liste exhaustive des paquets, elle n'est pas très pratique lorsque l'on cherche un paquet en particulier.<br/> C'est là qu'intervient la commande <code>search</code>. Cette commande prend un ou plusieurs paramètres : les mots-clés que vous souhaitez chercher. Elle va d'ailleurs chercher ces mots-clés dans le nom du paquet, mais aussi dans sa description. Chaque paquet possède une courte description des ses fonctionnalités, pour que vous puissiez savoir ce que fait le programme que vous allez installer.</p><pre id="r-444524" data-claire-element-id="444524"><code data-claire-semantic="console">[Users/rosewood] &gt; search hack
AppHack @1.1 (aqua, devel)
    Program for hacking application bundles.

blib @1.1.7 (graphics, blinkenlights)
    Library of useful things to hack the Blinkenlights

denyhosts @2.6 (security, sysutils)
    DenyHosts is a utility to help sys admins thwart ssh hackers

jnethack @3.4.3-0.10 (games, japanese)
    Classic dungeon adventure game, translated in Japanese.

nethack @3.4.3 (games)
    Classic dungeon adventure game.

p5-universal-can @1.15 (perl)
    Hack around people calling UNIVERSAL::can() as a function

Found 6 ports.</code></pre><p id="r-444525" data-claire-element-id="444525">Vous voyez donc tous les paquets qui correspondent à une recherche avec <em>hack</em> comme mot-clé.</p><p id="r-444526" data-claire-element-id="444526">Une fois que vous avez trouvé un paquet intéressant, vous pouvez utiliser la commande <code data-claire-semantic="console">info</code> pour obtenir des informations détaillées sur ce paquet : ces dépendances, son site web, ses <em>variantes</em>, le système-cible, etc.</p><pre id="r-444527" data-claire-element-id="444527"><code data-claire-semantic="console">[Users/rosewood] &gt; info nethack
nethack @3.4.3, Revision 2 (games)
Variants:             autopickup_exceptions, menucolors, universal, x11

Description:          Classic dungeon adventure game.
Homepage:             http://nethack.sourceforge.net/

Platforms:            darwin, freebsd
License:              unknown
Maintainers:          <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="720b171e1716321f1311021d0006015c1d0015">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></code></pre><h2 id="r-installer-un-paquet" data-claire-element-id="444538">Installer un paquet</h2><p id="r-444529" data-claire-element-id="444529">Pour installer un paquet, on utilise la commande <code data-claire-semantic="console">install</code>, en précisant le nom du paquet à installer. MacPorts va alors se charger d'installer les dépendances, de compiler les sources, etc. Essayons d'installer le paquet <em>fetch</em>.</p><aside id="r-444531" data-claire-element-id="444531" data-claire-semantic="warning"><p id="r-444530" data-claire-element-id="444530">Il faut avoir des privilèges administrateur pour pouvoir installer ou désintaller un paquet. Relancez donc <code>port</code> avec la commande <code data-claire-semantic="console">sudo port</code>, puis tapez votre mot de passe administrateur.</p></aside><pre id="r-444532" data-claire-element-id="444532"><code data-claire-semantic="console">[Users/rosewood] &gt; install fetch
---&gt;  Computing dependencies for fetch
---&gt;  Fetching libfetch
---&gt;  Verifying checksum(s) for libfetch
---&gt;  Extracting libfetch
---&gt;  Applying patches to libfetch
---&gt;  Configuring libfetch
---&gt;  Building libfetch
---&gt;  Staging libfetch into destroot
---&gt;  Installing libfetch @6.2.0-RELEASE_0+darwin
---&gt;  Activating libfetch @6.2.0-RELEASE_0+darwin
---&gt;  Cleaning libfetch
---&gt;  Fetching fetch
---&gt;  Verifying checksum(s) for fetch
---&gt;  Extracting fetch
---&gt;  Applying patches to fetch
---&gt;  Configuring fetch
---&gt;  Building fetch
---&gt;  Staging fetch into destroot
---&gt;  Installing fetch @6.2.0-RELEASE_0+darwin
---&gt;  Activating fetch @6.2.0-RELEASE_0+darwin
---&gt;  Cleaning fetch</code></pre><p id="r-444533" data-claire-element-id="444533">On peut voir que MacPorts installe d'abord la bibliothèque <em>libfetch</em>, puis installe ensuite le programme <em>fetch</em>, car <em>fetch</em> dépend de <em>libfetch</em> (c'est d'ailleurs la seule dépendance) :</p><figure id="r-444535" data-claire-element-id="444536"><img id="r-444534" data-claire-element-id="444534" src="medias/uploads.siteduzero.com_files_206001_207000_206603.png" alt="Image utilisateur"/></figure><p id="r-444537" data-claire-element-id="444537">On peut séparer le processus d'installation en plusieurs étapes. On a d'abord le téléchargement (<code>Fetching fetch</code> :p ), l'exécution du <em>script</em><code>./configure</code> (<code>Configuring fetch</code>), la compilation (<code>Building fetch</code>), l'activation (<code>Activating fetch</code>) et le nettoyage du paquet, tâche qui consiste à supprimer tous les fichiers liés à la compilation qui ne sont plus nécessaires.</p><h2 id="r-desinstaller-un-paquet" data-claire-element-id="444550">Désinstaller un paquet</h2><p id="r-444539" data-claire-element-id="444539">Pour désinstaller un paquet, on utilise la commande <code data-claire-semantic="console">uninstall</code>. Seulement, il arrive que l'on se heurte à quelques problèmes lors de la désinstallation. En effet, que se passe-t-il si on désinstalle un paquet qui était nécessaire au bon fonctionnement d'un autre ? Certaines dépendances ne sont nécessaires qu'à la compilation d'un paquet, mais d'autres sont nécessaires à l'exécution du programme. Essayons de désinstaller <em>libfetch</em> pour voir :</p><pre id="r-444540" data-claire-element-id="444540"><code data-claire-semantic="console">[Users/rosewood] &gt; uninstall libfetch
---&gt;  Unable to uninstall libfetch 6.2.0-RELEASE_0+darwin, the following ports depend on it:
---&gt;    fetch
Error: port uninstall failed: Please uninstall the ports that depend on libfetch first.
Goodbye</code></pre><p id="r-444541" data-claire-element-id="444541">MacPorts nous annonce gentiment que <em>fetch</em> est dépendant de <em>libfetch</em> et qu'on ne peut pas le désinstaller.</p><div id="r-444543" data-claire-element-id="444543" data-claire-semantic="question"><p id="r-444542" data-claire-element-id="444542">Il faudrait d'abord désinstaller <em>fetch</em> puis <em>libfetch</em> alors ? C'est un peu lourd...</p></div><p id="r-444544" data-claire-element-id="444544">Oui, on pourrait faire comme ça. Mais si on voulait désinstaller un paquet comme <em>xorg</em>, il faudrait supprimer les dizaines de paquets qui en sont dépendants. C'est effectivement trop lourd. :-° <br/> Heureusement, il existe deux <em>options</em> qui permettent de se simplifier la vie. Les options sont des paramètres passés aux commandes qui permettent d'en modifier le comportement.<br/> L'option <code>-f</code> permet de forcer la désinstallation du paquet, quoi qu'il arrive.</p><pre id="r-444545" data-claire-element-id="444545"><code data-claire-semantic="console">[Users/rosewood] &gt; uninstall -f libfetch
---&gt;  Unable to uninstall libfetch 6.2.0-RELEASE_0+darwin, the following ports depend on it:
---&gt;    fetch
Warning: Uninstall forced.  Proceeding despite dependencies.
---&gt;  Deactivating libfetch @6.2.0-RELEASE_0+darwin
---&gt;  Uninstalling libfetch @6.2.0-RELEASE_0+darwin</code></pre><p id="r-444546" data-claire-element-id="444546">Sauf que là, <em>fetch</em> sera toujours installé, mais ne fonctionnera plus. On n'a donc rien changé au problème, puisqu'au final on aura désinstallé les deux paquets un à un.</p><p id="r-444547" data-claire-element-id="444547">Il existe une option plus pratique : l'option <code>--follow-dependents</code>. Cette option va suivre les paquets qui sont dépendants du paquet que vous souhaitez désinstaller, et les désinstaller avant de s'occuper du vôtre.</p><pre id="r-444548" data-claire-element-id="444548"><code data-claire-semantic="console">[Users/rosewood] &gt; uninstall --follow-dependents libfetch
---&gt;  Deactivating fetch @6.2.0-RELEASE_0+darwin
---&gt;  Uninstalling fetch @6.2.0-RELEASE_0+darwin
---&gt;  Deactivating libfetch @6.2.0-RELEASE_0+darwin
---&gt;  Uninstalling libfetch @6.2.0-RELEASE_0+darwin</code></pre><p id="r-444549" data-claire-element-id="444549">Et voilà ! On a réussi à désinstaller deux paquets en une ligne ! :)</p><h2 id="r-mettre-a-jour-un-paquet" data-claire-element-id="444559">Mettre à jour un paquet</h2><p id="r-444551" data-claire-element-id="444551">Pour mettre à jour un paquet, c'est-à-dire télécharger les nouvelles sources et compiler le nouveau logiciel, on utilise la commande <code data-claire-semantic="console">upgrade</code>. Si le paquet peut être mis à jour, la procédure est lancée. Si ce n'est pas la cas, MacPorts ne fera rien.</p><div id="r-444553" data-claire-element-id="444553" data-claire-semantic="question"><p id="r-444552" data-claire-element-id="444552">Pour vérifier qu'on a la dernière version du paquet disponible, comment s'y prend MacPorts ?</p></div><p id="r-444554" data-claire-element-id="444554">MacPorts possède une liste de tous les paquets disponible. Il compare donc la version du paquet installé avec celle de la liste. Cependant, ce système pose une limite : si la liste des paquets n'est pas à jour, MacPorts ne fera jamais les mises à jour de vos paquets. Il faut donc lui dire de temps en temps de mettre à jour la liste, avec la commande <code data-claire-semantic="console">sync</code>.</p><p id="r-444555" data-claire-element-id="444555">Il existe une autre commande qui permet de faire la mise à jour des paquets, mais qui installe la dernière version de MacPorts en même temps. C'est la commande <code data-claire-semantic="console">selfupdate</code>.</p><aside id="r-444557" data-claire-element-id="444557" data-claire-semantic="warning"><p id="r-444556" data-claire-element-id="444556">Sur d'autres systèmes que Mac OS X (MacPorts fonctionne aussi sur les *BSD), la commande <code data-claire-semantic="console">selfupdate</code> ne fait <strong>que</strong> la mise à jour de MacPorts, mais ne récupère pas la nouvelle liste des paquets. Il faut alors utiliser la commande <code data-claire-semantic="console">sync</code>.</p></aside><p id="r-444558" data-claire-element-id="444558">Voilà, vous savez à présent faire un usage basique de MacPorts.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports">Utilisez MacPorts !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/notions-preliminaires">
Notions Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/installer-macports">
Installer MacPorts
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/se-servir-de-macports">
Se servir de MacPorts
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/plus-d-options">
Plus d&#039;options
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/installer-macports">
<span class="arrow"></span>
<span class="next">Installer MacPorts</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/plus-d-options">
<span class="next">Plus d&#039;options</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Plusd039options"></a><h2>Plus d&#039;options</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/se-servir-de-macports">
<span class="arrow"></span>
<span class="next">Se servir de MacPorts</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-444561" data-claire-element-id="444561">Il existe plusieurs façons d'utiliser MacPorts en ligne de commande. La première est celle que l'on a pratiquée jusqu'ici, c'est-à-dire le mode « interactif » de MacPorts. On rentrait donc les commandes <strong>dans</strong> MacPorts.</p><p id="r-444562" data-claire-element-id="444562">La seconde technique consiste à utiliser la commande de MacPorts (rappel : c'est <code data-claire-semantic="console">port</code>), pour exécuter chacune des actions. Cette méthode est plus souple, car elle permet de lancer MacPorts en <a href="http://www.siteduzero.com/tutoriel-3-67789-executer-des-programmes-en-arriere-plan.html#ss_part_1">tâche de fond</a>, et ainsi de ne pas mobiliser la console (on peut donc faire d'autres choses en même temps ;) ).</p><p id="r-444563" data-claire-element-id="444563">Ouvrez donc votre terminal. Cette fois, on va écrire les commandes d'utilisation de MacPorts (<code>install</code>, <code>search</code>, etc.) à la suite de la commande <code data-claire-semantic="console">port</code>, comme ceci :</p><pre id="r-444564" data-claire-element-id="444564"><code data-claire-semantic="console">powerbook-rosewood:~ prs$ port search hex
bdump @3.5 (sysutils)
    allows viwing hex and ASCII formats side by side

bvi @1.3.2 (editors)
    A vi-like binary file (hex)editor

ghex @2.24.0 (gnome)
    GHex - a binary editor.

hexdiff @0.0.50 (textproc)
    displays differences between two binary files

hexedit @1.2.12 (sysutils)
    A hexeditor for the console.

hexfiend @17 (editors, aqua)
    HexFiend is a fast and clever hex editor

p5-convert-binhex @1.119 (perl)
    Module for converting to and from BinHex encoded files

p5-data-hexify @1.00 (perl)
    Perl extension for hexdumping arbitrary data

uni2html @1.1 (textproc)
    converts UTF-8 to corresponding HTML hexadecimal entities

Found 9 ports.</code></pre><p id="r-444565" data-claire-element-id="444565"><em>Remarquez que le prompt est celui du </em><a href="http://fr.wikipedia.org/wiki/Shell_(informatique)">shell</a><em>, pas de MacPorts.</em></p><p id="r-444566" data-claire-element-id="444566">On écrit donc : <code data-claire-semantic="console">port &lt;commande&gt; &lt;paramètre&gt;</code>. Si on veut installer ou supprimer un paquet, il faut les droits administrateurs. On utilise donc la commande <code data-claire-semantic="console">sudo</code> couplée avec <code data-claire-semantic="console">port</code>. ;) <br/> Exemple :</p><pre id="r-444567" data-claire-element-id="444567"><code data-claire-semantic="console">powerbook-rosewood:~ prs$ sudo port install wget
Password:
--&gt; ... [Installation]</code></pre><h2 id="r-moderer-l-affichage" data-claire-element-id="444575">Modérer l'affichage</h2><p id="r-444568" data-claire-element-id="444568">Cette utilisation de la commande <code data-claire-semantic="console">port</code> permet de jouer avec des options inaccessibles depuis la commande interactive. Il s'agit de <code>-v</code> et de <code>-d</code>, qui servent à afficher plus d'informations lors de l'installation des paquets. L'option <code>-v</code> (« v » comme <em>verbose</em>) permet l'affichage de toutes les actions effectuées par MacPorts. On peut voir <strong>très</strong> en détails la compilation, l'exécution du script <code>./configure</code>, etc. L'option <code>-d</code> (« d » comme <em>debug</em>), permet l'affichage d'<strong>encore plus</strong> d'informations. Cette option est plutôt destinée aux développeurs qui souhaitent faire un paquet pour MacPorts.</p><aside id="r-444570" data-claire-element-id="444570" data-claire-semantic="warning"><p id="r-444569" data-claire-element-id="444569">Les options <code>-v</code> et <code>-d</code> doivent être directement associées à la commande <code data-claire-semantic="console">port</code>.</p></aside><p id="r-444571" data-claire-element-id="444571">Voici un exemple :</p><pre id="r-444572" data-claire-element-id="444572"><code data-claire-semantic="console">powerbook-rosewood:~ prs$ sudo port -v install fetch
---&gt;  Computing dependencies for fetch.
---&gt;  Fetching fetch
---&gt;  Verifying checksum(s) for fetch
---&gt;  Checksumming fetch-6.2.0-RELEASE.tar.bz2
---&gt;  Extracting fetch
---&gt;  Extracting fetch-6.2.0-RELEASE.tar.bz2
---&gt;  Applying patches to fetch
patching file fetch.c
---&gt;  Configuring fetch
---&gt;  Building fetch

cc -I/opt/local/include -D__FBSDID=__RCSID -c fetch.c
gzip -cn fetch.1 &gt; fetch.1.gz
cc -I/opt/local/include -D__FBSDID=__RCSID -L/opt/local/lib -o fetch fetch.o -lfetch -lssl -lcrypto
---&gt;  Staging fetch into destroot

[[ Je coupe, c'est trop verbeux... ]]

---&gt;  Compressing man pages for fetch
man1/fetch.1:    55.8% -- replaced with man1/fetch.1.gz
man1/fetch.1.gz: changing permissions from 00644 to 00444
---&gt;  Installing fetch @6.2.0-RELEASE_0+darwin
---&gt;  Activating fetch @6.2.0-RELEASE_0+darwin
---&gt;  Cleaning fetch
---&gt;  Removing build directory for fetch</code></pre><p id="r-444573" data-claire-element-id="444573">Et encore, j'ai coupé les lignes trop larges pour une meilleure lecture, et supprimé une longue liste de fichiers. :p Mais on voit bien les lignes de compilation (celles qui commencent par <code>cc</code>).</p><p id="r-444574" data-claire-element-id="444574">Par opposition, il existe l'option <code>-q</code>, qui supprime tous les messages affichés par MacPorts. C'est très utile lorsqu'on lance MacPorts en tâche de fond, et qu'on veut éviter d'avoir des messages qui surgissent sans qu'on le veuille. De même que <code>-v</code>, l'option <code>-q</code> s'utilise directement avec la commande <code data-claire-semantic="console">port</code>.</p><h2 id="r-les-pseudo-paquets" data-claire-element-id="444584">Les pseudo-paquets</h2><p id="r-444576" data-claire-element-id="444576">MacPorts possède un système de <em>pseudo-paquets</em>. Ce sont en fait des mots-clés qui permettent de trier les paquets par catégorie, par exemple, ou de faire la liste des dépendances d'un paquet.</p><p id="r-444577" data-claire-element-id="444577">Prenons un exemple : nous voulons faire la liste de tous les paquets qui sont dans la catégorie <code>aqua</code> (c'est la catégorie des applications natives sous Mac OS X). On utilise donc soit la commande <code data-claire-semantic="console">list</code>, que l'on connait déjà, soit la commande <code data-claire-semantic="console">echo</code>, qui fait une liste simple du nom des paquets.</p><pre id="r-444578" data-claire-element-id="444578"><code data-claire-semantic="console">[Users/rosewood] &gt; echo category:aqua
abiword                         
adium                           
AppHack                         
AppKiDo                         
AquaLess                        
aquaterm                        
ArpSpyX                         
arrsync                         
AssignmentTrackerX              
bean                            
BiggerSQL                       
BigSQL                          
binclocken                      
Books                           
BwanaDik                        
Cenon                           
Chmox                           
CocoaDialog                     
codeblocks</code></pre><p id="r-444579" data-claire-element-id="444579">Notez bien la syntaxe avec les deux-points. Il y a le nom du mot-clé, deux-points, puis le nom de ce que l'on cherche (ici une catégorie).</p><p id="r-444580" data-claire-element-id="444580">Il existe d'autres mots-clés qui à eux seuls représentent un ensemble de paquets. Le mot-clé <code>outdated</code> représente les paquets qui ne sont pas à jour. On peut ainsi simplifier les mises à jours.</p><pre id="r-444581" data-claire-element-id="444581"><code data-claire-semantic="console">[Users/rosewood] &gt; upgrade outdated</code></pre><p id="r-444582" data-claire-element-id="444582">Cette commande met à jour tous les paquets pas frais. :-°</p><p id="r-444583" data-claire-element-id="444583">La liste complète des mots-clés peut être trouvée dans la documentation.</p><h2 id="r-les-variantes-d-un-paquet" data-claire-element-id="444599">Les variantes d'un paquet</h2><p id="r-444585" data-claire-element-id="444585">Lorsqu'il est installé, un paquet est compilé avec des <em>options d'origine</em>. Ce sont souvent des fonctionnalités choisies par le développeur. En revanche, l'utilisateur final peut choisir de compiler un logiciel avec ou sans certaines fonctions particulières.</p><p id="r-444586" data-claire-element-id="444586">Par exemple, on peut voir quand on affiche les informations du paquet <code>codeblocks</code> que MacPorts nous affiche une ligne <em>variants</em>, qui sont les différentes options. Il y a <em>aqua</em>, <em>macosx</em>, <em>universal</em>, et <em>x11</em>. Les options <em>aqua</em> et <em>macosx</em> sont à peu de choses près équivalentes. Elle ne servent que lorsque l'on utilise MacPorts depuis une autre plateforme que Mac OS X. L'option <em>universal</em> permet de compiler le logiciel à la fois pour une architecture Intel (pour les Macs récents) et pour une architecture PowerPC (pour les vieux Macs, comme le mien :p ). L'option <em>x11</em> permet de compiler le logiciel pour le serveur graphique X11, contrairement à l'option <em>aqua</em>, qui permet de compiler pour le serveur graphique Aqua (préférable sous Mac OS X).</p><p id="r-444587" data-claire-element-id="444587">Voici comment ajouter une variante à l'installation :</p><pre id="r-444588" data-claire-element-id="444588"><code data-claire-semantic="console">install codeblocks +universal</code></pre><p id="r-444589" data-claire-element-id="444589">Pour enlever une variante mise par défaut, il faut utiliser le symbole <code>-</code>.</p><pre id="r-444590" data-claire-element-id="444590"><code data-claire-semantic="console">install codeblocks -aqua +x11</code></pre><p id="r-444591" data-claire-element-id="444591">Pour le reste des multiples options, je vous laisse vous <a href="http://www.puredarwin.org/developers/macports/port">documenter</a> par vous-même.</p><p id="r-444592" data-claire-element-id="444592">Voilà !</p><p id="r-444593" data-claire-element-id="444593">Vous savez à présent installer un logiciel en utilisant MacPorts. Sachez qu'il existe un autre gestionnaire de paquets sous Mac, nommé <a href="http://www.finkproject.org/">Fink</a>.</p><p id="r-444594" data-claire-element-id="444594">De plus, il existe différentes façons, peut-être plus intuitives, mais moins puissantes, d'utiliser MacPorts : il y a notamment plusieurs logiciels faisant office d'interface graphique pour MacPorts. On peut donc citer <a href="http://porticus.alittledrop.com/">Porticus</a> et <a href="http://www.codebykevin.com/portauthority.html">PortAuthority</a>. ;)</p><p id="r-444595" data-claire-element-id="444595">Merci de m'avoir lu, et bonne continuation !</p><p id="r-444596" data-claire-element-id="444596"><em>Merci à vyk12 pour ses relectures attentives. :)</em></p><div id="r-444598" data-claire-element-id="444598"><p id="r-444597" data-claire-element-id="444597">Merci à <a href="http://www.siteduzero.com/membres-294-85974.html">vyk12</a> pour ses relectures attentives. :)</p></div>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports">Utilisez MacPorts !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/notions-preliminaires">
Notions Préliminaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/installer-macports">
Installer MacPorts
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/se-servir-de-macports">
Se servir de MacPorts
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/plus-d-options">
Plus d&#039;options
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisez-macports/se-servir-de-macports">
<span class="arrow"></span>
<span class="next">Se servir de MacPorts</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/utilisez-macports.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 08:27:47 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/utilisez-macports.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:31:09 GMT -->
</html>