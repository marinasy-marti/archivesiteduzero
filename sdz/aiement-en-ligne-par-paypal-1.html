<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/aiement-en-ligne-par-paypal-1.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 11:16:14 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/aiement-en-ligne-par-paypal-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:48:53 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Paiement en ligne par PayPal</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/paiement-en-ligne-par-paypal-1.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Paiement en ligne par PayPal</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#PaiementenligneparPayPal">Paiement en ligne par PayPal</a><br/><a href="#Prsentation">Présentation</a><br/><a href="#Prsentation">Présentation</a><br/><a href="#PourquoiPayPal">Pourquoi PayPal ?</a><br/><a href="#Commentamarche">Comment ça marche ?</a><br/><a href="#ParquelmoyencommuniqueraveclesitedePayPal">Par quel moyen communiquer avec le site de PayPal ?</a><br/><a href="#Autresmthodesdecommunication">Autres méthodes de communication</a><br/><a href="#Communicationavecl039APINVP">Communication avec l&#039;API NVP</a><br/><a href="#Prparationduterrain">Préparation du terrain</a><br/><a href="#Communicationavecl039APINVP">Communication avec l&#039;API NVP</a><br/><a href="#Paiementavecl039APINVP">Paiement avec l&#039;API NVP</a><br/><a href="#IntgrationdansPHP">Intégration dans PHP</a><br/><a href="#UtilisationdelafonctioncURL">Utilisation de la fonction cURL</a><br/><a href="#Rcuprerlesparamtresdansuntableau">Récupérer les paramètres dans un tableau</a><br/><a href="#Lepaiement...oupas">Le paiement... ou pas</a><br/><a href="#Touteslesinfosdupaiement">Toutes les infos du paiement</a><br/><a href="#Miseenproduction">Mise en production</a><br/><a href="#MiseenplacedulogoPayPal">Mise en place du logo PayPal</a><br/><a href="#Annexes">Annexes</a><br/><a href="#Liensutiles">Liens utiles</a><br/><a href="#Listedesserveursdeconnexion">Liste des serveurs de connexion</a><br/><a href="#Exemplescomplets">Exemples complets</a><br/><a href="#Appelsdel039APIetrponses">Appels de l&#039;API et réponses</a><br/></div>
<a name="PaiementenligneparPayPal"></a><h2>Paiement en ligne par PayPal</h2><div class="content" role="article">
<p id="r-482069" data-claire-element-id="482069">Dans ce tutoriel, vous allez apprendre à intégrer le système de paiement autonome de PayPal, sur un site web, en PHP.</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Prsentation"></a><h2>Présentation</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
<span class="next">Présentation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-482072" data-claire-element-id="482072">Dans cette partie, vous allez voir ce qu'est PayPal et comment fonctionne ce système de paiement lorsqu'il est mis en place sur un site internet.</p>
</div><a name="Prsentation"></a><h2>Présentation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">
<span class="arrow"></span>
<span class="next">Présentation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
<span class="next">Pourquoi PayPal ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-presentation-130" data-claire-element-id="482085">Présentation</h4><h5 id="r-qu-est-ce-que-paypal" data-claire-element-id="482084">Qu'est-ce que PayPal ?</h5><figure id="r-482074" data-claire-element-id="482075"><img id="r-482073" data-claire-element-id="482073" src="medias/uploads.siteduzero.com_files_157001_158000_157434.gif" alt="ebaY"/></figure><p id="r-482076" data-claire-element-id="482076"><a href="https://www.paypal.com/fr/mrb/pal=SSS2BCWJSDXDQ"><strong>PayPal</strong></a> est un système de paiement en ligne permettant aux surfeurs du Web d'acheter en toute sécurité sur Internet.<br/> Le site bien connu <a href="http://www.ebay.fr/">www.ebay.fr</a> est le principal intéressé. Il propose le paiement des articles achetés sur <strong>eBay</strong>, via <strong>PayPal</strong>. Et pour cause, il se trouve que <strong>eBay</strong> est propriétaire de <strong>PayPal</strong> depuis 2002.</p><p id="r-482077" data-claire-element-id="482077">Pour plus d'informations, visitez le site de PayPal : <a href="https://www.paypal.com/fr/mrb/pal=SSS2BCWJSDXDQ">www.paypal.fr</a>.</p><h6 id="r-comment-ca-marche-22" data-claire-element-id="482083">Comment ça marche ?</h6><p id="r-482078" data-claire-element-id="482078">C'est un peu comme une banque virtuelle. Vous y déposez de l'argent par chèque, ou par virement bancaire par exemple. Sauf que ça ne vous rapporte aucun intérêt.<br/> Ensuite, lorsque vous souhaitez acheter quelque chose sur Internet et que le site en question vous propose de payer par PayPal, vous virez le montant de votre achat directement sur le compte du vendeur.<br/> Le vendeur n'a plus qu'à faire l'opération inverse pour récupérer l'argent de son compte PayPal. Bien entendu il peut le laisser sur son compte s'il souhaite à son tour acheter quelque chose sur Internet.</p><figure id="r-482080" data-claire-element-id="482081"><img id="r-482079" data-claire-element-id="482079" src="medias/uploads.siteduzero.com_files_172001_173000_172468.jpg" alt="Image utilisateur"/></figure><p id="r-482082" data-claire-element-id="482082">Il est également possible de payer par carte de crédit. Ainsi, lorsque vous achetez quelque chose, l'argent est débité de votre carte de crédit pour aller sur le compte PayPal du vendeur. C'est un avantage pour le vendeur, mais également pour l'acheteur. L'acheteur n'a pas besoin de confier son numéro de carte de crédit à un vendeur qu'il ne connaît pas, et le vendeur y gagne financièrement. En effet, pour permettre le paiement par carte de crédit sur un site web, il faut débourser vraiment beaucoup d'argent, et les contraintes de sécurité peuvent êtres relativement lourdes.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">
<span class="arrow"></span>
<span class="next">Présentation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
<span class="next">Pourquoi PayPal ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="PourquoiPayPal"></a><h2>Pourquoi PayPal ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
<span class="arrow"></span>
<span class="next">Présentation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
<span class="next">Comment ça marche ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pourquoi-paypal" data-claire-element-id="482099">Pourquoi PayPal ?</h4><p id="r-482086" data-claire-element-id="482086">Beaucoup de sociétés proposent des systèmes de paiement en ligne comme par exemple <strong>Moneybookers</strong>, <strong>Clik2Pay</strong> ou encore <strong>NETELLER</strong>, et bien d'autres encore.</p><p id="r-482087" data-claire-element-id="482087">D'ailleurs, si ça vous intéresse, j'ai également écrit un tutoriel sur le payement via <a href="tutoriel-3-34056-paiement-en-ligne-par-moneybookers.html">Moneybookers</a>. Il est disponible sur le Site du Zéro, <a href="tutoriel-3-34056-paiement-en-ligne-par-moneybookers.html">--&gt; sur cette page &lt;--</a>.</p><p id="r-482088" data-claire-element-id="482088">Mais pour répondre à cette question, j'ai quelques arguments.</p><ul id="r-482097" data-claire-element-id="482097"><li id="r-482090" data-claire-element-id="482090"><p id="r-482089" data-claire-element-id="482089">Le paiement en ligne par <strong>PayPal</strong> est probablement le plus connu des services de paiement par Internet en France et dans beaucoup d'autres pays d'Europe. Il peut donc jouer en votre avantage pour vendre un bien ou un service sur Internet. Si votre visiteur a déjà un compte sur <strong>PayPal</strong>, il sera plus disposé à vous acheter quelque chose que s'il doit encore s'inscrire sur un autre site qu'il ne connaît pas.</p></li><li id="r-482092" data-claire-element-id="482092"><p id="r-482091" data-claire-element-id="482091">Il permet également le paiement direct par carte de crédit. Si le visiteur ne vous connaît pas, il n'aura pas très confiance en vous et ne souhaitera pas vous laisser son numéro de carte de crédit. Alors qu'en passant par PayPal, il a la certitude que vous ne pourrez pas faire usage de sa carte de crédit à son insu, puisque c'est PayPal qui gèrera la transaction.</p></li><li id="r-482094" data-claire-element-id="482094"><p id="r-482093" data-claire-element-id="482093"><strong>PayPal</strong> est simple d'utilisation (pour le client qui achète quelque chose sur votre site).</p></li><li id="r-482096" data-claire-element-id="482096"><p id="r-482095" data-claire-element-id="482095">Il est très largement répandu dans la plupart des pays du monde. Vous pouvez ainsi espérer booster vos ventes dans le monde entier.</p></li></ul><p id="r-482098" data-claire-element-id="482098">Par contre, ce qui peut repousser certains sites à utiliser ce système de paiement, c'est qu'il demande pas mal de connaissances pour être mis en place sur votre site web. C'est d'ailleurs pour cela que j'ai écrit ce tutoriel, alors pas de panique, suivez-moi, je vous montrerai le chemin ! :ange:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
<span class="arrow"></span>
<span class="next">Présentation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
<span class="next">Comment ça marche ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Commentamarche"></a><h2>Comment ça marche ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
<span class="arrow"></span>
<span class="next">Pourquoi PayPal ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
<span class="next">Par quel moyen communiquer avec le site de PayPal ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-comment-ca-marche-23" data-claire-element-id="482136">Comment ça marche ?</h4><p id="r-482100" data-claire-element-id="482100">Vous trouvez sur le site de PayPal des documentations techniques concernant l'intégration de ce système de paiement sur votre site web. Certaines sont en anglais et d'autres en français.<br/> Je vais donc essayer de regrouper tout ce dont vous avez besoin de savoir dans ce tutoriel et vous expliquer en détail, pas à pas, ce que vous devez faire.</p><p id="r-482101" data-claire-element-id="482101">Mais avant, il faut bien comprendre toutes les étapes d'un paiement.</p><h5 id="r-ce-qui-se-passe-lors-d-un-paiement" data-claire-element-id="482135">Ce qui se passe lors d'un paiement</h5><p id="r-482102" data-claire-element-id="482102">La transaction s'effectue en plusieurs points.</p><ul id="r-482129" data-claire-element-id="482129"><li id="r-482104" data-claire-element-id="482104"><p id="r-482103" data-claire-element-id="482103">Le visiteur est sur votre site et vous achète des objets (tableaux, montres, votre grand-mère ou encore des stylos) ou un service (petites annonces, accès à des contenus payants, vidéo de cu... lture à l'ancienne des champs de maïs, etc.).</p></li><li id="r-482115" data-claire-element-id="482115"><p id="r-482105" data-claire-element-id="482105">Le visiteur clique sur le bouton de payement PayPal. À ce moment-là, il va se passer plusieurs choses...</p><ul id="r-482114" data-claire-element-id="482114"><li id="r-482107" data-claire-element-id="482107"><p id="r-482106" data-claire-element-id="482106"><strong>1. </strong>Le serveur de votre site web va appeler une API PayPal. C'est un programme situé sur le serveur de PayPal. Vous allez lui donner toutes les informations concernant le paiement (prix, devise, etc.).</p></li><li id="r-482109" data-claire-element-id="482109"><p id="r-482108" data-claire-element-id="482108"><strong>2. </strong>Le serveur vous retourne une chaîne de caractères alphanumérique pour identifier le paiement. Cette chaîne s'appelle un jeton, ou « token » en anglais.</p></li><li id="r-482111" data-claire-element-id="482111"><p id="r-482110" data-claire-element-id="482110"><strong>3. </strong>Vous redirigez votre client sur le site de PayPal, en y ajoutant en paramètre le jeton obtenu auparavant, afin qu'il puisse effectuer le paiement.</p></li><li id="r-482113" data-claire-element-id="482113"><p id="r-482112" data-claire-element-id="482112"><strong>4. </strong>Le visiteur choisit le mode de paiement depuis le site de <strong>PayPal</strong> (carte de crédit ou versement direct depuis le solde de son compte).</p></li></ul></li><li id="r-482126" data-claire-element-id="482126"><p id="r-482116" data-claire-element-id="482116">Le visiteur est redirigé sur votre site. Là encore, il se passe beaucoup de choses...</p><ul id="r-482125" data-claire-element-id="482125"><li id="r-482118" data-claire-element-id="482118"><p id="r-482117" data-claire-element-id="482117"><strong>5.</strong><em> Votre serveur va envoyer une seconde demande au serveur <strong>PayPal</strong> via les <strong>API</strong> (en envoyant le jeton obtenu dans la première phase), afin de connaître les détails du client <strong>(facultatif)</strong>.</em></p></li><li id="r-482120" data-claire-element-id="482120"><p id="r-482119" data-claire-element-id="482119"><strong>5b.</strong><em> Le serveur PayPal vous retourne les informations client (nom, prénom, etc.) <strong>(facultatif)</strong>.</em></p></li><li id="r-482122" data-claire-element-id="482122"><p id="r-482121" data-claire-element-id="482121"><strong>6. </strong>Vous envoyez une troisième et dernière demande au serveur <strong>PayPal</strong> via les API, afin de finaliser la transaction, et de connaître le résultat de la transaction finale.</p></li><li id="r-482124" data-claire-element-id="482124"><p id="r-482123" data-claire-element-id="482123"><strong>6b.</strong> Le serveur PayPal vous informe si le paiement a été accepté ou non.</p></li></ul></li><li id="r-482128" data-claire-element-id="482128"><p id="r-482127" data-claire-element-id="482127"><strong>7. </strong>Il ne vous reste plus qu'à exécuter la suite de vos traitements et d'afficher la page adéquate à votre visiteur (« Merci » en cas de paiement, autre message en cas d'annulation du paiement :colere2: «?!# @!!?!?»).</p></li></ul><p id="r-482130" data-claire-element-id="482130">Voici un petit schéma pour mieux comprendre :</p><figure id="r-482132" data-claire-element-id="482133"><img id="r-482131" data-claire-element-id="482131" src="medias/uploads.siteduzero.com_files_157001_158000_157436.jpg" alt="Shema Express checkout"/></figure><p id="r-482134" data-claire-element-id="482134"><em>Image tirée de la documentation officielle PayPal</em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
<span class="arrow"></span>
<span class="next">Pourquoi PayPal ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
<span class="next">Par quel moyen communiquer avec le site de PayPal ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ParquelmoyencommuniqueraveclesitedePayPal"></a><h2>Par quel moyen communiquer avec le site de PayPal ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
<span class="arrow"></span>
<span class="next">Comment ça marche ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
<span class="next">Autres méthodes de communication</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-par-quel-moyen-communiquer-avec-le-site-de-paypal" data-claire-element-id="482160">Par quel moyen communiquer avec le site de PayPal ?</h4><p id="r-482137" data-claire-element-id="482137">PayPal met à disposition deux techniques. Par le protocole SOAP, ou par l'API nommé <strong>NVP PayPal</strong>.</p><h5 id="r-fonctionnement-du-protocole-soap" data-claire-element-id="482145">Fonctionnement du protocole SOAP</h5><aside id="r-482139" data-claire-element-id="482139" data-claire-semantic="warning"><p id="r-482138" data-claire-element-id="482138">ATTENTION : pour les âmes sensibles, veuillez ignorer les trois lignes suivantes.</p></aside><p id="r-482140" data-claire-element-id="482140">La communication s'effectue par le protocole SOAP. C'est un protocole RPC orienté objet bâti sur XML.<br/> Un protocole <strong>RPC</strong> est un protocole d'appel de procédures à distance.<br/> Le <strong>XML</strong> est un langage informatique de balisage générique.</p><p id="r-482141" data-claire-element-id="482141"><strong>o_O Ouah ! Ça en fait des mots barbares !!!</strong></p><p id="r-482142" data-claire-element-id="482142">Pour simplifier, cela consiste à créer une feuille XML et de l'envoyer au serveur PayPal par une fonction spécifique appelée SOAP.<br/> Ou au contraire, de recevoir une feuille XML de la part de PayPal, et de la lire afin de récupérer les informations.</p><h6 id="r-une-feuille-xml-peut-ressembler-a-ceci" data-claire-element-id="482144">Une feuille XML peut ressembler à ceci :</h6><pre id="r-482143" data-claire-element-id="482143"><code data-claire-semantic="xml">&lt;SOAP-ENV:Header&gt;
  &lt;RequesterCredentials xmlns=?urn:ebay:api:PayPalAPI?xsi:type=?ebl:CustomSecurityHeaderType?&gt;
    &lt;Credentials xmlns=?urn:ebay:apis:eBLBaseComponents?xsi:type=?ebl:UserIdPasswordType?&gt;
	&lt;Username&gt;vendeur_1236594550_biz_api1.siteduzero.co&lt;/Username&gt;
	&lt;Password&gt;SEFYITJFG8QRHN1S&lt;/Password&gt;
	&lt;Signature&gt;ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n&lt;/Signature&gt;
	&lt;Subject&gt;authorizing_account_emailaddress&lt;/Subject&gt;
    &lt;/Credentials&gt;
  &lt;/RequesterCredentials&gt;
&lt;/SOAP-ENV:Header&gt;</code></pre><h5 id="r-fonctionnement-de-l-api-nvp" data-claire-element-id="482151">Fonctionnement de l'API NVP</h5><p id="r-482146" data-claire-element-id="482146">Le NVP PayPal est plus facile à utiliser. Il permet de faire la même chose que le protocole SOAP, sauf qu'au lieu d'envoyer et de réceptionner des données formatées en XML, on envoie et réceptionne des données par l'URL.</p><h6 id="r-les-requetes-ou-resultats-de-cette-api-ressembleront-plutot-a-cela" data-claire-element-id="482150">Les requêtes ou résultats de cette API ressembleront plutôt à cela :</h6><p id="r-482147" data-claire-element-id="482147"><cite>Citation : URL</cite></p><blockquote id="r-482149" data-claire-element-id="482149"><p id="r-482148" data-claire-element-id="482148"><em><strong>https://api-3t.sandbox.paypal.com/nvp?VERSION=56.0&amp;USER=vendeur_1236594550_biz_api1.siteduzero.com&amp;PWD=SEFYITJFG8QRHN1S&amp;SIGNATURE=ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n&amp;METHOD=SetExpressCheckout&amp;AMT=10.00&amp;RETURNURL=http://www.siteduzero.com/return.php&amp;CANCELURL=http://www.siteduzero.com/cancel.php.</strong></em></p></blockquote><h5 id="r-mais-alors-lequel-utiliser-soap-ou-nvp" data-claire-element-id="482159">Mais alors lequel utiliser ? SOAP ou NVP ?</h5><p id="r-482152" data-claire-element-id="482152">Je ne vais pas vous dire d'utiliser l'un ou l'autre, vous êtes libres de choisir celui qui vous convient le mieux. Par contre, je vais vous aider à faire votre choix.</p><p id="r-482153" data-claire-element-id="482153">La grosse différence entre ces deux API est au niveau de l'utilisation. Le protocole SOAP s'utilise à l'aide de la POO, tandis que l'API NVP est en mode procédural (comme appris dans le cours PHP de M@teo21).<br/> Mais en dehors du mode de programmation, on peut également se pencher sur l'aspect de relecture. Il est plus facile de visionner ou de comprendre un résultat au format XML qu'au format URL.</p><p id="r-482154" data-claire-element-id="482154">Donc si vous êtes des programmeurs confirmés et que vous avez l'habitude de coder vos pages en Programmation Orientée Objet, je vous conseille le protocole <strong>SOAP</strong>.<br/> Si au contraire vous programmez habituellement en mode procédural, ou si vous ne vous sentez tout simplement pas à l'aise avec la POO, je vous conseille le <strong>NVP</strong>.</p><aside id="r-482156" data-claire-element-id="482156" data-claire-semantic="information"><p id="r-482155" data-claire-element-id="482155">Dans ce cours, je vais vous expliquer le mode de communication <strong>NVP</strong>.</p></aside><p id="r-482157" data-claire-element-id="482157">Mais si vous décidez plutôt de programmer grâce au protocole SOAP, vous trouverez toutes les informations nécessaires sur le site de PayPal. Peut-être que prochainement j'ajouterai un chapitre afin d'expliquer également ce deuxième mode de communication, mais je dois vous avouer que je fais partie de la deuxième catégorie de personnes (ceux qui ne maîtrisent pas super bien la POO).</p><p id="r-482158" data-claire-element-id="482158">Quoi qu'il en soit, dans un premier temps, les préparatifs sont identiques.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
<span class="arrow"></span>
<span class="next">Comment ça marche ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
<span class="next">Autres méthodes de communication</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Autresmthodesdecommunication"></a><h2>Autres méthodes de communication</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
<span class="arrow"></span>
<span class="next">Par quel moyen communiquer avec le site de PayPal ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">
<span class="next">Communication avec l&#039;API NVP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-autres-methodes-de-communication" data-claire-element-id="482198">Autres méthodes de communication</h4><p id="r-482161" data-claire-element-id="482161">Il existe encore d'autres méthodes de communication avec le serveur de PayPal.</p><h5 id="r-paiement-statique" data-claire-element-id="482166">Paiement « statique »</h5><h6 id="r-bouton-acheter-maintenant" data-claire-element-id="482163">Bouton Acheter maintenant</h6><p id="r-482162" data-claire-element-id="482162">Vous pouvez par exemple simplement ajouter un bouton de paiement en y indiquant le montant, votre compte PayPal, et toutes autres informations concernant le paiement. Lorsque le client clique sur ce bouton, il sera invité à se connecter sur le site de PayPal afin d'effectuer le paiement.<br/> Cependant avec cette méthode, vous êtes obligés de consulter votre compte pour constater que le paiement a effectivement eu lieu. Vous ne pouvez donc pas automatiser de traitements sur votre site.</p><h6 id="r-dons" data-claire-element-id="482165">Dons</h6><p id="r-482164" data-claire-element-id="482164">Vous avez également la possibilité de créer un bouton &quot;Dons&quot;, qui permet à vos visiteurs de vous verser de l'argent sur votre compte sans contrepartie.</p><h5 id="r-paiement-dynamique" data-claire-element-id="482197">Paiement « dynamique »</h5><h6 id="r-notification-instantanee-de-paiement-ipn" data-claire-element-id="482190">Notification instantanée de paiement (IPN)</h6><p id="r-482167" data-claire-element-id="482167">Afin d'automatiser les traitements sur votre site web suite à un paiement, il existe une méthode appelée <strong>Notification instantanée de paiement (IPN)</strong>. Celle-ci, couplée au bouton <strong>Acheter maintenant</strong>, vous permet d'appeler des traitements sur votre site web, lorsqu'un paiement a été effectué sur votre compte.</p><p id="r-482168" data-claire-element-id="482168">C'est, en quelque sorte, l'opération inverse aux API PayPal. Au lieu d'appeler l'API PayPal pour effectuer le paiement, c'est PayPal qui appelle votre script lorsqu'un paiement a été effectué.</p><p id="r-482169" data-claire-element-id="482169">Dans cette configuration, le paiement s'effectue comme ceci :</p><ul id="r-482184" data-claire-element-id="482184"><li id="r-482171" data-claire-element-id="482171"><p id="r-482170" data-claire-element-id="482170">le client clique sur le bouton Payer Maintenant ;</p></li><li id="r-482173" data-claire-element-id="482173"><p id="r-482172" data-claire-element-id="482172"><strong>1. </strong>le client effectue le paiement sur le site de PayPal,</p></li><li id="r-482175" data-claire-element-id="482175"><p id="r-482174" data-claire-element-id="482174"><strong>2. </strong>le serveur de PayPal appelle une page de votre site pour annoncer qu'un paiement a été effectué,</p></li><li id="r-482177" data-claire-element-id="482177"><p id="r-482176" data-claire-element-id="482176"><strong>3. </strong>vous appelez une page du serveur PayPal afin de vérifier que c'est bien PayPal qui vous envoie la confirmation de paiement, et non pas un individu qui veut se faire passer pour PayPal,</p></li><li id="r-482179" data-claire-element-id="482179"><p id="r-482178" data-claire-element-id="482178"><strong>4. </strong>PayPal appelle à nouveau une page de votre site web afin de vous informer si s'est bien lui qui vous envoie cette requête ou non,</p></li><li id="r-482181" data-claire-element-id="482181"><p id="r-482180" data-claire-element-id="482180">vous appelez une dernière fois une page de PayPal pour l'informer que vous avez bien reçu sa réponse ;</p></li><li id="r-482183" data-claire-element-id="482183"><p id="r-482182" data-claire-element-id="482182"><strong>5. </strong>vous pouvez effectuer les traitements contenus sur votre site.</p></li></ul><p id="r-482185" data-claire-element-id="482185">Voici une petite image pour illustrer tout cela :</p><figure id="r-482187" data-claire-element-id="482188"><img id="r-482186" data-claire-element-id="482186" src="medias/uploads.siteduzero.com_files_181001_182000_181367.jpg" alt="Paiement IPN PayPal"/></figure><p id="r-482189" data-claire-element-id="482189"><em>Image tirée de la documentation officielle PayPal</em></p><h6 id="r-contenu-du-tutoriel" data-claire-element-id="482196">Contenu du tutoriel</h6><p id="r-482191" data-claire-element-id="482191">Cette méthode peut paraître un peu plus simple que celles utilisant les API. Cependant mon cours ne parle malheureusement pas de cette méthode.<br/> Peut-être que, lorsque j'aurai un peu plus de temps, je rédigerai une sous-partie de ce tutoriel consacrée à cette méthode.</p><p id="r-482192" data-claire-element-id="482192">Mais si celle-ci vous intéresse, vous pouvez retrouver toutes les informations nécessaires sur le site officiel de PayPal. J'ai mis à disposition les liens dans la partie Annexes de ce tutoriel.</p><div id="r-482194" data-claire-element-id="482194" data-claire-semantic="question"><p id="r-482193" data-claire-element-id="482193">Si quelqu'un souhaite rédiger le(s) chapitre(s) concernant la méthode IPN ou SOAP, n'hésitez pas à me contacter par MP, afin de compléter ce tutoriel.</p></div><p id="r-482195" data-claire-element-id="482195">On se retrouve au chapitre suivant pour effectuer votre premier paiement virtuel de test. o_O <br/> Rassurez-vous : on va créer un compte exprès pour les tests, vous n'aurez pas besoin de dépenser un centime. :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
<span class="arrow"></span>
<span class="next">Par quel moyen communiquer avec le site de PayPal ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">
<span class="next">Communication avec l&#039;API NVP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Communicationavecl039APINVP"></a><h2>Communication avec l&#039;API NVP</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
<span class="arrow"></span>
<span class="next">Autres méthodes de communication</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
<span class="next">Préparation du terrain</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-482200" data-claire-element-id="482200">Dans ce chapitre vous allez voir comment utiliser l'API NVP de PayPal.<br/> Nous allons effectuer un paiement « manuellement » pour bien comprendre le fonctionnement.</p><p id="r-482201" data-claire-element-id="482201">Mais avant, il va falloir créer un compte sur le site consacré aux tests de PayPal.</p>
</div><a name="Prparationduterrain"></a><h2>Préparation du terrain</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">
<span class="arrow"></span>
<span class="next">Communication avec l&#039;API NVP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
<span class="next">Communication avec l&#039;API NVP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-preparation-du-terrain-4" data-claire-element-id="482258">Préparation du terrain</h4><p id="r-482202" data-claire-element-id="482202">Comme pour tout programme, avant d'avoir quelque chose qui fonctionne parfaitement, il faut faire beaucoup de tests.<br/> C'est pourquoi, pour ne pas vous ruiner inutilement dans vos tests, vous avez la possibilité de créer plusieurs comptes fictifs de test, sur un site annexe spécialement créé pour les développeurs. Ce site est une copie conforme du site PayPal, sauf que l'argent est fictif. Ainsi, vous pouvez transférer de l'argent d'un compte à l'autre sans problème.</p><p id="r-482203" data-claire-element-id="482203">Ce site a pour nom PayPal Sandbox. Le mot <em>sandbox</em> veut dire &quot;bac à sable&quot; en français. On utilise cette appellation pour faire référence à un environnement de test pour logiciels ou sites web.</p><p id="r-482204" data-claire-element-id="482204">Ce site est accessible à cette adresse : <a href="https://developer.paypal.com/">https://developer.paypal.com</a>.</p><aside id="r-482206" data-claire-element-id="482206" data-claire-semantic="information"><p id="r-482205" data-claire-element-id="482205">Le site de développement est en anglais... Il est temps de sortir le dictionnaire FR/EN. :(</p></aside><h5 id="r-creation-des-comptes-de-tests" data-claire-element-id="482218">Création des comptes de tests</h5><p id="r-482207" data-claire-element-id="482207">Commencez par créer un compte sur le site : <a href="https://developer.paypal.com/">https://developer.paypal.com/</a> en cliquant sur <strong>Sign Up Now</strong>.</p><aside id="r-482209" data-claire-element-id="482209" data-claire-semantic="warning"><p id="r-482208" data-claire-element-id="482208">Utilisez un autre nom d'utilisateur que celui de votre compte PayPal. Prévoyez donc une nouvelle adresse e-mail si vous ne disposez pas d'une deuxième.</p></aside><p id="r-482210" data-claire-element-id="482210">Une fois inscrits, vous recevrez un e-mail de confirmation. Cliquez sur le lien contenu dans cet e-mail afin d'activer votre compte.</p><p id="r-482211" data-claire-element-id="482211">Ensuite, connectez-vous à votre <strong>Sandbox</strong>, cliquez sur le lien <strong>Test Accounts</strong>, puis sur <strong>preconfigured </strong>et créez un compte <strong>Seller</strong>. C'est ce compte qui vous servira de compte commercial pour le vendeur fictif de votre site web.<br/> Vous pouvez également utiliser l'option <strong>Create Manually</strong>, mais c'est plus long. L'option pré-configurée affecte à votre place un nom, un prénom, une adresse, etc.</p><figure id="r-482213" data-claire-element-id="482214"><img id="r-482212" data-claire-element-id="482212" src="medias/uploads.siteduzero.com_files_172001_173000_172471.jpg" alt="Sandbox PayPal"/></figure><aside id="r-482216" data-claire-element-id="482216" data-claire-semantic="information"><p id="r-482215" data-claire-element-id="482215">Pensez à recopier le mot de passe quelque part afin de pouvoir vous connecter à ce compte.</p></aside><p id="r-482217" data-claire-element-id="482217">Renouvelez l'expérience en créant un second compte, mais cette fois <strong>Buyer</strong>, afin de créer le compte fictif de l'acheteur. Cliquez ensuite sur <strong>Show Advanced Options</strong>, pour lui attribuer un montant disponible de départ... Profitez-en... Ce n'est pas tous les jours qu'on peut s'attribuer plusieurs milliers d'euros en un seul clic. :p</p><h5 id="r-recuperer-les-donnees-api" data-claire-element-id="482257">Récupérer les données API</h5><p id="r-482219" data-claire-element-id="482219">Pour se connecter à l'API de PayPal, nous aurons besoin d'un nom d'utilisateur, d'un mot de passe ainsi que d'une signature. Pour vous procurer tout cela, il faut procéder comme suit.</p><p id="r-482220" data-claire-element-id="482220">Dans la gestion de vos comptes Sandbox, cliquez sur le bouton <strong>Enter Sandbox Test Site</strong>. Ce bouton vous ouvre un lien sur le site <a href="https://www.sandbox.paypal.com/">https://www.sandbox.paypal.com/</a>.<br/> À ce moment-là, cliquez sur le bouton <strong>Connectez-vous</strong>, puis entrez le nom d'utilisateur et le mot de passe de votre compte <strong>vendeur</strong> créé précédemment.</p><aside id="r-482222" data-claire-element-id="482222" data-claire-semantic="warning"><p id="r-482221" data-claire-element-id="482221">L'adresse e-mail ne correspond pas exactement à celle que vous avez entrée lors de la création. PayPal y a ajouté un identifiant de 10 chiffres, ainsi que de l'abréviation '<strong>per</strong>' pour un compte privé ou '<strong>biz</strong>' pour un compte commercial.<br/> Vous pouvez voir le login complet sur la page <strong>Test Accounts</strong> de votre Sandbox.</p></aside><p id="r-482223" data-claire-element-id="482223">Une fois dans la gestion du compte, commencez par vérifier celui-ci. Ceci consiste à vérifier votre compte bancaire, afin d'être sûr que celui-ci vous appartienne. Comme nous sommes sur un site de test, vous n'aurez pas à indiquer vos vraies coordonnées bancaires. Votre statut passera automatiquement au statut <strong>Vérifié </strong>après la procédure suivante :</p><ul id="r-482248" data-claire-element-id="482248"><li id="r-482225" data-claire-element-id="482225"><p id="r-482224" data-claire-element-id="482224">cliquez sur le lien <strong>État : Non-vérifié</strong> ;</p></li><li id="r-482227" data-claire-element-id="482227"><p id="r-482226" data-claire-element-id="482226">prenez l'une des options qui vous sont proposées ;</p></li><li id="r-482236" data-claire-element-id="482236"><p id="r-482228" data-claire-element-id="482228">si vous avez choisi la vérification par compte bancaire :</p><ul id="r-482235" data-claire-element-id="482235"><li id="r-482230" data-claire-element-id="482230"><p id="r-482229" data-claire-element-id="482229">remplissez tous les champs de la banque avec des valeurs bidon. Il suffit de vous affaler sur votre clavier, vous verrez, ça marche très bien. En général, ça vous donne quelque chose du genre : <strong><em>klsaudbyh</em></strong>,</p></li><li id="r-482232" data-claire-element-id="482232"><p id="r-482231" data-claire-element-id="482231">lorsqu'on vous demandera d'imprimer l'autorisation de prélèvement, cliquez simplement sur le bouton <strong>Imprimer</strong> ; lorsque le panneau de sélection de votre imprimante s'affiche, cliquez sur <strong>Annuler</strong> ; ceci activera le bouton <strong>continuer</strong>,</p></li><li id="r-482234" data-claire-element-id="482234"><p id="r-482233" data-claire-element-id="482233">et enfin cliquez sur le bouton <strong>Soumettre</strong> ; votre statut sera passé à l'état <strong>Vérifié</strong> ;</p></li></ul></li><li id="r-482247" data-claire-element-id="482247"><p id="r-482237" data-claire-element-id="482237">dans le cas d'une vérification par carte de crédit :</p><ul id="r-482246" data-claire-element-id="482246"><li id="r-482239" data-claire-element-id="482239"><p id="r-482238" data-claire-element-id="482238">conservez les informations pré-remplies, puis cliquez sur le lien <strong>Continuer</strong>,</p></li><li id="r-482241" data-claire-element-id="482241"><p id="r-482240" data-claire-element-id="482240">retournez sur la page d'accueil de votre compte, puis cliquez à nouveau sur le lien <strong>Non-vérifié</strong>,</p></li><li id="r-482243" data-claire-element-id="482243"><p id="r-482242" data-claire-element-id="482242">la page vous demandera d'entrer 4 chiffres de vérification : entrez des chiffres au hasard, puis cliquez sur <strong>Continuer</strong>,</p></li><li id="r-482245" data-claire-element-id="482245"><p id="r-482244" data-claire-element-id="482244">votre statut sera passé à l'état <strong>Vérifié</strong>.</p></li></ul></li></ul><figure id="r-482250" data-claire-element-id="482251"><img id="r-482249" data-claire-element-id="482249" src="medias/uploads.siteduzero.com_files_172001_173000_172474.jpg" alt="Sandbox PayPal - Vérifier"/></figure><p id="r-482252" data-claire-element-id="482252">Maintenant que votre compte est vérifié, créons les données API. Pour ce faire, cliquez sur le lien <strong>Modifier les préférences</strong>, puis cliquez sur <strong>Accès à l'API</strong>. Et enfin cliquez sur <strong>Demander des informations d'authentification API</strong>. Et pour terminer, choisissez <strong>Demandez une signature API</strong>.</p><p id="r-482253" data-claire-element-id="482253">Relevez l'<strong>identifiant API</strong>, le <strong>mot de passe API</strong> ainsi que <strong>la signature de l'API</strong>. Vous en aurez besoin plus tard.</p><figure id="r-482255" data-claire-element-id="482256"><img id="r-482254" data-claire-element-id="482254" src="medias/uploads.siteduzero.com_files_172001_173000_172475.jpg" alt="Sandbox PayPal Get API"/></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">
<span class="arrow"></span>
<span class="next">Communication avec l&#039;API NVP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
<span class="next">Communication avec l&#039;API NVP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Communicationavecl039APINVP"></a><h2>Communication avec l&#039;API NVP</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
<span class="arrow"></span>
<span class="next">Préparation du terrain</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
<span class="next">Paiement avec l&#039;API NVP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-communication-avec-l-api-nvp" data-claire-element-id="482367">Communication avec l'API NVP</h4><h5 id="r-utilisation-de-l-api-nvp" data-claire-element-id="482305">Utilisation de l'API NVP</h5><p id="r-482259" data-claire-element-id="482259">Afin de bien comprendre le principe, nous allons commencer par appeler l'API manuellement.</p><p id="r-482260" data-claire-element-id="482260">Rendez-vous à cette page : <a href="https://api-3t.sandbox.paypal.com/nvp">https://api-3t.sandbox.paypal.com/nvp</a>.</p><p id="r-482261" data-claire-element-id="482261">Il s'agit de la page appelant le programme API NVP de PayPal. Vous verrez que lorsque vous ouvrez cette page, il y a un gros charabia qui est affiché.</p><p id="r-482262" data-claire-element-id="482262"><cite>Citation : URL</cite></p><blockquote id="r-482264" data-claire-element-id="482264"><p id="r-482263" data-claire-element-id="482263"><strong>ACK=Failure&amp;L_ERRORCODE0=81002&amp;L_SHORTMESSAGE0=Unspecified%20Method&amp;L_LONGMESSAGE0=Method%20Specified%20is%20not%20Supported&amp;L_SEVERITYCODE0=Error</strong></p></blockquote><p id="r-482265" data-claire-element-id="482265">C'est en fait une liste de paramètres encodée URL. C'est ce que vous ajoutez en paramètres de vos pages PHP, après le point d'interrogation. Les paramètres sont séparés par des &amp; , et les noms des paramètres sont séparés de leurs valeurs par un =.<br/> Certains caractères (comme par exemple <strong> !*'();:@&amp;=+$,/?%#[]</strong>) sont convertis en % suivis de leurs valeurs hexadécimales.</p><p id="r-482266" data-claire-element-id="482266">En PHP, vous pouvez retranscrire cette chaîne à l'aide de la fonction <strong>urldecode</strong>. Ce qui nous donne :</p><p id="r-482267" data-claire-element-id="482267"><cite>Citation : URL</cite></p><blockquote id="r-482269" data-claire-element-id="482269"><p id="r-482268" data-claire-element-id="482268"><strong>ACK=Failure&amp;L_ERRORCODE0=81002&amp;L_SHORTMESSAGE0=Unspecified Method&amp;L_LONGMESSAGE0=Method Specified is not Supported&amp;L_SEVERITYCODE0=Error</strong></p></blockquote><p id="r-482270" data-claire-element-id="482270">Bon d'accord, ce n'est pas beaucoup plus clair. Mais après avoir séparé chacun des paramètres, on obtient quelque chose de plus lisible :</p><ul id="r-482281" data-claire-element-id="482281"><li id="r-482272" data-claire-element-id="482272"><p id="r-482271" data-claire-element-id="482271"><strong>ACK</strong>=Failure</p></li><li id="r-482274" data-claire-element-id="482274"><p id="r-482273" data-claire-element-id="482273"><strong>L_ERRORCODE0</strong>=81002</p></li><li id="r-482276" data-claire-element-id="482276"><p id="r-482275" data-claire-element-id="482275"><strong>L_SHORTMESSAGE0</strong>=Unspecified Method</p></li><li id="r-482278" data-claire-element-id="482278"><p id="r-482277" data-claire-element-id="482277"><strong>L_LONGMESSAGE0</strong>=Method Specified is not Supported</p></li><li id="r-482280" data-claire-element-id="482280"><p id="r-482279" data-claire-element-id="482279"><strong>L_SEVERITYCODE0</strong>=Error</p></li></ul><p id="r-482282" data-claire-element-id="482282"><strong>ACK</strong> correspond au résultat. Il peut contenir les valeurs suivantes :</p><ul id="r-482293" data-claire-element-id="482293"><li id="r-482284" data-claire-element-id="482284"><p id="r-482283" data-claire-element-id="482283"><strong>Success</strong> en cas de succès ;</p></li><li id="r-482286" data-claire-element-id="482286"><p id="r-482285" data-claire-element-id="482285"><strong>SuccessWithWarning</strong> en cas de succès, mais lorsqu'il s'est passé quelque chose d'anormal ;</p></li><li id="r-482288" data-claire-element-id="482288"><p id="r-482287" data-claire-element-id="482287"><strong>Failure</strong> en cas d'échec ;.</p></li><li id="r-482290" data-claire-element-id="482290"><p id="r-482289" data-claire-element-id="482289"><strong>FailureWithWarning</strong> en cas d'échec ;</p></li><li id="r-482292" data-claire-element-id="482292"><p id="r-482291" data-claire-element-id="482291"><strong>Warning</strong> en cas d'échec ;</p></li></ul><p id="r-482294" data-claire-element-id="482294">En cas d'erreur, elle est expliquée dans les variables suivantes. Ces noms de variables sont numérotés afin de pouvoir en définir plusieurs, si plusieurs erreurs ont été détectées.</p><ul id="r-482303" data-claire-element-id="482303"><li id="r-482296" data-claire-element-id="482296"><p id="r-482295" data-claire-element-id="482295"><strong>L_ERRORCODE0</strong> correspond au code de l'erreur. Ce numéro peut vous servir à <em>monitorer</em> une erreur dans votre programme. (Par exemple : si l'erreur 007 apparaît, faites appel à James Bond !)</p></li><li id="r-482298" data-claire-element-id="482298"><p id="r-482297" data-claire-element-id="482297"><strong>L_SHORTMESSAGE0</strong> vous explique brièvement le problème.</p></li><li id="r-482300" data-claire-element-id="482300"><p id="r-482299" data-claire-element-id="482299"><strong>L_LONGMESSAGE0</strong> vous explique précisément la nature de l'erreur.</p></li><li id="r-482302" data-claire-element-id="482302"><p id="r-482301" data-claire-element-id="482301"><strong>L_SEVERITYCODE0</strong> définit le niveau de gravité de l'erreur. (S'il comporte plusieurs messages mais que seul l'un d'entre eux empêche le programme de fonctionner, recherchez le niveau 'Error', afin de comprendre pourquoi ça ne fonctionne pas.)</p></li></ul><p id="r-482304" data-claire-element-id="482304">Dans notre exemple précédent, rien n'a fonctionné, car il ne reconnaît pas le traitement que nous avons souhaiter effectuer. Normal, puisqu'on ne lui a rien demandé... :p</p><h5 id="r-creation-du-jeton-token" data-claire-element-id="482366">Création du jeton (token)</h5><p id="r-482306" data-claire-element-id="482306">Afin d'obtenir le jeton qui nous servira plus tard pour rediriger le client sur le site de PayPal, il nous faut envoyer à PayPal les données API que vous avez prélevées précédemment.</p><p id="r-482307" data-claire-element-id="482307">Afin de formuler une requête sur le site de PayPal, nous devons définir un certain nombre de paramètres obligatoires. Pour toute requête à formuler, vous devez passez les paramètres suivants :</p><ul id="r-482316" data-claire-element-id="482316"><li id="r-482309" data-claire-element-id="482309"><p id="r-482308" data-claire-element-id="482308"><strong>USER :</strong> correspond au nom d'utilisateur API que vous avez récupéré précédemment ;</p></li><li id="r-482311" data-claire-element-id="482311"><p id="r-482310" data-claire-element-id="482310"><strong>PWD : </strong>correspond au mot de passe API que vous avez également récupéré précédemment ;</p></li><li id="r-482313" data-claire-element-id="482313"><p id="r-482312" data-claire-element-id="482312"><strong>SIGNATURE :</strong> correspond à la signature de votre compte API que (<em>attention, roulement de tambour</em>), vous avez aussi récupéré précédemment...</p></li><li id="r-482315" data-claire-element-id="482315"><p id="r-482314" data-claire-element-id="482314"><strong>VERSION : </strong>correspond à la version de l'API que vous souhaitez utiliser. Ainsi si un changement est effectué sur l'API de PayPal, votre programme reste compatible avec l'ancienne version. Jusqu'à ce que vous adaptiez votre code si besoin, et que vous définissiez la dernière version de l'API dans ce paramètre.</p></li></ul><aside id="r-482318" data-claire-element-id="482318" data-claire-semantic="warning"><p id="r-482317" data-claire-element-id="482317">Ces données doivent êtres protégées, car elles permettent d'accéder à votre compte PayPal via les API. Donc ne les divulguez pas, et surtout ne les laissez pas à portée de vue de vos visiteurs.</p></aside><h6 id="r-version-de-l-api" data-claire-element-id="482365">Version de l'API</h6><aside id="r-482320" data-claire-element-id="482320" data-claire-semantic="information"><p id="r-482319" data-claire-element-id="482319">Afin de connaître la version de l'API actuelle, il faut vous rendre sur le site de PayPal ou de la Sandbox, et d'afficher le code source de la page. La version actuelle est affichée en commentaire dans les entêtes de la page.</p></aside><figure id="r-482322" data-claire-element-id="482323"><img id="r-482321" data-claire-element-id="482321" src="medias/uploads.siteduzero.com_files_181001_182000_181352.jpg" alt="code source paypal"/></figure><p id="r-482324" data-claire-element-id="482324">Il ne vous reste plus qu'à essayer d'appeler la page que nous avons vue tout à l'heure en lui passant tous ces paramètres.</p><p id="r-482325" data-claire-element-id="482325"><cite>Citation : URL</cite></p><blockquote id="r-482327" data-claire-element-id="482327"><p id="r-482326" data-claire-element-id="482326"><strong>https://api-3t.sandbox.paypal.com/nvp?VERSION=56.0&amp;USER=vendeur_1236594550_biz_api1.siteduzero.com&amp;PWD=SEFYITJFG8QRHN1S&amp;SIGNATURE=ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n.</strong></p></blockquote><div id="r-482329" data-claire-element-id="482329" data-claire-semantic="question"><p id="r-482328" data-claire-element-id="482328">Hé, mais tu te fous de nous ?? J'ai exactement la même réponse qu'avant. Ça ne fonctionne pas du tout...</p></div><p id="r-482330" data-claire-element-id="482330">Bien évidemment, nous n'avons toujours pas défini quel traitement nous souhaitons effectuer.<br/> Pour ce faire, il nous suffit d'ajouter encore le paramètre <strong>METHOD</strong>. Nous verrons plus tard toutes les méthodes que nous pouvons appeler, mais pour notre premier test, appelez la méthode <strong>SetExpressCheckout</strong>. Elle permet de définir un paiement et de récupérer le jeton pour rediriger votre visiteur sur le site de PayPal. Mais cette méthode requiert encore 3 autres paramètres obligatoires. Le paramètre <strong>CANCELURL </strong>qui définit l'URL sur laquelle PayPal doit rediriger le visiteur s'il annule la transaction ; le paramètre <strong>RETURNURL </strong>qui définit l'URL en cas de traitement effectué avec succès, ainsi que le paramètre <strong>AMT </strong>qui définit le montant que le visiteur vous doit. Voici donc les paramètres à ajouter :</p><ul id="r-482339" data-claire-element-id="482339"><li id="r-482332" data-claire-element-id="482332"><p id="r-482331" data-claire-element-id="482331"><strong>METHOD</strong>=SetExpressCheckout</p></li><li id="r-482334" data-claire-element-id="482334"><p id="r-482333" data-claire-element-id="482333"><strong>CANCELURL</strong>=http://www.siteduzero.com/cancel.php</p></li><li id="r-482336" data-claire-element-id="482336"><p id="r-482335" data-claire-element-id="482335"><strong>RETURNURL</strong>=http://www.siteduzero.com/return.php</p></li><li id="r-482338" data-claire-element-id="482338"><p id="r-482337" data-claire-element-id="482337"><strong>AMT</strong>=10.0</p></li></ul><p id="r-482340" data-claire-element-id="482340">Ce qui devrait vous donner une URL qui ressemble à ceci :</p><p id="r-482341" data-claire-element-id="482341"><cite>Citation : URL</cite></p><blockquote id="r-482343" data-claire-element-id="482343"><p id="r-482342" data-claire-element-id="482342"><strong>https://api-3t.sandbox.paypal.com/nvp?VERSION=56.0&amp;USER=vendeur_1236594550_biz_api1.siteduzero.com&amp;PWD=SEFYITJFG8QRHN1S&amp;SIGNATURE=ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n&amp;METHOD=SetExpressCheckout&amp;AMT=10.00&amp;RETURNURL=http://www.siteduzero.com/return.php&amp;CANCELURL=http://www.siteduzero.com/cancel.php.</strong></p></blockquote><p id="r-482344" data-claire-element-id="482344">Cette fois-ci, ça fonctionne. Et le site nous retourne quelque chose sans erreur qui devrait ressembler plus ou moins à ceci :</p><p id="r-482345" data-claire-element-id="482345"><cite>Citation : URL</cite></p><blockquote id="r-482347" data-claire-element-id="482347"><p id="r-482346" data-claire-element-id="482346"><strong>TOKEN=EC%2d28P55904SP346364Y&amp;TIMESTAMP=2009%2d03%2d10T11%3a43%3a51Z&amp;CORRELATIONID=62da379c625d6&amp;ACK=Success&amp;VERSION=56%2e0&amp;BUILD=854529</strong></p></blockquote><p id="r-482348" data-claire-element-id="482348">Après décodage des <strong>%</strong>, et séparation des paramètres, nous pouvons voir pas mal de choses intéressantes :</p><ul id="r-482361" data-claire-element-id="482361"><li id="r-482350" data-claire-element-id="482350"><p id="r-482349" data-claire-element-id="482349"><strong>TOKEN</strong>=EC-28P55904SP346364Y &lt;== il s'agit du fameux jeton dont je vous parle depuis un moment ;</p></li><li id="r-482352" data-claire-element-id="482352"><p id="r-482351" data-claire-element-id="482351"><strong>TIMESTAMP</strong>=2009-03-10T11:43:51Z &lt;== nous donne des indications sur la date et l'heure de l'exécution de l'appel de l'API ;</p></li><li id="r-482354" data-claire-element-id="482354"><p id="r-482353" data-claire-element-id="482353"><strong>CORRELATIONID</strong>=62da379c625d6 &lt;== jeton de déboguage ;</p></li><li id="r-482356" data-claire-element-id="482356"><p id="r-482355" data-claire-element-id="482355"><strong>ACK</strong>=Success &lt;== on voit que maintenant la fonction s'est terminée correctement ;</p></li><li id="r-482358" data-claire-element-id="482358"><p id="r-482357" data-claire-element-id="482357"><strong>VERSION</strong>=56.0 &lt;== version de l'API utilisée ;</p></li><li id="r-482360" data-claire-element-id="482360"><p id="r-482359" data-claire-element-id="482359"><strong>BUILD</strong>=854529 &lt;== numéro de la compilation de l'API. (en complément de la version).</p></li></ul><aside id="r-482363" data-claire-element-id="482363" data-claire-semantic="information"><p id="r-482362" data-claire-element-id="482362">Félicitations, vous venez d'effectuer votre première communication concluante avec les API PayPal...</p></aside><p id="r-482364" data-claire-element-id="482364">Champagne !!! :D</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
<span class="arrow"></span>
<span class="next">Préparation du terrain</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
<span class="next">Paiement avec l&#039;API NVP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Paiementavecl039APINVP"></a><h2>Paiement avec l&#039;API NVP</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
<span class="arrow"></span>
<span class="next">Communication avec l&#039;API NVP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">
<span class="next">Intégration dans PHP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-paiement-avec-l-api-nvp" data-claire-element-id="482527">Paiement avec l'API NVP</h4><p id="r-482368" data-claire-element-id="482368">Maintenant que la requête a été acceptée par le serveur de PayPal, vous pouvez contempler votre résultat en accédant à la page suivante, et en passant en paramètre le jeton qui vous a été retourné.</p><p id="r-482369" data-claire-element-id="482369">https://www.sandbox.paypal.com/webscr&amp;cmd=_express-checkout&amp;token=EC-28P55904SP346364Y.</p><aside id="r-482371" data-claire-element-id="482371" data-claire-semantic="information"><p id="r-482370" data-claire-element-id="482370">Il faut être connecté à votre compte SandBox pour pouvoir effectuer vos tests. Si ce n'est pas le cas, un message apparaitra vous demandant de vous authentifier si vous souhaitez effectuer des tests.</p></aside><p id="r-482372" data-claire-element-id="482372">Lors de la mise en place sur votre site, le but sera de rediriger le visiteur à cette adresse pour qu'il se connecte sur son compte PayPal et accepte (ou refuse) le paiement.</p><p id="r-482373" data-claire-element-id="482373">Je vous propose donc de vous rendre à cette adresse et d'accepter le paiement afin que nous puissions poursuivre le cours.</p><h6 id="r-getexpresscheckoutdetails" data-claire-element-id="482439">GetExpressCheckoutDetails</h6><p id="r-482374" data-claire-element-id="482374">Une fois connecté, le paiement accepté, nous allons devoir rappeler l'API PayPal, mais cette fois avec la méthode <strong>GetExpressCheckoutDetails</strong>, en y passant en paramètre le jeton obtenu. Cette méthode permet de récupérer toutes les informations du paiement ainsi que les informations de l'acheteur (nom, prénom, adresse, etc.).<br/> N'oubliez pas d'y ajouter les paramètres habituels.</p><p id="r-482375" data-claire-element-id="482375"><cite>Citation : Adresse URL</cite></p><blockquote id="r-482377" data-claire-element-id="482377"><p id="r-482376" data-claire-element-id="482376"><strong>https://api-3t.sandbox.paypal.com/nvp?VERSION=56.0&amp;USER=vendeur_1236594550_biz_api1.siteduzero.com&amp;PWD=SEFYITJFG8QRHN1S&amp;SIGNATURE=ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n&amp;METHOD=GetExpressCheckoutDetails&amp;TOKEN=EC-28P55904SP346364Y.</strong></p></blockquote><p id="r-482378" data-claire-element-id="482378">Voici ce que je récupère :</p><p id="r-482379" data-claire-element-id="482379"><cite>Citation : URL</cite></p><blockquote id="r-482381" data-claire-element-id="482381"><p id="r-482380" data-claire-element-id="482380"><strong>TOKEN=EC%28P55904SP346364Y&amp;TIMESTAMP=2009%2d06%2d08T13%3a01%3a37Z&amp;CORRELATIONID=a654hfzc8bj5f&amp;ACK=Success&amp;VERSION=56%2e0&amp;BUILD=942987&amp;EMAIL=acheteur1243025979_per%40siteduzero%2ecom&amp;PAYERID=G5ZMU94EQSKJS&amp;PAYERSTATUS=unverified&amp;FIRSTNAME=Test&amp;LASTNAME=User&amp;COUNTRYCODE=FR&amp;SHIPTONAME=Test%20User&amp;SHIPTOSTREET=Av%2e%20de%20la%20Pelouse%2c%201%20Mayet&amp;SHIPTOCITY=Paris&amp;SHIPTOSTATE=Alsace&amp;SHIPTOZIP=75002&amp;SHIPTOCOUNTRYCODE=FR&amp;SHIPTOCOUNTRYNAME=France&amp;ADDRESSSTATUS=Unconfirmed&amp;CURRENCYCODE=USD&amp;AMT=10%2e00&amp;SHIPPINGAMT=0%2e00&amp;HANDLINGAMT=0%2e00&amp;TAXAMT=0%2e00&amp;INSURANCEAMT=0%2e00&amp;SHIPDISCAMT=0%2e00</strong></p></blockquote><p id="r-482382" data-claire-element-id="482382">Et après décomposition de tout cela...</p><ul id="r-482437" data-claire-element-id="482437"><li id="r-482384" data-claire-element-id="482384"><p id="r-482383" data-claire-element-id="482383"><strong>[TOKEN] </strong>=&gt; EC-28P55904SP346364Y</p></li><li id="r-482386" data-claire-element-id="482386"><p id="r-482385" data-claire-element-id="482385"><strong>[TIMESTAMP]</strong> =&gt; 2009-06-08T13:01:37Z</p></li><li id="r-482388" data-claire-element-id="482388"><p id="r-482387" data-claire-element-id="482387"><strong>[CORRELATIONID]</strong> =&gt; a654hfzc8bj5f</p></li><li id="r-482390" data-claire-element-id="482390"><p id="r-482389" data-claire-element-id="482389"><strong>[ACK]</strong> =&gt; Success</p></li><li id="r-482392" data-claire-element-id="482392"><p id="r-482391" data-claire-element-id="482391"><strong>[VERSION]</strong> =&gt; 56.0</p></li><li id="r-482394" data-claire-element-id="482394"><p id="r-482393" data-claire-element-id="482393"><strong>[BUILD]</strong> =&gt; 942987</p></li><li id="r-482396" data-claire-element-id="482396"><p id="r-482395" data-claire-element-id="482395"><strong>[EMAIL]</strong> =&gt; <a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="9ffefcf7faebfaeaedaeadabacafadaaa6a8a6c0effaeddfecf6ebfafbeae5faedf0b1fcf0f2">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></p></li><li id="r-482398" data-claire-element-id="482398"><p id="r-482397" data-claire-element-id="482397"><strong>[PAYERID]</strong> =&gt; G5ZMU94EQSKJS</p></li><li id="r-482400" data-claire-element-id="482400"><p id="r-482399" data-claire-element-id="482399"><strong>[PAYERSTATUS]</strong> =&gt; unverified</p></li><li id="r-482402" data-claire-element-id="482402"><p id="r-482401" data-claire-element-id="482401"><strong>[FIRSTNAME]</strong> =&gt; Test</p></li><li id="r-482404" data-claire-element-id="482404"><p id="r-482403" data-claire-element-id="482403"><strong>[LASTNAME]</strong> =&gt; User</p></li><li id="r-482406" data-claire-element-id="482406"><p id="r-482405" data-claire-element-id="482405"><strong>[COUNTRYCODE]</strong> =&gt; FR</p></li><li id="r-482408" data-claire-element-id="482408"><p id="r-482407" data-claire-element-id="482407"><strong>[SHIPTONAME]</strong> =&gt; Test User</p></li><li id="r-482410" data-claire-element-id="482410"><p id="r-482409" data-claire-element-id="482409"><strong>[SHIPTOSTREET]</strong> =&gt; Av. de la Pelouse, 1 Mayet</p></li><li id="r-482412" data-claire-element-id="482412"><p id="r-482411" data-claire-element-id="482411"><strong>[SHIPTOCITY]</strong> =&gt; Paris</p></li><li id="r-482414" data-claire-element-id="482414"><p id="r-482413" data-claire-element-id="482413"><strong>[SHIPTOSTATE]</strong> =&gt; Alsace</p></li><li id="r-482416" data-claire-element-id="482416"><p id="r-482415" data-claire-element-id="482415"><strong>[SHIPTOZIP]</strong> =&gt; 75002</p></li><li id="r-482418" data-claire-element-id="482418"><p id="r-482417" data-claire-element-id="482417"><strong>[SHIPTOCOUNTRYCODE]</strong> =&gt; FR</p></li><li id="r-482420" data-claire-element-id="482420"><p id="r-482419" data-claire-element-id="482419"><strong>[SHIPTOCOUNTRYNAME]</strong> =&gt; France</p></li><li id="r-482422" data-claire-element-id="482422"><p id="r-482421" data-claire-element-id="482421"><strong>[ADDRESSSTATUS]</strong> =&gt; Unconfirmed</p></li><li id="r-482424" data-claire-element-id="482424"><p id="r-482423" data-claire-element-id="482423"><strong>[CURRENCYCODE]</strong> =&gt; USD</p></li><li id="r-482426" data-claire-element-id="482426"><p id="r-482425" data-claire-element-id="482425"><strong>[AMT]</strong> =&gt; 10.00</p></li><li id="r-482428" data-claire-element-id="482428"><p id="r-482427" data-claire-element-id="482427"><strong>[SHIPPINGAMT]</strong> =&gt; 0.00</p></li><li id="r-482430" data-claire-element-id="482430"><p id="r-482429" data-claire-element-id="482429"><strong>[HANDLINGAMT]</strong> =&gt; 0.00</p></li><li id="r-482432" data-claire-element-id="482432"><p id="r-482431" data-claire-element-id="482431"><strong>[TAXAMT]</strong> =&gt; 0.00</p></li><li id="r-482434" data-claire-element-id="482434"><p id="r-482433" data-claire-element-id="482433"><strong>[INSURANCEAMT]</strong> =&gt; 0.00</p></li><li id="r-482436" data-claire-element-id="482436"><p id="r-482435" data-claire-element-id="482435"><strong>[SHIPDISCAMT]</strong> =&gt; 0.00</p></li></ul><p id="r-482438" data-claire-element-id="482438">Vous noterez que vous pouvez récupérer vraiment beaucoup d'informations avec cette fonction.</p><h6 id="r-doexpresscheckoutpayment" data-claire-element-id="482526">DoExpressCheckoutPayment</h6><p id="r-482440" data-claire-element-id="482440">Pour compléter le transfert et effectuer le virement, il faut appeler une troisième et dernière fois l'API PayPal, mais cette fois avec la fonction <strong>DoExpressCheckoutPayment</strong>.</p><p id="r-482441" data-claire-element-id="482441">Afin d'effectuer cette action, vous aurez besoin de lui communiquer plusieurs paramètres.<br/> Les paramètres habituels de connexion (USER, PWD, VERSION, SIGNATURE, TOKEN), ainsi que la fonction <strong>DoExpressCheckoutPayment</strong>.</p><p id="r-482442" data-claire-element-id="482442">Mais il faut encore indiquer les paramètres suivants.</p><ul id="r-482451" data-claire-element-id="482451"><li id="r-482444" data-claire-element-id="482444"><p id="r-482443" data-claire-element-id="482443">Le paramètre <strong>PAYMENTACTION</strong> a la valeur <strong>sale</strong> pour indiquer qu'il s'agit d'une vente finale.</p></li><li id="r-482446" data-claire-element-id="482446"><p id="r-482445" data-claire-element-id="482445">Le paramètre <strong>PAYERID</strong> prend l'identifiant du paiement qui a été attribué par PayPal. Cet identifiant est unique, et il nous est transmis en $_GET à la page définie dans le paramètre <strong>RETURNURL</strong> de la première action. Mais vous pouvez également récupérer ce paramètre à l'aide de l'action <strong>GetExpressCheckoutDetails</strong> que nous venons de voir à l'instant.</p></li><li id="r-482448" data-claire-element-id="482448"><p id="r-482447" data-claire-element-id="482447">Le paramètre <strong>AMT</strong>, qui doit correspondre au montant que vous avez défini lors de l'appel de la méthode <strong>SetExpressCheckout</strong>.</p></li><li id="r-482450" data-claire-element-id="482450"><p id="r-482449" data-claire-element-id="482449">Et pour finir le paramètre <strong>CURRENCYCODE</strong> qui détermine la devise dans laquelle le montant est défini. Naturellement, il doit également être identique à celui renseigné lors de l'appel de la méthode <strong>SetExpressCheckout</strong>.</p></li></ul><p id="r-482452" data-claire-element-id="482452">Il existe également d'autres paramètres concernant les enchères eBay, ou pour des paiements partiels... Mais ceux-ci ne nous concernent pas pour le cas d'un achat direct.</p><p id="r-482453" data-claire-element-id="482453">Ce qui nous donnera, au final, quelque chose comme ça :</p><p id="r-482454" data-claire-element-id="482454"><cite>Citation : Adresse URL</cite></p><blockquote id="r-482456" data-claire-element-id="482456"><p id="r-482455" data-claire-element-id="482455"><strong>https://api-3t.sandbox.paypal.com/nvp?VERSION=56.0&amp;USER=vendeur_1236594550_biz_api1.siteduzero.com&amp;PWD=SEFYITJFG8QRHN1S&amp;SIGNATURE=ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n&amp;METHOD=DoExpressCheckoutPayment&amp;TOKEN=EC-28P55904SP346364Y&amp;PAYMENTACTION=sale&amp;PAYERID=G5ZMU94EQSKJS&amp;AMT=10.00&amp;CURRENCYCODE=EUR.</strong></p></blockquote><aside id="r-482458" data-claire-element-id="482458" data-claire-semantic="information"><p id="r-482457" data-claire-element-id="482457"><strong>YouHoo !!</strong> :D Vous venez d'effectuer votre premier paiement concluant !!!</p></aside><p id="r-482459" data-claire-element-id="482459"><em>Non, pas de champagne cette fois-ci, sinon vous ne serez plus en état de lire la suite du tutoriel.</em></p><p id="r-482460" data-claire-element-id="482460">Si vous retournez dans la gestion de vos comptes, vous devriez voir que le compte Acheteur a été débité de 10 $, et que le compte vendeur a été crédité de ce même montant.</p><p id="r-482461" data-claire-element-id="482461">Si vous le souhaitez, vous pouvez exécuter toutes ces actions une seconde fois, mais en annulant le paiement lors de la connexion sur le site de PayPal. Ainsi vous devriez être redirigés à la page définie dans le paramètre <strong>CANCELURL</strong>, et le paiement ne sera pas accepté lors de votre tentative de paiement à l'aide de l'action <strong>DoExpressCheckoutPayment</strong>.</p><h5 id="r-d-autres-parametres" data-claire-element-id="482525">D'autres paramètres</h5><p id="r-482462" data-claire-element-id="482462">Vous venez de voir comment communiquer avec le serveur API PayPal, avec un minimum de paramètres.<br/> Mais vous allez maintenant voir quelques paramètres optionnels que vous pouvez inclure à la fonction <strong>SetExpressCheckout</strong>, et qui peuvent peut-être vous intéresser. En particulier le paramètre <strong>CURRENCYCODE</strong>, si vous voulez définir un montant en<strong> euros</strong>.</p><table id="r-482521" data-claire-element-id="482521"><thead id="r-482470" data-claire-element-id="482470"><tr id="r-482469" data-claire-element-id="482469"><th id="r-482464" data-claire-element-id="482464"><p id="r-482463" data-claire-element-id="482463">Nom du paramètre</p></th><th id="r-482466" data-claire-element-id="482466"><p id="r-482465" data-claire-element-id="482465">Description</p></th><th id="r-482468" data-claire-element-id="482468"><p id="r-482467" data-claire-element-id="482467">Exemple</p></th></tr></thead><tbody id="r-482520" data-claire-element-id="482520"><tr id="r-482477" data-claire-element-id="482477"><td id="r-482472" data-claire-element-id="482472"><p id="r-482471" data-claire-element-id="482471"><strong>CURRENCYCODE</strong></p></td><td id="r-482474" data-claire-element-id="482474"><p id="r-482473" data-claire-element-id="482473">Devise du montant. Si ce paramètre n'est pas spécifié, la devise est définie en $ américains (USD)</p></td><td id="r-482476" data-claire-element-id="482476"><p id="r-482475" data-claire-element-id="482475"><strong>EUR</strong></p></td></tr><tr id="r-482484" data-claire-element-id="482484"><td id="r-482479" data-claire-element-id="482479"><p id="r-482478" data-claire-element-id="482478"><strong>DESC</strong></p></td><td id="r-482481" data-claire-element-id="482481"><p id="r-482480" data-claire-element-id="482480">Description de l'article mis en vente. Cette description apparaitra lors du paiement sur le site de PayPal (long. max. 127 caractères)</p></td><td id="r-482483" data-claire-element-id="482483"><p id="r-482482" data-claire-element-id="482482"><strong>Magnifique oeuvre d'art (que mon fils de 3 ans a peint.)</strong></p></td></tr><tr id="r-482491" data-claire-element-id="482491"><td id="r-482486" data-claire-element-id="482486"><p id="r-482485" data-claire-element-id="482485"><strong>LOCALECODE</strong></p></td><td id="r-482488" data-claire-element-id="482488"><p id="r-482487" data-claire-element-id="482487">Langue dans laquelle le site sera affiché. Par défaut c'est l'anglais (US)</p></td><td id="r-482490" data-claire-element-id="482490"><p id="r-482489" data-claire-element-id="482489"><strong>FR</strong></p></td></tr><tr id="r-482498" data-claire-element-id="482498"><td id="r-482493" data-claire-element-id="482493"><p id="r-482492" data-claire-element-id="482492"><strong>HDRIMG</strong></p></td><td id="r-482495" data-claire-element-id="482495"><p id="r-482494" data-claire-element-id="482494">Image qui sera affichée en haut à gauche de la page de paiement. (max. 750 x 90 px). Par défaut le nom de l'entreprise est affiché.<br/> PayPal recommande qu'elle soit stockée sur un serveur sécurisé (https). Probablement pour éviter les messages affichant qu'un contenu non sécurisé se trouve sur la page.</p></td><td id="r-482497" data-claire-element-id="482497"><p id="r-482496" data-claire-element-id="482496"><a href="../../openclassrooms.com/Templates/images/designs/2/logo_sdz_fr.html"><strong>http://www.siteduzero.com/Templates/im [...] go_sdz_fr.png</strong></a></p></td></tr><tr id="r-482505" data-claire-element-id="482505"><td id="r-482500" data-claire-element-id="482500"><p id="r-482499" data-claire-element-id="482499"><strong>INVNUM</strong></p></td><td id="r-482502" data-claire-element-id="482502"><p id="r-482501" data-claire-element-id="482501">Identifiant de la transaction. Il vous sera retourné lors de l'exécution du paiement.</p></td><td id="r-482504" data-claire-element-id="482504"><p id="r-482503" data-claire-element-id="482503"><strong>15126</strong></p></td></tr><tr id="r-482512" data-claire-element-id="482512"><td id="r-482507" data-claire-element-id="482507"><p id="r-482506" data-claire-element-id="482506"><strong>EMAIL</strong></p></td><td id="r-482509" data-claire-element-id="482509"><p id="r-482508" data-claire-element-id="482508">E-mail de l'acheteur. Ce champ sert à pré-remplir le champ de connexion au compte PayPal.</p></td><td id="r-482511" data-claire-element-id="482511"><p id="r-482510" data-claire-element-id="482510"><strong><a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="5233313a372637272012213b263736272837203d7c313d3f">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></strong></p></td></tr><tr id="r-482519" data-claire-element-id="482519"><td id="r-482514" data-claire-element-id="482514"><p id="r-482513" data-claire-element-id="482513"><strong>CUSTOM</strong></p></td><td id="r-482516" data-claire-element-id="482516"><p id="r-482515" data-claire-element-id="482515">Celui-ci est un champ personnalisé. Il nous sera renvoyé lorsque nous ordonnerons le paiement.<br/> Vous pouvez vous en servir pour vous renvoyer l'id de votre client, ou le site web sur lequel l'achat a été effectué, si vous traitez plusieurs sites avec le même script par exemple.</p></td><td id="r-482518" data-claire-element-id="482518"><p id="r-482517" data-claire-element-id="482517"><strong>id_client:12;site:www.siteduzero.com</strong></p></td></tr></tbody></table><p id="r-482522" data-claire-element-id="482522">Il existe encore beaucoup d'autres paramètres, qui par exemple, vous permettent de modifier les couleurs d'affichage lors de la connexion sur le site de PayPal, ou d'autres qui permettent d'envoyer l'adresse de livraison au service PayPal.<br/> Je ne vous les ai pas détaillés pas ici, mais si toutefois ceux-ci vous intéressent, consultez le guide PayPal, disponible dans la partie &lt;&lt;<strong>Annexes</strong>&gt;&gt; de ce tutoriel.</p><p id="r-482523" data-claire-element-id="482523">Maintenant que vous avez bien compris le principe, nous allons l'automatiser à l'aide de PHP.</p><p id="r-482524" data-claire-element-id="482524">Je cours déjà au chapitre suivant, rejoignez-moi dès que vous serez prêts. ^^</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
<span class="arrow"></span>
<span class="next">Communication avec l&#039;API NVP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">
<span class="next">Intégration dans PHP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="IntgrationdansPHP"></a><h2>Intégration dans PHP</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
<span class="arrow"></span>
<span class="next">Paiement avec l&#039;API NVP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
<span class="next">Utilisation de la fonction cURL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-482529" data-claire-element-id="482529">Dans ce chapitre, vous allez intégrer dans vos pages web ce que nous venons de voir dans le chapitre précédent.</p><p id="r-482530" data-claire-element-id="482530">Je considère que vous connaissez suffisamment PHP pour suivre ce cours. Si vous ne maîtrisez pas bien tout cela, allez d'abord lire le cours PHP de <a href="membres-294-3.html">M@teo21</a> sur <a href="tutoriel-3-14668-un-site-dynamique-avec-php.html">cette page</a>.</p>
</div><a name="UtilisationdelafonctioncURL"></a><h2>Utilisation de la fonction cURL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">
<span class="arrow"></span>
<span class="next">Intégration dans PHP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
<span class="next">Récupérer les paramètres dans un tableau</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utilisation-de-la-fonction-curl" data-claire-element-id="482559">Utilisation de la fonction cURL</h4><p id="r-482531" data-claire-element-id="482531">Pour permettre à PHP de se connecter à un site web distant et à récupérer le contenu renvoyé, vous aurez besoin de l'extension <strong>php_curl</strong>.</p><p id="r-482532" data-claire-element-id="482532">Pour ce faire sous Windows, il vous suffit de dé-commenter la ligne : <strong>extension=php_curl.dll</strong> du fichier <strong>php.ini</strong>.<br/> Sous Linux ou Mac, je ne sais pas comment s'appelle l'extension, mais en recherchant <strong>php_curl</strong> dans le fichier de configuration de PHP, vous ne devriez pas avoir de problème pour le retrouver.<br/> Ou depuis WampServer, il vous suffit de vous rendre sur : PHP / Extensions PHP, puis d'activer l'extension php_curl.</p><figure id="r-482534" data-claire-element-id="482535"><img id="r-482533" data-claire-element-id="482533" src="medias/uploads.siteduzero.com_files_172001_173000_172462.jpg" alt="Wamp"/></figure><h5 id="r-passons-a-l-action" data-claire-element-id="482558">Passons à l'action</h5><p id="r-482536" data-claire-element-id="482536">Nous allons commencer par créer une variable contenant l'URL que notre script devra appeler.</p><p id="r-482537" data-claire-element-id="482537">Comme certaines données restent les mêmes pour chaque appel de l'API (user, passe, version, etc.), je vous propose de créer une fonction PHP qui va créer votre chaîne de départ. Vous n'aurez plus qu'à y ajouter les paramètres supplémentaires correspondant aux traitements que vous souhaitez effectuer.<br/> Il y a également un autre avantage à cela. Lorsque vous déciderez de mettre en production votre application, vous n'aurez qu'à modifier ce fichier pour que le serveur de production de PayPal soit utilisé, en lieu et place du serveur de la SandBox.</p><h6 id="r-voici-donc-un-exemple-simple-de-cette-fonction" data-claire-element-id="482544">Voici donc un exemple simple de cette fonction</h6><pre id="r-482538" data-claire-element-id="482538"><code data-claire-semantic="html+php">&lt;?php
  function construit_url_paypal()
  {
	$api_paypal = 'https://api-3t.sandbox.paypal.com/nvp?'; // Site de l'API PayPal. On ajoute déjà le ? afin de concaténer directement les paramètres.
	$version = 56.0; // Version de l'API
	
	$user = 'vendeur_1236594550_biz_api1.siteduzero.com'; // Utilisateur API
	$pass = 'SEFYITJFG8QRHN1S'; // Mot de passe API
	$signature = 'ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n'; // Signature de l'API

	$api_paypal = $api_paypal.'VERSION='.$version.'&amp;USER='.$user.'&amp;PWD='.$pass.'&amp;SIGNATURE='.$signature; // Ajoute tous les paramètres

	return 	$api_paypal; // Renvoie la chaîne contenant tous nos paramètres.
  }
?&gt;</code></pre><p id="r-482539" data-claire-element-id="482539">Maintenant enregistrez cette fonction dans un fichier. Nommez-le par exemple <strong>fonction_api.php</strong>.</p><p id="r-482540" data-claire-element-id="482540">Ensuite créez un second fichier qui contiendra votre script principal. À l'intérieur nous allons appeler notre fonction et récupérer le résultat dans une variable.<br/> Et pour finir, vous n'avez plus qu'à y ajouter tous les paramètres permettant de créer le paiement sur le serveur PayPal.</p><aside id="r-482542" data-claire-element-id="482542" data-claire-semantic="information"><p id="r-482541" data-claire-element-id="482541">Afin d'encoder certains caractères au format URL, vous pouvez utiliser la fonction PHP <strong>urlencode</strong>. Celle-ci remplacera les <strong>&lt;&lt;:/., espace etc.&gt;&gt;</strong> en <strong>&lt;&lt;%&gt;&gt;</strong> suivi de sa valeur <strong>hexadécimale</strong>.</p></aside><p id="r-482543" data-claire-element-id="482543">Pour contrôler que votre variable retourne une chaîne correcte, affichez-là à l'écran à l'aide de la fonction <strong>echo</strong>.</p><h6 id="r-voici-ce-que-ca-nous-donne" data-claire-element-id="482553">Voici ce que ça nous donne :</h6><pre id="r-482545" data-claire-element-id="482545"><code data-claire-semantic="html+php">&lt;?php
include(&quot;fonction_api.php&quot;); // On importe la page créée précédemment
$requete = construit_url_paypal(); // Construit les options de base

// La fonction urlencode permet d'encoder au format URL les espaces, slash, deux points, etc.)
$requete = $requete.&quot;&amp;METHOD=SetExpressCheckout&quot;.
			&quot;&amp;CANCELURL=&quot;.urlencode(&quot;http://127.0.0.1/cancel.php&quot;).
			&quot;&amp;RETURNURL=&quot;.urlencode(&quot;http://127.0.0.1/return.php&quot;).
			&quot;&amp;AMT=10.0&quot;.
			&quot;&amp;CURRENCYCODE=EUR&quot;.
			&quot;&amp;DESC=&quot;.urlencode(&quot;Magnifique oeuvre d'art (que mon fils de 3 ans a peint.)&quot;).
			&quot;&amp;LOCALECODE=FR&quot;.
			&quot;&amp;HDRIMG=&quot;.urlencode(&quot;http://www.siteduzero.com/Templates/images/designs/2/logo_sdz_fr.png&quot;);

// Affiche la chaîne pour vérifier que la chaîne est bien formatée :
echo $requete;
?&gt;</code></pre><p id="r-482546" data-claire-element-id="482546">Afin de vérifier que ça fonctionne, recopiez l'URL qui s'affiche lors de l'exécution de ce script dans la barre d'adresse de votre navigateur pour accéder à cette page.<br/> Vous devriez voir le paramètre : <strong>ACK=Success</strong>. Si ce n'est pas le cas, c'est que les paramètres de connexion sont faux, ou qu'il y a un paramètre qui n'est pas correct. Consultez les messages d'erreur affichés pour comprendre ce qui n'a pas fonctionné.</p><p id="r-482547" data-claire-element-id="482547">Maintenant demandons à PHP d'exécuter cette requête à notre place.<br/> Pour ce faire, il faut utiliser les fonctions <strong>curl</strong>.</p><p id="r-482548" data-claire-element-id="482548">Tout d'abord il faut déclarer une session cURL. Pour faire cela, il vous suffit d'exécuter la commande <strong>curl_init</strong>, suivi de l'URL à exécuter. Cette fonction retourne une variable de type Session cURL. Il faut donc la récupérer dans une variable que nous appellerons par exemple : <strong>$ch</strong>.<br/> Dans notre cas l'URL à exécuter est contenue dans la variable <strong>$requete</strong>. Il faut donc écrire dans notre fichier : <strong>$ch = curl_init($requete);</strong></p><p id="r-482549" data-claire-element-id="482549">Ensuite nous allons devoir ajouter une option à notre objet cURL afin qu'il ignore le certificat <strong>SSL</strong>, car la page que nous allons consulter est sécurisée (page <strong>https</strong>). Sans cela, le script ne fonctionnera pas, et nous retournera une erreur expliquant que le certificat n'a pas pu être vérifié.<br/> Ceci se fait grâce à la fonction <strong>curl_setopt</strong>. Elle prend 3 paramètres. Notre instance cURL (<strong>$ch</strong> dans notre cas), l'option à modifier, et la valeur de l'option.<br/> Pour ignorer le certificat SSL, il faudra mettre l'option <strong>CURLOPT_SSL_VERIFYPEER</strong> à <strong>0</strong>.</p><p id="r-482550" data-claire-element-id="482550">Ce qui nous donne la fonction suivante : <strong>curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);</strong></p><p id="r-482551" data-claire-element-id="482551">Et enfin, on envoie la requête à l'aide de la fonction <strong>curl_exec</strong>. Celle-ci retourne <em><strong>true</strong></em> si elle s'est exécutée, et <em><strong>false</strong></em> en cas d'échec.<br/> S'il y a eu un problème, vous pouvez consulter le détail de l'erreur grâce à la fonction <strong>curl_error</strong>.</p><p id="r-482552" data-claire-element-id="482552">Maintenant, remplaçons le <strong>echo $resultat</strong> par les instructions permettant d'exécuter cette requête.</p><h6 id="r-ce-que-cela-nous-donne" data-claire-element-id="482557">Ce que cela nous donne</h6><pre id="r-482554" data-claire-element-id="482554"><code data-claire-semantic="html+php">&lt;?php
include(&quot;fonction_api.php&quot;);
$requete = construit_url_paypal();
$requete = $requete.&quot;&amp;METHOD=SetExpressCheckout&quot;.
			&quot;&amp;CANCELURL=&quot;.urlencode(&quot;http://127.0.0.1/cancel.php&quot;).
			&quot;&amp;RETURNURL=&quot;.urlencode(&quot;http://127.0.0.1/return.php&quot;).
			&quot;&amp;AMT=10.0&quot;.
			&quot;&amp;CURRENCYCODE=EUR&quot;.
			&quot;&amp;DESC=&quot;.urlencode(&quot;Magnifique oeuvre d'art (que mon fils de 3 ans a peint.)&quot;).
			&quot;&amp;LOCALECODE=FR&quot;.
			&quot;&amp;HDRIMG=&quot;.urlencode(&quot;http://www.siteduzero.com/Templates/images/designs/2/logo_sdz_fr.png&quot;);

// Initialise notre session cURL. On lui donne la requête à exécuter
$ch = curl_init($requete);

// Modifie l'option CURLOPT_SSL_VERIFYPEER afin d'ignorer la vérification du certificat SSL. Si cette option est à 1, une erreur affichera que la vérification du certificat SSL a échoué, et rien ne sera retourné. 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

// On lance l'exécution de la requête URL.
if (curl_exec($ch)) // Si elle s'est exécutée correctement, on affiche &quot;OK&quot;
	{echo &quot;&lt;p&gt;OK !&lt;/p&gt;&quot;;}
else // S'il y a une erreur, on affiche &quot;Erreur&quot;, suivi du détail de l'erreur.
	{echo &quot;&lt;p&gt;Erreur&lt;/p&gt;&lt;p&gt;&quot;.curl_error($ch).&quot;&lt;/p&gt;&quot;;}

// On ferme notre session cURL.
curl_close($ch);

?&gt;</code></pre><p id="r-482555" data-claire-element-id="482555">Quand vous exécutez ce script, vous devriez retrouver la chaîne qui est retournée par PayPal (avec à nouveau le paramètre <strong>ACK=Success</strong>), suivi du paragraphe <strong>OK</strong>.<br/> Cependant, nous ne souhaitons pas que le résultat de la requête soit retourné à l'écran, mais qu'il soit contenu dans une variable afin de pouvoir le traiter par la suite.</p><p id="r-482556" data-claire-element-id="482556">Pour faire cela, il faut mettre l'option <strong>CURLOPT_RETURNTRANSFER</strong> à <strong>1</strong>, de la même manière que nous avons fait précédemment concernant le certificat SSL.<br/> En procédant ainsi, la valeur retournée par <strong>curl_exec</strong> ne sera plus à <strong>true (1)</strong> si l'exécution est effectuée, mais retournera une chaîne contenant la valeur retournée par la page.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">
<span class="arrow"></span>
<span class="next">Intégration dans PHP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
<span class="next">Récupérer les paramètres dans un tableau</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Rcuprerlesparamtresdansuntableau"></a><h2>Récupérer les paramètres dans un tableau</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
<span class="arrow"></span>
<span class="next">Utilisation de la fonction cURL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
<span class="next">Le paiement... ou pas</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-recuperer-les-parametres-dans-un-tableau" data-claire-element-id="482574">Récupérer les paramètres dans un tableau</h4><p id="r-482560" data-claire-element-id="482560">Je vous propose ensuite de créer un tableau (array) contenant tous les paramètres que nous renvoie PayPal, accompagnés de leurs valeurs (comme l'array $_GET ou $_POST.). C'est plus facile à traiter par la suite.<br/> Pour réussir cela, il nous faudra séparer chaque paramètre (facilement départagé par le signe &amp;).<br/> Pour chacun des paramètres, on construira notre array en affectant le nom comme identifiant, et la valeur... bah comme valeur :-P. Pour reconnaître la valeur du nom, on se servira du mot-clé =.<br/> Tout ceci grâce à la fonction <strong>explode</strong>, qui permet de récupérer une liste de sous-chaîne à partir d'un séparateur.<br/> Notez que certains caractères contenus dans ces sous-chaînes sont encodés en URL (%##). Afin de convertir ces signes par leurs caractères (: &amp; / = etc.), il faudra utiliser la fonction <strong>urldecode</strong>.</p><p id="r-482561" data-claire-element-id="482561">Pour vérifier que tout a bien été séparé comme il faut, on peut afficher notre array grâce à la fonction <strong>print_r</strong></p><p id="r-482562" data-claire-element-id="482562">Le code ci-dessous est un peu compliqué, c'est pourquoi j'ai mis un maximum de commentaires afin que vous compreniez bien toutes les étapes.</p><h6 id="r-une-fois-code-en-php-voila-ce-que-tout-ca-nous-donne" data-claire-element-id="482571">Une fois codé en PHP, voilà ce que tout ça nous donne</h6><pre id="r-482563" data-claire-element-id="482563"><code data-claire-semantic="html+php">&lt;?php
include(&quot;fonction_api.php&quot;);
$requete = construit_url_paypal();
$requete = $requete.&quot;&amp;METHOD=SetExpressCheckout&quot;.
			&quot;&amp;CANCELURL=&quot;.urlencode(&quot;http://127.0.0.1/cancel.php&quot;).
			&quot;&amp;RETURNURL=&quot;.urlencode(&quot;http://127.0.0.1/return.php&quot;).
			&quot;&amp;AMT=10.0&quot;.
			&quot;&amp;CURRENCYCODE=EUR&quot;.
			&quot;&amp;DESC=&quot;.urlencode(&quot;Magnifique Oeuvre d'art (que mon fils de 3 ans a peint.)&quot;).
			&quot;&amp;LOCALECODE=FR&quot;.
			&quot;&amp;HDRIMG=&quot;.urlencode(&quot;http://www.siteduzero.com/Templates/images/designs/2/logo_sdz_fr.png&quot;);

$ch = curl_init($requete);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);

// Retourne directement le transfert sous forme de chaîne de la valeur retournée par curl_exec() au lieu de l'afficher directement. 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

// On lance l'exécution de la requête URL et on récupère le résultat dans une variable
$resultat_paypal = curl_exec($ch);

// S'il y a une erreur, on affiche &quot;Erreur&quot;, suivi du détail de l'erreur.
if (!$resultat_paypal)
	{echo &quot;&lt;p&gt;Erreur&lt;/p&gt;&lt;p&gt;&quot;.curl_error($ch).&quot;&lt;/p&gt;&quot;;}

else // S'il s'est exécuté correctement, on effectue les traitements...
{
	// On récupère la liste de paramètres, séparés par un 'et' commercial (&amp;)
	$liste_parametres = explode(&quot;&amp;&quot;,$resultat_paypal);
	// Pour chacun de ces paramètres, on exécute le bloc suivant, en intégrant le paramètre dans la variable $param_paypal
	foreach($liste_parametres as $param_paypal)
	{
		// On récupère le nom du paramètre et sa valeur dans 2 variables différentes. Elles sont séparées par le signe égal (=)
		list($nom, $valeur) = explode(&quot;=&quot;, $param_paypal);
		// On crée un tableau contenant le nom du paramètre comme identifiant et la valeur comme valeur.
		$liste_param_paypal[$nom]=urldecode($valeur); // Décode toutes les séquences %##  et les remplace par leur valeur. 
	}
		// On affiche le tout pour voir que tout est OK.
		echo &quot;&lt;pre&gt;&quot;;
		print_r($liste_param_paypal);
		echo &quot;&lt;/pre&gt;&quot;;
}

// On ferme notre session cURL.
curl_close($ch);

?&gt;</code></pre><p id="r-482564" data-claire-element-id="482564">Prenez votre temps sur le code affiché ci-dessus. Il n'est pas facile, mais super utile pour traiter vos données en toute simplicité par la suite.</p><p id="r-482565" data-claire-element-id="482565">Maintenant on arrive à y voir beaucoup plus clair sur les valeurs retournées. Elles sont nettement plus lisibles comme ça, n'est-ce pas ?</p><p id="r-482566" data-claire-element-id="482566"><cite>Citation : Résultat de l'exécution :</cite></p><blockquote id="r-482568" data-claire-element-id="482568"><p id="r-482567" data-claire-element-id="482567">Array<br/> (<br/> [TOKEN] =&gt; EC-29604316SN024140D<br/> [TIMESTAMP] =&gt; 2009-06-10T09:28:18Z<br/> [CORRELATIONID] =&gt; 18fadf688350f<br/> [ACK] =&gt; Success<br/> [VERSION] =&gt; 56<br/> [BUILD] =&gt; 942987<br/> )</p></blockquote><p id="r-482569" data-claire-element-id="482569">À présent, si on veut vérifier que l'exécution n'a généré aucune erreur sur le serveur PayPal, il nous suffit de vérifier que la variable <strong>$liste_param_paypal['ACK']</strong> soit bien égale à <strong>Success</strong>.</p><p id="r-482570" data-claire-element-id="482570">Avant de continuer, je vous propose de déplacer le petit bout de code, qui crée la variable <strong>$liste_param_paypal</strong>, dans notre page <strong>fonction_api.php</strong>. Car on aura besoin de ce même code pour chaque donnée récupérée par l'API PayPal.<br/> Cette fonction prendra comme paramètre d'entrée, la chaîne complète contenant le résultat obtenu par la fonction cURL, et nous retournera un array contenant tous les paramètres récupérés.</p><h6 id="r-maintenant-voila-a-quoi-notre-fichier-fonction-api-php-ressemble" data-claire-element-id="482573">Maintenant voilà à quoi notre fichier <strong>fonction_api.php</strong> ressemble</h6><pre id="r-482572" data-claire-element-id="482572"><code data-claire-semantic="html+php">&lt;?php
  function construit_url_paypal()
  {
	$api_paypal = 'https://api-3t.sandbox.paypal.com/nvp?'; // Site de l'API PayPal. On ajoute déjà le ? afin de concaténer directement les paramètres.
	$version = 57.0; // Version de l'API
	
	$user = 'vendeur_1236594550_biz_api1.siteduzero.com'; // Utilisateur API
	$pass = 'SEFYITJFG8QRHN1S'; // Mot de passe API
	$signature = 'ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n'; // Signature de l'API

	$api_paypal = $api_paypal.'VERSION='.$version.'&amp;USER='.$user.'&amp;PWD='.$pass.'&amp;SIGNATURE='.$signature; // Ajoute tous les paramètres

	return 	$api_paypal; // Renvoie la chaîne contenant tous nos paramètres.
  }

  function recup_param_paypal($resultat_paypal)
  {
	$liste_parametres = explode(&quot;&amp;&quot;,$resultat_paypal); // Crée un tableau de paramètres
	foreach($liste_parametres as $param_paypal) // Pour chaque paramètre
	{
		list($nom, $valeur) = explode(&quot;=&quot;, $param_paypal); // Sépare le nom et la valeur
		$liste_param_paypal[$nom]=urldecode($valeur); // Crée l'array final
	}
	return $liste_param_paypal; // Retourne l'array
  }
?&gt;</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
<span class="arrow"></span>
<span class="next">Utilisation de la fonction cURL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
<span class="next">Le paiement... ou pas</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lepaiement...oupas"></a><h2>Le paiement... ou pas</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
<span class="arrow"></span>
<span class="next">Récupérer les paramètres dans un tableau</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
<span class="next">Toutes les infos du paiement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-paiement-ou-pas" data-claire-element-id="482600">Le paiement... ou pas</h4><p id="r-482575" data-claire-element-id="482575">Pour que le visiteur puisse régler son dû, et si la demande de paiement a été correctement transmise, il faut rediriger le client sur le site de PayPal afin qu'il s'identifie.</p><p id="r-482576" data-claire-element-id="482576">Pour ce faire, il existe une fonction PHP permettant de rediriger le visiteur sur un autre site. Il s'agit de la fonction <strong>header</strong>. En fait cette fonction permet d'envoyer des entêtes HTTP au navigateur du client, et en lui passant l'entête &quot;Location:&quot; le visiteur est redirigé sur le site en question.</p><p id="r-482577" data-claire-element-id="482577">On va donc utiliser cette fonction pour le diriger sur le site de PayPal en y ajoutant le jeton.</p><h6 id="r-au-final-4" data-claire-element-id="482593">Au final</h6><pre id="r-482578" data-claire-element-id="482578"><code data-claire-semantic="html+php">&lt;?php
include(&quot;fonction_api.php&quot;);
$requete = construit_url_paypal();
$requete = $requete.&quot;&amp;METHOD=SetExpressCheckout&quot;.
			&quot;&amp;CANCELURL=&quot;.urlencode(&quot;http://127.0.0.1/cancel.php&quot;).
			&quot;&amp;RETURNURL=&quot;.urlencode(&quot;http://127.0.0.1/return.php&quot;).
			&quot;&amp;AMT=10.0&quot;.
			&quot;&amp;CURRENCYCODE=EUR&quot;.
			&quot;&amp;DESC=&quot;.urlencode(&quot;Magnifique oeuvre d'art (que mon fils de 3 ans a peint.)&quot;).
			&quot;&amp;LOCALECODE=FR&quot;.
			&quot;&amp;HDRIMG=&quot;.urlencode(&quot;http://www.siteduzero.com/Templates/images/designs/2/logo_sdz_fr.png&quot;);

$ch = curl_init($requete);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$resultat_paypal = curl_exec($ch);

if (!$resultat_paypal)
	{echo &quot;&lt;p&gt;Erreur&lt;/p&gt;&lt;p&gt;&quot;.curl_error($ch).&quot;&lt;/p&gt;&quot;;}
else
{
	$liste_param_paypal = recup_param_paypal($resultat_paypal); // Lance notre fonction qui dispatche le résultat obtenu en un array

	// Si la requête a été traitée avec succès
	if ($liste_param_paypal['ACK'] == 'Success')
	{
		// Redirige le visiteur sur le site de PayPal
		header(&quot;Location: https://www.sandbox.paypal.com/webscr&amp;cmd=_express-checkout&amp;token=&quot;.$liste_param_paypal['TOKEN']);
                exit();
	}
	else // En cas d'échec, affiche la première erreur trouvée.
	{echo &quot;&lt;p&gt;Erreur de communication avec le serveur PayPal.&lt;br /&gt;&quot;.$liste_param_paypal['L_SHORTMESSAGE0'].&quot;&lt;br /&gt;&quot;.$liste_param_paypal['L_LONGMESSAGE0'].&quot;&lt;/p&gt;&quot;;}		
}
curl_close($ch);
?&gt;</code></pre><p id="r-482579" data-claire-element-id="482579"><strong>C'est-y pas beau ?</strong></p><figure id="r-482581" data-claire-element-id="482582"><img id="r-482580" data-claire-element-id="482580" src="medias/uploads.siteduzero.com_files_173001_174000_173337.jpg" alt="Paiement PayPal"/></figure><p id="r-482583" data-claire-element-id="482583">Maintenant, il va falloir créer les deux autres pages. <strong>cancel.php</strong> et <strong>return.php</strong>. Ce sont les deux pages que vous avez définies dans les paramètres <strong>CANCELURL </strong>et <strong>RETURNURL</strong>.</p><p id="r-482584" data-claire-element-id="482584">Pour la page <strong>cancel.php</strong>, rien de bien compliqué.. Vous affichez un message de profond désarroi du style :</p><p id="r-482585" data-claire-element-id="482585"><cite>Citation : Message de profond désarroi</cite></p><blockquote id="r-482587" data-claire-element-id="482587"><p id="r-482586" data-claire-element-id="482586"><em>Snif, il ne me reste plus qu'à aller chercher la corde pour me pendre, avant que j'annonce à ma femme et mes 5 enfants qu'ils ne pourront pas manger ce soir, une fois de plus...</em>.</p></blockquote><p id="r-482588" data-claire-element-id="482588">Bon c'est peut-être un peu exagéré, optez plutôt pour un message plus convivial, comme ceci :</p><p id="r-482589" data-claire-element-id="482589"><cite>Citation : Message convivial</cite></p><blockquote id="r-482591" data-claire-element-id="482591"><p id="r-482590" data-claire-element-id="482590"><em>Le paiement a été annulé. En espérant que vous changerez rapidement d'avis, nous vous adressons nos salutations les plus sincères, Pov' type va !</em>.</p></blockquote><p id="r-482592" data-claire-element-id="482592">Bien entendu, vous y ajouterez tous les traitements internes à votre programme (mise à jour de la base de données, etc.).</p><h6 id="r-cancel-php" data-claire-element-id="482597">cancel.php</h6><pre id="r-482594" data-claire-element-id="482594"><code data-claire-semantic="html+php">&lt;h1&gt;Paiement annulé&lt;/h1&gt;
&lt;p&gt;
Le paiement a été annulé. En espérant que vous changerez d'avis, nous vous adressons nos salutations les plus sincères.
&lt;/p&gt;
&lt;?php
  // mysql_query(&quot;UPDATE commandes SET etat='annulé' WHERE id_commande='1234'&quot;);
?&gt;</code></pre><p id="r-482595" data-claire-element-id="482595">Pour la page <strong>return.php</strong>, c'est un peu différent. Il va falloir réaliser la transaction à l'aide de la fonction <strong>DoExpressCheckoutPayment </strong>de l'API PayPal. Ensuite vous pouvez exécuter vos traitements internes (mise à jour de la base de données, etc.).</p><p id="r-482596" data-claire-element-id="482596">L'utilisation de la méthode <strong>DoExpressCheckoutPayment </strong>a été vue dans le sous-chapitre <strong>« Communication avec l'API NVP »</strong> et le reste du code ressemble, comme deux gouttes d'eau, au premier. Je ne vais donc pas tout réexpliquer. Alors trêve de bavardage et passons à la pratique.</p><h6 id="r-return-php" data-claire-element-id="482599">return.php</h6><pre id="r-482598" data-claire-element-id="482598"><code data-claire-semantic="html+php">&lt;?php
session_start();
include(&quot;fonction_api.php&quot;); // On importe la page créée précédemment
$requete = construit_url_paypal(); // Construit les options de base

// On ajoute le reste des options
// La fonction urlencode permet d'encoder au format URL les espaces, slash, deux points, etc.)
$requete = $requete.&quot;&amp;METHOD=DoExpressCheckoutPayment&quot;.
			&quot;&amp;TOKEN=&quot;.htmlentities($_GET['token'], ENT_QUOTES). // Ajoute le jeton qui nous a été renvoyé
			&quot;&amp;AMT=10.0&quot;.
			&quot;&amp;CURRENCYCODE=EUR&quot;.
			&quot;&amp;PayerID=&quot;.htmlentities($_GET['PayerID'], ENT_QUOTES). // Ajoute l'identifiant du paiement qui nous a également été renvoyé
			&quot;&amp;PAYMENTACTION=sale&quot;;

// Initialise notre session cURL. On lui donne la requête à exécuter.
$ch = curl_init($requete);

// Modifie l'option CURLOPT_SSL_VERIFYPEER afin d'ignorer la vérification du certificat SSL. Si cette option est à 1, une erreur affichera que la vérification du certificat SSL a échoué, et rien ne sera retourné. 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
// Retourne directement le transfert sous forme de chaîne de la valeur retournée par curl_exec() au lieu de l'afficher directement. 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

// On lance l'exécution de la requête URL et on récupère le résultat dans une variable
$resultat_paypal = curl_exec($ch);

if (!$resultat_paypal) // S'il y a une erreur, on affiche &quot;Erreur&quot;, suivi du détail de l'erreur.
	{echo &quot;&lt;p&gt;Erreur&lt;/p&gt;&lt;p&gt;&quot;.curl_error($ch).&quot;&lt;/p&gt;&quot;;}
// S'il s'est exécuté correctement, on effectue les traitements...
else
{
	$liste_param_paypal = recup_param_paypal($resultat_paypal); // Lance notre fonction qui dispatche le résultat obtenu en un array
	
	// On affiche tous les paramètres afin d'avoir un aperçu global des valeurs exploitables (pour vos traitements). Une fois que votre page sera comme vous le voulez, supprimez ces 3 lignes. Les visiteurs n'auront aucune raison de voir ces valeurs s'afficher.
	echo &quot;&lt;pre&gt;&quot;;
	print_r($liste_param_paypal);
	echo &quot;&lt;/pre&gt;&quot;;
	
	// Si la requête a été traitée avec succès
	if ($liste_param_paypal['ACK'] == 'Success')
	{
		echo &quot;&lt;h1&gt;Youpii, le paiement a été effectué&lt;/h1&gt;&quot;; // On affiche la page avec les remerciements, et tout le tralala...
		// Mise à jour de la base de données &amp; traitements divers...
		mysql_query(&quot;UPDATE commandes SET etat='OK' WHERE id_commande='&quot;.$liste_param_paypal['TRANSACTIONID'].&quot;'&quot;);
	}
	else // En cas d'échec, affiche la première erreur trouvée.
	{echo &quot;&lt;p&gt;Erreur de communication avec le serveur PayPal.&lt;br /&gt;&quot;.$liste_param_paypal['L_SHORTMESSAGE0'].&quot;&lt;br /&gt;&quot;.$liste_param_paypal['L_LONGMESSAGE0'].&quot;&lt;/p&gt;&quot;;}
}
// On ferme notre session cURL.
curl_close($ch);
?&gt;</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
<span class="arrow"></span>
<span class="next">Récupérer les paramètres dans un tableau</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
<span class="next">Toutes les infos du paiement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Touteslesinfosdupaiement"></a><h2>Toutes les infos du paiement</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
<span class="arrow"></span>
<span class="next">Le paiement... ou pas</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
<span class="next">Mise en production</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-toutes-les-infos-du-paiement" data-claire-element-id="482608">Toutes les infos du paiement</h4><p id="r-482601" data-claire-element-id="482601">Nous venons de voir comment créer nos pages afin d'effectuer un paiement, mais il nous manque quand même pas mal d'informations pour compléter notre base de données. Pour récupérer toutes ces informations, il nous faut appeler l'API PayPal avec la fonction <strong>GetExpressCheckoutDetails</strong>. Ainsi vous récupérerez toutes les informations qu'il est possible d'avoir sur le paiement ainsi que sur l'acheteur.</p><p id="r-482602" data-claire-element-id="482602">Cette fonction peut être utile autant dans votre page d'annulation de paiement que dans celle de validation.</p><p id="r-482603" data-claire-element-id="482603">Vous pouvez donc créer une page de traitement afin de mettre à jour les informations client, par exemple.</p><p id="r-482604" data-claire-element-id="482604">Voici donc ce que ça donne en images. ;)</p><h6 id="r-traitements-php" data-claire-element-id="482607">traitements.php</h6><pre id="r-482605" data-claire-element-id="482605"><code data-claire-semantic="html+php">&lt;?php
include(&quot;fonction_api.php&quot;);
$requete = construit_url_paypal();
$requete = $requete.&quot;&amp;METHOD=GetExpressCheckoutDetails&quot;.
			&quot;&amp;TOKEN=&quot;.htmlentities($_GET['token'], ENT_QUOTES); // Ajoute le jeton

$ch = curl_init($requete);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$resultat_paypal = curl_exec($ch);

if (!$resultat_paypal) // S'il y a une erreur
	{echo &quot;&lt;p&gt;Erreur&lt;/p&gt;&lt;p&gt;&quot;.curl_error($ch).&quot;&lt;/p&gt;&quot;;}
// S'il s'est exécuté correctement
else
{
	$liste_param_paypal = recup_param_paypal($resultat_paypal);
	
	// On affiche tous les paramètres afin d'avoir un aperçu global des valeurs exploitables (pour vos traitements). Une fois que votre page sera comme vous le voulez, supprimez ces 3 lignes. Les visiteurs n'auront aucune raison de voir ces valeurs s'afficher.
	echo &quot;&lt;pre&gt;&quot;;
	print_r($liste_param_paypal);
	echo &quot;&lt;/pre&gt;&quot;;
	
	// Si la requête a été traitée avec succès
	
	// Mise à jour de la base de données &amp; traitements divers... Exemple :
	mysql_query(&quot;INSERT INTO client(nom, prenom) VALUE('&quot;.$liste_param_paypal['FIRSTNAME'].&quot;', '&quot;.$liste_param_paypal['LASTNAME'].&quot;')&quot;);
}
curl_close($ch);
?&gt;</code></pre><p id="r-482606" data-claire-element-id="482606">Vous n'avez plus qu'à appeler cette page après que le visiteur se soit connecté au site de PayPal.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
<span class="arrow"></span>
<span class="next">Le paiement... ou pas</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
<span class="next">Mise en production</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Miseenproduction"></a><h2>Mise en production</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
<span class="arrow"></span>
<span class="next">Toutes les infos du paiement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
<span class="next">Mise en place du logo PayPal</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-mise-en-production" data-claire-element-id="482623">Mise en production</h4><p id="r-482609" data-claire-element-id="482609">Une fois que vous avez bien testé votre programme (paiement complété / paiement annulé), et que tout va comme sur des roulettes, il vous reste à mettre votre site en production pour que tous vos visiteurs puissent en profiter !</p><p id="r-482610" data-claire-element-id="482610">Pour accomplir cela, voici ce qu'il faut faire.</p><p id="r-482611" data-claire-element-id="482611">Rendez-vous sur le site de Paypal : <a href="https://www.paypal.com/fr/mrb/pal=SSS2BCWJSDXDQ">www.paypal.fr</a>, puis cliquez sur le lien <strong>Ouvrez un compte</strong>.<br/> Ensuite choisissez un compte de type <strong>Business</strong>, afin d'avoir toutes les options concernant les sites web.<br/> Une fois que votre compte est créé, procédez à la création d'une signature API, comme pour le compte de test.</p><p id="r-482612" data-claire-element-id="482612">Cliquez sur <strong>Préférences / Plus?</strong>, puis <strong>Accès à l'API</strong>, et enfin <strong>Demander des informations d'authentification API</strong>.<br/> Choisissez ensuite <strong>Demandez une signature API</strong> et valider votre demande. Vous aurez ainsi le nom d'utilisateur, le mot de passe et la signature de l'API.<br/> Remplacez les données de tests, contenues dans votre fichier de configuration, par les données que vous venez d'obtenir.<br/> Pensez à conserver les données de tests quelque part afin que vous puissiez effectuer de nouveaux tests lors de mises à jour de votre programme.</p><p id="r-482613" data-claire-element-id="482613">Modifiez également le serveur de l'API par celui de production :</p><p id="r-482614" data-claire-element-id="482614"><a href="https://api-3t.paypal.com/nvp"><strong>https://api-3t.paypal.com/nvp</strong></a></p><p id="r-482615" data-claire-element-id="482615">Pensez également à changer le serveur de redirection du visiteur sur le site de PayPal (au lieu de la sandbox) :</p><p id="r-482616" data-claire-element-id="482616"><strong>https://www.paypal.com/webscr&amp;cmd=_express-checkout&amp;token=...</strong></p><h5 id="r-petit-truc-1" data-claire-element-id="482622">Petit truc</h5><p id="r-482617" data-claire-element-id="482617">Enregistrez le site de redirection du visiteur dans une variable, et placez celle-ci dans votre fichier de configuration. Ainsi toutes les données à modifier sont au même endroit. Et c'est plus facile pour switcher entre l'environnement de test et celui de production.</p><h6 id="r-configuration-et-fonctions-api" data-claire-element-id="482621">Configuration et fonctions API</h6><pre id="r-482618" data-claire-element-id="482618"><code data-claire-semantic="html+php">&lt;?php

	/******   SERVEUR DE TESTS  ******/
	// $serveur_paypal = &quot;https://www.sandbox.paypal.com/webscr&amp;cmd=_express-checkout&amp;token=&quot;;

	/******   SERVEUR DE PRODUCTION ******/
	$serveur_paypal = &quot;https://www.paypal.com/webscr&amp;cmd=_express-checkout&amp;token=&quot;;


 function construit_url_paypal()
  {
	/******   DONNEES DE TESTS  ******/
	/*
	$api_paypal = 'https://api-3t.sandbox.paypal.com/nvp?';
	$user = 'vendeur_1236594550_biz_api1.siteduzero.com';
	$pass = 'SEFYITJFG8QRHN1S';
	$signature = 'ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n';
	*/


	/******   DONNEES DE PRODUCTION ******/
	$api_paypal = 'https://api-3t.paypal.com/nvp?';
	$user = 'user_api1.siteduzero.com';
	$pass = 'KIRWQBHAQTUZO4ST';
	$signature = 'IUk3eOIUFAXKTUAPSITZHQOpoytQPYhQYOZNMkDlYPTYL-og6x7HnW98x';


	$version = 56.0; // Version de l'API

	$api_paypal = $api_paypal.'VERSION='.$version.'&amp;USER='.$user.'&amp;PWD='.$pass.'&amp;SIGNATURE='.$signature; // Ajoute tous les paramètres

	return 	$api_paypal; // Renvoie la chaîne contenant tous nos paramètres.
  }
?&gt;</code></pre><p id="r-482619" data-claire-element-id="482619">Et lorsque vous devez rediriger le visiteur sur le site de PayPal, vous n'avez qu'à écrire :</p><pre id="r-482620" data-claire-element-id="482620"><code data-claire-semantic="html+php">&lt;?php
header(&quot;Location: &quot;.$serveur_paypal.$liste_param_paypal['TOKEN']);
?&gt;</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
<span class="arrow"></span>
<span class="next">Toutes les infos du paiement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
<span class="next">Mise en place du logo PayPal</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="MiseenplacedulogoPayPal"></a><h2>Mise en place du logo PayPal</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
<span class="arrow"></span>
<span class="next">Mise en production</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">
<span class="next">Annexes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-mise-en-place-du-logo-paypal" data-claire-element-id="482632">Mise en place du logo PayPal</h4><figure id="r-482625" data-claire-element-id="482626"><img id="r-482624" data-claire-element-id="482624" src="../../user.oc-static.com/files/173001_174000/173668.gif" alt="Logo PayPal"/></figure><p id="r-482627" data-claire-element-id="482627">Attendez : avant de partir, j'ai encore une petite chose à vous dire.<br/> PayPal a défini pour son logo des règles à suivre lorsque vous proposez l'option PayPal à vos clients.</p><p id="r-482628" data-claire-element-id="482628">Les logos en question sont disponibles sur le site de PayPal, à cette adresse : <a href="https://www.paypal.com/fr/logos">https://www.paypal.com/fr/logos</a>.</p><p id="r-482629" data-claire-element-id="482629">Vous pouvez également consulter le guide d'intégration visuelle <a href="https://www.paypal-france.fr/webscr/fr_FR/html/Espace-Integration-PayPal/ic_logo-positioning-guidelines.html">à cette adresse</a>, afin de savoir où et comment mettre en place ces logos.</p><p id="r-482630" data-claire-element-id="482630">Voilà : maintenant, vous êtes capables de bien comprendre comment fonctionne tout cela, et vous n'aurez aucune difficulté à le mettre en place sur votre site web.</p><p id="r-482631" data-claire-element-id="482631">Visitez encore la page Annexes pour accéder aux liens de la documentation officielle de PayPal, ainsi qu'un résumé des fonctions et serveurs à utiliser.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
<span class="arrow"></span>
<span class="next">Mise en production</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">
<span class="next">Annexes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Annexes"></a><h2>Annexes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
<span class="arrow"></span>
<span class="next">Mise en place du logo PayPal</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
<span class="next">Liens utiles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-482634" data-claire-element-id="482634">Dans ce dernier chapitre, vous trouverez les liens du site officiel de PayPal contenant la documentation nécessaire à la mise en place de ce système de paiement, ainsi que les serveurs de connexion PayPal.<br/> Vous trouverez également d'autres liens comme la documentation PHP de la fonction cURL, ainsi qu'un SDK utilisant les fonctions de l'API PayPal.<br/> Et pour finir, en fin de chapitre, j'ai regroupé les principales fonctions d'appel de l'API, leurs paramètres ainsi que les paramètres retournés par ces fonctions.</p>
</div><a name="Liensutiles"></a><h2>Liens utiles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">
<span class="arrow"></span>
<span class="next">Annexes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
<span class="next">Liste des serveurs de connexion</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-liens-utiles-4" data-claire-element-id="482688">Liens utiles</h4><p id="r-482635" data-claire-element-id="482635">Vous pouvez trouver plus de documentation directement sur le site de <strong>PayPal</strong>. Voici quelques adresses intéressantes :</p><h6 id="r-documentation-paypal" data-claire-element-id="482654">Documentation PayPal</h6><ul id="r-482646" data-claire-element-id="482646"><li id="r-482638" data-claire-element-id="482638"><p id="r-482636" data-claire-element-id="482637">Guide d'intégration :https://www.paypal-france.fr/webscr/fr [...] entation.htm<strong>l<img id="r-482637" data-claire-element-id="482636" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/>Guide d'intégration :</strong><a href="https://www.paypal-france.fr/webscr/fr_FR/html/Espace-Integration-PayPal/ic_documentation.html">https://www.paypal-france.fr/webscr/fr [...] entation.html</a></p></li><li id="r-482641" data-claire-element-id="482641"><p id="r-482639" data-claire-element-id="482640">Documentation technique : https://www.paypal.com/fr/cgi-bin/webs [...] ation-outsid<strong>e<img id="r-482640" data-claire-element-id="482639" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/>Documentation technique : </strong><a href="https://www.paypal.com/fr/cgi-bin/webscr?cmd=_additional-payment-integration-outside">https://www.paypal.com/fr/cgi-bin/webs [...] ation-outside</a></p></li><li id="r-482644" data-claire-element-id="482645"><img id="r-482645" data-claire-element-id="482644" src="Templates/images/designs/2/pays/gb.html" alt="Image utilisateur"/><img id="r-482642" data-claire-element-id="482642" src="Templates/images/designs/2/pays/gb.html" alt="Image utilisateur"/><p id="r-482643" data-claire-element-id="482643">Documentation technique :https://cms.paypal.com/us/cgi-bin/?cmd [...] documentatio<strong>n</strong><a href="https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/library_documentation">https://cms.paypal.com/us/cgi-bin/?cmd [...] documentation</a></p></li></ul><ul id="r-482653" data-claire-element-id="482653"><li id="r-482649" data-claire-element-id="482649"><p id="r-482647" data-claire-element-id="482648"><em><img id="r-482648" data-claire-element-id="482647" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/>Documentation Bouton Acheter Maintenant : <a href="https://www.paypal-france.fr/webscr/fr_FR/html/Espace-Integration-PayPal/ic_standard_home.html#BuyNowButtons">https://www.paypal-france.fr/webscr/fr [...] BuyNowButtons</a></em></p></li><li id="r-482652" data-claire-element-id="482652"><p id="r-482650" data-claire-element-id="482651"><em><img id="r-482651" data-claire-element-id="482650" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/>Documentation Notification Instantanée de Paiement (IPN) : <a href="https://www.paypal-france.fr/webscr/fr_FR/html/Espace-Integration-PayPal/ic_ipn.html">https://www.paypal-france.fr/webscr/fr [...] l/ic_ipn.html</a></em></p></li></ul><h6 id="r-documentation-curl" data-claire-element-id="482660">Documentation cURL</h6><ul id="r-482659" data-claire-element-id="482659"><li id="r-482657" data-claire-element-id="482658"><img id="r-482658" data-claire-element-id="482657" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/><img id="r-482655" data-claire-element-id="482655" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/><p id="r-482656" data-claire-element-id="482656"><strong>Documentation PHP sur la fonction cURL : </strong><a href="http://www.php.net/curl">http://www.php.net/curl</a></p></li></ul><h6 id="r-site-de-paypal" data-claire-element-id="482670">Site de PayPal</h6><ul id="r-482669" data-claire-element-id="482669"><li id="r-482663" data-claire-element-id="482664"><img id="r-482664" data-claire-element-id="482663" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/><img id="r-482661" data-claire-element-id="482661" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/><p id="r-482662" data-claire-element-id="482662"><strong>Site de PayPal : </strong><a href="https://www.paypal.com/fr/mrb/pal=SSS2BCWJSDXDQ">http://www.paypal.fr/</a></p></li><li id="r-482667" data-claire-element-id="482668"><img id="r-482668" data-claire-element-id="482667" src="Templates/images/designs/2/pays/gb.html" alt="Image utilisateur"/><img id="r-482665" data-claire-element-id="482665" src="Templates/images/designs/2/pays/gb.html" alt="Image utilisateur"/><p id="r-482666" data-claire-element-id="482666"><strong>SandBox de PayPal (site de tests) : </strong><a href="https://developer.paypal.com/">https://developer.paypal.com/</a></p></li></ul><h6 id="r-logo-paypal" data-claire-element-id="482680">Logo PayPal</h6><ul id="r-482679" data-claire-element-id="482679"><li id="r-482673" data-claire-element-id="482674"><img id="r-482674" data-claire-element-id="482673" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/><img id="r-482671" data-claire-element-id="482671" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/><p id="r-482672" data-claire-element-id="482672"><strong>Règles de positionnement du logo :</strong><a href="https://www.paypal-france.fr/webscr/fr_FR/html/Espace-Integration-PayPal/ic_logo-positioning-guidelines.html">https://www.paypal-france.fr/webscr/fr [...] idelines.html</a></p></li><li id="r-482677" data-claire-element-id="482678"><img id="r-482678" data-claire-element-id="482677" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/><img id="r-482675" data-claire-element-id="482675" src="Templates/images/designs/2/pays/fr.html" alt="Image utilisateur"/><p id="r-482676" data-claire-element-id="482676"><strong>Espace logos : </strong><a href="https://www.paypal.com/fr/logos">https://www.paypal.com/fr/logos</a></p></li></ul><h6 id="r-version-de-l-api-1" data-claire-element-id="482687">Version de l'API</h6><p id="r-482681" data-claire-element-id="482681">La version en cours de l'API se trouve en commentaire dans le code source de la page du site de PayPal.<br/> Cependant, il existe un topic sur le forum du site de PayPal, où l'un des modérateurs met à jour cette information après chaque changement de version.<br/> Voici cette adresse :</p><ul id="r-482686" data-claire-element-id="482686"><li id="r-482684" data-claire-element-id="482685"><img id="r-482685" data-claire-element-id="482684" src="Templates/images/designs/2/pays/gb.html" alt="Image utilisateur"/><img id="r-482682" data-claire-element-id="482682" src="Templates/images/designs/2/pays/gb.html" alt="Image utilisateur"/><p id="r-482683" data-claire-element-id="482683"><strong>Info de la version de l'API sur le Forum PayPal : </strong><a href="http://paypaldeveloper.com/pdn/board/message?board.id=nvp&amp;thread.id=4475">http://paypaldeveloper.com/pdn/board/m [...] hread.id=4475</a></p></li></ul>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">
<span class="arrow"></span>
<span class="next">Annexes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
<span class="next">Liste des serveurs de connexion</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Listedesserveursdeconnexion"></a><h2>Liste des serveurs de connexion</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
<span class="arrow"></span>
<span class="next">Liens utiles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
<span class="next">Exemples complets</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-liste-des-serveurs-de-connexion" data-claire-element-id="482752">Liste des serveurs de connexion</h4><h5 id="r-serveur-api-nvp" data-claire-element-id="482713">Serveur API NVP</h5><table id="r-482712" data-claire-element-id="482712"><thead id="r-482696" data-claire-element-id="482696"><tr id="r-482695" data-claire-element-id="482695"><th id="r-482690" data-claire-element-id="482690"><p id="r-482689" data-claire-element-id="482689">Mécanisme d'authentification</p></th><th id="r-482692" data-claire-element-id="482692"><p id="r-482691" data-claire-element-id="482691">Environnement de production</p></th><th id="r-482694" data-claire-element-id="482694"><p id="r-482693" data-claire-element-id="482693">Environnement de test</p></th></tr></thead><tbody id="r-482711" data-claire-element-id="482711"><tr id="r-482703" data-claire-element-id="482703"><td id="r-482698" data-claire-element-id="482698"><p id="r-482697" data-claire-element-id="482697"><strong>Serveurs API utilisant la sécurité des signatures API</strong></p></td><td id="r-482700" data-claire-element-id="482700"><p id="r-482699" data-claire-element-id="482699"><a href="https://api-3t.paypal.com/nvp"><strong>https://api-3t.paypal.com/nvp</strong></a></p></td><td id="r-482702" data-claire-element-id="482702"><p id="r-482701" data-claire-element-id="482701"><a href="https://api-3t.sandbox.paypal.com/nvp"><strong>https://api-3t.sandbox.paypal.com/nvp</strong></a></p></td></tr><tr id="r-482710" data-claire-element-id="482710"><td id="r-482705" data-claire-element-id="482705"><p id="r-482704" data-claire-element-id="482704"><em>Serveurs API utilisant la sécurité des certificats d'API</em></p></td><td id="r-482707" data-claire-element-id="482707"><p id="r-482706" data-claire-element-id="482706"><a href="https://api.paypal.com/nvp"><em>https://api.paypal.com/nvp</em></a></p></td><td id="r-482709" data-claire-element-id="482709"><p id="r-482708" data-claire-element-id="482708"><a href="https://api.sandbox.paypal.com/nvp"><em>https://api.sandbox.paypal.com/nvp</em></a></p></td></tr></tbody></table><h5 id="r-serveur-soap" data-claire-element-id="482738"><em>Serveur SOAP</em></h5><table id="r-482737" data-claire-element-id="482737"><thead id="r-482721" data-claire-element-id="482721"><tr id="r-482720" data-claire-element-id="482720"><th id="r-482715" data-claire-element-id="482715"><p id="r-482714" data-claire-element-id="482714"><em>Mécanisme d'authentification</em></p></th><th id="r-482717" data-claire-element-id="482717"><p id="r-482716" data-claire-element-id="482716"><em>Nœud de service réel de production</em></p></th><th id="r-482719" data-claire-element-id="482719"><p id="r-482718" data-claire-element-id="482718"><em>Nœud de service test (environnement de test)</em></p></th></tr></thead><tbody id="r-482736" data-claire-element-id="482736"><tr id="r-482728" data-claire-element-id="482728"><td id="r-482723" data-claire-element-id="482723"><p id="r-482722" data-claire-element-id="482722"><em>Signature API</em></p></td><td id="r-482725" data-claire-element-id="482725"><p id="r-482724" data-claire-element-id="482724"><a href="https://api-3t.paypal.com/2.0/"><em>https://api-3t.paypal.com/2.0/</em></a></p></td><td id="r-482727" data-claire-element-id="482727"><p id="r-482726" data-claire-element-id="482726"><a href="https://api-3t.sandbox.paypal.com/2.0/"><em>https://api-3t.sandbox.paypal.com/2.0/</em></a></p></td></tr><tr id="r-482735" data-claire-element-id="482735"><td id="r-482730" data-claire-element-id="482730"><p id="r-482729" data-claire-element-id="482729">Certificat d'API</p></td><td id="r-482732" data-claire-element-id="482732"><p id="r-482731" data-claire-element-id="482731"><a href="https://api.paypal.com/2.0/">https://api.paypal.com/2.0/</a></p></td><td id="r-482734" data-claire-element-id="482734"><p id="r-482733" data-claire-element-id="482733"><a href="https://api.sandbox.paypal.com/2.0/">https://api.sandbox.paypal.com/2.0/</a></p></td></tr></tbody></table><h5 id="r-liste-des-adresses-de-connexion-client-au-service-paypal" data-claire-element-id="482751">Liste des adresses de connexion client au service PayPal :</h5><table id="r-482750" data-claire-element-id="482750"><tbody id="r-482749" data-claire-element-id="482749"><tr id="r-482743" data-claire-element-id="482743"><td id="r-482740" data-claire-element-id="482740"><p id="r-482739" data-claire-element-id="482739"><strong>Site de test :</strong></p></td><td id="r-482742" data-claire-element-id="482742"><p id="r-482741" data-claire-element-id="482741">https://www.sandbox.paypal.com/webscr&amp;cmd=_express-checkout&amp;token=...</p></td></tr><tr id="r-482748" data-claire-element-id="482748"><td id="r-482745" data-claire-element-id="482745"><p id="r-482744" data-claire-element-id="482744"><strong>Site de production :</strong></p></td><td id="r-482747" data-claire-element-id="482747"><p id="r-482746" data-claire-element-id="482746">https://www.paypal.com/webscr&amp;cmd=_express-checkout&amp;token=...</p></td></tr></tbody></table>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
<span class="arrow"></span>
<span class="next">Liens utiles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
<span class="next">Exemples complets</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Exemplescomplets"></a><h2>Exemples complets</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
<span class="arrow"></span>
<span class="next">Liste des serveurs de connexion</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
<span class="next">Appels de l&#039;API et réponses</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-exemples-complets" data-claire-element-id="482764">Exemples complets</h4><p id="r-482753" data-claire-element-id="482753">Euh... :euh: Comment vous expliquer...</p><p id="r-482754" data-claire-element-id="482754">Il existe des exemples complets de l'intégration de PayPal sur un site web.<br/> Il y a des exemples en <strong>PHP</strong>, mais aussi en <strong>ASP</strong>, en <strong>Java</strong>, en <strong>Ruby </strong>et encore dans bien d'autres langages... Des exemples de l'utilisation de <strong>l'API NVP</strong>, mais également des exemples de la communication avec le protocole <strong>SOAP</strong>.</p><p id="r-482755" data-claire-element-id="482755">Pour cela, il n'y a qu'une seule chose à faire, vous rendre à cette adresse :</p><ul id="r-482758" data-claire-element-id="482758"><li id="r-482757" data-claire-element-id="482757"><p id="r-482756" data-claire-element-id="482756"><strong>SDK PayPal pour avoir tous les exemples :</strong><a href="https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/library_download_sdks">https://cms.paypal.com/us/cgi-bin/?cmd [...] download_sdks</a></p></li></ul><div id="r-482760" data-claire-element-id="482760" data-claire-semantic="question"><p id="r-482759" data-claire-element-id="482759">Donc on a lu ton tutoriel pour rien, car on n'a qu'à recopier le contenu des exemples et ça marche o_O ?</p></div><p id="r-482761" data-claire-element-id="482761">:euh: En quelque sorte... Mais grâce à mon tutoriel, vous serez à même de comprendre tout cela vous-mêmes afin d'adapter le code à votre site.</p><p id="r-482762" data-claire-element-id="482762">:colere: :colere: :colere: :colere: :colere:</p><p id="r-482763" data-claire-element-id="482763">:honte: Bon je dois y aller, à bientôt !!! :-°</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
<span class="arrow"></span>
<span class="next">Liste des serveurs de connexion</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
<span class="next">Appels de l&#039;API et réponses</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Appelsdel039APIetrponses"></a><h2>Appels de l&#039;API et réponses</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
<span class="arrow"></span>
<span class="next">Exemples complets</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-appels-de-l-api-et-reponses" data-claire-element-id="483279">Appels de l'API et réponses</h4><p id="r-482765" data-claire-element-id="482765">Dans cette partie, j'ai dressé des tableaux répertoriant toutes les informations qui peuvent vous être utiles concernant les appels de l'API, ainsi que les valeurs qui vous sont retournées.</p><aside id="r-482767" data-claire-element-id="482767" data-claire-semantic="warning"><p id="r-482766" data-claire-element-id="482766">Ces listes ne contiennent pas tous les paramètres, mais seulement ceux qui à mon avis sont les plus importants. Si vous souhaitez avoir la liste complète, reportez-vous au manuel nommé NVP <strong>API Developer Reference</strong>, disponible <a href="https://www.paypal-france.fr/webscr/fr_FR/html/Espace-Integration-PayPal/ic_documentation.html">à cette adresse</a>.</p></aside><h5 id="r-contenu-des-appels-de-l-api-paypal" data-claire-element-id="482807">Contenu des appels de l'API PayPal</h5><p id="r-482768" data-claire-element-id="482768">Vous trouverez ci-dessous les paramètres qui doivent figurer dans chaque appel de l'API PayPal.</p><table id="r-482806" data-claire-element-id="482806"><thead id="r-482776" data-claire-element-id="482776"><tr id="r-482775" data-claire-element-id="482775"><th id="r-482770" data-claire-element-id="482770"><p id="r-482769" data-claire-element-id="482769">Nom du paramètre</p></th><th id="r-482772" data-claire-element-id="482772"><p id="r-482771" data-claire-element-id="482771">Description</p></th><th id="r-482774" data-claire-element-id="482774"><p id="r-482773" data-claire-element-id="482773">Exemple</p></th></tr></thead><tbody id="r-482805" data-claire-element-id="482805"><tr id="r-482783" data-claire-element-id="482783"><td id="r-482778" data-claire-element-id="482778"><p id="r-482777" data-claire-element-id="482777"><strong>USER</strong></p></td><td id="r-482780" data-claire-element-id="482780"><p id="r-482779" data-claire-element-id="482779">Utilisateur de l'API</p></td><td id="r-482782" data-claire-element-id="482782"><p id="r-482781" data-claire-element-id="482781"><strong>vendeur_1236594550_biz_api1.siteduzero.com</strong></p></td></tr><tr id="r-482790" data-claire-element-id="482790"><td id="r-482785" data-claire-element-id="482785"><p id="r-482784" data-claire-element-id="482784"><strong>PWD</strong></p></td><td id="r-482787" data-claire-element-id="482787"><p id="r-482786" data-claire-element-id="482786">Mot de passe pour la connexion à l'API</p></td><td id="r-482789" data-claire-element-id="482789"><p id="r-482788" data-claire-element-id="482788"><strong>SEFYITJFG8QRHN1S</strong></p></td></tr><tr id="r-482797" data-claire-element-id="482797"><td id="r-482792" data-claire-element-id="482792"><p id="r-482791" data-claire-element-id="482791"><strong>SIGNATURE</strong></p></td><td id="r-482794" data-claire-element-id="482794"><p id="r-482793" data-claire-element-id="482793">Signature de l'API</p></td><td id="r-482796" data-claire-element-id="482796"><p id="r-482795" data-claire-element-id="482795"><strong>ZWg4tSHZZ0GQIK8U6VKGWO1mxrtOAJzAGFNRnFpDWRKX-fv8q5Tuj64n</strong></p></td></tr><tr id="r-482804" data-claire-element-id="482804"><td id="r-482799" data-claire-element-id="482799"><p id="r-482798" data-claire-element-id="482798"><strong>VERSION</strong></p></td><td id="r-482801" data-claire-element-id="482801"><p id="r-482800" data-claire-element-id="482800">Version de l'API à utiliser</p></td><td id="r-482803" data-claire-element-id="482803"><p id="r-482802" data-claire-element-id="482802"><strong>56.0</strong></p></td></tr></tbody></table><h5 id="r-contenu-des-reponses-de-l-api-paypal" data-claire-element-id="482900">Contenu des réponses de l'API PayPal</h5><p id="r-482808" data-claire-element-id="482808">Ci-dessous les paramètres qui sont retournés après chaque appel de l'API PayPal.</p><table id="r-482860" data-claire-element-id="482860"><thead id="r-482816" data-claire-element-id="482816"><tr id="r-482815" data-claire-element-id="482815"><th id="r-482810" data-claire-element-id="482810"><p id="r-482809" data-claire-element-id="482809">Nom du paramètre</p></th><th id="r-482812" data-claire-element-id="482812"><p id="r-482811" data-claire-element-id="482811">Description</p></th><th id="r-482814" data-claire-element-id="482814"><p id="r-482813" data-claire-element-id="482813">Exemple</p></th></tr></thead><tbody id="r-482859" data-claire-element-id="482859"><tr id="r-482823" data-claire-element-id="482823"><td id="r-482818" data-claire-element-id="482818"><p id="r-482817" data-claire-element-id="482817"><strong>TOKEN</strong></p></td><td id="r-482820" data-claire-element-id="482820"><p id="r-482819" data-claire-element-id="482819">Jeton attribué par le serveur de PayPal</p></td><td id="r-482822" data-claire-element-id="482822"><p id="r-482821" data-claire-element-id="482821"><strong>EC-28P55904SP346364Y</strong></p></td></tr><tr id="r-482830" data-claire-element-id="482830"><td id="r-482825" data-claire-element-id="482825"><p id="r-482824" data-claire-element-id="482824"><strong>TIMESTAMP</strong></p></td><td id="r-482827" data-claire-element-id="482827"><p id="r-482826" data-claire-element-id="482826">Date et heure du traitement</p></td><td id="r-482829" data-claire-element-id="482829"><p id="r-482828" data-claire-element-id="482828"><strong>2009-03-10T11:43:51Z</strong></p></td></tr><tr id="r-482837" data-claire-element-id="482837"><td id="r-482832" data-claire-element-id="482832"><p id="r-482831" data-claire-element-id="482831"><strong>CORRELATIONID</strong></p></td><td id="r-482834" data-claire-element-id="482834"><p id="r-482833" data-claire-element-id="482833">Jeton de débogage</p></td><td id="r-482836" data-claire-element-id="482836"><p id="r-482835" data-claire-element-id="482835"><strong>62da379c625d6</strong></p></td></tr><tr id="r-482844" data-claire-element-id="482844"><td id="r-482839" data-claire-element-id="482839"><p id="r-482838" data-claire-element-id="482838"><strong>ACK</strong></p></td><td id="r-482841" data-claire-element-id="482841"><p id="r-482840" data-claire-element-id="482840">Statut de la requête</p></td><td id="r-482843" data-claire-element-id="482843"><p id="r-482842" data-claire-element-id="482842"><strong>Success</strong></p></td></tr><tr id="r-482851" data-claire-element-id="482851"><td id="r-482846" data-claire-element-id="482846"><p id="r-482845" data-claire-element-id="482845"><strong>VERSION</strong></p></td><td id="r-482848" data-claire-element-id="482848"><p id="r-482847" data-claire-element-id="482847">Version de l'API qui a été utilisée</p></td><td id="r-482850" data-claire-element-id="482850"><p id="r-482849" data-claire-element-id="482849"><strong>56.0</strong></p></td></tr><tr id="r-482858" data-claire-element-id="482858"><td id="r-482853" data-claire-element-id="482853"><p id="r-482852" data-claire-element-id="482852"><strong>BUILD</strong></p></td><td id="r-482855" data-claire-element-id="482855"><p id="r-482854" data-claire-element-id="482854">Version de la compilation de l'API. C'est en quelque sorte un complément du numéro de version.</p></td><td id="r-482857" data-claire-element-id="482857"><p id="r-482856" data-claire-element-id="482856"><strong>854529</strong></p></td></tr></tbody></table><p id="r-482861" data-claire-element-id="482861">En cas d'erreur lors de l'exécution (paramètre <strong>ACK</strong> n'est pas égal à <em><strong>Success</strong></em>), l'API retourne également des paramètres correspondant à (aux) erreur(s) en question. Les erreurs sont numérotées et commencent par 0.<br/> Exemple : L_ERRORCODE0, L_ERRORCODE1, L_ERRORCODE2, ...<br/> Voici donc ci-dessous les paramètres que vous recevrez en cas d'erreur.</p><table id="r-482899" data-claire-element-id="482899"><thead id="r-482869" data-claire-element-id="482869"><tr id="r-482868" data-claire-element-id="482868"><th id="r-482863" data-claire-element-id="482863"><p id="r-482862" data-claire-element-id="482862">Nom du paramètre</p></th><th id="r-482865" data-claire-element-id="482865"><p id="r-482864" data-claire-element-id="482864">Description</p></th><th id="r-482867" data-claire-element-id="482867"><p id="r-482866" data-claire-element-id="482866">Exemple</p></th></tr></thead><tbody id="r-482898" data-claire-element-id="482898"><tr id="r-482876" data-claire-element-id="482876"><td id="r-482871" data-claire-element-id="482871"><p id="r-482870" data-claire-element-id="482870"><strong>L_ERRORCODE0</strong></p></td><td id="r-482873" data-claire-element-id="482873"><p id="r-482872" data-claire-element-id="482872">Correspond au code de l'erreur</p></td><td id="r-482875" data-claire-element-id="482875"><p id="r-482874" data-claire-element-id="482874"><strong>81002</strong></p></td></tr><tr id="r-482883" data-claire-element-id="482883"><td id="r-482878" data-claire-element-id="482878"><p id="r-482877" data-claire-element-id="482877"><strong>L_SHORTMESSAGE0</strong></p></td><td id="r-482880" data-claire-element-id="482880"><p id="r-482879" data-claire-element-id="482879">Message court de l'erreur. Il vous explique brièvement le problème.</p></td><td id="r-482882" data-claire-element-id="482882"><p id="r-482881" data-claire-element-id="482881"><strong>Unspecified Method</strong></p></td></tr><tr id="r-482890" data-claire-element-id="482890"><td id="r-482885" data-claire-element-id="482885"><p id="r-482884" data-claire-element-id="482884"><strong>L_LONGMESSAGE0</strong></p></td><td id="r-482887" data-claire-element-id="482887"><p id="r-482886" data-claire-element-id="482886">Message long de l'erreur. Il vous explique plus en détail le problème.</p></td><td id="r-482889" data-claire-element-id="482889"><p id="r-482888" data-claire-element-id="482888"><strong>Method Specified is not Supported</strong></p></td></tr><tr id="r-482897" data-claire-element-id="482897"><td id="r-482892" data-claire-element-id="482892"><p id="r-482891" data-claire-element-id="482891"><strong>L_SEVERITYCODE0</strong></p></td><td id="r-482894" data-claire-element-id="482894"><p id="r-482893" data-claire-element-id="482893">Définit le niveau de gravité de l'erreur</p></td><td id="r-482896" data-claire-element-id="482896"><p id="r-482895" data-claire-element-id="482895"><strong>Error</strong></p></td></tr></tbody></table><h5 id="r-setexpresscheckout" data-claire-element-id="482989">SetExpressCheckout</h5><p id="r-482901" data-claire-element-id="482901">Cette fonction sert à initialiser un paiement sur le site de PayPal. Voici les principaux paramètres que vous pouvez lui transmettre.</p><table id="r-482988" data-claire-element-id="482988"><thead id="r-482909" data-claire-element-id="482909"><tr id="r-482908" data-claire-element-id="482908"><th id="r-482903" data-claire-element-id="482903"><p id="r-482902" data-claire-element-id="482902">Nom du paramètre</p></th><th id="r-482905" data-claire-element-id="482905"><p id="r-482904" data-claire-element-id="482904">Description</p></th><th id="r-482907" data-claire-element-id="482907"><p id="r-482906" data-claire-element-id="482906">Exemple</p></th></tr></thead><tbody id="r-482987" data-claire-element-id="482987"><tr id="r-482916" data-claire-element-id="482916"><td id="r-482911" data-claire-element-id="482911"><p id="r-482910" data-claire-element-id="482910"><strong>METHOD</strong></p></td><td id="r-482913" data-claire-element-id="482913"><p id="r-482912" data-claire-element-id="482912">Traitement à effectuer sur le serveur PayPal.<br/> Dans notre cas un paiement direct.</p></td><td id="r-482915" data-claire-element-id="482915"><p id="r-482914" data-claire-element-id="482914"><strong>SetExpressCheckout</strong></p></td></tr><tr id="r-482923" data-claire-element-id="482923"><td id="r-482918" data-claire-element-id="482918"><p id="r-482917" data-claire-element-id="482917"><strong>CANCELURL</strong></p></td><td id="r-482920" data-claire-element-id="482920"><p id="r-482919" data-claire-element-id="482919">URL vers laquelle le visiteur sera redirigé en cas d'annulation du paiement.</p></td><td id="r-482922" data-claire-element-id="482922"><p id="r-482921" data-claire-element-id="482921"><a href="http://www.siteduzero.com/cancel.php"><strong>http://www.siteduzero.com/cancel.php</strong></a></p></td></tr><tr id="r-482930" data-claire-element-id="482930"><td id="r-482925" data-claire-element-id="482925"><p id="r-482924" data-claire-element-id="482924"><strong>RETURNURL</strong></p></td><td id="r-482927" data-claire-element-id="482927"><p id="r-482926" data-claire-element-id="482926">URL vers laquelle le visiteur sera redirigé si le paiement a été effectué.</p></td><td id="r-482929" data-claire-element-id="482929"><p id="r-482928" data-claire-element-id="482928"><a href="http://www.siteduzero.com/return.php"><strong>http://www.siteduzero.com/return.php</strong></a></p></td></tr><tr id="r-482937" data-claire-element-id="482937"><td id="r-482932" data-claire-element-id="482932"><p id="r-482931" data-claire-element-id="482931"><strong>AMT</strong></p></td><td id="r-482934" data-claire-element-id="482934"><p id="r-482933" data-claire-element-id="482933">Valeur que le visiteur doit vous verser. N'oubliez pas le point, même si le prix est un chiffre rond (qu'il ne contient aucun centime).</p></td><td id="r-482936" data-claire-element-id="482936"><p id="r-482935" data-claire-element-id="482935"><strong>10.0</strong></p></td></tr><tr id="r-482944" data-claire-element-id="482944"><td id="r-482939" data-claire-element-id="482939"><p id="r-482938" data-claire-element-id="482938"><strong>CURRENCYCODE</strong></p></td><td id="r-482941" data-claire-element-id="482941"><p id="r-482940" data-claire-element-id="482940">Devise du montant. Si ce paramètre n'est pas spécifié, la devise est définie en $ américains (USD)</p></td><td id="r-482943" data-claire-element-id="482943"><p id="r-482942" data-claire-element-id="482942"><strong>EUR</strong></p></td></tr><tr id="r-482951" data-claire-element-id="482951"><td id="r-482946" data-claire-element-id="482946"><p id="r-482945" data-claire-element-id="482945"><strong>DESC</strong></p></td><td id="r-482948" data-claire-element-id="482948"><p id="r-482947" data-claire-element-id="482947">Description de l'article mis en vente. Cette description apparaitra lors du paiement sur le site de PayPal (long. max 127 caractères).</p></td><td id="r-482950" data-claire-element-id="482950"><p id="r-482949" data-claire-element-id="482949"><strong>Magnifique oeuvre d'art (que mon fils de 3 ans a peinte)</strong></p></td></tr><tr id="r-482958" data-claire-element-id="482958"><td id="r-482953" data-claire-element-id="482953"><p id="r-482952" data-claire-element-id="482952"><strong>LOCALECODE</strong></p></td><td id="r-482955" data-claire-element-id="482955"><p id="r-482954" data-claire-element-id="482954">Langue dans laquelle le site sera affiché. Par défaut c'est l'anglais (US.)</p></td><td id="r-482957" data-claire-element-id="482957"><p id="r-482956" data-claire-element-id="482956"><strong>FR</strong></p></td></tr><tr id="r-482965" data-claire-element-id="482965"><td id="r-482960" data-claire-element-id="482960"><p id="r-482959" data-claire-element-id="482959"><strong>HDRIMG</strong></p></td><td id="r-482962" data-claire-element-id="482962"><p id="r-482961" data-claire-element-id="482961">Image qui sera affichée en haut à gauche de la page de paiement. (max. 750 x 90 px). Par défaut le nom de l'entreprise est affiché.<br/> PayPal recommande qu'elle soit stockée sur un serveur sécurisé (https). Probablement pour éviter les messages affichant qu'un contenu non sécurisé se trouve sur la page.</p></td><td id="r-482964" data-claire-element-id="482964"><p id="r-482963" data-claire-element-id="482963"><a href="../../openclassrooms.com/Templates/images/designs/2/logo_sdz_fr.html"><strong>http://www.siteduzero.com/Templates/im [...] go_sdz_fr.png</strong></a></p></td></tr><tr id="r-482972" data-claire-element-id="482972"><td id="r-482967" data-claire-element-id="482967"><p id="r-482966" data-claire-element-id="482966"><strong>INVNUM</strong></p></td><td id="r-482969" data-claire-element-id="482969"><p id="r-482968" data-claire-element-id="482968">Identifiant de la transaction. Il vous sera retourné lors de l'exécution du paiement.</p></td><td id="r-482971" data-claire-element-id="482971"><p id="r-482970" data-claire-element-id="482970"><strong>15126</strong></p></td></tr><tr id="r-482979" data-claire-element-id="482979"><td id="r-482974" data-claire-element-id="482974"><p id="r-482973" data-claire-element-id="482973"><strong>EMAIL</strong></p></td><td id="r-482976" data-claire-element-id="482976"><p id="r-482975" data-claire-element-id="482975">E-mail de l'acheteur. Ce champ sert à pré-remplir le champ de connexion au compte PayPal.</p></td><td id="r-482978" data-claire-element-id="482978"><p id="r-482977" data-claire-element-id="482977"><strong><a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="2a4b49424f5e4f5f586a59435e4f4e5f504f584504494547">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></strong></p></td></tr><tr id="r-482986" data-claire-element-id="482986"><td id="r-482981" data-claire-element-id="482981"><p id="r-482980" data-claire-element-id="482980"><strong>CUSTOM</strong></p></td><td id="r-482983" data-claire-element-id="482983"><p id="r-482982" data-claire-element-id="482982">Celui-ci est un champ personnalisé. Il nous sera renvoyé lorsque nous ordonnerons le paiement.<br/> Vous pouvez vous en servir pour vous renvoyer l'id de votre client, ou le site web sur lequel l'achat a été effectué, si vous traitez plusieurs sites avec le même script par exemple.</p></td><td id="r-482985" data-claire-element-id="482985"><p id="r-482984" data-claire-element-id="482984"><strong>id_client:12;site:www.siteduzero.com</strong></p></td></tr></tbody></table><h5 id="r-getexpresscheckoutdetails-1" data-claire-element-id="483131">GetExpressCheckoutDetails</h5><p id="r-482990" data-claire-element-id="482990">Cette fonction sert à récupérer toutes les informations du paiement ainsi que les informations de l'acheteur.<br/> Voici les paramètres que vous devez lui transmettre.</p><table id="r-483014" data-claire-element-id="483014"><thead id="r-482998" data-claire-element-id="482998"><tr id="r-482997" data-claire-element-id="482997"><th id="r-482992" data-claire-element-id="482992"><p id="r-482991" data-claire-element-id="482991">Nom du paramètre</p></th><th id="r-482994" data-claire-element-id="482994"><p id="r-482993" data-claire-element-id="482993">Description</p></th><th id="r-482996" data-claire-element-id="482996"><p id="r-482995" data-claire-element-id="482995">Exemple</p></th></tr></thead><tbody id="r-483013" data-claire-element-id="483013"><tr id="r-483005" data-claire-element-id="483005"><td id="r-483000" data-claire-element-id="483000"><p id="r-482999" data-claire-element-id="482999"><strong>METHOD</strong></p></td><td id="r-483002" data-claire-element-id="483002"><p id="r-483001" data-claire-element-id="483001">Traitement à effectuer sur le serveur PayPal.<br/> Dans notre cas la récupération des informations.</p></td><td id="r-483004" data-claire-element-id="483004"><p id="r-483003" data-claire-element-id="483003"><strong>GetExpressCheckoutDetails</strong></p></td></tr><tr id="r-483012" data-claire-element-id="483012"><td id="r-483007" data-claire-element-id="483007"><p id="r-483006" data-claire-element-id="483006"><strong>TOKEN</strong></p></td><td id="r-483009" data-claire-element-id="483009"><p id="r-483008" data-claire-element-id="483008">Jeton obtenu lors de l'appel de la méthode <em>SetExpressCheckout</em>. Ce jeton sert à identifier le paiement.</p></td><td id="r-483011" data-claire-element-id="483011"><p id="r-483010" data-claire-element-id="483010"><strong>EC-28P55904SP346364Y</strong></p></td></tr></tbody></table><p id="r-483015" data-claire-element-id="483015">Après exécution de cet API, voici la liste des paramètres qu'il nous retourne. En plus des paramètres standards (token, timestamp, etc.).</p><table id="r-483130" data-claire-element-id="483130"><thead id="r-483023" data-claire-element-id="483023"><tr id="r-483022" data-claire-element-id="483022"><th id="r-483017" data-claire-element-id="483017"><p id="r-483016" data-claire-element-id="483016">Nom du paramètre</p></th><th id="r-483019" data-claire-element-id="483019"><p id="r-483018" data-claire-element-id="483018">Description</p></th><th id="r-483021" data-claire-element-id="483021"><p id="r-483020" data-claire-element-id="483020">Exemple</p></th></tr></thead><tbody id="r-483129" data-claire-element-id="483129"><tr id="r-483030" data-claire-element-id="483030"><td id="r-483025" data-claire-element-id="483025"><p id="r-483024" data-claire-element-id="483024"><strong>EMAIL</strong></p></td><td id="r-483027" data-claire-element-id="483027"><p id="r-483026" data-claire-element-id="483026">Adresse e-mail du payeur</p></td><td id="r-483029" data-claire-element-id="483029"><p id="r-483028" data-claire-element-id="483028"><strong><a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="2445474c415041515664574d504140515e41564b0a474b49">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script></strong></p></td></tr><tr id="r-483037" data-claire-element-id="483037"><td id="r-483032" data-claire-element-id="483032"><p id="r-483031" data-claire-element-id="483031"><strong>PAYERID</strong></p></td><td id="r-483034" data-claire-element-id="483034"><p id="r-483033" data-claire-element-id="483033">Numéro de compte unique du client PayPal. Vous en avez besoin lors de l'appel de la méthode <em>DoExpressCheckoutPayment</em>.</p></td><td id="r-483036" data-claire-element-id="483036"><p id="r-483035" data-claire-element-id="483035"><strong>942987</strong></p></td></tr><tr id="r-483044" data-claire-element-id="483044"><td id="r-483039" data-claire-element-id="483039"><p id="r-483038" data-claire-element-id="483038"><strong>PAYERSTATUS</strong></p></td><td id="r-483041" data-claire-element-id="483041"><p id="r-483040" data-claire-element-id="483040">État du payeur. Vous informe si l'identité de l'acheteur a été vérifiée.</p></td><td id="r-483043" data-claire-element-id="483043"><p id="r-483042" data-claire-element-id="483042"><strong>verified / unverified</strong></p></td></tr><tr id="r-483051" data-claire-element-id="483051"><td id="r-483046" data-claire-element-id="483046"><p id="r-483045" data-claire-element-id="483045"><strong>FIRSTNAME</strong></p></td><td id="r-483048" data-claire-element-id="483048"><p id="r-483047" data-claire-element-id="483047">Prénom du payeur.</p></td><td id="r-483050" data-claire-element-id="483050"><p id="r-483049" data-claire-element-id="483049"><strong>Gérard</strong></p></td></tr><tr id="r-483058" data-claire-element-id="483058"><td id="r-483053" data-claire-element-id="483053"><p id="r-483052" data-claire-element-id="483052"><strong>LASTNAME</strong></p></td><td id="r-483055" data-claire-element-id="483055"><p id="r-483054" data-claire-element-id="483054">Nom de famille du payeur.</p></td><td id="r-483057" data-claire-element-id="483057"><p id="r-483056" data-claire-element-id="483056"><strong>Menvuça</strong></p></td></tr><tr id="r-483065" data-claire-element-id="483065"><td id="r-483060" data-claire-element-id="483060"><p id="r-483059" data-claire-element-id="483059"><strong>COUNTRYCODE</strong></p></td><td id="r-483062" data-claire-element-id="483062"><p id="r-483061" data-claire-element-id="483061">Pays de résidence du payeur.</p></td><td id="r-483064" data-claire-element-id="483064"><p id="r-483063" data-claire-element-id="483063"><strong>FR</strong></p></td></tr><tr id="r-483072" data-claire-element-id="483072"><td id="r-483067" data-claire-element-id="483067"><p id="r-483066" data-claire-element-id="483066"><strong>SHIPTONAME</strong></p></td><td id="r-483069" data-claire-element-id="483069"><p id="r-483068" data-claire-element-id="483068">Nom de la personne associée à cette adresse.</p></td><td id="r-483071" data-claire-element-id="483071"><p id="r-483070" data-claire-element-id="483070"><strong>Gérard Menvuça</strong></p></td></tr><tr id="r-483079" data-claire-element-id="483079"><td id="r-483074" data-claire-element-id="483074"><p id="r-483073" data-claire-element-id="483073"><strong>SHIPTOSTREET</strong></p></td><td id="r-483076" data-claire-element-id="483076"><p id="r-483075" data-claire-element-id="483075">Adresse postale.</p></td><td id="r-483078" data-claire-element-id="483078"><p id="r-483077" data-claire-element-id="483077"><strong>Av. de la Pelouse, 1 Mayet</strong></p></td></tr><tr id="r-483086" data-claire-element-id="483086"><td id="r-483081" data-claire-element-id="483081"><p id="r-483080" data-claire-element-id="483080"><strong>SHIPTOCITY</strong></p></td><td id="r-483083" data-claire-element-id="483083"><p id="r-483082" data-claire-element-id="483082">Nom de la ville.</p></td><td id="r-483085" data-claire-element-id="483085"><p id="r-483084" data-claire-element-id="483084"><strong>Paris</strong></p></td></tr><tr id="r-483093" data-claire-element-id="483093"><td id="r-483088" data-claire-element-id="483088"><p id="r-483087" data-claire-element-id="483087"><strong>SHIPTOSTATE</strong></p></td><td id="r-483090" data-claire-element-id="483090"><p id="r-483089" data-claire-element-id="483089">État ou province.</p></td><td id="r-483092" data-claire-element-id="483092"><p id="r-483091" data-claire-element-id="483091"><strong>Alsace</strong></p></td></tr><tr id="r-483100" data-claire-element-id="483100"><td id="r-483095" data-claire-element-id="483095"><p id="r-483094" data-claire-element-id="483094"><strong>SHIPTOZIP</strong></p></td><td id="r-483097" data-claire-element-id="483097"><p id="r-483096" data-claire-element-id="483096">Code postal.</p></td><td id="r-483099" data-claire-element-id="483099"><p id="r-483098" data-claire-element-id="483098"><strong>75002</strong></p></td></tr><tr id="r-483107" data-claire-element-id="483107"><td id="r-483102" data-claire-element-id="483102"><p id="r-483101" data-claire-element-id="483101"><strong>SHIPTOCOUNTRYCODE</strong></p></td><td id="r-483104" data-claire-element-id="483104"><p id="r-483103" data-claire-element-id="483103">Code pays.</p></td><td id="r-483106" data-claire-element-id="483106"><p id="r-483105" data-claire-element-id="483105"><strong>FR</strong></p></td></tr><tr id="r-483114" data-claire-element-id="483114"><td id="r-483109" data-claire-element-id="483109"><p id="r-483108" data-claire-element-id="483108"><strong>ADDRESSSTATUS</strong></p></td><td id="r-483111" data-claire-element-id="483111"><p id="r-483110" data-claire-element-id="483110">État de l'adresse postale enregistrée chez PayPal. Vous informe si l'adresse a été vérifiée ou non.</p></td><td id="r-483113" data-claire-element-id="483113"><p id="r-483112" data-claire-element-id="483112"><strong>Unconfirmed</strong></p></td></tr><tr id="r-483121" data-claire-element-id="483121"><td id="r-483116" data-claire-element-id="483116"><p id="r-483115" data-claire-element-id="483115"><strong>CURRENCYCODE</strong></p></td><td id="r-483118" data-claire-element-id="483118"><p id="r-483117" data-claire-element-id="483117">Code de devise.</p></td><td id="r-483120" data-claire-element-id="483120"><p id="r-483119" data-claire-element-id="483119"><strong>EUR</strong></p></td></tr><tr id="r-483128" data-claire-element-id="483128"><td id="r-483123" data-claire-element-id="483123"><p id="r-483122" data-claire-element-id="483122"><strong>AMT</strong></p></td><td id="r-483125" data-claire-element-id="483125"><p id="r-483124" data-claire-element-id="483124">Coût total de la transaction. C'est le montant que vous avez défini lors de l'appel de la méthode <em>SetExpressCheckout</em>.</p></td><td id="r-483127" data-claire-element-id="483127"><p id="r-483126" data-claire-element-id="483126"><strong>10.0</strong></p></td></tr></tbody></table><h5 id="r-doexpresscheckoutpayment-1" data-claire-element-id="483278">DoExpressCheckoutPayment</h5><p id="r-483132" data-claire-element-id="483132">Cette méthode permet d'effectuer le virement, du compte de l'acheteur sur votre compte. L'acheteur doit au préalable s'être connecté sur le site de PayPal, et avoir accepté le paiement.</p><p id="r-483133" data-claire-element-id="483133">Voici les paramètres qui doivent figurer dans l'appel de cette méthode :</p><table id="r-483185" data-claire-element-id="483185"><thead id="r-483141" data-claire-element-id="483141"><tr id="r-483140" data-claire-element-id="483140"><th id="r-483135" data-claire-element-id="483135"><p id="r-483134" data-claire-element-id="483134">Nom du paramètre</p></th><th id="r-483137" data-claire-element-id="483137"><p id="r-483136" data-claire-element-id="483136">Description</p></th><th id="r-483139" data-claire-element-id="483139"><p id="r-483138" data-claire-element-id="483138">Exemple</p></th></tr></thead><tbody id="r-483184" data-claire-element-id="483184"><tr id="r-483148" data-claire-element-id="483148"><td id="r-483143" data-claire-element-id="483143"><p id="r-483142" data-claire-element-id="483142"><strong>METHOD</strong></p></td><td id="r-483145" data-claire-element-id="483145"><p id="r-483144" data-claire-element-id="483144">Traitement à effectuer sur le serveur PayPal.<br/> Dans notre cas la récupération des informations.</p></td><td id="r-483147" data-claire-element-id="483147"><p id="r-483146" data-claire-element-id="483146"><strong>DoExpressCheckoutPayment</strong></p></td></tr><tr id="r-483155" data-claire-element-id="483155"><td id="r-483150" data-claire-element-id="483150"><p id="r-483149" data-claire-element-id="483149"><strong>TOKEN</strong></p></td><td id="r-483152" data-claire-element-id="483152"><p id="r-483151" data-claire-element-id="483151">Jeton obtenu lors de l'appel de la méthode <em>SetExpressCheckout</em>. Ce jeton sert à identifier le paiement.</p></td><td id="r-483154" data-claire-element-id="483154"><p id="r-483153" data-claire-element-id="483153"><strong>EC-28P55904SP346364Y</strong></p></td></tr><tr id="r-483162" data-claire-element-id="483162"><td id="r-483157" data-claire-element-id="483157"><p id="r-483156" data-claire-element-id="483156"><strong>PAYMENTACTION</strong></p></td><td id="r-483159" data-claire-element-id="483159"><p id="r-483158" data-claire-element-id="483158">Mode d'obtention du paiement. Il peut être une autorisation de paiement (pour un paiement ponctuel), mais dans le cas d'un achat direct, ce paramètre doit être défini à <strong>sale</strong>.</p></td><td id="r-483161" data-claire-element-id="483161"><p id="r-483160" data-claire-element-id="483160"><strong>sale</strong></p></td></tr><tr id="r-483169" data-claire-element-id="483169"><td id="r-483164" data-claire-element-id="483164"><p id="r-483163" data-claire-element-id="483163"><strong>PAYERID</strong></p></td><td id="r-483166" data-claire-element-id="483166"><p id="r-483165" data-claire-element-id="483165">Numéro d'identification unique du compte client PayPal. Ce numéro vous est renvoyé en <em>$_GET</em> lors du retour du client sur notre site (après s'être connecté sur le site de PayPal), ou grâce à la méthode <em>GetExpressCheckoutDetails.</em></p></td><td id="r-483168" data-claire-element-id="483168"><p id="r-483167" data-claire-element-id="483167"><strong>G5ZMU94EQSKJS</strong></p></td></tr><tr id="r-483176" data-claire-element-id="483176"><td id="r-483171" data-claire-element-id="483171"><p id="r-483170" data-claire-element-id="483170"><strong>AMT</strong></p></td><td id="r-483173" data-claire-element-id="483173"><p id="r-483172" data-claire-element-id="483172">Total de la commande.</p></td><td id="r-483175" data-claire-element-id="483175"><p id="r-483174" data-claire-element-id="483174"><strong>10.0</strong></p></td></tr><tr id="r-483183" data-claire-element-id="483183"><td id="r-483178" data-claire-element-id="483178"><p id="r-483177" data-claire-element-id="483177"><strong>CURRENCYCODE</strong></p></td><td id="r-483180" data-claire-element-id="483180"><p id="r-483179" data-claire-element-id="483179">Code de la devise.</p></td><td id="r-483182" data-claire-element-id="483182"><p id="r-483181" data-claire-element-id="483181"><strong>EUR</strong></p></td></tr></tbody></table><p id="r-483186" data-claire-element-id="483186">Une fois le paiement effectué, voici ce qui nous est retourné.</p><table id="r-483273" data-claire-element-id="483273"><thead id="r-483194" data-claire-element-id="483194"><tr id="r-483193" data-claire-element-id="483193"><th id="r-483188" data-claire-element-id="483188"><p id="r-483187" data-claire-element-id="483187">Nom du paramètre</p></th><th id="r-483190" data-claire-element-id="483190"><p id="r-483189" data-claire-element-id="483189">Description</p></th><th id="r-483192" data-claire-element-id="483192"><p id="r-483191" data-claire-element-id="483191">Exemple</p></th></tr></thead><tbody id="r-483272" data-claire-element-id="483272"><tr id="r-483201" data-claire-element-id="483201"><td id="r-483196" data-claire-element-id="483196"><p id="r-483195" data-claire-element-id="483195"><strong>TRANSACTIONID</strong></p></td><td id="r-483198" data-claire-element-id="483198"><p id="r-483197" data-claire-element-id="483197">Numéro de transaction unique du paiement.</p></td><td id="r-483200" data-claire-element-id="483200"><p id="r-483199" data-claire-element-id="483199"><strong>4SP9331895269605D</strong></p></td></tr><tr id="r-483208" data-claire-element-id="483208"><td id="r-483203" data-claire-element-id="483203"><p id="r-483202" data-claire-element-id="483202"><strong>TRANSACTIONTYPE</strong></p></td><td id="r-483205" data-claire-element-id="483205"><p id="r-483204" data-claire-element-id="483204">Type de transaction.</p></td><td id="r-483207" data-claire-element-id="483207"><p id="r-483206" data-claire-element-id="483206"><strong>expresscheckout</strong></p></td></tr><tr id="r-483215" data-claire-element-id="483215"><td id="r-483210" data-claire-element-id="483210"><p id="r-483209" data-claire-element-id="483209"><strong>PAYMENTTYPE</strong></p></td><td id="r-483212" data-claire-element-id="483212"><p id="r-483211" data-claire-element-id="483211">Indique si le paiement est immédiat ou différé.</p></td><td id="r-483214" data-claire-element-id="483214"><p id="r-483213" data-claire-element-id="483213"><strong>instant</strong></p></td></tr><tr id="r-483222" data-claire-element-id="483222"><td id="r-483217" data-claire-element-id="483217"><p id="r-483216" data-claire-element-id="483216"><strong>ORDERTIME</strong></p></td><td id="r-483219" data-claire-element-id="483219"><p id="r-483218" data-claire-element-id="483218">Date et heure de l'exécution du paiement.</p></td><td id="r-483221" data-claire-element-id="483221"><p id="r-483220" data-claire-element-id="483220"><strong>2009-06-11T08:50:06Z</strong></p></td></tr><tr id="r-483229" data-claire-element-id="483229"><td id="r-483224" data-claire-element-id="483224"><p id="r-483223" data-claire-element-id="483223"><strong>AMT</strong></p></td><td id="r-483226" data-claire-element-id="483226"><p id="r-483225" data-claire-element-id="483225">Montant final facturé.</p></td><td id="r-483228" data-claire-element-id="483228"><p id="r-483227" data-claire-element-id="483227"><strong>15.00</strong></p></td></tr><tr id="r-483236" data-claire-element-id="483236"><td id="r-483231" data-claire-element-id="483231"><p id="r-483230" data-claire-element-id="483230"><strong>FEEAMT</strong></p></td><td id="r-483233" data-claire-element-id="483233"><p id="r-483232" data-claire-element-id="483232">Montant de la commission de PayPal facturée pour la transaction. :-(</p></td><td id="r-483235" data-claire-element-id="483235"><p id="r-483234" data-claire-element-id="483234"><strong>0.76</strong></p></td></tr><tr id="r-483243" data-claire-element-id="483243"><td id="r-483238" data-claire-element-id="483238"><p id="r-483237" data-claire-element-id="483237"><strong>TAXAMT</strong></p></td><td id="r-483240" data-claire-element-id="483240"><p id="r-483239" data-claire-element-id="483239">TVA facturée pour la transaction.</p></td><td id="r-483242" data-claire-element-id="483242"><p id="r-483241" data-claire-element-id="483241"><strong>0.00</strong></p></td></tr><tr id="r-483250" data-claire-element-id="483250"><td id="r-483245" data-claire-element-id="483245"><p id="r-483244" data-claire-element-id="483244"><strong>CURRENCYCODE</strong></p></td><td id="r-483247" data-claire-element-id="483247"><p id="r-483246" data-claire-element-id="483246">Code de la devise.</p></td><td id="r-483249" data-claire-element-id="483249"><p id="r-483248" data-claire-element-id="483248"><strong>EUR</strong></p></td></tr><tr id="r-483257" data-claire-element-id="483257"><td id="r-483252" data-claire-element-id="483252"><p id="r-483251" data-claire-element-id="483251"><strong>PAYMENTSTATUS</strong></p></td><td id="r-483254" data-claire-element-id="483254"><p id="r-483253" data-claire-element-id="483253">État du paiement. Terminé ou en attente.</p></td><td id="r-483256" data-claire-element-id="483256"><p id="r-483255" data-claire-element-id="483255"><strong>Completed</strong></p></td></tr><tr id="r-483264" data-claire-element-id="483264"><td id="r-483259" data-claire-element-id="483259"><p id="r-483258" data-claire-element-id="483258"><strong>PENDINGREASON</strong></p></td><td id="r-483261" data-claire-element-id="483261"><p id="r-483260" data-claire-element-id="483260">Motif pour lequel le paiement est en attente. (Plus de détail dans le guide PayPal.)</p></td><td id="r-483263" data-claire-element-id="483263"><p id="r-483262" data-claire-element-id="483262"><strong>None</strong></p></td></tr><tr id="r-483271" data-claire-element-id="483271"><td id="r-483266" data-claire-element-id="483266"><p id="r-483265" data-claire-element-id="483265"><strong>REASONCODE</strong></p></td><td id="r-483268" data-claire-element-id="483268"><p id="r-483267" data-claire-element-id="483267">Motif d'une annulation si TransactionType a la valeur <em>reversal</em>. Cette valeur ne nous concerne donc pas.</p></td><td id="r-483270" data-claire-element-id="483270"><p id="r-483269" data-claire-element-id="483269"><strong>None</strong></p></td></tr></tbody></table><p id="r-483274" data-claire-element-id="483274">Et voilà...<br/> Vous êtes arrivés à la fin de mon tutoriel.<br/> J'espère qu'il vous aura beaucoup appris.</p><p id="r-483275" data-claire-element-id="483275">Je vous conseille tout de même de bien lire les documentations officielles, elles sont bien plus détaillées que ce tuto.</p><p id="r-483276" data-claire-element-id="483276">Voilà...</p><p id="r-483277" data-claire-element-id="483277">Et si grâce à mon tutoriel, vous devenez riche, pensez à moi. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1">Paiement en ligne par PayPal</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Paiement en ligne par PayPal
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-131">Présentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/presentation-130">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/pourquoi-paypal">
Pourquoi PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/comment-ca-marche-23">
Comment ça marche ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/par-quel-moyen-communiquer-avec-le-site-de-paypal">
Par quel moyen communiquer avec le site de PayPal ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/autres-methodes-de-communication">
Autres méthodes de communication
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp-1">Communication avec l&#039;API NVP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/preparation-du-terrain-4">
Préparation du terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/communication-avec-l-api-nvp">
Communication avec l&#039;API NVP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/paiement-avec-l-api-nvp">
Paiement avec l&#039;API NVP
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/integration-dans-php">Intégration dans PHP</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/utilisation-de-la-fonction-curl">
Utilisation de la fonction cURL
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/recuperer-les-parametres-dans-un-tableau">
Récupérer les paramètres dans un tableau
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/le-paiement-ou-pas">
Le paiement... ou pas
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/toutes-les-infos-du-paiement">
Toutes les infos du paiement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-production">
Mise en production
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/mise-en-place-du-logo-paypal">
Mise en place du logo PayPal
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/annexes-42">Annexes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liens-utiles-4">
Liens utiles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/liste-des-serveurs-de-connexion">
Liste des serveurs de connexion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
Exemples complets
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/appels-de-l-api-et-reponses">
Appels de l&#039;API et réponses
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/paiement-en-ligne-par-paypal-1/exemples-complets">
<span class="arrow"></span>
<span class="next">Exemples complets</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/aiement-en-ligne-par-paypal-1.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 11:16:32 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/aiement-en-ligne-par-paypal-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:48:58 GMT -->
</html>