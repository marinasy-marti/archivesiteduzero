<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/le-developpement-de-jeux-video-avec-xna.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:17:55 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/le-developpement-de-jeux-video-avec-xna.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:17:40 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Le développement de jeux vidéo avec XNA</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Le développement de jeux vidéo avec XNA</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#LedveloppementdejeuxvidoavecXNA">Le développement de jeux vidéo avec XNA</a><br/><a href="#PrsentationdeXNA">Présentation de XNA</a><br/><a href="#Qu039est-cequec039est">Qu&#039;est-ce que c&#039;est ?</a><br/><a href="#Pourquoil039utiliser">Pourquoi l&#039;utiliser ?</a><br/><a href="#Lesoutilsncessaires">Les outils nécessaires</a><br/><a href="#Premierjeupremireapproche">Premier jeu, première approche</a><br/><a href="#Crationd039unprojetXNA">Création d&#039;un projet XNA</a><br/><a href="#Laboucledejeucontrel039vnementiel">La boucle de jeu contre l&#039;événementiel</a><br/><a href="#ExplicationdelaboucledejeuXNA">Explication de la boucle de jeu XNA</a><br/><a href="#Utiliserdesimages">Utiliser des images</a><br/><a href="#Ajoutd039imageauprojet">Ajout d&#039;image au projet</a><br/><a href="#Affichagedel039image">Affichage de l&#039;image</a><br/><a href="#Dplacerl039imagesurl039cran">Déplacer l&#039;image sur l&#039;écran</a><br/><a href="#Afficherdutexte">Afficher du texte</a><br/><a href="#LeSpriteFont">Le SpriteFont</a><br/><a href="#Chargementd039unSpriteFont">Chargement d&#039;un SpriteFont</a><br/><a href="#UtilisationduSpriteFont">Utilisation du SpriteFont</a><br/><a href="#Interactionaveclejoueur">Interaction avec le joueur</a><br/><a href="#Quelquesgnralits">Quelques généralités</a><br/><a href="#Clavier">Clavier</a><br/><a href="#Souris">Souris</a><br/><a href="#Crationd039uneclasseSprite">Création d&#039;une classe Sprite</a><br/><a href="#Intertdefaireunetelleclasse">Interêt de faire une telle classe</a><br/><a href="#Lescaractristiquesdenotreclasse">Les caractéristiques de notre classe</a><br/><a href="#Lecodedelaclasse">Le code de la classe</a><br/><a href="#TPPong">TP : Pong</a><br/><a href="#PrsentationduTP">Présentation du TP</a><br/><a href="#Indicationspourbiencommencer">Indications pour bien commencer</a><br/><a href="#Correction">Correction</a><br/><a href="#Ajouterduson">Ajouter du son</a><br/><a href="#Prsentation">Présentation</a><br/><a href="#Leseffetssonores">Les effets sonores</a><br/><a href="#Lesmusiques">Les musiques</a><br/><a href="#Pourallerplusloin">Pour aller plus loin</a><br/></div>
<a name="LedveloppementdejeuxvidoavecXNA"></a><h2>Le développement de jeux vidéo avec XNA</h2><div class="content" role="article">
<p id="r-771636" data-claire-element-id="771636"><strong>Vous souhaitez développer des jeux pour PC, XBox 360 et Windows Phone 7 facilement sans vous encombrer de diverses librairies externes souvent dures à appréhender ?</strong></p><p id="r-771637" data-claire-element-id="771637">XNA est fait pour vous ! ^^</p><p id="r-771638" data-claire-element-id="771638">Sa facilité d'utilisation et d'apprentissage en font un choix de marque pour tout projet personnel complexe ou non.<br/> Voici ce que vous saurez faire si vous suivez attentivement ce tutoriel :</p><ul id="r-771653" data-claire-element-id="771653"><li id="r-771640" data-claire-element-id="771640"><p id="r-771639" data-claire-element-id="771639">Afficher du contenu 2D et/ou 3D ;</p></li><li id="r-771642" data-claire-element-id="771642"><p id="r-771641" data-claire-element-id="771641">Interagir avec les actions du joueur ;</p></li><li id="r-771644" data-claire-element-id="771644"><p id="r-771643" data-claire-element-id="771643">Ajouter du son dans vos jeux ;</p></li><li id="r-771646" data-claire-element-id="771646"><p id="r-771645" data-claire-element-id="771645">Ajouter des shaders pour rendre votre jeu 3D visuellement plus beau ;</p></li><li id="r-771648" data-claire-element-id="771648"><p id="r-771647" data-claire-element-id="771647">Gérer des collisions basiques ;</p></li><li id="r-771650" data-claire-element-id="771650"><p id="r-771649" data-claire-element-id="771649">Gérer le réseau pour du multi-joueur ;</p></li><li id="r-771652" data-claire-element-id="771652"><p id="r-771651" data-claire-element-id="771651">Et beaucoup d'autres choses... :D</p></li></ul><p id="r-771654" data-claire-element-id="771654">Je partirai du principe que vous avez quelques bases en C# qui vous seront quasiment indispensables pour comprendre le tutoriel en profondeur. J'essayerai toutefois de détailler autant que possible les notions clefs lors de l'utilisation de XNA.</p><p id="r-771655" data-claire-element-id="771655">Voici quelques exemples de jeux réalisés avec XNA 4.</p><table id="r-771669" data-claire-element-id="771669"><tbody id="r-771668" data-claire-element-id="771668"><tr id="r-771662" data-claire-element-id="771662"><td id="r-771658" data-claire-element-id="771658"><p id="r-771656" data-claire-element-id="771657"><a href="medias/uploads.siteduzero.com_files_338001_339000_338080.png"><img id="r-771657" data-claire-element-id="771656" src="medias/uploads.siteduzero.com_thb_338001_339000_338080.png" alt="Terraria"/></a></p></td><td id="r-771661" data-claire-element-id="771661"><p id="r-771659" data-claire-element-id="771660"><a href="medias/uploads.siteduzero.com_files_338001_339000_338079.png"><img id="r-771660" data-claire-element-id="771659" src="medias/uploads.siteduzero.com_thb_338001_339000_338079.png" alt="Arcane's Tower Defense"/></a></p></td></tr><tr id="r-771667" data-claire-element-id="771667"><td id="r-771664" data-claire-element-id="771664"><p id="r-771663" data-claire-element-id="771663"><a href="http://www.terraria.org/"><em>Terraria</em></a></p></td><td id="r-771666" data-claire-element-id="771666"><p id="r-771665" data-claire-element-id="771665"><em>Arcane's Tower Defense</em></p></td></tr></tbody></table><p id="r-771670" data-claire-element-id="771670">Si vous êtes prêts à vous lancer dans cette longue et passionnante aventure, suivez le guide !</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="PrsentationdeXNA"></a><h2>Présentation de XNA</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
<span class="next">Qu&#039;est-ce que c&#039;est ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-771672" data-claire-element-id="771672">Bienvenue dans le tout premier chapitre de ce big-tuto !<br/> Ce dernier contient essentiellement du contenu informatif, où aucune manipulation n'est requise. Il vous permettra de comprendre ce qu'est XNA et quelle est son utilité.<br/> Cela dit, nous parlerons tout de même des composants et logiciels indispensables à la création de jeux avec XNA et les installerons pour être prêts à travailler.</p>
</div><a name="Qu039est-cequec039est"></a><h2>Qu&#039;est-ce que c&#039;est ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">
<span class="arrow"></span>
<span class="next">Présentation de XNA</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
<span class="next">Pourquoi l&#039;utiliser ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-qu-est-ce-que-c-est-9" data-claire-element-id="771704">Qu'est-ce que c'est ?</h4><h5 id="r-presentation-generale-8" data-claire-element-id="771681">Présentation générale</h5><p id="r-771673" data-claire-element-id="771673">XNA est un acronyme qui signifie… <em>XNA's Not Acronymed</em> (pour les vrais anglophobes, ceci signifie grosso modo XNA n'est pas un acronyme).</p><aside id="r-771675" data-claire-element-id="771675" data-claire-semantic="information"><p id="r-771674" data-claire-element-id="771674">Vous pouvez remarquer que c'est un acronyme récursif, en effet <em>XNA's Not Acronymed</em> peut devenir (XNA's Not Acronymed)'s Not Acronymed mais à la limite ça on s'en fiche. :p</p></aside><p id="r-771676" data-claire-element-id="771676">C'est un framework (un ensemble d'outils) proposé par Microsoft dans le but de grandement faciliter et accélérer le développement de jeux vidéos. Il s'appuie beaucoup sur un autre framework de Microsoft : le .NET (en réalité il s'agit de la version compacte de ce dernier), offrant un très vaste choix de classes et méthodes aux développeurs. L'objectif de Microsoft avec la sortie de XNA était d'ouvrir le monde du jeu vidéo à des amateurs comme vous et moi.</p><p id="r-771677" data-claire-element-id="771677">En effet, avant son apparition, la plupart des &quot;gros&quot; jeux étaient développés en C++ (c'est encore beaucoup le cas aujourd'hui). Ce langage a l'avantage d'être assez bas niveau et donc d'avoir une bonne vitesse d'exécution, seulement voilà ! Qui dit bas niveau dit aussi difficilement exploitable pour nous, amateurs.<br/> Pour ceux qui ont déjà tenté l'expérience OpenGL ou DirectX (les deux principales librairies graphiques), vous vous souvenez surement de la difficulté d'initialiser son projet et de créer sa petite fenêtre. ^^ <br/> Avec XNA tout cela est automatique ! Il utilise le moteur graphique DirectX mais tout est quasi transparent pour le programmeur en lui proposant des classes et méthodes beaucoup plus faciles à utiliser.</p><p id="r-771678" data-claire-element-id="771678">Un autre point important à mon sens qu'apporte XNA est l'ouverture du développement console aux non professionnels. Il existe certes d'autres consoles des kits de développement mais qui ne sont pas toujours des plus légaux. Ici, XNA permet de réaliser relativement facilement un portage de votre jeu vers la Xbox 360 ainsi que vers leur OS mobile Windows Phone 7.</p><aside id="r-771680" data-claire-element-id="771680" data-claire-semantic="information"><p id="r-771679" data-claire-element-id="771679">Ne possédant pas moi-même une Xbox je ne pourrai malheureusement pas trop pousser les explications à son sujet.</p></aside><h5 id="r-la-genese" data-claire-element-id="771683">La genèse</h5><p id="r-771682" data-claire-element-id="771682">Au début de sa recherche dans la simplification des applications à but ludique, Microsoft développa une première encapsulation des fonctions de DirectX : Managed DirectX (MDX).<br/> Cette dernière s'appuyait déjà sur le framework .NET et permettait d'accéder aux fonctionnalités de DirectX en orienté objet de manière plus simple mais pas encore suffisamment. La première (et unique) version sortie de MDX fut la 1.1 en 2002 qui est désormais dépréciée en faveur de XNA.<br/> Pour Microsoft, MDX fut une bonne première étape qui leur permit par la suite, en reprenant depuis zéro, de pousser la simplification du développement à son extrême avec la sortie de la toute première version de XNA fin 2006. La version 2.0 suivit en décembre 2007 ajoutant le support du réseau puis la version 3.0 ajoutant le support de Zune en octobre 2008. Ensuite est arrivée la version 3.1 sortie en Juin 2009. La toute dernière en lice et donc celle avec laquelle nous allons travailler est la 4.0 qui apporte une grosse nouveauté : le développement de jeux pour Windows Phone 7 !</p><h5 id="r-xna-sous-forme-de-couches" data-claire-element-id="771699">XNA sous forme de couches</h5><p id="r-771684" data-claire-element-id="771684">Voici un graphique qui synthétise l'architecture du framework XNA sous forme de couches:</p><figure id="r-771686" data-claire-element-id="771687"><img id="r-771685" data-claire-element-id="771685" src="medias/uploads.siteduzero.com_files_320001_321000_320634.png" alt="XNA sous forme de couches"/></figure><p id="r-771688" data-claire-element-id="771688">Ce graphique est plutôt simple à comprendre, tout en bas se trouvent les composants les plus bas niveau (donc les plus proches du hardware). Ces derniers servent à accéder aux ressources de l'ordinateur et à les utiliser (Direct3D à la carte graphique, XACT à la carte son, etc...).<br/> Ces composants sont donc totalement encapsulés (recouverts) par le <strong>Cœur du framework</strong> de XNA. Ce dernier contient les espaces de nom de XNA que nous utiliserons par la suite et qui contiennent toutes les méthodes et classes mises à disposition des développeurs.</p><div id="r-771690" data-claire-element-id="771690" data-claire-semantic="question"><p id="r-771689" data-claire-element-id="771689">C'est quoi un espace de nom ?</p></div><p id="r-771691" data-claire-element-id="771691">Un espace de nom en C# est en quelque sorte une boite qui permet de regrouper de façon logique des classes afin de s'y retrouver beaucoup plus facilement. Si vous souhaitez plus de détails à ce propos, je vous conseille d'aller lire un tutoriel traitant le C# et le framework .NET.</p><p id="r-771692" data-claire-element-id="771692">Je pense que je n'ai pas besoin de détailler à quoi correspondent chacun de ces espaces de nom, même sans être anglophone c'est compréhensible. ^^ <br/> On peut donc remonter une couche de ce modèle pour arriver à celle intitulée <strong>Framework Étendu</strong>. Celle-ci inclut le modèle d'application et le Content Manager.<br/> Tout d'abord le modèle d'application est un moyen de simplifier la structure générale du jeu. Pour ceux qui ont ne serait-ce qu'une petite expérience dans le développement du jeu vidéo, vous savez qu'il est quasiment obligatoire d'insérer une &quot;boucle de jeu&quot;. Celle-ci permet entre autres de ré-afficher l'image à l'écran en prenant en compte tous les éléments qui ont changé depuis le dernier affichage (vie du joueur, position du joueur, etc...).</p><p id="r-771693" data-claire-element-id="771693">Ce schéma récurrent d'un jeu à l'autre est ce que l'on appelle le modèle d'application ! Cette boucle du jeu est entièrement gérée par XNA, ce qui permet de nous consacrer entièrement sur le code du jeu en lui-même. Nous étudierons plus en détail cette boucle de jeu dans le chapitre suivant.</p><p id="r-771694" data-claire-element-id="771694">Ensuite, le Content Manager est une technologie intégrée à XNA qui permet d'ajouter très simplement du contenu à notre jeu, qu'il s'agisse d'images, de sons ou même de modèles 3D. Nous verrons le rôle du Content Manager et plus généralement du &quot;Content Pipeline&quot; très rapidement dans ce tutoriel.</p><p id="r-771695" data-claire-element-id="771695">Pour finir, la dernière couche du modèle représente celle que nous, développeurs, pouvons modifier. Il s'agit donc du code, du contenu et des starters kit.</p><div id="r-771697" data-claire-element-id="771697" data-claire-semantic="question"><p id="r-771696" data-claire-element-id="771696">C'est quoi un Starter Kit ?</p></div><p id="r-771698" data-claire-element-id="771698">Un Starter Kit c'est tout simplement un Kit de Démarrage. :p Plus concrètement, il s'agit de petits jeux pré-faits à télécharger dont le code source est disponible. Ceci permet d'avoir une solide base et de le modifier à votre guise pour en faire votre propre jeu ! Cela dit, je vous préviens que nous ne partirons pas d'un Starter Kit, je préfère que vous souffriez en partant de rien. :pirate: Après tout, nous ne sommes pas des zéros pour rien ! Il faut donc partir de… zéro !</p><h5 id="r-configuration-minimale-2" data-claire-element-id="771703">Configuration minimale</h5><p id="r-771700" data-claire-element-id="771700">Voici un point important à connaitre avant de se lancer ! XNA utilise des technologies assez récentes, c'est pourquoi la configuration doit avoir un certain minimum. Pas d'inquiétude tout de même il ne faut pas une bête de course pour pouvoir utiliser cette technologie. En fait la seule chose vraiment importante est d'avoir une carte graphique compatible DirectX 9.0 et supportant les Shaders Model 2.0 minimum. Il serait même largement mieux que celle-ci supporte les Shaders Model 3.0 puisque certains Starters Kit que vous trouverez sur Internet en ont besoin pour pouvoir fonctionner.</p><aside id="r-771702" data-claire-element-id="771702" data-claire-semantic="information"><p id="r-771701" data-claire-element-id="771701">Si vous avez Windows Vista ou 7, votre carte graphique supporte à priori DirectX 10 et les Shaders Model 4.0 donc largement suffisant pour XNA.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">
<span class="arrow"></span>
<span class="next">Présentation de XNA</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
<span class="next">Pourquoi l&#039;utiliser ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Pourquoil039utiliser"></a><h2>Pourquoi l&#039;utiliser ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce que c&#039;est ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
<span class="next">Les outils nécessaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pourquoi-l-utiliser-2" data-claire-element-id="771725">Pourquoi l'utiliser ?</h4><h5 id="r-les-plus-de-xna" data-claire-element-id="771720">Les plus de XNA</h5><p id="r-771705" data-claire-element-id="771705">Je vous ai déjà présenté le plus gros avantage de XNA, je parle évidemment de sa facilité d'utilisation et la rapidité avec laquelle il est possible de développer un jeu. Je ralentis tout de même vos ardeurs de <em>Game Developers</em> en herbe, n'espérez pas recoder <em>World of Warcraft</em> ou je ne sais quel autre jeux ultra récent, XNA c'est bien mais pas magique. ;) Il faut encore et toujours de grandes équipes capables de couvrir tous les domaines du jeu vidéo, comme le graphisme du jeu, le scénario, le gameplay, le développement (ce qui nous intéresse) et j'en passe, pour pouvoir prétendre à un jeu du niveau des grands éditeurs actuels !</p><div id="r-771707" data-claire-element-id="771707" data-claire-semantic="question"><p id="r-771706" data-claire-element-id="771706">C'est bien beau tout ça, tu nous dis que c'est facile et rapide mais tu nous a toujours pas dit pourquoi…</p></div><p id="r-771708" data-claire-element-id="771708">Justement j'allais y venir. La simplicité de XNA réside dans une très bonne encapsulation des fonctions de DirectX. Cela signifie qu'il existe de (très) nombreuses fonctions et classes toute faites et prêtes à être utilisées qui font tout (ou presque) le travail dur et fastidieux pour nous ! Ce qui nous permet de nous consacrer uniquement sur la partie jeu de notre projet (déplacer le personnage, gérer les ennemis, alliés, sons, etc…).</p><p id="r-771709" data-claire-element-id="771709">À noter tout de même que XNA permet de pousser ses réalisations avec des techniques avancées telles que la création de &quot;plugins&quot; permettant d'importer d'autres types de fichiers que ceux par défaut ou des techniques avancées pour l'affichage des modèles 3D en programmant directement la façon dont la carte graphique va traiter les modèles 3D.</p><p id="r-771710" data-claire-element-id="771710">Le deuxième avantage de XNA est son coté multi-plateforme. Ce que j'entends par multi-plateforme est la possibilité de faire un portage très simplement sur XBox 360, Zune et même Windows Phone 7 avec la version 4.0. Je ne traiterai pas du tout le portage sur Zune (qui soit dit en passant est très peu connu) mais je ferai probablement un chapitre pour les détenteurs de Xbox360 ainsi qu'un autre pour le développement Windows Phone 7.</p><p id="r-771711" data-claire-element-id="771711">Pour ceux qui pensaient au multi-plateforme Windows/Linux/Mac, désolé ce n'est pas ça. :p Étant donné que XNA utilise DirectX lui-même uniquement exploitable sur les systèmes d'exploitation Windows, le portage sur d'autres OS est très mauvais (voire impossible). Il existe toutefois un projet appelé MonoXNA qui a pour but de fournir une implémentation multi-plateforme de XNA en utilisant OpenGL plutôt que DirectX. Cependant il semblerait que le projet ne soit plus du tout actif.<br/> Vous pouvez toujours consulter <a href="http://www.monoxna.org/">le site officiel de MonoXNA</a> et <a href="http://code.google.com/p/monoxna/">la page Google Projects</a> correspondante.</p><p id="r-771712" data-claire-element-id="771712">Enfin, sachez que vous trouverez une très grande communauté de passionnés pour vous aider dans vos projets et répondre à vos interrogations.<br/> Voici quelques liens utiles à connaitre.</p><ul id="r-771719" data-claire-element-id="771719"><li id="r-771714" data-claire-element-id="771714"><p id="r-771713" data-claire-element-id="771713"><a href="http://www.xna-connection.com/">xna-connection</a> : Site en français qui regorge d'articles, de ressources et de tutoriaux pour les débutants comme pour les confirmés avec des techniques simples comme plus avancées.</p></li><li id="r-771716" data-claire-element-id="771716"><p id="r-771715" data-claire-element-id="771715"><a href="http://msdn.microsoft.com/fr-fr/library/bb200104(v=XNAGameStudio.40).aspx">Le msdn de Microsoft</a> : C'est en quelque sorte la bible de XNA ^^ puisqu'il s'agit de la documentation officielle. En plus, vous avez de la chance elle est traduite en français, aucune excuse donc pour ne pas aller la consulter avant de poser des questions !</p></li><li id="r-771718" data-claire-element-id="771718"><p id="r-771717" data-claire-element-id="771717"><a href="http://create.msdn.com/en-US/">App Hub</a> : Je vais vous en parler plus en détail dans la section juste après.</p></li></ul><h5 id="r-quelques-infos-utiles" data-claire-element-id="771724">Quelques infos utiles</h5><p id="r-771721" data-claire-element-id="771721"><a href="http://create.msdn.com/en-US/">App Hub</a> est <strong>LE</strong> site indispensable à ceux qui veulent créer et faire connaitre leur jeu. Il contient des tutos pour débuter dans lesquels vous apprendrez à créer un jeu basique en 2D puis un en 3D. Ce sont des tutoriaux vidéos en anglais assez facilement compréhensibles si vous n'êtes pas anglophobe.<br/> Vous y trouverez également un forum pour toutes vos questions tout en pouvant les cibler en choisissant la partie du forum adaptée.</p><p id="r-771722" data-claire-element-id="771722">En plus de cela, vous pourrez télécharger depuis ce site de nombreux <em>samples</em> (exemples) qui abordent certains points clefs pour la création d'un jeu.</p><p id="r-771723" data-claire-element-id="771723">Enfin, c'est sur ce site que vous aurez besoin de vous inscrire et payer votre abonnement (gratuit pour les étudiants via le programme DreamSpark) afin de publier votre jeu sur Xbox ou Windows Phone 7.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce que c&#039;est ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
<span class="next">Les outils nécessaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesoutilsncessaires"></a><h2>Les outils nécessaires</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
<span class="arrow"></span>
<span class="next">Pourquoi l&#039;utiliser ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">
<span class="next">Premier jeu, première approche</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-outils-necessaires-6" data-claire-element-id="771740">Les outils nécessaires</h4><h5 id="r-presentation-36" data-claire-element-id="771734">Présentation</h5><p id="r-771726" data-claire-element-id="771726">Voici la liste des logiciels et outils dont vous aurez besoin pour commencer à programmer en utilisant XNA.</p><ul id="r-771733" data-claire-element-id="771733"><li id="r-771728" data-claire-element-id="771728"><p id="r-771727" data-claire-element-id="771727">Le framework .NET 4.0 : Il s'agit de la brique de base .NET qui fournit de nombreuses classes utilisées par tout programme C# ou VB.NET. Il permet par exemple d'écrire sur le système de fichier, de manipuler des listes de données, etc…</p></li><li id="r-771730" data-claire-element-id="771730"><p id="r-771729" data-claire-element-id="771729"><a href="http://www.microsoft.com/express/Downloads/#2010-Visual-CS">Visual C# 2010 Express</a> : Ceci est l'IDE, c'est donc le logiciel sur lequel nous allons passer le plus clair de notre temps afin de programmer. La version express est gratuite et suffisante pour pouvoir développer un jeu avec XNA. Évidemment, les versions Professionnelle et Ultimate de Visual Studio peuvent être utilisées (et sont gratuites pour les étudiants via le programme <a href="https://www.dreamspark.com/default.aspx">Dreamspark</a>).<br/> À savoir que j'utiliserai moi-même la version Ultimate anglaise de Visual Studio lorsque j'aurai des screens à faire mais il devrait n'y avoir que très peu de différence si vous n'avez pas la même. ;) <br/> Je vous conseille de prendre également la version anglaise pour la simple et bonne raison que la plupart des tutoriaux ou aides que vous trouverez lors de vos développements seront en anglais.</p></li><li id="r-771732" data-claire-element-id="771732"><p id="r-771731" data-claire-element-id="771731"><a href="http://www.microsoft.com/download/en/details.aspx?id=23714">XNA Game Studio 4.0</a> : C'est le framework en lui même, concrètement il s'agit des dlls qui seront utilisées par votre projet et qui vous permettront d'accéder à toutes les classes fournies par XNA.<br/> Cet élément contient également un plugin pour Visual C# / Visual Studio qui va vous permettre de créer des projets XNA mettant en place l'architecture de base (nous verrons cela plus en détail juste après).</p></li></ul><h5 id="r-installation-21" data-claire-element-id="771739">Installation</h5><p id="r-771735" data-claire-element-id="771735">Pour installer Visual C# Express, vous devez suivre le <a href="http://www.microsoft.com/express/Downloads/#2010-Visual-CS">lien</a> que je vous ai donné puis choisir votre langue. Une fois ceci fait vous pouvez télécharger le fichier <code>vcs_web.exe</code>.</p><p id="r-771736" data-claire-element-id="771736">Lorsque le fichier est entièrement téléchargé, il ne vous reste plus qu'à l'exécuter en suivant l'assistant qui vous permettra entre autres de configurer le chemin où s'installera le logiciel. À noter qu'une fois que vous avez renseigné toutes les informations, le logiciel de Microsoft s'occupe de télécharger Visual C# 2010 Express et de l'installer à la suite.</p><p id="r-771737" data-claire-element-id="771737">Pour XNA Game Studio, c'est encore plus simple. En effet le <a href="http://www.microsoft.com/download/en/details.aspx?id=23714">lien</a> vous amène directement sur la page de téléchargement du composant, vous n'aurez alors qu'à le télécharger puis l'exécuter pour faire l'installation comme n'importe quel logiciel !</p><p id="r-771738" data-claire-element-id="771738">Maintenant que nous avons vu la partie purement théorique, qui vous permet de savoir dans quoi vous vous lancez, et que les outils sont correctement installés pour bien commencer, il n'y a plus qu'à !<br/> Nous allons voir dès le prochain chapitre notre premier projet XNA qui nous permettra de comprendre comment tout jeu fait avec ce framework est architecturé.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
<span class="arrow"></span>
<span class="next">Pourquoi l&#039;utiliser ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">
<span class="next">Premier jeu, première approche</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Premierjeupremireapproche"></a><h2>Premier jeu, première approche</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
<span class="arrow"></span>
<span class="next">Les outils nécessaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
<span class="next">Création d&#039;un projet XNA</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-771742" data-claire-element-id="771742">Bien ! Maintenant que la partie informative est terminée et que tous les outils nécessaires ont été installés, nous allons pouvoir commencer à voir comment est bâtie toute la machinerie XNA. Le but de ce chapitre est que vous compreniez bien comment est architecturé un jeu afin de partir sur de bonnes bases, il ne faut donc pas le négliger ! ;)</p><p id="r-771743" data-claire-element-id="771743">Cette étude se fera d'abord à travers une approche théorique puis par l'étude du code généré par défaut dans les projets XNA pour bien comprendre en pratique comment le tout s'agence.</p><p id="r-771744" data-claire-element-id="771744">Allons-y sans plus attendre !</p>
</div><a name="Crationd039unprojetXNA"></a><h2>Création d&#039;un projet XNA</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">
<span class="arrow"></span>
<span class="next">Premier jeu, première approche</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
<span class="next">La boucle de jeu contre l&#039;événementiel</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-creation-d-un-projet-xna" data-claire-element-id="771779">Création d'un projet XNA</h4><h5 id="r-la-creation-du-projet" data-claire-element-id="771763">La création du projet</h5><p id="r-771745" data-claire-element-id="771745">L'installation de XNA Game Studio 4 a, en plus d'avoir installé les librairies (dlls) de développement, ajouté un petit <em>add-on</em> à votre Visual C# qui permet directement de créer des projets XNA depuis l'IDE. Concrètement, le fait de créer un tel projet permet d'avoir dès sa création toutes les DLLs nécessaires référencées et un code généré mettant en place une architecture de base commune à tous les jeux faits avec XNA. Il &quot;suffit&quot; alors de compléter les trous pour créer notre jeu !</p><p id="r-771746" data-claire-element-id="771746">Voyons sans plus attendre comment créer un projet XNA. Allez dans <code>File</code> &gt; <code>New</code> &gt; <code>Project</code>, vous aurez alors la fenêtre de création de projet qui apparaîtra.</p><p id="r-771747" data-claire-element-id="771748"><a href="medias/uploads.siteduzero.com_files_327001_328000_327487.jpg"><img id="r-771748" data-claire-element-id="771747" src="medias/uploads.siteduzero.com_thb_327001_328000_327487.jpg" alt="Fenêtre de création de projet"/></a></p><p id="r-771749" data-claire-element-id="771749">Vous pouvez remarquer qu'il y a ici une section XNA Game Studio 4.0 (entourée en bleu sur le screenshot), c'est ce que l'<em>add-on</em> nous a rajouté et c'est donc cette section qui va contenir nos templates de projet à utiliser pour la création de nos jeux.</p><p id="r-771750" data-claire-element-id="771751"><a href="medias/uploads.siteduzero.com_files_327001_328000_327488.jpg"><img id="r-771751" data-claire-element-id="771750" src="medias/uploads.siteduzero.com_thb_327001_328000_327488.jpg" alt="Création d'un projet XNA"/></a></p><p id="r-771752" data-claire-element-id="771752">Vous remarquez que plusieurs templates sont disponibles en fonction de la plateforme sur laquelle vous voulez développer, plus d'explications sur ces différents types de projets juste après.<br/> On va ici faire un projet Windows Game 4.0 pour analyser la structure de base d'un jeu. Choisissez donc le template approprié, mettez un nom à votre projet et votre solution puis vous pouvez accepter et laisser Visual C# créer le projet pour vous.<br/> Vous devriez désormais avoir ceci dans votre Visual C# / Visual Studio.</p><p id="r-771753" data-claire-element-id="771754"><a href="medias/uploads.siteduzero.com_files_327001_328000_327313.jpg"><img id="r-771754" data-claire-element-id="771753" src="medias/uploads.siteduzero.com_thb_327001_328000_327313.jpg" alt="Après création du projet"/></a></p><p id="r-771755" data-claire-element-id="771755">Nous verrons à quoi sert le code généré un petit plus tard dans ce chapitre, pour l'instant, on peut observer dans l'explorateur de solution que le template utilisé a en fait créé deux projets :</p><ul id="r-771760" data-claire-element-id="771760"><li id="r-771757" data-claire-element-id="771757"><p id="r-771756" data-claire-element-id="771756"><strong>NomDeVotreProjet</strong> : Ceci est le projet qui contiendra le code qui servira à la logique de votre jeu et à son dessin ;</p></li><li id="r-771759" data-claire-element-id="771759"><p id="r-771758" data-claire-element-id="771758"><strong>NomDeVotreProjetContent</strong> : Ceci est un projet de contenu, c'est dans celui-ci que l'on mettra tout le contenu que notre jeu utilisera (images, musiques, sons, modèles 3D, etc…). On peut d'ailleurs remarquer que l'autre projet de la solution référence celui-ci dans sa section <code>ContentReference</code>.</p></li></ul><p id="r-771761" data-claire-element-id="771762"><a href="medias/uploads.siteduzero.com_files_327001_328000_327415.jpg"><img id="r-771762" data-claire-element-id="771761" src="medias/uploads.siteduzero.com_thb_327001_328000_327415.jpg" alt="Le solution explorer"/></a></p><h5 id="r-les-differents-types-de-projet" data-claire-element-id="771778">Les différents types de projet</h5><p id="r-771764" data-claire-element-id="771764">Lorsque vous créez un nouveau projet via l'<em>add-on</em> de XNA Game Studio 4.0, vous avez pu remarquer que plusieurs templates sont à votre disposition en fonction de ce que vous souhaitez créer.<br/> Voici un petit screen pour ceux qui auraient la mémoire courte. ^^</p><p id="r-771765" data-claire-element-id="771766"><a href="medias/uploads.siteduzero.com_files_327001_328000_327484.jpg"><img id="r-771766" data-claire-element-id="771765" src="medias/uploads.siteduzero.com_thb_327001_328000_327484.jpg" alt="Les types de projet XNA"/></a></p><p id="r-771767" data-claire-element-id="771767">Nous disposons donc de pas moins de 8 projets différents que l'on peut classer en 4 catégories (si les projets Windows Phone n'apparaissent pas, il vous manque probablement les <em>Windows Phone Developer Tools</em> récupérables <a href="http://www.microsoft.com/download/en/details.aspx?id=13890">ici</a>).</p><ul id="r-771776" data-claire-element-id="771776"><li id="r-771769" data-claire-element-id="771769"><p id="r-771768" data-claire-element-id="771768"><strong>&lt;Plateforme&gt; Game</strong> : Cette catégorie comprend donc les templates <em>Windows Phone Game</em>, <em>les Windows Game</em> et les <em>Xbox360 Game</em>. Tous les projets créés depuis ce type de template vont vous permettre à la compilation de générer un exécutable qui pourra être utilisé sur la plateforme choisie. On aura donc au résultat de la compilation un <code>.exe</code> pour Windows, un <code>.xap</code> pour les Windows Phone 7 et également un <code>.exe</code> pour la Xbox360 (que vous ne pourrez pas lancer depuis votre ordinateur, il faudra le déployer sur votre Xbox360).</p></li><li id="r-771771" data-claire-element-id="771771"><p id="r-771770" data-claire-element-id="771770"><strong>&lt;Plateforme&gt; Game Library</strong> : Cette catégorie comprend donc les templates <em>Windows Phone Game Library</em>, les <em>Windows Game Library</em> et les <em>Xbox360 Game Library</em>. Ces templates vont ici aussi cibler une plateforme en particulier mais aucun exécutable ne sera généré à la compilation, au lieu de ça vous aurez une DLL que vous pourrez référencer dans votre jeu exécutable (la catégorie juste avant). Plus précisément cela va vous permettre par exemple de développer un moteur physique et ensuite de le réutiliser simplement en le référençant dans un autre projet. On peut faire l'analogie avec le <em>Class Library</em> classique que l'on trouve par défaut avec Visual C# à la différence que l'environnement est pré-configuré pour le développement avec XNA (les bonnes références sont ajoutées par exemple).</p></li><li id="r-771773" data-claire-element-id="771773"><p id="r-771772" data-claire-element-id="771772"><strong>Content Pipeline Extension Library</strong> : Ce type de projet a un but bien particulier puisqu'il va permettre d'étendre les fonctionnalités de l'importateur de contenu de XNA. Ceci va nous permettre de créer des importateurs de fichiers personnalisés, nous autorisant à créer notre propre format de fichier. Si ceci est bien abstrait pour l'instant, ce n'est pas grave vous comprendrez mieux quand on commencera à ajouter du contenu à nos jeux et un chapitre entier sera dédié à l'importation d'un type de fichier personnalisé.</p></li><li id="r-771775" data-claire-element-id="771775"><p id="r-771774" data-claire-element-id="771774"><strong>Empty Content Project</strong> : Ce type là vous l'avez déjà rencontré ! Et oui il s'agit de la même chose que ce que créent les projets de type &lt;Plateforme&gt; Game, ils vont donc nous permettre de mettre du contenu dans nos jeux pour peu qu'ils soient référencés dans notre jeu en tant que <code>Content Reference</code>.</p></li></ul><p id="r-771777" data-claire-element-id="771777">Maintenant que tout ceci est éclairci, nous allons passer à l'analyse de la structure de base commune à tous les jeux faits avec ce framework !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">
<span class="arrow"></span>
<span class="next">Premier jeu, première approche</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
<span class="next">La boucle de jeu contre l&#039;événementiel</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Laboucledejeucontrel039vnementiel"></a><h2>La boucle de jeu contre l&#039;événementiel</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
<span class="arrow"></span>
<span class="next">Création d&#039;un projet XNA</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
<span class="next">Explication de la boucle de jeu XNA</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-boucle-de-jeu-contre-l-evenementiel" data-claire-element-id="771799">La boucle de jeu contre l'événementiel</h4><h5 id="r-qu-est-ce-que-l-evenementiel" data-claire-element-id="771792">Qu'est-ce que l'événementiel ?</h5><p id="r-771780" data-claire-element-id="771780">L'événementiel, vous y avez TOUS (et j'insiste bien ;) ) été confrontés. Que ce soit de la plus basique utilisation de l'ordinateur à l'ingénierie informatique, dès que vous ouvrez un logiciel &quot;standard&quot;, l'événementiel est présent.</p><p id="r-771781" data-claire-element-id="771781">Alors qu'est-ce que c'est ? Et bien comme son nom l'indique c'est un système basé sur des événements. Prenons l'exemple de votre navigateur internet (que vous êtes sûrement en train d'utiliser pour regarder ce tuto), il ne se passe rien si vous ne cliquez sur rien avec votre souris, le navigateur est donc en attente d'une action de votre part. En réalité, ceci n'est pas tout à fait exact puisqu'il se passe très souvent quelque chose que l'on ne voit pas (mises en cache, fonctions javascripts,…) mais nous allons faire abstraction de ces opérations pour l'explication.</p><p id="r-771782" data-claire-element-id="771782">Pour revenir à l'exemple du navigateur, lorsque vous cliquez sur la flèche précédente, l'action de ce clic vous ramène vers votre dernière page vue, vous avez donc déclenché un événement qui est géré par le programme (clic sur un bouton) et qui va déclencher une fonction pour faire l'action désirée. Il existe un très grand nombre d'événements capturables par les programmes allant jusqu'au déplacement d'un pixel de la souris.</p><p id="r-771783" data-claire-element-id="771783">Dans ce scénario, votre application va signaler au système d'exploitation quel(s) événement(s) l'intéresse(nt) et quelle(s) fonction(s) associée(s) doit(vent) être exécutée(s), il se met ensuite en &quot;pause&quot; et va attendre que votre système d'exploitation lui signale que l'utilisateur a cliqué à tel endroit, a bougé la souris, a changé le texte d'une textbox, etc… C'est donc une attente passive.</p><div id="r-771785" data-claire-element-id="771785" data-claire-semantic="question"><p id="r-771784" data-claire-element-id="771784">Pourquoi utiliser un tel concept qui requiert la participation du système d'exploitation ?</p></div><p id="r-771786" data-claire-element-id="771786">Tout simplement pour économiser votre processeur, en effet imaginez que votre logiciel surveille lui-même en permanence si une action de l'utilisateur est effectuée, ce dernier utiliserait 100% de votre processeur alors imaginez avec 2, 3, 10 applications en même temps, cela deviendrait très vite ingérable et votre ordinateur ne serait pas du tout fluide.</p><div id="r-771788" data-claire-element-id="771788" data-claire-semantic="question"><p id="r-771787" data-claire-element-id="771787">Okay, je vois le truc mais en quoi ceci est bien pour un jeu ?</p></div><p id="r-771789" data-claire-element-id="771789">Et bien ça ne l'est pas du tout ! ^^ En effet, bien que ce concept soit très adapté pour des applications, il ne l'est pas du tout pour un jeu : imaginez qu'il faille attendre que le joueur appuie sur une touche pour que les monstres bougent ou qu'il faille bouger la souris pour rafraîchir l'affichage, je pense que vous voyez tous que ceci n'est pas envisageable :lol: , c'est pourquoi XNA utilise une toute autre architecture qui est une boucle de jeu, que nous allons voir tout de suite.</p><aside id="r-771791" data-claire-element-id="771791" data-claire-semantic="information"><p id="r-771790" data-claire-element-id="771790">Ce rapide aperçu de la programmation événementielle est là à titre informatif, je l'ai rajouté surtout pour que vous compreniez bien qu'il y a une grosse différence entre la programmation d'un logiciel et celle d'un jeu.</p></aside><h5 id="r-qu-est-ce-que-la-boucle-de-jeu" data-claire-element-id="771798">Qu'est-ce que la boucle de jeu ?</h5><p id="r-771793" data-claire-element-id="771793">La boucle de jeu est un autre concept de programmation qui, vous l'aurez compris, va être utilisé dans XNA. Ici on ne va pas attendre un événement ou une action du joueur, on va être en constante activité et on va tout le temps ou presque faire quelque chose. Alors comme je vous l'ai dit tout à l'heure ceci consomme pas mal de processeur, voire tout votre processeur mais dans le cas d'un jeu, il est rare que 2 d'entre eux soient lancés en même temps. En plus de cela, s'il s'avère que c'est le cas, XNA prend en compte le fait que le jeu n'est pas l'application active et diminue donc sa consommation.</p><p id="r-771794" data-claire-element-id="771794">Le principe de base réside dans une boucle infinie dans laquelle à chaque tour notre jeu va se mettre à jour tant au niveau des positions, des vitesses, des actions effectuées par le joueur que par le travail de la carte graphique au niveau du dessin du jeu.</p><p id="r-771795" data-claire-element-id="771795">Si vous êtes un joueur, vous êtes d'ailleurs très probablement familiarisé avec le nombre de tour qu'effectue cette boucle à la seconde. En effet, je ne parle de rien d'autre que les fps (frame per second en anglais) ou ips (image par seconde en français) qui définit bel et bien le nombre de fois que le jeu est dessiné à la seconde.</p><p id="r-771796" data-claire-element-id="771796">À noter que pour avoir une image fluide il faut au strict minimum 24 images par seconde (pour la télé) et que 30 sont vivement conseillés pour un jeu. Il est même fortement recommandé de monter jusqu'à 60 dans le cas de jeux à forte action (First Person Shooter par exemple) sans quoi le joueur risque de ressentir l'effet de &quot;lag&quot;.<br/> À noter d'ailleurs que XNA par défaut bloque les fps à 60 puisqu'il n'est pas en soit utile de monter plus haut, il est évidemment possible de les débloquer (il s'agit là aussi d'un paramètre qui doit vous parler : la synchronisation verticale).</p><p id="r-771797" data-claire-element-id="771797">C'est à peu près tout pour la boucle de jeu, de toute façon nous reverrons ceci juste après avec un peu plus de concret en s'appuyant sur le code généré par XNA.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
<span class="arrow"></span>
<span class="next">Création d&#039;un projet XNA</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
<span class="next">Explication de la boucle de jeu XNA</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ExplicationdelaboucledejeuXNA"></a><h2>Explication de la boucle de jeu XNA</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
<span class="arrow"></span>
<span class="next">La boucle de jeu contre l&#039;événementiel</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">
<span class="next">Utiliser des images</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-explication-de-la-boucle-de-jeu-xna" data-claire-element-id="771856">Explication de la boucle de jeu XNA</h4><h5 id="r-la-boucle-de-jeu-selon-xna" data-claire-element-id="771814">La boucle de jeu selon XNA</h5><p id="r-771800" data-claire-element-id="771800">Comme je l'ai dit juste avant, XNA utilise le concept de boucle de jeu. Ainsi, dès lors que vous créez un projet XNA, toute une architecture est mise en place afin d'être prêt à l'emploi pour un jeu.<br/> Vous pouvez d'ailleurs lancer le projet que l'on a fait juste avant (<kbd>F5</kbd> pour lancer avec le debug ou <kbd>Ctrl</kbd>+<kbd>F5</kbd> pour le lancer sans le debug) qui contient donc uniquement le code généré par Visual C# et observer votre premier jeu tourner ! :magicien:</p><p id="r-771801" data-claire-element-id="771802"><a href="medias/uploads.siteduzero.com_files_327001_328000_327485.jpg"><img id="r-771802" data-claire-element-id="771801" src="medias/uploads.siteduzero.com_thb_327001_328000_327485.jpg" alt="Jeu vierge lancé"/></a>La première fenêtre de jeu</p><p id="r-771803" data-claire-element-id="771803">Alors évidemment rien d'exceptionnel, c'est juste une fenêtre bleue mais nous allons voir maintenant qu'il se passe en réalité beaucoup de choses avant et pendant l'affichage de cette dernière.<br/> Voici un schéma qui représente le cycle de vie d'un jeu XNA depuis son lancement jusqu'à sa fermeture.</p><p id="r-771804" data-claire-element-id="771805"><a href="medias/uploads.siteduzero.com_files_327001_328000_327623.jpg"><img id="r-771805" data-claire-element-id="771804" src="medias/uploads.siteduzero.com_thb_327001_328000_327623.jpg" alt="Schéma simplifié du cycle de vie d'un jeu XNA"/></a>Schéma simplifié du cycle de vie d'un jeu XNA</p><p id="r-771806" data-claire-element-id="771806">Tout commence avec l'instanciation d'un objet de type <code>Game</code>, ou plus exactement un enfant de cette classe, on exécute donc son constructeur. Une fois cette opération terminée, la mise en place du contexte du jeu est démarrée avec d'abord la phase d'initialisation qui va nous servir, comme son nom l'indique, à initialiser notre jeu (position joueur, position des ennemies, vie, etc.).<br/> Vient ensuite la phase du chargement du contenu (<code>LoadContent</code>) qui elle, va nous permettre de charger les ressources utiles. Globalement cela correspond au chargement de ce qui se trouve dans notre projet de contenu et qui est nécessaire dès le chargement du jeu.</p><p id="r-771807" data-claire-element-id="771807">Lorsque tout ceci est fait, le jeu va réellement entrer dans sa phase principale puisqu'il va entrer dans la boucle de jeu ! En effet il s'agit d'une boucle pseudo infinie qui va s'exécuter tant que le jeu s'exécute. Elle est séparée en 2 parties distinctes selon l'architecture XNA, un peu à l'image de l'initialisation et du chargement de contenu. On a une première partie qui va servir à mettre à jour uniquement la logique du jeu (bouger le joueur, faire perdre de la vie, gérer les collisions) dans la partie <code>Update</code> alors que la partie <code>Draw</code> se charge d'afficher le résultat de toutes ces opérations en dessinant les éléments du jeu (images, modèles 3D, etc..).</p><p id="r-771808" data-claire-element-id="771808">Je tiens à préciser tout de même que ce schéma montre de façon simplifiée comment XNA fonctionne car en réalité <code>Update</code> et <code>Draw</code> ne s'exécutent pas de façon séquentielle. Chaque méthode est exécutée dans un thread séparé mais ces threads étant synchronisés, on a l'impression que les méthodes sont exécutées l'une après l'autre.</p><div id="r-771810" data-claire-element-id="771810" data-claire-semantic="question"><p id="r-771809" data-claire-element-id="771809">Quel intérêt du coup de se compliquer la vie en les mettant dans deux threads séparés ? o_O</p></div><p id="r-771811" data-claire-element-id="771811">La synchronisation des deux threads est effective lorsque le jeu n'est pas trop gourmand en ressource et qu'il est bloqué à 60 fps mais lorsque par exemple vous avez des tonnes de choses à dessiner et que votre méthode <code>Draw</code> ne peut tourner qu'à 50 fps, cette séparation d'exécution est indispensable pour que <code>Update</code> continue de faire évoluer la logique de votre jeu à son propre rythme !</p><p id="r-771812" data-claire-element-id="771812">Bien évidemment cette boucle n'est pas complètement infinie sinon on ne pourrait jamais fermer le jeu :lol: , on peut donc en sortir ce qui signifie généralement l'extinction du programme. La phase d'extinction est composée du déchargement de contenu qui va nous permettre d'enlever de la mémoire les éléments que nous avons chargé nous-même (en sachant que normalement le <em>Garbage Collector</em> et le gestionnaire de contenu du Framework se chargent pour nous de faire le ménage des ressources non utilisées, c'est donc dans des cas assez particuliers que nous utiliserons cette méthode).</p><p id="r-771813" data-claire-element-id="771813">Vous voyez donc que les apparences sont trompeuses ! Bien que le programme n'affiche qu'une fenêtre bleue, il se passe en réalité beaucoup de choses sous le capot ! :p <br/> Maintenant que nous avons vu la partie théorique, il est grand temps de mettre les mains dans le cambouis en allant observer le code.</p><h5 id="r-les-methodes-dans-le-code" data-claire-element-id="771847">Les méthodes dans le code</h5><p id="r-771815" data-claire-element-id="771815">On peut voir dans notre explorateur de solution que nous avons 2 fichiers présents : <code>Game1.cs</code> et <code>Program.cs</code>. Prenons d'abord le fichier <code>Program.cs</code> et observons son contenu.</p><pre id="r-771816" data-claire-element-id="771816"><code data-claire-semantic="csharp">using System;

namespace CreationProjetXNA
{
#if WINDOWS || XBOX
    static class Program
    {
        /// &lt;summary&gt;
        /// The main entry point for the application.
        /// &lt;/summary&gt;
        static void Main(string[] args)
        {
            using (Game1 game = new Game1())
            {
                game.Run();
            }
        }
    }
#endif
}</code></pre><p id="r-771817" data-claire-element-id="771817">On a d'abord tout ce qui est des plus classiques dans un fichier C#, un ensemble de <em>clauses using</em> (ici une seule) puis un <em>namespace</em> et enfin notre classe <code>Program</code>. On peut remarquer la présence d'une instruction préprocesseur avec <code data-claire-semantic="csharp">#if WINDOWS || XBOX</code> qui n'est pas importante pour l'instant, elle est surtout utilisée lors des portages de jeux sur plusieurs plateformes.</p><p id="r-771818" data-claire-element-id="771818">À l'intérieur de la classe <code>Program</code>, nous avons la méthode <code data-claire-semantic="csharp">Main</code> qui est définie, il s'agit donc bien du point d'entrée de notre programme, ce qui va être fait en premier à son exécution.<br/> Alors que fait cette méthode ? Elle instancie la classe <code>Game1</code> (que nous analyserons juste après) dans une clause <em>using</em> assurant une libération complète des ressources à la fin de son utilisation. Enfin, une fois que <code>Game1</code> est instanciée, on lance la méthode <code>Run</code> de ce dernier qui va déclencher tout le processus que nous avons vu précédemment (<code>Initialize</code>, <code>LoadContent</code>, <code>Update</code>,…).</p><p id="r-771819" data-claire-element-id="771819">Analysons maintenant le contenu de notre deuxième fichier : <code>Game1.cs</code>. Tant que nous y sommes, je vous conseille fortement de renommer cette classe pour mieux s'y retrouver ultérieurement. Pour cela, allez dans l'explorateur de solution et faites un clic droit sur votre fichier puis <code>Rename</code>. Une fois le fichier renommé, Visual C# va rechercher automatiquement les occurrences du même nom dans le code pour les modifier si vous répondez oui à la boite de dialogue qui apparaît. Je l'ai personnellement renommé <code>FirstGame.cs</code>.</p><p id="r-771820" data-claire-element-id="771820">Voyons donc le code de ce fichier petit bout par petit bout. On a en premier une fois de plus ce qui est classique à tout fichier C# : de nombreuses clauses <em>using</em> qui permettent d'intégrer l'utilisation du Framework XNA et le <em>namespace</em> dans lequel on travaille.</p><pre id="r-771821" data-claire-element-id="771821"><code data-claire-semantic="csharp">using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace CreationProjetXNA
{
   ...
}</code></pre><p id="r-771822" data-claire-element-id="771822">Commencent ensuite les choses importantes avec la création de la classe principale de notre jeu. On remarque que celle-ci hérite (je ne reviens pas sur l'héritage, si cette notion vous est totalement étrangère je vous conseille de lire un tutoriel sur le C# en général) de la classe <code>Game</code>. La classe <code>Game</code> est fournie par le Framework XNA et c'est elle qui met en place l'architecture que nous avons vue juste avant. Il faut ici vraiment comprendre que c'est le cœur de notre jeu, le pilier central sur lequel nous allons progressivement bâtir notre jeu.</p><pre id="r-771823" data-claire-element-id="771823"><code data-claire-semantic="csharp">/// &lt;summary&gt;
/// This is the main type for your game
/// &lt;/summary&gt;
public class FirstGame : Microsoft.Xna.Framework.Game
{
    ...
}</code></pre><p id="r-771824" data-claire-element-id="771824">Continuons en regardant ce que contient cette classe, si vous avez bien suivi ce que j'ai dit au début de ce chapitre, ce que nous allons voir maintenant n'est que de la révision mais plus concrète puisqu'il y a du code à l'appui.</p><pre id="r-771825" data-claire-element-id="771825"><code data-claire-semantic="csharp">GraphicsDeviceManager graphics;
SpriteBatch spriteBatch;

public FirstGame()
{
    graphics = new GraphicsDeviceManager(this);
    Content.RootDirectory = &quot;Content&quot;;
}</code></pre><p id="r-771826" data-claire-element-id="771826">Ce code est la déclaration des attributs de la classe <code>FirstGame</code> ainsi que le constructeur de la classe.<br/> Les deux attributs présents par défaut sont :</p><ul id="r-771831" data-claire-element-id="771831"><li id="r-771828" data-claire-element-id="771828"><p id="r-771827" data-claire-element-id="771827"><strong>Un GraphicsDeviceManager</strong> : Cet objet va faire l'interface entre vous et votre carte graphique. Vous allez donc pouvoir régler certains paramètres de rendu de la carte graphique mais aussi plus simplement la taille de la fenêtre dans laquelle dessiner le jeu ;</p></li><li id="r-771830" data-claire-element-id="771830"><p id="r-771829" data-claire-element-id="771829"><strong>Un SpriteBatch</strong> : Cet objet va tout simplement vous servir à dessiner des images ou des chaînes de caractère sur votre écran de jeu.</p></li></ul><p id="r-771832" data-claire-element-id="771832">Le constructeur de la classe se charge d'instancier le <em>GraphicsDeviceManager</em> en lui passant en paramètre le <code>Game</code> associé (ici <em>this</em> puisque nous sommes dans la classe du jeu) et va ensuite définir grâce à la propriété <code>Content</code> de la classe parente <code>Game</code> où chercher le contenu quand nous lui demanderons de charger une ressource (ici cela définit la racine de notre projet de contenu).</p><p id="r-771833" data-claire-element-id="771833">Ensuite viennent les méthodes vues dans le schéma de la boucle de jeu. À noter que toutes ces méthodes ont l'attribut <code data-claire-semantic="csharp">override</code> accolé, ce qui signifie qu'elles sont déjà définies dans la classe parente (<code>Game</code>) et qu'on ne fait que les remplacer.</p><pre id="r-771834" data-claire-element-id="771834"><code data-claire-semantic="csharp">/// &lt;summary&gt;
/// Allows the game to perform any initialization it needs to before starting to run.
/// This is where it can query for any required services and load any non-graphic
/// related content.  Calling base.Initialize will enumerate through any components
/// and initialize them as well.
/// &lt;/summary&gt;
protected override void Initialize()
{
    // TODO: Add your initialization logic here

    base.Initialize();
}


/// &lt;summary&gt;
/// LoadContent will be called once per game and is the place to load
/// all of your content.
/// &lt;/summary&gt;
protected override void LoadContent()
{
    // Create a new SpriteBatch, which can be used to draw textures.
    spriteBatch = new SpriteBatch(GraphicsDevice);

    // TODO: use this.Content to load your game content here
}


/// &lt;summary&gt;
/// UnloadContent will be called once per game and is the place to unload
/// all content.
/// &lt;/summary&gt;
protected override void UnloadContent()
{
    // TODO: Unload any non ContentManager content here
}


/// &lt;summary&gt;
/// Allows the game to run logic such as updating the world,
/// checking for collisions, gathering input, and playing audio.
/// &lt;/summary&gt;
/// &lt;param name=&quot;gameTime&quot;&gt;Provides a snapshot of timing values.&lt;/param&gt;
protected override void Update(GameTime gameTime)
{
    // Allows the game to exit
    if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
        this.Exit();

    // TODO: Add your update logic here

    base.Update(gameTime);
}


/// &lt;summary&gt;
/// This is called when the game should draw itself.
/// &lt;/summary&gt;
/// &lt;param name=&quot;gameTime&quot;&gt;Provides a snapshot of timing values.&lt;/param&gt;
protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);

    // TODO: Add your drawing code here

    base.Draw(gameTime);
}</code></pre><p id="r-771835" data-claire-element-id="771835">Voici la liste des méthodes que l'on trouve et leurs explications respectives.</p><ul id="r-771846" data-claire-element-id="771846"><li id="r-771837" data-claire-element-id="771837"><p id="r-771836" data-claire-element-id="771836"><code><strong>Initialize</strong></code> : Première méthode appelée lorsque l'on exécute la méthode <code>Run()</code> de la classe <code>Game</code>. Elle permet de mettre en place tout la logique de départ de notre jeu en initialisant les variables aux valeurs voulues.</p></li><li id="r-771839" data-claire-element-id="771839"><p id="r-771838" data-claire-element-id="771838"><code><strong>LoadContent</strong></code> : Seconde méthode appelée dans la logique du <code>Run()</code>. Elle permet de charger en mémoire RAM les ressources dont nous aurons besoin au lancement de notre jeu. Ceci va de la simple petite image qui représente un chiffre à un gros modèle 3D en passant par les sons et musiques.<br/> Ici le <em>SpriteBatch</em> est instancié puisqu'il s'agit d'une ressource assez importante qui permettra de dessiner les images.</p></li><li id="r-771841" data-claire-element-id="771841"><p id="r-771840" data-claire-element-id="771840"><code><strong>UnloadContent</strong></code> : Méthode appelée lors de la fermeture du jeu. Elle permet de décharger tout le contenu qui n'aurait pas été chargé via le gestionnaire de contenu offert par XNA ainsi que de supprimer de la mémoire toute variable ne pouvant être traitée par le <em>Garbage Collector</em>.</p></li><li id="r-771843" data-claire-element-id="771843"><p id="r-771842" data-claire-element-id="771842"><code><strong>Update</strong></code> : Une des deux méthodes faisant partie de la boucle de jeu. Celle-ci est utilisée pour mettre à jour la logique du jeu. La logique comprend par exemple tout ce qui est position du joueur, position des monstres, calcul des collisions, etc...<br/> On peut trouver par défaut un code qui sert à vérifier si le joueur appuie sur le bouton <em>back</em> de sa manette de Xbox auquel cas, on quitte le jeu et ceci même si c'est un projet Windows Game ! ^^</p></li><li id="r-771845" data-claire-element-id="771845"><p id="r-771844" data-claire-element-id="771844"><code><strong>Draw</strong></code> : La deuxième méthode faisant partie de la boucle de jeu. À l'inverse de <code>Update</code>, cette méthode ne va pas du tout s'occuper de la logique du jeu mais plutôt de dessiner le résultat de la logique calculée par <code>Update</code>. C'est donc elle qui va se charger de « communiquer » avec la carte graphique pour lui donner les choses à dessiner aussi bien en 2D qu'en 3D.<br/> Par défaut dans cette méthode, une seule action est effectuée: le nettoyage de votre écran. La méthode <code>Clear()</code> prend une couleur en paramètre (d'où le joli bleu que l'on voit au lancement du jeu), vous pouvez vous amuser à modifier cette couleur, XNA propose une grosse panoplie de couleurs toutes prêtes.</p></li></ul><h5 id="r-pourquoi-respecter-cette-architecture" data-claire-element-id="771855">Pourquoi respecter cette architecture ?</h5><p id="r-771848" data-claire-element-id="771848">Il m'a semblé judicieux de bien insister sur l'importance de respecter l'architecture proposée par le Framework. En effet, rien ne vous empêche de mettre votre code un peu partout, par exemple en mettant la logique et le dessin de votre jeu dans la même méthode mais c'est évidemment déconseillé.</p><p id="r-771849" data-claire-element-id="771849">La première raison est que cette architecture a été pensée par des cadors du jeu vidéo chez Microsoft, je pense donc que l'on peut leur faire confiance. :)</p><p id="r-771850" data-claire-element-id="771850">En plus de cela le code en interne est pensé et optimisé autour de cette architecture, donc si vous ne la respectez pas votre jeu risque de lagger sans raison apparente et cela risque de générer des comportements inattendus.</p><p id="r-771851" data-claire-element-id="771851">Enfin, je trouve que cette architecture permet de bien se repérer grâce à la séparation de la logique et de la partie spécifique au rendu, c'est assez dur à faire comprendre pourquoi, ça se ressent quand on expérimente avec le Framework, mais croyez-moi quand vous développerez vous gagnerez du temps grâce à ça.<br/> Je n'ai donc qu'un conseil à vous donner pour le moment : respectez bien cette architecture. :)</p><p id="r-771852" data-claire-element-id="771852">Si pour l'instant ceci reste un peu abstrait (j'espère quand même que vous avez compris l'essentiel), vous verrez rapidement tout au long de ce tutoriel quel code doit être mis où.</p><p id="r-771853" data-claire-element-id="771853">Voila un chapitre bien rempli de terminé et aussi une bonne chose de faite ! :) <br/> Ceci est la base de la base, j'espère donc que vous avez bien assimilé les informations de ce chapitre car elles vous seront très utiles pour comprendre plus tard pourquoi on fait ci ou pourquoi on fait ça.</p><p id="r-771854" data-claire-element-id="771854">Après avoir observé notre premier projet vide ^^ , nous allons commencer à apprendre à le remplir pour pouvoir construire un vrai jeu. C'est ce que je vous propose dans la suite du tutoriel mais avant ça : QCM ! (Et tous ceux qui n'ont pas 20… :pirate: ).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
<span class="arrow"></span>
<span class="next">La boucle de jeu contre l&#039;événementiel</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">
<span class="next">Utiliser des images</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utiliserdesimages"></a><h2>Utiliser des images</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
<span class="arrow"></span>
<span class="next">Explication de la boucle de jeu XNA</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
<span class="next">Ajout d&#039;image au projet</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-771858" data-claire-element-id="771858">Vous avez eu la chance de lancer votre premier jeu fait avec XNA dans le chapitre précédent ! Je conçois que la simple fenêtre bleue n'avait rien d'exceptionnel mais elle a le mérite de nous avoir permis de comprendre déjà ce qu'il se passe de base. :)</p><p id="r-771859" data-claire-element-id="771859">Il est maintenant grand temps d'ajouter un peu de contenu à notre jeu ! Nous allons commencer par le chargement puis l'affichage d'une simple image dans notre fenêtre et nous verrons comment la faire bouger.</p><p id="r-771860" data-claire-element-id="771860">Vous pourrez donc commencer à apprécier la rapidité avec laquelle on peut effectuer ce genre de choses. ;)</p><p id="r-771861" data-claire-element-id="771861">Mais assez parlé ! Passons à l'action.</p>
</div><a name="Ajoutd039imageauprojet"></a><h2>Ajout d&#039;image au projet</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">
<span class="arrow"></span>
<span class="next">Utiliser des images</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
<span class="next">Affichage de l&#039;image</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-ajout-d-image-au-projet" data-claire-element-id="771905">Ajout d'image au projet</h4><h5 id="r-le-content-pipeline" data-claire-element-id="771904">Le Content Pipeline</h5><p id="r-771862" data-claire-element-id="771862">Quand on parle de gestion de contenu en XNA, on ne peut pas passer à coté du <em>Content Pipeline</em>.</p><div id="r-771864" data-claire-element-id="771864" data-claire-semantic="question"><p id="r-771863" data-claire-element-id="771863">Qu'est-ce que c'est et à quoi ça sert ?</p></div><p id="r-771865" data-claire-element-id="771865">Comme son nom l'indique c'est un &quot;tuyau&quot; dans lequel vous allez insérer vos ressources (aussi appelé <em>assets</em>) et qui va vous donner quelque chose d'exploitable dans le code à la sortie. <br/> Cette grosse brique de XNA va intervenir à différentes phases de notre projet : à son élaboration, à sa compilation et à son exécution. Voici un petit schéma qui vous montre tout le processus qui permet d'utiliser des ressources dans son jeu.</p><p id="r-771866" data-claire-element-id="771867"><a href="medias/uploads.siteduzero.com_files_328001_329000_328394.jpg"><img id="r-771867" data-claire-element-id="771866" src="medias/uploads.siteduzero.com_thb_328001_329000_328394.jpg" alt="Image utilisateur"/></a></p><h6 id="r-l-importation" data-claire-element-id="771893">L'importation</h6><p id="r-771868" data-claire-element-id="771868">Le processus d'importation va vous permettre tout simplement d'ajouter votre fichier de ressource dans votre projet de contenu.<br/> Les formats de fichier qui sont pris en compte par défaut dans XNA sont les suivants :</p><ul id="r-771879" data-claire-element-id="771879"><li id="r-771870" data-claire-element-id="771870"><p id="r-771869" data-claire-element-id="771869"><strong>images</strong>: .bmp , .jpg, .png, .dds et .tga ;</p></li><li id="r-771872" data-claire-element-id="771872"><p id="r-771871" data-claire-element-id="771871"><strong>audio</strong>: .mp3, .wav, .wma et .xap ;</p></li><li id="r-771874" data-claire-element-id="771874"><p id="r-771873" data-claire-element-id="771873"><strong>vidéos</strong>: .wmv ;</p></li><li id="r-771876" data-claire-element-id="771876"><p id="r-771875" data-claire-element-id="771875"><strong>modèles 3D</strong>: .fbx et .x ;</p></li><li id="r-771878" data-claire-element-id="771878"><p id="r-771877" data-claire-element-id="771877"><strong>effets</strong>: .fx.</p></li></ul><p id="r-771880" data-claire-element-id="771880">Vous voyez donc qu'il y a un large choix de formats par défaut que vous pouvez utiliser dans vos projets et si un dont vous avez besoin n'est pas pris en charge par XNA il est possible d'étendre le <em>Content Pipeline</em> pour créer ses propres importateurs (mais nous verrons cela dans un chapitre qui y est dédié).</p><p id="r-771881" data-claire-element-id="771881">Je vous donne le fichier que je vais utiliser par la suite (il s'agit de notre bon vieux Zozor que vous pouvez admirer en haut à droite du site ^^ ).</p><figure id="r-771883" data-claire-element-id="771884"><img id="r-771882" data-claire-element-id="771882" src="medias/uploads.siteduzero.com_files_328001_329000_328425.png" alt="Notre Zozor !"/></figure><p id="r-771885" data-claire-element-id="771885">Pour importer un fichier, rien de plus simple, vous avez plusieurs possibilités.<br/> La première est tout simplement de faire un <em>drag and drop</em> de votre fichier depuis l'explorateur Windows vers votre projet de contenu.</p><p id="r-771886" data-claire-element-id="771887"><a href="medias/uploads.siteduzero.com_files_328001_329000_328404.jpg"><img id="r-771887" data-claire-element-id="771886" src="medias/uploads.siteduzero.com_thb_328001_329000_328404.jpg" alt="Ajout d'image par drag'n'drop"/></a></p><p id="r-771888" data-claire-element-id="771888">La deuxième solution consiste à faire un clic droit sur votre projet de contenu puis <code>Add</code> et enfin <code>Existing Item…</code>. Vous n'avez plus qu'à aller chercher votre fichier là où il se trouve et cliquer sur <code>Add</code>. :)</p><p id="r-771889" data-claire-element-id="771891"><a href="medias/uploads.siteduzero.com_files_328001_329000_328408.jpg"><img id="r-771890" data-claire-element-id="771889" src="medias/uploads.siteduzero.com_thb_328001_329000_328408.jpg" alt="Clic droit sur projet de contenu"/></a><a href="medias/uploads.siteduzero.com_files_328001_329000_328409.jpg"><img id="r-771891" data-claire-element-id="771890" src="medias/uploads.siteduzero.com_thb_328001_329000_328409.jpg" alt="Choix de l'image"/></a></p><p id="r-771892" data-claire-element-id="771892">Vous devriez donc maintenant voir votre fichier dans le solution explorer !</p><h6 id="r-la-compilation-1" data-claire-element-id="771898">La compilation</h6><p id="r-771894" data-claire-element-id="771894">Maintenant que notre fichier est ajouté à notre projet de contenu, celui-ci sera traité par Visual Studio lors de la compilation.<br/> Le chargement d'<em>assets</em> dans un jeu étant une des parties les plus consommatrices de ressource sur un ordinateur voire la plus consommatrice, il est primordial que cette opération soit bien gérée et XNA s'en occupe évidemment pour nous ! :D</p><p id="r-771895" data-claire-element-id="771895">Pour cela il utilise un format de fichier bien à lui : les .xnb. Ce dernier est un format de fichier optimisé pour le chargement dans le jeu et toute ressources mises dans un projet de contenu (que ce soit des images, du son ou autre) sont transformés en .xnb à la compilation.</p><p id="r-771896" data-claire-element-id="771896">Ce sont d'ailleurs ces fichiers-là qu'il faudra que vous donniez en même temps que l'exécutable de votre jeu si vous le diffusez et non les ressources de base que vous avez pu utiliser (jpg, fbx, ...).</p><p id="r-771897" data-claire-element-id="771897">Le processus de compilation est assez complexe c'est pourquoi nous n'allons pas le voir en détail ici mais sachez que c'est la partie extensible du <em>Content Pipeline</em>, c'est donc elle qui nous permettra de charger nos propres formats de fichier.</p><h6 id="r-le-chargement" data-claire-element-id="771903">Le chargement</h6><p id="r-771899" data-claire-element-id="771899">Le chargement de nos ressources va être la partie la plus appréciable tant elle est facile grâce à XNA et son <em>Content Pipeline</em> et plus spécifiquement le <em>Content Manager</em> (qui est une sous partie du <em>Content Pipeline</em> dédié au chargement des <em>assets</em> à l'exécution).<br/> En effet, quel que soit le type fichier que vous souhaitez charger, il faudra utiliser la même méthode ! Le Framework se charge tout seul de déterminer le type de fichier et de le charger pour pouvoir ensuite l'utiliser.</p><p id="r-771900" data-claire-element-id="771900">Voici la fameuse méthode à utiliser : <code data-claire-semantic="csharp">Content.Load&lt;T&gt;(&quot;Asset Name de votre contenu&quot;)</code>.</p><p id="r-771901" data-claire-element-id="771901"><code>Content</code> est ici une propriété de la classe principale <code>Game</code> et donne accès au <em>Content Manager</em>. Le <code>T</code> va représenter ici le type d'<em>asset</em> que vous souhaitez charger et enfin l'argument de la méthode est le nom de votre ressource sans son extension (dans mon cas ce sera &quot;zozor6&quot;).</p><p id="r-771902" data-claire-element-id="771902">Si ceci est encore flou, ne vous inquiétez pas, c'est normal et nous allons appliquer tout ça dans le chapitre suivant en affichant notre zozor dans notre fenêtre bleue. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">
<span class="arrow"></span>
<span class="next">Utiliser des images</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
<span class="next">Affichage de l&#039;image</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Affichagedel039image"></a><h2>Affichage de l&#039;image</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
<span class="arrow"></span>
<span class="next">Ajout d&#039;image au projet</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
<span class="next">Déplacer l&#039;image sur l&#039;écran</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-affichage-de-l-image-2" data-claire-element-id="771928">Affichage de l'image</h4><p id="r-771906" data-claire-element-id="771906">Bien ! Maintenant que l'on sait comment nos fichiers sont importés dans nos jeux on va pouvoir afficher notre zozor. :)</p><p id="r-771907" data-claire-element-id="771907">Afin d'afficher l'image, nous allons procéder en 4 étapes: charger l'image en mémoire, déclarer que l'on va dessiner des images, dessiner l'image et enfin déclarer que l'on a terminé de dessiner.</p><h5 id="r-chargement-en-memoire" data-claire-element-id="771913">Chargement en mémoire</h5><p id="r-771908" data-claire-element-id="771908">Comme nous l'avons vu précédemment nous allons pouvoir charger n'importe quel asset avec la méthode <code>Content.Load&lt;T&gt;()</code> ce sera donc évidemment le cas pour notre image.<br/> Une image est représentée dans le code par un objet de type <code>Texture2D</code>. On crée donc un attribut à notre classe <code>FirstGame</code>.</p><pre id="r-771909" data-claire-element-id="771909"><code data-claire-semantic="csharp">private Texture2D _zozor;</code></pre><p id="r-771910" data-claire-element-id="771910">Puis on charge notre image dans cet attribut dans la méthode <code>LoadContent</code> (souvenez vous du chapitre 2 ;) ).</p><pre id="r-771911" data-claire-element-id="771911"><code data-claire-semantic="csharp">protected override void LoadContent()
{
    ...

    _zozor = Content.Load&lt;Texture2D&gt;(&quot;zozor6&quot;);
}</code></pre><p id="r-771912" data-claire-element-id="771912">À ce stade notre image est chargée et prête à être dessinée.</p><h5 id="r-dessiner-l-image" data-claire-element-id="771927">Dessiner l'image</h5><p id="r-771914" data-claire-element-id="771914">Pour dessiner l'image, on va utiliser l'objet de type <code>SpriteBatch</code> présent par défaut dans le template de projet XNA. Celui-ci permet de dessiner des images à la suite avec des propriétés communes.<br/> Avant de pouvoir lui envoyer notre zozor à dessiner (le <code>Texture2D</code>), il va falloir signaler que nous allons avoir à dessiner. Évidemment toutes ces opérations ont leur place dans la méthode <code>Draw()</code>.</p><pre id="r-771915" data-claire-element-id="771915"><code data-claire-semantic="csharp">spriteBatch.Begin();</code></pre><p id="r-771916" data-claire-element-id="771916">Il est important de faire cette opération sans quoi vous aurez une exception au lancement de votre jeu.<br/> Une fois fait, vous pouvez passer au dessin de votre image (enfin ^^ ).</p><pre id="r-771917" data-claire-element-id="771917"><code data-claire-semantic="csharp">spriteBatch.Draw(_zozor, Vector2.Zero, Color.White);</code></pre><p id="r-771918" data-claire-element-id="771918">Dans ce code, <code>_zozor</code> est notre <code>Texture2D</code>, <code>Vector2.Zero</code> représente la position de notre image (nous verrons le système de coordonnées dans le chapitre d'après) et enfin le <code>Color.White</code> représente un filtre de couleur où le blanc équivaut à aucun filtre. Vous pouvez essayer de modifier ce dernier argument avec une des valeurs proposées pour comprendre quel est son effet.</p><p id="r-771919" data-claire-element-id="771919">Enfin, terminez l'opération de dessin du <code>spriteBatch</code>.</p><pre id="r-771920" data-claire-element-id="771920"><code data-claire-semantic="csharp">spriteBatch.End();</code></pre><p id="r-771921" data-claire-element-id="771921">Et voici le code complet de la méthode <code>Draw()</code> qui va nous permettre d'afficher zozor dans la fenêtre.</p><pre id="r-771922" data-claire-element-id="771922"><code data-claire-semantic="csharp">protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.DarkGray);

    spriteBatch.Begin();
    spriteBatch.Draw(_zozor, Vector2.Zero, Color.White);
    spriteBatch.End();

    base.Draw();
}</code></pre><p id="r-771923" data-claire-element-id="771923">Vous pouvez maintenant lancer votre application et observer zozor dans votre jeu. À noter que notre image étant en png, elle contient de la transparence et que cette transparence est gérée automatiquement par XNA. :)</p><p id="r-771924" data-claire-element-id="771925"><a href="medias/uploads.siteduzero.com_files_328001_329000_328422.jpg"><img id="r-771925" data-claire-element-id="771924" src="medias/uploads.siteduzero.com_thb_328001_329000_328422.jpg" alt="Jeu avec Zozor"/></a></p><p id="r-771926" data-claire-element-id="771926">Vous voyez qu'il est très simple d'afficher une image (seulement 4 lignes de code) ce qui va nous permettre de ne pas perdre de temps sur ce genre de choses. Ce n'est évidemment que le début mais sachez que ceci reflète bien l'esprit du Framework : rapidité, simplicité et efficacité ;) .</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
<span class="arrow"></span>
<span class="next">Ajout d&#039;image au projet</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
<span class="next">Déplacer l&#039;image sur l&#039;écran</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Dplacerl039imagesurl039cran"></a><h2>Déplacer l&#039;image sur l&#039;écran</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
<span class="arrow"></span>
<span class="next">Affichage de l&#039;image</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">
<span class="next">Afficher du texte</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-deplacer-l-image-sur-l-ecran" data-claire-element-id="772019">Déplacer l'image sur l'écran</h4><h5 id="r-le-systeme-de-coordonnees-2" data-claire-element-id="771935">Le système de coordonnées</h5><p id="r-771929" data-claire-element-id="771929">Le système de coordonnées utilisé par XNA est le plus répandu dans le domaine du jeu vidéo. Si c'est votre première expérience, dans le jeu, sachez qu'il diffère un petit peu du système classique que l'on peut voir en cours de maths.<br/> Rien de bien compliqué cependant. ^^ L'axe des x (abscisses) va de gauche à droite et a son origine sur le coté gauche de la fenêtre donc jusqu'ici pas de changement. L'axe des y (ordonnées) quant à lui va de haut en bas et a son origine sur le coté supérieur de la fenêtre.</p><p id="r-771930" data-claire-element-id="771930">Mais comme un schéma parle mieux que des mots en voici un qui représente notre fenêtre (par défaut en 800x480). :p</p><figure id="r-771932" data-claire-element-id="771933"><img id="r-771931" data-claire-element-id="771931" src="medias/uploads.siteduzero.com_files_328001_329000_328447.jpg" alt="Schéma du système de coordonnées 2D"/></figure><p id="r-771934" data-claire-element-id="771934">On voit donc que si l'on veut descendre notre image, il va falloir… augmenter la valeur de y ! C'est un peu bizarre au début, je vous l'accorde mais on s'y fait vite. ;)</p><h5 id="r-le-vector2" data-claire-element-id="771953">Le Vector2</h5><p id="r-771936" data-claire-element-id="771936">Pour pouvoir placer notre objet où bon nous semble, on va utiliser un objet de type <code>Vector2</code> .<br/> Ce type va tout simplement représenter un vecteur 2D dans notre code. Concrètement, un vecteur correspond à deux <code>float</code>, l'un pour la coordonnée en x et l'autre pour celle en y.</p><div id="r-771938" data-claire-element-id="771938" data-claire-semantic="question"><p id="r-771937" data-claire-element-id="771937">Pourquoi on utilise un <em>Vector2</em> plutôt que deux variables ?</p></div><p id="r-771939" data-claire-element-id="771939">Eh bien il y a plusieurs raisons à cela, la première c'est que ça évite de se trimbaler avec deux variables tout le temps.<br/> Ensuite, ça permet une harmonisation quel que soit le nombre de dimensions sur lequel nous travaillons : en 3D nous utiliserons des <code>Vector3</code>.<br/> Enfin un dernier gros avantage est que la classe <code>Vector2</code> contient bon nombre de méthodes qui vont nous faciliter les calculs vectoriels (addition, multiplication, produit scalaire,…) autant de choses qui accéléreront le développement en faisant abstraction des formules mathématiques dans certains cas très complexes. :)</p><p id="r-771940" data-claire-element-id="771940">Nous avons déjà eu affaire au <code>Vector2</code> sans y faire plus attention que ça avec l'utilisation de la propriété <code>Zero</code> qui représente le vecteur de coordonnées (0,0).<br/> La classe <code>Vector2</code> contient certaines propriétés statiques qui correspondent à certains vecteurs &quot;classiques&quot;, en voici la liste :</p><ul id="r-771949" data-claire-element-id="771949"><li id="r-771942" data-claire-element-id="771942"><p id="r-771941" data-claire-element-id="771941"><code><strong>Vector2.Zero</strong></code> : correspond aux coordonnées (0, 0) donc le coin supérieur gauche de la fenêtre ;</p></li><li id="r-771944" data-claire-element-id="771944"><p id="r-771943" data-claire-element-id="771943"><code><strong>Vector2.UnitX</strong></code> : correspond aux coordonnées (1, 0) ;</p></li><li id="r-771946" data-claire-element-id="771946"><p id="r-771945" data-claire-element-id="771945"><code><strong>Vector2.UnitY</strong></code> : correspond aux coordonnées (0, 1) ;</p></li><li id="r-771948" data-claire-element-id="771948"><p id="r-771947" data-claire-element-id="771947"><code><strong>Vector2.One</strong></code> : correspond aux coordonnées (1, 1).</p></li></ul><p id="r-771950" data-claire-element-id="771950">Pour toutes les autres valeurs, il faut utiliser un constructeur de la classe.</p><pre id="r-771951" data-claire-element-id="771951"><code data-claire-semantic="csharp">Vector2 vector = new Vector2(3); // Initialise un Vector2 avec 3 comme valeur à x ET y
Vector2 vector2 = new Vector2(2, 5); // Initialise un Vector2 avec 2 en x et 5 en y</code></pre><p id="r-771952" data-claire-element-id="771952">Avant de clôturer cette partie sur le <code>Vector2</code>, je tiens à préciser qu'en mathématique un vecteur est bien plus puissant qu'une simple position et c'est aussi le cas dans le Framework ! Il nous servira entre autres à représenter un déplacement et/ou une vitesse.<br/> Si vous souhaitez approfondir la notion de vecteur ou les calculs vectoriels, je ne peux que vous conseiller de lire un cours de maths qui l'expliquera surement beaucoup mieux que moi si je le faisais ici (et ça n'est pas le sujet ;) ).</p><h5 id="r-deplacement-de-l-image" data-claire-element-id="771973">Déplacement de l'image</h5><p id="r-771954" data-claire-element-id="771954">Petit rappel, pour dessiner l'image, on a utilisé ça.</p><pre id="r-771955" data-claire-element-id="771955"><code data-claire-semantic="csharp">spriteBatch.Begin();
spriteBatch.Draw(_zozor, Vector2.Zero, Color.White);
spriteBatch.End();</code></pre><p id="r-771956" data-claire-element-id="771956">Vous vous doutez donc que c'est le deuxième argument de la méthode <code>Draw()</code> qui va nous intéresser. ;) <br/> Changez par exemple par ceci pour placer Zozor au milieu de la fenêtre.</p><pre id="r-771957" data-claire-element-id="771957"><code data-claire-semantic="csharp">// On récupère les dimensions de la fenêtre.
int screenWidth = Window.ClientBounds.Width;
int screenHeight = Window.ClientBounds.Height;

// On dessine zozor au centre de l'écran
spriteBatch.Begin();
spriteBatch.Draw(_zozor,
                 new Vector2(screenWidth / 2 - _zozor.Width / 2, screenHeight / 2 - _zozor.Height / 2),
                 Color.White);
spriteBatch.End();</code></pre><p id="r-771958" data-claire-element-id="771958">Ici, on récupère la taille de la fenêtre qui va nous servir à mettre Zozor au centre. Seulement la position est relative au coin supérieur gauche de l'image donc si l'on ne mettait que <code data-claire-semantic="csharp">new Vector2(screenWidth / 2, screeHeight / 2)</code>, le coin supérieur gauche de Zozor serait au centre mais l'image globale ne le serait pas ! C'est pourquoi on retranche à chaque fois la moitié des dimensions de Zozor et ainsi obtenir une image parfaitement centrée. Voici le résultat. :)</p><figure id="r-771960" data-claire-element-id="771961"><img id="r-771959" data-claire-element-id="771959" src="medias/uploads.siteduzero.com_files_328001_329000_328477.jpg" alt="Zozor au centre"/></figure><p id="r-771962" data-claire-element-id="771962">Il ne reste donc maintenant plus qu'à modifier la position de Zozor de façon dynamique. Pour cela nous aurons besoin d'une variable de type <code>Vector2</code> qui représentera la position de Zozor à l'écran. Nous aurons également besoin d'une variable pour représenter la direction et la vitesse de déplacement de Zozor, mettez donc ces variables en attribut de la classe principale.</p><pre id="r-771963" data-claire-element-id="771963"><code data-claire-semantic="csharp">// La position de Zozor
private Vector2 _zozorPosition;
// Le déplacement de Zozor
private Vector2 _zozorDisplacement;</code></pre><p id="r-771964" data-claire-element-id="771964">Comme je vous l'avais dit, on utilise aussi un <code>Vector2</code> pour représenter le déplacement de Zozor, ceci signifie qu'il se déplacera de <code>zozorDisplacement.X</code> en abscisse et de <code>zozorDisplacement.Y</code> en ordonnée à chaque passage dans <code>Update</code>. ;)</p><p id="r-771965" data-claire-element-id="771965">Il faut ensuite initialiser ces variables, donc dans <code>Initialize()</code> !</p><pre id="r-771966" data-claire-element-id="771966"><code data-claire-semantic="csharp">protected override void Initialize()
{
    _zozorPosition = Vector2.Zero;
    _zozorDisplacement = Vector2.One;

    base.Initialize();
}</code></pre><p id="r-771967" data-claire-element-id="771967">Il faut ensuite modifier la position de Zozor en fonction de son déplacement. Étant donné qu'il s'agit purement de la logique du jeu, on va placer le code qui s'en charge dans la méthode <code>Update()</code>.</p><pre id="r-771968" data-claire-element-id="771968"><code data-claire-semantic="csharp">protected override void Update(GameTime gameTime)
{
    ...

    // On déplace Zozor en lui ajoutant la variable de déplacement
    _zozorPosition += _zozorDisplacement;

    base.Update(gameTime);
}</code></pre><p id="r-771969" data-claire-element-id="771969">J'espère que vous commencez maintenant à comprendre ce que j'entendais par initialisation du jeu, mise à jour de la logique, etc… ;)</p><p id="r-771970" data-claire-element-id="771970">Enfin, la dernière chose à faire est de remplacer notre <code>Vector2</code> rentré en brut dans la méthode <code>Draw</code> du <code>spriteBatch</code> pour y mettre notre variable de position.</p><pre id="r-771971" data-claire-element-id="771971"><code data-claire-semantic="csharp">spriteBatch.Begin();
spriteBatch.Draw(_zozor, _zozorPosition, Color.White);
spriteBatch.End();</code></pre><p id="r-771972" data-claire-element-id="771972">Vous pouvez maintenant relancer votre jeu et magie ! Zozor part d'en haut à gauche de la fenêtre puis descend en diagonale jusqu'à… sortir de l'écran. :(</p><h5 id="r-un-petit-exercice-1" data-claire-element-id="771983">Un petit exercice</h5><p id="r-771974" data-claire-element-id="771974">Je vous propose de réfléchir à un moyen de faire rebondir Zozor sur les bords de la fenêtre pour qu'il évite de sortir. :) <br/> Tous les tests pour savoir s'il sort de la fenêtre vont bien sûr se faire dans la méthode <code>Update()</code>, c'est d'ailleurs la seule méthode que vous allez avoir besoin de modifier. Si vous avez besoin de nouveaux attributs, ne vous gênez pas (je pense surtout à la taille de la fenêtre).</p><p id="r-771975" data-claire-element-id="771975">Un petit indice sur la procédure : il va falloir inverser soit le X du déplacement soit le Y si l'on touche un bord et que l'on est en train de se diriger dans la mauvaise direction. Ceci peut être fait directement par la modification de <code>_zozorDisplacement.X</code> et <code>_zozorDisplacement.Y</code>.<br/> Et une dernière chose ! N'oubliez pas que la position de l'image se fait par rapport à son bord supérieur gauche, si vous oubliez, vous pourriez voir disparaitre Zozor pendant un instant (ça serait dommage :p ).</p><p id="r-771976" data-claire-element-id="771976">Bon courage !</p><p id="r-771977" data-claire-element-id="771977">…</p><p id="r-771978" data-claire-element-id="771978">…</p><p id="r-771979" data-claire-element-id="771979">…</p><p id="r-771980" data-claire-element-id="771980">Voici la correction commentée. J'espère que vous avez cherché par vous-mêmes avant de regarder ça. :-°</p><p id="r-771981" data-claire-element-id="771981"></p><pre id="r-771982" data-claire-element-id="771982"><code data-claire-semantic="csharp">public class FirstGame : Microsoft.Xna.Framework.Game
{
    private GraphicsDeviceManager graphics;
    private SpriteBatch spriteBatch;

    // La texture qui contiendra l'image de Zozor
    private Texture2D _zozor;

    // La position de Zozor
    private Vector2 _zozorPosition;
    // Le déplacement de Zozor
    private Vector2 _zozorDisplacement;

    // Les attributs pour la largeur et la hauteur de l'écran
    private int _screenWidth;
    private int _screenHeight;

    public FirstGame()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = &quot;Content&quot;;
    }

    protected override void Initialize()
    {
        // On initialise la position et le deplacement de Zozor
        _zozorPosition = Vector2.Zero;
        _zozorDisplacement = Vector2.One;

        // On initialise les dimensions de la fenêtre
        _screenWidth = Window.ClientBounds.Width;
        _screenHeight = Window.ClientBounds.Height;

        base.Initialize();
    }

    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);

        // On charge l'image de Zozor en mémoire
        _zozor = Content.Load&lt;Texture2D&gt;(&quot;zozor6&quot;);
    }

    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    protected override void Update(GameTime gameTime)
    {
        // On déplace zozor en lui ajoutant la variable de déplacement
        _zozorPosition += _zozorDisplacement;

        // Ici on teste si Zozor se déplace vers la gauche, si c'est le cas
        // on vérifie qu'il ne sort pas de l'écran par la gauche.
        // Même chose pour le déplacement vers la droite
        if ((_zozorDisplacement.X &lt; 0 &amp;&amp; _zozorPosition.X &lt;= 0)
             || (_zozorDisplacement.X &gt; 0 &amp;&amp; _zozorPosition.X + _zozor.Width &gt;= _screenWidth))
        {
            // Si on est dans un des deux cas, on inverse le déplacement sur les abscisses
            _zozorDisplacement.X = -_zozorDisplacement.X;
        }

        // On fait la même opération mais pour le haut/bas
        if ((_zozorDisplacement.Y &lt; 0 &amp;&amp; _zozorPosition.Y &lt;= 0)
             || (_zozorDisplacement.Y &gt; 0 &amp;&amp; _zozorPosition.Y + _zozor.Height &gt;= _screenHeight))
        {
            // Si c'est le cas, on inverse le déplacement sur les ordonnées
            _zozorDisplacement.Y = -_zozorDisplacement.Y;
        }

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);

        // On dessine Zozor à la position préalablement calculée
        spriteBatch.Begin();
        spriteBatch.Draw(_zozor, _zozorPosition, Color.White);
        spriteBatch.End();

        base.Draw(gameTime);
    }
}</code></pre><h5 id="r-le-probleme-du-framerate" data-claire-element-id="771994">Le problème du framerate</h5><p id="r-771984" data-claire-element-id="771984">Ça y est notre Zozor bouge tout seul et reste dans la fenêtre. :) Mais malheureusement je vais vous parler d'un problème qu'il faut prendre en compte lorsque l'on fait des jeux et qui dans notre cas n'est pas géré.</p><div id="r-771986" data-claire-element-id="771986" data-claire-semantic="question"><p id="r-771985" data-claire-element-id="771985">Qu'est-ce que tu vas encore nous inventer ?</p></div><p id="r-771987" data-claire-element-id="771987">Je vous ai déjà parlé du framerate : c'est le nombre de tours de boucle que fait notre jeu en une seconde, donc le nombre de fois où il passe dans la méthode <code>Update()</code> et la méthode <code>Draw()</code> en une seconde.<br/> C'est donc là que ça coince, tel que nous avons fait le déplacement de Zozor, il se déplace à chaque passage dans <code>Update</code> donc si nous avons 300 fps dans le jeu, il se déplacera 3 fois plus vite que si nous sommes à 100 fps.</p><div id="r-771989" data-claire-element-id="771989" data-claire-semantic="question"><p id="r-771988" data-claire-element-id="771988">Mais tu nous avais pas dit que c'était bloqué à 60 fps ?</p></div><p id="r-771990" data-claire-element-id="771990">Si, ça l'est par défaut et c'est pour cela que quelle que soit la machine sur laquelle vous lancez votre jeu, il se déplacera de façon identique. Mais il n'est pas rare dans les jeux de laisser la possibilité au joueur de le débloquer ; ou il se peut, si vous commencez à mettre beaucoup beaucoup de contenu, que les 60 de fps ne soient plus maintenables pour des ordinateurs peu puissants.</p><p id="r-771991" data-claire-element-id="771991">Bref, pour vous convaincre qu'il est nécessaire de gérer ce petit problème, ajoutez ces deux lignes de code dans le constructeur de votre classe principale. Ceci a pour effet de débloquer les fps et vous verrez en fonction de la puissance de votre ordinateur un Zozor aller à la vitesse de l'éclair. ^^</p><pre id="r-771992" data-claire-element-id="771992"><code data-claire-semantic="csharp">IsFixedTimeStep = false;
graphics.SynchronizeWithVerticalRetrace = false;</code></pre><p id="r-771993" data-claire-element-id="771993">Encore mieux ! Si vous mettez une fenêtre en avant plan par rapport au jeu, XNA diminuant le nombre de fps pour une question d'économie du processeur, Zozor ralentira : pas très orthodoxe tout ça. ^^</p><h5 id="r-la-solution-au-probleme" data-claire-element-id="772018">La solution au problème</h5><p id="r-771995" data-claire-element-id="771995">Pour résoudre ce petit problème, XNA nous fournit un objet qui va nous permettre de savoir combien de temps s'est écoulé depuis le dernier passage. Vous l'avez peut-être déjà remarqué, il s'agit de l'argument des méthodes <code>Update()</code> et <code>Draw()</code> : le <code>GameTime</code>.</p><p id="r-771996" data-claire-element-id="771996">Cet objet contient des informations très intéressantes sur la temporisation de notre jeu, on va donc pouvoir savoir depuis combien de temps il tourne ou le temps écoulé depuis le dernier appel. C'est ce dernier qui va nous intéresser puisque l'on va pouvoir déplacer Zozor en fonction du temps écoulé depuis son dernier déplacement : plus cela fait longtemps qu'on la déplacé, plus on va le déplacer.</p><p id="r-771997" data-claire-element-id="771997">On va devoir faire quelques modifications au code vu précédemment. La première chose va être de normaliser notre vecteur de déplacement.</p><div id="r-771999" data-claire-element-id="771999" data-claire-semantic="question"><p id="r-771998" data-claire-element-id="771998">Il a un défaut notre vecteur ?</p></div><p id="r-772000" data-claire-element-id="772000">Rien à voir ^^ , la normalisation d'un vecteur va nous permettre d'avoir un vecteur unité c'est à dire qui a une longueur de 1 mais qui a toujours la même direction que notre vecteur d'origine. Celui-ci ne nous indiquera donc plus la vitesse de déplacement de Zozor mais uniquement sa direction de déplacement.</p><p id="r-772001" data-claire-element-id="772001">Voici la modification de l'initialisation du vecteur de déplacement, qui devient le vecteur de direction d'où le changement de nom (n'oubliez pas de le changer aussi à la déclaration).</p><pre id="r-772002" data-claire-element-id="772002"><code data-claire-semantic="csharp">_zozorDirection = Vector2.Normalize(Vector2.One);</code></pre><p id="r-772003" data-claire-element-id="772003">Ensuite, on va appliquer la prise en compte du temps passé entre deux frames dans notre méthode <code>Update()</code>.</p><pre id="r-772004" data-claire-element-id="772004"><code data-claire-semantic="csharp">_zozorPosition += _zozorDirection * (float)gameTime.ElapsedGameTime.TotalMilliseconds;</code></pre><p id="r-772005" data-claire-element-id="772005">De cette façon plus on aura passé de temps entre deux passages dans <code>Update()</code>, plus <code>TotalMilliseconds</code> sera grand et donc plus on déplacera Zozor, le tout de façon proportionnelle !</p><div id="r-772007" data-claire-element-id="772007" data-claire-semantic="question"><p id="r-772006" data-claire-element-id="772006">Et comment je fais moi si je veux modifier la vitesse de Zozor ?</p></div><p id="r-772008" data-claire-element-id="772008">Très bonne question. On pourrait modifier notre vecteur de déplacement et lui enlever sa normalisation cependant ce n'est pas la bonne solution.<br/> En effet, imaginez que vous vouliez qu'il se déplace deux fois plus vite en Y que en X, il serait très dur voire impossible d'obtenir exactement la même vitesse puisque le vecteur (1,1) n'a pas la même longueur (dite norme dans le langage mathématique) que le vecteur (1,2) et donc pas la même vitesse.</p><p id="r-772009" data-claire-element-id="772009">C'est donc ça l'avantage du vecteur normalisé, on sait que sa taille fait 1 et qu'il a la direction désirée, il ne nous reste donc plus qu'à créer une variable de type <code>float</code> qui représentera la vitesse.</p><p id="r-772010" data-claire-element-id="772010">On créé donc l'attribut pour la vitesse.</p><pre id="r-772011" data-claire-element-id="772011"><code data-claire-semantic="csharp">// Variable de la vitesse de déplacement de Zozor
private float _zozorSpeed = 1f;</code></pre><p id="r-772012" data-claire-element-id="772012">Et on l'applique dans le déplacement de Zozor.</p><pre id="r-772013" data-claire-element-id="772013"><code data-claire-semantic="csharp">_zozorPosition += _zozorDirection * _zozorSpeed * (float)gameTime.ElapsedGameTime.TotalMilliseconds;</code></pre><p id="r-772014" data-claire-element-id="772014">Petite chose à noter qui peut avoir son importance, dans ce calcul, la vitesse de déplacement de Zozor (<code>_zozorSpeed</code>) représente exactement le nombre de pixels que parcourt Zozor en 1 milliseconde.</p><p id="r-772015" data-claire-element-id="772015">Vous pouvez maintenant essayer de modifier cette valeur et d'enlever puis remettre les 2 lignes de code pour bloquer / débloquer les fps et voir que votre Zozor bouge à la même vitesse en toutes circonstances ! :D</p><p id="r-772016" data-claire-element-id="772016">L'ajout d'images à vos jeux n'a plus de secret pour vous !<br/> Ceci n'est bien sur que le commencement mais cela vous permet, je l'espère, de comprendre de mieux en mieux l'architecture et la philosophie du framework.</p><p id="r-772017" data-claire-element-id="772017">Ce n'est pas le moment de se reposer ! Le prochain chapitre parle des interactions avec le joueur.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
<span class="arrow"></span>
<span class="next">Affichage de l&#039;image</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">
<span class="next">Afficher du texte</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Afficherdutexte"></a><h2>Afficher du texte</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
<span class="arrow"></span>
<span class="next">Déplacer l&#039;image sur l&#039;écran</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
<span class="next">Le SpriteFont</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-772021" data-claire-element-id="772021">Nous venons de voir comment afficher des images dans nos jeux mais comment dessiner du simple texte ?<br/> En effet pour afficher le score du jeu, les vies restantes ou encore le nombre de munitions pour un FPS, il est fort probable d'avoir recours à l'écriture de texte sur l'écran.</p><p id="r-772022" data-claire-element-id="772022">C'est donc ce que ce chapitre va nous permettre de découvrir. ;)</p>
</div><a name="LeSpriteFont"></a><h2>Le SpriteFont</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">
<span class="arrow"></span>
<span class="next">Afficher du texte</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
<span class="next">Chargement d&#039;un SpriteFont</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-spritefont" data-claire-element-id="772026">Le SpriteFont</h4><p id="r-772023" data-claire-element-id="772023">Ça peut paraitre bête comme ça mais heureusement XNA propose une façon simple d'écrire du texte où l'on souhaite dans notre jeu car sinon nous serions obligés de créer des images représentant les lettres et les coller les unes à la suite des autres pour créer le mot souhaité : c'est juste impensable.</p><p id="r-772024" data-claire-element-id="772024">Afin de pouvoir écrire des chaines de caractères sur la fenêtre de jeu, XNA nous fournit la classe <code>SpriteFont</code>. Un objet de ce type va représenter dans notre code le style qui sera utilisé pour écrire. Celui-ci définit aussi bien la police à utiliser (Arial, Verdana, ...) que la taille en pixels que doivent avoir les lettres ou encore l'espacement entre deux caractères.</p><p id="r-772025" data-claire-element-id="772025">C'est donc cet objet qui va indiquer comment écrire sur notre fenêtre. Alors concrètement comment est-ce que ça se présente ?<br/> Eh bien c'est tout bêtement un fichier XML qui va définir les propriétés de notre <code>SpriteFont</code> que l'on va ensuite donner à &quot;manger&quot; au <code>Content Pipeline</code> (eh oui encore lui, quand je vous dis qu'il peut tout charger ^^ ).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">
<span class="arrow"></span>
<span class="next">Afficher du texte</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
<span class="next">Chargement d&#039;un SpriteFont</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Chargementd039unSpriteFont"></a><h2>Chargement d&#039;un SpriteFont</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
<span class="arrow"></span>
<span class="next">Le SpriteFont</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
<span class="next">Utilisation du SpriteFont</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-chargement-d-un-spritefont" data-claire-element-id="772048">Chargement d'un SpriteFont</h4><p id="r-772027" data-claire-element-id="772027">Pour créer un objet de type <em>SpriteFont</em>, c'est très simple, faites un clic droit sur votre projet de <strong>contenu</strong> et faites <em>Add</em> &gt; <em>New Item</em>.</p><p id="r-772028" data-claire-element-id="772029"><a href="medias/uploads.siteduzero.com_files_332001_333000_332854.png"><img id="r-772029" data-claire-element-id="772028" src="medias/uploads.siteduzero.com_thb_332001_333000_332854.png" alt="Ajouter un item"/></a></p><p id="r-772030" data-claire-element-id="772030">Dans la fenêtre qui s'ouvre, choisissez &quot;Sprite Font&quot; et donnez un nom à votre police puis faites <em>Add</em>.</p><p id="r-772031" data-claire-element-id="772032"><a href="medias/uploads.siteduzero.com_files_332001_333000_332855.jpg"><img id="r-772032" data-claire-element-id="772031" src="medias/uploads.siteduzero.com_thb_332001_333000_332855.jpg" alt="Ajout d'un SpriteFont"/></a></p><p id="r-772033" data-claire-element-id="772033">Vous devriez alors voir le nouveau fichier avec l'extension &quot;.spritefont&quot; apparaitre dans votre projet de contenu. Ouvrez ce fichier (qui je vous le rappelle n'est en réalité qu'un fichier XML) dans lequel vous allez pouvoir modifier quelques propriétés en touchant au contenu des balises qui suivent.</p><ul id="r-772044" data-claire-element-id="772044"><li id="r-772035" data-claire-element-id="772035"><p id="r-772034" data-claire-element-id="772034"><strong>FontName</strong> : Le nom de la police que vous souhaitez utiliser, celle-ci doit être installée sur l'ordinateur qui compile le projet mais pas forcement sur l'ordinateur qui lance le jeu (puisqu'au final votre police sera un .xnb). Attention tout de même à tout ce qui est droit d'auteur si vous projetez de publier vos jeux.</p></li><li id="r-772037" data-claire-element-id="772037"><p id="r-772036" data-claire-element-id="772036"><strong>Size</strong> : Je pense que cette propriété est claire, il s'agit de la taille à laquelle afficher les caractères.</p></li><li id="r-772039" data-claire-element-id="772039"><p id="r-772038" data-claire-element-id="772038"><strong>Style</strong> : Permet d'indiquer si vous souhaitez votre texte en gras (Bold), italique (Italic) ou normal (Regular). Vous pouvez mettre plusieurs valeurs séparées par une virgule (Bold,Italic).</p></li><li id="r-772041" data-claire-element-id="772041"><p id="r-772040" data-claire-element-id="772040"><strong>Spacing</strong> : Détermine l'espace entre deux caractères. C'est un nombre à virgule, pour un espacement standard, laissez 0.</p></li><li id="r-772043" data-claire-element-id="772043"><p id="r-772042" data-claire-element-id="772042"><strong>CharacterRegion</strong> : Permet à l'aide de ses balises <strong>&lt;start&gt;</strong> et <strong>&lt;end&gt;</strong> de déterminer quelle plage de caractères doit être charger pour ce <em>SpriteFont</em>. Par défaut la balise <strong>&lt;start&gt;</strong> est à &quot;<strong>&amp;#32;</strong>&quot; et la balise <strong>&lt;end&gt;</strong> à &quot;<strong>&amp;#126;</strong>&quot; représentant sur <a href="http://www.table-ascii.com/">la table ASCII</a> les caractère entre l'espace et la tilde ('~'). Cette plage ne comprend pas les accents, de ce fait pour pouvoir les utiliser il faut modifier la valeur de <strong>&lt;end&gt;</strong> et lui donner par exemple la valeur &quot;<strong>&amp;#256;</strong>&quot; qui englobe tous les caractères ASCII.</p></li></ul><p id="r-772045" data-claire-element-id="772045">Voici ce que me donne le fichier MaPolice.spritefont pour créer un <em>SpriteFont</em> qui écrira en utilisant la police Impact avec une taille de 22 pixels et en gras.</p><pre id="r-772046" data-claire-element-id="772046"><code data-claire-semantic="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;!--
This file contains an xml description of a font, and will be read by the XNA
Framework Content Pipeline. Follow the comments to customize the appearance
of the font in your game, and to change the characters which are available to draw
with.
--&gt;
&lt;XnaContent xmlns:Graphics=&quot;Microsoft.Xna.Framework.Content.Pipeline.Graphics&quot;&gt;
  &lt;Asset Type=&quot;Graphics:FontDescription&quot;&gt;

    &lt;!--
    Modify this string to change the font that will be imported.
    --&gt;
    &lt;FontName&gt;Impact&lt;/FontName&gt;

    &lt;!--
    Size is a float value, measured in points. Modify this value to change
    the size of the font.
    --&gt;
    &lt;Size&gt;22&lt;/Size&gt;

    &lt;!--
    Spacing is a float value, measured in pixels. Modify this value to change
    the amount of spacing in between characters.
    --&gt;
    &lt;Spacing&gt;0&lt;/Spacing&gt;

    &lt;!--
    UseKerning controls the layout of the font. If this value is true, kerning information
    will be used when placing characters.
    --&gt;
    &lt;UseKerning&gt;true&lt;/UseKerning&gt;

    &lt;!--
    Style controls the style of the font. Valid entries are &quot;Regular&quot;, &quot;Bold&quot;, &quot;Italic&quot;,
    and &quot;Bold, Italic&quot;, and are case sensitive.
    --&gt;
    &lt;Style&gt;Bold&lt;/Style&gt;

    &lt;!--
    If you uncomment this line, the default character will be substituted if you draw
    or measure text that contains characters which were not included in the font.
    --&gt;
    &lt;!-- &lt;DefaultCharacter&gt;*&lt;/DefaultCharacter&gt; --&gt;

    &lt;!--
    CharacterRegions control what letters are available in the font. Every
    character from Start to End will be built and made available for drawing. The
    default range is from 32, (ASCII space), to 126, ('~'), covering the basic Latin
    character set. The characters are ordered according to the Unicode standard.
    See the documentation for more information.
    --&gt;
    &lt;CharacterRegions&gt;
      &lt;CharacterRegion&gt;
        &lt;Start&gt;&amp;#32;&lt;/Start&gt;
        &lt;End&gt;&amp;#256;&lt;/End&gt;
      &lt;/CharacterRegion&gt;
    &lt;/CharacterRegions&gt;
  &lt;/Asset&gt;
&lt;/XnaContent&gt;</code></pre><p id="r-772047" data-claire-element-id="772047">Voilà, c'est tout pour la création d'un <em>SpriteFont</em>, maintenant voyons comment on l'utilise en code.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
<span class="arrow"></span>
<span class="next">Le SpriteFont</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
<span class="next">Utilisation du SpriteFont</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UtilisationduSpriteFont"></a><h2>Utilisation du SpriteFont</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
<span class="arrow"></span>
<span class="next">Chargement d&#039;un SpriteFont</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">
<span class="next">Interaction avec le joueur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utilisation-du-spritefont" data-claire-element-id="772061">Utilisation du SpriteFont</h4><p id="r-772049" data-claire-element-id="772049">Étant donné que le <em>SpriteFont</em> est géré par le Content Pipeline, nous allons utiliser la méthode <em>Load()</em> pour charger la police.</p><p id="r-772050" data-claire-element-id="772050">Commençons par créer un attribut qui la contiendra :</p><pre id="r-772051" data-claire-element-id="772051"><code data-claire-semantic="csharp">private SpriteFont _font;</code></pre><p id="r-772052" data-claire-element-id="772052">Le chargement proprement dit se fait ensuite dans la méthode <em>LoadContent()</em> comme d'habitude :</p><pre id="r-772053" data-claire-element-id="772053"><code data-claire-semantic="csharp">_font = Content.Load&lt;SpriteFont&gt;(&quot;MaPolice&quot;);</code></pre><p id="r-772054" data-claire-element-id="772054">A ce stade, la police est chargée en mémoire et vous pouvez l'utiliser pour dessiner un texte. Cette opération se fait de façon identique à n'importe quel sprite. Il faut donc le faire après un <em>spriteBatch.Begin()</em> et avant un <em>spriteBatch.End()</em>. Voici comment on écrit un texte dans la fenêtre de jeu.</p><pre id="r-772055" data-claire-element-id="772055"><code data-claire-semantic="csharp">spriteBatch.Begin();
spriteBatch.DrawString(_font, &quot;Salut les zeros !&quot;, new Vector2(10, 20), Color.White);
spriteBatch.End();</code></pre><p id="r-772056" data-claire-element-id="772056">Les arguments de la méthode DrawString sont, dans l'ordre, la police à utiliser (notre objet <em>SpriteFont</em> chargé depuis le Content Pipeline), le texte à écrire, la position où placer le texte (toujours par rapport au coin supérieur gauche) et enfin la couleur dans laquelle écrire le texte.</p><p id="r-772057" data-claire-element-id="772057">Et c'est tout, votre texte sera écrit où vous le souhaitez et ceci très facilement. :D</p><p id="r-772058" data-claire-element-id="772058">Dernière petite chose qui pourra vous être utile : la méthode <em>MeasureString(&quot;une String&quot;)</em> du SpriteFont chargé depuis le Content Pipeline retourne un <em>Vector2</em> indiquant la taille qu'aurait ce texte à l'écran (la propriété X étant la largeur et Y la hauteur).</p><p id="r-772059" data-claire-element-id="772059">Par exemple, ici en faisant <code data-claire-semantic="csharp">Vector2 textSize = _font.MeasureString(&quot;Salut les zéros !&quot;)</code> j'obtiens le vecteur 2D (203, 40), ce qui me permet de calculer à quelle position je dois dessiner ce texte pour qu'il apparaisse centré ou aligné à droite. :)</p><p id="r-772060" data-claire-element-id="772060">Ce chapitre était plutôt court mais pas moins utile ! Vous pouvez maintenant très rapidement et facilement afficher du texte sur votre écran de jeu pour donner des informations au joueur.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
<span class="arrow"></span>
<span class="next">Chargement d&#039;un SpriteFont</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">
<span class="next">Interaction avec le joueur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Interactionaveclejoueur"></a><h2>Interaction avec le joueur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
<span class="arrow"></span>
<span class="next">Utilisation du SpriteFont</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
<span class="next">Quelques généralités</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-772063" data-claire-element-id="772063">Je pense que vous serez d'accord avec moi que faire des actions est primordial dans tout jeu.<br/> En effet, imaginez qu'un jeu vidéo soit un défilement d'actions sur lesquelles nous n'avons aucun contrôle... plutôt ennuyeux comme jeu non ? ^^</p><p id="r-772064" data-claire-element-id="772064">C'est pour cela que nous allons voir dans ce chapitre comment récupérer les actions du joueur aussi bien sur le clavier que la souris ou la manette de Xbox.</p><p id="r-772065" data-claire-element-id="772065">Je ne traiterai pas ici les contrôles Windows Phone car je pense qu'ils meritent un chapitre entier puisqu'il y a toute la reconnaissance de geste à voir.</p><p id="r-772066" data-claire-element-id="772066">C'est parti pour mettre un peu d'interactivité dans nos jeux !</p>
</div><a name="Quelquesgnralits"></a><h2>Quelques généralités</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">
<span class="arrow"></span>
<span class="next">Interaction avec le joueur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
<span class="next">Clavier</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-generalites-4" data-claire-element-id="772075">Quelques généralités</h4><p id="r-772067" data-claire-element-id="772067">Avant de voir spécifiquement comment savoir si telle ou telle touche du clavier est enfoncée ou encore si la souris est au dessus d'un élément, nous allons voir comment se passe la récupération d'entrées utilisateur de façon générale. :-°</p><p id="r-772068" data-claire-element-id="772068">Dans un logiciel &quot;classique&quot;, comme je vous l'ai présenté dans un chapitre précédent, tout repose sur un système d'événements donc dès lors que vous appuyez sur une touche, une fonction (au minimum) associée à l'évènement est appelée en lui fournissant des informations sur l'évènement. Ces informations contiennent entre autre le type d'évènement, la touche enfoncée dans le cas d'un appui sur touche ou la position de la souris dans le cas d'un clic, etc...</p><p id="r-772069" data-claire-element-id="772069">Dans l'architecture d'un jeu, on ne peut évidemment pas procéder de cette manière puisqu'elle n'est pas basée sur le système d'évènements, c'est donc un tout autre moyen qui va être utilisé. On va en fait récupérer l'état du contrôleur à un instant donné et &quot;regarder&quot; si telle ou telle action est faite. :D <br/> Concrètement, prenons le cas du clavier, c'est comme si l'on prenait une photographie de notre clavier à un certain moment et que l'on regardait si le joueur a la touche Z enfoncée ou au contraire si elle est relâchée, etc...</p><p id="r-772070" data-claire-element-id="772070">Ceci n'est que théorique mais ne vous inquiétez pas nous allons tout de suite voir ceci dans la pratique avec le cas du clavier, de la souris. Je ne vais pas vous présenter ici les contrôles pour XBox360 ou Windows Phone car je préfère me focaliser sur les jeux PC pour l'instant qui sont plus faciles à tester. ;)</p><p id="r-772071" data-claire-element-id="772071">Dernière chose avant d'y aller, j'utiliserai comme base de code ce que l'on a fait jusqu'ici, c'est à dire l'écran bleu avec Zozor dessus. Par contre j'ai enlevé ce que l'on avait fait pour le faire bouger et rebondir sur les bords. Après tout, on veut plus qu'il bouge tout seul, on veut le contrôler ! :diable:</p><p id="r-772072" data-claire-element-id="772072">Pour ceux qui le souhaitent voici le code sur lequel je pars dans ce chapitre :</p><p id="r-772073" data-claire-element-id="772073"></p><pre id="r-772074" data-claire-element-id="772074"><code data-claire-semantic="csharp">using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace CreationProjetXNA
{
    /// &lt;summary&gt;
    /// This is the main type for your game
    /// &lt;/summary&gt;
    public class FirstGame : Microsoft.Xna.Framework.Game
    {
        private GraphicsDeviceManager graphics;
        private SpriteBatch spriteBatch;

        // La texture qui contiendra l'image de Zozor
        private Texture2D _zozor;

        // Les dimensions de la fenêtre
        private int _screenWidth;
        private int _screenHeight;

        // La position de Zozor
        private Vector2 _zozorPosition;

        public FirstGame()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = &quot;Content&quot;;
        }

        /// &lt;summary&gt;
        /// Allows the game to perform any initialization it needs to before starting to run.
        /// This is where it can query for any required services and load any non-graphic
        /// related content.  Calling base.Initialize will enumerate through any components
        /// and initialize them as well.
        /// &lt;/summary&gt;
        protected override void Initialize()
        {
            // On récupère les dimensions de la fenêtre
            _screenHeight = Window.ClientBounds.Height;
            _screenWidth = Window.ClientBounds.Width;
            
            base.Initialize();
        }

        /// &lt;summary&gt;
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// &lt;/summary&gt;
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            // On charge l'image de Zozor en mémoire
            _zozor = Content.Load&lt;Texture2D&gt;(&quot;zozor6&quot;);

            // On initialise la position de Zozor
            // Normalement cette action doit se faire dans le initialize mais on a besoin que la Texture2D zozor soit instanciée
            _zozorPosition = new Vector2(_screenWidth / 2 - _zozor.Width / 2, _screenHeight / 2 - _zozor.Height / 2);
        }

        /// &lt;summary&gt;
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// &lt;/summary&gt;
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// &lt;summary&gt;
        /// Allows the game to run logic such as updating the world,
        /// checking for collisions, gathering input, and playing audio.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;gameTime&quot;&gt;Provides a snapshot of timing values.&lt;/param&gt;
        protected override void Update(GameTime gameTime)
        {
           
            base.Update(gameTime);
        }

        /// &lt;summary&gt;
        /// This is called when the game should draw itself.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;gameTime&quot;&gt;Provides a snapshot of timing values.&lt;/param&gt;
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            // On dessine Zozor à la position préalablement calculée.
            spriteBatch.Begin();
            spriteBatch.Draw(_zozor, _zozorPosition, Color.White);
            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
}</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">
<span class="arrow"></span>
<span class="next">Interaction avec le joueur</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
<span class="next">Clavier</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Clavier"></a><h2>Clavier</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
<span class="arrow"></span>
<span class="next">Quelques généralités</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
<span class="next">Souris</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-clavier-2" data-claire-element-id="772110">Clavier</h4><h5 id="r-utilisation-basique-du-clavier" data-claire-element-id="772093">Utilisation basique du clavier</h5><p id="r-772076" data-claire-element-id="772076">On va commencer par récupérer les informations du clavier. Pour cela on va récupérer l'état du clavier, c'est à dire sa photographie comme je vous ai expliqué juste avant.<br/> On va donc ajouter un attribut à notre classe qui contiendra ce fameux état.</p><pre id="r-772077" data-claire-element-id="772077"><code data-claire-semantic="csharp">private KeyboardState _keyboardState;</code></pre><p id="r-772078" data-claire-element-id="772078">Maintenant, on veut pouvoir analyser les touches enfoncées à chaque boucle, on va donc pour ceci récupérer l'état du clavier dans la méthode <em>Update()</em> :</p><pre id="r-772079" data-claire-element-id="772079"><code data-claire-semantic="csharp">// On prend la &quot;capture&quot; du clavier dans son état actuel pour pouvoir tester les touches enfoncées
_keyboardState = Keyboard.GetState();</code></pre><p id="r-772080" data-claire-element-id="772080">Il ne nous reste donc plus qu'à regarder ce que l'état du clavier a à nous montrer, l'analyser et faire les actions appropriées ! :)</p><pre id="r-772081" data-claire-element-id="772081"><code data-claire-semantic="csharp">// On teste si les touches directionnelles sont enfoncées puis on modifie la position de Zozor en fonction de ça
if (_keyboardState.IsKeyDown(Keys.Up))
{
    _zozorPosition.Y--;
}
else if (_keyboardState.IsKeyDown(Keys.Down))
{
    _zozorPosition.Y++;
}

if (_keyboardState.IsKeyDown(Keys.Right))
{
    _zozorPosition.X++;
}
else if (_keyboardState.IsKeyDown(Keys.Left))
{
    _zozorPosition.X--;
}</code></pre><p id="r-772082" data-claire-element-id="772082">Lancez le jeu et... Zozor bouge quand on appuie les touches directionnelles ! :D</p><p id="r-772083" data-claire-element-id="772083">A noter que la méthode <em>IsKeyDown</em> prend en paramètre une <em>Keys</em> qui est une énumération du Framework. L'auto-complétion vous montre toutes les possibilités de touches que vous pouvez tester, et il y en a un bon nombre. ^^</p><p id="r-772084" data-claire-element-id="772084">Voici la liste des actions que vous pouvez faire avec le <em>KeyboardState</em>.</p><ul id="r-772091" data-claire-element-id="772091"><li id="r-772086" data-claire-element-id="772086"><p id="r-772085" data-claire-element-id="772085"><strong>IsKeyDown(Keys)</strong> : permet de savoir si la touche passée en paramètre est enfoncée.</p></li><li id="r-772088" data-claire-element-id="772088"><p id="r-772087" data-claire-element-id="772087"><strong>IsKeyUp(Keys)</strong> : permet de savoir si la touche passée en paramètre est relachée.</p></li><li id="r-772090" data-claire-element-id="772090"><p id="r-772089" data-claire-element-id="772089"><strong>GetPressedKeys()</strong> : permet de récupérer un tableau de <em>Keys</em> qui sont enfoncées.</p></li></ul><p id="r-772092" data-claire-element-id="772092">Il faut bien garder en mémoire que l'opération <em>Keyboard.GetState()</em> est une opération plutôt lourde au niveau du temps nécessaire pour être effectuée. On essaiera donc dans la mesure du possible de ne faire l'acquisition de l'état du clavier qu'une seule fois par tour de boucle et de passer l'information à qui en a besoin.</p><h5 id="r-savoir-si-une-touche-vient-d-etre-enfoncee" data-claire-element-id="772109">Savoir si une touche vient d'être enfoncée</h5><p id="r-772094" data-claire-element-id="772094">Dans l'exercice précèdent, dès lors que nous appuyons et maintenions appuyé sur une touche directionnelle, Zozor bouge. Dans notre cas c'est le genre d'action dont nous avons besoin mais dans un menu par exemple, il est plus qu'indispensable que la sélection ne bouge que d'un cran. Je vous rappelle que la boucle de jeu faisant 60 tours à la seconde par défaut, même si vous relâchez votre touche juste après l'avoir enfoncé, pour le jeu l'action sera fait probablement au moins 15 fois.</p><p id="r-772095" data-claire-element-id="772095">Pour pallier ceci, nous allons utiliser non plus un mais deux <em>KeyboardState</em>.</p><div id="r-772097" data-claire-element-id="772097" data-claire-semantic="question"><p id="r-772096" data-claire-element-id="772096">Euuuh...Tu viens pas de nous dire que c'était une opération lourde et qu'il fallait la faire le moins possible, tout ça tout ça ?</p></div><p id="r-772098" data-claire-element-id="772098">Effectivement, et ce que j'ai dit reste d'autant plus vrai avec ce que je vais vous expliquer, en effet le fait d'avoir besoin de 2 états multiplierait par deux le nombre de fois où on le récupère pendant un tour de boucle si on ne passait pas le/les états à qui en a besoin.</p><p id="r-772099" data-claire-element-id="772099">Bien décortiquons un peu ce que l'on souhaite faire : vérifier si une touche <strong>vient</strong> d'être enfoncée.<br/> Comment va-t-on pouvoir déterminer ceci ? Eh bien c'est très simple : en vérifiant qu'elle est actuellement enfoncée mais que juste avant elle ne l'était pas ! ^^</p><p id="r-772100" data-claire-element-id="772100">C'est pour cela que nous allons utiliser 2 états du clavier pour arriver à notre fin : l'état actuel et l'état précédent. Ainsi, nous allons être en mesure de vérifier que juste avant la touche n'était pas enfoncée.</p><p id="r-772101" data-claire-element-id="772101">Commençons par créer notre deuxième attribut qui contiendra l'état antérieur.</p><pre id="r-772102" data-claire-element-id="772102"><code data-claire-semantic="csharp">private KeyboardState _oldKeyboardState;</code></pre><p id="r-772103" data-claire-element-id="772103">Puis mettons en place le processus dans la méthode <em>Update</em> avec les deux états.</p><pre id="r-772104" data-claire-element-id="772104"><code data-claire-semantic="csharp">protected override void Update(GameTime gameTime)
{
    // On prend la &quot;capture&quot; du clavier dans son état actuel pour pouvoir tester les touches enfoncées
    _keyboardState = Keyboard.GetState();

    
    // Effectuer les actions ici


    // On met l'état du clavier actuel dans l'ancien puisqu'on a fini toutes les opérations actuelles.
    _oldKeyboardState = _keyboardState;

    base.Update(gameTime);
}</code></pre><p id="r-772105" data-claire-element-id="772105">Rien de compliqué : on récupère l'état actuel du clavier juste avant de traiter les informations et faire les actions associées puis une fois que l'on a tout terminé, on stocke l'état du clavier dans la variable prévue pour l'ancien. De ce fait, lorsque l'on arrivera au début de l'<em>Update</em> dans l'occurrence de boucle suivante, la variable contiendra l'ancien état comme souhaité.</p><p id="r-772106" data-claire-element-id="772106">Et pour finir voici le code pour déplacer Zozor mais seulement d'un pixel à la fois. ^^</p><pre id="r-772107" data-claire-element-id="772107"><code data-claire-semantic="csharp">if (_keyboardState.IsKeyDown(Keys.Up) &amp;&amp; _oldKeyboardState.IsKeyUp(Keys.Up))
{
    _zozorPosition.Y--;
}
else if (_keyboardState.IsKeyDown(Keys.Down) &amp;&amp; _oldKeyboardState.IsKeyUp(Keys.Down))
{
    _zozorPosition.Y++;
}

if (_keyboardState.IsKeyDown(Keys.Right) &amp;&amp; _oldKeyboardState.IsKeyUp(Keys.Right))
{
    _zozorPosition.X++;
}
else if (_keyboardState.IsKeyDown(Keys.Left) &amp;&amp; _oldKeyboardState.IsKeyUp(Keys.Left))
{
    _zozorPosition.X--;
}</code></pre><p id="r-772108" data-claire-element-id="772108">Je vous l'accorde dans notre cas c'est totalement inutile et surtout pas du tout pratique mais ça vous montre comment il faut faire pour ne pas que l'appui sur une touche entraine beaucoup d'actions d'un coup. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
<span class="arrow"></span>
<span class="next">Quelques généralités</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
<span class="next">Souris</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Souris"></a><h2>Souris</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
<span class="arrow"></span>
<span class="next">Clavier</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">
<span class="next">Création d&#039;une classe Sprite</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-souris-4" data-claire-element-id="772135">Souris</h4><p id="r-772111" data-claire-element-id="772111">Je vais aller assez rapidement sur la souris puisque le principe est exactement le même que le clavier : on récupère l'état de la souris, on l'analyse et on fait les actions appropriées.<br/> Je suis reparti du code donné dans la première sous-partie de ce chapitre. ;)</p><p id="r-772112" data-claire-element-id="772112">On déclare donc l'attribut qui représentera l'état de la souris dans notre classe principale.</p><pre id="r-772113" data-claire-element-id="772113"><code data-claire-semantic="csharp">private MouseState _mouseState;</code></pre><p id="r-772114" data-claire-element-id="772114">On récupère ensuite cet état dans la méthode <em>Update()</em>.</p><pre id="r-772115" data-claire-element-id="772115"><code data-claire-semantic="csharp">_mouseState = Mouse.GetState();</code></pre><p id="r-772116" data-claire-element-id="772116">Il ne nous reste alors plus qu'à faire les actions désirées ! Nous allons ici nous servir de Zozor comme de curseur de souris. :p</p><pre id="r-772117" data-claire-element-id="772117"><code data-claire-semantic="csharp">_zozorPosition.X = _mouseState.X;
_zozorPosition.Y = _mouseState.Y;</code></pre><p id="r-772118" data-claire-element-id="772118">Vous pouvez lancer le jeu et normalement si tout s'est bien passé, vous avez un Zozor à la place de la souris !</p><p id="r-772119" data-claire-element-id="772119">Voici ce que vous pouvez récupérer grâce à l'état de la souris.</p><ul id="r-772132" data-claire-element-id="772132"><li id="r-772121" data-claire-element-id="772121"><p id="r-772120" data-claire-element-id="772120"><strong>LeftButton</strong> : indique via l'énumération <em>ButtonState</em> si le bouton gauche de la souris est enfoncé.</p></li><li id="r-772123" data-claire-element-id="772123"><p id="r-772122" data-claire-element-id="772122"><strong>RightButton</strong> : même chose que précédemment mais pour le bouton droit.</p></li><li id="r-772125" data-claire-element-id="772125"><p id="r-772124" data-claire-element-id="772124"><strong>MiddleButton</strong> : même chose que précédemment mais pour le bouton de la molette.</p></li><li id="r-772127" data-claire-element-id="772127"><p id="r-772126" data-claire-element-id="772126"><strong>XBUTTON1 et XBUTTON2</strong> : même chose que précédemment mais pour 2 boutons additionnels</p></li><li id="r-772129" data-claire-element-id="772129"><p id="r-772128" data-claire-element-id="772128"><strong>ScrollWheelValue</strong> : donne la valeur du scroll de la molette depuis le début du jeu. Dans un sens, le scroll augmente la valeur, dans l'autre il la diminue (à vous découvrir quels sont ces sens ;) ).</p></li><li id="r-772131" data-claire-element-id="772131"><p id="r-772130" data-claire-element-id="772130"><strong>X et Y</strong> : donne l'abscisse(X) et l'ordonnée(Y) de la souris par rapport au bord supérieur gauche de la fenêtre de jeu.</p></li></ul><p id="r-772133" data-claire-element-id="772133">Voilà ! Vous savez tout (ou presque) à propos de la souris. ;)</p><p id="r-772134" data-claire-element-id="772134">Vous pouvez maintenant voir ce que fait le joueur sur votre jeu et réagir en fonction.<br/> N'hésitez pas à vous amuser avec le KeyboardState et le MouseState pour bien les comprendre et voir ce qu'ils offrent.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
<span class="arrow"></span>
<span class="next">Clavier</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">
<span class="next">Création d&#039;une classe Sprite</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Crationd039uneclasseSprite"></a><h2>Création d&#039;une classe Sprite</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
<span class="arrow"></span>
<span class="next">Souris</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
<span class="next">Interêt de faire une telle classe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-772137" data-claire-element-id="772137">Il est temps de faire une petite pause au niveau de l'apprentissage de XNA pour parler un peu d'organisation du code.<br/> Même si vous connaissez sur le bout des doigts toutes les fonctionnalités de XNA (bonne chance :p ), si vous n'organisez pas un minimum votre code, non seulement il ne pourra pas être repris par d'autres personnes (embêtant pour des projets d'équipe) mais vous même aurez du mal à faire évoluer votre jeu.</p><p id="r-772138" data-claire-element-id="772138">C'est pourquoi nous allons voir rapidement comment profiter de la puissance de l'orienté objet en créant une classe Sprite qui regroupe globalement tout ce qu'on a pu voir jusqu'à maintenant :)</p>
</div><a name="Intertdefaireunetelleclasse"></a><h2>Interêt de faire une telle classe</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">
<span class="arrow"></span>
<span class="next">Création d&#039;une classe Sprite</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
<span class="next">Les caractéristiques de notre classe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-interet-de-faire-une-telle-classe" data-claire-element-id="772143">Interêt de faire une telle classe</h4><p id="r-772139" data-claire-element-id="772139">Vous allez peut-être me demander pourquoi créer une classe, après tout c'est vrai on s'en est sorti très bien avec notre classe principale <em>Game</em> jusqu'à présent. Oui mais voila ! Dans notre jeu actuellement combien y a-t-il d'image ? Une seule ! Et on se retrouve déjà avec x variables nécessaires au dessin de cette image (position, déplacement, le <em>Texture2D</em>, etc..). Imaginez alors que notre jeu s'agrandisse et qu'il comporte plus de 20 images, on se retrouverait vite avec 100 variables à déclarer dans notre classe principale, ce n'est donc pas envisageable. ^^</p><p id="r-772140" data-claire-element-id="772140">La classe va nous permettre de créer un modèle abstrait qui représentera dans notre code un Sprite, c'est à dire une image et toutes ses fonctionnalités associées (déplacement, dessin, update, etc..) puisque TOUTES les images que nous utiliserons auront besoin de ces fonctionnalités sans quoi elles ne serviraient à rien.</p><p id="r-772141" data-claire-element-id="772141">Ensuite, dans la même optique que les fonctionnalités, toutes les images que nous utiliserons auront des caractéristiques communes que nous verrons en détail tout à l'heure, il est donc bon de faire la classe qui nous permettra de représenter un Sprite dans son ensemble à l'aide d'une seule variable.</p><p id="r-772142" data-claire-element-id="772142">Enfin, dernière chose, le fait de créer une classe nous donne une base pour une extensibilité de nos Sprites. En effet, si une fonctionnalité est manquante dans notre Sprite de base pour la fonction d'une image particulière (par exemple le saut), il sera aisé de l'ajouter en faisant hériter de Sprite et de réécrire une fonctionnalité pour l'étendre. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">
<span class="arrow"></span>
<span class="next">Création d&#039;une classe Sprite</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
<span class="next">Les caractéristiques de notre classe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lescaractristiquesdenotreclasse"></a><h2>Les caractéristiques de notre classe</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
<span class="arrow"></span>
<span class="next">Interêt de faire une telle classe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
<span class="next">Le code de la classe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-caracteristiques-de-notre-classe" data-claire-element-id="772174">Les caractéristiques de notre classe</h4><p id="r-772144" data-claire-element-id="772144">Bien, maintenant que nous avons un peu vu l'utilité de créer une classe, il n'y a plus qu'à se lancer ! :) <br/> Une classe permet de regrouper l'ensemble des caractéristiques et des fonctionnalités d'objets communs (dans notre cas les sprites).</p><p id="r-772145" data-claire-element-id="772145">On va donc faire un exercice de réflexion qui va nous permettre d'établir avant de coder l'ensemble des besoins de notre classe pour ne pas avoir de problème plus tard. Évidemment ceci n'empêchera pas d'étendre les fonctionnalités de notre classe au fur et à mesure que l'on voit des choses. ;)</p><h5 id="r-les-caracteristiques-1" data-claire-element-id="772158">Les caractéristiques</h5><p id="r-772146" data-claire-element-id="772146">On va commencer par énumérer les caractéristiques communes à tous nos Sprites. Je ne peux que vous conseiller de réfléchir d'abord par vous même, c'est un très bon exercice.</p><p id="r-772147" data-claire-element-id="772147">Voici ce que je propose (ce n'est évidemment pas la seule solution, il y en a de nombreuses valables).</p><ul id="r-772156" data-claire-element-id="772156"><li id="r-772149" data-claire-element-id="772149"><p id="r-772148" data-claire-element-id="772148"><strong>Le <em>Texture2D</em></strong> : je ne pense même pas avoir besoin de l'expliquer :p mais il s'agit de notre image chargée en mémoire.</p></li><li id="r-772151" data-claire-element-id="772151"><p id="r-772150" data-claire-element-id="772150"><strong>La position</strong> : il s'agit évidemment de la position du coin supérieur gauche ou sera dessiné notre image.</p></li><li id="r-772153" data-claire-element-id="772153"><p id="r-772152" data-claire-element-id="772152"><strong>La direction</strong> : ici aussi je pense que ce n'est pas compliqué, c'est la direction de déplacement de notre Sprite. Cependant à chaque modification de cet élément, on s'assurera qu'elle est normalisée pour les raisons que j'ai donnée dans un chapitre précédent. ;)</p></li><li id="r-772155" data-claire-element-id="772155"><p id="r-772154" data-claire-element-id="772154"><strong>La vitesse</strong> : définira la vitesse de déplacement du Sprite dans la direction donnée par la caractéristique précédente.</p></li></ul><p id="r-772157" data-claire-element-id="772157">Voici selon moi les caractéristiques indispensables à tout Sprite, on va maintenant voir de quelles fonctionnalités nous allons avoir besoin.</p><h5 id="r-les-fonctionnalites-4" data-claire-element-id="772173">Les fonctionnalités</h5><p id="r-772159" data-claire-element-id="772159">Dans le même principe que les caractéristiques de la classe, les fonctionnalités vont représenter ce que peuvent faire tous les Sprites, il s'agit concrètement des méthodes de la classe.</p><ul id="r-772170" data-claire-element-id="772170"><li id="r-772161" data-claire-element-id="772161"><p id="r-772160" data-claire-element-id="772160"><strong>L'initialisation</strong> : permettra de mettre une valeur par défaut à toutes les caractéristiques vues précédemment.</p></li><li id="r-772163" data-claire-element-id="772163"><p id="r-772162" data-claire-element-id="772162"><strong>Le chargement de contenu</strong> : permettra de charger l'image que l'on souhaite stocker dans notre Sprite.</p></li><li id="r-772165" data-claire-element-id="772165"><p id="r-772164" data-claire-element-id="772164"><strong>La mise à jour</strong> : permettra entre autres de déplacer le sprite en fonction de ses caractéristiques de direction et de vitesse.</p></li><li id="r-772167" data-claire-element-id="772167"><p id="r-772166" data-claire-element-id="772166"><strong>La gestion des entrées du joueur</strong> : permettra de gérer les entrées du joueur. Par défaut cette méthode ne contiendra rien mais elle sera utile pour les classes enfants.</p></li><li id="r-772169" data-claire-element-id="772169"><p id="r-772168" data-claire-element-id="772168"><strong>Le dessin</strong> : permettra de dessiner notre sprite à la position indiquée dans ses caractéristiques.</p></li></ul><p id="r-772171" data-claire-element-id="772171">Vous voyez que ça ressemble étrangement à comment fonctionne XNA. :lol: Ça nous permettra de bien organiser le tout en respectant l'architecture du Framework.</p><p id="r-772172" data-claire-element-id="772172">Il est grand temps de passer à l'écriture de cette classe et de son utilisation !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
<span class="arrow"></span>
<span class="next">Interêt de faire une telle classe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
<span class="next">Le code de la classe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lecodedelaclasse"></a><h2>Le code de la classe</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
<span class="arrow"></span>
<span class="next">Les caractéristiques de notre classe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">
<span class="next">TP : Pong</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-code-de-la-classe" data-claire-element-id="772216">Le code de la classe</h4><h5 id="r-creation-de-la-classe-1" data-claire-element-id="772184">Création de la classe</h5><p id="r-772175" data-claire-element-id="772175">Pour créer la classe, c'est très simple, il suffit de faire un clic droit sur le projet dans Visual Studio puis de faire <em>Add </em>&gt; <em>Class</em>.</p><figure id="r-772177" data-claire-element-id="772178"><img id="r-772176" data-claire-element-id="772176" src="medias/uploads.siteduzero.com_files_329001_330000_329891.png" alt="Création d'une classe"/></figure><p id="r-772179" data-claire-element-id="772179">Une fenêtre apparait, il suffit de choisir un nom à votre classe puis de faire <em>Add</em>.</p><p id="r-772180" data-claire-element-id="772181"><a href="medias/uploads.siteduzero.com_files_329001_330000_329892.jpg"><img id="r-772181" data-claire-element-id="772180" src="medias/uploads.siteduzero.com_thb_329001_330000_329892.jpg" alt="Création de clase 2"/></a></p><p id="r-772182" data-claire-element-id="772182">Vous devriez donc maintenant avoir ce code dans le nouveau fichier créé.</p><pre id="r-772183" data-claire-element-id="772183"><code data-claire-semantic="csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CreationProjetXNA
{
    class Sprite
    {
    }
}</code></pre><h5 id="r-l-implementation-5" data-claire-element-id="772200">L'implémentation</h5><p id="r-772185" data-claire-element-id="772185">La première chose à faire va être d'ajouter quelques clauses using à la suite de celles déjà présentes pour pouvoir utiliser le Framework XNA.<br/> Pour faire simple on va reprendre celles qui sont dans le fichier FirstGame.cs et qui sont en relation avec XNA.</p><pre id="r-772186" data-claire-element-id="772186"><code data-claire-semantic="csharp">using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;</code></pre><p id="r-772187" data-claire-element-id="772187">On ajoute ensuite les attributs et propriétés de notre classe qui correspondent en réalité aux caractéristiques que l'on a énumérées juste avant.</p><pre id="r-772188" data-claire-element-id="772188"><code data-claire-semantic="csharp">public class Sprite
{
    /// &lt;summary&gt;
    /// Récupère ou définit l'image du sprite
    /// &lt;/summary&gt;
    public Texture2D Texture
    {
        get { return _texture; }
        set { _texture = value; }
    }
    private Texture2D _texture;

    /// &lt;summary&gt;
    /// Récupère ou définit la position du Sprite
    /// &lt;/summary&gt;
    public Vector2 Position
    {
        get { return _position; }
        set { _position = value; }
    }
    private Vector2 _position;

    /// &lt;summary&gt;
    /// Récupère ou définit la direction du sprite. Lorsque la direction est modifiée, elle est automatiquement normalisée.
    /// &lt;/summary&gt;
    public Vector2 Direction
    {
        get { return _direction; }
        set { _direction = Vector2.Normalize(value); }
    }
    private Vector2 _direction;

    /// &lt;summary&gt;
    /// Récupère ou définit la vitesse de déplacement du sprite.
    /// &lt;/summary&gt;
    public float Speed
    {
        get { return _speed; }
        set { _speed = value; }
    }
    private float _speed;
}</code></pre><p id="r-772189" data-claire-element-id="772189">Et enfin, on y ajoute nos méthodes.</p><pre id="r-772190" data-claire-element-id="772190"><code data-claire-semantic="csharp">/// &lt;summary&gt;
/// Initialise les variables du Sprite
/// &lt;/summary&gt;
public virtual void Initialize()
{
    _position = Vector2.Zero;
    _direction = Vector2.Zero;
    _speed = 0;
}

/// &lt;summary&gt;
/// Charge l'image voulue grâce au ContentManager donné
/// &lt;/summary&gt;
/// &lt;param name=&quot;content&quot;&gt;Le ContentManager qui chargera l'image&lt;/param&gt;
/// &lt;param name=&quot;assetName&quot;&gt;L'asset name de l'image à charger pour ce Sprite&lt;/param&gt;
public virtual void LoadContent(ContentManager content, string assetName)
{
    _texture = content.Load&lt;Texture2D&gt;(assetName);
}

/// &lt;summary&gt;
/// Met à jour les variables du sprite
/// &lt;/summary&gt;
/// &lt;param name=&quot;gameTime&quot;&gt;Le GameTime associé à la frame&lt;/param&gt;
public virtual void Update(GameTime gameTime)
{
    _position += _direction * _speed * (float)gameTime.ElapsedGameTime.TotalMilliseconds;
}

/// &lt;summary&gt;
/// Permet de gérer les entrées du joueur
/// &lt;/summary&gt;
/// &lt;param name=&quot;keyboardState&quot;&gt;L'état du clavier à tester&lt;/param&gt;
/// &lt;param name=&quot;mouseState&quot;&gt;L'état de la souris à tester&lt;/param&gt;
/// &lt;param name=&quot;joueurNum&quot;&gt;Le numéro du joueur qui doit être surveillé&lt;/param&gt;
public virtual void HandleInput(KeyboardState keyboardState, MouseState mouseState)
{
}

/// &lt;summary&gt;
/// Dessine le sprite en utilisant ses attributs et le spritebatch donné
/// &lt;/summary&gt;
/// &lt;param name=&quot;spriteBatch&quot;&gt;Le spritebatch avec lequel dessiner&lt;/param&gt;
/// &lt;param name=&quot;gameTime&quot;&gt;Le GameTime de la frame&lt;/param&gt;
public virtual void Draw(SpriteBatch spriteBatch, GameTime gameTime)
{
    spriteBatch.Draw(_texture, _position, Color.White);
}</code></pre><p id="r-772191" data-claire-element-id="772191">Je ne vais pas revenir en détail sur toutes les méthodes, elle ne sont pas dures à comprendre et on a déjà tout vu précédemment. ;) <br/> Notez quand même que l'on utilise le mot clef <code data-claire-semantic="csharp">virtual</code> sur chacune de nos méthodes pour la simple raison que l'on aura certainement besoin de ré-implémenter certaines de ces fonctionnalités dans les classes enfants pour obtenir des comportements plus spécifiques.</p><p id="r-772192" data-claire-element-id="772192">Je vais juste dire un petit mot sur la méthode <em>LoadContent</em> et la méthode <em>Draw</em> puisque c'est assez nouveau ici.<br/> On doit passer à <em>LoadContent</em> deux paramètres, un <em>ContentManager</em> et un <em>string</em> représentant l'asset name de l'image.</p><p id="r-772193" data-claire-element-id="772193">Il n'y a rien de compliqué mais on est obligé de faire ceci car la classe <em>Sprite</em> est &quot;isolée&quot; du contexte de la classe principale, il faut donc lui fournir le <em>ContentManager</em> qui va bien (l'attribut <em>Content</em> de la classe principale) et lui dire depuis l'extérieur quelle image charger (sinon tous les sprites auraient la même image donc peu intéressant).</p><p id="r-772194" data-claire-element-id="772194">Et pour la méthode <em>Draw</em>, vous vous posez surement une question si vous avez bien suivi le cours jusqu'à présent. :ange:</p><div id="r-772196" data-claire-element-id="772196" data-claire-semantic="question"><p id="r-772195" data-claire-element-id="772195">Eh ! Pourquoi il n'y a pas Begin() avant et End() après la méthode Draw() du SpriteBatch ??</p></div><p id="r-772197" data-claire-element-id="772197">Effectivement ^^ , ce n'est pas un oubli et il faudra les mettre quelque part. Cependant le <em>spriteBatch.Begin()</em> est une opération assez lourde et qui prend du temps à être faite donc il vaut mieux l'ouvrir une seule fois, dessiner tous les sprites et le refermer ensuite que de l'ouvrir et le fermer à chaque fois que l'on veut dessiner un sprite.</p><aside id="r-772199" data-claire-element-id="772199" data-claire-semantic="information"><p id="r-772198" data-claire-element-id="772198">Ce n'est donc pas le sprite qui s'occupe d'ouvrir et fermer le SpriteBatch mais ce sera la méthode en charge de dessiner l'ensemble des sprites, dans notre cas la méthode <em>Draw()</em> de la classe <em>FirstGame</em> ! C'est aussi pourquoi on passe à la méthode <em>Draw()</em> du sprite le SpriteBatch qu'il doit utiliser pour se dessiner. :)</p></aside><h5 id="r-l-utilisation-1" data-claire-element-id="772215">L'utilisation</h5><p id="r-772201" data-claire-element-id="772201">Si vous avez bien compris l'implémentation de la classe alors l'utilisation sera un jeu d'enfant !</p><p id="r-772202" data-claire-element-id="772202">Vous pouvez enlever du fichier FirstGame.cs tout ce qui traite de Zozor puisqu'on va tout refaire en utilisant la classe Sprite.</p><p id="r-772203" data-claire-element-id="772203">On va donc commencer par créer notre Zozor, sauf que cette fois ci, ce n'est plus un simple <em>Texture2D</em> mais bien un Sprite. :D</p><pre id="r-772204" data-claire-element-id="772204"><code data-claire-semantic="csharp">private Sprite _zozor;</code></pre><p id="r-772205" data-claire-element-id="772205">C'est ensuite très logique puisque l'on a respecté l'architecture de XNA, on le créé et on l'initialise dans ... <em>Initialize()</em> !</p><pre id="r-772206" data-claire-element-id="772206"><code data-claire-semantic="csharp">protected override void Initialize()
{
    _zozor = new Sprite();
    _zozor.Initialize();
            
    base.Initialize();
}</code></pre><p id="r-772207" data-claire-element-id="772207">Puis on charge l'image de Zozor dans <em>LoadContent</em> en utilisant la méthode de la classe Sprite.</p><pre id="r-772208" data-claire-element-id="772208"><code data-claire-semantic="csharp">protected override void LoadContent()
{
    // Create a new SpriteBatch, which can be used to draw textures.
    spriteBatch = new SpriteBatch(GraphicsDevice);

    _zozor.LoadContent(Content, &quot;zozor6&quot;);
}</code></pre><p id="r-772209" data-claire-element-id="772209">Et enfin on le met à jour et on le dessine.</p><pre id="r-772210" data-claire-element-id="772210"><code data-claire-semantic="csharp">protected override void Update(GameTime gameTime)
{
    _zozor.Update(gameTime);

    base.Update(gameTime);
}

protected override void Draw(GameTime gameTime)
{
    GraphicsDevice.Clear(Color.CornflowerBlue);

    spriteBatch.Begin();
    _zozor.Draw(spriteBatch, gameTime);
    spriteBatch.End();

    base.Draw(gameTime);
}</code></pre><p id="r-772211" data-claire-element-id="772211">Vous pouvez maintenant lancer le jeu et voir que Zozor est toujours là mais cette fois-ci grâce à la classe Sprite. ;) <br/> Modifiez ses attributs direction, vitesse, etc... si vous souhaitez le faire bouger. Cela dit, vous ne pourrez pas le faire rebondir sur les murs pour la simple et bonne raison que la classe <em>Sprite</em> ne le prévoit pas.</p><p id="r-772212" data-claire-element-id="772212">Pour ajouter cette possibilité il faudrait créer une autre classe, Zozor par exemple qui hérite de la classe Sprite et qui ajoute la fonctionnalité du rebondissement en réécrivant la méthode <em>Update()</em>. :) <br/> Mais je m'avance un peu, vous aurez bien le temps de comprendre ceci par la suite grâce au TP !</p><p id="r-772213" data-claire-element-id="772213">Voila pour ce chapitre portant plus sur l'organisation du code que sur XNA en lui-même mais il était à mon sens nécessaire avant de pouvoir attaquer quelque chose de plus gros. ;)</p><p id="r-772214" data-claire-element-id="772214">On se revoit dans le prochain chapitre pour notre premier gros TP !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
<span class="arrow"></span>
<span class="next">Les caractéristiques de notre classe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">
<span class="next">TP : Pong</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPPong"></a><h2>TP : Pong</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
<span class="arrow"></span>
<span class="next">Le code de la classe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
<span class="next">Présentation du TP</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-772218" data-claire-element-id="772218">Nous allons dans ce chapitre passer à quelque chose de très concret puisque nous allons créer notre premier jeu complet ! :) <br/> Je vous propose de faire un Pong qui va nous permettre de mettre en pratique ce que nous avons vu jusque là et même d'en apprendre un peu plus sur XNA.</p><p id="r-772219" data-claire-element-id="772219">Ce chapitre est composé d'une partie d'analyse de ce que l'on désire, une autre où je vous donnerai quelques indications pour bien commencer ainsi que certains éléments en plus nécessaires au jeu pour gérer les collisions entre Sprites. Enfin, la dernière partie sera consacrée à la correction commentée que je vous propose mais qui n'est évidemment pas la seule possible.</p><p id="r-772220" data-claire-element-id="772220">Alors en avant ! :pirate:</p>
</div><a name="PrsentationduTP"></a><h2>Présentation du TP</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">
<span class="arrow"></span>
<span class="next">TP : Pong</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
<span class="next">Indications pour bien commencer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-presentation-du-tp" data-claire-element-id="772250">Présentation du TP</h4><p id="r-772221" data-claire-element-id="772221">Pour commencer, nous allons parler des prérequis pour ce jeu : qu'est-ce qu'un Pong et qu'est-ce que l'on attend de ce jeu ? Concrètement on va énumérer les fonctionnalités du jeu que l'on souhaite créer à la fin pour avoir une vue d'ensemble de la chose et ainsi pouvoir partir du bon pied.</p><p id="r-772222" data-claire-element-id="772222">Alors d'abord, un Pong qu'est-ce que c'est ? Je pense que vous savez tous ou presque à quoi ressemble ce jeu mythique qui est l'un des premiers jeux à être sortis. ^^ <br/> Voici à quoi va ressembler celui que nous aurons à la fin de ce chapitre (si vous acceptez mes dessins plus que médiocres :p ).</p><p id="r-772223" data-claire-element-id="772224"><a href="medias/uploads.siteduzero.com_files_332001_333000_332848.jpg"><img id="r-772224" data-claire-element-id="772223" src="medias/uploads.siteduzero.com_thb_332001_333000_332848.jpg" alt="Pong"/></a></p><p id="r-772225" data-claire-element-id="772225">Le but principal du jeu est donc de faire rebondir la balle sur notre raquette et de ne pas être le premier à la laisser passer et toucher notre bord de fenêtre. Le concept est donc très simple mais ne vous inquiétez pas, il y a tout de même de la matière pour travailler. ;)</p><p id="r-772226" data-claire-element-id="772226">Juste avant de voir la liste des fonctionnalités que l'on souhaite avoir dans notre jeu, je vous fournis les images que j'ai moi-même utilisées pour le faire. Libre à vous de les prendre si vous le souhaitez (mais évidemment aucun caractère obligatoire, je suis loin d'être un pro en design).</p><figure id="r-772228" data-claire-element-id="772229"><img id="r-772227" data-claire-element-id="772227" src="medias/uploads.siteduzero.com_files_332001_333000_332849.png" alt="La balle"/></figure><p id="r-772230" data-claire-element-id="772230">La balle</p><figure id="r-772232" data-claire-element-id="772233"><img id="r-772231" data-claire-element-id="772231" src="medias/uploads.siteduzero.com_files_332001_333000_332850.png" alt="La raquette"/></figure><p id="r-772234" data-claire-element-id="772234">La raquette</p><p id="r-772235" data-claire-element-id="772235">Voici la liste des fonctionnalités que vous allez devoir implémenter.</p><ul id="r-772246" data-claire-element-id="772246"><li id="r-772237" data-claire-element-id="772237"><p id="r-772236" data-claire-element-id="772236">Une balle qui se déplace toute seule et qui rebondit sur les bords supérieur et inférieur de la fenêtre.</p></li><li id="r-772239" data-claire-element-id="772239"><p id="r-772238" data-claire-element-id="772238">Deux raquettes qui seront déplaçables par les joueurs.</p></li><li id="r-772241" data-claire-element-id="772241"><p id="r-772240" data-claire-element-id="772240">Lorsque la balle touche une raquette, elle change de direction et elle accélère pour rajouter du challenge.</p></li><li id="r-772243" data-claire-element-id="772243"><p id="r-772242" data-claire-element-id="772242">Comptage des points : lorsque la balle sort d'un coté ou de l'autre de la fenêtre, il faut ajouter un point au joueur adverse. Ceci inclut évidemment l'affichage des scores sur l'écran.</p></li><li id="r-772245" data-claire-element-id="772245"><p id="r-772244" data-claire-element-id="772244">Gérer le framerate : A priori avec l'utilisation de notre classe Sprite, le problème du framerate est déjà géré mais il faudra tout de même vérifier qu'il n'y a aucun problème. ;)</p></li></ul><p id="r-772247" data-claire-element-id="772247">Voilà ! C'est à peu près tout mais je vous garantis que ça vous donnera un peu de fil à retordre.</p><p id="r-772248" data-claire-element-id="772248">Avant de passer à la suite, je vais faire un peu mon moralisateur. :-° <br/> Je tiens juste à bien préciser le caractère INDISPENSABLE de la pratique. Ce n'est pas simplement en lisant le tutoriel que vous saurez par magie faire des jeux complexes. Je sais qu'il est très tentant de bruler les étapes en passant par exemple directement à de la 3D mais c'est mal. Ne négligez donc pas les TP, faites-les avec sérieux et surtout cherchez par vous même avant de regarder la solution.</p><p id="r-772249" data-claire-element-id="772249">Maintenant que ceci est dit, on peut commencer :D si vous avez du mal à commencer ou que vous voulez être sûrs de vous diriger dans la bonne direction, je vous donne quelques coups de pouces pour commencer votre Pong juste après mais encore une fois, c'est en cherchant par vous-mêmes que vous apprendrez le plus vite.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">
<span class="arrow"></span>
<span class="next">TP : Pong</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
<span class="next">Indications pour bien commencer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Indicationspourbiencommencer"></a><h2>Indications pour bien commencer</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
<span class="arrow"></span>
<span class="next">Présentation du TP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-indications-pour-bien-commencer" data-claire-element-id="772268">Indications pour bien commencer</h4><h5 id="r-utiliser-la-classe-sprite" data-claire-element-id="772253">Utiliser la classe Sprite</h5><p id="r-772251" data-claire-element-id="772251">On a créé une classe <em>Sprite</em> dans le chapitre précédent, ce n'est pas pour rien, servez-vous en. De façon plus précise, vous aurez besoin de 2 objets principaux dans votre Pong : une balle et une raquette.<br/> Ces deux éléments ont les même caractéristiques de base qu'un <em>Sprite</em> classique mais doivent posséder des fonctionnalités propres : on aura donc affaire à l'héritage de <em>Sprite</em>.</p><p id="r-772252" data-claire-element-id="772252">N'ayez pas peur de réécrire certaines méthodes de <em>Sprite</em> dans les classes enfants (souvenez-vous que nous avons mis toutes les méthodes de <em>Sprite</em> avec le modificateur <code data-claire-semantic="csharp">virtual</code> nous permettant de facilement réécrire les méthodes si l'on a besoin d'autres fonctionnalités).</p><h5 id="r-les-collisions-5" data-claire-element-id="772267">Les collisions</h5><p id="r-772254" data-claire-element-id="772254">Pour faire rebondir la balle en haut ou en bas de la fenêtre ou encore vérifier si un joueur n'a pas rattrapé la balle, c'est très simple : il suffit de vérifier la position de la balle en fonction de la taille de l'écran comme on l'a fait avec Zozor. Mais comment savoir si la balle a touché une raquette ou pas ?</p><p id="r-772255" data-claire-element-id="772255">On va pour cela utiliser des collisions simplissimes. On va en fait assimiler nos raquettes à des rectangles, même si en réalité ce n'en sont pas, pour notre utilisation cela suffit largement.</p><p id="r-772256" data-claire-element-id="772256">Un rectangle dans XNA est représenté par la classe <em>Rectangle</em> (dur hein :p ). Pour créer un rectangle on utilise son constructeur qui prend 4 paramètres : l'abscisse du coin supérieur gauche, l'ordonnée du coin supérieur gauche, la largeur du rectangle et enfin sa hauteur.</p><p id="r-772257" data-claire-element-id="772257">Voici un dessin qui représente le rectangle qui doit entourer notre raquette. :)</p><figure id="r-772259" data-claire-element-id="772260"><img id="r-772258" data-claire-element-id="772258" src="medias/uploads.siteduzero.com_files_332001_333000_332858.jpg" alt="Le rectangle autour de la raquette"/></figure><p id="r-772261" data-claire-element-id="772261">Plus concrètement notre rectangle aura comme position la position de la texture de la raquette, comme largeur la largeur de la texture et comme hauteur la hauteur de la texture, facile non ?</p><div id="r-772263" data-claire-element-id="772263" data-claire-semantic="question"><p id="r-772262" data-claire-element-id="772262">Ok mais ca va nous servir à quoi d'avoir un rectangle qui entoure de façon approximative la raquette ?</p></div><p id="r-772264" data-claire-element-id="772264">Ça va tout simplement nous permettre d'utiliser ce que nous propose XNA : des méthodes de détection de collisions. Ces méthodes (deux principalement) sont <em>Contains</em> et <em>Intersects</em>.<br/> La première va permettre de savoir si un point ou un rectangle est entièrement contenu dans celui sur lequel est appliqué la méthode. La deuxième quant à elle permet de détecter si deux rectangles se touchent (s'entrecroisent) et les deux retournent un simple booléen pour informer de la situation.</p><p id="r-772265" data-claire-element-id="772265">Je vous laisse réfléchir sur la méthode à utiliser pour notre cas.</p><p id="r-772266" data-claire-element-id="772266">Voilà je pense que vous êtes maintenant suffisamment armés pour créer votre Pong, n'oubliez pas que c'est en pratiquant, en faisant des erreurs et en cherchant pas vous-même que vous progresserez le plus vite. Il ne me reste plus qu'à vous souhaiter bon courage et à plus tard pour la correction !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
<span class="arrow"></span>
<span class="next">Présentation du TP</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Correction"></a><h2>Correction</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
<span class="arrow"></span>
<span class="next">Indications pour bien commencer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">
<span class="next">Ajouter du son</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-correction-67" data-claire-element-id="772296">Correction</h4><h5 id="r-la-correction-1" data-claire-element-id="772280">La correction</h5><p id="r-772269" data-claire-element-id="772269">Nous y voila ! J'espère que vous avez bien cherché par vous même avant de venir ici et même que vous avez réussi à faire votre Pong. :D <br/> Pour la correction je vais tout simplement vous fournir le code de chacune de mes classes (3 au total sans compter <em>Sprite</em>). J'ai normalement bien commenté tous les fichiers mais si vous avez encore des doutes sur le fonctionnement du jeu, n'hésitez pas à aller demander sur le forum ou à me dire les points à éclaircir dans les commentaires. ;)</p><h6 id="r-la-balle-3" data-claire-element-id="772272">La balle</h6><p id="r-772270" data-claire-element-id="772270">Commençons par la classe <em>Ball</em>.</p><pre id="r-772271" data-claire-element-id="772271"><code data-claire-semantic="csharp">using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;

namespace Pong
{
    public class Ball : Sprite
    {
        // Les dimensions de la fenêtre de jeu
        private int _screenHeight;
        private int _screenWidth;

        /// &lt;summary&gt;
        /// Crée une balle et renseigne les dimensions de la fenêtre
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;screenWidth&quot;&gt;Largeur de la fenêtre&lt;/param&gt;
        /// &lt;param name=&quot;screenHeight&quot;&gt;Longueur de la fenêtre&lt;/param&gt;
        public Ball(int screenWidth, int screenHeight)
        {
            _screenHeight = screenHeight;
            _screenWidth = screenWidth;
        }

        /// &lt;summary&gt;
        /// Met une direction par défaut (en diagonale bas droite) et une vitesse par défaut
        /// &lt;/summary&gt;
        public override void Initialize()
        {
 	    base.Initialize();

            Direction = new Vector2(1, 1);
            Speed = 0.2f;
        }

        /// &lt;summary&gt;
        /// Charge l'image de la balle donnée en paramêtre
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;content&quot;&gt;Le content manager avec lequel charger l'image&lt;/param&gt;
        /// &lt;param name=&quot;assetName&quot;&gt;Le nom de l'image à charger pour la balle&lt;/param&gt;
        public override void LoadContent(ContentManager content, String assetName)
        {
            base.LoadContent(content, assetName);
            Position = new Vector2(_screenWidth / 2 - Texture.Width / 2, _screenHeight / 2 - Texture.Height / 2);
        }

        /// &lt;summary&gt;
        /// Méthode Update spécifique à la balle.
        /// Fait rebondir la balle sur les bords haut et bas de l'écran
        /// et sur les raquettes des joueurs.
        /// Lorsque les modifications de direction et de vitesse sont faites,
        /// on appelle l'Update parent (de la classe Sprite) pour déplacer la balle.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;gameTime&quot;&gt;Objet de temps relatif à la frame en cours&lt;/param&gt;
        /// &lt;param name=&quot;batRectangleP1&quot;&gt;Le rectangle de collision du joueur 1&lt;/param&gt;
        /// &lt;param name=&quot;batRectangleP2&quot;&gt;Le rectangle de collision du joueur 2&lt;/param&gt;
        public void Update(GameTime gameTime, Rectangle batRectangleP1, Rectangle batRectangleP2)
        {
            // On fait rebondir la balle si elle touche le haut ou le bas de l'écran
            if ((Position.Y &lt;= 0 &amp;&amp; Direction.Y &lt; 0)
                || (Position.Y &gt; _screenHeight - Texture.Height &amp;&amp; Direction.Y &gt; 0))
            {
                Direction = new Vector2(Direction.X, -Direction.Y);
            }

            // Si la balle va vers un joueur et qu'elle touche la raquette dudit joueur,
            // on la fait changer de sens et on la fait accélérer
            if ((Direction.X &lt; 0 &amp;&amp; batRectangleP1.Contains((int)Position.X, (int)Position.Y + Texture.Height / 2))
                || (Direction.X &gt; 0 &amp;&amp; batRectangleP2.Contains((int)Position.X + Texture.Width, (int)Position.Y + Texture.Height / 2)))
            {
                Direction = new Vector2(-Direction.X, Direction.Y);
                Speed += 0.05f;
            }
            
            base.Update(gameTime);
        }
    }
}</code></pre><h6 id="r-la-raquette" data-claire-element-id="772275">La raquette</h6><p id="r-772273" data-claire-element-id="772273">Ensuite vient la raquette (<em>bat </em>en anglais), un tout petit peu plus compliqué parce qu'il faut gérer les entrées utilisateurs et la distinction du joueur.</p><pre id="r-772274" data-claire-element-id="772274"><code data-claire-semantic="csharp">using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;

namespace Pong
{
    public class Bat : Sprite
    {
        // Les dimensions de la fenêtre de jeu
        private int _screenHeight;
        private int _screenWidth;

        // Le score du joueur
        private int _score;
        public int Score
        {
            get { return _score; }
            set { _score = value; }
        }

        /// &lt;summary&gt;
        /// Récupère le rectangle qui entoure la raquette
        /// pour permettre la gestion des collisions
        /// &lt;/summary&gt;
        public Rectangle CollisionRectangle
        {
            get
            {
                return new Rectangle((int)Position.X, (int)Position.Y, Texture.Width, Texture.Height);
            }
        }

        private int _playerNumber;

        /// &lt;summary&gt;
        /// Crée une raquette en fournissant les dimensions de la fenêtre de jeu.
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;screenWidth&quot;&gt;Largeur de la fenêtre&lt;/param&gt;
        /// &lt;param name=&quot;screenHeight&quot;&gt;Hauteur de la fenêtre&lt;/param&gt;
        /// &lt;param name=&quot;playerNumber&quot;&gt;Le numero du joueur que l'on est en train de créer (1 ou 2)&lt;/param&gt;
        public Bat(int screenWidth, int screenHeight, int playerNumber)
        {
            _screenWidth = screenWidth;
            _screenHeight = screenHeight;

            _playerNumber = playerNumber;
        }

        /// &lt;summary&gt;
        /// Initialise les variables nécessaires à la raquette.
        /// &lt;/summary&gt;
        public override void Initialize()
        {
            base.Initialize();

            _score = 0;
        }

        /// &lt;summary&gt;
        /// Charge l'image de la raquette
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;content&quot;&gt;Le content manager à utiliser pour charger l'image&lt;/param&gt;
        /// &lt;param name=&quot;assetName&quot;&gt;L'asset name de l'image de raquette à charger&lt;/param&gt;
        public override void LoadContent(ContentManager content, string assetName)
        {
            base.LoadContent(content, assetName);

            // En fonction du joueur que l'on est en train de charger,
            // on place la texture d'un coté ou de l'autre de la fenêtre
            if (_playerNumber == 1)
            {
                Position = new Vector2(10, _screenHeight / 2 - Texture.Height / 2);
            }
            else if (_playerNumber == 2)
            {
                Position = new Vector2(_screenWidth - 10 - Texture.Width, _screenHeight / 2 - Texture.Height / 2);
            }
        }

        /// &lt;summary&gt;
        /// Gère les entrées clavier de l'utilisateur en fonction du joueur concerné
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;keyboardState&quot;&gt;L'état du clavier&lt;/param&gt;
        /// &lt;param name=&quot;mouseState&quot;&gt;L'état de la souris&lt;/param&gt;
        public override void HandleInput(KeyboardState keyboardState, MouseState mouseState)
        {
            if (_playerNumber == 1)
            {
                if (keyboardState.IsKeyDown(Keys.Z))
                {
                    Direction = -Vector2.UnitY;
                    Speed = 0.3f;
                }
                else if (keyboardState.IsKeyDown(Keys.S))
                {
                    Direction = Vector2.UnitY;
                    Speed = 0.3f;
                }
                else
                {
                    Speed = 0;
                }
            }
            else if(_playerNumber == 2)
            {
                if (keyboardState.IsKeyDown(Keys.Up))
                {
                    Direction = -Vector2.UnitY;
                    Speed = 0.3f;
                }
                else if (keyboardState.IsKeyDown(Keys.Down))
                {
                    Direction = Vector2.UnitY;
                    Speed = 0.3f;
                }
                else
                {
                    Speed = 0;
                }
            }
        }

        /// &lt;summary&gt;
        /// Vérifie que la raquette ne sort pas de l'écran et l'arrète si c'est le cas
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;gameTime&quot;&gt;Etat du temps à la frame&lt;/param&gt;
        public override void Update(GameTime gameTime)
        {
            if (Position.Y &lt;= 0 &amp;&amp; Direction.Y &lt; 0)
                Speed = 0;
            if (Position.Y &gt;= _screenHeight - Texture.Height &amp;&amp; Direction.Y &gt; 0)
                Speed = 0;

            base.Update(gameTime);
        }
    }
}</code></pre><h6 id="r-la-classe-principale" data-claire-element-id="772279">La classe principale</h6><p id="r-772276" data-claire-element-id="772276">Et enfin la classe qui permet d'agencer le tout, la brique centrale du jeu.</p><p id="r-772277" data-claire-element-id="772277">Pour info, mon Sprite Font appelé &quot;scoreText&quot; dans le code est une police de type Impact avec une taille de 22.</p><pre id="r-772278" data-claire-element-id="772278"><code data-claire-semantic="csharp">using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;

namespace Pong
{
    /// &lt;summary&gt;
    /// This is the main type for your game
    /// &lt;/summary&gt;
    public class Pong : Microsoft.Xna.Framework.Game
    {
        private GraphicsDeviceManager graphics;
        private SpriteBatch spriteBatch;

        private KeyboardState _keyboardState;
        private MouseState _mouseState;

        private Sprite _centralBar;

        private Bat _batP1;
        private Bat _batP2;
        private Ball _ball;

        private SpriteFont _scoreFont;

        private bool _isPaused;

        public Pong()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = &quot;Content&quot;;
        }

        /// &lt;summary&gt;
        /// Créé et initialise toutes les variables du jeu (balle, raquettes, etc...)
        /// &lt;/summary&gt;
        protected override void Initialize()
        {
            _centralBar = new Sprite();

            _ball = new Ball(Window.ClientBounds.Width, Window.ClientBounds.Height);
            _ball.Initialize();

            _batP1 = new Bat(Window.ClientBounds.Width, Window.ClientBounds.Height, 1);
            _batP1.Initialize();

            _batP2 = new Bat(Window.ClientBounds.Width, Window.ClientBounds.Height, 2);
            _batP2.Initialize();

            _isPaused = true;

            base.Initialize();
        }

        /// &lt;summary&gt;
        /// Charge tout le contenu du jeu (images, spritefont, etc..)
        /// &lt;/summary&gt;
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            _centralBar.LoadContent(Content, &quot;barreCentrale&quot;);
            _centralBar.Position = new Vector2(Window.ClientBounds.Width / 2 - _centralBar.Texture.Width / 2, 0);

            _ball.LoadContent(Content, &quot;balle&quot;);
            _batP1.LoadContent(Content, &quot;raquette&quot;);
            _batP2.LoadContent(Content, &quot;raquette&quot;);

            _scoreFont = Content.Load&lt;SpriteFont&gt;(&quot;scoreText&quot;);
        }

        /// &lt;summary&gt;
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// &lt;/summary&gt;
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        /// &lt;summary&gt;
        /// Met le jeu à jour en appelant les méthodes de gestion de clavier
        /// et de déplacement de chaque élément du jeu
        /// &lt;/summary&gt;
        /// &lt;param name=&quot;gameTime&quot;&gt;Provides a snapshot of timing values.&lt;/param&gt;
        protected override void Update(GameTime gameTime)
        {
            // On récupère les états du clavier et de la souris.
            _keyboardState = Keyboard.GetState();
            _mouseState = Mouse.GetState();

            // On gère le fait que le jeu soit en pause pour permettre au joueur
            // de se préparer avant de commencer
            if (!_isPaused)
            {
                _ball.Update(gameTime, _batP1.CollisionRectangle, _batP2.CollisionRectangle);
                _batP1.HandleInput(_keyboardState, _mouseState);
                _batP2.HandleInput(_keyboardState, _mouseState);

                _batP1.Update(gameTime);
                _batP2.Update(gameTime);

                // Verifie si la balle est passé derrière une raquette et agit en fonction
                CheckIfBallOut();
            }
            else
            {
                // Si on est en pause alors on attend que espace soit appuyé pour démarrer
                if(_keyboardState.IsKeyDown(Keys.Space))
                {
                    _isPaused = false;
                }
            }

            base.Update(gameTime);
        }

        /// &lt;summary&gt;
        /// Vérifie si la balle est sortie du jeu.
        /// Si c'est le cas, en fonction du coté où elle est sortie, on rajoute un point au bon joueur.
        /// On remet ensuite tout en place pour une autre partie.
        /// &lt;/summary&gt;
        private void CheckIfBallOut()
        {
            if (_ball.Position.X &lt;= 0)
            {
                _batP2.Score++;
                _ball.Initialize();
                _ball.Position = new Vector2(Window.ClientBounds.Width / 2 - _ball.Texture.Width / 2,
                                             Window.ClientBounds.Height / 2 - _ball.Texture.Height / 2);
                _isPaused = true;
            }
            else if (_ball.Position.X &gt;= Window.ClientBounds.Width - _ball.Texture.Width)
            {
                _batP1.Score++;
                _ball.Initialize();
                _ball.Position = new Vector2(Window.ClientBounds.Width / 2 - _ball.Texture.Width / 2,
                                             Window.ClientBounds.Height / 2 - _ball.Texture.Height / 2);
                _isPaused = true;
            }
        }

        /// &lt;summary&gt;
        /// Dessine tout le jeu en utilisant un seul spriteBatch.Begin() et End().
        /// &lt;/summary&gt;
        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.DarkGray);

            // On ouvre une seule fois le spriteBatch pour toutes les opérations de dessin.
            spriteBatch.Begin();

            // On dessine la barre du milieu en tout premier (pour que les autres éléments puissent passer dessus)
            _centralBar.Draw(spriteBatch, gameTime);
            
            // On dessine ensuite le score en calculant au préalable la position où le placer.
            Vector2 scoreP1Size = _scoreFont.MeasureString(_batP1.Score.ToString());
            Vector2 scoreP1Position = new Vector2(Window.ClientBounds.Width / 4 - scoreP1Size.X / 2,
                                                  scoreP1Size.Y);
            spriteBatch.DrawString(_scoreFont, _batP1.Score.ToString(), scoreP1Position, Color.White);

            Vector2 scoreP2Size = _scoreFont.MeasureString(_batP2.Score.ToString());
            Vector2 scoreP2Position = new Vector2(3 * Window.ClientBounds.Width / 4 - scoreP2Size.X / 2,
                                                  scoreP2Size.Y);
            spriteBatch.DrawString(_scoreFont, _batP2.Score.ToString(), scoreP2Position, Color.White);

            // On dessine ensuite les élements du jeu (balle, raquettes)
            _batP1.Draw(spriteBatch, gameTime);
            _batP2.Draw(spriteBatch, gameTime);
            _ball.Draw(spriteBatch, gameTime);
            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
}</code></pre><h5 id="r-les-ameliorations-possibles" data-claire-element-id="772295">Les améliorations possibles</h5><p id="r-772281" data-claire-element-id="772281">Notre Pong est fonctionnel mais évidemment de nombreuses améliorations peuvent être apportées. ^^</p><p id="r-772282" data-claire-element-id="772282">Voici quelques idées que j'ai en tête.</p><ul id="r-772291" data-claire-element-id="772291"><li id="r-772284" data-claire-element-id="772284"><p id="r-772283" data-claire-element-id="772283">Faire prendre à la balle une direction aléatoire au démarrage.</p></li><li id="r-772286" data-claire-element-id="772286"><p id="r-772285" data-claire-element-id="772285">Créer une IA basique. Simplement lorsque la balle est au dessus de sa raquette, il va vers le haut et inversement.</p></li><li id="r-772288" data-claire-element-id="772288"><p id="r-772287" data-claire-element-id="772287">Plus compliqué mais intéressant : ne pas faire rebondir la balle sur la raquette simplement en inversant son déplacement en X mais plutôt en faisant un angle plus ou moins important en fonction de l'éloignement du rebond par rapport au centre.</p></li><li id="r-772290" data-claire-element-id="772290"><p id="r-772289" data-claire-element-id="772289">Vos idées... :D</p></li></ul><p id="r-772292" data-claire-element-id="772292">Alors heureux ? :D <br/> Vous venez de créer votre premier jeu avec XNA, premier d'une liste qui, je l'espère, deviendra longue.</p><p id="r-772293" data-claire-element-id="772293">La création de ce Pong a vraiment permis de poser tout ce que l'on avait vu auparavant en y ajoutant quelques petits éléments organisationnels. Vous devriez maintenant bien voir à quoi servent les différentes méthodes de base de XNA.</p><p id="r-772294" data-claire-element-id="772294">Il nous reste une dernière petite chose de &quot;basique&quot; à voir avant de passer à des techniques plus avancées : ajouter du son.<br/> Direction le prochain chapitre pour ça. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
<span class="arrow"></span>
<span class="next">Indications pour bien commencer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">
<span class="next">Ajouter du son</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Ajouterduson"></a><h2>Ajouter du son</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
<span class="arrow"></span>
<span class="next">Correction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
<span class="next">Présentation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-772298" data-claire-element-id="772298">Nous avons à ce stade un joli Pong fonctionnel mais vous ne pensez pas qu'il manque quelque chose ... ?<br/> Du son ! Effectivement que serait un jeu sans musique d'ambiance, d'effets sonores et autres joyeusetés qui sortent des enceintes ? :)</p><p id="r-772299" data-claire-element-id="772299">C'est pourquoi nous allons voir à travers ce chapitre comment il est possible d'ajouter des musiques et bruitages dans nos jeux.</p>
</div><a name="Prsentation"></a><h2>Présentation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">
<span class="arrow"></span>
<span class="next">Ajouter du son</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
<span class="next">Les effets sonores</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-presentation-37" data-claire-element-id="772305">Présentation</h4><p id="r-772300" data-claire-element-id="772300">XNA distingue les sons dans un jeu en 2 catégories : les effets sonores et la musique. Concrètement ceci se rapproche de ce que l'on peut voir dans n'importe quel jeu puisque l'on a en général la possibilité de modifier séparément le volume des effets sonores de celui de la musique du jeu.</p><p id="r-772301" data-claire-element-id="772301">Intuitivement, je pense qu'il est facile de comprendre la différence entre effet sonore et musique. Un effet sonore va être un son ou un bruit ponctuel significatif d'une action immédiate, précise et brève mais qui peut se répéter de nombreuses fois d'affilée et/ou en même temps.</p><p id="r-772302" data-claire-element-id="772302">On peut prendre l'exemple très simple du bruit du coup de feu dans n'importe quel FPS. Lorsque nous avons une mitrailleuse dans les mains et que l'on tire, plusieurs fois le même son est joué en une seconde (normalement autant qu'il y a de balle tirée) et chaque son a une vie indépendante (commencent et finissent à des moments différents).<br/> Les effets sonores sont donc déclenchés par une action directe ou indirecte (le ramassage d'un item important pour l'objectif par exemple) du joueur à l'intérieur du jeu.</p><p id="r-772303" data-claire-element-id="772303">A l'inverse une musique va être un son long d'ambiance qui n'est pas étroitement lié à ce qu'il se passe dans votre jeu. Cependant une musique permet de poser l'atmosphère générale de votre jeu et d'inculquer de réelles sensations et émotions au joueur.<br/> Pour bien comprendre ce que j'entends par là, imaginez que vous jouez à Doom avec la musique des lapins crétins, je ne suis pas sur que l'émotion principale dégagée du jeu soit la même. :p</p><p id="r-772304" data-claire-element-id="772304">XNA sépare donc ces deux types de sons avec l'utilisation de deux classes distinctes : <em>SoundEffect</em> pour les effets sonores et <em>Song</em> pour les musiques. Associés à ces deux classes existent <em>SoundEffectInstance</em> et <em>MediaPlayer</em> qui vont permettre de contrôler la manière dont sont joués vos <em>SoundEffect</em> et <em>Song</em>.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">
<span class="arrow"></span>
<span class="next">Ajouter du son</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
<span class="next">Les effets sonores</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Leseffetssonores"></a><h2>Les effets sonores</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
<span class="arrow"></span>
<span class="next">Présentation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
<span class="next">Les musiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-effets-sonores" data-claire-element-id="772385">Les effets sonores</h4><h5 id="r-soundeffect" data-claire-element-id="772347">SoundEffect</h5><p id="r-772306" data-claire-element-id="772306">Un <em>SoundEffect</em> est en soi un objet très simple et la seule chose que vous allez pouvoir faire avec c'est de le jouer, mais pas d'inquiétude avec la classe <em>SoundEffectInstance</em> que nous verrons juste après, on pourra faire beaucoup plus de choses. ;)</p><p id="r-772307" data-claire-element-id="772307">Avant de voir comment charger et jouer un son, il est bon de préciser que vous allez avoir besoin d'ajouter une clause <code data-claire-semantic="csharp">using</code> que voici.</p><pre id="r-772308" data-claire-element-id="772308"><code data-claire-semantic="csharp">using Microsoft.Xna.Framework.Audio;</code></pre><h6 id="r-chargement-1" data-claire-element-id="772342">Chargement</h6><p id="r-772309" data-claire-element-id="772309">Comme tout contenu de jeu avec XNA, nous allons utiliser le Content Pipeline pour charger nos fichiers audio. A savoir que ce dernier prend en charge la plupart des formats (<strong>.mp3</strong>, <strong>.wav</strong>, <strong>.wma</strong>). Il faut tout de même savoir quelque chose, c'est que XNA privilégie les .wav pour les effets sonores bien que ça ne soit pas forcément le type de fichier le plus performant (non compressé donc très lourd). Ceci implique que pour les formats de fichiers autres que <strong>.wav</strong>, le Content Pipeline considèrera pas défaut qu'il s'agit d'une musique plutôt qu'un effet sonore.</p><div id="r-772311" data-claire-element-id="772311" data-claire-semantic="question"><p id="r-772310" data-claire-element-id="772310">Ça veut dire que je vais être obligé d'utiliser des .wav ?</p></div><p id="r-772312" data-claire-element-id="772312">Non mais il va falloir aller modifier une propriété du fichier pour dire explicitement au Content Pipeline que l'on souhaite avoir un effet sonore. Pour faire ceci, commencez par glisser un son (peu importe le format) dans votre projet de contenu. Une fois fait, cliquez dessus dans l'explorateur de solution.</p><figure id="r-772314" data-claire-element-id="772315"><img id="r-772313" data-claire-element-id="772313" src="medias/uploads.siteduzero.com_files_335001_336000_335326.jpg" alt="Selection du son dans le projet de contenu"/></figure><p id="r-772316" data-claire-element-id="772316">Lorsque votre fichier est sélectionné, il vous faut cliquer sur <strong>Properties</strong> (Propriétés) qui devrait être accessible sous forme d'onglet en bas de l'explorateur de solution.</p><figure id="r-772318" data-claire-element-id="772319"><img id="r-772317" data-claire-element-id="772317" src="medias/uploads.siteduzero.com_files_335001_336000_335327.jpg" alt="Onglets"/></figure><p id="r-772320" data-claire-element-id="772320">Si vous ne le voyez pas dans les onglets disponibles, c'est peut-être qu'il faut que vous le ré-ouvriez, pour cela allez dans <strong>View</strong> du menu du haut puis cliquez sur <strong>Properties Window</strong>.</p><p id="r-772321" data-claire-element-id="772322"><a href="medias/uploads.siteduzero.com_files_335001_336000_335329.jpg"><img id="r-772322" data-claire-element-id="772321" src="medias/uploads.siteduzero.com_thb_335001_336000_335329.jpg" alt="Image utilisateur"/></a></p><p id="r-772323" data-claire-element-id="772323">Voici donc à quoi ressemblent les propriétés d'un fichier de contenu (dans notre cas un son).</p><figure id="r-772325" data-claire-element-id="772326"><img id="r-772324" data-claire-element-id="772324" src="medias/uploads.siteduzero.com_files_335001_336000_335331.jpg" alt="Image utilisateur"/></figure><p id="r-772327" data-claire-element-id="772327">Il y a une information que vous devriez reconnaitre ici : <strong>Asset Name</strong>. En effet lorsque l'on charge un fichier ce n'est pas exactement le nom du fichier sans extension qu'il faut renseigner mais bien la valeur de cette propriété qui par défaut est le nom de fichier sans son extension. ;)</p><p id="r-772328" data-claire-element-id="772328">La valeur ou plutôt les valeurs qui vont nous permettre de dire au Content Pipeline que l'on veut charger un effet sonore sont <strong>Content Importer</strong> et <strong>Content Processor</strong>. Vous saurez exactement ce qu'ils représentent quand nous créerons nos extensions du Content Pipeline mais en attendant sachez juste que le <strong>Content Importer</strong> permet de définir le format du fichier à charger (généralement la valeur de cette propriété est toujours bonne) tandis que le <strong>Content Processor</strong> va permettre de renseigner quel type d'objet on veut récupérer dans le code.</p><p id="r-772329" data-claire-element-id="772329">C'est donc cette dernière propriété qu'il faut modifier pour spécifier que l'on veut un effet sonore, on peut d'ailleurs remarquer que par défaut le mp3 que j'ai mis est reconnu comme une <em>Song</em> et non comme un <em>SoundEffect</em>.</p><p id="r-772330" data-claire-element-id="772330">Vous pouvez donc changer ceci grâce au menu déroulant et le tour est joué. :)</p><figure id="r-772332" data-claire-element-id="772333"><img id="r-772331" data-claire-element-id="772331" src="medias/uploads.siteduzero.com_files_335001_336000_335333.jpg" alt="Image utilisateur"/></figure><p id="r-772334" data-claire-element-id="772334">On peut maintenant passer au chargement de ce <em>SoundEffect</em>, voici la marche à suivre on ne peut plus facile et classique.</p><pre id="r-772335" data-claire-element-id="772335"><code data-claire-semantic="csharp">SoundEffect _ballBounceWall;
...
_ballBounceWall = Content.Load&lt;SoundEffect&gt;(&quot;rebondMur&quot;);</code></pre><p id="r-772336" data-claire-element-id="772336">C'est une version raccourcie dans le cas où vous souhaitez le faire dans votre Pong mais je vous fais confiance pour trouver où placer ce code. ;)</p><p id="r-772337" data-claire-element-id="772337">Juste pour information si vous aviez mal renseigné le <strong>Content Processor</strong> dans les propriétés, c'est cette ligne qui vous lancerait une exception que voici.</p><figure id="r-772339" data-claire-element-id="772340"><img id="r-772338" data-claire-element-id="772338" src="medias/uploads.siteduzero.com_files_335001_336000_335335.jpg" alt="Exception lors d'un mauvais Content Processor"/></figure><p id="r-772341" data-claire-element-id="772341">C'est plutôt explicite. :-°</p><h6 id="r-utilisation-12" data-claire-element-id="772346">Utilisation</h6><p id="r-772343" data-claire-element-id="772343">L'utilisation est encore plus simple que le chargement !<br/> En effet la seule chose à laquelle vous avez accès sur votre <em>SoundEffect</em> est la méthode <em>Play()</em> qui va...jouer votre son ! :lol:</p><pre id="r-772344" data-claire-element-id="772344"><code data-claire-semantic="csharp">_ballBounceWall.Play();</code></pre><p id="r-772345" data-claire-element-id="772345">Essayez donc maintenant de faire en sorte qu'un son soit joué à chaque fois que la balle touche le bord d'un mur et un son différent lorsque celle-ci rebondit sur une raquette.</p><h5 id="r-soundeffectinstance" data-claire-element-id="772384">SoundEffectInstance</h5><p id="r-772348" data-claire-element-id="772348">Les <em>SoundEffect</em> en eux-même sont assez limités puisqu'on ne peut rien faire d'autre que les jouer du début à la fin. Ceci représente tout de même la majorité du comportement des effets sonores dans les jeux mais il se peut que l'on souhaite modifier légèrement le comportement de notre effet sonore.</p><p id="r-772349" data-claire-element-id="772349">Voici ce que propose le <em>SoundEffectInstance</em> :</p><ul id="r-772356" data-claire-element-id="772356"><li id="r-772351" data-claire-element-id="772351"><p id="r-772350" data-claire-element-id="772350">Modification du volume, des aigus et du balance du son ;</p></li><li id="r-772353" data-claire-element-id="772353"><p id="r-772352" data-claire-element-id="772352">Placer le son dans un univers 3D ;</p></li><li id="r-772355" data-claire-element-id="772355"><p id="r-772354" data-claire-element-id="772354">Contrôler la lecture du fichier : lecture, pause, stop, etc..</p></li></ul><h6 id="r-recuperation-d-un-soundeffectinstance" data-claire-element-id="772360">Récupération d'un SoundEffectInstance</h6><p id="r-772357" data-claire-element-id="772357">La création d'un <em>SoundEffectInstance</em> se fait à l'aide de l'objet de type <em>SoundEffect</em> sur lequel vous voulez modifier les propriétés de lecture. A priori, cette création aura lieu chaque fois qu'il y a un effet sonore à jouer et cela se passera donc localement dans votre méthode <em>Update()</em>.</p><pre id="r-772358" data-claire-element-id="772358"><code data-claire-semantic="csharp">SoundEffectInstance instance = _ballBounceWall.CreateInstance();</code></pre><p id="r-772359" data-claire-element-id="772359">Et c'est tout ! Vous avez maintenant un <em>SoundEffectInstance</em> prêt à l'emploi qui affectera le son qui était stocké dans le <em>SoundEffect</em>. A noter que si vous supprimez ce dernier (en faisant un <em>Dispose()</em> dessus par exemple), l'instance deviendra invalide et ne pourra plus être utilisée.</p><h6 id="r-modifier-le-volume-les-aigus-et-le-balance" data-claire-element-id="772370">Modifier le volume, les aigus et le balance</h6><p id="r-772361" data-claire-element-id="772361">Pour modifier le volume du son qui sera joué, vous pouvez utiliser ceci.</p><pre id="r-772362" data-claire-element-id="772362"><code data-claire-semantic="csharp">instance.Volume = 0.8f;</code></pre><p id="r-772363" data-claire-element-id="772363">La propriété <strong>Volume</strong> doit être une valeur comprise entre 0 et 1.</p><p id="r-772364" data-claire-element-id="772364">Pour modifier les aigus du son voici la propriété à modifier.</p><pre id="r-772365" data-claire-element-id="772365"><code data-claire-semantic="csharp">instance.Pitch = 0.6f;</code></pre><p id="r-772366" data-claire-element-id="772366"><strong>Pitch</strong> est une valeur entre -1 (très grave) et 1 (très aigu).</p><p id="r-772367" data-claire-element-id="772367">Enfin, pour modifier le balance du son (plus à droite ou plus à gauche) voici la ligne à écrire.</p><pre id="r-772368" data-claire-element-id="772368"><code data-claire-semantic="csharp">instance.Pan = -0.3f;</code></pre><p id="r-772369" data-claire-element-id="772369"><strong>Pan</strong> va de -1 (tout à gauche ) à 1 (tout à droite).</p><h6 id="r-placer-le-son-en-3d" data-claire-element-id="772375">Placer le son en 3D</h6><p id="r-772371" data-claire-element-id="772371">Je ne vais pas pousser très loin les explications puisque pour des jeux en 2D ceci ne vous servira pas à grand chose mais sachez que c'est possible. ;)</p><p id="r-772372" data-claire-element-id="772372">Le principe est de renseigner où se trouve l'émetteur et où se trouve le receveur du son. Voici la procédure à suivre pour le configurer, comme je vous l'ai dit, il va falloir attendre la partie sur la 3D pour bien tout comprendre (surtout pour le système de coordonnées en 3D). ;)</p><pre id="r-772373" data-claire-element-id="772373"><code data-claire-semantic="csharp">// On définit la position de l'émetteur et de l'écouteur
AudioEmitter emitter = new AudioEmitter();
AudioListener listener = new AudioListener();
emitter.Position = new Vector3(10, 0, 0);
listener.Position = Vector3.Zero;

// On applique ces paramêtres à l'instance
instance.Apply3D(listener, emitter);</code></pre><p id="r-772374" data-claire-element-id="772374">Et voilà ! Notre son est placé dans un espace 3D.</p><h6 id="r-controler-la-lecture-du-son" data-claire-element-id="772383">Contrôler la lecture du son</h6><p id="r-772376" data-claire-element-id="772376">Une fois que vous avez modifié toutes les propriétés précédentes, vous allez pouvoir jouer votre son.</p><p id="r-772377" data-claire-element-id="772377">Dans le cas où vous souhaitez gérer vous-même l'arrêt de la lecture au moment opportun, il est vraisemblable que la manipulation de votre <em>SoundEffectInstance </em>ne se limite pas à une seule exécution de la méthode <em>Update()</em> (sinon la lecture du son serait extrêmement brève). Vous aurez alors certainement intérêt à faire de votre instance une variable membre de votre classe - comme le <em>SoundEffect </em>lui-même, qui sert simplement d'asset ici - afin de pouvoir manipuler cette instance à travers les appels successifs de <em>Update()</em>. La création de votre instance pourra alors se faire dans la méthode <em>LoadContent()</em> ou <em>Update()</em>, au choix. N'oubliez pas également qu'il est fort possible d'avoir plusieurs instances à jouer en parallèle, tout comme vous pouvez avoir plusieurs Sprites à afficher en parallèle. ;)</p><p id="r-772378" data-claire-element-id="772378">Voici comment déclarer qu'une instance doit être jouée en boucle jusqu'à son arrêt :</p><pre id="r-772379" data-claire-element-id="772379"><code data-claire-semantic="csharp">instance.IsLooped = true;</code></pre><p id="r-772380" data-claire-element-id="772380">Puis la jouer, la mettre en pause ou la stopper très simplement :</p><pre id="r-772381" data-claire-element-id="772381"><code data-claire-semantic="csharp">instance.Play();
instance.Pause();
instance.Stop();</code></pre><p id="r-772382" data-claire-element-id="772382">Pour finir, vous pouvez vérifier l'état de votre son (s'il est en train d'être lu, en pause ou stopper) avec la propriété <strong>State</strong> de l'instance qui peut prendre une de ces trois valeurs : <strong>SoundState.Paused</strong>, <strong>SoundState.Playing</strong> et <strong>SoundState.Stopped</strong>.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
<span class="arrow"></span>
<span class="next">Présentation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
<span class="next">Les musiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesmusiques"></a><h2>Les musiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
<span class="arrow"></span>
<span class="next">Les effets sonores</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
<span class="next">Pour aller plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-musiques-2" data-claire-element-id="772415">Les musiques</h4><h5 id="r-song" data-claire-element-id="772398">Song</h5><h6 id="r-presentation-38" data-claire-element-id="772392">Présentation</h6><p id="r-772386" data-claire-element-id="772386">La classe <em>Song</em> va représenter, comme son nom l'indique, une chanson qui dans l'absolu ressemble à un <em>SoundEffect</em> puisqu'elle contient une donnée audio. La différence majeure est l'objectif final de la classe qui va plutôt contenir des sons longs, des musiques. On peut d'ailleurs le remarquer avec les propriétés que proposent les instances de <em>Song</em>.</p><p id="r-772387" data-claire-element-id="772387">Parmi elles, on retrouve le titre, l'artiste et même l'album, vous voyez donc que c'est très orienté musique ou chanson.</p><p id="r-772388" data-claire-element-id="772388">Pour utiliser les classes que je vais vous présenter juste après, vous aurez besoin d'ajouter une nouvelle clause <code data-claire-semantic="csharp">using</code> que voici.</p><pre id="r-772389" data-claire-element-id="772389"><code data-claire-semantic="csharp">using Microsoft.Xna.Framework.Media;</code></pre><aside id="r-772391" data-claire-element-id="772391" data-claire-semantic="warning"><p id="r-772390" data-claire-element-id="772390">Il se peut que vous ayez des problèmes à l'utilisation de fichiers protégés par DRM. Si le problème survient vérifiez que votre lecteur Windows Media Player est bien installé et configuré. En tous cas, sachez que la majorité des musiques protégées par DRM ne peuvent pas être distribuées dans un jeu, faites donc bien attention aux licences avant de distribuer vos réalisations, ça peut vous éviter des ennuis. ;)</p></aside><h6 id="r-chargement-7" data-claire-element-id="772397">Chargement</h6><p id="r-772393" data-claire-element-id="772393">Tout comme n'importe quel contenu, on va charger notre chanson via le Content Pipeline mais cette fois-ci assurez-vous bien que la propriété <strong>Content Processor</strong> de votre fichier est sur <strong>Song</strong> (ce qui est normalement le défaut pour tous les types de fichier audio excepté le <strong>.wav</strong>).</p><p id="r-772394" data-claire-element-id="772394">Voici donc de manière très simple comment charger une chanson.</p><pre id="r-772395" data-claire-element-id="772395"><code data-claire-semantic="csharp">// Déclaration de l'attribut
private Song _song;
...
...
// Dans LoadContent()
_song = Content.Load&lt;Song&gt;(&quot;songAssetName&quot;);</code></pre><p id="r-772396" data-claire-element-id="772396">Et c'est tout ! Vous ne pourrez de toute façon pas faire grand chose de plus avec un objet de type <em>Song</em>, il n'y a pas par exemple de méthode <em>Play()</em> comme sur un <em>SoundEffect</em>. ;)</p><h5 id="r-mediaplayer" data-claire-element-id="772414">MediaPlayer</h5><h6 id="r-presentation-39" data-claire-element-id="772403">Présentation</h6><p id="r-772399" data-claire-element-id="772399">Comme je viens de vous l'indiquer, un objet de type <em>Song</em> ne se suffit pas à lui même pour être utilisé. Alors pourquoi cela ? Imaginez tout simplement que Song est une chanson présente sur votre disque dur, pour pouvoir la lire vous aller utiliser un lecteur (Windows Media Player, VLC, Zune, ...). Eh bien c'est exactement la même chose avec les chansons en XNA et le lecteur ici sera la classe <em>MediaPlayer</em>.</p><p id="r-772400" data-claire-element-id="772400">Cette classe est statique donc dès que vous voudrez utiliser une de ses méthodes ou une de ses propriétés, il faudra que vous entriez le nom de la classe et non celui d'une instance.<br/> Si je faisais l'analogie avec votre lecteur de musique classique, ce n'est pas pour rien. En effet, vous allez pouvoir avec <em>MediaPlayer</em> faire les actions de base dont vous avez l'habitude pour de la lecture de chansons : jouer une musique, la mettre en pause, modifier le volume, etc... Il est même possible de récupérer des playlists mais je ne l'aborderai pas pour des raisons que j'expose à la fin de cette partie. :)</p><aside id="r-772402" data-claire-element-id="772402" data-claire-semantic="warning"><p id="r-772401" data-claire-element-id="772401">MediaPlayer est très proche d'un lecteur audio classique mais est avant tout une classe statique, de ce fait il n'est possible de jouer qu'une seule musique à la fois. Il faut donc réellement ne l'utiliser que pour des musiques de fond et utiliser des effets sonores pour tout le reste.</p></aside><h6 id="r-utilisation-13" data-claire-element-id="772413">Utilisation</h6><p id="r-772404" data-claire-element-id="772404">Maintenant que les présentations sont faites, voyons comment on utilise tout ça.</p><p id="r-772405" data-claire-element-id="772405">Les actions les plus courantes sont tout simplement le contrôle de la lecture : <strong>Play</strong>, <strong>Pause</strong> et <strong>Stop</strong> que voici sur notre <em>Song</em> chargé précédemment.</p><pre id="r-772406" data-claire-element-id="772406"><code data-claire-semantic="csharp">MediaPlayer.Play(_song);
MediaPlayer.Pause();
MediaPlayer.Resume();
MediaPlayer.Stop();</code></pre><p id="r-772407" data-claire-element-id="772407">Ces actions n'ont pas de place attitrée, vous les placez là où vous souhaitez modifier la lecture de votre musique.</p><p id="r-772408" data-claire-element-id="772408">Il est aussi possible de maitriser certaines options de lecture courantes dont voici les principales.</p><pre id="r-772409" data-claire-element-id="772409"><code data-claire-semantic="csharp">// Définit si le MediaPlayer est muet ou non
MediaPlayer.IsMuted = false;

// Définit si le MediaPlayer doit jouer en boucle
MediaPlayer.IsRepeating = true;

// Définit si les titres de la playlist
// sont joués dans le désordre (true) ou dans l'ordre (false)
MediaPlayer.IsShuffled = true;

// Définit le volume du lecteur, valeur comprise en 0 et 1
MediaPlayer.Volume = 0.8f;</code></pre><p id="r-772410" data-claire-element-id="772410">Ce code trouve sa place dans <em>Initialize()</em> puisque l'on modifie des propriétés mais évidemment il peut être nécessaire de les modifier en cours de jeu donc ailleurs. ;)</p><p id="r-772411" data-claire-element-id="772411">L'implémentation des Playlists avec le <em>MediaPlayer</em> est, il faut l'avouer, assez médiocre puisqu'il va aller chercher les musiques à l'aide de Windows Media Player.<br/> Autrement dit si vous n'avez aucune musique dans ce logiciel, vous ne pourrez pas les retrouver dans XNA.</p><p id="r-772412" data-claire-element-id="772412">Je n'en parlerai donc pas plus que ça car il ne me semble pas intéressant de l'aborder.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
<span class="arrow"></span>
<span class="next">Les effets sonores</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
<span class="next">Pour aller plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Pourallerplusloin"></a><h2>Pour aller plus loin</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
<span class="arrow"></span>
<span class="next">Les musiques</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pour-aller-plus-loin-5" data-claire-element-id="772438">Pour aller plus loin</h4><p id="r-772416" data-claire-element-id="772416">Nous avons vu dans ce chapitre deux manières différentes de jouer du son. Sachez qu'il en existe une dernière qui est bien plus complexe mais aussi bien plus complète et qui va permettre de mieux organiser vos sons.</p><p id="r-772417" data-claire-element-id="772417">Cette 3ème méthode s'appelle les projets <strong>XACT</strong> (pour <strong>Cross-platform Audio Creation Tool</strong>). Un Projet XACT est un projet Audio à part entière dans lequel un designer audio peut ajouter des sons, les agencer, créer des transitions, etc... C'est donc une méthode bien plus puissante que ce que l'on a vu ici mais aussi bien plus complexe (des connaissances techniques en audio sont un plus).</p><p id="r-772418" data-claire-element-id="772418">Je ne donnerai pas d'explications sur ces projets XACT car ils sont surtout utilisés sur des gros voire très gros projets.</p><aside id="r-772420" data-claire-element-id="772420" data-claire-semantic="information"><p id="r-772419" data-claire-element-id="772419">Les projets XACT ne fonctionnent pas sur Windows Phone.</p></aside><p id="r-772421" data-claire-element-id="772421">Pour ceux qui seraient tout de même intéressés, voici quelques liens pour commencer.</p><ul id="r-772428" data-claire-element-id="772428"><li id="r-772423" data-claire-element-id="772423"><p id="r-772422" data-claire-element-id="772422"><a href="http://msdn.microsoft.com/fr-fr/library/ff827592.aspx">Guide de démarrage</a>.</p></li><li id="r-772425" data-claire-element-id="772425"><p id="r-772424" data-claire-element-id="772424"><a href="http://msdn.microsoft.com/fr-fr/library/dd940199.aspx">Ajout d'un fichier audio à un projet XACT</a>.</p></li><li id="r-772427" data-claire-element-id="772427"><p id="r-772426" data-claire-element-id="772426"><a href="http://msdn.microsoft.com/fr-fr/library/dd231915.aspx">Lecture d'un son dans XNA à partir d'un projet XACT</a>.</p></li></ul><p id="r-772429" data-claire-element-id="772429">Bon courage si vous vous lancez dans l'expérience XACT. ;)</p><p id="r-772430" data-claire-element-id="772430">Maintenant que ce chapitre est passé, vous pouvez ajouter du son à votre Pong !<br/> Et vous allez voir que le son est réellement indispensable pour qu'un jeu soit prenant donc n'hésitez pas à passer le temps nécessaire à faire une bonne intégration des musiques d'ambiance, des effets sonores et compagnie.</p><p id="r-772431" data-claire-element-id="772431">Et voilà vous avez déjà de bonnes bases et de bon outils pour travailler et créer des jeux fonctionnels en 2D. N'hésitez pas à montrer vos créations sur le forum si le cœur vous en dit. :)</p><p id="r-772432" data-claire-element-id="772432">Évidemment l'apprentissage est loin d'être terminé mais cette partie a permis de découvrir le cœur de XNA. La prochaine partie quant à elle est plus centrée sur des &quot;techniques&quot; utilisées dans le jeu vidéo pour arriver à ses fins et le framework sera là pour nous faciliter l'implémentation de ces techniques.</p><p id="r-772433" data-claire-element-id="772433">Autrement dit, les choses funs et plus poussées arrivent maintenant !</p><p id="r-772434" data-claire-element-id="772434">La route est encore longue pour atteindre la fin de ce tutoriel.</p><p id="r-772435" data-claire-element-id="772435">N'hésitez pas à me laisser des commentaires pour les améliorations que vous voyez et posez des questions sur le forum si vous en avez, il y a plein de gens prêts à vous répondre ! :)</p><p id="r-772436" data-claire-element-id="772436">J'espère que ce tutoriel vous est utile et surtout qu'il vous a donné envie de développer des jeux avec XNA.</p><p id="r-772437" data-claire-element-id="772437">Pour finir, merci à Orwell pour sa correction et ses conseils.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna">Le développement de jeux vidéo avec XNA</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Introduction à XNA par la 2D
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-de-xna">Présentation de XNA</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/qu-est-ce-que-c-est-9">
Qu&#039;est-ce que c&#039;est ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pourquoi-l-utiliser-2">
Pourquoi l&#039;utiliser ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-outils-necessaires-6">
Les outils nécessaires
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/premier-jeu-premiere-approche">Premier jeu, première approche</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-un-projet-xna">
Création d&#039;un projet XNA
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/la-boucle-de-jeu-contre-l-evenementiel">
La boucle de jeu contre l&#039;événementiel
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/explication-de-la-boucle-de-jeu-xna">
Explication de la boucle de jeu XNA
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utiliser-des-images">Utiliser des images</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajout-d-image-au-projet">
Ajout d&#039;image au projet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/affichage-de-l-image-2">
Affichage de l&#039;image
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/deplacer-l-image-sur-l-ecran">
Déplacer l&#039;image sur l&#039;écran
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/afficher-du-texte-3">Afficher du texte</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-spritefont">
Le SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/chargement-d-un-spritefont">
Chargement d&#039;un SpriteFont
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/utilisation-du-spritefont">
Utilisation du SpriteFont
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interaction-avec-le-joueur">Interaction avec le joueur</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/quelques-generalites-4">
Quelques généralités
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/clavier-2">
Clavier
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/souris-4">
Souris
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/creation-d-une-classe-sprite">Création d&#039;une classe Sprite</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/interet-de-faire-une-telle-classe">
Interêt de faire une telle classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-caracteristiques-de-notre-classe">
Les caractéristiques de notre classe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/le-code-de-la-classe">
Le code de la classe
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/tp-pong">TP : Pong</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-du-tp">
Présentation du TP
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/indications-pour-bien-commencer">
Indications pour bien commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/correction-67">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/ajouter-du-son">Ajouter du son</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/presentation-37">
Présentation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-effets-sonores">
Les effets sonores
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
Les musiques
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/pour-aller-plus-loin-5">
Pour aller plus loin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/le-developpement-de-jeux-video-avec-xna/les-musiques-2">
<span class="arrow"></span>
<span class="next">Les musiques</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/le-developpement-de-jeux-video-avec-xna.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:20:03 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/le-developpement-de-jeux-video-avec-xna.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:17:51 GMT -->
</html>