<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/xajax-applications-ajax-faciles-avec-php-et-xajax.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:41:20 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/xajax-applications-ajax-faciles-avec-php-et-xajax.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:35:36 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : [xAjax] Applications AJAX faciles avec PHP et xAjax !</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : [xAjax] Applications AJAX faciles avec PHP et xAjax !</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#xAjaxApplicationsAJAXfacilesavecPHPetxAjax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a><br/><a href="#IntroductionlalibrairiexAjaxetlaPOO">Introduction à la librairie xAjax et à la POO</a><br/><a href="#LesdbutsavecxAjax">Les débuts avec xAjax</a><br/><a href="#crireetappelerdesfonctionsavecxAjax">Écrire et appeler des fonctions avec xAjax</a><br/><a href="#RecevoirettraiterunerponsexAjaxdanssesfonctions">Recevoir et traiter une réponse xAjax dans ses fonctions</a><br/><a href="#UnChatenxAjax">Un Chat en xAjax!</a><br/><a href="#xAjaxetl039encodagedecaractres">xAjax et l&#039;encodage de caractères</a><br/><a href="#TraiterdesformulairesavecxAjax">Traiter des formulaires avec xAjax</a><br/><a href="#CrerunmessagedechargementavecxAjax">Créer un message de chargement avec xAjax</a><br/><a href="#RsumdesmthodesxAjax">Résumé des méthodes xAjax</a><br/></div>
<a name="xAjaxApplicationsAJAXfacilesavecPHPetxAjax"></a><h2>[xAjax] Applications AJAX faciles avec PHP et xAjax !</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
<span class="next">Introduction à la librairie xAjax et à la POO</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-418514" data-claire-element-id="418514">Bonjour à tous !<br/> Comme c'est indiqué dans le titre, ce tutoriel est consacré à la librairie xAjax !</p><div id="r-418516" data-claire-element-id="418516" data-claire-semantic="question"><p id="r-418515" data-claire-element-id="418515">C'est pas du produit pour nettoyer l'évier ce truc ? :euh:</p></div><p id="r-418517" data-claire-element-id="418517"><strong>xAjax</strong> est une librairie open source toujours en développement, qui permet de déployer des applications AJAX puissantes très facilement en ayant des bases de PHP (attention je me permets d'insister, xAjax n'est pas AJAX, ce n'est qu'un moyen d'en faire très facilement !). <strong>AJAX</strong> signifie <em>Asynchronous Javascript And XML</em> : ce type d'application permet de maintenir une communication entre le serveur et le client, sans que celui-ci n'ait besoin de recharger la page.</p><p id="r-418518" data-claire-element-id="418518">N'avez-vous jamais rêvé d'un <em>chat</em> où vous n'avez pas besoin de recharger la page ? Ou encore d'un formulaire de connexion qui ne charge pas une nouvelle page pour vous afficher un message d'erreur, vous disant « mot de passe erroné ! » ?</p><p id="r-418519" data-claire-element-id="418519">Voilà à quoi sert xAjax ! Je ne vous fais pas baver plus longtemps, roulez jeunesse ! ;)</p><p id="r-418520" data-claire-element-id="418520"><strong>Niveau : 3/10 - Débutant</strong></p>
</div><a name="IntroductionlalibrairiexAjaxetlaPOO"></a><h2>Introduction à la librairie xAjax et à la POO</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
<span class="next">Les débuts avec xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<aside id="r-418522" data-claire-element-id="418522" data-claire-semantic="warning"><p id="r-418521" data-claire-element-id="418521">Je tiens d'abord à vous prévenir ; en écrivant ce tutoriel, je pars du principe que vous connaissez les bases du PHP, c'est-à-dire que vous savez faire des conditions (if, elseif, else), des boucles (while, for) et que vous connaissez le xHTML (pour afficher les données). Si vous ne connaissez pas tout cela, ne continuez pas : vous risqueriez de perdre du temps (déjà que je ne suis pas le pro de l'explication…). De légères connaissances en Javascript sont utiles mais pas indispensables.</p></aside><aside id="r-418524" data-claire-element-id="418524" data-claire-semantic="information"><p id="r-418523" data-claire-element-id="418523">Avant de commencer, il va falloir télécharger la librairie PHP xAjax (prenez la version xAjax 0.5 Final Standard) sur le site <a href="http://www.xajax-project.org/en/download/">xajax-project.org</a>, et copiez les dossiers <strong>xajax_core</strong>, <strong>xajax_js</strong>, <strong>xajax_controls</strong>, et <strong>xajax_plugins</strong> à la racine de votre site ! :)</p></aside><p id="r-418525" data-claire-element-id="418525">Voilà, c'est téléchargé ? Bon, continuons ! ;)</p><div id="r-418527" data-claire-element-id="418527" data-claire-semantic="question"><p id="r-418526" data-claire-element-id="418526">Concrètement, que va faire xAjax ?</p></div><p id="r-418528" data-claire-element-id="418528">Voyons deux cas : le premier sans xAjax, le second avec.</p><p id="r-418529" data-claire-element-id="418529">Sans xAjax, on aurait le schéma suivant :</p><ol id="r-418540" data-claire-element-id="418540"><li id="r-418531" data-claire-element-id="418531"><p id="r-418530" data-claire-element-id="418530">l'utilisateur appelle une page ;</p></li><li id="r-418533" data-claire-element-id="418533"><p id="r-418532" data-claire-element-id="418532">le serveur génère la page ;</p></li><li id="r-418535" data-claire-element-id="418535"><p id="r-418534" data-claire-element-id="418534">le serveur renvoie la page finale ;</p></li><li id="r-418537" data-claire-element-id="418537"><p id="r-418536" data-claire-element-id="418536">la page est affichée par le navigateur de l'utilisateur ;</p></li><li id="r-418539" data-claire-element-id="418539"><p id="r-418538" data-claire-element-id="418538">fin des échanges entre le serveur et l'utilisateur (impossible de mettre les informations de la page à jour sans actualiser et recommencer le schéma depuis le n°1).</p></li></ol><p id="r-418541" data-claire-element-id="418541">Avec xAjax, on aurait ceci :</p><ol id="r-418552" data-claire-element-id="418552"><li id="r-418543" data-claire-element-id="418543"><p id="r-418542" data-claire-element-id="418542">l'utilisateur appelle une page ;</p></li><li id="r-418545" data-claire-element-id="418545"><p id="r-418544" data-claire-element-id="418544">le serveur génère la page ;</p></li><li id="r-418547" data-claire-element-id="418547"><p id="r-418546" data-claire-element-id="418546">le serveur renvoie la page finale ;</p></li><li id="r-418549" data-claire-element-id="418549"><p id="r-418548" data-claire-element-id="418548">la page est affichée par le navigateur de l'utilisateur ;</p></li><li id="r-418551" data-claire-element-id="418551"><p id="r-418550" data-claire-element-id="418550">xAjax <strong>maintient une connexion asynchrone</strong> avec le serveur en effectuant des requêtes en tâches de fond, et va mettre à jour notre page sans rechargement, de manière totalement transparente pour l'utilisateur, en recommençant le schéma au n°2 (nous sautons donc le point n°1, l'utilisateur n'a pas besoin d'effectuer une action pour que la page se mette à jour).</p></li></ol><p id="r-418553" data-claire-element-id="418553">Vous voyez bien ici quelle est <strong>l'utilité de xAjax : soumettre des requêtes au serveur de façon transparente (en tâche de fond), et modifier la page grâce aux résultats retournés !</strong></p><div id="r-418555" data-claire-element-id="418555" data-claire-semantic="question"><p id="r-418554" data-claire-element-id="418554">Qu'est-ce qu'une librairie PHP ?</p></div><p id="r-418556" data-claire-element-id="418556">C'est une page regroupant un ensemble de fonctions qui vont nous permettre de réaliser des actions (normalement longues, répétitives, difficiles et rébarbatives) de façon simple, en les appelant dans notre script. <br/> Un exemple : nous souhaitons gérer un caddie dans notre galerie marchande :</p><pre id="r-418557" data-claire-element-id="418557"><code data-claire-semantic="html+php">&lt;?php
        function total_caddie($caddie)
        {
                // Calcule le montant total des achats.
        }
        function nombre_articles($caddie)
        {
                // Retourne le nombre d'articles présents dans le caddie.
        }
        function ajouter_article($produit, $caddie)
        {
                // Va ajouter un article à notre caddie.
        }
        // Etc.
?&gt;</code></pre><p id="r-418558" data-claire-element-id="418558">Grâce à cet ensemble de fonctions PHP, il sera très simple pour le programmeur de calculer facilement le montant du caddie, en appelant simplement la fonction total_caddie() par exemple. ^^</p><p id="r-418559" data-claire-element-id="418559">Néanmoins, dans notre librairie xAjax, ça ne se présente pas de cette façon (ouvrez le fichier, vous verrez) ! :p <br/> Compliquons un peu les choses. Nous venons de regrouper du code dans des fonctions ; eh bien nous pouvons regrouper nos fonctions dans des classes. Vous voyez, c'est un peu comme des boîtes : le code est contenu dans la boîte fonction, et la boîte fonction est contenue dans la boîte classe. On appelle ces fonctions des <strong>méthodes</strong>.</p><p id="r-418560" data-claire-element-id="418560">Chaque boîte « classe » sert à faire quelque chose ; pour xAjax, nous allons nous servir de deux classes de la librairie : l'une sert à « <em>configurer et générer le Javascript</em> », l'autre à « <em>gérer les résultats</em> ».</p><p id="r-418561" data-claire-element-id="418561">Ainsi, notre librairie xAjax se présente de cette façon :</p><pre id="r-418562" data-claire-element-id="418562"><code data-claire-semantic="html+php">&lt;?php
class xajax($chemin_xajax) // La classe qui va nous permettre de générer le Javascript.
{
        function fonction1() // Première fonction.
        {
                // Code...
        }
        function fonction2() // Deuxième fonction.
        {
                // Code...
        }
        function fonction3() // Troisième fonction.
        {
                // Code...
        }
        // Etc.
}

class xajaxResponse() // La classe qui va nous permettre de gérer les réponses de xAjax.
{
        function fonction1() // Première fonction.
        {
                //Code...
        }
        function fonction2() // Deuxième fonction.
        {
                // Code...
        }
        function fonction3() // Troisième fonction.
        {
                // Code...
        }
        // Etc.
}</code></pre><p id="r-418563" data-claire-element-id="418563">Vous voyez, ce n'est pas bien compliqué pour le moment. Bien sûr, vous ne connaissez pas les fonctions qui se trouvent dans la librairie ni leur utilité ; c'est normal, je vais vous l'apprendre dans ce tutoriel ! ^^</p><p id="r-418564" data-claire-element-id="418564">Pour pouvoir appeler nos méthodes, <strong>il faut créer une instance d'une classe</strong>.<br/> Oulah… Cachez cet air ébahi ! :p <br/> Pour reprendre notre exemple des boîtes, créer une instance d'une classe signifie ouvrir la boîte pour avoir accès à toutes les fonctions de la classe. Voici un exemple. Nous avons notre classe caddie avec les fonctions pour calculer le total, etc., à l'intérieur :</p><pre id="r-418565" data-claire-element-id="418565"><code data-claire-semantic="html+php">&lt;?php
class caddie
{
        function total_caddie($caddie)
        {
                // Calcule le montant total des achats.
        }
        function nombre_articles($caddie)
        {
                // Retourne le nombre d'articles présents dans le caddie.
        }
        function ajouter_article($produit, $caddie)
        {
                // Va ajouter un article à notre caddie.
        }
        // Etc.
}

$caddie_client = new caddie(); // On crée une instance de la classe caddie (en gros, on ouvre la boite caddie).

$caddie_client-&gt;total_caddie($achats_du_client); // On appelle la fonction total_caddie() qui se trouve dans la classe.

$caddie_client-&gt;ajouter_article('pull_over', $achats_du_client); // On appelle la fonction ajouter_article().

// Etc.
?&gt;</code></pre><p id="r-418566" data-claire-element-id="418566">Voilà : vous venez de comprendre le principe de la Programmation Orientée Objet (POO). Les bases de la POO que je viens de vous donner ici sont suffisantes pour comprendre la suite du tutoriel. <br/> Si vous en savez plus sur la POO, tant mieux ! :p <br/> Sinon, voici un super tutoriel sur le Site du Zéro : <a href="http://www.siteduzero.com/tutoriel-3-147180-la-programmation-orientee-objet-en-php.html">tutoriel sur la POO</a>.</p><table id="r-418578" data-claire-element-id="418578"><thead id="r-418570" data-claire-element-id="418570"><tr id="r-418569" data-claire-element-id="418569"><th id="r-418568" data-claire-element-id="418568"><p id="r-418567" data-claire-element-id="418567">Bilan de cette introduction</p></th></tr></thead><tbody id="r-418577" data-claire-element-id="418577"><tr id="r-418573" data-claire-element-id="418573"><td id="r-418572" data-claire-element-id="418572"><p id="r-418571" data-claire-element-id="418571">Retenez bien ce que signifie « <strong>créer une instance d'une classe</strong> », car ce vocabulaire sera utilisé plusieurs fois dans ce tutoriel !</p></td></tr><tr id="r-418576" data-claire-element-id="418576"><td id="r-418575" data-claire-element-id="418575"><p id="r-418574" data-claire-element-id="418574">Retenez bien que les fonctions qui sont contenues dans les classes s'appellent des <strong>méthodes</strong> !</p></td></tr></tbody></table>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
Introduction à la librairie xAjax et à la POO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
Les débuts avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
Écrire et appeler des fonctions avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
Recevoir et traiter une réponse xAjax dans ses fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
Un Chat en xAjax!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
xAjax et l&#039;encodage de caractères
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
Traiter des formulaires avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
Créer un message de chargement avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
Résumé des méthodes xAjax
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
<span class="next">Les débuts avec xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LesdbutsavecxAjax"></a><h2>Les débuts avec xAjax</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
<span class="arrow"></span>
<span class="next">Introduction à la librairie xAjax et à la POO</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
<span class="next">Écrire et appeler des fonctions avec xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418580" data-claire-element-id="418580">Maintenant que nous sommes au point avec la POO, commençons !</p><pre id="r-418581" data-claire-element-id="418581"><code data-claire-semantic="html+php">&lt;?php
require_once('./xajax_core/xajax.inc.php');
$xajax = new xajax(); // On initialise l'objet xajax.
$xajax-&gt;processRequest(); // Fonction qui va se charger de générer le Javascript, à partir des données que l'on a fournies à xAjax.
?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; &gt;
        &lt;head&gt;
                &lt;title&gt;Page xajax&lt;/title&gt;
                &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot; /&gt;
                &lt;?php $xajax-&gt;printJavascript(); /* Fonction qui affiche le javascript de la page. */  ?&gt;
        &lt;/head&gt;
        &lt;body&gt;
                &lt;div id=&quot;block&quot;&gt;&lt;/div&gt;
        &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-418582" data-claire-element-id="418582">Vous allez penser que je suis un sadique de vous coller ce pâté devant le nez, mais si on s'y penche bien, vous verrez que vous connaissez presque toutes les lignes. On va les décomposer ensemble :</p><pre id="r-418583" data-claire-element-id="418583"><code data-claire-semantic="html+php">&lt;?php
require_once('./xajax_core/xajax.inc.php');
?&gt;</code></pre><p id="r-418584" data-claire-element-id="418584">Dans un premier temps, on indique à PHP qu'il doit inclure notre librairie xAjax dans la page. La librairie se trouve dans le répertoire <strong>xajax_core</strong> (« <em>core</em> » signifiant le « cœur » de la librairie).</p><pre id="r-418585" data-claire-element-id="418585"><code data-claire-semantic="html+php">&lt;?php
$xajax = new xajax(); // On crée une instance de la classe xajax.
?&gt;</code></pre><p id="r-418586" data-claire-element-id="418586">Voilà une ligne bien obscure dans vos pensées… Oui, oui, je vois cela dans vos yeux. o_O <br/> En fait, ce n'est pas si dur ! On a créé une instance de xAjax, et grâce à cet objet, on va pouvoir appeler toutes les méthodes qui se trouvent dans la classe xAjax !<br/> Comme je le disais plus haut, cet objet va nous permettre de générer le Javascript de la page. Il est donc <strong>indispensable</strong> !</p><pre id="r-418587" data-claire-element-id="418587"><code data-claire-semantic="html+php">&lt;?php
$xajax-&gt;processRequest();// Fonction qui va se charger de générer le Javascript à partir des données que l'on a fournies à xAjax.
?&gt;</code></pre><p id="r-418588" data-claire-element-id="418588">Ici, on fait appel à la méthode processRequest(). Au début, j'ai eu du mal à comprendre à quoi elle pouvait servir. En fait, elle va ordonner à xAjax de générer le Javascript de notre page une fois que nous lui aurons fourni toutes les informations qui lui sont nécessaires (nom des fonctions, etc.).</p><aside id="r-418590" data-claire-element-id="418590" data-claire-semantic="warning"><p id="r-418589" data-claire-element-id="418589">Attention, il faut mettre cette fonction en début de page, avant d'avoir envoyé des informations au navigateur ! (Comme pour les <em>headers</em>, ou les <em>session_start</em> si vous voulez.)</p></aside><pre id="r-418591" data-claire-element-id="418591"><code data-claire-semantic="html+php">&lt;?php
$xajax-&gt;printJavascript();// Fonction qui va afficher le Javascript de la page.
?&gt;</code></pre><p id="r-418592" data-claire-element-id="418592">La seconde méthode indispensable, printJavascript(), va afficher le Javascript généré dans notre page xHTML. En effet, les applications AJAX reposent en grosse partie sur Javascript, mais pas besoin de connaître beaucoup ce langage pour utiliser xAjax ! Et c'est cela l'avantage, on ne s'embête plus avec le langage capricieux qu'est Javascript, xAjax s'en occupe !</p><h2 id="r-premier-bilan" data-claire-element-id="418603">Premier bilan</h2><ul id="r-418599" data-claire-element-id="418599"><li id="r-418594" data-claire-element-id="418594"><p id="r-418593" data-claire-element-id="418593">Bien retenir comment l'on crée une instance de xajax et quel est son rôle.</p></li><li id="r-418596" data-claire-element-id="418596"><p id="r-418595" data-claire-element-id="418595">Puis on fait appel ensuite à la méthode processRequest() <strong>avant d'envoyer des infos au navigateur</strong>.</p></li><li id="r-418598" data-claire-element-id="418598"><p id="r-418597" data-claire-element-id="418597">Enfin, on fait appel à la méthode printJavascript()<strong>entre les balises &lt;HEAD&gt;&lt;/HEAD&gt;</strong> pour afficher le Javascript.</p></li></ul><div id="r-418601" data-claire-element-id="418601" data-claire-semantic="question"><p id="r-418600" data-claire-element-id="418600">C'est bien joli tout ça, mais j'ai toujours rien sur mon écran, moi. C'est normal ?</p></div><p id="r-418602" data-claire-element-id="418602">Ça l'est : disons que nous avons appris là le strict minimum à mettre dans une page pour exécuter une application AJAX. <strong>À chaque fois que vous utilisez xAjax, il faut créer votre objet xajax(), et appeler les méthodes nécessaires (processRequest() et printJavascript()). Retenez bien cela, c'est indispensable !</strong></p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
Introduction à la librairie xAjax et à la POO
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
Les débuts avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
Écrire et appeler des fonctions avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
Recevoir et traiter une réponse xAjax dans ses fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
Un Chat en xAjax!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
xAjax et l&#039;encodage de caractères
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
Traiter des formulaires avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
Créer un message de chargement avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
Résumé des méthodes xAjax
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
<span class="arrow"></span>
<span class="next">Introduction à la librairie xAjax et à la POO</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
<span class="next">Écrire et appeler des fonctions avec xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="crireetappelerdesfonctionsavecxAjax"></a><h2>Écrire et appeler des fonctions avec xAjax</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
<span class="arrow"></span>
<span class="next">Les débuts avec xAjax</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
<span class="next">Recevoir et traiter une réponse xAjax dans ses fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418605" data-claire-element-id="418605">Maintenant que vous connaissez les bases, passons à l'utilisation concrète de xAjax.</p><p id="r-418606" data-claire-element-id="418606">Ce qu'on souhaite faire avec cette librairie, c'est exécuter du code en asynchrone (sans rechargement de la page).</p><div id="r-418608" data-claire-element-id="418608" data-claire-semantic="question"><p id="r-418607" data-claire-element-id="418607">Comment programmer mon code qui sera exécuté en asynchrone ?</p></div><p id="r-418609" data-claire-element-id="418609">Tout simplement en PHP ! ^^ Et c'est ça, l'avantage !</p><p id="r-418610" data-claire-element-id="418610">Il faut écrire le code à exécuter dans une <strong>fonction PHP</strong>, et <strong>l'enregistrer avec une méthode xAjax</strong> que je vais vous donner :</p><pre id="r-418611" data-claire-element-id="418611"><code data-claire-semantic="html+php">&lt;?php
$xajax-&gt;register(XAJAX_FUNCTION, 'MaFonctionPHP');
?&gt;</code></pre><p id="r-418612" data-claire-element-id="418612">Au final, vous aurez ceci dans votre page :</p><pre id="r-418613" data-claire-element-id="418613"><code data-claire-semantic="html+php">&lt;?php
function MaFonctionPHP(argument1, argument2, ...)
{
        // Code à exécuter.
}
require_once('./xajax_core/xajax.inc.php');
$xajax = new xajax(); // On initialise l'objet xajax.
$xajax-&gt;register(XAJAX_FUNCTION, 'MaFonctionPHP'); // Déclaration de la fonction MaFonctionPHP.
$xajax-&gt;processRequest(); // Fonction qui va se charger de générer le Javascript à partir des données que l'on a fournies à xAjax.
?&gt;
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; &gt;
        &lt;head&gt;
                &lt;title&gt;Page xajax&lt;/title&gt;
                &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot; /&gt;
                &lt;?php $xajax-&gt;printJavascript(); /* Fonction qui va afficher le Javascript de la page */ ?&gt;
        &lt;/head&gt;
        &lt;body&gt;
                &lt;div id=&quot;block&quot;&gt;&lt;/div&gt;
        &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-418614" data-claire-element-id="418614">Vous devriez comprendre sans encombre la totalité de ce code ; si ce n'est pas le cas, je vous conseille de relire le tutoriel depuis le début…</p><aside id="r-418616" data-claire-element-id="418616" data-claire-semantic="warning"><p id="r-418615" data-claire-element-id="418615">Petit point <strong>très important</strong> : il faut mettre le processRequest()<strong> avant d'envoyer des informations au navigateur</strong>, <strong>mais après avoir enregistré vos fonctions</strong> !</p></aside><aside id="r-418618" data-claire-element-id="418618" data-claire-semantic="warning"><p id="r-418617" data-claire-element-id="418617">Ne mettez pas d'echo, ni de print ni aucune fonction PHP susceptible d'envoyer des informations au navigateur dans vos fonctions ; à ce stade, on n'affiche plus avec PHP mais avec des méthodes de xAjax que je vais vous décrire plus loin.</p></aside><p id="r-418619" data-claire-element-id="418619">Grâce à la méthode register(), vous pouvez enregistrer des éléments de votre code (des fonctions par exemple ^^ ) qui seront exécutée en « asynchrone ».</p><aside id="r-418621" data-claire-element-id="418621" data-claire-semantic="information"><p id="r-418620" data-claire-element-id="418620">Très facile de se rappeler de ça : <em>register</em> signifie <em>enregistrer</em> et <em>XAJAX_FUNCTION</em> signifie <em>fonction xAjax</em>.</p></aside><p id="r-418622" data-claire-element-id="418622">Vous devriez commencer à comprendre comment fonctionne la librairie xAjax : au fil du code, vous fournissez à xAjax les informations dont il a besoin (comme le nom des fonctions PHP, etc.) ; le moteur xAjax, grâce à ces informations, va générer lui-même le Javascript (grâce à processRequest()), et l'afficher sur la page (avec printJavascript()).</p><div id="r-418624" data-claire-element-id="418624" data-claire-semantic="question"><p id="r-418623" data-claire-element-id="418623">Comment exécuter ma fonction PHP avec xAjax ?</p></div><p id="r-418625" data-claire-element-id="418625">Pour exécuter la fonction PHP préalablement écrite et enregistrée, on fait appel à Javascript :</p><pre id="r-418626" data-claire-element-id="418626"><code data-claire-semantic="javascript">xajax_MaFonctionPHP(argument1, argument2, ...);</code></pre><p id="r-418627" data-claire-element-id="418627">On peut bien sûr exécuter ce code Javascript dans événement :</p><pre id="r-418628" data-claire-element-id="418628"><code data-claire-semantic="html">&lt;input type=&quot;button&quot; value=&quot;AJAX&quot; onclick=&quot;xajax_MaFonctionPHP(argument1, argument2, ...);&quot;&gt;</code></pre><p id="r-418629" data-claire-element-id="418629">Ou, si on a besoin de rafraîchir quelque chose régulièrement (comme un <em>chat</em>) :</p><pre id="r-418630" data-claire-element-id="418630"><code data-claire-semantic="html">&lt;script&gt;
function refresh()
{
        xajax_MaFonctionPHP(argument1, argument2,...);
        setTimeout(refresh, 5000);
}
&lt;/script&gt;</code></pre><p id="r-418631" data-claire-element-id="418631">Voilà, c'est bête comme chou ! :p</p><h2 id="r-deuxieme-bilan" data-claire-element-id="418639">Deuxième bilan</h2><ul id="r-418638" data-claire-element-id="418638"><li id="r-418633" data-claire-element-id="418633"><p id="r-418632" data-claire-element-id="418632">On écrit le code que xAjax devra exécuter dans des fonctions PHP.</p></li><li id="r-418635" data-claire-element-id="418635"><p id="r-418634" data-claire-element-id="418634">On enregistre nos fonctions PHP de cette façon : $xajax-&gt;register(XAJAX_FUNCTION, 'MaFonction').</p></li><li id="r-418637" data-claire-element-id="418637"><p id="r-418636" data-claire-element-id="418636"><strong>Après</strong> avoir enregistré nos fonctions, on ajoute $xajax-&gt;processRequest().</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
Introduction à la librairie xAjax et à la POO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
Les débuts avec xAjax
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
Écrire et appeler des fonctions avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
Recevoir et traiter une réponse xAjax dans ses fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
Un Chat en xAjax!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
xAjax et l&#039;encodage de caractères
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
Traiter des formulaires avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
Créer un message de chargement avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
Résumé des méthodes xAjax
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
<span class="arrow"></span>
<span class="next">Les débuts avec xAjax</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
<span class="next">Recevoir et traiter une réponse xAjax dans ses fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="RecevoirettraiterunerponsexAjaxdanssesfonctions"></a><h2>Recevoir et traiter une réponse xAjax dans ses fonctions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
<span class="arrow"></span>
<span class="next">Écrire et appeler des fonctions avec xAjax</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
<span class="next">Un Chat en xAjax!</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418641" data-claire-element-id="418641">Je vais maintenant vous apprendre à écrire et à traiter vos fonctions PHP avec xAjax !</p><div id="r-418643" data-claire-element-id="418643" data-claire-semantic="question"><p id="r-418642" data-claire-element-id="418642">T'as un cerveau de poisson rouge, toi. o_O Tu viens de nous dire qu'il suffisait de programmer nos fonctions en PHP !</p></div><p id="r-418644" data-claire-element-id="418644">En effet, il faut bien programmer nos fonctions en PHP ; néanmoins, rappelez-vous que nous devons exclure de nos fonctions toute requête qui pourrait envoyer des informations au navigateur, comme echo ou print.</p><div id="r-418646" data-claire-element-id="418646" data-claire-semantic="question"><p id="r-418645" data-claire-element-id="418645">Comment changer le contenu de ma page dynamiquement, alors ?</p></div><p id="r-418647" data-claire-element-id="418647">J'y viens ! ^^ <br/> Après avoir utilisé la classe de génération du Javascript xajax, nous allons maintenant utiliser la classe qui gère les réponses xajaxResponse !</p><p id="r-418648" data-claire-element-id="418648">Voici la ligne que vous devez ajouter au début de toutes vos fonctions :</p><pre id="r-418649" data-claire-element-id="418649"><code data-claire-semantic="html+php">&lt;?php
$reponse = new xajaxResponse();
?&gt;</code></pre><p id="r-418650" data-claire-element-id="418650">Nous venons de créer une instance de la classe xajaxResponse ! ;)</p><p id="r-418651" data-claire-element-id="418651">Cette classe contient plusieurs méthodes intéressantes nous permettant de modifier le contenu de la page grâce aux réponses du serveur. Je ne les connais pas toutes, car il en existe un très grand nombre, je vais donc vous donner les plus importantes ! ^^</p><p id="r-418652" data-claire-element-id="418652">Je vous les donne en bloc :</p><pre id="r-418653" data-claire-element-id="418653"><code data-claire-semantic="html+php">&lt;?php
$reponse-&gt;assign('IdElement', 'Attribut', 'Valeur');
$reponse-&gt;call('MaFonctionJSàAppeler');
$reponse-&gt;clear('IdElement', 'Attribut');
$reponse-&gt;script(&quot;code Javascript à exécuter&quot;);
$reponse-&gt;addEvent(&quot;IdElement&quot;, &quot;Evenement&quot;, &quot;ScriptàExecuter&quot;);
?&gt;</code></pre><p id="r-418654" data-claire-element-id="418654">La première est nécessaire pour modifier le contenu :</p><pre id="r-418655" data-claire-element-id="418655"><code data-claire-semantic="html+php">&lt;?php
$reponse-&gt;assign('IdElement', 'Attribut', 'Valeurs');
?&gt;</code></pre><p id="r-418656" data-claire-element-id="418656">Cette méthode va modifier <em>Attribut</em> de <em>IdElement</em> en <em>Valeur</em>.<br/> Concrètement, ça donne :</p><pre id="r-418657" data-claire-element-id="418657"><code data-claire-semantic="html+php">&lt;?php
$reponse-&gt;assign('block', 'innerHTML', 'Bonjour je m\'affiche grâce à une méthode xAjax!');
?&gt;</code></pre><p id="r-418658" data-claire-element-id="418658">Ce code va remplacer ce qu'il y a dans mon <em>div</em> (c'est ce que signifie <em>innerHTML</em>), dont l'<em>id</em> est <em>block</em>, par la phrase « Bonjour, je m'affiche grâce à une méthode xAjax ! ».</p><aside id="r-418660" data-claire-element-id="418660" data-claire-semantic="warning"><p id="r-418659" data-claire-element-id="418659">Remarquez une chose : les méthodes de réponses xAjax n'acceptent que des éléments avec un <em>id</em> ; si j'avais mis « div », ça n'aurait pas marché. De même, si vous avez un formulaire avec un champ texte, vous ne mettrez pas form.champ, mais directement l'<em>id</em> du champ !</p></aside><p id="r-418661" data-claire-element-id="418661">La deuxième :</p><pre id="r-418662" data-claire-element-id="418662"><code data-claire-semantic="html+php">&lt;?php
$reponse-&gt;call('MaFonctionJSàAppeler');
?&gt;</code></pre><p id="r-418663" data-claire-element-id="418663">C'est une méthode assez intéressante, retenez seulement qu'elle sert à appeler d'autres fonctions Javascript depuis son code PHP. Nous verrons une utilisation concrète un peu plus tard.</p><p id="r-418664" data-claire-element-id="418664">Voici la troisième méthode qui permet d'effacer le contenu d'un champ :</p><pre id="r-418665" data-claire-element-id="418665"><code data-claire-semantic="html+php">&lt;?php
$reponse-&gt;clear('IdElement', 'Attribut');
?&gt;</code></pre><p id="r-418666" data-claire-element-id="418666">C'est très simple, on précise l'id d'un élément de formulaire par exemple, et un attribut (comme <em>value</em>), et le contenu sera entièrement effacé.</p><p id="r-418667" data-claire-element-id="418667">La quatrième, et pas des moindres :</p><pre id="r-418668" data-claire-element-id="418668"><code data-claire-semantic="html+php">&lt;?php
$reponse-&gt;script(&quot;code Javascript à exécuter&quot;);
?&gt;</code></pre><p id="r-418669" data-claire-element-id="418669">Vous pouvez passer directement en paramètre à cette méthode du code Javascript qui sera exécuté.</p><aside id="r-418671" data-claire-element-id="418671" data-claire-semantic="warning"><p id="r-418670" data-claire-element-id="418670">Entre les guillemets, pensez bien à échapper, grâce à un <em>backslash</em> (\), tous les caractères qui nécessitent de l'être (<strong>\</strong>, <strong>&quot;</strong>, <strong>'</strong>, etc.).</p></aside><p id="r-418672" data-claire-element-id="418672">Enfin, la dernière sert à attribuer un événement à une balise (par exemple onchange, onclick, onfocus…) :</p><pre id="r-418673" data-claire-element-id="418673"><code data-claire-semantic="html+php">&lt;?php
$reponse-&gt;addEvent(&quot;IdElement&quot;, &quot;Evenement&quot;, &quot;ScriptàExecuter&quot;);
?&gt;</code></pre><p id="r-418674" data-claire-element-id="418674">Vous connaissez désormais les méthodes xAjax les plus courantes. Il y en a encore beaucoup (beaucoup beaucoup même :p ), mais celles-ci sont les plus utiles. Si vous souhaitez pousser vos connaissances, je vous donnerai un lien contenant la liste des méthodes existantes dans la conclusion !</p><p id="r-418675" data-claire-element-id="418675">Enfin, <strong>très important</strong>, à chaque fin de fonction, il faut retourner les données XML à xAjax en procédant de cette façon (je le répète : <strong>à placer à la fin de toutes vos fonctions, en guise de return</strong>) :</p><pre id="r-418676" data-claire-element-id="418676"><code data-claire-semantic="html+php">&lt;?php
return $reponse;
?&gt;</code></pre><p id="r-418677" data-claire-element-id="418677">En fait il s'agit seulement de retourner l'objet de réponse ! ;)</p><aside id="r-418679" data-claire-element-id="418679" data-claire-semantic="warning"><p id="r-418678" data-claire-element-id="418678">Attention ! J'insiste : n'oubliez pas de retourner l'objet à la fin de vos fonctions, sinon votre script ne fonctionnera pas !</p></aside><h2 id="r-troisieme-bilan" data-claire-element-id="418689">Troisième bilan</h2><ul id="r-418688" data-claire-element-id="418688"><li id="r-418681" data-claire-element-id="418681"><p id="r-418680" data-claire-element-id="418680">On écrit le code à exécuter dans des fonctions.</p></li><li id="r-418683" data-claire-element-id="418683"><p id="r-418682" data-claire-element-id="418682">Pour interpréter les réponses et changer le contenu de la page, on utilise la classe <strong>xajaxResponse</strong>.</p></li><li id="r-418685" data-claire-element-id="418685"><p id="r-418684" data-claire-element-id="418684">On change le contenu grâce à des méthodes comme assign, script, etc.</p></li><li id="r-418687" data-claire-element-id="418687"><p id="r-418686" data-claire-element-id="418686">On ajoute <strong>return $reponse;</strong> à la fin de <strong>toutes nos fonctions</strong> qui seront utilisées par xAjax.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
Introduction à la librairie xAjax et à la POO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
Les débuts avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
Écrire et appeler des fonctions avec xAjax
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
Recevoir et traiter une réponse xAjax dans ses fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
Un Chat en xAjax!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
xAjax et l&#039;encodage de caractères
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
Traiter des formulaires avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
Créer un message de chargement avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
Résumé des méthodes xAjax
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
<span class="arrow"></span>
<span class="next">Écrire et appeler des fonctions avec xAjax</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
<span class="next">Un Chat en xAjax!</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UnChatenxAjax"></a><h2>Un Chat en xAjax!</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
<span class="arrow"></span>
<span class="next">Recevoir et traiter une réponse xAjax dans ses fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
<span class="next">xAjax et l&#039;encodage de caractères</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418691" data-claire-element-id="418691">Je vous propose maintenant un exemple concret de ce que nous venons d'apprendre : le fameux<em> t'Chat</em> qui ne clignote pas ! :p Mais avant cela, faisons un bref rappel de l'ordre dans lequel vous devez écrire votre code avec xAjax :</p><pre id="r-418692" data-claire-element-id="418692"><code data-claire-semantic="html+php">&lt;?php
function Bidule($arg1, $arg2, ...)
{
        // 1 - Création de l'objet de réponse xajaxResponse.
        // 2 - Votre code à exécuter en asynchrone.
        // 3 - Appel d'une ou de plusieurs méthodes xAjax pour modifier le contenu de la page.
        // 4 - Retourner l'objet de réponse.
}
// 1 - Inclusion de la librairie xajax (avec require_once).
// 2 - Création de l'objet de génération du Javascript xajax.
// 3 - Enregistrement de vos fonctions avec register.
// 4 - Appel de la méthode processRequest.
// 5 - Entre les balises &lt;HEAD&gt;&lt;/HEAD&gt;, appel de la méthode printJavascript.</code></pre><p id="r-418693" data-claire-element-id="418693">Je vous propose maintenant de réaliser le chat afin de vous entraîner.<br/> C'est assez simple : tout tient en une seule page.</p><p id="r-418694" data-claire-element-id="418694">Faites d'abord le nécessaire pour déclarer tout ce qui est indispensable pour travailler avec xAjax, puis n'hésitez pas à remonter pour chercher ce qu'il faut mettre : c'est le métier qui rentre.</p><p id="r-418695" data-claire-element-id="418695">Dans le <em>body</em> de votre page, mettez un <em>div</em> vide qui recevra les messages ainsi qu'un formulaire permettant poster un message, avec le nom de l'auteur et son message.</p><p id="r-418696" data-claire-element-id="418696">Créez et déclarez les fonctions pour poster et afficher les messages, tout en sachant que nous les stockerons dans un fichier texte (<em>.txt</em>), la méthode avec une base de données MySQL étant vraiment trop lourde…</p><p id="r-418697" data-claire-element-id="418697">Et enfin, l'astuce pour rafraîchir : un petit code comme celui-ci dans le <em>head</em> :</p><pre id="r-418698" data-claire-element-id="418698"><code data-claire-semantic="html">&lt;script&gt;
function refresh()
{
        xajax_afficher();
        setTimeout(&quot;refresh()&quot;, 5000);
}
&lt;/script&gt;</code></pre><p id="r-418699" data-claire-element-id="418699">Et dans le <em>body</em>, à la fin de la page :</p><pre id="r-418700" data-claire-element-id="418700"><code data-claire-semantic="html">&lt;script&gt;
refresh();
&lt;/script&gt;</code></pre><p id="r-418701" data-claire-element-id="418701">Allez, on code...</p><p id="r-418702" data-claire-element-id="418702">.....</p><p id="r-418703" data-claire-element-id="418703">.....</p><p id="r-418704" data-claire-element-id="418704">Déjà ? Je ne vous crois pas. :p</p><p id="r-418705" data-claire-element-id="418705">.....</p><p id="r-418706" data-claire-element-id="418706">.....</p><p id="r-418707" data-claire-element-id="418707">Voici la solution :</p><pre id="r-418708" data-claire-element-id="418708"><code data-claire-semantic="html+php">&lt;?php
//
// Notre fonction PHP pour afficher les messages :
//
function afficher()
{
        $reponse = new xajaxResponse();// Création d'une instance de xajaxResponse pour traiter les réponses serveur.
        $chat = '';// Initialisation de la variable $chat.
        $fichier_texte = fopen('./chat.txt', 'r');// On ouvre notre fichier texte en lecture seule.
        $chat = fread($fichier_texte, filesize('./chat.txt'));// On lit notre fichier et on stocke son contenu dans la variable $chat
        fclose($fichier_texte);//On ferme notre fichier texte.   
        $reponse-&gt;assign('block', 'innerHTML', $chat);// Enfin, on remplace le contenu du div 'block' par le contenu de $chat
        return $reponse;
}

//
// Notre fonction PHP envoyer pour envoyer un message :
//
function envoyer($posteur, $message)
{
        $reponse = new xajaxResponse();//Création d'une instance de xajaxResponse pour traiter les réponses serveur.
        $fichier_texte = fopen('./chat.txt', 'a');//On ouvre notre fichier texte en écriture seule.
        fwrite($fichier_texte, addslashes('&lt;strong&gt;' . htmlentities($posteur) . ':&lt;/strong&gt;' . htmlentities($message) . '&lt;br /&gt;'));// On stocke le message dans notre fichier.
        fclose($fichier_texte);// On ferme notre fichier texte.
        $reponse-&gt;clear('message', 'value');// On vide le champ contenant le message de l'utilisateur.
        $reponse-&gt;call('xajax_afficher');// On appelle la fonction afficher pour afficher les messages pour que l'utilisateur voie son message à l'écran.
        return $reponse;
}

//
// Ouverture de la librairie xajax, instanciation d'un objet de la classe xajax, puis déclaration de nos fonctions PHP.
//
require_once('./xajax_core/xajax.inc.php');
$xajax = new xajax(); //On initialise l'objet xajax.
$xajax-&gt;register(XAJAX_FUNCTION, 'afficher');// On enregistre nos fonctions.
$xajax-&gt;register(XAJAX_FUNCTION, 'envoyer');
$xajax-&gt;processRequest();// Fonction qui va se charger de générer le Javascript, à partir des données que l'on a fournies à xAjax APRÈS AVOIR DÉCLARÉ NOS FONCTIONS.
?&gt;

&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; &gt;
        &lt;head&gt;
                &lt;title&gt;Chat xAjax&lt;/title&gt;
                &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot; /&gt;
                &lt;?php $xajax-&gt;printJavascript(); /* Affiche le Javascript */?&gt;
                &lt;script type=&quot;text/javascript&quot;&gt;
                function refresh()// Code javascript qui va appeler la fonction afficher toutes les 5 secondes.
                {
                        xajax_afficher();
                        setTimeout(refresh, 5000);
                }
                &lt;/script&gt;
        &lt;/head&gt;
        &lt;body&gt;
                &lt;div id=&quot;block&quot;&gt;&lt;/div&gt;
                &lt;form action=&quot;&quot;&gt;
                        &lt;fieldset&gt;
                         &lt;legend&gt;Entrer ici votre message :&lt;/legend&gt;
                         &lt;div&gt;
                          &lt;label&gt;Nom : &lt;input type=&quot;text&quot; size=&quot;15&quot; id=&quot;posteur&quot; /&gt;&lt;/label&gt;&lt;br /&gt;
                          &lt;label&gt;Message : &lt;input type=&quot;text&quot; size=&quot;50&quot; id=&quot;message&quot; /&gt;&lt;/label&gt;&lt;br /&gt;
                          &lt;input type=&quot;submit&quot; value=&quot;Envoyer&quot; onclick=&quot;xajax_envoyer(document.getElementById('posteur').value, document.getElementById('message').value); return false;&quot; /&gt;
                         &lt;/div&gt;
                        &lt;/fieldset&gt;
                &lt;/form&gt;
                &lt;script type=&quot;text/javascript&quot;&gt;
                        refresh();//On appelle la fonction refresh() pour lancer le script.
                &lt;/script&gt;
        &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-418709" data-claire-element-id="418709">Voilà : vous pouvez tester, c'est fonctionnel ! Notez néanmoins que c'est très moche et peu optimisé… :p <br/> Vous pouvez l'améliorer si ça vous amuse, ou si vous en avez l'utilité, mais sachez que ce chat sature assez vite (je n'ai jamais eu l'occasion de tester combien de personnes au maximum il pourrait supporter, mais ça ne doit pas être très élevé…). ;)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
Introduction à la librairie xAjax et à la POO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
Les débuts avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
Écrire et appeler des fonctions avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
Recevoir et traiter une réponse xAjax dans ses fonctions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
Un Chat en xAjax!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
xAjax et l&#039;encodage de caractères
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
Traiter des formulaires avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
Créer un message de chargement avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
Résumé des méthodes xAjax
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
<span class="arrow"></span>
<span class="next">Recevoir et traiter une réponse xAjax dans ses fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
<span class="next">xAjax et l&#039;encodage de caractères</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="xAjaxetl039encodagedecaractres"></a><h2>xAjax et l&#039;encodage de caractères</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
<span class="arrow"></span>
<span class="next">Un Chat en xAjax!</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
<span class="next">Traiter des formulaires avec xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418711" data-claire-element-id="418711">Voici une partie traitant d'un problème récurrent chez les utilisateurs de xAjax : l'encodage des caractères ! ^^</p><p id="r-418712" data-claire-element-id="418712">Vous avez sûrement dû remarquer que les caractères spéciaux (comme é, è, à, etc.) ne passaient pas correctement sur le chat.</p><p id="r-418713" data-claire-element-id="418713">Soyez très attentif, c'est un peu compliqué !</p><p id="r-418714" data-claire-element-id="418714">Il faut savoir que, par défaut, xAjax traite les caractères selon le jeu de caractères UTF-8 ; si votre site est encodé en UTF-8, pas la peine de vous attarder sur cette partie. En revanche si vous utilisez un autre jeu de caractères comme l'ISO-8859-1, vous risquez d'avoir quelques petits problèmes d'accentuation ! :lol:</p><p id="r-418715" data-claire-element-id="418715">Contrairement à la version stable de xAjax, la version bêta (celle que nous utilisons dans ce tutoriel) ne semble pas gérer correctement l'encodage des caractères.<br/> Pour pouvoir conserver un site encodé en ISO-8859-1, nous allons donc devoir utiliser une petite méthode alternative ! ^^</p><p id="r-418716" data-claire-element-id="418716">Je vous explique un peu le problème (parce qu'il y a une petite subtilité à bien saisir).<br/><strong>Lorsque xAjax traite des données, il les encode automatiquement en UTF-8</strong>. C'est un peu dommage pour nous parce que c'est justement ce qu'on ne veut pas qu'il fasse ! :p <br/> La subtilité réside dans le fait que pour l'affichage des données, les méthode fournies par xAjax fonctionnent parfaitement. Seulement pour ce qui est de la récupération des données par l'intermédiaire d'un formulaire et leur enregistrement, ces méthodes ne fonctionnent pas…</p><p id="r-418717" data-claire-element-id="418717"><strong>Le but du jeu est simple : comme xAjax encode en UTF-8 les informations qu'il reçoit par les formulaires, nous allons les reconvertir en ISO-8859-1 avant de les utiliser !</strong><br/> Pour cela on utilise la fonction PHP utf8_decode() qui permet de convertir des données encodées UTF-8 en données encodées ISO-8859-1 !</p><p id="r-418718" data-claire-element-id="418718">Reprenons ensemble le script du chat (j'espère que vous l'avez bien compris) : nous recevons depuis le formulaire le pseudo de l'utilisateur et son message. Ils ont donc été automatiquement encodés en UTF-8. Nous allons appliquer la méthode que je vous ai citée plus haut, en mettant un petit utf8_decode() sur les variables <em>posteur</em> et <em>message</em> juste avant de les enregistrer dans le fichier texte !<br/> Nous allons donc modifier cette ligne se trouvant dans notre fonction <em>envoyer</em> :</p><pre id="r-418719" data-claire-element-id="418719"><code data-claire-semantic="html+php">&lt;?php
fwrite($fichier_texte, addslashes('&lt;strong&gt;' . htmlentities($posteur) . ':&lt;/strong&gt;' . htmlentities($message) . '&lt;br /&gt;'));// On stocke le message et le nom de l'auteur dans notre fichier.
?&gt;</code></pre><p id="r-418720" data-claire-element-id="418720">…et ajouter nos utf8_decode() comme ceci :</p><pre id="r-418721" data-claire-element-id="418721"><code data-claire-semantic="html+php">&lt;?php
fwrite($fichier_texte, addslashes('&lt;strong&gt;' . htmlentities(utf8_decode($posteur)) . ':&lt;/strong&gt;' . htmlentities(utf8_decode($message)) . '&lt;br /&gt;'));// On stocke le message et le nom de l'auteur dans notre fichier.
?&gt;</code></pre><aside id="r-418723" data-claire-element-id="418723" data-claire-semantic="warning"><p id="r-418722" data-claire-element-id="418722">Il est important d'appliquer utf8_decode() avant htmlentities() dans cet exemple, sinon htmlentities() convertira des données encodées dans le mauvais jeu de caractères !</p></aside><p id="r-418724" data-claire-element-id="418724">Enfin, pour ce qui est de l'affichage des données, je vous avais dit qu'une méthode xAjax fonctionnait parfaitement. Cette méthode est setCharEncoding(), on l'appelle depuis l'objet <em>xajax</em> de cette façon :</p><pre id="r-418725" data-claire-element-id="418725"><code data-claire-semantic="html+php">&lt;?php
$xajax-&gt;setCharEncoding('iso-8859-1');// On précise à xAjax qu'on souhaite travailler en ISO-8859-1.
?&gt;</code></pre><aside id="r-418727" data-claire-element-id="418727" data-claire-semantic="warning"><p id="r-418726" data-claire-element-id="418726">Rappelez-vous que cette méthode ne fonctionne que dans le cadre de l'affichage des données !<br/> Si vous récupérez des données depuis un formulaire, vous devez les traiter avec utf8_decode() même si vous avez utilisé setCharEncoding().</p></aside><p id="r-418728" data-claire-element-id="418728">Voici donc le chat intégrant la gestion du jeu de caractères ISO-8859-1 :</p><pre id="r-418729" data-claire-element-id="418729"><code data-claire-semantic="html+php">&lt;?php
//
// Notre fonction PHP pour afficher les messages :
//
function afficher()
{
        $reponse = new xajaxResponse();// Création d'une instance de xajaxResponse pour traiter les réponses serveur.
        $chat = '';// Initialisation de la variable $chat.
        $fichier_texte = fopen('./chat.txt', 'r');// On ouvre notre fichier texte en lecture seule.
        $chat = fread($fichier_texte, filesize('./chat.txt'));// On lit notre fichier et stocke son contenu dans la variable $chat.
        fclose($fichier_texte);// On ferme notre fichier texte.  
        $reponse-&gt;assign('block', 'innerHTML', $chat);// Enfin, on remplace le contenu du div 'block' par le contenu de $chat.
        return $reponse;
}

//
// Notre fonction PHP envoyer pour envoyer un message
//
function envoyer($posteur, $message)
{
        $reponse = new xajaxResponse();// Création d'une instance de xajaxResponse pour traiter les réponses serveur.
        $fichier_texte = fopen('./chat.txt', 'a');//On ouvre notre fichier texte en écriture seule.
        fwrite($fichier_texte, addslashes('&lt;strong&gt;' . htmlentities(utf8_decode($posteur)) . ':&lt;/strong&gt;' . htmlentities(utf8_decode($message)) . '&lt;br /&gt;'));// On stocke le message dans notre fichier.
        fclose($fichier_texte);// On ferme notre fichier texte.
        $reponse-&gt;clear('message', 'value');// On vide le champ contenant le message de l'utilisateur.
        $reponse-&gt;call('xajax_afficher');// On appelle la fonction afficher pour afficher les messages et pour que l'utilisateur voie son message à l'écran
        return $reponse;
}

//
//Ouverture de la librairie xajax, instanciation d'un objet de la classe xajax, puis déclaration de nos fonctions PHP.
//
require_once('./xajax_core/xajax.inc.php');
$xajax = new xajax(); // On initialise l'objet xajax.
$xajax-&gt;setCharEncoding('iso-8859-1');// On précise à xAjax qu'on souhaite travailler en ISO-8859-1.
$xajax-&gt;register(XAJAX_FUNCTION, 'afficher');// On enregistre nos fonctions.
$xajax-&gt;register(XAJAX_FUNCTION, 'envoyer');
$xajax-&gt;processRequest();// Fonction qui va se charger de générer le Javascript, à partir des données que l'on a fournies à xAjax APRÈS AVOIR DÉCLARÉ NOS FONCTIONS.
?&gt;

&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; &gt;
        &lt;head&gt;
                &lt;title&gt;Chat xAjax&lt;/title&gt;
                &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot; /&gt;
                &lt;?php $xajax-&gt;printJavascript(); /* Affiche le Javascript. */?&gt;
                &lt;script type=&quot;text/javascript&quot;&gt;
                function refresh() // Code Javascript qui va appeler la fonction afficher toutes les 5 secondes.
                {
                        xajax_afficher();
                        setTimeout(refresh, 5000);
                }
                &lt;/script&gt;
        &lt;/head&gt;
        &lt;body&gt;
                &lt;div id=&quot;block&quot;&gt;&lt;/div&gt;
                &lt;form action=&quot;&quot;&gt;
                        &lt;fieldset&gt;
                         &lt;legend&gt;Entrer ici votre message :&lt;/legend&gt;
                         &lt;div&gt;
                          &lt;label&gt;Nom : &lt;input type=&quot;text&quot; size=&quot;15&quot; id=&quot;posteur&quot; /&gt;&lt;/label&gt;&lt;br /&gt;
                          &lt;label&gt;Message : &lt;input type=&quot;text&quot; size=&quot;50&quot; id=&quot;message&quot; /&gt;&lt;/label&gt;&lt;br /&gt;
                          &lt;input type=&quot;submit&quot; value=&quot;Envoyer&quot; onclick=&quot;xajax_envoyer(document.getElementById('posteur').value, document.getElementById('message').value); return false;&quot; /&gt;
                         &lt;/div&gt;
                        &lt;/fieldset&gt;
                &lt;/form&gt;
                &lt;script type=&quot;text/javascript&quot;&gt;
                        refresh();// On appelle la fonction refresh() pour lancer le script.
                &lt;/script&gt;
        &lt;/body&gt;
&lt;/html&gt;</code></pre><aside id="r-418731" data-claire-element-id="418731" data-claire-semantic="information"><p id="r-418730" data-claire-element-id="418730">Si votre site est encodé en ISO-8859-1, prenez l'habitude d'appeler systématiquement $xajax-&gt;setCharEncoding('iso-8859-1').</p></aside><h2 id="r-quatrieme-bilan" data-claire-element-id="418737">Quatrième bilan</h2><ul id="r-418736" data-claire-element-id="418736"><li id="r-418733" data-claire-element-id="418733"><p id="r-418732" data-claire-element-id="418732">On appelle la méthode $xajax-&gt;setCharEncoding('iso-8859-1').</p></li><li id="r-418735" data-claire-element-id="418735"><p id="r-418734" data-claire-element-id="418734">Si on récupère des données depuis un formulaire, on les traite avec la fonction PHP utf8_decode().</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
Introduction à la librairie xAjax et à la POO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
Les débuts avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
Écrire et appeler des fonctions avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
Recevoir et traiter une réponse xAjax dans ses fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
Un Chat en xAjax!
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
xAjax et l&#039;encodage de caractères
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
Traiter des formulaires avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
Créer un message de chargement avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
Résumé des méthodes xAjax
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
<span class="arrow"></span>
<span class="next">Un Chat en xAjax!</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
<span class="next">Traiter des formulaires avec xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TraiterdesformulairesavecxAjax"></a><h2>Traiter des formulaires avec xAjax</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
<span class="arrow"></span>
<span class="next">xAjax et l&#039;encodage de caractères</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
<span class="next">Créer un message de chargement avec xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418739" data-claire-element-id="418739">Je tiens d'abord à remercier <strong>xbb</strong> de m'avoir touché un mot de cette façon de traiter les formulaires avec xAjax que je ne connaissais pas, et qui m'a semblée très intéressante !</p><div id="r-418741" data-claire-element-id="418741" data-claire-semantic="question"><p id="r-418740" data-claire-element-id="418740">Mais… Mais… n'avons-nous pas déjà traité des formulaires avec xAjax dans les sous-parties précédentes ? :euh:</p></div><p id="r-418742" data-claire-element-id="418742">En effet, nous avons déjà appris à traiter des formulaires, mais c'étaient de petits formulaires avec une ou deux valeurs à récupérer....</p><p id="r-418743" data-claire-element-id="418743">Rappelez-vous de l'exemple du chat ; pour récupérer le pseudo et le message de l'utilisateur, nous étions obligés de passer deux arguments à notre fonction <em>xajax</em> de cette façon :</p><pre id="r-418744" data-claire-element-id="418744"><code data-claire-semantic="javascript">xajax_envoyer(document.getElementById('posteur').value, document.getElementById('message').value);</code></pre><p id="r-418745" data-claire-element-id="418745">Nous avions un argument pour le pseudo, et un argument pour le message. Vous me suivez ? :o</p><p id="r-418746" data-claire-element-id="418746">Bon, maintenant imaginez que nous ayons dans notre formulaire un champ pseudo, un autre mot de passe, un autre e-mail et enfin un champ biographie. Il faudrait alors passer à notre fonction quatre arguments !<br/> Ce n'est pas gérable… mais heureusement xAjax intègre un système de gestion des formulaires extrêmement simple, qui permet de récupérer les valeurs des formulaires contenant beaucoup de données.</p><p id="r-418747" data-claire-element-id="418747">Nous allons donc remplacer tous ces arguments par un seul : xajax.getFormValues.<br/> Voici ce que cela donne sur notre chat :</p><pre id="r-418748" data-claire-element-id="418748"><code data-claire-semantic="javascript">xajax_envoyer(xajax.getFormValues('NomDuFormulaire'));</code></pre><p id="r-418749" data-claire-element-id="418749">On ne garde ainsi qu'un seul argument contenant toutes les données de notre formulaire. Il va maintenant falloir le traiter avec PHP pour récupérer ces valeurs (sinon ça ne nous sert pas à grand chose :lol: ) !<br/><strong>xajax.getFormValues retourne à PHP un tableau <em>(array)</em>, organisé de la même façon qu'un tableau $_GET ou $_POST</strong>, c'est-à-dire contenant des clés qui correspondent aux noms des items de notre formulaire <em>(par exemple ici nous aurons deux clés : posteur et message)</em>. ;) <br/> Vous voyez que ce n'est pas compliqué ! :D</p><p id="r-418750" data-claire-element-id="418750">Enfin j'attire aussi votre attention sur un dernier point : lorsque vous utilisez xajax.getFormValue, vous devez spécifier à tous les éléments de votre formulaire <strong>un id et un name</strong> (qui doivent être identiques).</p><p id="r-418751" data-claire-element-id="418751">Il ne nous reste plus qu'à modifier notre fonction envoyer:</p><pre id="r-418752" data-claire-element-id="418752"><code data-claire-semantic="html+php">&lt;?php
//
// Notre fonction PHP envoyer pour envoyer un message :
//
function envoyer($donnees_formulaire)
{
        $reponse = new xajaxResponse();// Création d'une instance de xajaxResponse pour traiter les réponses serveur.
        $fichier_texte = fopen('./chat.txt', 'a');// On ouvre notre fichier texte en écriture seule.
        fwrite($fichier_texte, addslashes('&lt;strong&gt;' . htmlentities(utf8_decode($donnees_formulaire['posteur'])) . ':&lt;/strong&gt;' . htmlentities(utf8_decode($donnees_formulaire['message'])) . '&lt;br /&gt;'));// On stocke le message dans notre fichier, REGARDEZ BIEN ICI COMMENT SONT EXTRAITES NOS DONNÉES DE FORMULAIRE .
        fclose($fichier_texte);// On ferme notre fichier texte.
        $reponse-&gt;clear('message', 'value');// On vide le champ contenant le message de l'utilisateur.
        $reponse-&gt;call('xajax_afficher');// On appelle la fonction afficher pour afficher les messages et pour que l'utilisateur voie son message à l'écran.
        return $reponse;
}
?&gt;</code></pre><p id="r-418753" data-claire-element-id="418753">Et voici le chat modifié :</p><pre id="r-418754" data-claire-element-id="418754"><code data-claire-semantic="html+php">&lt;?php
//
// Notre fonction PHP pour afficher les messages :
//
function afficher()
{
        $reponse = new xajaxResponse();// Création d'une instance de xajaxResponse pour traiter les réponses serveur.
        $chat = '';// Initialisation de la variable $chat.
        $fichier_texte = fopen('./chat.txt', 'r');// On ouvre notre fichier texte en lecture seule.
        $chat = fread($fichier_texte, filesize('./chat.txt'));//On lit notre fichier et on le stocke son contenu dans la variable $chat.
        fclose($fichier_texte);// On ferme notre fichier texte.
        $reponse-&gt;assign('block', 'innerHTML', $chat);//Enfin, on remplace le contenu du div 'block' par le contenu de $chat.
        return $reponse;
}

//
// Notre fonction PHP envoyer pour envoyer un message :
//
function envoyer($donnees_formulaire)
{
        $reponse = new xajaxResponse();// Création d'une instance de xajaxResponse pour traiter les réponses serveur.
        $fichier_texte = fopen('./chat.txt', 'a');// On ouvre notre fichier texte en écriture seule.
        fwrite($fichier_texte, addslashes('&lt;strong&gt;' . htmlentities(utf8_decode($donnees_formulaire['posteur'])) . ':&lt;/strong&gt;' . htmlentities(utf8_decode($donnees_formulaire['message'])) . '&lt;br /&gt;'));// On stocke le message dans notre fichier.
        fclose($fichier_texte);// On ferme notre fichier texte
        $reponse-&gt;clear('message', 'value');// On vide le champ contenant le message de l'utilisateur.
        $reponse-&gt;call('xajax_afficher');// On appelle la fonction afficher pour afficher les messages et pour que l'utilisateur voie son message à l'écran.
        return $reponse;
}

//
//Ouverture de la librairie xajax, instanciation d'un objet de la classe xajax, puis déclaration de nos fonctions PHP.
//
require_once('./xajax_core/xajax.inc.php');
$xajax = new xajax(); // On initialise l'objet xajax.
$xajax-&gt;setCharEncoding('iso-8859-1');// On précise à xAjax qu'on souhaite travailler en ISO-8859-1.
$xajax-&gt;register(XAJAX_FUNCTION, 'afficher');// On enregistre nos fonctions.
$xajax-&gt;register(XAJAX_FUNCTION, 'envoyer');
$xajax-&gt;processRequest();// Fonction qui va se charger de générer le Javascript, à partir des données que l'on a fournies à xAjax APRÈS AVOIR DÉCLARÉ NOS FONCTIONS.
?&gt;

&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; &gt;
        &lt;head&gt;
                &lt;title&gt;Chat xAjax&lt;/title&gt;
                &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot; /&gt;
                &lt;?php $xajax-&gt;printJavascript(); /* Affiche le Javascript */?&gt;
                &lt;script type=&quot;text/javascript&quot;&gt;
                function refresh()// Code Javascript qui va appeler la fonction afficher toutes les 5 secondes.
                {
                        xajax_afficher();
                        setTimeout(refresh, 5000);
                }
                &lt;/script&gt;
        &lt;/head&gt;
        &lt;body&gt;
                &lt;div id=&quot;block&quot;&gt;&lt;/div&gt;
                &lt;form action=&quot;&quot;&gt;
                        &lt;fieldset&gt;
                         &lt;legend&gt;Entrer ici votre message :&lt;/legend&gt;
                         &lt;div&gt;
                          &lt;label&gt;Nom : &lt;input type=&quot;text&quot; size=&quot;15&quot; id=&quot;posteur&quot; name=&quot;posteur&quot; /&gt;&lt;/label&gt;&lt;br /&gt;
                          &lt;label&gt;Message : &lt;input type=&quot;text&quot; size=&quot;50&quot; id=&quot;message&quot; name=&quot;message&quot; /&gt;&lt;/label&gt;&lt;br /&gt;
                          &lt;input type=&quot;submit&quot; value=&quot;Envoyer&quot; onclick=&quot;xajax_envoyer(xajax.getFormValues(this.form)); return false;&quot; /&gt;
                         &lt;/div&gt;
                        &lt;/fieldset&gt;
                &lt;/form&gt;
                &lt;script type=&quot;text/javascript&quot;&gt;
                        refresh();// On appelle la fonction refresh() pour lancer le script.
                &lt;/script&gt;
        &lt;/body&gt;
&lt;/html&gt;</code></pre><aside id="r-418756" data-claire-element-id="418756" data-claire-semantic="information"><p id="r-418755" data-claire-element-id="418755">Vous remarquerez que j'ai utilisé this.form à la place du nom du formulaire et que cela fonctionne à merveille !</p></aside><p id="r-418757" data-claire-element-id="418757">Comme vous pouvez le voir, c'est très simple et ça nous permet de ne passer qu'un seul argument à nos fonctions, ce qui facilite grandement la tâche de gestion des données des gros formulaires, comme les formulaires d'inscription, de boutiques en ligne, etc. ;)</p><h2 id="r-cinquieme-bilan" data-claire-element-id="418763">Cinquième bilan :</h2><ul id="r-418762" data-claire-element-id="418762"><li id="r-418759" data-claire-element-id="418759"><p id="r-418758" data-claire-element-id="418758">On utilise xajax.getFormValues(this.form) pour transmettre les données du formulaire.</p></li><li id="r-418761" data-claire-element-id="418761"><p id="r-418760" data-claire-element-id="418760">On n'oublie pas de spécifier <strong>un id et un name identiques</strong> sur chaque élément du formulaire.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
Introduction à la librairie xAjax et à la POO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
Les débuts avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
Écrire et appeler des fonctions avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
Recevoir et traiter une réponse xAjax dans ses fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
Un Chat en xAjax!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
xAjax et l&#039;encodage de caractères
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
Traiter des formulaires avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
Créer un message de chargement avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
Résumé des méthodes xAjax
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
<span class="arrow"></span>
<span class="next">xAjax et l&#039;encodage de caractères</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
<span class="next">Créer un message de chargement avec xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CrerunmessagedechargementavecxAjax"></a><h2>Créer un message de chargement avec xAjax</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
<span class="arrow"></span>
<span class="next">Traiter des formulaires avec xAjax</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
<span class="next">Résumé des méthodes xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418765" data-claire-element-id="418765">J'ai déjà eu à maintes reprises la question et je n'ai jamais pris le temps d'y répondre : il est en effet possible d'afficher un message de chargement lorsque xAjax effectue une requête.</p><p id="r-418766" data-claire-element-id="418766">Bon, c'est du Javascript pur et dur mais ce n'est point compliqué !<br/> La technique consiste à <strong>créer deux petites fonctions en Javascript : une qui affichera le message, une qui le cachera</strong>. ^^ <br/> Lorsqu'on lance la requête, on affiche le message ; dès qu'on a reçu la réponse, on le cache. Rien à ajouter, la technique est d'une simplicité enfantine !</p><p id="r-418767" data-claire-element-id="418767">Nous allons ajouter un div qui contiendra le message de chargement en début de page :</p><pre id="r-418768" data-claire-element-id="418768"><code data-claire-semantic="html">&lt;div id=&quot;loadingMessage&quot; style=&quot;font-size: 15px; color: white; position: fixe; visibility: hidden; padding: 5px; background-color: red; width: 90px;&quot;&gt;Chargement...&lt;/div&gt;</code></pre><p id="r-418769" data-claire-element-id="418769">Ici je lui donne l'<em>id</em>loadingMessage, mais libre à vous d'en choisir un autre…</p><p id="r-418770" data-claire-element-id="418770">Codons maintenant la première fonction Javascript qui affiche le message, cette fonction est à placer dans la balise &lt;head&gt; de la page:</p><pre id="r-418771" data-claire-element-id="418771"><code data-claire-semantic="javascript">function printLoadingMessage(loadingMessageText)
{
        if(!loadingMessageText)// Si aucun message personnalisé n'a été précisé, on lui donne le message par défaut.
        {
                loadingMessageText = 'Chargement...';
        }
        var parentNode = document.getElementById('loadingMessage');// On récupère le nœud parent qui est la balise div.
        var textNode = document.createTextNode(loadingMessageText);// On crée un nœud enfant qui est tout simplement le texte.
        parentNode.replaceChild(textNode, parentNode.firstChild);// On accroche le texte à la balise div.
        document.getElementById('loadingMessage').style.visibility='visible';// Puis on rend visible le bloc.
}</code></pre><p id="r-418772" data-claire-element-id="418772">Ce n'est pas un cours de Javascript mais je vous explique brièvement : on a une variable loadingMessageText qui contient le texte à afficher dans notre message de chargement, on intègre ce message dans notre balise div, puis on le rend visible. ;)</p><p id="r-418773" data-claire-element-id="418773">Enfin la fonction Javascript qui va cacher le message (elle aussi à placer dans la balise &lt;head&gt; de la page) :</p><pre id="r-418774" data-claire-element-id="418774"><code data-claire-semantic="javascript">function hideLoadingMessage()
{
        document.getElementById('loadingMessage').style.visibility='hidden';// On rend le message invisible.
}</code></pre><p id="r-418775" data-claire-element-id="418775">Cette fois-ci, aucun message à modifier : on rend juste le div invisible pour cacher le message de chargement.</p><p id="r-418776" data-claire-element-id="418776">Nous avons tout codé, il nous suffit à présent d'appeler la fonction printLoadingMessage à chaque fois qu'on fait appel à une fonction xAjax <em>(comme xajax_envoyer ou xajax_afficher)</em>, puis à appeler hideLoadingMessage à chaque fin de fonction.<br/> Voici le code final:</p><pre id="r-418777" data-claire-element-id="418777"><code data-claire-semantic="html+php">&lt;?php
//
// Notre fonction PHP pour afficher les messages :
//
function afficher()
{
        $reponse = new xajaxResponse();// Création d'une instance de xajaxResponse pour traiter les réponses serveur.
        $chat = '';// Initialisation de la variable $chat.
        $fichier_texte = fopen('./chat.txt', 'r');// On ouvre notre fichier texte en lecture seule.
        $chat = fread($fichier_texte, filesize('./chat.txt'));//On lit notre fichier et on stocke son contenu dans la variable $chat.
        fclose($fichier_texte);//On ferme notre fichier texte.   
        $reponse-&gt;assign('block', 'innerHTML', $chat);// Enfin, on remplace le contenu du div block par le contenu de $chat.
	$reponse-&gt;script(&quot;hideLoadingMessage();&quot;);// ON CACHE LE MESSAGE DE CHARGEMENT.
        return $reponse;
}

//
// Notre fonction PHP envoyer pour envoyer un message :
//
function envoyer($donnees_formulaire)
{
        $reponse = new xajaxResponse();// Création d'une instance de xajaxResponse pour traiter les réponses serveur.
        $fichier_texte = fopen('./chat.txt', 'a');// On ouvre notre fichier texte en écriture seule.
        fwrite($fichier_texte, addslashes('&lt;strong&gt;' . htmlentities(utf8_decode($donnees_formulaire['posteur'])) . ':&lt;/strong&gt;' . htmlentities(utf8_decode($donnees_formulaire['message'])) . '&lt;br /&gt;'));//On stocke le message dans notre fichier.
        fclose($fichier_texte);// On ferme notre fichier texte.
        $reponse-&gt;clear('message', 'value');// On vide le champ contenant le message de l'utilisateur.
        $reponse-&gt;call('xajax_afficher');// On appelle la fonction afficher pour afficher les messages et pour que l'utilisateur voie son message à l'écran.
	$reponse-&gt;script(&quot;hideLoadingMessage();&quot;);// ON CACHE LE MESSAGE DE CHARGEMENT.
        return $reponse;
}

//
//Ouverture de la librairie xajax, instanciation d'un objet de la classe xajax, puis déclaration de nos fonctions PHP :
//
require_once('./xajax_core/xajax.inc.php');
$xajax = new xajax(); // On initialise l'objet xajax.
$xajax-&gt;setCharEncoding('iso-8859-1');// On précise à xAjax qu'on souhaite travailler en ISO-8859-1.
$xajax-&gt;register(XAJAX_FUNCTION, 'afficher');// On enregistre nos fonctions.
$xajax-&gt;register(XAJAX_FUNCTION, 'envoyer');
$xajax-&gt;processRequest();// Fonction qui va se charger de générer le Javascript, à partir des données que l'on a fournies à xAjax APRÈS AVOIR DÉCLARÉ NOS FONCTIONS.
?&gt;

&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot; &gt;
        &lt;head&gt;
                &lt;title&gt;Chat xAjax&lt;/title&gt;
                &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot; /&gt;
                &lt;?php $xajax-&gt;printJavascript(); /* Affiche le Javascript */?&gt;
                &lt;script type=&quot;text/javascript&quot;&gt;
                function refresh()// Code Javascript qui va appeler la fonction afficher toutes les 5 secondes.
                {
		printLoadingMessage('Récupération des messages...');// On va appeler xajax_afficher, alors juste avant on affiche notre message.
                        xajax_afficher();
                        setTimeout(refresh, 5000);
                }
	    function printLoadingMessage(loadingMessageText)
                {
                        if(!loadingMessageText)//Si aucun message personnalisé n'a été précisé, on lui donne le message par défaut.
                        {
                                loadingMessageText = 'Chargement...';
                        }
                        var parentNode = document.getElementById('loadingMessage');// On récupère le nœud parent qui est la balise div.
                        var textNode = document.createTextNode(loadingMessageText);//On crée un nœud enfant qui est tout simplement le texte.
                        parentNode.replaceChild(textNode, parentNode.firstChild);// On accroche le texte à la balise div.
                        document.getElementById('loadingMessage').style.visibility='visible';// Puis on rend visible le bloc.
                }
                function hideLoadingMessage()
                {
                        document.getElementById('loadingMessage').style.visibility='hidden';// On rend le message invisible.
                }
                &lt;/script&gt;
        &lt;/head&gt;
        &lt;body&gt;
		&lt;div id=&quot;loadingMessage&quot; style=&quot;font-size: 15px; color: white; position: fixe; visibility: hidden; padding: 5px; background-color: red; width: 40%;&quot;&gt;Chargement...&lt;/div&gt;
                &lt;div id=&quot;block&quot;&gt;&lt;/div&gt;
                &lt;form action=&quot;&quot;&gt;
                        &lt;fieldset&gt;
                         &lt;legend&gt;Entrer ici votre message :&lt;/legend&gt;
                         &lt;div&gt;
                          &lt;label&gt;Nom : &lt;input type=&quot;text&quot; size=&quot;15&quot; id=&quot;posteur&quot; name=&quot;posteur&quot; /&gt;&lt;/label&gt;&lt;br /&gt;
                          &lt;label&gt;Message : &lt;input type=&quot;text&quot; size=&quot;50&quot; id=&quot;message&quot; name=&quot;message&quot; /&gt;&lt;/label&gt;&lt;br /&gt;
                          &lt;input type=&quot;submit&quot; value=&quot;Envoyer&quot; onclick=&quot;printLoadingMessage('Envoi du message...'); xajax_envoyer(xajax.getFormValues(this.form)); return false;&quot; /&gt;
                         &lt;/div&gt;
                        &lt;/fieldset&gt;
                &lt;/form&gt;
                &lt;script type=&quot;text/javascript&quot;&gt;
                        refresh();// On appelle la fonction refresh() pour lancer le script.
                &lt;/script&gt;
        &lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-418778" data-claire-element-id="418778">Voilà, j'espère que vous avez compris le système car je veux bien croire que cette partie reste un peu plus ambigüe que le reste, mais sachez que si vous ne la comprenez pas (ou si vous ne voulez pas la comprendre :p ), ce n'est pas très important car elle ne fait pas partie intégrante de xAjax, c'est plutôt un bonus. ;)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
Introduction à la librairie xAjax et à la POO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
Les débuts avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
Écrire et appeler des fonctions avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
Recevoir et traiter une réponse xAjax dans ses fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
Un Chat en xAjax!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
xAjax et l&#039;encodage de caractères
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
Traiter des formulaires avec xAjax
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
Créer un message de chargement avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
Résumé des méthodes xAjax
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
<span class="arrow"></span>
<span class="next">Traiter des formulaires avec xAjax</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
<span class="next">Résumé des méthodes xAjax</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="RsumdesmthodesxAjax"></a><h2>Résumé des méthodes xAjax</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
<span class="arrow"></span>
<span class="next">Créer un message de chargement avec xAjax</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418780" data-claire-element-id="418780">Voici un petit résumé, sous forme de tableau, des méthodes et des classes xAjax. Elles sont dans l'ordre où vous devez les déclarer.</p><h2 id="r-classe-main" data-claire-element-id="418814">Classe « Main »</h2><table id="r-418813" data-claire-element-id="418813"><thead id="r-418786" data-claire-element-id="418786"><tr id="r-418785" data-claire-element-id="418785"><th id="r-418782" data-claire-element-id="418782"><p id="r-418781" data-claire-element-id="418781">Utilité</p></th><th id="r-418784" data-claire-element-id="418784"><p id="r-418783" data-claire-element-id="418783">Code</p></th></tr></thead><tbody id="r-418812" data-claire-element-id="418812"><tr id="r-418791" data-claire-element-id="418791"><td id="r-418788" data-claire-element-id="418788"><p id="r-418787" data-claire-element-id="418787">Créer une instance d'un objet xAjax.</p></td><td id="r-418790" data-claire-element-id="418790"><p id="r-418789" data-claire-element-id="418789">$xajax = new xajax();</p></td></tr><tr id="r-418796" data-claire-element-id="418796"><td id="r-418793" data-claire-element-id="418793"><p id="r-418792" data-claire-element-id="418792">Définir le jeu de caractères.</p></td><td id="r-418795" data-claire-element-id="418795"><p id="r-418794" data-claire-element-id="418794">$xajax-&gt;setCharEncoding('ISO-8859-1');</p></td></tr><tr id="r-418801" data-claire-element-id="418801"><td id="r-418798" data-claire-element-id="418798"><p id="r-418797" data-claire-element-id="418797">Enregistrer une fonction.</p></td><td id="r-418800" data-claire-element-id="418800"><p id="r-418799" data-claire-element-id="418799">$xajax-&gt;register(XAJAX_FUNCTION, 'MaFonction');</p></td></tr><tr id="r-418806" data-claire-element-id="418806"><td id="r-418803" data-claire-element-id="418803"><p id="r-418802" data-claire-element-id="418802">Indiquer à xAjax de générer le Javascript nécessaire au fonctionnement du script.</p></td><td id="r-418805" data-claire-element-id="418805"><p id="r-418804" data-claire-element-id="418804">$xajax-&gt;processRequest();</p></td></tr><tr id="r-418811" data-claire-element-id="418811"><td id="r-418808" data-claire-element-id="418808"><p id="r-418807" data-claire-element-id="418807">Afficher le Javascript de la page.</p></td><td id="r-418810" data-claire-element-id="418810"><p id="r-418809" data-claire-element-id="418809">$xajax-&gt;printJavascript();</p></td></tr></tbody></table><h2 id="r-la-classe-reponse" data-claire-element-id="418853">La classe « Réponse »</h2><table id="r-418852" data-claire-element-id="418852"><thead id="r-418820" data-claire-element-id="418820"><tr id="r-418819" data-claire-element-id="418819"><th id="r-418816" data-claire-element-id="418816"><p id="r-418815" data-claire-element-id="418815">Fonction</p></th><th id="r-418818" data-claire-element-id="418818"><p id="r-418817" data-claire-element-id="418817">Code</p></th></tr></thead><tbody id="r-418851" data-claire-element-id="418851"><tr id="r-418825" data-claire-element-id="418825"><td id="r-418822" data-claire-element-id="418822"><p id="r-418821" data-claire-element-id="418821">Créer une instance d'un objet de réponse xAjax.</p></td><td id="r-418824" data-claire-element-id="418824"><p id="r-418823" data-claire-element-id="418823">$reponse = new xajaxResponse();</p></td></tr><tr id="r-418830" data-claire-element-id="418830"><td id="r-418827" data-claire-element-id="418827"><p id="r-418826" data-claire-element-id="418826">Modifier le contenu de la page.</p></td><td id="r-418829" data-claire-element-id="418829"><p id="r-418828" data-claire-element-id="418828">$reponse-&gt;assign('IdElement', 'Attribut', 'Valeur');</p></td></tr><tr id="r-418835" data-claire-element-id="418835"><td id="r-418832" data-claire-element-id="418832"><p id="r-418831" data-claire-element-id="418831">Appeler une fonction JavaScript.</p></td><td id="r-418834" data-claire-element-id="418834"><p id="r-418833" data-claire-element-id="418833">$reponse-&gt;call('NomDeLaFonctionJS');</p></td></tr><tr id="r-418840" data-claire-element-id="418840"><td id="r-418837" data-claire-element-id="418837"><p id="r-418836" data-claire-element-id="418836">Effacer un champ.</p></td><td id="r-418839" data-claire-element-id="418839"><p id="r-418838" data-claire-element-id="418838">$reponse-&gt;clear('IdElement', 'Attribut');</p></td></tr><tr id="r-418845" data-claire-element-id="418845"><td id="r-418842" data-claire-element-id="418842"><p id="r-418841" data-claire-element-id="418841">Exécuter un script Javascript.</p></td><td id="r-418844" data-claire-element-id="418844"><p id="r-418843" data-claire-element-id="418843">$reponse-&gt;script('Code Javascript');</p></td></tr><tr id="r-418850" data-claire-element-id="418850"><td id="r-418847" data-claire-element-id="418847"><p id="r-418846" data-claire-element-id="418846">Retourner les résultats.</p></td><td id="r-418849" data-claire-element-id="418849"><p id="r-418848" data-claire-element-id="418848">return $reponse;</p></td></tr></tbody></table><h2 id="r-les-fonctions-javascript-de-xajax" data-claire-element-id="418871">Les fonctions Javascript de xAjax</h2><table id="r-418866" data-claire-element-id="418866"><thead id="r-418859" data-claire-element-id="418859"><tr id="r-418858" data-claire-element-id="418858"><th id="r-418855" data-claire-element-id="418855"><p id="r-418854" data-claire-element-id="418854">Fonction</p></th><th id="r-418857" data-claire-element-id="418857"><p id="r-418856" data-claire-element-id="418856">Code</p></th></tr></thead><tbody id="r-418865" data-claire-element-id="418865"><tr id="r-418864" data-claire-element-id="418864"><td id="r-418861" data-claire-element-id="418861"><p id="r-418860" data-claire-element-id="418860">Retourner un tableau contenant les données d'un formulaire.</p></td><td id="r-418863" data-claire-element-id="418863"><p id="r-418862" data-claire-element-id="418862">xajax.getFormValues('NomDuFormulaire')</p></td></tr></tbody></table><p id="r-418867" data-claire-element-id="418867">xAjax est une librairie magnifique qui allie puissance et facilité. Je vous ai enseigné tout ce que je connaissais d'elle, mais elle cache beaucoup d'autres choses !</p><p id="r-418868" data-claire-element-id="418868">Je vous conseille d'aller voir ici pour plus d'infos, c'est malheureusement en anglais… <a href="http://www.xajax-project.org/en/docs-tutorials/api-docs/">http://www.xajax-project.org/en/docs-tutorials/api-docs/</a></p><p id="r-418869" data-claire-element-id="418869">xAjax n'est évidemment pas destinée à la création de <em>chat</em>. Si vous avez des connaissances en DHTML, elle fera merveille. Vous pourrez créer des applications Web qui ressembleront à des applications logicielles, je pense par exemple aux fenêtres qui s'ouvrent pour demander des renseignements à l'utilisateur, ou encore au <em>drag-and-drop</em> qui permettrait, par exemple, de déplacer des objets vers la corbeille, etc.<br/> Néanmoins, si vous souhaitez vous lancer dans cette direction, il faudra vous y connaître un minimum en Javascript, et dans ce cas, il est peut-être plus intéressant de manipuler l'objet <strong>XMLHTTPRequest</strong> pour ceux qui connaissent !</p><p id="r-418870" data-claire-element-id="418870">Pour conclure, mettons fin aux personnes médisantes qui pensent et disent que xAjax est une bourde de plus parmi les frameworks PHP : bien sûr, xAjax a ses limites, il ne faut d'ailleurs jamais les oublier ou se laisser emporter par cette facilité qui donne pourtant de si beaux résultats ; bien sûr qu'utiliser AJAX avec XMLHTTPRequest c'est beaucoup plus <em>clean</em> et <em>soft</em> que de coder avec xAjax qui alourdit forcément le script ; encore une fois, bien sûr que c'est mieux de ne pas utiliser xAjax, mais plutôt de coder tout soi-même ! <br/> Mais il y a quelque chose que tout le monde doit admettre : c'est qu'utiliser AJAX avec xAjax, c'est beaucoup plus simple. <strong>Alors retenons tous une chose : adapter son code, sa technique, et son langage au résultat que l'on souhaite obtenir</strong>. <br/> Tout comme on ne code pas un logiciel de traitement d'images avec PHP, on n'utilise pas non plus xAjax pour faire un jeu 2D bourré de requêtes asynchrones. xAjax est <strong>parfaitement adapté</strong> pour des petites applications (scripts de connexion, d'inscription, etc., voire des petits chat comme nous l'avons fait), mais ne l'est pas pour des jeux en ligne par exemple. Au même titre qu'il ne faut pas hésiter à utiliser XMLHTTPRequest pour des gros scripts AJAX, il ne faut pas hésiter à utiliser xAjax pour des petits scripts. ;)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax">[xAjax] Applications AJAX faciles avec PHP et xAjax !</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/introduction-a-la-librairie-xajax-et-a-la-poo">
Introduction à la librairie xAjax et à la POO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/les-debuts-avec-xajax">
Les débuts avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/ecrire-et-appeler-des-fonctions-avec-xajax">
Écrire et appeler des fonctions avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/recevoir-et-traiter-une-reponse-xajax-dans-ses-fonctions">
Recevoir et traiter une réponse xAjax dans ses fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/un-chat-en-xajax">
Un Chat en xAjax!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/xajax-et-l-encodage-de-caracteres">
xAjax et l&#039;encodage de caractères
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/traiter-des-formulaires-avec-xajax">
Traiter des formulaires avec xAjax
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
Créer un message de chargement avec xAjax
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/resume-des-methodes-xajax">
Résumé des méthodes xAjax
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/xajax-applications-ajax-faciles-avec-php-et-xajax/creer-un-message-de-chargement-avec-xajax">
<span class="arrow"></span>
<span class="next">Créer un message de chargement avec xAjax</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/xajax-applications-ajax-faciles-avec-php-et-xajax.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:41:20 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/xajax-applications-ajax-faciles-avec-php-et-xajax.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:35:37 GMT -->
</html>