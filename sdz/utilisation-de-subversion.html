<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/utilisation-de-subversion.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 01:21:16 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/utilisation-de-subversion.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:21:38 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Utilisation de Subversion</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/utilisation-de-subversion.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Utilisation de Subversion</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#UtilisationdeSubversion">Utilisation de Subversion</a><br/><a href="#PrsentationdeSubversion">Présentation de Subversion</a><br/><a href="#ActionsdebasesurSubversion">Actions de base sur Subversion</a><br/><a href="#Conflitsmergingetlock">Conflits, merging et lock</a><br/><a href="#Contrlezvoscommits">Contrôlez vos commits</a><br/><a href="#Remonterletemps">Remonter le temps</a><br/></div>
<a name="UtilisationdeSubversion"></a><h2>Utilisation de Subversion</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/presentation-de-subversion">
<span class="next">Présentation de Subversion</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-544254" data-claire-element-id="544254">Bienvenue dans ce cours sur l'utilisation basique du logiciel de <em>versionning</em> Subversion, considéré comme le successeur de CVS (Concurrent Versions System). Très basiquement, Subversion (que je surnommerai SVN dans le reste de ce tuto) est un logiciel permettant une gestion des versions.</p><p id="r-544255" data-claire-element-id="544255">Je peux comprendre que l'expression &quot;gestion des versions&quot; puisse paraître obscure à certains, mais tout va s'éclaircir une fois le premier chapitre lu et compris !</p><p id="r-544256" data-claire-element-id="544256">Je vais essayer de rester le plus clair possible, tout en n'étant pas exhaustif sur les possibilités que nous offre SVN (il faudrait un big-tuto d'une vingtaine de chapitres pour cela).</p><p id="r-544257" data-claire-element-id="544257">Je conseillerais à ceux à qui ce tuto va plaire, qui voudront en savoir plus et qui ne sont pas réfractaires à l'anglais d'aller lire <a href="http://svnbook.red-bean.com/">le book SVN</a>, très complet (360 pages) et qui vous expliquera toutes les facettes du logiciel, aussi bien l'utilisation que l'administration du serveur.</p><p id="r-544258" data-claire-element-id="544258">Finalement, je traiterai le côté ligne de commande de SVN, je n'aborderai nulle part les diverses interfaces graphiques qui existent, tel <a href="http://tortoisesvn.tigris.org/">TortoiseSVN</a> pour Windows par exemple.</p><p id="r-544259" data-claire-element-id="544259">Bonne chance !</p>
</div><a name="PrsentationdeSubversion"></a><h2>Présentation de Subversion</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/actions-de-base-sur-subversion">
<span class="next">Actions de base sur Subversion</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-qu-est-ce-que-subversion" data-claire-element-id="544262">Qu'est-ce que Subversion ?</h2><p id="r-544260" data-claire-element-id="544260">Comme dit dans l'introduction, Subversion est un logiciel de contrôle de versions. En langage clair, il s'agit d'un logiciel qui enregistre tous les états d'une arborescence au fil du temps (par arborescence, j'entends à la fois la structure des dossiers, mais également le contenu des fichiers). C'est de là que vient le terme de &quot;version&quot; : le logiciel surveille les différentes versions d'un répertoire.</p><p id="r-544261" data-claire-element-id="544261">Subversion (tout comme son prédécesseur, CVS) est principalement utilisé dans le cadre du développement de logiciels, et j'espère qu'avec le paragraphe précédent, vous comprendrez rapidement pourquoi. Le développement d'un logiciel est composé de multiples modifications de fichiers au fil du temps ; SVN permet d'enregistrer tous ces changements pour, par exemple, pouvoir avoir une trace explicite et exhaustive de tous les changements faits au code source, ou pouvoir revenir au code tel qu'il était il y a 5 mois.</p><h2 id="r-basiquement-comment-fonctionne-subversion" data-claire-element-id="544270">Basiquement, comment fonctionne Subversion ?</h2><p id="r-544263" data-claire-element-id="544263">Sans rentrer dans les détails, dites-vous que Subversion réalise des <strong>snapshots</strong> de l'arborescence à chaque changement qui lui est fait. C'est-à-dire qu'il garde en mémoire tous les changements faits à l'arborescence au fil du temps.</p><p id="r-544264" data-claire-element-id="544264">Imaginez que vous faites un dessin sur une feuille de papier, et qu'à chaque fois que vous ajoutez une partie sur le dessin, vous photocopiez votre feuille et la rangez dans une archive. C'est exactement le même principe avec SVN.</p><p id="r-544265" data-claire-element-id="544265">Maintenant, imaginez qu'à la place de photocopier votre dessin, vous le scannez pour le mettre à disposition d'autres dessinateurs dans le monde via le réseau Internet, eh bien là vous avez tout à fait compris le principe de SVN. Il permet à plusieurs développeurs à travers le monde de travailler simultanément sur le même code source, grâce à différents procédés que nous mettrons en lumière plus loin.</p><p id="r-544266" data-claire-element-id="544266"><em>Nota bene :</em> je parle depuis tout à l'heure de code source, mais le principe est le même avec des fichiers binaires (images, vidéos, etc.).</p><div id="r-544268" data-claire-element-id="544268" data-claire-semantic="question"><p id="r-544267" data-claire-element-id="544267">Pardon, mais si SVN garde une copie de mon dessin à chaque changement, mon archive risque de devenir relativement grosse à la longue, non ? :euh:</p></div><p id="r-544269" data-claire-element-id="544269">Merci lapin malin, en effet sur mon exemple ça serait le cas, mais Subversion est plus intelligent que ça et, au lieu de &quot;photocopier&quot; comme un bourrin toute l'arborescence à chaque fois, il analyse tranquillement ce qui a changé et réalise ce que j'appellerais joliment un <strong>snapshot différentiel</strong> (je ne sais pas si ce terme existe, mais c'est la classe !). En gros, il ne sauvegardera que ce qui a changé d'un <em>snapshot</em> à l'autre, et tout de suite la masse de données à enregistrer est beaucoup moins importante, ce qui soulage à la fois les disques durs et les connexions.</p><h2 id="r-une-histoire-de-revisions" data-claire-element-id="544274">Une histoire de révisions</h2><p id="r-544271" data-claire-element-id="544271">Subversion, pour organiser les données qu'il enregistre, se base sur un système de <strong>révisions</strong>. Explicitons rapidement ce terme : pour SVN une révision correspond à un état de l'arborescence à un moment précis du temps. La révision 13 pourra être un <em>snapshot</em> du 22 juillet et la révision 14 le <em>snapshot</em> suivant.</p><p id="r-544272" data-claire-element-id="544272">SVN utilise un système de révisions global, c'est-à-dire qu'une révision correspond aux changements effectués sur l'arborescence entière depuis la dernière révision.</p><p id="r-544273" data-claire-element-id="544273">La première révision est la révision 0 (ou <strong>r0</strong>) et chaque nouvelle révision incrémente de 1 le nombre (la deuxième révision sera la révision 1 et ainsi de suite).</p><h2 id="r-depot-et-copie-locale" data-claire-element-id="544283">Dépôt et copie locale</h2><p id="r-544275" data-claire-element-id="544275">Un système utilisant Subversion est à diviser en deux parties distinctes, le <strong>dépôt</strong> (ou <strong>repository</strong> en anglais) et la <strong>copie locale</strong> (ou <strong>local copy</strong> chez Shakespeare). J'utiliserai à partir de maintenant ces termes à la place d'arborescence, qui est trop long et trop importun à écrire.</p><h3 id="r-depot" data-claire-element-id="544279">Dépôt</h3><p id="r-544276" data-claire-element-id="544276">Le dépot est le côté serveur d'un système utilisant Subversion, c'est &quot;l'archive&quot; dans laquelle seront envoyées les modifications faites à l'arborescence (appelées <strong>changeset</strong>* d'ailleurs). Celui-ci peut se trouver sur un serveur distant, sur un serveur situé dans le réseau local ou même sur votre propre machine.</p><p id="r-544277" data-claire-element-id="544277">* : un <em>changeset</em> est un ensemble de modifications qui formeront une nouvelle révision.</p><p id="r-544278" data-claire-element-id="544278">Un utilisateur &quot;basique&quot; (entendre un non-administrateur) de Subversion n'a pas besoin de savoir ce qui se passe dans le dépôt, ce sont les mécanismes internes du processus.</p><h3 id="r-copie-locale" data-claire-element-id="544282">Copie locale</h3><p id="r-544280" data-claire-element-id="544280">Voilà quelque chose qui concerne beaucoup plus les utilisateurs. Une copie locale est une copie de l'état du dépôt à un moment précis, située sur l'ordinateur d'un des utilisateurs. Reprenons mon exemple du dessin, ce que le dessinateur a est une copie locale ; et ce qu'un autre dessinateur va récupérer du dépôt sera aussi une copie locale.</p><p id="r-544281" data-claire-element-id="544281">C'est sur la copie locale que l'utilisateur travaille.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion">Utilisation de Subversion</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/presentation-de-subversion">
Présentation de Subversion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/actions-de-base-sur-subversion">
Actions de base sur Subversion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/conflits-merging-et-lock">
Conflits, merging et lock
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/controlez-vos-commits">
Contrôlez vos commits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/remonter-le-temps">
Remonter le temps
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/actions-de-base-sur-subversion">
<span class="next">Actions de base sur Subversion</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ActionsdebasesurSubversion"></a><h2>Actions de base sur Subversion</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/presentation-de-subversion">
<span class="arrow"></span>
<span class="next">Présentation de Subversion</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/conflits-merging-et-lock">
<span class="next">Conflits, merging et lock</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-creer-un-depot-1" data-claire-element-id="544292">Créer un dépôt</h2><p id="r-544285" data-claire-element-id="544285">Une fois Subversion installé et en état de marche, la première étape est de créer un dépôt. C'est la seule action d'administration que nous verrons (très rapidement) pour les besoins du tuto. Je suis sous Linux et toutes les actions se produiront à l'intérieur de <em>/home/apognu/svn</em>. Pour créer un dépôt, ouvrez donc un terminal ou une invite de commande et tapez :</p><pre id="r-544286" data-claire-element-id="544286"><code data-claire-semantic="console">svnadmin create repository</code></pre><p id="r-544287" data-claire-element-id="544287">Cela a eu pour conséquence d'utiliser le programme <em>svnadmin</em> pour créer (sous-programme <em>create</em>) un dépôt dans le répertoire <em>repository</em>.</p><p id="r-544288" data-claire-element-id="544288">Un rapide coup d'oeil dans le répertoire sus-cité nous fait voir son affreux contenu :</p><pre id="r-544289" data-claire-element-id="544289"><code data-claire-semantic="console">conf  dav  db  format  hooks  locks  README.txt</code></pre><p id="r-544290" data-claire-element-id="544290">Et encore, je ne suis pas allé lister les répertoires ; comme je l'ai dis plus haut, l'utilisateur lambda doit faire abstraction du contenu du dépôt, celui-ci doit être aussi important pour vous que la première représentation sur scène de Mireille Mathieu (j'emploie les grands moyens) !</p><p id="r-544291" data-claire-element-id="544291">Nous voilà en possession d'un dépôt vide, maintenant peuplons-le !</p><h2 id="r-checkout" data-claire-element-id="544314">Checkout</h2><p id="r-544293" data-claire-element-id="544293">Du côté utilisateur, la première chose à faire est la création de sa copie locale. C'est à cela que sert le <strong>checkout</strong>. Basiquement, il crée une copie locale en téléchargeant le contenu du dépôt sur votre disque. Habituellement, le <em>checkout</em> est à faire une seule fois car avoir deux copies locales est rarement intéressant (quoiqu'il peut l'être, mais on n'abordera pas ça ici) et parce que le <em>checkout</em> télécharge à chaque fois tout le contenu du dépôt ce qui dans certains cas peut être assez lourd pour les connexions Internet.</p><aside id="r-544304" data-claire-element-id="544304" data-claire-semantic="information"><p id="r-544294" data-claire-element-id="544294">Un dépôt est toujours appelé par son adresse sous forme d'URL, cela peut être :</p><ul id="r-544303" data-claire-element-id="544303"><li id="r-544296" data-claire-element-id="544296"><p id="r-544295" data-claire-element-id="544295">file:///chemin/vers/le/dépot ;</p></li><li id="r-544298" data-claire-element-id="544298"><p id="r-544297" data-claire-element-id="544297"><a href="http://server.web.com/repository">http://server.web.com/repository</a> ;</p></li><li id="r-544300" data-claire-element-id="544300"><p id="r-544299" data-claire-element-id="544299">svn://server.svn.com/repository ;</p></li><li id="r-544302" data-claire-element-id="544302"><p id="r-544301" data-claire-element-id="544301">etc.</p></li></ul></aside><p id="r-544305" data-claire-element-id="544305">Dans notre cas le dépôt est vide et situé sur notre machine, donc pas de problème de poids, procédons procédons ; tapez ceci dans un terminal ou une invite de commande :</p><pre id="r-544306" data-claire-element-id="544306"><code data-claire-semantic="console">svn checkout file:///home/apognu/svn/repository localcopy</code></pre><p id="r-544307" data-claire-element-id="544307">Basiquement, on demande ici à SVN de procéder au <em>checkout</em> du dépôt situé dans le dossier <em>/home/apognu/svn/repository</em> et de créer la copie locale dans le dossier <em>localcopy</em>.</p><aside id="r-544309" data-claire-element-id="544309" data-claire-semantic="information"><p id="r-544308" data-claire-element-id="544308">Si on ne précise pas, Subversion réalise toujours le <em>checkout</em> depuis la dernière révision existante (appelée révision <strong>HEAD</strong>), soit la dernière version du dépôt.</p></aside><p id="r-544310" data-claire-element-id="544310">Voilà ce qu'on a :</p><pre id="r-544311" data-claire-element-id="544311"><code data-claire-semantic="console">Checked out revision 0.</code></pre><p id="r-544312" data-claire-element-id="544312">Parfait.</p><p id="r-544313" data-claire-element-id="544313">Un coup d'oeil dans le dossier <em>localcopy</em> ne nous montre rien sauf (si on a activé l'affichage des fichiers et dossiers cachés) un dossier <em>.svn</em>. Tout comme le dépôt, ce dossier sert aux mécanismes de Subversion et n'est d'aucune utilité pour l'utilisateur que vous êtes. ;)</p><h2 id="r-update-2" data-claire-element-id="544325">Update</h2><p id="r-544315" data-claire-element-id="544315">L'action <strong>update</strong> de SVN est dans la lignée du <em>checkout</em>, dans le sens où elle télécharge des données depuis le dépôt, sauf que celle-ci ne créé pas de copie locale.</p><p id="r-544316" data-claire-element-id="544316">Lorsqu'un utilisateur lance une <em>update</em> de sa copie locale, Subversion va comparer cette dernière avec le contenu du dépôt et si celui-ci est à une révision supérieure que celle de la copie locale, SVN va télécharger le différentiel entre les deux.</p><p id="r-544317" data-claire-element-id="544317">Un exemple concret : vous êtes deux utilisateurs sur un même dépôt, à un temps <em>t</em> vous êtes à la révision 4, seulement là vous partez en vacances. Pendant votre absence votre collègue continue à travailler, et le dépôt passe à la révision 7. À votre retour vous avez envie de récupérer ce qui a changé depuis votre départ, donc vous lancez une <em>update</em>, votre copie locale est mise à jour de la révision 4 à la révision 7. Vous pouvez de nouveau travailler.</p><aside id="r-544319" data-claire-element-id="544319" data-claire-semantic="warning"><p id="r-544318" data-claire-element-id="544318">Il est très important d'avoir le réflexe de lancer des <em>updates</em> relativement souvent, pour toujours avoir une copie locale à jour. Nous verrons dans les sous-parties suivantes les conséquences sur le travail que pourrait avoir un oubli.</p></aside><p id="r-544320" data-claire-element-id="544320">Pour réaliser une <em>update</em>, en imaginant que vous êtes dans <em>/home/apognu/svn</em> et que la copie locale se trouve dans un sous-répertoire <em>localcopy</em>, lancez simplement la commande :</p><pre id="r-544321" data-claire-element-id="544321"><code data-claire-semantic="console">svn update localcopy</code></pre><p id="r-544322" data-claire-element-id="544322">Si vous vous trouvez déjà dans le répertoire <em>localcopy</em>, vous pouvez omettre de le préciser dans la ligne de commande.</p><aside id="r-544324" data-claire-element-id="544324" data-claire-semantic="information"><p id="r-544323" data-claire-element-id="544323">Il est à noter que <em>update</em> ne téléchargera pas toujours des fichiers, il peut arriver (et plutôt souvent) que votre copie locale soit déjà à jour, et par conséquent le différentiel est nul : rien n'est téléchargé. Souvent, l'<em>update</em> est une mesure de précaution au cas où l'état du dépôt aurait changé.</p></aside><h2 id="r-commit" data-claire-element-id="544332">Commit</h2><p id="r-544326" data-claire-element-id="544326">Pour partir simplement, le <strong>commit</strong> est l'action contraire de l'<em>update</em> et en même temps sa soeur. <em>Update</em> et <em>commit</em> seront les deux actions que vous utiliserez le plus souvent dans votre utilisation de Subversion. En gros, <em>commit</em> compare les modifications que vous avez faites sur votre copie locale avec l'état du dépôt, puis envoie le différentiel du <em>changeset</em> à celui-ci, créant par la même occasion une nouvelle révision.</p><p id="r-544327" data-claire-element-id="544327">Pour réaliser un <em>commit</em>, créons déjà un fichier <em>file.txt</em> dans notre copie locale en lui mettant un contenu. Ensuite, deux étapes sont à réaliser. Tout d'abord, il faut <strong>versionner</strong> le fichier, en gros dire à SVN qu'il s'agit d'un fichier à prendre en compte dans le contrôle des versions ; et ensuite, lancer le <em>commit</em> de la copie locale. Voilà comment procéder (toujours dans <em>/home/apognu/svn</em>) :</p><pre id="r-544328" data-claire-element-id="544328"><code data-claire-semantic="console">svn add localcopy/file.txt
svn commit localcopy</code></pre><p id="r-544329" data-claire-element-id="544329">Voilà ce qui apparaît en sortie :</p><pre id="r-544330" data-claire-element-id="544330"><code data-claire-semantic="console">A         localcopy/file.txt
 
Adding         localcopy/file.txt
Transmitting file data .
Committed revision 1.</code></pre><p id="r-544331" data-claire-element-id="544331">La première ligne indique que le fichier <em>localcopy/file.txt</em> a été prévu pour être ajouté au dépôt au prochain <em>commit</em> (signification de la lettre <em>A</em>), et les trois dernières symbolisent le <em>commit</em>. Comme prévu celui-ci ajoute le fichier, il transmet ensuite le différentiel puis nous informe que la révision 1 vient d'être créée.</p><h2 id="r-supprimer-copier-deplacer" data-claire-element-id="544339">Supprimer, copier, déplacer</h2><p id="r-544333" data-claire-element-id="544333">Seul petit hic : pour déplacer, supprimer ou copier des fichiers ou dossiers, il ne suffit pas d'utiliser les fonctions fournies avec son système d'exploitation et de faire son <em>commit</em>, il faut utiliser les trois sous-programmes <em>move</em>, <em>delete</em> et <em>copy</em>.</p><aside id="r-544335" data-claire-element-id="544335" data-claire-semantic="information"><p id="r-544334" data-claire-element-id="544334">Déplacer revient à copier un fichier puis à le supprimer de son emplacement d'origine.</p></aside><p id="r-544336" data-claire-element-id="544336">Voici les trois commandes :</p><pre id="r-544337" data-claire-element-id="544337"><code data-claire-semantic="console">svn move FICHIER DESTINATION
svn copy FICHIER DESTINATION
svn delete FICHIER</code></pre><p id="r-544338" data-claire-element-id="544338">Maintenant les fichiers sont dans une sorte de file d'attente où vont tous les fichiers &quot;modifiés&quot; en attendant le <em>commit</em>. Rappelez-vous qu'aucune modification n'est appliquée tant que le <em>commit</em> n'est pas lancé.</p><h2 id="r-exercices-32" data-claire-element-id="544343">Exercices</h2><p id="r-544340" data-claire-element-id="544340">À partir de là, vous connaissez les trois actions de base de SVN (<em>checkout,</em> update et <em>commit)</em>, pour vous entraîner vous pouvez simuler l'utilisation du dépôt par plusieurs personnes, en répétant les opérations checkout / modification / commit / <em>update</em>, etc.</p><p id="r-544341" data-claire-element-id="544341">Pour commencer cela, vous pouvez dès lors créer une seconde copie locale, qui cette fois au lieu d'être à la révision 0 sera à la révision 1. Ensuite modifiez le fichier sur la copie locale 1, <em>commitez</em>, puis <em>updatez </em>la copie locale 2.</p><p id="r-544342" data-claire-element-id="544342">Entraînez-vous comme cela un petit temps pour avoir bien en tête le processus. Avec un peu de (mal)chance, vous tomberez sur un bel os que je vous expliquerai dans la prochaine sous-partie.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion">Utilisation de Subversion</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/presentation-de-subversion">
Présentation de Subversion
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/actions-de-base-sur-subversion">
Actions de base sur Subversion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/conflits-merging-et-lock">
Conflits, merging et lock
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/controlez-vos-commits">
Contrôlez vos commits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/remonter-le-temps">
Remonter le temps
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/presentation-de-subversion">
<span class="arrow"></span>
<span class="next">Présentation de Subversion</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/conflits-merging-et-lock">
<span class="next">Conflits, merging et lock</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Conflitsmergingetlock"></a><h2>Conflits, merging et lock</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/actions-de-base-sur-subversion">
<span class="arrow"></span>
<span class="next">Actions de base sur Subversion</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/controlez-vos-commits">
<span class="next">Contrôlez vos commits</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-conflits" data-claire-element-id="544360">Conflits</h2><p id="r-544345" data-claire-element-id="544345">La première notion à assimiler dans cette sous-partie est celle de <strong>conflits</strong>. D'après un dictionnaire, un conflit est un choc, une lutte, une rivalité. Eh bien dans Subversion, c'est exactement la même chose : il y a une rivalité entre les utilisateurs à propos des fichiers versionnés. Comment cela ? <em>me direz-vous</em>. Comme ceci : <em>vous répondrai-je</em>.</p><p id="r-544346" data-claire-element-id="544346">Supposons deux utilisateurs (Joe et Bobby) devant travailler en même temps sur un fichier <em>README</em>, et que leurs modifications sur ce fichier soient prises en compte par SVN, on peut dès lors dresser le scénario suivant :</p><ul id="r-544355" data-claire-element-id="544355"><li id="r-544348" data-claire-element-id="544348"><p id="r-544347" data-claire-element-id="544347">Joe et Bobby font un <em>checkout</em> sur du dépôt et obtiennent à la révision 1 le fichier <em>README</em> ;</p></li><li id="r-544350" data-claire-element-id="544350"><p id="r-544349" data-claire-element-id="544349">ils commencent tous les deux à éditer le fichier ;</p></li><li id="r-544352" data-claire-element-id="544352"><p id="r-544351" data-claire-element-id="544351">Joe, content de lui, fait un <em>commit</em> avec ses modifications, le fichier est <em>uploadé</em> et la révision 2 est créée ;</p></li><li id="r-544354" data-claire-element-id="544354"><p id="r-544353" data-claire-element-id="544353">Bobby, une fois ses propres modifications terminées, va vouloir en faire un <em>commit</em>, sauf que là c'est le drame, un message d'erreur lui dit qu'il ne peut pas le faire !</p></li></ul><p id="r-544356" data-claire-element-id="544356">Comment cela se fait-il ? Rappelez-vous, je vous avais dit qu'il était important de toujours avoir une copie locale à jour, or celle de Bobby ne l'était plus au moment de son hypothétique <em>commit</em> : sa copie locale était encore à la révision 1 alors que le dépôt était à la révision 2. Par mesure de sécurité, Subversion bloquera le commit pour éviter qu'il ne détruise les modifications de Joe. Il y a conflit !</p><div id="r-544358" data-claire-element-id="544358" data-claire-semantic="question"><p id="r-544357" data-claire-element-id="544357">Mais alors, le travail du pauvre Bobby est réduit à néant ?</p></div><p id="r-544359" data-claire-element-id="544359"><em>Que nenni !</em> Subversion propose plusieurs moyens de résoudre et prévenir les conflits, que nous allons étudier dans cette sous-partie.</p><h2 id="r-merging" data-claire-element-id="544407">Merging</h2><p id="r-544361" data-claire-element-id="544361">Pour <strong>résoudre</strong> un conflit, Subversion propose une solution de <strong>merging</strong>, terme signifiant ici <strong>mélange</strong>. Basiquement, cela consiste en un mélange des deux fichiers pour en obtenir un nouveau. Il y a deux types de <em>merging</em> pour résoudre les conflits, les voici les voilà :</p><h3 id="r-merging-automatique" data-claire-element-id="544382">Merging &quot;automatique&quot;</h3><p id="r-544362" data-claire-element-id="544362">Subversion étant un être doué d'intelligence, il est capable de réaliser certaines opérations tout seul comme un grand.</p><p id="r-544363" data-claire-element-id="544363">Reprenons notre exemple de conflit entre Joe et Bobby : ce dernier se retrouve comme un con avec son <em>commit</em> défectueux, la première chose à faire est un <em>update</em>, afin de mettre sa copie locale à jour. Pas de panique, cela ne supprimera pas ses modifications : SVN sait qu'il y a conflit, et va donc agir !</p><p id="r-544364" data-claire-element-id="544364">Le cas du <em>merging</em> &quot;automatique&quot; est efficace lorsque les modifications effectuées par les deux utilisateurs ne se &quot;recoupent&quot; pas, par exemple s'ils ont modifié chacun deux parties distinctes du fichier. Dans ce cas, Subversion repère ce non-recoupement et peut mélanger intelligemment les deux fichier. Voici une mise en pratique avec un fichier contenant &quot;Bonjour !&quot; avant toute modification :</p><p id="r-544365" data-claire-element-id="544365"><cite>Citation : Joe (commit réussi)</cite></p><blockquote id="r-544368" data-claire-element-id="544368"><p id="r-544366" data-claire-element-id="544366">J'ajoute ce texte au dessus de bonjour...</p><p id="r-544367" data-claire-element-id="544367">Bonjour !</p></blockquote><p id="r-544369" data-claire-element-id="544369"><cite>Citation : Bobby (commit foireux)</cite></p><blockquote id="r-544372" data-claire-element-id="544372"><p id="r-544370" data-claire-element-id="544370">Bonjour !</p><p id="r-544371" data-claire-element-id="544371">Moi, je veux ajouter du texte en dessous !</p></blockquote><aside id="r-544374" data-claire-element-id="544374" data-claire-semantic="warning"><p id="r-544373" data-claire-element-id="544373">Je suis désolé des exemples totalement débiles et sans intérêt mais il faut que tout le monde comprenne !</p></aside><p id="r-544375" data-claire-element-id="544375">Comme vous le voyez ici, les modifications de l'un n'annulent pas celles de l'autre, et elles peuvent être distinctement séparées. Donc lorsque Bobby fera son <em>update</em>, SVN laissera le fichier README contenant :</p><p id="r-544376" data-claire-element-id="544376"><cite>Citation : Bobby (après l'update)</cite></p><blockquote id="r-544380" data-claire-element-id="544380"><p id="r-544377" data-claire-element-id="544377">Je rajoute ce texte au dessus de bonjour...</p><p id="r-544378" data-claire-element-id="544378">Bonjour !</p><p id="r-544379" data-claire-element-id="544379">Moi, je veux rajouter du texte en dessous !</p></blockquote><p id="r-544381" data-claire-element-id="544381">Il suffit alors de faire son <em>commit</em> du fichier créé par Subversion pour le réussir et créer la révision 3 !</p><h3 id="r-merging-manuel" data-claire-element-id="544406">Merging &quot;manuel&quot;</h3><p id="r-544383" data-claire-element-id="544383">Il arrive parfois (même plutôt souvent) que les modifications effectuées par deux utilisateurs se recoupent, et dans ce cas Subversion ne peut pas prendre le risque d'effectuer lui-même le <em>merging</em>. C'est donc à l'utilisateur responsable du conflit de le corriger lui-même ! Je vais reprendre l'exemple du book SVN qui est facile à comprendre.</p><p id="r-544384" data-claire-element-id="544384">Imaginez qu'un fichier versionné soit une liste de ce que deux collaborateurs veulent pour leurs sandwiches, voici ce fichier à la révision 1 :</p><p id="r-544385" data-claire-element-id="544385"><cite>Citation : Fichier à la révision 1</cite></p><blockquote id="r-544387" data-claire-element-id="544387"><p id="r-544386" data-claire-element-id="544386">4 tranches de jambon<br/> 3 tomates<br/> 9 cornichons</p></blockquote><p id="r-544388" data-claire-element-id="544388">Maintenant, imaginons que Joe aime la viande, et ajoute une tranche de jambon (il y en aura donc cinq), il <em>commit</em>, et juste après Bobby (toujours malchanceux avec ses <em>commits</em>), tente d'envoyer son <em>commit</em> pour les deux tranches de jambon supplémentaires :</p><pre id="r-544389" data-claire-element-id="544389"><code data-claire-semantic="console">Sending        sandwiches.txt
svn: Commit failed (details follow):
svn: Out of date: 'sandwiches.txt' in transaction '5-1'</code></pre><p id="r-544390" data-claire-element-id="544390">Il tente de faire son <em>update</em> comme la dernière fois, sauf que là ça ne fonctionne pas, et voilà avec quoi il se retrouve dans sa copie locale :</p><pre id="r-544391" data-claire-element-id="544391"><code data-claire-semantic="console">sandwiches.txt  sandwiches.txt.mine  sandwiches.txt.r4  sandwiches.txt.r5</code></pre><p id="r-544392" data-claire-element-id="544392">Décortiquons un peu cela ! <br/><em>sandwiches.txt.mine</em> contient le fichier qu'il a tenté de <em>commiter</em>, <em>sandwiches.txt.r4</em> contient le fichier à la révision précédente (avant tout changement donc) et <em>sandwiches.txt.r5</em> contient le fichier avec les modifications de Joe. Mais ce qui est intéressant est le fichier <em>sandwiches.txt</em>, si on l'édite voilà ce qu'il y a dedans :</p><pre id="r-544393" data-claire-element-id="544393"><code data-claire-semantic="console">&lt;&lt;&lt;&lt;&lt;&lt;&lt; .mine
6 tranches de jambon
=======
5 tranches de jambon
&gt;&gt;&gt;&gt;&gt;&gt;&gt; .r5
3 tomates
9 cornichons</code></pre><p id="r-544394" data-claire-element-id="544394">Et c'est là que vous prenez votre tube d'aspirine et que vous commencez à pleurer ! Sans raison, parce que ce n'est vraiment pas compliqué... Il y a deux choses à retenir, la signification des signes qu'on peut résumer à cela :</p><pre id="r-544395" data-claire-element-id="544395"><code data-claire-semantic="console">&lt;&lt;&lt;&lt;&lt;&lt;&lt; .mine
CE QUE J'AI MODIFIE
=======
CE QUE L'AUTRE A MODIFIE
&gt;&gt;&gt;&gt;&gt;&gt;&gt; .rX</code></pre><p id="r-544396" data-claire-element-id="544396">Tout ce qu'il y a en dehors des signes est ce qui n'a pas été modifié. Il suffit ici de faire réfléchir un peu ses méninges : on sait qu'il y avait 4 tranches de jambon avant (le fichier <em>sandwiches.txt.r4</em> en témoigne), Joe en demande une de plus, moi deux. Un peu de maths, ça fait qu'il en faut trois de plus. On retire donc les marques en laissant la ligne, mais en mettant sept tranches de jambon.</p><aside id="r-544398" data-claire-element-id="544398" data-claire-semantic="warning"><p id="r-544397" data-claire-element-id="544397">Dans des cas réels liés à la programmation, résoudre des conflits peut s'avérer plus ardu que cela, c'est pourquoi on verra comment éviter les conflits !</p></aside><p id="r-544399" data-claire-element-id="544399">Tout ce qu'il nous reste à faire est de déclarer le conflit comme résolu, puis à réaliser le <em>commit</em> :</p><pre id="r-544400" data-claire-element-id="544400"><code data-claire-semantic="console">svn resolved sandwiches.txt
svn commit -m &quot;Conflit résolu youhouh&quot;</code></pre><p id="r-544401" data-claire-element-id="544401">La sortie devrait être :</p><pre id="r-544402" data-claire-element-id="544402"><code data-claire-semantic="console">Resolved conflicted state of 'sandwiches.txt'
 
Sending        sandwiches.txt
Transmitting file data .
Committed revision 6.</code></pre><p id="r-544403" data-claire-element-id="544403">Le conflit a aussi été résolu, mais avec plus de peine.</p><aside id="r-544405" data-claire-element-id="544405" data-claire-semantic="warning"><p id="r-544404" data-claire-element-id="544404">Il va évidemment de soi que la résolution de conflit ne marche que pour des fichier ASCII. Il est strictement impossible de résoudre un conflit sur un fichier binaire (image, vidéo, etc.) ! D'où la nécessité d'une lecture assidue du prochain point.</p></aside><h2 id="r-lock-1" data-claire-element-id="544424">Lock</h2><p id="r-544408" data-claire-element-id="544408">Après avoir vu comment résoudre un conflit, j'espère vous avoir à vie dégouté de ces petites choses-là. Je vous ai déjà dit à plusieurs reprises dans ce tuto de faire des <em>updates</em> régulières pour essayer d'être à jour le plus souvent possible, mais cela ne suffira pas toujours. Il ne s'agit pas seulement de prier pour qu'un conflit ne se produise pas, il faut également les empêcher. L'expression <em>mieux vaut prévenir que guérir</em> prend ici tout son sens.</p><p id="r-544409" data-claire-element-id="544409">Bien sûr vous pourriez courir après vos collaborateurs pour leur dire que vous allez modifier ce fichier dans les prochaines heures, mais ce n'est ni pratique ni productif. Non, pour cela vous allez utiliser la fonction de <strong>lock</strong> de Subversion.</p><aside id="r-544411" data-claire-element-id="544411" data-claire-semantic="warning"><p id="r-544410" data-claire-element-id="544410">En production, votre responsable de projet vous menacera sûrement de pratiques <em>verre-pileuses</em> si jamais vous n'appliquez pas un effort constant et complet sur la mise en place de <em>locks</em>. Et il aura raison !</p></aside><p id="r-544412" data-claire-element-id="544412">Là le nom est explicite, il s'agira de <strong>verrouiller</strong> un fichier pendant que vous l'utiliserez, pour être certain que personne ne sera en mesure de le modifier à son tour. Mais ici encore, l'adoption d'une routine, d'une procédure d'utilisation de Subversion est requise ! En effet, demander un <em>lock</em> sur un fichier avant modification doit devenir une habitude ! Cela permet deux choses : d'abord d'obtenir le <em>lock</em>, et donc que personne ne gâche notre boulot ; mais également de s'assurer que personne n'a pris de <em>lock</em> sur ce fichier, et donc qu'on n'est pas sur le point de gâcher le boulot de quelqu'un.</p><p id="r-544413" data-claire-element-id="544413">Le <em>lock</em> doit donc devenir une institution, que dis-je ? on doit vénérer le <em>lock</em>. Le <em>lock</em> est le patron, le <em>lock</em> c'est la vie, répétez après moi !</p><p id="r-544414" data-claire-element-id="544414">Pour demander un <em>lock</em>, entrez la commande suivante :</p><pre id="r-544415" data-claire-element-id="544415"><code data-claire-semantic="console">svn lock sandwiches.txt</code></pre><p id="r-544416" data-claire-element-id="544416">Ce qui donne :</p><pre id="r-544417" data-claire-element-id="544417"><code data-claire-semantic="console">'sandwiches.txt' locked by user 'apognu'.</code></pre><p id="r-544418" data-claire-element-id="544418">À partir de ce moment, n'importe qui demandant un <em>lock</em> sur ce fichier se verra gratifié d'un majestueux :</p><pre id="r-544419" data-claire-element-id="544419"><code data-claire-semantic="console">svn: warning: Path '/sandwiches.txt' is already locked by user 'apognu' in filesystem '/home/apognu/svn/repository/db'</code></pre><p id="r-544420" data-claire-element-id="544420">Il est à noter que demander un <em>lock</em> sur un fichier situé dans une copie locale non à jour provoquera également un message d'erreur. Demander un <em>lock</em> permet aussi de s'assurer de travailler sur une base saine.</p><p id="r-544421" data-claire-element-id="544421">Surtout, ne pas oublier de <strong>déverrouiller</strong> le fichier une fois qu'on a fini de travailler dessus, grâce au sous-programme <strong>unlock</strong> :</p><pre id="r-544422" data-claire-element-id="544422"><code data-claire-semantic="console">svn unlock sandwiches.txt</code></pre><p id="r-544423" data-claire-element-id="544423">Une fois compris le fait que le <em>lock</em> est le Bien, et pris l'habitude d'en demander un chaque fois que l'on désire travailler sur un fichier, le risque de création de conflits est minime, voire inexistant. Et ça c'est réjouissant !</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion">Utilisation de Subversion</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/presentation-de-subversion">
Présentation de Subversion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/actions-de-base-sur-subversion">
Actions de base sur Subversion
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/conflits-merging-et-lock">
Conflits, merging et lock
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/controlez-vos-commits">
Contrôlez vos commits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/remonter-le-temps">
Remonter le temps
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/actions-de-base-sur-subversion">
<span class="arrow"></span>
<span class="next">Actions de base sur Subversion</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/controlez-vos-commits">
<span class="next">Contrôlez vos commits</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Contrlezvoscommits"></a><h2>Contrôlez vos commits</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/conflits-merging-et-lock">
<span class="arrow"></span>
<span class="next">Conflits, merging et lock</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/remonter-le-temps">
<span class="next">Remonter le temps</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-status" data-claire-element-id="544433">Status</h2><p id="r-544426" data-claire-element-id="544426">Le premier sous-programme permettant de contrôler ses commit est <strong>status</strong>, celui-ci permet de fouiller la copie locale pour donner des informations sur ses éléments constitutifs (fichiers et dossiers). Appelée sans argument, elle affiche le(s) fichier(s) prévus pour modification au prochain <em>commit</em>, c'est-à-dire les fichiers ou dossiers modifiés, déplacés, supprimés, etc.</p><p id="r-544427" data-claire-element-id="544427">Si je modifie le fichier <em>sandwiches.txt</em> et que je lance :</p><pre id="r-544428" data-claire-element-id="544428"><code data-claire-semantic="console">svn status</code></pre><p id="r-544429" data-claire-element-id="544429">Voilà ce qui s'affichera :</p><pre id="r-544430" data-claire-element-id="544430"><code data-claire-semantic="console">M      sandwiches.txt</code></pre><p id="r-544431" data-claire-element-id="544431">Le <em>M</em> signifie &quot;modifié&quot;, on sait donc qu'au prochain <em>commit</em> les modifications apportées au fichier <em>sandwiches.txt</em> seront prises en compte. La lettre changera en fonction du type d'actions réalisées sur le fichier ou dossier. Vous pouvez trouver plus d'informations à ce sujet grâce à la commande <em>svn help status</em>.</p><p id="r-544432" data-claire-element-id="544432">En gros, cette commande vous donne une vue d'ensemble de ce que vous avez fait pour vous aider à vous représenter le <em>commit</em> qui va suivre.</p><h2 id="r-diff-1" data-claire-element-id="544441">Diff</h2><p id="r-544434" data-claire-element-id="544434">Ça, c'est une sous-commande qu'elle est intéressante !</p><p id="r-544435" data-claire-element-id="544435">En gros, le principe reste le même que <em>status</em> : elle donne des informations sur les modifications effectuées sur la copie locale, mais cette fois-ci à une échelle plus petite. Elle va vous donner, pour chaque fichier modifié, un détail des ajouts, retraits et modifications apportés, à la ligne près.</p><p id="r-544436" data-claire-element-id="544436">Si j'ajoute une ligne au fichier <em>sandwiches.txt</em>, et que je lance <em>svn diff</em>, j'aurai cette sortie :</p><pre id="r-544437" data-claire-element-id="544437"><code data-claire-semantic="console">Index: sandwiches.txt
===================================================================
--- sandwiches.txt      (revision 6)
+++ sandwiches.txt      (working copy)
@@ -1,3 +1,4 @@
 7 tranches de jambon
 3 tomates
 9 cornichons
+1 pot de mayonnaise</code></pre><p id="r-544438" data-claire-element-id="544438">Dans ce capharnaüm, je vois qu'entre le fichier de la révision 6 et ma copie locale, il y a eu une ligne ajoutée (le signe <em>+</em> en début de ligne) disant <em>1 pot de mayonnaise</em>. Il va sans dire qu'un signe <em>-</em> indique un retrait de ligne. Je signale au passage que, puisque l'unité est la ligne, la correction d'un caractère provoquera la suppression de l'ancienne ligne et l'ajout de la ligne corrigée ! ;)</p><p id="r-544439" data-claire-element-id="544439">Sans paramètre, la commande renvoie tous les fichiers modifiés, on peut bien entendu préciser un fichier en particulier :</p><pre id="r-544440" data-claire-element-id="544440"><code data-claire-semantic="console">svn diff sandwiches.txt</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion">Utilisation de Subversion</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/presentation-de-subversion">
Présentation de Subversion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/actions-de-base-sur-subversion">
Actions de base sur Subversion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/conflits-merging-et-lock">
Conflits, merging et lock
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/controlez-vos-commits">
Contrôlez vos commits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/remonter-le-temps">
Remonter le temps
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/conflits-merging-et-lock">
<span class="arrow"></span>
<span class="next">Conflits, merging et lock</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/remonter-le-temps">
<span class="next">Remonter le temps</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Remonterletemps"></a><h2>Remonter le temps</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/controlez-vos-commits">
<span class="arrow"></span>
<span class="next">Contrôlez vos commits</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-grand-pere-comment-c-etait-de-ton-temps" data-claire-element-id="544452">Grand-père, comment c'était de ton temps ?</h2><p id="r-544443" data-claire-element-id="544443">Comme je vous l'ai déjà dit plus haut, le serveur Subversion conserve une trace de toutes les modifications faites aux fichiers soumis au contrôle des versions. Cela a notamment pour avantage de permettre de visualiser le dépôt tel qu'il était à une révision donnée.</p><p id="r-544444" data-claire-element-id="544444">Pour faire cela, on utilise une option de la commande <em>update</em> qui permet de spécifier à quel moment dans le temps on veut aller. Par défaut, cette option est définie à <em>HEAD</em> (la dernière révision), et finalement cette option est <em>-r</em>. Ainsi :</p><pre id="r-544445" data-claire-element-id="544445"><code data-claire-semantic="console">svn update -r 3
U    foobar
Checked out revision 3.</code></pre><p id="r-544446" data-claire-element-id="544446">Les fichier marqués <em>U</em> sont les fichiers qui ont été modifiés par l'<em>update</em>. Ensuite, vous pouvez parcourir, utiliser et modifier les fichiers de votre dépôt comme d'habitude.</p><aside id="r-544448" data-claire-element-id="544448" data-claire-semantic="information"><p id="r-544447" data-claire-element-id="544447">À la fin de cette commande, vous pouvez très bien spécifier le nom d'un ou plusieurs fichiers, de sorte de ne mettre à jour que ceux-ci, et de laisser les autres à jour.</p></aside><p id="r-544449" data-claire-element-id="544449">Rappelez-vous simplement que les fichiers que vous modifierez ne seront pas à jour, vous ne pourrez donc pas les envoyer sur le serveur sans action de résolution de conflit.</p><aside id="r-544451" data-claire-element-id="544451" data-claire-semantic="information"><p id="r-544450" data-claire-element-id="544450">De plus, la commande <em>svn revert</em> permet d'annuler les modifications portées à sa copie locale, elle prend en paramètre le nom du fichier à &quot;réinitialiser&quot;. Vous pouvez cependant utiliser le sélecteur universel * pour annuler tout changement à votre copie locale depuis la dernière <em>update</em>.</p></aside><h2 id="r-ressusciter-des-fichiers" data-claire-element-id="544461">Ressusciter des fichiers</h2><p id="r-544453" data-claire-element-id="544453">Il arrive souvent qu'on supprime un fichier du dépôt, puis qu'on veuille s'en resservir par la suite. Il existe plusieurs méthodes pour cela, je vais exposer la plus pratique à mon goût. Tout d'abord, il faut identifier le moment de la suppression, pour cela on utilisera la commande <em>svn log</em>. L'option <em>-v</em> permet d'afficher plus d'informations.</p><pre id="r-544454" data-claire-element-id="544454"><code data-claire-semantic="console">svn log -v
(...)
------------------------------------------------------------------------
r7 | apognu | 2007-10-26 18:49:01 +0200 (Fri, 26 Oct 2007) | 1 line
 
Suppression du fichier foobar.
------------------------------------------------------------------------
(...)</code></pre><p id="r-544455" data-claire-element-id="544455">Ici, on apprend que le fichier a été supprimé le 26 octobre 2007 par apognu à 18h49 (ce qui nous fait une belle jambe), mais surtout que le fichier a été supprimé à la révision 7, ce qui signifie qu'il existait à la révision 6 ! Maintenant, on peut le copier depuis la révision 6 :</p><pre id="r-544456" data-claire-element-id="544456"><code data-claire-semantic="console">svn copy -r 6 file:///home/apognu/svn/repository/foobar ./foobar
A         foobar</code></pre><p id="r-544457" data-claire-element-id="544457">Le fichier vient d'être récupéré, puis &quot;prévu pour <em>commit</em>&quot; dans la copie locale, il ne reste plus qu'à <em>commiter</em> pour finir le travail !</p><p id="r-544458" data-claire-element-id="544458">Bon, eh bien nous voici au terme de ce tutoriel, je pense avoir atteint mon but, à savoir vous apprendre le fonctionnement du logiciel Subversion. Mais ne vous méprenez pas, connaître ce fonctionnement ne suffit pas à pouvoir gérer un projet de grosse envergure : même avec SVN une grande organisation est nécessaire, et dans ce cas la lecture du <a href="http://svnbook.red-bean.com/">book SVN</a> dont je parlais au début de mon cours est pratiquement indispensable.</p><p id="r-544459" data-claire-element-id="544459">Je pense notamment à l'organisation des versions en <em>trunk</em>, <em>branches</em> et <em>tags</em> (et tout ce qui en découle), ou tout simplement à l'administration du dépôt.</p><p id="r-544460" data-claire-element-id="544460">Foncez, et ne vous demandez plus pourquoi des projets tels que Wordpress, KDE, GCC ou encore Apache utilisent maintenant Subversion (avec parfois l'utilisation conjointe de l'application <a href="http://trac.edgewall.org/">Trac</a>, permettant de gérer la collaboration et l'organisation au sein du projet), la réponse est toute trouvée !</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion">Utilisation de Subversion</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/presentation-de-subversion">
Présentation de Subversion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/actions-de-base-sur-subversion">
Actions de base sur Subversion
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/conflits-merging-et-lock">
Conflits, merging et lock
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/controlez-vos-commits">
Contrôlez vos commits
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/remonter-le-temps">
Remonter le temps
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/utilisation-de-subversion/controlez-vos-commits">
<span class="arrow"></span>
<span class="next">Contrôlez vos commits</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/utilisation-de-subversion.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 01:21:16 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/utilisation-de-subversion.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:21:38 GMT -->
</html>