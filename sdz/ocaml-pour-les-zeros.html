<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/ocaml-pour-les-zeros.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:50:03 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/ocaml-pour-les-zeros.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:02:00 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : OCaml pour les Zéros</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/ocaml-pour-les-zeros.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : OCaml pour les Zéros</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#OCamlpourlesZros">OCaml pour les Zéros</a><br/><a href="#Pourquois039intresserOCaml">Pourquoi s&#039;intéresser à OCaml ?</a><br/><a href="#Qu039est-cequ039ObjectiveCaml">Qu&#039;est-ce qu&#039;Objective Caml ?</a><br/><a href="#Pourquoietcommentlirecetutoriel">Pourquoi et comment lire ce tutoriel</a><br/><a href="#PremierspasavecOCaml">Premiers pas avec OCaml</a><br/><a href="#InstalleretutiliserOCaml">Installer et utiliser OCaml</a><br/><a href="#Desdonnesessentielles">Des données essentielles</a><br/><a href="#Desvariables">Des variables</a><br/><a href="#Etdesfonctions">Et des fonctions !</a><br/><a href="#Lesconditions">Les conditions</a><br/><a href="#Syntaxeetutilisation">Syntaxe et utilisation</a><br/><a href="#DesexpressionsOCamlcommelesautres">Des expressions OCaml comme les autres</a><br/><a href="#Letypeboolen">Le type booléen</a><br/><a href="#Lesfonctionsrcursives">Les fonctions récursives</a><br/><a href="#Leprincipe">Le principe</a><br/><a href="#Lesvraiesfonctionsrcursivess039habillentchezletrec">Les vraies fonctions récursives s&#039;habillent chez let rec</a><br/><a href="#Rflchirunprogramme">Réfléchir à un programme</a><br/><a href="#Unexempleplusconcret">Un exemple plus concret</a><br/><a href="#Leslistes">Les listes</a><br/><a href="#Rangersesdonnes">Ranger ses données</a><br/><a href="#UtiliserleslistesenOCaml">Utiliser les listes en OCaml</a><br/><a href="#Lefiltragedemotif">Le filtrage de motif</a><br/><a href="#Quelquesexemplesdefonctionsutilisantleslistes">Quelques exemples de fonctions utilisant les listes</a><br/><a href="#Manipulationdefonctions">Manipulation de fonctions</a><br/><a href="#Ralisation">Réalisation</a><br/><a href="#Desexemplesmoinsmathmatiques">Des exemples moins mathématiques</a><br/><a href="#Quelquesrglesfonctionnelles">Quelques règles fonctionnelles</a><br/><a href="#Desfonctionsgogo">Des fonctions à gogo</a><br/><a href="#Utiliserlesoprateurscommedesfonctions">Utiliser les opérateurs comme des fonctions</a><br/><a href="#Dfinirsesoprateurs">Définir ses opérateurs</a><br/><a href="#Lesfonctionsanonymes">Les fonctions anonymes</a><br/><a href="#Pourplusdetypes">Pour plus de types</a><br/><a href="#Lestuples">Les tuples</a><br/><a href="#Lepolymorphisme">Le polymorphisme</a><br/><a href="#Quelquesremarquessurl039utilitdusystmedetypageenOCaml">Quelques remarques sur l&#039;utilité du système de typage en OCaml</a><br/><a href="#Lestypessomme">Les types somme</a><br/><a href="#TPLetypeoption">TP : Le type option</a><br/><a href="#Pourquoiletypeoption">Pourquoi le type option</a><br/><a href="#Dfinitionetutilisation">Définition et utilisation</a><br/><a href="#Desoprationssupplmentaires">Des opérations supplémentaires</a><br/><a href="#Unexempleunmini-interprteur">Un exemple : un mini-interpréteur</a><br/><a href="#Lemotdelafin">Le mot de la fin</a><br/></div>
<a name="OCamlpourlesZros"></a><h2>OCaml pour les Zéros</h2><div class="content" role="article">
<aside id="r-628106" data-claire-element-id="628106" data-claire-semantic="warning"><p id="r-628105" data-claire-element-id="628105">Ce tutoriel a été rédigé à l'origine par iPoulet (unpoulet [at] gmail [dot] com) et placé sous licence <a href="http://www.siteduzero.com/tutoriel-3-50275-choisir-une-licence-pour-son-tutoriel.html">CC-BY-SA</a>. L'auteur n'a malheureusement plus le temps de s'en occuper mais souhaite quand même laisser son cours en ligne pour qu'il puisse profiter au plus grand nombre. Si vous souhaitez reprendre sa rédaction ou tout simplement en améliorer le contenu, l'équipe du SdZ vous invite à prendre contact avec un des <a href="http://www.siteduzero.com/membres-304.html#g6">validateurs</a>.</p></aside><p id="r-628107" data-claire-element-id="628107">Vous ne connaissez pas encore OCaml ? C'est un langage élégant, simple et permettant l'utilisation du paradigme de programmation fonctionnelle, dont vous avez peut-être entendu parler et sur lequel nous reviendrons. Issu directement du milieu de la recherche, il se voit doté de concepts poussés et très modernes, comme nous le verrons.<br/> Concis, il est également adapté à l'apprentissage de l'<a href="http://www.siteduzero.com/tutoriel-3-51781-algorithmique-pour-l-apprenti-programmeur.html">algorithmique</a>, grâce notamment à sa gestion automatique de la mémoire efficace qui simplifie la tâche du programmeur. En outre, il laisse au programmeur la possibilité d'utiliser les paradigmes impératif et orienté-objet.</p><p id="r-628108" data-claire-element-id="628108">Enfin, il s'agit d'un langage inteprété, ce qui permet d'utiliser par exemple l'interpréteur interactif ; mais c'est aussi un langage compilé, ce qui lui assure des performances relativement bonnes, et une certaine sécurité puisque le typage, par exemple, est vérifié à la compilation, ce qui évite de nombreuses erreurs à l'exécution. Nous reviendrons également sur toutes ces notions.</p><p id="r-628109" data-claire-element-id="628109">Que demander de plus ? En avant !</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Pourquois039intresserOCaml"></a><h2>Pourquoi s&#039;intéresser à OCaml ?</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
<span class="next">Qu&#039;est-ce qu&#039;Objective Caml ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-628111" data-claire-element-id="628111">Ce chapitre présente le langage Ocaml, explique quels sont ses avantages puis présente comment lire de manière efficace ce tutoriel.</p>
</div><a name="Qu039est-cequ039ObjectiveCaml"></a><h2>Qu&#039;est-ce qu&#039;Objective Caml ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">
<span class="arrow"></span>
<span class="next">Pourquoi s&#039;intéresser à OCaml ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
<span class="next">Pourquoi et comment lire ce tutoriel</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-qu-est-ce-qu-objective-caml" data-claire-element-id="628116">Qu'est-ce qu'Objective Caml ?</h4><p id="r-628112" data-claire-element-id="628112">Objective Caml, souvent abrégé en OCaml, est un langage développé par l'INRIA français, essentiellement pour la recherche. Il est en fait une amélioration du langage Caml, très utilisé dans les Classes Préparatoires françaises, lui aussi créé par le même INRIA comme descendant du langage ML.</p><p id="r-628113" data-claire-element-id="628113">En tant que tel, OCaml est ce qu'on appelle un langage fonctionnel. Si vous ne savez pas ce que c'est, ça ne fait rien, vous n'avez absolument pas besoin de le savoir pour l'instant... Nous verrons plus loin dans le tutoriel que c'est une caractéristique qui le différencie nettement de langages plus répandus comme C++ ou Java, qui sont des langages impératifs. Toute la partie I tentera de vous initier à la syntaxe et à quelques concepts de programmation fonctionnelle avec OCaml.</p><p id="r-628114" data-claire-element-id="628114">Cependant, OCaml tolère <em>aussi</em> la programmation impérative, dans la mesure où il implémente toute une série d'outils impératifs comme les références, les tableaux ou même les boucles avec compteur - ce qui fait donc de OCaml un langage polyvalent. En fait, le langage n'est pas uniquement le joujou de quelques chercheurs ; il est en réalité également employé dans l'industrie, par exemple <a href="http://research.microsoft.com/slam/">par Microsoft</a>, qui l'utilise pour tester la validité de pilotes logiciels dans Windows.</p><p id="r-628115" data-claire-element-id="628115">Enfin, le langage OCaml s'appelle ainsi... parce qu'il permet la programmation orientée objet. Nous ne reviendrons pas sur ce point avant longtemps, car il n'est absolument pas nécessaire de connaître la programmation orientée objet pour bien utiliser OCaml. Cependant, ça reste une éventualité.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">
<span class="arrow"></span>
<span class="next">Pourquoi s&#039;intéresser à OCaml ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
<span class="next">Pourquoi et comment lire ce tutoriel</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Pourquoietcommentlirecetutoriel"></a><h2>Pourquoi et comment lire ce tutoriel</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;Objective Caml ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">
<span class="next">Premiers pas avec OCaml</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pourquoi-et-comment-lire-ce-tutoriel" data-claire-element-id="628122">Pourquoi et comment lire ce tutoriel</h4><p id="r-628117" data-claire-element-id="628117">Tout d'abord, il faut savoir que ce tutoriel est tout à fait ouvert aux critiques ; n'hésitez en aucun cas à faire part des passages que vous ne comprenez pas (ce n'est pas forcément votre faute !) ou à poser des questions sur des aspects qui ne sont pas traités par le tutoriel, et que vous aimeriez voir y figurer.</p><p id="r-628118" data-claire-element-id="628118">Ce tutoriel vise à vous présenter le langage Ocaml. Apprendre un langage n'est pas une fin en soi, et il vous faudra lui trouver après une certaine utilité. Par exemple, vous pourriez apprendre OCaml parce que c'est un langage clair et élégant qui est adapté à l'apprentissage de <a href="http://www.siteduzero.com/tutoriel-3-51781-algorithmique-pour-l-apprenti-programmeur.html">l'algorithmique</a>. Vous pourriez naturellement préférer d'utiliser un langage que vous connaissez déjà pour cela, mais songez bien que tous les langages ne sont pas également adaptés à l'étude de l'algorithmique (de nombreux langages de scripts ne le sont pas). OCaml peut également être une bonne initiation à la programmation fonctionnelle, pour vous permettre par la suite de vous tourner avec moins de difficultés vers des langages tels que Haskell.</p><p id="r-628119" data-claire-element-id="628119">Mieux, et moins théorique : si les premiers chapitres restent très scolaires, ce tutoriel a pour but, à terme, de vous permettre de développer de vrais logiciels. Il existe en effet plusieurs bibliothèques en OCaml servant à la création de jeux ou d'interfaces, alors pourquoi ne pas s'en servir pour concrétiser votre apprentissage du langage ?</p><p id="r-628120" data-claire-element-id="628120">En bref, OCaml est un langage concis et puissant qui peut être utilisé pour des tâches très théoriques, ou au contraire pour la réalisation de programmes concrets et orientés grand public.</p><p id="r-628121" data-claire-element-id="628121">Ça vous intéresse ? Suivez le guide !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
<span class="arrow"></span>
<span class="next">Qu&#039;est-ce qu&#039;Objective Caml ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">
<span class="next">Premiers pas avec OCaml</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="PremierspasavecOCaml"></a><h2>Premiers pas avec OCaml</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
<span class="arrow"></span>
<span class="next">Pourquoi et comment lire ce tutoriel</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
<span class="next">Installer et utiliser OCaml</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-628124" data-claire-element-id="628124">Comment débuter sans douleur avec OCaml ? C'est ce que nous allons voir tout de suite. Au menu : installation, syntaxe de quelques commandes, et interprétation des résultats !</p>
</div><a name="InstalleretutiliserOCaml"></a><h2>Installer et utiliser OCaml</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">
<span class="arrow"></span>
<span class="next">Premiers pas avec OCaml</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
<span class="next">Des données essentielles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-installer-et-utiliser-ocaml" data-claire-element-id="628132">Installer et utiliser OCaml</h4><p id="r-628125" data-claire-element-id="628125">Avant de commencer à utiliser le langage, vous devez récupérer OCaml. Pour cela, faites-le sur le site de l'INRIA, sur <a href="http://caml.inria.fr/download.en.html">la page consacrée à OCaml</a>. Prenez la version correspondant à votre système.</p><p id="r-628126" data-claire-element-id="628126">OCaml s'utilise pour faire des programmes compilés, c'est à dire exécutables par l'ordinateur, mais nous allons d'abord l'utiliser en &quot;ligne de commande&quot;, c'est à dire en entrant des commandes une par une. C'est un petit peu pénible, car ça nous oblige à faire attention à ce qu'on écrit, mais en échange on a des informations directes sur ce qu'on fait. Pour débuter, c'est donc ce qu'il nous faut !</p><p id="r-628127" data-claire-element-id="628127">Lancez OCaml en ligne de commande. Sous Windows, allez dans Démarrer&gt;Programmes&gt;Accessoires&gt;Ligne de commande, et dans la fenêtre tapez <code>ocaml</code>. Si tout va bien, vous aurez quelque chose comme :</p><pre id="r-628128" data-claire-element-id="628128"><code data-claire-semantic="console">Objective Caml version 3.09.2</code></pre><p id="r-628129" data-claire-element-id="628129">On peut directement utiliser OCaml comme une calculatrice, en rentrant des expressions mathématiques : la multiplication sera notée *, et la division /. Par exemple, tapez 15 * 3 et faites entrée. Surprise ! Rien ne s'affiche. En effet, OCaml est un langage de programmation, et pas une simple calculatrice ! Il a une syntaxe à respecter. Quand on rentre une expression en OCaml, il faut toujours la finir par ;; comme dans</p><pre id="r-628130" data-claire-element-id="628130"><code data-claire-semantic="console"># 15 * 3
  ;;
- : int = 45</code></pre><p id="r-628131" data-claire-element-id="628131">OCaml nous donne le résultat de notre opération, qui est 45. Mais devant, il place d'autres informations sur ce résultat. OCaml est un langage qu'on appelle fortement typé, qui garde à tout instant un œil sur la nature des calculs qu'on lui demande. C'est comme si je vous disais d'additionner deux nombres pairs, vous seriez sûr de tomber sur un nombre pair. OCaml, même s'il ne distingue pas les nombres pairs des nombres impairs, sait que quand il additionne deux nombres entiers il doit tomber sur un nombre entier. Pas vous ?</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">
<span class="arrow"></span>
<span class="next">Premiers pas avec OCaml</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
<span class="next">Des données essentielles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Desdonnesessentielles"></a><h2>Des données essentielles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
<span class="arrow"></span>
<span class="next">Installer et utiliser OCaml</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
<span class="next">Des variables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-donnees-essentielles" data-claire-element-id="628138">Des données essentielles</h4><p id="r-628133" data-claire-element-id="628133">Pendant que vous apprendrez OCaml, il vous faudra donc comprendre de quoi vous parle OCaml quand il vous donne ce genre de réponse. Ici, <code data-claire-semantic="ocaml">int </code> veut dire &quot;nombre entier&quot;. Le <code data-claire-semantic="ocaml">: </code> placé avant indique que c'est le type du résultat, comme le <code data-claire-semantic="ocaml">= </code> avant le 45 indique sa valeur. Il faut que vous fassiez la différence entre type et valeur. Le premier parle de la nature de la seconde. Un peu comme quand vous prenez un poireau, il est différent des autres poireaux, mais est du même type.</p><p id="r-628134" data-claire-element-id="628134">Vous pouvez entrer des calculs plus compliqués, OCaml trouvera quand même le type du résultat, et sa valeur. Entrez par exemple 12 + 1 ou 140 * (12 - 3) / 44 . Pour ce dernier, si vous faites le calcul à la main, vous vous apercevrez que le vrai résultat n'est pas un nombre entier. Pourtant, comme OCaml voit un calcul sur des nombres entiers, il donne le type int au résultat, et tronque donc le calcul. Si vous voulez un résultat exact, il faut utiliser des nombres décimaux. On les note avec un point à la place de la virgule, par exemple 12,3 devient 12.3.</p><p id="r-628135" data-claire-element-id="628135">Mais quand on essaye de calculer 12.4 + 3.14, OCaml nous répond en anglais que ça ne veut rien dire. En fait, c'est toujours parce que OCaml va d'abord chercher à deviner le type du résultat, qui devrait ici être un nombre décimal (souvenez-vous que même les nombres entiers sont des nombres décimaux). Comme + sert à additionner des nombres entiers, OCaml est perdu et ne peut pas décider du type du résultat. En fait, OCaml utilise une notation bizarre en rajoutant un . après le symbole mathématique. Par exemple, 12.4 +. 3.14 est une expression correcte, 140.0 *. (12.0 -. 3.0) /. 44.0 aussi :</p><pre id="r-628136" data-claire-element-id="628136"><code data-claire-semantic="console"># 12.4 +. 3.14 ;;
- : float = 15.5400000000000009
# 140.0 *. (12.0 -. 3.0) /. 44.0 ;;
- : float = 28.6363636363636367</code></pre><p id="r-628137" data-claire-element-id="628137">On peut voir ici deux choses : d'abord que OCaml appelle float les nombres décimaux. Ensuite, que ses résultats ne sont pas exacts, car le premier finit par un 9 qui est du à un défaut lié au stockage en mémoire du résultat, et que le second résultat est arrondi. En fait, OCaml est un peu nul en maths ! Comme c'est avant tout un ordinateur, il est obligé de travailler avec des nombres finis. Voilà pourquoi il ne pourra jamais vous aider en maths ! Mais c'est le cas pour presque tous les langages de programmation, après tout...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
<span class="arrow"></span>
<span class="next">Installer et utiliser OCaml</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
<span class="next">Des variables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Desvariables"></a><h2>Des variables</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
<span class="arrow"></span>
<span class="next">Des données essentielles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
<span class="next">Et des fonctions !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-variables-1" data-claire-element-id="628150">Des variables</h4><p id="r-628139" data-claire-element-id="628139">Et pourtant, utiliser OCaml vous rappellera vos cours de maths. Nous allons maintenant apprendre à stocker des résultats, dans ce qu'on appelle des variables. Les variables pour OCaml et les variables mathématiques ne sont pas exactement les mêmes, car OCaml ne s'utilise pas pour résoudre des équations. On les appelle juste &quot;variables&quot; parce qu'elles permettent, dans vos programmes, de désigner avec un même nom des données qui varient d'une utilisation à une autre. Un peu comme le x d'une fonction quand vous dites &quot;f la fonction qui à x associe...&quot;. En OCaml, on utilise une notation qui ressemble à &quot;Soit x égal à&quot; :</p><pre id="r-628140" data-claire-element-id="628140"><code data-claire-semantic="console"># let x = 4;;
val x : int = 4</code></pre><p id="r-628141" data-claire-element-id="628141">On retrouve ici ce dont je vous parlais plus haut sur le typage. Cette fois-ci, OCaml écrit aussi &quot;val x&quot; parce qu'il s'agit d'une variable. On peut lire qu'elle est de type int, et de valeur 4. On peut maintenant utiliser le nom x dans la suite de notre code, puisqu'il a été déclaré de manière globale. Par exemple, <code data-claire-semantic="ocaml">2 * x;; </code> vous renverra 8. Mais x n'est pas changé, et ce résultat n'est pas stocké en mémoire, c'est juste une nouvelle expression mathématique.</p><p id="r-628142" data-claire-element-id="628142">En utilisant ce genre de variables, on simplifie le code, et on peut éviter les répétitions. Par exemple, si vous devez calculer l'aire d'un cercle et que vous avez le diamètre, vous pouvez écrire</p><pre id="r-628143" data-claire-element-id="628143"><code data-claire-semantic="ocaml"># let pi = 3.14;;            
val pi : float = 3.14
# let rayon = 3.22;;
val rayon : float = 3.22</code></pre><p id="r-628144" data-claire-element-id="628144">Comme vous pouvez le voir, OCaml donne le type float à ces variables, car ce sont des nombres décimaux (on travaille avec une valeur approchée de pi). Essayez de deviner ce que vous devez rentrer pour faire une variable <code data-claire-semantic="ocaml">aire </code> qui contient le bon résultat !</p><p id="r-628145" data-claire-element-id="628145"></p><div id="r-628149" data-claire-element-id="628149"><p id="r-628146" data-claire-element-id="628146">Le code est</p><pre id="r-628147" data-claire-element-id="628147"><code data-claire-semantic="ocaml"># let aire = pi *. rayon *. rayon;;
val aire : float = 32.5567760000000064</code></pre><p id="r-628148" data-claire-element-id="628148">N'oubliez pas les *. car on fait un calcul avec des floats.</p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
<span class="arrow"></span>
<span class="next">Des données essentielles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
<span class="next">Et des fonctions !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Etdesfonctions"></a><h2>Et des fonctions !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
<span class="arrow"></span>
<span class="next">Des variables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">
<span class="next">Les conditions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-et-des-fonctions" data-claire-element-id="628171">Et des fonctions !</h4><p id="r-628151" data-claire-element-id="628151">Si vous avez été en classe de troisième, vous avez vu les fonctions. Hé bien en OCaml elles existent aussi, et elles s'écrivent d'ailleurs de la même façon. Par exemple une fonction affine f peut se noter</p><pre id="r-628152" data-claire-element-id="628152"><code data-claire-semantic="ocaml"># let f(x) = 2*x + 1;;    
val f : int -&gt; int = &lt;fun&gt;
# f(3);;
- : int = 7</code></pre><p id="r-628153" data-claire-element-id="628153">Mais en fait les parenthèses ne sont pas obligatoires, et on peut écrire f x :</p><pre id="r-628154" data-claire-element-id="628154"><code data-claire-semantic="ocaml"># let f x = 2*x + 1;;
val f : int -&gt; int = &lt;fun&gt;
# f 3;;
- : int = 7</code></pre><p id="r-628155" data-claire-element-id="628155">À vous de choisir la version que vous préférez. La deuxième est beaucoup plus utilisée. On voit que OCaml laisse facilement définir des fonctions mathématiques, et permet de les réutiliser après (en tout cas c'est plus facile que sur calculatrice. Dommage qu'on ne puisse pas télécharger OCaml pour calculatrice !). Nous verrons peut-être plus tard comment tracer ces fonctions sur des graphiques, mais pour le moment ça ne nous intéresse pas.</p><p id="r-628156" data-claire-element-id="628156">Comme pour les nombres, OCaml donne un type aux fonctions. Ici, vous pouvez voir qu'il s'agit de int -&gt; int. Ça ressemble aux notations mathématiques, et ça veut dire que notre fonction part des nombres entiers et va dans les nombres entiers. Ça veut dire qu'on peut utiliser notre fonction dans d'autres calculs, comme</p><pre id="r-628157" data-claire-element-id="628157"><code data-claire-semantic="ocaml"># f 3 * 2;;
- : int = 14
# f (3 * 2);;
- : int = 13</code></pre><p id="r-628158" data-claire-element-id="628158">J'espère que vous comprenez bien la différence entre les deux lignes, dans la première on calcule <code data-claire-semantic="ocaml">f(3) </code> puis on multiplie par deux, et dans la seconde on calcule <code data-claire-semantic="ocaml">f(3*2) </code> c'est à dire <code data-claire-semantic="ocaml">f(6) </code>. Il faut toujours faire attention aux parenthèses quand vous en utilisez, car elles changent complètement l'interprétation d'une phrase. En fait on pourrait même écrire <code data-claire-semantic="ocaml">f (f 3);; </code> ce qui donnerait 15, mais sans les parenthèses ça serait faux, parce que OCaml croirait que vous voulez calculer <code data-claire-semantic="ocaml">f(f) </code>. Et comme f est une fonction qui calcule à partir de nombres entiers, on ne peut pas l'utiliser avec d'autres fonctions.</p><p id="r-628159" data-claire-element-id="628159">On peut écrire une fonction <code data-claire-semantic="ocaml">aire(r) </code> qui calcule l'aire d'un cercle en fonction de son rayon. D'après ce que nous avons écrit avant, si pi et le rayon sont définis, il suffit d'écrire <code data-claire-semantic="ocaml">aire = pi *. rayon *. rayon;; </code> pour faire le calcul. Pour en faire une fonction, il faut que la fonction attende qu'on lui donne le rayon, donc il ne faut plus qu'il soit défini avant. On écrirait donc</p><pre id="r-628160" data-claire-element-id="628160"><code data-claire-semantic="ocaml"># let aire rayon = pi *. rayon *. rayon;;
val aire : float -&gt; float = &lt;fun&gt;</code></pre><p id="r-628161" data-claire-element-id="628161">Si vous ne comprenez pas comment ça marche, rajoutez les parenthèses autour de rayon à gauche du signe =, et vous reconnaîtrez la notation mathématique ! Notez que la variable rayon que nous avons définie tout à l'heure existe toujours, elle n'a pas été effacée. En fait, quand vous écrivez <code data-claire-semantic="ocaml">let f x = </code> le mot x a un sens local, c'est à dire qu'il représente le paramètre de la fonction f uniquement à droite du signe = . Il est également possible de définir des variables locales en dehors d'une fonction. On utilise pour ça l'expression let ... in ... qui va lier les noms et les valeurs comme un let normal (c'est à dire créer les variables), mais ces liaisons n'auront d'effet que dans l'expression qui suit le in.</p><p id="r-628162" data-claire-element-id="628162">Si on reprend l'exemple du calcul de l'aire, l'expression qui correspond au calcul est pi *. rayon *. rayon. Attention, ça n'est pas <code data-claire-semantic="ocaml">let aire = pi *. rayon *. rayon </code> ! C'est pour ça qu'il faut séparer le <code data-claire-semantic="ocaml">let aire = </code> du reste, comme dans ce qui suit</p><pre id="r-628163" data-claire-element-id="628163"><code data-claire-semantic="ocaml"># let aire =                   
    let pi = 3.14 in
      let rayon = 3.22 in
  pi *. rayon *. rayon;;
val aire : float = 32.5567760000000064</code></pre><p id="r-628164" data-claire-element-id="628164">En fait, les deux lignes au milieu peuvent être comprises comme des variables locales, comme on ferait dans d'autres langages. C'est la dernière ligne qui contient la vraie expression dont le résultat est stocké dans aire. Pour être sûr que vous comprenez bien, on va faire une fonction volume_cone qui calcule le volume d'un cône, en fonction du rayon et de la hauteur de ce cône. La première ligne est juste le nom de la fonction et des arguments. Ensuite vient la ligne donnant la valeur de pi. Jusque là tout est facile ! La ligne suivante calcule l'aire à partir de pi et de r. Et enfin la dernière ligne calcule le volume.</p><pre id="r-628165" data-claire-element-id="628165"><code data-claire-semantic="ocaml">let volume_cone r h =
   let pi = 3.14 in
   let aire = pi *. r *. r in
  1. /. 3. *. aire *. h;;</code></pre><p id="r-628166" data-claire-element-id="628166">On peut donc utiliser let ... in ... également dans des définitions de fonctions ! Dans OCaml, cette fonction a maintenant le type <code data-claire-semantic="ocaml">float -&gt; float -&gt; float </code> alors que tout à l'heure aire avait le type <code data-claire-semantic="ocaml">float -&gt; float </code>. En fait, il y a ici deux arguments qui sont des nombres décimaux, mais pourquoi est-ce qu'il y a trois flèches ? La comparaison avec les mathématiques de seconde n'est plus valable, on ne peut plus dire que la fonction part des nombres décimaux pour aller dans les nombres décimaux.</p><p id="r-628167" data-claire-element-id="628167">Bon, en vrai ça n'est pas si compliqué. Le <code data-claire-semantic="ocaml">-&gt; float </code> à la fin garde quand même le même sens, notre fonction renvoyant un float. La première flèche est liée à une caractéristique des fonctions OCaml qui veut que les fonctions OCaml à plusieurs arguments sont en fait décomposables en fonctions qui prennent un seul argument, et qui renvoie une fonction... autrement dit, ici, volume_cone est une fonction qui prend deux arguments, mais si on se contente d'écrire volume_cone 3.22...</p><pre id="r-628168" data-claire-element-id="628168"><code data-claire-semantic="console"># volume_cone 3.22;;
- : float -&gt; float = &lt;fun&gt;
# let volume_cone_rayon_fixe = volume_cone 3.22;;
val volume_cone_rayon_fixe : float -&gt; float = &lt;fun&gt;</code></pre><p id="r-628169" data-claire-element-id="628169">On récupère une fonction qui, cette fois, ne prend qu'un seul argument float pour renvoyer un float aussi ! On peut d'ailleurs la stocker dans une variable, qui est en fait une fonction comme les autres, qui peut prendre un argument. Nous reverrons tout ceci lorsque nous parlerons d'application partielle des fonctions.</p><p id="r-628170" data-claire-element-id="628170">Vous savez maintenant utiliser OCaml comme une calculatrice, avec éventuellement quelques fonctions mathématiques... Mais il peut faire bien plus, comme nous allons le voir tout de suite.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
<span class="arrow"></span>
<span class="next">Des variables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">
<span class="next">Les conditions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesconditions"></a><h2>Les conditions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
<span class="arrow"></span>
<span class="next">Et des fonctions !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
<span class="next">Syntaxe et utilisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-628173" data-claire-element-id="628173">Pour aller plus loin avec les fonctions, nous avons besoin d'apprendre à utiliser des tests conditionnels, ou « expressions conditionnelles », ou tout simplement « conditionnelles ». Ils ou elles permettent, selon la valeur d'une ou plusieurs variables, de choisir quelle partie du code on exécute. Nous en avons besoin, par exemple, pour programmer une fonction valeur_absolue, car si on teste valeur_absolue x alors que x est négatif, il faut changer son signe.</p>
</div><a name="Syntaxeetutilisation"></a><h2>Syntaxe et utilisation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">
<span class="arrow"></span>
<span class="next">Les conditions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
<span class="next">Des expressions OCaml comme les autres</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-syntaxe-et-utilisation-1" data-claire-element-id="628183">Syntaxe et utilisation</h4><p id="r-628174" data-claire-element-id="628174">La syntaxe des tests conditionnels en OCaml est très simple, on écrit if, suivi de la condition, then, suivi de l'expression à évaluer si la condition est vraie, else, suivi de l'expression à évaluer sinon. Pour être clair, voilà un exemple qui utilise la commande print_string qui affiche ce que l'on écrit après, entre guillemets</p><pre id="r-628175" data-claire-element-id="628175"><code data-claire-semantic="console"># let a = 3;;
val a : int = 3
# if a = 2 then               
    print_string &quot;a = 2 !&quot;  
  else
    print_string &quot;a a une autre valeur !&quot;;;
a a une autre valeur !- : unit = ()</code></pre><p id="r-628176" data-claire-element-id="628176">Nous déclarons une variable a qui vaut 3 dans la première commande. La deuxième commande, rappelez-vous, part du # et continue jusqu'aux ;; ! Tout le bloc, du if jusqu'à la fin, est une seule commande ! Pour le moment, ne faisons pas attention à ce que OCaml affiche après la phrase réponse. D'habitude, nous avons une expression de type comme int ou float. Nous verrons plus tard ce que unit veut dire.</p><p id="r-628177" data-claire-element-id="628177">Comme ici a ne vaut pas 2 mais 3, on sait déjà ce qui va être affiché. Mais remarquez bien que toute la deuxième commande est valable dès que a est défini avant : le programme marcherait pour n'importe quelle valeur de a. Enfin, il marcherait pour n'importe quelle valeur de a si a est un entier. Et oui, là aussi, si jamais vous essayez de comparer deux valeurs de types différents, gare à vous ! OCaml part du principe que vous faites erreur, car ça lui semble stupide de comparer, par exemple, un nombre entier et un nombre décimal. Vous devez garder en tête, en écrivant votre code, quelles propriétés doivent avoir vos variables, pour ne pas utiliser de nombre entier quand vous avez besoin d'un décimal, et inversement.</p><p id="r-628178" data-claire-element-id="628178">On peut donc choisir, en fonction d'une variable quelconque définie avant, quelle sera la valeur d'une autre variable. En fait, dans les deux expressions après then et après else, OCaml évalue l'une des deux (selon la condition), et le résultat est retourné. Ça veut dire qu'on peut écrire</p><pre id="r-628179" data-claire-element-id="628179"><code data-claire-semantic="console"># let x = if a = 2 then 3 else 4;;
val x : int = 4</code></pre><p id="r-628180" data-claire-element-id="628180">Effectivement comme ça ce n'est pas très lisible... Mais on peut le réécrire</p><pre id="r-628181" data-claire-element-id="628181"><code data-claire-semantic="console"># let x = 
    if (a = 2) then 3
    else 4;;
val x : int = 4</code></pre><p id="r-628182" data-claire-element-id="628182">Et là on voit bien que x prendra soit la valeur 3, soit la valeur 4, selon que a est égal à deux ou pas.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">
<span class="arrow"></span>
<span class="next">Les conditions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
<span class="next">Des expressions OCaml comme les autres</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="DesexpressionsOCamlcommelesautres"></a><h2>Des expressions OCaml comme les autres</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
<span class="arrow"></span>
<span class="next">Syntaxe et utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
<span class="next">Le type booléen</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-expressions-ocaml-comme-les-autres" data-claire-element-id="628188">Des expressions OCaml comme les autres</h4><p id="r-628184" data-claire-element-id="628184">Vous pouvez combiner presque tout ce que nous avons vu plus haut avec les tests conditionnels. D'abord, vous pouvez utiliser des variables locales dans vos conditionnelles en OCaml, comme nous le verrons dans la partie d'après. De plus, vous pouvez utiliser les expressions conditionnelles dans vos fonctions ! C'est comme ça qu'on peut définir une fonction valeur_absolue :</p><pre id="r-628185" data-claire-element-id="628185"><code data-claire-semantic="ocaml">let valeur_absolue x =
    if x &lt; 0. then (-. x)
    else x;;</code></pre><p id="r-628186" data-claire-element-id="628186">Comme avant, OCaml reste proche des mathématiques. On peut traduire directement ce code par « La valeur absolue de x est -x si x est négatif, et x sinon ». On a définit la valeur_absolue sur les nombres décimaux parce que c'est quand même plus pratique... mais ça nous oblige à utiliser 0. pour 0 et -. pour l'opposé.</p><p id="r-628187" data-claire-element-id="628187">Je le dis encore une fois, ce qui suit le then et le else est forcément une expression. Rappelez-vous donc que vous ne pouvez pas utiliser la forme let ... = ... comme ça dans une expression, car elle ne renvoie pas de résultat (son rôle est de définir une variable). On dit parfois que les tests conditionnels servent à contrôler le flux d'exécution d'un programme : selon tel ou tel donnée entrée par l'utilisateur, on va « diriger » en quelques sortes le programme.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
<span class="arrow"></span>
<span class="next">Syntaxe et utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
<span class="next">Le type booléen</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Letypeboolen"></a><h2>Le type booléen</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
<span class="arrow"></span>
<span class="next">Des expressions OCaml comme les autres</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">
<span class="next">Les fonctions récursives</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-type-booleen-1" data-claire-element-id="628225">Le type booléen</h4><p id="r-628189" data-claire-element-id="628189">OCaml reste un langage fortement typé, y compris pour les conditions. Dans un test conditionnel, nous devons donc toujours utiliser des booléens (par opposition à certains langages qui tolèrent n'importe quoi). Pour cela, nous devons donc toujours comparer deux éléments comparables entre eux : un entier avec un entier, un flottant avec un flottant, une chaîne avec une chaîne… et à chaque fois, il nous faudra utiliser un des opérateurs de comparaison suivant :</p><table id="r-628222" data-claire-element-id="628222"><thead id="r-628195" data-claire-element-id="628195"><tr id="r-628194" data-claire-element-id="628194"><th id="r-628191" data-claire-element-id="628191"><p id="r-628190" data-claire-element-id="628190">Opérateur</p></th><th id="r-628193" data-claire-element-id="628193"><p id="r-628192" data-claire-element-id="628192">Signification</p></th></tr></thead><tbody id="r-628221" data-claire-element-id="628221"><tr id="r-628200" data-claire-element-id="628200"><td id="r-628197" data-claire-element-id="628197"><p id="r-628196" data-claire-element-id="628196"><code data-claire-semantic="ocaml">=</code></p></td><td id="r-628199" data-claire-element-id="628199"><p id="r-628198" data-claire-element-id="628198">Égal à</p></td></tr><tr id="r-628205" data-claire-element-id="628205"><td id="r-628202" data-claire-element-id="628202"><p id="r-628201" data-claire-element-id="628201"><code data-claire-semantic="ocaml">&lt;</code></p></td><td id="r-628204" data-claire-element-id="628204"><p id="r-628203" data-claire-element-id="628203">Strictement inférieur à</p></td></tr><tr id="r-628210" data-claire-element-id="628210"><td id="r-628207" data-claire-element-id="628207"><p id="r-628206" data-claire-element-id="628206"><code data-claire-semantic="ocaml">&lt;=</code></p></td><td id="r-628209" data-claire-element-id="628209"><p id="r-628208" data-claire-element-id="628208">Inférieur ou égal à</p></td></tr><tr id="r-628215" data-claire-element-id="628215"><td id="r-628212" data-claire-element-id="628212"><p id="r-628211" data-claire-element-id="628211"><code data-claire-semantic="ocaml">&gt;</code></p></td><td id="r-628214" data-claire-element-id="628214"><p id="r-628213" data-claire-element-id="628213">Strictement supérieur à</p></td></tr><tr id="r-628220" data-claire-element-id="628220"><td id="r-628217" data-claire-element-id="628217"><p id="r-628216" data-claire-element-id="628216"><code data-claire-semantic="ocaml">&gt;=</code></p></td><td id="r-628219" data-claire-element-id="628219"><p id="r-628218" data-claire-element-id="628218">Supérieur ou égal à</p></td></tr></tbody></table><p id="r-628223" data-claire-element-id="628223">Les deux valeurs booléennes qui peuvent être obtenues sont <code data-claire-semantic="ocaml">true </code> et <code data-claire-semantic="ocaml">false </code>, respectivement vrai et faux. Nous pouvons elles-mêmes les combiner, avec des opérateurs comme <code data-claire-semantic="ocaml">&amp;&amp; </code>, <code data-claire-semantic="ocaml">|| </code> ou <code data-claire-semantic="ocaml">not </code> qui correspondent respectivement au « et », au « ou » et au « non » logiques. Ces opérateurs logiques nous permettent de construire des conditions plus raffinées ; par exemple si l'on veut vérifier qu'un nombre n est positif <strong>et</strong> qu'il est divisible par 2, on écrira <code data-claire-semantic="ocaml">(n &gt;= 0) &amp;&amp; (n mod 2 = 0) </code> (l'opérateur mod calcule le reste de la division euclidienne d'un entier par un autre).</p><p id="r-628224" data-claire-element-id="628224">C'est avec les expressions conditionnelles que les calculs mathématiques se transforment presque en vrais programmes, et c'est en les utilisant que l'on va se mettre à traduire de vrais algorithmes en OCaml.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
<span class="arrow"></span>
<span class="next">Des expressions OCaml comme les autres</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">
<span class="next">Les fonctions récursives</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesfonctionsrcursives"></a><h2>Les fonctions récursives</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
<span class="arrow"></span>
<span class="next">Le type booléen</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
<span class="next">Le principe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-628227" data-claire-element-id="628227">Lorsque notre programme sait réagir de différentes façons selon les paramètres qu'on lui fournit, on peut déjà écrire le code d'algorithmes très simples. Cependant pour aller plus loin il nous faut maîtriser un outil particulier : la récursivité.</p><p id="r-628228" data-claire-element-id="628228">Je la décris brièvement ici, en vous invitant à aller jeter un œil au tutoriel de bluestorm sur le sujet.</p>
</div><a name="Leprincipe"></a><h2>Le principe</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">
<span class="arrow"></span>
<span class="next">Les fonctions récursives</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
<span class="next">Les vraies fonctions récursives s&#039;habillent chez let rec</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-principe-34" data-claire-element-id="628236">Le principe</h4><p id="r-628229" data-claire-element-id="628229">Il est temps maintenant d'apprendre ce que sont les fonctions récursives. On dit souvent que ce sont des fonctions qui s'appellent elles même pendant leur exécution. Plus précisément, on devrait dire qu'une fonction récursive est une fonction dont le résultat pour un certain paramètre dépend généralement du résultat du calcul de la même fonction avec un autre paramètre... ce qui est un peu compliqué, regardons donc un exemple.</p><p id="r-628230" data-claire-element-id="628230">Usuellement on introduit la récursivité en OCaml avec la fameuse factorielle mathématique : cette fonction, définie sur les entiers naturels, calcule, pour un n donné, le produit de tous les nombres entiers de 1 à n. De plus, factorielle de 0 vaut 1. On note n! la factorielle du nombre n. Mais en fait, pour un entier naturel non-nul n donné, il est facile de montrer que n! = n*(n-1)! : c'est ce que l'on appelle une relation de récurrence entre le rang n et le rang n-1. Il suffit après de préciser une valeur particulière, par exemple 0! ou 1! et on peut calculer la factorielle de tout nombre entier !</p><p id="r-628231" data-claire-element-id="628231">Par exemple, calculons 3! :</p><p id="r-628232" data-claire-element-id="628232">3! = 3*(3-1)! = 3*2! mais on sait calculer 2! donc<br/> 3! = 3*(2*1!) = 3*(2*(1*0!)) = 3*2*1*1 = 6.</p><p id="r-628233" data-claire-element-id="628233">La relation de récurrence nous fait bien retrouver notre première définition : la factorielle de n, c'est le produit de tous les entiers naturels jusqu'à n (sauf 0 bien sûr). Essayons de traduire cette relation en OCaml, en définissant une fonction factorielle :</p><pre id="r-628234" data-claire-element-id="628234"><code data-claire-semantic="ocaml"># let factorielle n = n*factorielle (n-1);;
Unbound value factorielle</code></pre><p id="r-628235" data-claire-element-id="628235">:o</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">
<span class="arrow"></span>
<span class="next">Les fonctions récursives</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
<span class="next">Les vraies fonctions récursives s&#039;habillent chez let rec</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesvraiesfonctionsrcursivess039habillentchezletrec"></a><h2>Les vraies fonctions récursives s&#039;habillent chez let rec</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
<span class="arrow"></span>
<span class="next">Le principe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
<span class="next">Réfléchir à un programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-vraies-fonctions-recursives-s-habillent-chez-let-rec" data-claire-element-id="628248">Les vraies fonctions récursives s'habillent chez let rec</h4><p id="r-628237" data-claire-element-id="628237">Nous voilà face à une particularité de la forme let en OCaml : lorsqu'on l'utilise pour définir un mot, l'expression qui est à droite du signe = ne doit être composée que de mots qui ont déjà été définis avant. Bien sûr, quand on écrit let f x = 3*x;; vous allez me dire que x n'était pas défini avant, mais en fait ça n'est pas lui que l'on défini, c'est f. La variable x que l'on utilise est transparente, elle ne joue aucun rôle. Mais pour la définition d'un mot, la forme let interdit les déclarations récursives.</p><p id="r-628238" data-claire-element-id="628238">Nous sommes donc obligés d'utiliser une nouvelle forme, qui autorise les déclarations récursives : la forme let rec. Elle s'utilise de la même façon, mais ne doit être utilisée que pour définir des valeurs récursives. Revoici donc notre fonction, que nous testons tout de suite avec la valeur 3 :</p><pre id="r-628239" data-claire-element-id="628239"><code data-claire-semantic="console"># let rec factorielle n = n*factorielle(n-1);;
val factorielle : int -&gt; int = &lt;fun&gt;
# factorielle 3;;
Stack overflow during evaluation (looping recursion?).</code></pre><p id="r-628240" data-claire-element-id="628240">Mais ça ne marche pas. Est-ce que vous devinez pourquoi ?</p><p id="r-628241" data-claire-element-id="628241"></p><div id="r-628244" data-claire-element-id="628244"><p id="r-628242" data-claire-element-id="628242">Parce que cette définition de la fonction factorielle quand on lui passe un entier n appelle systématiquement factorielle (n-1), et que le calcul ne se termine jamais ! Il faut donc ajouter une conditionnelle pour être sûr que quand on évalue 0! ou 1!, on arrête le calcul !</p><p id="r-628243" data-claire-element-id="628243">Pour suivre les appels récursifs d'une fonction donnée, vous pouvez utiliser la commande #trace d'OCaml. Tapez par exemple #trace factorielle puis appelez factorielle avec une certaine valeur de n pour la suivre. Mais attention, ça va être très lourd !</p></div><p id="r-628245" data-claire-element-id="628245">Voici un code correct (sur les nombres entiers naturels seulement)</p><pre id="r-628246" data-claire-element-id="628246"><code data-claire-semantic="ocaml">let rec factorielle n =                      
    if n = 0 then 1
    else n*factorielle(n-1);;</code></pre><p id="r-628247" data-claire-element-id="628247">Petit entraînement : rajoutez un test pour vérifier que n est bien un nombre entier naturel, et si ça n'est pas le cas, renvoyez la valeur -1 (en attendant d'en savoir plus sur la gestion des erreurs en OCaml). Ça n'est pas difficile !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
<span class="arrow"></span>
<span class="next">Le principe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
<span class="next">Réfléchir à un programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Rflchirunprogramme"></a><h2>Réfléchir à un programme</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
<span class="arrow"></span>
<span class="next">Les vraies fonctions récursives s&#039;habillent chez let rec</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
<span class="next">Un exemple plus concret</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-reflechir-a-un-programme" data-claire-element-id="628258">Réfléchir à un programme</h4><p id="r-628249" data-claire-element-id="628249">Il faut toujours s'assurer que les fonctions récursives que l'on utilise vont bien se &quot;terminer&quot;. Parce que si on n'est pas sûr, alors nos programmes risquent de contenir des bugs, et de ne pas faire ce que l'utilisateur demande. Maintenant je vais vous poser une question que mon professeur aussi m'avait posée quand il m'a appris OCaml :</p><div id="r-628251" data-claire-element-id="628251" data-claire-semantic="question"><p id="r-628250" data-claire-element-id="628250">Comment peut-on être sûr que cette fonction est correcte et qu'elle marchera tout le temps ?</p></div><p id="r-628252" data-claire-element-id="628252">Au début, je me suis dit, sans doute comme vous, qu'il fallait tester la fonction pour être sûr. Hé bien c'est faux. En effet, avec cette technique, si on voulait s'assurer que ça marche pour tous les entiers naturels, il faudrait tester la fonction pour tous les entiers naturels ! Or vous savez que ce n'est pas possible, parce qu'il y a une infinité d'entiers naturels. Il faut donc trouver une autre idée. Nous allons prouver mathématiquement que la fonction ne plante pas, c'est à dire qu'elle termine bien.</p><p id="r-628253" data-claire-element-id="628253">Pour ça, il suffit de considérer un nombre entier naturel n quelconque. Si c'est 0, on sait déjà que la fonction termine bien. Sinon, c'est forcément un nombre plus grand que 0, par exemple 1, 2... 733... n'importe lequel. Ça n'a pas d'importance. Or le code que l'on a écrit nous dit que factorielle (n) dépend alors de factorielle (n-1) ! En effet, si factorielle (n-1) est connue, alors on a juste à multiplier le résultat par n, et donc factorielle (n) termine.</p><p id="r-628254" data-claire-element-id="628254">On peut donc reprendre le même procédé, avec cette fois-ci n-1. Comme on avait n plus grand que 0, n-1 est supérieur ou égal à 0, c'est encore un nombre entier naturel. Et ça recommence. Si n-1 est égal à 0, alors factorielle (n-1) termine, donc finalement factorielle (n) termine. Si n-1 est lui aussi plus grand que 0, alors on suit le même procédé.</p><p id="r-628255" data-claire-element-id="628255">Mais il manque une dernière justification, en fait toute la justification est basée sur le fait que 0! = 1. Il faut donc être sûr que factorielle(n) finit par provoquer l'appel de factorielle(0) ! Pour ça, il suffit de suivre l'évolution de l'argument de factorielle : s'il commence à n plus grand que zéro, on va calculer factorielle (n-1), puis factorielle (n-2), etc. Or si vous repensez aux nombres entiers naturels dans votre tête, on peut toujours enlever 1 à n quand n est un entier naturel, sauf quand on finit par atteindre... 0 ! Si vous tracez un axe orienté vers la droite et gradué de 1 en 1, il n'a pas de limite à droite, mais il en a toujours une à gauche, le 0. À force d'enlever 1, on atteint donc forcément 0 (en fait, il suffit d'enlever n fois le nombre 1).</p><p id="r-628256" data-claire-element-id="628256">Donc en calculant factorielle (n), on va calculer factorielle (n-1), etc. jusqu'à factorielle (0), qui vaut 1. Ensuite, OCaml calcule les multiplications de toutes ces factorielles et on a finalement factorielle (n). On peut donc calculer factorielle (n) pour tout entier naturel n ! Hourrah !</p><p id="r-628257" data-claire-element-id="628257">Il y a donc trois choses qui sont importantes dans notre fonction. Le cas de base, quand n = 0, qui doit toujours être atteint pour que la récursivité prenne fin. Il y a aussi le cas général, quand n est quelconque, où on appelle un cas plus petit que n pour faire les calculs. Pour ça, il y a une transmission du rang n au rang n-1 (ici), qui est justement le plus important pour atteindre le cas de base. Je dis &quot;ici&quot; parce que dans d'autres programmes, la transmission peut être différente, par exemple pour une recherche dichotomique sur un tableau où le tableau est coupé en deux à chaque fois pour que le programme regarde si l'élément cherché est dans une moitié du tableau. Dans un tel cas, on passerait en gros de n (la taille d'un tableau entier) à n/2 (la taille des deux moitiés de tableau). Mais vous verrez sans doute tout ceci avec l'habitude, ou en lisant des <a href="http://www.siteduzero.com/tutoriel-3-51781-algorithmique-pour-l-apprenti-programmeur.html">tutoriels d'algorithmique</a> (comme celui de bluestorm, encore lui !).</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
<span class="arrow"></span>
<span class="next">Les vraies fonctions récursives s&#039;habillent chez let rec</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
<span class="next">Un exemple plus concret</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unexempleplusconcret"></a><h2>Un exemple plus concret</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
<span class="arrow"></span>
<span class="next">Réfléchir à un programme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">
<span class="next">Les listes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-un-exemple-plus-concret" data-claire-element-id="628264">Un exemple plus concret</h4><p id="r-628259" data-claire-element-id="628259">Nous allons voir une autre fonction récursive, plus consistante et sans doute plus utile pour vos études, qui calcule le PGCD de deux nombres entiers d'après <a href="http://fr.wikipedia.org/wiki/Algorithme_d%27Euclide#Pseudocode_r.C3.A9cursif">l'algorithme d'Euclide</a>. Pour cela, nous allons utiliser l'opérateur mod qui donne le reste d'une division entière.</p><pre id="r-628260" data-claire-element-id="628260"><code data-claire-semantic="ocaml">let rec pgcd a b =
    if b = 0 then a
    else   
      let r = a mod b in
      pgcd b r;;</code></pre><p id="r-628261" data-claire-element-id="628261">Comme vous pouvez le voir, on n'a aucun problème pour utiliser une variable locale ici. On distingue encore une fois un cas de base, un cas général et une transmission, qui se fait ici par l'intermédiaire du modulo (reste de la division entière). Je vous conseille de chercher quelques idées d'algorithmes à programmer en OCaml pour vous faire la main !</p><p id="r-628262" data-claire-element-id="628262">Vous venez de voir votre premier véritable algorithme ! Passons aux choses sérieuses. Je reparlerai des fonctions récursives quand vous serez un peu plus habitué à OCaml et à sa syntaxe.</p><p id="r-628263" data-claire-element-id="628263">Si vous m'avez lu attentivement, vous avez maintenant quelques connaissances utiles en OCaml, et vous savez faire des programmes basiques. Patience, nous allons encore beaucoup progresser ensemble.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
<span class="arrow"></span>
<span class="next">Réfléchir à un programme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">
<span class="next">Les listes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Leslistes"></a><h2>Les listes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
<span class="arrow"></span>
<span class="next">Un exemple plus concret</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
<span class="next">Ranger ses données</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-628266" data-claire-element-id="628266">En informatique, on peut être amené à traiter des problèmes qui n'appartiennent pas à l'arithmétique comme celui dont j'ai parlé à la fin du chapitre précédent. Par exemple, on peut avoir un grand nombre de données à examiner (des données météorologiques, de l'ADN), ou vouloir chercher quelque chose dans ces données (par exemple si on traite des Zéros, on peut chercher quels Zéros ont moins de 18 ans).</p>
</div><a name="Rangersesdonnes"></a><h2>Ranger ses données</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">
<span class="arrow"></span>
<span class="next">Les listes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
<span class="next">Utiliser les listes en OCaml</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-ranger-ses-donnees" data-claire-element-id="628276">Ranger ses données</h4><p id="r-628267" data-claire-element-id="628267">On a, lorsque l'on traite des problèmes de ce type, vite fait de se retrouver avec un très grand nombre de données (regardez combien de zéros sont inscrits au site, ou combien de gènes comporte l'espèce humaine, pour vous en convaincre). Par &quot;un très grand nombre&quot;, je veux dire qu'on ne peut pas bien savoir à l'avance combien de ces données on va avoir ! Et pourtant, il faut toutes les stocker. Comment faire alors ? Impossible d'utiliser une variable par donnée !</p><p id="r-628268" data-claire-element-id="628268">La solution repose dans les structures de données, une notion propre à l'informatique. Ce sont des façons de ranger les informations sans avoir à connaître exactement leur nombre. Nous ne nous occuperons pas immédiatement de savoir comment sont codées ces structures de données, nous allons commencer par apprendre à nous en servir, en commençant par la plus simple : la liste.</p><p id="r-628269" data-claire-element-id="628269">Pour utiliser une structure de données, il faut qu'elle soit définie dans le langage que l'on souhaite utiliser, et c'est ici le cas pour OCaml. Il faut de plus savoir comment la structure est construite, et avoir des fonctions pour l'utiliser. Là aussi, OCaml nous fournira le nécessaire.</p><p id="r-628270" data-claire-element-id="628270">J'ai donc juste à vous expliquer ce que sont les listes. Une liste est une chaîne d'éléments reliés les uns aux autres, chaque élément portant une donnée. Toutes les données doivent être du même type, pour que OCaml vérifie ici aussi que l'on fait les bonnes opérations sur les données. Voici schéma d'une liste, emprunté à Wikipédia</p><figure id="r-628272" data-claire-element-id="628273"><img id="r-628271" data-claire-element-id="628271" src="medias/uploads.siteduzero.com_files_140001_141000_140040.png" alt="Une liste exemple"/></figure><p id="r-628274" data-claire-element-id="628274">La structure de données est donc ici la chaîne que forment ces données. Les données en question peuvent être de n'importe quel type, même d'autres listes. Les éléments de la liste sont en fait composés d'une &quot;tête&quot;, une donnée à stocker, et d'une &quot;queue&quot; qui désigne l'élément suivant comme sur le dessin. Seul l'élément situé en fin de chaîne ne désigne aucun autre élément.</p><p id="r-628275" data-claire-element-id="628275">Si on y réfléchit, la liste ainsi représentée est en fait constituée de plusieurs sous-listes ! En effet, prenez la queue du premier élément : elle désigne elle aussi une chaîne d'éléments, c'est donc une liste contenue dans la première. Cela ne vous rappelle rien ? Ça ressemble assez aux fonctions récursives dont je parlais dans le chapitre précédent. On avait alors une fonction qui s'appelait elle-même jusqu'à rencontrer un &quot;cas de base&quot;. On a ici des listes, qui en contiennent d'autres, qui à leur tour contiennent des listes, jusqu'à... jusqu'à quoi d'ailleurs ? En fait, la récursivité s'arrête au dernier élément. Pour lui aussi, la queue est une liste, mais une liste particulière, représentée par une croix sur le dessin : la liste vide, qui ne contient aucun élément. C'est en quelques sortes notre cas de base.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">
<span class="arrow"></span>
<span class="next">Les listes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
<span class="next">Utiliser les listes en OCaml</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UtiliserleslistesenOCaml"></a><h2>Utiliser les listes en OCaml</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
<span class="arrow"></span>
<span class="next">Ranger ses données</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
<span class="next">Le filtrage de motif</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utiliser-les-listes-en-ocaml" data-claire-element-id="628296">Utiliser les listes en OCaml</h4><p id="r-628277" data-claire-element-id="628277">Maintenant que vous savez ce que sont les listes, voyons comment les utiliser. Peut-être que vous vous en doutez, le fait que la liste soit une structure de données récursive rend son utilisation avec des fonctions récursives particulièrement élégante. Nous utiliserons deux fonctions, hd (&quot;head&quot;, tête) et tl (&quot;tail&quot;, queue), mises à notre disposition par OCaml, pour manipuler les listes. Ces fonctions sont rangées dans le module List : pour les utiliser, nous écrirons List.hd et List.tl plutôt que simplement leur nom (c'est une façon d'utiliser les fonctions rangées dans un module).</p><p id="r-628278" data-claire-element-id="628278">Mais avant toute chose, nous devons construire des listes, en la délimitant par des crochets [ ] et en séparant les données par un ;</p><pre id="r-628279" data-claire-element-id="628279"><code data-claire-semantic="console"># [1;2;3];;
- : int list = [1; 2; 3]
# [1.4;3.1415;2.7];;
- : float list = [1.4; 3.1415; 2.7]
# [[1;2]; [3]];;
- : int list list = [[1; 2]; [3]]
# [1;2;3.14];;
This expression has type float but is here used with type int</code></pre><p id="r-628280" data-claire-element-id="628280">Vous pouvez voir ici que les listes peuvent contenir de tout... tant que le type des données est le même.</p><p id="r-628281" data-claire-element-id="628281">Quand nous manipulerons des listes dans nos programmes, elles existeront déjà, et nous ne les définirons pas à l'écriture du programme comme ça (pensez à un utilisateur qui rentre ses données, il doit le faire pendant que le programme tourne, pas avant de lancer le programme). Nous devons donc pouvoir ajouter un élément à une liste déjà construite, pour l'agrandir par exemple. Cela se fait à l'aide de l'opérateur :: qui ajoute la donnée placée devant à la liste placée à droite de l'opérateur, comme dans</p><pre id="r-628282" data-claire-element-id="628282"><code data-claire-semantic="console"># 1 :: [2; 3];;
- : int list = [1; 2; 3]
# 12 :: 99 :: 37 :: [];;
- : int list = [12; 99; 37]</code></pre><p id="r-628283" data-claire-element-id="628283">Vous remarquerez que l'on peut construire la liste que représente le dessin : on crée un élément ayant pour tête 12 et pour queue l'élément suivant de la liste, qui lui a pour tête 99 et pour queue encore l'élément suivant, qui enfin a pour tête 37 et, pour queue, la liste vide []. On peut naturellement stocker cette liste dans une variable et utiliser les opérations hd et tl sur ses éléments</p><pre id="r-628284" data-claire-element-id="628284"><code data-claire-semantic="console"># let l = 12 :: 99 :: 37 :: [];;
val l : int list = [12; 99; 37]
# List.hd l;;
- : int = 12
# List.tl (List.tl l);;
- : int list = [37]</code></pre><p id="r-628285" data-claire-element-id="628285">Pour comprendre le deuxième exemple, suivez à la main le schéma de la liste. La queue de la queue de la liste, c'est bien la liste qui commence à l'élément dont la tête est 37 ! Comme je l'ai dit plus haut, cette structure est très pratique pour utiliser des fonctions récursives sur une liste. Le cas de base, c'est le traitement d'une liste vide, ou parfois d'une liste composée d'un seul élément (que l'on appelle un singleton). Le cas général lui traite un élément en tête de liste, et provoque un appel récursif sur la queue ! Comme la liste possède un nombre fini d'éléments, on est sûr de finir l'appel récursif (on traite un élément à chaque fois).</p><p id="r-628286" data-claire-element-id="628286">On peut donc maintenant passer à l'écriture de nos fonctions, qui comporteront à chaque fois un test sur la liste passée en argument pour vérifier si celle-ci est vide ou pas. Il s'agit d'un simple test d'égalité avec la liste vide. Nous allons commencer par un exemple simple : mesurer la taille d'une liste. Vu que nos listes peuvent changer de taille pendant que notre programme tourne (par exemple si notre programme s'occupe est un tableur, l'utilisateur peut rajouter autant de cases qu'il veut), on peut vouloir les mesurer. Récursivement, cela se fait très simplement : si la liste est vide, sa longueur est 0. Sinon, la longueur de la liste est 1 + la longueur de la queue. Et en OCaml :</p><pre id="r-628287" data-claire-element-id="628287"><code data-claire-semantic="ocaml">let rec longueur liste =
    if liste = [] then 0
    else 1 + (longueur (List.tl liste));;    
val longueur : 'a list -&gt; int = &lt;fun&gt;</code></pre><p id="r-628288" data-claire-element-id="628288">Entrez cette fonction dans OCaml et testez-la. Voilà votre première fonction récursive sur une liste ! Il existe tout un tas de fonctions simples à écrire comme ça. Essayez par exemple d'écrire une fonction qui vérifie si un élément donné en paramètre appartient bien à une liste (elle aussi donnée en paramètre). Pour faire ça vous allez devoir utiliser les booléens.</p><p id="r-628289" data-claire-element-id="628289">Pour bien y arriver, décomposez toujours votre fonction en un cas de base, quand la liste vide est rencontrée (l'élément n'appartient bien sûr pas à la liste vide !), et un cas général : l'élément appartient à une liste si il est en tête ou s'il appartient à la queue de cette liste. Normalement vous avez tout pour écrire la fonction !</p><p id="r-628290" data-claire-element-id="628290"></p><div id="r-628295" data-claire-element-id="628295"><pre id="r-628291" data-claire-element-id="628291"><code data-claire-semantic="ocaml">let rec appartient x l =
    if l = [] then false
    else (List.hd l = x) or (appartient x (List.tl l));;
val appartient : 'a -&gt; 'a list -&gt; bool = &lt;fun&gt;</code></pre><p id="r-628292" data-claire-element-id="628292">Ce code traduit exactement l'énoncé en Français. Nous pouvons le tester, et surtout ré-utiliser la possibilité de ne pas donner tous les arguments à la fonction en même temps. Par exemple, nous voulons tester si 3 appartient à deux listes d'entiers, alors nous définissons une fonction contient_3 qui attend une liste et renvoie un booléen (vrai ou faux), et nous utilisons cette fonction sur deux exemples</p><pre id="r-628293" data-claire-element-id="628293"><code data-claire-semantic="console"># let contient_3 = appartient 3;;
val contient_3 : int list -&gt; bool = &lt;fun&gt;
# contient_3 [1;5;2;3;6];;
- : bool = true
# contient_3 [1;5;2;4] ;;
- : bool = false</code></pre><p id="r-628294" data-claire-element-id="628294">Ainsi on n'a pas à écrire appartient 3 [1;5;2;3;6] et appartient 3 [1;5;2;4].</p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
<span class="arrow"></span>
<span class="next">Ranger ses données</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
<span class="next">Le filtrage de motif</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lefiltragedemotif"></a><h2>Le filtrage de motif</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
<span class="arrow"></span>
<span class="next">Utiliser les listes en OCaml</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
<span class="next">Quelques exemples de fonctions utilisant les listes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-filtrage-de-motif" data-claire-element-id="628303">Le filtrage de motif</h4><p id="r-628297" data-claire-element-id="628297">Cependant cette écriture est un peu lourde. OCaml nous donne la possibilité de faire un peu mieux, en utilisant ce que l'on appelle le filtrage de motif : c'est une nouvelle forme qui permet de se rapprocher encore de l'écriture mathématique, en écrivant toutes les formes d'arguments que la fonction est susceptible de savoir traiter. On propose alors plusieurs formes, et OCaml sélectionne la première qui peut correspondre. Voilà en exemple la fonction longueur recodée avec le filtrage de motif :</p><pre id="r-628298" data-claire-element-id="628298"><code data-claire-semantic="ocaml">let rec longueur l = match l with
  |  [] -&gt; 0
  | tete :: queue -&gt; 1 + longueur queue;;</code></pre><p id="r-628299" data-claire-element-id="628299">Les nouveaux mots clefs sont donc match et with, ainsi que la flèche -&gt; et le | devant les différents motifs. Même si cette syntaxe est assez compliquée, elle présente le mérite d'être claire. On n'utilise plus ici les fonctions List.hd et List.tl car OCaml décompose tout seul la liste en une tête et une queue lorsqu'il le peut. Les variables tete et queue sont alors définies après la flèche, prêtes à être utilisées. On fait comprendre à OCaml que l'on veut séparer la liste grâce à l'opérateur :: qui représente la structure de la liste (on parle de filtrage de structure !).</p><p id="r-628300" data-claire-element-id="628300">Naturellement, on peut utiliser cette notation pour réécrire la fonction appartient :</p><pre id="r-628301" data-claire-element-id="628301"><code data-claire-semantic="ocaml">let rec appartient x l = match l with
  |  [] -&gt; false
  | t :: q -&gt; (x = t) or (appartient x q);;</code></pre><p id="r-628302" data-claire-element-id="628302">Ici encore le code est allégé.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
<span class="arrow"></span>
<span class="next">Utiliser les listes en OCaml</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
<span class="next">Quelques exemples de fonctions utilisant les listes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quelquesexemplesdefonctionsutilisantleslistes"></a><h2>Quelques exemples de fonctions utilisant les listes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
<span class="arrow"></span>
<span class="next">Le filtrage de motif</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">
<span class="next">Manipulation de fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-exemples-de-fonctions-utilisant-les-listes" data-claire-element-id="628325">Quelques exemples de fonctions utilisant les listes</h4><h5 id="r-le-maximum-d-une-liste" data-claire-element-id="628314">Le maximum d'une liste</h5><p id="r-628304" data-claire-element-id="628304">Afin d'être sûr de bien tout comprendre, étudions quelques exemples. Nous allons commencer par chercher le plus grand nombre décimal d'une liste.</p><p id="r-628305" data-claire-element-id="628305">Nous voulons définir une fonction maximum l qui détermine le plus grand élément de l. Pour cela, nous allons comparer les âges un par un, en stockant à chaque fois le maximum. Par exemple si la liste est [14.2; 13.7; 18.5] nous allons d'abord prendre 14.2 comme âge maximum (c'est le premier âge que nous rencontrons, il est donc le plus grand...), puis nous comparerons 14.2 à 13.7 et garderons 14.2 comme maximum, puis nous le comparerons à 18.5, et là on changera de maximum. Puis ça sera fini.</p><p id="r-628306" data-claire-element-id="628306">Comment faire cela avec une fonction récursive ? C'est facile. Nous allons supposer que tous les âges sont positifs, d'une part. D'autre part, ce qui nous gêne est que nous ne savons pas stocker le maximum pour le comparer à chaque fois. Idéalement, il faudrait le passer lui aussi récursivement à chaque fois ! En reprenant l'exemple du dessus on aurait donc les appels suivants :</p><pre id="r-628307" data-claire-element-id="628307"><code data-claire-semantic="ocaml">maximum [13.7; 18.5] 14.2 
maximum [18.5]  14.2
maximum [] 18.5</code></pre><p id="r-628308" data-claire-element-id="628308">ce qui correspondrait en fait un peu au code suivant, si on appelle a et b les deux âges que l'on compare, et liste la liste des âges (je ne mets pas encore tout, juste la partie concernant l'appel récursif) :</p><pre id="r-628309" data-claire-element-id="628309"><code data-claire-semantic="ocaml">maximum (List.tl liste) (max a b)</code></pre><p id="r-628310" data-claire-element-id="628310">Normalement ce code ne vous pose pas trop de soucis vu votre niveau en OCaml. Le cas de base est naturellement celui de la liste vide, comme toujours. Et finalement, en utilisant le filtrage de motif plutôt que les opérations sur les listes,</p><pre id="r-628311" data-claire-element-id="628311"><code data-claire-semantic="ocaml">let rec maximum liste a = match liste with
  |  [] -&gt; a
  | tete :: queue -&gt; maximum queue (max a tete);;</code></pre><p id="r-628312" data-claire-element-id="628312">Mais pour que notre fonction soit plus facilement utilisable, nous allons en fait écrire une fonction qui ne demande pas elle qu'on passe en argument un élément de comparaison. Pour ça, nous définissons la fonction récursive &quot;maximum&quot; à l'intérieur d'une autre fonction, qui se contente elle d'appeler maximum avec le premier élément de la liste. Ça marche, parce que si le premier élément est le maximum, alors nous l'aurons encore à la fin des appels récursifs, et que s'il ne l'est pas, il sera remplacé par un autre :</p><pre id="r-628313" data-claire-element-id="628313"><code data-claire-semantic="ocaml">let maximum liste =       
    let rec maximum_rec liste a = match liste with
    |  [] -&gt; a
    | tete :: queue -&gt; maximum_rec queue (max a tete) in
  maximum_rec liste (List.hd liste);;</code></pre><h5 id="r-construire-une-liste" data-claire-element-id="628324">Construire une liste</h5><p id="r-628315" data-claire-element-id="628315">Nos fonctions récursives peuvent aussi chercher à construire une liste à partir d'une autre (par exemple si nous voulons retourner une liste, en inversant son ordre), ou même une liste à partir... d'un entier, pourquoi pas ! Voyons par exemple le cas très simple d'une fonction qui prendrait un argument un nombre entier n et construirait la liste des entiers de 1 à n...</p><p id="r-628316" data-claire-element-id="628316">On a encore une fois une fonction récursive, avec cette fois-ci une espèce de compteur à maintenir. En fait, à chaque appel, nous générerons un élément de la liste, mais sans la manipuler en elle-même. De même que précédemment, notre fonction genere contiendra la définition locale d'une fonction récursive qui maintient le compteur. La voici :</p><pre id="r-628317" data-claire-element-id="628317"><code data-claire-semantic="ocaml">let rec gen_rec i n = 
    if i = n then []
    else i :: (gen_rec (i+1) n);;</code></pre><p id="r-628318" data-claire-element-id="628318">Quand i=n, on a atteint la fin de la liste à générer, et on renvoie donc la liste vide, qui met fin à toute récursivité. Dans le cas général, on construit simplement la liste à l'aide de l'opérateur :: .</p><p id="r-628319" data-claire-element-id="628319">Il ne nous reste plus qu'à placer cette fonction dans une fonction qui &quot;cache&quot; i :</p><pre id="r-628320" data-claire-element-id="628320"><code data-claire-semantic="ocaml">let genere n = 
    let rec gen_rec i n =
      if i = n then []
      else i :: (gen_rec (i+1) n)
  in gen_rec 0 n;;</code></pre><p id="r-628321" data-claire-element-id="628321">De manière générale, coder de petites fonctions de ce genre est un exercice pas trop désagréable, et qui permet de s'assurer que l'on a tout compris. Cherchez quelques idées, et concrétisez-les !</p><p id="r-628322" data-claire-element-id="628322">Vous voilà maintenant capable d'utiliser les listes, en définissant des fonctions récursives dessus. Nous apprendrons d'avantage de choses dans le chapitre suivant, qui reparlera des fonctions tout en utilisant abondamment les listes.</p><p id="r-628323" data-claire-element-id="628323">N'hésitez pas à vous entraîner à les utiliser, ainsi que le filtrage de motifs !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
<span class="arrow"></span>
<span class="next">Le filtrage de motif</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">
<span class="next">Manipulation de fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Manipulationdefonctions"></a><h2>Manipulation de fonctions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
<span class="arrow"></span>
<span class="next">Quelques exemples de fonctions utilisant les listes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
<span class="next">Réalisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-628327" data-claire-element-id="628327">Je n'en ai pas parlé jusqu'à présent parce que vous débutiez en OCaml, mais nous allons maintenant apprendre à manier une grande force du langage : la manipulation de fonctions. Bien souvent, nous écrirons des programmes qui serviront à traiter un problème particulier, et nous voudrons ensuite traiter toute une liste de problèmes du même type ; en gros, nous voudrions pouvoir généraliser facilement un code chargé de traiter un élément d'une liste en un code gérant toute la liste.</p><p id="r-628328" data-claire-element-id="628328">Précédemment, nous faisions cela en écrivant une fonction récursive sur la liste, mais en fait seul le traitement du cas de base et du cas général changeaient, alors que la récursivité avait toujours la même allure. Nous pourrions donc imaginer des fonctions qui font le travail d'appliquer une autre fonction à toute une liste. Ces fonctions qui en manipulent d'autres sont appelées fonctions d'ordre supérieur.</p>
</div><a name="Ralisation"></a><h2>Réalisation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">
<span class="arrow"></span>
<span class="next">Manipulation de fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
<span class="next">Des exemples moins mathématiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-realisation-8" data-claire-element-id="628343">Réalisation</h4><p id="r-628329" data-claire-element-id="628329">Rentrons dans le vif du sujet et codons notre première fonction qui en utilise une autre. Nous allons par exemple coder une fonction neg qui, pour une fonction f, renvoie la fonction -f. Par exemple, si nous avions une fonction carre : x -&gt; x^2, neg carre renverrait la fonction x -&gt; -x^2. Naturellement, neg f renvoie une fonction que l'on peut stocker sous un autre nom, grâce aux variables. Par exemple, let moins_carre x = (neg f) x serait possible.</p><p id="r-628330" data-claire-element-id="628330">Mais passons à la réalisation de notre fonction. Nous écrivons comme d'habitude</p><pre id="r-628331" data-claire-element-id="628331"><code data-claire-semantic="ocaml">let neg f ...</code></pre><p id="r-628332" data-claire-element-id="628332">car on écrit uen fonction qui agit sur f, après tout ! Mais on ne peut pas écrire, comme en maths, -f car sinon OCaml croirait que f est un entier (rappelez vous que OCaml est intransigeant à ce niveau !). En fait, l'entier c'est f(x). On écrit donc</p><pre id="r-628333" data-claire-element-id="628333"><code data-claire-semantic="ocaml">let neg f ... = - (f x);;</code></pre><p id="r-628334" data-claire-element-id="628334">Sauf que là, x n'est pas défini dans la fonction. En fait, c'est u paramètre pour f. Alors on écrit</p><pre id="r-628335" data-claire-element-id="628335"><code data-claire-semantic="ocaml">let neg f x = - (f x);;</code></pre><p id="r-628336" data-claire-element-id="628336">Et voilà notre première fonction d'ordre supérieur. Ça n'est pas si difficile après tout ! Bien sûr, cette fonction présente un intérêt limité. Nous allons faire mieux, en imaginant une fonction qui vérifie si la fonction passée en argument s'annule ou change de signe sur un intervalle... autrement dit, faisons une fonction F(f) qui compte le nombre de fois où f(i) change de signe, pour i un entier compris entre 0 et n. Oui, nous ne testerons que pour des entiers, ça sera déjà assez compliqué comme ça (ça ne marchera que pour des fonctions simples, mais c'est juste pour apprendre).</p><p id="r-628337" data-claire-element-id="628337">C'est plus compliqué, mais aussi plus rigolo. Décomposons le problème. On aura bien sûr une relation de récurrence sur i, donc dans le corps de F sera définie une fonction récursive qui vérifie le signe de f pour tous les i jusqu'à n. F n'aura qu'à appeler cette fonction, en retournant son résultat.</p><p id="r-628338" data-claire-element-id="628338">Pour comparer le signe de f(i) à f(i-1), nous n'avons qu'à vérifier le signe du produit des deux. S'il est positif, alors il n'y a pas eu de changement de signe (et donc on doit faire l'appel récursif). S'il est négatif, il y en a eu un, et nous pouvons retourner true .</p><p id="r-628339" data-claire-element-id="628339">Voici la fonction interne qui effectue ce travail (elle suppose que f est définie, et ça sera le cas quand nous écrirons ce code à l'intérieur de celui de F) :</p><pre id="r-628340" data-claire-element-id="628340"><code data-claire-semantic="ocaml">let rec compte i n = 
    if i = n then false
    else if f(i) *. f(i-1) &lt; 0. then true 
           else false or (compte (i+1) n);;</code></pre><p id="r-628341" data-claire-element-id="628341">Le traitement du cas récursif est à comprendre ainsi : si on n'observe jamais de changement de signe, alors on aura au final une grande comparaison de plein de false. Mais comme &quot;false or false&quot; = false, le résultat final sera le bon. En revanche, si une fois la valeur true est rencontrée, alors même avec une infinité de false le résultat sera quand même true.</p><p id="r-628342" data-claire-element-id="628342">Notez qu'ici f est considérée comme une fonction int -&gt; float. À vous d'adapter l'exemple à d'autres types (généralement float -&gt; float). À vous également d'écrire le code de F. Il n'est pas très compliqué ;) .</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">
<span class="arrow"></span>
<span class="next">Manipulation de fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
<span class="next">Des exemples moins mathématiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Desexemplesmoinsmathmatiques"></a><h2>Des exemples moins mathématiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
<span class="arrow"></span>
<span class="next">Réalisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
<span class="next">Quelques règles fonctionnelles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-exemples-moins-mathematiques" data-claire-element-id="628360">Des exemples moins mathématiques</h4><p id="r-628344" data-claire-element-id="628344">Oui, abandonnons les maths, place à l'informatique. Découvrons ici une fonction qui nous sera bien plus utile dans nos programmes. Comme je l'ai dit en introduction, bien souvent on veut traiter d'une même façon un grand nombre de cas donnés, tous regroupés dans une liste. Par exemple, on veut multiplier tous les nombres d'une liste par deux, ou envoyer un message privé à tous les Zéros dont c'est l'anniversaire, ou regarder sur tous les sites enregistrés en favori s'il y a des news (automatiquement, je veux dire - comme le font les clients RSS).</p><p id="r-628345" data-claire-element-id="628345">On va donc construire une fonction qui fait ça pour nous : on lui passera en premier argument une autre fonction qui sait traiter un seul élément, et en deuxième argument la liste à traiter. Et notre fonction se chargera d'appeler l'autre fonction en lui donnant à chaque fois un élément de la liste, en échange de quoi elle construira la liste en stockant les résultats à chaque fois. En fait, cette fonction F est telle que</p><pre id="r-628346" data-claire-element-id="628346"><code>F f [a1; a2; a3...] = [f a1; f a2; f a3...]</code></pre><p id="r-628347" data-claire-element-id="628347">Nous allons donc construire une liste à partir d'une autre : le cas de base sera bien sûr celui de la liste vide, quand il ne reste rien à faire. On renverra alors pour ce cas la liste vide également, car ça sera la fin de la liste que l'on cherche à construire. Si la liste passée en argument est non-vide, alors on traite la tête avec la fonction passée en argument, et on peut construire la liste retour, avec en queue le traitement du reste de la liste... C'est bien sûr ici que se trouve notre appel récursif.</p><pre id="r-628348" data-claire-element-id="628348"><code data-claire-semantic="ocaml">let rec map f l = match l with 
  | [] -&gt; []
  | x :: xs -&gt; f x :: map f xs;;</code></pre><p id="r-628349" data-claire-element-id="628349">Cette fonction est traditionnellement appelée map. Elle s'appelle d'ailleurs ainsi dans la bibliothèque standard d'OCaml : vous la trouverez sous le nom de List.map (map rangée dans le module List). Vous avec donc maintenant entre les mains une fonction très puissante, capable d'appliquer n'importe quelle fonction à toute une liste. Voici un petit exemple utilisant notre fonction map :</p><pre id="r-628350" data-claire-element-id="628350"><code data-claire-semantic="console"># let multiplie_3 x = 3 * x;;
val multiplie_3 : int -&gt; int = &lt;fun&gt;
# map multiplie_3 [2; 4; 6];;
- : int list = [6; 12; 18]</code></pre><p id="r-628351" data-claire-element-id="628351">Ne nous arrêtons pas en si bon chemin. Je vous ai promis une fonction capable de filtrer les listes et de ne retenir que les éléments vérifiant une certaine propriété (par exemple &quot;De toute la liste de Zéros, je veux extraire la liste des Zéros dont c'est l'anniversaire aujourd'hui&quot;). Cette fonction s'appelle filter (elle est également rangée dans List.filter), et elle prend en argument une fonction renvoyant un booléen, ainsi qu'une liste, qui sera filtrée à l'aide de la fonction. Voici son code, que vous êtes normalement en mesure de comprendre :</p><pre id="r-628352" data-claire-element-id="628352"><code data-claire-semantic="ocaml">let rec filter p l = match l with
  |  [] -&gt; []
  | x :: xs -&gt; let queue = filter p xs in 
      if (p x) then x::queue 
      else queue;;</code></pre><p id="r-628353" data-claire-element-id="628353">Notez au passage l'utilisation d'une variable locale <code>queue</code> pour éviter de devoir dupliquer le code <code data-claire-semantic="ocaml">filter p xs </code>. Voici un petit exemple. La fonction de test (nommée &quot;majeur&quot;) a bien ici pour résultat un booléen.</p><pre id="r-628354" data-claire-element-id="628354"><code data-claire-semantic="console"># let ages = [12; 15; 19; 21; 3; 42];;
val ages : int list = [12; 15; 19; 21; 3; 42]
# let majeur x = (x &gt;= 18);;
val majeur : int -&gt; bool = &lt;fun&gt;
# filter majeur ages;;
- : int list = [19; 21; 42]</code></pre><p id="r-628355" data-claire-element-id="628355">Enfin, à titre d'exercice, vous devriez essayer de coder une fonction <code>dropwhile</code>. Cette fonction ressemble à filter, car elle prend également en argument une fonction de test renvoyant un booléen et une liste, cependant elle jette tous les éléments de la liste qui vérifient la propriété <strong>jusqu'au premier ne la vérifiant pas</strong> (non inclus). Par exemple</p><pre id="r-628356" data-claire-element-id="628356"><code data-claire-semantic="console"># dropwhile majeur ages;;
- : int list = [12; 15; 19; 21; 3; 42]
# dropwhile majeur [19; 21; 16; 42];;
- : int list = [16; 42]</code></pre><p id="r-628357" data-claire-element-id="628357">Dans le premier cas, les premiers éléments ne vérifient pas la condition, donc toute la liste est gardée. Mais dans le second cas, les deux premiers éléments sont retirés, car ils vérifient la condition. En revanche, 42 vient après 16, et est gardé. La fonction dropwhile a le type suivant : <code data-claire-semantic="ocaml">('a -&gt; bool) -&gt; 'a list -&gt; 'a list = &lt;fun&gt; </code>.</p><aside id="r-628359" data-claire-element-id="628359" data-claire-semantic="information"><p id="r-628358" data-claire-element-id="628358">Un petit mot au sujet de ces 'a ou 'b que vous avez sûrement vu dans le type de certaines fonctions ou expressions : ils signifient en gros que tous les types sont acceptés, tant qu'on reste cohérent, c'est à dire que tous les 'a sont remplacés par le même type (tous en int ou en float par exemple). Ainsi, une fonction qui prend en argument une liste d'éléments quelconques et qui renvoie la même liste, mais inversée, a comme signature <code data-claire-semantic="ocaml">'a list -&gt; 'a list </code>. Mais elle ne va pas, si vous lui donnez une liste d'entiers, vous renvoyer une liste de décimaux !</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
<span class="arrow"></span>
<span class="next">Réalisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
<span class="next">Quelques règles fonctionnelles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quelquesrglesfonctionnelles"></a><h2>Quelques règles fonctionnelles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
<span class="arrow"></span>
<span class="next">Des exemples moins mathématiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">
<span class="next">Des fonctions à gogo</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-regles-fonctionnelles" data-claire-element-id="628374">Quelques règles fonctionnelles</h4><h5 id="r-la-curryfication" data-claire-element-id="628366">La curryfication</h5><p id="r-628361" data-claire-element-id="628361">Revenons maintenant sur une caractéristique d'OCaml bien pratique, qui nous permet une grande flexibilité dans l'utilisation de nos fonctions : la curryfication (du nom du mathématicien <a href="http://fr.wikipedia.org/wiki/Haskell_Curry">Haskell Curry</a>). Comme je l'ai déjà un peu mentionné dans le premier chapitre, en OCaml les fonctions de plusieurs arguments sont en fait décomposables en plusieurs fonctions unaires (c'est à dire qui ne prennent qu'un seul argument).</p><p id="r-628362" data-claire-element-id="628362">Ainsi la fonction map est en fait décomposable en une fonction qui prend en argument une fonction, et renvoie une autre fonction qui elle prend une liste et renvoie une autre liste :p ! Nous pouvons donc fixer une fonction f particulière et utiliser alors la fonction produite sur autant de listes que nous voulons... Un petit exemple détaillé ne serait pas de refus je pense :</p><pre id="r-628363" data-claire-element-id="628363"><code data-claire-semantic="console"># let multiplie a x = a*x;;
val multiplie : int -&gt; int -&gt; int = &lt;fun&gt;
# let fois_2 x = multiplie 2 x;;
val fois_2 : int -&gt; int = &lt;fun&gt;</code></pre><p id="r-628364" data-claire-element-id="628364">Ici nous avons créé une fonction chargée de multiplier un entier passé en argument par 2 - en utilisant déjà la curryfication ! Nous verrons dès le chapitre suivant qu'il y a encore plus court et plus simple, mais pour le moment revenons à notre sujet. Nous pouvons alors réaliser ce que l'on appelle une fermeture avec map : on va &quot;fermer&quot; le premier argument de map, en le fixant à fois_2 . Il nous restera donc une fonction qui prend en argument une liste d'entiers, et retourne la liste des doubles. Enfin, on peut utiliser cette fonction à notre guise sur les listes de notre choix.</p><pre id="r-628365" data-claire-element-id="628365"><code data-claire-semantic="console"># let tous_fois_2 liste = map fois_2 liste ;;
val tous_fois_2 : int list -&gt; int list = &lt;fun&gt;
# tous_fois_2 [1; 2; 3] ;;
- : int list = [2; 4; 6]</code></pre><h5 id="r-applications-partielles" data-claire-element-id="628373">Applications partielles</h5><p id="r-628367" data-claire-element-id="628367">Comme nous l'avons déjà beaucoup répété, il est possible d'appliquer partiellement une fonction à ses arguments, pour en fait générer une autre fonction qui prendra un ou plusieurs arguments en moins. Il suffit pour cela d'écrire le nom de la fonction, suivi des arguments (dans l'ordre) que l'on souhaite fermer.</p><p id="r-628368" data-claire-element-id="628368">En d'autres termes, pas la peine de réécrire les arguments que l'on laisse indéterminés : la fonction générée attend gentiment qu'on les lui passe. Voici donc les deux définitions que nous pouvons écrire en tenant compte de cette règle (ce que nous ferons à l'avenir) :</p><pre id="r-628369" data-claire-element-id="628369"><code data-claire-semantic="ocaml">let fois_2 = multiplie 2
let tous_fois_2 = map fois_2</code></pre><p id="r-628370" data-claire-element-id="628370">C'est quand même plus lisible...</p><p id="r-628371" data-claire-element-id="628371">En fait, même si tout ce chapitre passe pour n'être qu'un détail théorique, les concepts abordés sont plutôt importants. Ils nous aident à écrire un code généralisable, c'est à dire que plus tard, nous serons capables d'écrire des fonctions générales traitant des cas... généraux, et d'affiner après selon nos besoins. Ainsi, nous écrirons un code plus facile à maintenir : imaginez en effet que vous développiez un jeu vidéo. Vous avez une fonction <code>deplacement</code> qui gère les déplacements des différents personnages selon leurs caractéristiques, et des fonctions <code>deplacement_alien</code>, <code>deplacement_humain</code>... qui sont en fait des cas particuliers de la première fonction (qu'on appelle en fixant les caractéristiques des personnages).</p><p id="r-628372" data-claire-element-id="628372">Au final, vous écrivez moins de code que si vous écriviez deux fonctions deplacement_alien et deplacement_humain totalement tséparées. Et mieux : si vous changez les règles, vous avez une seule fonction à modifier, et pas deux. Ce principe n'est sans doute pas toujours appliquable, mais essayez toujours de traiter des cas généraux, et d'affiner après. On dit souvent que qui peut le plus peut le moins !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
<span class="arrow"></span>
<span class="next">Des exemples moins mathématiques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">
<span class="next">Des fonctions à gogo</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Desfonctionsgogo"></a><h2>Des fonctions à gogo</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
<span class="arrow"></span>
<span class="next">Quelques règles fonctionnelles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
<span class="next">Utiliser les opérateurs comme des fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-628376" data-claire-element-id="628376">Dans le chapitre précédent, nous avons vu que OCaml donnait une grande place à la manipulation de fonctions, permettant de les composer, de les passer en argument à des fonctions plus générales qui se chargent de les appliquer à tous les éléments contenus dans une structure de données… Nous allons voir ici deux moyens pratiques de générer des fonctions facilement, pour pouvoir réutiliser celles-ci avec <code>map</code> ou <code>filter</code>.</p>
</div><a name="Utiliserlesoprateurscommedesfonctions"></a><h2>Utiliser les opérateurs comme des fonctions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">
<span class="arrow"></span>
<span class="next">Des fonctions à gogo</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
<span class="next">Définir ses opérateurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utiliser-les-operateurs-comme-des-fonctions" data-claire-element-id="628384">Utiliser les opérateurs comme des fonctions</h4><p id="r-628377" data-claire-element-id="628377">La première est l'utilisation fonctionnelle des opérateurs. Jusqu'à maintenant,nous avons utilisé différents opérateurs, comme +, *, =, &lt;… sans jamais nous intéresser réellement à leur nature. Hé bien je vous le dis : ce sont en fait des fonctions particulières, et nous pouvons les forcer à révéler leur vraie nature en les entourant de parenthèses comme dans <code>( + )</code>, <code>( &lt; )</code>… Notez que nous ne sommes pas obligés de laisser un espace autour de tous les opérateurs ; en fait, c'est seulement le cas pour <code>( * )</code>, qui ne doit pas être confondu avec l'ouverture d'un commentaire <code>(*</code>…</p><p id="r-628378" data-claire-element-id="628378">Nous pouvons naturellement utiliser ces fonctions en tant que telles, par exemple</p><pre id="r-628379" data-claire-element-id="628379"><code data-claire-semantic="console"># ( + ) 3 5;;
- : int = 8
# ( &lt; ) 2 12;;
- : bool = true</code></pre><p id="r-628380" data-claire-element-id="628380">Mais, et c'est encore mieux, ces fonctions sont également curryfiables, et nous pouvons par exemple écrire <code data-claire-semantic="ocaml">let succ x = ( + ) 1 x </code> voire <code data-claire-semantic="ocaml">let succ = ( + ) 1 </code>. Nous voilà alors avec une fonction <code data-claire-semantic="ocaml">int -&gt; int </code> qui ajoute 1 à l'entier qu'on lui donne. On pourrait alors l'utiliser directement avec d'autres fonctions, comme <code>map</code> par exemple… Mais on peut aussi ne même pas passer par une déclaration de fonction, comme dans les deux exemples qui suivent :</p><pre id="r-628381" data-claire-element-id="628381"><code data-claire-semantic="ocaml"># map (( + ) 1) [3;4;5];;
- : int list = [4; 5; 6]
# filter (( &lt; ) 18) [12; 56; 32; 3; 45];;
- : int list = [56; 32; 45]</code></pre><p id="r-628382" data-claire-element-id="628382">Bref, nous écrivons vraiment peu de code, en comparaison de ce que nous écrivions avant. Mais notre code n'est pas pour autant incompréhensible, il est juste un peu condensé - nous n'écrivons que ce qui importe. On sait que map va se charger de modifier tous les éléments de la liste, en leur ajoutant 1 à chaque fois. Nous ne disons pas <em>comment</em> faire ce que nous voulons, mais nous exprimons directement <em>ce que c'est</em>.</p><p id="r-628383" data-claire-element-id="628383">L'utilisation de fonctions de haut niveau comme map ou filter donne donc plus de sens à notre code : on dit que OCaml est un langage fonctionnel.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">
<span class="arrow"></span>
<span class="next">Des fonctions à gogo</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
<span class="next">Définir ses opérateurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Dfinirsesoprateurs"></a><h2>Définir ses opérateurs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
<span class="arrow"></span>
<span class="next">Utiliser les opérateurs comme des fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
<span class="next">Les fonctions anonymes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-definir-ses-operateurs" data-claire-element-id="628400">Définir ses opérateurs</h4><p id="r-628385" data-claire-element-id="628385">Peut-être que certains d'entre vous l'auront déjà deviné : Ocaml nous laisse aussi définir nos propres opérateurs. Pour cela, il faut le définir comme une fonction, en l'entourant de parenthèses. Par exemple :</p><pre id="r-628386" data-claire-element-id="628386"><code data-claire-semantic="ocaml">let rec (!) a = 
    if a = 0 then 1 
    else a * (! (a-1)) ;;</code></pre><p id="r-628387" data-claire-element-id="628387">Voilà qui nous rapproche légèrement de la notation mathématiques, sauf que notre ! sera placé avant le nombre dont on souhaite obtenir la factorielle. Dommage.</p><p id="r-628388" data-claire-element-id="628388">En réalité, même si cela semble n'être ici qu'un gadget, vous ferez peut-être un jour un programme utilisant abondamment des opérations géométriques (un jeu vidéo par exemple). Et à ce moment là, je suis certain que vous serez content de pouvoir utiliser vos propres opérateurs plutôt que de tout le temps faire appel à des fonctions aux noms compliqués.</p><p id="r-628389" data-claire-element-id="628389">Cela nous donne également la possibilité de n'utiliser des opérateurs dans des fonctions sans a priori savoir quel type de données nous allons manipuler. En effet, supposons que nous voulions, à partir d'une liste l1 et l2, créer une liste l3 dont les éléments seront le produit des éléments de l1 et l2, deux à deux ?</p><pre id="r-628390" data-claire-element-id="628390"><code>Si l1 = [a1; a2; a3; a4]
et l2 = [b1; b2; b3; b4]
alors on veut [a1*b1; a2*b2; a3*b3; a4*b4]</code></pre><p id="r-628391" data-claire-element-id="628391">Nous appellerons cette fonction <code>zip_with</code>, et c'est une fonction un petit peu plus compliquée que d'habitude, car elle possède deux cas de base : quand l'une ou l'autre des listes est vide ! Nous renverrons alors la liste vide, car nous ne pouvons pas multiplier les éléments d'une des listes avec rien de l'autre côté...</p><p id="r-628392" data-claire-element-id="628392">Le reste du temps, notre fonction construit une liste comme nous savons déjà le faire, en combinant deux éléments à chaque fois. Le problème est que nous voulons pouvoir utiliser cette fonction avec des listes d'entiers ou de flottants, sans la redéfinir. Comment faire ?</p><p id="r-628393" data-claire-element-id="628393">Nous notons <code>( * )</code> le premier paramètre, ce qui laisse à l'utilisateur de la fonction la possibilité de passer une fonction en paramètre. À l'intérieur de notre définition, nous pouvons utiliser le symbole * indifféremment du type que nous manipulons - comme si on utilisait des entiers.</p><p id="r-628394" data-claire-element-id="628394">Pour gérer le cas de base, nous passons simplement par deux <code>match with</code> imbriqués. Oui, nous en avons le droit !</p><pre id="r-628395" data-claire-element-id="628395"><code data-claire-semantic="ocaml">let rec zip_with ( * ) l1 l2 = match l1 with
  | [] -&gt; []
  | x :: xs -&gt; match l2 with
    | [] -&gt; []
    | y :: ys -&gt; x*y :: zip_with ( * ) xs ys</code></pre><p id="r-628396" data-claire-element-id="628396">Maintenant, pour utiliser notre fonction, il suffit de lui passer le produit adapté. Mais il y a mieux : zip_with est parfaitement adaptée pour recevoir d'autres fonctions qu'un produit. Par exemple, <code data-claire-semantic="ocaml">zip_with (+) [1; 2; 3] [3; 2; 1] </code> fonctionne à merveille. Ça n'est pas parce que nous avons utilisé l'opérateur <code>*</code> dans la déclaration de notre fonction que nous ne pouvons pas utiliser autre chose que des produits.</p><aside id="r-628398" data-claire-element-id="628398" data-claire-semantic="information"><p id="r-628397" data-claire-element-id="628397">La fonction zip_with s'appelle ainsi parce qu'elle fusionne deux listes élément par élément, à l'aide d'une autre fonction. On peut comparer les deux listes à une fermeture éclaire, un &quot;zip&quot;...</p></aside><p id="r-628399" data-claire-element-id="628399">Notez que cette façon de faire vous permet également de passer des fonctions de comparaison à des fonctions de tri : pas besoin, par exemple, d'écrire une fonction qui trie une liste dans l'ordre croissant et une autre dans l'ordre décroissant. Vous choisissez à l'utilisation.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
<span class="arrow"></span>
<span class="next">Utiliser les opérateurs comme des fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
<span class="next">Les fonctions anonymes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesfonctionsanonymes"></a><h2>Les fonctions anonymes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
<span class="arrow"></span>
<span class="next">Définir ses opérateurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">
<span class="next">Pour plus de types</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-fonctions-anonymes-2" data-claire-element-id="628407">Les fonctions anonymes</h4><p id="r-628401" data-claire-element-id="628401">Parfois, nous aurons à utiliser des fonctions d'ordre supérieur avec d'autres fonctions que de simples opérateurs. Mais plutôt que de définir alors une fonction nommée à l'aide de let, nous pourrons utiliser une notation particulière, donnée par OCaml, qui ressemble comme deux gouttes d'eau à la notation mathématique des fonctions : la flèche <code>-&gt;</code>. En OCaml cependant on rajoute le mot <code>fun</code> pour &quot;fonction&quot; devant. L'expression est alors évaluée en une fonction dite &quot;anonyme&quot; (parce qu'elle a été crée sans nom), ou &quot;lambda&quot; (en référence à la théorie du lambda-calcul, sur laquelle est basée OCaml).</p><p id="r-628402" data-claire-element-id="628402">Les fonctions lambda sont naturellement moins pratiques que celles déclarées avec la forme let. Notamment, elles ne peuvent pas être récursives. Cependant elles peuvent être liées à un nom, comme n'importe quelle valeur :</p><pre id="r-628403" data-claire-element-id="628403"><code data-claire-semantic="ocaml">let carre = fun x -&gt; x*x</code></pre><p id="r-628404" data-claire-element-id="628404">Naturellement cet exemple ne présente pas d'intérêt. Nous n'utiliserons les fonctions anonymes que quand nous avons besoin de décrire l'opération à appliquer sur une liste avec une fonction d'ordre supérieur, par exemple.</p><p id="r-628405" data-claire-element-id="628405">Est-ce que ce chapitre n'est pas très agréable ? Vous avez maintenant tout le nécessaire pour programmer efficacement en utilisant <code>map</code> ou <code>filter</code>.</p><p id="r-628406" data-claire-element-id="628406">Trouvez quelque chose à programmer, et codez-le !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
<span class="arrow"></span>
<span class="next">Définir ses opérateurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">
<span class="next">Pour plus de types</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Pourplusdetypes"></a><h2>Pour plus de types</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
<span class="arrow"></span>
<span class="next">Les fonctions anonymes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
<span class="next">Les tuples</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-628409" data-claire-element-id="628409">Dans ce chapitre, nous allons apprendre à manipuler un nouveau type, qui permet de regrouper plusieurs valeurs dans des &quot;boîtes&quot;. L'intérêt ? Notamment, ce type nous permet de renvoyer plusieurs valeurs à la fois, stockées dans une seule de ces boîtes. On peut également s'en servir pour représenter des coordonnées de points en géométrie, ou pour numéroter tous les éléments d'une liste, etc.</p><p id="r-628410" data-claire-element-id="628410">Dans la suite, je reviendrai sur l'importance du typage en OCaml. Enfin, nous commencerons à parler de la création de types, qui permet d'écrire des programmes plus lisibles, avec des codes ayant plus de sens.</p>
</div><a name="Lestuples"></a><h2>Les tuples</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">
<span class="arrow"></span>
<span class="next">Pour plus de types</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
<span class="next">Le polymorphisme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-tuples-1" data-claire-element-id="628428">Les tuples</h4><p id="r-628411" data-claire-element-id="628411">Le nom est lâché : les boîtes dont je parlais en introduction s'appellent en fait des tuples (aussi appelés n-uplets). On les note en OCaml comme en mathématiques, à l'aide de parenthèses et de virgules : <code data-claire-semantic="ocaml">(1, 2)</code> est par exemple un tuple à deux éléments (en Français on parlerait plutôt de couple ou de doublet). Cependant on peut y stocker d'autres éléments que des nombres, par exemple des listes ou, pourquoi pas, d'autres tuples. Nous reviendrons sur le typage des tuples plus loin.</p><p id="r-628412" data-claire-element-id="628412">Dans de nombreux langages, la fonction <code data-claire-semantic="ocaml">zip_with</code> présentée au chapitre précédent n'existe pas. À la place, par exemple en Python, on trouve une fonction <code data-claire-semantic="ocaml">zip</code> telle que <code data-claire-semantic="ocaml">zip [a1; a2; a3] [b1; b2; b3] = [(a1, b1); (a2, b2); (a3, b3)]</code> : on réunit donc les deux listes en une seule, où les éléments sont regroupés deux à deux dans un tuple. Codez cette fonction <code data-claire-semantic="ocaml">zip</code> avec la fonction <code data-claire-semantic="ocaml">zip_with</code> ainsi qu'une fonction lambda.</p><h5 id="r-les-tuples-et-le-filtrage-de-motif" data-claire-element-id="628422">Les tuples et le filtrage de motif</h5><p id="r-628413" data-claire-element-id="628413">Pour former un tuple, nous n'avons qu'à lister les valeurs que nous souhaitons grouper, en les séparant de virgules, et à mettre le tout entre parenthèses. Mais pour lire des valeurs à l'intérieur d'un tuple, nous allons une fois de plus être confrontés au filtrage de motifs, comme on le faisait déjà avec les listes. Voici par exemple le code des fonctions <code data-claire-semantic="ocaml">fst</code> et <code data-claire-semantic="ocaml">snd</code>, prédéfinies en OCaml :</p><pre id="r-628414" data-claire-element-id="628414"><code data-claire-semantic="ocaml">let fst (x, y) = x
let snd (x, y) = y</code></pre><p id="r-628415" data-claire-element-id="628415">Notez que seules ces deux fonctions sont prédéfinies, et <em>qu'elles ne marchent que sur des couples</em>. Notez aussi un trait élégant de la forme <code data-claire-semantic="ocaml">let</code> : le filtrage de motif intervient directement dans la déclaration des arguments, on n'a pas à utiliser la forme <code data-claire-semantic="ocaml">match with</code> pour si peu. Quoi qu'il en soit, dans tous les autres cas vous devrez utiliser le filtrage de motifs pour pouvoir exploiter vos tuples.</p><p id="r-628416" data-claire-element-id="628416">Notez que le typage d'OCaml surveille la cohérence des tuples que nous pouvons récupérer : tous les tuples que nos fonctions peuvent recevoir sont de même taille. Contrairement aux listes, cependant, ils peuvent contenir de tout ; un même tuple peut par exemple contenir un nombre et un nom (alors que c'était interdit avec une liste), par exemple le pseudonyme d'un Zéro et son âge. Ici aussi, le système de typage veille : si une fonction attend en argument un tuple dont le premier élément est une chaîne, le type d'argument autorisé sera réduit aux tuples commençant par une chaîne.</p><p id="r-628417" data-claire-element-id="628417">Voici un exemple simple de filtrage, mais un peu moins simple qu'avant quand même :</p><pre id="r-628418" data-claire-element-id="628418"><code data-claire-semantic="ocaml"># let rec concat l1 l2 = match (l1, l2) with
    ([], []) -&gt; []
  | ([], l) -&gt; l
  | ((x :: s), l) -&gt; x :: concat s l ;;
val concat : 'a list -&gt; 'a list -&gt; 'a list = &lt;fun&gt;
# concat [1; 2] [3; 4] ;;
- : int list = [1; 2; 3; 4]</code></pre><p id="r-628419" data-claire-element-id="628419">Vous remarquerez que la construction d'un tuple, ici dans le motif à filter, se fait intuitivement. De même il est possible de récupérer un tuple comme retour d'une fonction de deux manières possibles :</p><pre id="r-628420" data-claire-element-id="628420"><code data-claire-semantic="ocaml"># let f a b = (a + b, b) ;;
val f : int -&gt; int -&gt; int * int = &lt;fun&gt;
# let a = f 2 3 ;;
val a : int * int = (5, 3)
# let (a, b) = f 2 3 ;;
val a : int = 5
val b : int = 3</code></pre><p id="r-628421" data-claire-element-id="628421">Notez que la seconde est plus expressive et permet de se passer de fonctions comme <code data-claire-semantic="ocaml">fst</code> ou <code data-claire-semantic="ocaml">snd</code>.</p><h5 id="r-type-4" data-claire-element-id="628427">Type</h5><p id="r-628423" data-claire-element-id="628423">Le type d'un couple (entier, entier) sera <code data-claire-semantic="ocaml">int * int</code>. On retrouve encore ici une similitude avec les mathématiques, où le couple (a, b) appartient à l'ensemble \set{N} imes \set{N} si a \in \set{N} et b \in \set{N}.</p><pre id="r-628424" data-claire-element-id="628424"><code data-claire-semantic="ocaml"># (&quot;coucou&quot;, 2.0) ;;
- : string * float = (&quot;coucou&quot;, 2.)
# ([], 'c') ;;
- : 'a list * char = ([], 'c')
# (([1], 2), fst) ;;
- : (int list * int) * ('a * 'b -&gt; 'a) = (([1], 2), &lt;fun&gt;)</code></pre><p id="r-628425" data-claire-element-id="628425">Les parenthèses sont facultatives, à condition de bien connaître la précédence de <code>,</code> :</p><pre id="r-628426" data-claire-element-id="628426"><code data-claire-semantic="ocaml"># 1, 2 :: [] ;;
- : int * int list = (1, [2])
# (1, 2) :: [] ;;
- : (int * int) list = [(1, 2)]</code></pre>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">
<span class="arrow"></span>
<span class="next">Pour plus de types</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
<span class="next">Le polymorphisme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lepolymorphisme"></a><h2>Le polymorphisme</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
<span class="arrow"></span>
<span class="next">Les tuples</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
<span class="next">Quelques remarques sur l&#039;utilité du système de typage en OCaml</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-polymorphisme-5" data-claire-element-id="628437">Le polymorphisme</h4><p id="r-628429" data-claire-element-id="628429">Voilà qui nous amène à parler d'un point important en OCaml. Plus besoin de le répéter : OCaml est un langage qui ne plaisante pas avec les types. Ça n'est pas une question de largeur d'esprit : le typage est quelque chose de fondamental dans un programme. Dans beaucoup de langages, de nombreuses erreurs sont souvent commises par les programmes à cause d'un manque de sûreté du typage. Considérant que, de même que la gestion de la mémoire, le typage est capital pour le bon déroulement du programme, OCaml préfère s'en charger lui-même plutôt que de le laisser aux mains du programmeur.</p><p id="r-628430" data-claire-element-id="628430">Mais savoir comment il procède en gros pour vérifier qu'un morceau de code est correct du point de vue du typage n'est pas inintéressant. Lorsque OCaml lit un bout de code, il cherche à en déterminer, en partant de ce qu'il connaît, quelles contraintes il doit poser sur le type de ce qu'il ne connaît pas. Par exemple, <code data-claire-semantic="ocaml">let f a b = a + b</code> est facile, car <code data-claire-semantic="ocaml">(+)</code> est connue pour être de type <code data-claire-semantic="ocaml">int -&gt; int -&gt; int</code>. <code data-claire-semantic="ocaml">a</code> et <code data-claire-semantic="ocaml">b</code> doivent donc être de type <code data-claire-semantic="ocaml">int</code>, ainsi que le sera le retour de <code data-claire-semantic="ocaml">f</code> (elle ne pourra donc pas être employée partout).</p><p id="r-628431" data-claire-element-id="628431">En revanche, <code data-claire-semantic="ocaml">List.hd</code>, que nous connaissons déjà, renvoie la tête d'une liste, mais c'est tout ce que l'on peut en dire. La liste doit être non-vide, soit, mais cette information n'apparaît pas explicitement dans le type. A priori, on peut donc utiliser la fonction <code data-claire-semantic="ocaml">List.hd</code> sur des listes de tous les types : <code data-claire-semantic="ocaml">int list</code>, <code data-claire-semantic="ocaml">float list</code>, <code data-claire-semantic="ocaml">int list list</code>... C'est ce que l'on appelle le polymorphisme.</p><p id="r-628432" data-claire-element-id="628432">Voici un exemple plus général encore : <code data-claire-semantic="ocaml">let id x = x</code> est la fonction identité. Elle est plus générale encore que <code data-claire-semantic="ocaml">List.hd</code>, car elle accepte n'importe quoi (pour le renvoyer à l'identique). Son type est noté <code data-claire-semantic="ocaml">'a -&gt; 'a</code> : il faut y lire &quot;n'importe quel type&quot;.</p><p id="r-628433" data-claire-element-id="628433">Lorsque OCaml rencontre une situation d'indétermination, c'est à dire de polymorphisme, il note le type à l'aide d'une lettre de l'alphabet précédée d'une apostrophe. Une fonction construisant un triplet, comme <code data-claire-semantic="ocaml">let triple a b c = (a, b, c)</code> sera de type <code data-claire-semantic="ocaml">'a -&gt; 'b -&gt; 'c -&gt; 'a * 'b * 'c</code> car les trois éléments ne sont pas forcément tous du même type, mais que le tuple créé contiendra les types donnés en argument. Notez qu'une application partielle peut ou non déterminer le type des arguments : <code data-claire-semantic="ocaml">filter ((&lt;) 5)</code> est de type <code data-claire-semantic="ocaml">int list -&gt; int list</code> à cause du 5. En revanche, <code data-claire-semantic="ocaml">triple 5</code> sera de type <code data-claire-semantic="ocaml">'a -&gt; 'b -&gt; int * 'a * 'b</code>.</p><p id="r-628434" data-claire-element-id="628434">Le programmeur a le droit de préciser lui-même le type d'une expression à l'aide des contraintes de type, notées grâce aux deux points : . Il suffit de faire suivre l'expression des deux points, et du type de contrainte :</p><pre id="r-628435" data-claire-element-id="628435"><code data-claire-semantic="ocaml">let id (x : int) = x    (* De type int -&gt; int *)
let x = ( [] : int list)
    in 3.2 :: x           (* Provoquera une erreur *)</code></pre><p id="r-628436" data-claire-element-id="628436">Mais ce système ne laisse cependant pas généraliser outre mesure les types. <code data-claire-semantic="ocaml">let add (x : 'a) (y : 'a) = a+b</code> reste de type <code data-claire-semantic="ocaml">int -&gt; int -&gt; int</code>.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
<span class="arrow"></span>
<span class="next">Les tuples</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
<span class="next">Quelques remarques sur l&#039;utilité du système de typage en OCaml</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quelquesremarquessurl039utilitdusystmedetypageenOCaml"></a><h2>Quelques remarques sur l&#039;utilité du système de typage en OCaml</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
<span class="arrow"></span>
<span class="next">Le polymorphisme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
<span class="next">Les types somme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml" data-claire-element-id="628452">Quelques remarques sur l'utilité du système de typage en OCaml</h4><p id="r-628438" data-claire-element-id="628438">Comme je l'ai déjà dit, le typage automatique établi par OCaml permet d'éliminer des erreurs qui ne pardonneraient pas. Cette vérificaton s'effectue à la compilation, et non à l'exécution, ce qui assure donc les performances.</p><p id="r-628439" data-claire-element-id="628439">Mais le mécanisme de typage d'OCaml par recherche de contraintes, dit par &quot;inférence de type&quot;, possède d'autres avantages : notamment, il est porteur de beaucoup d'informations.</p><p id="r-628440" data-claire-element-id="628440">Prenons par exemple la fonction <code data-claire-semantic="ocaml">List.hd</code>. J'ai dit plus haut que son type <code data-claire-semantic="ocaml">'a list -&gt; 'a</code> n'apportait aucune information au programmeur quant au fait que la liste passée en argument devait être non-vide. C'est pourtant implicite : si la fonction renvoie un élément de même type que ceux de la liste argument, il est probable que cet élément a été prélevé à la liste, non ?</p><p id="r-628441" data-claire-element-id="628441">Assez souvent, d'ailleurs, le nom d'une fonction et son type suffisent à la décrire, ou peu s'en faut. Par exemple, la fonction <code data-claire-semantic="ocaml">map</code> a pour type <code data-claire-semantic="ocaml">('a -&gt; 'b) -&gt; 'a list -&gt; 'b list</code>, ce qui est assez révélateur : elle décrit la transformation d'une liste, au moyen d'une fonction. Comme <code>map</code> ne connaît pas le type des données qu'elle va devoir traiter, il n'est pas possible qu'elle traite différemment une liste de <code>string</code>, une liste de <code>int</code>, etc.</p><p id="r-628442" data-claire-element-id="628442">Les types les plus généraux possibles sont donc donnés : <code>map</code> prend une fonction et une liste, et transforme chaque élément de cette liste à l'aide de la fonction. On peut donner un autre exemple : si je propose le type <code>('a -&gt; bool) -&gt; 'a list -&gt; bool</code>, et le nom <code>exists</code>, êtes-vous capables de déterminer ce que fait la fonction ?</p><p id="r-628443" data-claire-element-id="628443">Les types sont une partie très importante de notre programme. C'est à la fois :</p><ul id="r-628450" data-claire-element-id="628450"><li id="r-628445" data-claire-element-id="628445"><p id="r-628444" data-claire-element-id="628444">la première partie de notre programme que nous concevons (car il est nécessaire de savoir <em>sur quoi</em> nous travaillons avant de décrire <em>comment</em>)</p></li><li id="r-628447" data-claire-element-id="628447"><p id="r-628446" data-claire-element-id="628446">une information sur l'organisation de notre programme</p></li><li id="r-628449" data-claire-element-id="628449"><p id="r-628448" data-claire-element-id="628448">un plan assez condensé de ce que nous allons faire : si on définit un type, certaines des opérations que l'on implémentera dessus sont évidentes (par exemple, ajouter un élément à une liste, chercher des valeurs dedans, etc. sont des opérations naturelles que l'on a envie de faire avec une liste). Donc savoir quels types vous allez utiliser suffit parfois à savoir quel code vous allez écrire : les grandes lignes, au moins, sont évidentes.</p></li></ul><p id="r-628451" data-claire-element-id="628451">Le typage est donc un concept primordial. Il n'est pas nécessairement simple à comprendre, mais je vous conseille <a href="http://progmod.org/forum/sujet/236/typage-domaine-de-definition/">cette discussion sur le système de types d'OCaml</a> si vous voulez plus de renseignements. Enfin, une petite énigme : que pensez-vous du type de fonction <code>'a -&gt; 'b</code> ? Pouvez-vous trouver une fonction de ce type là avec les concepts que nous avons déjà vus ?</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
<span class="arrow"></span>
<span class="next">Le polymorphisme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
<span class="next">Les types somme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lestypessomme"></a><h2>Les types somme</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
<span class="arrow"></span>
<span class="next">Quelques remarques sur l&#039;utilité du système de typage en OCaml</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">
<span class="next">TP : Le type option</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-types-somme" data-claire-element-id="628492">Les types somme</h4><p id="r-628453" data-claire-element-id="628453">Les types somme permettent d'énumérer les valeurs que peuvent prendre nos variables. Plus précisément, c'est une union disjointe, car chaque constructeur apporte son propre ensemble, afin d'enrichir le type. Nous introduisons le mot-clé <code data-claire-semantic="ocaml">type</code> qui permet de créer de nouveaux types en OCaml.</p><pre id="r-628454" data-claire-element-id="628454"><code data-claire-semantic="ocaml">type foo = A | B</code></pre><p id="r-628455" data-claire-element-id="628455">Les variables de type <code>foo</code> pourront prendre les valeurs A ou B. A et B sont appelés des <strong>constructeurs de type</strong>. Les constructeurs de type doivent impérativement commencer par une majuscule.</p><pre id="r-628456" data-claire-element-id="628456"><code data-claire-semantic="ocaml"># let a = A ;;
val a : foo = A
# let a = C ;;
Error: Unbound constructor C</code></pre><p id="r-628457" data-claire-element-id="628457">Notons que A et B symbolisent les constructeurs possibles pour notre type ; dans ce cas, pensez à la similarité avec les <code data-claire-semantic="c">enum</code> de certains langages. Mais les types sommes sont beaucoup plus puissants ! Voici un autre exemple :</p><pre id="r-628458" data-claire-element-id="628458"><code data-claire-semantic="ocaml">type foo = A of int | B of string</code></pre><p id="r-628459" data-claire-element-id="628459">Ce type indique que si notre variable a été construite avec le constructeur A on peut lui donner, en plus, une valeur entière. Si en revanche elle a été construite avec B, on peut lui donner une valeur de type chaîne ! Exemples :</p><pre id="r-628460" data-claire-element-id="628460"><code data-claire-semantic="ocaml"># let a = A 3 ;;
val a : foo = A 3
# let b = B &quot;the game&quot; ;;
val b : foo = B &quot;the game&quot;
# let c = B 4 ;;
Error: This expression has type int but an expression was expected of type string</code></pre><p id="r-628461" data-claire-element-id="628461">Le typeur d'OCaml nous rappelle à l'ordre : il sait que le constructeur B attend une valeur de type string.</p><h5 id="r-filtrage-des-types-somme" data-claire-element-id="628464">Filtrage des types somme</h5><p id="r-628462" data-claire-element-id="628462">Les types somme se prêtent tout particulièrement bien au filtrage ! Souvenez-vous que d'une manière générale le filtrage permet d'énumérer les cas possible selon <strong>la valeur</strong> d'une variable. Dans le premier type somme que je vous ai montré un peu plus haut, on n'avait que deux valeurs possibles : A et B, elles sont donc énumérables dans un filtrage de motif :</p><pre id="r-628463" data-claire-element-id="628463"><code data-claire-semantic="ocaml"># type foo = A | B ;;
type foo = A | B

# let f a = match a with
    A -&gt; &quot;ananas&quot;
  | B -&gt; &quot;baobab&quot; ;;
val f : foo -&gt; string = &lt;fun&gt;

# f A ;;
- : string = &quot;ananas&quot;</code></pre><h5 id="r-tuples-et-recursivite" data-claire-element-id="628475">Tuples et récursivité</h5><p id="r-628465" data-claire-element-id="628465">Revenons un petit peu sur la construction <code data-claire-semantic="ocaml">A of int</code>. Ce qui suit le mot clé <code data-claire-semantic="ocaml">of</code> est un type, il peut donc être un produit. La syntaxe est la même que ce que vous retourne l'interpréteur OCaml lorsque que vous lui donnez un tuple :</p><pre id="r-628466" data-claire-element-id="628466"><code data-claire-semantic="ocaml"># type foo = A of int * int ;;
type foo = A of int * int

# let a = A 2, 3 ;;
Error: The constructor A expects 2 argument(s),
       but is applied here to 1 argument(s)</code></pre><p id="r-628467" data-claire-element-id="628467">Oups ! Petit problème de précédence on dirait :</p><pre id="r-628468" data-claire-element-id="628468"><code data-claire-semantic="ocaml"># let a = A (2, 3) ;;
val a : foo = A (2, 3)</code></pre><p id="r-628469" data-claire-element-id="628469">Notez que <code data-claire-semantic="ocaml">let a = A 2, 3</code> est tout à fait correct, mais n'a pas la même sémantique :</p><pre id="r-628470" data-claire-element-id="628470"><code data-claire-semantic="ocaml"># type foo = A of int | B ;;
type foo = A of int | B
# let a = A 2, 3 ;;
val a : foo * int = (A 2, 3)</code></pre><p id="r-628471" data-claire-element-id="628471">Un exemple pertinent d'utilisation des tuples dans les types somme est qu'ils permettent de définir des arbres en OCaml ! En y réfléchissant, un arbre c'est soit l'arbre vide, soit un nœud étiquetté par une valeur et qui contient un fils gauche et un fils droit.</p><pre id="r-628472" data-claire-element-id="628472"><code data-claire-semantic="ocaml"># type tree = Nil | Node of tree * int * tree ;;
type tree = Nil | Node of tree * int * tree
# let t = Node (Node (Nil, 4, Nil), 1, Node (Nil, 3, Nil)) ;;
val t : tree = Node (Node (Nil, 4, Nil), 1, Node (Nil, 3, Nil))</code></pre><p id="r-628473" data-claire-element-id="628473">Les types OCaml sont récursifs par défaut, contrairement aux fonctions ! Pas besoin du mot clé rec, je peux directement utiliser mon type dans mon type, donc.</p><p id="r-628474" data-claire-element-id="628474">Malheureusement, mon type d'arbre souffre d'un gros problème : j'ai été obligé de préciser le type des étiquettes (entier), celui-ci est donc figé et si je veux construire un arbre avec des flottants, je vais être obligé soit de créer un autre type d'arbre... soit d'utiliser le polymorphisme !</p><h5 id="r-polymorphisme-sur-les-types-somme" data-claire-element-id="628491">Polymorphisme sur les types somme</h5><p id="r-628476" data-claire-element-id="628476">Souvenez-vous des listes en OCaml. Codons par exemple la fonction qui retourne la tête d'une liste :</p><pre id="r-628477" data-claire-element-id="628477"><code data-claire-semantic="ocaml"># let h = function [] -&gt; failwith &quot;blbl&quot; | x :: s -&gt; x ;;
val h : 'a list -&gt; 'a = &lt;fun&gt;</code></pre><p id="r-628478" data-claire-element-id="628478">Notre fonction travaille sur des listes polymorphes, c'est-à-dire qu'on ne connait pas le type des éléments de notre liste, on sait juste que c'est une liste. OCaml précise bien que le type est polymorphe en le notant <code>'a</code>. On voudrait pouvoir faire la même chose avec nos types somme. Essayons de créer un type de liste :</p><pre id="r-628479" data-claire-element-id="628479"><code data-claire-semantic="ocaml">type maliste = Nil | Elem of int * maliste</code></pre><p id="r-628480" data-claire-element-id="628480">Une liste, c'est soit une liste vide, soit un élément suivi d'une liste. Le problème c'est le int, on voudrait que ce soit 'a. Remplacer bêtement int par 'a ne marchera pas. Pourquoi ? Car le type de notre liste serait toujours &quot;liste&quot;, mais celui-ci pourrait contenir des valeurs... de différents types ! Voyons voir avec un exemple, en reprenant notre fonction qui retourne la tête d'une liste, mais en ajoutant 1 à celle-ci :</p><pre id="r-628481" data-claire-element-id="628481"><code data-claire-semantic="ocaml"># type maliste = Nil | Elem of 'a * maliste ;;
???
# let h = function Nil -&gt; failwith &quot;blbl&quot; | Elem (x, s) -&gt; x + 1 ;;
val h : maliste -&gt; int = &lt;fun&gt;
# let l = Elem (&quot;coucou&quot;, Nil) ;;
val l : maliste = Elem (1, Nil)
# h l ;;
???</code></pre><p id="r-628482" data-claire-element-id="628482">Problem? Ici <code>l</code> est bien de type <code>maliste</code>, l'application <code>(h l)</code> est donc correctement typée, et d'après le type de <code>h</code>, devrait nous retourner un entier. Pourtant, on va se retrouver à additionner une chaîne avec un entier, et ça c'est pas correct !</p><p id="r-628483" data-claire-element-id="628483">Le problème réside dans le fait qu'il est nécessaire de paramétrer notre type ; de même que les listes d'entiers en OCaml sont de type <code>int list</code>, notre liste devrait être de type <code>int maliste</code> :</p><pre id="r-628484" data-claire-element-id="628484"><code data-claire-semantic="ocaml">type 'a maliste = Nil | Elem of 'a * 'a maliste</code></pre><p id="r-628485" data-claire-element-id="628485">Ici <code>'a</code> s'appelle le <strong>paramètre de type</strong>. Notre liste <code>maliste</code> est paramétrée par un type polymorphe <code>'a</code>. Voyons ce que nous donne l'interpréteur si on lui redonne notre code maintenant :</p><pre id="r-628486" data-claire-element-id="628486"><code data-claire-semantic="ocaml"># let h = function Nil -&gt; failwith &quot;blbl&quot; | Elem (x, s) -&gt; x + 1 ;;
val h : int maliste -&gt; int = &lt;fun&gt;
# let l = Elem (&quot;coucou&quot;, Nil) ;;
val l : string maliste = Elem (&quot;coucou&quot;, Nil)
# h l ;;
Error: This expression has type string maliste but an expression was expected of type int maliste</code></pre><p id="r-628487" data-claire-element-id="628487">Et cette fois-ci on obtient bien une erreur de typage à l'application de h à l. Ouf.</p><p id="r-628488" data-claire-element-id="628488">Je vous laisse en exercice la création d'un type d'arbres polymorphes, et en bonus, codez un la-profondeur-d'abord-recherche (plus connu sous le nom de <a href="http://fr.wikipedia.org/wiki/Algorithme_de_parcours_en_profondeur">DFS</a>).</p><p id="r-628489" data-claire-element-id="628489">Vous connaissez maintenant les rudiments fonctionnels du langage OCaml. Nous avons vu que c'était un langage qui s'appuyait sur le concept d'expression pour décrire des calculs, et que ces expressions devaient tout le temps avoir un type, même si celui-ci pouvait être déterminé automatiquement.</p><p id="r-628490" data-claire-element-id="628490">Mais pour construire des types plus complexes, nous avons encore des choses à apprendre !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
<span class="arrow"></span>
<span class="next">Quelques remarques sur l&#039;utilité du système de typage en OCaml</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">
<span class="next">TP : Le type option</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPLetypeoption"></a><h2>TP : Le type option</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
<span class="arrow"></span>
<span class="next">Les types somme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
<span class="next">Pourquoi le type option</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-628494" data-claire-element-id="628494">Nous allons étudier un type somme particulier, qui est bien connu des utilisateurs de langages fonctionnels, mais qui peinent à percer dans les langages plus industriels comme C# ou Java (bien que l'on y arrive progressivement). Pourtant, il est très pratique, et je pense que vous vous en rendrez compte si vous-même vous connaissez des langages non-fonctionnels.</p>
</div><a name="Pourquoiletypeoption"></a><h2>Pourquoi le type option</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">
<span class="arrow"></span>
<span class="next">TP : Le type option</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
<span class="next">Définition et utilisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pourquoi-le-type-option" data-claire-element-id="628499">Pourquoi le type option</h4><p id="r-628495" data-claire-element-id="628495">Le type option représente la possibilité, pour une fonction, de <em>ne pas avoir de résultat</em>. En d'autres termes, il sert à décrire des fonctions partielles, ou encore à signaler un échec (par exemple lorsque l'on cherche l'indice d'un élément <code>x</code> dans une liste, et que cette liste ne contient pas <code>x</code>).</p><p id="r-628496" data-claire-element-id="628496">Un autre exemple bien connu des écoliers : la division par zéro. Si vous écrivez une application de calcul, pour que celle-si soit stable, vous êtes obligé de faire un test sur les nombres entrés par l'utilisateur lorsque celui-ci tente de faire une division — nous avons vu que OCaml ne tolère pas la division par zéro.</p><p id="r-628497" data-claire-element-id="628497">Mais le type de la fonction de division est <code data-claire-semantic="ocaml">(/) : int -&gt; int -&gt; int</code>, c'est à dire « donne-moi deux <code data-claire-semantic="ocaml">int</code> et je te renvoie un <code data-claire-semantic="ocaml">int</code> ». Le type ne nous dit absolument pas que cette opération peut échouer si le deuxième argument est <code data-claire-semantic="ocaml">0</code>. Pourtant, si on s'imagine les types OCaml comme des ensembles (au sens mathématique), et les fonctions OCaml comme des fonctions mathématiques, on n'a pas vraiment envie de dire que <code data-claire-semantic="ocaml">(/)</code> est vraiment une opération de <code data-claire-semantic="ocaml">ℤ×ℤ -&gt; ℤ</code>.</p><p id="r-628498" data-claire-element-id="628498">La plupart des langages utilisent alors une <a href="http://www.siteduzero.com/tutoriel-3-565725-les-generiques.html#ss_part_8">valeur particulière</a>, <code data-claire-semantic="c">null</code>, qui est (quasiment) de tous les types à la fois. En quelque sorte, ils font « grossir » les types usuels, pour rajouter une nouvelle valeur dénotant l'absence de résultat. OCaml est beaucoup trop strict pour nous autoriser à faire une telle chose (et de toute façon cette approche pose certains problèmes). Mais les outils du précédent chapitre nous donnent une solution élégante !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">
<span class="arrow"></span>
<span class="next">TP : Le type option</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
<span class="next">Définition et utilisation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Dfinitionetutilisation"></a><h2>Définition et utilisation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
<span class="arrow"></span>
<span class="next">Pourquoi le type option</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
<span class="next">Des opérations supplémentaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-definition-et-utilisation" data-claire-element-id="628526">Définition et utilisation</h4><h5 id="r-option-sur-des-entiers" data-claire-element-id="628505">Option sur des entiers</h5><p id="r-628500" data-claire-element-id="628500">Nous voulons définir un type qui représente ou bien l'absence d'information, ou bien exactement une information. Commençons doucement, supposons que l'information en question est toujours entière. Le fait d'avoir deux possibilités exclusives nous conduit à l'utilisation d'un type somme :</p><pre id="r-628501" data-claire-element-id="628501"><code data-claire-semantic="ocaml">type int_option = 
 | Rien 
 | Un of int</code></pre><p id="r-628502" data-claire-element-id="628502">Normalement, rien ne vous surprend ici (sinon, je vous conseille de retourner lire <a href="http://www.siteduzero.com/tutoriel-3-113049-pour-plus-de-types.html#ss_part_4">le chapitre des types somme</a> !), et vous reconnaissez deux constructeurs — l'un d'arité nulle (il ne prend aucun argument), l'autre prenant un entier.</p><p id="r-628503" data-claire-element-id="628503">Une fois ce type défini, vous savez qu'il est possible de l'examiner avec un simple <code data-claire-semantic="ocaml">match…with</code>. On peut par exemple faire une fonction qui teste si son argument est <code data-claire-semantic="ocaml">Rien</code> ou pas :</p><pre id="r-628504" data-claire-element-id="628504"><code data-claire-semantic="ocaml">let est_rien x = match x with
  | Rien -&gt; true
  | Un _ -&gt; false</code></pre><h5 id="r-un-type-option-polymorphe" data-claire-element-id="628512">Un type option polymorphe</h5><p id="r-628506" data-claire-element-id="628506">Mais pourquoi se limiter à un type option défini sur les entiers seulement ? Au chapitre précédent, nous avons montré comment définir un type de listes polymorphes, qui permettait de faire, avec les mêmes constructeurs, des listes d'entiers, de flottants, ou d'autres choses encore.</p><p id="r-628507" data-claire-element-id="628507"><strong>Exercice :</strong> En vous inspirant de ce qui a été fait dans le chapitre précédent, définissez un type option polymorphe. Recodez ensuite la fonction <code data-claire-semantic="ocaml">est_rien</code>, et assurez-vous qu'elle a bien le type <code data-claire-semantic="ocaml">'a option -&gt; bool</code>.</p><p id="r-628508" data-claire-element-id="628508">Cependant, il est en réalité inutile de redéfinir systématiquement le type option. De même que celui des listes, il est prédéfini en OCaml, avec les constructeurs <code data-claire-semantic="ocaml">None</code> et <code data-claire-semantic="ocaml">Some</code> (qui attend une valeur). Pour vous en convaincre, vous pouvez essayer de les utiliser directement dans la ligne de commande OCaml :</p><pre id="r-628509" data-claire-element-id="628509"><code data-claire-semantic="console"># None;;
- : 'a option = None
# Some 3;;
- : int option = Some 3
# Some (Some &quot;salut&quot;);;
- : string option option = Some (Some &quot;salut&quot;)</code></pre><p id="r-628510" data-claire-element-id="628510">Mais il n'y a aucune magie là-dessous : <code data-claire-semantic="ocaml">option</code> est défini exactement comme vous l'avez fait.</p><p id="r-628511" data-claire-element-id="628511">Remarquez que ce type polymorphe fait exactement ce que nous voulions : il « décore » le type α que nous lui donnons (<code data-claire-semantic="ocaml">int</code>, <code data-claire-semantic="ocaml">string</code>, etc.) en faisant la distinction entre les vraies valeurs (portées par <code data-claire-semantic="ocaml">Some</code>) et l'absence de valeur (<code data-claire-semantic="ocaml">None</code>).</p><h5 id="r-des-fonctions-utilisant-option" data-claire-element-id="628525">Des fonctions utilisant option</h5><p id="r-628513" data-claire-element-id="628513">Nous pouvons maintenant utiliser le type option dans des vrais programmes, et profiter de l'information supplémentaire qu'il donne. Quelles fonctions pourrions-nous bien définir ?</p><h6 id="r-recherche-d-un-element" data-claire-element-id="628519">Recherche d'un élément</h6><p id="r-628514" data-claire-element-id="628514">Par exemple, la recherche d'un élément dans une liste. Nous allons faire une fonction récursive, qui, étant donné un prédicat <code data-claire-semantic="ocaml">p : a -&gt; bool</code> (pour un type <code data-claire-semantic="ocaml">a</code> donné) et une liste <code data-claire-semantic="ocaml">l</code>, parcours <code data-claire-semantic="ocaml">l</code> jusqu'à trouver un <code data-claire-semantic="ocaml">x</code> qui satisfait <code data-claire-semantic="ocaml">p</code> (et renvoie alors <code data-claire-semantic="ocaml">Some x</code>), ou jusqu'à la fin de la liste (et là on renvoie <code data-claire-semantic="ocaml">None</code>, car rien n'a été trouvé). Rien de bien difficile, si ?</p><pre id="r-628515" data-claire-element-id="628515"><code data-claire-semantic="ocaml">let rec find p l = match l with
    | [] -&gt; None
    | y::ys -&gt; 
      if p y then
        Some y 
      else 
        find p ys</code></pre><p id="r-628516" data-claire-element-id="628516">Exemple d'utilisation :</p><pre id="r-628517" data-claire-element-id="628517"><code data-claire-semantic="console"># let pair x = (x mod 2) = 0;;  (* Vrai si x est pair *)
val pair : int -&gt; bool = &lt;fun&gt;
# find pair [15; 3; 4; 55];;
- : int option = Some 4
# find pair [15; 3; 55];;
- : int option = None</code></pre><p id="r-628518" data-claire-element-id="628518">Cela paraît assez intuitif, à condition d'être habitué à la présence du <code data-claire-semantic="ocaml">Some</code>. On ne peut pourtant pas s'en passer : pourquoi ne peut-on pas renvoyer directement <code data-claire-semantic="ocaml">y</code>, quand on l'a trouvé ?</p><h6 id="r-deux-exemples-bien-connus" data-claire-element-id="628524">Deux exemples bien connus</h6><p id="r-628520" data-claire-element-id="628520">Nous connaissons déjà des exemples de fonctions partielles, qui renvoient des erreurs lorsque nous les appliquons aux mauvais arguments. Outre la division, déjà citée en introduction, mentionnons par exemple <code data-claire-semantic="ocaml">List.hd</code> (ou <code data-claire-semantic="ocaml">List.tl</code>), qui échoue(nt) sur la liste vide.</p><p id="r-628521" data-claire-element-id="628521">Nous pouvons traduire cet « échec » par un <code data-claire-semantic="ocaml">None</code>. Par exemple, dans le cas des listes :</p><pre id="r-628522" data-claire-element-id="628522"><code data-claire-semantic="ocaml">let hd l = match l with 
    | [] -&gt; None 
    | x::xs -&gt; Some x</code></pre><p id="r-628523" data-claire-element-id="628523"><strong>Exercice :</strong> Recodez <code data-claire-semantic="ocaml">tl</code>. Pouvez-vous prédire le type de son résultat sans le demander à OCaml ? Recodez également la division d'un entier par un autre, avec une fonction de type <code data-claire-semantic="ocaml">int -&gt; int -&gt; int option</code></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
<span class="arrow"></span>
<span class="next">Pourquoi le type option</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
<span class="next">Des opérations supplémentaires</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Desoprationssupplmentaires"></a><h2>Des opérations supplémentaires</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
<span class="arrow"></span>
<span class="next">Définition et utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
<span class="next">Un exemple : un mini-interpréteur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-des-operations-supplementaires" data-claire-element-id="628559">Des opérations supplémentaires</h4><p id="r-628527" data-claire-element-id="628527">Nous l'avons vu, le type option nous force à décorer nos types avec de nouveaux constructeurs — qui peuvent demander l'écriture de code supplémentaire (des <code data-claire-semantic="ocaml">match…with</code>), ce qui est un peu rébarbatif.</p><p id="r-628528" data-claire-element-id="628528">Nous allons nous munir d'opérations supplémentaires qui rendent plus simple la manipulation de ces données.</p><h5 id="r-transformer-un-type-option" data-claire-element-id="628540">Transformer un type option</h5><p id="r-628529" data-claire-element-id="628529">On peut voir le type option comme une boîte contenant nos données, et portant des informations supplémentaires. La boîte nous dit s'il est pertinent ou non d'essayer d'extraire ces données, mais elle ne change pas les données elles-mêmes. Si ces données sont de type <code data-claire-semantic="ocaml">t1</code>, alors nous manipulons des boîtes de type <code data-claire-semantic="ocaml">t1 option</code>.</p><h6 id="r-une-operation-naturelle" data-claire-element-id="628534">Une opération naturelle</h6><p id="r-628530" data-claire-element-id="628530">Cependant, nos fonctions habituelles (de type <code data-claire-semantic="ocaml">t1 -&gt; t2</code>) ne peuvent pas s'appliquer directement à <code data-claire-semantic="ocaml">t1 option</code>. Nous voudrions donc définir une opération générale qui, à partir d'une fonction <code data-claire-semantic="ocaml">f : t1 -&gt; t2</code>, permet d'obtenir une fonction de type <code data-claire-semantic="ocaml">t1 option -&gt; t2 option</code> (nous voulons que les données restent dans une boîte).</p><p id="r-628531" data-claire-element-id="628531">Remplacez un moment le type <code data-claire-semantic="ocaml">option</code> par <code data-claire-semantic="ocaml">list</code> : cela revient exactement à coder la fonction <code data-claire-semantic="ocaml">List.map</code> (qui, elle, agit sur les listes) ! Dans le cas général, <code data-claire-semantic="ocaml">t1</code> et <code data-claire-semantic="ocaml">t2</code> sont inconnus. Notre fonction devrait donc avoir le type <code data-claire-semantic="ocaml">('a -&gt; 'b) -&gt; ('a option -&gt; 'b option)</code>, ce qui est équivalent à <code data-claire-semantic="ocaml">('a -&gt; 'b) -&gt; 'a option -&gt; 'b option</code> (une fonction à un argument renvoyant une fonction à un argument, c'est pareil qu'une fonction à deux arguments, selon le principe de curryfication).</p><p id="r-628532" data-claire-element-id="628532"><strong>Exercice :</strong> Complétez le code suivant, et assurez-vous d'obtenir le bon type :</p><pre id="r-628533" data-claire-element-id="628533"><code data-claire-semantic="ocaml">let map f x = match x with
    | None -&gt; …
    | Some y -&gt; …</code></pre><h6 id="r-une-petite-reflexion-sur-les-types" data-claire-element-id="628539">Une petite réflexion sur les types</h6><p id="r-628535" data-claire-element-id="628535">Puisque l'écriture de programmes correctement typés est l'une de nos préoccupations principales (pour notre plus grand plaisir !), penchons-nous une nouvelle fois sur le rapport entre le type de la fonction <code data-claire-semantic="ocaml">map</code> précédente, et la façon dont nous l'avons définie. C'est un peu théorique — n'hésitez pas à laisser de côté cette partie pour l'instant, et à y revenir plus tard.</p><p id="r-628536" data-claire-element-id="628536">Lorsque vous avez complété le code de l'exercice précédent, vous n'avez pas eu beaucoup d'options (haha) différentes pour compléter les deux branches du <code data-claire-semantic="ocaml">match… with</code>. Notamment, au constructeur <code data-claire-semantic="ocaml">None</code>, vous étiez obligé de faire correspondre le même constructeur, sans opération superflue.</p><p id="r-628537" data-claire-element-id="628537">Pourquoi ? Parce que toute fonction ou valeur particulière que vous auriez voulu utiliser aurait modifié le type de retour de notre fonction <code data-claire-semantic="ocaml">map</code>. En gros, il est impossible de transformer un <code data-claire-semantic="ocaml">None</code> en <code data-claire-semantic="ocaml">Some truc</code> pour un <code>truc</code> particulier, car ce <code>truc</code> aurait forcément un type déterminé, et on aurait alors changé le type de <code data-claire-semantic="ocaml">map</code>.</p><p id="r-628538" data-claire-element-id="628538">Ici encore, le type de notre opération nous donne plus d'informations que ce à quoi l'on s'attendait. Parce qu'elle est de type <code data-claire-semantic="ocaml">('a -&gt; 'b) -&gt; 'a option -&gt; 'b option</code>, on sait qu'elle est suffisamment générale pour ne pas agir sur les données elles-mêmes, mais seulement sur leur emballage. En outre, on sait qu'un <code data-claire-semantic="ocaml">None</code> ne peut être envoyé que sur un <code data-claire-semantic="ocaml">None</code> — parce qu'il est impossible de générer une valeur qui soit compatible avec tous les types, c'est-à-dire de type <code data-claire-semantic="ocaml">'b</code> elle-même (pour tout <code data-claire-semantic="ocaml">'b</code>).</p><h5 id="r-composition-de-fonctions-partielles" data-claire-element-id="628558">Composition de fonctions partielles</h5><p id="r-628541" data-claire-element-id="628541">Nous allons maintenant nous donner un moyen de séquencer plusieurs opérations partielles, c'est à dire de les calculer les unes après les autres de façon à préserver un certain sens : si nous comprenons le type <code data-claire-semantic="ocaml">option</code> comme le type des calculs pouvant générer une erreur, alors il faudra veiller à propager cette erreur.</p><h6 id="r-injection" data-claire-element-id="628547">Injection</h6><p id="r-628542" data-claire-element-id="628542">Une opération simple, quand nous avons une donnée <code data-claire-semantic="ocaml">x</code> d'un certain type, est l'injection de cette donnée dans un type option. Après tout, il suffit de la passer au constructeur <code data-claire-semantic="ocaml">Some</code>. En général, les fonctions de ce genre sont appelées <code data-claire-semantic="ocaml">return</code>. Si vous connaissez C ou Java, ces fonctions sont sans rapport avec l'instruction <code data-claire-semantic="c">return</code> des langages de programmation impératifs.</p><p id="r-628543" data-claire-element-id="628543">Posons dès à présent la fonction de type <code data-claire-semantic="ocaml">'a -&gt; 'a option</code> suivante :</p><pre id="r-628544" data-claire-element-id="628544"><code data-claire-semantic="ocaml">let return x = Some x</code></pre><p id="r-628545" data-claire-element-id="628545">De même, on peut définir la valeur suivante, qui pourra être modifiée par la suite :</p><pre id="r-628546" data-claire-element-id="628546"><code data-claire-semantic="ocaml">let fail = None</code></pre><h6 id="r-operateur-de-composition" data-claire-element-id="628557">Opérateur de composition</h6><p id="r-628548" data-claire-element-id="628548">Nous voulons définir un opérateur de composition entre nos différents calculs. Nous supposons que ceux-ci peuvent soit réussir, et retourner un résultat, soit échouer. Naturellement, un certain calcul peut aussi profiter du résultat de son ou ses prédécesseurs. Notre opérateur va donc récupérer un résultat (placé dans un type <code data-claire-semantic="ocaml">option</code>), et l'envoyer sur une fonction réalisant un calcul à partir de ce résultat — pour renvoyer le résultat du deuxième calcul.</p><p id="r-628549" data-claire-element-id="628549">Ajoutons une toute petite contrainte : nous voulons qu'il soit facile d'utiliser la fonction <code data-claire-semantic="ocaml">return</code> avec cet opérateur. D'ailleurs, <code data-claire-semantic="ocaml">return</code> dénote elle aussi un calcul : celui qui renvoie sa donnée telle quelle.</p><p id="r-628550" data-claire-element-id="628550">L'usage est de noter <code data-claire-semantic="ocaml">&gt;&gt;=</code> cet opérateur, et de l'appeler « <em>bind</em> » (« lier » en anglais). Son type est <code data-claire-semantic="ocaml">( &gt;&gt;= ) : 'a option -&gt; ('a -&gt; 'b option) -&gt; 'b option&lt;/code&gt;. Cela ressemble assez à notre fonction &lt;minicode type=&quot;ocaml&quot;&gt;map</code>, quand on y pense.</p><p id="r-628551" data-claire-element-id="628551"><strong>Exercice :</strong> Codez l'opérateur <code data-claire-semantic="ocaml">&gt;&gt;=</code>. Pour définir un opérateur plutôt qu'une fonction, il faut entourer son nom de parenthèses. Ici, la définition commence par <code data-claire-semantic="ocaml">let (&gt;&gt;=) x f =</code>.</p><p id="r-628552" data-claire-element-id="628552">On a par exemple</p><pre id="r-628553" data-claire-element-id="628553"><code data-claire-semantic="console"># Some 0 &gt;&gt;= fun x -&gt; return (x + 1);;
- : int option = Some 1</code></pre><p id="r-628554" data-claire-element-id="628554">ou encore</p><pre id="r-628555" data-claire-element-id="628555"><code data-claire-semantic="console"># Some 12 
  &gt;&gt;= fun x -&gt; Some 5 
  &gt;&gt;= fun y -&gt; return (x + y);;
- : int option = Some 17</code></pre><p id="r-628556" data-claire-element-id="628556">Bien que ce code semble pour l'instant inutilement complexe, il est important que vous le compreniez.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
<span class="arrow"></span>
<span class="next">Définition et utilisation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
<span class="next">Un exemple : un mini-interpréteur</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Unexempleunmini-interprteur"></a><h2>Un exemple : un mini-interpréteur</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
<span class="arrow"></span>
<span class="next">Des opérations supplémentaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
<span class="next">Le mot de la fin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-un-exemple-un-mini-interpreteur" data-claire-element-id="628594">Un exemple : un mini-interpréteur</h4><p id="r-628560" data-claire-element-id="628560">Nous allons illustrer les fonctions précédentes au moyen d'un petit interpréteur pour un langage très simple, capable de faire des opérations arithmétiques sur des entiers. C'est pas la joie, c'est sûr, mais c'est un début ! En réalité, nous n'allons même pas décrire la façon d'analyser un code source pour le transformer en programme, mais partir d'une expression OCaml toute faite. Cette partie (appelée « analyse syntaxique ») ne nous intéresse pas ici, et demanderait trop de temps pour être détaillée. Si cela vous intéresse, vous pourrez toujours lire <a href="http://www.siteduzero.com/tutoriel-3-83576-calcul-d-une-expression-mathematique.html">un tutoriel qui en parle</a>.</p><h5 id="r-un-interpreteur-naif" data-claire-element-id="628571">Un interpréteur naïf</h5><h6 id="r-type-de-donnees" data-claire-element-id="628565">Type de données</h6><p id="r-628561" data-claire-element-id="628561">Notre langage sera donc décrit directement en OCaml, à l'aide de types sommes, une fois de plus. Un tel type correspond à ce que l'on nomme « syntaxe abstraite » du langage que nous décrivons : c'est une façon de représenter les programmes du langage en étant « assez proche » de la syntaxe, sans pour autant s'embarrasser de phases d'analyse syntaxique. En gros, pour représenter l'opération <code data-claire-semantic="ocaml">6 * (5 + 7)</code>, on manipulera une expression OCaml du style de <code data-claire-semantic="ocaml">Mul (Const 5, Add (Const 5, Const 7))</code>.</p><p id="r-628562" data-claire-element-id="628562">Une expression arithmétique va alors être soit une constante (un entier), soit une opération binaire (addition, multiplication, soustraction ou division). Voici un (début de) type qui traduit ces différentes possibilités :</p><pre id="r-628563" data-claire-element-id="628563"><code data-claire-semantic="ocaml">type expr = 
  | Const of int
  | Add of expr * expr
  | …</code></pre><p id="r-628564" data-claire-element-id="628564"><strong>Exercice :</strong> Complétez cette déclaration de type, avec les constructeurs <code data-claire-semantic="ocaml">Mul</code>, <code data-claire-semantic="ocaml">Sub</code> et <code data-claire-semantic="ocaml">Div</code>.</p><h6 id="r-fonction-d-evaluation" data-claire-element-id="628570">Fonction d'évaluation</h6><p id="r-628566" data-claire-element-id="628566">Une fois le type défini, il nous faut une fonction d'évaluation. Celle-ci devra recevoir une <code data-claire-semantic="ocaml">expr</code>, et produire un <code data-claire-semantic="ocaml">int</code> (du moins pour l'instant). Elle devra être récursive : pour évaluer une branche <code data-claire-semantic="ocaml">Add</code>, nous devons calculer les deux sous-expressions portées par celle-ci !</p><p id="r-628567" data-claire-element-id="628567">Ici encore, voici le début :</p><pre id="r-628568" data-claire-element-id="628568"><code data-claire-semantic="ocaml">let rec eval e = match e with 
  | Const n -&gt; n
  | Add (e1, e2) -&gt; 
    let n1 = eval e1 in
    let n2 = eval e2 in 
    n1 + n2
  | …</code></pre><p id="r-628569" data-claire-element-id="628569"><strong>Exercice :</strong> Vous savez ce que vous avez à faire. Cependant, inutile (pour l'instant) de compléter toutes les branches — contentez-vous de l'opération <code data-claire-semantic="ocaml">Div</code>. Testez ensuite votre fonction sur des petits codes à base d'<code data-claire-semantic="ocaml">Add</code> et de <code data-claire-semantic="ocaml">Div</code>, et, en particulier, essayez de diviser par 0.</p><h5 id="r-une-reecriture-benigne" data-claire-element-id="628580">Une réécriture bénigne</h5><p id="r-628572" data-claire-element-id="628572">Nous le voyons bien lorsque nous utilisons l'interpréteur OCaml (en ligne de commande, donc) pour écrire des bêtises : <strong>une erreur au niveau du langage interprété ne doit pas se traduire par un arrêt de l'interpréteur</strong>. Celui-ci, loin de perdre son sang-froid, doit signaler sa bourde à l'utilisateur, pour qu'il puisse la corriger.</p><p id="r-628573" data-claire-element-id="628573">Nous devons donc faire de même : ici, la seule erreur possible est (pour le moment) la division par zéro, et, comme nous ne savons rien faire d'autre, nous allons utiliser un type option. Plus précisément, notre fonction <code data-claire-semantic="ocaml">eval</code> va désormais renvoyer un <code data-claire-semantic="ocaml">int option</code>, indiquant son éventuel échec.</p><p id="r-628574" data-claire-element-id="628574">Pour comprendre quelles modifications apporter à notre code, nous allons supposer pendant un moment que <code data-claire-semantic="ocaml">return</code> et <code data-claire-semantic="ocaml">(&gt;&gt;=)</code> travaillent non plus sur des <code data-claire-semantic="ocaml">option</code>, mais sur des types quelconques. Ils sont donc respectivement de types <code data-claire-semantic="ocaml">'a -&gt; 'a</code> et <code data-claire-semantic="ocaml">'a -&gt; ('a -&gt; 'b) -&gt; 'b</code>.</p><p id="r-628575" data-claire-element-id="628575"><strong>Exercice :</strong> Redéfinissez ces opérateurs.</p><p id="r-628576" data-claire-element-id="628576">Nous modifions maintenant notre fonction <code data-claire-semantic="ocaml">eval</code>, juste pour comprendre où faire des modifications :</p><pre id="r-628577" data-claire-element-id="628577"><code data-claire-semantic="ocaml">let rec eval e = match e with 
  | Const n -&gt; return n
  | Add (e1, e2) -&gt; 
    eval e1 
    &gt;&gt;= fun n1 -&gt; eval e2
    &gt;&gt;= fun n2 -&gt; return (n1 + n2)
  | etc.</code></pre><p id="r-628578" data-claire-element-id="628578">Les noms choisis pour les deux opérateurs de la partie précédente semblent plutôt logiques : pour l'un, il s'agit « juste » de renvoyer un résultat, sans faire de calcul particulier. Pour l'autre, il s'agit de combiner un résultat et un calcul, à l'aide d'une fonction qui utilise ce résultat.</p><p id="r-628579" data-claire-element-id="628579"><strong>Exercice :</strong> Réécrivez le code de la branche <code data-claire-semantic="ocaml">Div</code> pour qu'il ressemble à celui-ci. Rajoutez également le code nécessaire (à la déclaration du type <code data-claire-semantic="ocaml">expr</code> ainsi que dans la fonction <code data-claire-semantic="ocaml">eval</code>) pour mettre au carré une expression (par exemple, implémentez un constructeur <code data-claire-semantic="ocaml">Squ</code>) — forcez-vous à utiliser <code data-claire-semantic="ocaml">(&gt;&gt;=)</code> !</p><h5 id="r-une-gestion-des-erreurs-basiques" data-claire-element-id="628588">Une gestion des erreurs basiques</h5><p id="r-628581" data-claire-element-id="628581">Si vous avez bien compris le fonctionnement de nos deux opérateurs, alors… repassons à la version qui utilise des types options. Pour l'instant, nous avons donc le code suivant :</p><pre id="r-628582" data-claire-element-id="628582"><code data-claire-semantic="ocaml">let return x = Some x

let (&gt;&gt;=) x f = 
  match x with 
  | None -&gt; None 
  | Some y -&gt; f y

type expr = 
  | Const of int
  | Add of expr * expr
  | Mul of expr * expr
  | Sub of expr * expr
  | Div of expr * expr

let rec eval e = match e with 
  | Const n -&gt; return n
  | Add (e1, e2) -&gt; 
    eval e1 
    &gt;&gt;= fun n1 -&gt; eval e2
    &gt;&gt;= fun n2 -&gt; return (n1 + n2)
  | Div (e1, e2) -&gt;
    eval e1
    &gt;&gt;= fun n1 -&gt; eval e2
    &gt;&gt;= fun n2 -&gt; return (n1 + n2)
  | etc.</code></pre><p id="r-628583" data-claire-element-id="628583">Nous voulons maintenant implémenter un système d'erreur basique pour notre langage. Il est clair que multiplier ou additionner deux nombres ne pose pas de problème… seule la division par 0 peut provoquer une erreur. Seulement, si on veut calculer par exemple <code data-claire-semantic="ocaml">Add (Div (3, 0), Const 5)</code>, il faut propager l'erreur correctement (c'est à dire la faire sortir du <code data-claire-semantic="ocaml">Add</code>).</p><p id="r-628584" data-claire-element-id="628584">Or c'est précisément ce que fait l'opérateur <code data-claire-semantic="ocaml">(&gt;&gt;=)</code> : propager les <code data-claire-semantic="ocaml">None</code>. Par conséquent, nous avons déjà le bon code, sauf dans le cas du <code data-claire-semantic="ocaml">Div (a, b)</code> : dans cette branche seulement, il faut évaluer et tester la valeur de <code data-claire-semantic="ocaml">b</code>, car si elle est contient la valeur <code data-claire-semantic="ocaml">0</code>, nous échouons.</p><p id="r-628585" data-claire-element-id="628585">Voici une portion du code modifié :</p><pre id="r-628586" data-claire-element-id="628586"><code data-claire-semantic="ocaml">let fail = None
…
let rec eval e = match e with 
  …
  | Div (e1, e2) -&gt; 
    eval e1
    &gt;&gt;= fun n1 -&gt; eval e2
    &gt;&gt;= fun n2 -&gt; 
      if n2 = 0 then fail else return (n1 / n2)
  | etc.</code></pre><p id="r-628587" data-claire-element-id="628587">Pour plus de lisibilité, nous définissons également une valeur <code data-claire-semantic="ocaml">fail</code>, qui deviendra une fonction par la suite (cf. exercices). Vous pouvez maintenant tester votre code : quand nous faisons un calcul sans erreur, tout va bien, mais quand une division par 0 apparaît, nous récupérons <code data-claire-semantic="ocaml">None</code> pour toute l'expression.</p><h5 id="r-et-map-alors" data-claire-element-id="628593">Et map alors ?</h5><p id="r-628589" data-claire-element-id="628589">Notre exemple illustre plutôt mal l'intérêt de la fonction <code data-claire-semantic="ocaml">map</code> que nous avons définie précédemment. Pour combler cette lacune, un petit exercice :</p><p id="r-628590" data-claire-element-id="628590"><strong>Exercice :</strong> Rajoutez la possibilité (à votre type <code data-claire-semantic="ocaml">expr</code> et dans <code data-claire-semantic="ocaml">eval</code>) de calculer l'opposé d'un nombre (par exemple <code data-claire-semantic="ocaml">Neg (Const 3)</code> sera évalué en <code data-claire-semantic="ocaml">Some -3</code>). Trouvez comment utiliser <code data-claire-semantic="ocaml">map</code> et une fonction <code data-claire-semantic="ocaml">(|&gt;) : 'a -&gt; ('a -&gt; 'b) -&gt; 'b</code>.</p><p id="r-628591" data-claire-element-id="628591">Rappelez-vous que nous avons défini <code data-claire-semantic="ocaml">map</code> directement avec un <code data-claire-semantic="ocaml">match</code>. L'exercice précédent devrait normalement vous sembler redondant : en définissant <code data-claire-semantic="ocaml">(|&gt;) : 'a -&gt; ('a -&gt; 'b) -&gt; 'b</code>, on fait apparaître une autre façon de combiner nos fonctions, qui est plus générale et ne dépend pas du type option. Nous aurions clairement pu y arriver avec <code data-claire-semantic="ocaml">(&gt;&gt;=)</code> et <code data-claire-semantic="ocaml">return</code>.</p><p id="r-628592" data-claire-element-id="628592"><strong>Exercice :</strong> Montrez que <code data-claire-semantic="ocaml">map</code> peut être écrite grâce à ces deux fonctions, et n'a pas besoin d'être définie avec un <code data-claire-semantic="ocaml">match</code> explicite.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
<span class="arrow"></span>
<span class="next">Des opérations supplémentaires</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
<span class="next">Le mot de la fin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lemotdelafin"></a><h2>Le mot de la fin</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
<span class="arrow"></span>
<span class="next">Un exemple : un mini-interpréteur</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-mot-de-la-fin-6" data-claire-element-id="628639">Le mot de la fin</h4><h5 id="r-des-ameliorations-pour-notre-mini-langage" data-claire-element-id="628622">Des améliorations pour notre mini-langage</h5><h6 id="r-des-variables-2" data-claire-element-id="628604">Des variables</h6><p id="r-628595" data-claire-element-id="628595">On peut rajouter beaucoup de constructions à notre mini-langage. Notamment, on peut rajouter un constructeur <code data-claire-semantic="ocaml">Var of string</code> à notre type <code data-claire-semantic="ocaml">expr</code> pour travailler avec des variables.</p><p id="r-628596" data-claire-element-id="628596">Il faut alors modifier <code data-claire-semantic="ocaml">eval</code> pour qu'elle travaille avec un environnement, c'est-à-dire une liste de couples <code data-claire-semantic="ocaml">(string, int)</code>. Quand le code évalué fait appel à une variable, il faut aller chercher la valeur de celle-ci dans la liste. Si elle n'y figure pas, c'est bien sûr une erreur. Par exemple,</p><pre id="r-628597" data-claire-element-id="628597"><code data-claire-semantic="ocaml"># eval [(&quot;x&quot;, 3)] (Neg (Add (Const 2, Var &quot;x&quot;)));;
- : int option = Some (-5)
# eval [(&quot;x&quot;, 3)] (Neg (Add (Const 2, Var &quot;zozor&quot;)));;
- : int option = None</code></pre><p id="r-628598" data-claire-element-id="628598"><strong>Exercice :</strong></p><ul id="r-628603" data-claire-element-id="628603"><li id="r-628600" data-claire-element-id="628600"><p id="r-628599" data-claire-element-id="628599">Commencez par programmer une fonction <code data-claire-semantic="ocaml">valeur x l</code> qui va chercher la valeur correspondant à la chaîne <code data-claire-semantic="ocaml">x</code> dans la liste de couples <code data-claire-semantic="ocaml">l</code>. Vous pouvez réutiliser la fonction <code data-claire-semantic="ocaml">find</code> définie précédemment, ou réécrire une fonction explicitement récursive.</p></li><li id="r-628602" data-claire-element-id="628602"><p id="r-628601" data-claire-element-id="628601">Adaptez ensuite <code data-claire-semantic="ocaml">eval</code> pour qu'elle sache traiter les variables. Grâce à <code data-claire-semantic="ocaml">(&gt;&gt;=)</code>, trois lignes suffisent !</p></li></ul><h6 id="r-des-instructions-1" data-claire-element-id="628621">Des instructions</h6><p id="r-628605" data-claire-element-id="628605">On peut définir un autre type, <code data-claire-semantic="ocaml">instr</code>, qui représente différentes sortes d'instructions pour notre mini-langage. Parmi celles-ci, certaines sont des affectations (on modifie ou crée une variable en lui affectant une valeur, qui est le résultat d'une expression), d'autres sont des affichages d'expressions (faisant éventuellement intervenir des variables).</p><p id="r-628606" data-claire-element-id="628606">Je propose par exemple</p><pre id="r-628607" data-claire-element-id="628607"><code data-claire-semantic="ocaml">type instr =  
  | Print of expr
  | Affect of string * expr

type prog = instr list</code></pre><p id="r-628608" data-claire-element-id="628608"><strong>Exercices (niveau avancé) :</strong></p><ul id="r-628620" data-claire-element-id="628620"><li id="r-628615" data-claire-element-id="628615"><p id="r-628609" data-claire-element-id="628609">Définissez une fonction <code data-claire-semantic="ocaml">exec : (string * int) list -&gt; instr -&gt; (string * int) list option</code>, qui, à partir d'un environnement, exécute une instruction (passée en argument). Celle-ci modifie éventuellement l'environnement (définition d'une nouvelle variable ou modification de la valeur d'une autre), et il faut donc renvoyer la nouvelle liste de couples. Remarquez que cette instruction peut également conduire à une erreur, et que l'on travaille donc encore une fois dans le type option.</p><ul id="r-628614" data-claire-element-id="628614"><li id="r-628611" data-claire-element-id="628611"><p id="r-628610" data-claire-element-id="628610">Vous aurez probablement besoin d'une fonction <code data-claire-semantic="ocaml">val insert : 'a -&gt; 'b -&gt; ('a * 'b) list -&gt; ('a * 'b) list</code>.</p></li><li id="r-628613" data-claire-element-id="628613"><p id="r-628612" data-claire-element-id="628612">Pour afficher un entier <code>n</code> et renvoyer l'expression <code>e1</code>, utilisez le code <code data-claire-semantic="ocaml">print_int n; print_newline (); e1</code>. Nous reviendrons prochainement sur les instructions, j'anticipe un peu pour l'instant !</p></li></ul></li><li id="r-628617" data-claire-element-id="628617"><p id="r-628616" data-claire-element-id="628616">Définissez ensuite une fonction <code data-claire-semantic="ocaml">run : instr list -&gt; (string * int) list option</code>. Si cela vous semble encore trop facile, remarquez que celle-ci peut s'exprimer à l'aide de la fonction <code data-claire-semantic="ocaml">List.fold_left : ('a -&gt; 'b -&gt; 'a) -&gt; 'a -&gt; 'b list -&gt; 'a</code>.</p></li><li id="r-628619" data-claire-element-id="628619"><p id="r-628618" data-claire-element-id="628618">Vous pouvez naturellement encore enrichir notre mini-langage !</p></li></ul><h5 id="r-les-monades" data-claire-element-id="628627">Les monades</h5><p id="r-628623" data-claire-element-id="628623">Ce chapitre vous a probablement semblé long et difficile. Cependant, il contient des idées assez importantes : on a construit une méthode pour séparer, dans notre code, le traitement des erreurs d'un côté, et la propagation du résultat de l'autre. Plus précisément, nous avons des outils qui nous permettent de combiner des calculs, et de propager soit des résultats utiles, soit des informations « annexes » (ici, des erreurs).</p><p id="r-628624" data-claire-element-id="628624">Ces constructions sont récurrentes en programmation fonctionnelle. Elles correspondent un peu à ce qu'on appellerait un <em>design pattern</em> dans les langages orientés objet. On les appelle des <strong>monades</strong>. C'est un concept initialement mathématique, qui a été appliqué à l'informatique (initialement par le chercheur Eugenio Moggi) pour étudier les <strong>effets de bord</strong> dans les langages de programmation.</p><p id="r-628625" data-claire-element-id="628625">L'idée est que certains calculs, dans un programme, sont « purs », dans le sens où ils s'évaluent toujours de la même façon. C'est le cas par exemple d'une expression arithmétique, d'un nombre, etc. Cependant, certains autres calculs sont « impurs » : ils dépendent fortement du contexte, par exemple d'une valeur entrée par l'utilisateur. Pour comprendre ces effets de bord, Moggi a remarqué que beaucoup d'entre eux pouvaient être dotés d'une structure de monade, c'est-à-dire de fonctions (mathématiques) qui jouent le rôle de nos <code data-claire-semantic="ocaml">return</code> et <code data-claire-semantic="ocaml">(&gt;&gt;=)</code>.</p><p id="r-628626" data-claire-element-id="628626">Un autre chercheur, nommé Philip Wadler, a ensuite proposé d'intégrer les monades directement dans les langages de programmation. Elles ne servent alors plus à étudier ces langages, mais deviennent partie intégrante des programmes, et permettent de structurer le code. Son article initial, <a href="https://wiki.ittc.ku.edu/lambda/Image:Wadler_-_Monads_for_functional_programming_(1995).pdf">Monads for functional programming</a>, introduit (dans un pseudo-langage fonctionnel) un grand nombre d'exemples d'utilisation — notamment notre partie précédente — qui vont de la gestion des erreurs à celle des états mémoire, en passant par l'analyse syntaxique.</p><h5 id="r-les-exceptions-11" data-claire-element-id="628631">Les exceptions</h5><p id="r-628628" data-claire-element-id="628628">Enfin, signalons que le type option, bien que prédéfini en OCaml, reste peu utilisé par la bibliothèque standard. En réalité, OCaml utilise plutôt des exceptions, qui sont un mécanisme de gestion des erreurs plus puissant a priori, mais qui correspond à la partie impérative du langage — nous reviendrons donc dessus dans les prochains chapitres.</p><p id="r-628629" data-claire-element-id="628629">Cependant, nous découvrirons que tout le travail que nous avons fait sur le type option n'est pas inutile : premièrement, grâce aux monades, nous avons schématisé la propagation des erreurs dans un programme. Les exceptions OCaml se comprennent exactement de la même façon, sauf qu'elles demandent des constructions particulières au niveau du langage lui-même, car ce ne sont pas des valeurs comme les autres (alors que nos options si). Certaines bibliothèques alternatives pour OCaml, telles <a href="http://batteries.forge.ocamlcore.org/">Batteries</a>, disposent d'un grand nombre de fonctions prédéfinies qui utilisent le type option.</p><p id="r-628630" data-claire-element-id="628630">Quoi qu'il en soit, pour de petits bouts de code, le type option s'avère pratique : il permet, grâce à des combinateurs comme <code data-claire-semantic="ocaml">(&gt;&gt;=)</code>, d'écrire du code relativement dense et lisible (il suffit de garder en tête que ce genre de combinateur propage les erreurs en priorité).</p><h5 id="r-des-ameliorations-du-type-option" data-claire-element-id="628638">Des améliorations du type option</h5><p id="r-628632" data-claire-element-id="628632">Si vous connaissez la valeur <code data-claire-semantic="c">null</code> du C (ou autres), remarquez que nos types options sont plus fiables : premièrement, parce qu'ils nous <strong>forcent</strong> à faire attention à eux, à cause du typage statique d'OCaml (le compilateur rejettera un code qui manipule un <code data-claire-semantic="ocaml">int option</code> comme un <code data-claire-semantic="ocaml">int</code> par exemple). En outre, ils supportent plusieurs niveaux d'imbrication ! Comment traduire <code data-claire-semantic="ocaml">find ((=) None) [Some 3; Some 2; None; Some 5]</code> en C, par exemple ?</p><p id="r-628633" data-claire-element-id="628633">Enfin, il ne faut pas hésiter à redéfinir le type option pour lui ajouter plusieurs constructeurs. Par exemple, dans notre mini-langage, nous avons deux erreurs possibles : la division par zéro d'une part, et le fait d'utiliser des variables indéfinies d'autre part. Nous pourrions distinguer deux valeurs, <code data-claire-semantic="ocaml">None1</code> et <code data-claire-semantic="ocaml">None2</code>, et réécrire <code data-claire-semantic="ocaml">(&gt;&gt;=)</code> en conséquence (pour qu'il propage automatiquement ces deux valeurs) : cela suffirait pour distinguer, à l'arrivée, les deux sortes d'erreur possibles.</p><p id="r-628634" data-claire-element-id="628634">Nous pourrions aussi définir le <code data-claire-semantic="ocaml">type 'a either = Normal of 'a | Erreur of string</code>, ou ce genre de chose. Ou encore changer le type (et <code data-claire-semantic="ocaml">(&gt;&gt;=)</code> et <code data-claire-semantic="ocaml">return</code>) pour qu'ils transportent des informations supplémentaires, comme le nombre d'instructions déjà exécutées par exemple.</p><p id="r-628635" data-claire-element-id="628635">Nous disposons maintenant d'une façon élégante de représenter des erreurs, et des fonctions partielles (c'est-à-dire définie sur un sous-ensemble de leur type). Bien qu'il existe des mécanismes plus puissants intégrés au langage, le nôtre a l'avantage d'être modulable, et très composable. Nous avons également découvert le concept de « monades », très important en programmation fonctionnelle !</p><p id="r-628636" data-claire-element-id="628636">Même si pour le moment le cours semble un peu vide, il va peu à peu s'étoffer et il abordera notamment des sujets beaucoup plus concrets que la simple étude de la syntaxe du langage.</p><p id="r-628637" data-claire-element-id="628637">N'hésitez pas à vous entraîner en programmant en OCaml à côté du tutoriel. N'hésitez pas non plus à poster sur le forum Autres Langages, ou à lire d'autres documents sur ce fabuleux langage, ou sur la programmation fonctionnelle !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros">OCaml pour les Zéros</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
La programmation fonctionnelle pour commencer
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-s-interesser-a-ocaml">Pourquoi s&#039;intéresser à OCaml ?</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/qu-est-ce-qu-objective-caml">
Qu&#039;est-ce qu&#039;Objective Caml ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-et-comment-lire-ce-tutoriel">
Pourquoi et comment lire ce tutoriel
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/premiers-pas-avec-ocaml">Premiers pas avec OCaml</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/installer-et-utiliser-ocaml">
Installer et utiliser OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-donnees-essentielles">
Des données essentielles
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-variables-1">
Des variables
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/et-des-fonctions">
Et des fonctions !
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-conditions-36">Les conditions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/syntaxe-et-utilisation-1">
Syntaxe et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-expressions-ocaml-comme-les-autres">
Des expressions OCaml comme les autres
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-type-booleen-1">
Le type booléen
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-recursives">Les fonctions récursives</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-principe-34">
Le principe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-vraies-fonctions-recursives-s-habillent-chez-let-rec">
Les vraies fonctions récursives s&#039;habillent chez let rec
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/reflechir-a-un-programme">
Réfléchir à un programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-plus-concret">
Un exemple plus concret
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-listes-25">Les listes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/ranger-ses-donnees">
Ranger ses données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-listes-en-ocaml">
Utiliser les listes en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-filtrage-de-motif">
Le filtrage de motif
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-exemples-de-fonctions-utilisant-les-listes">
Quelques exemples de fonctions utilisant les listes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/manipulation-de-fonctions">Manipulation de fonctions</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/realisation-8">
Réalisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-exemples-moins-mathematiques">
Des exemples moins mathématiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-regles-fonctionnelles">
Quelques règles fonctionnelles
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-fonctions-a-gogo">Des fonctions à gogo</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/utiliser-les-operateurs-comme-des-fonctions">
Utiliser les opérateurs comme des fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definir-ses-operateurs">
Définir ses opérateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-fonctions-anonymes-2">
Les fonctions anonymes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pour-plus-de-types">Pour plus de types</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-tuples-1">
Les tuples
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-polymorphisme-5">
Le polymorphisme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/quelques-remarques-sur-l-utilite-du-systeme-de-typage-en-ocaml">
Quelques remarques sur l&#039;utilité du système de typage en OCaml
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/les-types-somme">
Les types somme
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/tp-le-type-option">TP : Le type option</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/pourquoi-le-type-option">
Pourquoi le type option
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/definition-et-utilisation">
Définition et utilisation
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/des-operations-supplementaires">
Des opérations supplémentaires
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
Un exemple : un mini-interpréteur
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/le-mot-de-la-fin-6">
Le mot de la fin
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/ocaml-pour-les-zeros/un-exemple-un-mini-interpreteur">
<span class="arrow"></span>
<span class="next">Un exemple : un mini-interpréteur</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/ocaml-pour-les-zeros.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 22:50:04 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/ocaml-pour-les-zeros.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:02:01 GMT -->
</html>