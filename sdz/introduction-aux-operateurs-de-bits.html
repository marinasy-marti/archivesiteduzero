<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/introduction-aux-operateurs-de-bits.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:11:57 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/introduction-aux-operateurs-de-bits.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:48:07 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Introduction aux opérateurs de bits</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/introduction-aux-operateurs-de-bits.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Introduction aux opérateurs de bits</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Introductionauxoprateursdebits">Introduction aux opérateurs de bits</a><br/><a href="#Vousavezditoprateur">Vous avez dit opérateur ?</a><br/><a href="#Grerlesdroitsdesutilisateurs">Gérer les droits des utilisateurs</a><br/><a href="#Penserbinaire">Penser binaire</a><br/><a href="#Lesoprateursdebitsampet">Les opérateurs de bits &amp; et |</a><br/><a href="#Lesoprateursdebitset">Les opérateurs de bits ^ et ~</a><br/><a href="#Lesdroitsaveclesoprateursdebits">Les droits avec les opérateurs de bits</a><br/><a href="#Appendicelesoprateursdedcalage">Appendice : les opérateurs de décalage</a><br/></div>
<a name="Introductionauxoprateursdebits"></a><h2>Introduction aux opérateurs de bits</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
<span class="next">Vous avez dit opérateur ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-576689" data-claire-element-id="576689">Vous souhaitez créer un système de droits d'accès pour votre site, vous utilisez des objets aux multiples propriétés, vous voulez passer de nombreux paramètres de type oui / non à une seule fonction ? <br/> Les opérateurs de bits peuvent vous aider !</p><aside id="r-576691" data-claire-element-id="576691" data-claire-semantic="information"><p id="r-576690" data-claire-element-id="576690">Ne connaissant pas le niveau de chacun, j'ai beaucoup détaillé. Mais une fois que l'on a compris le raisonnement, l'utilisation de ces opérateurs est très simple !</p></aside>
</div><a name="Vousavezditoprateur"></a><h2>Vous avez dit opérateur ?</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
<span class="next">Gérer les droits des utilisateurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-576692" data-claire-element-id="576692">Quel que soit le programme que vous créerez, vous allez utiliser des opérateurs. Un opérateur, c'est ce qui vous permet d'obtenir une valeur à partir d'une ou de plusieurs autres valeurs. Il en existe différentes catégories :</p><p id="r-576693" data-claire-element-id="576693">- certaines que vous connaissez probablement :</p><ul id="r-576702" data-claire-element-id="576702"><li id="r-576695" data-claire-element-id="576695"><p id="r-576694" data-claire-element-id="576694">opérateurs arithmétiques (<strong>+</strong> , <strong>-</strong> , <strong>/</strong> , <strong>*</strong> ,...),</p></li><li id="r-576697" data-claire-element-id="576697"><p id="r-576696" data-claire-element-id="576696">opérateurs de comparaison (<strong>==</strong> , <strong>&gt;</strong> , <strong>&lt;</strong> ,...),</p></li><li id="r-576699" data-claire-element-id="576699"><p id="r-576698" data-claire-element-id="576698">opérateurs logiques (<strong>&amp;&amp;</strong> , <strong>||</strong> , <strong>!</strong> ,...),</p></li><li id="r-576701" data-claire-element-id="576701"><p id="r-576700" data-claire-element-id="576700">opérateurs d'assignation (<strong>=</strong> , <strong>.=</strong> , <strong>+=</strong> ,...).</p></li></ul><p id="r-576703" data-claire-element-id="576703">- d'autres semblent plus obscurs, dont les opérateurs de bits. Nous allons utiliser une partie de ces derniers.</p><aside id="r-576705" data-claire-element-id="576705" data-claire-semantic="information"><p id="r-576704" data-claire-element-id="576704">Pour une liste exhaustive des opérateurs, voir :<br/> - <a href="http://doc.domainepublic.net/php/doc.php.long/language.operators.html">opérateurs du PHP</a> ;<br/> - <a href="http://www.cppreference.com/operator_precedence.html">opérateurs du C++ (en anglais).</a></p></aside>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits">Introduction aux opérateurs de bits</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
Vous avez dit opérateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
Gérer les droits des utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
Penser binaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
Les opérateurs de bits &amp; et |
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
Les opérateurs de bits ^ et ~
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
Les droits avec les opérateurs de bits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/appendice-les-operateurs-de-decalage">
Appendice : les opérateurs de décalage
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
<span class="next">Gérer les droits des utilisateurs</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Grerlesdroitsdesutilisateurs"></a><h2>Gérer les droits des utilisateurs</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
<span class="arrow"></span>
<span class="next">Vous avez dit opérateur ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
<span class="next">Penser binaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-576707" data-claire-element-id="576707">Supposons que vous vouliez instaurer un système de droits pour vos pages. Certains des membres auront le droit de publier un article, d'autres seulement de le proposer, d'autres seront restreints à la lecture. D'autres pages du site seront réservées aux administrateurs ou au webmaster... Supposons un site complexe dans lequel une dizaine de droits puissent être attribués (ou non) aux membres...</p><aside id="r-576709" data-claire-element-id="576709" data-claire-semantic="information"><p id="r-576708" data-claire-element-id="576708">La gestion des droits peut être simplifiée en général en les distribuant sur quelques groupes. Pour notre exemple, nous allons les détailler, ce qui est parfois utile...</p></aside><p id="r-576710" data-claire-element-id="576710">Une première possibilité serait de créer, dans la table membres, un champ par droit attribuable. Lors de la connexion du membre, les droits sont placés dans des variables de session.</p><pre id="r-576711" data-claire-element-id="576711"><code data-claire-semantic="html+php">&lt;?php
        // Connexion à la base de données [...]
        $Resultat = mysql_query(&quot;SELECT * FROM membres WHERE Pseudo='$Pseudo'&quot;);
        if ($Donnee = mysql_fetch_array($Resultat)) {
                //... Vérifier le mot de passe,  etc. ...
                if ($Donnee['lire_article'])   $_SESSION['droits']['lire_article'] = TRUE;
                if ($Donnee['ecrire_article']) $_SESSION['droits']['ecrire_article'] = TRUE;
                if ($Donnee['publier_article']) $_SESSION['droits']['publier_article'] = TRUE;
                if ($Donnee['proposer_new'])   $_SESSION['droits']['proposer_new'] = TRUE;
                if ($Donnee['valider_new'])    $_SESSION['droits']['valider_new'] = TRUE;
                if ($Donnee['gerer_membres'])  $_SESSION['droits']['gerer_membres'] = TRUE;
                if ($Donnee['gerer_base'])     $_SESSION['droits']['gerer_base'] = TRUE;
                // etc.
        }
?&gt;</code></pre><p id="r-576712" data-claire-element-id="576712">Lorsqu'une page doit être restreinte, on teste :</p><pre id="r-576713" data-claire-element-id="576713"><code data-claire-semantic="html+php">&lt;?php
        /* Le membre a-t-il droit à une page donnée ? */
        if (empty ($_SESSION['droits']['proposer_new'])) {
                echo 'Tu n\'as rien à faire ici !!';
                exit;
        }
?&gt;</code></pre><p id="r-576714" data-claire-element-id="576714">Cette première solution, que je vous déconseille vivement, fonctionnerait avec un petit nombre de droits. Avec dix, c'est vraiment lourd — aussi bien pour le programmeur que pour le serveur, qui devra garder des tas de variables en mémoire, et faire de nombreuses opérations... :'(</p><p id="r-576715" data-claire-element-id="576715">Nous allons donc placer l'ensemble des droits du membre dans une seule variable. Là encore, plusieurs possibilités s'offrent à nous.</p><p id="r-576716" data-claire-element-id="576716">Une première idée pourrait être de symboliser chaque droit par une lettre et de tester si la lettre requise pour autoriser la page se trouve bien dans la variable Droits du membre. Ce qui donnerait :</p><pre id="r-576717" data-claire-element-id="576717"><code data-claire-semantic="html+php">&lt;?php
        /* les droits (la correspondance sera conservée dans une table par exemple)
                A : lire un article
                B : écrire un article
                C : publier un article
                etc.          */
 
        /* Pour attribuer les droits, on utilisera l'opérateur de concaténation */
        $DroitsDuMembre = '';
        if ($Droit_lecture)     $DroitsDuMembre .= 'A';
        if ($Droit_Publication) $DroitsDuMembre .= 'C';  
        // etc.
 
        /* Lors du login de l'utilisateur */
        // Connexion à la base de données [...]
 
        $Resultat = mysql_query(&quot;SELECT Nom, Pass, Droits FROM membres WHERE Pseudo='$Pseudo'&quot;);
        if ($Donnee = mysql_fetch_array($Resultat)) {
                //... Vérifier le mot de passe,  etc ...
                $_SESSION['droits'] = $Donnee['Droits'];
        }
 
 
        /* Le membre a-t-il droit à une page donnée ? */
        if (strpos($_SESSION['droits'], 'C') === FALSE) {
                echo 'Désolé, mais cette page t\'est interdite...';
                exit;
        }
?&gt;</code></pre><p id="r-576718" data-claire-element-id="576718">C'est déjà nettement mieux ! o_O</p><aside id="r-576720" data-claire-element-id="576720" data-claire-semantic="information"><p id="r-576719" data-claire-element-id="576719">Il existe cependant une solution encore plus économique pour l'ordinateur : penser binaire !</p></aside>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits">Introduction aux opérateurs de bits</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
Vous avez dit opérateur ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
Gérer les droits des utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
Penser binaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
Les opérateurs de bits &amp; et |
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
Les opérateurs de bits ^ et ~
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
Les droits avec les opérateurs de bits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/appendice-les-operateurs-de-decalage">
Appendice : les opérateurs de décalage
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
<span class="arrow"></span>
<span class="next">Vous avez dit opérateur ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
<span class="next">Penser binaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Penserbinaire"></a><h2>Penser binaire</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
<span class="arrow"></span>
<span class="next">Gérer les droits des utilisateurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
<span class="next">Les opérateurs de bits &amp; et |</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-576722" data-claire-element-id="576722">Pour l'ordinateur, un nombre est une suite de 0 et de 1, chacun correspondant à un bit. La plupart de nos ordinateurs travaillent par séries de 32 bits.</p><p id="r-576723" data-claire-element-id="576723">Sur un nombre, nous pouvons donc avoir 32 bits pouvant prendre chacun la valeur <strong>1</strong> (qui signifiera pour nous : « vrai » ou « oui ») ou <strong>0</strong> (qui signifiera bien sûr « faux » ou « non »). C'est donc largement suffisant pour stocker notre table de droits !</p><aside id="r-576725" data-claire-element-id="576725" data-claire-semantic="error"><p id="r-576724" data-claire-element-id="576724">En fait, en PHP, nous ne pouvons utiliser que 31 bits, car nous ne pouvons pas maîtriser la façon dont les nombres sont stockés, et que le 32e bit (le plus à gauche) peut aussi bien signifier un nombre négatif que 2147483648 (2 puissance 31).<br/> Ce problème ne se pose pas en C/C++ puisque les variables ont un type bien défini.</p></aside><p id="r-576726" data-claire-element-id="576726">Nous pouvons décider que (les nombres sont ici sur 16 bits) :<br/>0000000000000001 signifie &quot;lire un article&quot;<br/>0000000000000010 signifie &quot;écrire un article&quot;<br/>0000000000000100 signifie &quot;publier un article&quot;<br/>0000000000001000 signifie &quot;proposer une new&quot;<br/>0000000000010000 signifie &quot;valider une new&quot;<br/>0000000000100000 signifie &quot;gérer les membres&quot;<br/>0000000001000000 signifie &quot;gérer la base de données&quot;</p><p id="r-576727" data-claire-element-id="576727">Pour dire que Untel a le droit de lire, écrire, publier des articles, et gérer les membres, il suffira d'attribuer la valeur suivante à sa variable $Droit :<br/>0000000000100111</p><p id="r-576728" data-claire-element-id="576728">Pour savoir si Untel a le droit d'écrire un article, il suffit de regarder si le deuxième bit à partir de la droite est bien un <strong>1</strong>.</p><p id="r-576729" data-claire-element-id="576729">Pour lui ajouter le droit de sauvegarder la base de données du site et de télécharger la sauvegarde, nous modifierons simplement le septième bit à partir de la droite en <strong>1</strong>.</p><p id="r-576730" data-claire-element-id="576730">Pour lui retirer ce droit (il vaut mieux ne pas laisser la base de données entre les mains de n'importe qui...), nous donnerons à nouveau à ce même septième bit la valeur <strong>0</strong>.</p><aside id="r-576732" data-claire-element-id="576732" data-claire-semantic="information"><p id="r-576731" data-claire-element-id="576731">Ces opérations sur des bits sont très simples et rapides pour l'ordinateur.</p></aside><div id="r-576734" data-claire-element-id="576734" data-claire-semantic="question"><p id="r-576733" data-claire-element-id="576733">Mais comment effectuer ces opérations ? Nous n'allons quand même pas avoir à écrire en base 2 (0000000000100111) dans le programme ?!</p></div><p id="r-576735" data-claire-element-id="576735">Les opérateurs de bits sont là pour nous faciliter la tâche. Il est donc temps de les découvrir. Nous en verrons quatre dans ce tuto :<br/><strong>&amp; : ET binaire<br/>| : OU binaire (au sens de ET / OU)<br/>^ : XOR binaire (OU exclusif)<br/>~ : NON binaire </strong><br/> Puis nous verrons comment faire en pratique pour ne pas avoir à écrire en binaire.</p><p id="r-576736" data-claire-element-id="576736"><strong>[Edit]</strong> Finalement, nous introduirons aussi les opérateurs de décalage &lt;&lt; et &gt;&gt; .</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits">Introduction aux opérateurs de bits</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
Vous avez dit opérateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
Gérer les droits des utilisateurs
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
Penser binaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
Les opérateurs de bits &amp; et |
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
Les opérateurs de bits ^ et ~
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
Les droits avec les opérateurs de bits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/appendice-les-operateurs-de-decalage">
Appendice : les opérateurs de décalage
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
<span class="arrow"></span>
<span class="next">Gérer les droits des utilisateurs</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
<span class="next">Les opérateurs de bits &amp; et |</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesoprateursdebitsampet"></a><h2>Les opérateurs de bits &amp; et |</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
<span class="arrow"></span>
<span class="next">Penser binaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
<span class="next">Les opérateurs de bits ^ et ~</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<aside id="r-576739" data-claire-element-id="576739" data-claire-semantic="information"><p id="r-576738" data-claire-element-id="576738">Rappelez-vous que pour PHP (comme en C / C++), si un résultat est égal à 0, il est FAUX. Dans le cas contraire, il est VRAI.</p></aside><h2 id="r-untel-a-t-il-le-droit-d-ecrire-un-article-operateur" data-claire-element-id="576744">Untel a-t-il le droit d'écrire un article ? <strong>Opérateur &amp;</strong></h2><p id="r-576740" data-claire-element-id="576740">Le ET binaire compare deux nombres binaires et donne un résultat dans lequel seuls les bits <strong>1</strong> en même position dans les deux nombres gardent une valeur <strong>1</strong>. Tous les autres sont mis à zéro.</p><aside id="r-576742" data-claire-element-id="576742" data-claire-semantic="warning"><p id="r-576741" data-claire-element-id="576741">Il faut que le bit n du premier nombre ET du deuxième nombre soient à <strong>1</strong> pour que le bit n du résultat soit à <strong>1</strong>.</p></aside><p id="r-576743" data-claire-element-id="576743">0000000000100111 Droits de Untel<br/>&amp; opérateur ET<br/>0000000000000010 écrire un article<br/>=<br/>0000000000000010 Résultat qui est différent de 0000000000000000 donc VRAI</p><h2 id="r-ajouter-le-droit-de-sauvegarder-la-base-de-donnees-operateur" data-claire-element-id="576750">Ajouter le droit de sauvegarder la base de données : <strong>Opérateur |</strong></h2><p id="r-576745" data-claire-element-id="576745">Le OU binaire compare deux nombres binaires et donne un résultat dans lequel les bits <strong>1</strong> de chacun des deux nombres gardent une valeur <strong>1</strong>.</p><aside id="r-576747" data-claire-element-id="576747" data-claire-semantic="warning"><p id="r-576746" data-claire-element-id="576746">Il suffit que le bit n du premier nombre ET / OU du deuxième nombre soit à <strong>1</strong> pour que le bit n du résultat soit à <strong>1</strong>.</p></aside><p id="r-576748" data-claire-element-id="576748">0000000000100111 Droits de Untel<br/>| opérateur OU <br/>0000000001000000 gérer la base<br/>=<br/>0000000001100111 qui est le nouveau droit de Untel</p><p id="r-576749" data-claire-element-id="576749">Observation : le résultat aurait été le même si Untel disposait déjà de ce droit.<br/>0000000001100111<br/>|<br/>0000000001000000<br/>=<br/>0000000001100111</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits">Introduction aux opérateurs de bits</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
Vous avez dit opérateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
Gérer les droits des utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
Penser binaire
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
Les opérateurs de bits &amp; et |
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
Les opérateurs de bits ^ et ~
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
Les droits avec les opérateurs de bits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/appendice-les-operateurs-de-decalage">
Appendice : les opérateurs de décalage
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
<span class="arrow"></span>
<span class="next">Penser binaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
<span class="next">Les opérateurs de bits ^ et ~</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesoprateursdebitset"></a><h2>Les opérateurs de bits ^ et ~</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
<span class="arrow"></span>
<span class="next">Les opérateurs de bits &amp; et |</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
<span class="next">Les droits avec les opérateurs de bits</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-retirer-le-droit-de-sauvegarder-la-base-de-donnees-et" data-claire-element-id="576766">Retirer le droit de sauvegarder la base de données : <strong>~ et ^</strong></h2><p id="r-576752" data-claire-element-id="576752">Selon que nous connaissons ou non les droits actuels de Untel, nous pourrons utiliser un opérateur (^) ou une combinaison de deux opérateurs (&amp; et ~).</p><h3 id="r-une-methode-risquee-pour-retirer-un-droit-le-ou-exclusif" data-claire-element-id="576759">Une méthode risquée pour retirer un droit : le OU Exclusif</h3><p id="r-576753" data-claire-element-id="576753">Le OU Exclusif binaire ne retient que les <strong>1</strong> présents dans UN SEUL des deux nombres examinés.</p><aside id="r-576755" data-claire-element-id="576755" data-claire-semantic="warning"><p id="r-576754" data-claire-element-id="576754">Il faut que le bit n du premier nombre OU du deuxième nombre, mais pas des deux, soit à <strong>1</strong> pour que le bit n du résultat soit à <strong>1</strong>.</p></aside><p id="r-576756" data-claire-element-id="576756">0000000001100111 Droits de Untel<br/> ^ opérateur OU Exclusif (XOR) <br/>0000000001000000 gérer la base<br/>=<br/>0000000000100111 qui est le nouveau droit de Untel</p><aside id="r-576758" data-claire-element-id="576758" data-claire-semantic="warning"><p id="r-576757" data-claire-element-id="576757">Si nous utilisions ^ sans vérifier si Untel avait bien le droit que nous voulions supprimer, et qu'il ne l'ait pas, le même opérateur le lui donnerait : en fait, on peut utiliser plutôt cet opérateur pour inverser un droit.<br/>0000000000100111 Droits de Untel<br/> ^ opérateur OU Exclusif (XOR) <br/>0000000001000000 gérer la base<br/>=<br/>0000000001100111 qui est le nouveau droit de Untel</p></aside><h3 id="r-meilleure-methode-utiliser-un-masque-non" data-claire-element-id="576765">Meilleure méthode : utiliser un masque NON ~</h3><p id="r-576760" data-claire-element-id="576760">L'opérateur NON binaire inverse tous les bits du nombre auquel il est appliqué.</p><aside id="r-576762" data-claire-element-id="576762" data-claire-semantic="warning"><p id="r-576761" data-claire-element-id="576761">Chaque <strong>1</strong> deviendra un <strong>0</strong> et chaque <strong>0</strong> deviendra un <strong>1</strong>.</p></aside><p id="r-576763" data-claire-element-id="576763">Cela nous permet de créer un masque que nous appliquerons aux droits de Untel pour supprimer uniquement le droit de gestion de la base.<br/>~0000000001000000 gérer la base<br/>=1111111110111111 masque du droit de gestion de la base<br/>&amp;0000000001100111 droits de Untel<br/>=0000000000100111 nouveaux droits de Untel</p><p id="r-576764" data-claire-element-id="576764">On peut observer qu'appliquer le même masque si Untel ne dispose pas du droit à supprimer ne l'ajoutera pas :<br/>=1111111110111111 masque du droit de gestion de la base<br/>&amp;0000000000100111 droits de Untel<br/>=0000000000100111 nouveaux droits de Untel</p><h2 id="r-comparer-les-droits-de-deux-utilisateurs-encore-l-operateur" data-claire-element-id="576769">Comparer les droits de deux utilisateurs : encore l'<strong>opérateur ^</strong></h2><p id="r-576767" data-claire-element-id="576767">On peut utiliser l'opérateur logique <strong>==</strong>, mais l'opérateur de bits <strong>^</strong> est un autre moyen. En fait, le résultat peut être interprété comme « est différent de », ce qui permet de déduire l'égalité bit à bit.<br/>0000000000100111 Droits de Untel<br/>^ opérateur XOR (OU exclusif)<br/>0000000000100111 Droits de User2<br/>=<br/>0000000000000000 Résultat qui est = à 0 donc FAUX : il n'y a pas de différence entre les deux utilisateurs.</p><p id="r-576768" data-claire-element-id="576768">Au contraire :<br/>0000000000100111 Droits de Untel<br/>^ opérateur XOR (OU exclusif)<br/>0000000000000011 Droits de User2<br/>=<br/>0000000000100100Résultat qui est différent de 0 donc VRAI : les droits des deux utilisateurs sont différents !</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits">Introduction aux opérateurs de bits</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
Vous avez dit opérateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
Gérer les droits des utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
Penser binaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
Les opérateurs de bits &amp; et |
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
Les opérateurs de bits ^ et ~
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
Les droits avec les opérateurs de bits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/appendice-les-operateurs-de-decalage">
Appendice : les opérateurs de décalage
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
<span class="arrow"></span>
<span class="next">Les opérateurs de bits &amp; et |</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
<span class="next">Les droits avec les opérateurs de bits</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesdroitsaveclesoprateursdebits"></a><h2>Les droits avec les opérateurs de bits</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
<span class="arrow"></span>
<span class="next">Les opérateurs de bits ^ et ~</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/appendice-les-operateurs-de-decalage">
<span class="next">Appendice : les opérateurs de décalage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-l-hexadecimal-a-notre-rescousse" data-claire-element-id="576896">L'hexadécimal à notre rescousse</h2><p id="r-576771" data-claire-element-id="576771">Nous ne pouvons pas vraiment écrire directement en base 2 en PHP. Ce serait d'ailleurs trop fatigant. ;) Nous pouvons bien sûr écrire en base 10, comme d'habitude. Mais observons le tableau suivant :</p><table id="r-576892" data-claire-element-id="576892"><tbody id="r-576891" data-claire-element-id="576891"><tr id="r-576778" data-claire-element-id="576778"><td id="r-576773" data-claire-element-id="576773"><p id="r-576772" data-claire-element-id="576772">base 2</p></td><td id="r-576775" data-claire-element-id="576775"><p id="r-576774" data-claire-element-id="576774">base 10 (décimal)</p></td><td id="r-576777" data-claire-element-id="576777"><p id="r-576776" data-claire-element-id="576776">base 16 (hexadécimal)</p></td></tr><tr id="r-576785" data-claire-element-id="576785"><td id="r-576780" data-claire-element-id="576780"><p id="r-576779" data-claire-element-id="576779">0000000000000001</p></td><td id="r-576782" data-claire-element-id="576782"><p id="r-576781" data-claire-element-id="576781">1</p></td><td id="r-576784" data-claire-element-id="576784"><p id="r-576783" data-claire-element-id="576783">0x01</p></td></tr><tr id="r-576792" data-claire-element-id="576792"><td id="r-576787" data-claire-element-id="576787"><p id="r-576786" data-claire-element-id="576786">0000000000000010</p></td><td id="r-576789" data-claire-element-id="576789"><p id="r-576788" data-claire-element-id="576788">2</p></td><td id="r-576791" data-claire-element-id="576791"><p id="r-576790" data-claire-element-id="576790">0x02</p></td></tr><tr id="r-576799" data-claire-element-id="576799"><td id="r-576794" data-claire-element-id="576794"><p id="r-576793" data-claire-element-id="576793">0000000000000100</p></td><td id="r-576796" data-claire-element-id="576796"><p id="r-576795" data-claire-element-id="576795">4</p></td><td id="r-576798" data-claire-element-id="576798"><p id="r-576797" data-claire-element-id="576797">0x04</p></td></tr><tr id="r-576806" data-claire-element-id="576806"><td id="r-576801" data-claire-element-id="576801"><p id="r-576800" data-claire-element-id="576800">0000000000001000</p></td><td id="r-576803" data-claire-element-id="576803"><p id="r-576802" data-claire-element-id="576802">8</p></td><td id="r-576805" data-claire-element-id="576805"><p id="r-576804" data-claire-element-id="576804">0x08</p></td></tr><tr id="r-576813" data-claire-element-id="576813"><td id="r-576808" data-claire-element-id="576808"><p id="r-576807" data-claire-element-id="576807">0000000000010000</p></td><td id="r-576810" data-claire-element-id="576810"><p id="r-576809" data-claire-element-id="576809">16</p></td><td id="r-576812" data-claire-element-id="576812"><p id="r-576811" data-claire-element-id="576811">0x10</p></td></tr><tr id="r-576820" data-claire-element-id="576820"><td id="r-576815" data-claire-element-id="576815"><p id="r-576814" data-claire-element-id="576814">0000000000100000</p></td><td id="r-576817" data-claire-element-id="576817"><p id="r-576816" data-claire-element-id="576816">32</p></td><td id="r-576819" data-claire-element-id="576819"><p id="r-576818" data-claire-element-id="576818">0x20</p></td></tr><tr id="r-576827" data-claire-element-id="576827"><td id="r-576822" data-claire-element-id="576822"><p id="r-576821" data-claire-element-id="576821">0000000001000000</p></td><td id="r-576824" data-claire-element-id="576824"><p id="r-576823" data-claire-element-id="576823">64</p></td><td id="r-576826" data-claire-element-id="576826"><p id="r-576825" data-claire-element-id="576825">0x40</p></td></tr><tr id="r-576834" data-claire-element-id="576834"><td id="r-576829" data-claire-element-id="576829"><p id="r-576828" data-claire-element-id="576828">0000000010000000</p></td><td id="r-576831" data-claire-element-id="576831"><p id="r-576830" data-claire-element-id="576830">128</p></td><td id="r-576833" data-claire-element-id="576833"><p id="r-576832" data-claire-element-id="576832">0x80</p></td></tr><tr id="r-576841" data-claire-element-id="576841"><td id="r-576836" data-claire-element-id="576836"><p id="r-576835" data-claire-element-id="576835">0000000100000000</p></td><td id="r-576838" data-claire-element-id="576838"><p id="r-576837" data-claire-element-id="576837">256</p></td><td id="r-576840" data-claire-element-id="576840"><p id="r-576839" data-claire-element-id="576839">0x100</p></td></tr><tr id="r-576848" data-claire-element-id="576848"><td id="r-576843" data-claire-element-id="576843"><p id="r-576842" data-claire-element-id="576842">0000001000000000</p></td><td id="r-576845" data-claire-element-id="576845"><p id="r-576844" data-claire-element-id="576844">512</p></td><td id="r-576847" data-claire-element-id="576847"><p id="r-576846" data-claire-element-id="576846">0x200</p></td></tr><tr id="r-576855" data-claire-element-id="576855"><td id="r-576850" data-claire-element-id="576850"><p id="r-576849" data-claire-element-id="576849">0000010000000000</p></td><td id="r-576852" data-claire-element-id="576852"><p id="r-576851" data-claire-element-id="576851">1024</p></td><td id="r-576854" data-claire-element-id="576854"><p id="r-576853" data-claire-element-id="576853">0x400</p></td></tr><tr id="r-576862" data-claire-element-id="576862"><td id="r-576857" data-claire-element-id="576857"><p id="r-576856" data-claire-element-id="576856">0000100000000000</p></td><td id="r-576859" data-claire-element-id="576859"><p id="r-576858" data-claire-element-id="576858">2048</p></td><td id="r-576861" data-claire-element-id="576861"><p id="r-576860" data-claire-element-id="576860">0x800</p></td></tr><tr id="r-576869" data-claire-element-id="576869"><td id="r-576864" data-claire-element-id="576864"><p id="r-576863" data-claire-element-id="576863">0001000000000000</p></td><td id="r-576866" data-claire-element-id="576866"><p id="r-576865" data-claire-element-id="576865">4096</p></td><td id="r-576868" data-claire-element-id="576868"><p id="r-576867" data-claire-element-id="576867">0x1000</p></td></tr><tr id="r-576876" data-claire-element-id="576876"><td id="r-576871" data-claire-element-id="576871"><p id="r-576870" data-claire-element-id="576870">0010000000000000</p></td><td id="r-576873" data-claire-element-id="576873"><p id="r-576872" data-claire-element-id="576872">8192</p></td><td id="r-576875" data-claire-element-id="576875"><p id="r-576874" data-claire-element-id="576874">0x2000</p></td></tr><tr id="r-576883" data-claire-element-id="576883"><td id="r-576878" data-claire-element-id="576878"><p id="r-576877" data-claire-element-id="576877">0100000000000000</p></td><td id="r-576880" data-claire-element-id="576880"><p id="r-576879" data-claire-element-id="576879">16384</p></td><td id="r-576882" data-claire-element-id="576882"><p id="r-576881" data-claire-element-id="576881">0x4000</p></td></tr><tr id="r-576890" data-claire-element-id="576890"><td id="r-576885" data-claire-element-id="576885"><p id="r-576884" data-claire-element-id="576884">1000000000000000</p></td><td id="r-576887" data-claire-element-id="576887"><p id="r-576886" data-claire-element-id="576886">32768</p></td><td id="r-576889" data-claire-element-id="576889"><p id="r-576888" data-claire-element-id="576888">0x8000</p></td></tr></tbody></table><p id="r-576893" data-claire-element-id="576893">En base 2, les puissances de 2 s'écrivent avec un seul <strong>1</strong>, tout le reste étant des <strong>0</strong>. Ce sont donc les puissances de 2 qui nous intéressent.</p><aside id="r-576895" data-claire-element-id="576895" data-claire-semantic="information"><p id="r-576894" data-claire-element-id="576894">Nous remarquons qu'il est beaucoup plus simple de les écrire en hexadécimal qu'en base 10 ! Il suffit de se souvenir de la progression 1 - 2 - 4 - 8, puis de recommencer en ajoutant un zéro à droite ! :p</p></aside><h2 id="r-en-pratique-et-en-php" data-claire-element-id="576899">En pratique... et en PHP</h2><p id="r-576897" data-claire-element-id="576897">Voici un petit exemple de ce que pourrait être la gestion des droits avec les opérateurs de bits.</p><pre id="r-576898" data-claire-element-id="576898"><code data-claire-semantic="html+php">&lt;?php
    /* Définition des droits dans un fichier PHP * 
    *********************************************
    Les droits pourraient aussi être définis dans une table, ce qui permettrait facilement d'accroître la liste et de créer des checkbox dans les formulaires d'inscription. */
 
    define ('LIRE_ARTICLE',    0x01);
    define ('ECRIRE_ARTICLE',  0x02);
    define ('PUBLIER_ARTICLE', 0x04);
    define ('PROPOSER_NEW',    0x08);
    define ('VALIDER_NEW',     0x10);
    define ('GERER_MEMBRES',   0x20);
 
 
    /* Attribution des droits *
    ************************** 
    On suppose que les variables $Droit_lecture, $Droit_Publication... sont récupérées d'un formulaire ; on utilise donc l'opérateur OU Binaire combiné à l'opérateur d'assignation = . */
 
    $DroitsDuMembre = 0;
    if ($Droit_lecture)     $DroitsDuMembre |= LIRE_ARTICLE;
    if ($Droit_Publication) $DroitsDuMembre |= ECRIRE_ARTICLE;  
    // etc ...
 
    // Le membre devient newser... On lui donne plusieurs droits d'un coup.
    $DroitsDuMembre |= PROPOSER_NEW | VALIDER_NEW;
 
 
    /* Suppression de droits *
    ***********************/
    // Les news n'étaient pas bonnes ; retrait des droits correspondants.
    $DroitsDuMembre &amp;= ~(PROPOSER_NEW | VALIDER_NEW);
    // Interprétation de droite à gauche :
    // On a commencé par créer le droit réunissant les deux à supprimer par | .
    // Ensuite, on a créé le masque de cet ensemble de droits par ~ .
    // Enfin, on utilise &amp; pour ne garder que les autres droits du membre.
 
 
    /* Login de l'utilisateur *
    *************************/
    // Connexion à la base de données [...]
 
    $Resultat = mysql_query(&quot;SELECT Nom, Pass, Droits FROM membres WHERE Pseudo='$Pseudo' &quot;);
    if ($Donnee = mysql_fetch_array($Resultat)) {
        //... Vérifier le mot de passe,  etc. ...
        $_SESSION['droits'] = (int)$Donnee['Droits'];
    }
 
 
    /* Examen des droits avant d'autoriser l'accès à une page *
    *********************************************************/
 
    /* ATTENTION, les variables de PHP n'ont pas vraiment un type défini, il est donc utile de signaler au programme que l'on veut comparer deux nombres et non deux chaînes de caractères. */
    // Le membre a-t-il le droit de publier les articles ?
 
    // On utilise l'opérateur &amp; pour tester le droit.
    if (!((int)$_SESSION['droits'] &amp; PUBLIER_ARTICLE)) {
        echo 'Désolé, mais cette page t\'est interdite...';
        exit;
    }
?&gt;</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits">Introduction aux opérateurs de bits</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
Vous avez dit opérateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
Gérer les droits des utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
Penser binaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
Les opérateurs de bits &amp; et |
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
Les opérateurs de bits ^ et ~
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
Les droits avec les opérateurs de bits
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/appendice-les-operateurs-de-decalage">
Appendice : les opérateurs de décalage
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
<span class="arrow"></span>
<span class="next">Les opérateurs de bits ^ et ~</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/appendice-les-operateurs-de-decalage">
<span class="next">Appendice : les opérateurs de décalage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Appendicelesoprateursdedcalage"></a><h2>Appendice : les opérateurs de décalage</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
<span class="arrow"></span>
<span class="next">Les droits avec les opérateurs de bits</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-576901" data-claire-element-id="576901">Initialement, je ne pensais pas vous en parler, car je ne les avais pas utilisés en PHP. Mais DHKold a suggéré de leur consacrer un petit paragraphe, ce qui me convient tout à fait puisqu'en avançant dans mon projet, j'ai découvert qu'ils étaient très utiles ! :p</p><p id="r-576902" data-claire-element-id="576902"><em>Votre site s'est bien développé, et vous proposez à vos membres toute une série d'options (recevoir un mail lorsque l'on a un message personnel, afficher ou masquer tel ou tel menu...). Pour ne pas encombrer votre table « membres », vous décidez d'utiliser un champ (entier non signé) pour stocker l'ensemble des options. Toutes les options sont rassemblées dans une table de votre base de données, et vous voulez créer un script pour gérer cette table directement en ligne.</em></p><h2 id="r-lister-les-puissances-de-2-operateur-decalage-a-gauche" data-claire-element-id="576921">Lister les puissances de 2 : opérateur <strong>&lt;&lt;</strong> (décalage à gauche)</h2><div id="r-576904" data-claire-element-id="576904" data-claire-semantic="question"><p id="r-576903" data-claire-element-id="576903">À chaque option doit correspondre un ID qui soit une puissance de 2 (un nombre avec un seul bit à 1). Mais comment vérifier que l'entrée saisie dans le champ ID en soit une ?</p></div><p id="r-576905" data-claire-element-id="576905">Puisqu'il n'y a que trente-et-une puissances de 2 utilisables, nous allons les tester toutes ! :o</p><p id="r-576906" data-claire-element-id="576906">L'algorithme pourrait s'écrire :</p><pre id="r-576907" data-claire-element-id="576907"><code>Pour la suite des puissances de 2 $p2 à partir de 1 (= 2 puissance 0), et inférieur à 2 puissance 31 :
 
         si $p2 est égal au nombre testé : le nombre testé est une puissance de 2;
 
         sinon je multiplie $p2 par 2 et je recommence le test....</code></pre><p id="r-576908" data-claire-element-id="576908">Ce sera peut-être plus clair en PHP :</p><pre id="r-576909" data-claire-element-id="576909"><code data-claire-semantic="html+php">function EstPuissanceDe2 ($Nombre_a_tester) {
        for ($i = 1 ; $i &lt; 0x80000000 ; $i *= 2) {
                if ($i == $Nombre_a_tester) {
                        // Le nombre est une puissance de 2
                        return TRUE;
                }
        }
        // Le nombre n'est pas une puissance de 2 &lt; 2 puissance 31
        return FALSE;
}</code></pre><aside id="r-576911" data-claire-element-id="576911" data-claire-semantic="error"><p id="r-576910" data-claire-element-id="576910">N'utilisez pas le code ci-dessus : il n'est pas très efficace, et en fait, ce n'est pas sûr qu'il fonctionne !</p></aside><p id="r-576912" data-claire-element-id="576912">Nous avons vu que pour multiplier un nombre écrit en binaire par 2, il suffisait de rajouter un 0 à droite. C'est exactement ce que fait l'opérateur de décalage vers la gauche, que l'on note <strong>&lt;&lt;</strong>. Il rajoute de un à trente-deux zéro(s) à droite (et supprime les un à trente-deux bits les plus à gauches).</p><p id="r-576913" data-claire-element-id="576913">0000000000001010&lt;&lt; 1 est égal à 0000000000010100 (multiplication par 2)<br/>0000000000001010&lt;&lt; 4 est égal à 0000000010100000 (multiplication par 2 puissance 4 = 16)</p><aside id="r-576915" data-claire-element-id="576915" data-claire-semantic="information"><p id="r-576914" data-claire-element-id="576914">Pour l'ordinateur, lui demander de faire un décalage d'un bit à gauche est encore plus simple à comprendre que de lui demander de multiplier par 2.</p></aside><p id="r-576916" data-claire-element-id="576916">Nous pouvons donc remplacer l'instruction $i * 2 par $i &lt;&lt; 1</p><p id="r-576917" data-claire-element-id="576917">Reste un petit problème :<br/> 2 puissance 31 s'écrit en hexadécimal 0x80000000, ce qui est un nombre positif.<br/> En binaire, ce nombre donne : 10000000 00000000 00000000 00000000). <br/> Pour les systèmes 32 bits (la majorité des ordinateurs personnels actuels), ceci peut désigner aussi bien un entier non signé positif, qu'un entier signé négatif.<br/> Or, comme nous n'avons rien spécifié de particulier, la variable $i sera supposée être un entier signé... Lorsqu'elle prendra la valeur 2 puissance 31, elle sera en fait un nombre négatif, donc inférieure à 0x80000000 =&gt; La boucle ne s'interrompt pas !<br/> La prochaine itération donnera donc :<br/>0x80000000 &lt;&lt; 1 = 0x00000000 = 0; (Le bit le plus à gauche qui était à 1 est supprimé et on ajoute un 0 à droite : il ne reste que 32 0 !).<br/> Les itérations suivantes donneront toutes le même 0 (appliquer un décalage sur 0 donne toujours 0 par définition). Nous entrerons donc dans une boucle infinie !</p><p id="r-576918" data-claire-element-id="576918">La solution sera d'utiliser un des opérateurs de bits que nous avons déjà vu, et de remplacer l'instruction &quot;$i &lt; 0x80000000&quot;; par &quot;$i ^ 0x80000000&quot;; que l'on pourra traduire « tant que $iest différent de 0x80000000 ».</p><p id="r-576919" data-claire-element-id="576919">Nous obtenons donc le code suivant :</p><pre id="r-576920" data-claire-element-id="576920"><code data-claire-semantic="html+php">function EstPuissanceDe2 ($Nombre_a_tester) {
        for ($i = 1 ; $i ^ 0x80000000 ; $i &lt;&lt;= 1) {
                if (! ($i ^ (int) $Nombre_a_tester)) {
                        // s'ils ne sont pas différents, c'est qu'ils sont égaux !
                        return TRUE;
                }
        }
        // Le nombre n'est pas une puissance de 2 inférieure à 2 puissance 31
        return FALSE;
}</code></pre><h2 id="r-operateur-de-decalage-vers-la-droite" data-claire-element-id="576975">Opérateur de décalage vers la droite : <strong>&gt;&gt;</strong></h2><p id="r-576922" data-claire-element-id="576922">C'est, bien sûr, exactement le contraire du décalage vers la gauche : on efface n bit(s) le(s) plus à droite et on ajoute n 0 à gauche, n pouvant aller de 1 à 31 (un décalage à droite ou à gauche de 32 bits ne servirait à rien : le résultat serait toujours égal à 0 sur un système 32 bits !).</p><p id="r-576923" data-claire-element-id="576923">Vous voulez afficher un tableau comportant pour chaque membre sa situation par rapport à toutes les options possibles.</p><table id="r-576965" data-claire-element-id="576965"><thead id="r-576937" data-claire-element-id="576937"><tr id="r-576936" data-claire-element-id="576936"><th id="r-576925" data-claire-element-id="576925"><p id="r-576924" data-claire-element-id="576924">Membre</p></th><th id="r-576927" data-claire-element-id="576927"><p id="r-576926" data-claire-element-id="576926">Option 1</p></th><th id="r-576929" data-claire-element-id="576929"><p id="r-576928" data-claire-element-id="576928">Option 2</p></th><th id="r-576931" data-claire-element-id="576931"><p id="r-576930" data-claire-element-id="576930">Option 3</p></th><th id="r-576933" data-claire-element-id="576933"><p id="r-576932" data-claire-element-id="576932">Option 4</p></th><th id="r-576935" data-claire-element-id="576935"><p id="r-576934" data-claire-element-id="576934">Option 5</p></th></tr></thead><tbody id="r-576964" data-claire-element-id="576964"><tr id="r-576950" data-claire-element-id="576950"><td id="r-576939" data-claire-element-id="576939"><p id="r-576938" data-claire-element-id="576938">Titi</p></td><td id="r-576941" data-claire-element-id="576941"><p id="r-576940" data-claire-element-id="576940">oui</p></td><td id="r-576943" data-claire-element-id="576943"><p id="r-576942" data-claire-element-id="576942">non</p></td><td id="r-576945" data-claire-element-id="576945"><p id="r-576944" data-claire-element-id="576944">oui</p></td><td id="r-576947" data-claire-element-id="576947"><p id="r-576946" data-claire-element-id="576946">oui</p></td><td id="r-576949" data-claire-element-id="576949"><p id="r-576948" data-claire-element-id="576948">non</p></td></tr><tr id="r-576963" data-claire-element-id="576963"><td id="r-576952" data-claire-element-id="576952"><p id="r-576951" data-claire-element-id="576951">GrosMinet</p></td><td id="r-576954" data-claire-element-id="576954"><p id="r-576953" data-claire-element-id="576953">oui</p></td><td id="r-576956" data-claire-element-id="576956"><p id="r-576955" data-claire-element-id="576955">oui</p></td><td id="r-576958" data-claire-element-id="576958"><p id="r-576957" data-claire-element-id="576957">oui</p></td><td id="r-576960" data-claire-element-id="576960"><p id="r-576959" data-claire-element-id="576959">non</p></td><td id="r-576962" data-claire-element-id="576962"><p id="r-576961" data-claire-element-id="576961">non</p></td></tr></tbody></table><p id="r-576966" data-claire-element-id="576966">Pour remplir les titres du tableau, il suffit de faire une requête SELECT à partir de la table des options. Mais comment afficher les options de chaque membre, puisque ces options sont stockées dans un entier ?<br/> Une façon simple est d'examiner un par un les bits du champ Options des membres, et une petite boucle nous permettra de le faire sans difficulté :</p><pre id="r-576967" data-claire-element-id="576967"><code data-claire-semantic="html+php">&lt;?php
 
        // Connexion à la base de données [etc ...]
 
        // On compte les options.
        $Resultat = mysql_query(&quot;SELECT COUNT(*) FROM Options&quot;);
        if ($Donnee = mysql_fetch_row($Resultat)) {
                $Nbre_Options = $Donnee[0];
        }
 
        // On récupère le nom des options et on les liste dans l'en-tête du tableau. 
        // [...] vous savez très bien faire ce code...
 
        // Afficher les options pour chaque membre :
        $Resultat = mysql_query(&quot;SELECT Nom, Options FROM membres&quot;);
        while ($Donnee = mysql_fetch_array($Resultat)) {
                // Pour chaque membre, on affiche le nom…
                echo '&lt;tr&gt;&lt;td&gt;', $Donnee['Nom'], '&lt;/td&gt;';
                // … et on récupère les options.
                $Options = (int) $Donnee['Options'];
/*******************************
 * Partie intéressante du code *
 *******************************/
                for ($i = 0 ; $i &lt; $Nbre_Options ; $i ++) {
                        // On examine le bit le plus à droite (1 est le masque correspondant au bit le plus à droite).
                        if ($Options &amp; 1) {
                                echo '&lt;td&gt;OUI&lt;/td&gt;';
                        }
                        else {
                                echo '&lt;td&gt;non&lt;/td&gt;';
                        }
                        // On passe au bit suivant des Options par un décalage à droite d'un bit.
                        $Options &gt;&gt;= 1;
                }
/*********************************
 * Fin de la partie intéressante *
 *********************************/
                // On ferme la ligne.
                echo '&lt;/tr&gt;';
        }
        // On ferme la table.
        echo '&lt;/table&gt;';
?&gt;</code></pre><p id="r-576968" data-claire-element-id="576968">J'espère vous avoir donné envie d'explorer le monde des opérateurs de bits.</p><p id="r-576969" data-claire-element-id="576969">Nous ne sommes pas obligés de ne stocker que des options de type oui / non. Nous pouvons aussi utiliser des valeurs sur plusieurs bits (4 choix utilisent 2 bits, 8 choix utilisent 3 bits, etc.). Le tout est d'utiliser les masques correspondants lors des opérations.</p><p id="r-576970" data-claire-element-id="576970">Vous trouverez d'autres exemples d'applications des opérateurs de bits dans <a href="http://www.dil.univ-mrs.fr/~guizol/Le_Site_JS/Chapitre_III/Chapitre_3.html">ce cours de javascript</a>, au paragraphe sur les opérateurs binaires.</p><p id="r-576971" data-claire-element-id="576971">Personnellement, j'ai mis assez longtemps avant de comprendre comment cela fonctionnait, mais je n'avais que des explications succinctes en anglais (ce n'était pas pour du PHP).</p><p id="r-576972" data-claire-element-id="576972">J'ai eu l'idée de ce « petit » tuto lorsque je me suis aperçu, en travaillant sur un intranet, que j'avais fait des erreurs dans ma gestion des droits...</p><aside id="r-576974" data-claire-element-id="576974" data-claire-semantic="information"><p id="r-576973" data-claire-element-id="576973">Revenir au binaire lorsque l'on n'est plus trop sûr (sur un petit bout de papier) !</p></aside>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits">Introduction aux opérateurs de bits</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/vous-avez-dit-operateur">
Vous avez dit opérateur ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/gerer-les-droits-des-utilisateurs">
Gérer les droits des utilisateurs
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/penser-binaire">
Penser binaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et">
Les opérateurs de bits &amp; et |
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-operateurs-de-bits-et-1">
Les opérateurs de bits ^ et ~
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
Les droits avec les opérateurs de bits
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/appendice-les-operateurs-de-decalage">
Appendice : les opérateurs de décalage
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/introduction-aux-operateurs-de-bits/les-droits-avec-les-operateurs-de-bits">
<span class="arrow"></span>
<span class="next">Les droits avec les opérateurs de bits</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/introduction-aux-operateurs-de-bits.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:11:57 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/introduction-aux-operateurs-de-bits.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:48:07 GMT -->
</html>