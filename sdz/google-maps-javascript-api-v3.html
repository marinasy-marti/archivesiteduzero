<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/google-maps-javascript-api-v3.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:03:23 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/google-maps-javascript-api-v3.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:45:15 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Google Maps JavaScript API V3</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/google-maps-javascript-api-v3.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Google Maps JavaScript API V3</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#GoogleMapsJavaScriptAPIV3">Google Maps JavaScript API V3</a><br/><a href="#Affichaged039unecarteGoogleMaps">Affichage d&#039;une carte Google Maps</a><br/><a href="#Crationd039overlays">Création d&#039;overlays</a><br/><a href="#Gestiondesvnementssouris">Gestion des évènements souris</a><br/></div>
<a name="GoogleMapsJavaScriptAPIV3"></a><h2>Google Maps JavaScript API V3</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/affichage-d-une-carte-google-maps">
<span class="next">Affichage d&#039;une carte Google Maps</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-387666" data-claire-element-id="387666">Dans le cadre de l'unité d'enseignement PRO (Projet) de la HEIG-VD (<a href="http://www.heig-vd.ch/">Haute Ecole d'Ingénierie et de Gestion du Canton de Vaud</a>), ce tutoriel a pour but de fournir une introduction à l'API Google Maps V3, qui à l'heure actuelle (31.05.10) vient de perdre sa dénomination &quot;labs&quot; (&quot;labs&quot; étant la dénomination Google pour &quot;version béta&quot;).</p><p id="r-387667" data-claire-element-id="387667">Pour pouvoir suivre ce tutoriel, il faut avoir un minimum de connaissances en <a href="http://www.siteduzero.com/tutoriel-3-8158-tout-sur-le-javascript.html">Javascript</a> et <a href="http://www.siteduzero.com/tutoriel-3-13666-apprenez-a-creer-votre-site-web.html">XHTML</a>.</p><p id="r-387668" data-claire-element-id="387668">Voici les points qui sont abordés dans ce tutoriel :</p><ul id="r-387675" data-claire-element-id="387675"><li id="r-387670" data-claire-element-id="387670"><p id="r-387669" data-claire-element-id="387669">Affichage d'une carte Google Maps</p></li><li id="r-387672" data-claire-element-id="387672"><p id="r-387671" data-claire-element-id="387671">Création d'overlays (marqueurs, polygones et polylignes)</p></li><li id="r-387674" data-claire-element-id="387674"><p id="r-387673" data-claire-element-id="387673">Gestion des évènements souris</p></li></ul>
</div><a name="Affichaged039unecarteGoogleMaps"></a><h2>Affichage d&#039;une carte Google Maps</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/creation-d-overlays">
<span class="next">Création d&#039;overlays</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-387676" data-claire-element-id="387676">Voici le code minimal pour créer une page XHTML affichant une carte.</p><pre id="r-387677" data-claire-element-id="387677"><code data-claire-semantic="html">&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; xml:lang=&quot;fr&quot;&gt;

	&lt;head&gt;
		&lt;title&gt;Tutoriel Google Maps&lt;/title&gt;
		&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=iso-8859-1&quot; /&gt;
		&lt;!-- Elément Google Maps indiquant que la carte doit être affiché en plein écran et
		qu'elle ne peut pas être redimensionnée par l'utilisateur --&gt;
		&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1.0, user-scalable=no&quot; /&gt;
		&lt;!-- Inclusion de l'API Google MAPS --&gt;
		&lt;!-- Le paramètre &quot;sensor&quot; indique si cette application utilise détecteur pour déterminer la position de l'utilisateur --&gt;
		&lt;script type=&quot;text/javascript&quot; src=&quot;http://maps.google.com/maps/api/js?sensor=false&quot;&gt;&lt;/script&gt;
		&lt;script type=&quot;text/javascript&quot;&gt;
			function initialiser() {
				var latlng = new google.maps.LatLng(46.779231, 6.659431);
				//objet contenant des propriétés avec des identificateurs prédéfinis dans Google Maps permettant
				//de définir des options d'affichage de notre carte
				var options = {
					center: latlng,
					zoom: 19,
					mapTypeId: google.maps.MapTypeId.ROADMAP
				};
				
				//constructeur de la carte qui prend en paramêtre le conteneur HTML
				//dans lequel la carte doit s'afficher et les options
				var carte = new google.maps.Map(document.getElementById(&quot;carte&quot;), options);
			}
		&lt;/script&gt;
	&lt;/head&gt;

	&lt;body onload=&quot;initialiser()&quot;&gt;
		&lt;div id=&quot;carte&quot; style=&quot;width:100%; height:100%&quot;&gt;&lt;/div&gt;
	&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-387678" data-claire-element-id="387678">Les 3 éléments importants que l'on retrouve dans ce code sont (1) l'importation de la librairie Google Maps grâce aux balises <code data-claire-semantic="html">&lt;meta name=&quot;viewport&quot; content=&quot;initial-scale=1.0, user-scalable=no&quot; /&gt;</code> et <code data-claire-semantic="html">&lt;script type=&quot;text/javascript&quot; src=&quot;http://maps.google.com/maps/api/js?sensor=false&quot;&gt;&lt;/script&gt;</code>, (2) le positionnement dans le corps de la page HTML d'une balise <code data-claire-semantic="html">&lt;div id=&quot;...&quot;&gt;</code> avec un certain id (identificateur que l'on utilisera dans le code Javascript lors de l'instanciation de la carte Google Maps pour définir son emplacement) et enfin (3) l'instanciation d'un objet de classe <code data-claire-semantic="javascript">google.maps.Map</code> représentant la carte qui sera affichée.</p><h2 id="r-options-de-la-carte" data-claire-element-id="387729">Options de la carte</h2><p id="r-387679" data-claire-element-id="387679">Pour créer une carte, il faut nécessairement définir les options suivantes, comme nous avons pu le voir dans le code ci-dessus :</p><ul id="r-387686" data-claire-element-id="387686"><li id="r-387681" data-claire-element-id="387681"><p id="r-387680" data-claire-element-id="387680"><code data-claire-semantic="javascript">center</code> : centre de la carte</p></li><li id="r-387683" data-claire-element-id="387683"><p id="r-387682" data-claire-element-id="387682"><code data-claire-semantic="javascript">zoom</code> : agrandissement de la carte</p></li><li id="r-387685" data-claire-element-id="387685"><p id="r-387684" data-claire-element-id="387684"><code data-claire-semantic="javascript">mapTypeId</code> : type de la carte</p></li></ul><table id="r-387717" data-claire-element-id="387717"><thead id="r-387694" data-claire-element-id="387694"><tr id="r-387693" data-claire-element-id="387693"><th id="r-387688" data-claire-element-id="387688"><p id="r-387687" data-claire-element-id="387687">Nom</p></th><th id="r-387690" data-claire-element-id="387690"><p id="r-387689" data-claire-element-id="387689">Signification</p></th><th id="r-387692" data-claire-element-id="387692"><p id="r-387691" data-claire-element-id="387691">Valeurs</p></th></tr></thead><tbody id="r-387716" data-claire-element-id="387716"><tr id="r-387701" data-claire-element-id="387701"><td id="r-387696" data-claire-element-id="387696"><p id="r-387695" data-claire-element-id="387695"><code data-claire-semantic="javascript">center</code></p></td><td id="r-387698" data-claire-element-id="387698"><p id="r-387697" data-claire-element-id="387697">centre de la carte</p></td><td id="r-387700" data-claire-element-id="387700"><p id="r-387699" data-claire-element-id="387699">coordonnées en latitude et longitude</p></td></tr><tr id="r-387708" data-claire-element-id="387708"><td id="r-387703" data-claire-element-id="387703"><p id="r-387702" data-claire-element-id="387702"><code data-claire-semantic="javascript">zoom</code></p></td><td id="r-387705" data-claire-element-id="387705"><p id="r-387704" data-claire-element-id="387704">agrandissement de la carte</p></td><td id="r-387707" data-claire-element-id="387707"><p id="r-387706" data-claire-element-id="387706"><code data-claire-semantic="javascript">0</code> à <code data-claire-semantic="javascript">20</code> (bornes comprises)</p></td></tr><tr id="r-387715" data-claire-element-id="387715"><td id="r-387710" data-claire-element-id="387710"><p id="r-387709" data-claire-element-id="387709"><code data-claire-semantic="javascript">mapTypeId</code></p></td><td id="r-387712" data-claire-element-id="387712"><p id="r-387711" data-claire-element-id="387711">type de la carte</p></td><td id="r-387714" data-claire-element-id="387714"><p id="r-387713" data-claire-element-id="387713"><code data-claire-semantic="javascript">google.maps.MapTypeId.ROADMAP</code>, <code data-claire-semantic="javascript">google.maps.MapTypeId.SATELLITE</code>, <code data-claire-semantic="javascript">google.maps.MapTypeId.HYBRID</code>, <code data-claire-semantic="javascript">google.maps.MapTypeId.TERRAIN</code></p></td></tr></tbody></table><aside id="r-387719" data-claire-element-id="387719" data-claire-semantic="information"><p id="r-387718" data-claire-element-id="387718">Dans Google Maps les coordonnées sont sous formes de latitude et de longitude. La librairie Google Maps met à disposition un constructeur permettant de créer un objet de classe <code data-claire-semantic="html">google.maps.LatLng(lat:number, lng:number)</code> qui prend en paramètre des nombres représentant, respectivement, la latitude et la longitude.</p></aside><p id="r-387720" data-claire-element-id="387720">Voici d'autres options intéressantes que l'on peut spécifier pour une carte :</p><ul id="r-387727" data-claire-element-id="387727"><li id="r-387722" data-claire-element-id="387722"><p id="r-387721" data-claire-element-id="387721"><code data-claire-semantic="javascript">disableDoubleClickZoom</code> : Si sa valeur est mise à <code data-claire-semantic="javascript">true</code>, cela désactive l'agrandissement en faisant un double-clic avec la souris.</p></li><li id="r-387724" data-claire-element-id="387724"><p id="r-387723" data-claire-element-id="387723"><code data-claire-semantic="javascript">draggable</code> : Si sa valeur est mise à <code data-claire-semantic="javascript">true</code>, cela désactive le fait de pouvoir faire glisser la carte en maintenant le clic sur elle.</p></li><li id="r-387726" data-claire-element-id="387726"><p id="r-387725" data-claire-element-id="387725"><code data-claire-semantic="javascript">scrollwheel</code> : Si sa valeur est mise à <code data-claire-semantic="javascript">true</code>, cela désactive l'agrandissement avec le scroll de la souris.</p></li></ul><p id="r-387728" data-claire-element-id="387728">Par défaut, ces trois options ont la valeur <code data-claire-semantic="javascript">true</code>.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3">Google Maps JavaScript API V3</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/affichage-d-une-carte-google-maps">
Affichage d&#039;une carte Google Maps
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/creation-d-overlays">
Création d&#039;overlays
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/gestion-des-evenements-souris">
Gestion des évènements souris
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/creation-d-overlays">
<span class="next">Création d&#039;overlays</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Crationd039overlays"></a><h2>Création d&#039;overlays</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/affichage-d-une-carte-google-maps">
<span class="arrow"></span>
<span class="next">Affichage d&#039;une carte Google Maps</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/gestion-des-evenements-souris">
<span class="next">Gestion des évènements souris</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-387731" data-claire-element-id="387731">Maintenant que l'on sait comment afficher une carte, il se peut que l'on ait besoin de disposer des éléments sur elle, pour, par exemple, indiquer un certain emplacement ou encore définir une zone géographique. Ceci peut se faire à l'aide des <em>overlays</em>.</p><p id="r-387732" data-claire-element-id="387732">Les <em>overlays</em> sont des éléments graphiques que l'ont peut poser ou dessiner sur une carte Google Maps.</p><p id="r-387733" data-claire-element-id="387733">Les <em>overlays</em> auxquels on s'intéresse ici sont les suivants :</p><ul id="r-387740" data-claire-element-id="387740"><li id="r-387735" data-claire-element-id="387735"><p id="r-387734" data-claire-element-id="387734">les marqueurs qui permettent d'indiquer un point sur la carte à la manière d'un drapeau</p></li><li id="r-387737" data-claire-element-id="387737"><p id="r-387736" data-claire-element-id="387736">les <em>polylines</em> qui permettent, par exemple, de faire des tracés de vols d'avion</p></li><li id="r-387739" data-claire-element-id="387739"><p id="r-387738" data-claire-element-id="387738">les polygones qui permettent de dessiner sur la carte une zone géographique</p></li></ul><h2 id="r-les-marqueurs-5" data-claire-element-id="387749">Les marqueurs</h2><p id="r-387741" data-claire-element-id="387741">Les marqueurs permettent de situer un point précis sur une carte.</p><p id="r-387742" data-claire-element-id="387742">Pour créer et afficher un marqueur, il faut au minimum spécifier une position (en latitude et longitude avec le constructeur <code data-claire-semantic="javascript">google.maps.LatLng() </code> vu dans la partie précédente &quot;Affichage d'une carte Google Maps&quot;) et la carte sur laquelle le marqueur doit être affiché.</p><pre id="r-387743" data-claire-element-id="387743"><code data-claire-semantic="javascript">function initialiser() {
	var latlng = new google.maps.LatLng(46.779231, 6.659431);
	
	var options = {
		center: latlng,
		zoom: 19,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	
	var carte = new google.maps.Map(document.getElementById(&quot;carte&quot;), options);
	
	/****************Nouveau code****************/

	//création du marqueur
	var marqueur = new google.maps.Marker({
		position: new google.maps.LatLng(46.779231, 6.659431),
		map: carte
	});

	/********************************************/
}</code></pre><aside id="r-387745" data-claire-element-id="387745" data-claire-semantic="information"><p id="r-387744" data-claire-element-id="387744">Utilisez le squelette HTML vu dans la partie précédente &quot;Affichage d'une carte Google Maps&quot; et remplacez le code de la fonction Javascript <code data-claire-semantic="javascript">initialiser() </code> qui s'y trouve par le code ci-dessus. Faites de même pour tous les prochains exemples.</p></aside><p id="r-387746" data-claire-element-id="387746">Ceci affiche un marqueur rouge sur le bâtiment &quot;Ecole d'ingénieurs du Canton de Vaud&quot; que l'on voit sur la carte.</p><p id="r-387747" data-claire-element-id="387747">Il est possible de rendre le marqueur <em>draggable</em> (c'est-à-dire permettre qu'on puisse le déplacer au moyen de la souris par un glisser-déposer). Pour ce faire, on peut soit, lors de la création du marqueur, spécifier dans les options <code data-claire-semantic="javascript">draggable: true </code> (entre les accolades dans les paramètres du constructeur, ici <code data-claire-semantic="javascript">new google.maps.Marker({...}) </code>), soit, après avoir créé le marqueur <code data-claire-semantic="javascript">marqueur </code>, faire un <code data-claire-semantic="javascript">setDraggable(true) </code>.</p><p id="r-387748" data-claire-element-id="387748">De la même manière, on peut aussi modifier l'image du marqueur par la propriété <code data-claire-semantic="javascript">icon: &quot;./mon_image.png&quot; </code> ou la fonction <code data-claire-semantic="javascript">setIcon(&quot;./mon_image.png&quot;) </code>.</p><h2 id="r-les-polylines" data-claire-element-id="387766">Les polylines</h2><p id="r-387750" data-claire-element-id="387750">Les <em>polylines</em> permettent de dessiner des lignes droites attachées les unes aux autres sur la carte. Ceci peut permettre, par exemple, de dessiner un itinéraire sur la carte Google Maps.</p><p id="r-387751" data-claire-element-id="387751">Pour créer et dessiner un <em>polyline</em>, il est nécessaire de définir son chemin, c'est-à-dire les coordonnées par lesquelles il passe. Pour ce faire, il faut créer un tableau dont les éléments sont des instances de la classe <code data-claire-semantic="javascript">google.maps.LatLng() </code>.</p><p id="r-387752" data-claire-element-id="387752">Voici le tableau du parcours du bus que les étudiants de la Heig-VD doivent prendre tous les matins depuis la gare pour aller à l'école :</p><pre id="r-387753" data-claire-element-id="387753"><code data-claire-semantic="javascript">//chemin du tracé du futur polyline
var parcoursBus = [
	new google.maps.LatLng(46.781367900048, 6.6401992834884),
	new google.maps.LatLng(46.780821285011, 6.6416348016222),
	new google.maps.LatLng(46.780496546047, 6.6421830461926),
	new google.maps.LatLng(46.779835306991, 6.6426765713417),
	new google.maps.LatLng(46.777748677169, 6.6518819126808),
	new google.maps.LatLng(46.778027878803, 6.6541349682533),
	new google.maps.LatLng(46.778484884759, 6.6557324922045),
	new google.maps.LatLng(46.778752327087, 6.6573654211838),
	new google.maps.LatLng(46.778605381016, 6.6588674582321)
];</code></pre><p id="r-387754" data-claire-element-id="387754">Lorsque ceci est fait, il faut créer le <em>polyline</em> en spécifiant pour la propriété <code data-claire-semantic="javascript">path </code> le tableau déclaré ci-dessus.</p><pre id="r-387755" data-claire-element-id="387755"><code data-claire-semantic="javascript">var traceParcoursBus = new google.maps.Polyline({
	path: parcoursBus,//chemin du tracé
	strokeColor: &quot;#FF0000&quot;,//couleur du tracé
	strokeOpacity: 1.0,//opacité du tracé
	strokeWeight: 2//grosseur du tracé
});</code></pre><p id="r-387756" data-claire-element-id="387756">Enfin, afin d'afficher le tracé sur la carte, il faut utiliser la méthode <code data-claire-semantic="javascript">setMap() </code> de notre objet <code data-claire-semantic="javascript">traceParcoursBus </code>.</p><pre id="r-387757" data-claire-element-id="387757"><code data-claire-semantic="javascript">//lier le tracé à la carte
//ceci permet au tracé d'être affiché sur la carte
traceParcoursBus.setMap(carte);</code></pre><aside id="r-387759" data-claire-element-id="387759" data-claire-semantic="information"><p id="r-387758" data-claire-element-id="387758">Au lieu de faire un <code data-claire-semantic="javascript">setMap() </code>, on aurait pu, lors de la création du <em>polyline</em>, spécifier la propriété <code data-claire-semantic="javascript">map </code> dans les paramètres du constructeur <code data-claire-semantic="javascript">new google.maps.Polyline({...}) </code>.</p></aside><aside id="r-387761" data-claire-element-id="387761" data-claire-semantic="warning"><p id="r-387760" data-claire-element-id="387760">Quand on ajoute une propriété dans les paramètres du constructeur, il ne faut pas oublier de vérifier que seule la dernière définition de propriété ne se termine pas par une virgule et qu'à la fin de toutes les autres une virgule est présente.</p></aside><p id="r-387762" data-claire-element-id="387762">Voici ce que le code de notre fonction <code data-claire-semantic="javascript">initialiser() </code> donne au final :</p><pre id="r-387763" data-claire-element-id="387763"><code data-claire-semantic="javascript">function initialiser() {
	var latlng = new google.maps.LatLng(46.779231, 6.659431);
	
	var options = {
		center: latlng,
		zoom: 19,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	
	var carte = new google.maps.Map(document.getElementById(&quot;carte&quot;), options);
	
	/****************Nouveau code****************/

	//redéfinition du centre de la carte
	carte.setCenter(new google.maps.LatLng(46.779872043155, 6.6497500934796));
	//redéfinition du zoom
	carte.setZoom(15);
	
	//chemin du tracé
	var parcoursBus = [
		new google.maps.LatLng(46.781367900048, 6.6401992834884),
		new google.maps.LatLng(46.780821285011, 6.6416348016222),
		new google.maps.LatLng(46.780496546047, 6.6421830461926),
		new google.maps.LatLng(46.779835306991, 6.6426765713417),
		new google.maps.LatLng(46.777748677169, 6.6518819126808),
		new google.maps.LatLng(46.778027878803, 6.6541349682533),
		new google.maps.LatLng(46.778484884759, 6.6557324922045),
		new google.maps.LatLng(46.778752327087, 6.6573654211838),
		new google.maps.LatLng(46.778605381016, 6.6588674582321)
	];
	
	var traceParcoursBus = new google.maps.Polyline({
		path: parcoursBus,//chemin du tracé
		strokeColor: &quot;#FF0000&quot;,//couleur du tracé
		strokeOpacity: 1.0,//opacité du tracé
		strokeWeight: 2//grosseur du tracé
	});
	
	//lier le tracé à la carte
	//ceci permet au tracé d'être affiché sur la carte
	traceParcoursBus.setMap(carte);

	/********************************************/
}</code></pre><aside id="r-387765" data-claire-element-id="387765" data-claire-semantic="information"><p id="r-387764" data-claire-element-id="387764">Vous pouvez voir que j'ai ajouté sous le commentaire &quot;Nouveau code&quot; deux autres instructions. J'aurais pu mettre tout ceci dans les options de la carte, mais j'ai préféré faire de cette manière pour bien faire la différence entre le code original de notre fonction <code data-claire-semantic="javascript">initialiser() </code> et tout ce que nous venons d'ajouter.</p></aside><h2 id="r-les-polygones-1" data-claire-element-id="387780">Les polygones</h2><p id="r-387767" data-claire-element-id="387767">Sur une carte Google Maps, on peut aussi dessiner des polygones. Un exemple d'utilité pratique serait de définir par ce biais un secteur ou une zone.</p><p id="r-387768" data-claire-element-id="387768">Créer un polygone sur la carte est extrêmement similaire à la création d'un <em>polyline</em> que l'on vient de voir. Un peu comme avant, il faut :</p><ol id="r-387775" data-claire-element-id="387775"><li id="r-387770" data-claire-element-id="387770"><p id="r-387769" data-claire-element-id="387769">Créer un tableau contenant tous les sommets du polygone</p></li><li id="r-387772" data-claire-element-id="387772"><p id="r-387771" data-claire-element-id="387771">Créer le polygone avec le constructeur <code data-claire-semantic="javascript">google.maps.Polygon()</code></p></li><li id="r-387774" data-claire-element-id="387774"><p id="r-387773" data-claire-element-id="387773">Afficher le polygone sur la carte</p></li></ol><p id="r-387776" data-claire-element-id="387776">Voici ce que donne le code :</p><pre id="r-387777" data-claire-element-id="387777"><code data-claire-semantic="javascript">function initialiser() {
	var latlng = new google.maps.LatLng(46.779231, 6.659431);
	
	var options = {
		center: latlng,
		zoom: 19,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	
	var carte = new google.maps.Map(document.getElementById(&quot;carte&quot;), options);
	
	/****************Nouveau code****************/
	
	//redéfinition du zoom
	carte.setZoom(18);
	
	//sommets du polygone
	var parcelleHeig = [
		new google.maps.LatLng(46.779733557514, 6.660767535),
		new google.maps.LatLng(46.780189079483, 6.6595337188532),
		new google.maps.LatLng(46.779114923142, 6.6580590403695),
		new google.maps.LatLng(46.778462483896, 6.6592118537714)
	];

	polygoneParcelleHeig = new google.maps.Polygon({
		paths: parcelleHeig,//sommets du polygone
		strokeColor: &quot;#0FF000&quot;,//couleur des bords du polygone
		strokeOpacity: 0.8,//opacité des bords du polygone
		strokeWeight: 2,//épaisseur des bords du polygone
		fillColor: &quot;#0FF000&quot;,//couleur de remplissage du polygone
		fillOpacity: 0.35////opacité de remplissage du polygone
	});

	//lier le polygone à la carte
	//ceci permet au polygone d'être affiché sur la carte
	polygoneParcelleHeig.setMap(carte);

	/********************************************/
}</code></pre><aside id="r-387779" data-claire-element-id="387779" data-claire-semantic="information"><p id="r-387778" data-claire-element-id="387778">Notez qu'il n'est pas nécessaire lors de la définition des sommets de la parcelle de définir le dernier sommet sur le premier afin de fermer le polygone ; le dernier sommet sera automatiquement relié au premier.</p></aside>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3">Google Maps JavaScript API V3</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/affichage-d-une-carte-google-maps">
Affichage d&#039;une carte Google Maps
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/creation-d-overlays">
Création d&#039;overlays
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/gestion-des-evenements-souris">
Gestion des évènements souris
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/affichage-d-une-carte-google-maps">
<span class="arrow"></span>
<span class="next">Affichage d&#039;une carte Google Maps</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/gestion-des-evenements-souris">
<span class="next">Gestion des évènements souris</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Gestiondesvnementssouris"></a><h2>Gestion des évènements souris</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/creation-d-overlays">
<span class="arrow"></span>
<span class="next">Création d&#039;overlays</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-387782" data-claire-element-id="387782">Il est possible avec Google Maps d'attacher des gestionnaires d'évènements à certains objets de Google Maps comme les cartes, les marqueurs, les polygones, etc.</p><p id="r-387783" data-claire-element-id="387783">Voici un tableau de quelques évènements que l'on peut gérer dans Google Maps :</p><table id="r-387831" data-claire-element-id="387831"><thead id="r-387789" data-claire-element-id="387789"><tr id="r-387788" data-claire-element-id="387788"><th id="r-387785" data-claire-element-id="387785"><p id="r-387784" data-claire-element-id="387784">Indentificateur de l'évènement</p></th><th id="r-387787" data-claire-element-id="387787"><p id="r-387786" data-claire-element-id="387786">Généré quand on ...</p></th></tr></thead><tbody id="r-387830" data-claire-element-id="387830"><tr id="r-387794" data-claire-element-id="387794"><td id="r-387791" data-claire-element-id="387791"><p id="r-387790" data-claire-element-id="387790"><code data-claire-semantic="javascript">'click'</code></p></td><td id="r-387793" data-claire-element-id="387793"><p id="r-387792" data-claire-element-id="387792">... clique avec la souris</p></td></tr><tr id="r-387799" data-claire-element-id="387799"><td id="r-387796" data-claire-element-id="387796"><p id="r-387795" data-claire-element-id="387795"><code data-claire-semantic="javascript">'rightclick'</code></p></td><td id="r-387798" data-claire-element-id="387798"><p id="r-387797" data-claire-element-id="387797">... fait un clic-droit avec la souris</p></td></tr><tr id="r-387804" data-claire-element-id="387804"><td id="r-387801" data-claire-element-id="387801"><p id="r-387800" data-claire-element-id="387800"><code data-claire-semantic="javascript">'dblclick'</code></p></td><td id="r-387803" data-claire-element-id="387803"><p id="r-387802" data-claire-element-id="387802">... fait un double-clic avec la souris</p></td></tr><tr id="r-387809" data-claire-element-id="387809"><td id="r-387806" data-claire-element-id="387806"><p id="r-387805" data-claire-element-id="387805"><code data-claire-semantic="javascript">'drag'</code></p></td><td id="r-387808" data-claire-element-id="387808"><p id="r-387807" data-claire-element-id="387807">... déplace un objet au moyen de la souris par un glisser-déposer (généré plusieurs fois tout au long de cette action)</p></td></tr><tr id="r-387814" data-claire-element-id="387814"><td id="r-387811" data-claire-element-id="387811"><p id="r-387810" data-claire-element-id="387810"><code data-claire-semantic="javascript">'dragstart'</code></p></td><td id="r-387813" data-claire-element-id="387813"><p id="r-387812" data-claire-element-id="387812">... une fois tout au début d'un déplacement d'un objet au moyen de la souris par un glisser-déposer</p></td></tr><tr id="r-387819" data-claire-element-id="387819"><td id="r-387816" data-claire-element-id="387816"><p id="r-387815" data-claire-element-id="387815"><code data-claire-semantic="javascript">'dragend'</code></p></td><td id="r-387818" data-claire-element-id="387818"><p id="r-387817" data-claire-element-id="387817">... une fois tout à la fin d'un déplacement d'un objet au moyen de la souris par un glisser-déposer</p></td></tr><tr id="r-387824" data-claire-element-id="387824"><td id="r-387821" data-claire-element-id="387821"><p id="r-387820" data-claire-element-id="387820"><code data-claire-semantic="javascript">'mouseover'</code></p></td><td id="r-387823" data-claire-element-id="387823"><p id="r-387822" data-claire-element-id="387822">... lorsque le pointeur de la souris entre sur la surface d'un objet Google Maps</p></td></tr><tr id="r-387829" data-claire-element-id="387829"><td id="r-387826" data-claire-element-id="387826"><p id="r-387825" data-claire-element-id="387825"><code data-claire-semantic="javascript">'mouseout'</code></p></td><td id="r-387828" data-claire-element-id="387828"><p id="r-387827" data-claire-element-id="387827">... lorsque le pointeur de la souris sort de la surface d'un objet Google Maps</p></td></tr></tbody></table><p id="r-387832" data-claire-element-id="387832">Créer un gestionnaire d'évènements se fait toujours de la même manière c'est pour cela qu'on ne fera que deux exemples : celui du <code data-claire-semantic="javascript">'click' </code> et celui du <code data-claire-semantic="javascript">'drag' </code>.</p><p id="r-387833" data-claire-element-id="387833">Voici ce à quoi le code de n'importe quel gestionnaire d'évènement ressemble :</p><pre id="r-387834" data-claire-element-id="387834"><code data-claire-semantic="javascript">//'evenement' est l'identificateur de l'évènement (voir tableau ci-dessus)
//obj est l'objet duquel nous souhaitons traiter les évènements
google.maps.event.addListener(obj,'evenement', function(event) {
	/*code qui doit s'executer lors de l'evenement*/
});</code></pre><aside id="r-387836" data-claire-element-id="387836" data-claire-semantic="information"><p id="r-387835" data-claire-element-id="387835">L'argument &quot;event&quot;, dans le code ci-dessus, n'est utile que si l'on souhaite accèder à ses propriétés. Par exemple, la propiété latLng représentant une latitude et une longitude est disponiple pour un event de type MouseEvent passé par l'évènement clic.</p></aside><h2 id="r-click-clic" data-claire-element-id="387845"><code data-claire-semantic="javascript">'click' </code> (clic)</h2><p id="r-387837" data-claire-element-id="387837">Reprenons le code que nous avions fait pour créer un marqueur dans la partie précédente &quot;Création d'overlays&quot; et ajoutons-y un gestionnaire d'évènements pour le clic sur le marqueur. Ce gestionnaire devra afficher un message d'alerte Javascript disant que le marqueur a été cliqué.</p><p id="r-387838" data-claire-element-id="387838">Voici à quoi le code ressemble :</p><pre id="r-387839" data-claire-element-id="387839"><code data-claire-semantic="javascript">function initialiser() {
	var latlng = new google.maps.LatLng(46.779231, 6.659431);
	
	var options = {
		center: latlng,
		zoom: 19,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	
	var carte = new google.maps.Map(document.getElementById(&quot;carte&quot;), options);

	//création du marqueur
	var marqueur = new google.maps.Marker({
		position: new google.maps.LatLng(46.779231, 6.659431),
		map: carte
	});

	/****************Nouveau code****************/
	
	google.maps.event.addListener(marqueur, 'click', function() {
		alert(&quot;Le marqueur a été cliqué.&quot;);//message d'alerte
	});
	
	/********************************************/
}</code></pre><p id="r-387840" data-claire-element-id="387840">Avec les connaissances que nous avons à ce stade, nous pouvons écrire un code qui permette de créer des marqueurs dynamiquement sur la carte.</p><p id="r-387841" data-claire-element-id="387841">Reprenons de nouveau le code de la fonction <code data-claire-semantic="javascript">initialiser() </code> du début de ce tutoriel et ajoutons-lui un gestionnaire d'événement clic associé cette fois-ci à la carte et non à un marqueur, puis mettons-y un code permettant de créer un marqueur (à chaque clic, donc) avec la position <code data-claire-semantic="javascript">event.latLng </code> qui est une propriété de l'<code data-claire-semantic="javascript">event </code> de type <code data-claire-semantic="javascript">MouseEvent </code>.</p><p id="r-387842" data-claire-element-id="387842">Voici ce que donne le code :</p><pre id="r-387843" data-claire-element-id="387843"><code data-claire-semantic="javascript">function initialiser() {
	var latlng = new google.maps.LatLng(46.779231, 6.659431);
	
	var options = {
		center: latlng,
		zoom: 19,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	
	var carte = new google.maps.Map(document.getElementById(&quot;carte&quot;), options);

	/****************Nouveau code****************/
	
	//tableau contenant tous les marqueurs que nous créerons
	var tabMarqueurs = new Array();
	
	//notez la présence de l'argument &quot;event&quot; entre les parenthèses de &quot;function()&quot;
	google.maps.event.addListener(carte, 'click', function(event) {
		tabMarqueurs.push(new google.maps.Marker({
			position: event.latLng,//coordonnée de la position du clic sur la carte
			map: carte//la carte sur laquelle le marqueur doit être affiché
		}));
	});
			
	/********************************************/
}</code></pre><p id="r-387844" data-claire-element-id="387844">Si vous testez ce code, vous pourrez voir qu'un marqueur est créé lors de chaque clic de la souris sur la carte.</p><h2 id="r-dragend-fin-d-un-glisser-deposer" data-claire-element-id="387853"><code data-claire-semantic="javascript">'dragend' </code> (fin d'un glisser-déposer)</h2><p id="r-387846" data-claire-element-id="387846">Pour illustrer la gestion de l'évènement <code data-claire-semantic="javascript">'dragend' </code>, nous utiliserons de nouveau le code que nous avons fait pour la création d'un marqueur dans la partie &quot;Création d'overlays&quot;.</p><p id="r-387847" data-claire-element-id="387847">L'exemple qui suit affiche, lorsque l'on déplace le marqueur, un message d'alerte Javascript indiquant la nouvelle coordonnée du marqueur.</p><pre id="r-387848" data-claire-element-id="387848"><code data-claire-semantic="javascript">function initialiser() {
	var latlng = new google.maps.LatLng(46.779231, 6.659431);
	
	var options = {
		center: latlng,
		zoom: 19,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};
	
	var carte = new google.maps.Map(document.getElementById(&quot;carte&quot;), options);

	//création du marqueur
	var marqueur = new google.maps.Marker({
		position: new google.maps.LatLng(46.779231, 6.659431),
		map: carte
	});
	
	/****************Nouveau code****************/

	//ne pas oublier de rendre le marqueur &quot;déplaçable&quot;
	marqueur.setDraggable(true);
	
	google.maps.event.addListener(marqueur, 'dragend', function(event) {
		//message d'alerte affichant la nouvelle position du marqueur
		alert(&quot;La nouvelle coordonnée du marqueur est : &quot;+event.latLng);
	});

	/********************************************/
}</code></pre><aside id="r-387850" data-claire-element-id="387850" data-claire-semantic="information"><p id="r-387849" data-claire-element-id="387849">Ce tutoriel a pu être créé essentiellement grâce à la documentation mis en ligne par Google qui se trouve sur le lien suivant : <a href="http://code.google.com/intl/fr/apis/maps/documentation/v3/">http://code.google.com/intl/fr/apis/ma [...] mentation/v3/</a></p></aside><p id="r-387851" data-claire-element-id="387851">N'ayant pas pour but d'être exhaustif, ce tutoriel permet néanmoins la familiarisation avec l'API Google Maps V3.</p><p id="r-387852" data-claire-element-id="387852">Pour pouvoir aller plus loin dans l'utilisation de Google Maps, il y a <a href="http://code.google.com/intl/fr/apis/maps/documentation/v3/">la documentation officielle de Google</a>, mais qui n'est malheureusement pas disponible en français.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3">Google Maps JavaScript API V3</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/affichage-d-une-carte-google-maps">
Affichage d&#039;une carte Google Maps
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/creation-d-overlays">
Création d&#039;overlays
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/gestion-des-evenements-souris">
Gestion des évènements souris
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/google-maps-javascript-api-v3/creation-d-overlays">
<span class="arrow"></span>
<span class="next">Création d&#039;overlays</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/google-maps-javascript-api-v3.html by HTTrack Website Copier/3.x [XR&CO'2013], Sat, 26 Oct 2013 20:03:23 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/google-maps-javascript-api-v3.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 03:45:15 GMT -->
</html>