<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/rofilage-geographique.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:11:59 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rofilage-geographique.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:31:25 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Profilage géographique</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/profilage-geographique.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Profilage géographique</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Profilagegographique">Profilage géographique</a><br/><a href="#Lathorie">La théorie</a><br/><a href="#LaFormule">La Formule</a><br/><a href="#LeProgramme">Le Programme</a><br/></div>
<a name="Profilagegographique"></a><h2>Profilage géographique</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-theorie-26">
<span class="next">La théorie</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-589697" data-claire-element-id="589697">Bonjour à tous !<br/> Je vais vous présenter dans ce tutoriel le <strong>profilage géographique</strong>.</p><p id="r-589698" data-claire-element-id="589698">Le profilage géographique est une technique notamment utilisée par la police pour retrouver des <em>serial killers</em>. Ce qu'elle a d'intéressant, c'est qu'elle met en évidence la manière dont trois branches paraissant plus ou moins éloignées sont utilisées de concert dans un même but. En effet, le profilage géographique est un excellent exemple montrant comment les sciences humaines, les mathématiques et l'informatique s'unissent pour combattre un ennemi commun (ou pas) : les <em>serial killers</em>.</p><p id="r-589699" data-claire-element-id="589699">Nous commencerons par voir comment fonctionne le profilage géographique en théorie, puis nous analyserons en détail les mathématiques qui se cachent derrière. Et finalement, nous coderons nous-mêmes un programme de profilage géographique avec ces connaissances nouvellement acquises.</p><aside id="r-589701" data-claire-element-id="589701" data-claire-semantic="warning"><p id="r-589700" data-claire-element-id="589700">En ce qui concerne la programmation, je vais tenter d'expliquer le tout en restant le plus général possible pour que vous puissiez utiliser le langage et la bibliothèque graphique que vous voulez. Néanmoins, les exemples seront donnés en <strong>C</strong> avec la bibliothèque <strong>SDL</strong>.</p></aside><p id="r-589702" data-claire-element-id="589702">Du côté des prérequis pour la partie mathématique, il n'y a rien de bien compliqué, mais ce n'est pas extrêmement simple non plus. Je m'efforcerai bien entendu d'être le plus clair possible, mais il faut quand même connaître quelques bases, telles que le théorème de Pythagore, les fractions, la règle de trois etc.</p><p id="r-589703" data-claire-element-id="589703">Alors, vous êtes prêts à chasser des <em>serial killers</em> ? J'espère que vous êtes bien armés, car ils sont dangereux ! :pirate:</p>
</div><a name="Lathorie"></a><h2>La théorie</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-formule-2">
<span class="next">La Formule</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-un-peu-d-histoire-18" data-claire-element-id="589705">Un peu d'histoire</h2><p id="r-589704" data-claire-element-id="589704">Le profilage géographique est une technique développée dans les années 90 par <strong>Kim Rossmo</strong>, un mathématicien policier. Il est le premier à avoir eu une approche différente dans les enquêtes concernant les <em>serial killers</em>.<br/> En effet, les mathématiciens criminologues de l'époque essayaient de créer un modèle mathématique qui leur permettrait de déterminer le lieu du prochain crime d'un <em>serial killer</em>. Mais Rossmo a très vite compris que cette idée était quasiment irréalisable, car il y avait trop de variables en jeu. Il eut alors l'idée de faire la démarche contraire : plutôt que d'essayer de prédire le lieu du prochain crime, il a cherché à <strong>trouver le lieu de résidence du criminel</strong>.</p><h2 id="r-le-jet-d-arrosage" data-claire-element-id="589710">Le jet d'arrosage</h2><figure id="r-589707" data-claire-element-id="589708"><img id="r-589706" data-claire-element-id="589706" src="medias/uploads.siteduzero.com_files_258001_259000_258846.jpg" alt="Jet d'arosage"/></figure><p id="r-589709" data-claire-element-id="589709"><em>Jet d'arrosage</em><br/> Pour illustrer cette idée, on emploie souvent la métaphore du jet d'arrosage. En effet, il est impossible de savoir où va tomber chaque goutte d'eau du jet. Il est aussi impossible de prédire l'endroit où le tueur va commettre son prochain crime.<br/> En revanche, en analysant le motif formé par les gouttes d'eau, il est possible de déterminer leur origine. C'est ce que l'on fait lorsque l'on effectue le profilage géographique d'un <em>serial killer</em>. <em>Via</em><strong>Via les coordonnées géographiques de chacun de ses crimes, on essaie de déterminer l'endroit où il habite</strong>.<br/> Cette technique fonctionne très bien : des analyses comportementales ont prouvé que les <em>serial killers</em> ont une prédisposition à commettre leurs crimes près de chez eux, mais pas trop près non plus (nous y reviendrons). Ainsi, en général, plus on s'éloigne du lieu du crime, plus la probabilité qu'il s'agisse de la zone de résidence du criminel diminue.</p><h2 id="r-l-etre-humain-et-l-aleatoire-une-grande-histoire-d-amour" data-claire-element-id="589717">L'être humain et l'aléatoire : une grande histoire d'amour</h2><p id="r-589711" data-claire-element-id="589711">Un autre problème avec les humains, qui nous arrange bien dans ce cas, est la difficulté qu'ils rencontrent à imiter l'aléatoire. ^^ <br/> En effet, les <em>serial killers</em> ont tendance à chercher à commettre leurs crimes de manière aléatoire pour tromper la police. Mais ils vont ainsi créer un motif uniforme (à l'instar des gouttes d'eau autour du jet), qui sera tout sauf aléatoire. Il est donc relativement facile de créer un modèle mathématique qui permettra de situer le lieu de résidence du criminel à partir du motif formé par les lieux des crimes.</p><p id="r-589712" data-claire-element-id="589712">Observez ces deux images illustrant mes propos.<br/> Si je demande à une personne quelconque de dessiner des points de manière aléatoire, il y a énormément de chances qu'elle me dessine quelque chose ressemblant à l'image de gauche. Mais un œil un peu critique remarquera très vite que cela n'a rien à voir avec de l'aléatoire. Une meilleure simulation de l'aléatoire, que l'on pourrait qualifier d'« aléatoire naturel », est quelque chose qui ressemblerait plutôt à l'image de droite.</p><figure id="r-589714" data-claire-element-id="589715"><img id="r-589713" data-claire-element-id="589713" src="medias/uploads.siteduzero.com_files_258001_259000_258847.jpg" alt="Aléatoire"/></figure><p id="r-589716" data-claire-element-id="589716"><em>Aléatoire « humain » (à gauche) et « naturel » (à droite)</em></p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique">Profilage géographique</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-theorie-26">
La théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-formule-2">
La Formule
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/le-programme-8">
Le Programme
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-formule-2">
<span class="next">La Formule</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LaFormule"></a><h2>La Formule</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-theorie-26">
<span class="arrow"></span>
<span class="next">La théorie</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/le-programme-8">
<span class="next">Le Programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-589719" data-claire-element-id="589719">Maintenant que nous avons compris l'idée qui se cache derrière le profilage géographique, analysons son aspect un peu plus mathématique.</p><h2 id="r-rigel" data-claire-element-id="589733">Rigel</h2><p id="r-589720" data-claire-element-id="589720">Je disais donc que, pour parvenir à calculer le lieu de résidence du <em>serial killer</em>, Rossmo a développé une unique formule (la <em>Formule de Rossmo</em>), qui permet de calculer la <em>probabilité</em> que le tueur en série habite dans une certaine zone de la région concernée par les meurtres.</p><aside id="r-589722" data-claire-element-id="589722" data-claire-semantic="warning"><p id="r-589721" data-claire-element-id="589721">En fait, le terme <em>probabilité</em> n'est pas le terme correct pour désigner le résultat que nous renvoie la formule. En effet, cette dernière calcule, pour chaque zone de la carte, une certaine valeur. Et ce que l'on va faire, c'est simplement relativiser les différentes valeurs entre elles. Donc, si par exemple la plus haute valeur correspond à 2000, et la plus petite à 1000, nous allons définir que la première équivaut aux 100 %, et la seconde à 0 %. Ainsi, la zone de valeur 1500 vaudra 50 %.<br/> Même si j'utiliserai dans la suite, pour des raisons pratiques, le terme « probabilité », il faudra comprendre qu'il s'agit d'une <strong>valeur relativisée</strong>, qui indique quelles sont les zones où le tueur a le plus de chances d'habiter, par rapport aux autres secteurs de la carte.</p></aside><p id="r-589723" data-claire-element-id="589723">Bref, la formule va ainsi nous permettre de <em>modéliser</em> le comportement du <em>serial killer</em> en appliquant ce que l'on sait sur son mode opératoire (abrégé aussi M.O. pour <em>modus operandi</em> en latin).</p><aside id="r-589725" data-claire-element-id="589725" data-claire-semantic="information"><p id="r-589724" data-claire-element-id="589724">Cette partie est bien entendu la plus difficile. Le travail du policier est de déterminer le profil psychologique le plus proche du <em>serial killer</em>. (Faut quand même leur laisser faire du boulot à ces policiers. Suffit pas de cliquer sur un bouton pour résoudre un crime. :-° )</p></aside><p id="r-589726" data-claire-element-id="589726">Une fois que ce profil a été déterminé, il ne reste plus au policier qu'à entrer les coordonnées des crimes dans un logiciel, ainsi que les autres informations sur le profil du <em>serial killer</em> (vous verrez de quoi je parle plus tard). Le programme s'occupera de calculer les probabilités sur une carte et coloriera les différentes valeurs de probabilités en une certaine couleur. Le logiciel en question s'appelle <a href="http://www.ecricanada.com/rigel/index.html">Rigel</a> et est utilisé partout dans le monde.</p><p id="r-589727" data-claire-element-id="589727">Sur l'image ci-dessous, nous pouvons observer un exemple de profil géographique (les zones en rouge représentant des régions à forte probabilité, tandis que les secteurs violets sont moins probables).</p><figure id="r-589729" data-claire-element-id="589730"><img id="r-589728" data-claire-element-id="589728" src="medias/uploads.siteduzero.com_files_258001_259000_258849.png" alt="Exemple"/></figure><p id="r-589731" data-claire-element-id="589731"><em>Exemple de profilage géographique</em></p><p id="r-589732" data-claire-element-id="589732">Bien entendu, ce qui nous intéresse est de savoir comment fonctionne ce programme ! …quoi, pas vous ? :euh:</p><h2 id="r-fonctionnement-general-de-la-formule" data-claire-element-id="589774">Fonctionnement général de la formule</h2><p id="r-589734" data-claire-element-id="589734">Nous abordons ici la partie difficile. Nous allons essayer de comprendre la Formule de Rossmo, qui permet d'afficher un profil géographique sur une carte. Âmes sensibles, s'abstenir, car ça pique les yeux. o_O</p><p id="r-589735" data-claire-element-id="589735">p_{i,j} = \sum_{n=1}^{c} \left [ { \frac{\phi}{ (|X_i-x_n| + |Y_j-y_n|)^f } } + { \frac{(1-\phi)(B^{g-f})}{ (2B - \mid X_i - x_n \mid - \mid Y_j-y_n \mid)^g } } ight ]</p><p id="r-589736" data-claire-element-id="589736">Ne vous inquiétez pas, nous allons découvrir ensemble la signification de cette belle formule. <br/> Néanmoins, pour les personnes plus expérimentées, voici un court descriptif des symboles.</p><ul id="r-589753" data-claire-element-id="589753"><li id="r-589738" data-claire-element-id="589738"><p id="r-589737" data-claire-element-id="589737">p_{i,j}\in\mathbb{R} : probabilité <em>p</em> que le tueur réside à la coordonnée (i;j).</p></li><li id="r-589740" data-claire-element-id="589740"><p id="r-589739" data-claire-element-id="589739">c\in\mathbb{N} : nombre de crimes.</p></li><li id="r-589742" data-claire-element-id="589742"><p id="r-589741" data-claire-element-id="589741">X_i,Y_j\in\mathbb{N} : position du point de coordonnées (i;j).</p></li><li id="r-589744" data-claire-element-id="589744"><p id="r-589743" data-claire-element-id="589743">x_n,y_n\in\mathbb{N} : coordonnées du crime <em>n</em>.</p></li><li id="r-589746" data-claire-element-id="589746"><p id="r-589745" data-claire-element-id="589745">f\in\mathbb{R} : accentue (f&gt;0) ou diminue (f&lt;0) l'effet « plus on s'éloigne, plus la probabilité baisse ».</p></li><li id="r-589748" data-claire-element-id="589748"><p id="r-589747" data-claire-element-id="589747">g\in\mathbb{R} : accentue (g&gt;0) ou diminue (g&lt;0) l'effet de « zone tampon ».</p></li><li id="r-589750" data-claire-element-id="589750"><p id="r-589749" data-claire-element-id="589749">B\in\mathbb{R} : rayon de la zone tampon.</p></li><li id="r-589752" data-claire-element-id="589752"><p id="r-589751" data-claire-element-id="589751">\phi = \begin{cases} 1, &amp; \mathrm{\quad if\;} ( \mid X_i - x_n \mid + \mid Y_i - y_n \mid ) &gt; B \quad \iff \quad (X_{n},Y_{n}) \in [-B;B]\\ 0, &amp; \mathrm{\quad else} \end{cases}</p></li></ul><p id="r-589754" data-claire-element-id="589754">Examinons à présent cette formule de façon plus détaillée. En premier lieu, imaginons la carte quadrillée d'une région :</p><figure id="r-589756" data-claire-element-id="589757"><img id="r-589755" data-claire-element-id="589755" src="medias/uploads.siteduzero.com_files_258001_259000_258850.jpg" alt="Carte"/></figure><p id="r-589758" data-claire-element-id="589758"><em>Carte</em></p><aside id="r-589760" data-claire-element-id="589760" data-claire-semantic="warning"><p id="r-589759" data-claire-element-id="589759">Lors d'applications réelles, chaque carré du quadrillage correspondra évidemment à un pixel. Pour des raisons de lisibilité, j'ai utilisé des carrés un peu plus gros.</p></aside><p id="r-589761" data-claire-element-id="589761">Vous remarquez que chaque carré est défini par les coordonnées <em>i</em> et <em>j</em>. La formule va en fait calculer pour chaque petit carré un à un (carré qui sera, pour rappel, un pixel en réalité) la probabilité que le tueur y réside. <br/> La grosse formule que vous voyez ci-dessus devra dès lors être appliquée à l'ensemble des carrés de notre carte ! :o <br/> C'est pour cela qu'elle contient p_{i,j}. Cela peut se traduire par : « la probabilité <em>p</em> que le tueur réside dans le carré de coordonnées <em>i</em> et <em>j</em> ». (Il est pas beau, le pouvoir qu'ont les maths de traduire une phrase en 3 symboles ? :lol: )</p><p id="r-589762" data-claire-element-id="589762">Observons donc par quel moyen la formule calcule cette probabilité. Tout d'abord, vous voyez ceci :</p><p id="r-589763" data-claire-element-id="589763">p_{i,j} = \sum_{n=1}^{c} \left [ ... ight ]</p><p id="r-589764" data-claire-element-id="589764">Le symbole \Sigma est la lettre grecque <em>sigma</em> (majuscule) et signifie en mathématiques « faire une somme de tout ce qui se trouve entre crochets ». En fait, pour comprendre comment ça marche, sachez que le fonctionnement est similaire à une boucle en programmation. La lettre que vous apercevez sous le sigma est la variable (ici, c'est la lettre <em>n</em>). Cette variable va s'incrémenter à chaque tour de boucle, la valeur de départ étant la valeur indiquée sous le sigma (ici 1). La somme s'arrêtera lorsque <em>n</em> sera égal au nombre indiqué au-dessus du sigma (la lettre <em>c</em>).</p><p id="r-589765" data-claire-element-id="589765">Voici un rapide exemple pour que vous compreniez. Si l'on écrit :</p><p id="r-589766" data-claire-element-id="589766">\sum_{n=1}^{10} n</p><p id="r-589767" data-claire-element-id="589767">Cela signifie simplement : « faire la somme de 1 + 2 + 3 + ... + 10 ». Ou, si vous préférez, en voici l'équivalent en C++ (c'est quasiment pareil pour la majorité des langages de programmation) :</p><pre id="r-589768" data-claire-element-id="589768"><code data-claire-semantic="cpp">int resultat = 0;

for(int n=1; n&lt;=10; n++)
   resultat+=n;</code></pre><p id="r-589769" data-claire-element-id="589769">Bref, si vous avez déjà programmé, vous ne devriez pas avoir de mal à saisir.</p><p id="r-589770" data-claire-element-id="589770">Revenons-en à notre formule. Si je vous dis maintenant que la lettre c signifie « nombre de crimes », vous devriez tout de suite comprendre ce que ceci implique.</p><p id="r-589771" data-claire-element-id="589771">\sum_{n=1}^{c} \left [ ... ight ]</p><p id="r-589772" data-claire-element-id="589772">Cela exprime que, pour la case que l'on est en train d'analyser, on va calculer la « probabilité » (qui sera en fait une valeur, comme je l'ai indiqué plus haut) que le tueur y habite, ce que l'on va faire pour chaque crime. Puis, toujours pour chaque crime, on va additionner cette valeur, d'où la somme. Admettons donc que nous nous trouvions dans le carré (2;3), et que notre tueur ait commis 2 crimes. Nous allons en ce cas d'abord calculer la valeur dans ce carré pour le crime numéro 1 (n=1) (disons que l'on trouve une valeur de 30). Ensuite, pour le même carré, nous prendrons le crime numéro 2 et calculerons la valeur (supposons que l'on obtienne 50). Alors, le résultat total pour cette case sera 80. Ce sera à nous ensuite de pondérer les différentes valeurs entre elles pour savoir quelles sont les cases les plus <em>probables</em> par rapport aux autres.</p><p id="r-589773" data-claire-element-id="589773">Maintenant que vous avez compris cette partie de la formule, nous allons pouvoir nous intéresser à ce qui se trouve à l'intérieur de la somme (c'est-à-dire tout ce qui est placé entre crochets). Car c'est cette partie de la formule qui calcule effectivement la probabilité.<br/> Pour la suite, gardez bien en tête que la formule entre crochets concerne un seul carré de coordonnées (i;j) et un seul crime <em>n</em>. Donc <em>n</em> est une variable qui correspond au numéro du crime. Ainsi, si le tueur a tué 5 personnes, n=1 indiquera le crime numéro 1 etc. Et <em>c</em> sera, dans mon exemple, évidemment égal à 5.</p><h2 id="r-le-coeur-de-la-formule" data-claire-element-id="589812">Le cœur de la formule</h2><p id="r-589775" data-claire-element-id="589775">Intéressons-nous maintenant à la partie de la formule qui calcule la probabilité pour le carré (i;j) et le crime <em>n</em> :</p><p id="r-589776" data-claire-element-id="589776">{ \frac{\phi}{ (|X_i-x_n| + |Y_j-y_n|)^f } } + { \frac{(1-\phi)(B^{g-f})}{ (2B - \mid X_i - x_n \mid - \mid Y_j-y_n \mid)^g } }</p><p id="r-589777" data-claire-element-id="589777">Si vous cherchez bien, vous verrez que les lettres i, j et n sont en indice : X_i \: Y_j \: x_n \: y_n. Si vous avez bien compris le truc, vous devriez alors avoir deviné ce que ces quatre symboles représentent. Ce sont des coordonnées. Ainsi, X_i est la coordonnée x du carré que l'on est en train d'analyser, et Y_i en est la coordonnée y.</p><p id="r-589778" data-claire-element-id="589778">Pour ceux qui ont la mémoire courte :</p><figure id="r-589780" data-claire-element-id="589781"><img id="r-589779" data-claire-element-id="589779" src="medias/uploads.siteduzero.com_files_258001_259000_258850.jpg" alt="Carte"/></figure><p id="r-589782" data-claire-element-id="589782"><em>Carte</em></p><div id="r-589784" data-claire-element-id="589784" data-claire-semantic="question"><p id="r-589783" data-claire-element-id="589783">Et les coordonnées x_n \: y_n ?</p></div><p id="r-589785" data-claire-element-id="589785">Eh bien, ce sont les coordonnées x et y du crime numéro <em>n</em> tout simplement. Si vous avez saisi cela, vous ne devriez pas avoir trop de mal à décrypter la première fraction de la formule :</p><p id="r-589786" data-claire-element-id="589786">{ \frac{\phi}{ (|X_i-x_n| + |Y_j-y_n|)^f } }</p><p id="r-589787" data-claire-element-id="589787">Bon, d'accord, peut-être les lettres dérangent-elles un peu. Ce sont en fait des constantes, notion que nous aborderons plus tard. Faisons donc abstraction de celles-ci et admettons que <em>f</em> vaille 1 et \phi aussi. Nous obtenons en conséquence :</p><p id="r-589788" data-claire-element-id="589788">{ \frac{1}{ (|X_i-x_n| + |Y_j-y_n|) } }</p><p id="r-589789" data-claire-element-id="589789">En fait, le dénominateur de la fraction est quelque chose de bien connu : c'est la <em>distance de Manhattan</em> entre deux points.</p><div id="r-589791" data-claire-element-id="589791" data-claire-semantic="question"><p id="r-589790" data-claire-element-id="589790">OK, pourquoi tu nous parles de New York maintenant ? o_O</p></div><p id="r-589792" data-claire-element-id="589792">Vous allez comprendre. Tout d'abord, il faut savoir que la distance entre deux points peut se calculer de plusieurs manières, la plus utilisée étant la distance euclidienne.</p><figure id="r-589794" data-claire-element-id="589795"><img id="r-589793" data-claire-element-id="589793" src="medias/uploads.siteduzero.com_files_258001_259000_258855.jpg" alt="Distances"/></figure><p id="r-589796" data-claire-element-id="589796">La distance euclidienne n'est rien d'autre que la distance la plus courte entre deux points (en vert sur l'image). Ainsi, si le cercle rouge représente le lieu du crime et le cercle jaune le lieu que l'on est en train d'analyser, alors la distance <em>d</em> entre ces deux points se calcule de la sorte (c'est simplement le <a href="http://fr.wikipedia.org/wiki/Théorème_de_Pythagore">Théorème de Pythagore</a>) :</p><p id="r-589797" data-claire-element-id="589797">{ d = \sqrt[2]{(X_i-x_n)^2 + (Y_j-y_n)^2 }}</p><div id="r-589799" data-claire-element-id="589799" data-claire-semantic="question"><p id="r-589798" data-claire-element-id="589798">D'accord. Mais pourquoi tu mentionnes un autre moyen de calculer les distances alors ?</p></div><p id="r-589800" data-claire-element-id="589800">Eh bien, à moins que votre tueur ne soit un oiseau ou qu'il ait un jet privé, cette distance ne représente rien pour nous ! :lol: <br/> Imaginez que, sur le dessin ci-dessus, les zones grises soient des routes, et les zones blanches des bâtiments (ce qui est une approximation assez correcte de la géographie de Manhattan et de plusieurs grandes villes aux États-Unis) : vous remarquez que notre distance euclidienne traverse les bâtiments. :euh: <br/> C'est pourquoi nous allons plutôt nous orienter vers l'emploi de la distance de Manhattan (en bleu) pour calculer la distance entre deux points. Cette distance est beaucoup plus représentative pour un tueur qui se déplace à pied ou en voiture (la plupart des cas donc ^^ ). Cette distance se calcule simplement : { |X_i-x_n| + |Y_j-y_n| }. L'observation de l'image suivante favorisera votre compréhension du concept, dans le cas où vous éprouveriez des difficultés à le saisir. En effet, la distance en bleu est isométrique à celle en rouge. D'où la formule.</p><figure id="r-589802" data-claire-element-id="589803"><img id="r-589801" data-claire-element-id="589801" src="medias/uploads.siteduzero.com_files_258001_259000_258856.jpg" alt="Distance de Manhattan"/></figure><aside id="r-589805" data-claire-element-id="589805" data-claire-semantic="information"><p id="r-589804" data-claire-element-id="589804">Les valeurs absolues permettent d'éviter les distances négatives, selon l'endroit où l'on pose l'origine sur notre carte.</p></aside><p id="r-589806" data-claire-element-id="589806">Bref, si vous avez assimilé que le dénominateur de notre fraction est la distance de Manhattan, alors vous devriez avoir compris l'utilité de cette première partie de la formule. Elle simule tout bonnement le fait que, plus la distance entre le lieu du crime et la case que l'on analyse est grande, plus la probabilité que le tueur habite dans cette case est basse. Comme je vous le disais dans l'introduction, plus on s'éloigne du lieu d'un crime, plus la probabilité que le tueur y habite diminue.</p><p id="r-589807" data-claire-element-id="589807">{ \frac{\phi}{ (|X_i-x_n| + |Y_j-y_n|)^f } }</p><p id="r-589808" data-claire-element-id="589808">Pour la lettre grecque { \phi }, nous verrons sa signification plus tard. En revanche, la lettre <em>f</em> qui se trouve à l'exposant du dénominateur est plus facile à comprendre. En fait, c'est une constante déterminée empiriquement en fonction du genre de tueur auquel on a affaire. Vous remarquez que si sa valeur est grande, alors la probabilité baissera à mesure que l'on s'éloigne du crime. De même si l'on diminue la valeur de <em>f</em>, alors les probabilités vont décroitre moins vite. Ainsi, si l'on a affaire à un tueur qui aime beaucoup voyager, et qui, par peur, n'ose pas commettre ses crimes près de chez lui, on pourrait carrément observer le phénomène inverse. On mettrait donc un <em>f</em> négatif, ce qui reviendra à dire que plus on s'éloigne du crime, plus la probabilité que le tueur habite ici est grande.</p><p id="r-589809" data-claire-element-id="589809">{ (|X_i-x_n| + |Y_j-y_n|) }</p><p id="r-589810" data-claire-element-id="589810"><em>Voici ce que l'on obtient si f=-1</em></p><p id="r-589811" data-claire-element-id="589811">Néanmoins, la majorité des tueurs évitent de tuer des gens à l'autre bout de la planète pour des raisons pratiques (je suppose :-° ). D'habitude, <em>f</em> sera donc positif et on considérera de manière générale que le <strong>comportement normal</strong> du tueur est « plus je m'éloigne du lieu du crime, moins j'ai de chances d'habiter ici ».</p><h2 id="r-the-buffer-zone" data-claire-element-id="589878">The Buffer Zone</h2><p id="r-589813" data-claire-element-id="589813">Passons maintenant à la deuxième fraction. Vous vous rappelez qu'au début du chapitre, j'avais écrit :</p><p id="r-589814" data-claire-element-id="589814"><cite>Citation : Moi</cite></p><blockquote id="r-589816" data-claire-element-id="589816"><p id="r-589815" data-claire-element-id="589815">[…] les <em>serial killers</em> ont une prédisposition à commettre leurs crimes près de chez eux, mais pas trop près non plus.</p></blockquote><p id="r-589817" data-claire-element-id="589817">En ce qui concerne la première partie de la phrase, il s'agit de ce que nous venons de découvrir. Nous devons maintenant simuler le fait que le tueur n'aille pas commettre le crime trop près de son habitation non plus. (Si votre voisin meurt, vous avez de grandes chances que la police vienne vous dire bonjour ^^ ).</p><p id="r-589818" data-claire-element-id="589818">La deuxième fraction a justement pour objectif de calculer ce que l'on appelle le « <em>buffer zone</em> », ou, en français, la « zone tampon » :</p><p id="r-589819" data-claire-element-id="589819">{ \frac{(1-\phi)(B^{g-f})}{ (2B - \mid X_i - x_n \mid - \mid Y_j-y_n \mid)^g } }</p><p id="r-589820" data-claire-element-id="589820">La zone tampon n'est rien d'autre qu'une zone autour du lieu d'un crime, dans laquelle on est quasiment certain que le tueur n'habite pas. <br/> L'image suivante illustre cette notion :</p><figure id="r-589822" data-claire-element-id="589823"><img id="r-589821" data-claire-element-id="589821" src="medias/uploads.siteduzero.com_files_258001_259000_258860.jpg" alt="Zone tampon"/></figure><p id="r-589824" data-claire-element-id="589824"><em>Zone tampon</em></p><p id="r-589825" data-claire-element-id="589825">Imaginez que le centre de ce cercle soit le lieu du crime. On est alors quasiment sûr que le tueur n'habite pas dans les parages (d'où la couleur blanche qui signifie ici probabilité 0). Cette zone blanche, ainsi que tous les cercles concentriques jusqu'à la moitié du cercle jaune clair, est appelée la zone tampon. Dans cette zone, on a donc l'effet inverse de ce que nous avons vu. Plus on s'éloigne du lieu du crime, plus la probabilité s'accroît. Puis, au-delà de cette zone tampon, on constate le phénomène que nous avions déjà remarqué, et qui sous-tend que, plus on s'éloigne, plus la probabilité devient faible (la zone jaune représentant une probabilité très élevée). <br/> Cet effet de zone tampon est simulé par la deuxième fraction, et plus particulièrement par la constante B, qui n'est rien d'autre que le rayon de zone tampon. Ainsi, à mesure que la valeur de B augmente, la zone tampon s'agrandit. Sa valeur exacte doit encore une fois être trouvée par le policier en fonction du tueur. Si l'on a un tueur très précautionneux, alors B sera grand ; si le meurtrier se déchaîne à peine sorti de chez lui, on aura un B très faible. :p</p><p id="r-589826" data-claire-element-id="589826">Attention ! Le dessin des cercles que vous voyez plus haut utilise les distances euclidiennes. Dès lors, quand je fais mention d'un rayon, il faut essayer d'imaginer que ce rayon est en distances de Manhattan. Il est vrai que ce n'est pas facile à concevoir, mais quand on change de manière de mesurer, ça peut vite devenir tordu. Par exemple, si l'on définit un cercle comme étant <em>l'ensemble des points qui sont à la même distance du centre</em>, alors si la distance est euclidienne, on obtient un cercle tel que vous le connaissez. Mais si l'on fait cela en distances de Manhattan, la figure est un carré.</p><figure id="r-589828" data-claire-element-id="589829"><img id="r-589827" data-claire-element-id="589827" src="medias/uploads.siteduzero.com_files_258001_259000_258904.jpg" alt="Cercle"/></figure><figure id="r-589831" data-claire-element-id="589832"><img id="r-589830" data-claire-element-id="589830" src="medias/uploads.siteduzero.com_files_258001_259000_258905.jpg" alt="Cercle"/></figure><p id="r-589833" data-claire-element-id="589833"><em>Cercle en distance de Manhattan et cercle en distance euclidienne</em></p><p id="r-589834" data-claire-element-id="589834">Pour comprendre la distance de Manhattan, tentez de bien vous imaginer que vous n'avez pas le droit de vous promener en diagonale. Vous pouvez seulement vous déplacer horizontalement et verticalement, d'où la forme carrée.</p><p id="r-589835" data-claire-element-id="589835">Revenons-en à notre formule :<br/>{ \frac{(1-\phi)(B^{g-f})}{ (2B - \mid X_i - x_n \mid - \mid Y_j-y_n \mid)^g } }</p><p id="r-589836" data-claire-element-id="589836">Là encore, faisons abstraction des constantes et écrivons le dénominateur de manière simplifiée :</p><p id="r-589837" data-claire-element-id="589837">{ \frac{1}{ (2B - (\mid X_i - x_n \mid + \mid Y_j-y_n \mid)) } }</p><p id="r-589838" data-claire-element-id="589838">Représentez-vous pour la suite que cette partie de la formule simule l'effet tampon pour un crime donné. Cette fraction ne concerne donc que les carrés qui se trouvent dans cette zone tampon. En d'autres termes, seuls ceux dont la distance de Manhattan est inférieure au « rayon » de la zone tampon. Ou, mathématiquement, quand :</p><p id="r-589839" data-claire-element-id="589839">( \mid X_i - x_n \mid + \mid Y_i - y_n \mid ) &lt; B \quad</p><aside id="r-589841" data-claire-element-id="589841" data-claire-semantic="information"><p id="r-589840" data-claire-element-id="589840">Nous allons dans quelques instants découvrir comment nous pouvons appliquer seulement une partie de la formule à un certain groupe de cases. Ne vous inquiétez pas. :)</p></aside><p id="r-589842" data-claire-element-id="589842">Maintenant, si nous lisons bien le dénominateur de la fraction, nous remarquons que l'on soustrait la distance de Manhattan à deux fois notre zone tampon (équivalent du diamètre). Cela permet donc de simuler l'effet de la zone tampon. En français, cette fraction signifie : plus on s'éloigne du lieu du crime, plus les probabilités augmentent en fonction de la distance, tant que l'on reste dans la zone tampon. Dès que l'on est arrivé à la frontière de la zone tampon, soit quand ( \mid X_i - x_n \mid + \mid Y_i - y_n \mid ) = B \quad, on reprend l'autre fraction. Cette fois, on commence à baisser les probabilités en fonction de la distance !</p><div id="r-589844" data-claire-element-id="589844" data-claire-semantic="question"><p id="r-589843" data-claire-element-id="589843">Hmm. Je vois. Et comment arrive-t-on à passer d'une fraction à l'autre ?</p></div><p id="r-589845" data-claire-element-id="589845">Alors ça, c'est le symbole \phi qui s'en occupe. En fait, la formule de Rossmo s'écrit :</p><p id="r-589846" data-claire-element-id="589846">p_{i,j} = \sum_{n=1}^{c} \left [ { \frac{\phi}{ (|X_i-x_n| + |Y_j-y_n|)^f } } + { \frac{(1-\phi)(B^{g-f})}{ (2B - \mid X_i - x_n \mid - \mid Y_j-y_n \mid)^g } } ight ]</p><p id="r-589847" data-claire-element-id="589847">où</p><p id="r-589848" data-claire-element-id="589848">\phi = \begin{cases} 1, &amp; \mathrm{\quad if\;} ( \mid X_i - x_n \mid + \mid Y_i - y_n \mid ) &gt; B \quad \iff \quad (X_{n},Y_{n}) \in [-B;B]\\ 0, &amp; \mathrm{\quad else} \end{cases}</p><p id="r-589849" data-claire-element-id="589849">En d'autres termes, si l'on se trouve hors de la zone tampon ( \mathrm{\quad if\;} ( \mid X_i - x_n \mid + \mid Y_i - y_n \mid ) &gt; B ), alors \phi vaut 1. Que se passe-t-il si \phi vaut 1 ? Eh bien, la deuxième fraction s'annule. En effet : (1-1) = 0. On obtient donc :</p><p id="r-589850" data-claire-element-id="589850">p_{i,j} = \sum_{n=1}^{c} \left [ { \frac{1}{ (|X_i-x_n| + |Y_j-y_n|)^f } } ight ]</p><p id="r-589851" data-claire-element-id="589851">Dans le cas contraire, \phi = 0. Dans cette éventualité, c'est la première fraction qui s'annule. On obtient donc :</p><p id="r-589852" data-claire-element-id="589852">p_{i,j} = \sum_{n=1}^{c} \left [ { \frac{(B^{g-f})}{ (2B - \mid X_i - x_n \mid - \mid Y_j-y_n \mid)^g } } ight ]</p><p id="r-589853" data-claire-element-id="589853">Vous devriez avoir assimilé comment la formule peut être appliquée selon le lieu où l'on se trouve. Sachez également que la lettre g a le même rôle que la lettre f, qui permet d'accentuer (ou pas) cet effet de zone tampon. <br/> Finalement, nous avons encore devant nous ce {(B^{g-f})} qui nous dérange. Ce point-là est plus délicat. Prenons trois cas de figure.</p><ul id="r-589860" data-claire-element-id="589860"><li id="r-589855" data-claire-element-id="589855"><p id="r-589854" data-claire-element-id="589854">L'effet zone tampon est plus prononcé que l'effet normal (g &gt; f).</p></li><li id="r-589857" data-claire-element-id="589857"><p id="r-589856" data-claire-element-id="589856">L'effet zone tampon est moins prononcé que l'effet normal (g &lt; f).</p></li><li id="r-589859" data-claire-element-id="589859"><p id="r-589858" data-claire-element-id="589858">L'effet zone tampon a la même importance que l'effet normal (f = g).</p></li></ul><p id="r-589861" data-claire-element-id="589861">Le troisième cas est le plus simple à comprendre. Si f = g, nous obtenons tout simplement que {(B^{g-f})} = {(B^{0})} = 1. Donc ici, rien de spécial.<br/> En revanche, si l'on se trouve dans le premier cas de figure, alors {(B^{g-f})} &gt; 1, car g &gt; f, et B est habituellement également plus grand que 1. Là, on augmente la probabilité que le tueur se trouve dans la zone tampon en multipliant notre fraction par {(B^{g-f})}, qui, je le rappelle, est supérieur à 1. <br/> Inversement, si g &lt; f, alors on obtient que (B^{g-f}) = \frac{1}{(B^{f-g})} &lt; 1. Donc cette fois, on réduit la probabilité que le tueur se trouve dans la zone tampon.</p><aside id="r-589863" data-claire-element-id="589863" data-claire-semantic="information"><p id="r-589862" data-claire-element-id="589862">Si vous avez de la peine à comprendre, ce n'est pas très grave. Vous aurez la possibilité de tester différentes valeurs dans votre programme par vous-mêmes.</p></aside><p id="r-589864" data-claire-element-id="589864">Voilà, je crois que nous avons fait le tour de la formule ! Bravo à vous, si vous avez réussi à tout suivre jusqu'ici. :D <br/> Voici un résumé reprenant tout ce vers quoi nous nous sommes penchés :</p><ul id="r-589877" data-claire-element-id="589877"><li id="r-589866" data-claire-element-id="589866"><p id="r-589865" data-claire-element-id="589865">la formule s'applique à un seul carré de la carte à la fois ;</p></li><li id="r-589868" data-claire-element-id="589868"><p id="r-589867" data-claire-element-id="589867">on additionne pour chaque crime une valeur calculée ;</p></li><li id="r-589870" data-claire-element-id="589870"><p id="r-589869" data-claire-element-id="589869">si l'on se trouve dans la zone tampon, alors on a l'effet « plus je m'éloigne du lieu du crime, plus la probabilité augmente » ;</p></li><li id="r-589872" data-claire-element-id="589872"><p id="r-589871" data-claire-element-id="589871">si l'on se trouve hors de la zone tampon, on a l'effet « normal » qui est « plus je m'éloigne du lieu du crime, plus la probabilité diminue » ;</p></li><li id="r-589874" data-claire-element-id="589874"><p id="r-589873" data-claire-element-id="589873">ensuite, on peut accentuer l'un ou l'autre effet, ou même les inverser, en modifiant les valeurs de f et de g ;</p></li><li id="r-589876" data-claire-element-id="589876"><p id="r-589875" data-claire-element-id="589875">finalement, on pondérera les différentes valeurs que l'on trouvera entre elles et on définira quelles sont les zones les plus probables (pour la résidence du tueur), par rapport à celles qui le sont moins.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique">Profilage géographique</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-theorie-26">
La théorie
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-formule-2">
La Formule
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/le-programme-8">
Le Programme
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-theorie-26">
<span class="arrow"></span>
<span class="next">La théorie</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/le-programme-8">
<span class="next">Le Programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LeProgramme"></a><h2>Le Programme</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-formule-2">
<span class="arrow"></span>
<span class="next">La Formule</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-589880" data-claire-element-id="589880">Bon, je crois que nous avons bien décortiqué cette formule. Mais si maintenant nous l'appliquions à tous les pixels d'une carte un à un, la formule nous retournerait simplement des valeurs et nous obtiendrions quelque chose de ce genre :</p><p id="r-589881" data-claire-element-id="589881">(1;1) 0.3600<br/> (1;2) 0.1234<br/> (1;3) 0.0032<br/> (1;4) 0.0154<br/> (1;5) 0.2432<br/> (1;6) 0.3212<br/> (1;7) 0.5423<br/> (1;8) 0.0554<br/> (1;9) 0.1235<br/> (1;10) 0.1212<br/> …</p><p id="r-589882" data-claire-element-id="589882">C'est bien joli, mais c'est tout sauf compréhensible pour un être humain. Pour donner du sens aux valeurs retournées par notre formule, nous allons donc faire appel à notre ami l'ordinateur. :D</p><h2 id="r-un-probleme-de-taille" data-claire-element-id="589896">Un problème de taille</h2><p id="r-589883" data-claire-element-id="589883">Le principe est tout bête. Nous allons assigner une couleur à chaque valeur retournée par la formule. Cela nous permettra de visualiser les zones de « probabilités » sur une carte. Mais nous rencontrons deux problèmes.</p><p id="r-589884" data-claire-element-id="589884">Je vous ai dit que les résultats que nous renvoie le formulaire dépendent des constantes. Selon celles-ci, on peut donc se retrouver avec des résultats allant de 0.003223 à 0.78992, ou de 8.21 à 89.123. Vous avez certainement remarqué que l'interprétation à en faire ne coule pas de source. En effet, on ne peut se figurer quelles sont les probabilités maximum et minimum que la fonction nous retournera, ni comment afficher cela sur une carte. C'est pourquoi il faut absolument connaître les deux valeurs extrêmes (le maximum et le minimum). Par exemple, le minimum peut être 0.003223 et le maximum 0.78992. Une fois que l'on connaît ces extrêmes, nous allons pouvoir <em>normaliser ce résultat</em>. Cela signifie simplement que l'on va transformer ces valeurs en des résultats compris entre 0 et 100 (comme je vous l'avais expliqué au début). Dans notre cas, 0.78992 équivaut à 100 et 0.003223 équivaut à 0. Tous les autres résultats seront donc compris entre 0 et 100.</p><div id="r-589886" data-claire-element-id="589886" data-claire-semantic="question"><p id="r-589885" data-claire-element-id="589885">Et comment on normalise ?</p></div><p id="r-589887" data-claire-element-id="589887">Eh bien, considérez d'abord que p_{min} soit la probabilité minimum que notre formule renvoie et p_{max} notre probabilité maximum.<br/> Pour transformer ensuite chacune des probabilités, que j'appelle p, en des nombres compris entre 0 et 100, nous allons commencer par soustraire p_{min} à chacun de nos p. Ainsi, la valeur minimum sera 0. Maintenant, nous souhaitons que p_{max} - p_{min} soit égal à 100. p - p_{min} doit valoir p_{norm} (notre p normalisé). C'est une bête règle de trois. Finalement, nous obtenons ce résultat :</p><p id="r-589888" data-claire-element-id="589888">p_{norm} = \frac{\left(p - p_{min} ight) imes 100}{p_{max}-p_{min}}</p><p id="r-589889" data-claire-element-id="589889">Ainsi, avec ce <em>p</em> normalisé, nous pouvons établir que quels que soient les résultats de la formule, ils seront compris entre 0 et 100. Le coloriage de nos pixels en sera facilité.</p><div id="r-589891" data-claire-element-id="589891" data-claire-semantic="question"><p id="r-589890" data-claire-element-id="589890">Tu as dit qu'il y avait deux problèmes, non ?</p></div><p id="r-589892" data-claire-element-id="589892">Oui. Le premier problème étant résolu, nous nous trouvons de nouveau face à un autre obstacle. En effet, pour pouvoir trouver p_{max} et p_{min}, nous devons obligatoirement passer en revue tous nos pixels avant de pouvoir les afficher. Il existe en fait deux solutions à ce problème.</p><p id="r-589893" data-claire-element-id="589893">La première consiste à parcourir nos pixels une première fois, à calculer la probabilité pour chaque pixel, et à récupérer uniquement p_{max} et p_{min}. La difficulté sera qu'ensuite, lorsque nous afficherons nos pixels, nous allons nous trouver forcés de calculer une seconde fois la probabilité avec la formule. Cela augmenterait dès lors le temps de calcul de notre programme.<br/> La deuxième solution, évidente, serait que la première fois que nous parcourrons notre carte, nous enregistrions les valeurs dans un tableau. De cette façon, il nous suffirait ensuite de récupérer ces valeurs lors de l'affichage. L'avantage ici, c'est que nous gagnerions en temps de calcul. Néanmoins, nous perdrions en mémoire. En effet, imaginez que votre carte fasse 1000x1000 pixels. Nous aurions besoin d'un tableau à un million d'entrées pour stocker ces valeurs ! o_O</p><p id="r-589894" data-claire-element-id="589894">C'est maintenant que vous devriez dire : « Ah, je viens de comprendre le jeu de mots avec le titre, &quot;Un problème de taille&quot; ! Trop drôle ! » :-°</p><p id="r-589895" data-claire-element-id="589895">C'est à vous de voir quelle solution vous préférez. Personnellement, j'ai choisi la première, parce que son codage est plus rapide. ^^ Mais je vous encourage à tester la seconde solution également.</p><h2 id="r-place-a-la-programmation-1" data-claire-element-id="589938">Place à la programmation</h2><p id="r-589897" data-claire-element-id="589897">Normalement, avec tout ce que nous avons parcouru, vous ne devriez pas éprouver de difficultés pour réaliser ce programme, quels que soient le langage et la bibliothèque graphique utilisés. Je vais néanmoins essayer de vous expliquer comment faire. Pour les exemples, j'utiliserai le langage C et la bibliothèque graphique SDL. Vous trouverez un bon tuto sur ce langage et cette bibliothèque graphique <a href="http://www.siteduzero.com/tutoriel-3-14189-apprenez-a-programmer-en-c.html">ici</a>.</p><aside id="r-589899" data-claire-element-id="589899" data-claire-semantic="warning"><p id="r-589898" data-claire-element-id="589898">Je vais vous guider dans la réalisation de ce programme, en restant au niveau des bases. Cela veut dire que le programme ne sera pas du tout interactif. C'est vous qui devrez indiquer les différentes valeurs (constantes ou coordonnées des crimes) dans le code avant de compiler. Si vous voulez faire en sorte que l'utilisateur insère ces données lui-même, je vous laisse le soin d'améliorer le code. Ici, nous nous concentrerons sur le domaine de la formule et sur l'affichage du profilage géographique.</p></aside><p id="r-589900" data-claire-element-id="589900">Je vais à partir de maintenant partir du principe que vous savez tous programmer dans un langage ou un autre et que vous savez utiliser une bibliothèque graphique.<br/> Nous allons procéder en deux étapes. Premièrement, nous allons calculer les probabilités maximum et minimum que nous renvoie notre formule. Deuxièmement, nous allons recalculer les probabilités, les normaliser, puis afficher les pixels un à un en traduisant les probabilités normalisées en couleurs (par exemple, 100 correspondra à la couleur rouge, et 0 à la couleur grise).</p><p id="r-589901" data-claire-element-id="589901">Voici pour rappel la formule :</p><p id="r-589902" data-claire-element-id="589902">p_{i,j} = \sum_{n=1}^{c} \left [ { \frac{\phi}{ (|X_i-x_n| + |Y_j-y_n|)^f } } + { \frac{(1-\phi)(B^{g-f})}{ (2B - \mid X_i - x_n \mid - \mid Y_j-y_n \mid)^g } } ight ]</p><p id="r-589903" data-claire-element-id="589903">où</p><p id="r-589904" data-claire-element-id="589904">\phi = \begin{cases} 1, &amp; \mathrm{\quad if\;} ( \mid X_i - x_n \mid + \mid Y_i - y_n \mid ) &gt; B \quad \iff \quad (X_{n},Y_{n}) \in [-B;B]\\ 0, &amp; \mathrm{\quad else} \end{cases}</p><p id="r-589905" data-claire-element-id="589905">Je vous ai dit que cette formule doit s'appliquer sur chaque pixel d'une carte, carte que l'on peut représenter comme un quadrillage de pixels en deux dimensions. Donc, pour parcourir notre quadrillage, il suffit de faire deux boucles l'une dans l'autre.<br/> Une astuce utile est de séparer la formule en deux termes en remplaçant dans chaque cas notre \phi par 0 ou 1. De cette manière, on peut oublier le \phi dans la formule et on évite de calculer des termes inutiles. Voici donc ce que nous allons obtenir pour la première partie du programme.</p><pre id="r-589906" data-claire-element-id="589906"><code data-claire-semantic="c">#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;

//Taille de notre image en pixels
#define LONGUEUR 500
#define HAUTEUR 500
#define NB_CRIMES 3


int main(int argc, char *argv[])
{

    int  i, j, n;
    double B, g, f, terme1, terme2, resultat;
    /*On initialise ici les coordonnées des crimes
    Je vous laisse vous débrouiller pour permettre à l'utilisateur
    de les entrer lui-même =D
    */
    int crime_x[3] = {200, 140, 348}, crime_y[3] = {200, 125, 210};
    //Ici, ces variables vont nous permettre de connaître
    //les probabilités maximum et minimum
    double biggest_p, smallest_p;

    //Initialisation des constantes, avec des valeurs 
    //qui fonctionnent bien, mais que vous pouvez changer 
    //à votre guise =)
    B=70;
    f=0.03;
    g=0.1;

    for (i=0 ; i&lt;LONGUEUR ; i++)
    {
        for (j = 0 ; j &lt; HAUTEUR ; j++)
        {
            resultat=0;

            //Là, on applique simplement la formule pour chaque crime
            //Et on stocke le résultat dans la variable resultat
            //Notez la condition qui nous évite d'utiliser la variable phi
            for (n= 0 ; n &lt; NB_CRIMES; n++)
            {
                if((fabs(i - crime_x[n])+fabs(j-crime_y[n]) &gt; B))
                {
                    terme1 = 1 / pow((fabs(i - crime_x[n])+fabs(j-crime_y[n])),f);
                    resultat+= terme1;
                }
                else
                {
                    terme2=(pow(B,(g-f)))/pow((2*B-fabs(i-crime_x[n])-fabs(j-crime_y[n])),g);
                    resultat+= terme2;
                }
            }

            //On stocke les valeurs les plus élevées 
            //et les plus faibles ici
            if(i==0 &amp;&amp; j==0)
            {
               biggest_p = resultat;
               smallest_p = resultat;
            }

            if(resultat &gt; biggest_p)
                biggest_p = resultat; 

            if(smallest_p &gt; resultat)
                smallest_p = resultat;

            }
    }


    return EXIT_SUCCESS;
}</code></pre><p id="r-589907" data-claire-element-id="589907">Bon, normalement, rien ne devrait être difficile à comprendre dans cette première partie. On applique bêtement la formule. C'est cela qui est pratique avec les mathématiques : on peut facilement les retranscrire dans un langage tel que le C. En effet, la somme est simplement traduite ici par une boucle. Et la condition qui dit que \phi doit être égal à 0 ou à 1, selon si l'on se trouve dans la zone tampon ou non, est une simple condition if-else. :)</p><p id="r-589908" data-claire-element-id="589908">Pour la deuxième partie du programme, voici ce que nous allons réaliser. Nous allons d'abord allouer autant de rectangles de 1 pixel sur 1 pixel que nécessaire. Pour ce faire, je propose d'utiliser un tableau à deux dimensions, qui représentera notre carte, et qui n'est rien d'autre qu'un tableau à deux dimensions de pixels. Ensuite, nous mettrons une image de fond, qui sera la carte d'une ville. Personnellement, j'ai pris une carte de Manhattan (en noir et blanc de préférence, pour ne pas confondre avec les zones de probabilité). Après avoir initialisé le tout, nous allons utiliser le code ci-dessus pour calculer p_{max} et p_{min}. Ensuite, nous passerons à nouveau par deux boucles, mais cette fois pour parcourir notre tableau de pixels (des rectangles de taille 1x1). Pour chaque pixel, nous entreprendrons un nouveau calcul de probabilité, nous la normaliserons et nous la retranscrirons en couleur.</p><p id="r-589909" data-claire-element-id="589909">Petite parenthèse : je vous ai dit lorsque nous observions comment normaliser nos probabilités que l'on voulait un maximum à 100 et un minimum à 0. Ce qui est tout autant possible, afin de ne pas se compliquer la vie avec les couleurs, c'est de mettre le maximum à 255. En effet, nous n'aurons plus qu'à mettre notre probabilité normalisée directement dans la couleur et l'afficher. Personnellement, j'ai choisi d'aller du rouge au jaune, le rouge étant la probabilité maximum :</p><figure id="r-589911" data-claire-element-id="589912"><img id="r-589910" data-claire-element-id="589910" src="medias/uploads.siteduzero.com_files_259001_260000_259004.jpg" alt="Couleurs"/></figure><p id="r-589913" data-claire-element-id="589913"><em>Couleurs</em></p><p id="r-589914" data-claire-element-id="589914">Ainsi, quand nous devrons faire le choix de la couleur de notre pixel, nous pourrons simplement faire :</p><pre id="r-589915" data-claire-element-id="589915"><code data-claire-semantic="c">SDL_FillRect(points[i][j], NULL, SDL_MapRGB(ecran-&gt;format, 255, 255-probabilite,0));</code></pre><aside id="r-589917" data-claire-element-id="589917" data-claire-semantic="information"><p id="r-589916" data-claire-element-id="589916">J'ai mis (255-probabilite) car on veut que le jaune soit la probabilité minimum et le rouge la probabilité maximum.</p></aside><p id="r-589918" data-claire-element-id="589918">N'oubliez pas non plus de rendre vos pixels transparents, sinon, vous ne verrez pas la carte. ^^ Finalement, au moment où vous normaliserez votre probabilité, il faudra arrondir vos valeurs. Le système RGB est composé uniquement de <strong>nombres entiers </strong>compris entre 0 et 255. Voilà, vous avez tout en main pour coder un joli programme.</p><p id="r-589919" data-claire-element-id="589919">Pour ceux qui auraient des difficultés, voici le code complet, avec les commentaires seulement sur la partie <em>Affichage </em>du programme.<br/> Pour le reste, j'ai utilisé la même méthodologie que dans le <a href="http://www.siteduzero.com/tutoriel-3-14189-apprenez-a-programmer-en-c.html">tutoriel officiel</a>, dans la partie SDL.</p><p id="r-589920" data-claire-element-id="589920"></p><div id="r-589922" data-claire-element-id="589922"><pre id="r-589921" data-claire-element-id="589921"><code data-claire-semantic="c">#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;math.h&gt;
#include &lt;SDL/SDL.h&gt;

#define LONGUEUR 600
#define HAUTEUR 600
#define NB_CRIMES 3

//J'utilise la même fonction que dans le tutoriel officiel
void pause()
{
    int continuer = 1;
    SDL_Event event;

    while (continuer)
    {
        SDL_WaitEvent(&amp;event);
        switch(event.type)
        {
            case SDL_QUIT:
                continuer = 0;
        }
    }
}

int main(int argc, char *argv[])
{
    SDL_Surface *ecran = NULL, *points[LONGUEUR][HAUTEUR] = {NULL};
    SDL_Surface *map = NULL;

    SDL_Rect position, positionMap;

    int  i, j, n;
    double B, g, f, terme1, terme2, resultat, probabilite;
    int crime_x[3] = {200, 140, 348}, crime_y[3] = {200, 125, 210};
    double biggest_p=0, smallest_p=100;

    B=70;
    f=0.03;
    g=0.1;

    positionMap.x = 0;
    positionMap.y = 0;
  

    SDL_Init(SDL_INIT_VIDEO);

    
    map  = SDL_LoadBMP(&quot;manhattan_map.bmp&quot;);
    ecran = SDL_SetVideoMode(LONGUEUR, HAUTEUR, 32, SDL_HWSURFACE);

    for (i = 0 ; i &lt; LONGUEUR ; i++)
        for (j = 0 ; j &lt; HAUTEUR ; j++)
            points[i][j] = SDL_CreateRGBSurface(SDL_HWSURFACE,1,1,32,0,0,0,0); 

    SDL_WM_SetCaption(&quot;Profilage geographique&quot;, NULL);

    SDL_FillRect(ecran, NULL, SDL_MapRGB(ecran-&gt;format, 0, 0, 0));

    //Pensez à afficher la carte d'abord. Nous afficherons les pixels ensuite par-dessus
    SDL_BlitSurface(map, NULL, ecran, &amp;positionMap);


    for (i=0 ; i&lt;LONGUEUR ; i++)
    {
        for (j = 0 ; j &lt; HAUTEUR ; j++)
        {
            resultat=0;

            for (n= 0 ; n &lt; NB_CRIMES; n++)
            {
                if((fabs(i - crime_x[n])+fabs(j-crime_y[n]) &gt; B))
                {
                    terme1 = 1 / pow((fabs(i - crime_x[n])+fabs(j-crime_y[n])),f);
                    resultat+= terme1;
                }
                else
                {
                    terme2=(pow(B,(g-f)))/pow((2*B-fabs(i-crime_x[n])-fabs(j-crime_y[n])),g);
                    resultat+= terme2;
                }
            }

            if(resultat &gt; biggest_p)
                biggest_p = resultat;

            if(smallest_p &gt; resultat)
                smallest_p = resultat;

            }
    }

    //--------------Affichage -------------------------------------------//
    for (i = 0 ; i &lt; LONGUEUR ; i++)
    {
        for (j = 0 ; j &lt; HAUTEUR ; j++)
        {

            //On calcule la position de chaque pixel
            //Rien de particulier ici
            position.x = i;
            position.y = j;

            //Ici, on recalcule notre probabilité
            resultat = 0;

            for (n= 0 ; n &lt; 1; n++)
            {
                if((fabs(i - crime_x[n])+fabs(j-crime_y[n]) &gt; B))
                {
                    terme1 = 1 / pow((fabs(i - crime_x[n])+fabs(j-crime_y[n])),f);
                    resultat+= terme1;
                }
                else
                {
                    terme2=(pow(B,(g-f)))/pow((2*B-fabs(i-crime_x[n])-fabs(j-crime_y[n])),g);
                    resultat+= terme2;
                }
            }

            //Ici on normalise, en faisant attention que le maximum soit 255 et non pas 100 !
            //Il faut aussi penser à arrondir notre résultat
            probabilite =   ceil(((resultat-smallest_p)*255)/( biggest_p-smallest_p));

            //Il ne reste plus qu'à afficher notre pixel
            SDL_FillRect(points[i][j], NULL, SDL_MapRGB(ecran-&gt;format, 255, 255-probabilite,0));
            //Sans oublier de le rendre transparent, pour voir la carte !
            SDL_SetAlpha(points[i][j], SDL_SRCALPHA, 220);
            SDL_BlitSurface(points[i][j], NULL, ecran, &amp;position);

        }
    }

    //--------------------------------------------------//

    SDL_Flip(ecran);
    
    //La fonction pause est la même que dans le tutoriel officiel
    pause();

    for (i = 0 ; i &lt; LONGUEUR ; i++)
        for (j = 0 ; j &lt; HAUTEUR ; j++)
                SDL_FreeSurface(points[i][j]);

    SDL_FreeSurface(map);

    SDL_Quit();

    return EXIT_SUCCESS;
}</code></pre></div><p id="r-589923" data-claire-element-id="589923">Le moment de vérité a sonné. Est-ce que tout ce dont nous avons fait la découverte fonctionne vraiment ? Est-ce que les mathématiques marchent ? :euh:</p><p id="r-589924" data-claire-element-id="589924">…</p><p id="r-589925" data-claire-element-id="589925">Quoi, vous avez douté ? :p Bien sûr que oui. Tout fonctionne bien. Un rapide test avec un seul crime d'abord et l'on obtient ceci :</p><figure id="r-589927" data-claire-element-id="589928"><img id="r-589926" data-claire-element-id="589926" src="medias/uploads.siteduzero.com_files_259001_260000_259007.jpg" alt="Profil géographique"/></figure><p id="r-589929" data-claire-element-id="589929"><em>Profil géographique</em></p><p id="r-589930" data-claire-element-id="589930">Nous retrouvons donc bien notre carré, avec la zone tampon au milieu en jaune très clair, et autour, la zone rouge qui affiche les probabilités les plus élevées. Bien entendu, là où ça devient intéressant, c'est lorsque l'on fait le test avec plusieurs crimes. Voici ce que j'obtiens avec le code ci-dessus :</p><figure id="r-589932" data-claire-element-id="589933"><img id="r-589931" data-claire-element-id="589931" src="medias/uploads.siteduzero.com_files_259001_260000_259009.jpg" alt="Profil géographique"/></figure><p id="r-589934" data-claire-element-id="589934"><em>Profil géographique</em></p><p id="r-589935" data-claire-element-id="589935">Je vous conseille vivement de tester votre programme avec différentes valeurs pour les constantes, pour bien discerner combien elles influent sur le profil géographique. Testez aussi avec plusieurs crimes sur la même carte. La manière dont ils s'influencent mutuellement est assez intéressante à observer.</p><aside id="r-589937" data-claire-element-id="589937" data-claire-semantic="information"><p id="r-589936" data-claire-element-id="589936">Sachez d'ailleurs que la grosse difficulté de Rigel est de trouver les bonnes constantes. Rossmo lui-même donne des cours à travers le monde, pour aider les forces de l'ordre à utiliser son programme et à mettre les bonnes valeurs aux constantes en fonction du profil du tueur.<br/> Personnellement, j'ai remarqué que f et g fonctionnent assez bien avec des valeurs entre 0 et 1. Pour B, ce n'est pas trop difficile, sa valeur représente simplement le « rayon » en pixels autour du crime, dans lequel on a l'effet de zone tampon.</p></aside><h2 id="r-aller-plus-loin-40" data-claire-element-id="589960">Aller plus loin</h2><p id="r-589939" data-claire-element-id="589939">Bien entendu, le programme ci-dessus est loin d'être parfait. Voici quelques suggestions pour améliorer tout ça.</p><ul id="r-589948" data-claire-element-id="589948"><li id="r-589941" data-claire-element-id="589941"><p id="r-589940" data-claire-element-id="589940">Il serait pratique que l'utilisateur puisse entrer lui-même les valeurs des constantes, dans la console par exemple.</p></li><li id="r-589943" data-claire-element-id="589943"><p id="r-589942" data-claire-element-id="589942">Un autre moyen de faire interagir l'utilisateur serait de lui permettre d'indiquer le lieu du crime par un clic sur la carte. Et, pourquoi pas, d'afficher une petite image qui indiquerait le lieu de chaque crime ?</p></li><li id="r-589945" data-claire-element-id="589945"><p id="r-589944" data-claire-element-id="589944">Vous pourriez améliorer la formule de Rossmo en choisissant des constantes différentes pour chaque crime. En effet, jusque-là, on considérait que chaque crime avait la même importance, mais ce n'est pas obligatoirement le cas.</p></li><li id="r-589947" data-claire-element-id="589947"><p id="r-589946" data-claire-element-id="589946">Vous pouvez également améliorer l'esthétique du programme en modifiant les couleurs. Par exemple, au lieu de normaliser entre 0 et 255, faites-le entre 0 et 100, et décomposez vos probabilités avec des conditions. Vous aurez ainsi plus de liberté sur les couleurs. :D Voici ci-dessous un exemple de ce que j'ai réussi à obtenir, mais bon, c'est facilement améliorable !</p></li></ul><figure id="r-589950" data-claire-element-id="589951"><img id="r-589949" data-claire-element-id="589949" src="medias/uploads.siteduzero.com_files_259001_260000_259010.jpg" alt="Profil géographique"/></figure><p id="r-589952" data-claire-element-id="589952">Certains d'entre vous ne sont peut-être pas épris des distances de Manhattan et préfèreraient avoir de jolis cercles plutôt que des losanges, même si ce serait moins proche de la réalité. Pour cela, il n'y a aucun souci. D'ailleurs, si vous avez bien suivi le tutoriel, vous ne devriez pas rencontrer de problème pour réécrire la formule avec les distances euclidiennes.<br/> Pour ne pas laisser tomber ceux qui auraient des difficultés, voici comment il fallait faire :</p><div id="r-589954" data-claire-element-id="589954"><p id="r-589953" data-claire-element-id="589953">p_{i,j} = \sum_{n=1}^{c} \left [ { \frac{\phi}{ (\sqrt[2]{(X_i-x_n)^2 + (Y_j-y_n)^2 })^f } } + { \frac{(1-\phi)(B^{g-f})}{ (2B - (\sqrt[2]{(X_i-x_n)^2 + (Y_j-y_n)^2 }))^g } } ight ]</p></div><p id="r-589955" data-claire-element-id="589955">Bien entendu, vous pouvez trouver d'autres améliorations possibles à ce programme. Vous savez normalement tout ce qu'il faut sur le profilage géographique. Qui sait, peut-être pourriez-vous même essayer de concurrencer le programme <em>Rigel</em> de Rossmo. :-°</p><p id="r-589956" data-claire-element-id="589956">Une fois de plus, on voit bien que la force brute ne vaut rien face aux mathématiques !</p><p id="r-589957" data-claire-element-id="589957">Il n'est évidemment pas difficile de s'apercevoir que ce système contient plusieurs défauts. Le premier est que, pour qu'il fonctionne convenablement, il faut que le tueur ait commis suffisamment de crimes (ce qui n'est pas très pratique, vous l'admettrez ^^ ).<br/> Deuxièmement, le programme se base sur le fait que le tueur va sévir de manière uniforme, en essayant de paraître aléatoire. Si donc un jour un tueur assez intelligent se mettait à agir de manière vraiment aléatoire, le programme risquerait d'avoir des problèmes pour le repérer. Vous savez maintenant ce qu'il vous reste à faire. :lol: Néanmoins, cette formule a largement fait ses preuves aux côtés de la police et sachez que de nombreux <em>serial killers</em> ont été arrêtés de cette manière.</p><p id="r-589958" data-claire-element-id="589958">J'espère que ce tutoriel vous a plu et qu'il vous a permis d'approfondir vos connaissances dans le domaine du profilage géographique. En ce qui vous concerne, n'hésitez pas à faire partager vos propres programmes de profilage géographique avec des fonctionnalités plus avancées que celles présentées ici. Et n'oubliez pas, si vous avez besoin d'aide pour coder votre programme, le <a href="http://www.siteduzero.com/forum.html">forum</a> est là pour ça.</p><p id="r-589959" data-claire-element-id="589959">Si vous voulez aller plus loin dans le sujet de l'aléatoire et des probabilités, je vous invite également à aller lire ce tutoriel : <a href="http://www.siteduzero.com/tutoriel-3-133680-a-la-decouverte-de-l-aleatoire-et-des-probabilites.html">À la découverte de l'aléatoire et des probabilités</a>.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique">Profilage géographique</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-theorie-26">
La théorie
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-formule-2">
La Formule
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/le-programme-8">
Le Programme
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/profilage-geographique/la-formule-2">
<span class="arrow"></span>
<span class="next">La Formule</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/rofilage-geographique.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:12:13 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rofilage-geographique.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:31:27 GMT -->
</html>