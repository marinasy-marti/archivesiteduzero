<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/apprentissage-de-l-api-windows.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 11:22:19 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/apprentissage-de-l-api-windows.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:49:51 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Apprentissage de l&#039;API Windows</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/apprentissage-de-l-api-windows.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Apprentissage de l&#039;API Windows</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Apprentissagedel039APIWindows">Apprentissage de l&#039;API Windows</a><br/><a href="#Lesbases">Les bases</a><br/><a href="#Commencement">Commencement</a><br/><a href="#Votrepremirefentre">Votre première fenêtre</a><br/><a href="#Elleestvidemafentre">Elle est vide, ma fenêtre !</a><br/><a href="#Lesmenus">Les menus</a><br/><a href="#Lesbotesdedialogue">Les boîtes de dialogue</a><br/><a href="#Lescontrles">Les contrôles</a><br/><a href="#Lesboutonstoustypes">Les boutons (tous types)</a><br/><a href="#Lecontrled039dition">Le contrôle d&#039;édition</a><br/><a href="#Lalistedroulante">La liste déroulante</a><br/><a href="#Lalistedechoix">La liste de choix</a><br/><a href="#Laglissire">La glissière</a><br/><a href="#LecontrleStatic">Le contrôle Static</a><br/><a href="#L039affichage">L&#039;affichage</a><br/><a href="#Lescontextesdepriphriques">Les contextes de périphériques</a><br/><a href="#Letexte">Le texte</a><br/><a href="#Lesformesgomtriques">Les formes géométriques</a><br/><a href="#Lesimages">Les images</a><br/><a href="#TPUnlecteuraudio">TP : Un lecteur audio</a><br/><a href="#But">But</a><br/><a href="#Ncessaire">Nécessaire</a><br/><a href="#Pistes">Pistes</a><br/><a href="#Correction">Correction</a><br/><a href="#Amliorations">Améliorations</a><br/><a href="#Lesvnements">Les événements</a><br/><a href="#Evnementsquotclavierquot">Evénements &quot;clavier&quot;</a><br/><a href="#Evnementsquotsourisquot">Evénements &quot;souris&quot;</a><br/><a href="#Esthtiqueavance">Esthétique avancée</a><br/><a href="#Lesrgions">Les régions</a><br/><a href="#Gestiondelafentre">Gestion de la fenêtre</a><br/><a href="#Documentation">Documentation</a><br/><a href="#Fonctions">Fonctions</a><br/><a href="#Messages">Messages</a><br/><a href="#Structures">Structures</a><br/><a href="#Glossaire">Glossaire</a><br/><a href="#Termes">Termes</a><br/><a href="#Manipulationduregistre">Manipulation du registre</a><br/><a href="#QuelquesnotionsdeBDR">Quelques notions de BDR</a><br/><a href="#Changementd039icnedefichiers">Changement d&#039;icône de fichiers</a><br/><a href="#Lancementaudmarragedewindows">Lancement au démarrage de windows</a><br/><a href="#Associationdefichiers">Association de fichiers</a><br/><a href="#Divers">Divers</a><br/><a href="#UtiliserlestyleduWindowscourant">Utiliser le style du Windows courant</a><br/><a href="#Lanotationhongroise">La notation hongroise</a><br/><a href="#Quelquescodes...">Quelques codes...</a><br/><a href="#Programmes">Programmes</a><br/><a href="#NeoblastdeKidpaddle2ex-Mg">Neoblast, de Kidpaddle2 (ex-Mg++)</a><br/><a href="#DdPopdedamien.09">DdPop, de damien.09</a><br/></div>
<a name="Apprentissagedel039APIWindows"></a><h2>Apprentissage de l&#039;API Windows</h2><div class="content" role="article">
<figure id="r-498700" data-claire-element-id="498701"><img id="r-498699" data-claire-element-id="498699" src="medias/uploads.siteduzero.com_files_16001_17000_16371.png" alt="Image utilisateur"/></figure><p id="r-498702" data-claire-element-id="498702">Vous voudriez apprendre l'API Windows et vous trouvez les autres cours présents sur le net trop difficiles ou pas assez précis ? Vous avez frappé à la bonne porte.</p><p id="r-498703" data-claire-element-id="498703">Bienvenue dans ce tutoriel. Vous allez apprendre ici à vous servir d'une API <strong>très</strong> développée : l'API Win32. Sa proximité avec le système d'exploitation lui permet d'avoir un contrôle total sur n'importe quelle partie de l'OS, et un grand éventail de fonctions.</p><aside id="r-498705" data-claire-element-id="498705" data-claire-semantic="warning"><p id="r-498704" data-claire-element-id="498704">L'API Windows est, malheureusement et comme son nom l'indique, exclusivement dédiée à Windows. Donc, si vous possédez un autre OS, passez votre chemin.</p></aside><p id="r-498706" data-claire-element-id="498706">Je considère dans ce tutoriel que vous ne connaissez strictement rien à l'API Windows, ceci pour ne pas décourager les débutants ; néanmoins, vous aurez besoin des connaissances acquises tout au long du tuto de M@teo21. Vous trouverez donc ici des cours évolutifs, entrecoupés de TP réguliers, une documentation sur les différents messages, notifications, styles, fonctions, etc., et même un glossaire ;) .</p><p id="r-498707" data-claire-element-id="498707">Toutes ces parties seront progressivement remplies au fur et à mesure de la rédaction du tutorial en lui-même. J'ai pour cela des coéquipiers, respectivement pamaury et acryline.</p><div id="r-498709" data-claire-element-id="498709" data-claire-semantic="question"><p id="r-498708" data-claire-element-id="498708">Si vous avez des problèmes, des questions, ou encore des suggestions, vous pouvez nous envoyer un MP, auquel on se fera un plaisir de répondre. ;)</p></div><aside id="r-498711" data-claire-element-id="498711" data-claire-semantic="information"><p id="r-498710" data-claire-element-id="498710">Les termes touchant à la programmation que vous êtes susceptibles de ne pas comprendre seront de couleur rouge, et seront définis dans le glossaire.</p></aside><p id="r-498712" data-claire-element-id="498712">Sur ce, je vous souhaite une agréable lecture, et j'espère que ce tuto vous aidera le plus possible. :)</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Lesbases"></a><h2>Les bases</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
<span class="next">Commencement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-498715" data-claire-element-id="498715">Ce chapitre va vous inculquer les bases du API Win32.</p>
</div><a name="Commencement"></a><h2>Commencement</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">
<span class="arrow"></span>
<span class="next">Les bases</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
<span class="next">Votre première fenêtre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-commencement" data-claire-element-id="498787">Commencement</h4><p id="r-498716" data-claire-element-id="498716">Le nom de ce que vous allez apprendre vous a sûrement laissés perplexes : je vous ai dit que nous allions vous apprendre l'API Windows, mais vous ne savez peut-être toujours pas de quoi il s'agit.</p><p id="r-498717" data-claire-element-id="498717">Une API, ou Application Programming Interface est, comme son nom l'indique, une interface de programmation : elle contient un ensemble de fonctions bas niveau, ici extrêmement bien documentée (<a href="http://msdn.microsoft.com/library">comme vous pouvez le constater</a>), permettant de programmer des applications haut niveau. Elles sont alors accessibles à partir de bibliothèques intégrées au projet.</p><p id="r-498718" data-claire-element-id="498718">Pour pouvoir utiliser le WinAPI, vous devez évidemment sélectionner un projet WinAPI dans votre IDE pendant la création du nouveau projet. Par exemple, sous code::blocks, vous devez sélectionner &quot;Win32 GUI Application&quot; comme sur cette photo :</p><figure id="r-498720" data-claire-element-id="498721"><img id="r-498719" data-claire-element-id="498719" src="medias/uploads.siteduzero.com_files_16001_17000_16219.jpg" alt="Image utilisateur"/></figure><aside id="r-498723" data-claire-element-id="498723" data-claire-semantic="information"><p id="r-498722" data-claire-element-id="498722">Vous n'aurez rien à <em>linker</em> pour le moment.</p></aside><p id="r-498724" data-claire-element-id="498724">Comme vous pouvez vous en douter, vous devrez inclure la bibliothèque appropriée pour utiliser cette API, à savoir :</p><pre id="r-498725" data-claire-element-id="498725"><code data-claire-semantic="c">#include &lt;windows.h&gt;</code></pre><p id="r-498726" data-claire-element-id="498726">Comme chacun sait, une seule fonction est commune à tous les programmes : le <em>main</em>. Le point d'entrée du programme est, dans cette API, un peu plus compliqué que dans un projet console ou SDL. Ainsi, le code minimal que vous pouvez faire en WinAPI est le suivant :</p><pre id="r-498727" data-claire-element-id="498727"><code data-claire-semantic="c">#include &lt;windows.h&gt;

int WinMain (
                HINSTANCE cetteInstance,
                HINSTANCE precedenteInstance,
                LPSTR lignesDeCommande,
                int modeDAffichage
            )
{
   return 0;
}</code></pre><div id="r-498729" data-claire-element-id="498729" data-claire-semantic="question"><p id="r-498728" data-claire-element-id="498728">:waw: C'est quoi, tout ça ? Où diable sont passés les <em>argc</em> et <em>argv</em> tout bêtes ?</p></div><p id="r-498730" data-claire-element-id="498730">Pas de panique. ;) Étudions ensemble cette fonction. Vous connaissez forcément le type de retour de cette fonction : il s'agit d'un <em>int</em>. Passons maintenant aux arguments :</p><ul id="r-498748" data-claire-element-id="498748"><li id="r-498733" data-claire-element-id="498733"><p id="r-498731" data-claire-element-id="498731">Le premier argument est l'instance actuelle de votre programme. C'est en quelque sorte une &quot;boîte&quot; représentant votre programme, et imbriquant tout ce qu'il contient (pour ne pas vous encombrer la tête) :</p><pre id="r-498732" data-claire-element-id="498732"><code data-claire-semantic="c">HINSTANCE cetteInstance</code></pre></li><li id="r-498738" data-claire-element-id="498738"><p id="r-498734" data-claire-element-id="498734">Le deuxième argument désigne l'instance précédente. En fait, ce paramètre date de Windows 16 bits, et donc obsolète. Il vaut donc toujours <em>NULL</em> :</p><pre id="r-498735" data-claire-element-id="498735"><code data-claire-semantic="c">HINSTANCE precedenteInstance</code></pre><aside id="r-498737" data-claire-element-id="498737" data-claire-semantic="information"><p id="r-498736" data-claire-element-id="498736">Conséquence : vous n'êtes même pas obligés d'indiquer un nom de variable, bien que le type soit quand même nécessaire.</p></aside></li><li id="r-498742" data-claire-element-id="498742"><p id="r-498739" data-claire-element-id="498739">Le troisième argument remplace justement <strong>argv</strong> que vous connaissez déjà dans le prototype du<em> main </em>console ou SDL. Cependant, il est dans sa forme brute ; vous ne pourrez donc pas l'utiliser de suite (je vous expliquerai plus tard comment la découper et l'utiliser) :</p><pre id="r-498740" data-claire-element-id="498740"><code data-claire-semantic="c">LPSTR lignesDeCommande</code></pre><p id="r-498741" data-claire-element-id="498741">Il est d'un type que vous ne connaissez pas, puisqu'il s'agit d'une structure signée Microsoft. Celle-ci correspond à un bête <em>char</em>*.</p></li><li id="r-498747" data-claire-element-id="498747"><p id="r-498743" data-claire-element-id="498743">Le petit dernier ne vous servira probablement pas souvent : il s'agit du mode d'affichage (visible, invisible, minimisé etc...) de la fenêtre principale :</p><pre id="r-498744" data-claire-element-id="498744"><code data-claire-semantic="c">int modeDAffichage</code></pre><aside id="r-498746" data-claire-element-id="498746" data-claire-semantic="information"><p id="r-498745" data-claire-element-id="498745">Même remarque que pour le paramètre contenant l'instance précédente.</p></aside></li></ul><p id="r-498749" data-claire-element-id="498749">Pour ceux qui écoutent les conseils du rédacteur -à savoir moi ;) -, vous devriez au préalable savoir à quoi correspondent les types principaux utilisés par cette API :</p><ul id="r-498778" data-claire-element-id="498778"><li id="r-498751" data-claire-element-id="498751"><p id="r-498750" data-claire-element-id="498750"><em>LPSTR</em> correspondant à un <strong>char *</strong>, et ses déclinaisons :</p></li><ul id="r-498760" data-claire-element-id="498760"><li id="r-498753" data-claire-element-id="498753"><p id="r-498752" data-claire-element-id="498752"><em>LPCSTR</em> correspondant à un <strong>const char *</strong>.</p></li><li id="r-498756" data-claire-element-id="498756"><p id="r-498754" data-claire-element-id="498754"><em>LPTSTR</em> correspondant à un <strong>TCHAR *</strong> (<em>voir TCHAR plus bas</em>). <br/> On l'initialise avec la macro <strong>TEXT</strong>, selon :</p><pre id="r-498755" data-claire-element-id="498755"><code data-claire-semantic="c">LPTSTR string = TEXT(&quot;exemple&quot;);</code></pre></li><li id="r-498759" data-claire-element-id="498759"><p id="r-498757" data-claire-element-id="498757"><em>LPWSTR</em> correspondant à un <strong>wchar_t *</strong><br/> On l'initialise avec le préfixe ' <strong>L</strong>', selon :</p><pre id="r-498758" data-claire-element-id="498758"><code data-claire-semantic="c">LPWSTR string = L&quot;exemple&quot;;</code></pre></li></ul><aside id="r-498762" data-claire-element-id="498762" data-claire-semantic="information"><p id="r-498761" data-claire-element-id="498761">Vous pouvez combiner les lettres définissant un caractère particulier de <em>LPSTR</em> pour obtenir des types adaptés (comme <em>LPCTSTR</em>).</p></aside><li id="r-498764" data-claire-element-id="498764"><p id="r-498763" data-claire-element-id="498763"><em>WORD</em> correspondant à un <strong>unsigned short</strong></p></li><li id="r-498766" data-claire-element-id="498766"><p id="r-498765" data-claire-element-id="498765"><em>DWORD</em> correspondant à un <strong>unsigned long</strong></p></li><li id="r-498768" data-claire-element-id="498768"><p id="r-498767" data-claire-element-id="498767"><em>TCHAR</em> correspondant à :</p></li><ul id="r-498773" data-claire-element-id="498773"><li id="r-498770" data-claire-element-id="498770"><p id="r-498769" data-claire-element-id="498769">En compilant en Unicode : un <strong>wchar_t</strong></p></li><li id="r-498772" data-claire-element-id="498772"><p id="r-498771" data-claire-element-id="498771">Sinon : un <strong>char</strong> ;)</p></li></ul><aside id="r-498775" data-claire-element-id="498775" data-claire-semantic="warning"><p id="r-498774" data-claire-element-id="498774">Il est recommandé d'utiliser les <em>TCHAR</em> partout (même si ce n'est pas fait dans ce tuto), du moment que l'on n'utilise pas <em>stdio</em>, ou certaines fonctions de cette API (dont je vous mettrai en garde si c'est le cas), pour des raisons de compatibilité avec n'importe quel IDE.</p></aside><aside id="r-498777" data-claire-element-id="498777" data-claire-semantic="information"><p id="r-498776" data-claire-element-id="498776">Seuls les utilisateurs de VS en général compilent en Unicode. Si n'en voulez pas (ça simplifie les choses), voici la manip' à exécuter : <em>Project Properties -&gt; Configuration Properties -&gt; General -&gt; Character set -&gt; Changer l 'option de &quot;unicode&quot; à &quot;multi-byte&quot;</em>.</p></aside></ul><p id="r-498779" data-claire-element-id="498779">Et voilà pour une présentation restreinte ^^ .</p><p id="r-498780" data-claire-element-id="498780">Vous savez maintenant ne rien afficher sans erreur de compilation ! :lol: Génial, non ? Vous en voulez plus ? (pas étonnant ;) ) D'accord, direction <em>&quot;Votre première fenêtre&quot;</em> :) .</p><aside id="r-498785" data-claire-element-id="498785" data-claire-semantic="information"><p id="r-498781" data-claire-element-id="498781">Pour ceux qui veulent absolument un &quot;Hello World&quot; avant de commencer (ça les frustre sûrement), voici la formule magique à rajouter dans le <em>WinMain</em> :</p><pre id="r-498782" data-claire-element-id="498782"><code data-claire-semantic="c">MessageBox(NULL, &quot;Hello World&quot;, &quot;Hello World&quot;, MB_OK);</code></pre><p id="r-498783" data-claire-element-id="498783">Ou plus propre :</p><pre id="r-498784" data-claire-element-id="498784"><code data-claire-semantic="c">MessageBox(NULL, TEXT(&quot;Hello World&quot;), TEXT(&quot;Hello World&quot;), MB_OK);</code></pre></aside><p id="r-498786" data-claire-element-id="498786"><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">
<span class="arrow"></span>
<span class="next">Les bases</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
<span class="next">Votre première fenêtre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Votrepremirefentre"></a><h2>Votre première fenêtre</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
<span class="arrow"></span>
<span class="next">Commencement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
<span class="next">Elle est vide, ma fenêtre !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-votre-premiere-fenetre-1" data-claire-element-id="498940">Votre première fenêtre</h4><p id="r-498788" data-claire-element-id="498788">Vous êtes impatient de créer votre première fenêtre ? Tant mieux, c'est ici que ça se passe. :p</p><h5 id="r-le-minimum" data-claire-element-id="498793">Le minimum</h5><p id="r-498789" data-claire-element-id="498789">Premièrement, munissez-vous du code minimal que je vous ai donné tout à l'heure :</p><pre id="r-498790" data-claire-element-id="498790"><code data-claire-semantic="c">#include &lt;windows.h&gt;

int WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance, LPSTR lignesDeCommande, int modeDAffichage)
{
   return 0;
}</code></pre><aside id="r-498792" data-claire-element-id="498792" data-claire-semantic="warning"><p id="r-498791" data-claire-element-id="498791">Dans certains cas, vous serez contraints de rajouter les mots clés <em>WINAPI </em>ou <em>APIENTRY </em>entre <em>'int' </em>et <em>'WinMain'</em>, cause d'une erreur de compilation de type &quot;<em>WinMain already defined in...</em>&quot;. Si c'est le cas, adaptez mes codes à cette situation.</p></aside><h5 id="r-les-variables-necessaires" data-claire-element-id="498807">Les variables nécessaires</h5><p id="r-498794" data-claire-element-id="498794">Nous aurons besoin pour afficher la fenêtre de plusieurs variables :</p><pre id="r-498795" data-claire-element-id="498795"><code data-claire-semantic="c">HWND fenetrePrincipale;
MSG message;
WNDCLASS classeFenetre;</code></pre><p id="r-498796" data-claire-element-id="498796">Étudions d'abord leur type respectif et leurs rôles :</p><ul id="r-498806" data-claire-element-id="498806"><li id="r-498801" data-claire-element-id="498801"><p id="r-498797" data-claire-element-id="498797"><strong>fenetrePrincipale</strong> est de type <strong>HWND</strong>, qui veut dire <strong>handle</strong> de fenêtre. Si vous connaissez un minimum l'anglais, vous remarquerez que l'on pourrait le traduire par poignée.</p><div id="r-498799" data-claire-element-id="498799" data-claire-semantic="question"><p id="r-498798" data-claire-element-id="498798">Quel est le rapport ?</p></div><p id="r-498800" data-claire-element-id="498800">Réfléchissez : fenetrePrincipale sera une sorte de &quot;poignée&quot; nous permettant d'agir sur la fenêtre principale. En outre, cette structure possède sur la fenêtre toutes les informations nécessaires à son affichage. Bien sûr, ce <em>handle </em>ayant un nom, cela nous permet d'identifier, par le nom d'une variable, la fenêtre créée (bref : c'est bien pratique :) ).</p></li><li id="r-498803" data-claire-element-id="498803"><p id="r-498802" data-claire-element-id="498802"><strong>message</strong>, quant à lui, est comme son nom l'indique un <strong>message</strong> système, utilisé pour communiquer entre l'utilisateur et les fenêtres : il s'agit en fait du descriptif d'un événement. Si vous connaissez la SDL, vous pourriez faire la correspondance avec 'SDL_event'.</p></li><li id="r-498805" data-claire-element-id="498805"><p id="r-498804" data-claire-element-id="498804"><strong>classeFenetre</strong> est la classe de fenêtre (décidément, je choisis bien les noms ;) ) nécessaire à la construction de la fenêtre principale. C'est en fait une liste d'informations permettant par la suite de créer la fenêtre selon notre bon vouloir. (Je précise que la &quot;classe&quot; n'a pas ici la même définition que pour le C++.)</p></li></ul><h5 id="r-remplissage-de-la-classe-de-fenetre" data-claire-element-id="498842">Remplissage de la classe de fenêtre</h5><p id="r-498808" data-claire-element-id="498808">La création de la fenêtre demande le remplissage de sa classe, ou <strong>WNDCLASS</strong>. Nous allons donc nous en occuper :</p><ul id="r-498839" data-claire-element-id="498839"><li id="r-498811" data-claire-element-id="498811"><p id="r-498809" data-claire-element-id="498809">Le champ 1 définit le style à affecter à la fenêtre. Ici, il n'y en a pas :</p><pre id="r-498810" data-claire-element-id="498810"><code data-claire-semantic="c">classeFenetre.style=0;</code></pre></li><li id="r-498814" data-claire-element-id="498814"><p id="r-498812" data-claire-element-id="498812">Le champ 2 définit la fonction callback à utiliser pour cette fenêtre (je vous explique plus loin) :</p><pre id="r-498813" data-claire-element-id="498813"><code data-claire-semantic="c">classeFenetre.lpfnWndProc = procedureFenetrePrincipale;</code></pre></li><li id="r-498817" data-claire-element-id="498817"><p id="r-498815" data-claire-element-id="498815">Le champ 3 définit combien de <em>bytes </em>en plus seront alloués à la suite de la structure (cela nous est inutile, donc 0 ^^ ) :</p><pre id="r-498816" data-claire-element-id="498816"><code data-claire-semantic="c">classeFenetre.cbClsExtra = 0;</code></pre></li><li id="r-498820" data-claire-element-id="498820"><p id="r-498818" data-claire-element-id="498818">Le champ 4 définit la même chose, mais suite à l'instance (donc aussi inutile) :</p><pre id="r-498819" data-claire-element-id="498819"><code data-claire-semantic="c">classeFenetre.cbWndExtra = 0;</code></pre></li><li id="r-498823" data-claire-element-id="498823"><p id="r-498821" data-claire-element-id="498821">Le champ 5 définit l'instance à laquelle appartient la fenêtre :</p><pre id="r-498822" data-claire-element-id="498822"><code data-claire-semantic="c">classeFenetre.hInstance = cetteInstance;</code></pre></li><li id="r-498826" data-claire-element-id="498826"><p id="r-498824" data-claire-element-id="498824">Le champ 6 définit l'icône à utiliser pour la fenêtre (en haut à gauche). Elle doit être chargée soit en passant par les ressources (nous verrons cela plus tard), soit, comme suit, avec une icône inclue dans Windows, possédant un ID spécifique (la liste sera peut-être proposée dans notre documentation) :</p><pre id="r-498825" data-claire-element-id="498825"><code data-claire-semantic="c">classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);</code></pre></li><li id="r-498829" data-claire-element-id="498829"><p id="r-498827" data-claire-element-id="498827">Le champ 7 définit le curseur par défaut à utiliser pour cette fenêtre (même chose que pour les icônes : le curseur utilisé ici est inclus dans Windows, et choisi parmi une petite liste) :</p><pre id="r-498828" data-claire-element-id="498828"><code data-claire-semantic="c">classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);</code></pre></li><li id="r-498832" data-claire-element-id="498832"><p id="r-498830" data-claire-element-id="498830">Le champ 8 définit la couleur à utiliser pour le fond de la fenêtre. Son type est <strong>HBRUSH</strong>, (traduit par <strong>brosse</strong>), et peut être changé grâce à une fonction de conversion, <em>RGB-&gt;HBRUSH</em>, que nous verrons plus tard, dans le chapitre sur l'affichage :</p><pre id="r-498831" data-claire-element-id="498831"><code data-claire-semantic="c">classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);</code></pre></li><li id="r-498835" data-claire-element-id="498835"><p id="r-498833" data-claire-element-id="498833">Le champ 9 définit le menu associé à cette fenêtre (peut être ajouté d'une autre manière) : ici, il n'y en aura aucun :</p><pre id="r-498834" data-claire-element-id="498834"><code data-claire-semantic="c">classeFenetre.lpszMenuName =  NULL;</code></pre></li><li id="r-498838" data-claire-element-id="498838"><p id="r-498836" data-claire-element-id="498836">Et enfin le le champ 10, qui sera le nom de la classe en question :</p><pre id="r-498837" data-claire-element-id="498837"><code data-claire-semantic="c">classeFenetre.lpszClassName = &quot;classeF&quot;;</code></pre></li></ul><p id="r-498840" data-claire-element-id="498840">Maintenant que nous avons rempli la classe de la fenêtre, encore faut-il la sauvegarder. Voici comment faire :</p><pre id="r-498841" data-claire-element-id="498841"><code data-claire-semantic="c">RegisterClass(&amp;classeFenetre);</code></pre><h5 id="r-creation-proprement-dite-de-la-fenetre-principale" data-claire-element-id="498887">Création proprement dite de la fenêtre principale</h5><p id="r-498843" data-claire-element-id="498843">Enfin ! Nous sommes prêts à créer notre fenêtre. C'est le travail de la fonction, dont voici le prototype :</p><pre id="r-498844" data-claire-element-id="498844"><code data-claire-semantic="c">HWND CreateWindow(
                        LPCTSTR lpClassName,  
                        LPCTSTR lpWindowName,
                        DWORD dwStyle, 
                        int x, 
                        int y, 
                        int nWidth,  
                        int nHeight, 
                        HWND hWndParent, 
                        HMENU hMenu,  
                        HANDLE hInstance, 
                        LPVOID lpParam
               );</code></pre><div id="r-498846" data-claire-element-id="498846" data-claire-semantic="question"><p id="r-498845" data-claire-element-id="498845">:euh: Ne me dis pas que l'on doit retenir toutes ces fonctions ?</p></div><p id="r-498847" data-claire-element-id="498847">Bon d'accord, elles sont lourdes... mais non, vous n'êtes pas obligés de les retenir. Mais à force de les utiliser (vous verrez ;) ), vous les connaîtrez par coeur. <em>&quot;C'est en forgeant qu'on devient forgeron&quot;</em> à ce qu'il paraît. :p</p><p id="r-498848" data-claire-element-id="498848">Bon. Déjà, vous pouvez remarquer que son type de retour est <em>HWND. </em>Vous pouvez faire la correspondance avec fenetrePrincipale, et deviner que c'est celle-ci qui va contenir le retour de <em>CreateWindow</em> ^^ . En fait, cette fonction remplit la structure <em>HWND </em>avec les informations propres à la fenêtre, et la crée par la même occasion. (<em>CreateWindow</em> ne crée pas vraiment que des fenêtres au sens connu, mais toutes sortes de contrôles, que ce soit : fenêtre, bouton, <em>listbox</em>, <em>progressbar</em>, etc.)</p><p id="r-498849" data-claire-element-id="498849">Maintenant, occupons-nous de ses arguments :</p><ul id="r-498878" data-claire-element-id="498878"><li id="r-498853" data-claire-element-id="498853"><p id="r-498850" data-claire-element-id="498850">L'argument 1 désigne la classe de fenêtre à partir de laquelle la fenêtre va être créée :</p><pre id="r-498851" data-claire-element-id="498851"><code data-claire-semantic="c">LPCTSTR lpClassName</code></pre><p id="r-498852" data-claire-element-id="498852">(Vous avez peut être remarqué qu'il est de type <em>LPCTSTR</em>... C'est en fait la même chose que <em>LPSTR </em>mais constant, donc égal à <em>const char[]</em>.)</p></li><li id="r-498856" data-claire-element-id="498856"><p id="r-498854" data-claire-element-id="498854">L'argument 2 désigne le nom de la fenêtre, c'est-à-dire, dans le cas d'une fenêtre, la <em>string </em>qui va être affichée en guise de titre :</p><pre id="r-498855" data-claire-element-id="498855"><code data-claire-semantic="c">LPCTSTR lpWindowName</code></pre></li><li id="r-498860" data-claire-element-id="498860"><p id="r-498857" data-claire-element-id="498857">L'argument 3 désigne les styles à donner à la fenêtre :</p><pre id="r-498858" data-claire-element-id="498858"><code data-claire-semantic="c">DWORD dwStyle</code></pre><p id="r-498859" data-claire-element-id="498859">(Vous avez sûrement remarqué que le type de cet argument vous est inconnu : en fait, il est utilisé un peu partout, et correspond à un <em>unsigned long</em>. Il est souvent utilisé pour les <em>styles</em> / <em>flags</em>, et sûrement construit à partir d'une association de bits.)</p></li><li id="r-498863" data-claire-element-id="498863"><p id="r-498861" data-claire-element-id="498861">Les arguments 4 à 7 désignent respectivement : les coordonnées du coin supérieur gauche, la largeur, ainsi que la hauteur de la fenêtre :</p><pre id="r-498862" data-claire-element-id="498862"><code data-claire-semantic="c">int x, 
int y, 
int nWidth, 
int nHeight</code></pre></li><li id="r-498866" data-claire-element-id="498866"><p id="r-498864" data-claire-element-id="498864">L'argument 8 désigne le <em>handle </em>de la fenêtre parent :</p><pre id="r-498865" data-claire-element-id="498865"><code data-claire-semantic="c">HWND hWndParent</code></pre></li><li id="r-498869" data-claire-element-id="498869"><p id="r-498867" data-claire-element-id="498867">L'argument 9 désigne, dans le cas d'une fenêtre, le menu associé à celle-ci, et dans le cas d'un contrôle, son ID (pour pouvoir le manipuler) :</p><pre id="r-498868" data-claire-element-id="498868"><code data-claire-semantic="c">HMENU hMenu</code></pre></li><li id="r-498873" data-claire-element-id="498873"><p id="r-498870" data-claire-element-id="498870">L'argument 10 désigne l'instance du programme :</p><pre id="r-498871" data-claire-element-id="498871"><code data-claire-semantic="c">HANDLE hInstance</code></pre><p id="r-498872" data-claire-element-id="498872">(<em>HINSTANCE</em> dérive de <em>HANDLE</em>, donc son passage en tant que <em>HANDLE </em>se déroule sans histoire.)</p></li><li id="r-498877" data-claire-element-id="498877"><p id="r-498874" data-claire-element-id="498874">L'argument 11 désigne les éventuels paramètres à envoyer à la fenêtre, à sa création :</p><pre id="r-498875" data-claire-element-id="498875"><code data-claire-semantic="c">LPVOID lpParam</code></pre><p id="r-498876" data-claire-element-id="498876">(<em>LPVOID</em> est en fait un équivalent à <em>void</em>*. Pour ceux ayant fait de la SDL, cet argument possède le même rôle que le paramètre optionnel de type <em>void</em>* des <em>timers</em>.)</p></li></ul><p id="r-498879" data-claire-element-id="498879">Et maintenant que vous connaissez chacun des arguments de la fonction <em>CreateWindow</em>, passons au codage pour créer une fenêtre :</p><pre id="r-498880" data-claire-element-id="498880"><code data-claire-semantic="c">fenetePrincipale = CreateWindow(&quot;classeF&quot;, 
&quot;Première fenêtre en winAPI !&quot;, 
WS_OVERLAPPEDWINDOW, /*Style qui permet d'avoir une fenêtre tout ce qu'il y a de plus normale : barre de titre, menu système (réduire, maximiser, fermer), bordure etc...*/
CW_USEDEFAULT, // Permet à l'OS de déterminer dynamiquement la position de la fenêtre
CW_USEDEFAULT, //Idem
400,
300,
NULL, // Pas de fenêtre parent, puisque c'est la principale
NULL, //Aucun menu ne lui est associé
cetteInstance,
NULL); // Aucun paramètre à lui envoyer en plus</code></pre><p id="r-498881" data-claire-element-id="498881">Mais la fenêtre ne s'affichera pas pour autant. :o Elle est créée, mais c'est tout. ^^</p><aside id="r-498883" data-claire-element-id="498883" data-claire-semantic="information"><p id="r-498882" data-claire-element-id="498882">Notez qu'elle aurait pu l'être en possédant le style <strong>WS_VISIBLE</strong>.</p></aside><p id="r-498884" data-claire-element-id="498884">Pour l'afficher, il faut appeler la fonction <strong>ShowWindow</strong> ! Celle-ci prend en premier paramètre le <em>handle </em>de la fenêtre dont on veut changer le mode d'affichage, et un <em>integer </em>déterminant son mode. Vous pouvez soit utiliser le paramètre de <em>WinMain </em><strong>modeDAffichage</strong>, soit utiliser la valeur qu'il prend d'habitude : <strong>SW_SHOW</strong>. Donc :</p><pre id="r-498885" data-claire-element-id="498885"><code data-claire-semantic="c">ShowWindow(fenetrePrincipale,SW_SHOW);</code></pre><p id="r-498886" data-claire-element-id="498886">Maintenant que la fenêtre est en mode &quot;affichée&quot;, il faut rafraîchir l'écran afin de la montrer à l'utilisateur : c'est le rôle de <strong>UpdateWindow</strong>, prenant comme seul paramètre le <em>handle </em>de la fenêtre. Vous l'utiliserez sûrement beaucoup après avoir créé des contrôles enfants d'une fenêtre, afin de rafraîchir l'écran juste après leur création.</p><h5 id="r-boucle-evenementielle" data-claire-element-id="498901">Boucle événementielle</h5><p id="r-498888" data-claire-element-id="498888">Afin d'interfacer l'utilisateur avec la fenêtre, nous avons besoin d'une boucle événementielle traitant les messages créés par l'utilisateur (qui ne le sait même pas :p ) et destinés aux fenêtres concernées.<br/> Pour cela, nous allons utiliser une nouvelle fonction que voici :</p><pre id="r-498889" data-claire-element-id="498889"><code data-claire-semantic="c">BOOL GetMessage(LPMSG msg, HWND hwnd, UINT wMsgFilterMin, UINT wMsgFilterMax);</code></pre><ul id="r-498897" data-claire-element-id="498897"><li id="r-498893" data-claire-element-id="498893"><p id="r-498890" data-claire-element-id="498890">L'argument 1 désigne le message récupérateur des événements :</p><pre id="r-498891" data-claire-element-id="498891"><code data-claire-semantic="c">LPMSG msg</code></pre><p id="r-498892" data-claire-element-id="498892">(Comme vous l'avez peut être deviné, les deux lettres 'L<strong>P</strong>' désignent un pointeur sur le type adjacent...)</p></li><li id="r-498896" data-claire-element-id="498896"><p id="r-498894" data-claire-element-id="498894">L'argument 2 désigne le <em>handle </em>de fenêtre dont <em>GetMessage </em>va récupérer les événements (s'il est égal à <em>NULL</em>, <em>GetMessage</em> traitera toutes les fenêtres de l'instance) :</p><pre id="r-498895" data-claire-element-id="498895"><code data-claire-semantic="c">HWND hwnd</code></pre></li></ul><p id="r-498898" data-claire-element-id="498898">Les deux autres paramètres ne sont pas très importants pour le moment (je ne voudrais pas que vous partiez avant votre première fenêtre ;) ). Mettez-les donc à zéro.</p><p id="r-498899" data-claire-element-id="498899">Donc, mettons en place la boucle :</p><pre id="r-498900" data-claire-element-id="498900"><code data-claire-semantic="c">while (GetMessage(&amp;message, NULL, 0, 0)) /*Récupération des évènements de toutes les fenêtres de l'instance dans message*/
{
    TranslateMessage(&amp;message); // Traduction de l'événement
    DispatchMessage(&amp;message); // Envoi du message correspondant à la fenêtre concernée
}</code></pre><h5 id="r-la-fonction-callback" data-claire-element-id="498929">La fonction callback</h5><p id="r-498902" data-claire-element-id="498902">Cf glossaire</p><p id="r-498903" data-claire-element-id="498903">Vous vous rappelez le champ de structure de classeFenetre où on a donné le nom d'une fonction <em>callback</em> ? Eh bien définissons-la. ^^ Voilà déjà son prototype :</p><pre id="r-498904" data-claire-element-id="498904"><code data-claire-semantic="c">LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam);</code></pre><aside id="r-498906" data-claire-element-id="498906" data-claire-semantic="information"><p id="r-498905" data-claire-element-id="498905">Son type de retour est assez spécial, mais j'ai choisi de ne pas vous le détailler ici, pour ne pas vous encombrer la tête avec des choses inutiles.</p></aside><ul id="r-498916" data-claire-element-id="498916"><li id="r-498909" data-claire-element-id="498909"><p id="r-498907" data-claire-element-id="498907">Le paramètre 1 désigne le <em>handle </em>de la fenêtre concernée :</p><pre id="r-498908" data-claire-element-id="498908"><code data-claire-semantic="c">HWND fenetrePrincipale</code></pre></li><li id="r-498912" data-claire-element-id="498912"><p id="r-498910" data-claire-element-id="498910">Le paramètre 2 désigne le message envoyé par la boucle événementielle traitée :</p><pre id="r-498911" data-claire-element-id="498911"><code data-claire-semantic="c">UINT message</code></pre></li><li id="r-498915" data-claire-element-id="498915"><p id="r-498913" data-claire-element-id="498913">Les paramètres 3 et 4 désignent des pointeurs d'<em>int</em> chargés d'apporter des précisions sur l'origine du message :</p><pre id="r-498914" data-claire-element-id="498914"><code data-claire-semantic="c">WPARAM wParam, LPARAM lParam</code></pre></li></ul><p id="r-498917" data-claire-element-id="498917">Ces paramètres vous seront décrits un peu plus tard, quand nous parlerons plus en détail des messages créés par l'utilisateur.</p><p id="r-498918" data-claire-element-id="498918">La fonction <em>callback </em>étant un traitement des messages envoyés à la fenêtre, elle est chargée de faire telle ou telle action en fonction de tel ou tel message. C'est heureusement nous qui devons la coder. :p</p><p id="r-498919" data-claire-element-id="498919">Dans un premier temps, je vous propose de gérer les messages à l'intérieur de cette fonction de la manière suivante :</p><pre id="r-498920" data-claire-element-id="498920"><code data-claire-semantic="c">LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
        case WM_CREATE:
            return 0;

        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(fenetrePrincipale, message, wParam, lParam);
    }
}</code></pre><p id="r-498921" data-claire-element-id="498921">Le <em>switch </em>détermine quel message a été perçu par <em>GetMessage </em>:</p><ul id="r-498928" data-claire-element-id="498928"><li id="r-498923" data-claire-element-id="498923"><p id="r-498922" data-claire-element-id="498922"><strong>WM_CREATE</strong> est envoyé à la création de la fenêtre. (Vous pourrez par ailleurs récupérer l'argument optionnel n°11 de <em>CreateWindow</em> à cet endroit.)</p></li><li id="r-498925" data-claire-element-id="498925"><p id="r-498924" data-claire-element-id="498924"><strong>WM_DESTROY</strong> est envoyé lors de la destruction de la fenêtre. Par défaut (vous verrez que nous pouvons le changer), il est déclenché par <strong>WM_CLOSE</strong>, correspondant à un clic sur la croix en haut à droite que vous connaissez si bien ;) . Ici, il est traité, et <strong>PostQuitMessage</strong> est exécuté : il s'agit d'une fonction permettant de quitter simplement et proprement le programme. Elle prend comme unique argument 0.</p></li><li id="r-498927" data-claire-element-id="498927"><p id="r-498926" data-claire-element-id="498926">Si aucun message déclaré explicitement n'est perçu, on retourne la procédure par défaut fournie par <strong>DefWindowProc</strong>.</p></li></ul><h5 id="r-code-complet-7" data-claire-element-id="498939">Code complet</h5><p id="r-498930" data-claire-element-id="498930">Et voilà : vous êtes prêts pour créer votre première fenêtre ! En combinant le tout, vous devriez avoir ce code-ci :magicien: :</p><pre id="r-498931" data-claire-element-id="498931"><code data-claire-semantic="c">#include &lt;windows.h&gt;

LRESULT CALLBACK procedureFenetrePrincipale(HWND, UINT, WPARAM, LPARAM);

int WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
LPSTR lignesDeCommande, int modeDAffichage)
{
    HWND fenetrePrincipale;
    MSG message;
    WNDCLASS classeFenetre;

    classeFenetre.style = 0;
    classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
    classeFenetre.cbClsExtra = 0;
    classeFenetre.cbWndExtra = 0;
    classeFenetre.hInstance = NULL;
    classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
    classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
    classeFenetre.lpszMenuName =  NULL;
    classeFenetre.lpszClassName = &quot;classeF&quot;;

    // On prévoit quand même le cas où ça échoue
    if(!RegisterClass(&amp;classeFenetre)) return FALSE;

    fenetrePrincipale = CreateWindow(&quot;classeF&quot;, &quot;Ma première fenêtre winAPI !&quot;, WS_OVERLAPPEDWINDOW,
                                   CW_USEDEFAULT, CW_USEDEFAULT, 400, 300,
                                                   NULL, NULL, cetteInstance, NULL);
    if (!fenetrePrincipale) return FALSE;

    ShowWindow(fenetrePrincipale, modeDAffichage);
    UpdateWindow(fenetrePrincipale);


    while (GetMessage(&amp;message, NULL, 0, 0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }
    return message.wParam;
}

LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    switch (message)
    {
        case WM_CREATE:
            return 0;

        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(fenetrePrincipale, message, wParam, lParam);
    }
}</code></pre><p id="r-498932" data-claire-element-id="498932">Et vous obtenez cette oeuvre magnifique (il ne faut pas exagérer quand même :-° ) :</p><figure id="r-498934" data-claire-element-id="498935"><img id="r-498933" data-claire-element-id="498933" src="medias/uploads.siteduzero.com_files_16001_17000_16220.jpg" alt="Image utilisateur"/></figure><p id="r-498936" data-claire-element-id="498936">Enfin, presque ;) . Vous aurez sûrement une barre de titre différente, à cause du thème de Windows.</p><p id="r-498937" data-claire-element-id="498937">Voilà, ce premier chapitre est terminé, j'espère qu'il vous a plu :) . Ne vous découragez surtout pas face à la longueur du code, car cela en vaut la peine, et cela va rentrer progressivement en tant qu'automatisme.</p><p id="r-498938" data-claire-element-id="498938"><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
<span class="arrow"></span>
<span class="next">Commencement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
<span class="next">Elle est vide, ma fenêtre !</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Elleestvidemafentre"></a><h2>Elle est vide, ma fenêtre !</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
<span class="arrow"></span>
<span class="next">Votre première fenêtre</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
<span class="next">Les menus</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-elle-est-vide-ma-fenetre" data-claire-element-id="499026">Elle est vide, ma fenêtre !</h4><p id="r-498941" data-claire-element-id="498941">Pour le moment, votre fenêtre vous paraît sûrement vide et terne ... nous allons l'animer un peu ;) . Nous allons voir ici comment créer des boutons, comment les manipuler, et comment faire apparaître un message à l'utilisateur.</p><p id="r-498942" data-claire-element-id="498942">Déjà, incorporez ou chargez le code obtenu dans la dernière sous-partie afin d'afficher une fenêtre (changez aussi les dimensions de 300 de hauteur à 110, cela sera plus esthétique :) ).</p><h5 id="r-creation-des-boutons" data-claire-element-id="498986">Création des boutons</h5><p id="r-498943" data-claire-element-id="498943">Je vous propose dans cette sous-partie de créer deux boutons : un permettant d'afficher une information à l'utilisateur, et un autre pour quitter (ce n'est pas pour rien que je l'incorpore, vous allez pouvoir avoir plus de précisions sur la gestion des messages).</p><p id="r-498944" data-claire-element-id="498944">Les boutons sont créés à partir d'une fonction que vous connaissez bien désormais : <strong>CreateWindow</strong>.</p><div id="r-498946" data-claire-element-id="498946" data-claire-semantic="question"><p id="r-498945" data-claire-element-id="498945">:-° Mais je croyais que c'était pour faire des fenêtres ?</p></div><p id="r-498947" data-claire-element-id="498947">Oui, mais les contrôles sont considérés comme des fenêtres, <strong>enfants</strong> (donc &quot;attachées&quot; si vous voulez) de la fenêtre <strong>parent</strong>. Seules les <strong>classes</strong> de fenêtres sont différentes selon le contrôle. Vous vous rappelez de la classe que nous avons créée pour la fenêtre principale, <strong>classeFenetre</strong> ? Eh bien, pour les contrôles, les classes sont prédéfinies. On trouve donc comme classes :</p><ul id="r-498956" data-claire-element-id="498956"><li id="r-498949" data-claire-element-id="498949"><p id="r-498948" data-claire-element-id="498948"><em>BUTTON</em> : permettant de créer un bouton.</p></li><li id="r-498951" data-claire-element-id="498951"><p id="r-498950" data-claire-element-id="498950"><em>LISTBOX</em> : permettant de créer une liste de choix.</p></li><li id="r-498953" data-claire-element-id="498953"><p id="r-498952" data-claire-element-id="498952"><em>STATIC</em> : permettant toutes sortes de choses, comme des images, des <em>groupbox</em>, etc.</p></li><li id="r-498955" data-claire-element-id="498955"><p id="r-498954" data-claire-element-id="498954">Et bien d'autres...</p></li></ul><aside id="r-498958" data-claire-element-id="498958" data-claire-semantic="information"><p id="r-498957" data-claire-element-id="498957">Vous verrez ces contrôles basiques lors du prochain chapitre.</p></aside><p id="r-498959" data-claire-element-id="498959">Comme vous vous en doutez, nous allons donc utiliser la classe <em>BUTTON</em>. Avant de les créer, vous devez savoir une chose : les contrôles sont gérés (grâce aux messages, notifications [servant à avertir d'un événement secondaire]...) à partir soit d'un <em>handle</em> (pratique n'est ce pas ? ^^ ), soit d'un <strong>ID</strong>, défini grâce à :</p><pre id="r-498960" data-claire-element-id="498960"><code data-claire-semantic="c">#define ID 1</code></pre><p id="r-498961" data-claire-element-id="498961">Où ID est généralement un mot l'identifiant bien (par convention, en majuscule), et suivi d'un nombre le remplaçant lors de la compilation. (Il faut avouer que recevoir le message ' CLIC ' est plus pratique que ' 02123 ' par exemple. Surtout quand les IDs se multiplient...)</p><p id="r-498962" data-claire-element-id="498962">Donc, nous allons d'abord créer les <em>handles</em> de boutons, dans un tableau pour plus d'accessibilité. Les contrôles sont déclarés au début du <em>callback</em> de la fenêtre à laquelle ils appartiennent :</p><pre id="r-498963" data-claire-element-id="498963"><code data-claire-semantic="c">LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    static HWND boutons[2] = {NULL};</code></pre><aside id="r-498965" data-claire-element-id="498965" data-claire-semantic="warning"><p id="r-498964" data-claire-element-id="498964">Veillez à bien mettre le mot-clé <strong>static</strong> lors de la déclaration d'une variable permanente : celui-ci permet à la variable d'avoir la même portée, soit, mais surtout une durée de vie commune à celle de la fenêtre.</p></aside><aside id="r-498967" data-claire-element-id="498967" data-claire-semantic="information"><p id="r-498966" data-claire-element-id="498966">C'est une méthode quelque peu barbare, surtout quand on a beaucoup de variables permanentes, mais j'ai choisi de vous en parler, car vous connaissez normalement déjà ce mot-clé ;) . Cependant, j'envisage de vous parler d'une autre méthode (meilleure) plus tard. Pour les curieux, il s'agit de la combinaison de <strong>SetWindowLong()</strong> avec <strong>GetWindowLong()</strong> (et leur déclinaison <em>~Ptr</em>), permettant d'utiliser les membres de la <em>WindowClass cbClsExtra</em> et <em>cbWndExtra</em>.</p></aside><p id="r-498968" data-claire-element-id="498968">Intégrez au préalable les définitions des ID des boutons au début de votre code :</p><pre id="r-498969" data-claire-element-id="498969"><code data-claire-semantic="c">#define ID_B_PARLER 0
#define ID_B_QUITTER 1</code></pre><p id="r-498970" data-claire-element-id="498970">Dernière chose : vous vous rappelez le prototype de <em>CreateWindow</em> ? Cette fonction demandait l'instance. Or, la fonction <em>callback</em> n'entre pas dans la portée de cette variable. Nous sommes alors contraints d'en faire une variable globale.<br/> Déclarez une variable globale comme suit :</p><pre id="r-498971" data-claire-element-id="498971"><code data-claire-semantic="c">HINSTANCE instance;</code></pre><p id="r-498972" data-claire-element-id="498972">Et, en guise de première instruction (de préférence après les déclarations de variables) de <em>WinMain</em>, copiez <strong>cetteInstance</strong> dans <strong>instance</strong> comme suit :</p><pre id="r-498973" data-claire-element-id="498973"><code data-claire-semantic="c">instance = cetteInstance;</code></pre><p id="r-498974" data-claire-element-id="498974">Bien. Maintenant, nous sommes prêts à créer les boutons. Cette opération se fait en général dans le <strong>WM_CREATE</strong>, puisqu'ils sont créés en même temps que la fenêtre parent :</p><pre id="r-498975" data-claire-element-id="498975"><code data-claire-semantic="c">case WM_CREATE:
                boutons[0] = CreateWindow(&quot;BUTTON&quot;, &quot;Parler&quot;, WS_CHILD | WS_VISIBLE,
        5, 5, 383, 30, fenetrePrincipale, ID_B_PARLER, instance, NULL);
                boutons[1] = CreateWindow(&quot;BUTTON&quot;, &quot;Quitter&quot;, WS_CHILD | WS_VISIBLE,
        5, 45, 383, 30, fenetrePrincipale, ID_B_QUITTER, instance, NULL);
            return 0;</code></pre><p id="r-498976" data-claire-element-id="498976">Comme vous pouvez le voir, les styles <strong>WS_CHILD</strong> et <strong>WS_VISIBLE</strong> sont appliqués aux boutons :</p><ul id="r-498981" data-claire-element-id="498981"><li id="r-498978" data-claire-element-id="498978"><p id="r-498977" data-claire-element-id="498977"><strong>WS_CHILD</strong> solidarise le contrôle à la fenêtre parent. Sans lui, le contrôle flotterait &quot;en l'air&quot;, en dehors de la fenêtre.</p></li><li id="r-498980" data-claire-element-id="498980"><p id="r-498979" data-claire-element-id="498979"><strong>WS_VISIBLE</strong> affiche le contrôle (donc, pas besoin de <strong>ShowWindow</strong>).</p></li></ul><p id="r-498982" data-claire-element-id="498982">Vous pouvez voir alors que les ID sont, comme je l'ai dit pendant la description de cette fonction, à la place du menu normalement associé à une fenêtre.</p><aside id="r-498984" data-claire-element-id="498984" data-claire-semantic="information"><p id="r-498983" data-claire-element-id="498983">Si une erreur de type <em>&quot;Invalid conversion from...to...&quot;</em> se présente, effectuez un cast de la variable passée en paramètre en type attendu. En effet, le typage est plus strict en C++ qu'en C.</p></aside><p id="r-498985" data-claire-element-id="498985">Les boutons sont maintenant créés, mais n'ont aucune action.</p><h5 id="r-gestion-de-l-enfoncement-du-bouton" data-claire-element-id="499002">Gestion de l'enfoncement du bouton</h5><p id="r-498987" data-claire-element-id="498987">Maintenant que les boutons existent, il nous faut les associer à des actions particulières. Tout d'abord, un peu de théorie. Je vous ai dit que le <em>switch</em> du message déterminait le message perçu : celui-ci a pu être dans le cas précédent <strong>WM_CREATE</strong>, ou <strong>WM_DESTROY</strong>. Mais ce message est complété par <strong>wParam</strong> et <strong>lParam</strong>, passés à la fonction <em>callback</em>. Ceux-ci contiennent des messages complémentaires, ou des notifications. Ces paramètres étant des doubles mots, on peut récupérer le mot bas et le mot haut de chacun de ces deux paramètres grâce aux macros <em>LOWORD()</em> ou <em>HIWORD()</em>.</p><p id="r-498988" data-claire-element-id="498988">Justement, quand un bouton est enfoncé, le message vaut <strong>WM_COMMAND</strong>, et le mot bas de <em>wParam</em> détermine l'ID du bouton qui a été cliqué, et qui a donc envoyé ce message. En l'utilisant dans notre code, on obtient donc :</p><pre id="r-498989" data-claire-element-id="498989"><code data-claire-semantic="c">case WM_COMMAND:
    switch(LOWORD(wParam))
    {
       case ID_B_PARLER:
          //Ici l'instruction associée à &quot;Parler&quot;
          break;

       case ID_B_QUITTER:
           //Là l'instruction associée à &quot;Quitter&quot;
           break;
    }
    return 0;</code></pre><p id="r-498990" data-claire-element-id="498990">Ainsi, si le bouton &quot;Parler&quot; a été cliqué, le message vaudra <em>WM_COMMAND</em>, et un test du mot bas du paramètre <em>wParam </em>indiquera l'ID de celui ci, ou <em>ID_B_PARLER.</em></p><div id="r-498992" data-claire-element-id="498992" data-claire-semantic="question"><p id="r-498991" data-claire-element-id="498991">Peut-on, nous (à travers du code), envoyer des messages ?</p></div><p id="r-498993" data-claire-element-id="498993">Ça tombe bien, je voulais l'utiliser pour le bouton &quot;Quitter&quot;. :p En effet, ce bouton a le même effet que &quot;la croix&quot;. Comme son message associé est <strong>WM_DESTROY</strong>, nous allons donc envoyer le message <em>WM_DESTROY </em>à la fenêtre principale quand le bouton &quot;Quitter&quot; a été cliqué.</p><p id="r-498994" data-claire-element-id="498994">La fonction permettant d'y arriver s'appelle <strong>SendMessage</strong> (quelle coïncidence ^^) ; son prototype est le suivant :</p><pre id="r-498995" data-claire-element-id="498995"><code data-claire-semantic="c">LRESULT SendMessage(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam);</code></pre><p id="r-498996" data-claire-element-id="498996">Vous l'avez deviné, <em>SendMessage</em> ne fait qu'exécuter la fonction <em>callback</em> avec le message spécifié dans <strong>msg</strong>, les paramètres spécifiés dans <strong>wParam</strong> et <strong>lParam</strong>, et retourne ce que retourne le <em>callback</em> (logique).</p><p id="r-498997" data-claire-element-id="498997">Très pratique, vous vous en servirez beaucoup, je vous l'assure ^^ .</p><p id="r-498998" data-claire-element-id="498998">En l'adaptant à notre code, nous obtenons ceci :</p><pre id="r-498999" data-claire-element-id="498999"><code data-claire-semantic="c">SendMessage(fenetrePrincipale, WM_DESTROY, 0, 0);</code></pre><p id="r-499000" data-claire-element-id="499000">Les paramètres n'étant pas utilisés, nous les mettons à zéro. Ce bout de code est évidemment à mettre dans le ' <em>case ID_B_QUITTER</em> '.</p><p id="r-499001" data-claire-element-id="499001">Le bouton &quot;Quitter&quot; est donc opérationnel. Occupons-nous maintenant du bouton &quot;Parler&quot;. Ce bouton doit avoir pour effet d'afficher quelque chose à l'utilisateur : par exemple, de l'informer que le bouton a été cliqué (bon d'accord, ce n'est pas très original, mais ce sont les bases :p ). Et pour cela, rien de mieux que <strong>MessageBox</strong>.</p><h5 id="r-messagebox" data-claire-element-id="499013">MessageBox</h5><p id="r-499003" data-claire-element-id="499003">Cette fonction, dont le prototype est le suivant :</p><pre id="r-499004" data-claire-element-id="499004"><code data-claire-semantic="c">int MessageBox(HWND hWnd, LPCTSTR lpText, LPCTSTR lpCaption, UINT uType);</code></pre><p id="r-499005" data-claire-element-id="499005">affiche une petite <em>messagebox</em> portant comme titre la chaîne spécifiée par <em>lpCaption</em>, comme texte celui spécifié par <em>lpText</em>, étant rattachée à la fenêtre spécifiée par <em>hWnd</em> et ayant comme style ceux spécifiés dans <em>uType</em>.</p><p id="r-499006" data-claire-element-id="499006">Vraiment, vous ne connaissez pas ? Vous avez été bercé aux doux sons des erreurs, ou aux <em>warnings</em> de non-sauvegarde en quittant, tous deux rapportés grâce aux messages <em>boxes</em>. :p</p><p id="r-499007" data-claire-element-id="499007">Les icônes et boutons de celles-ci sont déterminés grâce au paramètre <em>uType</em>, mais la liste ne sera pas donnée ici.</p><aside id="r-499009" data-claire-element-id="499009" data-claire-semantic="information"><p id="r-499008" data-claire-element-id="499008">Vous trouverez la liste complète dans notre mini-documentation.</p></aside><p id="r-499010" data-claire-element-id="499010">Donc, en utilisant cette fonction en guise de réponse à un clic sur &quot;Parler&quot;, on obtient ce code :</p><pre id="r-499011" data-claire-element-id="499011"><code data-claire-semantic="c">MessageBox(fenetrePrincipale, &quot;Clic !&quot;, &quot;Bonjour.&quot;, MB_ICONINFORMATION);</code></pre><p id="r-499012" data-claire-element-id="499012"><strong>MB_ICONINFORMATION</strong> est une constante permettant d'ajouter un bouton 'OK' à la <em>messagebox</em>, et une icône en forme de bulle.<br/> Vous n'avez plus qu'à placer ce code dans le <em>'case ID_B_PARLER'</em> du <em>callback.</em></p><h5 id="r-code-complet-8" data-claire-element-id="499025">Code complet</h5><p id="r-499014" data-claire-element-id="499014">Eh bien j'ai l'impression que l'on a fini notre modeste programme ! En voici donc le code complet :</p><pre id="r-499015" data-claire-element-id="499015"><code data-claire-semantic="c">#include &lt;windows.h&gt;

#define ID_B_PARLER 0
#define ID_B_QUITTER 1

HINSTANCE instance;

LRESULT CALLBACK procedureFenetrePrincipale(HWND, UINT, WPARAM, LPARAM);

int WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
LPSTR lignesDeCommande, int modeDAffichage)
{
    HWND fenetrePrincipale;
    MSG message;
    WNDCLASS classeFenetre;

    instance = cetteInstance;

    classeFenetre.style = 0;
    classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
    classeFenetre.cbClsExtra = 0;
    classeFenetre.cbWndExtra = 0;
    classeFenetre.hInstance = NULL;
    classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
    classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
    classeFenetre.lpszMenuName =  NULL;
    classeFenetre.lpszClassName = &quot;classeF&quot;;

    // On prévoit quand même le cas où ça échoue
    if(!RegisterClass(&amp;classeFenetre)) return FALSE;

    fenetrePrincipale = CreateWindow(&quot;classeF&quot;, &quot;Ma premiere fenetre winAPI !&quot;, WS_OVERLAPPEDWINDOW,
                                   CW_USEDEFAULT, CW_USEDEFAULT, 400, 110,
                                                   NULL, NULL, cetteInstance, NULL);
    if (!fenetrePrincipale) return FALSE;

    ShowWindow(fenetrePrincipale, modeDAffichage);
    UpdateWindow(fenetrePrincipale);


    while (GetMessage(&amp;message, NULL, 0, 0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }
    return message.wParam;
}

LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    static HWND boutons[2] = {NULL};

    switch (message)
    {
        case WM_CREATE:
                boutons[0] = CreateWindow(&quot;BUTTON&quot;, &quot;Parler&quot;, WS_CHILD | WS_VISIBLE,
        5, 5, 383, 30, fenetrePrincipale, (HMENU)ID_B_PARLER, instance, NULL);
                boutons[1] = CreateWindow(&quot;BUTTON&quot;, &quot;Quitter&quot;, WS_CHILD | WS_VISIBLE,
        5, 45, 383, 30, fenetrePrincipale, (HMENU)ID_B_QUITTER, instance, NULL);
            return 0;

        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case ID_B_PARLER:
                    MessageBox(fenetrePrincipale, &quot;Clic&quot;, &quot;Bonjour.&quot;, MB_ICONINFORMATION);
                    break;

                case ID_B_QUITTER:
                    SendMessage(fenetrePrincipale, WM_DESTROY, 0, 0);
                    break;
            }
            return 0;

        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(fenetrePrincipale, message, wParam, lParam);
    }
}</code></pre><p id="r-499016" data-claire-element-id="499016">Résultat :</p><figure id="r-499018" data-claire-element-id="499019"><img id="r-499017" data-claire-element-id="499017" src="medias/uploads.siteduzero.com_files_16001_17000_16221.jpg" alt="Image utilisateur"/></figure><p id="r-499020" data-claire-element-id="499020">Puis, avec &quot;Parler&quot; :</p><figure id="r-499022" data-claire-element-id="499023"><img id="r-499021" data-claire-element-id="499021" src="medias/uploads.siteduzero.com_files_16001_17000_16222.jpg" alt="Image utilisateur"/></figure><p id="r-499024" data-claire-element-id="499024"><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
<span class="arrow"></span>
<span class="next">Votre première fenêtre</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
<span class="next">Les menus</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesmenus"></a><h2>Les menus</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
<span class="arrow"></span>
<span class="next">Elle est vide, ma fenêtre !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
<span class="next">Les boîtes de dialogue</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-menus-11" data-claire-element-id="499128">Les menus</h4><p id="r-499027" data-claire-element-id="499027">Vous en voulez toujours plus, n'est-ce pas ? ;) Eh bien vous allez apprendre dans ce chapitre à créer <strong>des menus</strong>. Pour cela, deux manières de coder :</p><ul id="r-499032" data-claire-element-id="499032"><li id="r-499029" data-claire-element-id="499029"><p id="r-499028" data-claire-element-id="499028">en passant par les ressources</p></li><li id="r-499031" data-claire-element-id="499031"><p id="r-499030" data-claire-element-id="499030">dynamiquement en passant par des fonctions.</p></li></ul><h5 id="r-necessaire" data-claire-element-id="499036">Nécessaire</h5><p id="r-499033" data-claire-element-id="499033">En premier lieu, reprenez le code du chapitre précédent. En guise de test, nous créerons un menu &quot;Actions&quot; comportant les deux actions présentes sous la forme de boutons &quot;Parler&quot; et &quot;Quitter&quot;.</p><p id="r-499034" data-claire-element-id="499034">Peu importe la méthode utilisée, des <em>handles </em>de menus seront nécessaires pour chaque menu, et chaque sous-menu associé à la fenêtre. Ceux-ci comportent le type <strong>HMENU </strong>:</p><pre id="r-499035" data-claire-element-id="499035"><code data-claire-semantic="c">HMENU menu, sousMenu;</code></pre><h5 id="r-creation-du-menu" data-claire-element-id="499075">Création du menu</h5><h6 id="r-en-utilisant-des-fonctions" data-claire-element-id="499059">En utilisant des fonctions</h6><p id="r-499037" data-claire-element-id="499037">Les <em>handles </em>de menus peuvent être alors créés en vue d'un remplissage avec la fonction <strong>CreateMenu</strong>, ne comportant aucun paramètre :</p><pre id="r-499038" data-claire-element-id="499038"><code data-claire-semantic="c">HMENU CreateMenu(VOID);</code></pre><p id="r-499039" data-claire-element-id="499039">Une fois créés, nous pouvons les remplir selon leur type avec la fonction suivante :</p><pre id="r-499040" data-claire-element-id="499040"><code data-claire-semantic="c">BOOL AppendMenu(HMENU hMenu, UINT uFlags, UINT_PTR uIDNewItem, LPCSTR lpNewItem);</code></pre><p id="r-499041" data-claire-element-id="499041">Cette fonction, dont le rôle est d'ajouter une entrée, que cela soit une commande ou un sous-menu, comporte les arguments suivants :</p><ul id="r-499054" data-claire-element-id="499054"><li id="r-499044" data-claire-element-id="499044"><p id="r-499042" data-claire-element-id="499042">L'argument 1 désigne le menu auquel est associée l'entrée :</p><pre id="r-499043" data-claire-element-id="499043"><code data-claire-semantic="c">HMENU hMenu</code></pre></li><li id="r-499047" data-claire-element-id="499047"><p id="r-499045" data-claire-element-id="499045">L'argument 2 désigne le type de l'entrée, mais aussi par association de flags, des options facultatives (désactivé, coché, illustré, etc.) :</p><pre id="r-499046" data-claire-element-id="499046"><code data-claire-semantic="c">UINT uFlags</code></pre></li><li id="r-499050" data-claire-element-id="499050"><p id="r-499048" data-claire-element-id="499048">L'argument 3 désigne, dans le cas d'une commande, son ID (ayant le même effet que ceux des boutons), ou dans le cas d'une entrée popup, le <em>handle </em>du sous-menu associé :</p><pre id="r-499049" data-claire-element-id="499049"><code data-claire-semantic="c">UINT_PTR uIDNewItem</code></pre></li><li id="r-499053" data-claire-element-id="499053"><p id="r-499051" data-claire-element-id="499051">L'argument 4 désigne le nom affiché par l'entrée :</p><pre id="r-499052" data-claire-element-id="499052"><code data-claire-semantic="c">LPCSTR lpNewItem</code></pre></li></ul><p id="r-499055" data-claire-element-id="499055">Si vous voulez créer une entrée <em>popup </em>(donc un sous-menu), le <em>uFlags </em>doit correspondre à la valeur <strong>MF_POPUP</strong>. Dans le cas d'une commande, il doit être égal à <strong>MF_STRING</strong>.<br/> Les séparateurs peuvent, eux, être créés avec <strong>MF_SEPARATOR</strong> (les deux derniers paramètres seront alors ignorés).</p><p id="r-499056" data-claire-element-id="499056">Bien sûr, les sous-menus doivent être définis avant d'être associés à un menu, ou, dans le cas contraire, celui-ci n'aurait rien à intégrer.</p><p id="r-499057" data-claire-element-id="499057">Dans notre cas, la création du menu serait comme ceci :</p><pre id="r-499058" data-claire-element-id="499058"><code data-claire-semantic="c">//Déclarations :
HMENU menu, sousMenu;

//...

sousMenu = CreateMenu();
AppendMenu(sousMenu, MF_STRING, ID_B_PARLER, &quot;Parler&quot;);
AppendMenu(sousMenu, MF_SEPARATOR, (UINT)NULL, &quot;&quot;);
AppendMenu(sousMenu, MF_STRING, ID_B_QUITTER, &quot;Quitter&quot;);

menu = CreateMenu();
AppendMenu(menu, MF_POPUP, (UINT)sousMenu, &quot;Actions&quot;);</code></pre><h6 id="r-en-utilisant-les-ressources" data-claire-element-id="499074">En utilisant les ressources</h6><p id="r-499060" data-claire-element-id="499060">Les ressources servent à énormément de choses en WinAPI. Elles servent, comme vous le savez, à spécifier les fichiers stockés dans l'exécutable en précisant son ID, type et chemin, mais aussi à définir des accélérateurs clavier (que nous verrons plus tard), des schémas de boîtes de dialogue (dont nous aborderons l'utilisation dans le chapitre suivant), ou encore des schémas de menus (qui nous intéressent ici :p ), et bien d'autres choses.</p><p id="r-499061" data-claire-element-id="499061">La création d'un menu en ressource est plus logique qu'en utilisant <em>AppendMenu. </em>Elle observe donc une hiérarchie sous cette forme, qu'on appelle communément template :</p><pre id="r-499062" data-claire-element-id="499062"><code data-claire-semantic="c">ID_MENU MENU
BEGIN
    POPUP &quot;Menu&quot;
    BEGIN
        POPUP &quot;Sous Menu&quot;
        BEGIN
                MENUITEM &quot;Truc&quot;, ID_TRUC
                MENUITEM SEPARATOR
                MENUITEM &quot;Machin&quot;, ID_MACHIN
        END
        MENUITEM &quot;Groar&quot;, ID_GROAR
    END
    POPUP &quot;Menu2&quot;
    BEGIN
        MENUITEM &quot;Miaou&quot;, ID_MIAOU
    END
END</code></pre><p id="r-499063" data-claire-element-id="499063">(Bon d'accord, vive les noms... mais c'était pour vous montrer les différents cas possibles :-° .)</p><aside id="r-499065" data-claire-element-id="499065" data-claire-semantic="information"><p id="r-499064" data-claire-element-id="499064">Vous ne connaissez sûrement pas les mots-clés <strong>BEGIN</strong> et <strong>END</strong> : en fait, il s'agit d'une autre notation utilisée en ressources pour les accolades ouvrantes et fermantes.</p></aside><p id="r-499066" data-claire-element-id="499066">Comme vous pouvez le voir, <strong>ID_MENU</strong> n'est pas visible : il s'agit de l'identificateur du menu. (D'ailleurs, bien qu'il soit un ID, il n'a pas besoin d'être défini.) Seules les entrées entre ses <em>BEGIN </em>et <em>END </em>sont visibles : <strong>POPUP</strong> désigne les menus déroulants, et <strong>MENUITEM</strong> une commande (je suppose que vous savez ce que signifie <strong>SEPARATOR</strong> désormais ;) ). Les ID de chaque commande doivent être spécifiés après le nom affiché et une virgule.</p><aside id="r-499068" data-claire-element-id="499068" data-claire-semantic="information"><p id="r-499067" data-claire-element-id="499067">On peut, tout comme <em>AppendMenu</em>, lui appliquer des <em>flags </em>permettant de cocher l'entrée, la désactiver, etc. ; dans ce cas-ci, elles sont spécifiées à la suite après l'ID de la commande et une virgule séparatrice.</p></aside><p id="r-499069" data-claire-element-id="499069">Pour notre exemple, le code en ressource serait le suivant :</p><pre id="r-499070" data-claire-element-id="499070"><code data-claire-semantic="c">ID_MENU MENU
BEGIN
        POPUP &quot;Actions&quot;
        BEGIN
                MENUITEM &quot;Parler&quot;, ID_B_PARLER
                MENUITEM &quot;Quitter&quot;, ID_B_QUITTER
        END
END</code></pre><p id="r-499071" data-claire-element-id="499071">Bien. Après avoir créé le menu, encore faut-il le récupérer pour l'associer à la fenêtre. Pour cela, on utilise <strong>LoadMenu</strong>. Cette fonction, prenant comme premier paramètre l'instance actuelle, et en deuxième l'ID du menu, se charge de renvoyer un <em>handle </em>de menu. En utilisant ce <em>handle </em>de menu, vous pourrez l'utiliser lors de <strong>CreateWindow</strong> ou <strong>SetMenu</strong> (voir méthodes d'associations ci-après).</p><aside id="r-499073" data-claire-element-id="499073" data-claire-semantic="information"><p id="r-499072" data-claire-element-id="499072">Si vous utilisez la classe de fenêtre pour l'association, vous pouvez vous passer de ce passage, et indiquer de suite l'ID du menu au champ de la classe correspondante.</p></aside><h5 id="r-association-du-menu-avec-la-fenetre" data-claire-element-id="499087">Association du menu avec la fenêtre</h5><p id="r-499076" data-claire-element-id="499076">Afin d'intégrer le menu à la fenêtre, vous avez trois méthodes.</p><ul id="r-499086" data-claire-element-id="499086"><li id="r-499079" data-claire-element-id="499079"><p id="r-499077" data-claire-element-id="499077">Dans le cas d'une définition sans ressources (ou avec, mais en utilisant <em>LoadMenu</em>), à la création de la fenêtre, vous devez passer le nom du menu parent (ici <strong>menu</strong>) au paramètre n°9 de <em>CreateWindow</em>, étant <strong>hMenu</strong>, sans guillemets. Exemple :</p><pre id="r-499078" data-claire-element-id="499078"><code data-claire-semantic="c">fenetrePrincipale = CreateWindow(&quot;classeF&quot;, &quot;Ma premiere fenetre winAPI !&quot;, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, 400, 130, NULL, &lt;gras&gt;menu&lt;/gras&gt;, cetteInstance, NULL);</code></pre></li><li id="r-499082" data-claire-element-id="499082"><p id="r-499080" data-claire-element-id="499080">Dans le cas d'une définition utilisant les ressources, à la définition de la classe de fenêtre, vous devez passer le nom identificateur du menu au paramètre <strong>lpszMenuName</strong> de la structure <em>WNDCLASS </em>entre guillemets. Exemple :</p><pre id="r-499081" data-claire-element-id="499081"><code data-claire-semantic="c">classeFenetre.lpszMenuName = &quot;MENU&quot;;</code></pre></li><li id="r-499085" data-claire-element-id="499085"><p id="r-499083" data-claire-element-id="499083">Dans les deux cas, dans du reste du code, vous pouvez utiliser la fonction <strong>SetMenu</strong>, prenant comme premier paramètre le nom de la fenêtre à laquelle le menu (précisé dans le paramètre 2 sous <em>HMENU</em>) est associé. Exemple (cas utilisant les ressources) :</p><pre id="r-499084" data-claire-element-id="499084"><code data-claire-semantic="c">SetMenu(fenetrePrincipale, LoadMenu(instance, &quot;ID_MENU&quot;));</code></pre></li></ul><h5 id="r-code-complet-9" data-claire-element-id="499104">Code complet</h5><h6 id="r-contenu-des-autres-fichiers-cas-des-ressources" data-claire-element-id="499093">Contenu des autres fichiers (cas des ressources)</h6><p id="r-499088" data-claire-element-id="499088"><em>Resource.rc :</em></p><pre id="r-499089" data-claire-element-id="499089"><code data-claire-semantic="c">#include &lt;windows.h&gt;

#include &quot;constantes.h&quot;

ID_MENU MENU
BEGIN
    POPUP &quot;Actions&quot;
    BEGIN
        MENUITEM &quot;Parler&quot;, ID_B_PARLER
        MENUITEM SEPARATOR
        MENUITEM &quot;Quitter&quot;, ID_B_QUITTER
    END
END</code></pre><p id="r-499090" data-claire-element-id="499090"><em>constantes.h :</em></p><pre id="r-499091" data-claire-element-id="499091"><code data-claire-semantic="c">#ifndef CONSTANTES_H
#define CONSTANTES_H

#define ID_B_PARLER 0
#define ID_B_QUITTER 1

#endif</code></pre><p id="r-499092" data-claire-element-id="499092">(Protection contre les inclusions multiples facultative pour le moment.)</p><h6 id="r-1ere-methode" data-claire-element-id="499095">1ère méthode</h6><pre id="r-499094" data-claire-element-id="499094"><code data-claire-semantic="c">#include &lt;windows.h&gt;

#define ID_B_PARLER 0
#define ID_B_QUITTER 1

HINSTANCE instance;

LRESULT CALLBACK procedureFenetrePrincipale(HWND, UINT, WPARAM, LPARAM);

int WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
LPSTR lignesDeCommande, int modeDAffichage)
{
    HWND fenetrePrincipale;
    MSG message;
    WNDCLASS classeFenetre;
    HMENU menu, sousMenu;

    instance = cetteInstance;

    sousMenu = CreateMenu();
    AppendMenu(sousMenu,MF_STRING, ID_B_PARLER, &quot;Parler&quot;);
    AppendMenu(sousMenu,MF_SEPARATOR, (UINT)NULL, &quot;&quot;);
    AppendMenu(sousMenu,MF_STRING,ID_B_QUITTER,&quot;Quitter&quot;);

    menu = CreateMenu();
    AppendMenu(menu, MF_POPUP, (UINT)sousMenu, &quot;Actions&quot;);

    classeFenetre.style = 0;
    classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
    classeFenetre.cbClsExtra = 0;
    classeFenetre.cbWndExtra = 0;
    classeFenetre.hInstance = NULL;
    classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
    classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
    classeFenetre.lpszMenuName = NULL;
    classeFenetre.lpszClassName = &quot;classeF&quot;;

    // On prévoit quand même le cas où ça échoue
    if(!RegisterClass(&amp;classeFenetre)) return FALSE;

    fenetrePrincipale = CreateWindow(&quot;classeF&quot;, &quot;Ma premiere fenetre winAPI !&quot;, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, 400, 130, NULL, menu /* Ou LoadMenu(instance, &quot;ID_MENU&quot;)*/, cetteInstance, NULL);
    
    if (!fenetrePrincipale) return FALSE;

    ShowWindow(fenetrePrincipale, modeDAffichage);
    UpdateWindow(fenetrePrincipale);


    while (GetMessage(&amp;message, NULL, 0, 0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }
    return message.wParam;
}

LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    static HWND boutons[2] = {NULL};

    switch (message)
    {
        case WM_CREATE:
                boutons[0] = CreateWindow(&quot;BUTTON&quot;, &quot;Parler&quot;, WS_CHILD | WS_VISIBLE,
        5, 5, 383, 30, fenetrePrincipale, (HMENU)ID_B_PARLER, instance, NULL);
                boutons[1] = CreateWindow(&quot;BUTTON&quot;, &quot;Quitter&quot;, WS_CHILD | WS_VISIBLE,
        5, 45, 383, 30, fenetrePrincipale, (HMENU)ID_B_QUITTER, instance, NULL);
            return 0;

        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case ID_B_PARLER:
                    MessageBox(fenetrePrincipale, &quot;Clic&quot;, &quot;Bonjour.&quot;, MB_ICONINFORMATION);
                    break;

                case ID_B_QUITTER:
                    SendMessage(fenetrePrincipale, WM_DESTROY, 0, 0);
                    break;
            }
            return 0;

        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(fenetrePrincipale, message, wParam, lParam);
    }
}</code></pre><h6 id="r-2eme-methode" data-claire-element-id="499097">2ème méthode</h6><pre id="r-499096" data-claire-element-id="499096"><code data-claire-semantic="c">#include &lt;windows.h&gt;

#include &quot;constantes.h&quot;

HINSTANCE instance;

LRESULT CALLBACK procedureFenetrePrincipale(HWND, UINT, WPARAM, LPARAM);

int WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
LPSTR lignesDeCommande, int modeDAffichage)
{
    HWND fenetrePrincipale;
    MSG message;
    WNDCLASS classeFenetre;

    instance = cetteInstance;

    classeFenetre.style = 0;
    classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
    classeFenetre.cbClsExtra = 0;
    classeFenetre.cbWndExtra = 0;
    classeFenetre.hInstance = NULL;
    classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
    classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
    classeFenetre.lpszMenuName = &quot;ID_MENU&quot;;
    classeFenetre.lpszClassName = &quot;classeF&quot;;

    // On prévoit quand même le cas où ça échoue
    if(!RegisterClass(&amp;classeFenetre)) return FALSE;

    fenetrePrincipale = CreateWindow(&quot;classeF&quot;, &quot;Ma premiere fenetre winAPI !&quot;, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, 400, 130, NULL, NULL, cetteInstance, NULL);
    
    if (!fenetrePrincipale) return FALSE;

    ShowWindow(fenetrePrincipale, modeDAffichage);
    UpdateWindow(fenetrePrincipale);


    while (GetMessage(&amp;message, NULL, 0, 0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }
    return message.wParam;
}

LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    static HWND boutons[2] = {NULL};

    switch (message)
    {
        case WM_CREATE:
                boutons[0] = CreateWindow(&quot;BUTTON&quot;, &quot;Parler&quot;, WS_CHILD | WS_VISIBLE,
        5, 5, 383, 30, fenetrePrincipale, (HMENU)ID_B_PARLER, instance, NULL);
                boutons[1] = CreateWindow(&quot;BUTTON&quot;, &quot;Quitter&quot;, WS_CHILD | WS_VISIBLE,
        5, 45, 383, 30, fenetrePrincipale, (HMENU)ID_B_QUITTER, instance, NULL);
            return 0;

        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case ID_B_PARLER:
                    MessageBox(fenetrePrincipale, &quot;Clic&quot;, &quot;Bonjour.&quot;, MB_ICONINFORMATION);
                    break;

                case ID_B_QUITTER:
                    SendMessage(fenetrePrincipale, WM_DESTROY, 0, 0);
                    break;
            }
            return 0;

        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(fenetrePrincipale, message, wParam, lParam);
    }
}</code></pre><h6 id="r-3eme-methode" data-claire-element-id="499103">3ème méthode</h6><pre id="r-499098" data-claire-element-id="499098"><code data-claire-semantic="c">#include &lt;windows.h&gt;

#include &quot;constantes.h&quot;

HINSTANCE instance;

LRESULT CALLBACK procedureFenetrePrincipale(HWND, UINT, WPARAM, LPARAM);

int WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
LPSTR lignesDeCommande, int modeDAffichage)
{
    HWND fenetrePrincipale;
    MSG message;
    WNDCLASS classeFenetre;

    instance = cetteInstance;

    classeFenetre.style = 0;
    classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
    classeFenetre.cbClsExtra = 0;
    classeFenetre.cbWndExtra = 0;
    classeFenetre.hInstance = NULL;
    classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
    classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
    classeFenetre.lpszMenuName = NULL;
    classeFenetre.lpszClassName = &quot;classeF&quot;;

    // On prévoit quand même le cas où ça échoue
    if(!RegisterClass(&amp;classeFenetre)) return FALSE;

    fenetrePrincipale = CreateWindow(&quot;classeF&quot;, &quot;Ma premiere fenetre winAPI !&quot;, WS_OVERLAPPEDWINDOW, CW_USEDEFAULT, CW_USEDEFAULT, 400, 130, NULL, NULL, cetteInstance, NULL);
    if (!fenetrePrincipale) return FALSE;

    ShowWindow(fenetrePrincipale, modeDAffichage);
    UpdateWindow(fenetrePrincipale);


    while (GetMessage(&amp;message, NULL, 0, 0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }
    return message.wParam;
}

LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    static HWND boutons[2] = {NULL};

    switch (message)
    {
        case WM_CREATE:
                boutons[0] = CreateWindow(&quot;BUTTON&quot;, &quot;Parler&quot;, WS_CHILD | WS_VISIBLE,
        5, 5, 383, 30, fenetrePrincipale, (HMENU)ID_B_PARLER, instance, NULL);
                boutons[1] = CreateWindow(&quot;BUTTON&quot;, &quot;Quitter&quot;, WS_CHILD | WS_VISIBLE,
        5, 45, 383, 30, fenetrePrincipale, (HMENU)ID_B_QUITTER, instance, NULL);
                SetMenu(fenetrePrincipale, LoadMenu(instance, &quot;ID_MENU&quot;));
                /*Ou dans le cas manuel, SetMenu(fenetrePrincipale, menu); où menu a été d&quot;jà créé*/  
            return 0;

        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case ID_B_PARLER:
                    MessageBox(fenetrePrincipale, &quot;Clic&quot;, &quot;Bonjour.&quot;, MB_ICONINFORMATION);
                    break;

                case ID_B_QUITTER:
                    SendMessage(fenetrePrincipale, WM_DESTROY, 0, 0);
                    break;
            }
            return 0;

        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(fenetrePrincipale, message, wParam, lParam);
    }
}</code></pre><p id="r-499099" data-claire-element-id="499099">Résultat :</p><figure id="r-499101" data-claire-element-id="499102"><img id="r-499100" data-claire-element-id="499100" src="medias/uploads.siteduzero.com_files_16001_17000_16223.jpg" alt="Image utilisateur"/></figure><h5 id="r-pour-aller-plus-loin-38" data-claire-element-id="499127">Pour aller plus loin</h5><h6 id="r-activer-desactiver-une-entree" data-claire-element-id="499112">Activer / désactiver une entrée</h6><ul id="r-499111" data-claire-element-id="499111"><li id="r-499107" data-claire-element-id="499107"><p id="r-499105" data-claire-element-id="499105">Dès la création du menu : spécifier le <em>flag </em><strong>MF_DISABLED</strong> pour désactiver l'entrée (<strong>MF_ENABLED</strong>, permettant de l'activer, étant par défaut), ou <strong>MF_GRAYED</strong> pour le griser. Exemple :</p><pre id="r-499106" data-claire-element-id="499106"><code data-claire-semantic="c">MENUITEM &quot;Parler&quot;, ID_B_PARLER, MF_GRAYED</code></pre></li><li id="r-499110" data-claire-element-id="499110"><p id="r-499108" data-claire-element-id="499108">Dans le reste du code : utiliser la fonction <strong>EnableMenuItem</strong>, prenant comme premier paramètre le <em>handle </em>de menu, comme deuxième soit l'emplacement (basé sur 0) de l'entrée, soit sa commande (le choix étant spécifié par la valeur du troisième paramètre), et comme troisième son mode, par combinaison de son mode de détermination (<strong>MF_BYCOMMAND</strong> implique d'utiliser la commande pour le deuxième paramètre, et <strong>MF_BYPOSITION</strong> l'inverse) et du mode d'affichage, étant les mêmes valeurs possibles que pour les <em>flags </em>des entrées décrits ci-dessus. Exemple :</p><pre id="r-499109" data-claire-element-id="499109"><code data-claire-semantic="c">EnableMenuItem(menu, ID_B_PARLER, MF_BYCOMMAND | MF_GRAYED);</code></pre></li></ul><h6 id="r-cocher-decocher-une-entree" data-claire-element-id="499122">Cocher / Décocher une entrée</h6><ul id="r-499119" data-claire-element-id="499119"><li id="r-499115" data-claire-element-id="499115"><p id="r-499113" data-claire-element-id="499113">Dès la création du menu, on peut spécifier le <em>flag </em><strong>MF_CHECKED</strong> (pour coché) ou <strong>MF_UNCHECKED</strong> (valeur par défaut, non coché). Exemple :</p><pre id="r-499114" data-claire-element-id="499114"><code data-claire-semantic="c">MENUITEM &quot;Parler&quot;, ID_B_PARLER, MF_CHECKED</code></pre></li><li id="r-499118" data-claire-element-id="499118"><p id="r-499116" data-claire-element-id="499116">Dans le reste du code : utiliser la fonction <strong>CheckMenuItem</strong>, prenant comme premier paramètre le <em>handle </em>de menu concerné, et pour les deuxième et troisième paramètres, le même système que pour <em>EnableMenuItem</em>, excepté le fait que les états possibles sont ceux spécifiés ci-dessus. Exemple :</p><pre id="r-499117" data-claire-element-id="499117"><code data-claire-semantic="c">CheckMenuItem(menu, ID_B_PARLER, MF_BYCOMMAND | MF_CHECKED);</code></pre></li></ul><aside id="r-499121" data-claire-element-id="499121" data-claire-semantic="information"><p id="r-499120" data-claire-element-id="499120"><em>MF_BYCOMMAND</em> permet d'utiliser la commande de l'élément de menu concerné comme moyen de le déterminer, mais rien ne vous empêche d'utiliser <em>MF_BYPOSITION</em> pour son index.</p></aside><h6 id="r-ajouter-une-icone-a-un-element-de-menu" data-claire-element-id="499126">Ajouter une icône à un élément de menu</h6><p id="r-499123" data-claire-element-id="499123">Utilisez <a href="http://msdn.microsoft.com/en-us/library/ms647998(VS.85).aspx">SetMenuItemBitmaps()</a>, comme illustré dans l'exemple suivant :</p><pre id="r-499124" data-claire-element-id="499124"><code data-claire-semantic="c">SetMenuItemBitmaps(
                      hMenu, 
                      ID_PARLER, 
                      MF_BYCOMMAND,
                      LoadBitmap(hInstance, &quot;talkBtnBmp_normal&quot;),
                      LoadBitmap(hInstance, &quot;talkBtnBmp_selected&quot;)
                  );</code></pre><p id="r-499125" data-claire-element-id="499125"><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
<span class="arrow"></span>
<span class="next">Elle est vide, ma fenêtre !</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
<span class="next">Les boîtes de dialogue</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesbotesdedialogue"></a><h2>Les boîtes de dialogue</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
<span class="arrow"></span>
<span class="next">Les menus</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">
<span class="next">Les contrôles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-boites-de-dialogue-7" data-claire-element-id="499217">Les boîtes de dialogue</h4><p id="r-499129" data-claire-element-id="499129">Nous allons maintenant aborder les boîtes de dialogue. Pour ce chapitre, l'objectif sera juste d'ajouter une boîte de dialogue simple (comportant une icône et du texte) faisant office d'&quot;A propos&quot;.</p><h5 id="r-preparation-20" data-claire-element-id="499137">Préparation</h5><p id="r-499130" data-claire-element-id="499130">Pour faire apparaître la boîte de dialogue, nous avons besoin d'une commande. Pour cela, nous allons rajouter un menu <em>popup</em>, au même niveau que &quot;Actions&quot;, mais ayant pour nom <strong>&quot;Aide&quot;</strong>. Dans celui-ci, une entrée-commande sera ajoutée, portant <strong>&quot;A propos&quot;</strong> comme nom, et <strong>ID_B_APROPOS</strong> comme ID.</p><p id="r-499131" data-claire-element-id="499131">Pour cela, ajoutez (exemple utilisant les ressources : adaptez en conséquence pour les autres méthodes) :</p><pre id="r-499132" data-claire-element-id="499132"><code data-claire-semantic="c">POPUP &quot;Aide&quot;
BEGIN
        MENUITEM &quot;A propos&quot;, ID_B_APROPOS
END</code></pre><p id="r-499133" data-claire-element-id="499133">dans le <em>template </em>du menu en ressources.</p><p id="r-499134" data-claire-element-id="499134"><em>ID_B_APROPOS</em> devra être par ailleurs défini dans <strong>constantes.h</strong>.</p><p id="r-499135" data-claire-element-id="499135">Enfin et bien sûr, ajoutez un nouveau 'case' portant cet ID dans le <em>switch </em>du mot faible du message <em>WM_COMMAND</em>. Nous le remplirons plus tard.</p><p id="r-499136" data-claire-element-id="499136">La création d'une boîte de dialogue exige deux parties distinctes : la définition de son <em>template</em>, et sa création proprement dite. Voyons chacune de ces étapes.</p><h5 id="r-template-ressource" data-claire-element-id="499158">Template ressource</h5><p id="r-499138" data-claire-element-id="499138">Vous vous souvenez du <em>template</em> d'un menu en ressources ? C'est à peu près pareil pour une boîte de dialogue, excepté le fait que le mot-clé <strong><em>MENU</em></strong> est remplacé par <em><strong>DIALOG</strong></em> (ou <em><strong>DIALOGEX</strong></em>, si vous utilisez des styles étendus), et des informations supplémentaires comme sa position / largeur / hauteur, ses styles et son titre sont rajoutés juste avant la définition. Un schéma basique de boîte de dialogue peut alors être le suivant :</p><pre id="r-499139" data-claire-element-id="499139"><code data-claire-semantic="c">ID_DIALOGUE DIALOG
    CW_USEDEFAULT, CW_USEDEFAULT, 200, 120
    STYLE WS_OVERLAPPEDWINDOW
        CAPTION &quot;Titre&quot;
BEGIN
END</code></pre><p id="r-499140" data-claire-element-id="499140">L'ordre des ajouts n'est pas important, excepté le fait que les positions (les quatre paramètres entre virgules) de la boîte de dialogue doivent être les premiers à être définis.<br/><em><strong>WS_OVERLAPPEDWINDOW</strong></em> rend la boîte de dialogue <strong>modale</strong>, parfaitement banale : barre de titre, menu système (réduire, fermer, etc.)... tous les styles applicables aux fenêtres principales (contenus donc dans le champ <em>uStyle</em> de la <em>WNDCLASS</em>) le sont ici. Quant à <em><strong>CAPTION</strong></em> (dont la traduction française donne &quot;Titre&quot;), il indique la chaîne de caractères à afficher dans la barre de titre (d'où son nom).</p><aside id="r-499142" data-claire-element-id="499142" data-claire-semantic="information"><p id="r-499141" data-claire-element-id="499141">Vous pouvez consulter tous les styles applicables aux boîtes de dialogue dans la documentation ci-jointe.</p></aside><p id="r-499143" data-claire-element-id="499143">Chaque ajout de contrôle s'exécute par l'intermédiaire de mots-clés. Sauf exception (informations en surplus nécessaires, etc.), les lignes de &quot;déclaration&quot; de contrôles en utilisant ces mots-clés possèdent une organisation de ce type :</p><pre id="r-499144" data-claire-element-id="499144"><code data-claire-semantic="c">MOTCLE TEXTE_ASSOCIE, ID, x, y, w, h, STYLES</code></pre><p id="r-499145" data-claire-element-id="499145">Où x et y sont les coordonnées du coin supérieur gauche du contrôle, et w et h les dimensions du contrôle.</p><p id="r-499146" data-claire-element-id="499146">Par exemple, un bouton possède comme mot clé <em><strong>PUSHBUTTON</strong></em>. S'il est le bouton par défaut, il est alors <em><strong>DEFPUSHBUTTON</strong></em>.<br/> Autre exemple (je ne les choisis pas au hasard ;) ) : une icône possède le même mot-clé que pendant une intégration à l'exécutable de celle-ci, en passant par les ressources, à savoir <em><strong>ICON</strong></em>.<br/> Enfin, du texte peut être affiché avec le mot clé <em><strong>LTEXT</strong></em> (justifié à gauche) ou <em><strong>RTEXT</strong></em> (justifié à droite).</p><aside id="r-499148" data-claire-element-id="499148" data-claire-semantic="information"><p id="r-499147" data-claire-element-id="499147">D'autres mots-clés seront présentés en même temps que le cours sur le contrôle concerné (prochaine partie).</p></aside><p id="r-499149" data-claire-element-id="499149">Maintenant que vous savez tout ceci, vous êtes prêts à définir le <em>template</em> de votre boîte de dialogue. En premier lieu, intégrez à l'exécutable l'icône voulue avec, comme vous le savez, la syntaxe suivante :</p><pre id="r-499150" data-claire-element-id="499150"><code data-claire-semantic="c">icone1 ICON &quot;chemin/icone.ico&quot;</code></pre><p id="r-499151" data-claire-element-id="499151">Je vous propose donc :</p><pre id="r-499152" data-claire-element-id="499152"><code data-claire-semantic="c">APROPOS DIALOG
    CW_USEDEFAULT, CW_USEDEFAULT, 200, 120
        CAPTION &quot;Titre&quot;
        STYLE WS_OVERLAPPEDWINDOW
BEGIN
    DEFPUSHBUTTON &quot;Ok&quot;, IDOK, 96, 90, 42, 12
    ICON icone1, -1, 60, 55, 32, 32
    LTEXT &quot;A propos test des boîtes de dialogue&quot;, -1, 100, 58, 100, 10
END</code></pre><aside id="r-499154" data-claire-element-id="499154" data-claire-semantic="information"><p id="r-499153" data-claire-element-id="499153"><em>IDOK</em> est déjà déclaré avec l'API, tout comme <em>IDCANCEL</em> et d'autres.</p></aside><aside id="r-499156" data-claire-element-id="499156" data-claire-semantic="information"><p id="r-499155" data-claire-element-id="499155"><strong>-1</strong> est spécifié quand le contrôle n'a pas besoin d'ID (comme les icônes ou ici les textes).</p></aside><p id="r-499157" data-claire-element-id="499157">Maintenant que le schéma est créé, passons à la création proprement dite.</p><h5 id="r-creation-25" data-claire-element-id="499183">Création</h5><p id="r-499159" data-claire-element-id="499159">Pour créer la boîte de dialogue, deux méthodes : soit vous en faites une indépendante, de déco, etc., soit vous voulez la manipuler.</p><aside id="r-499161" data-claire-element-id="499161" data-claire-semantic="information"><p id="r-499160" data-claire-element-id="499160">Les fonctions utilisées auront chacune un but spécifique, mais rien ne vous empêche d'utiliser l'une ou l'autre tout le temps. Ce sont juste des questions de goûts et de besoins.</p></aside><p id="r-499162" data-claire-element-id="499162">Vous pouvez donc utiliser soit <strong>CreateDialog</strong>, soit <strong>DialogBox</strong>. Leur prototype est presque pareil : elles possèdent toutes deux les mêmes paramètres, mais <em>CreateDialog</em> permet de récupérer un <em>handle</em> de fenêtre sur la boîte de dialogue créée (ce qui vous fait donc deviner que <em>CreateDialog</em> est la fonction à utiliser, si vous voulez manipuler la boîte de dialogue à partir d'une autre fenêtre, récupérer des infos, etc.).<br/> Voici donc leurs paramètres :</p><ul id="r-499175" data-claire-element-id="499175"><li id="r-499165" data-claire-element-id="499165"><p id="r-499163" data-claire-element-id="499163">Le premier désigne l'instance actuelle :</p><pre id="r-499164" data-claire-element-id="499164"><code data-claire-semantic="c">HINSTANCE hInstance</code></pre></li><li id="r-499168" data-claire-element-id="499168"><p id="r-499166" data-claire-element-id="499166">Le deuxième désigne le <em>template</em> à utiliser, donc l'ID (plutôt une chaîne identifiante) de la boîte de dialogue entre guillemets :</p><pre id="r-499167" data-claire-element-id="499167"><code data-claire-semantic="c">LPCTSTR lpTemplate</code></pre></li><li id="r-499171" data-claire-element-id="499171"><p id="r-499169" data-claire-element-id="499169">Le troisième désigne le <em>handle</em> de la fenêtre parent :</p><pre id="r-499170" data-claire-element-id="499170"><code data-claire-semantic="c">HWND hWndParent</code></pre></li><li id="r-499174" data-claire-element-id="499174"><p id="r-499172" data-claire-element-id="499172">Le dernier désigne la fonction <em>callback</em> de la boîte de dialogue (un <em>cast</em> sera peut être nécessaire) :</p><pre id="r-499173" data-claire-element-id="499173"><code data-claire-semantic="c">DLGPROC lpDialogFunc</code></pre></li></ul><aside id="r-499177" data-claire-element-id="499177" data-claire-semantic="warning"><p id="r-499176" data-claire-element-id="499176">L'intérêt de <em>CreateDialog</em> subsiste dans le fait que la boîte de dialogue peut être créée au tout début, être manipulée entre temps et affichée quand on la demande. Mais tout comme <em>DialogBox</em>, elle s'affiche juste après être créée. Vous allez donc peut être avoir recours à <em>ShowWindow</em>.</p></aside><aside id="r-499179" data-claire-element-id="499179" data-claire-semantic="information"><p id="r-499178" data-claire-element-id="499178">Vous pouvez aussi passer des paramètres aux boîtes de dialogue créées, en utilisant <strong>DialogBoxParam</strong> ou <strong>CreateDialogParam</strong> permettant d'envoyer une information (structure) dans le paramètre <em>lParam</em> du message <em>WM_INITDIALOG</em> (celui-ci étant donc passé dans le 5ème paramètre de ces deux fonctions).</p></aside><p id="r-499180" data-claire-element-id="499180">Donc, si on choisit par exemple <em>DialogBox</em> comme fonction, on aura alors l'extrait de code suivant :</p><pre id="r-499181" data-claire-element-id="499181"><code data-claire-semantic="c">case WM_COMMAND:
  switch(LOWORD(wParam))
  {
      case ID_B_APROPOS:
         DialogBox(instance, &quot;APROPOS&quot;, fenetrePrincipale, (DLGPROC)aPropos_procedure);
         break;</code></pre><p id="r-499182" data-claire-element-id="499182">Or, <em>aPropos_procedure</em> n'existe pas. Nous allons donc nous occuper de sa fonction <em>callback</em>.</p><h5 id="r-la-fonction-callback-1" data-claire-element-id="499189">La fonction <em>callback</em></h5><p id="r-499184" data-claire-element-id="499184">Similaire à la procédure de la fenêtre principale, elle possède néanmoins un type de retour différent : <strong>BOOL APIENTRY</strong>. Je ne vais pas non plus le décrire ici.</p><p id="r-499185" data-claire-element-id="499185">Quelques différences notoires : <em>WM_CREATE</em> a été remplacé par <em>WM_INITDIALOG</em>, et <em>WM_DESTROY</em> n'est pas envoyé : <strong>EndDialog</strong> s'occupe de fermer la fenêtre (donc à ne pas utiliser de suite avec <em>CreateDialog</em>) en prenant comme paramètre : le <em>handle</em> de la boîte de dialogue, et 0.</p><p id="r-499186" data-claire-element-id="499186">On peut donc avoir la procédure suivante :</p><pre id="r-499187" data-claire-element-id="499187"><code data-claire-semantic="c">BOOL APIENTRY aPropos_procedure(HWND boiteDeDialogue,UINT message,WPARAM wParam,LPARAM lParam)
{
    switch (message)
    {
      case WM_INITDIALOG:

         return TRUE;

      case WM_COMMAND:
         if (LOWORD(wParam) == IDCANCEL || LOWORD(wParam) == IDOK)
         {
           EndDialog(boiteDeDialogue,0);
           return TRUE;
         }
         return 0;

      default:
         return FALSE;
    }
}</code></pre><p id="r-499188" data-claire-element-id="499188">Votre boîte de dialogue est alors achevée !</p><h5 id="r-code-complet-10" data-claire-element-id="499205">Code complet</h5><p id="r-499190" data-claire-element-id="499190">Voici maintenant le code complet :</p><p id="r-499191" data-claire-element-id="499191"><em>ressource.rc :</em></p><pre id="r-499192" data-claire-element-id="499192"><code data-claire-semantic="c">#include &lt;windows.h&gt;

#include &quot;constantes.h&quot;

icone1 ICON &quot;Icones/icone.ico&quot;

ID_MENU MENU
BEGIN
    POPUP &quot;Actions&quot;
    BEGIN
        MENUITEM &quot;Parler&quot;, ID_B_PARLER
        MENUITEM SEPARATOR
        MENUITEM &quot;Quitter&quot;, ID_B_QUITTER
    END
    POPUP &quot;Aide&quot;
    BEGIN
        MENUITEM &quot;A propos&quot;, ID_B_APROPOS
    END
END

APROPOS DIALOG
    CW_USEDEFAULT, CW_USEDEFAULT, 200, 120
        CAPTION &quot;Titre&quot;
        STYLE WS_OVERLAPPEDWINDOW
BEGIN
    DEFPUSHBUTTON &quot;Ok&quot;, IDOK, 76, 90, 42, 12
    ICON icone1, -1, 30, 50, 32, 32
    LTEXT &quot;A propos test des boîtes de dialogue&quot;, -1, 60, 38, 200, 10
END</code></pre><p id="r-499193" data-claire-element-id="499193"><em>constantes.h :</em></p><pre id="r-499194" data-claire-element-id="499194"><code data-claire-semantic="c">#ifndef CONSTANTES_H
#define CONSTANTES_H

#define ID_B_PARLER 0
#define ID_B_QUITTER 1
#define ID_B_APROPOS 2

#endif</code></pre><p id="r-499195" data-claire-element-id="499195"><em>main.cpp :</em></p><pre id="r-499196" data-claire-element-id="499196"><code data-claire-semantic="c">#include &lt;windows.h&gt;

#include &quot;constantes.h&quot;

HINSTANCE instance;

LRESULT CALLBACK procedureFenetrePrincipale(HWND, UINT, WPARAM, LPARAM);
BOOL APIENTRY aPropos_procedure(HWND hDlg,UINT uMsg,WPARAM wParam,LPARAM lParam);

int WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
LPSTR lignesDeCommande, int modeDAffichage)
{
    HWND fenetrePrincipale;
    MSG message;
    WNDCLASS classeFenetre;

    instance = cetteInstance;

    classeFenetre.style = 0;
    classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
    classeFenetre.cbClsExtra = 0;
    classeFenetre.cbWndExtra = 0;
    classeFenetre.hInstance = NULL;
    classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
    classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
    classeFenetre.lpszMenuName = NULL;
    classeFenetre.lpszClassName = &quot;classeF&quot;;

    // On prévoit quand même le cas où ça échoue
    if(!RegisterClass(&amp;classeFenetre)) return FALSE;

    fenetrePrincipale = CreateWindow(&quot;classeF&quot;, &quot;Ma premiere fenetre winAPI !&quot;, WS_OVERLAPPEDWINDOW,
                                   CW_USEDEFAULT, CW_USEDEFAULT, 400, 130,
                                                   NULL, LoadMenu(instance, &quot;ID_MENU&quot;), cetteInstance, NULL);
    if (!fenetrePrincipale) return FALSE;

    ShowWindow(fenetrePrincipale, modeDAffichage);
    UpdateWindow(fenetrePrincipale);


    while (GetMessage(&amp;message, NULL, 0, 0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }
    return message.wParam;
}

LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    static HWND boutons[2] = {NULL};

    switch (message)
    {
        case WM_CREATE:
                boutons[0] = CreateWindow(&quot;BUTTON&quot;, &quot;Parler&quot;, WS_CHILD | WS_VISIBLE,
        5, 5, 383, 30, fenetrePrincipale, (HMENU)ID_B_PARLER, instance, NULL);
                boutons[1] = CreateWindow(&quot;BUTTON&quot;, &quot;Quitter&quot;, WS_CHILD | WS_VISIBLE,
        5, 45, 383, 30, fenetrePrincipale, (HMENU)ID_B_QUITTER, instance, NULL);
            return 0;

        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                case ID_B_APROPOS:
                    DialogBox(instance, &quot;APROPOS&quot;, fenetrePrincipale, (DLGPROC)aPropos_procedure);
                    break;

                case ID_B_PARLER:
                    MessageBox(fenetrePrincipale, &quot;Clic&quot;, &quot;Bonjour.&quot;, MB_ICONINFORMATION);
                    break;

                case ID_B_QUITTER:
                    SendMessage(fenetrePrincipale, WM_DESTROY, 0, 0);
                    break;
            }
            return 0;

        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(fenetrePrincipale, message, wParam, lParam);
    }
}

BOOL APIENTRY aPropos_procedure(HWND boiteDeDialogue,UINT message,WPARAM wParam,LPARAM lParam)
{
    switch (message)
    {
      case WM_INITDIALOG:

         return TRUE;

      case WM_COMMAND:
         if (LOWORD(wParam) == IDCANCEL || LOWORD(wParam) == IDOK)
         {
           EndDialog(boiteDeDialogue,0);
           return TRUE;
         }
         return 0;

      default:
         return FALSE;
    }
}</code></pre><p id="r-499197" data-claire-element-id="499197">Résultat : (pas d'icône chez moi, je n'en avais pas sous la main ;) )</p><figure id="r-499199" data-claire-element-id="499200"><img id="r-499198" data-claire-element-id="499198" src="medias/uploads.siteduzero.com_files_16001_17000_16224.jpg" alt="Image utilisateur"/></figure><p id="r-499201" data-claire-element-id="499201">et</p><figure id="r-499203" data-claire-element-id="499204"><img id="r-499202" data-claire-element-id="499202" src="medias/uploads.siteduzero.com_files_16001_17000_16225.jpg" alt="Image utilisateur"/></figure><h5 id="r-pour-aller-plus-loin-39" data-claire-element-id="499216">Pour aller plus loin</h5><ul id="r-499212" data-claire-element-id="499212"><li id="r-499207" data-claire-element-id="499207"><p id="r-499206" data-claire-element-id="499206">Vous pouvez récupérer le <em>handle</em> d'un contrôle d'une boîte de dialogue (pour pouvoir lui envoyer des messages) avec <strong>GetDlgItem</strong>, prenant comme premier paramètre le <em>handle </em>de la boîte de dialogue parent du contrôle, et en deuxième son ID.</p></li><li id="r-499209" data-claire-element-id="499209"><p id="r-499208" data-claire-element-id="499208">Vous pouvez changer dynamiquement le texte des <em>XTEXT</em> avec <strong>SetDlgItemText</strong>, (ou <em>Int</em>, rajoutant un quatrième paramètre étant un booléen si l'<em>int</em> est signé ou non) prenant les mêmes paramètres que <strong>GetDlgItem</strong>, mais avec en plus le texte à afficher.</p></li><li id="r-499211" data-claire-element-id="499211"><p id="r-499210" data-claire-element-id="499210">A l'inverse, vous pouvez utiliser <strong>GetDlgItemText</strong> (ou <em>Int</em>, où le troisième paramètre est un pointeur d'<em>int</em> qui va récupérer les éventuelles erreurs, et un quatrième spécifiant si l'<em>int</em> est signé ou non. La valeur est alors retournée.) pour en récupérer la valeur. Le troisième paramètre est alors une variable qui va contenir la valeur, et un quatrième est ajouté pour spécifier la taille de la chaîne à récupérer (pour éviter les dépassements de tampon).</p></li></ul><aside id="r-499214" data-claire-element-id="499214" data-claire-semantic="information"><p id="r-499213" data-claire-element-id="499213">Vous avez maintenant acquis toutes les bases (de chez base :p ), et pourrez alors étendre vos connaissances avec le prochain chapitre, lequel portera sur les différents contrôles.</p></aside><p id="r-499215" data-claire-element-id="499215"><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
<span class="arrow"></span>
<span class="next">Les menus</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">
<span class="next">Les contrôles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lescontrles"></a><h2>Les contrôles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
<span class="arrow"></span>
<span class="next">Les boîtes de dialogue</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
<span class="next">Les boutons (tous types)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-499219" data-claire-element-id="499219">Vous en savez maintenant assez pour pouvoir utiliser les autres contrôles, qui vous sont expliqués ici :magicien: :</p><p id="r-499220" data-claire-element-id="499220">&amp;lt;information&amp;gt;Seuls les points importants sont abordés. Si vous ne trouvez pas votre bonheur, je vous invite à aller sur msdn.&amp;lt;/information&amp;gt;</p>
</div><a name="Lesboutonstoustypes"></a><h2>Les boutons (tous types)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">
<span class="arrow"></span>
<span class="next">Les contrôles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
<span class="next">Le contrôle d&#039;édition</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-boutons-tous-types" data-claire-element-id="499425">Les boutons (tous types)</h4><p id="r-499221" data-claire-element-id="499221">Ce contrôle est l'un des plus utiles, mais aussi le plus complet.<br/> En effet, ce que l'on désigne par <em>BUTTON</em> est bien plus qu'un bouton, ce peut être :</p><ul id="r-499234" data-claire-element-id="499234"><li id="r-499223" data-claire-element-id="499224"><img id="r-499224" data-claire-element-id="499223" src="medias/uploads.siteduzero.com_files_16001_17000_16356.jpg" alt="Image utilisateur"/><p id="r-499222" data-claire-element-id="499222">Un &quot;push button&quot; :</p></li><li id="r-499226" data-claire-element-id="499227"><img id="r-499227" data-claire-element-id="499226" src="medias/uploads.siteduzero.com_files_16001_17000_16357.jpg" alt="Image utilisateur"/><p id="r-499225" data-claire-element-id="499225">Une &quot;check box&quot; (deux ou trois états) :</p></li><li id="r-499229" data-claire-element-id="499230"><img id="r-499230" data-claire-element-id="499229" src="medias/uploads.siteduzero.com_files_16001_17000_16360.jpg" alt="Image utilisateur"/><p id="r-499228" data-claire-element-id="499228">Un &quot;radio button&quot; :</p></li><li id="r-499232" data-claire-element-id="499233"><img id="r-499233" data-claire-element-id="499232" src="medias/uploads.siteduzero.com_files_16001_17000_16359.jpg" alt="Image utilisateur"/><p id="r-499231" data-claire-element-id="499231">Une &quot;group box&quot; :</p></li></ul><p id="r-499235" data-claire-element-id="499235">Nous allons détailler tour à tour chaque utilisation.</p><aside id="r-499237" data-claire-element-id="499237" data-claire-semantic="information"><p id="r-499236" data-claire-element-id="499236">Dans la suite de la description, j'emploierai les noms anglais ci-dessus.</p></aside><ul id="r-499246" data-claire-element-id="499246"><li id="r-499239" data-claire-element-id="499239"><p id="r-499238" data-claire-element-id="499238">La première utilisation (la plus classique) est sans contestation celle du bouton poussoir, qui s'enclenche quand vous cliquez dessus.</p></li><li id="r-499241" data-claire-element-id="499241"><p id="r-499240" data-claire-element-id="499240">La seconde est tout aussi utile : c'est une case à cocher. Elle peut avoir 2 ou 3 états. Les deux états communs sont coché, et non coché. Le troisième est non assigné, c'est-à-dire que vous ne voulez pas faire de choix entre les deux.</p></li><li id="r-499243" data-claire-element-id="499243"><p id="r-499242" data-claire-element-id="499242">La troisième permet de faire un choix entre plusieurs possibilités.</p></li><li id="r-499245" data-claire-element-id="499245"><p id="r-499244" data-claire-element-id="499244">La quatrième permet de regrouper les contrôles dans un carré surmonté d'un nom.</p></li></ul><h5 id="r-creation-26" data-claire-element-id="499308">Création</h5><p id="r-499247" data-claire-element-id="499247">Pour créer un <em>BUTTON</em>, il faut appeler <em>CreateWindow</em> en spécifiant <strong>&quot;BUTTON&quot;</strong> comme classe, ou utiliser le mot-clé <strong>PUSHBUTTON</strong> en ressource. Néanmoins, cela ne suffit pas car, comme vous l'avez vu, il y a plusieurs possibilités. Ce qui va nous intéresser est donc l'attribut de style. En plus de spécifier les styles habituels (<em>WM_CHILD, WM_VISIBLE</em>), vous pouvez spécifier un ou plusieurs de ces styles :</p><ul id="r-499300" data-claire-element-id="499300"><li id="r-499249" data-claire-element-id="499249"><p id="r-499248" data-claire-element-id="499248"><strong>BS_3STATE</strong> : <em>check box</em> à 3 états.</p></li><li id="r-499251" data-claire-element-id="499251"><p id="r-499250" data-claire-element-id="499250"><strong>BS_AUTO3STATE</strong> : <em>check box</em> trois états, qui bascule automatiquement d'un état à l'autre.</p></li><li id="r-499253" data-claire-element-id="499253"><p id="r-499252" data-claire-element-id="499252"><strong>BS_AUTOCHECKBOX</strong> : idem, mais en 2 états.</p></li><li id="r-499255" data-claire-element-id="499255"><p id="r-499254" data-claire-element-id="499254"><strong>BS_AUTORADIOBUTTON</strong> : <em>radio button</em> qui bascule automatiquement d'un choix à l'autre.</p></li><li id="r-499257" data-claire-element-id="499257"><p id="r-499256" data-claire-element-id="499256"><strong>BS_CHECKBOX</strong> : <em>check box</em> deux états.</p></li><li id="r-499259" data-claire-element-id="499259"><p id="r-499258" data-claire-element-id="499258"><strong>BS_DEFPUSHBUTTON</strong> : <em>push button</em> par défaut de la fenêtre.</p></li><li id="r-499261" data-claire-element-id="499261"><p id="r-499260" data-claire-element-id="499260"><strong>BS_GROUPBOX</strong> : <em>group box</em>.</p></li><li id="r-499263" data-claire-element-id="499263"><p id="r-499262" data-claire-element-id="499262"><strong>BS_LEFTTEXT</strong> : affiche le texte à gauche du <em>radio button</em> ou de la <em>check box</em>.</p></li><li id="r-499265" data-claire-element-id="499265"><p id="r-499264" data-claire-element-id="499264"><strong>BS_OWNERDRAW</strong> : vous permet de dessiner vous-même le contrôle.</p></li><li id="r-499267" data-claire-element-id="499267"><p id="r-499266" data-claire-element-id="499266"><strong>BS_PUSHBUTTON</strong> : <em>push button</em>.</p></li><li id="r-499269" data-claire-element-id="499269"><p id="r-499268" data-claire-element-id="499268"><strong>BS_RADIOBUTTON</strong> : <em>radio button</em>.</p></li><li id="r-499271" data-claire-element-id="499271"><p id="r-499270" data-claire-element-id="499270"><strong>BS_USERBUTTON</strong> : obsolète.</p></li><li id="r-499273" data-claire-element-id="499273"><p id="r-499272" data-claire-element-id="499272"><strong>BS_BITMAP</strong> : affiche une image.</p></li><li id="r-499275" data-claire-element-id="499275"><p id="r-499274" data-claire-element-id="499274"><strong>BS_BOTTOM</strong> : affiche le texte en bas du bouton.</p></li><li id="r-499277" data-claire-element-id="499277"><p id="r-499276" data-claire-element-id="499276"><strong>BS_CENTER</strong> : affiche le texte au milieu du bouton (horizontalement).</p></li><li id="r-499279" data-claire-element-id="499279"><p id="r-499278" data-claire-element-id="499278"><strong>BS_ICON</strong> : affiche une icône.</p></li><li id="r-499281" data-claire-element-id="499281"><p id="r-499280" data-claire-element-id="499280"><strong>BS_FLAT</strong> : style &quot;plat&quot; (pas d'effet de profondeur).</p></li><li id="r-499283" data-claire-element-id="499283"><p id="r-499282" data-claire-element-id="499282"><strong>BS_LEFT</strong> : affiche le texte à gauche du bouton.</p></li><li id="r-499285" data-claire-element-id="499285"><p id="r-499284" data-claire-element-id="499284"><strong>BS_MULTILINE</strong> : si le texte est trop grand, le contrôle l'affichera sur plusieurs lignes.</p></li><li id="r-499287" data-claire-element-id="499287"><p id="r-499286" data-claire-element-id="499286"><strong>BS_NOTIFY</strong> : permet au contrôle d'envoyer des notifications de type <em>BN_KILLFOCUS</em> et <em>BN_SETFOCUS</em>.</p></li><li id="r-499289" data-claire-element-id="499289"><p id="r-499288" data-claire-element-id="499288"><strong>BS_PUSHLIKE</strong> : fait apparaître et comporter le contrôle comme un bouton (que ce soit un <em>check box</em> ou <em>radio button</em>).</p></li><li id="r-499291" data-claire-element-id="499291"><p id="r-499290" data-claire-element-id="499290"><strong>BS_RIGHT</strong> : affiche le texte à droite du bouton.</p></li><li id="r-499293" data-claire-element-id="499293"><p id="r-499292" data-claire-element-id="499292"><strong>BS_RIGHTBUTTON</strong> : même chose que <em>BS_LEFTTEXT</em>.</p></li><li id="r-499295" data-claire-element-id="499295"><p id="r-499294" data-claire-element-id="499294"><strong>BS_TEXT</strong> : affiche du texte.</p></li><li id="r-499297" data-claire-element-id="499297"><p id="r-499296" data-claire-element-id="499296"><strong>BS_TOP</strong> : affiche le texte en haut du bouton.</p></li><li id="r-499299" data-claire-element-id="499299"><p id="r-499298" data-claire-element-id="499298"><strong>BS_VCENTER</strong> : affiche le texte au milieu du bouton, et verticalement.</p></li></ul><aside id="r-499302" data-claire-element-id="499302" data-claire-semantic="information"><p id="r-499301" data-claire-element-id="499301">Vous avez sûrement remarqué qu'il existait le style automatique et non-automatique pour les <em>check box</em> et <em>radio button</em>. Ceux-ci déterminent si vous voulez que le contrôle change lui-même d'état quand on clique dessus, ou si vous voulez vous en charger vous-mêmes. On préférera le plus souvent le style automatique.</p></aside><div id="r-499304" data-claire-element-id="499304" data-claire-semantic="question"><p id="r-499303" data-claire-element-id="499303">Comment déterminer les <em>radio button</em> qui fonctionnent ensemble ?</p></div><p id="r-499305" data-claire-element-id="499305">C'est très simple : à chaque fois que vous commencez un nouveau groupe de <em>radio button</em> fonctionnant ensemble, il vous faut ajouter le style <em>WS_GROUP</em> lors de la création avec <em>CreateWindow</em> (voir le code complet en fin de description).</p><aside id="r-499307" data-claire-element-id="499307" data-claire-semantic="warning"><p id="r-499306" data-claire-element-id="499306">Il est évident que vous ne devez pas combiner des styles contradictoires, comme le texte affiché à droite et à gauche, ou le style <em>check box</em> et <em>push button</em> en même temps...</p></aside><h5 id="r-notifications-1" data-claire-element-id="499331">Notifications</h5><p id="r-499309" data-claire-element-id="499309">Je vais décrire ici les notifications envoyées par le contrôle, via le message <em>WM_COMMAND</em> (sauf mention contraire). Nous partirons du principe que vous savez comment interagir avec ce message, et je décrirai donc ici uniquement les codes de notifications.</p><aside id="r-499311" data-claire-element-id="499311" data-claire-semantic="information"><p id="r-499310" data-claire-element-id="499310">Bon, pour ceux qui n'ont pas suivi (vous savez, au fond de la salle, près du radiateur) on rappelle tout de même que l'ID du contrôle à l'origine de la notification ainsi que ladite notification constituent respectivement le mot bas et le mot haut de <em>WM_COMMAND</em> (abusez des macros <em>LOWORD()</em> et <em>HIWORD()</em>...)</p></aside><p id="r-499312" data-claire-element-id="499312">.</p><h6 id="r-bn-clicked" data-claire-element-id="499314">BN_CLICKED</h6><p id="r-499313" data-claire-element-id="499313">Cette notification est envoyée quand l'utilisateur clique sur un bouton.</p><h6 id="r-bn-dblclk-ou-bn-doubleclicked" data-claire-element-id="499318">BN_DBLCLK ou BN_DOUBLECLICKED</h6><p id="r-499315" data-claire-element-id="499315">Cette notification est envoyée quand l'utilisateur double-clique sur un bouton.</p><aside id="r-499317" data-claire-element-id="499317" data-claire-semantic="information"><p id="r-499316" data-claire-element-id="499316">Les boutons de type <em>BS_RADIOBUTTON</em> et <em>BS_OWNERDRAW</em> envoient ce message automatiquement.<br/> Les autres ne l'envoient que si le style <em>BS_NOTIFY</em> est spécifié dans leurs styles.</p></aside><h6 id="r-wm-ctlcolorbtn" data-claire-element-id="499330">WM_CTLCOLORBTN</h6><p id="r-499319" data-claire-element-id="499319">Ce message est envoyé à la fenêtre parent juste avant que le contrôle ne soit dessiné.<br/> Il est utile principalement pour changer la couleur du texte, ou du fond du contrôle pour le dessin.</p><p id="r-499320" data-claire-element-id="499320">Les paramètres valent alors:</p><ul id="r-499327" data-claire-element-id="499327"><li id="r-499322" data-claire-element-id="499322"><p id="r-499321" data-claire-element-id="499321"><em>wParam</em> : <em>handle</em> du DC sur lequel dessiner.</p></li><li id="r-499324" data-claire-element-id="499324"><p id="r-499323" data-claire-element-id="499323"><em>lParam</em> : <em>handle</em> du bouton.</p></li><li id="r-499326" data-claire-element-id="499326"><p id="r-499325" data-claire-element-id="499325">Valeur de retour : <em>handle</em> d'une brosse qui sera utilisée pour le dessin du fond.</p></li></ul><aside id="r-499329" data-claire-element-id="499329" data-claire-semantic="warning"><p id="r-499328" data-claire-element-id="499328">Ce message est envoyé directement à la fonction de gestion des messages, et non pas via le message <em>WM_COMMAND</em>.<br/> La brosse retournée ne sera pas automatiquement détruite par le système.</p></aside><h5 id="r-messages-1" data-claire-element-id="499420">Messages</h5><p id="r-499332" data-claire-element-id="499332">Ces messages peuvent être envoyés au contrôle avec la fonction :</p><pre id="r-499333" data-claire-element-id="499333"><code data-claire-semantic="c">SendMessage(hCtl,iCode,wParam,lParam)</code></pre><p id="r-499334" data-claire-element-id="499334">Pour chaque message, je décrirai le rôle et la signification de <em>wParam</em> et <em>lParam</em>, ainsi que la valeur retournée.</p><h6 id="r-bcm-getidealsize" data-claire-element-id="499343">BCM_GETIDEALSIZE</h6><p id="r-499335" data-claire-element-id="499335">Ce message permet de récupérer la taille du bouton permettant d'afficher correctement le texte et l'image (si présente).</p><ul id="r-499342" data-claire-element-id="499342"><li id="r-499337" data-claire-element-id="499337"><p id="r-499336" data-claire-element-id="499336"><em>wParam</em> : 0.</p></li><li id="r-499339" data-claire-element-id="499339"><p id="r-499338" data-claire-element-id="499338"><em>lParam</em> : pointeur vers une structure de type <em>SIZE</em> qui recevra la taille désirée.</p></li><li id="r-499341" data-claire-element-id="499341"><p id="r-499340" data-claire-element-id="499340">Valeur de retour : <em>TRUE</em> en cas de succès, et <em>FALSE</em> en cas d'échec.</p></li></ul><h6 id="r-bm-click" data-claire-element-id="499352">BM_CLICK</h6><p id="r-499344" data-claire-element-id="499344">Ce message permet de simuler un clic de souris sur le bouton.</p><ul id="r-499351" data-claire-element-id="499351"><li id="r-499346" data-claire-element-id="499346"><p id="r-499345" data-claire-element-id="499345"><em>wParam</em> : 0.</p></li><li id="r-499348" data-claire-element-id="499348"><p id="r-499347" data-claire-element-id="499347"><em>lParam</em> : 0.</p></li><li id="r-499350" data-claire-element-id="499350"><p id="r-499349" data-claire-element-id="499349">Valeur de retour : aucune.</p></li></ul><h6 id="r-bm-getcheck" data-claire-element-id="499361">BM_GETCHECK</h6><p id="r-499353" data-claire-element-id="499353">Ce message permet de récupérer l'état d'un <em>check box</em> ou d'un <em>radio button</em>.</p><ul id="r-499360" data-claire-element-id="499360"><li id="r-499355" data-claire-element-id="499355"><p id="r-499354" data-claire-element-id="499354"><em>wParam</em> : 0.</p></li><li id="r-499357" data-claire-element-id="499357"><p id="r-499356" data-claire-element-id="499356"><em>lParam</em> : 0.</p></li><li id="r-499359" data-claire-element-id="499359"><p id="r-499358" data-claire-element-id="499358">Valeur de retour : <em>BST_CHECKED</em>, <em>BST_INDETERMINATE</em> ou <em>BST_UNCHECKED</em> (ou 0 en cas d'échec).</p></li></ul><h6 id="r-bm-getimage" data-claire-element-id="499370">BM_GETIMAGE</h6><p id="r-499362" data-claire-element-id="499362">Ce message permet de récupérer le <em>handle</em> de l'image, ou de l'icône associée au bouton.</p><ul id="r-499369" data-claire-element-id="499369"><li id="r-499364" data-claire-element-id="499364"><p id="r-499363" data-claire-element-id="499363"><em>wParam</em> : <em>IMAGE_BITMAP</em> ou <em>IMAGE_ICON</em>.</p></li><li id="r-499366" data-claire-element-id="499366"><p id="r-499365" data-claire-element-id="499365"><em>lParam</em> : 0.</p></li><li id="r-499368" data-claire-element-id="499368"><p id="r-499367" data-claire-element-id="499367">Valeur de retour : le <em>handle</em> de l'image ou de l'icône (ou <em>NULL</em> en cas d'échec).</p></li></ul><h6 id="r-bm-getstate" data-claire-element-id="499390">BM_GETSTATE</h6><p id="r-499371" data-claire-element-id="499371">Ce message permet de récupérer l'état d'un bouton ou d'une <em>check box</em>.</p><ul id="r-499389" data-claire-element-id="499389"><li id="r-499373" data-claire-element-id="499373"><p id="r-499372" data-claire-element-id="499372"><em>wParam</em> : 0.</p></li><li id="r-499375" data-claire-element-id="499375"><p id="r-499374" data-claire-element-id="499374"><em>lParam</em> : 0.</p></li><li id="r-499388" data-claire-element-id="499388"><p id="r-499376" data-claire-element-id="499376">Valeur de retour : c'est la combinaison d'une ou plusieurs de ces valeurs :</p><ul id="r-499387" data-claire-element-id="499387"><li id="r-499378" data-claire-element-id="499378"><p id="r-499377" data-claire-element-id="499377"><em>BST_CHECKED</em> : le bouton est coché.</p></li><li id="r-499380" data-claire-element-id="499380"><p id="r-499379" data-claire-element-id="499379"><em>BST_FOCUS</em> : le bouton a le <em>focus</em> clavier.</p></li><li id="r-499382" data-claire-element-id="499382"><p id="r-499381" data-claire-element-id="499381"><em>BST_INDETERMINATE</em> : la <em>check box</em> est non assignée.</p></li><li id="r-499384" data-claire-element-id="499384"><p id="r-499383" data-claire-element-id="499383"><em>BST_PUSHED</em> : le bouton est maintenu enfoncé.</p></li><li id="r-499386" data-claire-element-id="499386"><p id="r-499385" data-claire-element-id="499385"><em>BST_UNCHECKED</em> : le bouton n'est pas coché.</p></li></ul></li></ul><h6 id="r-bm-setcheck" data-claire-element-id="499399">BM_SETCHECK</h6><p id="r-499391" data-claire-element-id="499391">Ce message permet de définir l'état d'une <em>check box</em> ou un d'un <em>radio button</em>.</p><ul id="r-499398" data-claire-element-id="499398"><li id="r-499393" data-claire-element-id="499393"><p id="r-499392" data-claire-element-id="499392"><em>wParam</em> : <em>BST_CHECKED</em>, <em>BST_INDETERMINATE</em> ou <em>BST_UNCHECKED</em></p></li><li id="r-499395" data-claire-element-id="499395"><p id="r-499394" data-claire-element-id="499394"><em>lParam</em> : 0.</p></li><li id="r-499397" data-claire-element-id="499397"><p id="r-499396" data-claire-element-id="499396">Valeur de retour: 0.</p></li></ul><h6 id="r-bm-setimage" data-claire-element-id="499408">BM_SETIMAGE</h6><p id="r-499400" data-claire-element-id="499400">Ce message permet de définir le <em>handle</em> de l'image, ou de l'icône associée au bouton.</p><ul id="r-499407" data-claire-element-id="499407"><li id="r-499402" data-claire-element-id="499402"><p id="r-499401" data-claire-element-id="499401"><em>wParam</em> : <em>IMAGE_BITMAP</em> ou <em>IMAGE_ICON</em>.</p></li><li id="r-499404" data-claire-element-id="499404"><p id="r-499403" data-claire-element-id="499403"><em>lParam</em> : le <em>handle</em> de l'image ou de l'icône.</p></li><li id="r-499406" data-claire-element-id="499406"><p id="r-499405" data-claire-element-id="499405">Valeur de retour : le <em>handle</em> de l'image, ou de l'icône associée précédente (ou <em>NULL</em> si aucune).</p></li></ul><h6 id="r-bm-setstate" data-claire-element-id="499419">BM_SETSTATE</h6><p id="r-499409" data-claire-element-id="499409">Ce message permet de définir l'état de surbrillance d'un bouton. L'état de surbrillance est utilisé lorsque l'utilisateur est en train de cliquer sur le bouton.</p><ul id="r-499416" data-claire-element-id="499416"><li id="r-499411" data-claire-element-id="499411"><p id="r-499410" data-claire-element-id="499410"><em>wParam</em> : <em>TRUE</em> pour mettre le bouton en surbrillance et <em>FALSE</em> pour ne pas le mettre en surbrillance.</p></li><li id="r-499413" data-claire-element-id="499413"><p id="r-499412" data-claire-element-id="499412"><em>lParam</em> : 0.</p></li><li id="r-499415" data-claire-element-id="499415"><p id="r-499414" data-claire-element-id="499414">Valeur de retour : 0.</p></li></ul><aside id="r-499418" data-claire-element-id="499418" data-claire-semantic="information"><p id="r-499417" data-claire-element-id="499417">L'état de surbrillance n'affecte pas l'état même d'un bouton, à savoir enfoncé ou pas (ou coché / non coché pour une <em>check box</em> et <em>radio button</em>). Il affecte uniquement le dessin du bouton.</p></aside><h5 id="r-exemple-139" data-claire-element-id="499424">Exemple</h5><p id="r-499421" data-claire-element-id="499421">Ceci est le code complet d'un exemple utilisant les boutons.</p><pre id="r-499422" data-claire-element-id="499422"><code data-claire-semantic="c">#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;

HINSTANCE instance;

#define ID_PUSHBUTTON_1     110
#define ID_PUSHBUTTON_2     111
#define ID_PUSHBUTTON_3     112
#define ID_CHECKBOX_1       113
#define ID_CHECKBOX_2       114
#define ID_CHECKBOX_3       115
#define ID_CHECKBOX_4       116
#define ID_RADIOBUTTON_11   117
#define ID_RADIOBUTTON_12   118
#define ID_RADIOBUTTON_13   119
#define ID_RADIOBUTTON_21   120
#define ID_RADIOBUTTON_22   121
#define ID_RADIOBUTTON_23   122

VOID RemplieFenetrePrincipale(HWND fenetrePrincipale)
{
    // Premier groupe: le push button
    HWND hGroup=CreateWindow(
        &quot;BUTTON&quot;,
        &quot;Le push button&quot;,
        WS_CHILD|WS_VISIBLE|BS_GROUPBOX,
        10,10,
        120,150,
        fenetrePrincipale,
        NULL,
        instance,
        NULL);
    {
        HWND hControle;
        // On le remplit avec un premier push button tout bête
        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Button 1&quot;,
            WS_CHILD|WS_VISIBLE|BS_PUSHBUTTON,
            10+10,10+20,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_PUSHBUTTON_1,
            instance,
            NULL);
        // un second avec quelques flags : plat et plusieurs lignes
        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Button 2: texte long&quot;,
            WS_CHILD|WS_VISIBLE|BS_PUSHBUTTON|BS_FLAT|BS_MULTILINE,
            10+10,10+50,
            100,40,
            fenetrePrincipale,
            (HMENU)ID_PUSHBUTTON_2,
            instance,
            NULL);
        // et un troisième un peu plus exotique, c'est aussi le bouton par défaut de la fenêtre
        // on lui met aussi une image alignée à gauche
        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;&quot;,
            WS_CHILD|WS_VISIBLE|BS_DEFPUSHBUTTON|BS_ICON|BS_LEFT,
            10+10,10+100,
            100,40,
            fenetrePrincipale,
            (HMENU)ID_PUSHBUTTON_3,
            instance,
            NULL);

        HANDLE hIcon=LoadIcon(NULL,IDI_ERROR);
        SendMessage(hControle,BM_SETIMAGE,IMAGE_ICON,(LPARAM)hIcon);
    }
    // Deuxième groupe: les check box
    hGroup=CreateWindow(
        &quot;BUTTON&quot;,
        &quot;La check box&quot;,
        WS_CHILD|WS_VISIBLE|BS_GROUPBOX,
        130,10,
        120,150,
        fenetrePrincipale,
        NULL,
        instance,
        NULL);
    {
        HWND hControle;
        // une check box automatique deux états
        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Check box 1&quot;,
            WS_CHILD|WS_VISIBLE|BS_AUTOCHECKBOX,
            130+10,10+20,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_CHECKBOX_1,
            instance,
            NULL);
        // le même mais plat, et avec le texte à gauche de la case à cocher
        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Check box 2&quot;,
            WS_CHILD|WS_VISIBLE|BS_AUTOCHECKBOX|BS_FLAT|BS_LEFTTEXT,
            130+10,10+50,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_CHECKBOX_2,
            instance,
            NULL);

        // une autre check box simple automatique mais trois états
        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Check box 3&quot;,
            WS_CHILD|WS_VISIBLE|BS_AUTO3STATE,
            130+10,10+80,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_CHECKBOX_3,
            instance,
            NULL);

        // le même mais non automatique :)
        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Check box 4&quot;,
            WS_CHILD|WS_VISIBLE|BS_3STATE,
            130+10,10+110,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_CHECKBOX_4,
            instance,
            NULL);
    }
    // troisième groupe : les radio button
    hGroup=CreateWindow(
        &quot;BUTTON&quot;,
        &quot;Le radio button&quot;,
        WS_CHILD|WS_VISIBLE|BS_GROUPBOX,
        10,160,
        240,110,
        fenetrePrincipale,
        NULL,
        instance,
        NULL);
    {
        HWND hControle;
        // trois radio button
        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Choix 1.1&quot;,
            WS_CHILD|WS_VISIBLE|BS_AUTORADIOBUTTON|WS_GROUP,
            10+10,160+20,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_RADIOBUTTON_11,
            instance,
            NULL);

        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Choix 1.2&quot;,
            WS_CHILD|WS_VISIBLE|BS_AUTORADIOBUTTON,
            10+10,160+50,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_RADIOBUTTON_12,
            instance,
            NULL);

        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Choix 1.3&quot;,
            WS_CHILD|WS_VISIBLE|BS_AUTORADIOBUTTON,
            10+10,160+80,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_RADIOBUTTON_13,
            instance,
            NULL);
        // trois autres, mais qui forment un autre groupe
        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Choix 2.1&quot;,
            WS_CHILD|WS_VISIBLE|BS_AUTORADIOBUTTON|WS_GROUP,
            130+10,160+20,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_RADIOBUTTON_21,
            instance,
            NULL);

        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Choix 2.2&quot;,
            WS_CHILD|WS_VISIBLE|BS_AUTORADIOBUTTON,
            130+10,160+50,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_RADIOBUTTON_22,
            instance,
            NULL);

        hControle=CreateWindow(
            &quot;BUTTON&quot;,
            &quot;Choix 2.3&quot;,
            WS_CHILD|WS_VISIBLE|BS_AUTORADIOBUTTON,
            130+10,160+80,
            100,20,
            fenetrePrincipale,
            (HMENU)ID_RADIOBUTTON_23,
            instance,
            NULL);
    }

}

VOID AfficheActionCheckBox(int index,HWND hCtl,HWND fenetrePrincipale)
{
    // test si la check box est cochée, non cochée ou inderterminée.
    LRESULT lRes=SendMessage(hCtl,BM_GETCHECK,0,0);
    CHAR lpMessage[128];

    sprintf(lpMessage,&quot;La check box n°%d est maintenant %s&quot;,index,
        lRes==BST_CHECKED?&quot;cochée&quot;:
        lRes==BST_UNCHECKED?&quot;décochée&quot;:&quot;inderterminée&quot;);

    MessageBox(fenetrePrincipale,lpMessage,&quot;Vous avez modifié une check box&quot;,
        MB_ICONINFORMATION|MB_OK);
}

VOID DemandeActionCheckBox4(HWND hCtl,HWND fenetrePrincipale)
{
    // test si la check box est cochée, non cochée ou inderterminée.
    LRESULT lRes=SendMessage(hCtl,BM_GETCHECK,0,0);
    PCHAR lpProchainEtat;
    UINT iProchainEtat;
    UINT iChoix;
    CHAR lpMessage[128];

    if(lRes==BST_CHECKED)
    {
        lpProchainEtat=&quot;inderterminée&quot;;
        iProchainEtat=BST_INDETERMINATE;
    }
    else if(lRes==BST_INDETERMINATE)
    {
        lpProchainEtat=&quot;décochée&quot;;
        iProchainEtat=BST_UNCHECKED;
    }
    else
    {
        lpProchainEtat=&quot;cochée&quot;;
        iProchainEtat=BST_CHECKED;
    }

    sprintf(lpMessage,&quot;Voulez-vous passer à l'état %s ?&quot;,lpProchainEtat);

    iChoix=MessageBox(fenetrePrincipale,lpMessage,&quot;&quot;,MB_YESNO);
    if(iChoix==IDYES)
        SendMessage(hCtl,BM_SETCHECK,(WPARAM)iProchainEtat,0);
}

VOID NotificationControle(HWND fenetrePrincipale,UINT message, WPARAM wParam, LPARAM lParam)
{
    UINT iId=LOWORD(wParam);
    HWND hCtl=(HWND)lParam;

    switch(iId)
    {
        case ID_PUSHBUTTON_1:
            MessageBox(fenetrePrincipale,&quot;Vous avez appuyé sur le premier bouton&quot;,&quot;&quot;,MB_OK);
            break;
        case ID_PUSHBUTTON_2:
            MessageBox(fenetrePrincipale,&quot;Vous avez appuyé sur le second bouton&quot;,&quot;&quot;,MB_OK);
            break;
        case ID_PUSHBUTTON_3:
            MessageBox(fenetrePrincipale,&quot;Vous avez appuyé sur le troisième bouton&quot;,&quot;&quot;,MB_OK);
            break;
        case ID_CHECKBOX_1:
        case ID_CHECKBOX_2:
        case ID_CHECKBOX_3:
            AfficheActionCheckBox(iId-ID_CHECKBOX_1,hCtl,fenetrePrincipale);
            break;
        case ID_CHECKBOX_4:
            DemandeActionCheckBox4(hCtl,fenetrePrincipale);
            break;
    }
}

LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    static HWND boutons[2] = {NULL};

    switch (message)
    {
        case WM_CREATE:
            RemplieFenetrePrincipale(fenetrePrincipale);
            return 0;
        case WM_COMMAND:
            NotificationControle(fenetrePrincipale,message,wParam,lParam);
            return 0;
        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;
        default:
            return DefWindowProc(fenetrePrincipale,message,wParam,lParam);
    }
}


int WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
             LPSTR lignesDeCommande, int modeDAffichage)
{
    HWND fenetrePrincipale;
    MSG message;
    WNDCLASS classeFenetre;

    instance = cetteInstance;

    classeFenetre.style = 0;
    classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
    classeFenetre.cbClsExtra = 0;
    classeFenetre.cbWndExtra = 0;
    classeFenetre.hInstance = NULL;
    classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
    classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
    classeFenetre.lpszMenuName = NULL;
    classeFenetre.lpszClassName = &quot;classeF&quot;;

// On prévoit quand même le cas où ça échoue
    if(!RegisterClass(&amp;classeFenetre))
        return FALSE;

    fenetrePrincipale=CreateWindow(
        &quot;classeF&quot;,
        &quot;Ma premiere fenetre winAPI !&quot;,
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,CW_USEDEFAULT,
        270,320,
        NULL,
        NULL,
        cetteInstance,
        NULL);

    if (!fenetrePrincipale)
        return FALSE;

    ShowWindow(fenetrePrincipale,modeDAffichage);
    UpdateWindow(fenetrePrincipale);


    while(GetMessage(&amp;message,NULL,0,0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }

    return message.wParam;
}</code></pre><p id="r-499423" data-claire-element-id="499423"><em>Rédacteur : <strong>pamaury</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">
<span class="arrow"></span>
<span class="next">Les contrôles</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
<span class="next">Le contrôle d&#039;édition</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lecontrled039dition"></a><h2>Le contrôle d&#039;édition</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
<span class="arrow"></span>
<span class="next">Les boutons (tous types)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
<span class="next">La liste déroulante</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-controle-d-edition" data-claire-element-id="499829">Le contrôle d'édition</h4><figure id="r-499427" data-claire-element-id="499428"><img id="r-499426" data-claire-element-id="499426" src="medias/uploads.siteduzero.com_files_16001_17000_16362.jpg" alt="Image utilisateur"/></figure><h5 id="r-definition-70" data-claire-element-id="499430">Définition</h5><p id="r-499429" data-claire-element-id="499429">Le contrôle d'édition est un contrôle rectangulaire utilisé dans les boîtes de dialogue pour permettre à l'utilisateur d'entrer et d'éditer du texte au clavier. On peut également l'utiliser dans une fenêtre standard.</p><h5 id="r-creation-27" data-claire-element-id="499468">Création</h5><p id="r-499431" data-claire-element-id="499431">Pour créer un Contrôle d'édition, il faut appeler <em>CreateWindow</em> en spécifiant &quot;EDIT&quot; comme classe. Dans un fichier ressource, on écrira par exemple :</p><pre id="r-499432" data-claire-element-id="499432"><code data-claire-semantic="c">CONTROL &quot;&quot;, IDC_NOMDUCONTROLE, &lt;couleur nom=&quot;bleu&quot;&gt;&quot;EDIT&quot;&lt;/couleur&gt;, WS_CHILD | WS_VISIBLE, x, y, largeur, hauteur</code></pre><aside id="r-499434" data-claire-element-id="499434" data-claire-semantic="information"><p id="r-499433" data-claire-element-id="499433">Vous pouvez aussi utiliser le mot clé <strong>EDITTEXT</strong>.</p></aside><p id="r-499435" data-claire-element-id="499435">Néanmoins, cela ne suffit pas car comme vous vous en doutez, nous avons plusieurs possibilités pour créer notre contrôle. Ce qui va nous intéresser est donc l'attribut de style . En plus de spécifier les styles habituels (<em>WM_CHILD,WM_VISIBLE</em>), vous pouvez définir un ou plusieurs de ces styles spécifiques qui commencent tous par &quot;<em>ES_</em>&quot; :</p><ul id="r-499464" data-claire-element-id="499464"><li id="r-499437" data-claire-element-id="499437"><p id="r-499436" data-claire-element-id="499436"><strong>ES_AUTOHSCROLL</strong> : défilement automatique du texte de 10 caractères vers la droite quand l'utilisateur tape un caractère à la fin de la ligne. Quand l'utilisateur presse sur la touche &quot;Entrée&quot;, le contrôle fait revenir tout le texte à la position d'origine.</p></li><li id="r-499439" data-claire-element-id="499439"><p id="r-499438" data-claire-element-id="499438"><strong>ES_AUTOVSCROLL</strong> : fait défiler le texte automatiquement d'une page vers le haut quand l'utilisateur presse sur la touche &quot;Entrée&quot; à la dernière ligne.</p></li><li id="r-499441" data-claire-element-id="499441"><p id="r-499440" data-claire-element-id="499440"><strong>ES_CENTER </strong>: centre le texte.</p></li><li id="r-499443" data-claire-element-id="499443"><p id="r-499442" data-claire-element-id="499442"><strong>ES_LEFT :</strong> aligne le texte à gauche.</p></li><li id="r-499445" data-claire-element-id="499445"><p id="r-499444" data-claire-element-id="499444"><strong>ES_LOWERCASE</strong> : convertit en minuscules tous les caractères tapés dans le contrôle.</p></li><li id="r-499447" data-claire-element-id="499447"><p id="r-499446" data-claire-element-id="499446"><strong>ES_MULTILINE </strong>: par défaut, un contrôle <em>edit</em> n'est constitué que d'une seule ligne. Ce style affiche un contrôle multiligne.</p></li><li id="r-499449" data-claire-element-id="499449"><p id="r-499448" data-claire-element-id="499448"><strong>ES_NOHIDESEL</strong> : quand le contrôle perd le <em>focus</em> ; par défaut, la sélection de texte est cachée, et lorsqu'il a le <em>focus</em>, l'affichage du texte sélectionné est inversé. Avec ce style, le texte sélectionné est inversé, que le contrôle ait le <em>focus</em> ou non.</p></li><li id="r-499451" data-claire-element-id="499451"><p id="r-499450" data-claire-element-id="499450"><strong>ES_NUMBER </strong>: ne permet que les chiffres.</p></li><li id="r-499453" data-claire-element-id="499453"><p id="r-499452" data-claire-element-id="499452"><strong>ES_OEMCONVERT</strong> : convertit le texte entré dans le contrôle, de sorte que le texte tapé est mappé du code ANSI vers le code OEM, et inversement.</p></li><li id="r-499455" data-claire-element-id="499455"><p id="r-499454" data-claire-element-id="499454"><strong>ES_PASSWORD</strong> : affiche un astérisque * pour chaque caractère entré dans le contrôle <em>Edit</em>. Ce style n'est valide que pour les contrôles d'une seule ligne.</p></li><li id="r-499457" data-claire-element-id="499457"><p id="r-499456" data-claire-element-id="499456"><strong>ES_READONLY</strong> : empêche l'utilisateur de taper ou d'éditer du texte dans la commande d'édition.</p></li><li id="r-499459" data-claire-element-id="499459"><p id="r-499458" data-claire-element-id="499458"><strong>ES_RIGHT </strong>: aligne le texte à droite.</p></li><li id="r-499461" data-claire-element-id="499461"><p id="r-499460" data-claire-element-id="499460"><strong>ES_UPPERCASE </strong>: convertit en majuscules tous les caractères tapés dans le contrôle.</p></li><li id="r-499463" data-claire-element-id="499463"><p id="r-499462" data-claire-element-id="499462"><strong>ES_WANTRETURN </strong>: indique qu'un retour de chariot est inséré quand l'utilisateur presse sur la touche &quot;Entrée&quot;, si le texte est écrit dans un contrôle <em>Edit</em> multiligne dans une boîte de dialogue. Si ce style n'est pas spécifié, presser sur le touche &quot;Entrée&quot; aura le même effet que de presser sur le bouton par défaut de la boîte de dialogue. Ce style n'a pas d'effet sur un contrôle <em>Edit</em> d'une ligne.</p></li></ul><aside id="r-499466" data-claire-element-id="499466" data-claire-semantic="warning"><p id="r-499465" data-claire-element-id="499465">Il est évident que vous ne devez pas combiner des styles contradictoires, comme le texte affiché à droite et à gauche, ou le style texte en minuscules et texte en majuscules...</p></aside><p id="r-499467" data-claire-element-id="499467">Nous avons créé le contrôle <em>Edit</em>, nous allons maintenant étudier les façons de l'utiliser. Ainsi, dans un premier temps, nous traiterons des<strong> notifications</strong> envoyées par le contrôle à la fenêtre parent, puis nous verrons les <strong>messages</strong> envoyés par la fenêtre parent au contrôle.</p><h5 id="r-les-notifications-1" data-claire-element-id="499498">Les notifications</h5><p id="r-499469" data-claire-element-id="499469">L'utilisateur envoie des requêtes d'édition en utilisant le clavier ou la souris. Le système envoie chaque requête à la fenêtre parent du contrôle dans le message <strong>WM_COMMAND</strong>.<br/> J'ai considéré que vous savez comment interagir avec ce message, et je décrirai donc ici uniquement les codes de notification.</p><h6 id="r-en-align-ltr-ec" data-claire-element-id="499471">EN_ALIGN_LTR_EC</h6><p id="r-499470" data-claire-element-id="499470">Cette notification est envoyée quand l'utilisateur change de direction dans le contrôle d'édition de gauche vers la droite.</p><h6 id="r-en-align-rtl-ec" data-claire-element-id="499473">EN_ALIGN_RTL_EC</h6><p id="r-499472" data-claire-element-id="499472">Cette notification est envoyée quand l'utilisateur change de direction dans le contrôle d'édition de droite vers la gauche.</p><h6 id="r-en-change" data-claire-element-id="499477">EN_CHANGE</h6><p id="r-499474" data-claire-element-id="499474">L'utilisateur a modifié le texte du contrôle. Le message est envoyé <strong>après</strong> que le texte soit affiché (différent de <em>EN-UPDATE</em>).</p><aside id="r-499476" data-claire-element-id="499476" data-claire-semantic="information"><p id="r-499475" data-claire-element-id="499475">Si l'on traite cette notification on dira : &quot;s'il y a un changement dans le contrôle, faire ceci...&quot;</p></aside><h6 id="r-en-hscroll" data-claire-element-id="499481">EN_HSCROLL</h6><p id="r-499478" data-claire-element-id="499478">L'utilisateur a cliqué sur la barre horizontale de défilement du contrôle d'édition.</p><aside id="r-499480" data-claire-element-id="499480" data-claire-semantic="information"><p id="r-499479" data-claire-element-id="499479">Le système envoie ce message avant de mettre à jour l'écran.</p></aside><h6 id="r-en-maxtext" data-claire-element-id="499485">EN_MAXTEXT</h6><p id="r-499482" data-claire-element-id="499482">Quand l'utilisateur insère du texte, et que le nombre de caractères entrés est supérieur à ce qui est possible pour ce contrôle, l'insertion est tronquée.</p><aside id="r-499484" data-claire-element-id="499484" data-claire-semantic="information"><p id="r-499483" data-claire-element-id="499483">Ce message est envoyé quand le contrôle d'édition n'a pas le style <em>ES_AUTOHSCROLL</em>, et que le nombre de caractères insérés excède la largeur du contrôle ; ou quand le contrôle d'édition n'a pas le style <em>ES_AUTOHSCROLL</em>, et que le nombre de lignes de texte entrées dépassent la hauteur du contrôle.</p></aside><h6 id="r-en-update" data-claire-element-id="499489">EN_UPDATE</h6><p id="r-499486" data-claire-element-id="499486">L'utilisateur a modifié le texte dans le contrôle d'édition, et le système va afficher le nouveau texte.</p><aside id="r-499488" data-claire-element-id="499488" data-claire-semantic="information"><p id="r-499487" data-claire-element-id="499487">Le système envoie cette notification après avoir formaté le texte, mais avant de l'afficher. Ainsi, l'application peut redimensionner le contrôle.</p></aside><h6 id="r-en-vscroll" data-claire-element-id="499493">EN_VSCROLL</h6><p id="r-499490" data-claire-element-id="499490">L'utilisateur a cliqué sur la barre verticale de défilement, ou a utilisé la roulette de la souris au-dessus du contrôle d'édition.</p><aside id="r-499492" data-claire-element-id="499492" data-claire-semantic="information"><p id="r-499491" data-claire-element-id="499491">Le système envoie le message avant la remise à jour de la page.</p></aside><h6 id="r-wm-ctlcoloredit" data-claire-element-id="499497">WM_CTLCOLOREDIT</h6><p id="r-499494" data-claire-element-id="499494">Ce message est <strong>envoyé par le système </strong>à la fenêtre parent avant que le contrôle ne soit dessiné. Ce message contient le <em>handle</em> du contexte d'affichage (DC) dans <em>wparam</em>, et le <em>handle</em> de la fenêtre fille dans <em>lparam</em>. La fenêtre parent peut utiliser ces <em>handle</em> pour changer les couleurs du texte et du fond du contrôle d'édition.</p><aside id="r-499496" data-claire-element-id="499496" data-claire-semantic="warning"><p id="r-499495" data-claire-element-id="499495">- Ce message est envoyé directement à la fonction de gestion des messages, et non pas via le message <em>WM_COMMAND</em>.<br/> - La brosse retournée ne sera pas automatiquement détruite par le système.</p></aside><h5 id="r-les-messages-1" data-claire-element-id="499825">Les messages</h5><p id="r-499499" data-claire-element-id="499499">Ces messages peuvent être envoyés au contrôle avec la fonction :</p><pre id="r-499500" data-claire-element-id="499500"><code data-claire-semantic="c">SendMessage(hCtl,iCode,wParam,lParam)</code></pre><p id="r-499501" data-claire-element-id="499501">Pour chaque message, je décrirai le rôle et la signification de <em>wParam</em> et <em>lParam</em> et de la valeur retournée.</p><h6 id="r-em-getcuebanner" data-claire-element-id="499510">EM_GETCUEBANNER</h6><p id="r-499502" data-claire-element-id="499502">Recherche une sélection textuelle dans le texte affiché.</p><ul id="r-499509" data-claire-element-id="499509"><li id="r-499504" data-claire-element-id="499504"><p id="r-499503" data-claire-element-id="499503"><em>wParam</em> : pointeur sur une chaîne de caractères unicode qui contient la sélection textuelle.</p></li><li id="r-499506" data-claire-element-id="499506"><p id="r-499505" data-claire-element-id="499505"><em>lParam</em> : taille du <em>buffer</em> qui contient cette sélection.</p></li><li id="r-499508" data-claire-element-id="499508"><p id="r-499507" data-claire-element-id="499507">Valeur retournée : <em>TRUE</em> si la sélection a été trouvée, <em>FALSE</em> en cas d'échec.</p></li></ul><h6 id="r-em-getfirstvisibleline" data-claire-element-id="499521">EM_GETFIRSTVISIBLELINE</h6><p id="r-499511" data-claire-element-id="499511">Ce message recherche l'index de la ligne visible la plus haute dans un contrôle d'édition multiligne.</p><ul id="r-499520" data-claire-element-id="499520"><li id="r-499513" data-claire-element-id="499513"><p id="r-499512" data-claire-element-id="499512"><em>wParam </em>: 0.</p></li><li id="r-499515" data-claire-element-id="499515"><p id="r-499514" data-claire-element-id="499514"><em>lParam</em> : 0.</p></li><li id="r-499519" data-claire-element-id="499519"><p id="r-499516" data-claire-element-id="499516">Valeur retournée : index de la ligne.</p><aside id="r-499518" data-claire-element-id="499518" data-claire-semantic="information"><p id="r-499517" data-claire-element-id="499517">Pour un contrôle d'édition d'une seule ligne, cet index sera celui du premier caractère visible de la ligne.</p></aside></li></ul><h6 id="r-em-gethandle" data-claire-element-id="499532">EM_GETHANDLE</h6><p id="r-499522" data-claire-element-id="499522">Ce message renvoie le <em>handle</em> de la mémoire courante allouée au texte d'un contrôle d'édition multiligne.</p><ul id="r-499529" data-claire-element-id="499529"><li id="r-499524" data-claire-element-id="499524"><p id="r-499523" data-claire-element-id="499523"><em>wParam</em>: 0.</p></li><li id="r-499526" data-claire-element-id="499526"><p id="r-499525" data-claire-element-id="499525"><em>lParam </em>: 0.</p></li><li id="r-499528" data-claire-element-id="499528"><p id="r-499527" data-claire-element-id="499527">Valeur retournée : <em>handle</em> du <em>buffer</em> qui contient le texte du contrôle d'édition. Si une erreur survient, comme par exemple l'envoi du texte à un contrôle d'une seule ligne, cette valeur sera 0.</p></li></ul><aside id="r-499531" data-claire-element-id="499531" data-claire-semantic="information"><p id="r-499530" data-claire-element-id="499530">Si la fonction <em>SendMessage</em> réussit, l'application peut accéder au contenu du contrôle d'édition, en donnant la structure <strong>HLOCAL</strong> à la valeur retournée avant de la passer à la fonction <strong>LocalLock</strong>. Pour déverrouiller le <em>buffer</em>, et ainsi pouvoir modifier son contenu, l'application doit au préalable utiliser la fonction <strong>LocalUnlock</strong>.</p></aside><h6 id="r-em-getlimittext" data-claire-element-id="499543">EM_GETLIMITTEXT</h6><p id="r-499533" data-claire-element-id="499533">Recherche les limites du texte courant.</p><ul id="r-499540" data-claire-element-id="499540"><li id="r-499535" data-claire-element-id="499535"><p id="r-499534" data-claire-element-id="499534"><em>wParam</em> : 0.</p></li><li id="r-499537" data-claire-element-id="499537"><p id="r-499536" data-claire-element-id="499536"><em>lParam</em> : 0.</p></li><li id="r-499539" data-claire-element-id="499539"><p id="r-499538" data-claire-element-id="499538">Valeur retournée : limite du texte.</p></li></ul><aside id="r-499542" data-claire-element-id="499542" data-claire-semantic="information"><p id="r-499541" data-claire-element-id="499541">La limite du texte est la quantité maximum de texte, en <em>TCHAR</em>, que le contrôle peut contenir. Pour un texte en ANSI, c'est le nombre de <em>bytes</em> ; pour un texte en Unicode, ce sera le nombre de caractères. Deux documents avec la même limite de caractères rapporteront la même limite de texte, même si l'un est en norme ANSI, et l'autre en Unicode.</p></aside><h6 id="r-em-getline" data-claire-element-id="499554">EM_GETLINE</h6><p id="r-499544" data-claire-element-id="499544">Ce message copie une ligne de texte depuis un contrôle d'édition, et le place dans un <em>buffer</em> défini.</p><ul id="r-499551" data-claire-element-id="499551"><li id="r-499546" data-claire-element-id="499546"><p id="r-499545" data-claire-element-id="499545"><em>wParam </em>: indique l'index de la ligne à rechercher dans un contrôle d'édition multiligne. Si ce paramètre est 0, la ligne recherchée sera la ligne la plus haute dans le texte. Si le contrôle ne contient qu'une seule ligne, ce paramètre sera ignoré.</p></li><li id="r-499548" data-claire-element-id="499548"><p id="r-499547" data-claire-element-id="499547"><em>lParam </em>: pointeur sur le <em>buffer</em> qui va recevoir la copie de la ligne. Avant d'envoyer le message, définissez le premier mot de ce <em>buffer</em> à sa taille en <em>TCHAR</em>. Pour un texte ANSI, c'est le nombre de <em>bytes</em> ; pour un texte Unicode c'est le nombre de caractères. Cette taille dans le premier mot sera remplacée par la copie de la première ligne.</p></li><li id="r-499550" data-claire-element-id="499550"><p id="r-499549" data-claire-element-id="499549">Valeur retournée : nombre de <em>TCHAR</em> copiés. La valeur retournée sera 0 si le nombre de lignes spécifié dans le paramètre <em>wParam</em> est plus grand que le nombre de lignes contenu dans le contrôle d'édition.</p></li></ul><aside id="r-499553" data-claire-element-id="499553" data-claire-semantic="warning"><p id="r-499552" data-claire-element-id="499552">La copie de la ligne ne contient pas le caractère nul final \0.</p></aside><h6 id="r-em-getlinecount" data-claire-element-id="499565">EM_GETLINECOUNT</h6><p id="r-499555" data-claire-element-id="499555">Ce message recherche le nombre de lignes dans un contrôle d'édition multiligne.</p><ul id="r-499562" data-claire-element-id="499562"><li id="r-499557" data-claire-element-id="499557"><p id="r-499556" data-claire-element-id="499556"><em>wParam</em> : 0.</p></li><li id="r-499559" data-claire-element-id="499559"><p id="r-499558" data-claire-element-id="499558"><em>lParam </em>: 0.</p></li><li id="r-499561" data-claire-element-id="499561"><p id="r-499560" data-claire-element-id="499560">Valeur retournée : <em>integer</em>, qui définit le nombre total de lignes de texte contenu dans un contrôle d'édition multiligne. Si le contrôle ne contient pas de texte, la valeur retournée sera 1. Cette valeur ne sera jamais inférieure à 1.</p></li></ul><aside id="r-499564" data-claire-element-id="499564" data-claire-semantic="information"><p id="r-499563" data-claire-element-id="499563">Ce message recherche le nombre total de lignes de texte, et pas seulement le nombre de lignes de texte visible. Si le dispositif de retour à la ligne automatique est désactivé, le nombre de lignes peut changer quand les dimensions de la fenêtre d'édition changent.</p></aside><h6 id="r-em-getmodify" data-claire-element-id="499576">EM_GETMODIFY</h6><p id="r-499566" data-claire-element-id="499566">Ce message recherche l'état du <em>flag</em> de modification du contrôle d'édition. Le <em>flag</em> indique si le contenu du contrôle a été modifié.</p><ul id="r-499573" data-claire-element-id="499573"><li id="r-499568" data-claire-element-id="499568"><p id="r-499567" data-claire-element-id="499567"><em>wParam </em>: 0.</p></li><li id="r-499570" data-claire-element-id="499570"><p id="r-499569" data-claire-element-id="499569"><em>lParam </em>: 0.</p></li><li id="r-499572" data-claire-element-id="499572"><p id="r-499571" data-claire-element-id="499571">Valeur retournée : non nulle s'il y a une modification, 0 s'il n'y a pas de modification.</p></li></ul><aside id="r-499575" data-claire-element-id="499575" data-claire-semantic="information"><p id="r-499574" data-claire-element-id="499574">On peut envoyer le message <em>EM_SETMODIFY</em> au contrôle d'édition pour appliquer ou enlever le <em>flag</em>.</p></aside><h6 id="r-em-getpasswordchar" data-claire-element-id="499587">EM_GETPASSWORDCHAR</h6><p id="r-499577" data-claire-element-id="499577">Ce message recherche le caractère d'un mot de passe que l'utilisateur entre dans le contrôle d'édition.</p><ul id="r-499584" data-claire-element-id="499584"><li id="r-499579" data-claire-element-id="499579"><p id="r-499578" data-claire-element-id="499578"><em>wParam</em> : 0.</p></li><li id="r-499581" data-claire-element-id="499581"><p id="r-499580" data-claire-element-id="499580"><em>lParam </em>: 0.</p></li><li id="r-499583" data-claire-element-id="499583"><p id="r-499582" data-claire-element-id="499582">Valeur retournée : définit le caractère qui doit être affiché à la place des caractères entrés par l'utilisateur. Si cette valeur est <em>NULL</em>, il n'y a pas de caractères de mot de passe, et le contrôle affiche les caractères entrés par l'utilisateur.</p></li></ul><aside id="r-499586" data-claire-element-id="499586" data-claire-semantic="information"><p id="r-499585" data-claire-element-id="499585">Si un contrôle d'édition est créé avec le style <em>ES_PASSWORD</em>, le caractère par défaut du mot de passe sera un astérisque (*). Si un contrôle d'édition est créé sans le style <em>ES_PASSWORD</em>, il n'y aura pas de caractères de mot de passe ; pour changer les caractères du mot de passe, envoyez le message <em>EM_SETPASSWORDCHAR</em>.</p></aside><h6 id="r-em-getrect" data-claire-element-id="499598">EM_GETRECT</h6><p id="r-499588" data-claire-element-id="499588">Ce message recherche le rectangle de formatage d'un contrôle d'édition. Le rectangle de formatage est le rectangle dans lequel le contrôle affiche le texte. Ce rectangle est indépendant de la taille de la fenêtre du contrôle d'édition.</p><ul id="r-499595" data-claire-element-id="499595"><li id="r-499590" data-claire-element-id="499590"><p id="r-499589" data-claire-element-id="499589"><em>wParam</em> : 0.</p></li><li id="r-499592" data-claire-element-id="499592"><p id="r-499591" data-claire-element-id="499591"><em>lParam</em> : pointeur sur une structure <em>RECT</em> qui reçoit le rectangle de formatage.</p></li><li id="r-499594" data-claire-element-id="499594"><p id="r-499593" data-claire-element-id="499593">Valeur retournée : cette valeur n'a pas de grande signification.</p></li></ul><aside id="r-499597" data-claire-element-id="499597" data-claire-semantic="information"><p id="r-499596" data-claire-element-id="499596">Vous pouvez modifier le rectangle de formatage d'un contrôle d'édition multiligne en utilisant les messages <em>EM_SETRECT</em> et <em>EM_SETRECTNP</em>.<br/> Sous certaines conditions, <em>EM-GETRECT</em> ne va pas retourner exactement les valeurs définies par <em>EM_SETRECT</em> ou <em>EM_SETRECTNP</em>, mais elles seront approximativement correctes avec une variation de quelques pixels.</p></aside><h6 id="r-em-getsel" data-claire-element-id="499607">EM_GETSEL</h6><p id="r-499599" data-claire-element-id="499599">Message qui recherche les positions des caractères de début et de fin d'une sélection dans le contrôle d'édition.</p><ul id="r-499606" data-claire-element-id="499606"><li id="r-499601" data-claire-element-id="499601"><p id="r-499600" data-claire-element-id="499600"><em>wParam </em>: pointeur sur un <em>buffer</em> qui reçoit la position de départ de la sélection. Ce paramètre peut être <em>NULL</em>.</p></li><li id="r-499603" data-claire-element-id="499603"><p id="r-499602" data-claire-element-id="499602"><em>lParam </em>: pointeur sur un <em>buffer</em> qui reçoit la position de premier caractère non sélectionné après la fin de la sélection. Ce paramètre peut être <em>NULL</em>.</p></li><li id="r-499605" data-claire-element-id="499605"><p id="r-499604" data-claire-element-id="499604">Valeur retournée : valeur contenant la position de départ de la sélection dans le mot bas, et la position du premier caractère après le dernier sélectionné dans le mot haut. Si l'une de ces valeurs excède 65,535, la valeur retournée sera 1.</p></li></ul><h6 id="r-em-getwordbreakproc" data-claire-element-id="499618">EM_GETWORDBREAKPROC</h6><p id="r-499608" data-claire-element-id="499608">Ce message recherche l'adresse de la fonction courante de retour à la ligne.</p><ul id="r-499615" data-claire-element-id="499615"><li id="r-499610" data-claire-element-id="499610"><p id="r-499609" data-claire-element-id="499609"><em>wParam </em> : 0.</p></li><li id="r-499612" data-claire-element-id="499612"><p id="r-499611" data-claire-element-id="499611"><em>lParam </em> : 0.</p></li><li id="r-499614" data-claire-element-id="499614"><p id="r-499613" data-claire-element-id="499613">Valeur retournée : définit l'adresse de la fonction <em>Wordwrap</em> (retour à la ligne) de l'application. Cette valeur est <em>NULL</em> si aucune fonction <em>Wordwrap</em> n'existe.</p></li></ul><aside id="r-499617" data-claire-element-id="499617" data-claire-semantic="information"><p id="r-499616" data-claire-element-id="499616">Une fonction <em>Wordwrap</em> balaie le texte du <em>buffer</em> contenant le texte envoyé pour être affiché. Elle cherche le premier mot qui n'apparaît pas sur la ligne d'affichage. La fonction <em>Wordwrap</em> place ce mot au début de la ligne suivante. Une fonction <em>Wordwrap</em> définit le point où le système doit casser la ligne du texte dans un contrôle d'édition multiligne, normalement au niveau d'un caractère d'espacement entre deux mots.</p></aside><h6 id="r-em-hideballoontip" data-claire-element-id="499627">EM_HIDEBALLOONTIP</h6><p id="r-499619" data-claire-element-id="499619">Cache toute info bulle associée au contrôle d'édition.</p><ul id="r-499626" data-claire-element-id="499626"><li id="r-499621" data-claire-element-id="499621"><p id="r-499620" data-claire-element-id="499620"><em>wParam</em> : 0.</p></li><li id="r-499623" data-claire-element-id="499623"><p id="r-499622" data-claire-element-id="499622"><em>lParam</em> : 0.</p></li><li id="r-499625" data-claire-element-id="499625"><p id="r-499624" data-claire-element-id="499624">Valeur retournée : si le message réussit, cette valeur sera <em>TRUE</em>, sinon, elle sera <em>FALSE</em>.</p></li></ul><h6 id="r-em-linefromchar" data-claire-element-id="499636">EM_LINEFROMCHAR</h6><p id="r-499628" data-claire-element-id="499628">Ce message recherche l'index de la ligne contenant l'index d'un caractère défini, dans un contrôle d'édition. L'index d'un caractère appartient à une suite dont le premier terme est 0.</p><ul id="r-499635" data-claire-element-id="499635"><li id="r-499630" data-claire-element-id="499630"><p id="r-499629" data-claire-element-id="499629"><em>wParam</em> : définit l'index du caractère contenu dans la ligne dont le numéro est recherché. Si ce paramètre est 1, <em>EM_LINEFROMCHAR</em> recherche soit le numéro de la ligne courante (la ligne où se trouve le curseur), soit, si une sélection existe, le numéro de la ligne où se situe le début de la sélection de texte.</p></li><li id="r-499632" data-claire-element-id="499632"><p id="r-499631" data-claire-element-id="499631"><em>lparam</em> : 0.</p></li><li id="r-499634" data-claire-element-id="499634"><p id="r-499633" data-claire-element-id="499633">Valeur retournée : numéro de la ligne contenant l'index du caractère spécifié dans <em>wParam</em>. Ce numéro appartient à une série qui commence à 0.</p></li></ul><h6 id="r-em-lineindex" data-claire-element-id="499648">EM_LINEINDEX</h6><p id="r-499637" data-claire-element-id="499637">Ce message définit la limite de texte d'un contrôle d'édition. Cette limite est la quantité maximum de texte, en <em>TCHAR</em>, que l'utilisateur peut entrer dans le contrôle d'édition.</p><ul id="r-499644" data-claire-element-id="499644"><li id="r-499639" data-claire-element-id="499639"><p id="r-499638" data-claire-element-id="499638"><em>wParam </em>: spécifie le nombre maximum de <em>TCHAR</em> que l'utilisateur peut entrer. Pour le texte ANSI, c'est le nombre de <em>bytes</em> ; pour le texte Unicode, c'est le nombre de caractères. Ce nombre ne doit pas inclure le caractère nul terminal.</p></li><li id="r-499641" data-claire-element-id="499641"><p id="r-499640" data-claire-element-id="499640"><em>lParam </em>: 0</p></li><li id="r-499643" data-claire-element-id="499643"><p id="r-499642" data-claire-element-id="499642">Valeur retournée : pas de valeur retournée.</p></li></ul><aside id="r-499647" data-claire-element-id="499647" data-claire-semantic="information"><p id="r-499645" data-claire-element-id="499645">Ce message limite seulement le texte que l'utilisateur peut entrer. Il ne concerne pas le texte qui est déjà dans le contrôle quand le message est envoyé, ni la longueur du texte copié dans le contrôle d'édition par le message <em>WM_SETTEXT</em>. Si une application utilise le message <em>WM_SETTEXT</em> pour placer plus de texte que le message <em>EM_LIMITTEXT</em> a établi dans un contrôle d'édition, l'utilisateur pourra éditer entièrement le contenu du contrôle d'édition.</p><p id="r-499646" data-claire-element-id="499646">Avant que <em>EM_LIMITTEXT</em> soit appelé, la limite par défaut de la quantité de texte que l'utilisateur peut entrer dans un contrôle d'édition est de 32,767 caractères.</p></aside><h6 id="r-em-linelength" data-claire-element-id="499659">EM_LINELENGTH</h6><p id="r-499649" data-claire-element-id="499649">Ce message recherche la longueur, en caractères, d'une ligne dans un contrôle d'édition.</p><ul id="r-499656" data-claire-element-id="499656"><li id="r-499651" data-claire-element-id="499651"><p id="r-499650" data-claire-element-id="499650"><em>wParam </em>: définit l'index du caractère dans une ligne dont la longueur est recherchée. Si ce paramètre est plus grand que le nombre de caractères dans le contrôle, la valeur retournée sera 0. Ce paramètre peut être 1. Dans ce cas, le message retourne le nombre de caractères non sélectionnés dans la ligne des caractères sélectionnés. Par exemple, si une sélection va du 4ème caractère d'une ligne au 8ème caractère avant la fin de la ligne qui suit, la valeur retournée sera 10 (3 caractères sur la première ligne, et 7 sur la ligne suivante).</p></li><li id="r-499653" data-claire-element-id="499653"><p id="r-499652" data-claire-element-id="499652"><em>lParam </em>: 0.</p></li><li id="r-499655" data-claire-element-id="499655"><p id="r-499654" data-claire-element-id="499654">Valeur retournée : pour des contrôles d'édition multiligne, la valeur retournée est la longueur, en <em>TCHAR</em>, de la ligne définie par le paramètre <em>wParam</em>. Pour le texte ANSI, c'est le nombre de <em>bytes</em> ; pour le texte Unicode, c'est le nombre de caractères. Cette valeur n'inclut pas le caractère de retour de chariot de fin de ligne. <br/> Pour un contrôle d'une seule ligne, la valeur retournée est la longueur, en <em>TCHAR</em>, du texte dans le contrôle d'édition.</p></li></ul><aside id="r-499658" data-claire-element-id="499658" data-claire-semantic="information"><p id="r-499657" data-claire-element-id="499657">Utilisez le message <em>EL_LINEINDEX</em> pour rechercher l'index d'un caractère pour un numéro de ligne donné à l'intérieur d'un contrôle d'édition multiligne.</p></aside><h6 id="r-em-linescroll" data-claire-element-id="499668">EM_LINESCROLL</h6><p id="r-499660" data-claire-element-id="499660">Fait défiler le texte dans un contrôle d'édition multiligne.</p><ul id="r-499667" data-claire-element-id="499667"><li id="r-499662" data-claire-element-id="499662"><p id="r-499661" data-claire-element-id="499661"><em>wParam</em> : définit le nombre de caractères à faire défiler horizontalement.</p></li><li id="r-499664" data-claire-element-id="499664"><p id="r-499663" data-claire-element-id="499663"><em>lParam</em> : définit le nombre de lignes à faire défiler verticalement.</p></li><li id="r-499666" data-claire-element-id="499666"><p id="r-499665" data-claire-element-id="499665">Valeur retournée : si le message est envoyé à un contrôle d'édition multiligne, la valeur est <em>TRUE</em>. Si le message est envoyé à un contrôle d'édition d'une ligne la valeur est <em>FALSE</em>.</p></li></ul><h6 id="r-em-posfromchar" data-claire-element-id="499679">EM_POSFROMCHAR</h6><p id="r-499669" data-claire-element-id="499669">Ce message recherche les coordonnées dans la zone client d'un caractère dans le contrôle d'édition.</p><ul id="r-499676" data-claire-element-id="499676"><li id="r-499671" data-claire-element-id="499671"><p id="r-499670" data-claire-element-id="499670"><em>wParam </em>: index du caractère (les index commencent par 0).</p></li><li id="r-499673" data-claire-element-id="499673"><p id="r-499672" data-claire-element-id="499672"><em>lParam </em>: 0.</p></li><li id="r-499675" data-claire-element-id="499675"><p id="r-499674" data-claire-element-id="499674">Valeur retournée : contient les coordonnées du caractère dans la zone client. Le mot bas contient la coordonnée horizontale, et le mot haut contient la coordonnée verticale.</p></li></ul><aside id="r-499678" data-claire-element-id="499678" data-claire-semantic="information"><p id="r-499677" data-claire-element-id="499677">Une coordonnée retournée peut être négative si le caractère défini n'est pas affiché dans l'aire client du contrôle d'édition. Si le caractère est un délimiteur de ligne, les coordonnées retournées seront juste après le dernier caractère visible de la ligne. Si l'index spécifié est plus grand que l'index du dernier caractère dans le contrôle, le contrôle retournera -1.</p></aside><h6 id="r-em-replacesel" data-claire-element-id="499690">EM_REPLACESEL</h6><p id="r-499680" data-claire-element-id="499680">Ce message remplace la sélection courante dans le contrôle d'édition avec le texte spécifié.</p><ul id="r-499687" data-claire-element-id="499687"><li id="r-499682" data-claire-element-id="499682"><p id="r-499681" data-claire-element-id="499681"><em>wParam </em>: spécifié seulement si l'opération peut être annulée. Si le paramètre est <em>TRUE</em>, l'opération peut être annulée. Si le paramètre est <em>FALSE</em>, l'opération ne peut pas être annulée.</p></li><li id="r-499684" data-claire-element-id="499684"><p id="r-499683" data-claire-element-id="499683"><em>lParam </em>: pointeur sur une chaîne à terminaison nulle contenant le texte de remplacement.</p></li><li id="r-499686" data-claire-element-id="499686"><p id="r-499685" data-claire-element-id="499685">Valeur retournée : ne retourne pas de valeur.</p></li></ul><aside id="r-499689" data-claire-element-id="499689" data-claire-semantic="information"><p id="r-499688" data-claire-element-id="499688">Pour remplacer tout le texte d'un contrôle d'édition, utilisez le message <em>WM_SETTEXT</em>. <br/> S'il n'y a pas de sélection courante de texte, le texte de remplacement est inséré à l'endroit où est placé le curseur.</p></aside><h6 id="r-em-scroll" data-claire-element-id="499699">EM_SCROLL</h6><p id="r-499691" data-claire-element-id="499691">Ce message fait défiler le texte verticalement dans un contrôle d'édition. Ce message est équivalent au message <em>WM_VSCROLL</em>.</p><ul id="r-499698" data-claire-element-id="499698"><li id="r-499693" data-claire-element-id="499693"><p id="r-499692" data-claire-element-id="499692"><em>wParam </em>: peut être une des valeurs suivantes :<br/> *** SB_LINEDOWN : déplace les lignes vers le bas<br/> *** SB_LINEUP : déplace les lignes vers le haut.<br/> *** SB_PAGEDOWN : passe à la page suivante.<br/> *** SB_PAGEUP : passe à la page précédente.</p></li><li id="r-499695" data-claire-element-id="499695"><p id="r-499694" data-claire-element-id="499694"><em>lParam</em> : 0.</p></li><li id="r-499697" data-claire-element-id="499697"><p id="r-499696" data-claire-element-id="499696">Valeur retournée : si le message réussit, le mot haut retourne la valeur <em>TRUE</em>, et le mot bas est le nombre de lignes de défilement. Si le <em>wParam</em> spécifie une valeur invalide, cette valeur sera <em>FALSE</em>.</p></li></ul><h6 id="r-em-scrollcaret" data-claire-element-id="499708">EM_SCROLLCARET</h6><p id="r-499700" data-claire-element-id="499700">Ce message fait avancer le curseur dans le contrôle d'édition.</p><ul id="r-499707" data-claire-element-id="499707"><li id="r-499702" data-claire-element-id="499702"><p id="r-499701" data-claire-element-id="499701"><em>wParam</em> : ce paramètre est réservé. Il peut être défini à 0.</p></li><li id="r-499704" data-claire-element-id="499704"><p id="r-499703" data-claire-element-id="499703"><em>lParam</em> : ce paramètre est réservé. Il peut être défini à 0.</p></li><li id="r-499706" data-claire-element-id="499706"><p id="r-499705" data-claire-element-id="499705">Valeur retournée : sans grande signification.</p></li></ul><h6 id="r-em-setcuebanner" data-claire-element-id="499717">EM_SETCUEBANNER</h6><p id="r-499709" data-claire-element-id="499709">Le texte du contrôle est affiché comme information, et va s'en aller dès que l'utilisateur commencera à utiliser le contrôle.</p><ul id="r-499716" data-claire-element-id="499716"><li id="r-499711" data-claire-element-id="499711"><p id="r-499710" data-claire-element-id="499710"><em>wParam </em>: 0</p></li><li id="r-499713" data-claire-element-id="499713"><p id="r-499712" data-claire-element-id="499712"><em>lParam </em>: pointeur sur une chaîne de caractères Unicode, qui contient le texte à afficher en &quot;information&quot;.</p></li><li id="r-499715" data-claire-element-id="499715"><p id="r-499714" data-claire-element-id="499714">Valeur retournée : si le message réussit, cette valeur sera <em>TRUE</em> ; dans le cas contraire, <em>FALSE</em>.</p></li></ul><h6 id="r-em-sethandle" data-claire-element-id="499728">EM_SETHANDLE</h6><p id="r-499718" data-claire-element-id="499718">Message qui définit le <em>handle</em> de la mémoire qui va être utilisée par un contrôle d'édition.</p><ul id="r-499725" data-claire-element-id="499725"><li id="r-499720" data-claire-element-id="499720"><p id="r-499719" data-claire-element-id="499719"><em>wParam</em> : <em>handle</em> de la mémoire du <em>buffer</em> que le contrôle d'édition utilise pour placer le texte courant affiché, au lieu d'utiliser sa propre mémoire.</p></li><li id="r-499722" data-claire-element-id="499722"><p id="r-499721" data-claire-element-id="499721"><em>lParam</em> : 0</p></li><li id="r-499724" data-claire-element-id="499724"><p id="r-499723" data-claire-element-id="499723">Valeur retournée : pas de valeur retournée.</p></li></ul><aside id="r-499727" data-claire-element-id="499727" data-claire-semantic="information"><p id="r-499726" data-claire-element-id="499726">Avant qu'une application ne définisse un nouveau <em>handle</em> de mémoire, elle doit envoyer un message <em>EM_GETHANDLE</em> pour rechercher le <em>handle</em> de la mémoire courante du <em>buffer</em>, et doit libérer cette mémoire.</p></aside><h6 id="r-em-setlimittext" data-claire-element-id="499739">EM_SETLIMITTEXT</h6><p id="r-499729" data-claire-element-id="499729">Ce message définit la limite du texte d'un contrôle d'édition. La limite du texte est la quantité maximum de texte, en <em>TCHAR</em>, que l'utilisateur peut entrer dans le contrôle d'édition. <br/> C'est le même message que <em>EM_LIMITTEXT</em>.</p><ul id="r-499736" data-claire-element-id="499736"><li id="r-499731" data-claire-element-id="499731"><p id="r-499730" data-claire-element-id="499730"><em>wParam </em>: définit le nombre maximum de <em>TCHAR</em> que l'utilisateur peut entrer. Pour un texte ANSI, c'est le nombre de <em>bytes</em> ; pour un texte Unicode, c'est le nombre de caractères. Ce nombre ne doit pas inclure le caractère nul de fin.</p></li><li id="r-499733" data-claire-element-id="499733"><p id="r-499732" data-claire-element-id="499732"><em>lParam </em>: 0.</p></li><li id="r-499735" data-claire-element-id="499735"><p id="r-499734" data-claire-element-id="499734">Valeur retournée : pas de valeur retournée.</p></li></ul><aside id="r-499738" data-claire-element-id="499738" data-claire-semantic="information"><p id="r-499737" data-claire-element-id="499737">Ce message limite seulement le texte que l'utilisateur peut entrer. Il n'affecte pas le texte qui est déjà dans le contrôle d'édition quand le message est envoyé. Il n'affecte pas non plus la longueur du texte copié dans le contrôle d'édition à l'aide du message <em>WM_SETTEXT</em>. Si une application utilise le message <em>WM_SETTEXT</em> pour placer plus de texte que ne le définit <em>EM_SETLIMITTEXT</em> à l'intérieur du contrôle, l'utilisateur pourra éditer la totalité du contenu du contrôle d'édition.<br/> Avant que <em>EM_SETLIMITTEXT</em> soit appelé, la limite par défaut de la quantité de texte qu'un utilisateur peut entrer dans un contrôle d'édition est 32,767 caractères.</p></aside><h6 id="r-em-setmodify" data-claire-element-id="499750">EM_SETMODIFY</h6><p id="r-499740" data-claire-element-id="499740">Ce message applique ou annule le <em>flag</em> de modification pour un contrôle d'édition. Le <em>flag</em> de modification indique si le texte à l'intérieur d'un contrôle d'édition a été modifié.</p><ul id="r-499747" data-claire-element-id="499747"><li id="r-499742" data-claire-element-id="499742"><p id="r-499741" data-claire-element-id="499741"><em>wParam </em>: donne la nouvelle valeur pour le <em>flag</em> de modification . Une valeur <em>TRUE </em>indique que le texte a été modifié, une valeur <em>FALSE</em> indique qu'il n'y a pas eu de modification.</p></li><li id="r-499744" data-claire-element-id="499744"><p id="r-499743" data-claire-element-id="499743"><em>lParam </em>: 0</p></li><li id="r-499746" data-claire-element-id="499746"><p id="r-499745" data-claire-element-id="499745">Valeur retournée : pas de valeur retournée.</p></li></ul><aside id="r-499749" data-claire-element-id="499749" data-claire-semantic="information"><p id="r-499748" data-claire-element-id="499748">Le système met immédiatement le <em>flag</em> de modification à zéro quand le contrôle est créé. Si un utilisateur change le texte du contrôle, le système définit à &quot;nonzéro&quot; le <em>flag</em>. Vous pouvez envoyer le message <em>EM_GETMODIFY</em> pour trouver le stade du <em>flag</em> de modification du contrôle d'édition.</p></aside><h6 id="r-em-setpasswordchar" data-claire-element-id="499761">EM_SETPASSWORDCHAR</h6><p id="r-499751" data-claire-element-id="499751">Ce message définit ou annule le caractère de mot de passe pour un contrôle d'édition. Quand le caractère de mot de passe est défini, ce caractère est affiché à la place des caractères entrés par l'utilisateur.</p><ul id="r-499760" data-claire-element-id="499760"><li id="r-499753" data-claire-element-id="499753"><p id="r-499752" data-claire-element-id="499752"><em>wParam </em>: définit le caractère à afficher à la place des caractères entrés par l'utilisateur. Si ce paramètre est zéro, le contrôle annule le caractère courant de mot de passe, et affiche les caractères entrés au clavier par l'utilisateur.</p></li><li id="r-499755" data-claire-element-id="499755"><p id="r-499754" data-claire-element-id="499754"><em>lParam </em>: 0.</p></li><li id="r-499757" data-claire-element-id="499757"><p id="r-499756" data-claire-element-id="499756">Valeur retournée : pas de valeur retournée.</p></li><aside id="r-499759" data-claire-element-id="499759" data-claire-semantic="information"><p id="r-499758" data-claire-element-id="499758">Quand un contrôle d' édition reçoit le message <em>EM_SETPASSWORDCHAR</em>, le contrôle redessine tous les caractères visibles en utilisant le caractère spécifié dans <em>wParam</em>. Si <em>wParam</em> est zéro, le contrôle redessine tous les caractères visibles en utilisant les caractères qui ont été entrés par l'utilisateur.<br/> Si un contrôle d'édition a été créé avec le style <em>ES_PASSWORD</em>, le caractère de mot de passe par défaut est l'astérisque(*).</p></aside></ul><h6 id="r-em-setreadonly" data-claire-element-id="499770">EM_SETREADONLY</h6><p id="r-499762" data-claire-element-id="499762">Ce message définit ou annule le style <em>ES_READONLY</em> d'un contrôle d'édition.</p><ul id="r-499769" data-claire-element-id="499769"><li id="r-499764" data-claire-element-id="499764"><p id="r-499763" data-claire-element-id="499763"><em>wParam </em>: <em>TRUE</em> si le style <em>ES_READONLY</em> est défini, <em>FALSE</em> sinon.</p></li><li id="r-499766" data-claire-element-id="499766"><p id="r-499765" data-claire-element-id="499765"><em>lParam </em>: 0.</p></li><li id="r-499768" data-claire-element-id="499768"><p id="r-499767" data-claire-element-id="499767">Valeur retournée : &quot;non zéro&quot; si la fonction réussit. Zéro si la fonction échoue.</p></li></ul><h6 id="r-em-setrect" data-claire-element-id="499783">EM_SETRECT</h6><p id="r-499771" data-claire-element-id="499771">Ce message définit le rectangle de formatage d'un contrôle d'édition <strong>multiligne</strong>. Le rectangle de formatage est le rectangle dans lequel le contrôle dessine le texte. Il est indépendant de la taille de la fenêtre du contrôle d'édition.</p><ul id="r-499778" data-claire-element-id="499778"><li id="r-499773" data-claire-element-id="499773"><p id="r-499772" data-claire-element-id="499772"><em>wParam </em>: 0.</p></li><li id="r-499775" data-claire-element-id="499775"><p id="r-499774" data-claire-element-id="499774"><em>lParam </em>: pointeur sur une structure <em>RECT</em> qui définit les nouvelles dimensions du rectangle. Si le paramètre est <em>NULL</em>, le rectangle de formatage est défini aux valeurs par défaut.</p></li><li id="r-499777" data-claire-element-id="499777"><p id="r-499776" data-claire-element-id="499776">Valeur retournée : pas de valeur retournée.</p></li></ul><aside id="r-499780" data-claire-element-id="499780" data-claire-semantic="warning"><p id="r-499779" data-claire-element-id="499779">Si le contrôle d'édition n'a pas de barre horizontale de défilement, et si le rectangle de formatage est plus large que la fenêtre du contrôle d'édition, les lignes de textes qui seront plus larges que la fenêtre du contrôle seront coupées au lieu d'être terminées sur la ligne suivante.</p></aside><aside id="r-499782" data-claire-element-id="499782" data-claire-semantic="warning"><p id="r-499781" data-claire-element-id="499781">Si un contrôle d'édition comporte un bord, le rectangle de formatage sera réduit par la taille du bord. Si vous voulez ajuster le rectangle renvoyé par <em>EM_GETRECT</em>, vous devez annuler la taille du bord avant d'utiliser le message <em>EM_SETRECT</em>.</p></aside><h6 id="r-em-setrectnp" data-claire-element-id="499792">EM_SETRECTNP</h6><p id="r-499784" data-claire-element-id="499784">Ce message définit le rectangle de formatage d'un contrôle d'édition. Ce message est le même que le message <em>EM_SETRECT</em> à ceci près qu'il ne redessine pas la fenêtre du contrôle d'édition.</p><ul id="r-499791" data-claire-element-id="499791"><li id="r-499786" data-claire-element-id="499786"><p id="r-499785" data-claire-element-id="499785"><em>wParam </em>: 0.</p></li><li id="r-499788" data-claire-element-id="499788"><p id="r-499787" data-claire-element-id="499787"><em>lParam </em>: pointeur sur une structure <em>RECT</em> qui définit les nouvelles dimensions du rectangle. Si le paramètre est <em>NULL</em>, le rectangle de formatage est défini aux valeurs par défaut.</p></li><li id="r-499790" data-claire-element-id="499790"><p id="r-499789" data-claire-element-id="499789">Valeur retournée : pas de valeur retournée.</p></li></ul><h6 id="r-em-setsel" data-claire-element-id="499804">EM_SETSEL</h6><p id="r-499793" data-claire-element-id="499793">Ce message sélectionne une suite de caractères dans un contrôle d'édition.</p><ul id="r-499800" data-claire-element-id="499800"><li id="r-499795" data-claire-element-id="499795"><p id="r-499794" data-claire-element-id="499794"><em>wParam </em>: spécifie la position du caractère situé au début de la sélection.</p></li><li id="r-499797" data-claire-element-id="499797"><p id="r-499796" data-claire-element-id="499796"><em>lParam </em>: spécifie la position du caractère de fin de la sélection.</p></li><li id="r-499799" data-claire-element-id="499799"><p id="r-499798" data-claire-element-id="499798">Valeur retournée : pas de valeur retournée.</p></li></ul><aside id="r-499803" data-claire-element-id="499803" data-claire-semantic="information"><p id="r-499801" data-claire-element-id="499801">La valeur de départ peut être plus grande que la la valeur de fin. La plus petite valeur définira la position du premier caractère dans la sélection. Inversement, la plus grande valeur définira la position du caractère de fin de la sélection.</p><p id="r-499802" data-claire-element-id="499802">Si le départ est 0 et la fin 1, tout le texte dans le contrôle d'édition sera sélectionné.<br/> Si le départ est 1, la sélection sera annulée.</p></aside><h6 id="r-em-showballoontip" data-claire-element-id="499813">EM_SHOWBALLOONTIP</h6><p id="r-499805" data-claire-element-id="499805">Ce message affiche une info-bulle associée à un contrôle d'édition.</p><ul id="r-499812" data-claire-element-id="499812"><li id="r-499807" data-claire-element-id="499807"><p id="r-499806" data-claire-element-id="499806"><em>wParam </em>: 0.</p></li><li id="r-499809" data-claire-element-id="499809"><p id="r-499808" data-claire-element-id="499808"><em>lParam </em>: pointeur sur une structure <em>EDITBALLOONTIP</em> contenant l'information concernant l'info-bulle à afficher.</p></li><li id="r-499811" data-claire-element-id="499811"><p id="r-499810" data-claire-element-id="499810">Valeur retournée : si le message réussit, la valeur retournée sera <em>TRUE</em> ; sinon, <em>FALSE</em>.</p></li></ul><h6 id="r-em-undo" data-claire-element-id="499824">EM_UNDO</h6><p id="r-499814" data-claire-element-id="499814">Ce message annule la dernière opération du contrôle d'édition dans la file des annulations du contrôle.</p><ul id="r-499821" data-claire-element-id="499821"><li id="r-499816" data-claire-element-id="499816"><p id="r-499815" data-claire-element-id="499815"><em>wParam </em>: 0.</p></li><li id="r-499818" data-claire-element-id="499818"><p id="r-499817" data-claire-element-id="499817"><em>lParam </em>: 0.</p></li><li id="r-499820" data-claire-element-id="499820"><p id="r-499819" data-claire-element-id="499819">Valeur retournée : pour un contrôle d'une seule ligne, cette valeur est toujours <em>TRUE</em>. Pour un contrôle multiligne, cette valeur est <em>TRUE</em> si l'annulation a réussi, ou <em>FALSE</em> dans le cas contraire.</p></li></ul><aside id="r-499823" data-claire-element-id="499823" data-claire-semantic="information"><p id="r-499822" data-claire-element-id="499822">Une annulation peut également être annulée. Par exemple, vous pouvez restaurer du texte effacé avec le message <em>EM_UNDO</em>, et annuler une nouvelle fois le texte avec ce message aussi longtemps qu'aucune autre opération ne se placera dans la file.</p></aside><h5 id="r-exemple-140" data-claire-element-id="499828">Exemple</h5><pre id="r-499826" data-claire-element-id="499826"><code data-claire-semantic="c">#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;

#define ID_BOUTON1      110
#define ID_BOUTON2      111
#define ID_BOUTON3      112

//variables globales
HINSTANCE inst;
HWND hEdit[2]; //handle des deux contrôles d'édition

//Afficher un contrôle d'édition d'une ligne
HWND afficheEditUneLigne (HWND hwnd)
{
HWND hEdit=CreateWindow(
                        &quot;EDIT&quot;,
                        &quot;Modifiez le texte SVP&quot;,
                         WS_VISIBLE|WS_CHILD|WS_BORDER|ES_CENTER ,
                         50,10,500,20,hwnd,NULL,inst,NULL);

return hEdit;
}

//Afficher un contrôle d'édition multiligne
HWND afficheEditMultiligne (HWND hwnd)
{
    char texte[2000]={0};
strncat (texte, &quot;Vous voudriez apprendre l'API windows et vous trouvez les autres &quot;,1000);
strncat (texte, &quot;cours présents sur le net trop difficiles, ou pas assez précis ?&quot;,1000);
strncat (texte, &quot;Vous avez frappé à la bonne porte. Bienvenue dans ce tutorial.&quot;,1000);
strncat (texte, &quot;Vous allez apprendre ici à vous servir d'une API très développée :&quot;,1000);
strncat (texte, &quot;l'API Win32. Sa proximité avec le système d'exploitation lui permet &quot;,1000);
strncat (texte, &quot;d'avoir un contrôle total sur n'importe quelle partie de l'OS et un &quot;,1000);
strncat (texte, &quot;grand éventail de fonctions. L'API Windows est, malheureusement et comme &quot;,1000);
strncat (texte, &quot;son nom l'indique, exclusivement dédié à Windows. Donc si vous &quot;,1000);
strncat (texte, &quot;possédez un autre OS, passez votre chemin. Je considère dans ce tutorial que &quot;,1000);
strncat (texte, &quot;vous ne connaissez strictement rien à l'API Windows, ceci pour ne pas &quot;,1000);
strncat (texte, &quot;décourager les débutants, néammoins, vous aurez besoin des connaissances &quot;,1000);
strncat (texte, &quot;acquises tout au long du tuto de M@teo. Vous trouverez donc ici des &quot;,1000);
strncat (texte, &quot;cours évolutifs, une documentation sur les différents messages, &quot;,1000);
strncat (texte, &quot;notifications, styles, fonctions etc., des projets grands, &quot;,1000);
strncat (texte, &quot;moyens ou petits ainsi que des bibliothèques statiques  &quot;,1000);
strncat (texte, &quot;ou dynamiques, et enfin des annexes. &quot;,1000);




HWND hEdit=CreateWindow(&quot;EDIT&quot;,
                        texte,
                        WS_VISIBLE|WS_CHILD|ES_MULTILINE|ES_AUTOVSCROLL,
                        50,50,500,300,hwnd,NULL,inst,NULL);

return hEdit;
}

//Traitement des messages
void messageCtl(HWND hwnd,UINT message, WPARAM wParam, LPARAM lParam)
{
UINT motBas =  LOWORD(wParam);
HWND hCtl= (HWND) lParam;
int nombreLignes=0;
char lignes[70]={0},nLignes[5]={0};

        switch(motBas)
            {
            case ID_BOUTON1://nombre de lignes

            //envoyer le message approprié pour trouver le nombre de lignes dans le contôle
               nombreLignes = SendMessage( hEdit[1], EM_GETLINECOUNT,wParam,lParam);

            //transformer un integer en chaîne de caractères et afficher le résultat
                sprintf(nLignes,&quot;%d&quot;,nombreLignes);
                strncat(lignes,&quot;Il y a &quot;,70);
                strncat(lignes,nLignes,70);
                strncat(lignes, &quot; lignes dans ce texte. Supprimez ou ajoutez \n en et testez le message.&quot;,70);
                MessageBox(hwnd,lignes,&quot;&quot;,MB_OK);
            break;
            case ID_BOUTON2: //marges de gauche
                wParam = EC_LEFTMARGIN ;
                LOWORD(lParam) = 100;
                //ou
                //lParam = (LPARAM)MAKELONG (100,0);
                //envoi du message au contrôle d'édition
                SendMessage( hEdit[1], EM_SETMARGINS,wParam,lParam);
                MessageBox(hwnd,&quot;A vous de trouver comment réduire \nles lignes maintenant ! :)&quot;,&quot;&quot;,MB_OK);
            break;
            }
}

//Traitement des notifications
void NotificationControle(HWND hwnd,UINT message, WPARAM wParam, LPARAM lParam)
{
UINT motHaut= HIWORD(wParam);
HWND hCtl= (HWND) lParam;

switch(motHaut)
{
        //Notification EN_CHANGE envoyée par le contrôle
        case EN_CHANGE:
                if (hCtl == hEdit[0])
                {
                MessageBox(hwnd,&quot;Vous avez modifié le texte d'une contrôle à une ligne !!&quot;,&quot;&quot;,MB_OK);
                }
        break;
        case BN_CLICKED: // cliquer sur un des boutons pour analyser les messages
               messageCtl((HWND)hwnd,(UINT)message,(WPARAM)wParam,(LPARAM)lParam);
        break;
}
}


//Boutons pour la démo
HWND boutonMessage(HWND hwnd,HMENU code,long x, long y, char * texte)
{
HWND hBouton=CreateWindow(
                        &quot;BUTTON&quot;,
                        texte,
                        WS_CHILD|WS_VISIBLE|BS_PUSHBUTTON,
                        x,y,
                        350,30,
                        hwnd,
                        code,
                        inst,
                        NULL);
return hBouton;
}

LRESULT CALLBACK  Procedure (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{

    static HWND hBouton[3]={0};

switch (message)

    {
        //afficher les contrôles d'édition à la réception du message WM_CREATE
        case WM_CREATE:
               hEdit[0]=afficheEditUneLigne (hwnd);
               hEdit[1]=afficheEditMultiligne(hwnd);
        //affichage des boutons pour la démo:
               hBouton[0]= boutonMessage(hwnd, (HMENU)ID_BOUTON1,120,355,&quot;Tester le message EM_GETLINECOUNT&quot;);
               hBouton[1]= boutonMessage(hwnd, (HMENU)ID_BOUTON2,120,395,&quot;Test le EM_SETMARGINS (Gauche)&quot;);
               hBouton[2]= boutonMessage(hwnd, (HMENU)ID_BOUTON3,120,435,&quot;Test le EM_SETMARGINS (Droite)&quot;);
        return 0;

        case WM_COMMAND:
            //Recevoir une notification
            NotificationControle(hwnd,message,wParam,lParam);
              return 0;

        case WM_CLOSE:
             DestroyWindow(hwnd);
            return 0;

        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(hwnd, message, wParam, lParam);
        }
}

int WINAPI WinMain(HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
                                        LPSTR lignesDeCommande, int modeDAffichage)
{
       //Variables de la fonction principale
    MSG msg;
    WNDCLASS wc;
        HWND hwnd;
        inst = cetteInstance;
        // Structure de la classe de la fenêtre principale
    wc.style = 0 ;
    wc.lpfnWndProc = Procedure;
    wc.cbClsExtra = 0;
    wc.cbWndExtra = 0;
    wc.hInstance = cetteInstance;
    wc.hIcon = NULL;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground =  (HBRUSH)(1+ COLOR_BTNFACE);
    wc.lpszMenuName =  NULL;
    wc.lpszClassName = &quot;ClassePrincipale&quot;;

        //Enregistrer la classe de fenêtre
    if(!RegisterClass(&amp;wc)) return FALSE;
    hwnd = CreateWindow(&quot;ClassePrincipale&quot;, &quot;Démo du contrôle d'édition&quot;,WS_OVERLAPPEDWINDOW   ,
                              200,100,600 ,500, NULL, NULL, cetteInstance, NULL);
        if (!hwnd)  return FALSE;
    ShowWindow(hwnd,SW_SHOW);
        UpdateWindow( hwnd );

        //Boucle de message
    while (GetMessage(&amp;msg, NULL, 0, 0))
    {
        TranslateMessage(&amp;msg);
        DispatchMessage(&amp;msg);
    }
    return msg.wParam;
}</code></pre><p id="r-499827" data-claire-element-id="499827"><em>Rédactrice : <strong>acryline</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
<span class="arrow"></span>
<span class="next">Les boutons (tous types)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
<span class="next">La liste déroulante</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lalistedroulante"></a><h2>La liste déroulante</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
<span class="arrow"></span>
<span class="next">Le contrôle d&#039;édition</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
<span class="next">La liste de choix</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-liste-deroulante-2" data-claire-element-id="500042">La liste déroulante</h4><p id="r-499830" data-claire-element-id="499830">Ce contrôle est appelé sous Windows une <em>COMBOBOX</em>, et permet d'afficher une liste déroulante de choix.</p><figure id="r-499832" data-claire-element-id="499833"><img id="r-499831" data-claire-element-id="499831" src="medias/uploads.siteduzero.com_files_16001_17000_16226.jpg" alt="Image utilisateur"/></figure><h5 id="r-creation-28" data-claire-element-id="499866">Création</h5><p id="r-499834" data-claire-element-id="499834">Pour créer une <em>combobox</em>, il faut appeler <em>CreateWindow</em> en spécifiant &quot;COMBOBOX&quot; comme classe.</p><aside id="r-499837" data-claire-element-id="499837" data-claire-semantic="information"><p id="r-499835" data-claire-element-id="499835">En ressource, utilisez le mot-clé <strong>CONTROL</strong> (dont l'utilisation est spécifiée plus loin), ou encore (plus adapté) <strong>COMBOBOX</strong> sous la forme suivante :</p><pre id="r-499836" data-claire-element-id="499836"><code data-claire-semantic="c">COMBOBOX ID_COMBO, x, y, w, h, STYLES</code></pre></aside><p id="r-499838" data-claire-element-id="499838">Néanmoins, cela ne suffit pas, car comme vous l'avez vu, il y a plusieurs possibilités. Ce qui va nous intéresser est donc l'attribut de style. En plus de spécifier les styles habituels (<em>WM_CHILD,WM_VISIBLE</em>), vous pouvez spécifier un ou plusieurs de ces styles :</p><ul id="r-499865" data-claire-element-id="499865"><li id="r-499840" data-claire-element-id="499840"><p id="r-499839" data-claire-element-id="499839"><strong>CBS_AUTOHSCROLL</strong> : défile automatiquement le texte vers la droite dans le contrôle <em>EDIT</em> quand l'utilisateur tape un caractère à la fin de la ligne. Si ce style n'est pas défini, l'utilisateur ne peut saisir plus de caractères que ceux qui tiennent dans le contrôle <em>EDIT</em>.</p></li><li id="r-499842" data-claire-element-id="499842"><p id="r-499841" data-claire-element-id="499841"><strong>CBS_DISABLENOSCROLL</strong> : dessine une barre de défilement vertical désactivée quand il n'y a pas assez d'éléments. Sans ce style, la barre verticale n'est pas affichée.</p></li><li id="r-499844" data-claire-element-id="499844"><p id="r-499843" data-claire-element-id="499843"><strong>CBS_DROPDOWN</strong> : similaire à <em>CBS_SIMPLE</em>, sauf que la liste n'est pas affichée tant que l'utilisateur ne clique pas sur le contrôle <em>EDIT</em>.</p></li><li id="r-499846" data-claire-element-id="499846"><p id="r-499845" data-claire-element-id="499845"><strong>CBS_DROPDOWNLIST</strong> : similaire à <em>CBS_DROPDOWN</em>, sauf que le contrôle <em>EDIT</em> ne peut pas être modifié, et affiche le texte de l'élément sélectionné (ou rien si aucun élément n'est sélectionné).</p></li><li id="r-499848" data-claire-element-id="499848"><p id="r-499847" data-claire-element-id="499847"><strong>CBS_HASSTRINGS</strong> : spécifie une <em>COMBOBOX</em> dessinée par l'utilisateur, contenant des chaînes de caractères.</p></li><li id="r-499850" data-claire-element-id="499850"><p id="r-499849" data-claire-element-id="499849"><strong>CBS_LOWERCASE</strong> : convertit en minuscules tous les textes.</p></li><li id="r-499852" data-claire-element-id="499852"><p id="r-499851" data-claire-element-id="499851"><strong>CBS_NOINTEGRALHEIGHT</strong> : spécifie que la taille de la <em>COMBOBOX</em> soit exactement celle spécifiée par l'application, au lieu d'arrondir pour n'afficher que des éléments entiers.</p></li><li id="r-499854" data-claire-element-id="499854"><p id="r-499853" data-claire-element-id="499853"><strong>CBS_OEMCONVERT</strong> : convertit le texte entré dans le <em>EDIT</em> vers le set de caractères OEM, puis reconvertit vers le set de caractères Windows.</p></li><li id="r-499856" data-claire-element-id="499856"><p id="r-499855" data-claire-element-id="499855"><strong>CBS_OWNERDRAWFIXED</strong> : spécifie une <em>COMBOBOX</em> dessinée par l'utilisateur : tous les éléments ont la même hauteur</p></li><li id="r-499858" data-claire-element-id="499858"><p id="r-499857" data-claire-element-id="499857"><strong>CBS_OWNERDRAWVARIABLE</strong> : spécifie une <em>COMBOBOX</em> dessinée par l'utilisateur : tous les éléments n'ont pas la même hauteur.</p></li><li id="r-499860" data-claire-element-id="499860"><p id="r-499859" data-claire-element-id="499859"><strong>CBS_SIMPLE</strong> : affiche une liste en permanence, et pas seulement quand l'utilisateur clique dessus. La sélection est affichée dans le <em>EDIT</em>.</p></li><li id="r-499862" data-claire-element-id="499862"><p id="r-499861" data-claire-element-id="499861"><strong>CBS_SORT</strong> : trie automatiquement les chaînes de caractères.</p></li><li id="r-499864" data-claire-element-id="499864"><p id="r-499863" data-claire-element-id="499863"><strong>CBS_UPPERCASE</strong> : convertit automatiquement en majuscules les caractères.</p></li></ul><h5 id="r-notifications-2" data-claire-element-id="499887">Notifications</h5><h6 id="r-cbn-closeup" data-claire-element-id="499868">CBN_CLOSEUP</h6><p id="r-499867" data-claire-element-id="499867">Cette notification est envoyée lorsque la liste déroulante a été fermée.</p><h6 id="r-cbn-dblclk" data-claire-element-id="499870">CBN_DBLCLK</h6><p id="r-499869" data-claire-element-id="499869">Cette notification est envoyée lorsque l'utilisateur double-clique sur un élément de la liste.</p><h6 id="r-cbn-dropdown" data-claire-element-id="499872">CBN_DROPDOWN</h6><p id="r-499871" data-claire-element-id="499871">Cette notification est envoyée lorsque la liste déroulante a été ouverte.</p><h6 id="r-cbn-editchange" data-claire-element-id="499876">CBN_EDITCHANGE</h6><p id="r-499873" data-claire-element-id="499873">Cette notification est envoyée lorsque le texte (ou une portion de texte) de l'<em>EDIT</em> a été modifié (soit parce que l'utilisateur a sélectionné un élément, soit parce qu'il a entré du texte).</p><aside id="r-499875" data-claire-element-id="499875" data-claire-semantic="information"><p id="r-499874" data-claire-element-id="499874">Cette notification est envoyée <strong>après</strong> que le contrôle ait été redessiné.</p></aside><h6 id="r-cbn-editupdate" data-claire-element-id="499880">CBN_EDITUPDATE</h6><p id="r-499877" data-claire-element-id="499877">Cette notification est envoyée lorsque le texte (ou une portion de texte) de l'<em>EDIT</em> a été modifié (soit parce que l'utilisateur a sélectionné un élément, soit parce qu'il a entré du texte).</p><aside id="r-499879" data-claire-element-id="499879" data-claire-semantic="information"><p id="r-499878" data-claire-element-id="499878">Cette notification est envoyée <strong>avant</strong> que le contrôle ait été redessiné.</p></aside><h6 id="r-cbn-selchange" data-claire-element-id="499882">CBN_SELCHANGE</h6><p id="r-499881" data-claire-element-id="499881">Cette notification est envoyée lorsque la sélection en cours de la liste a changé.</p><h6 id="r-cbn-selendcancel" data-claire-element-id="499884">CBN_SELENDCANCEL</h6><p id="r-499883" data-claire-element-id="499883">Cette notification est envoyée lorsque l'utilisateur clique sur un élément, puis clique sur un autre contrôle, annulant alors la sélection.</p><h6 id="r-cbn-selendok" data-claire-element-id="499886">CBN_SELENDOK</h6><p id="r-499885" data-claire-element-id="499885">Cette notification est envoyée lorsque l'utilisateur clique sur un élément, puis ferme la liste, acceptant alors la sélection.</p><h5 id="r-messages-2" data-claire-element-id="500037">Messages</h5><p id="r-499888" data-claire-element-id="499888">Ces messages peuvent être envoyés au contrôle avec la fonction :</p><pre id="r-499889" data-claire-element-id="499889"><code data-claire-semantic="c">SendMessage(hCtl,iCode,wParam,lParam)</code></pre><p id="r-499890" data-claire-element-id="499890">Pour chaque message, je décrirai le rôle et la signification de <em>wParam</em> et <em>lParam</em> et de la valeur retournée.</p><h6 id="r-cb-addstring" data-claire-element-id="499899">CB_ADDSTRING</h6><p id="r-499891" data-claire-element-id="499891">Ajoute un élément à la liste (une chaîne de caractères).</p><ul id="r-499898" data-claire-element-id="499898"><li id="r-499893" data-claire-element-id="499893"><p id="r-499892" data-claire-element-id="499892"><em>wParam</em> : 0.</p></li><li id="r-499895" data-claire-element-id="499895"><p id="r-499894" data-claire-element-id="499894"><em>lParam</em> : pointeur vers la chaîne de caractères.</p></li><li id="r-499897" data-claire-element-id="499897"><p id="r-499896" data-claire-element-id="499896">Valeur de retour : index de l'élément ajouté (relatif à 0).</p></li></ul><h6 id="r-cb-deletestring" data-claire-element-id="499908">CB_DELETESTRING</h6><p id="r-499900" data-claire-element-id="499900">Supprime un élément de la liste (une chaîne de caractères).</p><ul id="r-499907" data-claire-element-id="499907"><li id="r-499902" data-claire-element-id="499902"><p id="r-499901" data-claire-element-id="499901"><em>wParam</em> : index de l'élément (relatif à 0).</p></li><li id="r-499904" data-claire-element-id="499904"><p id="r-499903" data-claire-element-id="499903"><em>lParam</em> : 0.</p></li><li id="r-499906" data-claire-element-id="499906"><p id="r-499905" data-claire-element-id="499905">Valeur de retour : le nombre d'éléments restants dans la liste, ou <em>CB_ERR</em> en cas d'erreur.</p></li></ul><h6 id="r-cb-findstring" data-claire-element-id="499917">CB_FINDSTRING</h6><p id="r-499909" data-claire-element-id="499909">Ce message permet de rechercher un élément qui commence par une chaîne de caractères spécifiée.</p><ul id="r-499916" data-claire-element-id="499916"><li id="r-499911" data-claire-element-id="499911"><p id="r-499910" data-claire-element-id="499910"><em>wParam</em> : spécifie l'index du précédent élément trouvé (relatif à 0), ou -1 pour commencer du début.</p></li><li id="r-499913" data-claire-element-id="499913"><p id="r-499912" data-claire-element-id="499912"><em>lParam</em> : pointeur sur une chaîne de caractères qui contient les caractères à rechercher.</p></li><li id="r-499915" data-claire-element-id="499915"><p id="r-499914" data-claire-element-id="499914">Valeur de retour : index (relatif à 0) de l'élément trouvé, ou <em>CB_ERR</em> si aucun.</p></li></ul><h6 id="r-cb-findstringexact" data-claire-element-id="499926">CB_FINDSTRINGEXACT</h6><p id="r-499918" data-claire-element-id="499918">Ce message permet de rechercher une chaîne de caractères qui correspond <strong>exactement</strong> à celle spécifiée.</p><ul id="r-499925" data-claire-element-id="499925"><li id="r-499920" data-claire-element-id="499920"><p id="r-499919" data-claire-element-id="499919"><em>wParam</em> : spécifie l'index du précédent élément trouvé (relatif à 0), ou -1 pour commencer du début.</p></li><li id="r-499922" data-claire-element-id="499922"><p id="r-499921" data-claire-element-id="499921"><em>lParam</em> : pointeur sur la chaîne de caractères à rechercher.</p></li><li id="r-499924" data-claire-element-id="499924"><p id="r-499923" data-claire-element-id="499923">Valeur de retour : index (relatif à 0) de l'élément trouvé, ou <em>CB_ERR</em> si aucun.</p></li></ul><h6 id="r-cb-getcount" data-claire-element-id="499935">CB_GETCOUNT</h6><p id="r-499927" data-claire-element-id="499927">Ce message permet de connaître le nombre d'éléments qu'il y a dans la liste.</p><ul id="r-499934" data-claire-element-id="499934"><li id="r-499929" data-claire-element-id="499929"><p id="r-499928" data-claire-element-id="499928"><em>wParam</em> : 0.</p></li><li id="r-499931" data-claire-element-id="499931"><p id="r-499930" data-claire-element-id="499930"><em>lParam</em> : 0.</p></li><li id="r-499933" data-claire-element-id="499933"><p id="r-499932" data-claire-element-id="499932">Valeur de retour : le nombre d'éléments, ou <em>CB_ERR</em> en cas d'erreur</p></li></ul><h6 id="r-cb-getcursel" data-claire-element-id="499944">CB_GETCURSEL</h6><p id="r-499936" data-claire-element-id="499936">Ce message permet de connaître l'index de l'élément sélectionné.</p><ul id="r-499943" data-claire-element-id="499943"><li id="r-499938" data-claire-element-id="499938"><p id="r-499937" data-claire-element-id="499937"><em>wParam</em> : 0.</p></li><li id="r-499940" data-claire-element-id="499940"><p id="r-499939" data-claire-element-id="499939"><em>lParam</em> : 0.</p></li><li id="r-499942" data-claire-element-id="499942"><p id="r-499941" data-claire-element-id="499941">Valeur de retour : index de l'élément sélectionné (relatif à 0), ou <em>CB_ERR</em> si aucun.</p></li></ul><h6 id="r-cb-getdroppedstate" data-claire-element-id="499953">CB_GETDROPPEDSTATE</h6><p id="r-499945" data-claire-element-id="499945">Ce message permet de savoir si la liste est déroulée ou non.</p><ul id="r-499952" data-claire-element-id="499952"><li id="r-499947" data-claire-element-id="499947"><p id="r-499946" data-claire-element-id="499946"><em>wParam</em> : 0.</p></li><li id="r-499949" data-claire-element-id="499949"><p id="r-499948" data-claire-element-id="499948"><em>lParam</em> : 0.</p></li><li id="r-499951" data-claire-element-id="499951"><p id="r-499950" data-claire-element-id="499950">Valeur de retour : <em>TRUE</em> si elle déroulée, et <em>FALSE</em> sinon.</p></li></ul><h6 id="r-cb-getitemdata" data-claire-element-id="499962">CB_GETITEMDATA</h6><p id="r-499954" data-claire-element-id="499954">Ce message permet de récupérer la valeur associée à un élément de la liste par le message <em>CB_SETITEMDATA</em>.</p><ul id="r-499961" data-claire-element-id="499961"><li id="r-499956" data-claire-element-id="499956"><p id="r-499955" data-claire-element-id="499955"><em>wParam</em> : index de l'élément (relatif à 0).</p></li><li id="r-499958" data-claire-element-id="499958"><p id="r-499957" data-claire-element-id="499957"><em>lParam</em> : 0.</p></li><li id="r-499960" data-claire-element-id="499960"><p id="r-499959" data-claire-element-id="499959">Valeur de retour : valeur associée, ou <em>CB_ERR</em> en cas d'erreur.</p></li></ul><h6 id="r-cb-getlbtext" data-claire-element-id="499973">CB_GETLBTEXT</h6><p id="r-499963" data-claire-element-id="499963">Ce message permet de récupérer le texte d'un élément.</p><ul id="r-499970" data-claire-element-id="499970"><li id="r-499965" data-claire-element-id="499965"><p id="r-499964" data-claire-element-id="499964"><em>wParam</em> : index de l'élément (relatif à 0).</p></li><li id="r-499967" data-claire-element-id="499967"><p id="r-499966" data-claire-element-id="499966"><em>lParam</em> : pointeur vers la chaîne de caractères qui reçoit le texte.</p></li><li id="r-499969" data-claire-element-id="499969"><p id="r-499968" data-claire-element-id="499968">Valeur de retour : longueur du texte (sans le caractère nul), ou <em>CB_ERR</em> en cas d'erreur.</p></li></ul><aside id="r-499972" data-claire-element-id="499972" data-claire-semantic="information"><p id="r-499971" data-claire-element-id="499971">Utilisez le message <em>CB_GETLBTEXTLEN</em> pour récupérer la longueur du texte, et ainsi éviter les débordements.</p></aside><h6 id="r-cb-getlbtextlen" data-claire-element-id="499982">CB_GETLBTEXTLEN</h6><p id="r-499974" data-claire-element-id="499974">Ce message permet de récupérer la longueur du texte d'un élément.</p><ul id="r-499981" data-claire-element-id="499981"><li id="r-499976" data-claire-element-id="499976"><p id="r-499975" data-claire-element-id="499975"><em>wParam</em> : index de l'élément (relatif à 0).</p></li><li id="r-499978" data-claire-element-id="499978"><p id="r-499977" data-claire-element-id="499977"><em>lParam</em> : 0.</p></li><li id="r-499980" data-claire-element-id="499980"><p id="r-499979" data-claire-element-id="499979">Valeur de retour : longueur du texte (sans le caractère nul), ou <em>CB_ERR</em> en cas d'erreur.</p></li></ul><h6 id="r-cb-insertstring" data-claire-element-id="499991">CB_INSERTSTRING</h6><p id="r-499983" data-claire-element-id="499983">Ce message permet d'insérer une chaîne de caractères dans la liste.</p><ul id="r-499990" data-claire-element-id="499990"><li id="r-499985" data-claire-element-id="499985"><p id="r-499984" data-claire-element-id="499984"><em>wParam</em> : index de la position à laquelle insérer la chaîne, ou -1 pour l'ajouter à la fin de la liste.</p></li><li id="r-499987" data-claire-element-id="499987"><p id="r-499986" data-claire-element-id="499986"><em>lParam</em> : pointeur vers la chaîne de caractères.</p></li><li id="r-499989" data-claire-element-id="499989"><p id="r-499988" data-claire-element-id="499988">Valeur de retour : index de l'élément inséré, ou <em>CB_ERR/CB_ERRSPACE</em> en cas d'erreur.</p></li></ul><h6 id="r-cb-limittext" data-claire-element-id="500000">CB_LIMITTEXT</h6><p id="r-499992" data-claire-element-id="499992">Ce message permet de limiter le texte écrit par l'utilisateur dans le contrôle <em>EDIT</em>.</p><ul id="r-499999" data-claire-element-id="499999"><li id="r-499994" data-claire-element-id="499994"><p id="r-499993" data-claire-element-id="499993"><em>wParam</em> : nombre maximum de caractères (caractère nul non compris).</p></li><li id="r-499996" data-claire-element-id="499996"><p id="r-499995" data-claire-element-id="499995"><em>lParam</em> : 0.</p></li><li id="r-499998" data-claire-element-id="499998"><p id="r-499997" data-claire-element-id="499997">Valeur de retour : <em>TRUE</em></p></li></ul><h6 id="r-cb-resetcontent" data-claire-element-id="500009">CB_RESETCONTENT</h6><p id="r-500001" data-claire-element-id="500001">Ce message permet de supprimer tous les éléments de la liste.</p><ul id="r-500008" data-claire-element-id="500008"><li id="r-500003" data-claire-element-id="500003"><p id="r-500002" data-claire-element-id="500002"><em>wParam</em> : 0.</p></li><li id="r-500005" data-claire-element-id="500005"><p id="r-500004" data-claire-element-id="500004"><em>lParam</em> : 0.</p></li><li id="r-500007" data-claire-element-id="500007"><p id="r-500006" data-claire-element-id="500006">Valeur de retour : <em>CB_OKAY</em></p></li></ul><h6 id="r-cb-setcursel" data-claire-element-id="500018">CB_SETCURSEL</h6><p id="r-500010" data-claire-element-id="500010">Ce message permet de définir l'élément sélectionné.</p><ul id="r-500017" data-claire-element-id="500017"><li id="r-500012" data-claire-element-id="500012"><p id="r-500011" data-claire-element-id="500011"><em>wParam</em> : index de l'élément (relatif à 0), ou -1 pour n'en sélectionner aucun et effacer le contrôle <em>EDIT</em>.</p></li><li id="r-500014" data-claire-element-id="500014"><p id="r-500013" data-claire-element-id="500013"><em>lParam</em> : 0.</p></li><li id="r-500016" data-claire-element-id="500016"><p id="r-500015" data-claire-element-id="500015">Valeur de retour : index de l'élément sélectionné, ou <em>CB_ERR</em> en cas d'erreur.</p></li></ul><h6 id="r-cb-setitemdata" data-claire-element-id="500027">CB_SETITEMDATA</h6><p id="r-500019" data-claire-element-id="500019">Ce message permet d'associer une valeur à un élément de la liste.</p><ul id="r-500026" data-claire-element-id="500026"><li id="r-500021" data-claire-element-id="500021"><p id="r-500020" data-claire-element-id="500020"><em>wParam</em> : index de l'élément (relatif à 0).</p></li><li id="r-500023" data-claire-element-id="500023"><p id="r-500022" data-claire-element-id="500022"><em>lParam</em> : valeur à associer.</p></li><li id="r-500025" data-claire-element-id="500025"><p id="r-500024" data-claire-element-id="500024">Valeur de retour : <em>CB_ERR</em> en cas d'erreur.</p></li></ul><h6 id="r-cb-showdropdown" data-claire-element-id="500036">CB_SHOWDROPDOWN</h6><p id="r-500028" data-claire-element-id="500028">Ce message permet de montrer où cacher la liste.</p><ul id="r-500035" data-claire-element-id="500035"><li id="r-500030" data-claire-element-id="500030"><p id="r-500029" data-claire-element-id="500029"><em>wParam</em> : <em>TRUE</em> pour afficher la liste, et <em>FALSE</em> pour la cacher.</p></li><li id="r-500032" data-claire-element-id="500032"><p id="r-500031" data-claire-element-id="500031"><em>lParam</em> : 0.</p></li><li id="r-500034" data-claire-element-id="500034"><p id="r-500033" data-claire-element-id="500033">Valeur de retour : <em>TRUE</em></p></li></ul><h5 id="r-exemple-141" data-claire-element-id="500041">Exemple</h5><p id="r-500038" data-claire-element-id="500038">Ceci est le code complet d'un exemple utilisant la <em>combobox</em> :</p><pre id="r-500039" data-claire-element-id="500039"><code data-claire-semantic="c">#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;

HINSTANCE instance;

#define ID_COMBOBOX_1       110
#define ID_BUTTON_1         111
#define ID_BUTTON_2         112
#define ID_EDIT_1           113

HWND hComboBox1;
HWND hEdit1;

VOID RemplieFenetrePrincipale(HWND fenetrePrincipale)
{
    hComboBox1=CreateWindow(
        &quot;COMBOBOX&quot;,
        &quot;&quot;,
        WS_CHILD|WS_VISIBLE|CBS_DISABLENOSCROLL|CBS_DROPDOWNLIST,
        10,10,
        180,150,
        fenetrePrincipale,
        (HMENU)ID_COMBOBOX_1,
        instance,
        NULL);

     hEdit1=CreateWindow(
        &quot;EDIT&quot;,
        &quot;Entrez le texte à ajouter&quot;,
        WS_CHILD|WS_VISIBLE|ES_AUTOHSCROLL|WS_BORDER,
        10,40,
        180,20,
        fenetrePrincipale,
        (HMENU)ID_EDIT_1,
        instance,
        NULL);

    CreateWindow(
        &quot;BUTTON&quot;,
        &quot;Ajouter&quot;,
        WS_CHILD|WS_VISIBLE|BS_PUSHBUTTON,
        10,70,
        70,20,
        fenetrePrincipale,
        (HMENU)ID_BUTTON_1,
        instance,
        NULL);

    CreateWindow(
        &quot;BUTTON&quot;,
        &quot;Supprimer&quot;,
        WS_CHILD|WS_VISIBLE|BS_PUSHBUTTON,
        90,70,
        70,20,
        fenetrePrincipale,
        (HMENU)ID_BUTTON_2,
        instance,
        NULL);
}

VOID NotificationControle(HWND fenetrePrincipale,UINT message,WPARAM wParam, LPARAM lParam)
{
    UINT iId=LOWORD(wParam);
    UINT iCode=HIWORD(wParam);
    HWND hCtl=(HWND)lParam;

   if(iId==ID_COMBOBOX_1)
   {

   }
   else if(iId==ID_BUTTON_1)
   {
        CHAR lpText[256];
        GetWindowText(hEdit1,lpText,256);

        SendMessage(hComboBox1,CB_ADDSTRING,0,(LPARAM)lpText);
   }
   else if(iId==ID_BUTTON_2)
   {
       LRESULT lRes=SendMessage(hComboBox1,CB_GETCURSEL,0,0);
       if(lRes==CB_ERR)
       {
           MessageBox(fenetrePrincipale,&quot;Aucun élément sélectionné&quot;,&quot;Action annulée&quot;,MB_OK);
           return ;
       }

       SendMessage(hComboBox1,CB_DELETESTRING,(WPARAM)lRes,0);
   }
}

LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    static HWND boutons[2] = {NULL};

    switch (message)
    {
        case WM_CREATE:
            RemplieFenetrePrincipale(fenetrePrincipale);
            return 0;
        case WM_COMMAND:
            NotificationControle(fenetrePrincipale,message,wParam,lParam);
            return 0;
        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;
        default:
            return DefWindowProc(fenetrePrincipale,message,wParam,lParam);
    }
}


int APIENTRY WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
             LPSTR lignesDeCommande, int modeDAffichage)
{
    HWND fenetrePrincipale;
    MSG message;
    WNDCLASS classeFenetre;

    instance = cetteInstance;

    classeFenetre.style = CS_DBLCLKS;// pour attraper les double-clics
    classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
    classeFenetre.cbClsExtra = 0;
    classeFenetre.cbWndExtra = 0;
    classeFenetre.hInstance = NULL;
    classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
    classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
    classeFenetre.lpszMenuName = NULL;
    classeFenetre.lpszClassName = &quot;classeF&quot;;

// On prévoit quand même le cas où ça échoue
    if(!RegisterClass(&amp;classeFenetre))
        return FALSE;

    fenetrePrincipale=CreateWindow(
        &quot;classeF&quot;,
        &quot;Ma premiere fenetre winAPI !&quot;,
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,CW_USEDEFAULT,
        210,140,
        NULL,
        NULL,
        cetteInstance,
        NULL);

    if (!fenetrePrincipale)
        return FALSE;

    ShowWindow(fenetrePrincipale,modeDAffichage);
    UpdateWindow(fenetrePrincipale);


    while(GetMessage(&amp;message,NULL,0,0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }

    return message.wParam;
}</code></pre><p id="r-500040" data-claire-element-id="500040"><em>Rédacteur : <strong>pamaury</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
<span class="arrow"></span>
<span class="next">Le contrôle d&#039;édition</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
<span class="next">La liste de choix</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lalistedechoix"></a><h2>La liste de choix</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
<span class="arrow"></span>
<span class="next">La liste déroulante</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
<span class="next">La glissière</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-liste-de-choix-1" data-claire-element-id="500294">La liste de choix</h4><p id="r-500043" data-claire-element-id="500043">Une <em>list-Box</em> (liste de choix en français) est un contrôle qui contient une liste d'items que l'utilisateur peut choisir comme dans un menu déroulant. On utilise ce contrôle quand l'application doit présenter une liste de noms, des noms de fichiers par exemple, parmi lesquels l'utilisateur fait un choix. Il sélectionne une chaîne en cliquant dessus. La sélection est en surbrillance, et une notification est envoyée à la fenêtre parent.</p><figure id="r-500045" data-claire-element-id="500046"><img id="r-500044" data-claire-element-id="500044" src="medias/uploads.siteduzero.com_files_16001_17000_16358.jpg" alt="Image utilisateur"/></figure><h5 id="r-creation-29" data-claire-element-id="500083">Création</h5><p id="r-500047" data-claire-element-id="500047">Pour créer une <em>list-box</em>, il faut appeler <em>CreateWindow</em> en spécifiant &quot;LISTBOX&quot; dans la classe. Ou bien dans un fichier ressource, on écrira par exemple :</p><pre id="r-500048" data-claire-element-id="500048"><code data-claire-semantic="c">CONTROL &quot;&quot;, ID_NOMDELALISTBOX, &quot;LISTBOX&quot;, WS_CHILD | WS_VISIBLE, x, y, largeur, hauteur</code></pre><aside id="r-500050" data-claire-element-id="500050" data-claire-semantic="information"><p id="r-500049" data-claire-element-id="500049">Vous pouvez aussi utiliser le mot-clé <strong>LISTBOX</strong>.</p></aside><p id="r-500051" data-claire-element-id="500051">Néanmoins, cela ne suffit pas, car comme vous vous en doutez, nous avons plusieurs possibilités pour créer notre contrôle. Ce qui va nous intéresser est donc l'attribut de style. En plus de spécifier les styles habituels (<em>WM_CHILD,WM_VISIBLE</em>), vous pouvez spécifier un ou plusieurs de ces styles spécifiques qui commencent tous par &quot;LSB_&quot;:</p><ul id="r-500082" data-claire-element-id="500082"><li id="r-500053" data-claire-element-id="500053"><p id="r-500052" data-claire-element-id="500052"><strong>LBS_COMBOBOX</strong> : notifie à la <em>list-box</em> qu'elle fait partie d'une <em>combo-box</em> (contrôle formé par la réunion d'une <em>list-box</em> et d'un contrôle d'édition). Ceci permet la coordination entre les deux contrôles, de telle sorte qu'ils présentent une interface utilisateur unifiée (UI). La <em>combo-box</em> doit définir ce style. Si ce style est spécifié par la <em>list-box</em>, une erreur en résultera.</p></li><li id="r-500055" data-claire-element-id="500055"><p id="r-500054" data-claire-element-id="500054"><strong>LBS_DISABLENOSCROLL</strong>: affiche une barre verticale de défilement, désactivée quand la boîte ne contient pas assez d'items pour les faire défiler. Si vous ne définissez pas ce style, la barre de défilement sera cachée quand la <em>list-box</em> ne contiendra pas assez d'éléments.</p></li><li id="r-500057" data-claire-element-id="500057"><p id="r-500056" data-claire-element-id="500056"><strong>LBS_EXTENDEDSEL </strong> : permet la sélection de plusieurs items, en utilisant la touche <em>SHIFT</em> et la souris, ou une combinaison de touches particulières.</p></li><li id="r-500059" data-claire-element-id="500059"><p id="r-500058" data-claire-element-id="500058"><strong>LBS_HASSTRINGS </strong> : spécifie que la <em>list-box</em> contient des items constitués de chaînes de caractères. La <em>list-box</em> conserve la mémoire et les adresses des chaînes de caractères. Ainsi, l'application peut utiliser le message <em>MB_GETTEXT</em> pour rechercher le texte pour un item particulier. Par défaut, toutes les <em>list-box</em> ont ce style, à l'exception des <em>list-box</em> qui se redessinent elles-mêmes. Vous pouvez créer une <em>list-box</em> qui se redessine soit avec ce style, soit sans ce style.</p></li><li id="r-500061" data-claire-element-id="500061"><p id="r-500060" data-claire-element-id="500060"><strong>LBS_MULTICOLUMN </strong> : définit une <em>list-box</em> multi-colonnes qui défile horizontalement. Le message <em>LB_SETCOLUMNWIDTH</em> définit la largeur des colonnes.</p></li><li id="r-500063" data-claire-element-id="500063"><p id="r-500062" data-claire-element-id="500062"><strong>LBS_MULTIPLESEL</strong> : une chaîne est sélectionnée à chaque clic. L'utilisateur peut sélectionner plusieurs chaînes.</p></li><li id="r-500065" data-claire-element-id="500065"><p id="r-500064" data-claire-element-id="500064"><strong>LBS_NODATA </strong> : définissez ce style quand le nombre d'items dans la <em>list-box</em> dépasse une centaine. Une <em>list-box no-data</em> doit aussi avoir le style <em>LBS_OWNERDRAWFIXED</em>, mais ne doit pas avoir le style <em>LBS_SORT</em> ou <em>LBS_HASSTRINGS</em>.<br/> Cette <em>list-box</em> ressemble à une <em>list-box</em> qui se redessine, sauf qu'elle ne contient pas de donnée (<em>data</em>), de chaîne ou de <em>bitmap</em> pour un item. Les commandes pour ajouter, insérer, ou supprimer un item ignorent toujours toute donnée spécifique de l'item ; une requête pour trouver une chaîne à l'intérieur de la <em>list-box</em> échoue toujours. Le système envoie le message <em>WM_DRAWITEM</em> à la fenêtre propriétaire quand un item doit être dessiné. Le membre <em>itemID</em> de la structure <em>DRAWITEMSTRUCT</em> passé avec le message <em>WM_DRAWITEM </em> définit le numéro de ligne de l'item à redessiner. Une <em>list-box</em><em>no-data</em> ne peut pas envoyer un message <em>WM_DELEITEM</em>.</p></li><li id="r-500067" data-claire-element-id="500067"><p id="r-500066" data-claire-element-id="500066"><strong>LBS_NOINTEGRALHEIGHT </strong> : définit si la taille de la <em>list-box</em> est exactement la taille spécifiée par l'application quand elle l'a créée. Normalement, le système redimensionne la <em>list-box</em> pour qu'elle n'affiche pas d'item partiellement.</p></li><li id="r-500069" data-claire-element-id="500069"><p id="r-500068" data-claire-element-id="500068"><strong>LBS_NOREDRAW</strong> : spécifie que l'apparence de la <em>list-box</em> n'est pas remise à jour après une modification. Pour changer le mode de mise à jour, utilisez le message <em>WM_SETREDRAW</em>.</p></li><li id="r-500071" data-claire-element-id="500071"><p id="r-500070" data-claire-element-id="500070"><strong>LBS_NOSEL</strong> : spécifie que la <em>list-box</em> contient des items qui peuvent être vus mais pas sélectionnés.</p></li><li id="r-500073" data-claire-element-id="500073"><p id="r-500072" data-claire-element-id="500072"><strong>LBS_NOTIFY </strong> : notifie la fenêtre parent à l'aide d'un message d'entrée chaque fois que l'utilisateur clique ou double-clique sur une chaîne dans la <em>list-box</em>.</p></li><li id="r-500075" data-claire-element-id="500075"><p id="r-500074" data-claire-element-id="500074"><strong>LBS_OWNERDRAWFIXED </strong> : spécifie que le &quot;propriétaire&quot; de la <em>list-box</em> gère la réactualisation de son contenu et veille à ce que les items de la <em>list-box</em> conservent la même hauteur. La fenêtre propriétaire reçoit le message <em>WM_MEASUREITEM</em> quand la <em>list-box</em> est créée, et le message <em>WM_DRAWITEM</em> quand l'aspect visuel de la <em>list-box</em> a changé.</p></li><li id="r-500077" data-claire-element-id="500077"><p id="r-500076" data-claire-element-id="500076"><strong>LBS_OWNERDRAWVARIABLE</strong> : spécifie que le propriétaire de la <em>list-box</em> est responsable de l'actualisation de son contenu, et que les items dans la <em>list-box</em> ont une hauteur variable. La fenêtre propriétaire reçoit le message <em>WM_MEASUREITEM</em> pour chaque item dans une <em>combo-box</em> quand la <em>combo-box</em> est créée, et <em>WM_DRAWITEM</em> quand l'aspect visuel de la <em>combo-box</em> change.</p></li><li id="r-500079" data-claire-element-id="500079"><p id="r-500078" data-claire-element-id="500078"><strong>LBS_SORT</strong> : met les chaînes de la <em>list-box</em> dans l'ordre alphabétique.</p></li><li id="r-500081" data-claire-element-id="500081"><p id="r-500080" data-claire-element-id="500080"><strong>LBS_STANDARD </strong> : met les chaînes de la <em>list-box</em> dans l'ordre alphabétique. La fenêtre parent reçoit un message d'entrée chaque fois que l'utilisateur clique ou double clique sur une chaîne. La <em>list-box</em> a des bords sur tout son pourtour.</p></li></ul><h5 id="r-les-notifications-2" data-claire-element-id="500096">Les notifications</h5><p id="r-500084" data-claire-element-id="500084">L'utilisateur envoie des requêtes d'édition en utilisant le clavier ou la souris. Le système envoie chaque requête à la fenêtre parent du contrôle dans le message <strong>WM_COMMAND</strong>.<br/> J'ai considéré que vous savez comment interagir avec ce message, et je décrirai donc ici uniquement les codes de notification.</p><h6 id="r-lbn-dblclk" data-claire-element-id="500086">LBN_DBLCLK</h6><p id="r-500085" data-claire-element-id="500085">Notification envoyée par la <em>list-box</em> quand l'utilisateur double-clique sur une chaîne dans la <em>list-box</em>.</p><h6 id="r-lbn-selcancel" data-claire-element-id="500088">LBN_SELCANCEL</h6><p id="r-500087" data-claire-element-id="500087">Une application envoie cette notification quand l'utilisateur annule la sélection dans une <em>list-box</em>.</p><h6 id="r-lbn-selchange" data-claire-element-id="500090">LBN_SELCHANGE</h6><p id="r-500089" data-claire-element-id="500089">Une application envoie cette notification quand la sélection dans une <em>list-box</em> vient de changer.</p><h6 id="r-lbn-setfocus" data-claire-element-id="500093">LBN_SETFOCUS</h6><p id="r-500091" data-claire-element-id="500091">Une application envoie cette notification quand la <em>list-box</em> reçoit le <em>focus</em> clavier.</p><p id="r-500092" data-claire-element-id="500092">Parmi les notifications, il existe également des messages de types <em>WM_</em>, qui seront reçus par la procédure de la fenêtre parent.</p><h6 id="r-wm-ctlcolorlistbox" data-claire-element-id="500095">WM_CTLCOLORLISTBOX</h6><p id="r-500094" data-claire-element-id="500094">Ce message est envoyé à la fenêtre parent de la <em>list-box</em> avant que le système ne dessine la <em>list-box</em>. En répondant à ce message, la fenêtre parent peut définir les couleurs du texte et du fond de la <em>list-box</em> en utilisant le dispositif de <em>handle</em> contextuels spécifique.<br/> La <em>list-box</em> sera coloriée avec la brosse retournée par ce message.</p><h5 id="r-les-messages-2" data-claire-element-id="500290">Les messages</h5><p id="r-500097" data-claire-element-id="500097">Ces messages peuvent être envoyés au contrôle avec la fonction :</p><pre id="r-500098" data-claire-element-id="500098"><code data-claire-semantic="c">SendMessage(hCtl,iCode,wParam,lParam)</code></pre><p id="r-500099" data-claire-element-id="500099">Pour chaque message, je décrirai le rôle et la signification de <em>wParam</em>, de <em>lParam</em> et de la valeur retournée.</p><h6 id="r-lb-addfile" data-claire-element-id="500110">LB_ADDFILE</h6><p id="r-500100" data-claire-element-id="500100">L'application envoie ce message pour ajouter le nom de fichier spécifique à la <em>list-box</em> qui contient une liste de répertoires.</p><ul id="r-500109" data-claire-element-id="500109"><li id="r-500102" data-claire-element-id="500102"><p id="r-500101" data-claire-element-id="500101"><em>wparam </em> : 0</p></li><li id="r-500104" data-claire-element-id="500104"><p id="r-500103" data-claire-element-id="500103"><em>lParam </em> : pointeur sur un <em>buffer</em> qui définit le nom du fichier à ajouter.</p></li><li id="r-500106" data-claire-element-id="500106"><p id="r-500105" data-claire-element-id="500105">Valeur retournée : index du fichier ajouté dont la série commence à 0, ou <em>LB_ERR </em>si une erreur survient.</p></li><aside id="r-500108" data-claire-element-id="500108" data-claire-semantic="information"><p id="r-500107" data-claire-element-id="500107">La <em>list-box</em> à laquelle on va ajouter le paramètre <em>lParam</em> doit avoir été remplie à l'aide de la fonction <em>DlgDirList</em>.</p></aside></ul><h6 id="r-lb-addstring" data-claire-element-id="500119">LB_ADDSTRING</h6><p id="r-500111" data-claire-element-id="500111">Une application envoie ce message pour ajouter une chaîne dans la <em>list-box</em>. Si la <em>list-box</em> n'a pas le style <em>LBS_SORT</em>, la chaîne est ajoutée à la fin de la liste. Autrement, la chaîne est insérée dans la liste, et la liste est réorganisée.</p><ul id="r-500118" data-claire-element-id="500118"><li id="r-500113" data-claire-element-id="500113"><p id="r-500112" data-claire-element-id="500112"><em>wparam </em>: 0</p></li><li id="r-500115" data-claire-element-id="500115"><p id="r-500114" data-claire-element-id="500114"><em>lParam </em>: pointeur sur une chaîne terminée par un caractère nul qui sera ajouté.</p></li><li id="r-500117" data-claire-element-id="500117"><p id="r-500116" data-claire-element-id="500116">Valeur retournée : index d'origine 0 de la chaîne dans la <em>list-box</em> signifie que le message a réussi. <em>LB_ERR</em> indique qu'une erreur est survenue. <em>LB_ERRSPACE</em> indique qu'il n'y a pas assez de place pour stocker la nouvelle chaîne.</p></li></ul><h6 id="r-lb-deletestring" data-claire-element-id="500128">LB_DELETESTRING</h6><p id="r-500120" data-claire-element-id="500120">Ce message est envoyé par l'application pour supprimer une chaîne dans la <em>list-box</em>.</p><ul id="r-500127" data-claire-element-id="500127"><li id="r-500122" data-claire-element-id="500122"><p id="r-500121" data-claire-element-id="500121"><em>wparam </em>: index d'origine 0 de la chaîne dans la <em>list-box</em>.</p></li><li id="r-500124" data-claire-element-id="500124"><p id="r-500123" data-claire-element-id="500123"><em>lParam </em>: 0</p></li><li id="r-500126" data-claire-element-id="500126"><p id="r-500125" data-claire-element-id="500125">Valeur retournée : le nombre de chaînes supprimées dans la liste signifie que l'opération a réussi. <em>LB_ERR</em> indique que l'index spécifié est un index supérieur au nombre d'items de la liste.</p></li></ul><h6 id="r-lb-findstring" data-claire-element-id="500137">LB_FINDSTRING</h6><p id="r-500129" data-claire-element-id="500129">Ce message est envoyé par l'application pour trouver la première chaîne dans la <em>list-Box</em> contenant le préfixe précisé.</p><ul id="r-500136" data-claire-element-id="500136"><li id="r-500131" data-claire-element-id="500131"><p id="r-500130" data-claire-element-id="500130"><em>wparam </em>: index, faisant partie d'une suite commençant par zéro, de l'item placé avant le premier item recherché. Quand la recherche atteint la fin de la liste, elle se poursuit en revenant au début de la <em>list-box</em> jusqu'à l'item spécifié par le paramètre d'index de départ. Si l'index de départ est -1, la recherche va du début à la fin de la <em>list-box</em>.</p></li><li id="r-500133" data-claire-element-id="500133"><p id="r-500132" data-claire-element-id="500132">lParam : pointeur sur une chaîne à terminaison nulle qui contient le préfixe recherché. La recherche est indépendante de la case ; ainsi, cette chaîne peut contenir n'importe quelle combinaison de lettres majuscules ou minuscules.</p></li><li id="r-500135" data-claire-element-id="500135"><p id="r-500134" data-claire-element-id="500134">Valeur retournée : si c'est l'index de l'item associé, le message a réussi. <em>LB_ERR</em> indique que la recherche est infructueuse.</p></li></ul><h6 id="r-lb-findstringexact" data-claire-element-id="500146">LB_FINDSTRINGEXACT</h6><p id="r-500138" data-claire-element-id="500138">Ce message est envoyé par une application pour trouver la première chaîne associée à la chaîne précisée dans le paramètre <em>lParam</em>.</p><ul id="r-500145" data-claire-element-id="500145"><li id="r-500140" data-claire-element-id="500140"><p id="r-500139" data-claire-element-id="500139"><em>wparam </em>: index (série d'origine 0) de l'item situé avant le premier item où commence la recherche. Quand la recherche atteint la fin de la liste, elle se poursuit en revenant au début de la <em>list-box</em> jusqu'à l'item spécifié par le paramètre d'index de départ. Si l'index de départ est -1, la recherche va du début à la fin de la <em>list-box</em>.</p></li><li id="r-500142" data-claire-element-id="500142"><p id="r-500141" data-claire-element-id="500141"><em>lParam </em>: pointeur sur une chaîne à terminaison nulle contenant le nom complet du fichier recherché avec son extension. La recherche est indépendante de la case ; ainsi, cette chaîne peut contenir n'importe quelle combinaison de lettres majuscules ou minuscules.</p></li><li id="r-500144" data-claire-element-id="500144"><p id="r-500143" data-claire-element-id="500143">Valeur retournée : si c'est l'index de l'item associé, le message a réussi. <em>LB_ERR</em> indique que la recherche est infructueuse.</p></li></ul><h6 id="r-lb-getcaretindex" data-claire-element-id="500155">LB_GETCARETINDEX</h6><p id="r-500147" data-claire-element-id="500147">Ce message est envoyé par une application pour déterminer l'index de l'item ayant le <em>focus</em> dans une list-box à sélection multiple. L'item peut ou ne peut pas être sélectionné.</p><ul id="r-500154" data-claire-element-id="500154"><li id="r-500149" data-claire-element-id="500149"><p id="r-500148" data-claire-element-id="500148"><em>wparam </em>: 0</p></li><li id="r-500151" data-claire-element-id="500151"><p id="r-500150" data-claire-element-id="500150"><em>lParam </em>: 0</p></li><li id="r-500153" data-claire-element-id="500153"><p id="r-500152" data-claire-element-id="500152">Valeur retournée : index de l'item de la <em>list-box</em> ayant le <em>focus</em>. Si la <em>list-box</em> est une <em>list-box</em> à sélection unique, la valeur est l'index de l'item sélectionné, s'il y en a un.</p></li></ul><h6 id="r-lb-getcount" data-claire-element-id="500164">LB_GETCOUNT</h6><p id="r-500156" data-claire-element-id="500156">Ce message est envoyé par l'application pour rechercher le nombre d'items qu'il y a dans une <em>list-box</em>.</p><ul id="r-500163" data-claire-element-id="500163"><li id="r-500158" data-claire-element-id="500158"><p id="r-500157" data-claire-element-id="500157"><em>wparam </em>: 0</p></li><li id="r-500160" data-claire-element-id="500160"><p id="r-500159" data-claire-element-id="500159"><em>lParam </em>: 0</p></li><li id="r-500162" data-claire-element-id="500162"><p id="r-500161" data-claire-element-id="500161">Valeur retournée : nombre d'items dans la <em>list-box</em> si le message réussit. <em>LB_ERR</em> indique qu'une erreur s'est produite.</p></li></ul><h6 id="r-lb-getcursel" data-claire-element-id="500175">LB_GETCURSEL</h6><p id="r-500165" data-claire-element-id="500165">Ce message est envoyé par une application pour recherche l'index de l'item sélectionné, s'il y en a un, dans une <em>list-box</em> à sélection unique.</p><ul id="r-500172" data-claire-element-id="500172"><li id="r-500167" data-claire-element-id="500167"><p id="r-500166" data-claire-element-id="500166"><em>wparam </em>: 0</p></li><li id="r-500169" data-claire-element-id="500169"><p id="r-500168" data-claire-element-id="500168"><em>lParam </em>:0</p></li><li id="r-500171" data-claire-element-id="500171"><p id="r-500170" data-claire-element-id="500170">Valeur retournée : dans une <em>list-box</em> à une seule sélection, cette valeur est l'index de l'item sélectionné. S'il n'y a pas de sélection, la valeur retournée est <em>LB_ERR</em>.</p></li></ul><aside id="r-500174" data-claire-element-id="500174" data-claire-semantic="warning"><p id="r-500173" data-claire-element-id="500173">Vous ne devez pas envoyer ce message à une <em>list-box</em> à sélection multiple.</p></aside><h6 id="r-lb-getitemdata" data-claire-element-id="500184">LB_GETITEMDATA</h6><p id="r-500176" data-claire-element-id="500176">Ce message est envoyé par une application pour trouver la valeur 32 bit définie par l'application, et associée à l'item spécifié de la <em>list-box</em>.</p><ul id="r-500183" data-claire-element-id="500183"><li id="r-500178" data-claire-element-id="500178"><p id="r-500177" data-claire-element-id="500177"><em>wparam </em>: index de l'item</p></li><li id="r-500180" data-claire-element-id="500180"><p id="r-500179" data-claire-element-id="500179"><em>lParam </em>: 0</p></li><li id="r-500182" data-claire-element-id="500182"><p id="r-500181" data-claire-element-id="500181">Valeur retournée : valeur 32 bits associée à l'item, ou <em>LB-ERR</em> si une erreur est survenue. Si l'item est dans une <em>list-box</em> avec une auto-remise à jour, et qui a été créée sans le style <em>LBS_HASSTRING</em>, cette valeur 32 bits sera dans le paramètre <em>lParam</em> des messages <em>LB_ADDSTRING</em> ou <em>LB_INSERTSTRING</em>, qui ajoutent un item à la <em>list-box</em>. Autrement, c'est la valeur de <em>lParam</em> du message <em>LB_SETITEMDATA</em>.</p></li></ul><h6 id="r-lb-getitemrect" data-claire-element-id="500193">LB_GETITEMRECT</h6><p id="r-500185" data-claire-element-id="500185">Ce message est envoyé par l'application pour rechercher les dimensions du rectangle qui limite un item de la <em>list-box</em> quand il est normalement affiché dans la <em>list-box</em>.</p><ul id="r-500192" data-claire-element-id="500192"><li id="r-500187" data-claire-element-id="500187"><p id="r-500186" data-claire-element-id="500186"><em>wparam </em>: index de l'item</p></li><li id="r-500189" data-claire-element-id="500189"><p id="r-500188" data-claire-element-id="500188"><em>lParam </em>: pointeur sur une structure <em>RECT</em> qui reçoit les coordonnées clientes de l'item dans la <em>list-box</em>.</p></li><li id="r-500191" data-claire-element-id="500191"><p id="r-500190" data-claire-element-id="500190">Valeur retournée : <em>LB_ERR</em> s'il y a une erreur.</p></li></ul><h6 id="r-lb-getselitems" data-claire-element-id="500202">LB_GETSELITEMS</h6><p id="r-500194" data-claire-element-id="500194">Ce message est envoyé par une application pour remplir un <em>buffer</em> avec un tableau d'entiers (<em>integer</em>) qui définit les numéros des items dans la sélection d'items d'une <em>list-box</em> à sélection multiple.</p><ul id="r-500201" data-claire-element-id="500201"><li id="r-500196" data-claire-element-id="500196"><p id="r-500195" data-claire-element-id="500195"><em>wparam </em>: nombre maximum d'items sélectionnés dont les numéros seront placés dans le <em>buffer</em>.</p></li><li id="r-500198" data-claire-element-id="500198"><p id="r-500197" data-claire-element-id="500197"><em>lParam </em>: pointeur sur le <em>buffer</em> assez grand pour contenir le nombre d'entiers défini dans le paramètre <em>lParam</em>.</p></li><li id="r-500200" data-claire-element-id="500200"><p id="r-500199" data-claire-element-id="500199">Valeur retournée : nombre d'items placés dans le <em>buffer</em>. Si la <em>list-box</em> est à sélection unique, la valeur retournée est <em>LB_ERR</em>. Ce message retourne aussi <em>LB_ERR</em> si vous passez des paramètres invalides à une <em>list-box</em> à sélection multiple.</p></li></ul><h6 id="r-lb-getselcount" data-claire-element-id="500211">LB_GETSELCOUNT</h6><p id="r-500203" data-claire-element-id="500203">Ce message est envoyé par une application pour rechercher le nombre total d'items sélectionnés dans une <em>list-box</em> à sélection multiple.</p><ul id="r-500210" data-claire-element-id="500210"><li id="r-500205" data-claire-element-id="500205"><p id="r-500204" data-claire-element-id="500204"><em>wparam </em>: 0</p></li><li id="r-500207" data-claire-element-id="500207"><p id="r-500206" data-claire-element-id="500206"><em>lParam </em>: 0</p></li><li id="r-500209" data-claire-element-id="500209"><p id="r-500208" data-claire-element-id="500208">Valeur retournée : nombre d'items sélectionnés dans la <em>list-box</em> si le message réussit. <em>LB_ERR </em>si la <em>list-box</em> est à sélection unique.</p></li></ul><h6 id="r-lb-gettext" data-claire-element-id="500220">LB_GETTEXT</h6><p id="r-500212" data-claire-element-id="500212">Ce message est envoyé par une application pour rechercher une chaîne dans une <em>list-box</em>.</p><ul id="r-500219" data-claire-element-id="500219"><li id="r-500214" data-claire-element-id="500214"><p id="r-500213" data-claire-element-id="500213"><em>wparam </em>: index de la chaîne cherchée.</p></li><li id="r-500216" data-claire-element-id="500216"><p id="r-500215" data-claire-element-id="500215"><em>lParam </em>: pointeur sur un <em>buffer</em> qui reçoit la chaîne. Le <em>buffer</em> doit avoir une taille suffisante pour contenir la chaîne avec un caractère nul de terminaison. Un message <em>LB_GETTEXTLEN</em> peut être envoyé après <em>LB_GETTEXT</em> pour rechercher la longueur, en caractères, de la chaîne.</p></li><li id="r-500218" data-claire-element-id="500218"><p id="r-500217" data-claire-element-id="500217">Valeur retournée : longueur de la chaîne, en caractères sans le caractère nul de terminaison si le message réussit. <em>LB_ERR</em> indique que l'index n'est pas un index valide.</p></li></ul><h6 id="r-lb-gettextlen" data-claire-element-id="500231">LB_GETTEXTLEN</h6><p id="r-500221" data-claire-element-id="500221">Une application envoie le message <em>LB_GETTEXTLEN</em> pour retrouver la longueur d'une chaîne dans la <em>list-box</em>.</p><ul id="r-500230" data-claire-element-id="500230"><li id="r-500223" data-claire-element-id="500223"><p id="r-500222" data-claire-element-id="500222"><em>wparam </em>: index (origine 0) de la chaîne.</p></li><li id="r-500225" data-claire-element-id="500225"><p id="r-500224" data-claire-element-id="500224"><em>lParam </em>: 0</p></li><li id="r-500227" data-claire-element-id="500227"><p id="r-500226" data-claire-element-id="500226">Valeur retournée : longueur de la chaîne, en <em>CHAR</em>, en excluant le caractère nul terminal. Sous certaines conditions, cette valeur peut être supérieure à la longueur du texte. <br/> Si <em>wParam</em> ne définit pas un index valide, cette valeur est <em>LB_ERR</em>.</p></li><aside id="r-500229" data-claire-element-id="500229" data-claire-semantic="information"><p id="r-500228" data-claire-element-id="500228">Pour obtenir à tous les coups l'exacte longueur d'un texte, utilisez les messages <em>WM_GETTEXT</em>, <em>LB_GETTEXT</em>, ou <em>CB_GETLBTEXT</em> , ou la fonction <em>GetWindowText</em>.</p></aside></ul><h6 id="r-lb-insertstring" data-claire-element-id="500240">LB_INSERTSTRING</h6><p id="r-500232" data-claire-element-id="500232">Une application envoie ce message pour insérer une chaîne dans une <em>list-box</em>. Différemment du message <em>LB_ADDSTING</em>, ce message ne produit pas de liste que l'on pourrait trier avec le style <em>LBS_SORT</em>.</p><ul id="r-500239" data-claire-element-id="500239"><li id="r-500234" data-claire-element-id="500234"><p id="r-500233" data-claire-element-id="500233"><em>wparam </em>: définit l'index (d'origine 0) de la position où il faut insérer l'item. Si ce paramètre est 1, la chaîne sera ajoutée à la fin de la liste.</p></li><li id="r-500236" data-claire-element-id="500236"><p id="r-500235" data-claire-element-id="500235"><em>lParam </em>: pointeur sur la chaîne à terminaison nulle que l'on veut insérer.</p></li><li id="r-500238" data-claire-element-id="500238"><p id="r-500237" data-claire-element-id="500237">Valeur retournée : index de la position à laquelle la chaîne doit être insérée. Si une erreur survient, la valeur retournée est <em>LB_ERR</em>. S'il n'y a pas assez de place pour stocker la nouvelle chaîne, la valeur retournée sera <em>LB_ERRSPACE</em>.</p></li></ul><h6 id="r-lb-resetcontent" data-claire-element-id="500249">LB_RESETCONTENT</h6><p id="r-500241" data-claire-element-id="500241">L'application envoie ce message pour supprimer tous les items d'une <em>list-box</em>.</p><ul id="r-500248" data-claire-element-id="500248"><li id="r-500243" data-claire-element-id="500243"><p id="r-500242" data-claire-element-id="500242"><em>wparam </em>: 0</p></li><li id="r-500245" data-claire-element-id="500245"><p id="r-500244" data-claire-element-id="500244"><em>lParam </em>: 0</p></li><li id="r-500247" data-claire-element-id="500247"><p id="r-500246" data-claire-element-id="500246">Valeur retournée : ne retourne pas de valeur.</p></li></ul><h6 id="r-lb-setcursel" data-claire-element-id="500260">LB_SETCURSEL</h6><p id="r-500250" data-claire-element-id="500250">Une application envoie ce message pour sélectionner une chaîne et la faire apparaître en la faisant défiler dans la zone visible, si nécessaire. Quand la nouvelle chaîne est sélectionnée, la <em>list-box</em> supprime la surbrillance de la chaîne sélectionnée préalablement.</p><ul id="r-500257" data-claire-element-id="500257"><li id="r-500252" data-claire-element-id="500252"><p id="r-500251" data-claire-element-id="500251"><em>wparam </em>: définit l'index (d'origine 0) de la chaîne sélectionnée. Si ce paramètre est -1, la <em>list-box</em> est définie comme n'ayant pas de sélection.</p></li><li id="r-500254" data-claire-element-id="500254"><p id="r-500253" data-claire-element-id="500253"><em>lParam </em>: 0</p></li><li id="r-500256" data-claire-element-id="500256"><p id="r-500255" data-claire-element-id="500255"><em>Valeur retournée </em>: si une erreur survient, la valeur est <em>LB_ERR</em>. Si <em>wParam</em> est -1, la valeur retournée est <em>LB_ERR</em> même s'il n'y a pas eu d'erreur.</p></li></ul><aside id="r-500259" data-claire-element-id="500259" data-claire-semantic="information"><p id="r-500258" data-claire-element-id="500258">N'utilisez ce message qu'avec une <em>list-box</em> à sélection unique. Vous ne pouvez pas utiliser ce message pour définir ou annuler une sélection dans une <em>list-box</em> à sélection multiple.</p></aside><h6 id="r-lb-sethorizontalextent" data-claire-element-id="500271">LB_SETHORIZONTALEXTENT</h6><p id="r-500261" data-claire-element-id="500261">Une application envoie ce message pour définir la distance de déplacement horizontal (<em>scrolling</em>), en pixels, d'une <em>list-box</em>. Si la largeur de la <em>list-box</em> est inférieure à cette valeur, la barre horizontale fait défiler les items horizontalement. Si la largeur de la <em>list-box</em> est égale ou supérieure à cette valeur, la barre horizontale de défilement est cachée.</p><ul id="r-500268" data-claire-element-id="500268"><li id="r-500263" data-claire-element-id="500263"><p id="r-500262" data-claire-element-id="500262"><em>wparam </em>: définit le nombre de pixels de déplacement de la list-box.</p></li><li id="r-500265" data-claire-element-id="500265"><p id="r-500264" data-claire-element-id="500264"><em>lParam </em>: 0</p></li><li id="r-500267" data-claire-element-id="500267"><p id="r-500266" data-claire-element-id="500266">Valeur retournée : pas de valeur retournée.</p></li></ul><aside id="r-500270" data-claire-element-id="500270" data-claire-semantic="warning"><p id="r-500269" data-claire-element-id="500269">La <em>list-box</em> doit avoir le style <em>WS_HSCROLL</em> pour pouvoir utiliser ce message.</p></aside><h6 id="r-lb-setitemdata" data-claire-element-id="500280">LB_SETITEMDATA</h6><p id="r-500272" data-claire-element-id="500272">Une application envoie ce message pour définir une valeur associée à l'item spécifié d'une <em>list-box</em>.</p><ul id="r-500279" data-claire-element-id="500279"><li id="r-500274" data-claire-element-id="500274"><p id="r-500273" data-claire-element-id="500273"><em>wparam </em>: définit l'index (d'origine 0) de l'item. Si cette valeur est -1, la valeur de <em>lParam</em> sera appliquée à tous les items de la <em>list-box</em>.</p></li><li id="r-500276" data-claire-element-id="500276"><p id="r-500275" data-claire-element-id="500275"><em>lParam </em>: définit la valeur à associer à l'item.</p></li><li id="r-500278" data-claire-element-id="500278"><p id="r-500277" data-claire-element-id="500277"><strong>Valeur retournée </strong>: si une erreur survient, <em>LB_ERR</em>.</p></li></ul><h6 id="r-lb-setsel" data-claire-element-id="500289">LB_SETSEL</h6><p id="r-500281" data-claire-element-id="500281">Une application envoie ce message pour sélectionner une chaîne dans une <em>list-box</em> à sélection multiple.</p><ul id="r-500288" data-claire-element-id="500288"><li id="r-500283" data-claire-element-id="500283"><p id="r-500282" data-claire-element-id="500282"><em>wparam </em>: précise comment le sélection va être définie. Si ce paramètre est <em>TRUE</em>, la chaîne est sélectionnée et mise en surbrillance ; si ce paramètre est <em>FALSE</em>, la surbrillance est annulée et la chaîne n'est pas sélectionnée.</p></li><li id="r-500285" data-claire-element-id="500285"><p id="r-500284" data-claire-element-id="500284"><em>lParam </em>: définit l'index (d'origine 0) de la chaîne choisie. Si ce paramètre est 1, la sélection est ajoutée ou annulée de toutes les chaînes, en fonction du paramètre <em>wParam</em>.</p></li><li id="r-500287" data-claire-element-id="500287"><p id="r-500286" data-claire-element-id="500286">Valeur retournée : <em>LB_ERR</em> en cas d'erreur.</p></li></ul><h5 id="r-exemple-142" data-claire-element-id="500293">Exemple</h5><pre id="r-500291" data-claire-element-id="500291"><code data-claire-semantic="c">#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;


#define ID_BOUTON1      110
#define ID_BOUTON2      111

//variables globales
HINSTANCE inst;
HWND hListBox[2]; //handle des deux contrôles d'édition

//Afficher une list-Box et la remplir
HWND afficheListBox (HWND hwnd)
{
HWND hListBox=CreateWindow(
                        &quot;LISTBOX&quot;,&quot;&quot;,
                         WS_VISIBLE|WS_CHILD|WS_BORDER |LBS_NOTIFY,
                         50,50,150,200,hwnd,NULL,inst,NULL);

//Entrer des items dans la list-box
SendMessage (hListBox, LB_ADDSTRING ,0,(LPARAM)&quot;Première entrée&quot;);
SendMessage (hListBox, LB_ADDSTRING ,0,(LPARAM)&quot;Deuxième entrée&quot;);
SendMessage (hListBox, LB_ADDSTRING ,0,(LPARAM)&quot;Troisième entrée&quot;);
SendMessage (hListBox, LB_ADDSTRING ,0,(LPARAM)&quot;Quatrième entrée&quot;);

return hListBox;
}

//Boutons pour la démo
HWND boutonMessage(HWND hwnd,HMENU code,long x, long y, char * texte)
{
HWND hBouton=CreateWindow(
                        &quot;BUTTON&quot;,
                        texte,
                        WS_CHILD|WS_VISIBLE|BS_PUSHBUTTON,
                        x,y,
                        350,30,
                        hwnd,
                        code,
                        inst,
                        NULL);
return hBouton;
}


LRESULT CALLBACK  Procedure (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam)
{

    static HWND hBouton[1]={0};
    char texte[5]={0},texte2[50]={0};
switch (message)

    {
        //afficher les contrôles d'édition à la réception du message WM_CREATE
        case WM_CREATE:
               hListBox[0]=afficheListBox (hwnd);
               //afficher les boutons pour la démo
               hBouton[0]= boutonMessage(hwnd, (HMENU)ID_BOUTON1,220,90,&quot;Message LB_GETCURSEL: item sélectionné &quot;);
        return 0;

        case WM_COMMAND:

          switch (LOWORD(wParam))
          {
              //test du message LB_GETCURSEL
              case ID_BOUTON1 :
               //Trouver le numéro de la ligne sélectionnée, et transformer le résultat en chaîne
               sprintf(texte,&quot;%d&quot;,(SendMessage(hListBox[0],LB_GETCURSEL,0,0)+1));
               //Afficher une boîte de dialogue
               //s'il y a une sélection
              if (SendMessage(hListBox[0],LB_GETCURSEL,0,0)!= LB_ERR)
              {
                strncat(texte2,&quot;Vous avez sélectionné la ligne &quot;,50);
                strncat(texte2,texte,50);
              }
              else //pas de sélection
              {
              strncat(texte2,&quot;Vous n'avez sélectionné aucune ligne.&quot; ,50);
              }
              MessageBox(hwnd,(LPCTSTR )texte2,&quot;&quot;,MB_OK|MB_ICONWARNING);
              break;
              //ajoutez d'autres tests et d'autres boutons si vous le voulez
              //case ID_BOUTON2:
              //autre test
              //breaks;
          }

           switch (HIWORD(wParam))
          {
              case LBN_SELCHANGE :
                char temp[256] = &quot;&quot;;
                SendMessage(hListbox, LB_GETTEXT, SendMessage(hListbox[0], LB_GETCURSEL, 0, 0), temp);
                MessageBox(hwnd,temp, &quot;Item sélectionné :&quot;, MB_ICONINFORMATION);
              break;
          }
              return 0;

        case WM_CLOSE:
             DestroyWindow(hwnd);
            return 0;

        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(hwnd, message, wParam, lParam);
        }
}

int WINAPI WinMain(HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
                                        LPSTR lignesDeCommande, int modeDAffichage)
{
       //Variables de la fonction principale
    MSG msg;
    WNDCLASS wc;
        HWND hwnd;
        inst = cetteInstance;
        // Structure de la classe de la fenêtre principale
    wc.style = 0 ;
    wc.lpfnWndProc = Procedure;
    wc.cbClsExtra = 0;
    wc.cbWndExtra = 0;
    wc.hInstance = cetteInstance;
    wc.hIcon = NULL;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground =  (HBRUSH)(1+ COLOR_BTNFACE);
    wc.lpszMenuName =  NULL;
    wc.lpszClassName = &quot;ClassePrincipale&quot;;

        //Enregistrer la classe de fenêtre
    if(!RegisterClass(&amp;wc)) return FALSE;
    hwnd = CreateWindow(&quot;ClassePrincipale&quot;, &quot;Démo du contrôle List-Box&quot;,WS_OVERLAPPEDWINDOW   ,
                              200,100,600 ,300, NULL, NULL, cetteInstance, NULL);
        if (!hwnd)  return FALSE;
    ShowWindow(hwnd,SW_SHOW);
        UpdateWindow( hwnd );

        //Boucle de message
    while (GetMessage(&amp;msg, NULL, 0, 0))
    {
        TranslateMessage(&amp;msg);
        DispatchMessage(&amp;msg);
    }
    return msg.wParam;
}</code></pre><p id="r-500292" data-claire-element-id="500292"><em>Rédactrice : <strong>acryline</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
<span class="arrow"></span>
<span class="next">La liste déroulante</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
<span class="next">La glissière</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Laglissire"></a><h2>La glissière</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
<span class="arrow"></span>
<span class="next">La liste de choix</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
<span class="next">Le contrôle Static</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-glissiere" data-claire-element-id="500518">La glissière</h4><p id="r-500295" data-claire-element-id="500295">Le <strong>slider</strong>, ou <strong>trackbar</strong>, (glissière en français) est très utilisé dans la plupart des programmes d'aujourd'hui. Vous l'avez sûrement utilisé sans même savoir ce qui se passait derrière, chose que je propose de faire ici. :p</p><figure id="r-500297" data-claire-element-id="500298"><img id="r-500296" data-claire-element-id="500296" src="medias/uploads.siteduzero.com_files_16001_17000_16361.jpg" alt="Image utilisateur"/></figure><p id="r-500299" data-claire-element-id="500299">Il est loin d'être particulièrement difficile, et je ne vous cacherai pas que sa préparation est plus l'objet d'erreurs que son utilisation. En effet, il fait partie de la <strong>Common Controls Library</strong>, ou bibliothèque des contrôles communs, que vous devrez intégrer et lier au projet.</p><h5 id="r-preparation-prealable" data-claire-element-id="500306">Préparation préalable</h5><h6 id="r-integration-2" data-claire-element-id="500302">Intégration</h6><p id="r-500300" data-claire-element-id="500300">Afin de déclarer le <em>slider</em>, ou plutôt sa classe, vous aurez besoin d'insérer dans votre projet :</p><pre id="r-500301" data-claire-element-id="500301"><code data-claire-semantic="c">#include &lt;commctrl.h&gt;</code></pre><h6 id="r-linker" data-claire-element-id="500305">Linker</h6><p id="r-500303" data-claire-element-id="500303">Et en ce qui concerne le <em>linker</em>, vous devrez ajouter l'entrée <strong>-lcomctl32</strong>, ou sous C::B <strong>comctl32</strong>.</p><p id="r-500304" data-claire-element-id="500304">En bref, rien de bien sorcier. La seule source d'erreurs est une potentielle faute d'orthographe. ;)</p><h5 id="r-creation-30" data-claire-element-id="500352">Création</h5><p id="r-500307" data-claire-element-id="500307">Concernant sa création, vous pouvez passer comme d'habitude par <em>CreateWindow</em>, ou par les <em>template</em> de ressource. Le mot-clé à utiliser est alors <strong>CONTROL</strong>. Je vous l'avais dit qu'il était générique... c'est le mot-clé se rapprochant le plus de <em>CreateWindow</em>. Mais dans les deux cas, le nom de classe à utiliser est <strong>TRACKBAR_CLASS</strong>. En plus de spécifier cette constante prédéfinie au 2ème argument de <em>CreateWindow</em> (ou au 3ème de <em>CONTROL</em>), vous pouvez utiliser un ou plusieurs, par associations de <em>flag</em>, des styles suivants :</p><ul id="r-500348" data-claire-element-id="500348"><li id="r-500309" data-claire-element-id="500309"><p id="r-500308" data-claire-element-id="500308"><strong>TBS_AUTOTICKS</strong> : le slider comporte une marque (trait) pour chaque palier d'incrémentation déterminé à partir de ses marges.</p></li><li id="r-500311" data-claire-element-id="500311"><p id="r-500310" data-claire-element-id="500310"><strong>TBS_BOTH</strong> : le <em>slider</em> comporte des marques sur ses deux côtés.</p></li><li id="r-500315" data-claire-element-id="500315"><p id="r-500312" data-claire-element-id="500312"><strong>TBS_BOTTOM</strong> : le <em>slider</em> comporte des marques seulement en-dessous de lui.</p><aside id="r-500314" data-claire-element-id="500314" data-claire-semantic="information"><p id="r-500313" data-claire-element-id="500313">Style valide uniquement avec un <em>slider</em> horizontal.</p></aside></li><li id="r-500317" data-claire-element-id="500317"><p id="r-500316" data-claire-element-id="500316"><strong>TBS_DOWNISLEFT</strong> : utilisé avec un <em>slider</em> vertical, il permet d'inverser le sens d'incrémentation.</p></li><li id="r-500319" data-claire-element-id="500319"><p id="r-500318" data-claire-element-id="500318"><strong>TBS_FIXEDLENGTH</strong> : permet au curseur de changer sa taille en recevant le message <em>TBS_SETTHUMBLENGTH</em>.</p></li><li id="r-500321" data-claire-element-id="500321"><p id="r-500320" data-claire-element-id="500320"><strong>TBS_HORZ</strong> : style par défaut ; le <em>slider</em> est orienté horizontalement.</p></li><li id="r-500325" data-claire-element-id="500325"><p id="r-500322" data-claire-element-id="500322"><strong>TBS_LEFT</strong> : le <em>slider</em> comporte des marques sur son côté gauche.</p><aside id="r-500324" data-claire-element-id="500324" data-claire-semantic="information"><p id="r-500323" data-claire-element-id="500323">Style valide uniquement quand son orientation est verticale.</p></aside></li><li id="r-500327" data-claire-element-id="500327"><p id="r-500326" data-claire-element-id="500326"><strong>TBS_NOTHUMB</strong> : le <em>slider</em> ne comporte pas de curseur.</p></li><li id="r-500329" data-claire-element-id="500329"><p id="r-500328" data-claire-element-id="500328"><strong>TBS_NOTICKS</strong> : le <em>slider</em> ne comporte pas de marques.</p></li><li id="r-500333" data-claire-element-id="500333"><p id="r-500330" data-claire-element-id="500330"><strong>TBS_REVERSED</strong> : le <em>slider</em> est inversé ; son sens d'incrémentation est alors de la droite vers la gauche.</p><aside id="r-500332" data-claire-element-id="500332" data-claire-semantic="warning"><p id="r-500331" data-claire-element-id="500331">Supporté uniquement par la version 5.80 ou ultérieure.</p></aside></li><li id="r-500337" data-claire-element-id="500337"><p id="r-500334" data-claire-element-id="500334"><strong>TBS_RIGHT</strong> : même effet que <em>TBS_LEFT</em>, mais sur le côté droit.</p><aside id="r-500336" data-claire-element-id="500336" data-claire-semantic="information"><p id="r-500335" data-claire-element-id="500335">Style valide uniquement quand son orientation est verticale.</p></aside></li><li id="r-500341" data-claire-element-id="500341"><p id="r-500338" data-claire-element-id="500338"><strong>TBS_TOOLTIPS</strong> : le <em>slider</em> supporte les <em>Tooltip</em>, ou ballons d'informations. Sa position pourra alors être changée avec<em> TBM_SETTIPSIDE</em>.</p><aside id="r-500340" data-claire-element-id="500340" data-claire-semantic="warning"><p id="r-500339" data-claire-element-id="500339">Supporté uniquement par la version 4.70 ou ultérieure.</p></aside></li><li id="r-500345" data-claire-element-id="500345"><p id="r-500342" data-claire-element-id="500342"><strong>TBS_TOP</strong> : le <em>slider</em> comporte des marques au-dessus de lui.</p><aside id="r-500344" data-claire-element-id="500344" data-claire-semantic="information"><p id="r-500343" data-claire-element-id="500343">Style valide uniquement quand son orientation est horizontale.</p></aside></li><li id="r-500347" data-claire-element-id="500347"><p id="r-500346" data-claire-element-id="500346"><strong>TBS_VERT</strong> : le <em>slider</em> est alors orienté verticalement.</p></li></ul><aside id="r-500350" data-claire-element-id="500350" data-claire-semantic="warning"><p id="r-500349" data-claire-element-id="500349">Il est évident que vous ne devez pas combiner des styles contradictoires, comme des orientations contraires...</p></aside><p id="r-500351" data-claire-element-id="500351">Sa création étant maintenant démystifiée, passons maintenant aux <strong>notifications</strong> que ce contrôle peut envoyer, et ensuite aux <strong>messages</strong> qu'il peut recevoir et traiter.</p><h5 id="r-notifications-3" data-claire-element-id="500370">Notifications</h5><p id="r-500353" data-claire-element-id="500353">Je vais décrire ici les notifications envoyées par le contrôle via le message <em>WM_COMMAND</em> (sauf mention contraire). Il est assumé que vous savez comment interagir avec ce message, et je décrirai donc ici uniquement les codes de notifications.</p><aside id="r-500355" data-claire-element-id="500355" data-claire-semantic="information"><p id="r-500354" data-claire-element-id="500354">Les notifications <em>WM_HSCROLL</em> et <em>WM_VSCROLL</em> ne transitent pas par WM_COMMAND, elles sont traitées en tant que tel à part (comme on traite <em>WM_COMMAND</em>).</p></aside><aside id="r-500357" data-claire-element-id="500357" data-claire-semantic="information"><p id="r-500356" data-claire-element-id="500356">Je vous précise au préalable que le <em>slider</em> envoie, à l'instar du contrôle <em>static</em>, une notification <strong>WM_CTLCOLORSTATIC</strong> pour colorer son pourtour. Vous pourrez alors changer sa couleur de fond (cf &quot;Le contrôle Static&quot;).</p></aside><h6 id="r-wm-hscroll-ou-wm-vscroll" data-claire-element-id="500361">WM_HSCROLL ou WM_VSCROLL</h6><p id="r-500358" data-claire-element-id="500358">Envoyés à la procédure de la fenêtre parent, ces notifications indiquent un <em>drag</em> du curseur par l'utilisateur :<br/> - <em>horizontal</em>, pour un <em>slider</em> orienté horizontalement<br/> - <em>vertical</em>, pour un <em>slider</em> orienté verticalement.</p><aside id="r-500360" data-claire-element-id="500360" data-claire-semantic="information"><p id="r-500359" data-claire-element-id="500359">Le mot bas du paramètre wParam contient le code de notification.</p></aside><h6 id="r-tb-thumbtrack" data-claire-element-id="500365">TB_THUMBTRACK</h6><p id="r-500362" data-claire-element-id="500362">Cette notification est envoyée lorsque l'utilisateur bouge le curseur.</p><aside id="r-500364" data-claire-element-id="500364" data-claire-semantic="information"><p id="r-500363" data-claire-element-id="500363">Le mot haut du paramètre <em>wParam</em> contient la position changée du curseur.</p></aside><h6 id="r-tb-thumbposition" data-claire-element-id="500369">TB_THUMBPOSITION</h6><p id="r-500366" data-claire-element-id="500366">Cette notification est envoyée lorsque l'utilisateur a bougé le curseur, puis relâché la souris (équivaut donc à <em>TB_THUMBTRACK + WM_LBUTTONUP</em>).</p><aside id="r-500368" data-claire-element-id="500368" data-claire-semantic="information"><p id="r-500367" data-claire-element-id="500367">Le mot haut du paramètre <em>wParam</em> contient la position changée du curseur.</p></aside><h5 id="r-messages-3" data-claire-element-id="500513">Messages</h5><p id="r-500371" data-claire-element-id="500371">Ces messages peuvent être envoyés au contrôle avec la fonction :</p><pre id="r-500372" data-claire-element-id="500372"><code data-claire-semantic="c">SendMessage(hCtl,iCode,wParam,lParam)</code></pre><p id="r-500373" data-claire-element-id="500373">Pour chaque message je décrirai le rôle et la signification de <em>wParam</em> et <em>lParam</em>, ainsi que la valeur retournée.</p><h6 id="r-tbm-clearsel" data-claire-element-id="500382">TBM_CLEARSEL</h6><p id="r-500374" data-claire-element-id="500374">Ce message permet de nettoyer la sélection en cours.</p><ul id="r-500381" data-claire-element-id="500381"><li id="r-500376" data-claire-element-id="500376"><p id="r-500375" data-claire-element-id="500375"><em>wParam</em> : (<em>BOOL</em>) s'il vaut <em>TRUE</em>, redessine le <em>slider</em>.</p></li><li id="r-500378" data-claire-element-id="500378"><p id="r-500377" data-claire-element-id="500377"><em>lParam</em> : 0.</p></li><li id="r-500380" data-claire-element-id="500380"><p id="r-500379" data-claire-element-id="500379">Valeur de retour : aucune.</p></li></ul><h6 id="r-tbm-cleartics" data-claire-element-id="500391">TBM_CLEARTICS</h6><p id="r-500383" data-claire-element-id="500383">Ce message permet de supprimer les marques du <em>slider</em>, exceptées la première et la dernière.</p><ul id="r-500390" data-claire-element-id="500390"><li id="r-500385" data-claire-element-id="500385"><p id="r-500384" data-claire-element-id="500384"><em>wParam</em> : (<em>BOOL</em>) s'il vaut <em>TRUE</em>, redessine le <em>slider</em>.</p></li><li id="r-500387" data-claire-element-id="500387"><p id="r-500386" data-claire-element-id="500386"><em>lParam</em> : 0.</p></li><li id="r-500389" data-claire-element-id="500389"><p id="r-500388" data-claire-element-id="500388">Valeur de retour : aucune.</p></li></ul><h6 id="r-tbm-getchannelrect" data-claire-element-id="500400">TBM_GETCHANNELRECT</h6><p id="r-500392" data-claire-element-id="500392">Ce message permet de récupérer les dimensions du rectangle limite du <em>slider</em>, dans lequel il évolue.</p><ul id="r-500399" data-claire-element-id="500399"><li id="r-500394" data-claire-element-id="500394"><p id="r-500393" data-claire-element-id="500393"><em>wParam</em> : 0.</p></li><li id="r-500396" data-claire-element-id="500396"><p id="r-500395" data-claire-element-id="500395"><em>lParam</em> : (<em>LPRECT</em>) adresse d'une variable de type <em>RECT</em> qui va recevoir les dimensions.</p></li><li id="r-500398" data-claire-element-id="500398"><p id="r-500397" data-claire-element-id="500397">Valeur de retour : aucune.</p></li></ul><h6 id="r-tbm-getpos" data-claire-element-id="500409">TBM_GETPOS</h6><p id="r-500401" data-claire-element-id="500401">Ce message permet de récupérer la position courante du curseur.</p><ul id="r-500408" data-claire-element-id="500408"><li id="r-500403" data-claire-element-id="500403"><p id="r-500402" data-claire-element-id="500402"><em>wParam</em> : 0.</p></li><li id="r-500405" data-claire-element-id="500405"><p id="r-500404" data-claire-element-id="500404"><em>lParam</em> : 0.</p></li><li id="r-500407" data-claire-element-id="500407"><p id="r-500406" data-claire-element-id="500406">Valeur de retour : valeur 32 bits représentant la position courante.</p></li></ul><h6 id="r-tbm-getrangemax-ou-tbm-getrangemin" data-claire-element-id="500418">TBM_GETRANGEMAX ou TBM_GETRANGEMIN</h6><p id="r-500410" data-claire-element-id="500410">Ces messages permettent de récupérer la valeur maximale ou minimale que peut prendre le <em>slider</em> (ses bornes).</p><ul id="r-500417" data-claire-element-id="500417"><li id="r-500412" data-claire-element-id="500412"><p id="r-500411" data-claire-element-id="500411"><em>wParam</em> : 0.</p></li><li id="r-500414" data-claire-element-id="500414"><p id="r-500413" data-claire-element-id="500413"><em>lParam</em> : 0.</p></li><li id="r-500416" data-claire-element-id="500416"><p id="r-500415" data-claire-element-id="500415">Valeur de retour : valeur 32 bits désignant la valeur de la borne spécifiée.</p></li></ul><h6 id="r-tbm-getthumblength" data-claire-element-id="500427">TBM_GETTHUMBLENGTH</h6><p id="r-500419" data-claire-element-id="500419">Ce message permet de récupérer la longueur du curseur du <em>slider</em>.</p><ul id="r-500426" data-claire-element-id="500426"><li id="r-500421" data-claire-element-id="500421"><p id="r-500420" data-claire-element-id="500420"><em>wParam</em> : 0.</p></li><li id="r-500423" data-claire-element-id="500423"><p id="r-500422" data-claire-element-id="500422"><em>lParam</em> : 0.</p></li><li id="r-500425" data-claire-element-id="500425"><p id="r-500424" data-claire-element-id="500424">Valeur de retour : longueur du curseur (en pixels).</p></li></ul><h6 id="r-tbm-getthumbrect" data-claire-element-id="500436">TBM_GETTHUMBRECT</h6><p id="r-500428" data-claire-element-id="500428">Ce message permet de récupérer les coordonnées et dimensions du curseur.</p><ul id="r-500435" data-claire-element-id="500435"><li id="r-500430" data-claire-element-id="500430"><p id="r-500429" data-claire-element-id="500429"><em>wParam</em> : 0.</p></li><li id="r-500432" data-claire-element-id="500432"><p id="r-500431" data-claire-element-id="500431"><em>lParam</em> : 0.</p></li><li id="r-500434" data-claire-element-id="500434"><p id="r-500433" data-claire-element-id="500433">Valeur de retour : (<em>RECT</em>) dimensions et positions du curseur.</p></li></ul><h6 id="r-tbm-gettooltips" data-claire-element-id="500447">TBM_GETTOOLTIPS</h6><p id="r-500437" data-claire-element-id="500437">Ce message permet de récupérer un <em>handle</em> sur un ballon de message associé au <em>slider</em> s'il y a lieu.</p><ul id="r-500444" data-claire-element-id="500444"><li id="r-500439" data-claire-element-id="500439"><p id="r-500438" data-claire-element-id="500438"><em>wParam</em> : 0.</p></li><li id="r-500441" data-claire-element-id="500441"><p id="r-500440" data-claire-element-id="500440"><em>lParam</em> : 0.</p></li><li id="r-500443" data-claire-element-id="500443"><p id="r-500442" data-claire-element-id="500442">Valeur de retour : (<em>HWND</em>) <em>handle</em> du <em>tooltip</em> assigné, s'il y en a un. Dans le cas contraire, <em>NULL</em>.</p></li></ul><aside id="r-500446" data-claire-element-id="500446" data-claire-semantic="information"><p id="r-500445" data-claire-element-id="500445">Le style <em>TBS_TOOLTIPS</em> est évidemment nécessaire ici.</p></aside><h6 id="r-tbm-setpos" data-claire-element-id="500456">TBM_SETPOS</h6><p id="r-500448" data-claire-element-id="500448">Ce message permet de définir la position courante du curseur dans le <em>slider</em>.</p><ul id="r-500455" data-claire-element-id="500455"><li id="r-500450" data-claire-element-id="500450"><p id="r-500449" data-claire-element-id="500449"><em>wParam</em> : (<em>BOOL</em>) définit l'état de dessin du contrôle : s'il vaut <em>TRUE</em>, le <em>slider</em> sera redessiné après.</p></li><li id="r-500452" data-claire-element-id="500452"><p id="r-500451" data-claire-element-id="500451"><em>lParam</em> : (<em>LONG</em>) définit la nouvelle position du curseur, en unités logiques, comprise entre les bornes du <em>slider</em>.</p></li><li id="r-500454" data-claire-element-id="500454"><p id="r-500453" data-claire-element-id="500453">Valeur de retour : aucune.</p></li></ul><h6 id="r-tbm-setrange" data-claire-element-id="500465">TBM_SETRANGE</h6><p id="r-500457" data-claire-element-id="500457">Ce message permet de définir les bornes du slider.</p><ul id="r-500464" data-claire-element-id="500464"><li id="r-500459" data-claire-element-id="500459"><p id="r-500458" data-claire-element-id="500458"><em>wParam</em> : (<em>BOOL</em>) définit l'état de dessin du contrôle : s'il vaut <em>TRUE</em>, le slider sera redessiné après.</p></li><li id="r-500461" data-claire-element-id="500461"><p id="r-500460" data-claire-element-id="500460"><em>lParam</em> : (<em>LONG</em>) nouvelles bornes, définies grâce à la macro <em>MAKELONG(min, max)</em></p></li><li id="r-500463" data-claire-element-id="500463"><p id="r-500462" data-claire-element-id="500462">Valeur de retour : aucune.</p></li></ul><h6 id="r-tbm-setrangemax-ou-tbm-setrangemin" data-claire-element-id="500474">TBM_SETRANGEMAX ou TBM_SETRANGEMIN</h6><p id="r-500466" data-claire-element-id="500466">Ces messages ont la même fonction que <em>TBM_SETRANGE</em>, mais sur une seule des bornes, spécifiée dans leur nom.</p><ul id="r-500473" data-claire-element-id="500473"><li id="r-500468" data-claire-element-id="500468"><p id="r-500467" data-claire-element-id="500467"><em>wParam</em> : (<em>BOOL</em>) définit l'état de dessin du contrôle : s'il vaut <em>TRUE</em>, le <em>slider</em> sera redessiné après.</p></li><li id="r-500470" data-claire-element-id="500470"><p id="r-500469" data-claire-element-id="500469"><em>lParam</em> : (<em>LONG</em>) définit la nouvelle borne (minimale ou maximale).</p></li><li id="r-500472" data-claire-element-id="500472"><p id="r-500471" data-claire-element-id="500471">Valeur de retour : aucune.</p></li></ul><h6 id="r-tbm-setthumlength" data-claire-element-id="500483">TBM_SETTHUMLENGTH</h6><p id="r-500475" data-claire-element-id="500475">Ce message permet de définir la longueur du curseur du <em>slider</em>.</p><ul id="r-500482" data-claire-element-id="500482"><li id="r-500477" data-claire-element-id="500477"><p id="r-500476" data-claire-element-id="500476"><em>wParam</em> : (<em>UINT</em>) longueur du curseur, en pixels.</p></li><li id="r-500479" data-claire-element-id="500479"><p id="r-500478" data-claire-element-id="500478"><em>lParam</em> : 0.</p></li><li id="r-500481" data-claire-element-id="500481"><p id="r-500480" data-claire-element-id="500480">Valeur de retour : aucune.</p></li></ul><h6 id="r-tbm-setticfreq" data-claire-element-id="500492">TBM_SETTICFREQ</h6><p id="r-500484" data-claire-element-id="500484">Ce message permet de définir la fréquence des marques.</p><ul id="r-500491" data-claire-element-id="500491"><li id="r-500486" data-claire-element-id="500486"><p id="r-500485" data-claire-element-id="500485"><em>wParam</em> : (<em>WORD</em>) fréquence des marques (1 = chaque palier).</p></li><li id="r-500488" data-claire-element-id="500488"><p id="r-500487" data-claire-element-id="500487"><em>lParam</em> : 0.</p></li><li id="r-500490" data-claire-element-id="500490"><p id="r-500489" data-claire-element-id="500489">Valeur de retour : aucune.</p></li></ul><h6 id="r-tbm-settipside" data-claire-element-id="500503">TBM_SETTIPSIDE</h6><p id="r-500493" data-claire-element-id="500493">Ce message permet de définir le côté du <em>slider</em> où sera affiché le ballon d'infos.</p><ul id="r-500500" data-claire-element-id="500500"><li id="r-500495" data-claire-element-id="500495"><p id="r-500494" data-claire-element-id="500494"><em>wParam</em> : (<em>int</em>) définit le côté du ballon : peut alors prendre les valeurs <em>TBTS_TOP</em> (haut), <em>TBTS_LEFT</em> (gauche), <em>TBTS_RIGHT</em> (droite), <em>TBTS_BOTTOM</em> (bas).</p></li><li id="r-500497" data-claire-element-id="500497"><p id="r-500496" data-claire-element-id="500496"><em>lParam</em> : 0.</p></li><li id="r-500499" data-claire-element-id="500499"><p id="r-500498" data-claire-element-id="500498">Valeur de retour : précédente position du ballon.</p></li></ul><aside id="r-500502" data-claire-element-id="500502" data-claire-semantic="information"><p id="r-500501" data-claire-element-id="500501">Utile uniquement avec le style <em>TBS_TOOLTIP</em>.</p></aside><h6 id="r-tbm-settooltips" data-claire-element-id="500512">TBM_SETTOOLTIPS</h6><p id="r-500504" data-claire-element-id="500504">Ce message permet de définir le ballon d'informations associé au <em>slider</em>.</p><ul id="r-500511" data-claire-element-id="500511"><li id="r-500506" data-claire-element-id="500506"><p id="r-500505" data-claire-element-id="500505"><em>wParam</em> : (<em>HWND</em>) <em>handle</em> d'un ballon déjà créé.</p></li><li id="r-500508" data-claire-element-id="500508"><p id="r-500507" data-claire-element-id="500507"><em>lParam</em> : 0.</p></li><li id="r-500510" data-claire-element-id="500510"><p id="r-500509" data-claire-element-id="500509">Valeur de retour : aucune.</p></li></ul><h5 id="r-exemple-143" data-claire-element-id="500517">Exemple</h5><p id="r-500514" data-claire-element-id="500514">Le présent exemple montre quelques fonctions permettant de créer ou manipuler le <em>slider</em> simplement (à utiliser, non compilable tel quel) :</p><pre id="r-500515" data-claire-element-id="500515"><code data-claire-semantic="c">HWND createSlider (HINSTANCE instance, HWND parentWindow)
{
    return CreateWindow(TRACKBAR_CLASS, &quot;&quot;, WM_CHILD | WM_VISIBLE | TBS_NOTICKS, 20, 20, 300, 20, parentWindow, (HMENU)NULL, instance, NULL);
};

void setRange (HWND slider, int min, int max)
{
    SendMessage(slider, TBM_SETRANGE, TRUE, MAKELONG(min,max));

    return;
}

void setPos (HWND slider, int position)
{
    SendMessage(slider, TBM_SETPOS, TRUE, position);
          
    return;
}

int getPos (HWND slider)
{
    return SendMessage(slider, TBM_GETPOS, 0, 0);
}</code></pre><p id="r-500516" data-claire-element-id="500516">Celui-ci est tout bête, mais je ne pense pas que vous vous servirez des autres avant un petit bout de temps. ;) <br/><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
<span class="arrow"></span>
<span class="next">La liste de choix</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
<span class="next">Le contrôle Static</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LecontrleStatic"></a><h2>Le contrôle Static</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
<span class="arrow"></span>
<span class="next">La glissière</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">
<span class="next">L&#039;affichage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-controle-static" data-claire-element-id="500666">Le contrôle Static</h4><p id="r-500519" data-claire-element-id="500519">Ce contrôle est l'un des plus simples et des plus utiles qui soit : il permet d'afficher un libellé de texte, une icône ou une image, mais qui n'interagit pas avec l'utilisateur, d'où son nom.</p><figure id="r-500521" data-claire-element-id="500522"><img id="r-500520" data-claire-element-id="500520" src="medias/uploads.siteduzero.com_files_16001_17000_16227.jpg" alt="Image utilisateur"/></figure><h5 id="r-creation-31" data-claire-element-id="500572">Création</h5><p id="r-500523" data-claire-element-id="500523">Pour créer un <em>STATIC</em>, il faut appeler <em>CreateWindow</em> avec comme classe &quot;STATIC&quot;, et ajouter en plus des styles classiques (<em>WS_CHILD,WS_VISIBLE</em>) un ou plusieurs de ces styles :</p><aside id="r-500526" data-claire-element-id="500526" data-claire-semantic="information"><p id="r-500524" data-claire-element-id="500524">Pour une boîte de dialogue, vous devrez utiliser le mot-clé <strong>CONTROL</strong>, très pratique, qui est un équivalent <em>template</em> de <em>CreateWindow</em> : son premier paramètre équivaut au 2ème de <em>CreateWindow</em>, son 2ème correspond à son ID, son 3ème à la classe de fenêtre (autrement dit ici <strong>STATIC</strong>), et son quatrième, ses styles. Les paramètres suivants désignent les dimensions habituelles. Exemple :</p><pre id="r-500525" data-claire-element-id="500525"><code data-claire-semantic="c">//Affiche un static contenant l'image &lt;gras&gt;img&lt;/gras&gt; chargée en ressources (cf ci-après)
CONTROL &quot;img&quot;, -1, &quot;STATIC&quot;, SS_BITMAP, 10, 10, 0, 0</code></pre></aside><ul id="r-500571" data-claire-element-id="500571"><li id="r-500528" data-claire-element-id="500528"><p id="r-500527" data-claire-element-id="500527"><strong>SS_BITMAP</strong> : spécifie une boîte rectangulaire qui permet d'afficher une image <em>bitmap</em>. La taille du contrôle est déterminée automatiquement en fonction de celle de l'image.</p></li><li id="r-500530" data-claire-element-id="500530"><p id="r-500529" data-claire-element-id="500529"><strong>SS_BLACKFRAME</strong> : spécifie une boîte rectangulaire avec un cadre de la même couleur que celui des fenêtres (noir par défaut).</p></li><li id="r-500532" data-claire-element-id="500532"><p id="r-500531" data-claire-element-id="500531"><strong>SS_BLACKRECT</strong> : spécifie une boîte rectangulaire remplie avec la même couleur que le cadre des fenêtres (noir par défaut).</p></li><li id="r-500534" data-claire-element-id="500534"><p id="r-500533" data-claire-element-id="500533"><strong>SS_CENTER</strong> : spécifie une boîte rectangulaire avec du texte centré. Si le texte est trop long, il est automatiquement réparti en plusieurs lignes.</p></li><li id="r-500536" data-claire-element-id="500536"><p id="r-500535" data-claire-element-id="500535"><strong>SS_ETCHEDFRAME</strong> : dessine le cadre en utilisant l'attribut <em>EDGE_ETCHED.</em></p></li><li id="r-500538" data-claire-element-id="500538"><p id="r-500537" data-claire-element-id="500537"><strong>SS_ETCHEDHORZ </strong>: dessine les angles du haut et du bas en utilisant l'attribut <strong>EDGE_ETCHED.</strong></p></li><li id="r-500540" data-claire-element-id="500540"><p id="r-500539" data-claire-element-id="500539"><strong>SS_ETCHEDVERT</strong> : dessine les angles de gauche et droite en utilisant l'attribut <strong>EDGE_ETCHED.</strong></p></li><li id="r-500542" data-claire-element-id="500542"><p id="r-500541" data-claire-element-id="500541"><strong>SS_GRAYRECT</strong> : spécifie une boîte rectangulaire avec un cadre de la couleur en cours du fond d'écran (gris par défaut).</p></li><li id="r-500544" data-claire-element-id="500544"><p id="r-500543" data-claire-element-id="500543"><strong>SS_GRAYFRAME</strong> : spécifie une boîte rectangulaire avec la couleur en cours du fond d'écran (gris par défaut).</p></li><li id="r-500546" data-claire-element-id="500546"><p id="r-500545" data-claire-element-id="500545"><strong>SS_ICON</strong> : spécifie une boîte rectangulaire qui permet d'afficher une icône (ou un curseur animé). La taille du contrôle est déterminée automatiquement en fonction de celle de l'icône.</p></li><li id="r-500548" data-claire-element-id="500548"><p id="r-500547" data-claire-element-id="500547"><strong>SS_LEFT</strong> : spécifie une boîte rectangulaire avec du texte aligné à gauche. Si le texte est trop long, il est automatiquement réparti en plusieurs lignes.</p></li><li id="r-500550" data-claire-element-id="500550"><p id="r-500549" data-claire-element-id="500549"><strong>SS_LEFTNOWORDWRAP</strong> : spécifie une boîte rectangulaire avec du texte aligné à gauche. Si le texte est trop long, il est automatiquement tronqué.</p></li><li id="r-500552" data-claire-element-id="500552"><p id="r-500551" data-claire-element-id="500551"><strong>SS_NOPREFIX</strong> : prévient l'interprétation du signe &amp; dans le texte comme un raccourci clavier.</p></li><li id="r-500554" data-claire-element-id="500554"><p id="r-500553" data-claire-element-id="500553"><strong>SS_NOTIFY</strong> : envoie les notifications <em>STN_CLICKED</em>, <em>STN_DBLCLK</em>, <em>STN_DISABLE</em> et <em>STN_ENABLE</em> à la fenêtre parente.</p></li><li id="r-500556" data-claire-element-id="500556"><p id="r-500555" data-claire-element-id="500555"><strong>SS_OWNERDRAW</strong> : le contrôle doit être dessiné par l'utilisateur.</p></li><li id="r-500558" data-claire-element-id="500558"><p id="r-500557" data-claire-element-id="500557"><strong>SS_REALSIZEIMAGE</strong> : utilisé avec <em>SS_ICON</em>. Au lieu de considérer la taille de la ressource comme taille du contrôle, la taille retournée par <em>LoadImage</em> est utilisée.</p></li><li id="r-500560" data-claire-element-id="500560"><p id="r-500559" data-claire-element-id="500559"><strong>SS_RIGHT</strong> : spécifie une boite rectangulaire avec du texte aligné à droite. Si le texte est trop long, il est automatiquement réparti en plusieurs lignes.</p></li><li id="r-500562" data-claire-element-id="500562"><p id="r-500561" data-claire-element-id="500561"><strong>SS_RIGHTJUST</strong> : utilisé avec <em>SS_ICON</em> ou <em>SS_BITMAP</em>. Lors d'un redimensionnement du contrôle, au lieu de changer la position du coin en bas à droite, c'est la position du coin en haut à gauche qui est modifiée.</p></li><li id="r-500564" data-claire-element-id="500564"><p id="r-500563" data-claire-element-id="500563"><strong>SS_SIMPLE</strong> : spécifie une boîte rectangulaire avec du texte sur une seule ligne. Aucune modification n'est apportée au texte, même si celui-ci est trop long. Le texte n'apparaît pas grisé si le contrôle est désactivé.</p></li><li id="r-500566" data-claire-element-id="500566"><p id="r-500565" data-claire-element-id="500565"><strong>SS_SUNKEN</strong> : dessine un cadre créant l'effet d'un renfoncement dans la fenêtre, autour du contrôle.</p></li><li id="r-500568" data-claire-element-id="500568"><p id="r-500567" data-claire-element-id="500567"><strong>SS_WHITEFRAME</strong> : spécifie une boîte rectangulaire avec un cadre de la même couleur que le fond de la fenêtre (blanc par défaut).</p></li><li id="r-500570" data-claire-element-id="500570"><p id="r-500569" data-claire-element-id="500569"><strong>SS_WHITERECT</strong> : spécifie une boîte rectangulaire remplie avec la même couleur que le fond de la fenêtre.</p></li></ul><h5 id="r-notifications-4" data-claire-element-id="500602">Notifications</h5><p id="r-500573" data-claire-element-id="500573">Je vais décrire ici les notifications envoyées par le contrôle via le message <em>WM_COMMAND</em> (sauf mention contraire) . Il est supposé que vous savez comment interagir avec ce message, et je décrirai donc ici uniquement les codes de notifications.</p><h6 id="r-stn-clicked" data-claire-element-id="500577">STN_CLICKED</h6><p id="r-500574" data-claire-element-id="500574">Ce message est envoyé lorsque l'utilisateur clique sur le contrôle.</p><aside id="r-500576" data-claire-element-id="500576" data-claire-semantic="information"><p id="r-500575" data-claire-element-id="500575">Vous devez avoir défini le style <em>SS_NOTIFY</em> lors de la création du contrôle.</p></aside><h6 id="r-stn-dblclk" data-claire-element-id="500581">STN_DBLCLK</h6><p id="r-500578" data-claire-element-id="500578">Ce message est envoyé lorsque l'utilisateur double-clique sur le contrôle.</p><aside id="r-500580" data-claire-element-id="500580" data-claire-semantic="information"><p id="r-500579" data-claire-element-id="500579">Vous devez avoir défini le style <em>SS_NOTIFY</em> lors de la création du contrôle.</p></aside><h6 id="r-stn-disable" data-claire-element-id="500585">STN_DISABLE</h6><p id="r-500582" data-claire-element-id="500582">Ce message est envoyé lorsque le contrôle est désactivé.</p><aside id="r-500584" data-claire-element-id="500584" data-claire-semantic="information"><p id="r-500583" data-claire-element-id="500583">Vous devez avoir défini le style <em>SS_NOTIFY</em> lors de la création du contrôle.</p></aside><h6 id="r-stn-enable" data-claire-element-id="500589">STN_ENABLE</h6><p id="r-500586" data-claire-element-id="500586">Ce message est envoyé lorsque le contrôle est activé.</p><aside id="r-500588" data-claire-element-id="500588" data-claire-semantic="information"><p id="r-500587" data-claire-element-id="500587">Vous devez avoir défini le style <em>SS_NOTIFY</em> lors de la création du contrôle.</p></aside><h6 id="r-wm-ctlcolorstatic" data-claire-element-id="500601">WM_CTLCOLORSTATIC</h6><p id="r-500590" data-claire-element-id="500590">Ce message est envoyé à la fenêtre parent juste avant que le contrôle ne soit dessiné.<br/> Ceci est principalement utile pour changer la couleur du texte, ou du fond du contrôle pour le dessin .</p><p id="r-500591" data-claire-element-id="500591">Les paramètres valent alors:</p><ul id="r-500598" data-claire-element-id="500598"><li id="r-500593" data-claire-element-id="500593"><p id="r-500592" data-claire-element-id="500592"><em>wparam</em> : <em>handle</em> du DC sur lequel dessiner.</p></li><li id="r-500595" data-claire-element-id="500595"><p id="r-500594" data-claire-element-id="500594"><em>lparam</em> : <em>handle</em> du bouton</p></li><li id="r-500597" data-claire-element-id="500597"><p id="r-500596" data-claire-element-id="500596">Valeur de retour : <em>handle</em> d'une brosse qui sera utilisée pour le dessin du fond.</p></li></ul><aside id="r-500600" data-claire-element-id="500600" data-claire-semantic="warning"><p id="r-500599" data-claire-element-id="500599">- Ce message est envoyé directement à la fonction de gestion des messages, et non pas via le message <em>WM_COMMAND</em><br/> - La brosse retournée ne sera pas automatiquement détruite par le système.</p></aside><h5 id="r-messages-4" data-claire-element-id="500660">Messages</h5><p id="r-500603" data-claire-element-id="500603">Ces messages peuvent être envoyés au contrôle avec la fonction :</p><pre id="r-500604" data-claire-element-id="500604"><code data-claire-semantic="c">SendMessage(hCtl,iCode,wParam,lParam)</code></pre><p id="r-500605" data-claire-element-id="500605">Pour chaque message, je décrirai le rôle et la signification de <em>wParam</em>, <em>lParam</em> et de la valeur retournée.</p><h6 id="r-stm-geticon" data-claire-element-id="500614">STM_GETICON</h6><p id="r-500606" data-claire-element-id="500606">Ce message permet de récupérer le <em>handle</em> de l'icône associée au contrôle.</p><ul id="r-500613" data-claire-element-id="500613"><li id="r-500608" data-claire-element-id="500608"><p id="r-500607" data-claire-element-id="500607"><em>wParam</em> : 0.</p></li><li id="r-500610" data-claire-element-id="500610"><p id="r-500609" data-claire-element-id="500609"><em>lParam</em> : 0.</p></li><li id="r-500612" data-claire-element-id="500612"><p id="r-500611" data-claire-element-id="500611">Valeur de retour : <em>handle</em> de l'icône associée, ou <em>NULL</em> si aucune.</p></li></ul><h6 id="r-stm-getimage" data-claire-element-id="500632">STM_GETIMAGE</h6><p id="r-500615" data-claire-element-id="500615">Ce message permet de récupérer le <em>handle</em> de l'image associée au contrôle.</p><ul id="r-500631" data-claire-element-id="500631"><li id="r-500626" data-claire-element-id="500626"><p id="r-500616" data-claire-element-id="500616"><em>wParam</em> : spécifie le type de l'image à récupérer. Ce peut être une de ces valeurs :</p><ul id="r-500625" data-claire-element-id="500625"><li id="r-500618" data-claire-element-id="500618"><p id="r-500617" data-claire-element-id="500617"><em>IMAGE_BITMAP</em></p></li><li id="r-500620" data-claire-element-id="500620"><p id="r-500619" data-claire-element-id="500619"><em>IMAGE_CURSOR</em></p></li><li id="r-500622" data-claire-element-id="500622"><p id="r-500621" data-claire-element-id="500621"><em>IMAGE_ENHMETAFILE</em></p></li><li id="r-500624" data-claire-element-id="500624"><p id="r-500623" data-claire-element-id="500623"><em>IMAGE_ICON</em></p></li></ul></li><li id="r-500628" data-claire-element-id="500628"><p id="r-500627" data-claire-element-id="500627"><em>lParam</em> : 0.</p></li><li id="r-500630" data-claire-element-id="500630"><p id="r-500629" data-claire-element-id="500629">Valeur de retour : <em>handle</em> de l'image associée, ou <em>NULL</em> si aucune.</p></li></ul><h6 id="r-stm-seticon" data-claire-element-id="500641">STM_SETICON</h6><p id="r-500633" data-claire-element-id="500633">Ce message permet de définir l'icône associée au contrôle.</p><ul id="r-500640" data-claire-element-id="500640"><li id="r-500635" data-claire-element-id="500635"><p id="r-500634" data-claire-element-id="500634"><em>wParam</em> : <em>handle</em> de l'icône.</p></li><li id="r-500637" data-claire-element-id="500637"><p id="r-500636" data-claire-element-id="500636"><em>lParam</em> : 0.</p></li><li id="r-500639" data-claire-element-id="500639"><p id="r-500638" data-claire-element-id="500638">Valeur de retour : <em>handle</em> de l'icône précédemment associée, ou <em>NULL</em> si aucune.</p></li></ul><h6 id="r-stm-setimage" data-claire-element-id="500659">STM_SETIMAGE</h6><p id="r-500642" data-claire-element-id="500642">Ce message permet de définir l'image associée au contrôle.</p><ul id="r-500658" data-claire-element-id="500658"><li id="r-500653" data-claire-element-id="500653"><p id="r-500643" data-claire-element-id="500643"><em>wParam</em> : spécifie le type de l'image à définir. Ce peut être une de ces valeurs :</p><ul id="r-500652" data-claire-element-id="500652"><li id="r-500645" data-claire-element-id="500645"><p id="r-500644" data-claire-element-id="500644"><em>IMAGE_BITMAP</em></p></li><li id="r-500647" data-claire-element-id="500647"><p id="r-500646" data-claire-element-id="500646"><em>IMAGE_CURSOR</em></p></li><li id="r-500649" data-claire-element-id="500649"><p id="r-500648" data-claire-element-id="500648"><em>IMAGE_ENHMETAFILE</em></p></li><li id="r-500651" data-claire-element-id="500651"><p id="r-500650" data-claire-element-id="500650"><em>IMAGE_ICON</em></p></li></ul></li><li id="r-500655" data-claire-element-id="500655"><p id="r-500654" data-claire-element-id="500654"><em>lParam</em> : <em>handle</em> de l'image.</p></li><li id="r-500657" data-claire-element-id="500657"><p id="r-500656" data-claire-element-id="500656">Valeur de retour : <em>handle</em> de l'image précédemment associée, ou <em>NULL</em> si aucune.</p></li></ul><h5 id="r-exemple-144" data-claire-element-id="500665">Exemple</h5><p id="r-500661" data-claire-element-id="500661">Ceci est le code complet d'un exemple utilisant les <em>STATIC</em>.</p><pre id="r-500662" data-claire-element-id="500662"><code data-claire-semantic="c">#include &lt;windows.h&gt;
#include &lt;stdio.h&gt;

HINSTANCE instance;

#define ID_STATIC_1     110

VOID RemplieFenetrePrincipale(HWND fenetrePrincipale)
{
    HWND hCtl=CreateWindow(
        &quot;STATIC&quot;,
        &quot;Double-\ncliquez\nsur moi !!&quot;,
        WS_CHILD|WS_VISIBLE|SS_CENTER|SS_NOTIFY,
        10,10,
        100,60,
        fenetrePrincipale,
        (HMENU)ID_STATIC_1,
        instance,
        NULL);

    hCtl=CreateWindow(
        &quot;STATIC&quot;,
        &quot;&quot;,
        WS_CHILD|WS_VISIBLE|SS_ICON,
        10,80,
        0,0,
        fenetrePrincipale,
        NULL,
        instance,
        NULL);

    HANDLE hIcon=LoadIcon(NULL,IDI_ERROR);
    SendMessage(hCtl,STM_SETICON,(WPARAM)hIcon,0);

    hCtl=CreateWindow(
        &quot;STATIC&quot;,
        &quot;&quot;,
        WS_CHILD|WS_VISIBLE|SS_ICON,
        120,10,
        0,0,
        fenetrePrincipale,
        NULL,
        instance,
        NULL);

    HANDLE hImage=LoadImage(NULL,MAKEINTRESOURCE(OCR_NORMAL),IMAGE_CURSOR,0,0,LR_SHARED);
    SendMessage(hCtl,STM_SETIMAGE,(WPARAM)IMAGE_CURSOR,(LPARAM)hImage);

    hCtl=CreateWindow(
        &quot;STATIC&quot;,
        &quot;&quot;,
        WS_CHILD|WS_VISIBLE|SS_BITMAP,
        120,60,
        0,0,
        fenetrePrincipale,
        NULL,
        instance,
        NULL);
    hImage=LoadImage(NULL,MAKEINTRESOURCE(OBM_CHECK),IMAGE_BITMAP,0,0,LR_SHARED);
    SendMessage(hCtl,STM_SETIMAGE,(WPARAM)IMAGE_BITMAP,(LPARAM)hImage);
}

VOID NotificationControle(HWND fenetrePrincipale,UINT message,WPARAM wParam, LPARAM lParam)
{
    UINT iId=LOWORD(wParam);
    UINT iCode=HIWORD(wParam);
    HWND hCtl=(HWND)lParam;

    switch(iId)
    {
        case ID_STATIC_1:
            if(iCode==STN_DBLCLK)
                MessageBox(fenetrePrincipale,&quot;Vous avez double-cliqué sur le premier STATIC&quot;,&quot;&quot;,MB_OK);
            break;
    }
}

LRESULT CALLBACK procedureFenetrePrincipale(HWND fenetrePrincipale, UINT message, WPARAM wParam, LPARAM lParam)
{
    static HWND boutons[2] = {NULL};

    switch (message)
    {
        case WM_CREATE:
            RemplieFenetrePrincipale(fenetrePrincipale);
            return 0;
        case WM_COMMAND:
            NotificationControle(fenetrePrincipale,message,wParam,lParam);
            return 0;
        case WM_DESTROY:
            PostQuitMessage(0);
            return 0;
        default:
            return DefWindowProc(fenetrePrincipale,message,wParam,lParam);
    }
}


int APIENTRY WinMain (HINSTANCE cetteInstance, HINSTANCE precedenteInstance,
             LPSTR lignesDeCommande, int modeDAffichage)
{
    HWND fenetrePrincipale;
    MSG message;
    WNDCLASS classeFenetre;

    instance = cetteInstance;

    classeFenetre.style = CS_DBLCLKS;// pour attraper les double-clics
    classeFenetre.lpfnWndProc = procedureFenetrePrincipale;
    classeFenetre.cbClsExtra = 0;
    classeFenetre.cbWndExtra = 0;
    classeFenetre.hInstance = NULL;
    classeFenetre.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    classeFenetre.hCursor = LoadCursor(NULL, IDC_ARROW);
    classeFenetre.hbrBackground = (HBRUSH)(1 + COLOR_BTNFACE);
    classeFenetre.lpszMenuName = NULL;
    classeFenetre.lpszClassName = &quot;classeF&quot;;

// On prévoit quand même le cas où ça échoue
    if(!RegisterClass(&amp;classeFenetre))
        return FALSE;

    fenetrePrincipale=CreateWindow(
        &quot;classeF&quot;,
        &quot;Ma premiere fenetre winAPI !&quot;,
        WS_OVERLAPPEDWINDOW,
        CW_USEDEFAULT,CW_USEDEFAULT,
        200,200,
        NULL,
        NULL,
        cetteInstance,
        NULL);

    if (!fenetrePrincipale)
        return FALSE;

    ShowWindow(fenetrePrincipale,modeDAffichage);
    UpdateWindow(fenetrePrincipale);


    while(GetMessage(&amp;message,NULL,0,0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }

    return message.wParam;
}</code></pre><p id="r-500663" data-claire-element-id="500663"><em>Rédacteur : <strong>pamaury</strong></em></p><p id="r-500664" data-claire-element-id="500664">Ce sont les principaux contrôles. Les autres vous seront présentés dans un autre chapitre de ce cours. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
<span class="arrow"></span>
<span class="next">La glissière</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">
<span class="next">L&#039;affichage</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="L039affichage"></a><h2>L&#039;affichage</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
<span class="arrow"></span>
<span class="next">Le contrôle Static</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
<span class="next">Les contextes de périphériques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-500668" data-claire-element-id="500668">Vous allez durant ce chapitre apprendre à gérer l'affichage manuel d'informations dans votre fenêtre : celles ci peuvent être du texte, des formes géométriques (dans ce cas ci on parlera de dessin) ou des images (en général des bitmaps).</p>
</div><a name="Lescontextesdepriphriques"></a><h2>Les contextes de périphériques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">
<span class="arrow"></span>
<span class="next">L&#039;affichage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
<span class="next">Le texte</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-contextes-de-peripheriques" data-claire-element-id="500696">Les contextes de périphériques</h4><p id="r-500669" data-claire-element-id="500669">L'API windows permet de dessiner dans n'importe quel périphérique (imprimante, écran etc.) sans se préoccuper de son fonctionnement (le reste du travail est effectué grâce aux drivers des périphériques), ce qui, évidemment, est très pratique ;) .</p><p id="r-500670" data-claire-element-id="500670">Afin de pouvoir dessiner, nous devons obtenir un <em>handle</em> de contexte de périphérique, traduit en anglais par &quot;<em>Handle on Device Context</em>&quot;, ou <strong>HDC</strong>.</p><h5 id="r-theorique" data-claire-element-id="500687">Théorique</h5><p id="r-500671" data-claire-element-id="500671">Un HDC peut être assimilé, pour une meilleure compréhension, à une surface potentiellement dessinable obtenue par l'appel de <strong>GetDC</strong>. Cette fonction, prenant comme unique paramètre le <em>handle</em> de la fenêtre dont l'on veut récupérer le DC, retourne un HDC portant sur toute la surface de la fenêtre.</p><p id="r-500672" data-claire-element-id="500672">Toutes les fonctions de dessin ne nécessitent généralement qu'un contexte de périphérique. Vous vous demandez alors sûrement comment appliquer des personnalisations temporaires pour chaque dessin ? Eh bien toutes ces personnalisations se passent sur le DC lui-même. La fonction de dessin, utilisant le DC courant, sera lors affectée par les modifications appliquées.</p><p id="r-500673" data-claire-element-id="500673">Une fois le DC récupéré, chaque personnalisation possible (changements de couleurs, de <em>fontes</em>...) se fait à l'aide d'une sélection. Cette sélection d'un objet (personnalisation) dans un contexte de périphérique a pour effet de l'appliquer au DC. C'est alors qu'arrive <strong>SelectObject</strong>. Cette fonction, prenant comme deuxième paramètre l'objet à sélectionner dans le HDC spécifié en premier paramètre, retourne l'ancien objet correspondant avant l'application. Ainsi, pour qu'une couleur seule (par exemple, le vert) soit appliquée sur un HDC, on obtient :</p><pre id="r-500674" data-claire-element-id="500674"><code data-claire-semantic="c">brushDeCouleurAncienne = SelectObject(dcCourant, brushAppliquee);

//Où brushAppliquee = CreateSolidBrush(RGB(0,255,0));</code></pre><aside id="r-500676" data-claire-element-id="500676" data-claire-semantic="warning"><p id="r-500675" data-claire-element-id="500675">Après utilisation, n'oubliez pas de libérer le DC avec <strong>ReleaseDC</strong>, qui prend comme unique paramètre le contexte de périphérique à libérer.</p></aside><p id="r-500677" data-claire-element-id="500677">Avant de commencer les cas particuliers, un petit cours sur les couleurs (utilisées partout) s'impose :</p><h6 id="r-les-couleurs-14" data-claire-element-id="500686">Les couleurs</h6><p id="r-500678" data-claire-element-id="500678">Les couleurs sont gérées différemment de la logique actuelle. Je pense en particulier aux couleurs standards comme le <strong>RGB</strong>, ou <em>Red Green Blue</em>, avec la teneur de chaque couleur primaire variant entre 0 et 255 : en winAPI, les couleurs et motifs sont gérées par <strong>Brosses</strong>, ou <em>Brushes</em>, et donc <strong>HBRUSH</strong>.</p><div id="r-500680" data-claire-element-id="500680" data-claire-semantic="question"><p id="r-500679" data-claire-element-id="500679">D'accord, mais comment passer d'une couleur <em>RGB</em> à une <em>Brush</em> ?</p></div><p id="r-500681" data-claire-element-id="500681">Eh bien, Microsoft pense à nous. ;) Nous avons donc à notre disposition <strong>CreateSolidBrush</strong> prenant comme seul paramètre la valeur hexadécimale de la couleur, ou une variable <strong>COLORREF</strong>. Pour transformer la couleur <em>RGB</em> en valeur <em>COLORREF</em> afin de la passer en paramètre à <em>CreateSolidBrush</em>, nous pouvons utiliser la macro <strong>RGB</strong>. Au final, la syntaxe à utiliser afin de récupérer une <em>brush</em> de couleur <em>RGB</em> est la suivante :</p><pre id="r-500682" data-claire-element-id="500682"><code data-claire-semantic="c">const HBRUSH rouge = CreateSolidBrush(RGB(255,0,0));</code></pre><aside id="r-500684" data-claire-element-id="500684" data-claire-semantic="information"><p id="r-500683" data-claire-element-id="500683">Les valeurs de chaque couleur primaire se trouvent dans l'ordre des lettres de la macro.</p></aside><p id="r-500685" data-claire-element-id="500685">Mais les brosses peuvent aussi être utilisées pour, par exemple, changer de motif. Pour cela, msdn nous propose plusieurs fonctions, parmi lesquelles (à titre d'exemple) <strong>CreateHatchBrush</strong>, permettant de créer une brosse de motif de pointillés, traits ou autres par le passage du type de motif en premier paramètre, et de sa couleur en deuxième.</p><h5 id="r-ou-l-integrer" data-claire-element-id="500695">Où l'intégrer ?</h5><p id="r-500688" data-claire-element-id="500688">Tous les dessins peuvent être effectués n'importe où dans le code en récupérant un DC. Seulement, dans le cas d'une superposition d'une autre fenêtre sur celle-ci, tous les dessins se retrouvent effacés. Afin de le contrer, nous devons utiliser un message envoyé par le système quand la fenêtre a besoin d'être redessinée : <strong>WM_PAINT</strong>.</p><div id="r-500690" data-claire-element-id="500690" data-claire-semantic="question"><p id="r-500689" data-claire-element-id="500689">:( Un scintillement désagréable subsiste...</p></div><p id="r-500691" data-claire-element-id="500691">Exact, la cause en est que les dessins sont alors entièrement redessinés, même s'ils sont toujours visibles. Pour y remédier, il est préférable d'utiliser la fonction <strong>BeginPaint</strong> à la place de <em>GetDC</em> ; même si elle prend le même paramètre (avec en plus un deuxième : un pointeur sur une structure <strong>PAINTSTRUCT</strong> pour le stockage... pas importante pour nous) et renvoie aussi un HDC, elle permet de ne redessiner que le strict nécessaire.</p><aside id="r-500693" data-claire-element-id="500693" data-claire-semantic="warning"><p id="r-500692" data-claire-element-id="500692">N'oubliez pas alors d'utiliser <strong>EndPaint</strong>, qui prend les mêmes paramètres que <em>BeginPaint</em> et permet d'arrêter le dessin. Elle a en plus le même effet que <em>ReleaseDC</em>.</p></aside><p id="r-500694" data-claire-element-id="500694">N'oubliez pas ce que vous venez d'apprendre afin de l'appliquer à ce qui suit.<br/><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">
<span class="arrow"></span>
<span class="next">L&#039;affichage</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
<span class="next">Le texte</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Letexte"></a><h2>Le texte</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
<span class="arrow"></span>
<span class="next">Les contextes de périphériques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
<span class="next">Les formes géométriques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-texte-11" data-claire-element-id="500760">Le texte</h4><p id="r-500697" data-claire-element-id="500697">Avant de l'afficher, une personnalisation du texte peut être exécutée (police, couleur).</p><h5 id="r-personnalisation-du-texte" data-claire-element-id="500719">Personnalisation du texte</h5><p id="r-500698" data-claire-element-id="500698">Si vous ne savez pas encore ce que signifie le mot <strong>fonte</strong>, vous devez alors savoir qu'il s'agit d'un modèle d'écriture pour du texte. Pour vous faire une idée, &quot;<em>Times New Roman</em>&quot;, &quot;<em>Arial</em>&quot;, &quot;<em>Arial Black</em>&quot;, etc... sont des fontes (connues qui plus est).<br/> Si vous n'avez toujours pas compris, des fontes sont des polices de caractères :D .</p><p id="r-500699" data-claire-element-id="500699">Afin de pouvoir en utiliser lors de fonctions d'affichage de texte, nous devons récupérer un <em>handle</em> de fonte, ou <strong>HFONT</strong>. La récupération est semblable aux deux précédentes fonctions, et peut être effectuée grâce à <strong>CreateFont</strong> ou <strong>CreateFontIndirect</strong>. Comme <em>CreateFont</em> possède un prototype long et détaillé, je préfère présenter l'autre, qui passe indirectement (d'où son nom) par une structure détaillant les spécificités de la police (souligné, gras, italique, police, taille etc...) : <strong>LOGFONT</strong>.</p><p id="r-500700" data-claire-element-id="500700">Avant toute utilisation, certaines structures doivent être remises à zéro : <strong>ZeroMemory</strong> s'en occupe. Il faut lui passer pour son premier paramètre un pointeur de la structure ciblée, et en deuxième sa taille, donnée par <em>sizeof</em>.</p><p id="r-500701" data-claire-element-id="500701"><em>LOGFONT</em>, faisant partie de ce type de structures, doit être initialisée à zéro. <br/> Ensuite, vous pouvez :</p><ul id="r-500714" data-claire-element-id="500714"><li id="r-500704" data-claire-element-id="500704"><p id="r-500702" data-claire-element-id="500702">Choisir la police à utiliser en copiant le nom de la police entre guillemets dans le champ <strong>lfFaceName</strong> de votre structure <em>LOGFONT</em>. Exemple :</p><pre id="r-500703" data-claire-element-id="500703"><code data-claire-semantic="c">LOGFONT strctLogfont;

ZeroMemory(&amp;structLogfont, sizeof(LOGFONT));
strcpy(structLogfont, &quot;Arial&quot;);</code></pre></li><li id="r-500707" data-claire-element-id="500707"><p id="r-500705" data-claire-element-id="500705">Régler la taille de la fonte en définissant le champ <strong>lfHeight</strong> de la structure (en pixels). Exemple :</p><pre id="r-500706" data-claire-element-id="500706"><code data-claire-semantic="c">structLogfont.lfHeight = 32;</code></pre></li><li id="r-500710" data-claire-element-id="500710"><p id="r-500708" data-claire-element-id="500708">Choisir de souligner ou barrer le texte en réglant les champs <strong>lfUnderline</strong> ou <strong>lfStrikeOut</strong> à <em>TRUE</em>. Exemple :</p><pre id="r-500709" data-claire-element-id="500709"><code data-claire-semantic="c">structLogfont.lfUnderline = TRUE</code></pre></li><li id="r-500713" data-claire-element-id="500713"><p id="r-500711" data-claire-element-id="500711">Régler la grosseur du texte en choisissant une valeur pour le champ <strong>lfWeight</strong> entre 0 et 900 (par pas de 100, il existe des constantes, comme <strong>FW_BOLD</strong> [gras] à 700). Exemple :</p><pre id="r-500712" data-claire-element-id="500712"><code data-claire-semantic="c">structLogfont.lfWeight = FW_BOLD;</code></pre></li></ul><aside id="r-500716" data-claire-element-id="500716" data-claire-semantic="information"><p id="r-500715" data-claire-element-id="500715">Plus de précisions sur cette structure seront présentes dans la documentation ci-jointe.</p></aside><p id="r-500717" data-claire-element-id="500717">Une fois la structure définie, vous n'avez plus qu'à passer l'adresse de votre structure au seul paramètre possible de <em>CreateFontIndirect</em>, qui s'occupe de vous retourner le <em>handle</em> de fonte que vous devez récupérer. Exemple :</p><pre id="r-500718" data-claire-element-id="500718"><code data-claire-semantic="c">fonte = CreateFontIndirect(&amp;structLogfont);</code></pre><h5 id="r-affichage-de-texte" data-claire-element-id="500738">Affichage de texte</h5><p id="r-500720" data-claire-element-id="500720">L'affichage du texte à l'écran s'exerce grâce à :</p><pre id="r-500721" data-claire-element-id="500721"><code data-claire-semantic="c">BOOL TextOut (HDC hdc, int nXStart, int nYStart, LPCTSTR lpString, int cbString);</code></pre><ul id="r-500737" data-claire-element-id="500737"><li id="r-500724" data-claire-element-id="500724"><p id="r-500722" data-claire-element-id="500722">Le premier paramètre désigne le DC courant, dans lequel va être dessiné le texte :</p><pre id="r-500723" data-claire-element-id="500723"><code data-claire-semantic="c">HDC hdc</code></pre></li><li id="r-500727" data-claire-element-id="500727"><p id="r-500725" data-claire-element-id="500725">Le deuxième désigne à quelle position d'abscisse le texte va commencer à être dessiné :</p><pre id="r-500726" data-claire-element-id="500726"><code data-claire-semantic="c">int nXStart</code></pre></li><li id="r-500730" data-claire-element-id="500730"><p id="r-500728" data-claire-element-id="500728">Le troisième a le même effet que précédemment, mais en ordonnée :</p><pre id="r-500729" data-claire-element-id="500729"><code data-claire-semantic="c">int nYStart</code></pre></li><li id="r-500733" data-claire-element-id="500733"><p id="r-500731" data-claire-element-id="500731">Le quatrième désigne la chaîne de caractères à afficher :</p><pre id="r-500732" data-claire-element-id="500732"><code data-claire-semantic="c">LPCTSTR lpString</code></pre></li><li id="r-500736" data-claire-element-id="500736"><p id="r-500734" data-claire-element-id="500734">Le dernier paramètre désigne le nombre de caractères à afficher (généralement le <em>strlen</em> de la chaîne, mais dans le cas où le nombre donné y est inférieur, la chaîne affichée sera tronquée) :</p><pre id="r-500735" data-claire-element-id="500735"><code data-claire-semantic="c">int cbString</code></pre></li></ul><h5 id="r-pour-aller-plus-loin-40" data-claire-element-id="500745">Pour aller plus loin</h5><p id="r-500739" data-claire-element-id="500739">Vous pouvez :</p><ul id="r-500744" data-claire-element-id="500744"><li id="r-500741" data-claire-element-id="500741"><p id="r-500740" data-claire-element-id="500740">Rendre le fond du texte transparent en utilisant <strong>SetBkMode</strong>, prenant comme premier caractère le DC du texte, et en deuxième le mode de remplissage du fond (donc ici <strong>TRANSPARENT</strong>).</p></li><li id="r-500743" data-claire-element-id="500743"><p id="r-500742" data-claire-element-id="500742">Appliquer une couleur au texte avec <strong>SetTextColor</strong>, prenant comme premier paramètre le DC du texte, et comme deuxième sa couleur (sous la forme d'une structure <em>COLORREF</em>).</p></li></ul><h5 id="r-code-d-exemple" data-claire-element-id="500759">Code d'exemple</h5><p id="r-500746" data-claire-element-id="500746">En guise d'exemple, la fonction ci-dessous affiche la chaîne contenue dans <em>chaine</em>, avec les styles spécifiés en arguments, dans la fenêtre présente en argument n°1 :</p><pre id="r-500747" data-claire-element-id="500747"><code data-claire-semantic="c">void dessineTexte (HWND fenetreCiblee, char *chaine, RECT dimensions, BOOL souligne, char *police, COLORREF couleur)
{       
        //Déclarations préalables
        LOGFONT structFonte;
        PAINTSTRUCT ps;
        HFONT fonte;
        HDC dc;

        //Remplissage de la LOGFONT
        ZeroMemory(&amp;structFonte, sizeof(LOGFONT));
        strcpy(structFonte.lfFaceName, police);
        structFonte.lfHeight = dimensions.top-dimensions.bottom;
        structFonte.lfWidth = 400;
        structFonte.lfUnderline = souligne;
        
        //Création de la fonte à partir de structFonte dans fonte
        fonte = CreateFontIndirect(&amp;structFonte);
        
        //Récupération de la surface de dessin dans dc
        dc = BeginPaint(fenetreCiblee, &amp;ps);
                
        //Permet au texte d'avoir un fond transparent
        SetBkMode(dc, TRANSPARENT);
        //Applique la fonte au dc de texte
        SelectObject(dc, fonte);
        //Applique la couleur de texte au dc
        SetTextColor(dc, couleur);

        //Affichage du texte 
        TextOut(dc, dimensions.left, dimensions.top, chaine, strlen(chaine));

        //Libération de la surface et du dc
        EndPaint(fenetreCiblee, &amp;ps);

        return;
}</code></pre><p id="r-500748" data-claire-element-id="500748">Vous avez sûrement noté la présence d'une structure <strong>RECT</strong> que vous ne connaissez pas.</p><ul id="r-500757" data-claire-element-id="500757"><li id="r-500750" data-claire-element-id="500750"><p id="r-500749" data-claire-element-id="500749">Son champ <strong>left</strong> désigne l'abscisse du coin supérieur gauche de la surface spécifiée par le <em>RECT</em>.</p></li><li id="r-500752" data-claire-element-id="500752"><p id="r-500751" data-claire-element-id="500751">Son champ <strong>top</strong> désigne son ordonnée.</p></li><li id="r-500754" data-claire-element-id="500754"><p id="r-500753" data-claire-element-id="500753">Son champ <strong>right</strong> désigne l'abscisse du coin inférieur droit de la surface spécifiée par le <em>RECT</em>.</p></li><li id="r-500756" data-claire-element-id="500756"><p id="r-500755" data-claire-element-id="500755">Son champ <strong>bottom</strong> désigne son ordonnée.</p></li></ul><p id="r-500758" data-claire-element-id="500758">Grâce à de petits calculs, je peux alors déterminer la hauteur du texte à afficher. Vous pouvez en inventer un pour la largeur, je ne vous cache pas que j'en ai la flegme :-° .<br/><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
<span class="arrow"></span>
<span class="next">Les contextes de périphériques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
<span class="next">Les formes géométriques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesformesgomtriques"></a><h2>Les formes géométriques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
<span class="arrow"></span>
<span class="next">Le texte</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
<span class="next">Les images</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-formes-geometriques" data-claire-element-id="500814">Les formes géométriques</h4><p id="r-500761" data-claire-element-id="500761">Afin de créer des formes géométriques, vous avez besoin d'un crayon dans la vie réelle, non ? Eh bien en winAPI, c'est pareil.</p><h5 id="r-cours" data-claire-element-id="500800">Cours</h5><h6 id="r-les-crayons" data-claire-element-id="500778">Les crayons</h6><p id="r-500762" data-claire-element-id="500762">Bon ! Maintenant que vous avez compris le truc (et que vous avez quelques notions de dessin depuis la maternelle :p ), que vous savez donc que le dessin se fait par outils facilement représentables visuellement, je vais vous parler des crayons. Comme vous le savez, un crayon peut être caractérisé par :</p><ul id="r-500769" data-claire-element-id="500769"><li id="r-500764" data-claire-element-id="500764"><p id="r-500763" data-claire-element-id="500763">son motif (la manière dont vous vous en servez)</p></li><li id="r-500766" data-claire-element-id="500766"><p id="r-500765" data-claire-element-id="500765">sa taille</p></li><li id="r-500768" data-claire-element-id="500768"><p id="r-500767" data-claire-element-id="500767">sa couleur</p></li></ul><p id="r-500770" data-claire-element-id="500770">Ça tombe bien, ce sont exactement les paramètres de <strong>CreatePen</strong> (et dans l'ordre en plus, quelle chance :-° ). Celle-ci renvoie un <em>handle</em> sur un crayon, ou <strong>HPEN</strong>.</p><ul id="r-500777" data-claire-element-id="500777"><li id="r-500772" data-claire-element-id="500772"><p id="r-500771" data-claire-element-id="500771">Son motif est spécifié par l'envoi de constantes <em>int</em> au premier de ses paramètres (<strong>fnPenStyle</strong>), qui peuvent être <strong>PS_SOLID</strong> (pas de motifs), <strong>PS_DASH</strong> (tirets), <strong>PS_DOTS</strong> (pointillés) et j'en passe...</p></li><li id="r-500774" data-claire-element-id="500774"><p id="r-500773" data-claire-element-id="500773">Sa taille est spécifiée par le 2ème paramètre, <em>Width</em> (un <em>int</em>) en pixels.</p></li><li id="r-500776" data-claire-element-id="500776"><p id="r-500775" data-claire-element-id="500775">Sa couleur est déterminée par le dernier paramètre, <strong>crColor</strong>, dont le type est encore un <em>COLORREF</em>. La macro <em>RGB</em> est alors encore de vigueur ici.</p></li></ul><h6 id="r-les-differentes-formes" data-claire-element-id="500799">Les différentes formes</h6><p id="r-500779" data-claire-element-id="500779">Maintenant que vous avez de quoi dessiner, je vais vous fournir des fonctions de dessin permettant de reproduire, avec le DC courant, une forme géométrique :</p><ul id="r-500798" data-claire-element-id="500798"><li id="r-500783" data-claire-element-id="500783"><p id="r-500780" data-claire-element-id="500780">pour faire un rectangle :</p><pre id="r-500781" data-claire-element-id="500781"><code data-claire-semantic="c">BOOL Rectangle(HDC hdc,int nLeftRect, int nTopRect, int nRightRect, int nBottomRect);</code></pre><p id="r-500782" data-claire-element-id="500782">(où <em>hdc</em> désigne le dc courant dans lequel va être dessiné le rectangle, et où les 4 paramètres suivants ont la même désignation que dans la structure <em>RECT</em> (cf fin &quot;Le texte&quot;).</p></li><li id="r-500787" data-claire-element-id="500787"><p id="r-500784" data-claire-element-id="500784">Pour faire une ellipse :</p><pre id="r-500785" data-claire-element-id="500785"><code data-claire-semantic="c">BOOL Ellipse(HDC hdc, int nLeftRect, int nTopRect, int nRightRect, int nBottomRect);</code></pre><p id="r-500786" data-claire-element-id="500786">(Ses paramètres ont la même désignation que pour <strong>Rectangle</strong>.)</p></li><li id="r-500797" data-claire-element-id="500797"><p id="r-500788" data-claire-element-id="500788">Pour faire une ligne, il faut faire une combinaison de :</p><pre id="r-500789" data-claire-element-id="500789"><code data-claire-semantic="c">BOOL MoveToEx(HDC hdc, int X, int Y, LPPOINT lpPoint);</code></pre><p id="r-500790" data-claire-element-id="500790">Cela permet de déplacer le curseur virtuel dans le dc désigné par le premier paramètre aux coordonnées (X ; Y). Cette fonction écrit les anciennes coordonnées du curseur virtuel dans <em>lpPoint</em> (un pointeur de type <strong>POINT</strong> est un structure toute bête ne possédant que deux champs : <strong>x</strong> et <strong>y</strong>).</p><aside id="r-500792" data-claire-element-id="500792" data-claire-semantic="information"><p id="r-500791" data-claire-element-id="500791">Si <em>NULL</em> est passé à ce paramètre, la fonction ne renvoie pas l'ancienne position.</p></aside><pre id="r-500793" data-claire-element-id="500793"><code data-claire-semantic="c">BOOL LineTo(HDC hdc, int nXEnd, int nYEnd);</code></pre><p id="r-500794" data-claire-element-id="500794">Ce qui a pour rôle de tracer une ligne (affectée par les objets potentiellement sélectionnés) entre le curseur virtuel et (nXEnd ; nYEnd).</p><aside id="r-500796" data-claire-element-id="500796" data-claire-semantic="information"><p id="r-500795" data-claire-element-id="500795">D'autres fonctions de dessin seront peut être présentées : il s'agit des principales.</p></aside></li></ul><h5 id="r-codes-d-exemples" data-claire-element-id="500813">Codes d'exemples</h5><p id="r-500801" data-claire-element-id="500801">Voici un ensemble de fonctions permettant de dessiner un rectangle, une ellipse ou une ligne, avec les options passées en paramètre :</p><ul id="r-500811" data-claire-element-id="500811"><li id="r-500804" data-claire-element-id="500804"><p id="r-500802" data-claire-element-id="500802">Rectangle :</p><pre id="r-500803" data-claire-element-id="500803"><code data-claire-semantic="c">void dessineRectangle (HWND fenetreCiblee, const RECT dimensions, HPEN crayon, HBRUSH brosse)
{       
        //Déclarations préalables + demande de surface de dessin
        PAINTSTRUCT ps;
        HDC dc = BeginPaint(fenetreCiblee, &amp;ps);
        
        //Dessine le contour avec le crayon donné
        SelectObject(dc, crayon);
        //Peint le fond du rectangle avec la brosse donnée
        SelectObject(dc, brosse);
        
        //Dessine le rectangle aux positions données
        Rectangle(dc, dimensions.left, dimensions.top, dimensions.right, dimensions.bottom);
        
        //Libération de la surface et fin du dessin
        EndPaint(fenetreCiblee, &amp;ps);

        return;
}</code></pre></li><li id="r-500807" data-claire-element-id="500807"><p id="r-500805" data-claire-element-id="500805">Ellipse :</p><pre id="r-500806" data-claire-element-id="500806"><code data-claire-semantic="c">void dessineEllipse (HWND fenetreCiblee, const RECT dimensions, HPEN crayon, HBRUSH brosse)
{
        //Déclarations préalables + demande de surface de dessin
        PAINTSTRUCT ps;
        HDC dc = BeginPaint(fenetreCiblee, &amp;ps);
        
        //Dessine le contour avec le crayon donné
        SelectObject(dc, crayon);
        //Peint le fond du rectangle avec la brosse donnée
        SelectObject(dc, brosse);
        
        //Dessine l'ellipse aux positions données
        Ellipse(dc, dimensions.left, dimensions.top, dimensions.right, dimensions.bottom);
        
        //Libération de la surface et fin du dessin
        EndPaint(fenetreCiblee, &amp;ps);

        return;
}</code></pre></li><li id="r-500810" data-claire-element-id="500810"><p id="r-500808" data-claire-element-id="500808">Ligne :</p><pre id="r-500809" data-claire-element-id="500809"><code data-claire-semantic="c">void dessineLigne (HWND fenetreCiblee, const RECT dimensions, HPEN crayon)
{
        //Déclarations préalables + récupération de la surface de dessin
        PAINTSTRUCT ps;
        HDC dc = BeginPaint(fenetreCiblee, &amp;ps);

        //Application du crayon sur le dc
        SelectObject(dc, crayon);

        //Dessin de la ligne
        MoveToEx(dc, dimensions.left, dimensions.top, NULL);
        LineTo(dc, dimensions.right, dimensions.bottom);

        //Libération de la surface + fin du dessin
        EndPaint(fenetreCiblee, &amp;ps);

        return;
}</code></pre></li></ul><p id="r-500812" data-claire-element-id="500812"><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
<span class="arrow"></span>
<span class="next">Le texte</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
<span class="next">Les images</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesimages"></a><h2>Les images</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
<span class="arrow"></span>
<span class="next">Les formes géométriques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">
<span class="next">TP : Un lecteur audio</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-images-19" data-claire-element-id="500873">Les images</h4><p id="r-500815" data-claire-element-id="500815">Les images affichables en WinAPI sont généralement de type <em>Bitmap</em>. Pour les afficher, vous disposez de deux moyens : par ressources et en passant par un contrôle <em>STATIC</em>, ou par les contextes de périphériques. Voici donc les méthodes disponibles :</p><h5 id="r-affichage-par-controle-static" data-claire-element-id="500824">Affichage par contrôle <em>STATIC</em></h5><p id="r-500816" data-claire-element-id="500816">Cette méthode est la plus simple à mettre en place, et permet de récupérer des notifications à l'égard du contrôle <em>STATIC</em>. Cependant, c'est la plus gourmande en ressources, et n'est donc pas recommandée si vous n'avez aucune utilité des notifications.</p><h6 id="r-chargement-du-bitmap" data-claire-element-id="500819">Chargement du <em>bitmap</em></h6><p id="r-500817" data-claire-element-id="500817">Tout ce que vous avez à faire, c'est intégrer le <em>bitmap</em> en ressources en utilisant cette syntaxe :</p><pre id="r-500818" data-claire-element-id="500818"><code data-claire-semantic="c">img1 BITMAP &quot;Images/bitmap.bmp&quot;</code></pre><h6 id="r-creation-du-static-bitmap" data-claire-element-id="500823">Création du <em>STATIC bitmap</em></h6><p id="r-500820" data-claire-element-id="500820">La création de ce type de <em>static</em> s'effectue simplement : contentez-vous de créer un <em>static</em> &quot;normal&quot;, de mettre l'ID du <em>bitmap</em> entre guillemets en guise de nom de fenêtre (2ème argument), et d'ajouter le style <em>SS_BITMAP</em> aux autres <em>flag</em>. Les dimensions (6ème et 7ème paramètres) peuvent être mises à 0 pour conserver la taille originelle de l'image.</p><aside id="r-500822" data-claire-element-id="500822" data-claire-semantic="information"><p id="r-500821" data-claire-element-id="500821">Si votre contrôle est situé dans un <em>template</em>, la procédure à suivre est la même.</p></aside><h5 id="r-affichage-par-contextes-de-peripheriques" data-claire-element-id="500861">Affichage par contextes de périphériques</h5><p id="r-500825" data-claire-element-id="500825">C'est la méthode à suivre si vous préférez ne pas utiliser beaucoup les ressources système. Partez pour commencer d'un code simple comme celui-ci :</p><pre id="r-500826" data-claire-element-id="500826"><code data-claire-semantic="c">void afficheBitmap(HWND fenetreCiblee, char *chemin)
{
        HBITMAP bitmap;
        HDC hDC;
        
        //Chargement du bitmap
        hDC=GetDC(fenetreCiblee);
        
        //Affichage du bitmap  

        DeleteObject(bitmap);
        ReleaseDC(fenetreCiblee,hDC);
}</code></pre><p id="r-500827" data-claire-element-id="500827">Si vous avez votre <em>bitmap</em> en ressource, rien de plus simple pour le chargement : <strong>LoadBitmap</strong>, prenant comme premier paramètre l'instance actuelle, et comme deuxième, son ID entre guillemets, retourne un <em>handle</em> de <em>bitmap</em> directement manipulable. Dans le cas contraire, nous devons utiliser :</p><pre id="r-500828" data-claire-element-id="500828"><code data-claire-semantic="c">HANDLE LoadImage(      
    HINSTANCE hinst,
    LPCTSTR lpszName,
    UINT uType,
    int cxDesired,
    int cyDesired,
    UINT fuLoad
);</code></pre><p id="r-500829" data-claire-element-id="500829">Dont les arguments sont :</p><ul id="r-500842" data-claire-element-id="500842"><li id="r-500831" data-claire-element-id="500831"><p id="r-500830" data-claire-element-id="500830">l'instance actuelle.</p></li><li id="r-500833" data-claire-element-id="500833"><p id="r-500832" data-claire-element-id="500832">Le chemin de l'image.</p></li><li id="r-500835" data-claire-element-id="500835"><p id="r-500834" data-claire-element-id="500834">Le type de l'image. Ici<strong> IMAGE_BITMAP</strong>, mais peut-être aussi <strong>IMAGE_ICON</strong> ou <strong>IMAGE_CURSOR</strong>.</p></li><li id="r-500837" data-claire-element-id="500837"><p id="r-500836" data-claire-element-id="500836">La largeur voulue de l'image. On utilise ici 0 pour tout prendre.</p></li><li id="r-500839" data-claire-element-id="500839"><p id="r-500838" data-claire-element-id="500838">Idem, mais pour la hauteur.</p></li><li id="r-500841" data-claire-element-id="500841"><p id="r-500840" data-claire-element-id="500840">Le mode de chargement. L'énumération de toutes ses valeurs possibles étant redondante, je vous précise juste que nous le mettrons à <strong>LR_LOADFROMFILE</strong> pour le charger à partir du disque.</p></li></ul><p id="r-500843" data-claire-element-id="500843">Donc, dans notre cas ce bout de code ressemblerait alors à ceci :</p><pre id="r-500844" data-claire-element-id="500844"><code data-claire-semantic="c">bitmap = (HBITMAP)LoadImage(NULL,&quot;image.bmp&quot;,IMAGE_BITMAP,0,0,LR_LOADFROMFILE);</code></pre><p id="r-500845" data-claire-element-id="500845">Ensuite, en ce qui concerne l'affichage, vous disposez de deux méthodes possibles, mais la deuxième vous sera présentée plus tard dans une autre de ses possibilités. Voici donc :</p><h6 id="r-drawstate" data-claire-element-id="500860">DrawState</h6><p id="r-500846" data-claire-element-id="500846">Elle a comme prototype :</p><pre id="r-500847" data-claire-element-id="500847"><code data-claire-semantic="c">BOOL DrawState(HDC hdc, HBRUSH hbr, DRAWSTATEPROC lpOutputFunc, LPARAM lData, WPARAM wData, int x, int y, int cx, int cy, UINT fuFlags);</code></pre><p id="r-500848" data-claire-element-id="500848">Cette fonction permet d'afficher l'image avec certains effets visuels (masques, etc.). Comme ce n'est pas ce que nous voulons faire ici, je passerai sur les paramètres inutiles pour nous, il vous incombera de les mettre à <em>NULL</em> (avec si nécessaire, un <em>cast</em>).</p><ul id="r-500857" data-claire-element-id="500857"><li id="r-500850" data-claire-element-id="500850"><p id="r-500849" data-claire-element-id="500849"><strong>hdc</strong> désigne le dc courant dans lequel va être affichée l'image.</p></li><li id="r-500852" data-claire-element-id="500852"><p id="r-500851" data-claire-element-id="500851"><strong>lData</strong> désigne le <em>HBITMAP</em> à afficher (un <em>cast</em> en long sera peut être nécessaire).</p></li><li id="r-500854" data-claire-element-id="500854"><p id="r-500853" data-claire-element-id="500853">Comme d'habitude, <strong>x</strong> et <strong>y</strong> déterminent la position du coin supérieur gauche de l'image, collée dans le dc courant, alors que <strong>cx</strong> et <strong>cy</strong> représentent ses dimensions (donc mises à 0 pour conserver la taille originelle).</p></li><li id="r-500856" data-claire-element-id="500856"><p id="r-500855" data-claire-element-id="500855"><strong>fuFlags</strong> désigne le type de l'image à afficher : <strong>DST_BITMAP</strong>, <strong>DST_ICON</strong> etc..</p></li></ul><p id="r-500858" data-claire-element-id="500858">Alors, dans notre cas :</p><pre id="r-500859" data-claire-element-id="500859"><code data-claire-semantic="c">DrawState(dc,NULL,NULL,(long)bitmap,NULL,10,10,0,0,DST_BITMAP);</code></pre><h5 id="r-code-complet-11" data-claire-element-id="500872">Code complet</h5><p id="r-500862" data-claire-element-id="500862">Voici donc le code complet. Si vous avez votre image en ressources, inversez les commentaires et le code approprié :</p><pre id="r-500863" data-claire-element-id="500863"><code data-claire-semantic="c">case WM_PAINT :
{
        HBITMAP bitmap;
        HDC dc;
        PAINTSTRUCT ps;

        bitmap=LoadImage(NULL,&quot;image.bmp&quot;,IMAGE_BITMAP,0,0,LR_LOADFROMFILE);

        dc = BeginPaint(fenetrePrincipale, &amp;ps);

        DrawState(dc,NULL,NULL,(long)bitmap,NULL,10,10,0,0,DST_BITMAP);

        EndPaint(fenetrePrincipale, &amp;ps);

        DeleteObject(bitmap);

        return 0;
}</code></pre><p id="r-500864" data-claire-element-id="500864">Vous pouvez en faire une fonction si vous vous sentez d'attaque ;) .</p><aside id="r-500866" data-claire-element-id="500866" data-claire-semantic="information"><p id="r-500865" data-claire-element-id="500865">Un approfondissement de ce chapitre avec des techniques avancées vous permettant de faire plus de choses vous sera présenté plus tard dans le cours :) .</p></aside><p id="r-500867" data-claire-element-id="500867"><em>Rédacteur : <strong>Mg++</strong></em></p><p id="r-500868" data-claire-element-id="500868">Je pense que vous avez maintenant assez de bases pour .... oui, un <strong>TP</strong> ! :D</p><div id="r-500870" data-claire-element-id="500870" data-claire-semantic="question"><p id="r-500869" data-claire-element-id="500869">Euh ... :waw:</p></div><p id="r-500871" data-claire-element-id="500871">Pas de panique, si vous avez bien compris, rien ne sera difficile. Il s'agira probablement d'un lecteur audio sous Fmod ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
<span class="arrow"></span>
<span class="next">Les formes géométriques</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">
<span class="next">TP : Un lecteur audio</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPUnlecteuraudio"></a><h2>TP : Un lecteur audio</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
<span class="arrow"></span>
<span class="next">Les images</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
<span class="next">But</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-500875" data-claire-element-id="500875">Voici venu le temps du premier TP. :) Ne vous affolez pas, je vous réserve quelque chose d'assez simple, et toutes les étapes un tantinet plus coriaces vous seront expliquées en guise de pistes.</p><aside id="r-500877" data-claire-element-id="500877" data-claire-semantic="information"><p id="r-500876" data-claire-element-id="500876">Temps approximatif..........: <strong>1h - 1h30</strong><br/>Difficulté...........................: <strong>Débutant</strong></p></aside>
</div><a name="But"></a><h2>But</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">
<span class="arrow"></span>
<span class="next">TP : Un lecteur audio</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
<span class="next">Nécessaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-but-3" data-claire-element-id="500902">But</h4><p id="r-500878" data-claire-element-id="500878">Votre mission, si vous l'acceptez, sera de créer un petit lecteur audio comprenant les fonctions suivantes :</p><ul id="r-500887" data-claire-element-id="500887"><li id="r-500880" data-claire-element-id="500880"><p id="r-500879" data-claire-element-id="500879">Affichage des <strong>informations</strong> de la musique courrament jouée à l'écran, ainsi que les <strong>temps</strong> (écoulé/total).</p></li><li id="r-500882" data-claire-element-id="500882"><p id="r-500881" data-claire-element-id="500881">Fonctions <strong>play</strong> / <strong>pause</strong> / <strong>stop</strong>.</p></li><li id="r-500884" data-claire-element-id="500884"><p id="r-500883" data-claire-element-id="500883">Possibilité de <strong>parcourir le disque</strong> à la recherche d'une musique (pour le moment une seule, cela sera plus simple pour vous).</p></li><li id="r-500886" data-claire-element-id="500886"><p id="r-500885" data-claire-element-id="500885">Présence d'un <strong>seeker</strong>, en fait un <em>slider</em>, permettant de rechercher un endroit particulier dans la musique (vous le connaissez forcément ;) ).</p></li></ul><p id="r-500888" data-claire-element-id="500888">C'est pour l'instant tout ce que je vous propose, cela pour ne pas vous compliquer la vie en guise de premier TP WinAPI. Des propositions d'améliorations vous seront données en fin de tuto, avec quelques éléments utiles pour leur conception.</p><aside id="r-500890" data-claire-element-id="500890" data-claire-semantic="information"><p id="r-500889" data-claire-element-id="500889">Cependant si vous attendez, certaines améliorations en suspens trouveront leur solution dans la suite du cours.</p></aside><p id="r-500891" data-claire-element-id="500891">Je vous propose l'organisation suivante, mais libre à vous de faire la vôtre. Ce sera votre lecteur après tout ^^ :</p><figure id="r-500893" data-claire-element-id="500894"><img id="r-500892" data-claire-element-id="500892" src="medias/uploads.siteduzero.com_files_39001_40000_39797.jpg" alt="Image utilisateur"/></figure><p id="r-500895" data-claire-element-id="500895">(N'ayez pas peur, je l'ai fait sous Paint :-° .)</p><p id="r-500896" data-claire-element-id="500896">Donc, avec cette organisation, le contrôle sur la musique se fera à partir du menu <strong>Music</strong> (qui possèdera donc les entrées-commandes <strong>Play / Pause</strong>, et <strong>Stop</strong>), et le contrôle du <em>player</em> se fera à partir du menu <strong>File</strong>, qui contiendra donc les entrées-commandes <strong>Browse</strong>, et <strong>Quit</strong>.</p><aside id="r-500898" data-claire-element-id="500898" data-claire-semantic="information"><p id="r-500897" data-claire-element-id="500897">Maintenant que vous connaissez assez de bases, je me permets de reprendre mon cher anglais. :p</p></aside><p id="r-500899" data-claire-element-id="500899">Par conséquent, l'intérieur de la fenêtre ne comportera que les informations générales, et un contrôle de type <strong>slider</strong> permettant de &quot;seeker&quot; la musique.</p><div id="r-500901" data-claire-element-id="500901"><p id="r-500900" data-claire-element-id="500900">Rédacteur : <strong>Mg++</strong></p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">
<span class="arrow"></span>
<span class="next">TP : Un lecteur audio</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
<span class="next">Nécessaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Ncessaire"></a><h2>Nécessaire</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
<span class="arrow"></span>
<span class="next">But</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
<span class="next">Pistes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-necessaire-1" data-claire-element-id="500912">Nécessaire</h4><p id="r-500903" data-claire-element-id="500903">Afin de réaliser le TP, vous avez obligatoirement besoin d'un gestionnaire du son et de la musique. A cet effet, j'ai choisi <strong>FMOD</strong>, puisqu'il a déjà été étudié dans le tuto de M@teo21.</p><aside id="r-500905" data-claire-element-id="500905" data-claire-semantic="information"><p id="r-500904" data-claire-element-id="500904">Si jamais il y a des choses que vous ne comprenez pas (concernant FMOD), ou si vous voulez améliorer le TP, je vous conseille d'utiliser <a href="http://www.fmod.org/docs/HTML/FSOUND.html">la documentation de FSOUND</a>.</p></aside><p id="r-500906" data-claire-element-id="500906">De plus, une bonne connaissance du tuto vous sera nécessaire.</p><div id="r-500908" data-claire-element-id="500908" data-claire-semantic="question"><p id="r-500907" data-claire-element-id="500907">Pourquoi nous avoir appris tant de choses si seuls le <em>slider</em> et les menus sont utilisés, ainsi que l'affichage du texte ?</p></div><p id="r-500909" data-claire-element-id="500909">Ce TP est une occasion de vous entraîner. Ce que je vous propose est le strict minimum à son fonctionnement : si vous voulez l'améliorer (et ce sera sûrement le cas, comme je l'espère ;) ), vous aurez besoin de toutes les connaissances acquises : <em>listbox</em> et <em>dialogbox</em> pour la <em>playlist</em>, boutons, textes et j'en passe...</p><div id="r-500911" data-claire-element-id="500911"><p id="r-500910" data-claire-element-id="500910">Rédacteur : <strong>Mg++</strong></p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
<span class="arrow"></span>
<span class="next">But</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
<span class="next">Pistes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Pistes"></a><h2>Pistes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
<span class="arrow"></span>
<span class="next">Nécessaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pistes-1" data-claire-element-id="500999">Pistes</h4><p id="r-500913" data-claire-element-id="500913">Vous aurez sûrement besoin de quelques pistes afin de le créer... je pense notamment au moyen de parcourir le disque dur à la recherche des musiques ;) . Je vais donc vous les détailler ci-après, afin de vous aider le plus possible.</p><p id="r-500914" data-claire-element-id="500914">Voici donc les fameuses pistes (en vrac :-° ) .</p><h5 id="r-le-timer" data-claire-element-id="500926">Le timer</h5><p id="r-500915" data-claire-element-id="500915">Afin de changer les informations à chaque seconde, (pour le temps, le <em>slider</em> etc...) vous devrez utiliser <strong>un timer</strong>. Ceux-ci sont un peu différents de ceux de la SDL : un <em>timer</em>, en WinAPI, envoie à la fenêtre parent de celui-ci une notification toutes les X millisecondes. Très pratiques, ils permettent d'exécuter un bloc d'instructions à chaque intervalle de temps. De plus, ils n'ont pas particulièrement besoin de <em>callback</em>, et sont généralement utilisés sans. Vous devrez donc, à la création de votre fenêtre, initialiser le <em>timer</em> qui, par défaut, n'est pas présent (logique), par un appel à la fonction <strong>SetTimer</strong>.</p><ul id="r-500924" data-claire-element-id="500924"><li id="r-500917" data-claire-element-id="500917"><p id="r-500916" data-claire-element-id="500916">Son premier argument désigne le <em>handle</em> de la fenêtre parent du <em>timer</em>, qui va recevoir la notification régulière.</p></li><li id="r-500919" data-claire-element-id="500919"><p id="r-500918" data-claire-element-id="500918">Son deuxième argument désigne son ID permettant de le distinguer des éventuels autres <em>timer</em>.</p></li><li id="r-500921" data-claire-element-id="500921"><p id="r-500920" data-claire-element-id="500920">Son troisième argument désigne l'intervalle de temps, <strong>en millisecondes</strong>, entre chaque notification.</p></li><li id="r-500923" data-claire-element-id="500923"><p id="r-500922" data-claire-element-id="500922">Son dernier argument désigne son éventuelle fonction <em>callback</em> associée, de type <em>TIMERPROC</em> (non nécessaire, et souvent mis à <em>NULL</em>).</p></li></ul><p id="r-500925" data-claire-element-id="500925">Une fois le <em>timer</em> lancé, la fenêtre parent de celui-ci recevra la notification <strong>WM_TIMER</strong> à chaque intervalle de temps. <br/> Pour arrêter le <em>timer</em>, utilisez <strong>KillTimer</strong> prenant comme premier argument le <em>handle</em> de la fenêtre parent, et en second l'ID du <em>timer</em>.</p><h5 id="r-l-affichage-des-textes" data-claire-element-id="500930">L'affichage des textes</h5><p id="r-500927" data-claire-element-id="500927">L'affichage des textes en utilisant le dessin peut compliquer les choses inutilement. Je vous propose donc d'utiliser une méthode très pratique, qui consiste à créer des contrôles <em>static</em> (avec les positions et dimensions nécessaires bien sûr) pour chaque zone d'information (nom de la musique, son état, et son temps), avec un <em>flag</em> adapté à la zone (pour le temps : <em>SS_RIGHT</em> ; pour le nom : <em>SS_CENTER</em> ; pour le status : <em>SS_LEFT</em>). Et enfin, d'exécuter quand vous voulez changer leur texte <strong>SetWindowText</strong>. Cette fonction, prenant comme premier paramètre le <em>handle</em> de la fenêtre (donc du <em>static</em> ici), et comme deuxième, le texte à afficher, changera les textes des <em>static</em> en les justifiant à la position que vous avez spécifiée.</p><aside id="r-500929" data-claire-element-id="500929" data-claire-semantic="information"><p id="r-500928" data-claire-element-id="500928">Si vous changez la couleur de fond de la fenêtre (vous savez, avec le champ <em>hbrBackground</em>), vous devrez changer le fond des <em>static</em>, et rendre le fond de leurs textes transparents. Pour cela, à la réception de <strong>WM_CTLCOLORSTATIC</strong>, récupérez le HDC contenu dans le <strong>wParam</strong>, rendez le texte transparent avec celui-ci, et enfin retournez une brosse (avec <em>CreateSolidbrush</em>) pour colorer le <em>static</em>.</p></aside><h5 id="r-la-selection-de-musique" data-claire-element-id="500958">La sélection de musique</h5><p id="r-500931" data-claire-element-id="500931">En ce qui concerne la fonction <strong>Browse</strong> (ou parcourir), la manière la plus efficace reste la boîte de dialogue d'ouverture. Vous la connaissez, n'est-ce pas ? C'est ce petit explorateur, vous permettant de sélectionner ce que vous voulez ouvrir :</p><figure id="r-500933" data-claire-element-id="500934"><img id="r-500932" data-claire-element-id="500932" src="medias/uploads.siteduzero.com_files_39001_40000_39799.jpg" alt="Image utilisateur"/></figure><p id="r-500935" data-claire-element-id="500935">Pour la faire apparaître, nous utiliserons la fonction <strong>GetOpenFileName</strong>. Cette dernière, qui prend comme seul paramètre une variable de type <strong>OPENFILENAME</strong>, retourne <em>TRUE</em> si l'utilisateur a cliqué sur &quot;Open&quot;, ou <em>FALSE</em> sur &quot;Cancel&quot;. (En gros, vous ne traiterez que le <em>TRUE</em>.) La structure <em>OPENFILENAME</em> n'a pas le même rôle que <em>PAINTSTRUCT</em> : vous devrez la remplir. Pour cela, je vais vous décrire les champs qui nous sont utiles.</p><aside id="r-500937" data-claire-element-id="500937" data-claire-semantic="warning"><p id="r-500936" data-claire-element-id="500936">Vous devez au préalable la mettre à zéro comme les autres structures remplies.</p></aside><ul id="r-500956" data-claire-element-id="500956"><li id="r-500939" data-claire-element-id="500939"><p id="r-500938" data-claire-element-id="500938">Le champ <strong>lStructSize</strong> doit récupérer la taille de la structure. (Utilisez donc un <em>sizeof</em>.)</p></li><li id="r-500941" data-claire-element-id="500941"><p id="r-500940" data-claire-element-id="500940">Le champ <strong>hwndOwner</strong> récupère le <em>handle</em> de la fenêtre parent. (Donc celle du <em>player</em>.)</p></li><li id="r-500945" data-claire-element-id="500945"><p id="r-500942" data-claire-element-id="500942">Le champ <strong>lpstrFile</strong> récupère une chaîne de caractères qui va recevoir le chemin de la musique sélectionnée par l'utilisateur, lorsque la fonction retourne.</p><aside id="r-500944" data-claire-element-id="500944" data-claire-semantic="information"><p id="r-500943" data-claire-element-id="500943">Je vous conseille de donner la taille <strong>MAX_PATH</strong> à votre chaîne de caractères, puisque c'est la taille maximale d'un chemin de fichier.</p></aside></li><li id="r-500947" data-claire-element-id="500947"><p id="r-500946" data-claire-element-id="500946">Le champ <strong>nMaxFile</strong> récupère la taille maximale, en caractères, acceptée par la chaîne de caractères pointée par <em>lpstrFile</em> (en l'occurrence, <em>MAX_PATH</em>).</p></li><li id="r-500951" data-claire-element-id="500951"><p id="r-500948" data-claire-element-id="500948">Le champ <strong>lpstrFilter</strong> est le plus dur à comprendre pour un débutant. Il s'agit des filtres utilisés : ce paramètre désigne les filtres possibles (description affichée à l'écran) avec leur extension filtrée. Pour cela, Microsoft a inventé un format de chaîne de caractères (appelé dans le jargon <strong>multistring</strong>), composée de plusieurs parties (d'autres chaînes, en fait). Celles-ci sont séparées par des caractères <em>NULL</em>, \0. Les parties fonctionnent par paires : la première partie d'une paire désigne le descriptif affiché à l'utilisateur (il aura le choix entre tous les descriptifs) ; la deuxième, la ou les extensions filtrées (sous la forme *.extension). Dans le cas de plusieurs filtres, ils doivent être séparés par des points-virgules. Comme celui-ci est difficile à comprendre, je vous donne sa valeur : truc.lpstrFilter = &quot;Audio File\0*.mp3;*.wav;*.wma;*.ogg\0\0&quot;;</p><aside id="r-500950" data-claire-element-id="500950" data-claire-semantic="information"><p id="r-500949" data-claire-element-id="500949">La dernière partie de <em>string</em> doit posséder deux caractères <em>NULL</em> consécutifs.</p></aside></li><li id="r-500953" data-claire-element-id="500953"><p id="r-500952" data-claire-element-id="500952">Le champ <strong>nFilterIndex</strong> doit toujours être à 1.</p></li><li id="r-500955" data-claire-element-id="500955"><p id="r-500954" data-claire-element-id="500954">Le champ <strong>Flags</strong> désigne les <em>flag</em> à utiliser : ici, nous utiliserons <strong>OFN_PATHMUSTEXIST</strong> et <strong>OFN_FILEMUSTEXIST</strong>. Ceux-ci permettent de spécifier que le fichier et son chemin doivent exister (pour éviter les bugs).</p></li></ul><p id="r-500957" data-claire-element-id="500957">Une fois ceci fait, vous devrez passer l'adresse de la variable <em>OPENFILENAME</em> remplie à <em>GetOpenFileName</em>. L'appel de cette fonction suffit à afficher la boîte de dialogue, et à remplir le champ pointé par <em>lpstrFile</em> dès que le bouton &quot;Ouvrir&quot; est cliqué.</p><h5 id="r-le-nom-de-la-musique" data-claire-element-id="500960">Le nom de la musique</h5><p id="r-500959" data-claire-element-id="500959">Afin de trouver le nom de la musique, je vous propose une solution toute bête, en attendant la gestion des tags : utilisez <strong>strrchr</strong> sur le chemin de la musique avec le caractère <strong>\</strong> (doublé dans le code). Elle retournera alors la fin du chemin, ou la musique elle- même.</p><h5 id="r-le-module-de-musiques" data-claire-element-id="500985">Le module de musiques</h5><p id="r-500961" data-claire-element-id="500961">En ce qui concerne le module de son, <em>fsound</em>, vous aurez besoin de quelques fonctions pour coder votre lecteur. Voici les nécessaires :</p><ul id="r-500984" data-claire-element-id="500984"><li id="r-500963" data-claire-element-id="500963"><p id="r-500962" data-claire-element-id="500962"><strong>FSOUND_Init</strong> : initialise le module <em>fsound</em>.</p></li><li id="r-500965" data-claire-element-id="500965"><p id="r-500964" data-claire-element-id="500964"><strong>FSOUND_Close</strong> : ferme le module <em>fsound</em>.</p></li><li id="r-500967" data-claire-element-id="500967"><p id="r-500966" data-claire-element-id="500966"><strong>FSOUND_Stream_Open</strong> : ouvre une musique.</p></li><li id="r-500969" data-claire-element-id="500969"><p id="r-500968" data-claire-element-id="500968"><strong>FSOUND_Stream_Play</strong> : joue une musique.</p></li><aside id="r-500971" data-claire-element-id="500971" data-claire-semantic="information"><p id="r-500970" data-claire-element-id="500970">Jusqu'ici, vous les connaissez toutes, du tuto de M@teo21. Mais les suivantes n'y sont pas expliquées, vous aurez donc besoin de vous rendre sur <a href="http://www.fmod.org/docs/HTML/FSOUND.html">la doc de <em>fsound</em></a> pour des informations les concernant.</p></aside><li id="r-500973" data-claire-element-id="500973"><p id="r-500972" data-claire-element-id="500972"><strong>FSOUND_GetPaused</strong> : informe de l'état de la pause.</p></li><li id="r-500975" data-claire-element-id="500975"><p id="r-500974" data-claire-element-id="500974"><strong>FSOUND_SetPaused</strong> : change l'état de la pause.</p></li><li id="r-500977" data-claire-element-id="500977"><p id="r-500976" data-claire-element-id="500976"><strong>FSOUND_Stream_Stop</strong> : stoppe la musique.</p></li><li id="r-500979" data-claire-element-id="500979"><p id="r-500978" data-claire-element-id="500978"><strong>FSOUND_Stream_GetLengthMs</strong> : récupère le temps total de la musique.</p></li><li id="r-500981" data-claire-element-id="500981"><p id="r-500980" data-claire-element-id="500980"><strong>FSOUND_Stream_SetTime</strong> : définit le temps écoulé / actuel de la musique.</p></li><li id="r-500983" data-claire-element-id="500983"><p id="r-500982" data-claire-element-id="500982"><strong>FSOUND_Stream_GetTime</strong> : récupère le temps écoulé/actuel de la musique</p></li></ul><h5 id="r-fin-des-pistes-p" data-claire-element-id="500998">Fin des pistes :p</h5><p id="r-500986" data-claire-element-id="500986">Normalement, avec ces pistes et votre bagage intellectuel acquis durant ce tuto, vous pourriez y arriver sans aide.</p><p id="r-500987" data-claire-element-id="500987">Vous devez avoir vu au préalable parmi les contrôles : le <em>static</em> et le <em>seeker</em>. En outre, vous devez connaître toutes les bases, mais je suis sûr que vous les avez déjà. ;)</p><p id="r-500988" data-claire-element-id="500988">Allez, pour vous faire une idée du programme final :</p><figure id="r-500990" data-claire-element-id="500991"><img id="r-500989" data-claire-element-id="500989" src="medias/uploads.siteduzero.com_files_42001_43000_42100.jpg" alt="Image utilisateur"/></figure><aside id="r-500993" data-claire-element-id="500993" data-claire-semantic="information"><p id="r-500992" data-claire-element-id="500992">Si vous n'y arrivez pas, n'hésitez pas à poster dans le forum du SDZ.</p></aside><p id="r-500994" data-claire-element-id="500994">Et maintenant, à vous de jouer ! :pirate:</p><p id="r-500995" data-claire-element-id="500995">Bonne chance ! :)</p><div id="r-500997" data-claire-element-id="500997"><p id="r-500996" data-claire-element-id="500996">Rédacteur : <strong>Mg++</strong></p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
<span class="arrow"></span>
<span class="next">Nécessaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Correction"></a><h2>Correction</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
<span class="arrow"></span>
<span class="next">Pistes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
<span class="next">Améliorations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-correction-166" data-claire-element-id="501024">Correction</h4><p id="r-501000" data-claire-element-id="501000">J'espère que vous vous êtes bien débrouillés. ^^ Dans le cas contraire (ou pour voir comment un autre aurait fait, tout simplement), voici une archive contenant le projet complet (.cbp et codes sources) pour vous faire les dents :magicien: :</p><p id="r-501001" data-claire-element-id="501001"><a href="http://esynapse.free.fr/Datas/Public/TP.zip">Télécharger l'archive du projet !</a><br/> Si jamais mon site est indisponible ou si le lien est rompu d'une quelconque manière, pour raison d'Etat par exemple, voici une recopie du code source :ninja: :</p><div id="r-501021" data-claire-element-id="501021"><ul id="r-501020" data-claire-element-id="501020"><li id="r-501004" data-claire-element-id="501004"><p id="r-501002" data-claire-element-id="501002"><em>Resource.rc</em></p><pre id="r-501003" data-claire-element-id="501003"><code data-claire-semantic="c">/**************************************************
    Nom du fichier : Resource.rc
    Appartenance au projet : TP d'un lecteur audio pour le SDZ
    Créateur : kidpaddle2
    
    Rôle du fichier : Contient le template du menu 
**********************************************/

#include &lt;windows.h&gt;

#include &quot;Constants.h&quot;

ID_MENU MENU
BEGIN
    POPUP &quot;File&quot;
    BEGIN
        MENUITEM &quot;Browse&quot;, ID_B_BROWSE
        MENUITEM SEPARATOR
        MENUITEM &quot;Quit&quot;, ID_B_QUIT
    END
    POPUP &quot;Music&quot;
    BEGIN
        MENUITEM &quot;Play/Pause&quot;, ID_B_PLAYPAUSE
        MENUITEM &quot;Stop&quot;, ID_B_STOP
    END
END</code></pre></li><li id="r-501007" data-claire-element-id="501007"><p id="r-501005" data-claire-element-id="501005"><em>Constants.h</em></p><pre id="r-501006" data-claire-element-id="501006"><code data-claire-semantic="c">/*************************************************************************
    Nom du fichier : Constants.h
    Appartenance au projet : TP d'un lecteur audio pour le SDZ
    Créateur : kidpaddle2

    Rôle du fichier : Définir les constantes nécessaires aux manipulations
                      de contrôles (principalement des ID)
**************************************************************************/

///Protection contre les inclusions multiples
#ifndef CONSTANTES_H
#define CONSTANTES_H

///Définition des constantes
#define ID_B_PLAYPAUSE 0
#define ID_B_STOP 1
#define ID_B_BROWSE 2
#define ID_B_QUIT 3

///Fin de la protection
#endif</code></pre></li><li id="r-501010" data-claire-element-id="501010"><p id="r-501008" data-claire-element-id="501008"><em>Functions.h</em></p><pre id="r-501009" data-claire-element-id="501009"><code data-claire-semantic="c">/*************************************************************************
    Nom du fichier : Functions.h
    Appartenance au projet : TP d'un lecteur audio pour le SDZ
    Créateur : kidpaddle2

    Rôle du fichier : contient les prototypes des fonctions
**************************************************************************/

///Protection contre les inclusions multiples
#ifndef FUNCTIONS_H
#define FUNCTIONS_H

///Includes nécessaires
#include &lt;windows.h&gt;
#include &lt;commctrl.h&gt;
#include &quot;Music.h&quot;

///Prototypes des fonctions
void loadMusic(HWND, Music*);
void createStatics (HWND[], HWND, HINSTANCE);
void adaptSeeker (HWND, const Music);

///Fin de la protection
#endif</code></pre></li><li id="r-501013" data-claire-element-id="501013"><p id="r-501011" data-claire-element-id="501011"><em>Functions.cpp</em></p><pre id="r-501012" data-claire-element-id="501012"><code data-claire-semantic="c">/*************************************************************************
    Nom du fichier : Functions.cpp
    Appartenance au projet : TP d'un lecteur audio pour le SDZ
    Créateur : kidpaddle2

    Rôle du fichier : définir les fonctions nécessaires au fonctionnement
                      du player
**************************************************************************/

///Includes
#include &quot;Functions.h&quot;

/** Fonction : loadMusic
    Paramètre 1 : Fenêtre parent du contrôle
    Paramètre 2 : adresse de l'objet &quot;Music&quot; pour charger la musique
    Rôle : Charger la musique grâce à une boîte de dialogue d'ouverture,
           inscrire le chemin et nom, et déterminer le temps total de la
           musique**/
void loadMusic (HWND parentWindow, Music *musicToLoad)
{
    //Structure nécessaire à la boîte de dialogue d'ouverture
    OPENFILENAME toGetFileName;
    //Variable qui va recevoir le chemin de la musique
    char filePath[MAX_PATH] = &quot;&quot;;

    //Remplissage de la structure
    ZeroMemory(&amp;toGetFileName, sizeof(OPENFILENAME));
    toGetFileName.lStructSize = sizeof(OPENFILENAME);
    toGetFileName.hwndOwner = parentWindow;
    toGetFileName.lpstrFile = filePath;
    toGetFileName.nMaxFile = MAX_PATH;
    //Avec un filtre de fichiers audio
    toGetFileName.lpstrFilter = &quot;Audio File\0*.mp3;*.wav;*.ogg;*.wma\0\0&quot;;
    toGetFileName.nFilterIndex = 1;
    toGetFileName.Flags = OFN_PATHMUSTEXIST | OFN_FILEMUSTEXIST;

    //Si l'utilisateur clique sur &quot;Ouvrir&quot;
    if(GetOpenFileName(&amp;toGetFileName) == TRUE)
    {
        //Copier le chemin récupéré dans le chemin de la musique
        strcpy(musicToLoad-&gt;path, filePath);
        //Inscrire le nom de la musique
        strcpy(musicToLoad-&gt;name, strrchr(musicToLoad-&gt;path, '\\'));
        //Si la musique est changée, on ferme la précédente
        FSOUND_Stream_Close(musicToLoad-&gt;stream);
        //Ouverture de la musique
        musicToLoad-&gt;stream = FSOUND_Stream_Open(musicToLoad-&gt;path, 0, 0, 0);
        //Récupération du temps total
        musicToLoad-&gt;totalTime = FSOUND_Stream_GetLengthMs(musicToLoad-&gt;stream)/1000;
    }

    return;
}

/** Fonction : createStatics
    Paramètre 1 : tableau de statics à créer
    Paramètre 2 : fenêtre parent
    Paramètre 3 : Instance actuelle
    Rôle : Créer les statics montrant les infos sur la musique**/
void createStatics (HWND statics[], HWND parentWindow, HINSTANCE instance)
{
    //Création du premier static (nom de la musique)
    statics[0] = CreateWindow(&quot;STATIC&quot;,
                            &quot;No musics loaded.&quot;,
                            WS_CHILD | WS_VISIBLE | SS_CENTER | SS_NOPREFIX,
                            10, 11, 370, 15,
                            parentWindow,
                            (HMENU)NULL,
                            instance,
                            NULL);

    //Création du deuxième static (status de la musique)
    statics[1] = CreateWindow(&quot;STATIC&quot;,
                            &quot;Currently idle.&quot;,
                            WS_CHILD | WS_VISIBLE | SS_LEFT | SS_NOPREFIX,
                            10, 55, 100, 15,
                            parentWindow,
                            (HMENU)NULL,
                            instance,
                            NULL);

    //Création du troisième static (temps de la musique)
    statics[2] = CreateWindow(&quot;STATIC&quot;,
                            &quot;&quot;,
                            WS_CHILD | WS_VISIBLE | SS_RIGHT | SS_NOPREFIX,
                            240, 55, 140, 15,
                            parentWindow,
                            (HMENU)NULL,
                            instance,
                            NULL);

    return;
}

/** Fonction : adaptSeeker
    Paramètre 1 : seeker
    Paramètre 2 : objet musique chargé
    Rôle : Adapter les marges du seeker en fonction du temps total de la
           musique **/
void adaptSeeker (HWND seeker, const Music music)
{
    //Définit la marge supérieure du seeker au temps total de la musique
    SendMessage(seeker, TBM_SETRANGE, FALSE, MAKELONG(0,music.totalTime));

    return;
}</code></pre></li><li id="r-501016" data-claire-element-id="501016"><p id="r-501014" data-claire-element-id="501014"><em>Music.h</em></p><pre id="r-501015" data-claire-element-id="501015"><code data-claire-semantic="c">#ifndef MUSIC_H
#define MUSIC_H

#include &lt;stdio.h&gt;
#include &lt;fmod/fmod.h&gt;

typedef enum Status
{
    playing = 0, paused = 1, stopped = 2, idle = 3
}Status;

typedef struct st1
{
    int elapsedTime;
    int totalTime;
    char allTimes[20];

    char name[256];
    char path[MAX_PATH];

    FSOUND_STREAM *stream;
}Music;

#endif</code></pre></li><li id="r-501019" data-claire-element-id="501019"><p id="r-501017" data-claire-element-id="501017"><em>main.cpp</em></p><pre id="r-501018" data-claire-element-id="501018"><code data-claire-semantic="c">/*************************************************************************
    Nom du fichier : main.cpp
    Appartenance au projet : TP d'un lecteur audio pour le SDZ
    Créateur : kidpaddle2

    Rôle du fichier : point d'entrée du programme et gestion des évènements
                      (callbacks)
**************************************************************************/

///Includes
#include &lt;windows.h&gt;
#include &lt;fmod/fmod.h&gt;

#include &quot;Constants.h&quot;
#include &quot;Music.h&quot;
#include &quot;Functions.h&quot;

///Instance actuelle (on en a besoin partout, donc on la déclare globale).
HINSTANCE instance;

///Prototype de la procédure callback du player
LRESULT CALLBACK playerProc(HWND, UINT, WPARAM, LPARAM);

///Winmain
int WinMain (HINSTANCE hThisInstance, HINSTANCE hPreviousInstance,
LPSTR lpCmdLine, int nFursterStill)
{
    HWND player = NULL;
    MSG message;
    WNDCLASS playerClass;

    //Remplissage de l'instance globale avec l'instance actuelle
    instance = hThisInstance;

    //Définition de la classe de fenêtre
    playerClass.style = 0;
    playerClass.lpfnWndProc = playerProc;
    playerClass.cbClsExtra = 0;
    playerClass.cbWndExtra = 0;
    playerClass.hInstance = instance;
    playerClass.hIcon = LoadIcon(NULL, IDI_APPLICATION);
    playerClass.hCursor = LoadCursor(NULL, IDC_ARROW);
    //Remarquez la brosse employée pour peindre le fond de la fenêtre
    playerClass.hbrBackground = CreateSolidBrush(RGB(0,0,0));
    //Le menu est associé
    playerClass.lpszMenuName = &quot;ID_MENU&quot;;
    playerClass.lpszClassName = &quot;pClass&quot;;

    if(!RegisterClass(&amp;playerClass))
        return FALSE;

    //Création de la fenêtre du player
    player = CreateWindow(&quot;pClass&quot;, &quot;Basic Music Player&quot;, WS_OVERLAPPEDWINDOW,
                                   CW_USEDEFAULT, CW_USEDEFAULT, 400, 130,
                                                   NULL, NULL, hThisInstance, NULL);
    if (!player) return FALSE;

    //On l'affiche
    ShowWindow(player, nFursterStill);
    UpdateWindow(player);

    //Boucle évènementielle
    while (GetMessage(&amp;message, NULL, 0, 0))
    {
        TranslateMessage(&amp;message);
        DispatchMessage(&amp;message);
    }
    return message.wParam;
}

///Procédure callback de la fenêtre du player
LRESULT CALLBACK playerProc(HWND playerWindow, UINT message, WPARAM wParam, LPARAM lParam)
{
    /*Variables déclarées statiques pour qu'elles soient toujours valides
    tout au long du programme*/
    static Music music = {0};
    //Handles des 3 statics (pour les infos) et du seeker
    static HWND infos[3] = {NULL}, seeker = NULL;
    //Status
    static Status status = idle;

    switch (message)
    {
        case WM_CREATE:
            //Création de tous les contrôles
            createStatics(infos, playerWindow, instance);

            seeker = CreateWindow((LPCTSTR)TRACKBAR_CLASS,
                      (LPCTSTR)&quot;&quot;,
                      (DWORD)WS_CHILD|WS_VISIBLE | TBS_NOTICKS,
                      10, 30, 370, 20,
                      playerWindow,
                      (HMENU)NULL,
                      instance,
                      NULL);

            //Initialisation de fsound
            FSOUND_Init(44100, 32, 0);

            //Lancement du timer nécessaire
            SetTimer(playerWindow, 0, 1000, (TIMERPROC)NULL);
            return 0;

        case WM_COMMAND:
            switch(LOWORD(wParam))
            {
                /*Si la commande &quot;Quit&quot; du menu est cliquée, on envoie WM_DESTROY à la fenêtre*/
                case ID_B_QUIT:
                    SendMessage(playerWindow, WM_DESTROY, 0, 0);
                    break;

                /*Si la commande &quot;Browse&quot; du menu est cliquée, on s'occupe de charger la musique*/
                case ID_B_BROWSE:
                    //Donc on charge la musique (voir Functions.cpp)
                    loadMusic(playerWindow, &amp;music);
                    /*On adapte les marges du seeker en conséquence (du temps total)*/
                    adaptSeeker(seeker, music);
                    //On met à jour le nom de la musique
                    SetWindowText(infos[0], music.name);
                    break;

                //Si la commande &quot;Play / Pause&quot; du menu est cliquée et :...
                case ID_B_PLAYPAUSE:
                    /*...si aucune musique n'est jouée, et que la pause n'est pas enclenchée*/
                    if(!FSOUND_IsPlaying(0) &amp;&amp; !FSOUND_GetPaused(0))
                        //Alors on joue la musique chargée
                        FSOUND_Stream_Play(0, music.stream);
                    //...sinon si la pause est enclenchée
                    else if(FSOUND_GetPaused(0))
                        //On l'enlève
                        FSOUND_SetPaused(0, FALSE);
                    //...sinon si on est en pleine lecture
                    else if(FSOUND_IsPlaying(0))
                        //Alors on enclenche la pause
                        FSOUND_SetPaused(0, TRUE);
                    //...sinon on fait rien.
                    else
                        break;
                    break;

                //Si la commande &quot;Stop&quot; du menu est cliquée...
                case ID_B_STOP:
                    //...on stoppe la musique chargée
                    FSOUND_Stream_Stop(music.stream);
                    break;
            }
            return 0;

        //Si le seeker est bougé...
        case WM_HSCROLL:
            //On trouve la position changée du seeker...
            music.elapsedTime = SendMessage(seeker, TBM_GETPOS, 0, 0);
            //... et on applique à la musique le temps demandé
            FSOUND_Stream_SetTime(music.stream, music.elapsedTime*1000);
            break;

        //A chaque signal de timer...
        case WM_TIMER:
            //Et si la musique est jouée
            if(FSOUND_IsPlaying(0))
            {
                /*Et si la pause est enclenchée, on rafraîchît le status en conséquence*/
                if(FSOUND_GetPaused(0))
                {
                    /* Seulement si ça ne l'est pas déjà */
                    if(status != paused)
                    {
                        SetWindowText(infos[1], &quot;Paused.&quot;);

                        //Le status est changé
                        status = paused;
                    }
                }
                //Si la pause ne l'est pas
                else
                {
                    //On rafraîchit aussi le status en conséquence
                    /* Seulement si ça ne l'est pas déjà */
                    if(status != playing)
                    {
                        SetWindowText(infos[1], &quot;Playing...&quot;);

                        //Le status est changé
                        status = playing;
                    }

                    //On récupère le temps actuel de la musique
                    music.elapsedTime = FSOUND_Stream_GetTime(music.stream)/1000;

                    /*On fabrique une chaine de caractères montrant l'avancée du temps*/
                    sprintf(music.allTimes,
                            &quot;%d\' %d\&quot; / %d\' %d\&quot;&quot;,
                            music.elapsedTime/60,
                            music.elapsedTime%60,
                            music.totalTime/60,
                            music.totalTime%60);

                    //... et on l'affiche dans l'emplacement prévu
                    SetWindowText(infos[2], music.allTimes);
                    //Et enfin on met à jour le seeker
                    SendMessage(seeker, TBM_SETPOS, TRUE, music.elapsedTime);
                }
            }
            //Si la musique n'est pas en train d'être jouée
            else
            {
                /*On rafraîchit le status et l'avancée du temps en conséquence*/
                /* Seulement si ça ne l'est pas déjà */
                if((status != stopped) &amp;&amp; (status != idle))
                {
                    SetWindowText(infos[1], &quot;Stopped.&quot;);
                    SetWindowText(infos[2], &quot;&quot;);

                    //Et on met à zéro le seeker
                    SendMessage(seeker,TBM_SETPOS, TRUE, 0);

                    //Le status change
                    status = stopped;
                }
            }
            return 0;

        //Si le sontrôle demande à être recoloré...
        case WM_CTLCOLORSTATIC:
        {
            //On récupère un DC dessus...
            HDC textDC = (HDC)wParam;
            SetTextColor(textDC, RGB(0,255,0));
            //Qui permet de nous donner la main sur le texte à rendre transparent
            SetBkMode(textDC, TRANSPARENT);

            static HBRUSH brush = CreateSolidBrush(RGB(0,0,0)); /* Il vaut mieux la mettre en static pour éviter des bugs graphiques au chargement */
       
            /*Et finalement on retourne une brosse pour colorer son fond. (la même que la fenêtre principale)*/
            return (LRESULT)brush;
        }

        //Si on demande à quitter
        case WM_DESTROY:
            //On ferme fsound
            FSOUND_Close();
            //et on quitte...fini.
            PostQuitMessage(0);
            return 0;

        default:
            return DefWindowProc(playerWindow, message, wParam, lParam);
    }
}</code></pre></li></ul></div><div id="r-501023" data-claire-element-id="501023"><p id="r-501022" data-claire-element-id="501022">Rédacteur : <strong>Mg++</strong></p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
<span class="arrow"></span>
<span class="next">Pistes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
<span class="next">Améliorations</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Amliorations"></a><h2>Améliorations</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
<span class="arrow"></span>
<span class="next">Correction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">
<span class="next">Les événements</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-ameliorations-25" data-claire-element-id="501041">Améliorations</h4><p id="r-501025" data-claire-element-id="501025">Ce lecteur est un bon début, mais il n'est pas parfait (nooon sans blague ? :p ). Je vous propose ici quelques idées d'améliorations avec, si besoin est, quelques astuces pour les concrétiser.</p><h5 id="r-selection-multiple-1" data-claire-element-id="501028">Sélection multiple</h5><p id="r-501026" data-claire-element-id="501026">Vous pourriez permettre au lecteur de récupérer plusieurs musiques au lieu d'une dans la boîte de dialogue d'ouverture. Comme vous avez pu le voir, elle ne le permet pas. Pour cela, ajoutez à la liste de flags <strong>OFN_MULTISELECT</strong>, qui permettra de faire une sélection multiple. Mais... je ne vous en ai pas parlé car c'est un peu plus dur que pour la sélection unique. ;) En effet, vous ne disposez que d'une chaîne de sortie (<em>lpszFile</em>). Pas de panique, Microsoft est là. Dans le cas d'une sélection multiple, la chaîne se transforme alors en une <em>multistring</em>, dont je vous ai parlé plus haut. Le chemin du dossier où se trouvent les musiques, ainsi que chaque nom de musique sélectionnée qu'il précède, sont alors séparés par un caractère <em>NULL</em>, et le dernier caractère est doublé. Il va donc falloir que vous inventiez une fonction (je ne vais pas la donner, sinon ce n'est pas drôle :lol: ) permettant de découper la chaîne en un tableau de <em>string</em>, que vous stockerez alors. Voici alors son format, en guise de coup de pouce ^^ :</p><pre id="r-501027" data-claire-element-id="501027"><code data-claire-semantic="c">&quot;C:\\Dossier1\\Dossier2\\Musique1.mp3\0Musique2.wav\0Musique3.ogg\0\0&quot;</code></pre><h5 id="r-gestion-de-plusieurs-musiques" data-claire-element-id="501030">Gestion de plusieurs musiques</h5><p id="r-501029" data-claire-element-id="501029">Après l'avoir intégré, un système de progression entre les musiques serait intéressant : l'ajout de 'Next', 'Previous' serait alors adapté, et un choix entre lecture normale ou aléatoire pourrait être ajouté.</p><h5 id="r-ajout-d-une-playlist" data-claire-element-id="501032">Ajout d'une <em>playlist</em></h5><p id="r-501031" data-claire-element-id="501031">Une <em>playlist</em> pourrait alors être ajoutée, pour représenter visuellement les musiques chargées. Un double-clic sur une entrée de celle-ci lançerait alors la musique.</p><h5 id="r-fonctions-habituelles" data-claire-element-id="501034">Fonctions habituelles</h5><p id="r-501033" data-claire-element-id="501033">Après, pourraient être insérées les fonctions normales, tel que réglage du volume, etc.</p><h5 id="r-possibilites-autres" data-claire-element-id="501040">Possibilités autres</h5><p id="r-501035" data-claire-element-id="501035">D'autres possibilités seront vues plus en détail lors de la progression du cours, comme un <em>skin</em> élaboré dans une fenêtre non rectangulaire en utilisant les régions, la possibilité de minimiser l'application, etc.</p><p id="r-501036" data-claire-element-id="501036">Déjà, si vous intégrez toutes ces idées, cela prouvera que vous vous débrouillez bien avec le winAPI. Quoiqu'il arrive, gardez une organisation propre, et les ajouts se feront sans problème. :ange:</p><div id="r-501038" data-claire-element-id="501038"><p id="r-501037" data-claire-element-id="501037">Rédacteur : <strong>Mg++</strong></p></div><p id="r-501039" data-claire-element-id="501039">Et voilà, ce premier TP est fini :) Je vous retrouve après dans la suite du cours, et j'espère que ce TP vous a fait du bien. ;) <br/><em>Rédacteur : <strong>kidpaddle2</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
<span class="arrow"></span>
<span class="next">Correction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">
<span class="next">Les événements</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesvnements"></a><h2>Les événements</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
<span class="arrow"></span>
<span class="next">Améliorations</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
<span class="next">Evénements &quot;clavier&quot;</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-501043" data-claire-element-id="501043">Vous avez jusqu'ici exclusivement travaillé avec des contrôles pour intéragir avec la fenêtre. Je vous propose ici de traiter manuellement les principaux événements du clavier et de la souris.</p><aside id="r-501045" data-claire-element-id="501045" data-claire-semantic="information"><p id="r-501044" data-claire-element-id="501044">Ces événements sont captés sous forme de messages (notifications) par la fenêtre concernée, si elle a le focus.</p></aside>
</div><a name="Evnementsquotclavierquot"></a><h2>Evénements &quot;clavier&quot;</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">
<span class="arrow"></span>
<span class="next">Les événements</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
<span class="next">Evénements &quot;souris&quot;</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-evenements-clavier" data-claire-element-id="501080">Evénements &quot;clavier&quot;</h4><p id="r-501046" data-claire-element-id="501046">Il y a trois événements vraiment utilisés :</p><ul id="r-501053" data-claire-element-id="501053"><li id="r-501048" data-claire-element-id="501048"><p id="r-501047" data-claire-element-id="501047"><em>WM_KEYDOWN</em></p></li><li id="r-501050" data-claire-element-id="501050"><p id="r-501049" data-claire-element-id="501049"><em>WM_CHAR</em></p></li><li id="r-501052" data-claire-element-id="501052"><p id="r-501051" data-claire-element-id="501051"><em>WM_KEYUP</em></p></li></ul><p id="r-501054" data-claire-element-id="501054">Chacun de ces messages survient l'un après l'autre (dans l'ordre), à chaque fois qu'une touche est utilisée.</p><aside id="r-501056" data-claire-element-id="501056" data-claire-semantic="information"><p id="r-501055" data-claire-element-id="501055">Si la touche enfoncée n'est pas un caractère, <em>WM_CHAR</em> n'est pas envoyé.</p></aside><p id="r-501057" data-claire-element-id="501057">Voici un schéma résumant le tout :</p><figure id="r-501059" data-claire-element-id="501060"><img id="r-501058" data-claire-element-id="501058" src="medias/uploads.siteduzero.com_files_63001_64000_63135.jpg" alt="Image utilisateur"/></figure><p id="r-501061" data-claire-element-id="501061"><em>Schéma des messages générés tout au long de l'utilisation d'une touche</em><br/> Comme vous pouvez le voir, <em>WM_KEYDOWN</em> survient lors de l'enfoncement d'une touche, <em>WM_CHAR</em> si cette touche désigne un caractère, et <em>WM_KEYUP</em> lors du relâchement de la touche.</p><p id="r-501062" data-claire-element-id="501062">Tous ces messages prennent comme paramètre :</p><ul id="r-501067" data-claire-element-id="501067"><li id="r-501064" data-claire-element-id="501064"><p id="r-501063" data-claire-element-id="501063">WPARAM : code virtuel de la touche</p></li><li id="r-501066" data-claire-element-id="501066"><p id="r-501065" data-claire-element-id="501065">LPARAM : informations de répétition, d'état de touche système etc.</p></li></ul><p id="r-501068" data-claire-element-id="501068">Le paramètre LPARAM n'est souvent pas utilisé. Par contre, le premier permet de déterminer la touche qui a généré l'événement, à travers une correspondance code/touche, dont le tableau est disponible <a href="http://msdn2.microsoft.com/en-us/library/ms927178.aspx">à l'adresse suivante</a> (je n'ai pas eu le courage de tout retranscrire dans un tableau zCode, mais si une âme charitable pouvait le faire, je lui en serait reconnaissant ^^ ).</p><aside id="r-501070" data-claire-element-id="501070" data-claire-semantic="information"><p id="r-501069" data-claire-element-id="501069">Pour les caractères (A-&gt;Z :p ), leur code virtuel n'est autre que leur valeur. Par exemple, le code virtuel de la touche a n'est autre que 'a' (ou 97 en ASCII), ou 'A' (ou 65 en ASCII), si la touche est majuscule. Naturellement, vous connaissez tout ça ;)</p></aside><p id="r-501071" data-claire-element-id="501071">Il n'y a pas grand-chose à dire d'autre, donc un code complet devrait suffire à vous mettre en tête leur utilisation.</p><aside id="r-501073" data-claire-element-id="501073" data-claire-semantic="information"><p id="r-501072" data-claire-element-id="501072">Les codeurs C++ pourraient alors avoir l'occasion d'utiliser le conteneur standard &quot;map&quot; pour la correspondance entre le nom de la touche, et son code virtuel.</p></aside><aside id="r-501075" data-claire-element-id="501075" data-claire-semantic="information"><p id="r-501074" data-claire-element-id="501074">Pour ceux que ça intéresse, vous pouvez récupérer l'état actuel d'une touche du clavier en utilisant <em>GetKeyState()</em>, prenant comme paramètre le code virtuel de la touche visée (attention, pour les caractères le paramètre passé doit être leur valeur ASCII). Son retour est (j'ai simplifié) inférieur à 0 si la touche est enfoncée.</p></aside><h5 id="r-exemple-145" data-claire-element-id="501079">Exemple</h5><p id="r-501076" data-claire-element-id="501076">Voici donc un exemple de traitement des trois messages (non compilable), qui permet simplement de quitter le programme à l'appui de la touche &quot;Echap&quot;, et d'ajouter à une string les éventuels caractères entrés.</p><pre id="r-501077" data-claire-element-id="501077"><code data-claire-semantic="c">//Soit wParam et lParam les WPARAM et LPARAM (normal ^^ )
//Soit buffer une instance de std::string

/* switch du MSG dans la callback de la fenêtre */
case WM_KEYDOWN:
//ou WM_KEYUP
    switch(wParam)
    {
        case VK_ESCAPE:
            PostQuitMessage(0);
            break;

        default:
            break;
    }
    return 0;

case WM_CHAR:
    buffer += (char)wParam;
    return 0;</code></pre><p id="r-501078" data-claire-element-id="501078">C'est tout bête, n'est-ce pas ?<br/><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">
<span class="arrow"></span>
<span class="next">Les événements</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
<span class="next">Evénements &quot;souris&quot;</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Evnementsquotsourisquot"></a><h2>Evénements &quot;souris&quot;</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
<span class="arrow"></span>
<span class="next">Evénements &quot;clavier&quot;</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">
<span class="next">Esthétique avancée</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-evenements-souris" data-claire-element-id="501139">Evénements &quot;souris&quot;</h4><h5 id="r-les-boutons-14" data-claire-element-id="501115">Les boutons</h5><p id="r-501081" data-claire-element-id="501081">La souris génère deux messages consécutifs à l'appui d'un de ses bouton, chacun décliné en trois messages, selon le bouton concerné. La nomenclature de tels message est alors WM_BOUTONMESSAGE où :</p><ul id="r-501098" data-claire-element-id="501098"><li id="r-501083" data-claire-element-id="501083"><p id="r-501082" data-claire-element-id="501082">BOUTON est l'identifiant du bouton ayant généré le message pouvant être :</p></li><ul id="r-501090" data-claire-element-id="501090"><li id="r-501085" data-claire-element-id="501085"><p id="r-501084" data-claire-element-id="501084">L (bouton gauche)</p></li><li id="r-501087" data-claire-element-id="501087"><p id="r-501086" data-claire-element-id="501086">R (bouton droit)</p></li><li id="r-501089" data-claire-element-id="501089"><p id="r-501088" data-claire-element-id="501088">M (bouton du milieu)</p></li></ul><li id="r-501092" data-claire-element-id="501092"><p id="r-501091" data-claire-element-id="501091">MESSAGE le type d'événement, pouvant être :</p></li><ul id="r-501097" data-claire-element-id="501097"><li id="r-501094" data-claire-element-id="501094"><p id="r-501093" data-claire-element-id="501093">BUTTONDOWN</p></li><li id="r-501096" data-claire-element-id="501096"><p id="r-501095" data-claire-element-id="501095">BUTTONUP</p></li></ul></ul><p id="r-501099" data-claire-element-id="501099">On retrouve ici les suffixes -DOWN et -UP, montrant que durant l'utilisation d'un bouton, WM_(L, R ou M)BUTTONDOWN est envoyé quand il est enfoncé, et WM_(L, R ou M)BUTTONUP quand il est relâché.</p><p id="r-501100" data-claire-element-id="501100">Ces messages ont tous les mêmes paramètres WPARAM et LPARAM : le paramètre WPARAM contient un masque de bouton, c'est-à-dire le code virtuel de touches/boutons étant enfoncés lorsque l'événement survient (équivalent à la traduction d'appuis simultanés), dont les valeurs peuvent être :</p><ul id="r-501109" data-claire-element-id="501109"><li id="r-501102" data-claire-element-id="501102"><p id="r-501101" data-claire-element-id="501101"><em>MK_CONTROL</em> : la touche Ctrl est enfoncée</p></li><li id="r-501104" data-claire-element-id="501104"><p id="r-501103" data-claire-element-id="501103"><em>MK_LBUTTON</em> : le bouton gauche est enfoncé</p></li><li id="r-501106" data-claire-element-id="501106"><p id="r-501105" data-claire-element-id="501105"><em>MK_RBUTTON</em> : Le bouton droit est enfoncé</p></li><li id="r-501108" data-claire-element-id="501108"><p id="r-501107" data-claire-element-id="501107"><em>MK_SHIFT</em> : la touche SHIFT est enfoncée</p></li></ul><aside id="r-501111" data-claire-element-id="501111" data-claire-semantic="information"><p id="r-501110" data-claire-element-id="501110">Ces flags pouvant être combinés, vous pouvez retrouver la présence de l'un ou l'autre en utilisant l'opérateur <strong>&amp;</strong>. Pour plus d'informations, reportez-vous au <a href="http://www.siteduzero.com/tuto-3-16429-1-les-flags.html">tutorial sur les flags</a>.</p></aside><p id="r-501112" data-claire-element-id="501112">Par ailleurs, le paramètre LPARAM contient les coordonnées du curseur lors de l'émission du message : le LOWORD contient son abscisse, et le HIWORD son ordonnée. Ces coordonnées peuvent êtres récupérées à l'aide des macros <em>GET_X_LPARAM(LPARAM)</em> (pour l'abscisse) et <em>GET_Y_LPARAM(LPARAM)</em> (pour l'ordonnée), ou encore <em>MAKEPOINTS(LPARAM)</em> (pour récupérer une structure <em>POINTS</em>).</p><aside id="r-501114" data-claire-element-id="501114" data-claire-semantic="information"><p id="r-501113" data-claire-element-id="501113">Un autre message similaire (de même nomenclature et paramètres) existe, envoyé lors d'un double clic de la souris : WM_(L, R ou M)DBLCLK. Attention, pour pouvoir le recevoir votre fenêtre doit comporter le style CS_DBLCLKS.</p></aside><h5 id="r-la-molette" data-claire-element-id="501120">La molette</h5><p id="r-501116" data-claire-element-id="501116">L'événement WM_MOUSEWHEEL, généré lors de l'utilisation de la molette, possède les mêmes paramètres, excepté le fait que le masque de bouton expliqué plus haut est contenu par le HIWORD du WPARAM.</p><div id="r-501118" data-claire-element-id="501118" data-claire-semantic="question"><p id="r-501117" data-claire-element-id="501117">Pourquoi ?</p></div><p id="r-501119" data-claire-element-id="501119">J'y viens :p : le LOWORD est en fait utilisé par l'angle parcouru par la molette, défini à partir de la constante <em>WHEEL_DELTA</em> (valant 120, et correspondant en général à un &quot;cran&quot; de la molette). Si ce paramètre est positif, c'est que la molette a été tournée vers le &quot;haut&quot;, ou à l'opposé de l'utilisateur. A l'inverse, une valeur négative traduit un mouvement vers le &quot;bas&quot;, ou vers l'utilisateur.</p><h5 id="r-le-deplacement-3" data-claire-element-id="501125">Le déplacement</h5><p id="r-501121" data-claire-element-id="501121">Nous avons vu jusqu'ici les événements des boutons, et de la molette de la souris. Mais qu'en est-il de son mouvement ?</p><p id="r-501122" data-claire-element-id="501122">Quand la souris est déplacée, le message <em>WM_MOUSEMOVE</em> est envoyée à la fenêtre située sous le curseur. Celui-ci (chance ! :p ) possède exactement les mêmes paramètres que les messages correspondant à l'utilisation des boutons de la souris, à savoir les boutons pressés simultanément, et les coordonnées du curseur.</p><aside id="r-501124" data-claire-element-id="501124" data-claire-semantic="warning"><p id="r-501123" data-claire-element-id="501123">Cet événement survenant à des intervalles très rapprochés, je ne vous conseille pas de le traiter avec de lourdes opérations, ou votre processeur en souffrira ;)</p></aside><h5 id="r-divers-33" data-claire-element-id="501127">Divers</h5><p id="r-501126" data-claire-element-id="501126">Vous pouvez récupérer la position de la souris à n'importe quel endroit de votre code, avec la fonction <em>GetCursorPos()</em>, prenant comme paramètre un pointeur de <em>POINT</em>. Vous l'aurez deviné, la fonction <em>SetCursorPos()</em> permettrait de définir la position du curseur, en prenant un <em>POINT</em> en paramètre.</p><h5 id="r-exemple-146" data-claire-element-id="501138">Exemple</h5><p id="r-501128" data-claire-element-id="501128">Voici un code récapitulatif tout simple, déduisant simplement la distance parcourue par le curseur (quand le bouton gauche de la souris est enfoncé), et par la molette (non compilable, comme d'habitude ;) ).</p><pre id="r-501129" data-claire-element-id="501129"><code data-claire-semantic="c">#include &lt;math.h&gt;

#define RADIUS (2*PI)

double linearDistance(POINT start, POINT end)
{
    return sqrt(pow((end.x - start.x), 2) + pow((end.y - start.y), 2))
}

int DEG_TO_RAD(int deg)
{
    return (deg*PI)/180
}

double angularDistance(int angle)
{
    return abs(angle)*RADIUS;
}

/* Soit cursorDistance et wheelDistance des static double, représentant respectivement
   la distance parcourue par le curseur et la molette (en pixels), ainsi que 
   BOOL lBtnDown l'état du bouton gauche de la souris. (TRUE pour
   enfoncé, FALSE pour relâché) (FALSE par défaut) */
   
//WindowProc, switch MSG (avec LPARAM lParam et WPARAM wParam)

case WM_LBUTTONDOWN:
    lBtnDown = TRUE;
    return 0;
    
case WM_LBUTTONUP:
    lBtnDown = FALSE;
    return 0;

case WM_MOUSEMOVE:
{
    if(lBtnDown)
    {
        static POINT old = {0,0};
        POINT current;
        current.x = GET_X_LPARAM(lParam);
        current.y = GET_Y_LPARAM(lParam);

        cursorDistance += linearDistance(old, current);

        old = current;
    }
    
    return 0;
}

case WM_MOUSEWHEEL:
    wheelDistance += angularDistance(DEG_TO_RAD(LOWORD(lParam)));
    return 0;</code></pre><aside id="r-501131" data-claire-element-id="501131" data-claire-semantic="information"><p id="r-501130" data-claire-element-id="501130">DEG_TO_RAD devrait être précisé inline en C++, je n'aime pas utiliser des macros...</p></aside><p id="r-501132" data-claire-element-id="501132"><em>Rédacteur : <strong>Mg++</strong></em></p><p id="r-501133" data-claire-element-id="501133">Ce fut une courte introduction aux événements principaux du clavier et de la souris. Un prochain chapitre sera dédié en partie aux événements système, comme le Drag And Drop.</p><aside id="r-501135" data-claire-element-id="501135" data-claire-semantic="information"><p id="r-501134" data-claire-element-id="501134">Si vous comptez envoyer ces messages à une fenêtre, préférez <em>PostMessage()</em> à <em>SendMessage()</em>, puisqu'en général on n'attend pas de réponse de la part de la fenêtre visée (elle possède les mêmes paramètres que cette dernière).</p></aside><aside id="r-501137" data-claire-element-id="501137" data-claire-semantic="information"><p id="r-501136" data-claire-element-id="501136">Certains des messages necessitent des LPARAM/WPARAM contenant un LOWORD et un HIWORD. Dans ce cas, vous pouvez en créer en utilisant les macros <em>MAKELPARAM(WORD, WORD)</em> et <em>MAKEWPARAM(WORD, WORD)</em>.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
<span class="arrow"></span>
<span class="next">Evénements &quot;clavier&quot;</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">
<span class="next">Esthétique avancée</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Esthtiqueavance"></a><h2>Esthétique avancée</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
<span class="arrow"></span>
<span class="next">Evénements &quot;souris&quot;</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
<span class="next">Les régions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-501141" data-claire-element-id="501141">Je suis certain que vous avez déjà éprouvé le désir de concevoir des applications ayant un design plus évolué à base de <strong>skins</strong>, formes fantaisistes etc., comme le proposent la plupart des logiciels sur la toile.</p><p id="r-501142" data-claire-element-id="501142">Eh bien, je vous propose ici de le réaliser ;) . Vous verrez donc ici comment tailler votre fenêtre comme bon vous semble. Pour cela, il est bien entendu necessaire que vous ayiez lu auparavant les autres chapitres de ce tutorial, et en particulier L'affichage (pour les images), et Les événements (surtout pour les tests relatifs à la souris, les boutons étant pour le moment incrustés au skin*).</p><aside id="r-501144" data-claire-element-id="501144" data-claire-semantic="information"><p id="r-501143" data-claire-element-id="501143">Comme vous le savez tous à ce stade, l'API Windows est particulièrement tordue, ou tout du moins un tantinet compliquée lorsqu'il s'agit de dessin. Par conséquent, je ne vous exposerai pas ici les moyens de faire des boutons <strong>hovers</strong> (changeant d'état selon le stade de la souris). Vous le verrez plus tard, durant un chapitre du même thème, mais plus avancé.</p></aside><p id="r-501145" data-claire-element-id="501145">Commençons tout d'abord par tailler fenêtre, non pas avec un burin, mais avec <strong>les régions</strong>.</p>
</div><a name="Lesrgions"></a><h2>Les régions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">
<span class="arrow"></span>
<span class="next">Esthétique avancée</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
<span class="next">Gestion de la fenêtre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-regions" data-claire-element-id="501235">Les régions</h4><p id="r-501146" data-claire-element-id="501146">En premier lieu, il est nécessaire de définir ce qu'est une région. En fait, vous pouvez vous la modéliser comme un moule. Je ne sais pas si l'image vous interpelle, mais c'est comme les formes métalliques que vous appliquez sur un gâteau pour qu'il en prenne justement la forme ^^ .</p><p id="r-501147" data-claire-element-id="501147">L'usage de ces régions se définit en plusieurs étapes :</p><ul id="r-501152" data-claire-element-id="501152"><li id="r-501149" data-claire-element-id="501149"><p id="r-501148" data-claire-element-id="501148">Création d'une région</p></li><li id="r-501151" data-claire-element-id="501151"><p id="r-501150" data-claire-element-id="501150">Application de la région à une fenêtre.</p></li></ul><p id="r-501153" data-claire-element-id="501153">Procédons dans l'ordre (tant qu'à faire :p ), et commençons dont par la création des régions proprement dite.</p><aside id="r-501155" data-claire-element-id="501155" data-claire-semantic="warning"><p id="r-501154" data-claire-element-id="501154">Important : veillez à donnner le style WS_POPUP à la fenêtre sur laquelle va être appliquée la région crée, car dans le cas contraire elle ne le sera pas (WS_OVERLAPPEDWINDOW est, rappelons-le, incompatible avec WS_POPUP. Vous devrez donc le remplacer par celui-ci).</p></aside><h5 id="r-creation-d-une-region" data-claire-element-id="501224">Création d'une région</h5><p id="r-501156" data-claire-element-id="501156">A l'instar des contrôles, une région possède un <strong>handle</strong> permettant de la manier. Celui-ci, dont le type est <em>HRGN</em>, contient les informations relatives à la région visée. Cette structure est remplie à partir de fonctions de création de région, autorisant un large éventail de formes possibles, à travers différentes fonctions.</p><p id="r-501157" data-claire-element-id="501157">Voyez-plutôt :</p><ul id="r-501168" data-claire-element-id="501168"><li id="r-501159" data-claire-element-id="501159"><p id="r-501158" data-claire-element-id="501158">CreateRectRgn()</p></li><li id="r-501161" data-claire-element-id="501161"><p id="r-501160" data-claire-element-id="501160">CreateRoundRectRgn()</p></li><li id="r-501163" data-claire-element-id="501163"><p id="r-501162" data-claire-element-id="501162">CreateEllipticRgn()</p></li><li id="r-501165" data-claire-element-id="501165"><p id="r-501164" data-claire-element-id="501164">CreatePolygonRgn()</p></li><li id="r-501167" data-claire-element-id="501167"><p id="r-501166" data-claire-element-id="501166">...</p></li></ul><p id="r-501169" data-claire-element-id="501169">Celles ci-dessus étant les principales, nous ne verrons que celles-ci (la liste complète se trouvant bien entendu sur msdn).</p><h6 id="r-createrectrgn" data-claire-element-id="501175">CreateRectRgn()</h6><p id="r-501170" data-claire-element-id="501170"><em>CreateRectRgn()</em> permet de créer une région de forme rectangulaire, dont les coordonnées des coins supérieur gauche et inférieur droit sont données.</p><p id="r-501171" data-claire-element-id="501171">Le prototype de CreateRectRgn() est le suivant :</p><pre id="r-501172" data-claire-element-id="501172"><code data-claire-semantic="c">HRGN CreateRectRgn(
  int nLeftRect,   //Abscisse du coin supérieur gauche de la région
  int nTopRect,    //Ordonnée du coin supérieur gauche de la région 
  int nRightRect,  //Abscisse du coin inférieur droit de la région
  int nBottomRect  //Ordonnée du coin inférieur droit de la région
);</code></pre><aside id="r-501174" data-claire-element-id="501174" data-claire-semantic="information"><p id="r-501173" data-claire-element-id="501173">Variante : vous pouvez utiliser CreateRectRgnIndirect() à partir d'une simple structure (CONST) <em>RECT*</em>.</p></aside><h6 id="r-createroundrectrgn" data-claire-element-id="501179">CreateRoundRectRgn()</h6><p id="r-501176" data-claire-element-id="501176"><em>CreateRoundRectRgn()</em> permet de créer une région de la forme d'un rectangle ayant des coins arrondis, et dont les coordonnées des coins supérieur gauche et inférieur droit, ainsi que les dimensions de l'éllipse (permettant d'obtenir ces arrondis) sont données.</p><p id="r-501177" data-claire-element-id="501177">Le prototype de CreateRoundRectRgn() est le suivant :</p><pre id="r-501178" data-claire-element-id="501178"><code data-claire-semantic="c">HRGN CreateRoundRectRgn(
  int nLeftRect,      //Abscisse du coin supérieur gauche de la région
  int nTopRect,       //Ordonnée du coin supérieur gauche de la région 
  int nRightRect,     //Abscisse du coin inférieur droit de la région
  int nBottomRect     //Ordonnée du coin inférieur droit de la région
  int nWidthEllipse,  //Largeur de l'ellipse inscrite
  int nHeightEllipse  //Hauteur de l'ellipse inscrite
);</code></pre><h6 id="r-createellipticrgn" data-claire-element-id="501185">CreateEllipticRgn()</h6><p id="r-501180" data-claire-element-id="501180"><em>CreateEllipticRgn()</em> permet de créer une région de forme élliptique, dont les coordonnées des coins supérieur gauche et inférieur droit du rectangle dans lequel elle est inscrite sont données.</p><p id="r-501181" data-claire-element-id="501181">Le prototype de CreateEllipticRgn() est le suivant :</p><pre id="r-501182" data-claire-element-id="501182"><code data-claire-semantic="c">HRGN CreateEllipticRgn(
  int nLeftRect,   //Abscisse du coin supérieur gauche du rectangle circonscrit
  int nTopRect,    //Ordonnée du coin supérieur gauche du rectangle circonscrit
  int nRightRect,  //Abscisse du coin inférieur droit du rectangle circonscrit
  int nBottomRect  //Ordonnée du coin inférieur droit du rectangle circonscrit
);</code></pre><aside id="r-501184" data-claire-element-id="501184" data-claire-semantic="information"><p id="r-501183" data-claire-element-id="501183">Variante : vous pouvez utiliser CreateEllipticRgnIndirect() à partir d'une simple structure (CONST) <em>RECT*</em>.</p></aside><h6 id="r-createpolygonrgn" data-claire-element-id="501190">CreatePolygonRgn()</h6><p id="r-501186" data-claire-element-id="501186"><em>CreatePolygonRgn()</em> n'est certes pas la fonction la plus pratique de celles exposées, mais reste la plus intéressante. En effet, en procurant à la fonction un tableau de coordonnées de points (sous la forme d'un tableau de <em>POINT</em> (CONST) POINT*), leur nombre ainsi que le mode de remplissage (voir ci-après), vous pouvez créer exactement la région que vous souhaitez.</p><p id="r-501187" data-claire-element-id="501187">Son prototype est le suivant :</p><pre id="r-501188" data-claire-element-id="501188"><code data-claire-semantic="c">HRGN CreatePolygonRgn(
  CONST POINT *lppt,  //Tableau de points
  int cPoints,        //Nombre de points dans le tableau
  int fnPolyFillMode  //Mode de remplissage du polygone
);</code></pre><p id="r-501189" data-claire-element-id="501189">Une petite mise au point s'impose quant au mode de remplissage. Celui-ci peut prendre les valeurs ALTERNATE, et WINDING. ALTERNATE est souvent conseillé, et décrit le procédé suivant : selon l'algorithme scanline, la zone comprise entre les arêtes impaires et paires du polygone correspondra à la région créée. (pour plus amples informations, cherchez sur la Toile :-° )</p><h6 id="r-operations-diverses" data-claire-element-id="501223">Opérations diverses</h6><p id="r-501191" data-claire-element-id="501191">Parfois, ces fonctions ne suffisent pas pour obtenir les formes dont vous avez envie (par exemple quand vous n'avez pas envie de récupérer des points pour créer votre région &gt;_ ). Dans ces cas là, on les complète par d'autres fonctions, comme <em>CombineRgn()</em>, pour étendre encore plus les possibilités.</p><p id="r-501192" data-claire-element-id="501192">Celle-ci permet de combiner deux régions, selon le mode de combinaison dont les valeurs possibles sont :</p><ul id="r-501201" data-claire-element-id="501201"><li id="r-501194" data-claire-element-id="501194"><p id="r-501193" data-claire-element-id="501193">RGN_AND : La région obtenue est l'intersection des deux régions données</p></li><li id="r-501196" data-claire-element-id="501196"><p id="r-501195" data-claire-element-id="501195">RGN_DIFF : La région obtenue est la combinaison des parties de la première des deux régions données, qui n'intersectent pas la deuxième.</p></li><li id="r-501198" data-claire-element-id="501198"><p id="r-501197" data-claire-element-id="501197">RGN_OR : La région obtenue est l'union des deux régions données.</p></li><li id="r-501200" data-claire-element-id="501200"><p id="r-501199" data-claire-element-id="501199">RGN_XOR : [Comme RGN_OR, sans les intersections des deux régions.]</p></li></ul><p id="r-501202" data-claire-element-id="501202">Voici donc son prototype :</p><pre id="r-501203" data-claire-element-id="501203"><code data-claire-semantic="c">int CombineRgn(
  HRGN hrgnDest,      //Handle de la région de destination
  HRGN hrgnSrc1,      //Handle de la première des deux régions à combiner
  HRGN hrgnSrc2,      //Handle de la deuxième des deux régions à combiner
  int fnCombineMode   //Mode de combinaison des deux régions
);</code></pre><p id="r-501204" data-claire-element-id="501204">La fonction peut alors retourner :</p><ul id="r-501213" data-claire-element-id="501213"><li id="r-501206" data-claire-element-id="501206"><p id="r-501205" data-claire-element-id="501205">NULLREGION : La région obtenue est vide</p></li><li id="r-501208" data-claire-element-id="501208"><p id="r-501207" data-claire-element-id="501207">SIMPLEREGION : La région obtenue est un rectangle</p></li><li id="r-501210" data-claire-element-id="501210"><p id="r-501209" data-claire-element-id="501209">COMPLEXREGION : La région obtenue est plus qu'un simple rectangle</p></li><li id="r-501212" data-claire-element-id="501212"><p id="r-501211" data-claire-element-id="501211">ERROR : Aucune région ne fut générée</p></li></ul><div id="r-501215" data-claire-element-id="501215" data-claire-semantic="question"><p id="r-501214" data-claire-element-id="501214">Le but de ce tuto, c'est un peu d'avoir une fenêtre de la forme de son skin, non ? Je vais mettre des années à créer ma région !</p></div><p id="r-501216" data-claire-element-id="501216">Pas de panique, ces fonctions ne sont que des bases (pouvant néanmoins vous servir ultérieurement) à une fonction parfaitement adaptée : <em>BmpToRgn()</em> :ange:</p><p id="r-501217" data-claire-element-id="501217">Cette fonction (que j'ai découverte sur cppfrance.com à mes débuts, et créée par anthraxx) permet de récupérer une région à partir d'une image bitmap (donc d'une image 32bits) et d'une couleur de transparence (par défaut, noir).</p><p id="r-501218" data-claire-element-id="501218">Voici le code complet de la fonction :magicien: :</p><pre id="r-501219" data-claire-element-id="501219"><code data-claire-semantic="c">HRGN BmpToRgn (HBITMAP hBmp, COLORREF cTransparentColor)
{
 #define ALLOC_UNIT 100

    int y, x;
    HRGN hRgn = NULL;

    if (!hBmp) return 0; // si bitmap invalide retourne

    BITMAP bm;
    GetObject(hBmp, sizeof(bm), &amp;bm); // met les infos d'en tete du bitmap dans bm
    UINT siz=bm.bmWidth*bm.bmHeight*4; // enregistre la taille des donnes de l'image

    char *lpBmpBits=(char*)LocalAlloc(LMEM_FIXED,siz); // fait de la place pour les bits du bitmap
    GetBitmapBits(hBmp,siz,lpBmpBits); // obtient les bits de l'image dans l'espace qu'on a reservé
    bm.bmBits=lpBmpBits; // complete la strucutre bm avec les bits
    
    while (bm.bmWidthBytes % 4) bm.bmWidthBytes++; // bmWidthBytes doit être divisible par 4

    DWORD maxRects = ALLOC_UNIT;
    HANDLE hData = GlobalAlloc(GMEM_MOVEABLE, sizeof(RGNDATAHEADER) + (sizeof(RECT) * maxRects));
    RGNDATA *pData = (RGNDATA *)GlobalLock(hData);
    pData-&gt;rdh.dwSize = sizeof(RGNDATAHEADER);
    pData-&gt;rdh.iType = RDH_RECTANGLES;
    pData-&gt;rdh.nCount = pData-&gt;rdh.nRgnSize = 0;
    SetRect(&amp;pData-&gt;rdh.rcBound, MAXLONG, MAXLONG, 0, 0);

    BYTE *p32 = (BYTE *)bm.bmBits;
    for (y = 0; y &lt; bm.bmHeight; y++) // parcourt toutes les lignes de l'image, de haut en bas
    {
        for (x = 0; x &lt; bm.bmWidth; x++) // parcourt tous les pixels de la ligne, de gauche à droite
        {
            // Recherche une suite continue de pixels non transparents
            int x0 = x;
            LONG *p = (LONG *)(p32 + 4*x);
            while (x &lt; bm.bmWidth)
             {
                if ((unsigned)*p==cTransparentColor)
                  break; // ce pixel est transparent
                p++;
                x++;
            }
            if (x &gt; x0)
            {
                // ajoute les pixels (de (x0, y) à (x, y+1)) à la region en tant que rectangle
                if (pData-&gt;rdh.nCount &gt;= maxRects)
                {
                   GlobalUnlock(hData);
                   maxRects += ALLOC_UNIT;
                   hData = GlobalReAlloc(hData, sizeof(RGNDATAHEADER) +
                         (sizeof(RECT) * maxRects), GMEM_MOVEABLE);
                   pData = (RGNDATA *)GlobalLock(hData);
                }
                RECT *pr = (RECT *)&amp;pData-&gt;Buffer;
                SetRect(&amp;pr[pData-&gt;rdh.nCount], x0, y, x, y+1);
                if (x0 &lt; pData-&gt;rdh.rcBound.left)
                   pData-&gt;rdh.rcBound.left = x0;
                if (y &lt; pData-&gt;rdh.rcBound.top)
                   pData-&gt;rdh.rcBound.top = y;
                if (x &gt; pData-&gt;rdh.rcBound.right)
                   pData-&gt;rdh.rcBound.right = x;
                if (y+1 &gt; pData-&gt;rdh.rcBound.bottom)
                   pData-&gt;rdh.rcBound.bottom = y+1;
                pData-&gt;rdh.nCount++;

                // Il parait que sous Windows 98, ExtCreateRegion() ne marche pas s'il y a trop de rectangles
                // Pas de panique: on construit la region en deux fois
                if (pData-&gt;rdh.nCount == 2000)
                {
                    HRGN h = ExtCreateRegion(NULL, sizeof(RGNDATAHEADER) + (sizeof(RECT) * maxRects), pData);
                    if (hRgn)
                    {
                       CombineRgn(hRgn, hRgn, h, RGN_OR);
                       DeleteObject(h);
                    }
                    else
                        hRgn = h;
                    pData-&gt;rdh.nCount = 0;
                    SetRect(&amp;pData-&gt;rdh.rcBound, MAXLONG, MAXLONG, 0, 0);
                }
            }
         }
        // On passe à la ligne suivante
        p32 += bm.bmWidthBytes;
    }
    // On cree la region
    // (et, s'il y avait plus de 2000 rectangles, on la combine avec celle créee precedemment)
    HRGN h = ExtCreateRegion(NULL, sizeof(RGNDATAHEADER) + (sizeof(RECT) * maxRects), pData);
    if (hRgn)
    {
        CombineRgn(hRgn, hRgn, h, RGN_OR);
        DeleteObject(h);
    }
    else hRgn = h;
    LocalFree((HLOCAL)lpBmpBits);
    return hRgn;
}</code></pre><p id="r-501220" data-claire-element-id="501220">Je ne vous demande evidemment pas de la comprendre, mais juste de savoir l'utiliser (c'est pour votre bien, hein :p ) : le handle de bitmap doit bien entendu être obtenu par le chargement d'une image avec <em>LoadImage()</em> ou <em>LoadBitmap</em>, et la structure COLORREF (la couleur de transparence) par un appel à <em>RGB()</em>. (voir L'affichage)</p><aside id="r-501222" data-claire-element-id="501222" data-claire-semantic="warning"><p id="r-501221" data-claire-element-id="501221">Testez quand même dans chacun des cas si la région obtenue vaut NULL ou pas (retour des fonctions si la création de la région a échoué).</p></aside><h5 id="r-application-de-la-region-a-une-fenetre" data-claire-element-id="501226">Application de la région à une fenêtre</h5><p id="r-501225" data-claire-element-id="501225">Alors là, il n'y a rien de plus simple, un appel de <em>SetWindowRgn()</em> avec comme paramètres le handle de la fenêtre à laquelle on veut appliquer la région, le handle de la région à appliquer, et enfin le &quot;Redraw Flag&quot; (booléen à fixer à TRUE si la fenêtre doit être redessinée, ou FALSE sinon).</p><h5 id="r-exemple-147" data-claire-element-id="501234">Exemple</h5><p id="r-501227" data-claire-element-id="501227">Voici un code illustratif de la manipulation des régions (non compilable) :</p><pre id="r-501228" data-claire-element-id="501228"><code data-claire-semantic="c">HRGN rectRegion, 
     roundRectRegion, 
     ellipticRegion, 
     polygonRegion, 
     combinedRegion, 
     bitmapRegion;
RECT rect = {10,10,300,100};
POINT pointArray[5];
//Soit bitmap ayant été chargé au préalable
//Soit hwnd ayant été créé au préalable

rectRegion = CreateRectRgnIndirect(&amp;rect);

/* La plupart du temps, les deux dernières valeurs sont déterminées &quot;au feeling&quot; ;) */
roundRectRegion = CreateRoundRectRgn(10,10,300,100,10,10); 

ellipticRegion = CreateEllipticRgnIndirect(&amp;rect);

pointArray[0].x = 0; pointArray[0].y = 1;
pointArray[1].x = 3; pointArray[1].y = 3;
pointArray[2].x = 6; pointArray[2].y = 1;
pointArray[3].x = 5; pointArray[3].y = -2;
pointArray[4].x = 2; pointArray[4].y = -2;

polygonRegion = CreatePolygonRgn(pointArray, 5, ALTERNATE);

//RGN_XOR, par exemple
CombineRgn(combinedRegion, rectRegion, ellipticRegion, RGN_XOR);

//Le blanc est la couleur transparente
bitmapRegion = BmpToRgn(bitmap, RGB(255,255,255));

//Et enfin :
SetWindowRgn(hwnd, /* region */);</code></pre><aside id="r-501230" data-claire-element-id="501230" data-claire-semantic="information"><p id="r-501229" data-claire-element-id="501229">Si vous n'avez plus besoin d'une région, libérez-la avec <em>DeleteObject()</em>. Pensez-y...</p></aside><aside id="r-501232" data-claire-element-id="501232" data-claire-semantic="warning"><p id="r-501231" data-claire-element-id="501231">Si vous utilisez BmpToRgn(), n'allez pas croire que cette fonction affiche l'image en même temps. (regardez le prototype... est-ce que vous voyez un HDC ? ^^ ) Bien entendu, vous devrez l'afficher postérieurement, en utilisant les méthodes décrites au chapitre L'affichage.</p></aside><p id="r-501233" data-claire-element-id="501233"><em>Rédacteur : <strong>Mg++</strong></em></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">
<span class="arrow"></span>
<span class="next">Esthétique avancée</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
<span class="next">Gestion de la fenêtre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Gestiondelafentre"></a><h2>Gestion de la fenêtre</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
<span class="arrow"></span>
<span class="next">Les régions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">
<span class="next">Documentation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-gestion-de-la-fenetre" data-claire-element-id="501272">Gestion de la fenêtre</h4><p id="r-501236" data-claire-element-id="501236">Maintenant que vous avez une fenêtre taillée par vos soins (dans la majorité des cas, sans barre de titre), peut-être voudriez-vous donner la possiblité à l'utilisateur de la bouger ? :-°</p><p id="r-501237" data-claire-element-id="501237">Pour cela, nous allons utiliser une notification très pratique (car ne servant fort heureusement pas qu'à ça), qui n'est autre que <em>WM_NCHITTEST</em>.</p><p id="r-501238" data-claire-element-id="501238">Cette notification est envoyée lorsqu'un événement, dont la source est la souris, survient sur la fenêtre d'un programme. Il s'agit d'un test antérieur aux messages <em>WM_MOUSEMOVE</em>, <em>WM_LBUTTONDOWN</em> etc. (tout comme WM_KEYDOWN est antérieur à WM_CHAR après test), pour déterminer dans quelle zone de la fenêtre se trouve la souris. Une fois traitée (si c'est le cas), nous devons renvoyer une constante indiquant la zone de la fenêtre correspondante (après test des coordonnées, forcément).</p><p id="r-501239" data-claire-element-id="501239">Ici, la constante à retourner est HTCAPTION (caption pour titre). Cependant, d'autres constantes peuvent être envoyées, représentant d'autres zones de la fenêtre :</p><ul id="r-501256" data-claire-element-id="501256"><li id="r-501241" data-claire-element-id="501241"><p id="r-501240" data-claire-element-id="501240"><em>HTBOTTOM </em>: bordure inférieure (agrandissement vertical possible de la fenêtre)</p></li><li id="r-501243" data-claire-element-id="501243"><p id="r-501242" data-claire-element-id="501242"><em>HTBOTTOMLEFT</em>/<em>HTBOTTOMRIGHT</em> : bordure inférieure gauche/droite (agrandissement possible de la fenêtre)</p></li><li id="r-501245" data-claire-element-id="501245"><p id="r-501244" data-claire-element-id="501244"><em>HTLEFT</em>/<em>HTRIGHT</em> : bordure gauche/droite (agrnadissement horizontal possible de la fenêtre)</p></li><li id="r-501247" data-claire-element-id="501247"><p id="r-501246" data-claire-element-id="501246"><em>HTMAXBUTTON</em>/<em>HTMINBUTTON</em> : bouton &quot;maximiser&quot;/&quot;minimiser&quot;</p></li><li id="r-501249" data-claire-element-id="501249"><p id="r-501248" data-claire-element-id="501248">HTCLOSE : bouton de clôture</p></li><li id="r-501251" data-claire-element-id="501251"><p id="r-501250" data-claire-element-id="501250"><em>HTGROWBOX</em> - <em>HTSIZE</em> : zone de redimensionnement</p></li><li id="r-501253" data-claire-element-id="501253"><p id="r-501252" data-claire-element-id="501252">HTHELP : bouton d'aide</p></li><li id="r-501255" data-claire-element-id="501255"><p id="r-501254" data-claire-element-id="501254">etc.</p></li></ul><p id="r-501257" data-claire-element-id="501257">Par contre, si la zone visée n'est tout simplement qu'une zone <strong>client</strong>, vous devez renvoyer <em>HTCLIENT</em> (logique).</p><aside id="r-501259" data-claire-element-id="501259" data-claire-semantic="information"><p id="r-501258" data-claire-element-id="501258">Toutes les possiblités de WM_NCHITTEST, comme celles citées ci-dessus, ne sont pas exposées ici, car ce n'est pas le but de cette partie, mais rien ne vous empêche d'aller vous renseigner sur <a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/winui/winui/windowsuserinterface/userinput/mouseinput/mouseinputreference/mouseinputmessages/wm_nchittest.asp">msdn</a>.</p></aside><div id="r-501261" data-claire-element-id="501261" data-claire-semantic="question"><p id="r-501260" data-claire-element-id="501260">Comment déterminer dans quelle zone le curseur se trouve ?</p></div><p id="r-501262" data-claire-element-id="501262">Je l'ai dit plus haut, il faut tester les coordonnées du curseur. Pour cela, pas besoin de <em>GetCursorPos()</em>, elles se trouvent dans le LPARAM du message (le WPARAM étant non-utilisé). Par conséquent, vous pourrez les récupérer à l'aide des macros <em>GET_X_LPARAM()</em> et <em>GET_Y_LPARAM()</em>, ou <em>MAKEPOINTS()</em>, expliquées antérieurement.</p><aside id="r-501266" data-claire-element-id="501266" data-claire-semantic="warning"><p id="r-501263" data-claire-element-id="501263">Attention ! Les coordonnées retournées sont relatives au coin supérieur gauche de l'écran, et non à la zone client de la fenêtre (normal, puisque la notification est envoyée avant même que la fenêtre ne traite l'événement correspondant). Vous devrez donc utiliser la fonction GetWindowRect() de prototype :</p><pre id="r-501264" data-claire-element-id="501264"><code data-claire-semantic="c">BOOL GetWindowRect(      
    HWND hWnd, //Fenêtre visée
    LPRECT lpRect //Pointeur de RECT
);</code></pre><p id="r-501265" data-claire-element-id="501265">Ainsi, vous pourrez récupérer les coordonnées du curseur, relatives à la zone client de la fenêtre, par une bête soustraction des coordonnées contenues dans WM_NCHITTEST par celles retournées par GetWindowRect().</p></aside><h5 id="r-exemple-148" data-claire-element-id="501271">Exemple</h5><pre id="r-501267" data-claire-element-id="501267"><code data-claire-semantic="c">/* Soit hwnd le handle de la fenêtre, et lParam le LPARAM de la callback */

//WindowProc avec switch du MSG
case WM_NCHITTEST:
{
    LRESULT ret = HTCLIENT;

    //Coordonnées de la fenêtre
    RECT wCoord;
    GetWindowRect(hwnd, &amp;wCoord);

    //Coordonnées relatives à la zone client de la fenêtre
    POINT cCoord;
    cCoord.x = GET_X_LPARAM(lParam) - wCoord.left;
    cCoord.y = GET_Y_LPARAM(lParam) - wCoord.top;

    //tests des coordonnées
    if(/* zone dite &quot;de déplacement&quot; */)
        ret = HTCAPTION;

    //...

    return ret;
}</code></pre><p id="r-501268" data-claire-element-id="501268">Avec cette méthode, votre fenêtre devrait pouvoir bouger fluidement (en tout cas, autant qu'avec des barres de titre &quot;normales&quot; ;) )<br/><em>Rédacteur : <strong>Mg++</strong></em></p><p id="r-501269" data-claire-element-id="501269">Vous êtes d'orénavant capables de tailler vos fenêtres comme bon vous semble, tout en personnalisant sa gestion (redimensionnements, déplacements etc.). Dans une prochaine mise à jour du chapitre, nous verrons quelque chose de nettement plus intéressant, à savoir les listbox dites &quot;ownerdraw&quot;, les boutons <strong>hover</strong> (boutons changeant d'état en fonction du stade de la souris), en utilisant les masques etc., et sûrement à partir de l'élaboration d'une hiérarchie de classes, etc.</p><p id="r-501270" data-claire-element-id="501270">Le cours n'est pas terminé, d'autres leçons suivront ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
<span class="arrow"></span>
<span class="next">Les régions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">
<span class="next">Documentation</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Documentation"></a><h2>Documentation</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
<span class="arrow"></span>
<span class="next">Gestion de la fenêtre</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
<span class="next">Fonctions</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-501276" data-claire-element-id="501276">Vous trouverez ici une mini-documentation remplie au fur et à mesure de l'avancement du tuto.</p>
</div><a name="Fonctions"></a><h2>Fonctions</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">
<span class="arrow"></span>
<span class="next">Documentation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
<span class="next">Messages</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-fonctions-7" data-claire-element-id="501737">Fonctions</h4><p id="r-501277" data-claire-element-id="501277">Voici la liste de toutes les fonctions de l'API Windows que vous avez découvertes dans ce tutoriel.<br/> Pour chaque fonction, j'explique le rôle, ses paramètres et sa valeur de retour.</p><h5 id="r-winmain" data-claire-element-id="501292">WinMain</h5><pre id="r-501278" data-claire-element-id="501278"><code data-claire-semantic="c">int WinMain(      
    HINSTANCE hInstance,
    HINSTANCE hPrevInstance,
    LPSTR lpCmdLine,
    int nCmdShow
);</code></pre><h6 id="r-description-54" data-claire-element-id="501280">Description</h6><p id="r-501279" data-claire-element-id="501279">Cette fonction est le point d'entrée de tout programme Windows, c'est elle qui est appelée en premier dans votre programme. C'est en quelque sorte l'équivalent du <em>main</em> en programme console.</p><h6 id="r-parametres-7" data-claire-element-id="501289">Paramètres</h6><pre id="r-501281" data-claire-element-id="501281"><code data-claire-semantic="c">HINSTANCE hInstance</code></pre><p id="r-501282" data-claire-element-id="501282">Ce paramètre est l'instance de votre programme, c'est-à-dire une sorte d'identifiant unique qui représente votre programme. Ce paramètre est très important, puisqu'il est utilisé dans de nombreuses fonctions ou structures comme <em>WNDCLASS</em> ou <em>CreateWindow</em>.</p><pre id="r-501283" data-claire-element-id="501283"><code data-claire-semantic="c">HINSTANCE hPrevInstance</code></pre><p id="r-501284" data-claire-element-id="501284">Ce paramètre est obsolète depuis la fin de Windows 16-bit, il est toujours mis à <em>NULL</em>.</p><pre id="r-501285" data-claire-element-id="501285"><code data-claire-semantic="c">LPSTR lpCmdLine</code></pre><p id="r-501286" data-claire-element-id="501286">Ce paramètre est une chaîne de caractères qui contient une copie <strong>conforme</strong> de la ligne de commande. Ainsi, contrairement aux programmes console, la ligne de commande n'est pas découpée en arguments mais conservée telle quelle.</p><pre id="r-501287" data-claire-element-id="501287"><code data-claire-semantic="c">int nCmdShow</code></pre><p id="r-501288" data-claire-element-id="501288">Ce paramètre a un lien avec <em>ShowWindow</em>, puisqu'il représente l'état dans lequel doit être affichée la fenêtre du programme : maximisée, minimisée,...</p><h6 id="r-valeur-de-retour-2" data-claire-element-id="501291">Valeur de retour</h6><p id="r-501290" data-claire-element-id="501290">Si le <em>WinMain</em> se termine avant la boucle des messages (voir <em>GetMessage</em>), alors elle doit retourner 0.<br/> Sinon, lorsqu'elle reçoit le message <em>WM_QUIT</em>, elle doit renvoyer la valeur contenue dans <em>wParam</em> (voir l'exemple dans la première partie).</p><h5 id="r-registerclass" data-claire-element-id="501300">RegisterClass</h5><pre id="r-501293" data-claire-element-id="501293"><code data-claire-semantic="c">ATOM RegisterClass(      
    CONST WNDCLASS *lpWndClass
);</code></pre><h6 id="r-description-55" data-claire-element-id="501295">Description</h6><p id="r-501294" data-claire-element-id="501294">Cette fonction enregistre une classe de fenêtre pour une utilisation avec <em>CreateWindow</em> ou <em>CreateWindowEx</em>.<br/> Cette fonction a maintenant été remplacée par une autre, plus puissante : <em>RegisterClassEx</em>, mais elle peut très bien continuer à être utilisée.</p><h6 id="r-parametres-8" data-claire-element-id="501297">Paramètres</h6><p id="r-501296" data-claire-element-id="501296">Le seul paramètre de cette fonction est un pointeur vers une structure de type <em>WNDCLASS</em>. Pour plus de précision, voir la description de la structure <em>WNDCLASS</em>.</p><h6 id="r-valeur-de-retour-3" data-claire-element-id="501299">Valeur de retour</h6><p id="r-501298" data-claire-element-id="501298">Si la fonction réussit, la valeur retournée est un identifiant unique qui représente cette classe.<br/> Si elle échoue, elle renvoie 0.</p><h5 id="r-createwindow" data-claire-element-id="501343">CreateWindow</h5><pre id="r-501301" data-claire-element-id="501301"><code data-claire-semantic="c">HWND CreateWindow(      
    LPCTSTR lpClassName,
    LPCTSTR lpWindowName,
    DWORD dwStyle,
    int x,
    int y,
    int nWidth,
    int nHeight,
    HWND hWndParent,
    HMENU hMenu,
    HINSTANCE hInstance,
    LPVOID lpParam
);</code></pre><h6 id="r-description-56" data-claire-element-id="501305">Description</h6><p id="r-501302" data-claire-element-id="501302">Cette fonction, comme son nom l'indique, sert à créer une fenêtre.</p><aside id="r-501304" data-claire-element-id="501304" data-claire-semantic="warning"><p id="r-501303" data-claire-element-id="501303">Sous Windows, il faut prendre le terme fenêtre au sens large : un contrôle (par exemple un bouton) est aussi une fenêtre.</p></aside><h6 id="r-parametres-9" data-claire-element-id="501340">Paramètres</h6><pre id="r-501306" data-claire-element-id="501306"><code data-claire-semantic="c">LPCTSTR lpClassName</code></pre><p id="r-501307" data-claire-element-id="501307">Ce paramètre est le nom d'une classe précédemment enregistrée avec <em>RegisterClass</em>.</p><aside id="r-501309" data-claire-element-id="501309" data-claire-semantic="information"><p id="r-501308" data-claire-element-id="501308">Il existe certaines classes prédéfinies pour les contrôles comme<br/> &quot;BUTTON&quot; pour un bouton.<br/> Voir la liste en annexe.</p></aside><pre id="r-501310" data-claire-element-id="501310"><code data-claire-semantic="c">LPCTSTR lpWindowName</code></pre><p id="r-501311" data-claire-element-id="501311">Ce paramètre est le nom de la fenêtre lorsque l'on crée une &quot;vraie&quot; fenêtre.<br/> Lorsqu'il s'agit d'un contrôle, ce paramètre peut être utile (ou non). Voilà une liste non exhaustive :</p><ul id="r-501318" data-claire-element-id="501318"><li id="r-501313" data-claire-element-id="501313"><p id="r-501312" data-claire-element-id="501312">Bouton : texte du bouton</p></li><li id="r-501315" data-claire-element-id="501315"><p id="r-501314" data-claire-element-id="501314">Liste : inutile</p></li><li id="r-501317" data-claire-element-id="501317"><p id="r-501316" data-claire-element-id="501316">Zone d'édition : texte initial</p></li></ul><pre id="r-501319" data-claire-element-id="501319"><code data-claire-semantic="c">DWORD dwStyle</code></pre><p id="r-501320" data-claire-element-id="501320">Ce paramètre représente le style de la fenêtre, il résulte en fait de la combinaison de nombreuses styles.<br/> Vous pourrez trouver une liste en annexe.<br/> Il existe une série de styles qui s'appliquent à toutes les fenêtres, et d'autres qui ne s'appliquent qu'à certains contrôles.</p><pre id="r-501321" data-claire-element-id="501321"><code data-claire-semantic="c">int x,
    int y,
    int nWidth,
    int nHeight</code></pre><p id="r-501322" data-claire-element-id="501322">Ces paramètres représentent la position et la taille initiales de la fenêtre.<br/> Si x=<em>CW_USEDEFAULT</em>, alors le système choisit automatiquement la position de la fenêtre.</p><aside id="r-501324" data-claire-element-id="501324" data-claire-semantic="warning"><p id="r-501323" data-claire-element-id="501323"><em>CW_USEDEFAULT</em> n'est autorisée que si la fenêtre a le style <em>WS_OVERLAPPED</em>, ou un style qui inclut <em>WS_OVERLAPPED</em> comme <em>WS_OVERLAPPEDWINDOW</em>.</p></aside><p id="r-501325" data-claire-element-id="501325">Si nWidth=<em>CW_USEDEFAULT</em>, alors le système choisit automatiquement la taille par défaut de la fenêtre.</p><aside id="r-501327" data-claire-element-id="501327" data-claire-semantic="warning"><p id="r-501326" data-claire-element-id="501326">La même remarque que ci-dessus s'applique ici.</p></aside><pre id="r-501328" data-claire-element-id="501328"><code data-claire-semantic="c">HWND hWndParent</code></pre><p id="r-501329" data-claire-element-id="501329">Ce paramètre est l'identifiant du parent de la fenêtre à créer.<br/> Si ce paramètre vaut <em>NULL</em>, la fenêtre a pour parent le Bureau.</p><pre id="r-501330" data-claire-element-id="501330"><code data-claire-semantic="c">HMENU hMenu</code></pre><p id="r-501331" data-claire-element-id="501331">Ce paramètre, lors de la création d'une &quot;vraie&quot; fenêtre, est l'identifiant d'un menu qui s'affichera en haut de la fenêtre (vous savez comme 'Fichier', 'Édition', 'Aide', ...).<br/> Lors de la création d'un contrôle, celui-ci représente un entier utilisé pour identifier le contrôle sans son <em>HWND</em>.<br/> Par exemple:</p><pre id="r-501332" data-claire-element-id="501332"><code data-claire-semantic="c">HMENU identifiantControle=(HMENU)1000;</code></pre><aside id="r-501334" data-claire-element-id="501334" data-claire-semantic="warning"><p id="r-501333" data-claire-element-id="501333">Il est conseillé de lui donner une valeur supérieure à 100 pour éviter les conflits avec le système.</p></aside><p id="r-501335" data-claire-element-id="501335">Si ce paramètre vaut <em>NULL</em>, la fenêtre n'a pas de menu, ou pas d'identifiant selon le cas.</p><pre id="r-501336" data-claire-element-id="501336"><code data-claire-semantic="c">HINSTANCE hInstance</code></pre><p id="r-501337" data-claire-element-id="501337">Ce paramètre est l'instance du programme qui crée la fenêtre ; ici en l'occurrence, le vôtre qui est passé en paramètre à <em>WinMain</em>.</p><pre id="r-501338" data-claire-element-id="501338"><code data-claire-semantic="c">LPVOID lpParam</code></pre><p id="r-501339" data-claire-element-id="501339">Ce paramètre est un pointeur vers ce que vous voulez, il est utilisé pour passer un paramètre supplémentaire lors de la création de la fenêtre.<br/> Voir la notification <em>WM_CREATE</em> en annexe.</p><h6 id="r-valeur-de-retour-4" data-claire-element-id="501342">Valeur de retour</h6><p id="r-501341" data-claire-element-id="501341">Cette fonction renvoie un <em>handle</em> (poignée) sur votre fenêtre, c'est-à-dire une sorte d'identifiant unique, qui vous servira à communiquer avec votre fenêtre pour (par exemple) créer des contrôles dans votre fenêtre, ou changer sa taille.<br/> Si la valeur de retour vaut <em>NULL</em>, alors la création a échoué.</p><h5 id="r-showwindow" data-claire-element-id="501381">ShowWindow</h5><pre id="r-501344" data-claire-element-id="501344"><code data-claire-semantic="c">BOOL ShowWindow(      
    HWND hWnd,
    int nCmdShow
);</code></pre><h6 id="r-description-57" data-claire-element-id="501346">Description</h6><p id="r-501345" data-claire-element-id="501345">Cette fonction sert à modifier la visibilité d'une fenêtre.</p><h6 id="r-parametres-10" data-claire-element-id="501378">Paramètres</h6><pre id="r-501347" data-claire-element-id="501347"><code data-claire-semantic="c">HWND hWnd</code></pre><p id="r-501348" data-claire-element-id="501348">Ce paramètre est le <em>handle</em> sur la fenêtre dont vous voulez modifier la visibilité.<br/> Vous l'obtenez lors de l'appel à <em>CreateWindow</em> par exemple.</p><pre id="r-501349" data-claire-element-id="501349"><code data-claire-semantic="c">int nCmdShow</code></pre><p id="r-501350" data-claire-element-id="501350">Ce paramètre peut prendre plusieurs valeurs selon la visibilité que vous voulez appliquer.</p><ul id="r-501375" data-claire-element-id="501375"><li id="r-501352" data-claire-element-id="501352"><p id="r-501351" data-claire-element-id="501351"><strong>SW_HIDE</strong> : cache la fenêtre (celle-ci deviendra invisible à l'utilisateur).</p></li><li id="r-501354" data-claire-element-id="501354"><p id="r-501353" data-claire-element-id="501353"><strong>SW_MAXIMIZE</strong> : la fenêtre prendra la taille de l'écran.</p></li><li id="r-501356" data-claire-element-id="501356"><p id="r-501355" data-claire-element-id="501355"><strong>SW_MINIMIZE</strong> : la fenêtre sera réduite en barre des tâches.</p></li><li id="r-501358" data-claire-element-id="501358"><p id="r-501357" data-claire-element-id="501357"><strong>SW_RESTORE</strong> : l'inverse de <em>WS_MINIMIZE</em>, la fenêtre retrouvera son état précédent.</p></li><li id="r-501360" data-claire-element-id="501360"><p id="r-501359" data-claire-element-id="501359"><strong>SW_SHOW</strong> : rend la fenêtre visible.</p></li><li id="r-501362" data-claire-element-id="501362"><p id="r-501361" data-claire-element-id="501361"><strong>SW_SHOWDEFAULT</strong> : trop compliqué pour l'instant, il faut avoir une connaissance plus approfondie de Windows pour le comprendre.</p></li><li id="r-501364" data-claire-element-id="501364"><p id="r-501363" data-claire-element-id="501363"><strong>SW_SHOWMAXIMIZED</strong> : c'est équivalent à <em>SW_SHOW</em> + <em>SW_MAXIMIZE</em>.</p></li><li id="r-501366" data-claire-element-id="501366"><p id="r-501365" data-claire-element-id="501365"><strong>SW_SHOWMINIMIZED</strong> : c'est équivalent à <em>SW_SHOW</em> + <em>SW_MINIMIZE</em></p></li><li id="r-501368" data-claire-element-id="501368"><p id="r-501367" data-claire-element-id="501367"><strong>SW_SHOWMINNOACTIVE</strong> : idem que <em>SW_SHOWMINIMIZED</em>, mais la fenêtre n'est pas activée.</p></li><li id="r-501370" data-claire-element-id="501370"><p id="r-501369" data-claire-element-id="501369"><strong>SW_SHOWNA</strong> : idem que <em>SW_SHOW</em> mais la fenêtre n'est pas activée.</p></li><li id="r-501372" data-claire-element-id="501372"><p id="r-501371" data-claire-element-id="501371"><strong>SW_SHOWNOACTIVATE</strong> : idem que <em>SW_SHOWNORMAL</em>, mais la fenêtre n'est pas activée.</p></li><li id="r-501374" data-claire-element-id="501374"><p id="r-501373" data-claire-element-id="501373"><strong>SW_SHOWNORMAL</strong> : active et montre la fenêtre, si celle-ci est minimisée, cela équivaut à <em>SW_RESTORE</em>.</p></li></ul><aside id="r-501377" data-claire-element-id="501377" data-claire-semantic="information"><p id="r-501376" data-claire-element-id="501376">Je fais une petite remarque :<br/> vous avez sûrement remarqué que j'utilise le mot <strong>activé</strong> en parlant des fenêtres.<br/> Qu'est-ce que cela veut dire ?<br/> Simplement sous Windows, il y a <strong>UNE</strong> seule fenêtre active à un moment donné, on appelle ça le <strong>focus</strong>. C'est elle qui reçoit les événements venant du clavier et de la souris.</p></aside><h6 id="r-valeur-de-retour-5" data-claire-element-id="501380">Valeur de retour</h6><p id="r-501379" data-claire-element-id="501379">Cette fonction renvoie <em>TRUE</em> si elle a réussi, et <em>FALSE</em> si elle a échoué.</p><h5 id="r-updatewindow" data-claire-element-id="501390">UpdateWindow</h5><pre id="r-501382" data-claire-element-id="501382"><code data-claire-semantic="c">BOOL UpdateWindow(
  HWND hWnd
);</code></pre><h6 id="r-description-58" data-claire-element-id="501384">Description</h6><p id="r-501383" data-claire-element-id="501383">Cette fonction met à jour la zone client de la fenêtre, en la forçant à être redessinée en envoyant un message <em>WM_PAINT</em><strong>directement</strong> à la fenêtre, au lieu de placer le message dans la file des messages.</p><h6 id="r-parametres-11" data-claire-element-id="501387">Paramètres</h6><pre id="r-501385" data-claire-element-id="501385"><code data-claire-semantic="c">HWND hWnd</code></pre><p id="r-501386" data-claire-element-id="501386"><em>handle</em> de la fenêtre dont la zone client est à redessiner.</p><h6 id="r-valeur-de-retour-6" data-claire-element-id="501389">Valeur de retour</h6><p id="r-501388" data-claire-element-id="501388">La fonction renvoie <em>TRUE</em> en cas de succès, et <em>FALSE</em> en cas d'échec.</p><h5 id="r-getmessage" data-claire-element-id="501412">GetMessage</h5><pre id="r-501391" data-claire-element-id="501391"><code data-claire-semantic="c">BOOL GetMessage(      
    LPMSG lpMsg,
    HWND hWnd,
    UINT wMsgFilterMin,
    UINT wMsgFilterMax
);</code></pre><h6 id="r-description-59" data-claire-element-id="501395">Description</h6><p id="r-501392" data-claire-element-id="501392">Cette fonction récupère un message dans la file du <em>thread</em> appelant.</p><aside id="r-501394" data-claire-element-id="501394" data-claire-semantic="warning"><p id="r-501393" data-claire-element-id="501393">La précision est importante, car si votre programme possède plusieurs <em>thread</em>, il faut faire attention à qui gère l'interface.</p></aside><h6 id="r-parametres-12" data-claire-element-id="501409">Paramètres</h6><pre id="r-501396" data-claire-element-id="501396"><code data-claire-semantic="c">LPMSG lpMsg</code></pre><p id="r-501397" data-claire-element-id="501397">Ce paramètre est un pointeur vers une structure de type <em>MSG</em> (voir annexe) qui contiendra, après l'appel à la fonction, le message récupéré.</p><pre id="r-501398" data-claire-element-id="501398"><code data-claire-semantic="c">HWND hWnd</code></pre><p id="r-501399" data-claire-element-id="501399">Ce paramètre représente l'identifiant de la fenêtre dont on veut récupérer le message.<br/> S'il ce paramètre vaut <em>NULL</em>, alors la fonction récupère un message qui appartient à n'importe quelle fenêtre créée par le <em>thread</em>.</p><aside id="r-501401" data-claire-element-id="501401" data-claire-semantic="information"><p id="r-501400" data-claire-element-id="501400">L'intérêt de paramètre est de permettre une granularité plus fine sur les messages que l'on veut faire passer.</p></aside><pre id="r-501402" data-claire-element-id="501402"><code data-claire-semantic="c">UINT wMsgFilterMin,UINT wMsgFilterMax</code></pre><p id="r-501403" data-claire-element-id="501403">Ces paramètres représentent respectivement les identifiants des messages les plus &quot;bas&quot; et les plus &quot;hauts&quot; à faire passer.<br/> Si ces paramètres valent 0, tous les messages sont passés.<br/> Valeurs particulières :</p><ul id="r-501408" data-claire-element-id="501408"><li id="r-501405" data-claire-element-id="501405"><p id="r-501404" data-claire-element-id="501404"><em>WM_KEYFIRST</em>, <em>WM_KEYLAST</em> pour tous les événements clavier.</p></li><li id="r-501407" data-claire-element-id="501407"><p id="r-501406" data-claire-element-id="501406"><em>WM_MOUSEFIRST</em>, <em>WM_MOUSELAST</em> pour tous les événements souris.</p></li></ul><h6 id="r-valeur-de-retour-7" data-claire-element-id="501411">Valeur de retour</h6><p id="r-501410" data-claire-element-id="501410">Cette fonction retourne <em>TRUE</em> si elle réussit, et <em>FALSE</em> si elle échoue.</p><h5 id="r-translatemessage" data-claire-element-id="501423">translatemessage</h5><pre id="r-501413" data-claire-element-id="501413"><code data-claire-semantic="c">BOOL TranslateMessage(      
    const MSG *lpMsg
);</code></pre><h6 id="r-description-60" data-claire-element-id="501417">Description</h6><p id="r-501414" data-claire-element-id="501414">Cette fonction est uniquement utile pour les messages de type clavier, elle traduit les événements de type Touche Virtuelle (voir note) en événement de types Caractère (voir note), et poste le message obtenu dans la file des messages.</p><aside id="r-501416" data-claire-element-id="501416" data-claire-semantic="information"><p id="r-501415" data-claire-element-id="501415">Qu'est-ce que c'est donc que ça ?<br/> En fait, lorsque vous appuyez sur une touche, le clavier envoie à Windows un nombre qui est le numéro <strong>physique</strong> de la touche, ensuite Windows traduit ce numéro en nombre qui est le numéro <strong>logique</strong> ou <strong>virtuel</strong> de la touche (les <em>VK_*</em>).<br/> Le problème, c'est que pour les éditeurs de textes, ce n'est pas pratique de savoir quelle touche a été enfoncée ; ce qui les intéressent, c'est le caractère correspondant à cette touche.<br/> C'est pourquoi cette fonction fait la traduction.</p></aside><h6 id="r-parametres-13" data-claire-element-id="501420">Paramètres</h6><pre id="r-501418" data-claire-element-id="501418"><code data-claire-semantic="c">const MSG *lpMsg</code></pre><p id="r-501419" data-claire-element-id="501419">Ce paramètre est un pointeur vers le message récupéré par <em>GetMessage</em>.</p><h6 id="r-valeur-de-retour-8" data-claire-element-id="501422">Valeur de retour</h6><p id="r-501421" data-claire-element-id="501421">Si le message a été traduit, cette fonction renvoie <em>TRUE</em>.<br/> Si le message est <em>WM_KEYDOWN</em>, <em>WM_KEYUP</em>, <em>WM_SYSKEYDOWN</em> ou <em>WM_SYSKEYUP</em>, cette fonction renvoie <em>TRUE</em>.<br/> Sinon, elle renvoie <em>FALSE</em>.</p><h5 id="r-dispatchmessage" data-claire-element-id="501432">DispatchMessage</h5><pre id="r-501424" data-claire-element-id="501424"><code data-claire-semantic="c">LRESULT DispatchMessage(
    const MSG *lpmsg
);</code></pre><h6 id="r-description-61" data-claire-element-id="501426">Description</h6><p id="r-501425" data-claire-element-id="501425">Cette fonction envoie le message à la fonction de <em>callback</em> de la fenêtre concernée.<br/> En quelque sorte, c'est elle qui appelle votre fonction qui gère les messages.</p><h6 id="r-parametres-14" data-claire-element-id="501429">Paramètres</h6><pre id="r-501427" data-claire-element-id="501427"><code data-claire-semantic="c">const MSG *lpMsg</code></pre><p id="r-501428" data-claire-element-id="501428">Ce paramètre est un pointeur vers le message récupéré par <em>GetMessage</em>.</p><h6 id="r-valeur-de-retour-9" data-claire-element-id="501431">Valeur de retour</h6><p id="r-501430" data-claire-element-id="501430">Cette fonction renvoie la valeur retournée par votre fonction de <em>callback</em>.<br/> Par exemple, si dans votre de fonction de gestion des messages vous faites : &quot;return 1000;&quot;,<br/> alors, cette fonction retournera 1000.</p><h5 id="r-windowproc" data-claire-element-id="501445">WindowProc</h5><pre id="r-501433" data-claire-element-id="501433"><code data-claire-semantic="c">LRESULT CALLBACK WindowProc
    HWND hwnd,
    UINT uMsg,
    WPARAM wParam,
    LPARAM lParam
);</code></pre><h6 id="r-description-62" data-claire-element-id="501435">Description</h6><p id="r-501434" data-claire-element-id="501434">Ceci n'est pas vraiment une fonction de l'API Windows à proprement parler : c'est la fonction de gestion des messages envoyée à votre (vos) fenêtre(s).</p><h6 id="r-parametres-15" data-claire-element-id="501442">Paramètres</h6><pre id="r-501436" data-claire-element-id="501436"><code data-claire-semantic="c">HWND hwnd</code></pre><p id="r-501437" data-claire-element-id="501437">Ceci est le <em>handle</em> de la fenêtre concernée par le message.</p><pre id="r-501438" data-claire-element-id="501438"><code data-claire-semantic="c">UINT uMsg</code></pre><p id="r-501439" data-claire-element-id="501439">Ceci est l'identifiant du message.</p><pre id="r-501440" data-claire-element-id="501440"><code data-claire-semantic="c">WPARAM wParam,
    LPARAM lParam</code></pre><p id="r-501441" data-claire-element-id="501441">Ces paramètres sont entièrement dépendant du message envoyé.<br/> Voir l'annexe sur les messages.</p><h6 id="r-valeur-de-retour-10" data-claire-element-id="501444">Valeur de retour</h6><p id="r-501443" data-claire-element-id="501443">Ceci est la valeur retournée par vous-mêmes, ou la fonction <em>DefWindowProc</em>.</p><h5 id="r-defwindowproc" data-claire-element-id="501454">DefWindowProc</h5><pre id="r-501446" data-claire-element-id="501446"><code data-claire-semantic="c">LRESULT DefWindowProc(
    HWND hWnd,
    UINT Msg,
    WPARAM wParam,
    LPARAM lParam
);</code></pre><h6 id="r-description-63" data-claire-element-id="501448">Description</h6><p id="r-501447" data-claire-element-id="501447">Cette fonction appelle la fonction de gestion des messages par défaut du système. Elle est utile lorsque vous ne gérez pas vous-mêmes le message.<br/> En pratique, à chaque fois que vous ne gérez pas un message, vous appelez cette fonction.</p><h6 id="r-parametres-16" data-claire-element-id="501450">Paramètres</h6><p id="r-501449" data-claire-element-id="501449">Vous devez passer les paramètres de votre fonction de gestion des messages (voir <em>WindowProc</em>) <strong>tels quels.</strong>.</p><h6 id="r-valeur-de-retour-11" data-claire-element-id="501453">Valeur de retour</h6><p id="r-501451" data-claire-element-id="501451">Ceci est la valeur retournée par la fonction de gestion des messages. Vous <strong>devez</strong> retourner cette valeur :</p><pre id="r-501452" data-claire-element-id="501452"><code data-claire-semantic="c">return DefWindowProc(hwnd,uMsg,wParam,lParam);</code></pre><h5 id="r-sendmessage" data-claire-element-id="501464">SendMessage</h5><pre id="r-501455" data-claire-element-id="501455"><code data-claire-semantic="c">LRESULT SendMessage(      
    HWND hWnd,
    UINT Msg,
    WPARAM wParam,
    LPARAM lParam
)</code></pre><h6 id="r-description-64" data-claire-element-id="501459">Description</h6><p id="r-501456" data-claire-element-id="501456">Cette fonction permet d'envoyer un message à une fenêtre ou à un contrôle. C'est-à-dire qu'elle va appeler la fonction de gestion des messages de la fenêtre avec les paramètres que vous spécifiez.<br/> Par exemple, si vous faites :</p><pre id="r-501457" data-claire-element-id="501457"><code data-claire-semantic="c">SendMessage(hwnd,WM_QUIT,0,0);</code></pre><p id="r-501458" data-claire-element-id="501458">Ceci va appeler une fonction de type <em>WindowProc</em>, associée à <em>hwnd</em>, avec exactement les mêmes paramètres que vous avez spécifiés.</p><h6 id="r-parametres-17" data-claire-element-id="501461">Paramètres</h6><p id="r-501460" data-claire-element-id="501460">Ce sont les même que pour <em>WindowProc</em> sauf que <em>hWnd</em> est l'identifiant de la fenêtre <strong>à laquelle</strong> vous envoyez le message.</p><h6 id="r-valeur-de-retour-12" data-claire-element-id="501463">Valeur de retour</h6><p id="r-501462" data-claire-element-id="501462">Cette fonction renvoie la valeur retournée par la fonction de gestion des messages.</p><h5 id="r-messagebox-1" data-claire-element-id="501567">MessageBox</h5><pre id="r-501465" data-claire-element-id="501465"><code data-claire-semantic="c">int MessageBox(      
    HWND hWnd,
    LPCTSTR lpText,
    LPCTSTR lpCaption,
    UINT uType
);</code></pre><h6 id="r-description-65" data-claire-element-id="501469">Description</h6><p id="r-501466" data-claire-element-id="501466">Cette fonction extrêmement pratique permet d'afficher une petite fenêtre avec du texte dedans pour informer l'utilisateur, ou lui demander quelque chose.</p><aside id="r-501468" data-claire-element-id="501468" data-claire-semantic="information"><p id="r-501467" data-claire-element-id="501467">Par exemple, lorsque vous fermez votre éditeur de texte préféré, vous obtenez un message :<br/> Voulez-vous sauvegarder votre travail ?<br/> Et un choix Oui / Non. Eh bien vous pouvez faire ceci avec <em>MessageBox</em>.</p></aside><h6 id="r-parametres-18" data-claire-element-id="501545">Paramètres</h6><pre id="r-501470" data-claire-element-id="501470"><code data-claire-semantic="c">HWND hWnd</code></pre><p id="r-501471" data-claire-element-id="501471">Ce paramètre est le <em>handle</em> de la fenêtre qui sera le parent du message affiché.</p><aside id="r-501473" data-claire-element-id="501473" data-claire-semantic="information"><p id="r-501472" data-claire-element-id="501472">Mais quel intérêt ?<br/> Vous savez que quand ce message s'affiche dans votre éditeur de texte préféré, vous ne pouvez plus activer votre éditeur de texte, sinon vous obtenez un 'Beeeeeep'.<br/> Eh bien c'est parce que le parent du message est la fenêtre de votre éditeur de texte.</p></aside><pre id="r-501474" data-claire-element-id="501474"><code data-claire-semantic="c">LPCTSTR lpText</code></pre><p id="r-501475" data-claire-element-id="501475">Ce paramètre est la chaîne de caractères à afficher dans le message.</p><aside id="r-501477" data-claire-element-id="501477" data-claire-semantic="information"><p id="r-501476" data-claire-element-id="501476">Si dans la chaîne de caractères vous mettez ' ', alors cela passera à la ligne suivante comme dans la console.</p></aside><pre id="r-501478" data-claire-element-id="501478"><code data-claire-semantic="c">LPCTSTR lpCaption</code></pre><p id="r-501479" data-claire-element-id="501479">Ce paramètre est la chaîne de caractères à afficher comme titre de la fenêtre.</p><aside id="r-501481" data-claire-element-id="501481" data-claire-semantic="information"><p id="r-501480" data-claire-element-id="501480">Si dans la chaîne de caractères vous mettez ' ', le résultat est indéfini.</p></aside><pre id="r-501482" data-claire-element-id="501482"><code data-claire-semantic="c">UINT uType</code></pre><p id="r-501483" data-claire-element-id="501483">Ce paramètre est le type de message à afficher.<br/> Il peut être la combinaison de plusieurs paramètres grâce au OU binaire(|).<br/> Le premier groupe de paramètres spécifie les boutons à afficher :</p><ul id="r-501496" data-claire-element-id="501496"><li id="r-501485" data-claire-element-id="501485"><p id="r-501484" data-claire-element-id="501484"><strong>MB_ABORTRETRYIGNORE</strong> : trois boutons : 'Abandonner', 'Réessayer', 'Ignorer'.</p></li><li id="r-501487" data-claire-element-id="501487"><p id="r-501486" data-claire-element-id="501486"><strong>MB_OK</strong> : un bouton : 'Ok'.</p></li><li id="r-501489" data-claire-element-id="501489"><p id="r-501488" data-claire-element-id="501488"><strong>MB_OKCANCEL</strong> : deux boutons : 'Ok', 'Annuler'.</p></li><li id="r-501491" data-claire-element-id="501491"><p id="r-501490" data-claire-element-id="501490"><strong>MB_RETRYCANCEL</strong> : deux boutons : 'Réessayer', 'Annuler'.</p></li><li id="r-501493" data-claire-element-id="501493"><p id="r-501492" data-claire-element-id="501492"><strong>MB_YESNO</strong> : deux boutons : 'Oui', 'Non'.</p></li><li id="r-501495" data-claire-element-id="501495"><p id="r-501494" data-claire-element-id="501494"><strong>MB_YESNOCANCEL</strong> : trois boutons : 'Oui', 'Non', 'Annuler'.</p></li></ul><p id="r-501497" data-claire-element-id="501497">Le deuxième groupe spécifie l'icône à afficher :</p><ul id="r-501514" data-claire-element-id="501514"><li id="r-501499" data-claire-element-id="501499"><p id="r-501498" data-claire-element-id="501498"><strong>MB_ICONEXCLAMATION</strong> : un point d'exclamation.</p></li><li id="r-501501" data-claire-element-id="501501"><p id="r-501500" data-claire-element-id="501500"><strong>MB_ICONWARNING</strong> : un point d'exclamation.</p></li><li id="r-501503" data-claire-element-id="501503"><p id="r-501502" data-claire-element-id="501502"><strong>MB_ICONINFORMATION</strong> : un i dans un cercle.</p></li><li id="r-501505" data-claire-element-id="501505"><p id="r-501504" data-claire-element-id="501504"><strong>MB_ICONASTERISK</strong> : un i dans un cercle.</p></li><li id="r-501507" data-claire-element-id="501507"><p id="r-501506" data-claire-element-id="501506"><strong>MB_ICONQUESTION</strong> : un point d'exclamation (ce paramètre est déconseillé par Microsoft).</p></li><li id="r-501509" data-claire-element-id="501509"><p id="r-501508" data-claire-element-id="501508"><strong>MB_ICONSTOP</strong> : une icône STOP.</p></li><li id="r-501511" data-claire-element-id="501511"><p id="r-501510" data-claire-element-id="501510"><strong>MB_ICONERROR</strong> : une icône d'erreur.</p></li><li id="r-501513" data-claire-element-id="501513"><p id="r-501512" data-claire-element-id="501512"><strong>MB_ICONHAND</strong> : une icône de main.</p></li></ul><p id="r-501515" data-claire-element-id="501515">Le troisième groupe spécifie le bouton par défaut.</p><aside id="r-501517" data-claire-element-id="501517" data-claire-semantic="information"><p id="r-501516" data-claire-element-id="501516">C'est quoi le bouton par défaut ?<br/> Vous savez, quand vous avez un message et que vous appuyez sur Entrée, cela &quot;appuie&quot; sur le bouton qui apparaît différent des autres.</p></aside><ul id="r-501526" data-claire-element-id="501526"><li id="r-501519" data-claire-element-id="501519"><p id="r-501518" data-claire-element-id="501518"><strong>MB_DEFBUTTON1</strong> : le premier bouton de la liste.</p></li><li id="r-501521" data-claire-element-id="501521"><p id="r-501520" data-claire-element-id="501520"><strong>MB_DEFBUTTON2</strong> : le deuxième bouton de la liste.</p></li><li id="r-501523" data-claire-element-id="501523"><p id="r-501522" data-claire-element-id="501522"><strong>MB_DEFBUTTON3</strong> : le troisième bouton de la liste.</p></li><li id="r-501525" data-claire-element-id="501525"><p id="r-501524" data-claire-element-id="501524"><strong>MB_DEFBUTTON4</strong> : le quatrième bouton de la liste.</p></li></ul><p id="r-501527" data-claire-element-id="501527">Le quatrième groupe spécifie le type de fenêtre :</p><ul id="r-501534" data-claire-element-id="501534"><li id="r-501529" data-claire-element-id="501529"><p id="r-501528" data-claire-element-id="501528"><strong>MB_APPLMODAL</strong> : l'utilisateur doit répondre, mais peut activer les autres fenêtres du Bureau, sauf la fenêtre parent du message.</p></li><li id="r-501531" data-claire-element-id="501531"><p id="r-501530" data-claire-element-id="501530"><strong>MB_SYSTEMMODAL</strong> : même chose que <em>MB_APPLMODAL</em>, mais si la fenêtre parent n'est pas la fenêtre au premier plan, elle le devient, et y reste jusqu'à ce que l'utilisateur réponde.</p></li><li id="r-501533" data-claire-element-id="501533"><p id="r-501532" data-claire-element-id="501532"><strong>MB_TASKMODAL</strong> : même chose que <em>MB_APPLMODAL</em>, mais si la fenêtre parent vaut <em>NULL</em>, toutes les fenêtres du <em>thread</em> appelant sont désactivées en attendant la réponse.</p></li></ul><p id="r-501535" data-claire-element-id="501535">Le dernier groupe spécifie d'autres options :</p><ul id="r-501544" data-claire-element-id="501544"><li id="r-501537" data-claire-element-id="501537"><p id="r-501536" data-claire-element-id="501536"><strong>MB_RIGHT</strong> : le texte est justifié à droite.</p></li><li id="r-501539" data-claire-element-id="501539"><p id="r-501538" data-claire-element-id="501538"><strong>MB_RTLREADING</strong> : le texte est affiché de droite à gauche.</p></li><li id="r-501541" data-claire-element-id="501541"><p id="r-501540" data-claire-element-id="501540"><strong>MB_SETFOREGROUND</strong> : le fenêtre du message passe au premier plan.</p></li><li id="r-501543" data-claire-element-id="501543"><p id="r-501542" data-claire-element-id="501542"><strong>MB_TOPMOST</strong> : la fenêtre du message passe au premier plan, et le reste jusqu'à ce que l'utilisateur réponde.</p></li></ul><h6 id="r-valeur-de-retour-13" data-claire-element-id="501566">Valeur de retour</h6><p id="r-501546" data-claire-element-id="501546">Si la fonction échoue, elle renvoie 0.<br/> Si elle réussit, elle renvoie:</p><ul id="r-501565" data-claire-element-id="501565"><li id="r-501548" data-claire-element-id="501548"><p id="r-501547" data-claire-element-id="501547"><strong>IDABORT</strong> : l'utilisateur a pressé 'Abandonner'.</p></li><li id="r-501550" data-claire-element-id="501550"><p id="r-501549" data-claire-element-id="501549"><strong>IDCANCEL</strong> : l'utilisateur a pressé 'Annuler'.</p></li><li id="r-501552" data-claire-element-id="501552"><p id="r-501551" data-claire-element-id="501551"><strong>IDCONTINUE</strong> : l'utilisateur a pressé 'Continuer'.</p></li><li id="r-501554" data-claire-element-id="501554"><p id="r-501553" data-claire-element-id="501553"><strong>IDIGNORE</strong> : l'utilisateur a pressé 'Ignorer'.</p></li><li id="r-501556" data-claire-element-id="501556"><p id="r-501555" data-claire-element-id="501555"><strong>IDNO</strong> : l'utilisateur a pressé 'Non'.</p></li><li id="r-501558" data-claire-element-id="501558"><p id="r-501557" data-claire-element-id="501557"><strong>IDOK</strong> : l'utilisateur à pressé 'Ok'.</p></li><li id="r-501560" data-claire-element-id="501560"><p id="r-501559" data-claire-element-id="501559"><strong>IDRETRY</strong> : l'utilisateur à pressé 'Réessayer'.</p></li><li id="r-501562" data-claire-element-id="501562"><p id="r-501561" data-claire-element-id="501561"><strong>IDTRYAGAIN</strong> : l'utilisateur à pressé 'Essayer encore'.</p></li><li id="r-501564" data-claire-element-id="501564"><p id="r-501563" data-claire-element-id="501563"><strong>IDYES</strong> : l'utilisateur à pressé 'Oui'.</p></li></ul><h5 id="r-createmenu" data-claire-element-id="501574">CreateMenu</h5><pre id="r-501568" data-claire-element-id="501568"><code data-claire-semantic="c">HMENU CreateMenu(VOID);</code></pre><h6 id="r-description-66" data-claire-element-id="501570">Description</h6><p id="r-501569" data-claire-element-id="501569">Cette fonction permet de créer un menu. Ce menu est initialement vide.</p><h6 id="r-parametres-19" data-claire-element-id="501571">Paramètres</h6><h6 id="r-valeur-de-retour-14" data-claire-element-id="501573">Valeur de retour</h6><p id="r-501572" data-claire-element-id="501572">Le <em>handle</em> du menu en cas de succès, et <em>NULL</em> en cas d'échec.</p><h5 id="r-appendmenu" data-claire-element-id="501633">AppendMenu</h5><pre id="r-501575" data-claire-element-id="501575"><code data-claire-semantic="c">BOOL AppendMenu(      
    HMENU hMenu,
    UINT uFlags,
    UINT_PTR uIDNewItem,
    LPCTSTR lpNewItem
);</code></pre><h6 id="r-description-67" data-claire-element-id="501579">Description</h6><p id="r-501576" data-claire-element-id="501576">Cette fonction permet d'ajouter un élément à un menu existant.</p><aside id="r-501578" data-claire-element-id="501578" data-claire-semantic="information"><p id="r-501577" data-claire-element-id="501577">Par élément, on entend aussi bien un libellé (texte) qu'une case à cocher, une image ou un sous-menu.</p></aside><h6 id="r-parametres-20" data-claire-element-id="501630">Paramètres</h6><pre id="r-501580" data-claire-element-id="501580"><code data-claire-semantic="c">HMENU hMenu</code></pre><p id="r-501581" data-claire-element-id="501581">Le <em>handle</em> du menu auquel on va ajouter l'élément.</p><pre id="r-501582" data-claire-element-id="501582"><code data-claire-semantic="c">UINT uFlags</code></pre><p id="r-501583" data-claire-element-id="501583">Ce paramètre peut être la combinaison d'un ou plusieurs de ces paramètres :</p><ul id="r-501608" data-claire-element-id="501608"><li id="r-501585" data-claire-element-id="501585"><p id="r-501584" data-claire-element-id="501584"><strong>MF_BITMAP</strong> : utilise une image comme élément ; dans ce cas, <em>lpNewItem</em> contiendra alors le <em>handle</em> de l'image.</p></li><li id="r-501587" data-claire-element-id="501587"><p id="r-501586" data-claire-element-id="501586"><strong>MF_CHECKED</strong> : place une case à cocher à gauche de l'élément.</p></li><li id="r-501589" data-claire-element-id="501589"><p id="r-501588" data-claire-element-id="501588"><strong>MF_DISABLED</strong> : désactive l'élément, il ne peut être sélectionné ; mais ce paramètre ne le fait pas apparaître comme grisé.</p></li><li id="r-501591" data-claire-element-id="501591"><p id="r-501590" data-claire-element-id="501590"><strong>MF_ENABLED</strong> : active l'élément, il peut être sélectionné et n'est pas grisé.</p></li><li id="r-501593" data-claire-element-id="501593"><p id="r-501592" data-claire-element-id="501592"><strong>MF_GRAYED</strong> : désactive l'élément et le fait apparaître grisé.</p></li><li id="r-501595" data-claire-element-id="501595"><p id="r-501594" data-claire-element-id="501594"><strong>MF_MENUBARBREAK</strong> : place l'élément dans une nouvelle colonne.</p></li><li id="r-501597" data-claire-element-id="501597"><p id="r-501596" data-claire-element-id="501596"><strong>MF_MENUBREAK</strong> : même chose que <em>MF_MENUBARBREAK</em></p></li><li id="r-501599" data-claire-element-id="501599"><p id="r-501598" data-claire-element-id="501598"><strong>MF_OWNERDRAW</strong> : l'élément est dessiné par l'utilisateur.</p></li><li id="r-501601" data-claire-element-id="501601"><p id="r-501600" data-claire-element-id="501600"><strong>MF_POPUP</strong> : l'élément ouvre un menu déroulant.</p></li><li id="r-501603" data-claire-element-id="501603"><p id="r-501602" data-claire-element-id="501602"><strong>MF_SEPARATOR</strong> : l'élément est un séparateur, il ne peut être sélectionné ni mis en surbrillance ; dans ce cas, <em>lpNewItem</em> et <em>uIDNewItem</em> sont ignorés.</p></li><li id="r-501605" data-claire-element-id="501605"><p id="r-501604" data-claire-element-id="501604"><strong>MF_STRING</strong> : l'élément est un libellé (texte) ; dans ce cas, <em>lpNewItem</em> est pointeur sur le texte à afficher.</p></li><li id="r-501607" data-claire-element-id="501607"><p id="r-501606" data-claire-element-id="501606"><strong>MF_UNCHECKED</strong> : l'élément n'a pas de case à cocher à sa gauche (c'est le comportement par défaut).</p></li></ul><p id="r-501609" data-claire-element-id="501609">Les groupes suivants ne peuvent être utilisés ensemble :</p><ul id="r-501618" data-claire-element-id="501618"><li id="r-501611" data-claire-element-id="501611"><p id="r-501610" data-claire-element-id="501610"><em>MF_BITMAP</em>, <em>MF_STRING</em> et <em>MF_OWNERDRAW</em></p></li><li id="r-501613" data-claire-element-id="501613"><p id="r-501612" data-claire-element-id="501612"><em>MF_CHECKED</em> et <em>MF_UNCHECKED</em></p></li><li id="r-501615" data-claire-element-id="501615"><p id="r-501614" data-claire-element-id="501614"><em>MF_DISABLED</em>, <em>MF_ENABLED</em> et <em>MF_GRAYED</em></p></li><li id="r-501617" data-claire-element-id="501617"><p id="r-501616" data-claire-element-id="501616"><em>MF_MENUBARBREAK</em> et <em>MF_MENUBREAK</em></p></li></ul><pre id="r-501619" data-claire-element-id="501619"><code data-claire-semantic="c">UINT_PTR uIDNewItem</code></pre><p id="r-501620" data-claire-element-id="501620">Spécifie soit l'identifiant du menu, ou si <em>uFlags</em> est mis à <em>MF_POPUP</em>, le <em>handle</em> du sous-menu.</p><pre id="r-501621" data-claire-element-id="501621"><code data-claire-semantic="c">LPCTSTR lpNewItem</code></pre><p id="r-501622" data-claire-element-id="501622">Ce paramètre dépend de la valeur de <em>lpNewItem</em> :</p><ul id="r-501629" data-claire-element-id="501629"><li id="r-501624" data-claire-element-id="501624"><p id="r-501623" data-claire-element-id="501623"><strong>MF_BITMAP</strong> : <em>handle</em> du <em>bitmap</em>.</p></li><li id="r-501626" data-claire-element-id="501626"><p id="r-501625" data-claire-element-id="501625"><strong>MF_OWNERDRAW</strong> : pointeur vers des données utilisateur, utilisables lors du dessin grâce au paramètre <em>lParam</em>.</p></li><li id="r-501628" data-claire-element-id="501628"><p id="r-501627" data-claire-element-id="501627"><strong>MF_STRING</strong> : pointeur sur la chaîne de caractère à afficher.</p></li></ul><h6 id="r-valeur-de-retour-15" data-claire-element-id="501632">Valeur de retour</h6><p id="r-501631" data-claire-element-id="501631">La fonction renvoie <em>TRUE</em> en cas de succès, et <em>FALSE</em> en cas d'échec.</p><h5 id="r-setmenu" data-claire-element-id="501646">SetMenu</h5><pre id="r-501634" data-claire-element-id="501634"><code data-claire-semantic="c">BOOL SetMenu(      
    HWND hWnd,
    HMENU hMenu
);</code></pre><h6 id="r-description-68" data-claire-element-id="501636">Description</h6><p id="r-501635" data-claire-element-id="501635">Cette fonction permet de définir le menu associé à une fenêtre.</p><h6 id="r-parametres-21" data-claire-element-id="501641">Paramètres</h6><pre id="r-501637" data-claire-element-id="501637"><code data-claire-semantic="c">HWND hWnd</code></pre><p id="r-501638" data-claire-element-id="501638"><em>handle</em> de la fenêtre à laquelle on assigne un nouveau menu.</p><pre id="r-501639" data-claire-element-id="501639"><code data-claire-semantic="c">HMENU hMenu</code></pre><p id="r-501640" data-claire-element-id="501640"><em>handle</em> du nouveau menu, ou <em>NULL</em> pour que la fenêtre n'ait plus de menu associé.</p><h6 id="r-valeur-de-retour-16" data-claire-element-id="501645">Valeur de retour</h6><p id="r-501642" data-claire-element-id="501642">Elle renvoie <em>TRUE</em> en cas de succès, et <em>FALSE</em> en cas d'erreur.</p><aside id="r-501644" data-claire-element-id="501644" data-claire-semantic="warning"><p id="r-501643" data-claire-element-id="501643">En aucun cas cette fonction ne détruit le menu associé, vous devez appelez <em>destroymenu</em> pour accomplir cette tâche.</p></aside><h5 id="r-enablemenuitem" data-claire-element-id="501670">EnableMenuItem</h5><pre id="r-501647" data-claire-element-id="501647"><code data-claire-semantic="c">BOOL EnableMenuItem(      
    HMENU hMenu,
    UINT uIDEnableItem,
    UINT uEnable
);</code></pre><h6 id="r-description-69" data-claire-element-id="501649">Description</h6><p id="r-501648" data-claire-element-id="501648">Cette fonction permet d'activer, désactiver et griser un élément d'un menu.</p><h6 id="r-parametres-22" data-claire-element-id="501667">Paramètres</h6><pre id="r-501650" data-claire-element-id="501650"><code data-claire-semantic="c">HMENU hMenu</code></pre><p id="r-501651" data-claire-element-id="501651"><em>handle</em> du menu auquel appartient l'élément à modifier.</p><pre id="r-501652" data-claire-element-id="501652"><code data-claire-semantic="c">UINT uIDEnableItem</code></pre><p id="r-501653" data-claire-element-id="501653">Ce paramètre est l'indice ou l'identifiant de l'élément du menu à modifier selon le paramètre <em>uEnable</em>.</p><pre id="r-501654" data-claire-element-id="501654"><code data-claire-semantic="c">UINT uEnable</code></pre><p id="r-501655" data-claire-element-id="501655">Ce paramètre peut prendre une ou plusieurs de ces valeurs :</p><ul id="r-501666" data-claire-element-id="501666"><li id="r-501657" data-claire-element-id="501657"><p id="r-501656" data-claire-element-id="501656"><strong>MF_BYCOMMAND</strong> : le paramètre <em>uIDEnableItem</em> spécifie l'identifiant de l'élément (comportement par défaut).</p></li><li id="r-501659" data-claire-element-id="501659"><p id="r-501658" data-claire-element-id="501658"><strong>MF_BYPOSITION</strong> : le paramètre <em>uIDEnableItem</em> spécifie l'indice de l'élément (relatif à 0).</p></li><li id="r-501661" data-claire-element-id="501661"><p id="r-501660" data-claire-element-id="501660"><strong>MF_DISABLED</strong> : désactive l'élément (celui-ci ne sera pas grisé).</p></li><li id="r-501663" data-claire-element-id="501663"><p id="r-501662" data-claire-element-id="501662"><strong>MF_ENABLED</strong> : active l'élément et supprime son attribut grisé.</p></li><li id="r-501665" data-claire-element-id="501665"><p id="r-501664" data-claire-element-id="501664"><strong>MF_GRAYED</strong> : désactive et grise l'élément.</p></li></ul><h6 id="r-valeur-de-retour-17" data-claire-element-id="501669">Valeur de retour</h6><p id="r-501668" data-claire-element-id="501668">La fonction retourne l'état précédent de l'élément modifié (<em>MF_DISABLED</em>, <em>MF_ENABLED</em> ou <em>MF_GRAYED</em>), ou -1 en cas d'échec.</p><h5 id="r-checkmenuitem" data-claire-element-id="501692">CheckMenuItem</h5><pre id="r-501671" data-claire-element-id="501671"><code data-claire-semantic="c">DWORD CheckMenuItem(
    HMENU hmenu,
    UINT uIDCheckItem,
    UINT uCheck
);</code></pre><h6 id="r-description-70" data-claire-element-id="501673">Description</h6><p id="r-501672" data-claire-element-id="501672">Cette fonction permet de définir l'état de la boîte à cocher de l'élément d'un menu.</p><h6 id="r-parametres-23" data-claire-element-id="501689">Paramètres</h6><pre id="r-501674" data-claire-element-id="501674"><code data-claire-semantic="c">HMENU hmenu</code></pre><p id="r-501675" data-claire-element-id="501675"><em>handle</em> de l'élément auquel appartient le menu.</p><pre id="r-501676" data-claire-element-id="501676"><code data-claire-semantic="c">UINT uIDCheckItem</code></pre><p id="r-501677" data-claire-element-id="501677">Ce paramètre est l'indice ou l'identifiant de l'élément du menu à modifier selon le paramètre <em>uEnable</em>.</p><pre id="r-501678" data-claire-element-id="501678"><code data-claire-semantic="c">UINT uEnable</code></pre><p id="r-501679" data-claire-element-id="501679">Ce paramètre peut prendre une ou plusieurs de ces valeurs :</p><ul id="r-501688" data-claire-element-id="501688"><li id="r-501681" data-claire-element-id="501681"><p id="r-501680" data-claire-element-id="501680"><strong>MF_BYCOMMAND</strong> : le paramètre <em>uIDEnableItem</em> spécifie l'identifiant de l'élément (comportement par défaut).</p></li><li id="r-501683" data-claire-element-id="501683"><p id="r-501682" data-claire-element-id="501682"><strong>MF_BYPOSITION</strong> : le paramètre <em>uIDEnableItem</em> spécifie l'indice de l'élément (relatif à 0).</p></li><li id="r-501685" data-claire-element-id="501685"><p id="r-501684" data-claire-element-id="501684"><strong>MF_CHECKED</strong> : coche la boîte à cocher de l'élément.</p></li><li id="r-501687" data-claire-element-id="501687"><p id="r-501686" data-claire-element-id="501686"><strong>MF_UNCHECKED</strong> : décoche la boîte à cocher de l'élément.</p></li></ul><h6 id="r-valeur-de-retour-18" data-claire-element-id="501691">Valeur de retour</h6><p id="r-501690" data-claire-element-id="501690">La fonction retourne l'état précédent de l'élément modifié (<em>MF_CHECKED</em> ou <em>MF_UNCHECKED</em>), ou -1 en cas d'échec.</p><h5 id="r-loadmenu" data-claire-element-id="501703">LoadMenu</h5><pre id="r-501693" data-claire-element-id="501693"><code data-claire-semantic="c">HMENU LoadMenu(      
    HINSTANCE hInstance,
    LPCTSTR lpMenuName
);</code></pre><h6 id="r-description-71" data-claire-element-id="501695">Description</h6><p id="r-501694" data-claire-element-id="501694">Cette fonction permet de charger un menu contenu dans une ressource de l'exécutable.</p><h6 id="r-parametres-24" data-claire-element-id="501700">Paramètres</h6><pre id="r-501696" data-claire-element-id="501696"><code data-claire-semantic="c">HINSTANCE hInstance</code></pre><p id="r-501697" data-claire-element-id="501697">Instance du programme qui contient la ressource à charger.</p><pre id="r-501698" data-claire-element-id="501698"><code data-claire-semantic="c">LPCTSTR lpMenuName</code></pre><p id="r-501699" data-claire-element-id="501699">Nom de la ressource à charger.<br/> Peut être une chaîne de caractères, ou un identifiant formé avec la macro <em>MAKEINTRESOURCE</em>.</p><h6 id="r-valeur-de-retour-19" data-claire-element-id="501702">Valeur de retour</h6><p id="r-501701" data-claire-element-id="501701">Elle renvoie le <em>handle</em> du menu en cas de succès, et <em>NULL</em> en cas d'échec.</p><h5 id="r-createdialog" data-claire-element-id="501718">CreateDialog</h5><pre id="r-501704" data-claire-element-id="501704"><code data-claire-semantic="c">HWND CreateDialog(      
    HINSTANCE hInstance,
    LPCTSTR lpTemplate,
    HWND hWndParent,
    DLGPROC lpDialogFunc
);</code></pre><h6 id="r-description-72" data-claire-element-id="501706">Description</h6><p id="r-501705" data-claire-element-id="501705">Cette fonction permet de créer une boîte de dialogue stockée en ressource dans l'exécutable.</p><h6 id="r-parametres-25" data-claire-element-id="501715">Paramètres</h6><pre id="r-501707" data-claire-element-id="501707"><code data-claire-semantic="c">HINSTANCE hInstance</code></pre><p id="r-501708" data-claire-element-id="501708">Instance du programme auquel appartient la ressource.</p><pre id="r-501709" data-claire-element-id="501709"><code data-claire-semantic="c">LPCTSTR lpTemplate</code></pre><p id="r-501710" data-claire-element-id="501710">Nom de la ressource de type boîte de dialogue.<br/> Peut être un pointeur sur une chaîne de caractères, ou une valeur formée par la macro <em>MAKEINTRESOURCE</em>.</p><pre id="r-501711" data-claire-element-id="501711"><code data-claire-semantic="c">HWND hWndParent</code></pre><p id="r-501712" data-claire-element-id="501712"><em>handle</em> de la fenêtre parent de la boîte de dialogue.</p><pre id="r-501713" data-claire-element-id="501713"><code data-claire-semantic="c">DLGPROC lpDialogFunc</code></pre><p id="r-501714" data-claire-element-id="501714">Pointeur vers la fonction de gestion des messages de la boîte de dialogue.</p><h6 id="r-valeur-de-retour-20" data-claire-element-id="501717">Valeur de retour</h6><p id="r-501716" data-claire-element-id="501716">Cette fonction renvoie le <em>handle</em> de la boite de dialogue, ou <em>NULL</em> en cas d'échec.</p><h5 id="r-dialogbox" data-claire-element-id="501725">DialogBox</h5><pre id="r-501719" data-claire-element-id="501719"><code data-claire-semantic="c">INT_PTR DialogBox(      
    HINSTANCE hInstance,
    LPCTSTR lpTemplate,
    HWND hWndParent,
    DLGPROC lpDialogFunc
);</code></pre><p id="r-501720" data-claire-element-id="501720">Cette fonction (qui en fait est une macro) fait la même chose que <em>CreateDialogBox</em>, sauf qu'elle ne rend le contrôle que lors de la destruction de la boîte de dialogue avec la fonction <em>EndDialog</em>.</p><h6 id="r-parametres-26" data-claire-element-id="501722">Paramètres</h6><p id="r-501721" data-claire-element-id="501721">Ceux sont les mêmes que pour la fonction <em>CreateDialogBox</em>.</p><h6 id="r-valeur-de-retour-21" data-claire-element-id="501724">Valeur de retour</h6><p id="r-501723" data-claire-element-id="501723">Cette fonction renvoie la valeur passée au paramètre <em>nResult</em> de la fonction <em>EndDialog</em>.</p><h5 id="r-enddialog" data-claire-element-id="501736">EndDialog</h5><pre id="r-501726" data-claire-element-id="501726"><code data-claire-semantic="c">BOOL EndDialog(      
    HWND hDlg,
    INT_PTR nResult
);</code></pre><h6 id="r-description-73" data-claire-element-id="501728">Description</h6><p id="r-501727" data-claire-element-id="501727">Cette fonction détruit la boîte de dialogue, et rend le contrôle au <em>thread</em> lorsque celle-ci a été créée avec la fonction <em>DialogBox</em> qui est bloquante.</p><h6 id="r-parametres-27" data-claire-element-id="501735">Paramètres</h6><pre id="r-501729" data-claire-element-id="501729"><code data-claire-semantic="c">HWND hDlg</code></pre><p id="r-501730" data-claire-element-id="501730"><em>handle</em> de la boîte de dialogue à détruire.</p><pre id="r-501731" data-claire-element-id="501731"><code data-claire-semantic="c">INT_PTR nResult</code></pre><p id="r-501732" data-claire-element-id="501732">Spécifie une valeur à retourner à l'application lors de la destruction.</p><aside id="r-501734" data-claire-element-id="501734" data-claire-semantic="information"><p id="r-501733" data-claire-element-id="501733">Cette fonction ne détruit pas instantanément la boîte de dialogue, mais attend que la fonction qui a créé la boîte de dialogue rende le contrôle.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">
<span class="arrow"></span>
<span class="next">Documentation</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
<span class="next">Messages</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Messages"></a><h2>Messages</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
<span class="arrow"></span>
<span class="next">Fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
<span class="next">Structures</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-messages-5" data-claire-element-id="501766">Messages</h4><p id="r-501738" data-claire-element-id="501738">Voici la liste de tous les messages de l'API Windows que vous avez découverts dans ce tutoriel, et qui sont envoyés à la fonction de gestion des messages .<br/> Pour chaque message, j'expliquerai sa signification ainsi que celle des paramètres <em>wParam</em> et <em>lParam </em>et de la valeur retournée.</p><h5 id="r-wm-create" data-claire-element-id="501747">WM_CREATE</h5><h6 id="r-description-74" data-claire-element-id="501740">Description</h6><p id="r-501739" data-claire-element-id="501739">Ce message est envoyé lors de la création d'une fenêtre avec <em>CreateWindow</em> et <em>CreateWindowEx</em>.</p><h6 id="r-wparam" data-claire-element-id="501742">wParam</h6><p id="r-501741" data-claire-element-id="501741">Ce paramètre est inutilisé.</p><h6 id="r-lparam" data-claire-element-id="501744">lParam</h6><p id="r-501743" data-claire-element-id="501743">Pointeur vers une structure de type <em>CREATESTRUCT</em>.<br/> Voir Annexe sur les structures.</p><h6 id="r-valeur-de-retour-22" data-claire-element-id="501746">Valeur de retour</h6><p id="r-501745" data-claire-element-id="501745">Retournez 0 pour continuer la création de la fenêtre, ou -1 pour annuler la création.</p><h5 id="r-wm-destroy" data-claire-element-id="501756">WM_DESTROY</h5><h6 id="r-description-75" data-claire-element-id="501749">Description</h6><p id="r-501748" data-claire-element-id="501748">Ce message est envoyé lorsqu'une fenêtre va être détruite.</p><h6 id="r-wparam-1" data-claire-element-id="501751">wParam</h6><p id="r-501750" data-claire-element-id="501750">Ce paramètre est inutilisé.</p><h6 id="r-lparam-1" data-claire-element-id="501753">lParam</h6><p id="r-501752" data-claire-element-id="501752">Ce paramètre est inutilisé.</p><h6 id="r-valeur-de-retour-23" data-claire-element-id="501755">Valeur de retour</h6><p id="r-501754" data-claire-element-id="501754">Retournez 0.</p><h5 id="r-wm-command" data-claire-element-id="501765">WM_COMMAND</h5><h6 id="r-description-76" data-claire-element-id="501758">Description</h6><p id="r-501757" data-claire-element-id="501757">Ce message est utilisé lorsque l'utilisateur interagit avec un contrôle.</p><h6 id="r-wparam-2" data-claire-element-id="501760">wParam</h6><p id="r-501759" data-claire-element-id="501759">Le mot haut (récupérable avec <em>HIWORD</em>) est le code de notification du contrôle. Celui-ci est spécifique à chaque classe de contrôle. Il vaut 1 si le message vient d'un raccourci clavier, et 0 si le message vient d'un menu.<br/> Le mot bas (récupérable avec <em>LOWORD</em>) est l'identifiant de la fenêtre spécifié lors de la création avec <em>CreateWindow</em> et le paramètre <em>hMenu</em>.</p><h6 id="r-lparam-2" data-claire-element-id="501762">lParam</h6><p id="r-501761" data-claire-element-id="501761"><em>handle</em> du contrôle (fils de la fenêtre qui reçoit le message) qui a envoyé le message.<br/> Il vaut <em>NULL</em> si ce n'est pas un contrôle.</p><h6 id="r-valeur-de-retour-24" data-claire-element-id="501764">Valeur de retour</h6><p id="r-501763" data-claire-element-id="501763">Retournez 0.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
<span class="arrow"></span>
<span class="next">Fonctions</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
<span class="next">Structures</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Structures"></a><h2>Structures</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
<span class="arrow"></span>
<span class="next">Messages</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">
<span class="next">Glossaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-structures-4" data-claire-element-id="501897">Structures</h4><p id="r-501767" data-claire-element-id="501767">Voici la liste de toutes les structures de l'API Windows que vous avez découvertes dans ce tutoriel.<br/> Pour chaque structure, j'expliquerai le rôle de chacun des membres.</p><h5 id="r-wndclass" data-claire-element-id="501859">WNDCLASS</h5><pre id="r-501768" data-claire-element-id="501768"><code data-claire-semantic="c">typedef struct {
    UINT style;
    WNDPROC lpfnWndProc;
    int cbClsExtra;
    int cbWndExtra;
    HINSTANCE hInstance;
    HICON hIcon;
    HCURSOR hCursor;
    HBRUSH hbrBackground;
    LPCTSTR lpszMenuName;
    LPCTSTR lpszClassName;
} WNDCLASS, *PWNDCLASS;</code></pre><h6 id="r-description-77" data-claire-element-id="501770">Description</h6><p id="r-501769" data-claire-element-id="501769">Cette structure est utilisée lors de la création d'une classe de fenêtre.<br/> Elle est passée en paramètre à <em>RegisterClass</em>.</p><h6 id="r-membres" data-claire-element-id="501858">Membres</h6><pre id="r-501771" data-claire-element-id="501771"><code data-claire-semantic="c">UINT style</code></pre><p id="r-501772" data-claire-element-id="501772">Spécifie les styles de la classe, ce peut être une combinaison avec le OU binaire (|) de n'importe quel paramètre :</p><ul id="r-501795" data-claire-element-id="501795"><li id="r-501774" data-claire-element-id="501774"><p id="r-501773" data-claire-element-id="501773"><strong>CS_BYTEALIGNCLIENT</strong> : aligne la zone client des fenêtres sur la frontière d'un octet. Ce style affecte la taille et la position horizontale des fenêtres.</p></li><li id="r-501776" data-claire-element-id="501776"><p id="r-501775" data-claire-element-id="501775"><strong>CS_BYTEALIGNWINDOW</strong> : même chose que <em>CS_BYTEALIGNCLIENT</em>, mais concernant la zone fenêtre, et non pas sa zone client.</p></li><li id="r-501778" data-claire-element-id="501778"><p id="r-501777" data-claire-element-id="501777"><strong>CS_CLASSDC</strong> : les fenêtres de cette classe partagent toutes le même DC (<em>device context</em>) utilisé lorsque l'on dessine dans les fenêtres.</p></li><li id="r-501780" data-claire-element-id="501780"><p id="r-501779" data-claire-element-id="501779"><strong>CS_DBLCLKS</strong> : les fenêtres reçoivent des événements de type double-clic.</p></li><li id="r-501782" data-claire-element-id="501782"><p id="r-501781" data-claire-element-id="501781"><strong>CS_GLOBALCLASS</strong> : cette classe est globale au système et non pas locale au programme.</p></li><li id="r-501784" data-claire-element-id="501784"><p id="r-501783" data-claire-element-id="501783"><strong>CS_HREDRAW</strong> : redessine la fenêtre en cas de changement de largeur des fenêtres.</p></li><li id="r-501786" data-claire-element-id="501786"><p id="r-501785" data-claire-element-id="501785"><strong>CS_NOCLOSE</strong> : la fenêtre ne peut pas être fermée.</p></li><li id="r-501788" data-claire-element-id="501788"><p id="r-501787" data-claire-element-id="501787"><strong>CS_OWNDC</strong> : chaque fenêtre à son propre DC.</p></li><li id="r-501790" data-claire-element-id="501790"><p id="r-501789" data-claire-element-id="501789"><strong>CS_PARENTDC</strong> : permet d'optimiser le dessin dans le DC en récupérant le DC du parent et en empêchant le dessin en dehors de sa surface.</p></li><li id="r-501792" data-claire-element-id="501792"><p id="r-501791" data-claire-element-id="501791"><strong>CS_SAVEBITS</strong> : lorsqu'une portion de fenêtre est cachée par une autre, sauvegarde cette portion puis la restaure ultérieurement au lieu de redessiner.</p></li><li id="r-501794" data-claire-element-id="501794"><p id="r-501793" data-claire-element-id="501793"><strong>CS_VREDRAW</strong> : redessine la fenêtre en cas de changement de hauteur.</p></li></ul><aside id="r-501797" data-claire-element-id="501797" data-claire-semantic="information"><p id="r-501796" data-claire-element-id="501796">Mais qu'est-ce qu'un DC ?<br/> Un DC (<em>Device Context</em>) est utilisé lors du dessin dans la zone client d'une fenêtre.<br/> Par exemple, lorsque vous créez des boutons dans une fenêtre, ceux-ci sont dessinés dans des DC, puis ces DC sont copiés sur le DC du parent qui est ensuite affiché.<br/> On peut voir un DC comme une zone de dessin.<br/> Le paramètre <em>CS_PARENTDC</em> permet, au lieu de copier les DC des fils dans celui du parent (ce qui est lent), de dessiner directement le fils dans le DC du parent.<br/> Les DC sont principalement utilisé avec les fonctions du <em>GDI</em> qui permettent de dessiner des rectangles, carrés, du texte, des polygones, etc.</p></aside><pre id="r-501798" data-claire-element-id="501798"><code data-claire-semantic="c">WNDPROC lpfnWndProc</code></pre><p id="r-501799" data-claire-element-id="501799">Ce membre est un pointeur vers la fonction de gestion des messages arrivant à toutes les fenêtres de cette classe.</p><pre id="r-501800" data-claire-element-id="501800"><code data-claire-semantic="c">int cbClsExtra</code></pre><p id="r-501801" data-claire-element-id="501801">Spécifie le nombre d'octets supplémentaires à allouer dans la structure de la classe.<br/> Cela permet de stocker des données supplémentaires associées à cette classe.</p><pre id="r-501802" data-claire-element-id="501802"><code data-claire-semantic="c">int cbWndExtra</code></pre><p id="r-501803" data-claire-element-id="501803">Spécifie le nombre d'octets supplémentaires à allouer dans la structure d'une fenêtre.<br/> Cela permet de stocker des données supplémentaires associées à chaque fenêtre.</p><pre id="r-501804" data-claire-element-id="501804"><code data-claire-semantic="c">HINSTANCE hInstance</code></pre><p id="r-501805" data-claire-element-id="501805">Instance du programme qui crée la classe.<br/> Cette variable est passée en paramètre au <em>WinMain</em>.</p><pre id="r-501806" data-claire-element-id="501806"><code data-claire-semantic="c">HICON hIcon</code></pre><p id="r-501807" data-claire-element-id="501807"><em>handle</em> de l'icône à afficher dans la barre de titre des fenêtres de cette classe.</p><pre id="r-501808" data-claire-element-id="501808"><code data-claire-semantic="c">HCURSOR hCursor</code></pre><p id="r-501809" data-claire-element-id="501809"><em>handle</em> du curseur à afficher quand le pointeur de la souris est au-dessus de la fenêtre.</p><pre id="r-501810" data-claire-element-id="501810"><code data-claire-semantic="c">HBRUSH hbrBackground</code></pre><p id="r-501811" data-claire-element-id="501811">Brosse à utiliser pour dessiner le fond de la fenêtre (c'est en rapport avec le <em>GDI</em>).<br/> Il y en a quelques-unes prédéfinies :</p><ul id="r-501850" data-claire-element-id="501850"><li id="r-501813" data-claire-element-id="501813"><p id="r-501812" data-claire-element-id="501812"><strong>COLOR_ACTIVEBORDER</strong></p></li><li id="r-501815" data-claire-element-id="501815"><p id="r-501814" data-claire-element-id="501814"><strong>COLOR_ACTIVECAPTION</strong></p></li><li id="r-501817" data-claire-element-id="501817"><p id="r-501816" data-claire-element-id="501816"><strong>COLOR_APPWORKSPACE</strong></p></li><li id="r-501819" data-claire-element-id="501819"><p id="r-501818" data-claire-element-id="501818"><strong>COLOR_BACKGROUND</strong></p></li><li id="r-501821" data-claire-element-id="501821"><p id="r-501820" data-claire-element-id="501820"><strong>COLOR_BTNFACE</strong></p></li><li id="r-501823" data-claire-element-id="501823"><p id="r-501822" data-claire-element-id="501822"><strong>COLOR_BTNSHADOW</strong></p></li><li id="r-501825" data-claire-element-id="501825"><p id="r-501824" data-claire-element-id="501824"><strong>COLOR_BTNTEXT</strong></p></li><li id="r-501827" data-claire-element-id="501827"><p id="r-501826" data-claire-element-id="501826"><strong>COLOR_CAPTIONTEXT</strong></p></li><li id="r-501829" data-claire-element-id="501829"><p id="r-501828" data-claire-element-id="501828"><strong>COLOR_GRAYTEXT</strong></p></li><li id="r-501831" data-claire-element-id="501831"><p id="r-501830" data-claire-element-id="501830"><strong>COLOR_HIGHLIGHT</strong></p></li><li id="r-501833" data-claire-element-id="501833"><p id="r-501832" data-claire-element-id="501832"><strong>COLOR_HIGHLIGHTTEXT</strong></p></li><li id="r-501835" data-claire-element-id="501835"><p id="r-501834" data-claire-element-id="501834"><strong>COLOR_INACTIVEBORDER</strong></p></li><li id="r-501837" data-claire-element-id="501837"><p id="r-501836" data-claire-element-id="501836"><strong>COLOR_INACTIVECAPTION</strong></p></li><li id="r-501839" data-claire-element-id="501839"><p id="r-501838" data-claire-element-id="501838"><strong>COLOR_MENU</strong></p></li><li id="r-501841" data-claire-element-id="501841"><p id="r-501840" data-claire-element-id="501840"><strong>COLOR_MENUTEXT</strong></p></li><li id="r-501843" data-claire-element-id="501843"><p id="r-501842" data-claire-element-id="501842"><strong>COLOR_SCROLLBAR</strong></p></li><li id="r-501845" data-claire-element-id="501845"><p id="r-501844" data-claire-element-id="501844"><strong>COLOR_WINDOW</strong></p></li><li id="r-501847" data-claire-element-id="501847"><p id="r-501846" data-claire-element-id="501846"><strong>COLOR_WINDOWFRAME</strong></p></li><li id="r-501849" data-claire-element-id="501849"><p id="r-501848" data-claire-element-id="501848"><strong>COLOR_WINDOWTEXT</strong></p></li></ul><p id="r-501851" data-claire-element-id="501851">Si ce paramètre est <em>NULL</em>, le programme doit dessiner lui-même le fond de la fenêtre lors des notification <em>WM_PAINT</em> ou <em>WM_ERASEBKGND</em>.</p><pre id="r-501852" data-claire-element-id="501852"><code data-claire-semantic="c">LPCTSTR lpszMenuName</code></pre><p id="r-501853" data-claire-element-id="501853">Nom de la ressource à utiliser comme menu pour les fenêtres de la classe (voir note).</p><pre id="r-501854" data-claire-element-id="501854"><code data-claire-semantic="c">LPCTSTR lpszClassName</code></pre><p id="r-501855" data-claire-element-id="501855">Nom de la classe. Il doit être unique dans le programme pour que la classe soit enregistrée avec succès.</p><aside id="r-501857" data-claire-element-id="501857" data-claire-semantic="information"><p id="r-501856" data-claire-element-id="501856">Qu'est-ce qu'une ressource ?<br/> Une ressource est une donnée spéciale intégrée à l'exécutable avec un nom.<br/> Par exemple, on peut intégrer une image, un menu, un raccourci clavier, une fenêtre, etc.<br/> Chaque ressource est identifiée par un nom qui peut être une chaîne de caractères ou un identifiant.<br/> Les ressources peuvent aussi être intégrées à l'exécutable avec un fichier <em>.rc</em>.</p></aside><h5 id="r-msg" data-claire-element-id="501874">MSG</h5><pre id="r-501860" data-claire-element-id="501860"><code data-claire-semantic="c">typedef struct {
    HWND hwnd;
    UINT message;
    WPARAM wParam;
    LPARAM lParam;
    DWORD time;
    POINT pt;
} MSG, *PMSG;</code></pre><h6 id="r-description-78" data-claire-element-id="501862">Description</h6><p id="r-501861" data-claire-element-id="501861">Cette structure représente un message dans la file des messages envoyés à une fenêtre.</p><h6 id="r-membres-1" data-claire-element-id="501873">Membres</h6><pre id="r-501863" data-claire-element-id="501863"><code data-claire-semantic="c">HWND hwnd</code></pre><p id="r-501864" data-claire-element-id="501864">Ceci est le <em>handle</em> de la fenêtre qui doit recevoir le message.</p><pre id="r-501865" data-claire-element-id="501865"><code data-claire-semantic="c">UINT message</code></pre><p id="r-501866" data-claire-element-id="501866">Identifiant du message (c'est le même que celui passé à la fonction de gestion des messages).</p><pre id="r-501867" data-claire-element-id="501867"><code data-claire-semantic="c">WPARAM wParam
LPARAM lParam</code></pre><p id="r-501868" data-claire-element-id="501868">Ce sont des paramètres supplémentaires passés à la fonction de gestion des messages.</p><pre id="r-501869" data-claire-element-id="501869"><code data-claire-semantic="c">DWORD time</code></pre><p id="r-501870" data-claire-element-id="501870">L'heure à laquelle le message a été posté.</p><pre id="r-501871" data-claire-element-id="501871"><code data-claire-semantic="c">POINT pt</code></pre><p id="r-501872" data-claire-element-id="501872">Position du curseur lorsque le message a été posté.</p><h5 id="r-createstruct" data-claire-element-id="501882">CREATESTRUCT</h5><pre id="r-501875" data-claire-element-id="501875"><code data-claire-semantic="c">typedef struct tagCREATESTRUCT {
    LPVOID lpCreateParams;
    HINSTANCE hInstance;
    HMENU hMenu;
    HWND hwndParent;
    int cy;
    int cx;
    int y;
    int x;
    LONG style;
    LPCTSTR lpszName;
    LPCTSTR lpszClass;
    DWORD dwExStyle;
} CREATESTRUCT, *LPCREATESTRUCT;</code></pre><h6 id="r-description-79" data-claire-element-id="501877">Description</h6><p id="r-501876" data-claire-element-id="501876">Cette structure est passée en paramètre avec le message <em>WM_CREATE</em>.<br/> Elle permet de connaître les paramètres exacts avec lesquels la fenêtre a été créée.</p><h6 id="r-membres-2" data-claire-element-id="501879">Membres</h6><p id="r-501878" data-claire-element-id="501878">Les membres sont <strong>exactement</strong> les mêmes que pour <em>CreateWindow</em>.<br/> Seules précisions :</p><h6 id="r-int-x-int-y-int-cx-int-cy" data-claire-element-id="501881"><em>int</em> x
<em>int</em> y
<em>int</em> cx
<em>int</em> cy</h6><p id="r-501880" data-claire-element-id="501880">Si, lors de la création, vous avez spécifié <em>CW_USEDEFAULT</em> ou 0, la valeur vaudra alors la taille <strong>réelle</strong> de la fenêtre.</p><h5 id="r-rect" data-claire-element-id="501896">RECT</h5><pre id="r-501883" data-claire-element-id="501883"><code data-claire-semantic="c">typedef struct _RECT { 
  LONG left; 
  LONG top; 
  LONG right; 
  LONG bottom; 
} RECT;</code></pre><h6 id="r-description-80" data-claire-element-id="501885">Description</h6><p id="r-501884" data-claire-element-id="501884">Cette structure permet de stocker différents paramètres qui ont à voir avec des rectangles comme des dimensions, des marges ou des positions...</p><h6 id="r-membres-3" data-claire-element-id="501895">Membres</h6><pre id="r-501886" data-claire-element-id="501886"><code data-claire-semantic="c">LONG left</code></pre><p id="r-501887" data-claire-element-id="501887">Coordonnée en abscisse du coin supérieur gauche.</p><pre id="r-501888" data-claire-element-id="501888"><code data-claire-semantic="c">LONG top</code></pre><p id="r-501889" data-claire-element-id="501889">Coordonnée en ordonnée du coin supérieur gauche.</p><pre id="r-501890" data-claire-element-id="501890"><code data-claire-semantic="c">LONG right</code></pre><p id="r-501891" data-claire-element-id="501891">Coordonnée en abscisse du coin inférieur droit.</p><pre id="r-501892" data-claire-element-id="501892"><code data-claire-semantic="c">LONG bottom</code></pre><p id="r-501893" data-claire-element-id="501893">Coordonnée en ordonnée du coin inférieur droit.</p><p id="r-501894" data-claire-element-id="501894">La documentation sera remplie au fur et à mesure de l'avancement du tuto, et de notre temps libre. ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
<span class="arrow"></span>
<span class="next">Messages</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">
<span class="next">Glossaire</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Glossaire"></a><h2>Glossaire</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
<span class="arrow"></span>
<span class="next">Structures</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
<span class="next">Termes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-501899" data-claire-element-id="501899">Voici donc les termes que vous ne connaissez peut être pas. N'hésitez pas à regarder si vous avez des doutes.</p>
</div><a name="Termes"></a><h2>Termes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">
<span class="arrow"></span>
<span class="next">Glossaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">
<span class="next">Manipulation du registre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-termes" data-claire-element-id="501927">Termes</h4><ul id="r-501925" data-claire-element-id="501925"><li id="r-501901" data-claire-element-id="501901"><p id="r-501900" data-claire-element-id="501900"><strong>msdn</strong> : véritable bible du codeur winAPI, c'est en fait la documentation anglaise de Microsoft accessible <a href="http://msdn.microsoft.com/lbrary">ici</a>.</p></li><li id="r-501903" data-claire-element-id="501903"><p id="r-501902" data-claire-element-id="501902">Bas niveau (langage, fonction, instruction, etc.) : peu développé, proche du système voire du matériel. <em>Exemple : langage bas niveau</em>.</p></li><li id="r-501905" data-claire-element-id="501905"><p id="r-501904" data-claire-element-id="501904">Pop-up : se dit d'une fenêtre ou d'un menu apparaissant soudainement après une action de l'utilisateur.</p></li><li id="r-501907" data-claire-element-id="501907"><p id="r-501906" data-claire-element-id="501906">Haut niveau : développé, proche de l'utilisateur ou codeur. Exemple : <em>langage haut niveau</em>.</p></li><li id="r-501910" data-claire-element-id="501910"><p id="r-501908" data-claire-element-id="501908">Instance : utilisé généralement dans les langages orientés objets, désigne une occurrence d'un objet. Elle est dans ce tuto votre programme en lui-même (c'est un objet après tout). Exemple :</p><pre id="r-501909" data-claire-element-id="501909"><code data-claire-semantic="c">//variable est une instance de Objet
Objet variable;</code></pre></li><li id="r-501913" data-claire-element-id="501913"><p id="r-501911" data-claire-element-id="501911">Fonction callback : fonction chargée de traiter les messages envoyés à une fenêtre, ou à un contrôle. Aussi dénommée procédure. Exemple :</p><pre id="r-501912" data-claire-element-id="501912"><code data-claire-semantic="c">LRESULT CALLBACK MainWndProc(HWND, UINT, WPARAM, LPARAM);</code></pre></li><li id="r-501916" data-claire-element-id="501916"><p id="r-501914" data-claire-element-id="501914">Template, ou modèle : sorte de schéma situé en ressource décrivant l'organisation d'un objet, comme un menu ou une boîte de dialogue. En C++, c'est une fonction applicable à n'importe quel type d'argument. Exemple :</p><pre id="r-501915" data-claire-element-id="501915"><code data-claire-semantic="c">ID_MENU MENU
BEGIN
        POPUP &quot;Menu&quot;
        BEGIN
                MENUITEM &quot;Commande 1&quot;, ID_CMD1
                MENUITEM &quot;Commande 2&quot;, ID_CMD2
        END
END</code></pre></li><li id="r-501919" data-claire-element-id="501919"><p id="r-501917" data-claire-element-id="501917">Cast, ou transtypage : action de transformer le type d'une variable en une autre. Exemple :</p><pre id="r-501918" data-claire-element-id="501918"><code data-claire-semantic="c">long lVariable = (long)iVariable</code></pre></li><li id="r-501922" data-claire-element-id="501922"><p id="r-501920" data-claire-element-id="501920">Flag, ou drapeau : caractère spécial donné à un objet, pouvant être combiné avec l'opérateur logique |. Généralement utilisé pour les styles. Exemple :</p><pre id="r-501921" data-claire-element-id="501921"><code data-claire-semantic="c">truc.uFlags = F_TRUC | F_MACHIN;</code></pre></li><li id="r-501924" data-claire-element-id="501924"><p id="r-501923" data-claire-element-id="501923">Focus : fait, généralement pour un contrôle, de recevoir tous les évènements clavier. Pour une fenêtre, on parle d'<strong>active</strong>.</p></li></ul><p id="r-501926" data-claire-element-id="501926">Le glossaire n'est pas fini, il est rempli au fur et à mesure de l'avancement du tuto ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">
<span class="arrow"></span>
<span class="next">Glossaire</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">
<span class="next">Manipulation du registre</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Manipulationduregistre"></a><h2>Manipulation du registre</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
<span class="arrow"></span>
<span class="next">Termes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
<span class="next">Quelques notions de BDR</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-501929" data-claire-element-id="501929">Vous allez ici apprendre à manier les clés registre en utilisant des fonctions définies dans l'API win32.</p><p id="r-501930" data-claire-element-id="501930">A la fin de ce chapitre, vous saurez, en modifiant manuellement (avec le winAPI) ou semi-manuellement (en modifiant les clés à la main) :</p><ul id="r-501937" data-claire-element-id="501937"><li id="r-501932" data-claire-element-id="501932"><p id="r-501931" data-claire-element-id="501931">Lancer votre programme au démarrage de windows</p></li><li id="r-501934" data-claire-element-id="501934"><p id="r-501933" data-claire-element-id="501933">Changer l'icône d'un type de fichiers</p></li><li id="r-501936" data-claire-element-id="501936"><p id="r-501935" data-claire-element-id="501935">Associer votre programme avec un ou plusieurs types de fichiers</p></li></ul><p id="r-501938" data-claire-element-id="501938">Pour ce faire, lisez ce qui suit attentivement et ne modifiez surtout pas ce que vous ne connaissez pas.</p>
</div><a name="QuelquesnotionsdeBDR"></a><h2>Quelques notions de BDR</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">
<span class="arrow"></span>
<span class="next">Manipulation du registre</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
<span class="next">Changement d&#039;icône de fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-notions-de-bdr" data-claire-element-id="501977">Quelques notions de BDR</h4><p id="r-501939" data-claire-element-id="501939">Avant de commencer, nous allons vous inculquer quelques notions de BDR.</p><div id="r-501941" data-claire-element-id="501941" data-claire-semantic="question"><p id="r-501940" data-claire-element-id="501940">Mais que diable est-ce, la BDR ?</p></div><p id="r-501942" data-claire-element-id="501942">La BDR est une base de données où sont stockées les informations nécessaires au bon fonctionnement de Windows. On y trouve :</p><ul id="r-501951" data-claire-element-id="501951"><li id="r-501944" data-claire-element-id="501944"><p id="r-501943" data-claire-element-id="501943">les configurations de l'ordinateur (matériel, etc.)</p></li><li id="r-501946" data-claire-element-id="501946"><p id="r-501945" data-claire-element-id="501945">la personnalisation de Windows (affichage, sons, etc.)</p></li><li id="r-501948" data-claire-element-id="501948"><p id="r-501947" data-claire-element-id="501947">les préférences utilisées pour les programmes et jeux (historiques, tableaux de scores, options, chemins d'accès, etc.)</p></li><li id="r-501950" data-claire-element-id="501950"><p id="r-501949" data-claire-element-id="501949">etc.</p></li></ul><p id="r-501952" data-claire-element-id="501952">Ainsi, chaque fois que vous modifiez ne serait-ce qu'une chose (si petite soit elle) dans votre ordinateur, la BDR s'en trouve sensiblement changée.</p><p id="r-501953" data-claire-element-id="501953">Les informations sont classées dans des dossiers dans l'arborescence, et se présentent sous la forme de clés registre. Celles-ci sont des informations, possédant un type, un ID et une valeur.</p><aside id="r-501955" data-claire-element-id="501955" data-claire-semantic="information"><p id="r-501954" data-claire-element-id="501954">Normalement, <strong>les clés registre sont les dossiers</strong> présents dans l'arborescence, et les informations des <strong>valeurs</strong>, mais j'ai préféré garder cette syntaxe pour une meilleure compréhension.</p></aside><aside id="r-501957" data-claire-element-id="501957" data-claire-semantic="information"><p id="r-501956" data-claire-element-id="501956">Vous pouvez accéder à la BDR en tapant 'regedit' (comme <em>registry edit</em>) dans la boîte de dialogue 'Exécuter...', présente dans le menu 'Démarrer'.</p></aside><p id="r-501958" data-claire-element-id="501958">Pour ceux qui ne l'ont jamais vue, voici sous quelle forme se présente la BDR :</p><figure id="r-501960" data-claire-element-id="501961"><img id="r-501959" data-claire-element-id="501959" src="medias/uploads.siteduzero.com_files_13001_14000_13150.jpg" alt="Image utilisateur"/></figure><p id="r-501962" data-claire-element-id="501962">Comme vous pouvez le voir sur cette capture d'écran, les répertoires à la racine de la BDR sont :</p><ul id="r-501973" data-claire-element-id="501973"><li id="r-501964" data-claire-element-id="501964"><p id="r-501963" data-claire-element-id="501963"><strong>HKEY_LOCAL_MACHINE</strong> : contient les informations communes à tous les utilisateurs de la machine.</p></li><li id="r-501966" data-claire-element-id="501966"><p id="r-501965" data-claire-element-id="501965"><strong>HKEY_CLASSES_ROOT</strong> : contient les informations sur les extensions de fichiers, donc des associations.</p></li><li id="r-501968" data-claire-element-id="501968"><p id="r-501967" data-claire-element-id="501967"><strong>HKEY_CURRENT_USER</strong> : contient les informations (préférences en général) spécifiques à l'utilisateur actuel.</p></li><li id="r-501970" data-claire-element-id="501970"><p id="r-501969" data-claire-element-id="501969"><strong>HKEY_USERS</strong> : contient les paramètres propres à chaque utilisateur.</p></li><li id="r-501972" data-claire-element-id="501972"><p id="r-501971" data-claire-element-id="501971"><strong>HKEY_CURRENT_CONFIG</strong> : contient les configurations de l'utilisateur actuel.</p></li></ul><p id="r-501974" data-claire-element-id="501974">Bien ! Je pense que vous savez maintenant le minimum pour débuter. Direction la prochaine partie.</p><div id="r-501976" data-claire-element-id="501976"><p id="r-501975" data-claire-element-id="501975">Rédacteur : <strong>Mg++</strong></p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">
<span class="arrow"></span>
<span class="next">Manipulation du registre</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
<span class="next">Changement d&#039;icône de fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Changementd039icnedefichiers"></a><h2>Changement d&#039;icône de fichiers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
<span class="arrow"></span>
<span class="next">Quelques notions de BDR</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
<span class="next">Lancement au démarrage de windows</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-changement-d-icone-de-fichiers" data-claire-element-id="502068">Changement d'icône de fichiers</h4><p id="r-501978" data-claire-element-id="501978">Commençons progressivement. Nous allons voir comment, à partir du répertoire racine <em>HKEY_CLASS_ROOT</em>, changer l'icône associée à un type de fichier.</p><h6 id="r-1ere-methode-methode-semi-manuelle-manipulation-au-travers-de-regedit" data-claire-element-id="502010">1ère méthode : méthode semi-manuelle (manipulation au travers de <em>regedit</em>)</h6><p id="r-501979" data-claire-element-id="501979">Voilà comment est organisée la BDR de ce côté-ci : un dossier portant comme nom une extension contient une clé registre (<em>default</em>) portant comme valeur le nom descriptif du fichier. Alors, le dossier portant ce nom descriptif à l'intérieur de <em>HKEY_CLASSES_ROOT</em> (donc un niveau en arrière) contient un dossier intitulé DefaultIcon. Dans celui-ci, la clé (<em>default</em>) porte comme valeur le chemin de l'icône associée à ce type de fichiers.</p><aside id="r-501981" data-claire-element-id="501981" data-claire-semantic="information"><p id="r-501980" data-claire-element-id="501980">Il se peut que le chemin de l'icône ne vous porte pas à croire que cela en est un : parfois (souvent en fait pour Windows), ce chemin est en fait le chemin d'accès vers une DLL (<em>Dynamic Link Library</em>), contenant dans ses ressources l'icône demandée. Il est alors suivi d'une virgule, et d'un nombre étant son ID en ressource.</p></aside><p id="r-501982" data-claire-element-id="501982">Voici concernant le descriptif de son organisation. Concrètement, les étapes permettant de changer l'icône peuvent être représentées sur un schéma comme ceci :</p><figure id="r-501984" data-claire-element-id="501985"><img id="r-501983" data-claire-element-id="501983" src="medias/uploads.siteduzero.com_files_13001_14000_13152.jpg" alt="Image utilisateur"/></figure><p id="r-501986" data-claire-element-id="501986">Comme voir est mieux que croire, je vais vous indiquer pas à pas comment changer l'icône d'un fichier XML (par exemple).</p><p id="r-501987" data-claire-element-id="501987">En premier lieu, ouvrez la BDR et rendez-vous dans <em>HKEY_CLASSES_ROOT</em>.<br/> Vous devriez voir ceci :</p><figure id="r-501989" data-claire-element-id="501990"><img id="r-501988" data-claire-element-id="501988" src="medias/uploads.siteduzero.com_files_13001_14000_13153.jpg" alt="Image utilisateur"/></figure><p id="r-501991" data-claire-element-id="501991">Ensuite, recherchez le dossier portant comme nom '.xml', et ouvrez-le.</p><aside id="r-501993" data-claire-element-id="501993" data-claire-semantic="information"><p id="r-501992" data-claire-element-id="501992">Information bien pratique et souvent oubliée : vous pouvez accéder directement au dossier recherché en tapant les premiers caractères du dossier en question. Vous vous retrouverez avec le dossier trouvé en surbrillance. ;)</p></aside><p id="r-501994" data-claire-element-id="501994">Mémorisez ensuite la valeur du (<em>default</em>) contenue dedans. Il s'agit du nom descriptif du fichier concerné.</p><p id="r-501995" data-claire-element-id="501995">Vous aurez ceci :</p><figure id="r-501997" data-claire-element-id="501998"><img id="r-501996" data-claire-element-id="501996" src="medias/uploads.siteduzero.com_files_13001_14000_13156.jpg" alt="Image utilisateur"/></figure><p id="r-501999" data-claire-element-id="501999">Puis, rendez-vous au dossier portant ce nom descriptif, sachant qu'il est contenu au même niveau de <em>HKEY_CLASSES_ROOT</em> que les extensions, et ouvrez-le. Vous verrez à l'intérieur un dossier intitulé DefaultIcon, le dossier que nous cherchons.<br/> Rendez-vous y et vous pourrez alors contempler le chemin de l'icône concernée, contenu dans la valeur du (<em>default</em>) de ce dossier.</p><p id="r-502000" data-claire-element-id="502000">En fait, vous voyez normalement ceci :</p><figure id="r-502002" data-claire-element-id="502003"><img id="r-502001" data-claire-element-id="502001" src="medias/uploads.siteduzero.com_files_13001_14000_13157.jpg" alt="Image utilisateur"/></figure><p id="r-502004" data-claire-element-id="502004">Pour modifier l'icône, faites un clic droit sur la clé (<em>default</em>) et sélectionnez Modify. Une boîte de dialogue s'ouvre, et vous pourrez alors sélectionner le chemin de l'icône voulue dans le champ Valeur avant de quitter.</p><p id="r-502005" data-claire-element-id="502005">Une illustration :</p><figure id="r-502007" data-claire-element-id="502008"><img id="r-502006" data-claire-element-id="502006" src="medias/uploads.siteduzero.com_files_13001_14000_13158.jpg" alt="Image utilisateur"/></figure><p id="r-502009" data-claire-element-id="502009">L'icône est ainsi changée. :)</p><h6 id="r-2eme-methode-methode-manuelle-utilisation-du-winapi-dans-un-code-en-c" data-claire-element-id="502067">2ème méthode : méthode manuelle (utilisation du winAPI) dans un code en C</h6><p id="r-502011" data-claire-element-id="502011">Pour modifier le registre Windows dans votre code, vous aurez besoin d'inclure la bibliothèque nécessaire dans votre code, à savoir :</p><pre id="r-502012" data-claire-element-id="502012"><code data-claire-semantic="c">#include &lt;windows.h&gt;</code></pre><p id="r-502013" data-claire-element-id="502013">Celle-ci, seule bibliothèque à intégrer au code pour se servir du winAPI, définit les fonctions permettant de manipuler le registre dont nous aurons besoin :</p><ul id="r-502024" data-claire-element-id="502024"><li id="r-502015" data-claire-element-id="502015"><p id="r-502014" data-claire-element-id="502014"><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/sysinfo/base/regopenkeyex.asp">RegOpenKeyEx()</a></p></li><li id="r-502017" data-claire-element-id="502017"><p id="r-502016" data-claire-element-id="502016"><a href="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/sysinfo/base/regcreatekeyex.asp">RegCreateKeyEx()</a></p></li><li id="r-502019" data-claire-element-id="502019"><p id="r-502018" data-claire-element-id="502018"><a href="http://msdn.microsoft.com/library/en-us/sysinfo/base/regqueryvalueex.asp?frame=true">RegQueryValueEx()</a></p></li><li id="r-502021" data-claire-element-id="502021"><p id="r-502020" data-claire-element-id="502020"><a href="http://msdn.microsoft.com/library/en-us/sysinfo/base/regsetvalueex.asp?frame=true">RegSetValueEx()</a></p></li><li id="r-502023" data-claire-element-id="502023"><p id="r-502022" data-claire-element-id="502022"><a href="http://msdn.microsoft.com/library/en-us/sysinfo/base/regclosekey.asp?frame=true">RegCloseKey()</a></p></li></ul><p id="r-502025" data-claire-element-id="502025">Ces fonctions agissent sur une variable de type &quot;<em>handle</em> de clé&quot; ou <strong>HKEY</strong>.</p><p id="r-502026" data-claire-element-id="502026">Maintenant que vous avez les informations nécessaires, allons créer notre code ;) .<br/> Une fonction sera beaucoup plus pratique, pour la maintenance et la lisibilité du code. Je vous propose donc cette forme de fonction :</p><pre id="r-502027" data-claire-element-id="502027"><code data-claire-semantic="c">void changeIcon(const char *ext, const char *icon);</code></pre><ul id="r-502032" data-claire-element-id="502032"><li id="r-502029" data-claire-element-id="502029"><p id="r-502028" data-claire-element-id="502028"><strong>ext</strong> désigne l'extension dont on veut modifier l'icône</p></li><li id="r-502031" data-claire-element-id="502031"><p id="r-502030" data-claire-element-id="502030"><strong>icon</strong> désigne le chemin de l'icône voulue</p></li></ul><p id="r-502033" data-claire-element-id="502033">Voyons maintenant son contenu :<br/><em><br/> Les déclarations de variables</em></p><ul id="r-502043" data-claire-element-id="502043"><li id="r-502036" data-claire-element-id="502036"><p id="r-502034" data-claire-element-id="502034">Le <em>handle</em> de clé :</p><pre id="r-502035" data-claire-element-id="502035"><code data-claire-semantic="c">HKEY key;</code></pre></li><li id="r-502039" data-claire-element-id="502039"><p id="r-502037" data-claire-element-id="502037">Une <em>string</em> qui va nous permettre de mémoriser ce dont nous avons besoin :</p><pre id="r-502038" data-claire-element-id="502038"><code data-claire-semantic="c">char mem[MAX_PATH] = &quot;&quot;;</code></pre></li><li id="r-502042" data-claire-element-id="502042"><p id="r-502040" data-claire-element-id="502040">Une variable indiquant la taille de la <em>string</em> récupérée, pour <em>queryValue</em> :</p><pre id="r-502041" data-claire-element-id="502041"><code data-claire-semantic="c">DWORD kSize /* = 8192 */;</code></pre></li></ul><p id="r-502044" data-claire-element-id="502044"><em>Etapes</em></p><ul id="r-502060" data-claire-element-id="502060"><li id="r-502047" data-claire-element-id="502047"><p id="r-502045" data-claire-element-id="502045">Ouverture du dossier portant l'extension comme nom :</p><pre id="r-502046" data-claire-element-id="502046"><code data-claire-semantic="c">RegOpenKeyEx(
             HKEY_CLASSES_ROOT, //Nom de la branche principale
             ext, //Nom de la sous-clé (dossier), ici l'extension
             0, //réservé
             KEY_ALL_ACCESS, //Tout accès
             &amp;key //Taille de la donnée, en bytes
             );</code></pre></li><li id="r-502050" data-claire-element-id="502050"><p id="r-502048" data-claire-element-id="502048">Récupération dans mem de la valeur du default :</p><pre id="r-502049" data-claire-element-id="502049"><code data-claire-semantic="c">RegQueryValueEx(
                key,
                NULL, //NULL, donc valeur de (default)
                0, 
                NULL, //Taille de data (inutile)
                (BYTE*)mem, //Buffer de sortie
                &amp;kSize
                );</code></pre></li><li id="r-502053" data-claire-element-id="502053"><p id="r-502051" data-claire-element-id="502051">Ouverture du dossier DefaultIcon situé dans celui portant le nom descriptif du fichier :</p><pre id="r-502052" data-claire-element-id="502052"><code data-claire-semantic="c">strcat(mem, &quot;\\DefaultIcon&quot;);
RegOpenKeyEx(
            HKEY_CLASSES_ROOT, 
            mem,
            0, 
            KEY_ALL_ACCESS, 
            &amp;key
            );</code></pre></li><li id="r-502056" data-claire-element-id="502056"><p id="r-502054" data-claire-element-id="502054">Remplacement du chemin d'accès à l'icône par celui de l'icône voulue :</p><pre id="r-502055" data-claire-element-id="502055"><code data-claire-semantic="c">RegSetValueEx(
              key, 
              NULL, //(default)
              0, 
              REG_SZ, //Type de data
              (BYTE*)icon, 
              strlen(icon)+1 //Taille de data
              );</code></pre></li><li id="r-502059" data-claire-element-id="502059"><p id="r-502057" data-claire-element-id="502057">On n'oublie pas de fermer la clé :</p><pre id="r-502058" data-claire-element-id="502058"><code data-claire-semantic="c">RegCloseKey(key);</code></pre></li></ul><p id="r-502061" data-claire-element-id="502061">Nous avons maintenant fait le tour, je pense... Voici donc le code complet de la fonction :</p><pre id="r-502062" data-claire-element-id="502062"><code data-claire-semantic="c">#include &lt;windows.h&gt;

void changeIcon(const char *ext, const char *icon)
{
   HKEY key;
   DWORD kSize;
   char mem[MAX_PATH] = &quot;&quot;;

   RegOpenKeyEx(HKEY_CLASSES_ROOT, ext, 0, KEY_ALL_ACCESS, &amp;key);
   
   RegQueryValueEx(key, NULL, 0, NULL, (BYTE*)mem, &amp;kSize);
   
   strcat(mem, &quot;\\DefaultIcon&quot;);
   RegOpenKeyEx(HKEY_CLASSES_ROOT, mem, 0, KEY_ALL_ACCESS, &amp;key);
   
   RegSetValueEx(key, NULL, 0, REG_SZ, (BYTE*)icon, strlen(icon)+1);
   
   RegCloseKey(key);

   return;
}</code></pre><aside id="r-502064" data-claire-element-id="502064" data-claire-semantic="warning"><p id="r-502063" data-claire-element-id="502063">Je n'explique pas ici comment revenir en arrière. Alors si c'est pour un test, prévoyez une méthode de rattrapage. Ce n'est pas bien compliqué, je vous propose de créer une clé de <em>backup</em> que vous pourrez copier dans le (<em>default</em>) quand vous en aurez marre. Vous avez normalement tout ce qu'il faut pour, mais si vous avez du mal, le forum est là. ;)</p></aside><div id="r-502066" data-claire-element-id="502066"><p id="r-502065" data-claire-element-id="502065">Rédacteur : <strong>Mg++</strong></p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
<span class="arrow"></span>
<span class="next">Quelques notions de BDR</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
<span class="next">Lancement au démarrage de windows</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lancementaudmarragedewindows"></a><h2>Lancement au démarrage de windows</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
<span class="arrow"></span>
<span class="next">Changement d&#039;icône de fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
<span class="next">Association de fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-lancement-au-demarrage-de-windows" data-claire-element-id="502089">Lancement au démarrage de windows</h4><p id="r-502069" data-claire-element-id="502069">Maintenant que vous avez normalement compris comment manipuler, que cela soit à partir de <em>regedit</em> ou du winAPI, la BDR, inutile de détailler autant. (C'est surtout que je n'ai plus de place pour les images. :p )</p><p id="r-502070" data-claire-element-id="502070">Alors dans cette partie, je vais vous apprendre comment lancer votre application au démarrage de Windows. C'est pas bien long, et pas bien compliqué, mais si vous n'avez pas entièrement compris le principe de la BDR ou comment la manier, je vous renvoie à la sous-partie n°2.</p><h6 id="r-1ere-methode-semi-manuelle-au-travers-de-regedit" data-claire-element-id="502083">1ère méthode : semi-manuelle (au travers de <em>regedit</em>)</h6><p id="r-502071" data-claire-element-id="502071">Afin d'ajouter un programme à la liste de démarrage (au <em>startup</em>, dans le jargon), il faut juste ouvrir le dossier <strong>Software\Microsoft\Windows\CurrentVersion\Run</strong>, situé dans la branche d'arborescence <strong>HKEY_CURRENT_USER</strong> (pour l'utilisateur actuel seulement, c'est préférable), et ajouter une clé registre portant comme ID votre nom de programme, et comme valeur son chemin d'accès.</p><p id="r-502072" data-claire-element-id="502072">Pour cela, placez-vous dans le dossier <strong>Run</strong> dont la place a été citée, faites un clic droit sur la zone d'énumération des clés registre (partie droite), sélectionnez <strong>New</strong> -&gt; <strong>Key</strong> et spécifiez comme dit plus haut :</p><ul id="r-502082" data-claire-element-id="502082"><li id="r-502074" data-claire-element-id="502074"><p id="r-502073" data-claire-element-id="502073">comme ID : votre nom de programme (peu importe)</p></li><li id="r-502076" data-claire-element-id="502076"><p id="r-502075" data-claire-element-id="502075">comme valeur : son chemin d'accès.</p></li><aside id="r-502078" data-claire-element-id="502078" data-claire-semantic="warning"><p id="r-502077" data-claire-element-id="502077">Veillez à ne pas bouger votre programme entre temps, sinon l'ouverture du programme au <em>startup</em> échouera. Pour le parer, vous pouvez le placer dans un répertoire permanent, ou changer la clé à chaque fois.</p></aside><aside id="r-502080" data-claire-element-id="502080" data-claire-semantic="information"><p id="r-502079" data-claire-element-id="502079">Vous pouvez aussi spécifier des paramètres à votre exécutable (comme d'habitude), en délimitant le chemin d'accès des arguments (avec des guillemets), et en les plaçant à sa suite entre des espaces.</p></aside><p id="r-502081" data-claire-element-id="502081">En ce qui conçerne sa suppression de la liste de démarrage, vous n'avez qu'à vous rendre dans le répertoire <strong>Run</strong>, et supprimer la clé que vous avez créée.</p></ul><h6 id="r-2eme-methode-manuelle-en-utilisant-le-winapi" data-claire-element-id="502087">2ème méthode : manuelle (en utilisant le winAPI)</h6><p id="r-502084" data-claire-element-id="502084">Pareil ici, rien de compliqué ou de long. Pour faire ce travail, je vous propose la fonction suivante :</p><div id="r-502086" data-claire-element-id="502086"><p id="r-502085" data-claire-element-id="502085">2ème méthode : manuelle (en utilisant le winAPI)</p></div><p id="r-502088" data-claire-element-id="502088">Pareil ici, rien de compliqué ou de long. Pour faire ce travail, je vous propose la fonction suivante :</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
<span class="arrow"></span>
<span class="next">Changement d&#039;icône de fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
<span class="next">Association de fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Associationdefichiers"></a><h2>Association de fichiers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
<span class="arrow"></span>
<span class="next">Lancement au démarrage de windows</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">
<span class="next">Divers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-association-de-fichiers" data-claire-element-id="502202">Association de fichiers</h4><p id="r-502124" data-claire-element-id="502124">Dans cette partie, je vais vous apprendre comment associer votre programme avec un type défini de fichiers.</p><h6 id="r-1ere-methode-semi-manuelle-a-l-aide-de-regedit" data-claire-element-id="502150">1ère méthode : semi-manuelle (à l'aide de <em>regedit</em>)</h6><p id="r-502125" data-claire-element-id="502125">Ici, retour à la branche d'arborescence <em>HKEY_CLASSES_ROOT</em>, puisque c'est là que la gestion des extensions est faite.</p><p id="r-502126" data-claire-element-id="502126">Le processus est assez semblable au changement d'icône : un dossier portant l'extension du fichier comporte un (<em>default</em>) pointant vers un autre dossier (contenu au même endroit que l'extension) étant le nom descriptif du type de fichier. Mais comme vous avez pu le voir sur les captures d'écran, il y a d'autres dossiers dans celui-ci, autres que <strong>DefaultIcon</strong>. Dans un de ceux-ci, <strong>Shell</strong>, se trouve <strong>Open</strong>, et dedans se trouve enfin <strong>command</strong>.</p><aside id="r-502128" data-claire-element-id="502128" data-claire-semantic="information"><p id="r-502127" data-claire-element-id="502127">Il se peut que pour certains types de fichiers (comme les fichiers musicaux), <strong>Open</strong> ne soit pas la seule commande disponible : il peut y avoir notamment <strong>Play</strong>... Dans ce cas-là, normalement on doit répéter l'opération, mais les entrées sont supprimées, si ce n'est pas le chemin de <em>WMP</em> (alala, Microsoft). Mais si vous voulez plus de précisions sur ces cas-ci, envoyez-moi un MP.</p></aside><p id="r-502129" data-claire-element-id="502129">C'est sa valeur (<em>default</em>) qui va déterminer quel programme va lancer ce type de fichier à la commande <strong>Open</strong> du clic droit d'un ou plusieurs fichiers. En effet, il comporte le chemin d'accès au programme, suivi de soit <strong>&quot;%1&quot;</strong>, si le programme n'ouvre qu'un fichier à la fois, soit <strong>&quot;%L&quot;</strong>, s'ils sont plusieurs et donc listés.</p><aside id="r-502131" data-claire-element-id="502131" data-claire-semantic="information"><p id="r-502130" data-claire-element-id="502130">En effet, %1 et %L sont des opérateurs <em>batch</em> : le premier sera remplacé par le seul, ou le premier fichier ouvert (puisqu'il n'en autorise qu'un), alors que l'autre sera remplacé par la liste des fichiers ouverts. Chacun se fait remplacer par des chemins d'accès absolus. Par exemple, <strong>&quot;C:\Folder\Program.exe&quot; /open &quot;%1&quot;</strong> enverra à l'exécution du programme <strong>&quot;C:\Folder\Program.exe&quot;</strong> comme premier argument, <strong>/open</strong> comme deuxième, et le chemin absolu du fichier ouvert en troisième.</p></aside><p id="r-502132" data-claire-element-id="502132">Maintenant que vous avez vu l'organisation des associations, voici un exemple de nouvelle association de fichiers. Je vais vous expliquer comment associer Notepad++ aux fichiers .txt par exemple.</p><p id="r-502133" data-claire-element-id="502133">Voici la marche à suivre, comme vous l'avez deviné ;) :</p><ul id="r-502148" data-claire-element-id="502148"><li id="r-502135" data-claire-element-id="502135"><p id="r-502134" data-claire-element-id="502134">ouvrez <strong>HKEY_CLASSES_ROOT</strong></p></li><li id="r-502137" data-claire-element-id="502137"><p id="r-502136" data-claire-element-id="502136">Repérez le dossier portant le nom <strong>.txt</strong> et ouvrez-le.</p></li><li id="r-502139" data-claire-element-id="502139"><p id="r-502138" data-claire-element-id="502138">Mémorisez le (<em>default</em>) contenu à l'intérieur (à savoir <strong>txtfile</strong>).</p></li><li id="r-502141" data-claire-element-id="502141"><p id="r-502140" data-claire-element-id="502140">Retournez dans <strong>HKEY_CLASSES_ROOT</strong>, et ouvrez <strong>txtfile</strong>.</p></li><li id="r-502143" data-claire-element-id="502143"><p id="r-502142" data-claire-element-id="502142">Ouvrez maintenant successivement <strong>Shell</strong>, <strong>Open</strong>, et enfin <strong>command</strong>.</p></li><li id="r-502145" data-claire-element-id="502145"><p id="r-502144" data-claire-element-id="502144">Modifiez la valeur du (<em>default</em>) par le chemin de NotePad++ entre guillemets (puisqu'il n'est pas la seule information), suivi d'un espace et de &quot;%1&quot;</p></li><aside id="r-502147" data-claire-element-id="502147" data-claire-semantic="information"><p id="r-502146" data-claire-element-id="502146">Cette manoeuvre n'est qu'à titre indicatif, je ne sais pas si NotePad++ ne possède aucun argument excepté le fichier ouvert.</p></aside></ul><p id="r-502149" data-claire-element-id="502149">Voilà, l'association est terminée :)</p><h6 id="r-2eme-methode-manuelle-en-utilisant-le-winapi-1" data-claire-element-id="502201">2ème méthode : manuelle (en utilisant le winAPI)</h6><p id="r-502151" data-claire-element-id="502151">Passons maintenant au codage.</p><p id="r-502152" data-claire-element-id="502152">Cette fois-ci, je vous propose la fonction suivante :</p><pre id="r-502153" data-claire-element-id="502153"><code data-claire-semantic="c">void associate(const char *ext, const char *path);</code></pre><ul id="r-502158" data-claire-element-id="502158"><li id="r-502155" data-claire-element-id="502155"><p id="r-502154" data-claire-element-id="502154"><strong>ext</strong> désigne l'extension à associer</p></li><li id="r-502157" data-claire-element-id="502157"><p id="r-502156" data-claire-element-id="502156"><strong>path</strong> désigne le chemin d'accès à votre programme</p></li></ul><p id="r-502159" data-claire-element-id="502159">Vous aurez besoin comme d'habitude de :</p><ul id="r-502169" data-claire-element-id="502169"><li id="r-502162" data-claire-element-id="502162"><p id="r-502160" data-claire-element-id="502160">un <em>handle </em>de clé :</p><pre id="r-502161" data-claire-element-id="502161"><code data-claire-semantic="c">HKEY key;</code></pre></li><li id="r-502165" data-claire-element-id="502165"><p id="r-502163" data-claire-element-id="502163">une <em>string</em> tampon :</p><pre id="r-502164" data-claire-element-id="502164"><code data-claire-semantic="c">char mem[MAX_PATH];</code></pre></li><li id="r-502168" data-claire-element-id="502168"><p id="r-502166" data-claire-element-id="502166">Une taille d'info nécessaire à <em>RegQueryValueEx()</em> en <em>bytes</em> :</p><pre id="r-502167" data-claire-element-id="502167"><code data-claire-semantic="c">DWORD kSize /* = 8192*/;</code></pre></li></ul><p id="r-502170" data-claire-element-id="502170">Pour transcrire cette manoeuvre en code, vous n'aurez ni plus ni moins besoin que des fonctions citées précédemment.</p><p id="r-502171" data-claire-element-id="502171">Voici les étapes requises :</p><ul id="r-502187" data-claire-element-id="502187"><li id="r-502174" data-claire-element-id="502174"><p id="r-502172" data-claire-element-id="502172">Ouverture du dossier portant l'extension comme nom :</p><pre id="r-502173" data-claire-element-id="502173"><code data-claire-semantic="c">RegOpenKeyEx(
             HKEY_CLASSES_ROOT, 
             ext,
             0,
             KEY_ALL_ACCESS, 
             &amp;key 
             );</code></pre></li><li id="r-502177" data-claire-element-id="502177"><p id="r-502175" data-claire-element-id="502175">Récupération dans <strong>mem</strong> de la valeur du <em>default</em> :</p><pre id="r-502176" data-claire-element-id="502176"><code data-claire-semantic="c">RegQueryValueEx(
                key,
                NULL, 
                0,
                NULL, 
                (BYTE*)mem, 
                &amp;kSize
                );</code></pre></li><li id="r-502180" data-claire-element-id="502180"><p id="r-502178" data-claire-element-id="502178">Ouverture du dossier pointé, en précisant la commande d'ouverture du <em>shell</em> :</p><pre id="r-502179" data-claire-element-id="502179"><code data-claire-semantic="c">strcat(mem, &quot;\\Shell\\Open\\command&quot;);
RegOpenKeyEx(
            HKEY_CLASSES_ROOT,
            mem,
            0,
            KEY_ALL_ACCESS,
            &amp;key
            );</code></pre></li><li id="r-502183" data-claire-element-id="502183"><p id="r-502181" data-claire-element-id="502181">Remplacement du chemin d'accès par celui de votre programme :</p><pre id="r-502182" data-claire-element-id="502182"><code data-claire-semantic="c">//Changez le %1 par %L dans le cas d'une sélection multiple possible
sprintf(mem,&quot;\&quot;%s\&quot;/*arguments possibles*/ \&quot;%1\&quot;&quot;, path);  
RegSetValueEx(
              key,
              NULL,
              0,
              REG_SZ,
              (BYTE*)mem,
              strlen(mem)+1 
              );</code></pre></li><li id="r-502186" data-claire-element-id="502186"><p id="r-502184" data-claire-element-id="502184">Fermeture du <em>handle</em> de clé :</p><pre id="r-502185" data-claire-element-id="502185"><code data-claire-semantic="c">RegCloseKey(key);</code></pre></li></ul><p id="r-502188" data-claire-element-id="502188">Et voici la fonction complète (incluant la prise en compte des erreurs) :</p><aside id="r-502190" data-claire-element-id="502190" data-claire-semantic="warning"><p id="r-502189" data-claire-element-id="502189">Je n'ai pas prévu dans cette fonction de moyen de retour, donc prévoyez un système de copie comme celui que j'ai décrit dans la deuxième partie pour le changement d'icônes au cas où...</p></aside><pre id="r-502191" data-claire-element-id="502191"><code data-claire-semantic="c">void associate(const char *ext, const char *path)
{
   HKEY key;
   DWORD kSize;
   char mem[MAX_PATH] = &quot;&quot;;

   if(RegOpenKeyEx(HKEY_CLASSES_ROOT, ext, 0, KEY_ALL_ACCESS, &amp;key) == ERROR_SUCCESS)
   {
        RegQueryValueEx(key, NULL, NULL, NULL, (BYTE*)mem, &amp;kSize);

        strcat(mem, &quot;\\Shell\\open\\command&quot;);

        if(RegOpenKeyEx(HKEY_CLASSES_ROOT, mem, 0, KEY_ALL_ACCESS, &amp;key) == ERROR_SUCCESS)
        {
            sprintf(mem,&quot;\&quot;%s\&quot; \&quot;%1\&quot;&quot;, path); 
            RegSetValueEx(key, NULL, 0, REG_SZ, (BYTE*)mem, strlen(mem)+1);
        }
   }
   RegCloseKey(key);

   return;
}</code></pre><p id="r-502192" data-claire-element-id="502192">Et vous avez votre association. :)</p><aside id="r-502194" data-claire-element-id="502194" data-claire-semantic="warning"><p id="r-502193" data-claire-element-id="502193">Veillez à ne pas bouger votre exécutable après, sinon l'ouverture échouera.</p></aside><div id="r-502196" data-claire-element-id="502196"><p id="r-502195" data-claire-element-id="502195">Rédacteur : <strong>Mg++</strong></p></div><p id="r-502197" data-claire-element-id="502197">Si vous avez des questions de précision ou des problèmes, n'hésitez pas à poster dans le forum, il est fait pour ça ;) .</p><p id="r-502198" data-claire-element-id="502198"><em>Les fonctions n'ont pas été testées mais marchent sans doute possible. Néammoins dans le cas contraire, veuillez m'adresser un MP.</em></p><aside id="r-502200" data-claire-element-id="502200" data-claire-semantic="warning"><p id="r-502199" data-claire-element-id="502199">N'oubliez pas de prévoir une solution de suppression pour chacun des cas.</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
<span class="arrow"></span>
<span class="next">Lancement au démarrage de windows</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">
<span class="next">Divers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Divers"></a><h2>Divers</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
<span class="arrow"></span>
<span class="next">Association de fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
<span class="next">Utiliser le style du Windows courant</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
</div><a name="UtiliserlestyleduWindowscourant"></a><h2>Utiliser le style du Windows courant</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">
<span class="arrow"></span>
<span class="next">Divers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
<span class="next">La notation hongroise</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-utiliser-le-style-du-windows-courant" data-claire-element-id="502240">Utiliser le style du Windows courant</h4><p id="r-502204" data-claire-element-id="502204">Vous allez ici apprendre à donner le style de votre Windows actuel à votre application.</p><h5 id="r-telechargement-prealable" data-claire-element-id="502209">Téléchargement préalable</h5><p id="r-502205" data-claire-element-id="502205">Pour cela, vous aurez besoin d'un fichier <strong>manifeste</strong>, se présentant sous la forme d'un fichier <strong>xml</strong>.</p><p id="r-502206" data-claire-element-id="502206">Commencez donc par télécharger <a href="http://esynapse.free.fr/Datas/Public/manifest.xml">celui-ci</a>.<br/> (<em>Clic droit + Enregistrer sous...</em>)</p><p id="r-502207" data-claire-element-id="502207">Si le téléchargement échoue, sachez qu'il s'agit seulement d'un fichier codé en ASCII (donc avec NotePad, par exemple) et renommé en .xml, contenant le code suivant :</p><pre id="r-502208" data-claire-element-id="502208"><code data-claire-semantic="xml">&lt;assembly manifestVersion=&quot;1.0&quot;&gt;
    &lt;assemblyIdentity version=&quot;1.0.0.0&quot; processorArchitecture=&quot;X86&quot; name=&quot;CompanyName.ProductName.YourApplication&quot; type=&quot;win32&quot;/&gt;
    &lt;description&gt;Description de votre application ici.&lt;/description&gt;
    &lt;dependency&gt;
        &lt;dependentAssembly&gt;
          &lt;assemblyIdentity type=&quot;win32&quot; name=&quot;Microsoft.Windows.Common-Controls&quot; version=&quot;6.0.0.0&quot; processorArchitecture=&quot;X86&quot; publicKeyToken=&quot;6595b64144ccf1df&quot; language=&quot;*&quot;/&gt;
        &lt;/dependentAssembly&gt;
    &lt;/dependency&gt;
&lt;/assembly&gt;</code></pre><h5 id="r-association" data-claire-element-id="502239">Association</h5><p id="r-502210" data-claire-element-id="502210">Pour associer le manifeste à votre application, vous disposez de deux méthodes :</p><ul id="r-502215" data-claire-element-id="502215"><li id="r-502212" data-claire-element-id="502212"><p id="r-502211" data-claire-element-id="502211">dynamiquement, donc pendant l'exécution</p></li><li id="r-502214" data-claire-element-id="502214"><p id="r-502213" data-claire-element-id="502213">en utilisant les ressources, ceci pour l'intégrer à l'exécutable.</p></li></ul><h6 id="r-dynamiquement" data-claire-element-id="502218">Dynamiquement</h6><p id="r-502216" data-claire-element-id="502216">En utilisant cette méthode, l'exécutable utilisera le manifeste situé dans le même dossier que celui-ci.<br/> Commencez par renommer votre manifeste avec le nom de votre exécutable comme radical, et avec &quot;.manifest&quot; comme extension. Par exemple, si votre exécutable s'appelle &quot;Programme.exe&quot;, alors renommez &quot;manifest.xml&quot; en &quot;Programme.exe.manifest&quot;.</p><p id="r-502217" data-claire-element-id="502217">Vous n'avez plus qu'à placer le manifeste renommé dans le répertoire contenant votre exécutable.</p><h6 id="r-en-utilisant-les-ressources-1" data-claire-element-id="502238">En utilisant les ressources</h6><p id="r-502219" data-claire-element-id="502219">Vous avez peut-être envie de vous débarrasser de quelques fichiers entourant l'exécutable, en les intégrant aux ressources ? Comme le manifeste, par exemple ? :p <br/> Bien. Alors tout se passe à la compilation. Rajoutez à votre script ressource (*.rc) le code d'intégration suivant :</p><pre id="r-502220" data-claire-element-id="502220"><code data-claire-semantic="c">1 24 &quot;manifest.xml&quot;</code></pre><p id="r-502221" data-claire-element-id="502221">Dans ce cas-ci, 1 est l'ID du manifeste, 24 son type, et &quot;manifest.xml&quot; son chemin.</p><aside id="r-502223" data-claire-element-id="502223" data-claire-semantic="information"><p id="r-502222" data-claire-element-id="502222">Modifiez-le en conséquence s'il ne se trouve pas dans le répertoire des codes sources.</p></aside><aside id="r-502232" data-claire-element-id="502232" data-claire-semantic="error"><p id="r-502224" data-claire-element-id="502224">Attention, dans certains cas (je n'en connais pas la raison à ce jour), vous obtiendrez une fenêtre vide. Alors, la procédure à observer est la suivante :</p><ul id="r-502231" data-claire-element-id="502231"><li id="r-502226" data-claire-element-id="502226"><p id="r-502225" data-claire-element-id="502225">Inclure <em>&lt;commctrl.h&gt;</em>.</p></li><li id="r-502228" data-claire-element-id="502228"><p id="r-502227" data-claire-element-id="502227">Appeler <em>InitCommonControls()</em> au début du programme.</p></li><li id="r-502230" data-claire-element-id="502230"><p id="r-502229" data-claire-element-id="502229">Linker le projet avec <strong>comctl32.lib</strong> ou <strong>libcomctl32.a</strong> (selon le compilateur utilisé).</p></li></ul></aside><aside id="r-502234" data-claire-element-id="502234" data-claire-semantic="information"><p id="r-502233" data-claire-element-id="502233">Pour les feignants utilisant Code::Blocks, vous pouvez passer outre ces étapes, simplement en accédant à l'entrée <strong>Windows XP look'n'feel</strong> via le menu <strong>Plugin</strong>.</p></aside><p id="r-502235" data-claire-element-id="502235">Vous n'avez plus qu'à contempler votre application disposer du style du Windows courant. ;)</p><div id="r-502237" data-claire-element-id="502237"><p id="r-502236" data-claire-element-id="502236"><em>Rédacteur : <strong>Mg++</strong></em></p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">
<span class="arrow"></span>
<span class="next">Divers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
<span class="next">La notation hongroise</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lanotationhongroise"></a><h2>La notation hongroise</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
<span class="arrow"></span>
<span class="next">Utiliser le style du Windows courant</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
<span class="next">Quelques codes...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-la-notation-hongroise" data-claire-element-id="502304">La notation hongroise</h4><aside id="r-502242" data-claire-element-id="502242" data-claire-semantic="information"><p id="r-502241" data-claire-element-id="502241">La notation hongroise est une notation largement employée par Microsoft, qui consiste à faire apparaître, dans le nom de chaque variable, le type de celle-ci.</p></aside><p id="r-502243" data-claire-element-id="502243">Les avis sont partagés à son sujet : à savoir si elle est utile ou non, productive ou non, mais toujours est-il qu'elle reste employée, et qu'on a tout intérêt à la comprendre.</p><h5 id="r-principe-51" data-claire-element-id="502247">Principe</h5><p id="r-502244" data-claire-element-id="502244">Nous allons donc ici décrire les sigles qui reviennent le plus souvent.<br/> En fait, elle consiste à préfixer en minuscules le nom de la variable (qui commence alors par une majuscule) par le sigle de son type.</p><p id="r-502245" data-claire-element-id="502245">Exemple:</p><pre id="r-502246" data-claire-element-id="502246"><code data-claire-semantic="c">HANDLE hWnd;
INT iX;
CHAR cCode;</code></pre><h5 id="r-les-prefixes" data-claire-element-id="502282">Les préfixes</h5><p id="r-502248" data-claire-element-id="502248">Les préfixes utilisés sont:</p><ul id="r-502281" data-claire-element-id="502281"><li id="r-502250" data-claire-element-id="502250"><p id="r-502249" data-claire-element-id="502249"><strong>i</strong> : entier (<em>int</em> ou <em>INT</em> en général)</p></li><li id="r-502252" data-claire-element-id="502252"><p id="r-502251" data-claire-element-id="502251"><strong>n</strong> : entier court (<em>short int</em> ou <em>SHORT</em>)</p></li><li id="r-502254" data-claire-element-id="502254"><p id="r-502253" data-claire-element-id="502253"><strong>l</strong> : entier long (<em>long int</em> ou <em>LONG</em>)</p></li><li id="r-502256" data-claire-element-id="502256"><p id="r-502255" data-claire-element-id="502255"><strong>f</strong> : nombre à virgule flottante simple précision (<em>float</em> ou <em>FLOAT</em>)</p></li><li id="r-502258" data-claire-element-id="502258"><p id="r-502257" data-claire-element-id="502257"><strong>d</strong> : nombre à virgule flottante double précision (<em>double</em> ou <em>DOUBLE</em>)</p></li><li id="r-502260" data-claire-element-id="502260"><p id="r-502259" data-claire-element-id="502259"><strong>c</strong> : caractère (<em>char</em> ou <em>CHAR</em>) ou un dénombrement</p></li><li id="r-502262" data-claire-element-id="502262"><p id="r-502261" data-claire-element-id="502261"><strong>ch</strong> : caractère (<em>char</em> ou <em>CHAR</em>)</p></li><li id="r-502264" data-claire-element-id="502264"><p id="r-502263" data-claire-element-id="502263"><strong>b</strong> : booléen (<em>bool</em> ou <em>BOOL</em>)</p></li><li id="r-502266" data-claire-element-id="502266"><p id="r-502265" data-claire-element-id="502265"><strong>s</strong> : chaîne de caractères (<em>CHAR *, PCHAR, LPSTR, LPCSTR,</em> ...)</p></li><li id="r-502268" data-claire-element-id="502268"><p id="r-502267" data-claire-element-id="502267"><strong>sz</strong> : chaîne de caractères terminée par un zéro (<em>CHAR *, PCHAR, LPSTR, LPCSTR</em>, ...)</p></li><li id="r-502270" data-claire-element-id="502270"><p id="r-502269" data-claire-element-id="502269"><strong>w </strong>: mot ou &quot;<em>word</em>&quot; en anglais (<em>WORD</em>)</p></li><li id="r-502272" data-claire-element-id="502272"><p id="r-502271" data-claire-element-id="502271"><strong>dw</strong> : double-mot ou &quot;<em>double word</em>&quot; en anglais (<em>DWORD</em>)</p></li><li id="r-502274" data-claire-element-id="502274"><p id="r-502273" data-claire-element-id="502273"><strong>h</strong> : handle (<em>HANDLE, HWND, HFILE, HBITMAP</em>, ...)</p></li><li id="r-502276" data-claire-element-id="502276"><p id="r-502275" data-claire-element-id="502275"><strong>pt</strong> : point (<em>POINT</em>)</p></li><li id="r-502278" data-claire-element-id="502278"><p id="r-502277" data-claire-element-id="502277"><strong>rgb </strong>: couleur (<em>RGB</em>) [rarement utilisée]</p></li><li id="r-502280" data-claire-element-id="502280"><p id="r-502279" data-claire-element-id="502279"><strong>str</strong> : encore une autre façon de préciser une chaîne de caractères.</p></li></ul><h5 id="r-les-modificateurs-2" data-claire-element-id="502297">Les modificateurs</h5><p id="r-502283" data-claire-element-id="502283">Il existe aussi quelque modificateurs:</p><ul id="r-502296" data-claire-element-id="502296"><li id="r-502285" data-claire-element-id="502285"><p id="r-502284" data-claire-element-id="502284"><strong>u</strong> : non-signé. Exemple : <em>ul</em> pour <em>ULONG</em></p></li><li id="r-502287" data-claire-element-id="502287"><p id="r-502286" data-claire-element-id="502286"><strong>lp</strong>, <strong>p</strong> ou <strong>p_</strong> : pointeur sur quelque chose. Exemple : <em>lpstr</em> ou <em>psz</em>...</p></li><li id="r-502289" data-claire-element-id="502289"><p id="r-502288" data-claire-element-id="502288"><strong>a</strong> ou <strong>ar</strong> : tableau (ou &quot;<em>array</em>&quot; en anglais) [rarement utilisé]</p></li><li id="r-502291" data-claire-element-id="502291"><p id="r-502290" data-claire-element-id="502290"><strong>m_</strong> : membre d'une classe (C++) ou d'une structure</p></li><li id="r-502293" data-claire-element-id="502293"><p id="r-502292" data-claire-element-id="502292"><strong>g_</strong> : variable globale</p></li><li id="r-502295" data-claire-element-id="502295"><p id="r-502294" data-claire-element-id="502294"><strong>s_</strong> : variable statique (correspondant au mot-clé <em>static</em> en C/C++).</p></li></ul><h5 id="r-exemples-27" data-claire-element-id="502303">Exemples</h5><p id="r-502298" data-claire-element-id="502298">Ainsi, en mélangeant les deux, on peut obtenir ceci par exemple :</p><pre id="r-502299" data-claire-element-id="502299"><code data-claire-semantic="c">LPSTR g_szName;// variable globale qui est une chaîne de caractères terminée par zéro.

struct Truc
{
   PPOINT m_lpptPosition;// variable membre d'une structure, pointeur sur une structure de type point.
};

INT cbExtra;// nombre(le 'c') d'octets(le 'b') supplémentaires (à allouer par exemple)</code></pre><p id="r-502300" data-claire-element-id="502300">Évidemment, il ne faut pas en abuser. Dans l'exemple précédent, cela alourdit inutilement l'expression ; on pourra omettre le &quot;<em>pt</em>&quot;.</p><div id="r-502302" data-claire-element-id="502302"><p id="r-502301" data-claire-element-id="502301"><em>Rédacteur : <strong>Pamaury</strong></em></p></div>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
<span class="arrow"></span>
<span class="next">Utiliser le style du Windows courant</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
<span class="next">Quelques codes...</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quelquescodes..."></a><h2>Quelques codes...</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
<span class="arrow"></span>
<span class="next">La notation hongroise</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">
<span class="next">Programmes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-codes" data-claire-element-id="502366">Quelques codes...</h4><p id="r-502305" data-claire-element-id="502305">Depuis la parution de mon tutoriel, j'ai répondu à diverses questions, parfois en fournissant un code fonctionnel. J'ai donc décidé de répertorier ici-même ces différents codes afin que vous puissiez en profiter ;)</p><h5 id="r-gestion-du-presse-papier" data-claire-element-id="502310">Gestion du presse-papier</h5><p id="r-502306" data-claire-element-id="502306">Le presse-papier revient souvent sur les forums, en particulier en ce qui concerne les futurs traitements de texte en WinAPI. C'est pour cela que j'ai créé deux petites fonctions toutes simples permettant sa gestion, GetClipboardText() et SetClipboardText(), qui conviendront aux moins exigeants, tout en inspirant les plus exigeants :) :</p><pre id="r-502307" data-claire-element-id="502307"><code data-claire-semantic="c">#include &lt;windows.h&gt;

/* goto peut être utilisé si la redirection est dans le sens direct de la lecture du code (on évite le code spaguetti), et que son utilisation est claire... Pour moi, ça l'est. */
#define REDIRECT_IF(condition, label) if(condition) goto label
 
#define EXIT_LABEL local_exit
#define EXIT_IF(condition) REDIRECT_IF(condition, EXIT_LABEL)
 
/* Quand &quot;on colle&quot; : */
char *GetClipboardText()
{
    char *text = NULL;
 
    EXIT_IF(!IsClipboardFormatAvailable(CF_TEXT));
 
    EXIT_IF(!OpenClipboard(NULL));
 
    {
        char *textMem = (char*)GetClipboardData(CF_TEXT);
 
        /* free devra être utilisé une fois le texte utilisé */
        text = malloc((lstrlen(textMem)+1) * sizeof *text);
        lstrcpy(text, textMem);
    }
 
    CloseClipboard();
 
    EXIT_LABEL:
        return text;
}

/* Quand &quot;on copie&quot; : */
int SetClipboardText(char const *text)
{
    int ret = 0;
 
    HANDLE hGlobalMem = GlobalAlloc(GHND, lstrlen(text)+1);
    char *lpGlobalMem = NULL;
 
    EXIT_IF(hGlobalMem == NULL);
 
    lpGlobalMem = (char*)GlobalLock(hGlobalMem);
 
    EXIT_IF(lpGlobalMem == NULL);
 
    lstrcpy(lpGlobalMem, text);
 
    GlobalUnlock(hGlobalMem);
 
    EXIT_IF(!OpenClipboard(NULL));
 
    EmptyClipboard();
 
    if(SetClipboardData(CF_TEXT, hGlobalMem) != NULL)
        ret = 1;
 
    CloseClipboard();
 
    EXIT_LABEL:
        return ret; /* 1 : Succeed, 0 : Failure */
}</code></pre><aside id="r-502309" data-claire-element-id="502309" data-claire-semantic="information"><p id="r-502308" data-claire-element-id="502308">En ce qui concerne la détection du copier-coller, mieux vaut se fier à des fonctions dédiées à ces opérations, en spécifiant sa fenêtre <em>listener</em> des opérations de copier-coller, grâce à <a href="http://msdn.microsoft.com/en-us/library/ms649052.aspx">SetClipboardViewer()</a>. Ainsi, toute modification du presse papier se traduira par la réception du message <a href="http://msdn.microsoft.com/en-us/library/ms649052.aspx">WM_DRAWCLIPBOARD</a>, qu'il faudra traiter.</p></aside><h5 id="r-gestion-du-drag-and-drop" data-claire-element-id="502322">Gestion du drag and drop</h5><p id="r-502311" data-claire-element-id="502311">La question du drag-and-drop est aussi quelque peu récalcitrante, puisque l'API Windows ne fournit pas de système direct pour s'en charger. J'en ai jadis proposé un, qui se résume à une unique fonction GetDroppedFilesPaths() :</p><p id="r-502312" data-claire-element-id="502312"><cite>Citation : Moi</cite></p><blockquote id="r-502317" data-claire-element-id="502317"><p id="r-502313" data-claire-element-id="502313">Un petit exemple censé écrire les chemins des fichiers lâchés sur la fenêtre dans un fichier (situé dans le même répertoire que l'exécutable) nommé &quot;Result.txt&quot; (pas compilable tel quel).</p><pre id="r-502314" data-claire-element-id="502314"><code data-claire-semantic="c">/* Callback procedure : Soit hwnd (HWND) et wParam (WPARAM), passés en paramètre à la procédure. */ 
case WM_CREATE:
    /* Ne pas oublier d'accepter les drag-and-drop ;) */
    DragAcceptFiles(hwnd, TRUE);
    return 0;

case WM_DROPFILES:
{
    CHAR **paths = NULL;

    UINT count = GetDroppedFilesPaths((HDROP)wParam, paths);
    
    WritePathsToFile(paths, count, &quot;Result.txt&quot;);


    /* On n'oublie pas de libérer la mémoire allouée */
    {
        UINT i = 0;
        while(i &lt; count)
            free(paths[i++]);

        free(paths);
    }

    /* Ne pas oublier de finir la procédure de drag */
    DragFinish((HDROP)wParam);

    return 0;
}</code></pre><p id="r-502315" data-claire-element-id="502315">Avec :</p><pre id="r-502316" data-claire-element-id="502316"><code data-claire-semantic="c">/* Il aurait mieux fallu utiliser le système de gestion des fichiers de l'API, mais bon... */
#include &lt;stdio.h&gt;
#include &lt;windows.h&gt;

VOID WritePathsToFile(
                          CONST CHAR ** CONST paths, 
                          CONST UINT count, 
                          LPCSTR resPath
                      )
{
    FILE *file = NULL;
    file = fopen(resPath, &quot;a&quot;);

    if(file != NULL)
    {
        for(UINT i = 0 ; i &lt; count ; i++)
            fputs(paths[i], file);
        
        fclose(file);
    }
}

static UINT GetDroppedFilesCount(HDROP hDrop)
{
    return DragQueryFile(hDrop, 0xFFFFFFFF, NULL, 0);
}

static UINT GetDroppedFileLen(HDROP hDrop, CONST UINT index)
{
    return DragQueryFile(hDrop, index, NULL, 0);
}

UINT GetDroppedFilesPaths(HDROP hDrop, CHAR **paths)
{
    const UINT count = GetDroppedFilesCount(hDrop);

    paths = malloc(count * sizeof *paths);
    if(paths == NULL)
        return 0;

    for(UINT i = 0 ; i &lt; count ; i++)
    {
        const UINT droppedFilePathLen = GetDroppedFileLen(hDrop, i);

        paths[i] = malloc(droppedFileLen * sizeof *paths[i]);
        if(paths[i] == NULL)
            return i;

        DragQueryFile(hDrop, i, paths[i], droppedFileLen);
    }
    return count;
}</code></pre></blockquote><aside id="r-502319" data-claire-element-id="502319" data-claire-semantic="information"><p id="r-502318" data-claire-element-id="502318">Il faut bien évidemment autoriser la fenêtre au drag-and-drop via les styles de la fenêtre ou DragAcceptFiles()...</p></aside><aside id="r-502321" data-claire-element-id="502321" data-claire-semantic="warning"><p id="r-502320" data-claire-element-id="502320">N'oubliez pas de libérer la mémoire allouée par les chemins des fichiers récupérés ! Gare aux fuites de mémoire dans le cas contraire...</p></aside><h5 id="r-gestion-d-une-icone-dans-la-barre-des-taches" data-claire-element-id="502329">Gestion d'une icône dans la barre des tâches</h5><p id="r-502323" data-claire-element-id="502323">Voici deux fonctions toutes simples permettant de minimiser et de restaurer une application :</p><pre id="r-502324" data-claire-element-id="502324"><code data-claire-semantic="c">/* Cache ton application et place une icône dans la barre de tâches,
dont le handle est hIcon, szTip le message affiché dans une petite bulle (due au
survol prolongé de la souris), et msg le message callback, permettant de traiter
les événements */
NOTIFYICONDATA *Minimize(HWND handler, HICON hIcon, LPCTSTR szTip, UINT msg)
{
    NOTIFYICONDATA *nim = malloc(sizeof *nim);

    nid-&gt;cbSize = sizeof(NOTIFYICONDATA);
    nid-&gt;hWnd = handler;
    nid-&gt;uID = 0;
    nid-&gt;hIcon = hIcon;
    nid-&gt;uCallbackMessage = msg;
    nid-&gt;uFlags = NIF_ICON | NIF_MESSAGE | NIF_TIP;

    strcpy(nid-&gt;szTip, szTip);

    Shell_NotifyIcon(NIM_ADD, nid);
    ShowWindow(handler, SW_HIDE);

    return nid;
}

void Restore(NOTIFYICONDATA *data)
{
    ShowWindow(data-&gt;hWnd, SW_SHOW);
    Shell_NotifyIcon(NIM_DELETE, data);
}</code></pre><p id="r-502325" data-claire-element-id="502325">Et voilà un exemple d'utilisation :</p><pre id="r-502326" data-claire-element-id="502326"><code data-claire-semantic="c">/* Par exemple, la zone utilisateur étant située après WM_USER */
#define TI WM_USER+1

/* On minimise la fenêtre en récupérant une structure qui servira à la restaurer */
NOTIFYICONDATA *data = Minimize(hwnd, LoadIcon(hInstance, &quot;Icon&quot;), &quot;Je suis une TrayIcon&quot;, TI);

/* ... */

/* On restaure la fenêtre */
Restore(data);
/* Et on n'oublie pas de libérer la mémoire... */
free(data);

/* ... */

/* Quant au switch du low-word du message : */
case TI:
    /* Traitement, par exemple avec TrackPopupMenuEx(), voir msdn */</code></pre><aside id="r-502328" data-claire-element-id="502328" data-claire-semantic="warning"><p id="r-502327" data-claire-element-id="502327">Encore une fois, n'oubliez pas de libérer la mémoire occupée par l'instance de NOTIFYICONDATA nouvellement créée !</p></aside><h5 id="r-une-idee-a-fouiller-lors-de-l-encapsulation" data-claire-element-id="502338">Une idée à fouiller lors de l'encapsulation</h5><p id="r-502330" data-claire-element-id="502330">Un jour on m'a demandé si c'était possible de spécifier une méthode comme callback, et voici ce que je lui ai répondu :</p><p id="r-502331" data-claire-element-id="502331"><cite>Citation : Moi</cite></p><blockquote id="r-502336" data-claire-element-id="502336"><p id="r-502332" data-claire-element-id="502332">Le fait est que... C'est impossible ^^ La callback <strong>doit</strong> être statique. Edit: Question de signature... Ca paraît logique avec la structure <em>WNDCLASSEX</em></p><p id="r-502333" data-claire-element-id="502333">Tu dois donc contourner le problème. Voici ce que je te propose : Utilise <em>SetWindowLongPtr()</em> après création de ta fenêtre pour passer l'objet courant (obtenu à travers la structure <em>CREATESTRUCT</em> passée par le <em>LPARAM</em> de la callback statique) en tant que pointeur récupérable grâce à <em>GetWindowLong()</em> (par exemple, à l'emplacement <em>GWLP_USERDATA</em>) dans la callback statique qui se chargera alors de rediriger les événements perçus vers les callbacks virtuelles correspondantes.</p><p id="r-502334" data-claire-element-id="502334">Fouille cette idée, si tu as du courage :</p><pre id="r-502335" data-claire-element-id="502335"><code data-claire-semantic="cpp">class Wnd
{
    HWND m_handle;
 
    //...
 
    static LRESULT StaticProc(HWND, UINT, WPARAM, LPARAM);
    static LRESULT DefProc(HWND, UINT, WPARAM, LPARAM);
 
    //...
 
    virtual LRESULT virtualProc(UINT, WPARAM, LPARAM); //Pure ou pas
 
    //...
};
 
class MyWnd : public Wnd
{
    //...
 
    virtual LRESULT virtualProc(UINT, WPARAM, LPARAM); //Override
};
 
LRESULT Wnd::StaticProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{    
    LRESULT ret = 0;    
    
    //Si la fenetre est en creation, le pointeur n'a pas ete encore initialise
    if(uMsg == WM_NCCREATE)
    {
        /* SetWindowLongPtr() de 'this' contenu dans lParam grâce au dernier paramètre
           de CreateWindowEx() -&gt; Voir CREATESTRUCT structure */
        SetObjectFromCreateStruct(hWnd, lParam); //A toi de la créer...
    }
 
    Wnd *pObj = reinterpret_cast&lt;Wnd*&gt;(GetWindowLongPtr(hWnd, GWLP_USERDATA));   
    if(pObj != NULL)
        ret = pObj-&gt;virtualProc(uMsg, wParam, lParam); 
    else       
        ret = DefProc( hWnd, uMsg, wParam, lParam);
 
    return ret;
}</code></pre></blockquote><p id="r-502337" data-claire-element-id="502337">Cela reste primitif, mais c'est une solution à envisager lorsqu'on est nous-même Orienté Objet ( ^^ ) et que l'on est réticent à utiliser MFC. Cela permet en outre de bien contrôler les rouages d'une API ainsi simplifiée.</p><h5 id="r-utiliser-les-dynamic-link-library" data-claire-element-id="502365">Utiliser les Dynamic Link Library</h5><p id="r-502339" data-claire-element-id="502339">Ou DLL qui vous permettent de découper le code dans d'autres fichiers joints à l'exécutable, soit afin de l'alléger (on lie tout de même statiquement pour s'affranchir des contraintes de chargement dynamiques, tout se passe comme s'il s'agissait d'une bibliothèque statique [.a, .lib] à la génération, mais les bibliothèques sont stockées à part dans des DLL), soit liées dynamiquement (chargement de la DLL et de ses fonctions à l'exécution, dans le code, aucune opération de linker). Les DLL permettent une maintenance facilitée, pour par exemple des mises à jour sur des points particuliers, simplement en remplaçant uniquement des DLL, sans toucher au reste. Elles sont particulièrement utiles pour les plugin.</p><p id="r-502340" data-claire-element-id="502340">DavySharp974, que je remercie au passage, nous propose une bibliothèque qui regroupe le code de liaison dynamique des DLL dans 3 fonctions. On ne détaille pas la création desdites DLL et d'une manière générale leur fonctionnement, mais cela peut vous faciliter la vie. Et qui sait, cela sûrement complété.</p><p id="r-502341" data-claire-element-id="502341"><cite>Citation : DavySharp974</cite></p><blockquote id="r-502360" data-claire-element-id="502360"><p id="r-502342" data-claire-element-id="502342">Dans cette partie, vous pourrez apprendre comment charger dynamiquement une DLL sous Windows :) Pour ce faire, il vous faut télécharger <a href="https://sourceforge.net/projects/sqextlib/files/libdll2.zip/download">libDLL</a></p><p id="r-502343" data-claire-element-id="502343">Dézippez les fichiers et mettez-les dans les bons emplacements (excepté le fichier 'test_dll.dll' qui doit être dans le même répertoire que votre projet de test).<br/> Au cas où le lien soit cassé, ou pour simple information, voilà le code de la bibliothèque :</p><p id="r-502344" data-claire-element-id="502344">sqdll.h</p><pre id="r-502345" data-claire-element-id="502345"><code data-claire-semantic="c">/*
    Library for DLL loading.
    by Davy Sharp

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
*/

#ifndef __SQ_EXT_DLL_H
#define __SQ_EXT_DLL_H

#if !defined _WIN32 &amp;&amp; !defined __Win32__
    #error &quot;libDLL was designed to be used uner Windows only !&quot;
#endif

#ifdef __cplusplus
extern &quot;C&quot;
{
#endif

    typedef struct sq_dll_struct_t* sqdll_t;

    sqdll_t dll_load(const char* file_name);
    void dll_free(sqdll_t dll_ptr);

    void* dll_function(sqdll_t dll_ptr, const char* function_name);

#ifdef __cplusplus
}
#endif

#endif // __SQ_EXT_DLL_H</code></pre><p id="r-502346" data-claire-element-id="502346">sqdll.c</p><pre id="r-502347" data-claire-element-id="502347"><code data-claire-semantic="c">#include &lt;windows.h&gt;

#include &quot;sqdll.h&quot;

struct sq_dll_struct_t
{
    HINSTANCE h_dll;
};

void* dll_function(sqdll_t dll_ptr, const char* function_name)
{
    if (dll_ptr != NULL)
    {
        return GetProcAddress(dll_ptr-&gt;h_dll, function_name);
    }
    else
    {
        return NULL;
    }
}

sqdll_t dll_load(const char* file_name)
{
    sqdll_t ptr = malloc(sizeof(*ptr));

    if (ptr != NULL)
    {
        ptr-&gt;h_dll = LoadLibrary(file_name);

        if (ptr-&gt;h_dll == NULL)
        {
            free(ptr);

            ptr = NULL;

            return ptr;
        }
    }

    return ptr;
}

void dll_free(sqdll_t dll_ptr)
{
    if (dll_ptr != NULL)
    {
        FreeLibrary(dll_ptr-&gt;h_dll);

        free(dll_ptr);
    }
}</code></pre><p id="r-502348" data-claire-element-id="502348">Nos pouvons à présent commencer à coder notre programme de test.<br/> Ecrivez un main vide, avec un 'return 0' à la fin.</p><pre id="r-502349" data-claire-element-id="502349"><code data-claire-semantic="c">int main(int argn, char** argv)
{
     return 0;
}</code></pre><p id="r-502350" data-claire-element-id="502350">Dans le header 'libdll.h', libDLL définit trois fonctions, les trois seules dont vous aurez besoin pour utiliser une DLL.</p><p id="r-502351" data-claire-element-id="502351">la première fonction s'appelle <code data-claire-semantic="c">sqdll_t* dll_load(const char* nomDuFichierDLL)</code>. Comme son nom l'indique (où pas :p ), elle sert à charger la DLL.</p><p id="r-502352" data-claire-element-id="502352">Nous avons donc:</p><pre id="r-502353" data-claire-element-id="502353"><code data-claire-semantic="c">int main(int argn, char** argv)
{
     sqdll_t maDLL = dll_load(&quot;test_dll.dll&quot;); // Chargement de la dll 'test_dll.dll' qui devrait être dans le répertoire de votre projet

     return 0;
}</code></pre><p id="r-502354" data-claire-element-id="502354">Ensuite, la fonction la plus importante, celle qui permet d'utiliser les fonctions de la DLL, s'appelle <code data-claire-semantic="c">void* dll_function(sqdll_t*, const char* nomDeLaFonction)</code></p><p id="r-502355" data-claire-element-id="502355">Elle prend en premier paramètre le pointeur de Handle de DLL et en second paramètre le nom de la fonction à charger.<br/> Son retour est de type <code data-claire-semantic="c">void*</code> car elle ne sait pas le type de retour et celui des arguments de la fonction qu'on charge.</p><p id="r-502356" data-claire-element-id="502356">En revanche, nous, on le connait :) la DLL 'test_dll.dll' contient une fonction <code data-claire-semantic="c">int ajouter(int a, int b)</code></p><p id="r-502357" data-claire-element-id="502357">Nous déclarons donc le pointeur sur la fonction ajouter comme ceci: <code data-claire-semantic="c">int (*ajouter)(int, int)</code></p><p id="r-502358" data-claire-element-id="502358">Je récapitule, finalement, le code écrit est</p><pre id="r-502359" data-claire-element-id="502359"><code data-claire-semantic="c">int main(int argn, char** argv)
{
     sqdll_t maDLL = NULL; // On initialise à NULL
     int (*ajouter)(int, int) = NULL; // On initialise à NULL

     maDLL =  dll_load(&quot;test_dll.dll&quot;); // Chargement de la dll 'test_dll.dll' qui devrait être dans le répertoire de votre projet

     if (!maDLL) // Si le chargement a échoué...
     {
         printf(&quot;Erreur, impossible de trouver 'test_dll.dll' !&quot;); // On affiche un message d'erreur...

         return -1; // Et on renvoie un code d'erreur
     }

     ajouter = dll_function(maDLL, &quot;ajouter&quot;); // On charge la fonction 'ajouter' depuis la DLL

     if (!ajouter) // Si le chargement a échoué...
     {
          printf(&quot;Erreur, impossible de trouver la fonction 'ajouter' dans 'test_dll.dll'); // On affiche un message...

          dll_free(maDLL); // Ne pas oublier de libérer la DLL, même si la fonction n'a pas été trouvée dedans

          return -2; // Et on renvoie un code d'erreur
     }

     // Si on arrive jusqu'ici, c'est que tout s'est bien passé

     printf(&quot;La somme de %d et %d est %d&quot;, 429, 763, ajouter(429, 763)); // On utilise la fonction 'ajouter'

     dll_free(maDLL); // on n'oublie pas de libérer la DLL en quittant

     return 0;
}</code></pre></blockquote><p id="r-502361" data-claire-element-id="502361"><em>Il me semblait en avoir d'autres en réserve, mais je vous avoue que j'ai un peu la flegme de me plonger dans mon courrier dans une chasse aux codes :-° <br/> D'autres surgiront peut-être ?</em></p><div id="r-502363" data-claire-element-id="502363"><p id="r-502362" data-claire-element-id="502362">Rédacteur : <strong>Mg++</strong></p></div><p id="r-502364" data-claire-element-id="502364">Les annexes ne sont pas finies, elles sont avancées au fur et à mesure de la progression du tuto ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
<span class="arrow"></span>
<span class="next">La notation hongroise</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">
<span class="next">Programmes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Programmes"></a><h2>Programmes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
<span class="arrow"></span>
<span class="next">Quelques codes...</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
<span class="next">Neoblast, de Kidpaddle2 (ex-Mg++)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-502377" data-claire-element-id="502377">Ici seront recensés les programmes créés en WinAPI, dont vous m'aurez fait part.</p>
</div><a name="NeoblastdeKidpaddle2ex-Mg"></a><h2>Neoblast, de Kidpaddle2 (ex-Mg++)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">
<span class="arrow"></span>
<span class="next">Programmes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
<span class="next">DdPop, de damien.09</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-neoblast-de-kidpaddle2-ex-mg" data-claire-element-id="502472">Neoblast, de Kidpaddle2 (ex-Mg++)</h4><figure id="r-502379" data-claire-element-id="502380"><img id="r-502378" data-claire-element-id="502378" src="../../esynapse.free.fr/img/NeoBlast_logo.html" alt="Image utilisateur"/></figure><p id="r-502381" data-claire-element-id="502381">Bonjour !</p><p id="r-502382" data-claire-element-id="502382">Je poste ici pour vous présenter un programme que j'ai jadis créé : <strong>NeoBlast</strong>.</p><h5 id="r-qu-est-ce-que-c-est-25" data-claire-element-id="502399">Qu'est ce que c'est ?</h5><p id="r-502383" data-claire-element-id="502383"><strong>NeoBlast</strong> (en français : &quot;Souffle Nouveau&quot;) est un lecteur audio avancé pouvant lire la totalité des fichiers audios présents sur vos ordinateurs respectifs :</p><ul id="r-502394" data-claire-element-id="502394"><li id="r-502385" data-claire-element-id="502385"><p id="r-502384" data-claire-element-id="502384">Wave</p></li><li id="r-502387" data-claire-element-id="502387"><p id="r-502386" data-claire-element-id="502386">mp3</p></li><li id="r-502389" data-claire-element-id="502389"><p id="r-502388" data-claire-element-id="502388">Wma</p></li><li id="r-502391" data-claire-element-id="502391"><p id="r-502390" data-claire-element-id="502390">Ogg</p></li><li id="r-502393" data-claire-element-id="502393"><p id="r-502392" data-claire-element-id="502392">etc...</p></li></ul><div id="r-502396" data-claire-element-id="502396" data-claire-semantic="question"><p id="r-502395" data-claire-element-id="502395">Comment ?</p></div><p id="r-502397" data-claire-element-id="502397">J'ai utilisé la bibliothèque <em>fmod</em> afin d'avoir le plus de fonctions possible permettant de manipuler les fichiers audio pour les implémenter dans mon programme.</p><p id="r-502398" data-claire-element-id="502398">[Malheureusement, même si celle-ci est portable, la bibliothèque graphique utilisée (GUI) étant le windows API ou API win32 n'est pas portable, et ne fonctionnera que sous Windows.]</p><h5 id="r-que-fait-il-de-special" data-claire-element-id="502432">Que fait-il de spécial ?</h5><p id="r-502400" data-claire-element-id="502400"><strong>NeoBlast</strong> ne fait rien de vraiment &quot;spécial&quot;, mais se contente d'avoir la plupart des fonctionnalités des lecteurs audio &quot;pro&quot; présents sur le net :</p><ul id="r-502431" data-claire-element-id="502431"><li id="r-502402" data-claire-element-id="502402"><p id="r-502401" data-claire-element-id="502401">lecture des fichiers audio (logique)</p></li><li id="r-502404" data-claire-element-id="502404"><p id="r-502403" data-claire-element-id="502403">gestion de <em>playlist</em></p></li><li id="r-502406" data-claire-element-id="502406"><p id="r-502405" data-claire-element-id="502405"><em>Drag and drop</em> dans la <em>playlist</em></p></li><li id="r-502408" data-claire-element-id="502408"><p id="r-502407" data-claire-element-id="502407"><em>Seeker</em></p></li><li id="r-502410" data-claire-element-id="502410"><p id="r-502409" data-claire-element-id="502409">affichage en temps réel des infos de la musique (temps, titre, etc.)</p></li><li id="r-502412" data-claire-element-id="502412"><p id="r-502411" data-claire-element-id="502411">fonctions principales (<em>Play / Pause / Stop / Next / Previous</em>)</p></li><li id="r-502414" data-claire-element-id="502414"><p id="r-502413" data-claire-element-id="502413">ouverture simple des fichiers musicaux en <em>unic</em> ou <em>multi select</em> à travers une boite de dialogue d'ouverture</p></li><li id="r-502416" data-claire-element-id="502416"><p id="r-502415" data-claire-element-id="502415">chargement / Sauvegarde de <em>playlist</em> au format m3P (format propriétaire)</p></li><li id="r-502418" data-claire-element-id="502418"><p id="r-502417" data-claire-element-id="502417">scan du / des disques pour trouver automatiquement les fichiers audio</p></li><li id="r-502420" data-claire-element-id="502420"><p id="r-502419" data-claire-element-id="502419">possibilité de rejouer la <em>playlist</em> arrivée à la fin</p></li><li id="r-502422" data-claire-element-id="502422"><p id="r-502421" data-claire-element-id="502421"><em>Shuffle</em></p></li><li id="r-502424" data-claire-element-id="502424"><p id="r-502423" data-claire-element-id="502423">possibilité de lancer NeoBlast au démarrage :</p></li><li id="r-502426" data-claire-element-id="502426"><p id="r-502425" data-claire-element-id="502425">minimisé</p></li><li id="r-502428" data-claire-element-id="502428"><p id="r-502427" data-claire-element-id="502427">avec une <em>playlist</em> spécifiée</p></li><li id="r-502430" data-claire-element-id="502430"><p id="r-502429" data-claire-element-id="502429"><em>Skin</em> améliorés</p></li></ul><h5 id="r-parlons-en-des-skin-ils-sont-comment" data-claire-element-id="502445">Parlons-en des<em> skin</em>... ils sont comment ?</h5><p id="r-502433" data-claire-element-id="502433">Pour vous faire une idée, voici :</p><p id="r-502434" data-claire-element-id="502434"><em>Le skin principal :</em></p><figure id="r-502436" data-claire-element-id="502437"><img id="r-502435" data-claire-element-id="502435" src="medias/uploads.siteduzero.com_files_45001_46000_45735.jpg" alt="Image utilisateur"/></figure><p id="r-502438" data-claire-element-id="502438"><em>Le skin de la <em>playlist</em> :</em></p><figure id="r-502440" data-claire-element-id="502441"><img id="r-502439" data-claire-element-id="502439" src="medias/uploads.siteduzero.com_files_45001_46000_45734.jpg" alt="Image utilisateur"/></figure><p id="r-502442" data-claire-element-id="502442"><em>Un grand merci à Musethebest pour la conception des<em> skin</em>... d'ailleurs <a href="http://musethebest.free.fr/">un peu de pub</a> :p .</em></p><p id="r-502443" data-claire-element-id="502443">[Le noir est utilisé pour la présentation : l'utilisation des régions m'a permis de pouvoir avoir des fenêtres ayant la forme de ces skins (avec la couleur noire comme transparente) sans barre de titre.]</p><p id="r-502444" data-claire-element-id="502444">Pour bouger les fenêtres modélisées par les skins, exécutez un <em>drag</em> avec le bouton droit de la souris. (voir &quot;Help&quot; pour quelques précisions).</p><h5 id="r-genial-ou-le-telecharger" data-claire-element-id="502454">Génial ! Où le télécharger ?</h5><p id="r-502446" data-claire-element-id="502446">(Bin quoi, c'est possible non ? :-° )</p><p id="r-502447" data-claire-element-id="502447">Vous pourrez le télécharger (en étant équipé d'un extracteur de <em>rar / zip</em>) à partir des liens ci-dessous :<br/> (N'oubliez pas de lire le fichier &quot;Help&quot; situé dans le menu Démarrer, et s'il vous plaît, ne sautez pas la licence.)</p><h6 id="r-liens-4" data-claire-element-id="502453">Liens :</h6><ul id="r-502452" data-claire-element-id="502452"><li id="r-502449" data-claire-element-id="502449"><p id="r-502448" data-claire-element-id="502448"><a href="http://esynapse.free.fr/Datas/Public/NeoBlast_setup_v1.0.rar">Télécharger NeoBlast v1.0</a> (Anglais</p></li><li id="r-502451" data-claire-element-id="502451"><p id="r-502450" data-claire-element-id="502450"><a href="http://develwares.free.fr/FTP/Programs/WinAPI/NeoBlast_v1.0/NeoBlast_francais_setup_v1.0.exe">Télécharger NeoBlast v1.0</a> (Français)</p></li></ul><h5 id="r-place-aux-tests" data-claire-element-id="502471">Place aux tests</h5><p id="r-502455" data-claire-element-id="502455">Voilà la présentation est terminée, place aux tests !</p><p id="r-502456" data-claire-element-id="502456">Vous pourrez consulter les codes sources (C) présents dans le répertoire d'<em>install</em> de <strong>NeoBlast</strong> ; attention, ils sont très indigestes, je l'ai créé à mes débuts, n'étant à cette époque pas rigoureux.</p><p id="r-502457" data-claire-element-id="502457">Si vous avez des avis, des commentaires, des critiques [constructives] ou encore des suggestions, n'hésitez pas à écrire dans mon livre d'or situé sur mon site <a href="http://esynapse.free.fr/">e-Synapse</a>, où une présentation dudit logiciel est aussi présente (au cas où).</p><aside id="r-502459" data-claire-element-id="502459" data-claire-semantic="information"><p id="r-502458" data-claire-element-id="502458">Le prochain programme à paraître est PlayTyle, nettement pus évolué et codé à l'aide d'MFC. Sa sortie n'est toutefois pas prévue pour demain, même s'il est bien avancé :lol:</p></aside><h6 id="r-remerciements-11" data-claire-element-id="502470">Remerciements :</h6><ul id="r-502464" data-claire-element-id="502464"><li id="r-502461" data-claire-element-id="502461"><p id="r-502460" data-claire-element-id="502460"><strong>Musethebest</strong> qui s'est occupé des skins</p></li><li id="r-502463" data-claire-element-id="502463"><p id="r-502462" data-claire-element-id="502462"><strong>Médinoc</strong> qui m'a beaucoup aidé sur le forum de developpez.com</p></li></ul><p id="r-502465" data-claire-element-id="502465">___________________________________|</p><figure id="r-502467" data-claire-element-id="502468"><img id="r-502466" data-claire-element-id="502466" src="medias/uploads.siteduzero.com_files_45001_46000_45736.png" alt="Image utilisateur"/></figure><p id="r-502469" data-claire-element-id="502469">|_________________________________</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">
<span class="arrow"></span>
<span class="next">Programmes</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
<span class="next">DdPop, de damien.09</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="DdPopdedamien.09"></a><h2>DdPop, de damien.09</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
<span class="arrow"></span>
<span class="next">Neoblast, de Kidpaddle2 (ex-Mg++)</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-ddpop-de-damien-09" data-claire-element-id="502515">DdPop, de damien.09</h4><h5 id="r-qu-est-ce-que-c-est-26" data-claire-element-id="502497">Qu'est ce que c'est ?</h5><h6 id="r-en-quoi-cela-consiste-t-il-principales-caracteristiques" data-claire-element-id="502492">En quoi cela consiste t'il : (principales caractéristiques)</h6><ul id="r-502491" data-claire-element-id="502491"><li id="r-502474" data-claire-element-id="502474"><p id="r-502473" data-claire-element-id="502473">Programme permettant de s'échanger des messages sur un réseau local comme sur internet. (avec l'adresse IP ou le nom du PC distant)</p></li><li id="r-502476" data-claire-element-id="502476"><p id="r-502475" data-claire-element-id="502475">Possibilité de s'échanger des fichiers (depuis la version 3.0 du 14/04/07)</p></li><li id="r-502478" data-claire-element-id="502478"><p id="r-502477" data-claire-element-id="502477">Mettre en contact jusqu'a 8 personnes. (il faut pour cela le module <strong>DDpop-Serveur</strong> : vous pourez virer les utilisateurs qui sont pas sages :p )</p></li><li id="r-502480" data-claire-element-id="502480"><p id="r-502479" data-claire-element-id="502479">Faire en sorte que le programme démarre et se connecte automatiquement à l'ouverture d'une session.</p></li><li id="r-502482" data-claire-element-id="502482"><p id="r-502481" data-claire-element-id="502481">Possibilité de minimiser l'application dans la systray (=barre d'icône à coté de l'horloge).</p></li><li id="r-502484" data-claire-element-id="502484"><p id="r-502483" data-claire-element-id="502483">Choix du port utilisé.</p></li><li id="r-502486" data-claire-element-id="502486"><p id="r-502485" data-claire-element-id="502485">Choix de la police de caractère ainsi que des couleurs (couleur de fond et couleur du texte).</p></li><li id="r-502488" data-claire-element-id="502488"><p id="r-502487" data-claire-element-id="502487">Vous pouvez aussi envoyer des Wizz (comme sur MSN).</p></li><li id="r-502490" data-claire-element-id="502490"><p id="r-502489" data-claire-element-id="502489">Quelques sons pour agrémenter le tout.</p></li></ul><h6 id="r-points-n-ayant-pu-etre-developpes" data-claire-element-id="502496">Points n'ayant pu être développés :</h6><ul id="r-502495" data-claire-element-id="502495"><li id="r-502494" data-claire-element-id="502494"><p id="r-502493" data-claire-element-id="502493">Le multiplateforme : il marche que sous Windows :o (je me suis tout de même efforcé d'assurer la compatibilité avec Windows98 :) ).</p></li></ul><h5 id="r-un-apercu" data-claire-element-id="502501">Un aperçu</h5><figure id="r-502499" data-claire-element-id="502500"><img id="r-502498" data-claire-element-id="502498" src="medias/uploads.siteduzero.com_files_41001_42000_41602.jpg" alt="Image utilisateur"/></figure><h5 id="r-lien-et-contact" data-claire-element-id="502503">Lien et contact</h5><p id="r-502502" data-claire-element-id="502502">Voici l'adresse ou vous pouvez télécharger <strong>DDpop</strong> : <a href="http://damien09.programmes.site.voila.fr/index.html">http://damien09.programmes.site.voila.fr</a>. Il est conseillé de télécharger également le module <strong>DDpop-Serveur</strong> (ça va avec <strong>DDpop</strong>) comme ça vous pourrez être 8 à dialoguer ;) .<br/> Les téléchargements (<strong>DDpop</strong> et <strong>DDpopServeur</strong>) incluent une Documentation expliquant le fonctionnement du programme correspondant, n'hésitez pas à la consulter.</p><h5 id="r-infos" data-claire-element-id="502514">Infos</h5><p id="r-502504" data-claire-element-id="502504">Les caractéristiques indiquées ci-dessus ne sont peut être pas celles de la dernière version, si vous voulez les caractéristiques de la version actuelle référez vous à <a href="http://www.siteduzero.com/forum-83-68724-presentation-ddpop-messagerie-instanee-simplifiee.html">cette page</a>.<br/> DDpop et DDpop-Serveur sont des programmes codés en C++ avec l'API Windows par Dando.D.</p><p id="r-502505" data-claire-element-id="502505">N'hésitez pas à laisser des commentaires <a href="http://www.siteduzero.com/forum-83-68724-presentation-ddpop-messagerie-instanee-simplifiee.html">ici</a> ou à me poser des questions :) et prevenez moi si vous trouvez des bugs.</p><p id="r-502506" data-claire-element-id="502506">La liste n'est pas complète, n'hésitez pas à rajouter les votres !</p><p id="r-502507" data-claire-element-id="502507">Sauf mention contraire, tous les projets sont sous licence GPL, et peuvent donc être étudiés (pas d'appropriation, et les modifications entraîneront obligatoirement une citation du créateur originel).</p><aside id="r-502509" data-claire-element-id="502509" data-claire-semantic="information"><p id="r-502508" data-claire-element-id="502508">Pour ajouter votre projet à cette liste, créez un chapitre (mini-tuto), rédigez votre présentation avec une dernière sous-partie étant &quot;Liens&quot;, puis copiez-collez vos rédactions (en zCode) dans un MP que vous m'enverrez ; je m'occuperais de la mise à jour.</p></aside><aside id="r-502511" data-claire-element-id="502511" data-claire-semantic="information"><p id="r-502510" data-claire-element-id="502510">Si vous avez des problèmes, contactez nous par MP.</p></aside><p id="r-502512" data-claire-element-id="502513">Pour en savoir plus :<a href="http://msdn.microsoft.com/library"><img id="r-502513" data-claire-element-id="502512" src="medias/uploads.siteduzero.com_files_16001_17000_16374.png" alt="Image utilisateur"/></a></p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows">Apprentissage de l&#039;API Windows</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Grandes lignes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-bases-27">Les bases</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/commencement">
Commencement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/votre-premiere-fenetre-1">
Votre première fenêtre
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/elle-est-vide-ma-fenetre">
Elle est vide, ma fenêtre !
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-menus-11">
Les menus
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boites-de-dialogue-7">
Les boîtes de dialogue
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-controles-5">Les contrôles</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-boutons-tous-types">
Les boutons (tous types)
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-d-edition">
Le contrôle d&#039;édition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-deroulante-2">
La liste déroulante
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-liste-de-choix-1">
La liste de choix
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-glissiere">
La glissière
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-controle-static">
Le contrôle Static
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/l-affichage-4">L&#039;affichage</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-contextes-de-peripheriques">
Les contextes de périphériques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/le-texte-11">
Le texte
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-formes-geometriques">
Les formes géométriques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-images-19">
Les images
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/tp-un-lecteur-audio-2">TP : Un lecteur audio</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/but-3">
But
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/necessaire-1">
Nécessaire
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/pistes-1">
Pistes
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/correction-166">
Correction
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ameliorations-25">
Améliorations
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-evenements-14">Les événements</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-clavier">
Evénements &quot;clavier&quot;
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/evenements-souris">
Evénements &quot;souris&quot;
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/esthetique-avancee">Esthétique avancée</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/les-regions">
Les régions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/gestion-de-la-fenetre">
Gestion de la fenêtre
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 2</span>
Annexes
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/documentation-5">Documentation</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/fonctions-7">
Fonctions
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/messages-5">
Messages
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/structures-4">
Structures
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/glossaire">Glossaire</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/termes">
Termes
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/manipulation-du-registre">Manipulation du registre</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-notions-de-bdr">
Quelques notions de BDR
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/changement-d-icone-de-fichiers">
Changement d&#039;icône de fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/lancement-au-demarrage-de-windows">
Lancement au démarrage de windows
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/association-de-fichiers">
Association de fichiers
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/divers-34">Divers</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/utiliser-le-style-du-windows-courant">
Utiliser le style du Windows courant
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/la-notation-hongroise">
La notation hongroise
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/quelques-codes">
Quelques codes...
</a>
</li>
</ul> </li></ul> </li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 3</span>
Projets
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/programmes">Programmes</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
Neoblast, de Kidpaddle2 (ex-Mg++)
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/ddpop-de-damien-09">
DdPop, de damien.09
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/apprentissage-de-l-api-windows/neoblast-de-kidpaddle2-ex-mg">
<span class="arrow"></span>
<span class="next">Neoblast, de Kidpaddle2 (ex-Mg++)</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/apprentissage-de-l-api-windows.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 11:22:47 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/apprentissage-de-l-api-windows.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:49:59 GMT -->
</html>