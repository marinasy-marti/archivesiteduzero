<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 11:05:02 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:47:15 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Initiation à la récursivité en PHP : notions, mise en œuvre et utilisation</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Initiation à la récursivité en PHP : notions, mise en œuvre et utilisation</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#InitiationlarcursivitenPHPnotionsmiseenuvreetutilisation">Initiation à la récursivité en PHP : notions, mise en œuvre et utilisation</a><br/><a href="#Notiondercursivit">Notion de récursivité</a><br/><a href="#MiseenuvredelarcursivitenPHPetvariablesstatiques">Mise en œuvre de la récursivité en PHP, et variables statiques</a><br/><a href="#Utilisationdelarcursivitdansnoscodes">Utilisation de la récursivité dans nos codes</a><br/></div>
<a name="InitiationlarcursivitenPHPnotionsmiseenuvreetutilisation"></a><h2>Initiation à la récursivité en PHP : notions, mise en œuvre et utilisation</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/notion-de-recursivite">
<span class="next">Notion de récursivité</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-562215" data-claire-element-id="562215">Bonjour, chers amis Zéros ! :)</p><p id="r-562216" data-claire-element-id="562216">Pour mon second tutoriel, je vais vous expliquer le concept de récursivité, des fonctions récursives en PHP et vous montrer quelques exemples d'application. Comme pour mon premier tutoriel sur la librairie xAjax, je ne suis pas parvenu à trouver un cours qui aurait pu m'expliquer de façon claire ce sujet, et c'est ce qui m'a conduit à écrire celui-ci.</p><p id="r-562217" data-claire-element-id="562217">Si la récursivité paraît simple pour certains, son approche est très difficile pour d'autres, et tenter de décrypter des codes faisant appel à des fonctions récursives peut se révéler très délicat…</p><p id="r-562218" data-claire-element-id="562218">Les fonctions récursives peuvent nous sembler inutiles car la méthode itérative (celle qui consiste à répéter une portion de code grâce à des boucles) est plus simple à comprendre, à relire et à mettre en œuvre ; de plus, nous l'utilisons sans cesse dans nos applications PHP. Pourtant, la méthode récursive est parfois plus avantageuse, surtout lorsqu'il s'agit de parcourir et de travailler sur des données (comme les tableaux par exemple) qui s'étendent à l'infini.</p><p id="r-562219" data-claire-element-id="562219">Pour suivre ce tutoriel, vous n'aurez pas besoin de connaissances particulières, à part les bases du PHP (si vous ne les possédez pas, direction le cours de M@teo21) et un peu de concentration pour bien comprendre le principe. Quelques notions de mathématiques seront aussi les bienvenues et pourront vous aider dans l'apprentissage du mécanisme !</p><p id="r-562220" data-claire-element-id="562220">Si vous vous sentez prêts, nous allons pouvoir commencer ! ;)</p><p id="r-562221" data-claire-element-id="562221"><strong>Niveau</strong> : <strong>5 / 10 — Intermédiaire</strong>.</p>
</div><a name="Notiondercursivit"></a><h2>Notion de récursivité</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/mise-en-oeuvre-de-la-recursivite-en-php-et-variables-statiques">
<span class="next">Mise en œuvre de la récursivité en PHP, et variables statiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<div id="r-562223" data-claire-element-id="562223" data-claire-semantic="question"><p id="r-562222" data-claire-element-id="562222">Bon, crache le morceau ! C'est quoi, une fonction récursive ?</p></div><p id="r-562224" data-claire-element-id="562224">Une fonction récursive est une fonction qui s'appelle elle-même. En PHP, elle se présente de cette façon :</p><pre id="r-562225" data-claire-element-id="562225"><code data-claire-semantic="html+php">&lt;?php
function Recursive($arg1, $arg2, ...)
{
        //Code...
        Recursive($arg1 + 2, $arg.$arg, ...);
        //Suite du code...
}
?&gt;</code></pre><p id="r-562226" data-claire-element-id="562226">Vous pouvez voir dans ce code que la fonction Recursive() s'appelle elle-même, elle va donc être répétée à la manière d'une boucle !</p><p id="r-562227" data-claire-element-id="562227">On peut faire une analogie avec les suites mathématiques (si vous ne comprenez pas cet exemple, ne vous y attardez pas).</p><h3 id="r-exemple-172" data-claire-element-id="562233">Exemple</h3><p id="r-562228" data-claire-element-id="562228">Soit une suite Un avec U0 = 5.<br/> Et Un+1 = Un + 5.<br/> Cette suite arithmétique simple nous donne :<br/> U0 = 5<br/> U1 = 10<br/> U2 = 15… et ainsi de suite (et donc Un = 5 + 5n).</p><p id="r-562229" data-claire-element-id="562229">On a ici un exemple d'une fonction mathématique qui s'appelle elle-même. En PHP, c'est la même chose : on appelle notre fonction directement à l'intérieur de celle-ci.</p><p id="r-562230" data-claire-element-id="562230">La récursivité va principalement nous servir pour les travaux d'analyse sur des données telles que des tableaux ou des dossiers. <br/> Si par exemple nous voulons parcourir un tableau, nous allons utiliser un foreach. Si ensuite ce tableau contient lui-même un tableau, on peut encore effectuer un foreach imbriqué dans un autre foreach. Le problème se pose lorsqu'on a un nombre indéfini (et infini) de sous-tableaux : dans ce cas, nous sommes alors obligés de faire appel à la récursivité ! <br/> Elle va donc nous servir pour l'analyse de données qui s'étendent à l'infini (comme les tableaux multidimensionnels).</p><p id="r-562231" data-claire-element-id="562231">Vous devriez maintenant avoir compris ce qu'est la récursivité en PHP. Enfin, je l'espère, car cette première partie du tutoriel est aussi la plus facile : alors si vous n'avez pas compris, on est mal barrés… ^^</p><p id="r-562232" data-claire-element-id="562232">Si le concept est clair pour vous, nous allons continuer et passer à la seconde partie ! ;)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation">Initiation à la récursivité en PHP : notions, mise en œuvre et utilisation</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/notion-de-recursivite">
Notion de récursivité
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/mise-en-oeuvre-de-la-recursivite-en-php-et-variables-statiques">
Mise en œuvre de la récursivité en PHP, et variables statiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/utilisation-de-la-recursivite-dans-nos-codes">
Utilisation de la récursivité dans nos codes
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/mise-en-oeuvre-de-la-recursivite-en-php-et-variables-statiques">
<span class="next">Mise en œuvre de la récursivité en PHP, et variables statiques</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="MiseenuvredelarcursivitenPHPetvariablesstatiques"></a><h2>Mise en œuvre de la récursivité en PHP, et variables statiques</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/notion-de-recursivite">
<span class="arrow"></span>
<span class="next">Notion de récursivité</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/utilisation-de-la-recursivite-dans-nos-codes">
<span class="next">Utilisation de la récursivité dans nos codes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-562235" data-claire-element-id="562235">Dans cette deuxième partie du tutoriel, les choses vont se compliquer ; si le principe est plutôt simple, la mise en œuvre des fonctions récursives est un petit peu plus difficile… :p</p><p id="r-562236" data-claire-element-id="562236">Je vais vous donner un exemple concret de ce qu'on peut faire en PHP, et même s'il ne sert à rien, il illustre bien le principe. <br/> Nous allons calculer (((((2)^2)^2)^2)^2), c'est-à-dire qu'on va mettre <strong>2 à la puissance 2, quatre fois de suite</strong>, et afficher le résultat. Voici le code :</p><pre id="r-562237" data-claire-element-id="562237"><code data-claire-semantic="html+php">&lt;?php
function puissance($chiffre, $nbre_exposant)
{
        //On vérifie si on doit encore passer le résultat à la puissance $chiffre
        if($nbre_exposant &gt; 0)
        {
                //On appelle notre fonction
                return puissance($chiffre*$chiffre, $nbre_exposant - 1);
        }
        //Sinon on retourne le résultat
        return $chiffre;
}
 
//On définit le chiffre qui sera mis à sa puissance
$chiffre = 2;
 
//On choisit le nombre de fois où $chiffre sera mis à sa puissance
$nbre_exposant = 4;
 
//On affiche le résultat en faisant appel à notre fonction
echo puissance($chiffre, $nbre_exposant);
?&gt;</code></pre><p id="r-562238" data-claire-element-id="562238">Avec ce petit exemple (qu'en passant je qualifierais de « bien commenté » :lol: ), vous devriez comprendre comment ça marche…<br/> 8</p><aside id="r-562240" data-claire-element-id="562240" data-claire-semantic="information"><p id="r-562239" data-claire-element-id="562239">S'il vous plaît, ne me dites pas qu'on aurait simplement pu écrire echo (((((2)^2)^2)^2)^2) et que ça aurait donné le même résultat… Je le sais, c'est juste pour tenter de vous expliquer le principe !</p></aside><p id="r-562241" data-claire-element-id="562241">Je vais essayer d'être le plus précis possible dans la description de ce qui se passe.</p><ul id="r-562252" data-claire-element-id="562252"><li id="r-562243" data-claire-element-id="562243"><p id="r-562242" data-claire-element-id="562242"><strong>Premier appel</strong> à la fonction Puissance() : à ce stade, <strong>$chiffre = 2 et $nbre_exposant = 4</strong><strong>→</strong> comme $nbre_exposant est supérieur à zéro, on refait appel à la fonction en mettant $chiffre au carré et en décrémentant $nbre_exposant.</p></li><li id="r-562245" data-claire-element-id="562245"><p id="r-562244" data-claire-element-id="562244"><strong>Deuxième appel</strong> à la fonction Puissance() : à ce stade, <strong>$chiffre = 4 et $nbre_exposant = 3</strong><strong>→</strong> comme $nbre_exposant est supérieur à zéro, on refait appel à la fonction en mettant $chiffre au carré et en décrémentant $nbre_exposant.</p></li><li id="r-562247" data-claire-element-id="562247"><p id="r-562246" data-claire-element-id="562246"><strong>Troisième appel</strong> à la fonction Puissance() : à ce stade, <strong>$chiffre = 16 et $nbre_exposant = 2</strong><strong>→</strong> comme $nbre_exposant est supérieur à zéro, on refait appel à la fonction en mettant $chiffre au carré et en décrémentant $nbre_exposant.</p></li><li id="r-562249" data-claire-element-id="562249"><p id="r-562248" data-claire-element-id="562248"><strong>Quatrième appel</strong> à la fonction Puissance() : à ce stade, <strong>$chiffre = 256 et $nbre_exposant = 1</strong><strong>→</strong> comme $nbre_exposant est supérieur à zéro, on refait appel à la fonction en mettant $chiffre au carré et en décrémentant $nbre_exposant.</p></li><li id="r-562251" data-claire-element-id="562251"><p id="r-562250" data-claire-element-id="562250"><strong>Cinquième appel</strong> à la fonction Puissance() : à ce stade, <strong>$chiffre = 65536 et $nbre_exposant = 0</strong><strong>→</strong>$nbre_exposant est maintenant égal à zéro, on ne rappelle plus la fonction Puissance(), et on retourne $chiffre qui est maintenant égal à 65536 !</p></li></ul><p id="r-562253" data-claire-element-id="562253">Côté serveur, à chaque appel de la fonction, une copie du code est mise en mémoire.</p><p id="r-562254" data-claire-element-id="562254">J'essaye de faire en sorte que vous puissiez comprendre facilement (ce qui n'est pas très facile vu le sujet…), mais si malgré cela vous n'avez pas saisi l'exemple, je vous conseille d'imprimer le code sur papier et de reprendre mon explication en l'ayant sous les yeux. Veillez à faire preuve de logique et allez-y pas à pas, ça finira par entrer ! ;)</p><p id="r-562255" data-claire-element-id="562255">Si vous avez compris l'exemple, nous allons maintenant parler des variables statiques.<br/> Les variables statiques sont très pratiques dès que l'on se met à travailler avec des fonctions récursives.</p><div id="r-562257" data-claire-element-id="562257" data-claire-semantic="question"><p id="r-562256" data-claire-element-id="562256">Comment déclare-t-on une variable statique ?</p></div><p id="r-562258" data-claire-element-id="562258">Pour pouvoir utiliser une variable statique, il faut d'abord la déclarer. On procède de cette manière :</p><pre id="r-562259" data-claire-element-id="562259"><code data-claire-semantic="html+php">&lt;?php
function MachinRecursif()
{
        static $variable_statique = 256;
        //Code...
}
?&gt;</code></pre><p id="r-562260" data-claire-element-id="562260">Vous conviendrez que ce n'est pas très compliqué ! :p</p><aside id="r-562262" data-claire-element-id="562262" data-claire-semantic="warning"><p id="r-562261" data-claire-element-id="562261">Attention : on ne peut déclarer des variables statiques qu'avec des valeurs qui ne sont pas des expressions ! <br/> Par exemple, static $var = 1 + 1; ne fonctionnera pas.</p></aside><div id="r-562264" data-claire-element-id="562264" data-claire-semantic="question"><p id="r-562263" data-claire-element-id="562263">Bon, c'est beau la vie, mais on ne sait toujours pas à quoi sert une variable statique !</p></div><p id="r-562265" data-claire-element-id="562265">Je vais vous expliquer ça avec un nouvel exemple crétin comme je sais si bien les faire.<br/> Le but va être de <strong>compter à l'envers en partant de 5</strong> avec une fonction récursive.</p><p id="r-562266" data-claire-element-id="562266">5… 4… 3… 2… 1… 0… Le code :</p><pre id="r-562267" data-claire-element-id="562267"><code data-claire-semantic="html+php">&lt;?php
function decollage()
{
        //On définit notre variable à 5
        $compteur = 5;
        //On affiche
        echo $compteur;
        //On décrémente
        $compteur--;
        if($compteur &gt;= 0)
        {
                //On rappelle notre fonction
                decollage();
        }
}
decollage();
?&gt;</code></pre><aside id="r-562269" data-claire-element-id="562269" data-claire-semantic="error"><p id="r-562268" data-claire-element-id="562268">Et là, c'est le drame ! Internal Error 500 ! Eh oui, ce code ne fonctionne pas.</p></aside><p id="r-562270" data-claire-element-id="562270">C'est logique, allez-vous me dire : à chaque fois, la variable $compteur est réinitialisée à 5, on a donc une boucle infinie ; et forcément, le serveur plante !</p><p id="r-562271" data-claire-element-id="562271">Alors c'est vrai qu'on pourrait encore se débrouiller autrement en passant un argument à notre fonction comme dans le premier exemple, mais dans ce cas, ce serait beaucoup moins drôle pour nous. :diable:</p><p id="r-562272" data-claire-element-id="562272">Pour résoudre ce problème (qui n'en est en réalité pas un), nous allons avoir recours aux variables statiques.</p><pre id="r-562273" data-claire-element-id="562273"><code data-claire-semantic="html+php">&lt;?php
function decollage()
{
        //On définit notre variable à 5 en statique
        static $compteur = 5;
        //On affiche
        echo $compteur;
        //On décrémente
        $compteur--;
        if($compteur &gt;= 0)
        {
                //On rappelle notre fonction
                decollage();
        }
}
decollage();
?&gt;</code></pre><aside id="r-562275" data-claire-element-id="562275" data-claire-semantic="information"><p id="r-562274" data-claire-element-id="562274">Cette fois, ça fonctionne ! ^^</p></aside><div id="r-562277" data-claire-element-id="562277" data-claire-semantic="question"><p id="r-562276" data-claire-element-id="562276">Je ne comprends pas pourquoi ça fonctionne alors que la variable est déclarée à chaque appel à notre fonction…</p></div><p id="r-562278" data-claire-element-id="562278">Voilà tout l'intérêt de nos variables statiques ! <br/> À la première déclaration, elles prennent la valeur qu'on a choisie (ici 5), et se comportent dans le reste de notre code comme des variables normales. <br/> Lorsque la fonction est rappelée, à static $compteur = 5;, le serveur vérifie si la variable a déjà été déclarée. Si c'est le cas, il lui assigne l'ancienne valeur (dans notre exemple, c'est la valeur décrémentée, 4).</p><p id="r-562279" data-claire-element-id="562279">Nos variables conservent donc leur valeur après traitement, et ne sont pas <em>remises à zéro</em> à chaque appel de notre fonction ! :D</p><p id="r-562280" data-claire-element-id="562280">Il y a néanmoins un problème conséquent qu'il faut prendre en compte : une variable statique, une fois déclarée, n'est pas réinitialisée lors d'un nouvel appel à la fonction dans la page. Pour contourner ce problème, on peut détruire la variable grâce à unset. Dans tous les cas, privilégiez toujours la méthode sans variable statique.</p><p id="r-562281" data-claire-element-id="562281">Vous connaissez maintenant tout sur la mise en œuvre des fonctions récursives en PHP : fin de la deuxième partie !</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation">Initiation à la récursivité en PHP : notions, mise en œuvre et utilisation</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/notion-de-recursivite">
Notion de récursivité
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/mise-en-oeuvre-de-la-recursivite-en-php-et-variables-statiques">
Mise en œuvre de la récursivité en PHP, et variables statiques
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/utilisation-de-la-recursivite-dans-nos-codes">
Utilisation de la récursivité dans nos codes
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/notion-de-recursivite">
<span class="arrow"></span>
<span class="next">Notion de récursivité</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/utilisation-de-la-recursivite-dans-nos-codes">
<span class="next">Utilisation de la récursivité dans nos codes</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Utilisationdelarcursivitdansnoscodes"></a><h2>Utilisation de la récursivité dans nos codes</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/mise-en-oeuvre-de-la-recursivite-en-php-et-variables-statiques">
<span class="arrow"></span>
<span class="next">Mise en œuvre de la récursivité en PHP, et variables statiques</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-562283" data-claire-element-id="562283">Nous voici arrivés au stade final de ce tutoriel, et donc à l'aboutissement de nos nouvelles connaissances que nous allons enfin pouvoir mettre en application ! <br/> Car c'est bien beau, la récursivité, mais si ça n'a d'autre utilité que de faire des comptes à rebours, alors c'est très limité… Eh bien non, dans certains cas bien précis, la récursivité se révèle être une arme redoutable (et parfois indispensable) ! :pirate:</p><p id="r-562284" data-claire-element-id="562284">Au cours de cette dernière partie, nous allons étudier trois cas (et pas crétins, cette fois) dans lesquels la méthode de la récursivité sera utilisée. Bien sûr, nous définirons pour chaque cas le résultat attendu, nous coderons (euh… je coderai pour vous :-° ), et nous analyserons le code.</p><h3 id="r-cas-no-1-calcul-mathematique-recursif-les-factorielles" data-claire-element-id="562294">Cas no 1 : calcul mathématique récursif — les factorielles</h3><p id="r-562285" data-claire-element-id="562285">En mathématiques, la récursivité est un outil très pratique.<br/> Je vous propose aujourd'hui le calcul de factorielle : c'est sûrement la fonction récursive la plus connue et aussi la plus codée (il vous suffit de chercher <em>fonction récursive PHP</em> dans Google et vous verrez…), mais elle est loin d'être inutile car il n'existe aucun autre moyen de faire une factorielle en PHP (à part en utilisant la méthode itérative).</p><div id="r-562287" data-claire-element-id="562287" data-claire-semantic="question"><p id="r-562286" data-claire-element-id="562286">Qu'est-ce qu'une factorielle ?</p></div><p id="r-562288" data-claire-element-id="562288">Je reprends la définition de Wikipédia qui me semble simple et claire pour ceux qui ne savent pas ce qu'est une factorielle : <em>la factorielle d'un entier naturel n, notée n!, ce qui se lit soit « factorielle de n » soit « factorielle n », est le produit des nombres entiers strictement positifs inférieurs ou égaux à n</em>.</p><p id="r-562289" data-claire-element-id="562289">La factorielle se présente donc de cette façon : <em>n! = n*(n-1)*(n-2)*…*2*1</em> (les points de suspension illustrent bien la notion d'infini ; et qui dit infini dit récursivité !).</p><p id="r-562290" data-claire-element-id="562290">Calculons par exemple la factorielle de 6 : <em>6! = 6*5*4*3*2*1 = 720</em>.</p><p id="r-562291" data-claire-element-id="562291">Voici maintenant le code nous permettant de calculer une factorielle grâce à une fonction récursive :</p><pre id="r-562292" data-claire-element-id="562292"><code data-claire-semantic="html+php">&lt;?php
function factorielle($nbre)
{
        //Si $nbre = 0 on retourne 1 car soit 1! = 1, soit on est arrivés à la fin du calcul
        if($nbre === 0)
        {
                return 1;
        }
        else //Sinon on retourne le nombre multiplié par le reste de sa factorielle (avec $nbre décrémenté)
        {
                return $nbre*factorielle($nbre-1);
        }
}
 
//On affiche la factorielle de 6
echo factorielle(6);
?&gt;</code></pre><p id="r-562293" data-claire-element-id="562293">Bon, ce n'est pas très difficile à comprendre : à chaque appel de fonction, on vérifie si $nbre n'est pas égal à 0. Si c'est le cas, on stoppe l'exécution de la fonction, sinon on multiplie $nbre par le résultat de la fonction factorielle (qui est donc rappelée) en décrémentant $nbre.</p><h3 id="r-cas-no-2-gestion-de-contenu-listage-de-dossiers" data-claire-element-id="562316">Cas no 2 : gestion de contenu — listage de dossiers</h3><p id="r-562295" data-claire-element-id="562295">Le simple listage d'un dossier ne requiert pas de fonction récursive, mais lorsqu'il s'agit de lister le contenu d'un dossier, contenant un sous-dossier, qui contient lui-même un sous-dossier, et de parcourir toute une arborescence, la méthode récursive s'impose. Nous allons donc essayer de lister avec notre méthode le contenu d'un répertoire sur un FTP. Nous obtiendrons ainsi dans un fichier texte le nom et le chemin de tous les fichiers. Notre fichier texte final se présentera de la sorte :</p><pre id="r-562296" data-claire-element-id="562296"><code>/index.php
/image/img1.jpg
/image/small_img/img2.jpg
/image/small_img/img3.jpg
/image/large_img/img4.jpg</code></pre><p id="r-562297" data-claire-element-id="562297">Merci à <strong>bluestorm</strong> pour son aide à propos de cette fonction. ;) <br/> Je vous donne le code :</p><pre id="r-562298" data-claire-element-id="562298"><code data-claire-semantic="html+php">&lt;?php
function listage($path)
{
        //On déclare le tableau qui contiendra tous les éléments de nos dossiers
        $tableau_elements = array();
 
        //On ouvre le dossier
        $dir = opendir($path);
 
        //Pour chaque élément du dossier...
        while (($element_dossier = readdir($dir)) !== FALSE)
        {
                //Si l'élément est lui-même un dossier (en excluant les dossiers parent et actuel), on appelle la fonction de listage en modifiant la racine du dossier à ouvrir
                if ($element_dossier != '.' &amp;&amp; $element_dossier != '..' &amp;&amp; is_dir($path.'/'.$element_dossier))
                {
                        //On fusionne ici le tableau grâce à la fonction array_merge. Au final, tous les résultats de nos appels récursifs à la fonction listage fusionneront dans le même tableau
                        $tableau_elements = array_merge($tableau_elements, listage($path.'/'.$element_dossier));
                }
                elseif ($element_dossier != '.' &amp;&amp; $element_dossier != '..')
                {
                        //Sinon, l'élément est un fichier : on l'enregistre dans le tableau
                        $tableau_elements[] = $path.'/'.$element_dossier;
                }
        }
        //On ferme le dossier
        closedir($dir);
 
        //On retourne le tableau
        return $tableau_elements;
}
 
//On définit la racine
$path = '.';
 
//Appel à notre fonction
$tableau_elements = Listage($path);
 
//On ouvre un fichier et on y copie le tableau
$file = fopen('./arborescence.txt', 'w+');
fwrite($file, implode($tableau_elements, &quot;\n&quot;));
fclose($file);
?&gt;</code></pre><div id="r-562300" data-claire-element-id="562300" data-claire-semantic="question"><p id="r-562299" data-claire-element-id="562299">Comment ce code de vingt-cinq lignes s'y prend-il pour lister le contenu de nos répertoires ?</p></div><p id="r-562301" data-claire-element-id="562301">Comme d'habitude, il faut examiner le problème pas à pas. Et comme c'est légèrement plus compliqué que dans le cas précédent, je vais vous expliquer cela en détail.<br/> Je ne m'attarderai pas sur les fonctions de traitement des dossiers et des fichiers en PHP. Si vous voulez plus d'explications à ce sujet, rendez-vous dans un tutoriel voisin : <a href="http://www.siteduzero.com/tuto-3-9442-1-lire-et-afficher-le-contenu-d-un-dossier.html">lire et afficher le contenu d'un dossier</a> !</p><p id="r-562302" data-claire-element-id="562302">Voici la manière dont nous procédons.</p><ol id="r-562314" data-claire-element-id="562314"><li id="r-562304" data-claire-element-id="562304"><p id="r-562303" data-claire-element-id="562303">On ouvre le dossier.</p></li><li id="r-562311" data-claire-element-id="562311"><p id="r-562305" data-claire-element-id="562305">On détermine la nature de chaque élément se trouvant à l'intérieur (dossier ou fichier).</p><ul id="r-562310" data-claire-element-id="562310"><li id="r-562307" data-claire-element-id="562307"><p id="r-562306" data-claire-element-id="562306">Si c'est un fichier, on l'enregistre dans notre tableau (qui est une variable statique).</p></li><li id="r-562309" data-claire-element-id="562309"><p id="r-562308" data-claire-element-id="562308">Si c'est un dossier, on fait appel à notre fonction en modifiant la racine afin qu'elle aille lister le contenu de celui-ci (on repart alors au point no 1), etc.</p></li></ul></li><li id="r-562313" data-claire-element-id="562313"><p id="r-562312" data-claire-element-id="562312">Une fois tous les dossiers parcourus, notre fonction retourne le tableau contenant tous les éléments de notre FTP. Nous n'avons plus qu'à l'enregistrer dans un fichier (ici arborescence.txt).</p></li></ol><p id="r-562315" data-claire-element-id="562315">Voilà, c'est une boucle ; ainsi, tant que notre fonction trouvera des sous-dossiers, elle ira les explorer, permettant ainsi de parcourir toute l'arborescence de notre FTP !</p><h3 id="r-cas-no-3-gestion-de-donnees-tabulaires-listage-et-affichage-de-tableaux-multidimensionnels" data-claire-element-id="562344">Cas no 3 : gestion de données tabulaires — listage et affichage de tableaux multidimensionnels</h3><p id="r-562317" data-claire-element-id="562317">Dans ce dernier cas, nous allons voir comment traiter un tableau multidimensionnel afin d'en afficher toutes les entrées hiérarchiquement dans une liste HTML.<br/> Voici la structure de notre tableau :</p><pre id="r-562318" data-claire-element-id="562318"><code data-claire-semantic="html+php">&lt;?php
$tb = array(    'Légumes' =&gt;       array(        'Choux',
                                        'Haricots',
                                        'Épinards'),
                'Fruits' =&gt;     array(       'Agrumes' =&gt;   array(     'Oranges',
                                                                'Clémentines',
                                                                'Citrons'),
                                        'Fruits rouges' =&gt;      array(        'Cassis',
                                                                        'Framboises',
                                                                        'Mûres',
                                                                        'Groseilles'),
                                        'Autres fruits' =&gt;      array(        'Pommes',
                                                                        'Poires')));
 
/* 
Nous cherchons à afficher ceci :
 
Légumes :
        Choux
        Haricots
        Épinards
Fruits :
        Agrumes :
                Oranges
                Clémentines
                Citrons
        Fruits rouges :
                Cassis
                Framboises
                Mûres
                Groseilles
        Autres fruits :
                Pommes
                Poires
*/
?&gt;</code></pre><p id="r-562319" data-claire-element-id="562319">Cette fois-ci, vous allez tenter de coder la fonction vous-mêmes. Pour cela, je vais vous donner quelques indices :</p><ul id="r-562326" data-claire-element-id="562326"><li id="r-562321" data-claire-element-id="562321"><p id="r-562320" data-claire-element-id="562320">on parcourt le tableau grâce à foreach ;</p></li><li id="r-562323" data-claire-element-id="562323"><p id="r-562322" data-claire-element-id="562322">on vérifie si on est en présence d'un tableau avec is_array($value) ;</p></li><li id="r-562325" data-claire-element-id="562325"><p id="r-562324" data-claire-element-id="562324">si c'est un tableau, on réitère la fonction, sinon on ajoute $value à la liste.</p></li></ul><p id="r-562327" data-claire-element-id="562327">Chers amis Zéros, à vos claviers !</p><p id="r-562328" data-claire-element-id="562328">...</p><p id="r-562329" data-claire-element-id="562329">....</p><p id="r-562330" data-claire-element-id="562330">.....</p><p id="r-562331" data-claire-element-id="562331">Pas trop dur ?</p><p id="r-562332" data-claire-element-id="562332">.....</p><p id="r-562333" data-claire-element-id="562333">....</p><p id="r-562334" data-claire-element-id="562334">...</p><p id="r-562335" data-claire-element-id="562335">Voici la correction :</p><pre id="r-562336" data-claire-element-id="562336"><code data-claire-semantic="html+php">&lt;?php
function ListageArray($tb)
{
        //Pour chaque élément du tableau...
        foreach($tb as $key =&gt; $value)
        {
                //Si l'élément est un tableau, on appelle la fonction pour qu'elle le parcoure
                if(is_array($value))
                {
                        echo $key.' :&lt;ul&gt;';
                        ListageArray($value);
                        echo '&lt;/ul&gt;&lt;br /&gt;';
                }
                else //Sinon, c'est un élément à afficher, alors on le liste !
                {
                        echo '&lt;li&gt;'.$value.'&lt;/li&gt;';
                }
        }
}
 
$tb = array(    'Légumes' =&gt;       array(        'Choux',
                                        'Haricots',
                                        'Épinards'),
                'Fruits' =&gt;     array(       'Agrumes' =&gt;   array(     'Oranges',
                                                                'Clémentines',
                                                                'Citrons'),
                                        'Fruits rouges' =&gt;      array(        'Cassis',
                                                                        'Framboises',
                                                                        'Mûres',
                                                                        'Groseilles'),
                                        'Autres fruits' =&gt;      array(        'Pommes',
                                                                        'Poires')));
ListageArray($tb);
 
?&gt;</code></pre><p id="r-562337" data-claire-element-id="562337">J'espère que vous aviez réussi à coder cette fonction !<br/> Je ne réexplique pas étant donné que c'est sensiblement la même chose que pour le listage de dossiers. :)</p><p id="r-562338" data-claire-element-id="562338">Ce tutoriel est maintenant terminé !</p><p id="r-562339" data-claire-element-id="562339">N'ayant pas réussi à trouver de bonnes questions à vous poser, j'ai préféré m'abstenir plutôt que de vous servir un QCM sans intérêt.</p><p id="r-562340" data-claire-element-id="562340">Avec ces bases, vous devriez être capables de comprendre les scripts contenant des fonctions récursives présents sur le Net, et également d'en élaborer quelques-uns. ^^</p><p id="r-562341" data-claire-element-id="562341">On ne se rend pas compte du nombre de codes pouvant faire appel à des fonctions récursives ; je pense notamment aux moteurs de <em>templates</em>, aux opérations sur les dossiers, ou encore pour effectuer des analyses comme la résolution de Sudokus ou de labyrinthes (cf. concours)…<br/> Il ne vous reste maintenant plus qu'à bosser un peu pour écrire de belles fonctions !</p><p id="r-562342" data-claire-element-id="562342">Ce tutoriel n'avait pas pour vocation de vous apprendre <em>tout sur tout</em> à propos de la récursivité, ce n'est bien sûr qu'une initiation. Mais j'espère qu'il vous aura enseigné quelque chose d'utile, et si c'est le cas, vous m'en verrez très satisfait !<br/> Je vous invite donc à laisser vos commentaires et une note pour que je puisse connaître vos impressions. ;)</p><p id="r-562343" data-claire-element-id="562343">Bon codage ! :p</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation">Initiation à la récursivité en PHP : notions, mise en œuvre et utilisation</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/notion-de-recursivite">
Notion de récursivité
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/mise-en-oeuvre-de-la-recursivite-en-php-et-variables-statiques">
Mise en œuvre de la récursivité en PHP, et variables statiques
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/utilisation-de-la-recursivite-dans-nos-codes">
Utilisation de la récursivité dans nos codes
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation/mise-en-oeuvre-de-la-recursivite-en-php-et-variables-statiques">
<span class="arrow"></span>
<span class="next">Mise en œuvre de la récursivité en PHP, et variables statiques</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 11:05:02 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/initiation-a-la-recursivite-en-php-notions-mise-en-oeuvre-et-utilisation.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:47:16 GMT -->
</html>