<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/debuter-dans-l-informatique-embarquee-avec-teensy.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:12:40 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/debuter-dans-l-informatique-embarquee-avec-teensy.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:31:33 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Débuter dans l&#039;informatique embarquée avec Teensy</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Débuter dans l&#039;informatique embarquée avec Teensy</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Dbuterdansl039informatiqueembarqueavecTeensy">Débuter dans l&#039;informatique embarquée avec Teensy</a><br/><a href="#Prsentationdel039informatiqueembarqueetdeTeensy">Présentation de l&#039;informatique embarquée et de Teensy</a><br/><a href="#Installationd039arduino">Installation d&#039;arduino</a><br/><a href="#Premierprogramme">Premier programme</a><br/><a href="#Entre_sortienumrique">Entrée/sortie numérique</a><br/><a href="#Portsrie">Port série</a><br/><a href="#Interruption">Interruption</a><br/><a href="#AnnexeQuelquescomposantsutiles">[Annexe] Quelques composants utiles</a><br/></div>
<a name="Dbuterdansl039informatiqueembarqueavecTeensy"></a><h2>Débuter dans l&#039;informatique embarquée avec Teensy</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
<span class="next">Présentation de l&#039;informatique embarquée et de Teensy</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-210965" data-claire-element-id="210965">Ce tutoriel couvre les bases de l'informatique embarquée en utilisant un module teensy, présentée dans le premier chapitre.</p>
</div><a name="Prsentationdel039informatiqueembarqueetdeTeensy"></a><h2>Présentation de l&#039;informatique embarquée et de Teensy</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
<span class="next">Installation d&#039;arduino</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-210966" data-claire-element-id="210966">Que vous ayez ou pas entendu ces mots : &quot;informatique embarquée&quot;, vous pouvez être sûr d'en avoir déjà utilisé : sous ce nom barbare se cache les systèmes contenus dans des objets comme : un téléphone, une voiture, un PDA, un routeur, une console de jeu ... mais aussi une machine à laver, un four micro-onde, un pacemaker...</p><p id="r-210967" data-claire-element-id="210967">A l'intérieur de ces appareils se trouve souvent une carte que l'on pourrait comparer à une carte mère en informatique traditionnelle. Il en existe de toutes les tailles &amp; forme :</p><p id="r-210968" data-claire-element-id="210970"><a href="medias/uploads.siteduzero.com_files_256001_257000_256009.jpg"><img id="r-210969" data-claire-element-id="210968" src="medias/uploads.siteduzero.com_thb_256001_257000_256009.jpg" alt="Friendly ARM"/></a><a href="medias/uploads.siteduzero.com_files_256001_257000_256011.jpg"><img id="r-210970" data-claire-element-id="210969" src="medias/uploads.siteduzero.com_thb_256001_257000_256011.jpg" alt="Carte AVR"/></a></p><p id="r-210971" data-claire-element-id="210971">...</p><p id="r-210972" data-claire-element-id="210972">Nous allons ici nous intéresser aux cartes Teensy, dont voici un aperçu :</p><table id="r-210982" data-claire-element-id="210982"><tbody id="r-210981" data-claire-element-id="210981"><tr id="r-210976" data-claire-element-id="210976"><td id="r-210975" data-claire-element-id="210975"><p id="r-210973" data-claire-element-id="210974">Carte teensy 2.0 ++<a href="medias/uploads.siteduzero.com_files_246001_247000_246339.jpg"><img id="r-210974" data-claire-element-id="210973" src="medias/uploads.siteduzero.com_thb_246001_247000_246339.jpg" alt="Image utilisateur"/></a></p></td></tr><tr id="r-210980" data-claire-element-id="210980"><td id="r-210979" data-claire-element-id="210979"><p id="r-210977" data-claire-element-id="210978">Carte Teensy 2.0<br/><a href="medias/uploads.siteduzero.com_files_246001_247000_246338.jpg"><img id="r-210978" data-claire-element-id="210977" src="medias/uploads.siteduzero.com_thb_246001_247000_246338.jpg" alt="Image utilisateur"/></a><br/><em>Pour donner un ordre d'idée, celle-ci tient sur la dernière phalange de mon pouce.</em></p></td></tr></tbody></table><p id="r-210983" data-claire-element-id="210983">La puce noire que vous voyez au centre de chacune de ces cartes est un processeur AVR. Comparativement, celui de votre PC est plusieurs milliers de fois plus puissants. Vous avez certainement remarqué le port USB à gauche : il va servir à flasher (programmer) la carte ; Il pourra aussi nous servir occasionnellement comme interface avec l'ordinateur. Enfin, les trous numérotés de part et d'autre de la carte ne sont pas juste de fixation : ce sont des contacts électroniques, qui permettent au teensy d'interagir avec le monde extérieur.</p><p id="r-210984" data-claire-element-id="210984">Vous l'aurez certainement deviné, il est plus courant d'utiliser un teensy pour mener à bien un projet, que d'adapter son projet pour y inclure ce composant : je vous conseille donc d'avoir une idée de ce que vous voulez faire avec (Pas d'idée ? Sachez que même avec un minimum d'effort, votre PC pourra effectivement commander votre cafetière :D Avis aux amateurs !).</p><h2 id="r-programmer-sur-une-carte-teensy" data-claire-element-id="210987">Programmer sur une carte teensy</h2><p id="r-210985" data-claire-element-id="210985">Il existe deux possibilités pour programmer sur une carte Teensy : utiliser un crosscompilateur AVR, ou un environnement dédié Arduino. j'ai choisi la seconde solution, parce qu'elle est plus facile pour une première expérience de ce genre de carte d'interface, mais elle présente des défauts (pas de possibilité d'utiliser l'USB à pleine vitesse).</p><p id="r-210986" data-claire-element-id="210986">Il vous faudra donc maitriser les bases du C/C++ (au moins les deux premières parties du <a href="http://www.siteduzero.com/tutoriel-3-14189-apprenez-a-programmer-en-c.html">tuto officiel C</a>).</p><h2 id="r-se-procurer-une-carte-teensy" data-claire-element-id="210989">Se procurer une carte teensy</h2><p id="r-210988" data-claire-element-id="210988">Une seule destination, <a href="http://www.pjrc.com/teensy/index.html">le site du fabriquant</a> :) Je vous conseille si vous débutez de prendre <a href="http://www.pjrc.com/store/teensy.html">la plus petite</a>, à 16 $.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy">Débuter dans l&#039;informatique embarquée avec Teensy</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
Présentation de l&#039;informatique embarquée et de Teensy
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
Installation d&#039;arduino
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
Entrée/sortie numérique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
Port série
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
Interruption
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/annexe-quelques-composants-utiles">
[Annexe] Quelques composants utiles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
<span class="next">Installation d&#039;arduino</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Installationd039arduino"></a><h2>Installation d&#039;arduino</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
<span class="arrow"></span>
<span class="next">Présentation de l&#039;informatique embarquée et de Teensy</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
<span class="next">Premier programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-210991" data-claire-element-id="210991">Téléchargez la dernière version de l'environnement <strong>Arduino</strong> à cette adresse : <a href="http://arduino.cc/en/Main/Software">arduino.cc</a>. Si vous êtes sous Windows, le programme sera distribué sous forme de fichier zip. Décompressez-le dans le dossier de votre choix, évitez cependant qu'un espace soit présent dans le chemin du dossier.</p><p id="r-210992" data-claire-element-id="210992">Vous aurez ensuite besoin du programme <strong>Teensy Loader</strong>, disponible à <a href="http://www.pjrc.com/teensy/loader.html">cette adresse</a>. Choisissez la version correcte selon votre système d'exploitation. Je vous conseille d'enregistrer le fichier exécutable dans le même dossier qu'Arduino.</p><p id="r-210993" data-claire-element-id="210993">Enfin, la dernière étape est l'installation du plugin <strong>Teensyduino</strong> pour Arduino, qui permet de programmer le Teensy directement depuis l'IDE arduino. Vous pourrez le récupérer <a href="http://www.pjrc.com/teensy/td_download.html">par ici</a>. Lors de son installation, on vous demandera où vous avez installé Arduino : indiquez le dossier (qui doit être sous la forme <em>arduino_XXX</em>).</p><p id="r-210994" data-claire-element-id="210994">Pour pouvoir tester la carte, nous aurons besoin de <a href="http://www.pjrc.com/teensy/blink_both.zip">ces fichiers</a> de test. Extrayez-les où bon vous semble, nous en aurons besoin bientôt.</p><h2 id="r-test-de-l-installation" data-claire-element-id="211004">Test de l'installation</h2><p id="r-210995" data-claire-element-id="210995">Branchez votre teensy par le port USB : si c'est la première fois que vous l'utilisez, la diode devrait clignoter lentement. Ouvrez le programme <strong>teensy loader</strong> (L'exécutable s'appelle très probablement <strong>teensy.exe</strong>) :</p><figure id="r-210997" data-claire-element-id="210998"><img id="r-210996" data-claire-element-id="210996" src="medias/uploads.siteduzero.com_files_246001_247000_246348.png" alt="Image utilisateur"/></figure><p id="r-210999" data-claire-element-id="210999">Cliquez sur le premier bouton : une fenêtre de sélection de fichiers s'ouvrira. Choisissez, dans les fichiers de texte que je vous ai fait télécharger, <strong>blink_fast.hex</strong>. Appuyer ensuite sur le bouton de votre teensy (si, sous windows, une fenêtre vous demande quoi que ce soit pour des driver, ne faites rien ou annulez). La fenêtre du teensy loader devrait ressembler à cela :</p><figure id="r-211001" data-claire-element-id="211002"><img id="r-211000" data-claire-element-id="211000" src="medias/uploads.siteduzero.com_files_246001_247000_246350.png" alt="Image utilisateur"/></figure><p id="r-211003" data-claire-element-id="211003">Vous pouvez maintenant appuyer sur le deuxième bouton (&quot;program&quot;) puis le troisième (&quot;reboot&quot;) : votre teensy clignote maintenant plus rapidement ! Nous avons, grâce au <strong>Teensy Loader</strong>, flashé (reprogrammé) le teensy. Plus que quelques clics et vous pourrez programmer.</p><h2 id="r-arduino-1" data-claire-element-id="211010">Arduino</h2><p id="r-211005" data-claire-element-id="211005">Gardez le <strong>Teensy Loader</strong> ouvert, puis lancez <strong>Arduino</strong>(arduino.exe). Voici l'interface. J'ai indiqué les boutons à retenir.</p><figure id="r-211007" data-claire-element-id="211008"><img id="r-211006" data-claire-element-id="211006" src="medias/uploads.siteduzero.com_files_246001_247000_246352.png" alt="Image utilisateur"/></figure><p id="r-211009" data-claire-element-id="211009">Encore un dernier réglage : dans le menu <strong>Tools</strong>&gt;&gt;<strong>Board</strong>, choisissez votre teensy : 2.0 ou 2.0 ++.</p><h2 id="r-utiliser-arduino" data-claire-element-id="211019">Utiliser Arduino</h2><p id="r-211011" data-claire-element-id="211011">La grande zone de texte au centre de l'IDE est l'endroit où vous écrirez votre code. La console au bas de l'écran vous affichera les erreurs. Vous devez garder Teensy Loader ouvert durant l'utilisation de Arduino, de même laissez votre carte teensy branchée.</p><p id="r-211012" data-claire-element-id="211012">Nous allons tester l'IDE : entrez le programme suivant ci-dessous . Prenez garde à adapter la première ligne de code :</p><pre id="r-211013" data-claire-element-id="211013"><code data-claire-semantic="c">int ledPin =  11;    // Tensy 2.0, mettez 11
                     // Teensy 2++ : mettez 6


void setup()   {
  pinMode(ledPin, OUTPUT);     
}

void loop()                     
{
  digitalWrite(ledPin, HIGH);
  delay(1000);
  digitalWrite(ledPin, LOW);
  delay(1000);
}</code></pre><p id="r-211014" data-claire-element-id="211014">Pressez le bouton &quot;Compile&quot; (symbole &quot;Play&quot;). Une fois le message :</p><pre id="r-211015" data-claire-element-id="211015"><code data-claire-semantic="console">Binary sketch size: 2298 bytes (of a 32256 byte maximum)</code></pre><p id="r-211016" data-claire-element-id="211016">apparu dans la console, mettez la fenêtre Teensy loader au premier plan : appuyez sur le bouton de votre carte Teensy : après quelques secondes, vous devriez voir votre teensy clignoter lentement, une illumination par seconde.</p><aside id="r-211018" data-claire-element-id="211018" data-claire-semantic="warning"><p id="r-211017" data-claire-element-id="211017">Si vous rencontrez des problèmes sous linux, essayer de lancer Teensy Loader en root.</p></aside>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy">Débuter dans l&#039;informatique embarquée avec Teensy</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
Présentation de l&#039;informatique embarquée et de Teensy
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
Installation d&#039;arduino
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
Entrée/sortie numérique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
Port série
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
Interruption
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/annexe-quelques-composants-utiles">
[Annexe] Quelques composants utiles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
<span class="arrow"></span>
<span class="next">Présentation de l&#039;informatique embarquée et de Teensy</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
<span class="next">Premier programme</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Premierprogramme"></a><h2>Premier programme</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
<span class="arrow"></span>
<span class="next">Installation d&#039;arduino</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
<span class="next">Entrée/sortie numérique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-211021" data-claire-element-id="211021">Dans chaque programme, vous retrouverez au moins 2 fonctions : <strong>setup</strong> et <strong>loop</strong>. la première s'exécute une fois, au début de l'exécution du programme. Elle est souvent utilisée pour initialiser les variables et le matériel. La fonction loop est appelée en boucle une fois que la fonction <strong>setup</strong> est terminée. Vous pouvez bien sûr créer les fonctions que vous souhaitez en plus de celle-ci.</p><p id="r-211022" data-claire-element-id="211022">Le programme minimal qui-fait-rien est donc celui-ci :</p><pre id="r-211023" data-claire-element-id="211023"><code data-claire-semantic="c">void setup()   {    
// Exécuté une fois
}

void loop()                     
{
// Exécuté en boucle
}</code></pre><p id="r-211024" data-claire-element-id="211024">Envoyez-le sur votre carte.</p><h2 id="r-materiel-conseille" data-claire-element-id="211035">Matériel conseillé</h2><p id="r-211025" data-claire-element-id="211025">Lors des prochains chapitres, nous allons utiliser pleinement le Teensy, ce qui requiert un minimum de matériel :</p><ul id="r-211032" data-claire-element-id="211032"><li id="r-211027" data-claire-element-id="211027"><p id="r-211026" data-claire-element-id="211026">Du fil électrique monobrin (c'est plus pratique), pour utiliser les contacts/trous</p></li><li id="r-211029" data-claire-element-id="211029"><p id="r-211028" data-claire-element-id="211028">Un multimètre (très pratique pour le débogage)</p></li><li id="r-211031" data-claire-element-id="211031"><p id="r-211030" data-claire-element-id="211030">Des DEL 1.2V classiques avec des résistances (la tension typique utilisée par Teensy est de l'ordre de 5 volts).</p></li></ul><aside id="r-211034" data-claire-element-id="211034" data-claire-semantic="information"><p id="r-211033" data-claire-element-id="211033">Si vous disposez d'un oscilloscope, il remplacera avantageusement le multimètre à condition de savoir s'en servir, mais il n'est nullement nécessaire à vos débuts.</p></aside><h2 id="r-documentation-2" data-claire-element-id="211037">Documentation</h2><p id="r-211036" data-claire-element-id="211036">Vous pourrez trouvez, en plus de ce tutoriel, la documentation complète à cette adresse :<br/><a href="http://arduino.cc/en/Reference/HomePage">http://arduino.cc/en/Reference/HomePage</a> (anglais)<br/><a href="http://arduino.cc/fr/Main/Reference">http://arduino.cc/fr/Main/Reference</a> (francais)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy">Débuter dans l&#039;informatique embarquée avec Teensy</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
Présentation de l&#039;informatique embarquée et de Teensy
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
Installation d&#039;arduino
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
Entrée/sortie numérique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
Port série
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
Interruption
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/annexe-quelques-composants-utiles">
[Annexe] Quelques composants utiles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
<span class="arrow"></span>
<span class="next">Installation d&#039;arduino</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
<span class="next">Entrée/sortie numérique</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Entre_sortienumrique"></a><h2>Entrée/sortie numérique</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
<span class="arrow"></span>
<span class="next">Premier programme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
<span class="next">Port série</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-211039" data-claire-element-id="211039">Il est temps pour les entrées/sorties numériques d'entrer en action ! (il s'agit des &quot;trous numérotés&quot;) Arduino n'utilise pas la même notation que le constructeur pour nommer ces trous (que je nommerais maintenant de leur nom anglais : <strong>pin</strong>). Voici donc des schémas très précieux qui font correspondre chaque trou physique à un numéro utilisé par arduino. Je vous conseille de garder sous les yeux :</p><figure id="r-211041" data-claire-element-id="211042"><img id="r-211040" data-claire-element-id="211040" src="medias/uploads.siteduzero.com_files_246001_247000_246358.png" alt="Image utilisateur"/></figure><figure id="r-211044" data-claire-element-id="211045"><img id="r-211043" data-claire-element-id="211043" src="medias/uploads.siteduzero.com_files_246001_247000_246357.png" alt="Image utilisateur"/></figure><p id="r-211046" data-claire-element-id="211046">Nous allons maintenant réexaminer le programme de test que vous avez utilisé sans comprendre au chapitre précédent :</p><pre id="r-211047" data-claire-element-id="211047"><code data-claire-semantic="c">int ledPin =  11;    //tensy 2: 11 Teensy 2++ : 6


void setup()   {
  pinMode(ledPin, OUTPUT);     
}

void loop()                     
{
  digitalWrite(ledPin, HIGH);
  delay(1000);
  digitalWrite(ledPin, LOW);
  delay(1000);
}</code></pre><p id="r-211048" data-claire-element-id="211048">La ligne 1 est des plus simples : nous affectons une variable de type int nommée <strong>ledPin</strong>. Prenez le temps de changer sa valeur selon votre carte.</p><p id="r-211049" data-claire-element-id="211049">L'instruction exotique suivante est :</p><pre id="r-211050" data-claire-element-id="211050"><code data-claire-semantic="c">pinMode(ledPin, OUTPUT);</code></pre><p id="r-211051" data-claire-element-id="211051">Cette instruction initialise la pin passée en premier argument selon le comportement donné en deuxième argument.<br/> J'ai utilisé ledpin comme premier argument : j'aurai pu faire directement <code data-claire-semantic="c">pinMode(13, OUTPUT); </code>. Vous pouvez à tout instant changer le mode d'une pin.</p><p id="r-211052" data-claire-element-id="211052">Les différents modes sont :</p><table id="r-211064" data-claire-element-id="211064"><tbody id="r-211063" data-claire-element-id="211063"><tr id="r-211057" data-claire-element-id="211057"><td id="r-211054" data-claire-element-id="211054"><p id="r-211053" data-claire-element-id="211053"><strong>INPUT</strong></p></td><td id="r-211056" data-claire-element-id="211056"><p id="r-211055" data-claire-element-id="211055">La pin pourra recevoir des données. Vous ne pourrez pas effectuer d'écriture dessus.</p></td></tr><tr id="r-211062" data-claire-element-id="211062"><td id="r-211059" data-claire-element-id="211059"><p id="r-211058" data-claire-element-id="211058"><strong>OUTPUT</strong></p></td><td id="r-211061" data-claire-element-id="211061"><p id="r-211060" data-claire-element-id="211060">La pin servira à la sortie (à l'écriture). Pas de lecture.</p></td></tr></tbody></table><p id="r-211065" data-claire-element-id="211065">La deuxième instruction cryptique est :</p><pre id="r-211066" data-claire-element-id="211066"><code data-claire-semantic="c">digitalWrite(ledPin, HIGH);</code></pre><p id="r-211067" data-claire-element-id="211067">Il s'agit d'une instruction permettant d'écrire sur une pin passée en premier argument. Les pins ne peuvent prendre que 2 états : il s'agit de sorties numériques et non analogiques (nous les verrons plus tard). L'état HIGH correspond au 1 binaire, LOW au 0. En matière de tension, il s'agit respectivement de +5V et 0V.</p><p id="r-211068" data-claire-element-id="211068">L'instruction <strong>delay()</strong> est tout simplement une demande d'attente en millisecondes.</p><p id="r-211069" data-claire-element-id="211069">Ainsi, ce programme va faire clignoter la LED du teensy : la PIN 11 (ou 6, selon modèle) est reliée à celle ci.</p><figure id="r-211071" data-claire-element-id="211072"><img id="r-211070" data-claire-element-id="211070" src="medias/uploads.siteduzero.com_files_256001_257000_256024.png" alt="Image utilisateur"/></figure><h2 id="r-lecture-de-valeur" data-claire-element-id="211081">Lecture de valeur</h2><p id="r-211073" data-claire-element-id="211073">Voici un autre programme :</p><pre id="r-211074" data-claire-element-id="211074"><code data-claire-semantic="c">int ledPin =  11;    //tensy 2: 11 Teensy 2++ : 6
int inPin = 7;
int val = 0;

void setup()
{
  pinMode(ledPin, OUTPUT);
  pinMode(inPin, INPUT);
}

void loop()
{
  val = digitalRead(inPin); 
  digitalWrite(ledPin, val);
}</code></pre><p id="r-211075" data-claire-element-id="211075">La seule instruction inconnue est <strong>digitalRead</strong>. Elle prend comme argument une pin, et renvoie sa valeur, qui peut être égale à la macro HIGH ou LOW.</p><p id="r-211076" data-claire-element-id="211076">Essayer de penser au programme, trouver ce qu'il fait. Ensuite, ouvrez le volet ci-dessous pour avoir une explication. (Vous pouvez bien entendu le faire fonctionner sur votre teensy.)</p><p id="r-211077" data-claire-element-id="211077"></p><div id="r-211079" data-claire-element-id="211080"><img id="r-211080" data-claire-element-id="211079" src="medias/uploads.siteduzero.com_files_256001_257000_256027.png" alt="Image utilisateur"/><p id="r-211078" data-claire-element-id="211078">Le programme lit la valeur de la pin 7 (inPin), puis passe cette valeur à la pin 11 ou 6, selon votre définition de ledPin. Ainsi, le statut de 7 sera répercuté sur la led. Pour allumer la led, vous pouvez brancher la pin 7 à une pin +5V</p></div>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy">Débuter dans l&#039;informatique embarquée avec Teensy</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
Présentation de l&#039;informatique embarquée et de Teensy
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
Installation d&#039;arduino
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
Premier programme
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
Entrée/sortie numérique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
Port série
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
Interruption
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/annexe-quelques-composants-utiles">
[Annexe] Quelques composants utiles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
<span class="arrow"></span>
<span class="next">Premier programme</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
<span class="next">Port série</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Portsrie"></a><h2>Port série</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
<span class="arrow"></span>
<span class="next">Entrée/sortie numérique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
<span class="next">Interruption</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-211083" data-claire-element-id="211083">Les teensy possèdent un port série simulé.</p><aside id="r-211085" data-claire-element-id="211085" data-claire-semantic="information"><p id="r-211084" data-claire-element-id="211084">Si vous utilisez windows, vous devrez installer le driver situé sur <a href="http://www.pjrc.com/teensy/serial_install.exe">cette page</a>. Validez le processus si on vous le demande.</p></aside><p id="r-211086" data-claire-element-id="211086">Le port série est un objet. Ainsi, pour démarrer une connexion :</p><pre id="r-211087" data-claire-element-id="211087"><code data-claire-semantic="cpp">Serial.begin(9600);</code></pre><p id="r-211088" data-claire-element-id="211088">L'objet représentant le port série est Serial. Nous lui avons demandé de lancer la communication à 9600 bauds. Vous pouvez ouvrir le moniteur série Arduino, et vérifier que vous avez bien la même valeur (si ce n'est pas le cas, changez-la pour 9600).</p><p id="r-211089" data-claire-element-id="211089">On peut ensuite envoyer des lignes de texte sur la liaison série :</p><pre id="r-211090" data-claire-element-id="211090"><code data-claire-semantic="c">Serial.println(&quot;Hello Computer&quot;); // println() ajoute le \n final
Serial.print(&quot;Hello Computer\n&quot;); // La même chose avec print()</code></pre><p id="r-211091" data-claire-element-id="211091">Essayez le programme suivant :</p><p id="r-211092" data-claire-element-id="211092">Compilez le programme, appuyez sur le bouton, attendez son chargement. Dans l'IDE, choisissez le port COM correspondant à votre teensy (habituellement, sous windows, c'est COM2 ou COM4, cela dépend grandement de votre PC. De même pour Linux ou les ports sont de la forme /dev/ttyUSBx). Ouvrez ensuite le serial monitor :</p><pre id="r-211093" data-claire-element-id="211093"><code data-claire-semantic="console">Tutorial by Nomaintener
Hello from teensy !
Tutorial by Nomaintener
Hello from teensy !
Tutorial by Nomaintener
Hello from teensy !
Tutorial by Nomaintener
Hello from teensy !
Tutorial by Nomaintener
Hello from teensy !</code></pre><p id="r-211094" data-claire-element-id="211094">print() et println() fonctionnent comme printf() , vous pouvez passer des arguments en plus pour afficher par exemple des variables :</p><pre id="r-211095" data-claire-element-id="211095"><code data-claire-semantic="c">int i = 0;

void setup()   {
  Serial.begin(9600);
}

void loop()                     
{  
  while(1)
  {
    Serial.println(&quot;La variable i vaut %d&quot;,i);
    delay(1000);
    ++i;
  }
}</code></pre><aside id="r-211097" data-claire-element-id="211097" data-claire-semantic="information"><p id="r-211096" data-claire-element-id="211096">Notez que chaque sortie série sur le teensy doit être suivi d'un délai d'environ 200 millisecondes. En effet, le port série simulé du teensy fonctionne à la même vitesse que de l'USB (~8mb/seconde), ce qui pose des problèmes à l'IDE arduino qui ne supporte pas ces débits trop rapides.</p></aside><h2 id="r-reception-serie" data-claire-element-id="211106">Réception série</h2><p id="r-211098" data-claire-element-id="211098">Toujours via l'objet Serial, vous pouvez recevoir des données. Cependant, celles-ci n'arrivent pas à intervalle fixe : vous devez vérifier s'il en arrive via <code data-claire-semantic="cpp">Serial.available() </code>. Cette fonction renvoie le nombre d'octets disponibles pour lecture. Le squelette de programme lisant la liaison série est donc :</p><pre id="r-211099" data-claire-element-id="211099"><code data-claire-semantic="c">void setup() {
  Serial.begin(9600);
}

void loop() {
  if (Serial.available() &gt; 0)
  {

  }
}</code></pre><p id="r-211100" data-claire-element-id="211100">Mais nous ne lisons encore rien : lisons le dernier octet disponible, et stockons le dans une variable :</p><pre id="r-211101" data-claire-element-id="211101"><code data-claire-semantic="c">int lastByte;

void setup() {
  Serial.begin(9600);
}

void loop() {
  if (Serial.available() &gt; 0)
  {
    lastByte = Serial.read();
  }
}</code></pre><p id="r-211102" data-claire-element-id="211102">Mais nous pouvons encore faire mieux ! Lire le caractère :</p><pre id="r-211103" data-claire-element-id="211103"><code data-claire-semantic="c">int lastByte;

void setup() {
  Serial.begin(9600);
}

void loop() {
  if (Serial.available() &gt; 0)
  {
    lastByte = Serial.read();
    if (lastByte == 'L') {
      Serial.println(&quot;Vous avez envoyé un L !&quot;);
    }
  }
}</code></pre><p id="r-211104" data-claire-element-id="211104">Dès que la lettre L est envoyée, la condition est réalisée, nous imprimons donc une phrase pleine de bon sens :-°</p><p id="r-211105" data-claire-element-id="211105">Vous voici donc doté de la capacité très pratique de communiquer avec le PC.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy">Débuter dans l&#039;informatique embarquée avec Teensy</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
Présentation de l&#039;informatique embarquée et de Teensy
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
Installation d&#039;arduino
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
Entrée/sortie numérique
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
Port série
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
Interruption
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/annexe-quelques-composants-utiles">
[Annexe] Quelques composants utiles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
<span class="arrow"></span>
<span class="next">Entrée/sortie numérique</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
<span class="next">Interruption</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Interruption"></a><h2>Interruption</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
<span class="arrow"></span>
<span class="next">Port série</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/annexe-quelques-composants-utiles">
<span class="next">[Annexe] Quelques composants utiles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-211108" data-claire-element-id="211108">Les interruptions sont utiles pour traiter les données lors de leurs arrivées, sans perdre ni temps ni données. Prenons l'exemple d'un bouton poussoir : pour être sûrs de ne manquer aucune pression, nous pourrions lire en boucle la pin correspondante. Malheureusement, cela ne suffit pas : si le programme effectue une autre opération, il est possible qu'il perde trace de certains appuis. Les interruptions sont aussi une solution plus élégante à ce problème : lorsqu'une pin d'interruption change d'état, le flot d'exécution principal est interrompu, une fonction spécifique est lancée, et l'exécution reprend juste après le retour de celle-ci.</p><p id="r-211109" data-claire-element-id="211109">Seule certaines pins sont susceptibles de déclencher des interruptions : elles sont notées INTx (x allant de 0 à 3) sur le schéma des pin :</p><figure id="r-211111" data-claire-element-id="211112"><img id="r-211110" data-claire-element-id="211110" src="medias/uploads.siteduzero.com_files_246001_247000_246358.png" alt="Image utilisateur"/></figure><figure id="r-211114" data-claire-element-id="211115"><img id="r-211113" data-claire-element-id="211113" src="medias/uploads.siteduzero.com_files_246001_247000_246357.png" alt="Image utilisateur"/></figure><p id="r-211116" data-claire-element-id="211116">Pour mieux comprendre, voici un programme simple mais complet :</p><pre id="r-211117" data-claire-element-id="211117"><code data-claire-semantic="cpp">int pin = 13;
volatile int state = LOW;

void setup()
{
  pinMode(pin, OUTPUT);
  attachInterrupt(0, blink, CHANGE);
}

void loop()
{
  digitalWrite(pin, state);
}

void blink()
{
  state = !state;
}</code></pre><p id="r-211118" data-claire-element-id="211118">Si vous exécutez ce code, vous constaterez que tout changement dans l'alimentation de la pin INT0 entrainera le changement d'état de la diode.</p><p id="r-211119" data-claire-element-id="211119">L'instruction à retenir est <code data-claire-semantic="cpp">attachInterrupt(0, blink, CHANGE); </code> : elle permet d'associer une fonction (blink, recu en deuxième argument) avec une pin d'interruption (le 0 du premier argument signifie INT0), suivant un mode particulier (l'interruption sera déclenchée lors d'un changement, comme le précise le mot clé CHANGE).</p><p id="r-211120" data-claire-element-id="211120">Selon la situation, différents modes de déclenchement de l'interruption sont disponibles :</p><table id="r-211148" data-claire-element-id="211148"><thead id="r-211126" data-claire-element-id="211126"><tr id="r-211125" data-claire-element-id="211125"><th id="r-211122" data-claire-element-id="211122"><p id="r-211121" data-claire-element-id="211121">Mode (3ème argument de attachInterrupt)</p></th><th id="r-211124" data-claire-element-id="211124"><p id="r-211123" data-claire-element-id="211123">Description</p></th></tr></thead><tbody id="r-211147" data-claire-element-id="211147"><tr id="r-211131" data-claire-element-id="211131"><td id="r-211128" data-claire-element-id="211128"><p id="r-211127" data-claire-element-id="211127"><strong>LOW</strong></p></td><td id="r-211130" data-claire-element-id="211130"><p id="r-211129" data-claire-element-id="211129">L'interruption sera déclenché si la pin est dans l'état LOW</p></td></tr><tr id="r-211136" data-claire-element-id="211136"><td id="r-211133" data-claire-element-id="211133"><p id="r-211132" data-claire-element-id="211132"><strong>CHANGE</strong></p></td><td id="r-211135" data-claire-element-id="211135"><p id="r-211134" data-claire-element-id="211134">L'interruption sera déclenché si la pin change d'état (de LOW à HIGH ou le contraire)</p></td></tr><tr id="r-211141" data-claire-element-id="211141"><td id="r-211138" data-claire-element-id="211138"><p id="r-211137" data-claire-element-id="211137"><strong>RISING</strong></p></td><td id="r-211140" data-claire-element-id="211140"><p id="r-211139" data-claire-element-id="211139">L'interruption sera déclenché si la pin passe de l'état LOW à HIGH</p></td></tr><tr id="r-211146" data-claire-element-id="211146"><td id="r-211143" data-claire-element-id="211143"><p id="r-211142" data-claire-element-id="211142"><strong>FALLING</strong></p></td><td id="r-211145" data-claire-element-id="211145"><p id="r-211144" data-claire-element-id="211144">L'interruption sera déclenché si la pin passe de l'état HIGH à LOW</p></td></tr></tbody></table><aside id="r-211150" data-claire-element-id="211150" data-claire-semantic="information"><p id="r-211149" data-claire-element-id="211149">La fonction <code data-claire-semantic="cpp">detachInterrupt(NumeroDePin) </code> de détacher (supprimer) l'association réalisée par attachInterrupt. Celle ci est définitivement perdue. Autrement, il est possible de les désactiver globalement via noInterrupts() et de les réactiver via interrupts(). Cependant, cette opération n'est pas anodine : nombre de fonctions (notamment, la liaison série) ont un comportement indéfini si les interruptions sont désactivées.</p></aside><h2 id="r-remarques-1" data-claire-element-id="211157">Remarques</h2><ul id="r-211156" data-claire-element-id="211156"><li id="r-211153" data-claire-element-id="211153"><p id="r-211151" data-claire-element-id="211151">Les variables susceptibles d'être modifiées ou lues lors d'une interruption doivent être déclarées <code data-claire-semantic="cpp">volatile </code> :</p><pre id="r-211152" data-claire-element-id="211152"><code data-claire-semantic="cpp">volatile int state = LOW;</code></pre></li><li id="r-211155" data-claire-element-id="211155"><p id="r-211154" data-claire-element-id="211154">De par la nature des interruptions, les fonctions à caractère temporel (<code data-claire-semantic="cpp">delay() </code> et <code data-claire-semantic="cpp">millis() </code>) ne fonctionneront pas pendant une interruption.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy">Débuter dans l&#039;informatique embarquée avec Teensy</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
Présentation de l&#039;informatique embarquée et de Teensy
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
Installation d&#039;arduino
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
Entrée/sortie numérique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
Port série
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
Interruption
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/annexe-quelques-composants-utiles">
[Annexe] Quelques composants utiles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
<span class="arrow"></span>
<span class="next">Port série</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/annexe-quelques-composants-utiles">
<span class="next">[Annexe] Quelques composants utiles</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="AnnexeQuelquescomposantsutiles"></a><h2>[Annexe] Quelques composants utiles</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
<span class="arrow"></span>
<span class="next">Interruption</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-211159" data-claire-element-id="211159">Je vais présenter dans cette annexe certains composants et actionneurs qui pourront vous être utiles dans la réalisation de vos projets.</p><h2 id="r-resistance" data-claire-element-id="211165">Résistance</h2><figure id="r-211161" data-claire-element-id="211162"><img id="r-211160" data-claire-element-id="211160" src="medias/upload.wikimedia.org_wikipedia_commons_thumb_e_e3_3_Resistors.jpg_220px-3_Resistors.jpg" alt="Image utilisateur"/></figure><p id="r-211163" data-claire-element-id="211163">Une résistance est un composant électronique ou électrique dont la principale caractéristique est d'opposer une plus ou moins grande résistance (mesurée en ohms) à la circulation du courant électrique.</p><p id="r-211164" data-claire-element-id="211164">On l'utilise souvent pour &quot;protéger&quot; des composants d'une tension trop forte. Le calcul permettant de déterminer quelle résistance est adaptée se fait par la Loi d'Ohm (<strong>U = R*I</strong>)</p><h2 id="r-del-led-1" data-claire-element-id="211170">DEL/LED</h2><figure id="r-211167" data-claire-element-id="211168"><img id="r-211166" data-claire-element-id="211166" src="medias/upload.wikimedia.org_wikipedia_commons_thumb_c_cd_2B-_of_LED.svg_100px-2B-_of_LED.svg.png" alt="Image utilisateur"/></figure><p id="r-211169" data-claire-element-id="211169">Pas grand chose à dire, si ce n'est à propos de leurs polarités : la patte la <strong>plus</strong> longue correspond au <strong>+</strong> (On peut aussi se repérer au coté plat, qui est le <strong>-</strong>)</p><h2 id="r-relais" data-claire-element-id="211176">Relais</h2><figure id="r-211172" data-claire-element-id="211173"><img id="r-211171" data-claire-element-id="211171" src="medias/upload.wikimedia.org_wikipedia_commons_thumb_3_39_Relay2.jpg_150px-Relay2.jpg" alt="Image utilisateur"/></figure><p id="r-211174" data-claire-element-id="211174">C'est un appareil très pratique : il permet de séparer la partie commande (la carte Teensy) de la partie puissance (les autres appareils). Prenons l'exemple d'une source de courant à 30V : un passage par le Teensy le détruirait, c'est pourquoi on le commute via un relai, qui est commandé par la carte. Pour de plus ample information sur son fonctionnement interne, voir <a href="http://fr.wikipedia.org/wiki/Relais_électromécanique">la page wikipedia</a>.</p><p id="r-211175" data-claire-element-id="211175"><strong>Note </strong>: un relais peut être parfois avantageusement remplacé par un <a href="http://fr.wikipedia.org/wiki/Triac">triac</a> bien plus petit en taille.</p><h2 id="r-afficheur-7-segments" data-claire-element-id="211191">Afficheur 7 segments</h2><figure id="r-211178" data-claire-element-id="211179"><img id="r-211177" data-claire-element-id="211177" src="medias/upload.wikimedia.org_wikipedia_commons_thumb_a_ad_Seven_segment_02_Pengo.jpg_220px-Seven_segment_02_Pengo.jpg" alt="Image utilisateur"/></figure><p id="r-211180" data-claire-element-id="211180">Ce sont de petit appareils conçu pour afficher un chiffre. Leur utilisation est généralement très simple, en se reportant à la documentation fournit avec.</p><p id="r-211181" data-claire-element-id="211181"><strong>Note</strong> : il existe aussi des afficheurs 14 segments pour afficher lettres &amp; chiffres.</p><p id="r-211182" data-claire-element-id="211182">Vous voici doté du bagage minimum pour programmer votre teensy (et plus largement tout matériel compatible Arduino). Cependant, l'informatique embarquée est un sujet bien plus vaste : voici quelques pistes à explorer pour continuer sur cette voie :</p><ul id="r-211189" data-claire-element-id="211189"><li id="r-211184" data-claire-element-id="211184"><p id="r-211183" data-claire-element-id="211183"><a href="http://arduino.cc/en/Tutorial/AnalogInputPins">Les entrées/sorties analogiques</a></p></li><li id="r-211186" data-claire-element-id="211186"><p id="r-211185" data-claire-element-id="211185">Le <a href="http://www.pjrc.com/teensy/gcc.html">crosscompilateur AVR-GCC </a>(qui permet notamment d'utiliser le port USB de manière bien plus complète)</p></li><li id="r-211188" data-claire-element-id="211188"><p id="r-211187" data-claire-element-id="211187">D'autres cartes (nous avons étudié des <a href="http://fr.wikipedia.org/wiki/Atmel_AVR">AVR</a>, qui sont nettement inférieurs aux <a href="http://fr.wikipedia.org/wiki/Architecture_ARM">ARM</a>)</p></li></ul><p id="r-211190" data-claire-element-id="211190">N'hésitez pas à laisser une photo de vos projets en commentaire :D !</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy">Débuter dans l&#039;informatique embarquée avec Teensy</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/presentation-de-l-informatique-embarquee-et-de-teensy">
Présentation de l&#039;informatique embarquée et de Teensy
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/installation-d-arduino">
Installation d&#039;arduino
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/premier-programme-1">
Premier programme
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/entree-sortie-numerique">
Entrée/sortie numérique
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/port-serie">
Port série
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
Interruption
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/annexe-quelques-composants-utiles">
[Annexe] Quelques composants utiles
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/debuter-dans-l-informatique-embarquee-avec-teensy/interruption">
<span class="arrow"></span>
<span class="next">Interruption</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/debuter-dans-l-informatique-embarquee-avec-teensy.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:13:08 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/debuter-dans-l-informatique-embarquee-avec-teensy.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:31:37 GMT -->
</html>