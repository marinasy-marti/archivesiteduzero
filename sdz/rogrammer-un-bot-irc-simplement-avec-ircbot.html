<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/rogrammer-un-bot-irc-simplement-avec-ircbot.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:30:06 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rogrammer-un-bot-irc-simplement-avec-ircbot.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:18:42 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Programmer un bot IRC simplement avec ircbot</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Programmer un bot IRC simplement avec ircbot</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#ProgrammerunbotIRCsimplementavecircbot">Programmer un bot IRC simplement avec ircbot</a><br/><a href="#Seprocurerlesfichiers">Se procurer les fichiers</a><br/><a href="#Laprogrammationvnementielleetircbot">La programmation évènementielle et ircbot</a><br/><a href="#Applicationunbotsimpliste">Application à un bot simpliste</a><br/><a href="#Allonsunpeuplusloin">Allons un peu plus loin</a><br/></div>
<a name="ProgrammerunbotIRCsimplementavecircbot"></a><h2>Programmer un bot IRC simplement avec ircbot</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/se-procurer-les-fichiers">
<span class="next">Se procurer les fichiers</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-540819" data-claire-element-id="540819">Ce tutoriel présente l'utilisation du module ircbot de Joel Rosdahl pour Python. Comme son nom l'indique, celui-ci permet de programmer son propre <em>bot</em> IRC. Il utilise le module irclib du même auteur, qui est plus général et qui ne sera que partiellement présenté ici.</p><aside id="r-540821" data-claire-element-id="540821" data-claire-semantic="warning"><p id="r-540820" data-claire-element-id="540820">Ces deux modules ne sont pour le moment pas compatibles avec Python 3 ! Ce tutoriel requiert donc Python 2 pour être suivi.</p></aside><p id="r-540822" data-claire-element-id="540822">Sont prérequises pour suivre ce tutoriel :</p><ul id="r-540827" data-claire-element-id="540827"><li id="r-540824" data-claire-element-id="540824"><p id="r-540823" data-claire-element-id="540823">des bases en Python, notamment au niveau de la POO (déclaration d'une classe, héritage...) ;</p></li><li id="r-540826" data-claire-element-id="540826"><p id="r-540825" data-claire-element-id="540825">et des connaissances sur ce qu'est <a href="http://fr.wikipedia.org/wiki/IRC">IRC</a> et les possibilités qu'il offre.</p></li></ul><p id="r-540828" data-claire-element-id="540828">C'est bon ? Alors, suivez le guide. ;)</p>
</div><a name="Seprocurerlesfichiers"></a><h2>Se procurer les fichiers</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/la-programmation-evenementielle-et-ircbot">
<span class="next">La programmation évènementielle et ircbot</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-540829" data-claire-element-id="540829">Les deux modules que nous allons étudier, irclib et ircbot, ont été développés par un programmeur tiers et ne sont donc pas livrés directement avec Python ; vous allez donc devoir vous les procurer avant de commencer !</p><aside id="r-540831" data-claire-element-id="540831" data-claire-semantic="information"><p id="r-540830" data-claire-element-id="540830">Le module ircbot utilise irclib. Vous ne pouvez donc pas utiliser ircbot sans avoir installé au préalable irclib.</p></aside><p id="r-540832" data-claire-element-id="540832">Si vous êtes sous une distribution Linux gérant les installations par paquets, alors il existe peut-être un paquet python-irclib qui regroupe irclib<strong>et</strong>ircbot. Par exemple, sous Ubuntu, taper <code data-claire-semantic="console">sudo apt-get install python-irclib</code> installera les modules. Sinon, vous pouvez télécharger la dernière version depuis la <a href="http://sourceforge.net/project/showfiles.php?group_id=38297&amp;amp%3Bpackage_id=31887">page du projet sur SourceForge.net</a>.<br/> Cependant, la version publique des modules gère les <em>half operators</em> de la même manière que les utilisateurs normaux ce qui peut produire quelques bugs (utilisateurs qui sont listés avec un % devant leur pseudonyme). Pour cette raison, je vous invite à utiliser une version modifiée par mes soins qui fait bien la distinction <a href="http://dentuk.free.fr/tutoircbot/">ici</a>. Après cela, décompressez l'archive à l'aide de votre logiciel favori. La plupart des fichiers sont des programmes d'exemple, que je vous conseille de regarder plutôt après qu'avant d'avoir lu ce tutoriel. :p <br/> Maintenant, deux choix s'offrent à vous :</p><ul id="r-540837" data-claire-element-id="540837"><li id="r-540834" data-claire-element-id="540834"><p id="r-540833" data-claire-element-id="540833">lancer le script d'installation via setup.py comme indiqué dans le fichier README, de sorte que tous vos codes aient accès à ces deux modules ;</p></li><li id="r-540836" data-claire-element-id="540836"><p id="r-540835" data-claire-element-id="540835">placer les deux fichiers irclib.py et ircbot.py dans le répertoire du programme pour chaque script utilisant ces modules.</p></li></ul><p id="r-540838" data-claire-element-id="540838">La première solution est conseillée si vous utilisez vos <em>bots</em> pour vous-mêmes, puisqu'elle vous évitera de copier les fichiers à chaque fois que vous programmerez un nouveau <em>bot</em>. En revanche, si vous comptez distribuer vos programmes, il est fortement recommandé de livrer les fichiers des modules avec, puisque l'utilisateur n'aura pas nécessairement installé irclib et ircbot sur son ordinateur, d'autant plus si vous utilisez la version modifiée. Vous pouvez aussi installer les fichiers pour la période de développement et les distribuer une fois le <em>bot</em> terminé.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot">Programmer un bot IRC simplement avec ircbot</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/se-procurer-les-fichiers">
Se procurer les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/la-programmation-evenementielle-et-ircbot">
La programmation évènementielle et ircbot
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/application-a-un-bot-simpliste">
Application à un bot simpliste
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/allons-un-peu-plus-loin">
Allons un peu plus loin
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/la-programmation-evenementielle-et-ircbot">
<span class="next">La programmation évènementielle et ircbot</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Laprogrammationvnementielleetircbot"></a><h2>La programmation évènementielle et ircbot</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/se-procurer-les-fichiers">
<span class="arrow"></span>
<span class="next">Se procurer les fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/application-a-un-bot-simpliste">
<span class="next">Application à un bot simpliste</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-540840" data-claire-element-id="540840">Avant de commencer à coder, il va falloir faire un brin de théorie. Rien de bien compliqué, bien entendu. ;)</p><p id="r-540841" data-claire-element-id="540841">Si vous utilisez irclib ou ircbot, vous allez devoir faire ce que l'on appelle de la programmation évènementielle. Il s'agit d'une logique de programmation raisonnant sur des <strong>évènements</strong> : quand il se passe telle chose, alors on fait cela. Pour un exemple concret : quand quelqu'un rejoint le canal, alors je lui dis bonjour. Il s'avère que c'est particulièrement adapté à IRC, ce qui explique son utilisation ici.</p><p id="r-540842" data-claire-element-id="540842">Dans vos programmes, vous allez définir pour chaque évènement que vous souhaitez traiter une méthode qui sera appelée automatiquement par ircbot lorsque l'évènement en question se produira. Pour cela, vos <em>bots</em> devront hériter de la classe ircbot.SingleServerIRCBot.<br/> Chaque méthode devra être de la forme suivante :</p><pre id="r-540843" data-claire-element-id="540843"><code data-claire-semantic="python">class MonBot(ircbot.SingleServerIRCBot):
    def on_evenement(self, serv, ev):
        # gestion de l'évènement</code></pre><ul id="r-540848" data-claire-element-id="540848"><li id="r-540845" data-claire-element-id="540845"><p id="r-540844" data-claire-element-id="540844">Dans le nom de la méthode, evenement sera remplacé par le nom de l'évènement à traiter, ce qui donnera par exemple on_join, on_kick, etc.</p></li><li id="r-540847" data-claire-element-id="540847"><p id="r-540846" data-claire-element-id="540846">La méthode prend deux paramètres (ici nommés serv et ev). Le premier sert à communiquer avec le serveur, et le second nous renseigne sur l'évènement, nous permettant de savoir qui a été <em>kické</em>, par qui et sur quel canal par exemple.</p></li></ul><p id="r-540849" data-claire-element-id="540849">Nous allons maintenant étudier plus en détail ces deux arguments.</p><h2 id="r-communication-avec-le-serveur" data-claire-element-id="540925">Communication avec le serveur</h2><p id="r-540850" data-claire-element-id="540850">irclib nous permet de faire dialoguer notre <em>bot</em> avec le serveur comme le ferait un client IRC habituel à travers la classe irclib.ServerConnection, dont l'argument serv dont nous avons parlé plus haut est une instance. Elle dispose de nombreuses méthodes et seules les plus utilisées seront présentées ici.</p><table id="r-540903" data-claire-element-id="540903"><thead id="r-540856" data-claire-element-id="540856"><tr id="r-540855" data-claire-element-id="540855"><th id="r-540852" data-claire-element-id="540852"><p id="r-540851" data-claire-element-id="540851"><code data-claire-semantic="python">irclib.ServerConnection.</code></p></th><th id="r-540854" data-claire-element-id="540854"><p id="r-540853" data-claire-element-id="540853">Utilité</p></th></tr></thead><tbody id="r-540902" data-claire-element-id="540902"><tr id="r-540861" data-claire-element-id="540861"><td id="r-540858" data-claire-element-id="540858"><p id="r-540857" data-claire-element-id="540857"><code data-claire-semantic="python">nick(self, pseudonyme)</code></p></td><td id="r-540860" data-claire-element-id="540860"><p id="r-540859" data-claire-element-id="540859">Change le pseudonyme du <em>bot</em>.</p></td></tr><tr id="r-540866" data-claire-element-id="540866"><td id="r-540863" data-claire-element-id="540863"><p id="r-540862" data-claire-element-id="540862"><code data-claire-semantic="python">get_nickname(self)</code></p></td><td id="r-540865" data-claire-element-id="540865"><p id="r-540864" data-claire-element-id="540864">Renvoie votre pseudonyme actuel. Celui-ci n'est pas forcément celui que vous souhaitiez, en particulier si vous demandez un pseudonyme réservé.</p></td></tr><tr id="r-540871" data-claire-element-id="540871"><td id="r-540868" data-claire-element-id="540868"><p id="r-540867" data-claire-element-id="540867"><code data-claire-semantic="python">privmsg(self, destinataire, message)</code></p></td><td id="r-540870" data-claire-element-id="540870"><p id="r-540869" data-claire-element-id="540869">Envoie un message ; le destinataire peut être soit un canal tel que #kikoo, soit un nom d'utilisateur tel que dentuk.</p></td></tr><tr id="r-540876" data-claire-element-id="540876"><td id="r-540873" data-claire-element-id="540873"><p id="r-540872" data-claire-element-id="540872"><code data-claire-semantic="python">action(self, destinataire, message)</code></p></td><td id="r-540875" data-claire-element-id="540875"><p id="r-540874" data-claire-element-id="540874">Envoie une action ; sous la plupart des clients, cela correspond à la commande /me.</p></td></tr><tr id="r-540881" data-claire-element-id="540881"><td id="r-540878" data-claire-element-id="540878"><p id="r-540877" data-claire-element-id="540877"><code data-claire-semantic="python">notice(self, destinataire, message)</code></p></td><td id="r-540880" data-claire-element-id="540880"><p id="r-540879" data-claire-element-id="540879">Envoie une notice.</p></td></tr><tr id="r-540886" data-claire-element-id="540886"><td id="r-540883" data-claire-element-id="540883"><p id="r-540882" data-claire-element-id="540882"><code data-claire-semantic="python">invite(self, pseudonyme, canal)</code></p></td><td id="r-540885" data-claire-element-id="540885"><p id="r-540884" data-claire-element-id="540884">Invite un autre utilisateur à rejoindre le canal précisé.</p></td></tr><tr id="r-540891" data-claire-element-id="540891"><td id="r-540888" data-claire-element-id="540888"><p id="r-540887" data-claire-element-id="540887"><code data-claire-semantic="python">join(self, canal, cle='')</code></p></td><td id="r-540890" data-claire-element-id="540890"><p id="r-540889" data-claire-element-id="540889">Rejoint le canal précisé, en utilisant la clé donnée si le canal est protégé par mot de passe.</p></td></tr><tr id="r-540896" data-claire-element-id="540896"><td id="r-540893" data-claire-element-id="540893"><p id="r-540892" data-claire-element-id="540892"><code data-claire-semantic="python">part(self, canal, message='')</code></p></td><td id="r-540895" data-claire-element-id="540895"><p id="r-540894" data-claire-element-id="540894">Quitte le canal précisé, éventuellement avec un message d'au revoir.</p></td></tr><tr id="r-540901" data-claire-element-id="540901"><td id="r-540898" data-claire-element-id="540898"><p id="r-540897" data-claire-element-id="540897"><code data-claire-semantic="python">disconnect(self, message='')</code></p></td><td id="r-540900" data-claire-element-id="540900"><p id="r-540899" data-claire-element-id="540899">Quitte le serveur, éventuellement avec un message d'au revoir, et déconnecte le <em>bot</em>.</p></td></tr></tbody></table><table id="r-540921" data-claire-element-id="540921"><thead id="r-540909" data-claire-element-id="540909"><tr id="r-540908" data-claire-element-id="540908"><th id="r-540905" data-claire-element-id="540905"><p id="r-540904" data-claire-element-id="540904"><code data-claire-semantic="python">irclib.ServerConnection.</code></p></th><th id="r-540907" data-claire-element-id="540907"><p id="r-540906" data-claire-element-id="540906">Utilité</p></th></tr></thead><tbody id="r-540920" data-claire-element-id="540920"><tr id="r-540914" data-claire-element-id="540914"><td id="r-540911" data-claire-element-id="540911"><p id="r-540910" data-claire-element-id="540910"><code data-claire-semantic="python">kick(self, canal, pseudonyme, raison='')</code></p></td><td id="r-540913" data-claire-element-id="540913"><p id="r-540912" data-claire-element-id="540912">Exclut un utilisateur du canal, éventuellement avec une raison.</p></td></tr><tr id="r-540919" data-claire-element-id="540919"><td id="r-540916" data-claire-element-id="540916"><p id="r-540915" data-claire-element-id="540915"><code data-claire-semantic="python">mode(self, canal, commande)</code></p></td><td id="r-540918" data-claire-element-id="540918"><p id="r-540917" data-claire-element-id="540917">Active ou retire un mode. Nous verrons comment utiliser les modes plus loin dans le tutoriel.</p></td></tr></tbody></table><p id="r-540922" data-claire-element-id="540922">Voilà déjà de quoi bien vous amuser. Pour la liste complète des méthodes, lancez un <em>shell</em> Python et procédez ainsi :</p><pre id="r-540923" data-claire-element-id="540923"><code data-claire-semantic="python">&gt;&gt;&gt; import irclib
&gt;&gt;&gt; help(irclib.ServerConnection)</code></pre><p id="r-540924" data-claire-element-id="540924">Toutefois, la documentation n'est pas très précise, le plus souvent on a droit à un « envoie telle commande au serveur », vous aurez donc peut-être besoin de la compléter par une recherche.</p><h2 id="r-la-variable-d-evenement-1" data-claire-element-id="541373">La variable d'évènement</h2><p id="r-540926" data-claire-element-id="540926">Il y a dans irclib trois catégories d'évènements :</p><ul id="r-540933" data-claire-element-id="540933"><li id="r-540928" data-claire-element-id="540928"><p id="r-540927" data-claire-element-id="540927">ceux qui découlent du protocole IRC en lui-même, et sont les plus utiles tels que la réception d'un message ou l'exclusion d'un utilisateur ;</p></li><li id="r-540930" data-claire-element-id="540930"><p id="r-540929" data-claire-element-id="540929">ceux qui sont générés pour les besoins de irclib, concernant principalement le <a href="http://fr.wikipedia.org/wiki/CTCP">CTCP</a> et le <a href="http://fr.wikipedia.org/wiki/Direct_Client-to-Client">DCC</a> que nous n'étudierons pas ici ;</p></li><li id="r-540932" data-claire-element-id="540932"><p id="r-540931" data-claire-element-id="540931">et les évènements dits « numériques », parce qu'ils correspondent à un code numérique dans le protocole IRC dont vous, en tant qu'utilisateur de irclib, n'aurez pas à vous soucier ; ils précisent une étape dans la communication (début / fin d'envoi du message du jour...), une erreur (si l'on essaie d'envoyer un message à un pseudonyme inexistant...) ou autre chose ; ils sont très nombreux et nous n'en étudierons qu'un seul dans ce tutoriel, qui est celui de bienvenue.</p></li></ul><p id="r-540934" data-claire-element-id="540934">Un évènement est représenté par une instance de la classe irclib.Event, c'est le cas de l'argument ev de notre méthode modèle. Cette classe possède trois méthodes d'information qui nous seront utiles, et une autre qui, en général, ne sert pas quand on utilise ircbot.</p><table id="r-540962" data-claire-element-id="540962"><thead id="r-540940" data-claire-element-id="540940"><tr id="r-540939" data-claire-element-id="540939"><th id="r-540936" data-claire-element-id="540936"><p id="r-540935" data-claire-element-id="540935"><code data-claire-semantic="python">irclib.Event.</code></p></th><th id="r-540938" data-claire-element-id="540938"><p id="r-540937" data-claire-element-id="540937">Renseigne sur...</p></th></tr></thead><tbody id="r-540961" data-claire-element-id="540961"><tr id="r-540945" data-claire-element-id="540945"><td id="r-540942" data-claire-element-id="540942"><p id="r-540941" data-claire-element-id="540941"><code data-claire-semantic="python">source(self)</code></p></td><td id="r-540944" data-claire-element-id="540944"><p id="r-540943" data-claire-element-id="540943">... l'origine de l'évènement ; c'est-à-dire, selon l'évènement, soit un serveur, soit un utilisateur, soit un canal.</p></td></tr><tr id="r-540950" data-claire-element-id="540950"><td id="r-540947" data-claire-element-id="540947"><p id="r-540946" data-claire-element-id="540946"><code data-claire-semantic="python">target(self)</code></p></td><td id="r-540949" data-claire-element-id="540949"><p id="r-540948" data-claire-element-id="540948">... la cible de l'évènement ; c'est-à-dire, selon l'évènement, soit un utilisateur, soit un canal.</p></td></tr><tr id="r-540955" data-claire-element-id="540955"><td id="r-540952" data-claire-element-id="540952"><p id="r-540951" data-claire-element-id="540951"><code data-claire-semantic="python">arguments(self)</code></p></td><td id="r-540954" data-claire-element-id="540954"><p id="r-540953" data-claire-element-id="540953">... divers paramètres relatifs à l'évènement, toujours sous la forme d'une liste.</p></td></tr><tr id="r-540960" data-claire-element-id="540960"><td id="r-540957" data-claire-element-id="540957"><p id="r-540956" data-claire-element-id="540956"><code data-claire-semantic="python">eventtype(self)</code></p></td><td id="r-540959" data-claire-element-id="540959"><p id="r-540958" data-claire-element-id="540958">... le type de l'évènement ; par exemple, <code data-claire-semantic="python">&quot;welcome&quot; </code> pour l'évènement de bienvenue.</p></td></tr></tbody></table><p id="r-540963" data-claire-element-id="540963">Nous allons maintenant voir quelques évènements que vous pouvez choisir de traiter. Bien entendu, vous n'avez pas besoin de tout savoir par coeur, vous pouvez toujours garder les tableaux de côté quand vous programmez. Je vous propose deux tableaux : dans le premier, il y a ce que représente la valeur de retour de chaque méthode de irclib.Event pour chaque évènement ; et dans l'autre, des exemples de ces valeurs de retour pour bien comprendre.</p><table id="r-541201" data-claire-element-id="541201"><thead id="r-540975" data-claire-element-id="540975"><tr id="r-540974" data-claire-element-id="540974"><th id="r-540965" data-claire-element-id="540965"><p id="r-540964" data-claire-element-id="540964">Émis quand...</p></th><th id="r-540967" data-claire-element-id="540967"><p id="r-540966" data-claire-element-id="540966">ev.eventtype()</p></th><th id="r-540969" data-claire-element-id="540969"><p id="r-540968" data-claire-element-id="540968">ev.source()</p></th><th id="r-540971" data-claire-element-id="540971"><p id="r-540970" data-claire-element-id="540970">ev.target()</p></th><th id="r-540973" data-claire-element-id="540973"><p id="r-540972" data-claire-element-id="540972">ev.arguments()</p></th></tr></thead><tbody id="r-541200" data-claire-element-id="541200"><tr id="r-540992" data-claire-element-id="540992"><td id="r-540977" data-claire-element-id="540977"><p id="r-540976" data-claire-element-id="540976">... vous êtes connectés au serveur.</p></td><td id="r-540979" data-claire-element-id="540979"><p id="r-540978" data-claire-element-id="540978">welcome</p></td><td id="r-540982" data-claire-element-id="540983"><img id="r-540983" data-claire-element-id="540982" src="medias/uploads.siteduzero.com_thb_158001_159000_158202.png" alt="Image utilisateur"/><img id="r-540980" data-claire-element-id="540980" src="medias/uploads.siteduzero.com_thb_158001_159000_158202.png" alt="Image utilisateur"/><p id="r-540981" data-claire-element-id="540981">Serveur</p></td><td id="r-540986" data-claire-element-id="540987"><img id="r-540987" data-claire-element-id="540986" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-540984" data-claire-element-id="540984" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-540985" data-claire-element-id="540985">Votre pseudonyme</p></td><td id="r-540990" data-claire-element-id="540991"><img id="r-540991" data-claire-element-id="540990" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><img id="r-540988" data-claire-element-id="540988" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><p id="r-540989" data-claire-element-id="540989">Message d'accueil</p></td></tr><tr id="r-541006" data-claire-element-id="541006"><td id="r-540994" data-claire-element-id="540994"><p id="r-540993" data-claire-element-id="540993">... quelqu'un change de pseudonyme.</p></td><td id="r-540996" data-claire-element-id="540996"><p id="r-540995" data-claire-element-id="540995">nick</p></td><td id="r-540999" data-claire-element-id="541000"><img id="r-541000" data-claire-element-id="540999" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-540997" data-claire-element-id="540997" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-540998" data-claire-element-id="540998">Utilisateur</p></td><td id="r-541003" data-claire-element-id="541004"><img id="r-541004" data-claire-element-id="541003" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541001" data-claire-element-id="541001" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541002" data-claire-element-id="541002">Nouveau pseudonyme</p></td><td id="r-541005" data-claire-element-id="541005"></td></tr><tr id="r-541023" data-claire-element-id="541023"><td id="r-541008" data-claire-element-id="541008"><p id="r-541007" data-claire-element-id="541007">... quelqu'un vous envoie un message privé.</p></td><td id="r-541010" data-claire-element-id="541010"><p id="r-541009" data-claire-element-id="541009">privmsg</p></td><td id="r-541013" data-claire-element-id="541014"><img id="r-541014" data-claire-element-id="541013" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541011" data-claire-element-id="541011" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541012" data-claire-element-id="541012">Utilisateur</p></td><td id="r-541017" data-claire-element-id="541018"><img id="r-541018" data-claire-element-id="541017" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541015" data-claire-element-id="541015" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541016" data-claire-element-id="541016">Votre pseudonyme</p></td><td id="r-541021" data-claire-element-id="541022"><img id="r-541022" data-claire-element-id="541021" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><img id="r-541019" data-claire-element-id="541019" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><p id="r-541020" data-claire-element-id="541020">Message envoyé</p></td></tr><tr id="r-541040" data-claire-element-id="541040"><td id="r-541025" data-claire-element-id="541025"><p id="r-541024" data-claire-element-id="541024">... quelqu'un envoie un message sur le canal.</p></td><td id="r-541027" data-claire-element-id="541027"><p id="r-541026" data-claire-element-id="541026">pubmsg</p></td><td id="r-541030" data-claire-element-id="541031"><img id="r-541031" data-claire-element-id="541030" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541028" data-claire-element-id="541028" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541029" data-claire-element-id="541029">Utilisateur</p></td><td id="r-541034" data-claire-element-id="541035"><img id="r-541035" data-claire-element-id="541034" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><img id="r-541032" data-claire-element-id="541032" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><p id="r-541033" data-claire-element-id="541033">Canal</p></td><td id="r-541038" data-claire-element-id="541039"><img id="r-541039" data-claire-element-id="541038" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><img id="r-541036" data-claire-element-id="541036" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><p id="r-541037" data-claire-element-id="541037">Message envoyé</p></td></tr><tr id="r-541057" data-claire-element-id="541057"><td id="r-541042" data-claire-element-id="541042"><p id="r-541041" data-claire-element-id="541041">... quelqu'un utilise la commande /me sur le canal.</p></td><td id="r-541044" data-claire-element-id="541044"><p id="r-541043" data-claire-element-id="541043">action</p></td><td id="r-541047" data-claire-element-id="541048"><img id="r-541048" data-claire-element-id="541047" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541045" data-claire-element-id="541045" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541046" data-claire-element-id="541046">Utilisateur</p></td><td id="r-541051" data-claire-element-id="541052"><img id="r-541052" data-claire-element-id="541051" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><img id="r-541049" data-claire-element-id="541049" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><p id="r-541050" data-claire-element-id="541050">Canal</p></td><td id="r-541055" data-claire-element-id="541056"><img id="r-541056" data-claire-element-id="541055" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><img id="r-541053" data-claire-element-id="541053" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><p id="r-541054" data-claire-element-id="541054">Message d'action</p></td></tr><tr id="r-541074" data-claire-element-id="541074"><td id="r-541059" data-claire-element-id="541059"><p id="r-541058" data-claire-element-id="541058">... quelqu'un vous envoie une notice.</p></td><td id="r-541061" data-claire-element-id="541061"><p id="r-541060" data-claire-element-id="541060">privnotice</p></td><td id="r-541064" data-claire-element-id="541065"><img id="r-541065" data-claire-element-id="541064" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541062" data-claire-element-id="541062" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541063" data-claire-element-id="541063">Utilisateur</p></td><td id="r-541068" data-claire-element-id="541069"><img id="r-541069" data-claire-element-id="541068" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541066" data-claire-element-id="541066" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541067" data-claire-element-id="541067">Votre pseudonyme</p></td><td id="r-541072" data-claire-element-id="541073"><img id="r-541073" data-claire-element-id="541072" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><img id="r-541070" data-claire-element-id="541070" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><p id="r-541071" data-claire-element-id="541071">Message envoyé</p></td></tr><tr id="r-541091" data-claire-element-id="541091"><td id="r-541076" data-claire-element-id="541076"><p id="r-541075" data-claire-element-id="541075">... quelqu'un envoie une notice au canal.</p></td><td id="r-541078" data-claire-element-id="541078"><p id="r-541077" data-claire-element-id="541077">pubnotice</p></td><td id="r-541081" data-claire-element-id="541082"><img id="r-541082" data-claire-element-id="541081" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541079" data-claire-element-id="541079" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541080" data-claire-element-id="541080">Utilisateur</p></td><td id="r-541085" data-claire-element-id="541086"><img id="r-541086" data-claire-element-id="541085" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><img id="r-541083" data-claire-element-id="541083" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><p id="r-541084" data-claire-element-id="541084">Canal</p></td><td id="r-541089" data-claire-element-id="541090"><img id="r-541090" data-claire-element-id="541089" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><img id="r-541087" data-claire-element-id="541087" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><p id="r-541088" data-claire-element-id="541088">Message envoyé</p></td></tr><tr id="r-541108" data-claire-element-id="541108"><td id="r-541093" data-claire-element-id="541093"><p id="r-541092" data-claire-element-id="541092">... quelqu'un invite une autre personne à rejoindre le canal.</p></td><td id="r-541095" data-claire-element-id="541095"><p id="r-541094" data-claire-element-id="541094">invite</p></td><td id="r-541098" data-claire-element-id="541099"><img id="r-541099" data-claire-element-id="541098" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541096" data-claire-element-id="541096" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541097" data-claire-element-id="541097">Utilisateur</p></td><td id="r-541102" data-claire-element-id="541103"><img id="r-541103" data-claire-element-id="541102" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541100" data-claire-element-id="541100" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541101" data-claire-element-id="541101">Pseudonyme invité</p></td><td id="r-541106" data-claire-element-id="541107"><img id="r-541107" data-claire-element-id="541106" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><img id="r-541104" data-claire-element-id="541104" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><p id="r-541105" data-claire-element-id="541105">Canal</p></td></tr><tr id="r-541122" data-claire-element-id="541122"><td id="r-541110" data-claire-element-id="541110"><p id="r-541109" data-claire-element-id="541109">... quelqu'un rejoint le canal.</p></td><td id="r-541112" data-claire-element-id="541112"><p id="r-541111" data-claire-element-id="541111">join</p></td><td id="r-541115" data-claire-element-id="541116"><img id="r-541116" data-claire-element-id="541115" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541113" data-claire-element-id="541113" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541114" data-claire-element-id="541114">Utilisateur</p></td><td id="r-541119" data-claire-element-id="541120"><img id="r-541120" data-claire-element-id="541119" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><img id="r-541117" data-claire-element-id="541117" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><p id="r-541118" data-claire-element-id="541118">Canal</p></td><td id="r-541121" data-claire-element-id="541121"></td></tr><tr id="r-541139" data-claire-element-id="541139"><td id="r-541124" data-claire-element-id="541124"><p id="r-541123" data-claire-element-id="541123">... quelqu'un quitte le canal.</p></td><td id="r-541126" data-claire-element-id="541126"><p id="r-541125" data-claire-element-id="541125">part</p></td><td id="r-541129" data-claire-element-id="541130"><img id="r-541130" data-claire-element-id="541129" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541127" data-claire-element-id="541127" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541128" data-claire-element-id="541128">Utilisateur</p></td><td id="r-541133" data-claire-element-id="541134"><img id="r-541134" data-claire-element-id="541133" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><img id="r-541131" data-claire-element-id="541131" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><p id="r-541132" data-claire-element-id="541132">Canal</p></td><td id="r-541137" data-claire-element-id="541138"><img id="r-541138" data-claire-element-id="541137" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><img id="r-541135" data-claire-element-id="541135" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><p id="r-541136" data-claire-element-id="541136">Message d'au revoir</p></td></tr><tr id="r-541153" data-claire-element-id="541153"><td id="r-541141" data-claire-element-id="541141"><p id="r-541140" data-claire-element-id="541140">... quelqu'un quitte le serveur.</p></td><td id="r-541143" data-claire-element-id="541143"><p id="r-541142" data-claire-element-id="541142">quit</p></td><td id="r-541146" data-claire-element-id="541147"><img id="r-541147" data-claire-element-id="541146" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541144" data-claire-element-id="541144" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541145" data-claire-element-id="541145">Utilisateur</p></td><td id="r-541148" data-claire-element-id="541148"></td><td id="r-541151" data-claire-element-id="541152"><img id="r-541152" data-claire-element-id="541151" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><img id="r-541149" data-claire-element-id="541149" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><p id="r-541150" data-claire-element-id="541150">Message d'au revoir</p></td></tr><tr id="r-541176" data-claire-element-id="541176"><td id="r-541155" data-claire-element-id="541155"><p id="r-541154" data-claire-element-id="541154">... un opérateur expulse un utilisateur.</p></td><td id="r-541157" data-claire-element-id="541157"><p id="r-541156" data-claire-element-id="541156">kick</p></td><td id="r-541160" data-claire-element-id="541161"><img id="r-541161" data-claire-element-id="541160" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541158" data-claire-element-id="541158" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541159" data-claire-element-id="541159">Utilisateur</p></td><td id="r-541164" data-claire-element-id="541165"><img id="r-541165" data-claire-element-id="541164" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><img id="r-541162" data-claire-element-id="541162" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><p id="r-541163" data-claire-element-id="541163">Canal</p></td><td id="r-541175" data-claire-element-id="541175"><ul id="r-541174" data-claire-element-id="541174"><li id="r-541168" data-claire-element-id="541169"><img id="r-541169" data-claire-element-id="541168" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541166" data-claire-element-id="541166" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541167" data-claire-element-id="541167">Pseudonyme de la victime</p></li><li id="r-541172" data-claire-element-id="541173"><img id="r-541173" data-claire-element-id="541172" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><img id="r-541170" data-claire-element-id="541170" src="medias/uploads.siteduzero.com_thb_158001_159000_158209.png" alt="Image utilisateur"/><p id="r-541171" data-claire-element-id="541171">Raison du <em>kick</em></p></li></ul></td></tr><tr id="r-541199" data-claire-element-id="541199"><td id="r-541178" data-claire-element-id="541178"><p id="r-541177" data-claire-element-id="541177">... un opérateur applique un ou des modes.</p></td><td id="r-541180" data-claire-element-id="541180"><p id="r-541179" data-claire-element-id="541179">mode</p></td><td id="r-541183" data-claire-element-id="541184"><img id="r-541184" data-claire-element-id="541183" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><img id="r-541181" data-claire-element-id="541181" src="medias/uploads.siteduzero.com_thb_158001_159000_158203.png" alt="Image utilisateur"/><p id="r-541182" data-claire-element-id="541182">Utilisateur</p></td><td id="r-541187" data-claire-element-id="541188"><img id="r-541188" data-claire-element-id="541187" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><img id="r-541185" data-claire-element-id="541185" src="medias/uploads.siteduzero.com_thb_158001_159000_158204.png" alt="Image utilisateur"/><p id="r-541186" data-claire-element-id="541186">Canal</p></td><td id="r-541198" data-claire-element-id="541198"><ul id="r-541197" data-claire-element-id="541197"><li id="r-541190" data-claire-element-id="541190"><p id="r-541189" data-claire-element-id="541189">Mode(s) appliqué(s)</p></li><li id="r-541192" data-claire-element-id="541192"><p id="r-541191" data-claire-element-id="541191">Argument éventuel</p></li><li id="r-541194" data-claire-element-id="541194"><p id="r-541193" data-claire-element-id="541193">Argument éventuel</p></li><li id="r-541196" data-claire-element-id="541196"><p id="r-541195" data-claire-element-id="541195">...</p></li></ul></td></tr></tbody></table><table id="r-541330" data-claire-element-id="541330"><thead id="r-541211" data-claire-element-id="541211"><tr id="r-541210" data-claire-element-id="541210"><th id="r-541203" data-claire-element-id="541203"><p id="r-541202" data-claire-element-id="541202">ev.eventtype()</p></th><th id="r-541205" data-claire-element-id="541205"><p id="r-541204" data-claire-element-id="541204">ev.source()</p></th><th id="r-541207" data-claire-element-id="541207"><p id="r-541206" data-claire-element-id="541206">ev.target()</p></th><th id="r-541209" data-claire-element-id="541209"><p id="r-541208" data-claire-element-id="541208">ev.arguments()</p></th></tr></thead><tbody id="r-541329" data-claire-element-id="541329"><tr id="r-541220" data-claire-element-id="541220"><td id="r-541213" data-claire-element-id="541213"><p id="r-541212" data-claire-element-id="541212"><code data-claire-semantic="python">'welcome'</code></p></td><td id="r-541215" data-claire-element-id="541215"><p id="r-541214" data-claire-element-id="541214"><code data-claire-semantic="python">'marseille.fr.epiknet.org'</code></p></td><td id="r-541217" data-claire-element-id="541217"><p id="r-541216" data-claire-element-id="541216"><code data-claire-semantic="python">'bottuk'</code></p></td><td id="r-541219" data-claire-element-id="541219"><p id="r-541218" data-claire-element-id="541218"><code data-claire-semantic="python">['Welcome to the EpiKnet IRC Network bottuk!~bottuk@[...].net']</code></p></td></tr><tr id="r-541229" data-claire-element-id="541229"><td id="r-541222" data-claire-element-id="541222"><p id="r-541221" data-claire-element-id="541221"><code data-claire-semantic="python">'nick'</code></p></td><td id="r-541224" data-claire-element-id="541224"><p id="r-541223" data-claire-element-id="541223"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="106e74757e64657b505560795b3d52552926282753223e7672683e60627f6871743e7e7564">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541226" data-claire-element-id="541226"><p id="r-541225" data-claire-element-id="541225"><code data-claire-semantic="python">'palatuk'</code></p></td><td id="r-541228" data-claire-element-id="541228"><p id="r-541227" data-claire-element-id="541227"><code data-claire-semantic="python">[]</code></p></td></tr><tr id="r-541238" data-claire-element-id="541238"><td id="r-541231" data-claire-element-id="541231"><p id="r-541230" data-claire-element-id="541230"><code data-claire-semantic="python">'privmsg'</code></p></td><td id="r-541233" data-claire-element-id="541233"><p id="r-541232" data-claire-element-id="541232"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="d2acb6b7bca6a7b99297a2bb99ff9097ebe4eae591e0fcb4b0aafca2a0bdaab3b6fcbcb7a6">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541235" data-claire-element-id="541235"><p id="r-541234" data-claire-element-id="541234"><code data-claire-semantic="python">'bottuk'</code></p></td><td id="r-541237" data-claire-element-id="541237"><p id="r-541236" data-claire-element-id="541236"><code data-claire-semantic="python">['salut bottuk, comment va ?']</code></p></td></tr><tr id="r-541247" data-claire-element-id="541247"><td id="r-541240" data-claire-element-id="541240"><p id="r-541239" data-claire-element-id="541239"><code data-claire-semantic="python">'pubmsg'</code></p></td><td id="r-541242" data-claire-element-id="541242"><p id="r-541241" data-claire-element-id="541241"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="f9879d9c978d8c92b9bc8990b2d4bbbcc0cfc1cebacbd79f9b81d7898b9681989dd7979c8d">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541244" data-claire-element-id="541244"><p id="r-541243" data-claire-element-id="541243"><code data-claire-semantic="python">'#kikoo'</code></p></td><td id="r-541246" data-claire-element-id="541246"><p id="r-541245" data-claire-element-id="541245"><code data-claire-semantic="python">['bonjour tout le monde !']</code></p></td></tr><tr id="r-541256" data-claire-element-id="541256"><td id="r-541249" data-claire-element-id="541249"><p id="r-541248" data-claire-element-id="541248"><code data-claire-semantic="python">'action'</code></p></td><td id="r-541251" data-claire-element-id="541251"><p id="r-541250" data-claire-element-id="541250"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="4d332928233938260d083d2406600f08747b757a0e7f632b2f35633d3f22352c2963232839">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541253" data-claire-element-id="541253"><p id="r-541252" data-claire-element-id="541252"><code data-claire-semantic="python">'#kikoo'</code></p></td><td id="r-541255" data-claire-element-id="541255"><p id="r-541254" data-claire-element-id="541254"><code data-claire-semantic="python">['est heureux !']</code></p></td></tr><tr id="r-541265" data-claire-element-id="541265"><td id="r-541258" data-claire-element-id="541258"><p id="r-541257" data-claire-element-id="541257"><code data-claire-semantic="python">'privnotice'</code></p></td><td id="r-541260" data-claire-element-id="541260"><p id="r-541259" data-claire-element-id="541259"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="18667c7d766c6d73585d687153355a5d212e202f5b2a367e7a6036686a7760797c36767d6c">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541262" data-claire-element-id="541262"><p id="r-541261" data-claire-element-id="541261"><code data-claire-semantic="python">'bottuk'</code></p></td><td id="r-541264" data-claire-element-id="541264"><p id="r-541263" data-claire-element-id="541263"><code data-claire-semantic="python">['salut bottuk !']</code></p></td></tr><tr id="r-541274" data-claire-element-id="541274"><td id="r-541267" data-claire-element-id="541267"><p id="r-541266" data-claire-element-id="541266"><code data-claire-semantic="python">'pubnotice'</code></p></td><td id="r-541269" data-claire-element-id="541269"><p id="r-541268" data-claire-element-id="541268"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="ceb0aaaba0babba58e8bbea785e38c8bf7f8f6f98dfce0a8acb6e0bebca1b6afaae0a0abba">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541271" data-claire-element-id="541271"><p id="r-541270" data-claire-element-id="541270"><code data-claire-semantic="python">'#kikoo'</code></p></td><td id="r-541273" data-claire-element-id="541273"><p id="r-541272" data-claire-element-id="541272"><code data-claire-semantic="python">['je notice tout le canal !']</code></p></td></tr><tr id="r-541283" data-claire-element-id="541283"><td id="r-541276" data-claire-element-id="541276"><p id="r-541275" data-claire-element-id="541275"><code data-claire-semantic="python">'invite'</code></p></td><td id="r-541278" data-claire-element-id="541278"><p id="r-541277" data-claire-element-id="541277"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="f58b91909b81809eb5b0859cbed8b7b0ccc3cdc2b6c7db93978ddb85879a8d9491db9b9081">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541280" data-claire-element-id="541280"><p id="r-541279" data-claire-element-id="541279"><code data-claire-semantic="python">'TomicBomb'</code></p></td><td id="r-541282" data-claire-element-id="541282"><p id="r-541281" data-claire-element-id="541281"><code data-claire-semantic="python">['#kikoo']</code></p></td></tr><tr id="r-541292" data-claire-element-id="541292"><td id="r-541285" data-claire-element-id="541285"><p id="r-541284" data-claire-element-id="541284"><code data-claire-semantic="python">'join'</code></p></td><td id="r-541287" data-claire-element-id="541287"><p id="r-541286" data-claire-element-id="541286"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="d9a7bdbcb7adacb2999ca9b092f49b9ce0efe1ee9aebf7bfbba1f7a9abb6a1b8bdf7b7bcad">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541289" data-claire-element-id="541289"><p id="r-541288" data-claire-element-id="541288"><code data-claire-semantic="python">'#kikoo'</code></p></td><td id="r-541291" data-claire-element-id="541291"><p id="r-541290" data-claire-element-id="541290"><code data-claire-semantic="python">[]</code></p></td></tr><tr id="r-541301" data-claire-element-id="541301"><td id="r-541294" data-claire-element-id="541294"><p id="r-541293" data-claire-element-id="541293"><code data-claire-semantic="python">'part'</code></p></td><td id="r-541296" data-claire-element-id="541296"><p id="r-541295" data-claire-element-id="541295"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="364852535842435d7673465f7d1b74730f000e0175041850544e184644594e575218585342">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541298" data-claire-element-id="541298"><p id="r-541297" data-claire-element-id="541297"><code data-claire-semantic="python">'#kikoo'</code></p></td><td id="r-541300" data-claire-element-id="541300"><p id="r-541299" data-claire-element-id="541299"><code data-claire-semantic="python">['je reviens']</code></p></td></tr><tr id="r-541310" data-claire-element-id="541310"><td id="r-541303" data-claire-element-id="541303"><p id="r-541302" data-claire-element-id="541302"><code data-claire-semantic="python">'quit'</code></p></td><td id="r-541305" data-claire-element-id="541305"><p id="r-541304" data-claire-element-id="541304"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="fa849e9f948e8f91babf8a93b1d7b8bfc3ccc2cdb9c8d49c9882d48a8895829b9ed4949f8e">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541307" data-claire-element-id="541307"><p id="r-541306" data-claire-element-id="541306"><code data-claire-semantic="python">None</code></p></td><td id="r-541309" data-claire-element-id="541309"><p id="r-541308" data-claire-element-id="541308"><code data-claire-semantic="python">['Quit: Konversation terminated!']</code></p></td></tr><tr id="r-541319" data-claire-element-id="541319"><td id="r-541312" data-claire-element-id="541312"><p id="r-541311" data-claire-element-id="541311"><code data-claire-semantic="python">'kick'</code></p></td><td id="r-541314" data-claire-element-id="541314"><p id="r-541313" data-claire-element-id="541313"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="c0bea4a5aeb4b5ab8085b0a98bed8285f9f6f8f783f2eea6a2b8eeb0b2afb8a1a4eeaea5b4">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541316" data-claire-element-id="541316"><p id="r-541315" data-claire-element-id="541315"><code data-claire-semantic="python">'#kikoo'</code></p></td><td id="r-541318" data-claire-element-id="541318"><p id="r-541317" data-claire-element-id="541317"><code data-claire-semantic="python">['bouletman', &quot;pas d'insultes, merci !&quot;]</code></p></td></tr><tr id="r-541328" data-claire-element-id="541328"><td id="r-541321" data-claire-element-id="541321"><p id="r-541320" data-claire-element-id="541320"><code data-claire-semantic="python">'mode'</code></p></td><td id="r-541323" data-claire-element-id="541323"><p id="r-541322" data-claire-element-id="541322"><code data-claire-semantic="python">'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="dba5bfbeb5afaeb09b9eabb290f6999ee2ede3ec98e9f5bdb9a3f5aba9b4a3babff5b5beaf">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></p></td><td id="r-541325" data-claire-element-id="541325"><p id="r-541324" data-claire-element-id="541324"><code data-claire-semantic="python">'#kikoo'</code></p></td><td id="r-541327" data-claire-element-id="541327"><p id="r-541326" data-claire-element-id="541326"><code data-claire-semantic="python">['+hh', 'bouh', 'A-dream']</code></p></td></tr></tbody></table><p id="r-541331" data-claire-element-id="541331">Vous vous demandez peut-être comment exploiter les valeurs de retour de la méthode irclib.Event.source, que j'appellerai des masques pour la suite du tutoriel. Bien que l'on puisse extraire les différentes parties assez facilement avec Python seul, irclib fournit plusieurs fonctions pour procéder à l'extraction. Le tableau ci-dessous utilise un masque de la forme <code data-claire-semantic="python">'pseudonyme!utilisateur@domaine' </code>.</p><table id="r-541369" data-claire-element-id="541369"><thead id="r-541339" data-claire-element-id="541339"><tr id="r-541338" data-claire-element-id="541338"><th id="r-541333" data-claire-element-id="541333"><p id="r-541332" data-claire-element-id="541332"><code data-claire-semantic="python">irclib.</code></p></th><th id="r-541335" data-claire-element-id="541335"><p id="r-541334" data-claire-element-id="541334">Origine du nom</p></th><th id="r-541337" data-claire-element-id="541337"><p id="r-541336" data-claire-element-id="541336">Extrait...</p></th></tr></thead><tbody id="r-541368" data-claire-element-id="541368"><tr id="r-541346" data-claire-element-id="541346"><td id="r-541341" data-claire-element-id="541341"><p id="r-541340" data-claire-element-id="541340"><code data-claire-semantic="python">nm_to_n(masque)</code></p></td><td id="r-541343" data-claire-element-id="541343"><p id="r-541342" data-claire-element-id="541342">nickmask to nick</p></td><td id="r-541345" data-claire-element-id="541345"><p id="r-541344" data-claire-element-id="541344">... le pseudonyme.</p></td></tr><tr id="r-541353" data-claire-element-id="541353"><td id="r-541348" data-claire-element-id="541348"><p id="r-541347" data-claire-element-id="541347"><code data-claire-semantic="python">nm_to_u(masque)</code></p></td><td id="r-541350" data-claire-element-id="541350"><p id="r-541349" data-claire-element-id="541349">nickmask to user</p></td><td id="r-541352" data-claire-element-id="541352"><p id="r-541351" data-claire-element-id="541351">... l'utilisateur.</p></td></tr><tr id="r-541360" data-claire-element-id="541360"><td id="r-541355" data-claire-element-id="541355"><p id="r-541354" data-claire-element-id="541354"><code data-claire-semantic="python">nm_to_h(masque)</code></p></td><td id="r-541357" data-claire-element-id="541357"><p id="r-541356" data-claire-element-id="541356">nickmask to host</p></td><td id="r-541359" data-claire-element-id="541359"><p id="r-541358" data-claire-element-id="541358">... le domaine.</p></td></tr><tr id="r-541367" data-claire-element-id="541367"><td id="r-541362" data-claire-element-id="541362"><p id="r-541361" data-claire-element-id="541361"><code data-claire-semantic="python">nm_to_uh(masque)</code></p></td><td id="r-541364" data-claire-element-id="541364"><p id="r-541363" data-claire-element-id="541363">nickmask to userhost</p></td><td id="r-541366" data-claire-element-id="541366"><p id="r-541365" data-claire-element-id="541365">... l'utilisateur et le domaine.</p></td></tr></tbody></table><p id="r-541370" data-claire-element-id="541370">Pour illustrer, je vous propose une petite session dans un <em>shell</em> Python. :)</p><pre id="r-541371" data-claire-element-id="541371"><code data-claire-semantic="python">&gt;&gt;&gt; import irclib
&gt;&gt;&gt; masque = 'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="f78993929983829cb7b2879ebcdab5b2cec1cfc0b4c5d991958fd98785988f9693d9999283">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'
&gt;&gt;&gt; irclib.nm_to_n(masque)
'dentuk'
&gt;&gt;&gt; irclib.nm_to_u(masque)
'~dentuk'
&gt;&gt;&gt; irclib.nm_to_h(masque)
'EpiK-BE9687C2.fbx.proxad.net'
&gt;&gt;&gt; irclib.nm_to_uh(masque)
'<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="b7c9d3d2d9c3c2dcf7f2c7defc9af5f28e818f80f48599d1d5cf99c7c5d8cfd6d399d9d2c3">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'</code></pre><p id="r-541372" data-claire-element-id="541372">Parlons maintenant un peu de la classe ircbot.SingleServerIRCBot.</p><h2 id="r-etude-de-la-classe-mere" data-claire-element-id="541394">Étude de la classe mère</h2><p id="r-541374" data-claire-element-id="541374">Nous allons maintenant voir quelques méthodes de la classe mère qui vous seront utiles pour la plupart de vos <em>bots</em>.</p><h3 id="r-methode-d-initialisation" data-claire-element-id="541385">Méthode d'initialisation</h3><p id="r-541375" data-claire-element-id="541375">En voici le prototype :</p><pre id="r-541376" data-claire-element-id="541376"><code data-claire-semantic="python">ircbot.SingleServerIRCBot.__init__(self, liste_serveurs, pseudonyme, nom_reel et intervalle_reconnexion=60)</code></pre><p id="r-541377" data-claire-element-id="541377">Étudions les paramètres un à un.</p><ul id="r-541384" data-claire-element-id="541384"><li id="r-541379" data-claire-element-id="541379"><p id="r-541378" data-claire-element-id="541378">liste_serveurs est... une liste de serveurs ! :p En effet, la classe utilisée permet de changer de serveur en cours d'exécution, même si nous n'approfondirons pas cette possibilité dans ce tutoriel. Chaque serveur est indiqué par une liste de la forme <code data-claire-semantic="python">[serveur, port, mot_de_passe] </code> qui renseigne les informations à utiliser sur ce serveur, les autres paramètres étant communs à tous les serveurs. Vous n'êtes pas obligés de préciser un mot de passe.</p></li><li id="r-541381" data-claire-element-id="541381"><p id="r-541380" data-claire-element-id="541380">pseudonyme et nom_reel ont, je pense, un nom assez précis pour que vous vous doutiez de ce qu'ils renseignent. Mais savez-vous ce qu'est le nom réel ? Il s'agit d'une information que le serveur envoie aux personnes désirant en savoir plus sur vous par la commande /whois.</p></li><li id="r-541383" data-claire-element-id="541383"><p id="r-541382" data-claire-element-id="541382">intervalle_reconnexion possède aussi un nom équivoque puisqu'il s'agit du temps en secondes pendant lequel le <em>bot</em> doit patienter avant d'essayer de se reconnecter s'il est déconnecté. Ce paramètre est facultatif et vaut 60 par défaut.</p></li></ul><h3 id="r-lancer-le-bot" data-claire-element-id="541387">Lancer le <em>bot</em></h3><p id="r-541386" data-claire-element-id="541386">On ne peut plus simple, le lancement se fait par l'appel de la méthode ircbot.SingleServerIRCBot.start qui ne prend aucun paramètre. :) Notez que cela interrompt l'exécution du script pour se consacrer uniquement au <em>bot</em>, comme une boucle infinie. On peut en sortir en levant une exception, par conséquent l'interruption Ctrl-C arrête le <em>bot</em>.</p><h3 id="r-arreter-le-bot" data-claire-element-id="541389">Arrêter le <em>bot</em></h3><p id="r-541388" data-claire-element-id="541388">La méthode <code data-claire-semantic="python">ircbot.SingleServerIRCBot.die(self, message='') </code> quitte le serveur, déconnecte le <em>bot</em> et met fin à l'exécution du script. C'est en général cette méthode que l'on utilise pour arrêter le <em>bot</em>. Si vous avez besoin de poursuivre l'exécution du script après la déconnexion, utilisez plutôt la méthode <code data-claire-semantic="python">ircbot.SingleServerIRCBot.disconnect(self, message='') </code> suivie de la levée d'une exception que vous intercepterez dans le code principal. Notez que si vous employez cette dernière seule, le <em>bot</em> se reconnectera au bout d'un certain temps précisé à l'initialisation.</p><h3 id="r-repondre-aux-commandes-version" data-claire-element-id="541393">Répondre aux commandes VERSION</h3><p id="r-541390" data-claire-element-id="541390">Par défaut, la réponse envoyée à une commande VERSION est <code data-claire-semantic="python">&quot;ircbot.py by Joel Rosdahl &lt;<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="6d070208012d1f021e090c050143030819">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>&gt;&quot; </code>. Si vous désirez changer cela, vous pouvez réimplémenter la méthode <code data-claire-semantic="python">ircbot.SingleServerIRCBot.get_version(self) </code>, et lui faire retourner le message de votre choix.</p><aside id="r-541392" data-claire-element-id="541392" data-claire-semantic="warning"><p id="r-541391" data-claire-element-id="541391">C'est la méthode <code data-claire-semantic="python">ircbot.SingleServerIRCBot.on_ctcp(self) </code> qui, par défaut, répond automatiquement aux commandes PING et VERSION de cette façon. Pensez-y si vous souhaitez réimplémenter cette méthode.</p></aside>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot">Programmer un bot IRC simplement avec ircbot</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/se-procurer-les-fichiers">
Se procurer les fichiers
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/la-programmation-evenementielle-et-ircbot">
La programmation évènementielle et ircbot
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/application-a-un-bot-simpliste">
Application à un bot simpliste
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/allons-un-peu-plus-loin">
Allons un peu plus loin
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/se-procurer-les-fichiers">
<span class="arrow"></span>
<span class="next">Se procurer les fichiers</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/application-a-un-bot-simpliste">
<span class="next">Application à un bot simpliste</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Applicationunbotsimpliste"></a><h2>Application à un bot simpliste</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/la-programmation-evenementielle-et-ircbot">
<span class="arrow"></span>
<span class="next">La programmation évènementielle et ircbot</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/allons-un-peu-plus-loin">
<span class="next">Allons un peu plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-541396" data-claire-element-id="541396">Pour mieux comprendre tout ce que l'on a vu jusqu'ici, je propose de vous montrer un exemple de <em>bot</em> codé avec ircbot. Il s'agit d'un <em>bot</em> de modération simplifié au maximum, qui exclut les personnes écrivant des insultes dans leurs messages. Analysez bien le code et revoyez au besoin ce qui a déjà été vu, le but étant que vous soyez capables de faire un <em>bot</em> vous-mêmes après avoir vu cet exemple.<br/> J'ai commenté les parties du code qui le nécessitaient, les autres parties sont simples et je ne m'étendrai donc pas dessus.</p><pre id="r-541397" data-claire-element-id="541397"><code data-claire-semantic="python">#!/usr/bin/env python2
# -*- coding: utf8 -*-

import irclib
import ircbot

class BotModeration(ircbot.SingleServerIRCBot):
    def __init__(self):
        &quot;&quot;&quot;
        Constructeur qui pourrait prendre des paramètres dans un &quot;vrai&quot; programme.
        &quot;&quot;&quot;
        ircbot.SingleServerIRCBot.__init__(self, [(&quot;irc.epiknet.org&quot;, 6667)],
                                           &quot;moderator&quot;, &quot;Bot de modération réalisé en Python avec ircbot&quot;)
        self.insultes = [&quot;con&quot;, &quot;pute&quot;] # Liste à agrandir pour un &quot;vrai&quot; programme.

    def on_welcome(self, serv, ev):
        &quot;&quot;&quot;
        Méthode appelée une fois connecté et identifié.
        Notez qu'on ne peut rejoindre les canaux auparavant.
        &quot;&quot;&quot;
        serv.join(&quot;#test-ircbot&quot;)

    def on_pubmsg(self, serv, ev):
        &quot;&quot;&quot;
        Méthode appelée à la réception d'un message, qui exclut son expéditeur s'il
        écrit une insulte.
        &quot;&quot;&quot;
        # Il n'est pas indispensable de passer par des variables
        # Ici elles permettent de clarifier le tout.
        auteur = irclib.nm_to_n(ev.source())
        canal = ev.target()
        message = ev.arguments()[0].lower() # Les insultes sont écrites en minuscules.

        for insulte in self.insultes:
            if insulte in message:
                serv.kick(canal, auteur, &quot;Les insultes ne sont pas autorisées ici !&quot;)
                break

if __name__ == &quot;__main__&quot;:
    BotModeration().start()</code></pre><p id="r-541398" data-claire-element-id="541398">La gestion des insultes pourrait bien sûr être grandement améliorée, mais ce n'est pas le but de cet exemple. Si vous avez tout compris jusqu'ici, vous devriez déjà être capables de programmer des <em>bots</em> intéressants. Si vous estimez ces connaissances suffisantes, vous pouvez arrêter ici le tutoriel. En revanche, si vous souhaitez aller un peu plus loin, passez à la partie suivante. :)</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot">Programmer un bot IRC simplement avec ircbot</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/se-procurer-les-fichiers">
Se procurer les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/la-programmation-evenementielle-et-ircbot">
La programmation évènementielle et ircbot
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/application-a-un-bot-simpliste">
Application à un bot simpliste
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/allons-un-peu-plus-loin">
Allons un peu plus loin
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/la-programmation-evenementielle-et-ircbot">
<span class="arrow"></span>
<span class="next">La programmation évènementielle et ircbot</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/allons-un-peu-plus-loin">
<span class="next">Allons un peu plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Allonsunpeuplusloin"></a><h2>Allons un peu plus loin</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/application-a-un-bot-simpliste">
<span class="arrow"></span>
<span class="next">Application à un bot simpliste</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-541400" data-claire-element-id="541400">Dans cette partie, nous allons voir diverses choses qui pourraient vous être utiles un jour, sans ordre précis. Si une sous-partie ne vous intéresse pas, passez à la suivante. ;)</p><h2 id="r-masques-de-bannissement" data-claire-element-id="541407">Masques de bannissement</h2><p id="r-541401" data-claire-element-id="541401">Si vous êtes opérateur d'un canal, vous avez probablement déjà vu des masques de bannissement. Par exemple, le masque *tuk!*@* englobe les personnes ayant un pseudo finissant par « tuk », quels que soient leur nom d'utilisateur et leur domaine. irclib fournit une fonction pour vérifier si un utilisateur vérifie un masque ainsi formé, dont voici le prototype :</p><pre id="r-541402" data-claire-element-id="541402"><code data-claire-semantic="python">irclib.mask_matches(masque_utilisateur, masque_a_verifier)</code></pre><p id="r-541403" data-claire-element-id="541403">Cette fonction, à l'instar de la fonction re.match, retourne un objet de <em>matches</em> en cas de succès et <code data-claire-semantic="python">None </code> en cas d'échec. À noter que l'objet de <em>matches</em> est inexploitable. En général, on utilise la valeur de retour comme s'il s'agissait d'un booléen, parce que <code data-claire-semantic="python">bool(None) </code> vaut <code data-claire-semantic="python">False </code> et <code data-claire-semantic="python">bool(un_objet_de_matches) </code> vaut <code data-claire-semantic="python">True </code>.<br/> Toujours pour illustrer, une autre session dans le <em>shell</em> Python :</p><pre id="r-541404" data-claire-element-id="541404"><code data-claire-semantic="python">&gt;&gt;&gt; import irclib
&gt;&gt;&gt; masque = 'dentuk!<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="9ce2f8f9f2e8e9f7dcd9ecf5d7b1ded9a5aaa4abdfaeb2fafee4b2eceef3e4fdf8b2f2f9e8">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>'
&gt;&gt;&gt; irclib.mask_matches(masque, '*tuk!*@*')
&lt;_sre.SRE_Match object at 0xb7a6d7c8&gt;
&gt;&gt;&gt; irclib.mask_matches(masque, 'Tomic*!*@*')
&gt;&gt;&gt; bool(irclib.mask_matches(masque, '*tuk!*@*'))
True
&gt;&gt;&gt; bool(irclib.mask_matches(masque, 'Tomic*!*@*'))
False</code></pre><p id="r-541405" data-claire-element-id="541405">Cela peut, par exemple, servir à faire une commande !quit qui dit au <em>bot</em> de partir, mais réservée à son possesseur en identifiant ce dernier par un masque :</p><pre id="r-541406" data-claire-element-id="541406"><code data-claire-semantic="python">class Bot(ircbot.SingleServerIRCBot):
    def on_pubmsg(self, serv, ev):
        masque_auteur = ev.source()
        message = ev.arguments()[0].lower()
        if message == &quot;!quit&quot; and irclib.mask_matches(masque_auteur, &quot;*!*@EpiK-BE9687C2.fbx.proxad.net&quot;):
            self.die()</code></pre><h2 id="r-execution-delimitee-dans-le-temps" data-claire-element-id="541418">Exécution délimitée dans le temps</h2><p id="r-541408" data-claire-element-id="541408">Vous pouvez avoir besoin d'attendre un certain temps avant d'exécuter une action. Par exemple, si vous faites un <em>bot</em> de quiz et que vous devez attendre une minute, avant de changer de question si personne n'a trouvé la question, pour éviter que le jeu ne soit bloqué. Mais si vous utilisiez time.sleep, vous bloqueriez l'exécution et irclib ne pourrait pas traiter les nouveaux évènements pendant ce temps. Pour régler ce problème, irclib propose deux méthodes.</p><h3 id="r-execution-au-bout-d-un-certain-temps" data-claire-element-id="541414">Exécution au bout d'un certain temps</h3><p id="r-541409" data-claire-element-id="541409">Voici la méthode à utiliser :</p><pre id="r-541410" data-claire-element-id="541410"><code data-claire-semantic="python">irclib.ServerConnection.execute_delayed(self, temps, fonction, arguments=())</code></pre><p id="r-541411" data-claire-element-id="541411">Lorsque vous appelez cette méthode, irclib prend en compte qu'il faudra appeler la fonction fonction dans temps secondes avec les arguments arguments, et fera l'appel le moment voulu. temps peut être un nombre entier ou flottant, et arguments est un tuple contenant les arguments à passer à la fonction, qui est vide par défaut.</p><p id="r-541412" data-claire-element-id="541412">Par exemple, si vous étiez sadiques et que vous souhaitiez adapter le code du <em>bot</em> de modération, vu plus haut, en mettant un compte à rebours avant l'exclusion, vous pourriez implémenter la méthode on_pubmsg ainsi : :D</p><pre id="r-541413" data-claire-element-id="541413"><code data-claire-semantic="python">class BotModeration(ircbot.SingleServerIRCBot):
    def on_pubmsg(self, serv, ev):
        auteur = irclib.nm_to_n(ev.source())
        canal = ev.target()
        message = ev.arguments()[0].lower()

        for insulte in self.insultes:
            if insulte in message:
                serv.privmsg(canal, &quot;3...&quot;)
                serv.execute_delayed(1, serv.privmsg, (canal, &quot;2...&quot;))
                serv.execute_delayed(2, serv.privmsg, (canal, &quot;1...&quot;))
                serv.execute_delayed(3, serv.kick, (canal, auteur, &quot;0 !&quot;))
                break</code></pre><h3 id="r-execution-a-un-moment-precis" data-claire-element-id="541417">Exécution à un moment précis</h3><pre id="r-541415" data-claire-element-id="541415"><code data-claire-semantic="python">irclib.ServerConnection.execute_at(self, timestamp, fonction, arguments=())</code></pre><p id="r-541416" data-claire-element-id="541416">Très similaire, cette méthode fonctionne exactement de la même manière. Simplement, le premier paramètre est maintenant un <em>timestamp</em> tel que ceux retournés par <code data-claire-semantic="python">time.time </code> et <code data-claire-semantic="python">time.mktime </code>.</p><h2 id="r-gestion-des-canaux" data-claire-element-id="541608">Gestion des canaux</h2><p id="r-541419" data-claire-element-id="541419">Vous vous rappelez quand je vous ai parlé de la méthode <code data-claire-semantic="python">irclib.ServerConnection.mode(self, canal, mode) </code> ? Il est temps de voir quelques modes qui peuvent être activés et leur effet. :)</p><table id="r-541447" data-claire-element-id="541447"><thead id="r-541425" data-claire-element-id="541425"><tr id="r-541424" data-claire-element-id="541424"><th id="r-541421" data-claire-element-id="541421"><p id="r-541420" data-claire-element-id="541420">Mode</p></th><th id="r-541423" data-claire-element-id="541423"><p id="r-541422" data-claire-element-id="541422">Signification</p></th></tr></thead><tbody id="r-541446" data-claire-element-id="541446"><tr id="r-541430" data-claire-element-id="541430"><td id="r-541427" data-claire-element-id="541427"><p id="r-541426" data-claire-element-id="541426">m</p></td><td id="r-541429" data-claire-element-id="541429"><p id="r-541428" data-claire-element-id="541428">Le canal est modéré, seuls les privilégiés, les <em>half operators</em> et les opérateurs peuvent y parler.</p></td></tr><tr id="r-541435" data-claire-element-id="541435"><td id="r-541432" data-claire-element-id="541432"><p id="r-541431" data-claire-element-id="541431">s</p></td><td id="r-541434" data-claire-element-id="541434"><p id="r-541433" data-claire-element-id="541433">Le canal est secret, il est caché lors d'une commande /whois et il n'est pas présent dans la liste des canaux du serveur.</p></td></tr><tr id="r-541440" data-claire-element-id="541440"><td id="r-541437" data-claire-element-id="541437"><p id="r-541436" data-claire-element-id="541436">p</p></td><td id="r-541439" data-claire-element-id="541439"><p id="r-541438" data-claire-element-id="541438">Le canal est protégé, ce qui a le même effet qu'être secret.</p></td></tr><tr id="r-541445" data-claire-element-id="541445"><td id="r-541442" data-claire-element-id="541442"><p id="r-541441" data-claire-element-id="541441">i</p></td><td id="r-541444" data-claire-element-id="541444"><p id="r-541443" data-claire-element-id="541443">Le canal est accessible uniquement sur invitation.</p></td></tr></tbody></table><p id="r-541448" data-claire-element-id="541448">Si par exemple vous vouliez que le canal devienne modéré, vous devriez utiliser <code data-claire-semantic="python">serv.mode(canal, &quot;+m&quot;) </code>. Pour qu'il ne le soit plus, ce serait <code data-claire-semantic="python">serv.mode(canal, &quot;-m&quot;) </code>. Vous pouvez cumuler l'ajout et / ou le retrait de modes. Par exemple, si vous utilisez <code data-claire-semantic="python">serv.mode(canal, &quot;+is-m&quot;) </code>, alors :</p><ul id="r-541455" data-claire-element-id="541455"><li id="r-541450" data-claire-element-id="541450"><p id="r-541449" data-claire-element-id="541449">le canal n'est désormais accessible que sur invitation ;</p></li><li id="r-541452" data-claire-element-id="541452"><p id="r-541451" data-claire-element-id="541451">il devient secret ;</p></li><li id="r-541454" data-claire-element-id="541454"><p id="r-541453" data-claire-element-id="541453">et il n'est plus modéré.</p></li></ul><p id="r-541456" data-claire-element-id="541456">Viennent ensuite les modes avec paramètres.</p><table id="r-541508" data-claire-element-id="541508"><thead id="r-541464" data-claire-element-id="541464"><tr id="r-541463" data-claire-element-id="541463"><th id="r-541458" data-claire-element-id="541458"><p id="r-541457" data-claire-element-id="541457">Mode</p></th><th id="r-541460" data-claire-element-id="541460"><p id="r-541459" data-claire-element-id="541459">Paramètre</p></th><th id="r-541462" data-claire-element-id="541462"><p id="r-541461" data-claire-element-id="541461">Signification</p></th></tr></thead><tbody id="r-541507" data-claire-element-id="541507"><tr id="r-541471" data-claire-element-id="541471"><td id="r-541466" data-claire-element-id="541466"><p id="r-541465" data-claire-element-id="541465">v</p></td><td id="r-541468" data-claire-element-id="541468"><p id="r-541467" data-claire-element-id="541467">Utilisateur</p></td><td id="r-541470" data-claire-element-id="541470"><p id="r-541469" data-claire-element-id="541469">La personne est privilégiée.</p></td></tr><tr id="r-541478" data-claire-element-id="541478"><td id="r-541473" data-claire-element-id="541473"><p id="r-541472" data-claire-element-id="541472">h</p></td><td id="r-541475" data-claire-element-id="541475"><p id="r-541474" data-claire-element-id="541474">Utilisateur</p></td><td id="r-541477" data-claire-element-id="541477"><p id="r-541476" data-claire-element-id="541476">La personne est un <em>half operators</em>.</p></td></tr><tr id="r-541485" data-claire-element-id="541485"><td id="r-541480" data-claire-element-id="541480"><p id="r-541479" data-claire-element-id="541479">o</p></td><td id="r-541482" data-claire-element-id="541482"><p id="r-541481" data-claire-element-id="541481">Utilisateur</p></td><td id="r-541484" data-claire-element-id="541484"><p id="r-541483" data-claire-element-id="541483">La personne est un opérateur.</p></td></tr><tr id="r-541492" data-claire-element-id="541492"><td id="r-541487" data-claire-element-id="541487"><p id="r-541486" data-claire-element-id="541486">b</p></td><td id="r-541489" data-claire-element-id="541489"><p id="r-541488" data-claire-element-id="541488">Masque de bannissement</p></td><td id="r-541491" data-claire-element-id="541491"><p id="r-541490" data-claire-element-id="541490">Si une personne correspond au masque, elle ne peut pas rejoindre le canal.</p></td></tr><tr id="r-541499" data-claire-element-id="541499"><td id="r-541494" data-claire-element-id="541494"><p id="r-541493" data-claire-element-id="541493">e</p></td><td id="r-541496" data-claire-element-id="541496"><p id="r-541495" data-claire-element-id="541495">Masque d'exception</p></td><td id="r-541498" data-claire-element-id="541498"><p id="r-541497" data-claire-element-id="541497">Si une personne correspond au masque, les bannissements ne l'empêchent pas de rejoindre le canal.</p></td></tr><tr id="r-541506" data-claire-element-id="541506"><td id="r-541501" data-claire-element-id="541501"><p id="r-541500" data-claire-element-id="541500">k</p></td><td id="r-541503" data-claire-element-id="541503"><p id="r-541502" data-claire-element-id="541502">Clé</p></td><td id="r-541505" data-claire-element-id="541505"><p id="r-541504" data-claire-element-id="541504">Il faut connaître la clé pour rejoindre le canal.</p></td></tr></tbody></table><p id="r-541509" data-claire-element-id="541509">Mettons que vous vouliez que bouh devienne <em>half operator</em>. La commande serait alors <code data-claire-semantic="python">serv.mode(canal, &quot;+h bouh&quot;) </code>. Pour qu'il ne le soit plus, ce serait <code data-claire-semantic="python">serv.mode(canal, &quot;-h bouh&quot;) </code>. Là aussi, vous pouvez combiner les modes, en séparant les paramètres par des espaces et en les mettant dans l'ordre où les modes correspondants apparaissent. Par exemple, voici ce que fait le code <code data-claire-semantic="python">serv.mode(canal, &quot;+ohhm-v TomicBomb bouh A-dream bouletman&quot;) </code> en lisant de gauche à droite :</p><ul id="r-541518" data-claire-element-id="541518"><li id="r-541511" data-claire-element-id="541511"><p id="r-541510" data-claire-element-id="541510">TomicBomb devient opérateur ;</p></li><li id="r-541513" data-claire-element-id="541513"><p id="r-541512" data-claire-element-id="541512">bouh et A-dream deviennent <em>half operators</em> ;</p></li><li id="r-541515" data-claire-element-id="541515"><p id="r-541514" data-claire-element-id="541514">le canal devient modéré ;</p></li><li id="r-541517" data-claire-element-id="541517"><p id="r-541516" data-claire-element-id="541516">et bouletman perd son statut privilégié.</p></li></ul><p id="r-541519" data-claire-element-id="541519">ircbot définit une classe pour savoir qui est présent sur un canal et quels modes y sont activés, la classe ircbot.Channel. Nous allons voir les méthodes correspondant aux modes étudiés plus haut, dans des tableaux pour changer. :lol:</p><table id="r-541567" data-claire-element-id="541567"><thead id="r-541529" data-claire-element-id="541529"><tr id="r-541528" data-claire-element-id="541528"><th id="r-541521" data-claire-element-id="541521"><p id="r-541520" data-claire-element-id="541520">En français</p></th><th id="r-541523" data-claire-element-id="541523"><p id="r-541522" data-claire-element-id="541522">En anglais</p></th><th id="r-541525" data-claire-element-id="541525"><p id="r-541524" data-claire-element-id="541524">Liste des...</p></th><th id="r-541527" data-claire-element-id="541527"><p id="r-541526" data-claire-element-id="541526">pseudonyme en est-il un ?</p></th></tr></thead><tbody id="r-541566" data-claire-element-id="541566"><tr id="r-541538" data-claire-element-id="541538"><td id="r-541531" data-claire-element-id="541531"><p id="r-541530" data-claire-element-id="541530">Utilisateurs</p></td><td id="r-541533" data-claire-element-id="541533"><p id="r-541532" data-claire-element-id="541532"><em>Users</em></p></td><td id="r-541535" data-claire-element-id="541535"><p id="r-541534" data-claire-element-id="541534"><code data-claire-semantic="python">irclib.Channel.users(self)</code></p></td><td id="r-541537" data-claire-element-id="541537"><p id="r-541536" data-claire-element-id="541536"><code data-claire-semantic="python">irclib.Channel.has_user(self, pseudonyme)</code></p></td></tr><tr id="r-541547" data-claire-element-id="541547"><td id="r-541540" data-claire-element-id="541540"><p id="r-541539" data-claire-element-id="541539">Privilégiés</p></td><td id="r-541542" data-claire-element-id="541542"><p id="r-541541" data-claire-element-id="541541"><em>Voices</em></p></td><td id="r-541544" data-claire-element-id="541544"><p id="r-541543" data-claire-element-id="541543"><code data-claire-semantic="python">irclib.Channel.voiced(self)</code></p></td><td id="r-541546" data-claire-element-id="541546"><p id="r-541545" data-claire-element-id="541545"><code data-claire-semantic="python">irclib.Channel.is_voiced(self, pseudonyme)</code></p></td></tr><tr id="r-541556" data-claire-element-id="541556"><td id="r-541549" data-claire-element-id="541549"><p id="r-541548" data-claire-element-id="541548">« Demi-opérateurs »</p></td><td id="r-541551" data-claire-element-id="541551"><p id="r-541550" data-claire-element-id="541550"><em>Half operators</em></p></td><td id="r-541553" data-claire-element-id="541553"><p id="r-541552" data-claire-element-id="541552"><code data-claire-semantic="python">irclib.Channel.halfopers(self)</code></p></td><td id="r-541555" data-claire-element-id="541555"><p id="r-541554" data-claire-element-id="541554"><code data-claire-semantic="python">irclib.Channel.is_halfoper(self, pseudonyme)</code></p></td></tr><tr id="r-541565" data-claire-element-id="541565"><td id="r-541558" data-claire-element-id="541558"><p id="r-541557" data-claire-element-id="541557">Opérateurs</p></td><td id="r-541560" data-claire-element-id="541560"><p id="r-541559" data-claire-element-id="541559"><em>Operators</em></p></td><td id="r-541562" data-claire-element-id="541562"><p id="r-541561" data-claire-element-id="541561"><code data-claire-semantic="python">irclib.Channel.opers(self)</code></p></td><td id="r-541564" data-claire-element-id="541564"><p id="r-541563" data-claire-element-id="541563"><code data-claire-semantic="python">irclib.Channel.is_oper(self, pseudonyme)</code></p></td></tr></tbody></table><aside id="r-541569" data-claire-element-id="541569" data-claire-semantic="information"><p id="r-541568" data-claire-element-id="541568">Les utilisateurs regroupent à la fois les utilisateurs lambda, les privilégiés, les <em>half operators</em> et les opérateurs.<br/> Les méthodes en rapport avec les <em>half operators</em> ne sont présentes que dans la version modifiée ; dans la version publique, celles-ci sont situées dans la liste des utilisateurs avec le préfixe %.</p></aside><table id="r-541602" data-claire-element-id="541602"><thead id="r-541575" data-claire-element-id="541575"><tr id="r-541574" data-claire-element-id="541574"><th id="r-541571" data-claire-element-id="541571"><p id="r-541570" data-claire-element-id="541570">Le canal est-il...</p></th><th id="r-541573" data-claire-element-id="541573"><p id="r-541572" data-claire-element-id="541572"><code data-claire-semantic="python">irclib.Channel.</code></p></th></tr></thead><tbody id="r-541601" data-claire-element-id="541601"><tr id="r-541580" data-claire-element-id="541580"><td id="r-541577" data-claire-element-id="541577"><p id="r-541576" data-claire-element-id="541576">... modéré ?</p></td><td id="r-541579" data-claire-element-id="541579"><p id="r-541578" data-claire-element-id="541578"><code data-claire-semantic="python">is_moderated(self)</code></p></td></tr><tr id="r-541585" data-claire-element-id="541585"><td id="r-541582" data-claire-element-id="541582"><p id="r-541581" data-claire-element-id="541581">... secret ?</p></td><td id="r-541584" data-claire-element-id="541584"><p id="r-541583" data-claire-element-id="541583"><code data-claire-semantic="python">is_secret(self)</code></p></td></tr><tr id="r-541590" data-claire-element-id="541590"><td id="r-541587" data-claire-element-id="541587"><p id="r-541586" data-claire-element-id="541586">... protégé ?</p></td><td id="r-541589" data-claire-element-id="541589"><p id="r-541588" data-claire-element-id="541588"><code data-claire-semantic="python">is_protected(self)</code></p></td></tr><tr id="r-541595" data-claire-element-id="541595"><td id="r-541592" data-claire-element-id="541592"><p id="r-541591" data-claire-element-id="541591">... accessible uniquement sur invitation ?</p></td><td id="r-541594" data-claire-element-id="541594"><p id="r-541593" data-claire-element-id="541593"><code data-claire-semantic="python">is_invite_only(self)</code></p></td></tr><tr id="r-541600" data-claire-element-id="541600"><td id="r-541597" data-claire-element-id="541597"><p id="r-541596" data-claire-element-id="541596">... protégé par une clé ?</p></td><td id="r-541599" data-claire-element-id="541599"><p id="r-541598" data-claire-element-id="541598"><code data-claire-semantic="python">has_key(self)</code></p></td></tr></tbody></table><p id="r-541603" data-claire-element-id="541603">Vous pouvez récupérer la clé du canal avec la méthode <code data-claire-semantic="python">irclib.Channel.key(self) </code>, qui retourne <code data-claire-semantic="python">None </code> s'il n'y en a pas. Pour ceux qui préfèrent utiliser les noms des modes plutôt que de longs noms de méthodes, la classe prévoit une méthode <code data-claire-semantic="python">irclib.Channel.has_mode(self, mode) </code>.<br/> Maintenant que l'on a vu ce que permettait la classe, il serait bon de l'utiliser. ^^ La classe mère ircbot.SingleServerIRCBot possède un attribut channels qui est un dictionnaire faisant correspondre un canal à un objet ircbot.Channel, lequel est mis à jour automatiquement suivant les évènements. :) <br/> Retournons donc voir notre <em>bot</em> de modération pour lui interdire d'exclure les membres privilégiés :</p><pre id="r-541604" data-claire-element-id="541604"><code data-claire-semantic="python">class BotModeration(ircbot.SingleServerIRCBot):
    def on_pubmsg(self, serv, ev):
        auteur = irclib.nm_to_n(ev.source())
        canal = (ev.target(), self.channels[ev.target()]) # tuple (nom, ircbot.Channel)
        message = ev.arguments()[0].lower()

        if not canal[1].is_voiced(auteur) and not canal[1].is_halfoper(auteur) and not canal[1].is_oper(auteur):
            for insulte in self.insultes:
                if insulte in message:
                    serv.kick(canal[0], auteur, &quot;Les insultes ne sont pas autorisées ici !&quot;)
                    break</code></pre><p id="r-541605" data-claire-element-id="541605">Vous devriez maintenant pouvoir faire le <em>bot</em> IRC que vous souhaitez. Vous pouvez compléter ce tutoriel en lisant la documentation et / ou le code des modules étudiés, ou en vous renseignant sur <a href="http://www.irchelp.org/irchelp/rfc/rfc.html">le protocole IRC</a>. Laissez libre cours à votre imagination, et amusez-vous bien ! ;)</p><div id="r-541607" data-claire-element-id="541607"><p id="r-541606" data-claire-element-id="541606"><em>Les images 16x16 associées aux serveurs, utilisateurs et canaux dans le tableau des évènements proviennent de <a href="http://www.famfamfam.com/">http://www.famfamfam.com/</a>.</em></p></div>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot">Programmer un bot IRC simplement avec ircbot</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/se-procurer-les-fichiers">
Se procurer les fichiers
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/la-programmation-evenementielle-et-ircbot">
La programmation évènementielle et ircbot
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/application-a-un-bot-simpliste">
Application à un bot simpliste
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/allons-un-peu-plus-loin">
Allons un peu plus loin
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmer-un-bot-irc-simplement-avec-ircbot/application-a-un-bot-simpliste">
<span class="arrow"></span>
<span class="next">Application à un bot simpliste</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/rogrammer-un-bot-irc-simplement-avec-ircbot.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 00:30:07 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rogrammer-un-bot-irc-simplement-avec-ircbot.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:18:43 GMT -->
</html>