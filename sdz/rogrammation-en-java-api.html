<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/rogrammation-en-java-api.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 03:08:01 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rogrammation-en-java-api.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:41:33 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Programmation en Java (API)</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/programmation-en-java-api.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Programmation en Java (API)</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#ProgrammationenJavaAPI">Programmation en Java (API)</a><br/><a href="#Enpremierlabasededonnes">En premier : la base de données</a><br/><a href="#Unebasededonnesqusaco">Une base de données, quésaco ?</a><br/><a href="#Laquelleutiliser">Laquelle utiliser</a><br/><a href="#InstallationdePostgreSQL">Installation de PostgreSQL</a><br/><a href="#PostgreSQL">PostgreSQL</a><br/><a href="#PrparersaBDD">Préparer sa BDD</a><br/><a href="#CrerlaBDD">Créer la BDD</a><br/><a href="#Crersestables">Créer ses tables</a><br/><a href="#SeconnectersaBDD">Se connecter à sa BDD</a><br/><a href="#Faisonslepoint">Faisons le point</a><br/><a href="#ConnexionEs-tul">Connexion ! Es-tu là ?</a><br/><a href="#FouillerdanssaBDD">Fouiller dans sa BDD</a><br/><a href="#LecoupleStatement-ResultSet">Le couple Statement - ResultSet</a><br/><a href="#Commentafonctionne">Comment ça fonctionne</a><br/><a href="#Entranons-nous">Entraînons-nous</a><br/><a href="#Allonsunpeuplusloin">Allons un peu plus loin</a><br/><a href="#Statement">Statement</a><br/><a href="#Lesrequtesprpares">Les requêtes préparées</a><br/><a href="#ResultSet2leretour">ResultSet 2 : le retour</a><br/><a href="#Aprslalecturel039dition">Après la lecture : l&#039;édition</a><br/><a href="#Modifierdesdonnes">Modifier des données</a><br/><a href="#Statementtoujoursplusfort">Statement, toujours plus fort</a><br/><a href="#Grerlestransactionsmanuellement">Gérer les transactions manuellement</a><br/><a href="#N039avoirqu039uneinstancedesaconnexion">N&#039;avoir qu&#039;une instance de sa connexion</a><br/><a href="#Pourquoiseconnecterqu039uneseulefois">Pourquoi se connecter qu&#039;une seule fois ?</a><br/><a href="#Lepatternsingleton">Le pattern singleton</a><br/><a href="#Lesingletondanstouscestats">Le singleton dans tous ces états</a><br/><a href="#TPuntesteurderequte">TP : un testeur de requête</a><br/><a href="#Cahierdescharges">Cahier des charges</a><br/><a href="#Quelquescapturesd039cran">Quelques captures d&#039;écran</a><br/><a href="#Correction">Correction</a><br/><a href="#LepatternDAO1_2">Le pattern DAO (1/2)</a><br/><a href="#Avanttoutechose">Avant toute chose</a><br/><a href="#LepatternDAOdfinition">Le pattern DAO : définition</a><br/><a href="#Premiertest">Premier test</a><br/><a href="#LepatternDAO2_2">Le pattern DAO (2/2)</a><br/><a href="#Lepatternfactory">Le pattern factory</a><br/><a href="#FabriquervosDAO">Fabriquer vos DAO</a><br/><a href="#D039uneusineunemultinationale">D&#039;une usine à une multinationale</a><br/></div>
<a name="ProgrammationenJavaAPI"></a><h2>Programmation en Java (API)</h2><div class="content" role="article">
<p id="r-647901" data-claire-element-id="647901">Bonjour amis ZérOs.</p><p id="r-647902" data-claire-element-id="647902">Me revoici pour un autre big-tuto.<br/> Comme toujours, celui-ci concerne Java. Si vous ne connaissez rien à ce langage, je vous invite à lire <a href="http://www.siteduzero.com/tutoriel-3-10601-programmation-en-java.html">ce tuto</a>.<br/> Par contre, si c'est à un point particulier du langage, aux API standards présentes dans le JDK que vous souhaitez vous intéresser, vous êtes à la bonne place !</p><p id="r-647903" data-claire-element-id="647903">Nous allons voir ce qu'il vous faut pour utiliser des bases de données, comment faire de la programmation réseau... Nous nous baladerons aussi dans quelques <em>frameworks</em> (boîte à outils).<br/> Tout ceci est présent dans le JDK, dans les API standards. Je vous propose d'en faire un tour d'horizon, le tout en partant de ZérO, bien évidemment ! ;)</p>
</div>
<div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1358423835269-0" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1358423835269-0');
        });
    }
    </script>
</div><a name="Enpremierlabasededonnes"></a><h2>En premier : la base de données</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
<span class="next">Une base de données, quésaco ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-647906" data-claire-element-id="647906">Avant de voir comment Java utilise les bases de données, il nous en faut une !<br/> Sinon, vous connaissez le proverbe : <strong><em>pas de bras, pas de chocolat...</em></strong></p><p id="r-647907" data-claire-element-id="647907">Nous allons donc voir à quoi sert une base de données, mais aussi en installer une afin de pouvoir illustrer la suite de cette partie.</p><p id="r-647908" data-claire-element-id="647908">Allez ! Zou...</p>
</div><a name="Unebasededonnesqusaco"></a><h2>Une base de données, quésaco ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">
<span class="arrow"></span>
<span class="next">En premier : la base de données</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
<span class="next">Laquelle utiliser</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-une-base-de-donnees-quesaco" data-claire-element-id="647934">Une base de données, quésaco ?</h4><p id="r-647909" data-claire-element-id="647909">Lorsque vous réalisez un logiciel, un site web, ou je ne sais quoi d'autre, vous êtes confrontés, à un moment ou un autre, à une question : <em><strong>comment vais-je faire pour sauvegarder mes données ?</strong></em></p><p id="r-647910" data-claire-element-id="647910">Les bases de données (ou BDD) sont une alternative sûre et pérenne.<br/> Ce système de stockage des données existe depuis très longtemps et a fait ses preuves ! Ceux qui souhaiteraient en savoir plus sur les BDD peuvent suivre <a href="http://fr.wikipedia.org/wiki/Base_de_données">ce lien</a>.</p><div id="r-647912" data-claire-element-id="647912" data-claire-semantic="question"><p id="r-647911" data-claire-element-id="647911">Mais concrètement, comment ça fonctionne ?</p></div><p id="r-647913" data-claire-element-id="647913">Résumé à l'extrême, il s'agit d'un système de fichiers qui contiennent les données de votre application. Mais ces fichiers sont totalement transparents pour l'utilisateur d'une base de données, donc, <strong>totalement transparents pour VOUS !</strong></p><p id="r-647914" data-claire-element-id="647914">Ces données sont ordonnées par &quot;<strong>tables</strong>&quot;, c'est-à-dire par regroupements de plusieurs valeurs.<br/> C'est vous qui allez créer vos propres tables, en spécifiant quelles données vous souhaitez y intégrer.</p><p id="r-647915" data-claire-element-id="647915">En fait, imaginez qu'une base de données est une gigantesque armoire à tiroirs dont vous spécifiez les noms et qui contiendront une multitude de fiches dont vous spécifierez aussi leur contenu !</p><p id="r-647916" data-claire-element-id="647916">Je sais, un schéma est toujours le bienvenu :</p><figure id="r-647918" data-claire-element-id="647919"><img id="r-647917" data-claire-element-id="647917" src="medias/uploads.siteduzero.com_files_169001_170000_169892.png" alt="Image utilisateur"/></figure><p id="r-647920" data-claire-element-id="647920">Dans cette base de données, nous avons deux tables : une qui a pour rôle de stocker des personnes avec noms, prénoms et âges, et une table qui s'occupe de stocker des pays, avec leur nom et leur capitale !</p><p id="r-647921" data-claire-element-id="647921">Si je reprends ma comparaison de tout à l'heure, la BDD symbolise l'armoire, chaque table un tiroir et chaque ligne de chaque table, une fiche de ce tiroir !<br/> Ensuite, ce qui est formidable avec les BDD, c'est que vous pouvez les interroger en leur posant des questions via un langage.<br/> Vous pouvez leur demander des trucs comme :</p><ul id="r-647928" data-claire-element-id="647928"><li id="r-647923" data-claire-element-id="647923"><p id="r-647922" data-claire-element-id="647922">donne-moi la fiche de la table <strong>Personne </strong>pour le nom <em><strong>HERBY</strong></em>;</p></li><li id="r-647925" data-claire-element-id="647925"><p id="r-647924" data-claire-element-id="647924">donne-moi la fiche de la table <strong>Pays </strong>pour le pays <em><strong>France</strong></em>;</p></li><li id="r-647927" data-claire-element-id="647927"><p id="r-647926" data-claire-element-id="647926">...</p></li></ul><p id="r-647929" data-claire-element-id="647929">Le langage qui vous permet d'interroger des bases de données est le langage SQL, où, en français, &quot;Langage de Requête Structurées&quot;. Nous aurons l'occasion d'en faire un bref rappel lors du chapitre suivant... ;)</p><p id="r-647930" data-claire-element-id="647930">Ainsi, grâce aux BDD, vos données sont stockées, classées par vos soins et identifiables facilement sans avoir à gérer notre propre système de fichiers.</p><div id="r-647932" data-claire-element-id="647932" data-claire-semantic="question"><p id="r-647931" data-claire-element-id="647931">C'est vrai que c'est alléchant, mais comment fait-on pour s'en servir ? On doit télécharger quelque chose ?</p></div><p id="r-647933" data-claire-element-id="647933">Oui, deux choses en fait : la base de données et ce qu'on appelle le SGBD.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">
<span class="arrow"></span>
<span class="next">En premier : la base de données</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
<span class="next">Laquelle utiliser</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Laquelleutiliser"></a><h2>Laquelle utiliser</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
<span class="arrow"></span>
<span class="next">Une base de données, quésaco ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
<span class="next">Installation de PostgreSQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-laquelle-utiliser" data-claire-element-id="647961">Laquelle utiliser</h4><p id="r-647935" data-claire-element-id="647935">Ben... il existe plusieurs bases de données et toutes sont utilisées par beaucoup de développeurs !<br/> En voici une liste non exhaustive recensant les principales :</p><ul id="r-647948" data-claire-element-id="647948"><li id="r-647937" data-claire-element-id="647937"><p id="r-647936" data-claire-element-id="647936"><a href="http://www.postgresql.org/">PostgreSQL</a></p></li><li id="r-647939" data-claire-element-id="647939"><p id="r-647938" data-claire-element-id="647938"><a href="http://www.mysql.fr/">MySQL</a></p></li><li id="r-647941" data-claire-element-id="647941"><p id="r-647940" data-claire-element-id="647940"><a href="http://www.microsoft.com/france/serveur/sql/default.mspx">SQL Server</a></p></li><li id="r-647943" data-claire-element-id="647943"><p id="r-647942" data-claire-element-id="647942"><a href="http://www.oracle.com/">Oracle</a></p></li><li id="r-647945" data-claire-element-id="647945"><p id="r-647944" data-claire-element-id="647944"><a href="http://www.microsoft.com/france/office/2007/programs/access/overview.mspx">Access</a></p></li><li id="r-647947" data-claire-element-id="647947"><p id="r-647946" data-claire-element-id="647946">...</p></li></ul><p id="r-647949" data-claire-element-id="647949">Toutes permettent de faire ce que je vous expliquais plus haut.<br/> Chacune a des spécificités :</p><ul id="r-647958" data-claire-element-id="647958"><li id="r-647951" data-claire-element-id="647951"><p id="r-647950" data-claire-element-id="647950">certaines sont payantes (Oracle) ;</p></li><li id="r-647953" data-claire-element-id="647953"><p id="r-647952" data-claire-element-id="647952">certaines sont assez laxistes avec les données qu'elles contiennent (MySQL) ;</p></li><li id="r-647955" data-claire-element-id="647955"><p id="r-647954" data-claire-element-id="647954">d'autres ont un système de gestion très simple à utiliser (MySQL) ;</p></li><li id="r-647957" data-claire-element-id="647957"><p id="r-647956" data-claire-element-id="647956">...</p></li></ul><p id="r-647959" data-claire-element-id="647959">C'est à vous de faire votre choix en regardant sur le web ce que les utilisateurs en disent.<br/> Sinon, il y a un comparatif intéressant, <a href="http://fadace.developpez.com/sgbdcmp/">ici</a>.</p><p id="r-647960" data-claire-element-id="647960">Pour le tuto sur JDBC, mon choix s'est porté sur PostgreSQL. <br/> Alors continuons.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
<span class="arrow"></span>
<span class="next">Une base de données, quésaco ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
<span class="next">Installation de PostgreSQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="InstallationdePostgreSQL"></a><h2>Installation de PostgreSQL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
<span class="arrow"></span>
<span class="next">Laquelle utiliser</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">
<span class="next">PostgreSQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-installation-de-postgresql-2" data-claire-element-id="648018">Installation de PostgreSQL</h4><p id="r-647962" data-claire-element-id="647962">Vous pouvez télécharger une version de PosteSQL <a href="http://wwwmaster.postgresql.org/download/mirrors-ftp?file=/binary/v8.3.0/win32/postgresql-8.3.0-1.zip">ici.</a><br/> Celle-ci est pour Windows, mais pour les autres OS, vous pouvez faire un tour <a href="http://www.enterprisedb.com/products/pgdownload.do">par-là</a>.</p><p id="r-647963" data-claire-element-id="647963">Ensuite, je vous invite à décompresser l'archive téléchargée et à exécuter ce fichier :</p><figure id="r-647965" data-claire-element-id="647966"><img id="r-647964" data-claire-element-id="647964" src="medias/uploads.siteduzero.com_files_153001_154000_153235.png" alt="Image utilisateur"/></figure><p id="r-647967" data-claire-element-id="647967">À partir de maintenant, si je ne vous spécifie pas de fenêtre particulière, vous pouvez laisser les réglages par défaut.</p><p id="r-647968" data-claire-element-id="647968">L'installation commence en vous demandant votre langue, choisissez la vôtre :</p><figure id="r-647970" data-claire-element-id="647971"><img id="r-647969" data-claire-element-id="647969" src="medias/uploads.siteduzero.com_files_153001_154000_153236.png" alt="Image utilisateur"/></figure><p id="r-647972" data-claire-element-id="647972">On vous demandera, par la suite, de saisir un mot de passe pour l'utilisateur, comme ceci :</p><figure id="r-647974" data-claire-element-id="647975"><img id="r-647973" data-claire-element-id="647973" src="medias/uploads.siteduzero.com_files_153001_154000_153237.png" alt="Image utilisateur"/></figure><p id="r-647976" data-claire-element-id="647976">Et un autre pour le super-administrateur :</p><figure id="r-647978" data-claire-element-id="647979"><img id="r-647977" data-claire-element-id="647977" src="medias/uploads.siteduzero.com_files_153001_154000_153238.png" alt="Image utilisateur"/></figure><p id="r-647980" data-claire-element-id="647980">À la fin de la pré-installation, on vous demandera si vous voulez exécuter le &quot;<em><strong>Stack Builder</strong></em>&quot; ; ce n'est pas nécessaire, ça permet juste d'installer d'autres logiciels en rapport avec PostgreSQL... Nous n'en avons pas besoin. ;)</p><figure id="r-647982" data-claire-element-id="647983"><img id="r-647981" data-claire-element-id="647981" src="medias/uploads.siteduzero.com_files_153001_154000_153239.png" alt="Image utilisateur"/></figure><p id="r-647984" data-claire-element-id="647984">Normalement, le serveur est installé et je dirais même qu'il en est de même pour le SGBD !</p><div id="r-647986" data-claire-element-id="647986" data-claire-semantic="question"><p id="r-647985" data-claire-element-id="647985">Ah bon ?</p></div><p id="r-647987" data-claire-element-id="647987">Oui, regardez dans le menu &quot;<strong>Démarrer</strong>&quot; et allez dans &quot;<strong>Tous les programmes</strong>&quot;, vous devriez avoir ceci dans l'encart &quot;<strong>PostgreSQL 8.3</strong>&quot; :</p><figure id="r-647989" data-claire-element-id="647990"><img id="r-647988" data-claire-element-id="647988" src="medias/uploads.siteduzero.com_files_153001_154000_153240.png" alt="Image utilisateur"/></figure><p id="r-647991" data-claire-element-id="647991">Il y a deux exécutables qui permettent respectivement de lancer le serveur ou de l'arrêter et le dernier, <strong>pgAdmin III</strong>, c'est notre SGBD !</p><p id="r-647992" data-claire-element-id="647992">Lancez-le, nous allons configurer notre serveur.<br/> C'est bon ? Vous êtes prêts ?<br/> Alors, dans le menu &quot;<strong>Fichier</strong>&quot;, choisissez &quot;<strong>Nouveau serveur</strong>&quot; :</p><figure id="r-647994" data-claire-element-id="647995"><img id="r-647993" data-claire-element-id="647993" src="medias/uploads.siteduzero.com_files_153001_154000_153241.png" alt="Image utilisateur"/></figure><p id="r-647996" data-claire-element-id="647996">Ce qui vous amène à ceci :</p><figure id="r-647998" data-claire-element-id="647999"><img id="r-647997" data-claire-element-id="647997" src="medias/uploads.siteduzero.com_files_153001_154000_153242.png" alt="Image utilisateur"/></figure><ul id="r-648008" data-claire-element-id="648008"><li id="r-648001" data-claire-element-id="648001"><p id="r-648000" data-claire-element-id="648000">&quot;<strong>Nom</strong>&quot; correspond au nom de votre base de données ;</p></li><li id="r-648003" data-claire-element-id="648003"><p id="r-648002" data-claire-element-id="648002">&quot;<strong>Hôte</strong>&quot; correspond à l'adresse du serveur sur le réseau ; ici, il est sur votre machine, nous mettons donc &quot;<strong>localhost</strong>&quot; ;</p></li><li id="r-648005" data-claire-element-id="648005"><p id="r-648004" data-claire-element-id="648004">vous n'avez pas besoin de toucher au port normalement, sinon la valeur du screen ;</p></li><li id="r-648007" data-claire-element-id="648007"><p id="r-648006" data-claire-element-id="648006">ensuite, le nom de l'utilisateur et son mot de passe que vous avez défini.</p></li></ul><p id="r-648009" data-claire-element-id="648009">Voilà, vous devriez avoir ceci devant les yeux :</p><figure id="r-648011" data-claire-element-id="648012"><img id="r-648010" data-claire-element-id="648010" src="medias/uploads.siteduzero.com_files_153001_154000_153243.png" alt="Image utilisateur"/></figure><p id="r-648013" data-claire-element-id="648013">Nous reviendrons sur tout ceci, mais vous pouvez lire que votre serveur, nommé &quot;<strong>SDZ</strong>&quot;, a une base de données appelée &quot;<strong>postgres</strong>&quot; qui contient 0 table !</p><p id="r-648014" data-claire-element-id="648014">Simple et efficace !<br/> Voilà, nous avons installé notre serveur, nous allons voir maintenant comment créer une base, des tables mais surtout faire un bref rappel sur ce fameux langage SQL... ^^</p><p id="r-648015" data-claire-element-id="648015">Pas de QCM pour ce chapitre, mais n'y prenez pas trop goût... Tout ceci ne durera pas... :diable:</p><p id="r-648016" data-claire-element-id="648016">Bon, rien de sorcier ici !<br/> La plupart d'entre vous n'a peut-être rien vu de nouveau, mais il fallait partir de ZérO...</p><p id="r-648017" data-claire-element-id="648017">Dès le prochain chapitre, nous allons voir comment Java va &quot;discuter&quot; avec notre base de données...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
<span class="arrow"></span>
<span class="next">Laquelle utiliser</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">
<span class="next">PostgreSQL</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="PostgreSQL"></a><h2>PostgreSQL</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
<span class="arrow"></span>
<span class="next">Installation de PostgreSQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
<span class="next">Préparer sa BDD</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-648020" data-claire-element-id="648020">Alors, maintenant, nous allons aborder la prise en main de cet outil qu'est PostgreSQL !<br/> Dans ce chapitre, nous verrons comment créer une base de données, des tables, ajouter des contraintes de clés et d'intégrités... Enfin bref, tout ce dont vous allez avoir besoin pour suivre au mieux ce tutoriel. Ceci, bien sûr, sans rentrer dans les détails : c'est un tuto sur JDBC, pas sur PostgreSQL ou sur SQL !</p><p id="r-648021" data-claire-element-id="648021">Bon, il y a déjà du taf, mine de rien...</p>
</div><a name="PrparersaBDD"></a><h2>Préparer sa BDD</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">
<span class="arrow"></span>
<span class="next">PostgreSQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
<span class="next">Créer la BDD</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-preparer-sa-bdd" data-claire-element-id="648049">Préparer sa BDD</h4><p id="r-648022" data-claire-element-id="648022">Bon, vous êtes connectés à votre BDD préférée et ce n'est pas parce que j'ai choisi PostgreSQL que vous avez dû en faire autant...<br/> Cependant, celles et ceux qui n'ont pas fait le même choix que moi peuvent aller directement vers le sous-chapitre sur SQL (sauf s'ils ont déjà les bases, qu'ils aillent dans ce cas directement au chapitre suivant...).</p><p id="r-648023" data-claire-element-id="648023">Déjà, les bases de données servent à stocker des informations, ça, vous le savez ! :D <br/> Mais ce que vous ignorez peut-être, c'est que, pour ranger correctement nos informations, nous allons devoir analyser celles-ci... <br/> Ce tuto n'est pas non plus un tuto sur l'analyse combinée avec des diagrammes entités-associations... Dans le jargon, c'est ce dont on se sert pour créer des BDD, enfin, pour organiser les informations (tables et contenu de tables) ! <br/> Nous allons juste poser un thème et nous ferons comme si vous saviez faire tout ça ! :-° <br/> Pour ceux que la réalisation de modèles entités-associations intéressent, vous pouvez faire un tour <a href="http://isi.developpez.com/DeUMLaSQL/">ici</a>.</p><p id="r-648024" data-claire-element-id="648024">Voilà : pour notre base de données, nous allons gérer une école, dont voici les caractéristiques :</p><ul id="r-648033" data-claire-element-id="648033"><li id="r-648026" data-claire-element-id="648026"><p id="r-648025" data-claire-element-id="648025">cette école est composée de classes ;</p></li><li id="r-648028" data-claire-element-id="648028"><p id="r-648027" data-claire-element-id="648027">chaque classe est composée d'élèves ;</p></li><li id="r-648030" data-claire-element-id="648030"><p id="r-648029" data-claire-element-id="648029">chaque classe à un professeur de chaque matière dispensée par cette école ;</p></li><li id="r-648032" data-claire-element-id="648032"><p id="r-648031" data-claire-element-id="648031">un professeur peut enseigner plusieurs matières et exercer ses fonctions sur plusieurs classes.</p></li></ul><p id="r-648034" data-claire-element-id="648034"><strong>Voilà le point ZÉRO de toute base de données !</strong></p><p id="r-648035" data-claire-element-id="648035">Vous vous rendez compte qu'il y a beaucoup d'informations à gérer. Bon, en théorie, nous devrions faire un dictionnaire des données, voir à qui appartient quelle donnée, poursuivre avec une modélisation façon MCD (<em>Modèle Conceptuel de Données</em>) et simplifier le tout suivant certaines règles pour terminer avec un MPD (<em>Modèle Physique de Données</em>). Nous allons raccourcir le processus et je vais fournir un modèle tout fait, que je vais tout de même vous expliquer... :-°</p><figure id="r-648037" data-claire-element-id="648038"><img id="r-648036" data-claire-element-id="648036" src="medias/uploads.siteduzero.com_files_153001_154000_153283.png" alt="Image utilisateur"/></figure><aside id="r-648040" data-claire-element-id="648040" data-claire-semantic="information"><p id="r-648039" data-claire-element-id="648039">Tous ces beaux éléments seront nos futures tables. De plus, les attributs dans celles-ci se nomment des &quot;<strong>champs</strong>&quot;.</p></aside><p id="r-648041" data-claire-element-id="648041">Vous pouvez voir que tous les acteurs mentionnés se trouvent symbolisés dans ce schéma (classe, professeur, élève...). Vous constaterez que ces acteurs ont un attribut nommé '<strong>id</strong>', ceci correspond à son identifiant : c'est un champ de type entier qui s'incrémentera pour chaque nouvelle entrée, c'est aussi grâce à ce champ que nous créons des liens entre nos acteurs.</p><p id="r-648042" data-claire-element-id="648042">Oui... Vous avez remarqué que j'avais colorié des tables en bleu. ^^ <br/> Ces tables ont toutes un champ qui a une spécificité : un champ dont le nom se termine par '<strong>_k</strong>'. <br/> D'abord, vous devez savoir que la flèche signifie '<strong>a un</strong>', de ce fait, un élève '<strong>a une</strong>' classe !</p><div id="r-648044" data-claire-element-id="648044" data-claire-semantic="question"><p id="r-648043" data-claire-element-id="648043">Bon, on te suit, mais pourquoi les autres tables ont deux champs comme ça ?</p></div><p id="r-648045" data-claire-element-id="648045">C'est simple, c'est parce que je vous ai dit qu'un professeur pouvait exercer plusieurs matières : dans ce cas, nous avons besoin de ce qu'on appelle une <strong>table de jointure</strong>.<br/> Ainsi, nous pouvons dire que tel professeur exerce telle ou telle matière et qu'une association prof-matière est assignée à une classe ! ;)</p><aside id="r-648047" data-claire-element-id="648047" data-claire-semantic="information"><p id="r-648046" data-claire-element-id="648046">La donnée que nous utiliserons pour lier des tables n'est autre que l'identifiant : <strong>id</strong>.</p></aside><p id="r-648048" data-claire-element-id="648048">De plus - difficile de ne pas avoir vu ça - chaque champ à un type (entier, double, date, boolean...).<br/> Nous avons tout ce dont nous avons besoin pour construire notre BDD !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">
<span class="arrow"></span>
<span class="next">PostgreSQL</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
<span class="next">Créer la BDD</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CrerlaBDD"></a><h2>Créer la BDD</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
<span class="arrow"></span>
<span class="next">Préparer sa BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
<span class="next">Créer ses tables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-creer-la-bdd" data-claire-element-id="648068">Créer la BDD</h4><p id="r-648050" data-claire-element-id="648050">Pour cette opération, rien de plus simple ! :D <br/> pgAdmin met à votre disposition un outil qui facilite la création de BDD et de tables (créer ses BDD et ses tables à la mano, avec SQL, c'est un peu fastidieux...).</p><p id="r-648051" data-claire-element-id="648051">Pour créer une nouvelle base de données, il vous suffit de faire un clic droit sur &quot;<strong>Base de données</strong>&quot; :</p><figure id="r-648053" data-claire-element-id="648054"><img id="r-648052" data-claire-element-id="648052" src="medias/uploads.siteduzero.com_files_153001_154000_153316.png" alt="Image utilisateur"/></figure><p id="r-648055" data-claire-element-id="648055">Vous devriez arriver sur cette pop-up :</p><figure id="r-648057" data-claire-element-id="648058"><img id="r-648056" data-claire-element-id="648056" src="medias/uploads.siteduzero.com_files_153001_154000_153315.png" alt="Image utilisateur"/></figure><p id="r-648059" data-claire-element-id="648059">Renseignez le nom de la base de données et choisissez l'encodage UTF-8. Cet encodage correspond à un jeu de caractères étendu qui autorise les caractères spéciaux !<br/> Une fois ceci fait, vous devriez avoir quelque chose comme ça :</p><figure id="r-648061" data-claire-element-id="648062"><img id="r-648060" data-claire-element-id="648060" src="medias/uploads.siteduzero.com_files_153001_154000_153319.png" alt="Image utilisateur"/></figure><p id="r-648063" data-claire-element-id="648063">Vous pouvez voir votre nouvelle base de données ainsi que le script SQL permettant de créer cette base.</p><p id="r-648064" data-claire-element-id="648064">Il ne nous reste plus qu'à créer les tables avec le bon type de données...<br/> Même procédure que pour la séquence, un clic droit sur le noeud &quot;<strong>table</strong>&quot; cette fois, comme ceci :</p><figure id="r-648066" data-claire-element-id="648067"><img id="r-648065" data-claire-element-id="648065" src="medias/uploads.siteduzero.com_files_153001_154000_153322.png" alt="Image utilisateur"/></figure>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
<span class="arrow"></span>
<span class="next">Préparer sa BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
<span class="next">Créer ses tables</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Crersestables"></a><h2>Créer ses tables</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
<span class="arrow"></span>
<span class="next">Créer la BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">
<span class="next">Se connecter à sa BDD</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-creer-ses-tables" data-claire-element-id="648135">Créer ses tables</h4><p id="r-648069" data-claire-element-id="648069">Nous allons maintenant nous attaquer à la création de nos tables afin de pouvoir travailler...<br/> Je vais vous montrer comment faire une table simple, histoire de... Et, pour les plus fainéants, je vous fournirai le script SQL qui finira la création des tables. ;)</p><p id="r-648070" data-claire-element-id="648070">Nous commencerons par la table &quot;<strong>classe</strong>&quot;, vu que c'est l'une des tables qui n'a besoin d'aucun lien vers une autre table... ;) <br/> Comme dit plus haut, il vous suffit de faire un clic droit sur &quot;<strong>Table</strong>&quot;</p><p id="r-648071" data-claire-element-id="648071">Ensuite, PostgreSQL vous demande des informations sur votre future table :</p><ul id="r-648080" data-claire-element-id="648080"><li id="r-648073" data-claire-element-id="648073"><p id="r-648072" data-claire-element-id="648072">son nom ;</p></li><li id="r-648075" data-claire-element-id="648075"><p id="r-648074" data-claire-element-id="648074">le nom de ses champs ;</p></li><li id="r-648077" data-claire-element-id="648077"><p id="r-648076" data-claire-element-id="648076">le type de ses champs ;</p></li><li id="r-648079" data-claire-element-id="648079"><p id="r-648078" data-claire-element-id="648078">...</p></li></ul><p id="r-648081" data-claire-element-id="648081">Ici, vous voyez le moment où vous devez renseigner le nom de votre table.</p><figure id="r-648083" data-claire-element-id="648084"><img id="r-648082" data-claire-element-id="648082" src="medias/uploads.siteduzero.com_files_153001_154000_153994.png" alt="Image utilisateur"/></figure><p id="r-648085" data-claire-element-id="648085">Ensuite, vous ajouterez des champs (j'ai ajouté des préfixes à mes champs pour ne pas avoir trop d'ambiguïté dans mes requêtes SQL) :</p><figure id="r-648087" data-claire-element-id="648088"><img id="r-648086" data-claire-element-id="648086" src="medias/uploads.siteduzero.com_files_153001_154000_153995.png" alt="Image utilisateur"/></figure><figure id="r-648090" data-claire-element-id="648091"><img id="r-648089" data-claire-element-id="648089" src="medias/uploads.siteduzero.com_files_153001_154000_153996.png" alt="Image utilisateur"/></figure><aside id="r-648093" data-claire-element-id="648093" data-claire-semantic="information"><p id="r-648092" data-claire-element-id="648092">Le champ &quot;cls_id&quot; est de type &quot;serial&quot; afin que celui-ci utilise une séquence. Nous lui ajouterons en plus une contrainte de clé primaire.</p></aside><p id="r-648094" data-claire-element-id="648094">Ce champ est un &quot;<strong>character varying</strong>&quot; de taille 64 : ce champ pourra donc contenir 64 caractères.</p><p id="r-648095" data-claire-element-id="648095">Nous mettons maintenant la contrainte de clé primaire sur notre identifieur :</p><figure id="r-648097" data-claire-element-id="648098"><img id="r-648096" data-claire-element-id="648096" src="medias/uploads.siteduzero.com_files_153001_154000_153998.png" alt="Image utilisateur"/></figure><p id="r-648099" data-claire-element-id="648099">Vous avez vu comment on crée une table avec PostgreSQL, mais je ne vais pas vous demander de faire ça pour chacune d'entre elles. :-° <br/> Je ne suis pas vache à ce point... Nous devons voir comment on utilise les BDD avec Java, pas avec le SGBD...</p><p id="r-648100" data-claire-element-id="648100">Cliquez sur &quot;<strong>Ajouter</strong>&quot;.</p><figure id="r-648102" data-claire-element-id="648103"><img id="r-648101" data-claire-element-id="648101" src="medias/uploads.siteduzero.com_files_153001_154000_153999.png" alt="Image utilisateur"/></figure><p id="r-648104" data-claire-element-id="648104">Choisissez la colonne &quot;<strong>cls_id</strong>&quot; et cliquez sur &quot;<strong>Ajouter</strong>&quot;.<br/> Validez le tout.</p><p id="r-648105" data-claire-element-id="648105">Maintenant le deuxième champ :</p><figure id="r-648107" data-claire-element-id="648108"><img id="r-648106" data-claire-element-id="648106" src="medias/uploads.siteduzero.com_files_153001_154000_153997.png" alt="Image utilisateur"/></figure><p id="r-648109" data-claire-element-id="648109">Voici le code SQL de cette création de table :</p><figure id="r-648111" data-claire-element-id="648112"><img id="r-648110" data-claire-element-id="648110" src="medias/uploads.siteduzero.com_files_153001_154000_154000.png" alt="Image utilisateur"/></figure><p id="r-648113" data-claire-element-id="648113">Je ne vais pas vous faire créer toutes les tables de cette manière... Le tuto est censé vous apprendre à utiliser les BDD avec Java...</p><p id="r-648114" data-claire-element-id="648114">Voici donc <a href="medias/www.siteduzero.com_uploads_fr_ftp_cysboy_api_backEcole.zip">un fichier contenant le script SQL</a> de création des tables restantes ainsi que leurs contenus.<br/> Sympa, le gars. ^^</p><aside id="r-648116" data-claire-element-id="648116" data-claire-semantic="information"><p id="r-648115" data-claire-element-id="648115">Le dit fichier est dans une archive, pensez à la décompresser avant... :-°</p></aside><p id="r-648117" data-claire-element-id="648117">Il ne vous reste plus qu'à ouvrir le fichier avec PostgreSQL en allant dans l'éditeur de requêtes SQL :</p><figure id="r-648119" data-claire-element-id="648120"><img id="r-648118" data-claire-element-id="648118" src="medias/uploads.siteduzero.com_files_155001_156000_155521.png" alt="Image utilisateur"/></figure><p id="r-648121" data-claire-element-id="648121">Vous pouvez à présent ouvrir le fichier que je vous ai fourni en faisant &quot;<strong>Fichier / Ouvrir</strong>&quot; et choisir le fichier <strong>.sql</strong></p><figure id="r-648123" data-claire-element-id="648124"><img id="r-648122" data-claire-element-id="648122" src="medias/uploads.siteduzero.com_files_155001_156000_155519.png" alt="Image utilisateur"/></figure><p id="r-648125" data-claire-element-id="648125">Maintenant, exécutez la requête en cliquant sur ce bouton (vous pouvez aussi appuyer sur <strong>F5</strong>) :</p><figure id="r-648127" data-claire-element-id="648128"><img id="r-648126" data-claire-element-id="648126" src="medias/uploads.siteduzero.com_files_155001_156000_155521.png" alt="Image utilisateur"/></figure><p id="r-648129" data-claire-element-id="648129">Fermez l'éditeur de requête. Vous avez toute la base créée et, en plus, il y a des données. :magicien:</p><figure id="r-648131" data-claire-element-id="648132"><img id="r-648130" data-claire-element-id="648130" src="medias/uploads.siteduzero.com_files_155001_156000_155522.png" alt="Image utilisateur"/></figure><p id="r-648133" data-claire-element-id="648133">Je vous retrouve donc au prochain chapitre afin de commencer notre aventure.</p><p id="r-648134" data-claire-element-id="648134">Voilà, les bases sont posées !<br/> Nous allons pouvoir attaquer sévère dans JDBC... Let's go les ZérOs ! :pirate:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
<span class="arrow"></span>
<span class="next">Créer la BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">
<span class="next">Se connecter à sa BDD</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="SeconnectersaBDD"></a><h2>Se connecter à sa BDD</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
<span class="arrow"></span>
<span class="next">Créer ses tables</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
<span class="next">Faisons le point</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-648137" data-claire-element-id="648137">Nous avons pris le temps de modéliser et de créer notre base de données.<br/> Il est grand temps de prendre le taureau par les cornes et de voir comment accéder à tout ceci dans un programme Java.</p><p id="r-648138" data-claire-element-id="648138">Inutile de préciser que savoir programmer en objets est plus que requis et que, mis à part ce point, tout sera pris à partir de ZérO. ;)</p><p id="r-648139" data-claire-element-id="648139">En avant !</p>
</div><a name="Faisonslepoint"></a><h2>Faisons le point</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">
<span class="arrow"></span>
<span class="next">Se connecter à sa BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
<span class="next">Connexion ! Es-tu là ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-faisons-le-point-3" data-claire-element-id="648187">Faisons le point</h4><p id="r-648140" data-claire-element-id="648140">Bon : vous avez utilisé <strong>pgAdmin</strong> jusqu'à maintenant. Le truc, c'est qu'il se passe des choses cachées, peu avouables voire carrément obscènes entre <strong>pgAdmin</strong> et <strong>PostgreSQL</strong>.</p><p id="r-648141" data-claire-element-id="648141">Non, je plaisante... mais il se passe effectivement des choses entre ces deux-là ! ^^ <br/> Le fait est que vous ne devriez plus faire l'amalgame entre BDD et SGBD ; par contre, vous devez encore ignorer que le SGBD effectue une connexion avec la BDD afin de pouvoir communiquer. Ceci pourrait se schématiser par un dialogue du genre :</p><figure id="r-648143" data-claire-element-id="648144"><img id="r-648142" data-claire-element-id="648142" src="medias/uploads.siteduzero.com_files_155001_156000_155615.png" alt="Image utilisateur"/></figure><p id="r-648145" data-claire-element-id="648145">Les ZérOs qui ont déjà installé une imprimante savent que leur machine à besoin d'un driver pour que la communication puisse se faire entre les deux acteurs ! Ici, c'est la même chose ! :waw: <br/><strong>pgAdmin</strong> utilise un <em><strong>driver </strong></em>pour se connecter à la base de données. Vu que les personnes qui ont développé les deux soft travaillent main dans la main, pas de souci de communication mais qu'en sera-t-il avec Java ?</p><p id="r-648146" data-claire-element-id="648146">En fait, avec Java, vous allez avoir besoin de ces <em><strong>drivers</strong></em>, mais pas sous n'importe quelle forme !<br/> Afin de pouvoir vous connecter à une base de données avec Java, il vous faut un fichier .jar qui correspond au fameux pilote. <br/><strong>Il existe donc un fichier .jar qui permet de se connecter à une base PostgreSQL !</strong></p><div id="r-648148" data-claire-element-id="648148" data-claire-semantic="question"><p id="r-648147" data-claire-element-id="648147">Est-ce que ça veut dire qu'il y a un fichier .jar par BDD ?</p></div><p id="r-648149" data-claire-element-id="648149">Tout à fait, il existe un fichier .jar pour se connecter à :</p><ul id="r-648158" data-claire-element-id="648158"><li id="r-648151" data-claire-element-id="648151"><p id="r-648150" data-claire-element-id="648150">MySQL ;</p></li><li id="r-648153" data-claire-element-id="648153"><p id="r-648152" data-claire-element-id="648152">SQL Server ;</p></li><li id="r-648155" data-claire-element-id="648155"><p id="r-648154" data-claire-element-id="648154">Oracle ;</p></li><li id="r-648157" data-claire-element-id="648157"><p id="r-648156" data-claire-element-id="648156">...</p></li></ul><p id="r-648159" data-claire-element-id="648159">Et si vous ne faites pas ceci, vous ne pourrez pas vous connecter !</p><p id="r-648160" data-claire-element-id="648160">Un bémol toutefois : vous pouvez aussi vous connecter à une BDD en utilisant les pilotes ODBC présents dans <strong>Windows</strong>, mais ceci nécessite d'installer les pilotes dans Windows et de les paramétrer dans les sources de données ODBC pour, par la suite, utiliser ces pilotes ODBC pour se connecter à la BDD dans un programme Java !</p><p id="r-648161" data-claire-element-id="648161"><strong>Je ne parlerai pas de cette méthode puisqu'elle ne fonctionne que pour Windows !</strong><br/> Mais bon, pour ceux que le sujet intéresse, allez voir <a href="http://java.sun.com/j2se/1.3/docs/guide/jdbc/getstart/bridge.doc.html">par là !</a></p><div id="r-648163" data-claire-element-id="648163" data-claire-semantic="question"><p id="r-648162" data-claire-element-id="648162">D'accord, on voit bien le principe ! Mais alors... où trouve-t-on ce pilote pour Java ?</p></div><p id="r-648164" data-claire-element-id="648164">Une simple recherche sur <a href="http://www.google.fr/">Google</a> comblera vos attentes avec une recherche du genre :</p><figure id="r-648166" data-claire-element-id="648167"><img id="r-648165" data-claire-element-id="648165" src="medias/uploads.siteduzero.com_files_155001_156000_155618.png" alt="Image utilisateur"/></figure><p id="r-648168" data-claire-element-id="648168">... pour PostgreSQL, ou :</p><figure id="r-648170" data-claire-element-id="648171"><img id="r-648169" data-claire-element-id="648169" src="medias/uploads.siteduzero.com_files_155001_156000_155617.png" alt="Image utilisateur"/></figure><p id="r-648172" data-claire-element-id="648172">pour MySQL...<br/> Enfin bref, il est assez facile de trouver les pilotes JDBC convoités. <br/> Sur la page de téléchargement des pilotes pour PostgreSQL, il y a la dernière version disponible ; j'ai pris la version JDBC4 :</p><figure id="r-648174" data-claire-element-id="648175"><img id="r-648173" data-claire-element-id="648173" src="medias/uploads.siteduzero.com_files_155001_156000_155619.png" alt="Image utilisateur"/></figure><p id="r-648176" data-claire-element-id="648176">La version JDBC4 offre des nouveautés et une souplesse dans l'utilisation de JDBC, mais j'avoue, je ne les connais pas trop... Vous trouverez un rapide aperçu <a href="http://www.techfaq360.com/tutorial/jdbc/jdbc3_jdbc4.jsp">par ici !</a></p><p id="r-648177" data-claire-element-id="648177">Bon ! Téléchargez le fichier .jar, pour ceux qui auraient la flemme de faire une recherche sur Google, <a href="http://jdbc.postgresql.org/download.html">c'est par ici</a> ; et maintenant, que faire de cette archive ?</p><div id="r-648179" data-claire-element-id="648179" data-claire-semantic="question"><p id="r-648178" data-claire-element-id="648178">Et comment on l'utilise ?</p></div><p id="r-648180" data-claire-element-id="648180">Pour l'utilisation, nous y arrivons à grand pas, mais une question se pose encore : <strong>où mettre l'archive ?</strong><br/> Vous avez deux solutions :</p><ul id="r-648185" data-claire-element-id="648185"><li id="r-648182" data-claire-element-id="648182"><p id="r-648181" data-claire-element-id="648181">la mettre dans votre projet et l'inclure au CLASSPATH ;</p></li><li id="r-648184" data-claire-element-id="648184"><p id="r-648183" data-claire-element-id="648183">mettre l'archive de le dossier d'installation du JRE, dans le dossier &quot;<strong>lib/ext</strong>&quot;.</p></li></ul><p id="r-648186" data-claire-element-id="648186">Le tout est de savoir si votre application est vouée à être exportée sur différents postes, auquel cas l'approche CLASSPATH est encore la plus judicieuse (sinon, il faudra ajouter l'archive dans tous les JRE...) mais, nous, nous allons utiliser la deuxième méthode afin de ne pas surcharger nos projets !<br/> Je vous laisse donc mettre l'archive téléchargée dans le dossier sus-mentionné. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">
<span class="arrow"></span>
<span class="next">Se connecter à sa BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
<span class="next">Connexion ! Es-tu là ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ConnexionEs-tul"></a><h2>Connexion ! Es-tu là ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
<span class="arrow"></span>
<span class="next">Faisons le point</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">
<span class="next">Fouiller dans sa BDD</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-connexion-es-tu-la" data-claire-element-id="648230">Connexion ! Es-tu là ?</h4><p id="r-648188" data-claire-element-id="648188">La base de données est prête, les tables sont créées et remplies et nous avons le driver !<br/> Il ne nous reste plus qu'à nous connecter, <em><strong>ENFIN !</strong></em></p><div id="r-648190" data-claire-element-id="648190" data-claire-semantic="question"><p id="r-648189" data-claire-element-id="648189">C'est vrai que tu auras mis le temps...</p></div><p id="r-648191" data-claire-element-id="648191">Eh, il faut ce qu'il faut ! Et encore, j'aurais pu vous faire réviser le SQL avant d'attaquer ! :diable:</p><p id="r-648192" data-claire-element-id="648192">Je vous autorise à créer un nouveau projet dans Eclipse avec une classe contenant une méthode <code data-claire-semantic="java">public static void main(String[] args) </code>.</p><p id="r-648193" data-claire-element-id="648193">Voici le code source pour obtenir une connexion :</p><pre id="r-648194" data-claire-element-id="648194"><code data-claire-semantic="java">import java.sql.Connection;
import java.sql.DriverManager;
import java.util.Enumeration;
import java.util.Properties;

public class Connect {

	public static void main(String[] args) {
		
		try {
			Class.forName(&quot;org.postgresql.Driver&quot;);
			System.out.println(&quot;DRIVER OK ! &quot;);
			
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;postgres&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			System.out.println(&quot;Connection effective !&quot;);			
			
		} catch (Exception e) {
			e.printStackTrace();
		}		
	}
}</code></pre><div id="r-648196" data-claire-element-id="648196" data-claire-semantic="question"><p id="r-648195" data-claire-element-id="648195">Tout ça pour avoir une connexion ?</p></div><p id="r-648197" data-claire-element-id="648197">Oui. :-° <br/> Nous allons détailler un peu tout ceci...<br/> Dans un premier temps, nous avons créé une instance de l'objet <strong>Driver</strong> présent dans le fichier .jar que nous avons téléchargé tout à l'heure. <br/> Il est inutile de créer une véritable instance de ce type d'objet ; par-là, j'entends que faire ceci :</p><pre id="r-648198" data-claire-element-id="648198"><code data-claire-semantic="java">org.postgres.Driver driver = new org.postgres.Driver();</code></pre><p id="r-648199" data-claire-element-id="648199">n'est pas nécessaire. Du coup, nous utilisons <a href="http://www.siteduzero.com/tutoriel-3-10431-java-et-la-reflexivite.html">la réflexivité</a> afin d'instancier cet objet.<br/> À ce stade, il y a comme un pont entre votre programme Java et votre BDD, mais <em>el trafique</em> routier n'y est pas encore autorisé ! Il faut qu'une connexion soit effective afin que votre programme et la BDD puissent communiquer. Ceci se fait avec l'autre ligne de code : <code data-claire-semantic="java">Connection conn = DriverManager.getConnection(url, user, passwd); </code>.</p><p id="r-648200" data-claire-element-id="648200">Nous avons au préalable défini trois <strong>String</strong> contenant respectivement :</p><ul id="r-648207" data-claire-element-id="648207"><li id="r-648202" data-claire-element-id="648202"><p id="r-648201" data-claire-element-id="648201">l'URL de connexion ;</p></li><li id="r-648204" data-claire-element-id="648204"><p id="r-648203" data-claire-element-id="648203">le nom de l'utilisateur ;</p></li><li id="r-648206" data-claire-element-id="648206"><p id="r-648205" data-claire-element-id="648205">le mot de passe utilisateur.</p></li></ul><div id="r-648209" data-claire-element-id="648209" data-claire-semantic="question"><p id="r-648208" data-claire-element-id="648208">L'URL de quoi ?</p></div><p id="r-648210" data-claire-element-id="648210">De connexion. Elle est indispensable à Java pour se connecter à n'importe quelle BDD.<br/> Cette URL se décompose comme suit :</p><figure id="r-648212" data-claire-element-id="648213"><img id="r-648211" data-claire-element-id="648211" src="medias/uploads.siteduzero.com_files_155001_156000_155631.png" alt="Image utilisateur"/></figure><p id="r-648214" data-claire-element-id="648214">En vert, vous pouvez voir le début de l'URL de connexion. elle commence TOUJOURS par &quot;<strong>jdbc:</strong>&quot;. Dans notre cas, nous utilisons PostgreSQL, la dénomination &quot;<strong>postgresql:</strong>&quot; suit le début de l'URL. Si vous utilisez une source de données ODBC, il faudrait avoir &quot;<strong>jdbc:odbc:</strong>&quot;.<br/> En fait, ceci dépend du pilote JDBC : cela permet à Java de savoir quel pilote utiliser ! <strong>On parle de protocole utilisé.</strong></p><p id="r-648215" data-claire-element-id="648215">En bleu, vous trouverez la localisation de la machine physique sur le réseau ; ici, nous sommes en local, nous utilisons donc &quot;<strong>//localhost:5432</strong>&quot;. Ah oui, le nom de la machine physique est suivi du numéro de port utilisé. ^^ <br/> En orange, pour ceux qui ne l'auraient pas deviné, il s'agit du nom de notre base de données ! ;)</p><aside id="r-648217" data-claire-element-id="648217" data-claire-semantic="information"><p id="r-648216" data-claire-element-id="648216">Les informations en bleu et en orange dépendent du pilote JDBC utilisé. Pour en savoir plus, consultez la documentation de celui-ci ! :)</p></aside><p id="r-648218" data-claire-element-id="648218">L'URL, le nom d'utilisateur, le mot de passe et le driver permettent ensemble de créer le pont de connexion et le trafic routier sur ce pont ! <br/> Donc, si vous exécutez ce code, vous aurez :</p><figure id="r-648220" data-claire-element-id="648221"><img id="r-648219" data-claire-element-id="648219" src="medias/uploads.siteduzero.com_files_155001_156000_155633.png" alt="Image utilisateur"/></figure><aside id="r-648223" data-claire-element-id="648223" data-claire-semantic="information"><p id="r-648222" data-claire-element-id="648222">Vous n'êtes obligés de spécifier la totalité des informations pour l'URL... Mais il faudra au moins &quot;<strong>jdbc:postgresql</strong>&quot;.</p></aside><aside id="r-648225" data-claire-element-id="648225" data-claire-semantic="error"><p id="r-648224" data-claire-element-id="648224">Tout ceci lève une <strong>Exception</strong> en cas de problème !</p></aside><aside id="r-648227" data-claire-element-id="648227" data-claire-semantic="information"><p id="r-648226" data-claire-element-id="648226">L'avantage avec les fichiers .jar comme drivers de connexion, c'est que vous n'êtes pas tenus d'initialiser le driver par réflexivité ou autre. Tout se passe en Java ! Vu qu'il y a un rappel du protocole à utiliser dans l'URL de connexion, tout est parfait et Java s'en sort tout seul ! <br/> Ne vous étonnez pas si vous ne voyez plus <code data-claire-semantic="java">Class.forName(&quot;org.postgresql.Driver&quot;); </code> par la suite...</p></aside><p id="r-648228" data-claire-element-id="648228">Bon, on arrive à se connecter. Maintenant, avant de poursuivre, un QCM vous attend ! :pirate:</p><p id="r-648229" data-claire-element-id="648229">Chapitre très simple, n'est-ce pas ?<br/> Vous savez maintenant établir une connexion avec une BDD. Nous allons maintenant voir comment faire joujou avec tout ceci !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
<span class="arrow"></span>
<span class="next">Faisons le point</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">
<span class="next">Fouiller dans sa BDD</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="FouillerdanssaBDD"></a><h2>Fouiller dans sa BDD</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
<span class="arrow"></span>
<span class="next">Connexion ! Es-tu là ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
<span class="next">Le couple Statement - ResultSet</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-648232" data-claire-element-id="648232">Nous continuons notre voyage initiatique au pays de JDBC en abordant la manière d'interroger notre BDD.</p><p id="r-648233" data-claire-element-id="648233">Eh oui, une base de données n'est utile que si nous pouvons consulter, ajouter, modifier ou encore supprimer les données qu'elle comprend.</p><p id="r-648234" data-claire-element-id="648234">Par contre, pour faire ceci, il était IMPÉRATIF de se connecter. Mais vu que c'est chose faite, nous allons voir comment fouiner dans notre BDD.</p>
</div><a name="LecoupleStatement-ResultSet"></a><h2>Le couple Statement - ResultSet</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">
<span class="arrow"></span>
<span class="next">Fouiller dans sa BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
<span class="next">Comment ça fonctionne</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-couple-statement-resultset-1" data-claire-element-id="648257">Le couple Statement - ResultSet</h4><p id="r-648235" data-claire-element-id="648235">Voici deux objets que vous utiliserez sûrement beaucoup !<br/> En fait, ce sont ces deux objets qui permettent de récupérer des données de la BDD ou de travailler avec celles-ci... :-°</p><p id="r-648236" data-claire-element-id="648236">Afin de vous faire comprendre tout ceci de façon simple, voici un exemple assez complet (mais pas trop quand même) affichant le contenu de la table <strong>classe</strong> :</p><pre id="r-648237" data-claire-element-id="648237"><code data-claire-semantic="java">import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;

public class Connect {

	public static void main(String[] args) {
		
		try {
			Class.forName(&quot;org.postgresql.Driver&quot;);
			
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;postgres&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			
			//Création d'un objet Statement
			Statement state = conn.createStatement();
			//L'objet ResultSet contient le résultat de la requête SQL
			ResultSet result = state.executeQuery(&quot;SELECT * FROM classe&quot;);
			//On récupère les MetaData
			ResultSetMetaData resultMeta = result.getMetaData();
			
			System.out.println(&quot;\n**********************************&quot;);
			//On affiche le nom des colonnes
			for(int i = 1; i &lt;=  resultMeta.getColumnCount(); i++)
				System.out.print(&quot;\t&quot; + resultMeta.getColumnName(i).toUpperCase() + &quot;\t *&quot;);
			
			System.out.println(&quot;\n**********************************&quot;);
			
			while(result.next()){			
				for(int i = 1; i &lt;=  resultMeta.getColumnCount(); i++)
					System.out.print(&quot;\t&quot; + result.getObject(i).toString() + &quot;\t |&quot;);
				
				System.out.println(&quot;\n---------------------------------&quot;);

			}


                        result.close();
                        state.close();

			
		} catch (Exception e) {
			e.printStackTrace();
		}		
	}
}</code></pre><p id="r-648238" data-claire-element-id="648238">Voici ce que nous donne ce code :</p><figure id="r-648240" data-claire-element-id="648241"><img id="r-648239" data-claire-element-id="648239" src="medias/uploads.siteduzero.com_files_155001_156000_155643.png" alt="Image utilisateur"/></figure><p id="r-648242" data-claire-element-id="648242">Vous avez sûrement compris que j'ai simplement exécuté une requête SQL et récupéré les lignes trouvées ! Mais détaillons un peu plus ce qu'il s'est passé. ^^</p><p id="r-648243" data-claire-element-id="648243"><em><strong>Déjà, vous aurez pu remarquer que j'ai spécifié l'URL complète pour la connexion : sinon comment voulez-vous savoir quelle BDD attaquer ?...</strong></em></p><p id="r-648244" data-claire-element-id="648244">La connexion à la BDD mise à part, les choses se sont passées en quatre étapes distinctes :</p><ul id="r-648253" data-claire-element-id="648253"><li id="r-648246" data-claire-element-id="648246"><p id="r-648245" data-claire-element-id="648245">création de l'objet <strong>Statement</strong> ;</p></li><li id="r-648248" data-claire-element-id="648248"><p id="r-648247" data-claire-element-id="648247">exécution de la réquête SQL ;</p></li><li id="r-648250" data-claire-element-id="648250"><p id="r-648249" data-claire-element-id="648249">récupération et affichage des données via l'objet <strong>ResultSet</strong> ;</p></li><li id="r-648252" data-claire-element-id="648252"><p id="r-648251" data-claire-element-id="648251">fermeture des objets utilisés (bien que non obligatoire, c'est recommandé).</p></li></ul><div id="r-648255" data-claire-element-id="648255" data-claire-semantic="question"><p id="r-648254" data-claire-element-id="648254">Tout ça semble clair, mais tu ne pourrais pas nous en dire un peu plus sur ces objets ?</p></div><p id="r-648256" data-claire-element-id="648256">Mais c'est ce que j'allais faire... ^^ <br/> Dîtes-vous une chose : objet <strong>Statement</strong> =&gt; instruction SQL ! C'est cet objet qui exécute les requêtes SQL et qui retourne les résultats.<br/> Ensuite, lorsque vous entendez <strong>ResultSet</strong>, c'est que votre requête SQL a retourné un certain nombre de lignes à récupérer et à afficher...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">
<span class="arrow"></span>
<span class="next">Fouiller dans sa BDD</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
<span class="next">Comment ça fonctionne</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Commentafonctionne"></a><h2>Comment ça fonctionne</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
<span class="arrow"></span>
<span class="next">Le couple Statement - ResultSet</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
<span class="next">Entraînons-nous</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-comment-ca-fonctionne-4" data-claire-element-id="648345">Comment ça fonctionne</h4><p id="r-648258" data-claire-element-id="648258">Je vous ai fourni un morceau de code, il fonctionne, mais comment ça marche ?<br/> Voici le moment où tout vous sera dévoilé.</p><p id="r-648259" data-claire-element-id="648259">Comme je vous le disais plus haut, l'objet <strong>Statement</strong> est l'objet qui vous permet de faire des requêtes SQL. Celles-ci peuvent être de type :</p><ul id="r-648270" data-claire-element-id="648270"><li id="r-648261" data-claire-element-id="648261"><p id="r-648260" data-claire-element-id="648260"><strong>CREATE</strong> ;</p></li><li id="r-648263" data-claire-element-id="648263"><p id="r-648262" data-claire-element-id="648262"><strong>INSERT</strong> ;</p></li><li id="r-648265" data-claire-element-id="648265"><p id="r-648264" data-claire-element-id="648264"><strong>UPDATE</strong> ;</p></li><li id="r-648267" data-claire-element-id="648267"><p id="r-648266" data-claire-element-id="648266"><strong>SELECT</strong> ;</p></li><li id="r-648269" data-claire-element-id="648269"><p id="r-648268" data-claire-element-id="648268"><strong>DELETE</strong>.</p></li></ul><p id="r-648271" data-claire-element-id="648271">Vous n'êtes pas sans savoir que, selon le type de requête exécutée, celle-ci retourne un / des résultat(s), dans le cas d'un <strong>SELECT</strong>, ou une validation / un message d'erreur dans les autres cas.<br/> L'objet <strong>Statement</strong> vous est fourni par l'objet <strong>Connection</strong> grâce à l'instruction <code data-claire-semantic="java">conn.createStatement(); </code>.</p><aside id="r-648273" data-claire-element-id="648273" data-claire-semantic="information"><p id="r-648272" data-claire-element-id="648272">Nous verrons, dans le chapitre suivant, un peu plus de choses concernant l'objet <strong>Statement</strong>.</p></aside><p id="r-648274" data-claire-element-id="648274">Ce que j'ai fait ensuite, c'est demander à mon objet <strong>Statement</strong> d'exécuter une requête SQL de type <strong>SELECT</strong>. Vous la voyez, celle-ci :</p><pre id="r-648275" data-claire-element-id="648275"><code data-claire-semantic="sql">SELECT * FROM classe</code></pre><p id="r-648276" data-claire-element-id="648276">Cette requête me retournant un résultat contenant beaucoup de lignes, elles-mêmes contenant plusieurs colonnes, nous avons stocké ce résultat dans un objet <strong>ResultSet</strong>, objet permettant de faire diverses actions sur des résultats de requêtes SQL ! :)</p><p id="r-648277" data-claire-element-id="648277">Après cette ligne de code : <code data-claire-semantic="java">ResultSet result = state.executeQuery(&quot;SELECT * FROM classe&quot;); </code>, les résultats sont stockés dans l'objet <strong>ResultSet</strong> et nous n'avons plus qu'à afficher les données.</p><p id="r-648278" data-claire-element-id="648278">Ici, j'ai utilisé un objet de type <strong>ResulSetMetaData</strong> afin de récupérer les &quot;<em><strong>meta data</strong></em>&quot; de ma requête. Comprenez ceci comme &quot;<em><strong>récupérer les informations globales de ma requête</strong></em>&quot;. Ici, nous avons utilisé cet objet afin de récupérer le nombre de colonnes renvoyé par la requête SQL ainsi que leurs noms.<br/> Cet objet &quot;<em><strong>meta data</strong></em>&quot; permettent de récupérer des informations très utiles comme :</p><ul id="r-648289" data-claire-element-id="648289"><li id="r-648280" data-claire-element-id="648280"><p id="r-648279" data-claire-element-id="648279">le nombre de colonnes d'un résultat ;</p></li><li id="r-648282" data-claire-element-id="648282"><p id="r-648281" data-claire-element-id="648281">le nom des colonnes d'un résultat ;</p></li><li id="r-648284" data-claire-element-id="648284"><p id="r-648283" data-claire-element-id="648283">le type de données stocké dans chaque colonne ;</p></li><li id="r-648286" data-claire-element-id="648286"><p id="r-648285" data-claire-element-id="648285">le nom de la table à qui appartient la colonne (dans le cas d'une jointure de table) ;</p></li><li id="r-648288" data-claire-element-id="648288"><p id="r-648287" data-claire-element-id="648287">...</p></li></ul><p id="r-648290" data-claire-element-id="648290">Vous voyez que ces informations peuvent être utiles.</p><aside id="r-648292" data-claire-element-id="648292" data-claire-semantic="information"><p id="r-648291" data-claire-element-id="648291">Il existe aussi un objet <strong>DatabaseMetaData</strong> qui, lui, fournit des informations sur la base de données !</p></aside><p id="r-648293" data-claire-element-id="648293">Vous comprenez mieux ce que signifie cette portion de code :</p><pre id="r-648294" data-claire-element-id="648294"><code data-claire-semantic="java">System.out.println(&quot;\n**********************************&quot;);
//On affiche le nom des colonnes
for(int i = 1; i &lt;=  resultMeta.getColumnCount(); i++)
	System.out.print(&quot;\t&quot; + resultMeta.getColumnName(i).toUpperCase() + &quot;\t *&quot;);
			
System.out.println(&quot;\n**********************************&quot;);</code></pre><p id="r-648295" data-claire-element-id="648295">Nous nous servons de la méthode nous donnant le nombre de colonnes dans le résultat afin de récupérer le nom de la colonne grâce à son index !</p><aside id="r-648297" data-claire-element-id="648297" data-claire-semantic="error"><p id="r-648296" data-claire-element-id="648296"><strong>ATTENTION : contrairement aux indices de tableaux, les indices de colonnes SQL commencent à 1 !</strong></p></aside><p id="r-648298" data-claire-element-id="648298">Ensuite, nous récupérons les données de notre requête en nous servant de l'indice des colonnes :</p><pre id="r-648299" data-claire-element-id="648299"><code data-claire-semantic="java">while(result.next()){			
	for(int i = 1; i &lt;=  resultMeta.getColumnCount(); i++)
		System.out.print(&quot;\t&quot; + result.getObject(i).toString() + &quot;\t |&quot;);
				
	System.out.println(&quot;\n---------------------------------&quot;);
}</code></pre><p id="r-648300" data-claire-element-id="648300">Nous utilisons une première boucle afin que, tant que notre objet <strong>ResultSet</strong> nous retourne des lignes de résultats, nous parcourions ensuite chaque ligne via notre boucle <code data-claire-semantic="java">for </code>.</p><aside id="r-648302" data-claire-element-id="648302" data-claire-semantic="error"><p id="r-648301" data-claire-element-id="648301">La méthode <code data-claire-semantic="java">next() </code> permet de positionner l'objet sur la ligne suivante dans sa liste de résultat ! Au premier tour de boucle, cette méthode positionne l'objet sur la première ligne. <strong>Si vous ne positionnez pas l'objet résultat et que vous tentez de lire des données, une exception sera levée !</strong></p></aside><p id="r-648303" data-claire-element-id="648303">Je suis parti du postulat que ne connaissons pas le type de données de nos colonnes, mais vu que nous les connaissons, ce code aurait tout aussi bien fonctionné :</p><pre id="r-648304" data-claire-element-id="648304"><code data-claire-semantic="java">while(result.next()){
	System.out.print(&quot;\t&quot; + result.getInt(&quot;cls_id&quot;) + &quot;\t |&quot;);
	System.out.print(&quot;\t&quot; + result.getString(&quot;cls_nom&quot;) + &quot;\t |&quot;);
	System.out.println(&quot;\n---------------------------------&quot;);
}</code></pre><div id="r-648306" data-claire-element-id="648306" data-claire-semantic="question"><p id="r-648305" data-claire-element-id="648305">On a le droit de faire ça ?</p></div><p id="r-648307" data-claire-element-id="648307">Tout à fait ! Nous connaissons le nom de nos colonnes retournées par la requête SQL, nous connaissons aussi leurs types, il nous suffit donc d'invoquer la méthode adéquat de l'objet <strong>ResultSet</strong> en utilisant le nom de la colonne à récupérer !</p><aside id="r-648309" data-claire-element-id="648309" data-claire-semantic="warning"><p id="r-648308" data-claire-element-id="648308">Par contre, si vous essayez de récupérer le contenu de la colonne &quot;<strong>cls_nom</strong>&quot; avec la méthode <code data-claire-semantic="java">getInt(&quot;cls_nom&quot;) </code>, vous aurez une zolie exception !</p></aside><p id="r-648310" data-claire-element-id="648310">Il existe une méthode <code data-claire-semantic="java">getXXX() </code> par type primitif et quelques autres correspondant aux types SQL :</p><ul id="r-648341" data-claire-element-id="648341"><li id="r-648312" data-claire-element-id="648312"><p id="r-648311" data-claire-element-id="648311"><code data-claire-semantic="java">getArray(int colummnIndex) </code> ;</p></li><li id="r-648314" data-claire-element-id="648314"><p id="r-648313" data-claire-element-id="648313"><code data-claire-semantic="java">getAscii(int colummnIndex) </code> ;</p></li><li id="r-648316" data-claire-element-id="648316"><p id="r-648315" data-claire-element-id="648315"><code data-claire-semantic="java">getBigDecimal(int colummnIndex) </code> ;</p></li><li id="r-648318" data-claire-element-id="648318"><p id="r-648317" data-claire-element-id="648317"><code data-claire-semantic="java">getBinary(int colummnIndex) </code> ;</p></li><li id="r-648320" data-claire-element-id="648320"><p id="r-648319" data-claire-element-id="648319"><code data-claire-semantic="java">getBlob(int colummnIndex) </code> ;</p></li><li id="r-648322" data-claire-element-id="648322"><p id="r-648321" data-claire-element-id="648321"><code data-claire-semantic="java">getBoolean(int colummnIndex) </code> ;</p></li><li id="r-648324" data-claire-element-id="648324"><p id="r-648323" data-claire-element-id="648323"><code data-claire-semantic="java">getBytes(int colummnIndex) </code> ;</p></li><li id="r-648326" data-claire-element-id="648326"><p id="r-648325" data-claire-element-id="648325"><code data-claire-semantic="java">getCharacter(int colummnIndex) </code> ;</p></li><li id="r-648328" data-claire-element-id="648328"><p id="r-648327" data-claire-element-id="648327"><code data-claire-semantic="java">getDate(int colummnIndex) </code> ;</p></li><li id="r-648330" data-claire-element-id="648330"><p id="r-648329" data-claire-element-id="648329"><code data-claire-semantic="java">getDouble(int colummnIndex) </code> ;</p></li><li id="r-648332" data-claire-element-id="648332"><p id="r-648331" data-claire-element-id="648331"><code data-claire-semantic="java">getFloat(int colummnIndex) </code> ;</p></li><li id="r-648334" data-claire-element-id="648334"><p id="r-648333" data-claire-element-id="648333"><code data-claire-semantic="java">getInt(int colummnIndex) </code> ;</p></li><li id="r-648336" data-claire-element-id="648336"><p id="r-648335" data-claire-element-id="648335"><code data-claire-semantic="java">getLong(int colummnIndex) </code> ;</p></li><li id="r-648338" data-claire-element-id="648338"><p id="r-648337" data-claire-element-id="648337"><code data-claire-semantic="java">getObject(int colummnIndex) </code> ;</p></li><li id="r-648340" data-claire-element-id="648340"><p id="r-648339" data-claire-element-id="648339"><code data-claire-semantic="java">getString(int colummnIndex) </code> ;</p></li></ul><p id="r-648342" data-claire-element-id="648342">Et, à la fin, nous fermons nos objets :</p><pre id="r-648343" data-claire-element-id="648343"><code data-claire-semantic="java">result.close();
state.close();</code></pre><p id="r-648344" data-claire-element-id="648344">Avant de voir plus en détail les possibilités qu'offrent ces objets, nous allons faire deux-trois requêtes SQL afin de nous habituer à la façon dont tout ça fonctionne ! ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
<span class="arrow"></span>
<span class="next">Le couple Statement - ResultSet</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
<span class="next">Entraînons-nous</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Entranons-nous"></a><h2>Entraînons-nous</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
<span class="arrow"></span>
<span class="next">Comment ça fonctionne</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">
<span class="next">Allons un peu plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-entrainons-nous-1" data-claire-element-id="648368">Entraînons-nous</h4><p id="r-648346" data-claire-element-id="648346">Le but du jeu est de me coder les résultats que j'ai obtenus... Je vous laisse chercher dans quelle table... :p <br/> Vous êtes prêts ? C'est parti ! :ninja:</p><p id="r-648347" data-claire-element-id="648347">Voici ce que vous devez me récupérer en premier :</p><figure id="r-648349" data-claire-element-id="648350"><img id="r-648348" data-claire-element-id="648348" src="medias/uploads.siteduzero.com_files_155001_156000_155687.jpg" alt="Image utilisateur"/></figure><p id="r-648351" data-claire-element-id="648351">Cherchez bien...<br/> Bon, vous avez trouvé ! Il n'y avait rien de compliqué ici, voici la correction, enfin, une suggestion de correction :</p><p id="r-648352" data-claire-element-id="648352"></p><pre id="r-648353" data-claire-element-id="648353"><code data-claire-semantic="java">package com.sdz.exo;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;

public class Exo1 {

public static void main(String[] args) {
		
		try {
			Class.forName(&quot;org.postgresql.Driver&quot;);
			
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;postgres&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			Statement state = conn.createStatement();
			
			ResultSet result = state.executeQuery(&quot;SELECT * FROM professeur&quot;);
			ResultSetMetaData resultMeta = result.getMetaData();
			
			System.out.println(&quot;- Il y a &quot; + resultMeta.getColumnCount() + &quot; colonnes dans cette table&quot;);
			for(int i = 1; i &lt;= resultMeta.getColumnCount(); i++)
				System.out.println(&quot;\t *&quot; + resultMeta.getColumnName(i));
			

			System.out.println(&quot;Voici les noms et prénoms : &quot;);
			System.out.println(&quot;\n---------------------------------&quot;);
			
			while(result.next()){
				System.out.print(&quot;\t&quot; + result.getString(&quot;prof_nom&quot;) + &quot;\t |&quot;);
				System.out.print(&quot;\t&quot; + result.getString(&quot;prof_prenom&quot;) + &quot;\t |&quot;);
				System.out.println(&quot;\n---------------------------------&quot;);
				
			}

                        result.close();
                        state.close();
			
		} catch (Exception e) {
			e.printStackTrace();
		}		
	}
	
}</code></pre><p id="r-648354" data-claire-element-id="648354">Allez, on complique la tâche :</p><figure id="r-648356" data-claire-element-id="648357"><img id="r-648355" data-claire-element-id="648355" src="medias/uploads.siteduzero.com_files_155001_156000_155688.jpg" alt="Image utilisateur"/></figure><p id="r-648358" data-claire-element-id="648358">Hou... Ne vous faites pas exploser la cervelle tout de suite... On ne fait que commencer... :p <br/> Voici une possible solution à ce résultat :</p><pre id="r-648359" data-claire-element-id="648359"><code data-claire-semantic="java">package com.sdz.exo;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;

public class Exo2 {
	public static void main(String[] args) {
		
		try {
			Class.forName(&quot;org.postgresql.Driver&quot;);
			
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;postgres&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			Statement state = conn.createStatement();
			
			String query = &quot;SELECT prof_nom, prof_prenom, mat_nom FROM professeur&quot;;
			query += &quot; INNER JOIN j_mat_prof ON jmp_prof_k = prof_id&quot;;
			query += &quot; INNER JOIN matiere ON jmp_mat_k = mat_id ORDER BY prof_nom&quot;;
			
			ResultSet result = state.executeQuery(query);
			String nom = &quot;&quot;;
			
			while(result.next()){				
				if(!nom.equals(result.getString(&quot;prof_nom&quot;))){
					nom = result.getString(&quot;prof_nom&quot;);
					System.out.println(nom + &quot; &quot; + result.getString(&quot;prof_prenom&quot;) + &quot; enseigne : &quot;);
				}
				System.out.println(&quot;\t\t\t - &quot; +  result.getString(&quot;mat_nom&quot;));
			}

                        result.close();
                        state.close();

		} catch (Exception e) {
			e.printStackTrace();
		}		
	}

}</code></pre><p id="r-648360" data-claire-element-id="648360">Et le dernier pour la fin :</p><figure id="r-648362" data-claire-element-id="648363"><img id="r-648361" data-claire-element-id="648361" src="medias/uploads.siteduzero.com_files_155001_156000_155691.jpg" alt="Image utilisateur"/></figure><pre id="r-648364" data-claire-element-id="648364"><code data-claire-semantic="java">package com.sdz.exo;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class Exo3 {
	public static void main(String[] args) {
		
		try {
			Class.forName(&quot;org.postgresql.Driver&quot;);
			
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;postgres&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			Statement state = conn.createStatement();
			
			String query = &quot;SELECT prof_nom, prof_prenom, mat_nom, cls_nom FROM professeur&quot;;
			query += &quot; INNER JOIN j_mat_prof ON jmp_prof_k = prof_id&quot;;
			query += &quot; INNER JOIN matiere ON jmp_mat_k = mat_id&quot;;
			query += &quot; INNER JOIN j_cls_jmp ON jcm_jmp_k = jmp_id&quot;;
			query += &quot; INNER JOIN classe ON jcm_cls_k = cls_id AND cls_id IN(1, 7) &quot;;
			query += &quot; ORDER BY cls_nom DESC, prof_nom&quot;;
			
			ResultSet result = state.executeQuery(query);
			String nom = &quot;&quot;;
			String nomClass = &quot;&quot;;
			
			while(result.next()){				
				if(!nomClass.equals(result.getString(&quot;cls_nom&quot;))){
					nomClass = result.getString(&quot;cls_nom&quot;);
					System.out.println(&quot;Classe de &quot; + nomClass + &quot; :&quot;);					
				}

				if(!nom.equals(result.getString(&quot;prof_nom&quot;))){
					nom = result.getString(&quot;prof_nom&quot;);
					System.out.println(&quot;\t * &quot; + nom + &quot; &quot; + result.getString(&quot;prof_prenom&quot;) + &quot; enseigne : &quot;);
				}
				System.out.println(&quot;\t\t\t - &quot; +  result.getString(&quot;mat_nom&quot;));
			}

                        result.close();
                        state.close();

		} catch (Exception e) {
			e.printStackTrace();
		}		
	}

}</code></pre><p id="r-648365" data-claire-element-id="648365">Voilà : maintenant que vous vous êtes bien entraînés, nous allons approfondir un peu tout ceci... Mais avant, le QCM des familles. :diable:</p><p id="r-648366" data-claire-element-id="648366">C'est un chapitre riche mais pas trop compliqué...<br/> Prenez le temps de voir comment le tout s'articule autour des <strong>Resultset</strong> et tutti quanti.</p><p id="r-648367" data-claire-element-id="648367">Les plus téméraires me retrouveront au prochain chapitre. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
<span class="arrow"></span>
<span class="next">Comment ça fonctionne</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">
<span class="next">Allons un peu plus loin</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Allonsunpeuplusloin"></a><h2>Allons un peu plus loin</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
<span class="arrow"></span>
<span class="next">Entraînons-nous</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
<span class="next">Statement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-648370" data-claire-element-id="648370">Nous avons vu comment faire des requêtes SQL, les exécuter et les afficher.<br/> Le moment est venu de creuser un peu la question en allant un peu plus en profondeur...</p><p id="r-648371" data-claire-element-id="648371">Nous allons revenir sur les objets <strong>Statement</strong> et <strong>ResultSet</strong> en détaillant un peu le tout ! :)</p>
</div><a name="Statement"></a><h2>Statement</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">
<span class="arrow"></span>
<span class="next">Allons un peu plus loin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
<span class="next">Les requêtes préparées</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-statement-1" data-claire-element-id="648396">Statement</h4><p id="r-648372" data-claire-element-id="648372">Vous avez vu comment obtenir un objet <strong>Statement</strong> ; par contre, ce que vous ignorez, c'est que je ne vous ai pas tout dit... :-° <br/> Je sais, je suis un vilain cysboy...</p><p id="r-648373" data-claire-element-id="648373">Vous savez déjà que, pour récupérer un objet <strong>Statement</strong>, vous devez le demander gentiment à un objet <strong>Connection</strong>, ceci en invoquant la méthode <code data-claire-semantic="java">createStatement() </code>. Je ne vous apprends rien, là ! Du moins j'espère... :D</p><p id="r-648374" data-claire-element-id="648374">Par contre, ce que vous ne savez pas, c'est que vous pouvez spécifier des paramètres pour la création de l'objet <strong>Statement</strong>...<br/> Ces paramètres permettent différentes actions lors du parcours des résultats via l'objet <strong>ResultSet</strong>.</p><p id="r-648375" data-claire-element-id="648375"><em>Paramètres pour la lecture du jeu d'enregistrements :</em></p><ul id="r-648382" data-claire-element-id="648382"><li id="r-648377" data-claire-element-id="648377"><p id="r-648376" data-claire-element-id="648376"><strong>TYPE_FORWARD_ONLY</strong> : le résultat n'est consultable qu'en avant. IMPOSSIBLE de revenir en arrière lors de la lecture ;</p></li><li id="r-648379" data-claire-element-id="648379"><p id="r-648378" data-claire-element-id="648378"><strong>TYPE_SCROLL_SENSITIVE</strong> : le parcours peut se faire en avant ou en arrière, le curseur peut se positionner n'importe où mais si des changements sont faits dans la base pendant la lecture, ces changements ne seront pas visibles ;</p></li><li id="r-648381" data-claire-element-id="648381"><p id="r-648380" data-claire-element-id="648380"><strong>TYPE_SCROLL_INSENSITIVE</strong> : comme le précédent sauf que les changements sont directement visibles lors du parcours des résultats.</p></li></ul><p id="r-648383" data-claire-element-id="648383"><em>Paramètres concernant la possibilité de mise à jour du jeu d'enregistrements :</em></p><ul id="r-648388" data-claire-element-id="648388"><li id="r-648385" data-claire-element-id="648385"><p id="r-648384" data-claire-element-id="648384"><strong>CONCUR_READONLY</strong> : les données sont consultables en lecture seule. Pas de mise à jour des valeurs pour mettre la base à jour ;</p></li><li id="r-648387" data-claire-element-id="648387"><p id="r-648386" data-claire-element-id="648386"><strong>CONCUR_UPDATABLE</strong> : les données sont modifiables et, lors d'une modification, la base est mise à jour.</p></li></ul><aside id="r-648390" data-claire-element-id="648390" data-claire-semantic="information"><p id="r-648389" data-claire-element-id="648389">Par défaut, les <strong>ResultSet</strong> issus d'un <strong>Statement </strong>sont <strong>TYPE_FORWARD_ONLY</strong> pour le type de parcours et <strong>CONCUR_READONLY</strong> pour les actions possibles.</p></aside><p id="r-648391" data-claire-element-id="648391">Ces paramètres sont des variables statiques de la classe <strong>ResultSet</strong>, vous savez donc comment les utiliser... ;) <br/> Voici comment créer un <strong>Statement</strong> permettant à l'objet résultat de pouvoir être lu d'avant en arrière avec possibilité de modification :</p><pre id="r-648392" data-claire-element-id="648392"><code data-claire-semantic="java">Statement state = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);</code></pre><p id="r-648393" data-claire-element-id="648393">Facile... ^^ <br/> Vous avez appris à créer des <strong>Statement </strong>avec des paramètres, mais saviez-vous qu'il existe un autre type de <strong>Statement </strong>?</p><aside id="r-648395" data-claire-element-id="648395" data-claire-semantic="information"><p id="r-648394" data-claire-element-id="648394">Nous verrons comment utiliser les fonctionnalités des <strong>ResultSet</strong> juste après ce point...</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">
<span class="arrow"></span>
<span class="next">Allons un peu plus loin</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
<span class="next">Les requêtes préparées</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesrequtesprpares"></a><h2>Les requêtes préparées</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
<span class="arrow"></span>
<span class="next">Statement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
<span class="next">ResultSet 2 : le retour</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-les-requetes-preparees-6" data-claire-element-id="648425">Les requêtes préparées</h4><p id="r-648397" data-claire-element-id="648397">Il va falloir vous accrocher un tout petit peu...<br/> De tels objets sont créés exactement de la même façon que des <strong>Statement</strong> classiques, sauf qu'au lieu d'avoir :</p><pre id="r-648398" data-claire-element-id="648398"><code data-claire-semantic="java">Statement stm = conn.createStatement();</code></pre><p id="r-648399" data-claire-element-id="648399">nous avons :</p><pre id="r-648400" data-claire-element-id="648400"><code data-claire-semantic="java">PreparedStatement stm = conn.prepareStatement(&quot;SELECT * FROM classe&quot;);</code></pre><p id="r-648401" data-claire-element-id="648401">Jusqu'ici, rien de particulier ! Cependant, une différence est déjà effective à ce stade <strong>: la requête SQL est pré-compilée !</strong><br/> Ceci a pour effet que celle-ci s'exécutera plus vite dans le moteur SQL de la BDD, c'est sûr puisqu'il n'aura pas à la compiler... :-° <br/> En fait, en règle générale, on utilise ce genre d'objet pour des requêtes ayant beaucoup de paramètres ou des requêtes pouvant être exécutées plusieurs fois...</p><div id="r-648403" data-claire-element-id="648403" data-claire-semantic="question"><p id="r-648402" data-claire-element-id="648402">C'est tout ce qu'il y a comme différence ?</p></div><p id="r-648404" data-claire-element-id="648404">Non, bien sûr. Je vous ai dit dans le titre que <strong><em>nous allons préparer des requêtes !</em></strong>.<br/> Il y a une différence de taille entre l'objet <strong>PreparedStatement</strong> et l'objet <strong>Statement</strong> : dans le premier, on peut utiliser des paramètres à trous !</p><div id="r-648406" data-claire-element-id="648406" data-claire-semantic="question"><p id="r-648405" data-claire-element-id="648405">Quoi ? o_O</p></div><p id="r-648407" data-claire-element-id="648407">Je me doutais que vous auriez du mal à comprendre... En fait, vous pouvez insérer un caractère spécial dans vos requêtes et remplacer ce caractère grâce à des méthodes de l'objet <strong>PreparedStatement</strong> en spécifiant sa place et sa valeur (son type étant défini par la méthode utilisée...).</p><p id="r-648408" data-claire-element-id="648408">Voici un exemple :</p><pre id="r-648409" data-claire-element-id="648409"><code data-claire-semantic="java">package com.sdz.prepare;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;

public class Prepare {

	public static void main(String[] args) {
		try {
			Class.forName(&quot;org.postgresql.Driver&quot;);
			
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;postgres&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			Statement state = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
			
			//On crée notre requête
			String query = &quot;SELECT prof_nom, prof_prenom FROM professeur&quot;;
			//Premier trou pour le nom du professeur
			query += &quot; WHERE prof_nom = ?&quot;;
			//Deuxième trou pour un id de professeur
			query += &quot; OR prof_id = ?&quot;;
			
			//On crée notre objet avec la requête en paramètre
			PreparedStatement prepare = conn.prepareStatement(query);
			//On remplace le trou numéro 1 =&gt; le nom du professeur
			prepare.setString(1, &quot;MAMOUD&quot;);
			//On remplace le trou numéro 2 =&gt; l'id du professeur
			prepare.setInt(2, 2);
			//On affiche
			System.out.println(prepare.toString());
			//On remodifie le trou numéro 1 
			prepare.setString(1, &quot;TOTO&quot;);
			//On ré-affiche
			System.out.println(prepare.toString());
			//On remodifie le trou numéro 2
			prepare.setInt(2, 159753);
			//On ré-affiche
			System.out.println(prepare.toString());
			
                        prepare.close();
                        state.close();

		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}</code></pre><p id="r-648410" data-claire-element-id="648410">Ce qui nous donne :</p><figure id="r-648412" data-claire-element-id="648413"><img id="r-648411" data-claire-element-id="648411" src="medias/uploads.siteduzero.com_files_155001_156000_155719.jpg" alt="Image utilisateur"/></figure><p id="r-648414" data-claire-element-id="648414">Je sais, ça fait toujours ça la première fois... :p <br/> Je ne vous cache pas que ceci peut s'avérer très utile.</p><div id="r-648416" data-claire-element-id="648416" data-claire-semantic="question"><p id="r-648415" data-claire-element-id="648415">En effet ! Mais qu'y a-t-il comme méthode d'affectation de valeur ?</p></div><p id="r-648417" data-claire-element-id="648417">C'est simple : vous vous souvenez de la petite liste de méthodes de l'objet <strong>ResultSet</strong> pour récupérer des données ? À peu de choses près, la même mais avec <strong>setXXX</strong> à la place de <strong>getXXX</strong>. ;)</p><p id="r-648418" data-claire-element-id="648418">Tout comme son homologue sans trou, cet objet peut prendre les mêmes types de paramètres pour la lecture et pour la modification des données lues :</p><pre id="r-648419" data-claire-element-id="648419"><code data-claire-semantic="java">PreparedStatement prepare = conn.prepareStatement(
							query, 
							ResultSet.TYPE_SCROLL_INSENSITIVE, 
							ResultSet.CONCUR_READ_ONLY
						);</code></pre><p id="r-648420" data-claire-element-id="648420">Vous avez aussi une méthode retournant un objet <strong>ResultSetMetaData</strong> mais encore une méthode permettant de nettoyer les changements de valeur des trous : <code data-claire-semantic="java">prepare.clearParameters(); </code>.<br/> Si vous ajoutez cette méthode à la fin de ce que je vous ai fait tout à l'heure et que vous affichez à nouveau le contenu de notre objet, vous aurez ceci :</p><figure id="r-648422" data-claire-element-id="648423"><img id="r-648421" data-claire-element-id="648421" src="medias/uploads.siteduzero.com_files_155001_156000_155721.png" alt="Image utilisateur"/></figure><p id="r-648424" data-claire-element-id="648424">Bon, je pense que le moment est venu de voir l'objet <strong>ResultSet</strong> plus en détail...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
<span class="arrow"></span>
<span class="next">Statement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
<span class="next">ResultSet 2 : le retour</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="ResultSet2leretour"></a><h2>ResultSet 2 : le retour</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
<span class="arrow"></span>
<span class="next">Les requêtes préparées</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">
<span class="next">Après la lecture : l&#039;édition</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-resultset-2-le-retour" data-claire-element-id="648468">ResultSet 2 : le retour</h4><p id="r-648426" data-claire-element-id="648426">Nous allons voir comment se promener dans nos objets <strong>ResultSet</strong>, vu que nous avons vu comment permettre cela... ^^</p><p id="r-648427" data-claire-element-id="648427">En fait, l'objet de résultat offre beaucoup de méthodes afin de pouvoir se promener dans les résultats.<br/> Cela, si vous avez bien préparé l'objet <strong>Statement</strong>.</p><p id="r-648428" data-claire-element-id="648428">Vous avez la possibilité de :</p><ul id="r-648453" data-claire-element-id="648453"><li id="r-648430" data-claire-element-id="648430"><p id="r-648429" data-claire-element-id="648429">vous positionner avant la première ligne de votre résultat : <code data-claire-semantic="java">res.beforeFirst() </code> ;</p></li><li id="r-648432" data-claire-element-id="648432"><p id="r-648431" data-claire-element-id="648431">savoir si vous êtes sur l'avant-première ligne : <code data-claire-semantic="java">res.isBeforeFirst() </code> ;</p></li><li id="r-648434" data-claire-element-id="648434"><p id="r-648433" data-claire-element-id="648433">vous positionner sur la première ligne de votre résultat : <code data-claire-semantic="java">res.first() </code> ;</p></li><li id="r-648436" data-claire-element-id="648436"><p id="r-648435" data-claire-element-id="648435">savoir si vous êtes sur la première ligne : <code data-claire-semantic="java">res.isFirst() </code> ;</p></li><li id="r-648438" data-claire-element-id="648438"><p id="r-648437" data-claire-element-id="648437">vous retrouver sur la dernière ligne : <code data-claire-semantic="java">res.last() </code> ;</p></li><li id="r-648440" data-claire-element-id="648440"><p id="r-648439" data-claire-element-id="648439">savoir si vous êtes sur la dernière ligne : <code data-claire-semantic="java">res.isLast() </code> ;</p></li><li id="r-648442" data-claire-element-id="648442"><p id="r-648441" data-claire-element-id="648441">vous mettre après la dernière ligne de résultat : <code data-claire-semantic="java">res.afterLast() </code> ;</p></li><li id="r-648444" data-claire-element-id="648444"><p id="r-648443" data-claire-element-id="648443">savoir si vous êtes sur l'après-dernière ligne : <code data-claire-semantic="java">res.isAfterLast() </code> ;</p></li><li id="r-648446" data-claire-element-id="648446"><p id="r-648445" data-claire-element-id="648445">aller de la première ligne à la dernière : <code data-claire-semantic="java">res.next() </code> ;</p></li><li id="r-648448" data-claire-element-id="648448"><p id="r-648447" data-claire-element-id="648447">aller de la dernière ligne à la première : <code data-claire-semantic="java">res.previous() </code> ;</p></li><li id="r-648450" data-claire-element-id="648450"><p id="r-648449" data-claire-element-id="648449">vous positionner sur une ligne précise de votre résultat : <code data-claire-semantic="java">res.absolute(5) </code> ;</p></li><li id="r-648452" data-claire-element-id="648452"><p id="r-648451" data-claire-element-id="648451">vous positionner sur une ligne par rapport à votre emplacement actuel : <code data-claire-semantic="java">res.relative(-3) </code>.</p></li></ul><p id="r-648454" data-claire-element-id="648454">Je vous ai concocté un morceau de code mettant en oeuvre tout ceci...<br/> Vous devriez retrouver les informations vu que ce code est commenté. ;)</p><pre id="r-648455" data-claire-element-id="648455"><code data-claire-semantic="java">package com.sdz.resultset;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class Resultset {
	public static void main(String[] args) {
		try {

			//--------------------------------------------------------------------
			//TOUT CECI, VOUS CONNAISSEZ			
			Class.forName(&quot;org.postgresql.Driver&quot;);
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;postgres&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			Statement state = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
			
			String query = &quot;SELECT prof_nom, prof_prenom FROM professeur&quot;;			
			ResultSet res = state.executeQuery(query);
			//--------------------------------------------------------------------
			
			//*
			int i = 1;			
			
			System.out.println(&quot;\n\t---------------------------------------&quot;);
			System.out.println(&quot;\tLECTURE STANDARD.&quot;);
			System.out.println(&quot;\t---------------------------------------&quot;);
			
			while(res.next()){
				System.out.println(&quot;\tNom : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; \t prénom : &quot;+ res.getString(&quot;prof_prenom&quot;));
				//On regarde si nous sommes sur la dernière ligne du résultat
				if(res.isLast())
					System.out.println(&quot;\t\t* DERNIER RESULTAT !\n&quot;);
				i++;
			}
			
			//Une fois terminé, nous contrôlons si nous sommes bien à l'extérieur des lignes de résultat
			if(res.isAfterLast())
				System.out.println(&quot;\tNous venons de terminer !\n&quot;);
			
			System.out.println(&quot;\t---------------------------------------&quot;);
			System.out.println(&quot;\tLecture en sens contraire.&quot;);
			System.out.println(&quot;\t---------------------------------------&quot;);
			
			//Nous sommes donc à la fin
			//Nous pouvons parcourir le résultat en sens contraire
			while(res.previous()){
				System.out.println(&quot;\tNom : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; \t prénom : &quot;+ res.getString(&quot;prof_prenom&quot;));

				//On regarde si on est sur la première ligne du résultat
				if(res.isFirst())
					System.out.println(&quot;\t\t* RETOUR AU DEBUT !\n&quot;);
			}
			
			//On regarde si on est sur l'avant-première ligne du résultat
			if(res.isBeforeFirst())
				System.out.println(&quot;\tNous venons de revenir au début !\n&quot;);
			
			
			System.out.println(&quot;\t---------------------------------------&quot;);
			System.out.println(&quot;\tAprès positionnement absolu du curseur à la place N° &quot; + i/2 + &quot;.&quot;);
			System.out.println(&quot;\t---------------------------------------&quot;);
			//On  positionne le curseur sur la ligne i/2, peu importe où on est
			res.absolute(i/2);
			while(res.next())
				System.out.println(&quot;\tNom : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; \t prénom : &quot;+ res.getString(&quot;prof_prenom&quot;));
			
			System.out.println(&quot;\t---------------------------------------&quot;);
			System.out.println(&quot;\tAprès positionnement relatif du curseur à la place N° &quot; + (i -(i-2)) + &quot;.&quot;);
			System.out.println(&quot;\t---------------------------------------&quot;);
			//On  met le curseur à la ligne actuelle moins i-2
			//Si nous reculons donc de i-2 lignes
			//Si nous n'avions pas mis de signe moins, nous aurions avancé de i-2 lignes 
			res.relative(-(i-2));
			while(res.next())
				System.out.println(&quot;\tNom : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; \t prénom : &quot;+ res.getString(&quot;prof_prenom&quot;));
			
                        res.close();
                        state.close();

		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}</code></pre><p id="r-648456" data-claire-element-id="648456">Voyez ce que donne ce code :</p><figure id="r-648458" data-claire-element-id="648459"><img id="r-648457" data-claire-element-id="648457" src="medias/uploads.siteduzero.com_files_155001_156000_155909.png" alt="Image utilisateur"/></figure><p id="r-648460" data-claire-element-id="648460">Je pense que la majorité des choses ont été vues ici... <br/> Par contre, faites bien attention à l'endroit où vous vous situez dans le parcours de la requête !</p><aside id="r-648462" data-claire-element-id="648462" data-claire-semantic="warning"><p id="r-648461" data-claire-element-id="648461">Il y a des emplacements particuliers. Par exemple, si vous n'êtes pas encore positionnés sur le premier élément et que vous faites un <code data-claire-semantic="java">rs.relative(1) </code>, vous vous retrouvez sur le premier élément. De même, un <code data-claire-semantic="java">rs.absolute(0); </code> correspond à un <code data-claire-semantic="java">rs.beforeFirst() </code> !</p></aside><p id="r-648463" data-claire-element-id="648463">Donc, lorsque vous voulez spécifiez la place du curseur sur la première ligne, vous utiliserez <code data-claire-semantic="java">absolute(1); </code> et ceci, peu importe où vous vous trouvez !</p><aside id="r-648465" data-claire-element-id="648465" data-claire-semantic="error"><p id="r-648464" data-claire-element-id="648464">Par contre, ceci nécessite que le <strong>ResultSet </strong>soit de type <strong>TYPE_SCROLL_SENSITIVE</strong> ou <strong>TYPE_SCROLL_INSENSITIVE</strong>, sinon vous aurez une exception !</p></aside><p id="r-648466" data-claire-element-id="648466">Bon, rien de bien méchant ici...<br/> Je vous propose donc de clore ce chapitre par un petit QCM avant de continuer sur notre lancée...</p><p id="r-648467" data-claire-element-id="648467">J'espère que ce chapitre vous a permis d'y voir plus clair sur le fonctionnement global de tout ce mic-mac...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
<span class="arrow"></span>
<span class="next">Les requêtes préparées</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">
<span class="next">Après la lecture : l&#039;édition</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Aprslalecturel039dition"></a><h2>Après la lecture : l&#039;édition</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
<span class="arrow"></span>
<span class="next">ResultSet 2 : le retour</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
<span class="next">Modifier des données</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-648470" data-claire-element-id="648470">Nous avons appris à utiliser des requêtes SQL avec des <strong>ResultSet</strong> afin de récupérer des informations provenant de la base. <br/> Nous allons voir comment éditer nos tables en insertion, modification et suppression dans nos programmes Java !<br/> Vous allez voir, c'est simplissime ! ! ^^</p>
</div><a name="Modifierdesdonnes"></a><h2>Modifier des données</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">
<span class="arrow"></span>
<span class="next">Après la lecture : l&#039;édition</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
<span class="next">Statement, toujours plus fort</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-modifier-des-donnees-1" data-claire-element-id="648514">Modifier des données</h4><p id="r-648471" data-claire-element-id="648471">Je sais que beaucoup d'entre vous se sont dit, lors du chapitre précédent : <br/> &quot;<strong><em>t'es sympa, tu nous dis que les objets </em>ResultSet<em>peuvent modifier des données lors de parcours de résultats... et tu ne nous montres même pas ça !</em></strong>&quot;</p><p id="r-648472" data-claire-element-id="648472">J'ai juste préféré séparer le côté lecture du côté lecture et modifications.<br/> D'ailleurs, c'est par ça que nous allons commencer. Bien sûr, il faudra que l'objet <strong>Statement</strong> retourne un <strong>ResultSet</strong> permettant cela !</p><p id="r-648473" data-claire-element-id="648473">En fait, durant la lecture, vous pouvez utilisez des méthodes qui ressemblent à celle que je vous ai déjà montrée lors du parcours d'un résultat... Vous vous souvenez, les méthodes comme :</p><ul id="r-648484" data-claire-element-id="648484"><li id="r-648475" data-claire-element-id="648475"><p id="r-648474" data-claire-element-id="648474"><code data-claire-semantic="java">res.getAscii();</code></p></li><li id="r-648477" data-claire-element-id="648477"><p id="r-648476" data-claire-element-id="648476"><code data-claire-semantic="java">res.getBytes();</code></p></li><li id="r-648479" data-claire-element-id="648479"><p id="r-648478" data-claire-element-id="648478"><code data-claire-semantic="java">res.getInt();</code></p></li><li id="r-648481" data-claire-element-id="648481"><p id="r-648480" data-claire-element-id="648480"><code data-claire-semantic="java">res.getString();</code></p></li><li id="r-648483" data-claire-element-id="648483"><p id="r-648482" data-claire-element-id="648482">...</p></li></ul><p id="r-648485" data-claire-element-id="648485">Sauf qu'ici, vous remplacerez <code data-claire-semantic="java">getXXX(); </code> par <code data-claire-semantic="java">updateXXX(); </code>. Ces méthodes de mise à jour des données prennent deux paramètres :</p><ul id="r-648490" data-claire-element-id="648490"><li id="r-648487" data-claire-element-id="648487"><p id="r-648486" data-claire-element-id="648486">1 : le nom de la colonne (<strong>String</strong>) ;</p></li><li id="r-648489" data-claire-element-id="648489"><p id="r-648488" data-claire-element-id="648488">2 : la valeur à mettre à la place de la valeur existante (dépend de la méthode utilisée) ;</p></li></ul><div id="r-648492" data-claire-element-id="648492" data-claire-semantic="question"><p id="r-648491" data-claire-element-id="648491">Comment ça : dépend de la méthode utilisée ?</p></div><p id="r-648493" data-claire-element-id="648493">C'est simple :</p><ul id="r-648500" data-claire-element-id="648500"><li id="r-648495" data-claire-element-id="648495"><p id="r-648494" data-claire-element-id="648494"><code data-claire-semantic="java">updateFloat(String nomColonne, float value) </code> : prend un <strong>float </strong>comme valeur ;</p></li><li id="r-648497" data-claire-element-id="648497"><p id="r-648496" data-claire-element-id="648496"><code data-claire-semantic="java">updateString(String nomColonne, String value) </code> : prend une chaîne de caractères en paramètre ;</p></li><li id="r-648499" data-claire-element-id="648499"><p id="r-648498" data-claire-element-id="648498">...</p></li></ul><p id="r-648501" data-claire-element-id="648501">Donc, changer la valeur d'un champ est très simple mais il faut, en plus des changements de valeurs, valider ces changements pour qu'ils soient effectifs, et ceci se fait grâce à la méthode <code data-claire-semantic="java">updateRow() </code>. De la même façon, vous pouvez annuler des changements avec la méthode <code data-claire-semantic="java">cancelRowUpdates() </code>.</p><aside id="r-648503" data-claire-element-id="648503" data-claire-semantic="warning"><p id="r-648502" data-claire-element-id="648502">Si vous avez à annuler des modifications, vous devrez le faire avant la méthode de validation, sinon, l'annulation sera ignorée !</p></aside><p id="r-648504" data-claire-element-id="648504">Je vous propose de voir un petit exemple de mise à jour :</p><pre id="r-648505" data-claire-element-id="648505"><code data-claire-semantic="java">package com.sdz.resultset;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;

public class Modif {
	public static void main(String[] args) {
		try {

			//--------------------------------------------------------------------
			//TOUT CECI, VOUS CONNAISSEZ			
			Class.forName(&quot;org.postgresql.Driver&quot;);
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;postgres&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			//On autorise la mise à jour des données et la mise à jour de l'affichage
			Statement state = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_UPDATABLE);
			
			//On va chercher une ligne dans la base de données
			String query = &quot;SELECT prof_id, prof_nom, prof_prenom FROM professeur WHERE prof_nom = 'MAMOU'&quot;;			
			ResultSet res = state.executeQuery(query);
			//--------------------------------------------------------------------
			
			//On se positionne sur la première ligne de donnée
			res.first();
				
			//On affiche ce qu'on trouve
			System.out.println(&quot;NOM : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; - PRENOM : &quot; + res.getString(&quot;prof_prenom&quot;));
			
			//On met à jour les champs
			res.updateString(&quot;prof_nom&quot;, &quot;COURTEL&quot;);
			res.updateString(&quot;prof_prenom&quot;, &quot;Angelo&quot;);
			//On valide
			res.updateRow();
			
			//Et voici les modifications
			System.out.println(&quot;*********************************&quot;);
			System.out.println(&quot;APRES MODIFICATION : &quot;);
			System.out.println(&quot;\tNOM : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; - PRENOM : &quot; + res.getString(&quot;prof_prenom&quot;) + &quot;\n&quot;);
			
			//On remet les infos du départ
			res.updateString(&quot;prof_nom&quot;, &quot;MAMOU&quot;);
			res.updateString(&quot;prof_prenom&quot;, &quot;Daniel&quot;);
			//On revalide
			res.updateRow();
			
			//Et voilà !
			System.out.println(&quot;*********************************&quot;);
			System.out.println(&quot;APRES REMODIFICATION : &quot;);
			System.out.println(&quot;\tNOM : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; - PRENOM : &quot; + res.getString(&quot;prof_prenom&quot;) + &quot;\n&quot;);

                        res.close();
                        state.close();
						
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}</code></pre><p id="r-648506" data-claire-element-id="648506">Et voici ce que j'obtiens :</p><figure id="r-648508" data-claire-element-id="648509"><img id="r-648507" data-claire-element-id="648507" src="medias/uploads.siteduzero.com_files_155001_156000_155936.png" alt="Image utilisateur"/></figure><p id="r-648510" data-claire-element-id="648510">Donc, le temps d'un instant, les données ont été modifiées dans la base de données, nous avons donc réussi notre pari ! :magicien:</p><div id="r-648512" data-claire-element-id="648512" data-claire-semantic="question"><p id="r-648511" data-claire-element-id="648511">Ôte-nous d'un doute, une bête requête SQL n'aurait pas pu faire l'affaire ?</p></div><p id="r-648513" data-claire-element-id="648513">Bien sûr que si ! :) <br/> Mais au moins, vous avez vu comment modifier des lignes via l'objet <strong>ResultSet</strong>...<br/> Nous allons voir comment exécuter les autres types de requêtes avec Java !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">
<span class="arrow"></span>
<span class="next">Après la lecture : l&#039;édition</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
<span class="next">Statement, toujours plus fort</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Statementtoujoursplusfort"></a><h2>Statement, toujours plus fort</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
<span class="arrow"></span>
<span class="next">Modifier des données</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
<span class="next">Gérer les transactions manuellement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-statement-toujours-plus-fort-1" data-claire-element-id="648536">Statement, toujours plus fort</h4><p id="r-648515" data-claire-element-id="648515">Vous savez depuis quelques temps déjà que ce sont les objets <strong>Statement</strong> qui sont chargés d'exécuter les instructions SQL.<br/> Par conséquent, vous devez avoir deviné que les requêtes de type sront aussi exécutées par ces mêmes objets :</p><ul id="r-648524" data-claire-element-id="648524"><li id="r-648517" data-claire-element-id="648517"><p id="r-648516" data-claire-element-id="648516"><strong>INSERT</strong></p></li><li id="r-648519" data-claire-element-id="648519"><p id="r-648518" data-claire-element-id="648518"><strong>UPDATE</strong></p></li><li id="r-648521" data-claire-element-id="648521"><p id="r-648520" data-claire-element-id="648520"><strong>DELETE</strong></p></li><li id="r-648523" data-claire-element-id="648523"><p id="r-648522" data-claire-element-id="648522"><strong>CREATE</strong></p></li></ul><p id="r-648525" data-claire-element-id="648525">Voici un code d'exemple :</p><pre id="r-648526" data-claire-element-id="648526"><code data-claire-semantic="java">package com.sdz.statement;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class State {

	public static void main(String[] args) {
		
		try {			
			Class.forName(&quot;org.postgresql.Driver&quot;);
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;postgres&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			//On autorise la mise à jour des données et la mise à jour de l'affichage
			Statement state = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
			PreparedStatement prepare = conn.prepareStatement(&quot;UPDATE professeur set prof_prenom = ? WHERE prof_nom = 'MAMOU'&quot;);
			
			//On va chercher une ligne dans la base de données
			String query = &quot;SELECT prof_nom, prof_prenom FROM professeur WHERE prof_nom = 'MAMOU'&quot;;			
			
			//On exécute la requête
			ResultSet res = state.executeQuery(query);
			res.first();
			//On affiche
			System.out.println(&quot;\n\tDONNEES D'ORIGINE : &quot;);
			System.out.println(&quot;\t-------------------&quot;);
			System.out.println(&quot;\tNOM : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; - PRENOM : &quot; + res.getString(&quot;prof_prenom&quot;));
			
			//On paramètre notre requête préparée
			prepare.setString(1, &quot;Gérard&quot;);
			//On exécute
			prepare.executeUpdate();
			
			res = state.executeQuery(query);
			res.first();
			//On affiche à nouveau
			System.out.println(&quot;\n\t\t APRES MAJ : &quot;);
			System.out.println(&quot;\t\t * NOM : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; - PRENOM : &quot; + res.getString(&quot;prof_prenom&quot;));
						
			//On refait une mise à jour
			prepare.setString(1, &quot;Daniel&quot;);
			prepare.executeUpdate();
			
			res = state.executeQuery(query);
			res.first();
			//on affiche une nouvelle fois
			System.out.println(&quot;\n\t\t REMISE A ZERO : &quot;);
			System.out.println(&quot;\t\t * NOM : &quot; + res.getString(&quot;prof_nom&quot;) + &quot; - PRENOM : &quot; + res.getString(&quot;prof_prenom&quot;));

                        prepare.close();
                        res.close();
                        state.close();
			
		} catch (ClassNotFoundException e) {
			e.printStackTrace();
		} catch (SQLException e) {
			e.printStackTrace();
		}
		
	}
}</code></pre><p id="r-648527" data-claire-element-id="648527">Ce qui me donne :</p><figure id="r-648529" data-claire-element-id="648530"><img id="r-648528" data-claire-element-id="648528" src="medias/uploads.siteduzero.com_files_155001_156000_155939.png" alt="Image utilisateur"/></figure><p id="r-648531" data-claire-element-id="648531">Ici, nous avons utilisé un <strong>PreparedStatement</strong>, histoire de faire compliqué dès le premier coup... ^^ <br/> Mais vous auriez pu tout aussi bien utiliser un <strong>Statement</strong> tout simple et invoquer la méthode <code data-claire-semantic="java">executeUpdate(String query) </code>.</p><p id="r-648532" data-claire-element-id="648532">Vous savez quoi ? Pour les autres types de requêtes, il suffit d'invoquer la même méthode que pour la mise à jour... En fait, celle-ci retourne un booléen qui permet de savoir si le traitement a réussi ou non. :)</p><p id="r-648533" data-claire-element-id="648533">Voici quelques exemples :</p><pre id="r-648534" data-claire-element-id="648534"><code data-claire-semantic="java">state.executeUpdate(&quot;INSERT INTO professeur (prof_nom, prof_prenom) VALUES('SALMON', 'Dylan')&quot;);
state.executeUpdate(&quot;DELETE FROM professeur WHERE prof_nom = 'MAMOU'&quot;);</code></pre><p id="r-648535" data-claire-element-id="648535">C'est très simple à utiliser, vous ne pourrez pas dire le contraire... :-° <br/> Cependant, je ne sais pas si vous savez ceci, mais certains moteurs SQL, comme PostgreSQL, vous proposent de gérer vos requêtes SQL (celles qui ont pour effet une modification de la base, pas celle de visualisation de données) avec ce qu'on appelle des transactions...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
<span class="arrow"></span>
<span class="next">Modifier des données</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
<span class="next">Gérer les transactions manuellement</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Grerlestransactionsmanuellement"></a><h2>Gérer les transactions manuellement</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
<span class="arrow"></span>
<span class="next">Statement, toujours plus fort</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">
<span class="next">N&#039;avoir qu&#039;une instance de sa connexion</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-gerer-les-transactions-manuellement-1" data-claire-element-id="648570">Gérer les transactions manuellement</h4><div id="r-648538" data-claire-element-id="648538" data-claire-semantic="question"><p id="r-648537" data-claire-element-id="648537">Tu es bien gentil, mais qu'est-ce que c'est que ça ?</p></div><p id="r-648539" data-claire-element-id="648539">Bon, alors, par où vais-je commencer ?...<br/> Lorsque vous insérez, modifiez ou supprimez des données dans PostgreSQL, il se passe un événement automatique : <strong>la validation des modifications par le moteur SQL !</strong><br/> C'est aussi simple que ça... Un petit schéma pour visualiser :</p><figure id="r-648541" data-claire-element-id="648542"><img id="r-648540" data-claire-element-id="648540" src="medias/uploads.siteduzero.com_files_156001_157000_156093.png" alt="Image utilisateur"/></figure><p id="r-648543" data-claire-element-id="648543">Lorsque vous exécutez une requête de type <strong>INSERT</strong>, <strong>CREATE</strong>, <strong>UPDATE </strong>ou <strong>DELETE</strong>, ces requêtes modifient les données présentes dans la base. Une fois exécutée, le moteur SQL valide directement ces modifications !</p><p id="r-648544" data-claire-element-id="648544">Par contre, vous pouvez avoir la main sur ce point :</p><figure id="r-648546" data-claire-element-id="648547"><img id="r-648545" data-claire-element-id="648545" src="medias/uploads.siteduzero.com_files_156001_157000_156092.png" alt="Image utilisateur"/></figure><p id="r-648548" data-claire-element-id="648548">Comme ceci, c'est vous qui avez le contrôle sur vos données !</p><div id="r-648550" data-claire-element-id="648550" data-claire-semantic="question"><p id="r-648549" data-claire-element-id="648549">Je ne vois pas l'intérêt de faire ça !</p></div><p id="r-648551" data-claire-element-id="648551">C'est simple : pour pouvoir contrôler <strong>l'intégrité de vos données !</strong><br/> Imaginez que vous devez faire deux requêtes, une modification et une insertion et que vous partez du principe que l'insertion dépend de la mise à jour ! Comment feriez-vous si de mauvaises données étaient mises à jour ? L'insertion qui en découle serait mauvaise... :( <br/> Ceci, bien sûr, si le moteur SQL valide automatiquement les requêtes faites...</p><div id="r-648553" data-claire-element-id="648553" data-claire-semantic="question"><p id="r-648552" data-claire-element-id="648552">Oui, vu sous cet angle... Comment on gère ça, alors ?</p></div><p id="r-648554" data-claire-element-id="648554">On spécifie au moteur SQL de ne pas valider automatiquement<strong>. Ou plutôt</strong> de valider automatiquement les requêtes SQL avec une méthode qui prend un booléen en paramètre, mais <strong>qui ne concernera pas</strong> l'objet <strong>Statement</strong>, <strong>mais</strong> l'objet <strong>Connection</strong> :</p><pre id="r-648555" data-claire-element-id="648555"><code data-claire-semantic="java">import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;


public class Transact {

	public static void main(String[] args) {
		try {
			Class.forName(&quot;org.postgresql.Driver&quot;);
			
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;batterie&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			conn.setAutoCommit(false);
			
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}</code></pre><p id="r-648556" data-claire-element-id="648556">Par contre, lorsque vous voulez que vos requêtes soient prises en compte, il faut utiliser la méthode <code data-claire-semantic="java">conn.commit(); </code>.</p><aside id="r-648558" data-claire-element-id="648558" data-claire-semantic="error"><p id="r-648557" data-claire-element-id="648557">En mode <code data-claire-semantic="java">setAutoCommit(false); </code>, si vous ne validez pas vos requêtes, elles ne seront pas prises en compte !</p></aside><p id="r-648559" data-claire-element-id="648559">Vous pouvez revenir à tout moment en mode validation automatique avec <code data-claire-semantic="java">setAutoCommit(true);</code></p><p id="r-648560" data-claire-element-id="648560">Voici un exemple :</p><pre id="r-648561" data-claire-element-id="648561"><code data-claire-semantic="java">import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;


public class Transact {

	public static void main(String[] args) {
		try {
			Class.forName(&quot;org.postgresql.Driver&quot;);
			
			String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
			String user = &quot;postgres&quot;;
			String passwd = &quot;batterie&quot;;
			
			Connection conn = DriverManager.getConnection(url, user, passwd);
			conn.setAutoCommit(false);
			Statement state = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE);
			String query = &quot;UPDATE professeur SET prof_prenom = 'Cyrille' WHERE prof_nom = 'MAMOU'&quot;;
			
			ResultSet result = state.executeQuery(&quot;SELECT * FROM professeur WHERE prof_nom = 'MAMOU'&quot;);
			result.first();
			System.out.println(&quot;NOM : &quot; + result.getString(&quot;prof_nom&quot;) + &quot; - PRENOM : &quot; + result.getString(&quot;prof_prenom&quot;));
			
			state.executeUpdate(query);
			
			result = state.executeQuery(&quot;SELECT * FROM professeur WHERE prof_nom = 'MAMOU'&quot;);
			result.first();
			System.out.println(&quot;NOM : &quot; + result.getString(&quot;prof_nom&quot;) + &quot; - PRENOM : &quot; + result.getString(&quot;prof_prenom&quot;));
			
                        result.close();
                        state.close();
			
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}</code></pre><p id="r-648562" data-claire-element-id="648562">Vous pouvez exécuter le code autant de fois que vous voulez, vous aurez toujours :</p><figure id="r-648564" data-claire-element-id="648565"><img id="r-648563" data-claire-element-id="648563" src="medias/uploads.siteduzero.com_files_156001_157000_156256.png" alt="Image utilisateur"/></figure><p id="r-648566" data-claire-element-id="648566">Vous voyez : malgré la requête de mise à jour, celle-ci est inopérante ! Oh oui ! Vous pouvez voir les modifications durant le temps d'exécution du script, mais vu que vous n'avez pas validé les modifications, celles-ci sont annulées à la fin...<br/> Pour que la mise à jour soit effective, il aurait fallu faire un <code data-claire-semantic="java">conn.commit() </code> avant la fin du script ! ^^</p><p id="r-648567" data-claire-element-id="648567">Bon, je crois qu'on en a assez vu pour ce chapitre... En route pour le QCM ! :pirate:</p><p id="r-648568" data-claire-element-id="648568">Alors ? Je ne vous avais pas dit que ce chapitre allait être tout simple ?<br/> Chose promise, chose due !</p><p id="r-648569" data-claire-element-id="648569">Maintenant, je vous propose de voir comment uniformiser un peu tout ça... C'est vrai qu'établir tout le temps la connexion est un peu fastidieux alors qu'une seule instance de celle-ci suffirait...<br/> C'est ce que je vous propose de voir dans le chapitre qui suit. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
<span class="arrow"></span>
<span class="next">Statement, toujours plus fort</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">
<span class="next">N&#039;avoir qu&#039;une instance de sa connexion</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="N039avoirqu039uneinstancedesaconnexion"></a><h2>N&#039;avoir qu&#039;une instance de sa connexion</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
<span class="arrow"></span>
<span class="next">Gérer les transactions manuellement</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
<span class="next">Pourquoi se connecter qu&#039;une seule fois ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-648572" data-claire-element-id="648572">L'exécution de commandes SQL n'a plus de secret pour vous, je le sais, c'est moi qui vous ai formés ! :p <br/> Non, je blague...</p><p id="r-648573" data-claire-element-id="648573">Après vous avoir fait découvrir tout ça, je me suis dis : <strong><em>montrer une approche un peu plus objet ne serait pas du luxe !</em></strong></p><p id="r-648574" data-claire-element-id="648574">C'est vrai, se connecter sans arrêt à notre base de données commence à être fastidieux. Je vous propose donc d'y remédier avec ce chapitre. :)</p>
</div><a name="Pourquoiseconnecterqu039uneseulefois"></a><h2>Pourquoi se connecter qu&#039;une seule fois ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">
<span class="arrow"></span>
<span class="next">N&#039;avoir qu&#039;une instance de sa connexion</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
<span class="next">Le pattern singleton</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-pourquoi-se-connecter-qu-une-seule-fois" data-claire-element-id="648584">Pourquoi se connecter qu'une seule fois ?</h4><div id="r-648576" data-claire-element-id="648576" data-claire-semantic="question"><p id="r-648575" data-claire-element-id="648575">Pourquoi tu veux absolument qu'on aie une seule instance de notre objet <strong>Connection </strong>?</p></div><p id="r-648577" data-claire-element-id="648577">Parce que ça ne sert pas à grand-chose de réinitialiser la connexion à votre BDD. Rappelez-vous que la connexion sert à faire le pont entre votre base et votre application. <strong>Pourquoi voulez-vous que votre application se connecte à chaque fois à votre BDD ?</strong><br/> Une fois la connexion effective, pourquoi vouloir la refaire ? Votre application et votre BDD peuvent discuter !</p><div id="r-648579" data-claire-element-id="648579" data-claire-semantic="question"><p id="r-648578" data-claire-element-id="648578">Bon, c'est vrai qu'avec du recul, ça paraît superflu... <br/> Du coup, comment tu fais pour garantir qu'une seule instance de <strong>Connection</strong> existe dans l'application ?</p></div><p id="r-648580" data-claire-element-id="648580">C'est ici que le <em>pattern singleton</em> arrive !<br/> Ce pattern est peut-être l'un des plus simples à comprendre même s'il va y avoir un point qui va vous faire bondir... ^^ <br/> Le principe de base de ce pattern est d'interdire l'instanciation d'une classe !</p><div id="r-648582" data-claire-element-id="648582" data-claire-semantic="question"><p id="r-648581" data-claire-element-id="648581">:waw: <br/> On peut savoir comment tu comptes t'y prendre ?</p></div><p id="r-648583" data-claire-element-id="648583">C'est ça qui va vous faire bondir : avec un constructeur déclaré <strong>private</strong> !<br/> Nul ne sert de lambiner, voyons comment rendre tout ceci possible...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">
<span class="arrow"></span>
<span class="next">N&#039;avoir qu&#039;une instance de sa connexion</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
<span class="next">Le pattern singleton</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lepatternsingleton"></a><h2>Le pattern singleton</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
<span class="arrow"></span>
<span class="next">Pourquoi se connecter qu&#039;une seule fois ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
<span class="next">Le singleton dans tous ces états</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-pattern-singleton-1" data-claire-element-id="648610">Le pattern singleton</h4><p id="r-648585" data-claire-element-id="648585">Alors ce que nous voulons, c'est une seule instance de notre connexion ; voici une classe qui permet ça :</p><pre id="r-648586" data-claire-element-id="648586"><code data-claire-semantic="java">package com.sdz.connection;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class SdzConnection{

	/**
	 * URL de connection
	 */
	private String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
	/**
	 * Nom du user
	 */
	private String user = &quot;postgres&quot;;
	/**
	 * Mot de passe du user
	 */
	private String passwd = &quot;postgres&quot;;
	/**
	 * Objet Connection
	 */
	private static Connection connect;
	
	/**
	 * Constructeur privé
	 */
	private SdzConnection(){
		try {
			connect = DriverManager.getConnection(url, user, passwd);
		} catch (SQLException e) {
			e.printStackTrace();
		}
	}
	
	/**
	 * Méthode qui va nous retourner notre instance
	 * et la créer si elle n'existe pas...
	 * @return
	 */
	public static Connection getInstance(){
		if(connect == null){
			new SdzConnection();
		}
		return connect;	
	}	
}</code></pre><p id="r-648587" data-claire-element-id="648587">Nous avons ici une classe avec un constructeur privé (même si, ici, ce n'était pas nécessaire) : du coup, impossible d'avoir une instance de cet objet et impossible d'accéder aux attributs puisqu'ils sont déclarés <strong>private</strong> !<br/> Notre objet <strong>Connection</strong> est instancié dans le constructeur privé et la seule méthode accessible de l'extérieur de la classe est <code data-claire-semantic="java">getInstance() </code>. C'est donc cette méthode qui aura pour rôle de créer la connexion lorsque celle-ci n'existe pas, et seulement dans ce cas.</p><p id="r-648588" data-claire-element-id="648588">Pour en être bien sûrs, nous allons faire un petit test... ^^ <br/> Voici le code un peu modifié de la méthode <code data-claire-semantic="java">getInstance() </code>...</p><pre id="r-648589" data-claire-element-id="648589"><code data-claire-semantic="java">public static Connection getInstance(){
	if(connect == null){
		new SdzConnection();
		System.out.println(&quot;INSTANCIATION DE LA CONNEXION SQL ! &quot;);
	}
	else{
		System.out.println(&quot;CONNEXION SQL EXISTANTE ! &quot;);
	}
	return connect;	
}</code></pre><p id="r-648590" data-claire-element-id="648590">Ceci a pour but de voir quand la connexion est réellement créée. Ensuite, il ne nous manque plus qu'un code de test. Oh ! Ben ça alors ! J'en ai un sous la main :</p><pre id="r-648591" data-claire-element-id="648591"><code data-claire-semantic="java">package com.sdz.connection;

import java.sql.DatabaseMetaData;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.sql.Statement;

public class Test {

	public static void main(String[] args) {
			
		try {
			//1
			PreparedStatement prepare = SdzConnection.getInstance().prepareStatement(&quot;SELECT * FROM classe WHERE cls_nom = ?&quot;);
			//2
			Statement state = SdzConnection.getInstance().createStatement();
			//3
			SdzConnection.getInstance().setAutoCommit(false);
			//Et 4 appels à la méthode getInstance()
			DatabaseMetaData meta = SdzConnection.getInstance().getMetaData();
			
		} catch (SQLException e) {
			e.printStackTrace();
		}
	}
}</code></pre><p id="r-648592" data-claire-element-id="648592">Il y a 4 appels à la méthode en question, que croyez-vous que ce code va afficher ?</p><p id="r-648593" data-claire-element-id="648593"></p><figure id="r-648595" data-claire-element-id="648596"><img id="r-648594" data-claire-element-id="648594" src="medias/uploads.siteduzero.com_files_156001_157000_156266.png" alt="Image utilisateur"/></figure><p id="r-648597" data-claire-element-id="648597">Vous avez la preuve que l'instanciation ne se fait qu'une seule fois et donc, que notre connexion à la BDD est unique !</p><div id="r-648599" data-claire-element-id="648599" data-claire-semantic="question"><p id="r-648598" data-claire-element-id="648598">Bon, ça c'est compris, par contre, pourquoi tu disais que le constructeur n'était pas nécessaire ?</p></div><p id="r-648600" data-claire-element-id="648600">Tout simplement parce que nous aurions pu avoir cela à la place et ça aurait tout aussi bien fonctionné :</p><pre id="r-648601" data-claire-element-id="648601"><code data-claire-semantic="java">package com.sdz.connection;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class SdzConnection{

	/**
	 * URL de connection
	 */
	private static String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
	/**
	 * Nom du user
	 */
	private static String user = &quot;postgres&quot;;
	/**
	 * Mot de passe du user
	 */
	private static String passwd = &quot;postgres&quot;;
	/**
	 * Objet Connection
	 */
	private static Connection connect;
	
	/**
	 * Méthode qui va nous retourner notre instance
	 * et la créer si elle n'existe pas...
	 * @return
	 */
	public static Connection getInstance(){
		if(connect == null){
			try {
				connect = DriverManager.getConnection(url, user, passwd);
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}		
		return connect;	
	}	
}</code></pre><aside id="r-648603" data-claire-element-id="648603" data-claire-semantic="warning"><p id="r-648602" data-claire-element-id="648602">Par contre, vous devrez rajouter la déclaration <strong>static</strong> de vos paramètres de connexion...</p></aside><p id="r-648604" data-claire-element-id="648604">Vous pouvez relancer le code de test, vous verrez qu'il fonctionne toujours ! <br/> J'ai mis un constructeur privé d'abord car vous deviez savoir que cela existait, mais c'était superflu dans notre cas...</p><div id="r-648606" data-claire-element-id="648606" data-claire-semantic="question"><p id="r-648605" data-claire-element-id="648605">D'accord, mais j'ai une application <em>multi-threads</em>, tu es sûr qu'il n'y aura pas de conflit ?</p></div><p id="r-648607" data-claire-element-id="648607">Hum ! Vous savez déjà répondre à cette question si vous avez lu le<a href="http://www.siteduzero.com/tutoriel-3-10516-les-threads.html"> chapitre sur les threads du tuto Java !</a><br/> Il vous suffit de synchroniser la méthode <code data-claire-semantic="java">getInstance() </code> et le tour est joué...<br/> Mais, parce qu'il y a un mais... cette méthode ne règle le problème qu'avant que la connexion ne soit instanciée. Autrement dit, une fois la connexion instanciée, la synchronisation ne sert plus à rien... :euh:</p><p id="r-648608" data-claire-element-id="648608">Le problème de <em>multi-threading</em> ne se pose pas vraiment pour une connexion à une BDD puisque ce <em>singleton</em> sert surtout de passerelle entre votre BDD et votre application, mais il peut y avoir d'autres objets que des connexions SQL qui ne doivent être instanciés qu'une fois et tous ne sont pas aussi laxistes concernant le multi-threading...</p><p id="r-648609" data-claire-element-id="648609">Voyons comment parfaire ce pattern avec un autre exemple qu'une connexion SQL...</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
<span class="arrow"></span>
<span class="next">Pourquoi se connecter qu&#039;une seule fois ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
<span class="next">Le singleton dans tous ces états</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesingletondanstouscestats"></a><h2>Le singleton dans tous ces états</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
<span class="arrow"></span>
<span class="next">Le pattern singleton</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">
<span class="next">TP : un testeur de requête</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-singleton-dans-tous-ces-etats" data-claire-element-id="648637">Le singleton dans tous ces états</h4><p id="r-648611" data-claire-element-id="648611">Alors... Nous allons travailler avec un autre exemple et vu que j'étais très inspiré, voici notre super singleton :</p><pre id="r-648612" data-claire-element-id="648612"><code data-claire-semantic="java">package com.sdz.connection;

public class SdzSingleton {

	/**
	 * Le singleton
	 */
	private static SdzSingleton single;
	/**
	 * Variable d'instance
	 */
	private String name = &quot;&quot;;
	
	/**
	 * Constructeur privé
	 */
	private SdzSingleton(){
		this.name = &quot;Mon singleton&quot;;
		System.out.println(&quot;\t\tCREATION DE L'INSTANCE ! ! !&quot;);
	}
	
	/**
	 * Méthode d'accès au singleton
	 * @return SdzSingleton
	 */
	public static SdzSingleton getInstance(){
		if(single == null)
			single = new SdzSingleton();
		
		return single;
	}
	
	/**
	 * Accesseur 
	 * @return
	 */
	public String getName(){
		return this.name;
	}
}</code></pre><div id="r-648614" data-claire-element-id="648614" data-claire-semantic="question"><p id="r-648613" data-claire-element-id="648613">Quoi, c'est ça ton singleton ?</p></div><p id="r-648615" data-claire-element-id="648615">Oui, ce n'est pas que je manquais d'inspiration, c'est juste qu'avec une classe toute simple, on comprend mieux les choses...</p><p id="r-648616" data-claire-element-id="648616">Et voici notre classe de test :</p><pre id="r-648617" data-claire-element-id="648617"><code data-claire-semantic="java">package com.sdz.connection;

public class TestSingleton {

	public static void main(String[] args) {
		for(int i = 1; i &lt; 4; i++)
			System.out.println(&quot;Appel N° &quot; + i + &quot; : &quot; + SdzSingleton.getInstance().getName());
	}
}</code></pre><p id="r-648618" data-claire-element-id="648618">Ce qui nous donne :</p><figure id="r-648620" data-claire-element-id="648621"><img id="r-648619" data-claire-element-id="648619" src="medias/uploads.siteduzero.com_files_156001_157000_156270.png" alt="Image utilisateur"/></figure><p id="r-648622" data-claire-element-id="648622">La politique du singleton est toujours bonne. Maintenant, je vais vous poser une question : quand croyez-vous que la création d'une instance soit la plus judicieuse ?</p><div id="r-648624" data-claire-element-id="648624" data-claire-semantic="question"><p id="r-648623" data-claire-element-id="648623">Qu'est-ce que tu veux dire par là ?</p></div><p id="r-648625" data-claire-element-id="648625">C'est simple : ici, nous avons exécuté notre code et l'instance est créée lorsque qu'on la demande pour la première fois ! C'est le principal problème que pose le singleton et le multi-threading : la première instance... Une fois celle-ci créée, il y a moins de problème.</p><div id="r-648627" data-claire-element-id="648627" data-claire-semantic="question"><p id="r-648626" data-claire-element-id="648626">Parce que tu vois un autre endroit où créer l'instance, toi ?</p></div><p id="r-648628" data-claire-element-id="648628">Oui, au chargement de la classe par la JVM et ceci se fait en instanciant notre singleton à sa déclaration dans la classe, soit, comme ceci :</p><pre id="r-648629" data-claire-element-id="648629"><code data-claire-semantic="java">package com.sdz.connection;

public class SdzSingleton {

	/**
	 * Le singleton
	 */
	private static SdzSingleton single = new SdzSingleton();
	/**
	 * Variable d'instance
	 */
	private String name = &quot;&quot;;
	
	/**
	 * Constructeur privé
	 */
	private SdzSingleton(){
		this.name = &quot;Mon singleton&quot;;
		System.out.println(&quot;\n\t\tCREATION DE L'INSTANCE ! ! !&quot;);
	}
	
	/**
	 * Méthode d'accès au singleton
	 * @return SdzSingleton
	 */
	public static SdzSingleton getInstance(){
		return single;
	}
	
	/**
	 * Accesseur 
	 * @return
	 */
	public String getName(){
		return this.name;
	}
}</code></pre><p id="r-648630" data-claire-element-id="648630">Avec ce code, c'est la machine virtuelle qui va se charger de charger l'instance du singleton, bien avant que n'importe quel <em>thread</em> vienne taquiner la méthode <code data-claire-semantic="java">getInstance() </code>... :magicien:</p><p id="r-648631" data-claire-element-id="648631">Il y a une autre méthode permettant de faire ceci, mais elle ne fonctionne parfaitement que depuis le JDK 1.5... <br/> On appelle cette méthode : &quot;<em><strong>le verrouillage à double vérification</strong></em>&quot;.<br/> Cette méthode consiste à utiliser le mot clé <strong>volatile</strong> combiné au mot clé <strong>synchronized</strong>.<br/> Pour les ZérOs qui l'ignorent, déclarer une variable <strong>volatile</strong> permet de s'assurer un accès ordonné des threads à une variable (plusieurs threads peuvent accéder à cette variable), Ceci marque le premier point de verrouillage.<br/> Ensuite, la double vérification s'effectuera dans la méthode <code data-claire-semantic="java">getInstance() </code>, on synchronise UNIQUEMENT lorsque le singleton n'est pas créé.</p><p id="r-648632" data-claire-element-id="648632">Voici ce que ça nous donne :</p><pre id="r-648633" data-claire-element-id="648633"><code data-claire-semantic="java">package com.sdz.connection;

public class SdzSingleton {

	/**
	 * Le singleton
	 */
	private volatile static SdzSingleton single;
	/**
	 * Variable d'instance
	 */
	private String name = &quot;&quot;;
	
	/**
	 * Constructeur privé
	 */
	private SdzSingleton(){
		this.name = &quot;Mon singleton&quot;;
		System.out.println(&quot;\n\t\tCREATION DE L'INSTANCE ! ! !&quot;);
	}
	
	/**
	 * Méthode d'accès au singleton
	 * @return SdzSingleton
	 */
	public static SdzSingleton getInstance(){
		if(single == null){
			synchronized(SdzSingleton.class){
				if(single == null)
					single = new SdzSingleton();
			}
		}
		
		return single;
	}
	
	/**
	 * Accesseur 
	 * @return
	 */
	public String getName(){
		return this.name;
	}
}</code></pre><p id="r-648634" data-claire-element-id="648634">Voilà : vous êtes désormais incollables sur le singleton !<br/> Je pense qu'après tout ça, un QCM s'impose...</p><p id="r-648635" data-claire-element-id="648635">Bon : vous devez vous rendre compte que travailler avec JDBC n'a rien de compliqué, en définitive !<br/> Je vois dans vos regards que vous avez perdu le côté mystifié de JDBC, maintenant ; vous devriez être à même d'utiliser cette API dans vos programmes Java.</p><p id="r-648636" data-claire-element-id="648636">Tiens, avec ce que nous venons de voir, ça me donne une idée de TP... :pirate:</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
<span class="arrow"></span>
<span class="next">Le pattern singleton</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">
<span class="next">TP : un testeur de requête</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="TPuntesteurderequte"></a><h2>TP : un testeur de requête</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
<span class="arrow"></span>
<span class="next">Le singleton dans tous ces états</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
<span class="next">Cahier des charges</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-648639" data-claire-element-id="648639">Bon, vous avez appris un tas de choses et il est grand temps de faire un peu de pratique !</p><p id="r-648640" data-claire-element-id="648640">Dans ce TP, je vais vous demander de réaliser un testeur de requête SQL... Vous ne voyez pas où je veux en venir ? Lisez donc la suite... :pirate:</p>
</div><a name="Cahierdescharges"></a><h2>Cahier des charges</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">
<span class="arrow"></span>
<span class="next">TP : un testeur de requête</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
<span class="next">Quelques captures d&#039;écran</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-cahier-des-charges-39" data-claire-element-id="648660">Cahier des charges</h4><p id="r-648641" data-claire-element-id="648641">Alors... Le but du jeu est de :</p><ul id="r-648656" data-claire-element-id="648656"><li id="r-648643" data-claire-element-id="648643"><p id="r-648642" data-claire-element-id="648642">pouvoir avoir une IHM permettant la saisie d'une requête SQL dans un champ ;</p></li><li id="r-648645" data-claire-element-id="648645"><p id="r-648644" data-claire-element-id="648644">lancer l'exécution de la requête grâce à un bouton ;</p></li><li id="r-648647" data-claire-element-id="648647"><p id="r-648646" data-claire-element-id="648646">ce bouton devra être dans une barre d'outils ;</p></li><li id="r-648649" data-claire-element-id="648649"><p id="r-648648" data-claire-element-id="648648">dans le cas où la requête renvoie 0 ou plusieurs résultats, afficher ceux-ci dans un <strong>JTable</strong> ;</p></li><li id="r-648651" data-claire-element-id="648651"><p id="r-648650" data-claire-element-id="648650">le nom des colonnes devra être visible ;</p></li><li id="r-648653" data-claire-element-id="648653"><p id="r-648652" data-claire-element-id="648652">en cas d'erreur, une pop-up (<strong>JOptionPane</strong>) contenant le message s'affichera ;</p></li><li id="r-648655" data-claire-element-id="648655"><p id="r-648654" data-claire-element-id="648654">un petit message affichera le temps d'exécution de la requête ainsi que le nombre de lignes retournées en bas de fenêtre.</p></li></ul><p id="r-648657" data-claire-element-id="648657">Vous avez de quoi faire, ici...<br/> Bon, si vous ne savez pas comment faire pour le temps d'exécution de la requête, je vous donne un indice : <code data-claire-semantic="java">System.currentTimeMillis(); </code> retourne un <strong>long</strong>...</p><aside id="r-648659" data-claire-element-id="648659" data-claire-semantic="information"><p id="r-648658" data-claire-element-id="648658">Pour les ZérOs n'ayant pas lu la partie événementielle du tuto Java, je vous autorise à faire une version en mode console ; par contre, celle-ci n'aura pas de correction... ^^</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">
<span class="arrow"></span>
<span class="next">TP : un testeur de requête</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
<span class="next">Quelques captures d&#039;écran</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Quelquescapturesd039cran"></a><h2>Quelques captures d&#039;écran</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
<span class="arrow"></span>
<span class="next">Cahier des charges</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-quelques-captures-d-ecran-1" data-claire-element-id="648667">Quelques captures d'écran</h4><p id="r-648661" data-claire-element-id="648661">Bon... Voici ce que j'ai obtenu avec mon code. Inspirez-vous en pour faire votre programme...</p><p id="r-648662" data-claire-element-id="648665"><a href="medias/uploads.siteduzero.com_files_156001_157000_156377.jpg"><img id="r-648663" data-claire-element-id="648662" src="medias/uploads.siteduzero.com_thb_156001_157000_156377.jpg" alt="Image utilisateur"/></a><a href="medias/uploads.siteduzero.com_files_156001_157000_156379.jpg"><img id="r-648664" data-claire-element-id="648663" src="medias/uploads.siteduzero.com_thb_156001_157000_156379.jpg" alt="Image utilisateur"/></a><a href="medias/uploads.siteduzero.com_files_156001_157000_156378.jpg"><img id="r-648665" data-claire-element-id="648664" src="medias/uploads.siteduzero.com_thb_156001_157000_156378.jpg" alt="Image utilisateur"/></a></p><p id="r-648666" data-claire-element-id="648666">Je n'ai plus qu'à vous souhaiter bonne chance et bon courage !<br/> Let's go !</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
<span class="arrow"></span>
<span class="next">Cahier des charges</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
<span class="next">Correction</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Correction"></a><h2>Correction</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
<span class="arrow"></span>
<span class="next">Quelques captures d&#039;écran</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">
<span class="next">Le pattern DAO (1/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-correction-226" data-claire-element-id="648679">Correction</h4><p id="r-648668" data-claire-element-id="648668"><strong>DONG !</strong><br/><strong>Le temps imparti est écoulé !</strong><br/> Bon : comme toujours, il s'agit d'une correction possible et non pas de <strong>LA CORRECTION !</strong></p><p id="r-648669" data-claire-element-id="648669">J'espère que vous vous êtes bien pris la tête sur ce TP. Bien sûr, pas dans le sens où il vous a torturé l'esprit durant des heures jusqu'à vous rendre malades, mais plutôt dans le sens où celui-ci vous a permis de réfléchir et de découvrir des choses. :)</p><p id="r-648670" data-claire-element-id="648670">Bon, assez tergiversé, vous devez être impatient de voir ce que j'ai fait :</p><p id="r-648671" data-claire-element-id="648671"><em><strong>Classe SdzConnection.java :</strong></em></p><pre id="r-648672" data-claire-element-id="648672"><code data-claire-semantic="java">package com.sdz.connection;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

import javax.swing.JOptionPane;

public class SdzConnection{

	/**
	 * URL de connection
	 */
	private static String url = &quot;jdbc:postgresql://localhost:5432/Ecole&quot;;
	/**
	 * Nom du user
	 */
	private static String user = &quot;postgres&quot;;
	/**
	 * Mot de passe du user
	 */
	private static String passwd = &quot;postgres&quot;;
	/**
	 * Objet Connection
	 */
	private static Connection connect;
	
	/**
	 * Méthode qui va retourner notre instance
	 * et la créer si elle n'existe pas...
	 * @return
	 */
	public static Connection getInstance(){
		if(connect == null){
			try {
				connect = DriverManager.getConnection(url, user, passwd);
			} catch (SQLException e) {
				JOptionPane.showMessageDialog(null, e.getMessage(), &quot;ERREUR DE CONNEXION ! &quot;, JOptionPane.ERROR_MESSAGE);
			}
		}		
		return connect;	
	}
}</code></pre><p id="r-648673" data-claire-element-id="648673"><em>Classe Fenetre.java</em></p><h6 id="r-classe-fenetre-java-1" data-claire-element-id="648674">Classe Fenetre.java</h6><pre id="r-648675" data-claire-element-id="648675"><code data-claire-semantic="java">package com.sdz.tp;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.sql.Statement;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTable;
import javax.swing.JTextArea;
import javax.swing.JToolBar;

import com.sdz.connection.SdzConnection;

public class Fenetre extends JFrame {

	/**
	 * ToolBar pour le lancement des requêtes
	 */
	private JToolBar tool = new JToolBar();
	/**
	 * Le bouton
	 */
	private JButton load = new JButton(new ImageIcon(&quot;img/load.png&quot;));
	/**
	 * Le délimiteur
	 */
	private JSplitPane split;
	/**
	 * Le conteneur de résultat
	 */
	private JPanel result = new JPanel();
	/**
	 * Requête par défaut pour le démarrage
	 */
	private String requete = &quot;SELECT  * FROM classe&quot;;
	/**
	 * Le composant dans lequel taper la requête
	 */
	private JTextArea text = new JTextArea(requete);
		
	/**
	 * Constructeur
	 */
	public Fenetre(){
		setSize(900, 600);
		setTitle(&quot;TP JDBC&quot;);
		setLocationRelativeTo(null);
		setDefaultCloseOperation(EXIT_ON_CLOSE);
		
		initToolbar();
		initContent();
		initTable(requete);
	}
	
	/**
	 * Initialise la toolbar
	 */
	private void initToolbar(){
		load.setPreferredSize(new Dimension(30, 35));
		load.setBorder(null);
		load.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent event){
				initTable(text.getText());
			}
		});
		
		tool.add(load);
		getContentPane().add(tool, BorderLayout.NORTH);
	}
	
	/**
	 * Initialise le contenu de la fenêtre
	 */
	public void initContent(){
		//Vous connaissez ça...
		result.setLayout(new BorderLayout());
		split = new JSplitPane(JSplitPane.VERTICAL_SPLIT, new JScrollPane(text), result);
		split.setDividerLocation(100);
		getContentPane().add(split, BorderLayout.CENTER);		
	}
	
	/**
	 * Initialise le visuel avec la requête saisie dans l'éditeur
	 * @param query
	 */
	public void initTable(String query){
		
		try {
			//On crée un statement
			long start = System.currentTimeMillis();
			Statement state = SdzConnection.getInstance()
											.createStatement(
														ResultSet.TYPE_SCROLL_INSENSITIVE, 
														ResultSet.CONCUR_READ_ONLY
											);
			
			//On exécute la requête
			ResultSet res = state.executeQuery(query);
			//Temps d'exécution
			
			//On récupère les meta afin de récupérer le nom des colonnes
			ResultSetMetaData meta = res.getMetaData();
			//On initialise un tableau d'Object pour les en-têtes du tableau
			Object[] column = new Object[meta.getColumnCount()];
			
			for(int i = 1 ; i &lt;= meta.getColumnCount(); i++){
				column[i-1] = meta.getColumnName(i);
			}
			
			//Petite manipulation pour obtenir le nombre de lignes
			res.last();
			int rowCount = res.getRow();
			Object[][] data = new Object[res.getRow()][meta.getColumnCount()];
			
			//On revient au départ
			res.beforeFirst();
			int j = 1;
			
			//On remplit le tableau d'Object[][]
			while(res.next()){
				for(int i = 1 ; i &lt;= meta.getColumnCount(); i++)
					data[j-1][i-1] = res.getObject(i);
				
				j++;
			}
			
                        //on ferme le tout                         
			res.close();
			state.close();

			long totalTime = System.currentTimeMillis() - start;
			
			//On enlève le contenu de notre conteneur
			result.removeAll();
			//On y ajoute un JTable
			result.add(new JScrollPane(new JTable(data, column)), BorderLayout.CENTER);
			result.add(new JLabel(&quot;La requête à été exécuter en &quot; + totalTime + &quot; ms et a retourné &quot; + rowCount + &quot; ligne(s)&quot;), BorderLayout.SOUTH);
			//On force la mise à jour de l'affichage
			result.revalidate();
			
		} catch (SQLException e) {
			//Dans le cas d'une exception, on affiche une pop-up et on efface le contenu		
			result.removeAll();
			result.add(new JScrollPane(new JTable()), BorderLayout.CENTER);
			result.revalidate();
			JOptionPane.showMessageDialog(null, e.getMessage(), &quot;ERREUR ! &quot;, JOptionPane.ERROR_MESSAGE);
		}	
		
	}
	
	/**
	 * Point de départ du programme
	 * @param args
	 */
	public static void main(String[] args){
		Fenetre fen = new Fenetre();
		fen.setVisible(true);
	}
	
}</code></pre><p id="r-648676" data-claire-element-id="648676">Bien sûr, ce code n'est pas la perfection même, vous pouvez l'améliorer grandement !<br/> Vous pouvez utiliser un autre composant que moi pour la saisie de la requête, un <strong>JTextPane</strong> par exemple : pour la coloration syntaxique... ;) <br/> Vous pourriez avoir un menu qui vous permette de sauvegarder vos requêtes, un tableau interactif autorisant la modification des données...<br/> Bref, ce n'est pas les améliorations qui manquent. :-°</p><p id="r-648677" data-claire-element-id="648677">Un TP assez riche et qui a dû vous demander quelques instants de réflexion... :diable: <br/> Mais bon, rien d'insurmontable pour les ZérOs avertis que vous êtes.</p><p id="r-648678" data-claire-element-id="648678">Je vous propose maintenant de voir comment faire en sorte d'utiliser des objets Java correspondant à vos données dans votre BDD !<br/> J'imagine que vous aspirez à faire ceci depuis longtemps... Alors, rendez-vous au prochain chapitre ! :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
<span class="arrow"></span>
<span class="next">Quelques captures d&#039;écran</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">
<span class="next">Le pattern DAO (1/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LepatternDAO1_2"></a><h2>Le pattern DAO (1/2)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
<span class="arrow"></span>
<span class="next">Correction</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
<span class="next">Avant toute chose</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-648681" data-claire-element-id="648681">Bon, vous voulez pouvoir utiliser vos données dans des objets, et c'est normal ! ^^ <br/> Avec le pattern DAO, vous allez voir comment faire ceci mais en plus, comment rendre ça stable !</p><p id="r-648682" data-claire-element-id="648682">En fait, je suppose que vous avez dû essayer de faire en sorte que les données de votre base collent à vos objets, avec des méthodes :</p><ul id="r-648691" data-claire-element-id="648691"><li id="r-648684" data-claire-element-id="648684"><p id="r-648683" data-claire-element-id="648683">de récupération ;</p></li><li id="r-648686" data-claire-element-id="648686"><p id="r-648685" data-claire-element-id="648685">de création ;</p></li><li id="r-648688" data-claire-element-id="648688"><p id="r-648687" data-claire-element-id="648687">de mise à jour ;</p></li><li id="r-648690" data-claire-element-id="648690"><p id="r-648689" data-claire-element-id="648689">de suppression.</p></li></ul><p id="r-648692" data-claire-element-id="648692">Nous allons voir tout ceci dans ce chapitre et le suivant ! :)</p>
</div><a name="Avanttoutechose"></a><h2>Avant toute chose</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">
<span class="arrow"></span>
<span class="next">Le pattern DAO (1/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
<span class="next">Le pattern DAO : définition</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-avant-toute-chose-2" data-claire-element-id="648725">Avant toute chose</h4><p id="r-648693" data-claire-element-id="648693">Comme je le disais, vous avez dû essayer de faire en sorte que les données de la base puissent être utilisées via des objets Java.<br/> En tout premier lieu, il faut créer une classe par entité (les tables hors tables de jointures...), ce qui nous donnerait les classes suivantes :</p><ul id="r-648702" data-claire-element-id="648702"><li id="r-648695" data-claire-element-id="648695"><p id="r-648694" data-claire-element-id="648694"><strong>Eleve</strong> ;</p></li><li id="r-648697" data-claire-element-id="648697"><p id="r-648696" data-claire-element-id="648696"><strong>Matiere</strong> ;</p></li><li id="r-648699" data-claire-element-id="648699"><p id="r-648698" data-claire-element-id="648698"><strong>Professeur</strong> ;</p></li><li id="r-648701" data-claire-element-id="648701"><p id="r-648700" data-claire-element-id="648700"><strong>Classe</strong>.</p></li></ul><p id="r-648703" data-claire-element-id="648703">Et, si nous suivons la logique des relations entre nos tables, nous avons des classes liées suivant le diagramme de classes suivant :</p><figure id="r-648705" data-claire-element-id="648706"><img id="r-648704" data-claire-element-id="648704" src="medias/uploads.siteduzero.com_files_156001_157000_156898.png" alt="Image utilisateur"/></figure><p id="r-648707" data-claire-element-id="648707">Nous voyons les liens entre les objets avec ce diagramme : une classe est composée de plusieurs élèves et de plusieurs professeurs, et un professeur peut exercer plusieurs matières !<br/><strong>Les tables de jointures de la base sont symbolisées par la composition dans nos objets.</strong></p><p id="r-648708" data-claire-element-id="648708">Une fois ceci fait, nous devons coder ces objets avec les accesseurs et les mutateurs adéquats :</p><ul id="r-648713" data-claire-element-id="648713"><li id="r-648710" data-claire-element-id="648710"><p id="r-648709" data-claire-element-id="648709">getters et setters pour tous les attributs de toutes les classes ;</p></li><li id="r-648712" data-claire-element-id="648712"><p id="r-648711" data-claire-element-id="648711">méthode d'ajout et de suppression pour les objets ayant des listes d'objets.</p></li></ul><p id="r-648714" data-claire-element-id="648714">On appelle ce genre d'objet des POJO, pour <strong>Plain Old Java Object</strong> !<br/> Ce qui nous donne ces codes sources :</p><p id="r-648715" data-claire-element-id="648715"></p><h6 id="r-classe-eleve-java-1" data-claire-element-id="648717">Classe Eleve.java</h6><pre id="r-648716" data-claire-element-id="648716"><code data-claire-semantic="java">package com.sdz.bean;


public class Eleve {

        /**
         * ID
         */
        private int id = 0;
        /**
         * Nom de l'élève
         */
        private String nom = &quot;&quot;;
        /**
         * Prénom de l'élève
         */
        private String prenom = &quot;&quot;;
        
        
        //****************************************************
        // CONSTRUCTEUR DE L'OBJET
        //****************************************************

        /**
         * @param id
         * @param nom
         * @param prenom
         */
        public Eleve(int id, String nom, String prenom) {
                this.id = id;
                this.nom = nom;
                this.prenom = prenom;
        }
        public Eleve(){};
        
        //****************************************************
        // ACCESSEURS ET MUTATEURS
        //****************************************************
                
        /**
         * @return the id
         */
        public int getId() {
                return id;
        }


        /**
         * @param id the id to set
         */
        public void setId(int id) {
                this.id = id;
        }

        /**
         * @return the nom
         */
        public String getNom() {
                return nom;
        }

        /**
         * @param nom the nom to set
         */
        public void setNom(String nom) {
                this.nom = nom;
        }

        /**
         * @return the prenom
         */
        public String getPrenom() {
                return prenom;
        }

        /**
         * @param prenom the prenom to set
         */
        public void setPrenom(String prenom) {
                this.prenom = prenom;
        }        
}</code></pre><h6 id="r-classe-matiere-java-1" data-claire-element-id="648719">Classe Matiere.java</h6><pre id="r-648718" data-claire-element-id="648718"><code data-claire-semantic="java">package com.sdz.bean;

public class Matiere {

        /**
         * ID
         */
        private int id = 0;
        /**
         * Nom du professeur
         */
        private String nom = &quot;&quot;;
        
        

        //****************************************************
        // CONSTRUCTEUR DE L'OBJET
        //****************************************************
        /**
         * @param id
         * @param nom
         */
        public Matiere(int id, String nom) {
                this.id = id;
                this.nom = nom;
        }

        public Matiere(){}

        
        //****************************************************
        // ACCESSEURS ET MUTATEURS
        //****************************************************
                
        /**
         * @return the id
         */
        public int getId() {
                return id;
        }
        /**
         * @param id the id to set
         */
        public void setId(int id) {
                this.id = id;
        }
        /**
         * @return the nom
         */
        public String getNom() {
                return nom;
        }
        /**
         * @param nom the nom to set
         */
        public void setNom(String nom) {
                this.nom = nom;
        }
        
}</code></pre><h6 id="r-classe-professeur-java-1" data-claire-element-id="648721">Classe Professeur.java</h6><pre id="r-648720" data-claire-element-id="648720"><code data-claire-semantic="java">package com.sdz.bean;

import java.util.HashSet;
import java.util.Set;

public class Professeur {

        /**
         * ID
         */
        private int id = 0;
        /**
         * Nom du professeur
         */
        private String nom = &quot;&quot;;
        /**
         * Prénom du professeur
         */
        private String prenom = &quot;&quot;;
        /**
         * Liste des matières dispensées
         */
        private Set&lt;Matiere&gt; listMatiere = new HashSet&lt;Matiere&gt;();
        
        
        //****************************************************
        // CONSTRUCTEUR DE L'OBJET
        //****************************************************

        /**
         * @param id
         * @param nom
         * @param prenom
         */
        public Professeur(int id, String nom, String prenom) {
                this.id = id;
                this.nom = nom;
                this.prenom = prenom;
        }
        
        public Professeur(){}
        
        //****************************************************
        // ACCESSEURS ET MUTATEURS
        //****************************************************
                
        /**
         * @return the id
         */
        public int getId() {
                return id;
        }
        /**
         * @param id the id to set
         */
        public void setId(int id) {
                this.id = id;
        }
        /**
         * @return the nom
         */
        public String getNom() {
                return nom;
        }
        /**
         * @param nom the nom to set
         */
        public void setNom(String nom) {
                this.nom = nom;
        }
        /**
         * @return the prenom
         */
        public String getPrenom() {
                return prenom;
        }
        /**
         * @param prenom the prenom to set
         */
        public void setPrenom(String prenom) {
                this.prenom = prenom;
        }

        /**
         * @return the listMatiere
         */
        public Set&lt;Matiere&gt; getListMatiere() {
                return listMatiere;
        }

        /**
         * @param listMatiere the listMatiere to set
         */
        public void setListMatiere(Set&lt;Matiere&gt; listMatiere) {
                this.listMatiere = listMatiere;
        }

        /**
         * Ajoute une matière à la liste des cours dispensés
         * @param Matiere
         */
        public void addMatiere(Matiere matiere){
                this.listMatiere.add(matiere);
        }
        
        /**
         * Retire une matière de la liste des cours dispensés
         * @param Matiere
         */
        public void removeMatiere(Matiere matiere){
                this.listMatiere.remove(matiere);
        }
        
}</code></pre><h6 id="r-classe-classe-java-1" data-claire-element-id="648724">Classe Classe.java</h6><pre id="r-648722" data-claire-element-id="648722"><code data-claire-semantic="java">package com.sdz.bean;

import java.util.ArrayList;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

public class Classe {


	/**
	 * ID
	 */
	private int id = 0;
	/**
	 * Nom du professeur
	 */
	private String nom = &quot;&quot;;
	/**
	 * Liste des professeurs
	 */
	private Set&lt;Professeur&gt; listProfesseur = new HashSet&lt;Professeur&gt;();
	
	/**
	 * Liste des élèves
	 */
	private Set&lt;Eleve&gt; listEleve = new HashSet&lt;Eleve&gt;();
	

	//****************************************************
	// CONSTRUCTEUR DE L'OBJET
	//****************************************************
	/**
	 * @param id
	 * @param nom
	 */
	public Classe(int id, String nom) {
		this.id = id;
		this.nom = nom;
	}
	public Classe(){}
	

	
	//****************************************************
	// ACCESSEURS ET MUTATEURS
	//****************************************************
		
	/**
	 * @return the id
	 */
	public int getId() {
		return id;
	}
	/**
	 * @param id the id to set
	 */
	public void setId(int id) {
		this.id = id;
	}
	/**
	 * @return the nom
	 */
	public String getNom() {
		return nom;
	}
	/**
	 * @param nom the nom to set
	 */
	public void setNom(String nom) {
		this.nom = nom;
	}
	
	/**
	 * @return the listMatiere
	 */
	public Set&lt;Professeur&gt; getListProfesseur() {
		return listProfesseur;
	}

	/**
	 * @param listMatiere the listMatiere to set
	 */
	public void setListProfesseur(Set&lt;Professeur&gt; listProfesseur) {
		this.listProfesseur = listProfesseur;
	}
	

	/**
	 * @return the listMatiere
	 */
	public void addProfesseur(Professeur prof) {
		if(!listProfesseur.contains(prof))
			listProfesseur.add(prof);
	}

	/**
	 * @param listMatiere the listMatiere to set
	 */
	public void removeProfesseur(Professeur prof ) {
		this.listProfesseur.remove(prof);
	}
	

	/**
	 * @return the listMatiere
	 */
	public Set&lt;Eleve&gt; getListEleve() {
		return listEleve;
	}

	/**
	 * @param listMatiere the listMatiere to set
	 */
	public void setListEleve(Set&lt;Eleve&gt; listEleve) {
		this.listEleve = listEleve;
	}
	
	/**
	 * Ajoute un élève à la classe
	 * @param eleve
	 */
	public void addEleve(Eleve eleve){
		if(!this.listEleve.contains(eleve))
			this.listEleve.add(eleve);
	}
	
	/**
	 * Retire un élève de la classe
	 * @param eleve
	 */
	public void removeEleve(Eleve eleve){
		this.listEleve.remove(eleve);
	}
	
	/**
	 * Méthode equals
	 * @param cls
	 * @return
	 */
	public boolean equals(Classe cls){
		return this.getId() == cls.getId();
	}
	
}</code></pre><p id="r-648723" data-claire-element-id="648723">Voilà, vous avez vos objets tout beaux tout propres !<br/> Nous avons des objets prêts à l'emploi. Maintenant, comment faire en sorte que ces objets puissent recevoir les données de notre base ?<br/> Au lieu de faire des essais à tâtons, nous allons définir le pattern DAO et voir comment il fonctionne avant de l'implémenter.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">
<span class="arrow"></span>
<span class="next">Le pattern DAO (1/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
<span class="next">Le pattern DAO : définition</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LepatternDAOdfinition"></a><h2>Le pattern DAO : définition</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
<span class="arrow"></span>
<span class="next">Avant toute chose</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
<span class="next">Premier test</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-pattern-dao-definition" data-claire-element-id="648777">Le pattern DAO : définition</h4><h5 id="r-contexte-8" data-claire-element-id="648739"><em>Contexte</em></h5><p id="r-648726" data-claire-element-id="648726">Vous avez des données sérialisées dans une base de données et vous souhaitez y accéder et les manipuler avec des objets Java. Cependant, votre entreprise est en pleine restructuration et vous ne savez pas si vos données vont :</p><ul id="r-648735" data-claire-element-id="648735"><li id="r-648728" data-claire-element-id="648728"><p id="r-648727" data-claire-element-id="648727">rester où elles sont ;</p></li><li id="r-648730" data-claire-element-id="648730"><p id="r-648729" data-claire-element-id="648729">migrer sur une autre base de données ;</p></li><li id="r-648732" data-claire-element-id="648732"><p id="r-648731" data-claire-element-id="648731">être stockées dans des fichiers XML ;</p></li><li id="r-648734" data-claire-element-id="648734"><p id="r-648733" data-claire-element-id="648733">...</p></li></ul><p id="r-648736" data-claire-element-id="648736">Comment faire en sorte de ne pas avoir à modifier toutes les utilisations de nos objets ?<br/> Comment faire un système adaptatif aux futures modifications de supports de données ?<br/> Comment faire en sorte que les objets que nous allons utiliser restent tels qu'ils sont ?</p><p id="r-648737" data-claire-element-id="648737">Il pourrait y avoir beaucoup de problématiques de ce genre, mais le pattern DAO est là pour vous ! :magicien:</p><p id="r-648738" data-claire-element-id="648738">La définition d'un design pattern est toujours un peu pompeuse et mystifiée ; par contre, et ceux qui ont lu les chapitres concernant les design patterns du tuto Java le confirmeront, ils apportent plus de souplesse et de robustesse à vos programmes !</p><h5 id="r-le-pattern-dao-2" data-claire-element-id="648776"><em>Le pattern DAO</em></h5><p id="r-648740" data-claire-element-id="648740">Ce pattern permet de faire le lien entre la couche d'accès aux données et la couche métier d'une application. Il permet de mieux maîtriser les changements susceptibles d'être opérés sur le système de stockage des données, donc, par extension, de préparer une migration d'un système à un autre (BDD vers fichiers XML par exemple...).<br/> Ceci se fait en séparant accès aux données (BDD) et objets métiers (POJO).</p><p id="r-648741" data-claire-element-id="648741">Je me doute que tout ceci doit vous sembler très flou !</p><div id="r-648743" data-claire-element-id="648743" data-claire-semantic="question"><p id="r-648742" data-claire-element-id="648742">Euh... un peu... :euh:</p></div><p id="r-648744" data-claire-element-id="648744">C'est normal, mais ne vous en faites pas, je vais tout vous expliquer...<br/> Déjà, il y a une histoire de séparation des &quot;<em><strong>couches métiers et couches d'accès aux données&quot;</strong></em>. Il s'agit ni plus ni moins de faire en sorte qu'un type d'objet se charge de récupérer les données dans la base et qu'un autre type d'objet (souvent des POJO) soit utilisé pour manipuler ces données. Schématiquement, ça nous donne :</p><figure id="r-648746" data-claire-element-id="648747"><img id="r-648745" data-claire-element-id="648745" src="medias/uploads.siteduzero.com_files_157001_158000_157285.png" alt="Image utilisateur"/></figure><div id="r-648749" data-claire-element-id="648749" data-claire-semantic="question"><p id="r-648748" data-claire-element-id="648748">Si on comprend bien, nous allons avoir deux types d'objets !</p></div><p id="r-648750" data-claire-element-id="648750">Tout à fait. <br/> Les objets que nous avons créés plus haut sont nos POJO, les objets utilisés par le programme pour manipuler les données de la base.</p><div id="r-648752" data-claire-element-id="648752" data-claire-semantic="question"><p id="r-648751" data-claire-element-id="648751">Il ne nous reste plus qu'à créer les objets qui vont rechercher les données dans la base !</p></div><p id="r-648753" data-claire-element-id="648753">Oui, mais nous n'allons pas faire n'importe comment... <br/> Les dits objets devront être capables de faire des recherches, des insertions, des mises à jour et des suppressions ! Par conséquent, nous pouvons définir un super type d'objet afin d'utiliser au mieux le polymorphisme...<br/> Nous allons devoir créer une classe abstraite (ou une interface) mettant en oeuvre toutes les méthodes sus-mentionnées !</p><div id="r-648755" data-claire-element-id="648755" data-claire-semantic="question"><p id="r-648754" data-claire-element-id="648754">Comment va-t-on faire pour demander à nos objets DAO de récupérer tel type d'objet ou d'en sérialiser tel autre ? Avec des cast ?</p></div><p id="r-648756" data-claire-element-id="648756">Soit en castant, soit en faisant une classe générique ! Comme ceci :</p><figure id="r-648758" data-claire-element-id="648759"><img id="r-648757" data-claire-element-id="648757" src="medias/uploads.siteduzero.com_files_156001_157000_156920.png" alt="Image utilisateur"/></figure><div id="r-648761" data-claire-element-id="648761" data-claire-semantic="question"><p id="r-648760" data-claire-element-id="648760">Ah... mais oui !</p></div><p id="r-648762" data-claire-element-id="648762">Vous aviez oublié que nous pouvions créer des classes génériques ? :colere2: <br/> Bon, je vous pardonne. Maintenant, voyons un peu les codes sources de ces objets :</p><p id="r-648763" data-claire-element-id="648763"></p><h6 id="r-classe-dao-java-1" data-claire-element-id="648765">Classe DAO.java</h6><pre id="r-648764" data-claire-element-id="648764"><code data-claire-semantic="java">package com.sdz.dao;

import java.sql.Connection;

import com.sdz.connection.SdzConnection;

public abstract class DAO&lt;T&gt; {
        
        protected Connection connect = null;
        
        /**
         * Constructeur
         * @param conn
         */
        public DAO(Connection conn){
                this.connect = conn;
        }
        
        /**
         * Méthode de création
         * @param obj
         * @return
         */
        public abstract boolean create(T obj);
        /**
         * Méthode pour effacer
         * @param obj
         * @return
         */
        public abstract boolean delete(T obj);
        /**
         * Méthode de mise à jour
         * @param obj
         * @return
         */
        public abstract boolean update(T obj);
        /**
         * Méthode de recherche des informations
         * @param id
         * @return
         */
        public abstract T find(int id);
}</code></pre><h6 id="r-classe-elevedao-java-1" data-claire-element-id="648767">Classe EleveDAO.java</h6><pre id="r-648766" data-claire-element-id="648766"><code data-claire-semantic="java">package com.sdz.dao.implement;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.sdz.bean.Eleve;
import com.sdz.dao.DAO;

public class EleveDAO extends DAO&lt;Eleve&gt; {

        public EleveDAO(Connection conn) {
                super(conn);
        }

        public boolean create(Eleve obj) {
                return false;
        }

        public boolean delete(Eleve obj) {
                return false;
        }

        public Eleve find(int id) {
                
                Eleve eleve = new Eleve();                
                
                try {
                        ResultSet result = this.connect        .createStatement(
                                                                                                        ResultSet.TYPE_SCROLL_INSENSITIVE, 
                                                                                                        ResultSet.CONCUR_READ_ONLY
                                                                                        ).executeQuery(
                                                                                                        &quot;SELECT * FROM eleve WHERE elv_id = &quot; + id
                                                                                        );
                        if(result.first())
                                eleve = new Eleve(id, result.getString(&quot;elv_nom&quot;), result.getString(&quot;elv_prenom&quot;));
                        
                } catch (SQLException e) {
                        e.printStackTrace();
                }
                return eleve;
        }

        public boolean update(Eleve obj) {
                return false;
        }

}</code></pre><h6 id="r-classe-matieredao-java-1" data-claire-element-id="648769">Classe MatiereDAO.java</h6><pre id="r-648768" data-claire-element-id="648768"><code data-claire-semantic="java">package com.sdz.dao.implement;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.sdz.bean.Eleve;
import com.sdz.bean.Matiere;
import com.sdz.dao.DAO;

public class MatiereDAO extends DAO&lt;Matiere&gt; {

        public MatiereDAO(Connection conn) {
                super(conn);
        }


        public boolean create(Matiere obj) {

                return false;
        }


        public boolean delete(Matiere obj) {

                return false;
        }


        public Matiere find(int id) {

                Matiere matiere = new Matiere();                
                
                try {
                        ResultSet result = this.connect        .createStatement(
                                                                                                        ResultSet.TYPE_SCROLL_INSENSITIVE, 
                                                                                                        ResultSet.CONCUR_READ_ONLY
                                                                                        ).executeQuery(
                                                                                                        &quot;SELECT * FROM matiere WHERE mat_id = &quot; + id
                                                                                        );
                        if(result.first())
                                matiere = new Matiere(id, result.getString(&quot;mat_nom&quot;));
                        
                } catch (SQLException e) {
                        e.printStackTrace();
                }
                return matiere;
        }


        public boolean update(Matiere obj) {

                return false;
        }

}</code></pre><h6 id="r-classe-professeurdao-java-1" data-claire-element-id="648771">Classe ProfesseurDAO.java</h6><pre id="r-648770" data-claire-element-id="648770"><code data-claire-semantic="java">package com.sdz.dao.implement;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.sdz.bean.Eleve;
import com.sdz.bean.Professeur;
import com.sdz.dao.DAO;

public class ProfesseurDAO extends DAO&lt;Professeur&gt; {

        public ProfesseurDAO(Connection conn) {
                super(conn);
        }

        public boolean create(Professeur obj) {

                return false;
        }


        public boolean delete(Professeur obj) {

                return false;
        }


        public Professeur find(int id) {

                Professeur professeur = new Professeur();                
                
                try {
                        ResultSet result = this.connect        .createStatement(
                                                                                                        ResultSet.TYPE_SCROLL_INSENSITIVE, 
                                                                                                        ResultSet.CONCUR_READ_ONLY
                                                                                        ).executeQuery(
                                                                                                        &quot;select * from professeur &quot;+
                                                                                                        &quot;left join j_mat_prof on jmp_prof_k = prof_id AND prof_id = &quot;+ id +
                                                                                                        &quot; inner join matiere on jmp_mat_k = mat_id&quot;
                                                                                        );
                        if(result.first()){
                                professeur = new Professeur(id, result.getString(&quot;prof_nom&quot;), result.getString(&quot;prof_prenom&quot;));
                                result.beforeFirst();
                                MatiereDAO matDao = new MatiereDAO(this.connect);
                                
                                while(result.next())
                                        professeur.addMatiere(matDao.find(result.getInt(&quot;mat_id&quot;)));
                        }
                } catch (SQLException e) {
                        e.printStackTrace();
                }
                return professeur;
        }


        public boolean update(Professeur obj) {
        
                return false;
        }
}</code></pre><h6 id="r-classe-classedao-java-1" data-claire-element-id="648775">Classe ClasseDAO.java</h6><pre id="r-648772" data-claire-element-id="648772"><code data-claire-semantic="java">package com.sdz.dao.implement;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.sdz.bean.Classe;
import com.sdz.bean.Eleve;
import com.sdz.dao.DAO;

public class ClasseDAO extends DAO&lt;Classe&gt; {

        public ClasseDAO(Connection conn) {
                super(conn);
        }

        public boolean create(Classe obj) {

                return false;
        }


        public boolean delete(Classe obj) {

                return false;
        }


        public Classe find(int id) {

                Classe classe = new Classe();                
                
                try {
                        ResultSet result = this.connect        .createStatement(
                                                                                                        ResultSet.TYPE_SCROLL_INSENSITIVE, 
                                                                                                        ResultSet.CONCUR_READ_ONLY
                                                                                        ).executeQuery(
                                                                                                        &quot;select * from classe WHERE cls_id = &quot; + id
                                                                                        ); 
                                                                                                        
                        if(result.first()){
                                classe = new Classe(id, result.getString(&quot;cls_nom&quot;));
                                
                                result = this.connect        .createStatement()
                                                                                .executeQuery(
                                                                                        &quot;select prof_id, prof_nom, prof_prenom from professeur &quot; +
                                                                                        &quot;INNER JOIN j_mat_prof on prof_id = jmp_prof_k &quot; +
                                                                                        &quot;INNER JOIN j_cls_jmp on jmp_id = jcm_jmp_k AND jcm_cls_k = &quot; + id
                                                                                );
                                
                                ProfesseurDAO profDao = new ProfesseurDAO(this.connect);
                                                                
                                while(result.next())                                        
                                        classe.addProfesseur(profDao.find(result.getInt(&quot;prof_id&quot;)));
                                
                                EleveDAO eleveDao = new EleveDAO(this.connect);
                                
                                
                                result = this.connect        .createStatement()
                                                                                .executeQuery(
                                                                                        &quot;select elv_id, elv_nom, elv_prenom from eleve &quot; +
                                                                                        &quot;INNER JOIN classe on elv_cls_k = cls_id AND cls_id = &quot; + id
                                                                                );

                                while(result.next())
                                        classe.addEleve(eleveDao.find(result.getInt(&quot;elv_id&quot;)));
                        }
                        
                } catch (SQLException e) {
                        e.printStackTrace();
                }
                return classe;
        }


        public boolean update(Classe obj) {

                return false;
        }

}</code></pre><aside id="r-648774" data-claire-element-id="648774" data-claire-semantic="information"><p id="r-648773" data-claire-element-id="648773">Pour ne pas compliquer la tâche, je n'ai détaillé que la méthode de recherche des données, les autres sont des coquilles vides...<br/> Mais vous devriez être capables de faire ça tout seuls, normalement...</p></aside>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
<span class="arrow"></span>
<span class="next">Avant toute chose</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
<span class="next">Premier test</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Premiertest"></a><h2>Premier test</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
<span class="arrow"></span>
<span class="next">Le pattern DAO : définition</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">
<span class="next">Le pattern DAO (2/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-premier-test-2" data-claire-element-id="648794">Premier test</h4><p id="r-648778" data-claire-element-id="648778">Bon : nous avons réalisé une bonne partie de ce pattern, nous allons pouvoir faire notre premier test. :)</p><div id="r-648780" data-claire-element-id="648780" data-claire-semantic="question"><p id="r-648779" data-claire-element-id="648779">Une bonne partie ? Tu veux dire qu'il y a encore des choses à faire ?</p></div><p id="r-648781" data-claire-element-id="648781">Oui, nous verrons ça dans le prochain chapitre : pour le moment, testons ce que nous avons.</p><aside id="r-648783" data-claire-element-id="648783" data-claire-semantic="information"><p id="r-648782" data-claire-element-id="648782"><strong>Par contre, je tiens à préciser que j'utilise toujours le singleton créé quelques chapitres plus haut !</strong></p></aside><p id="r-648784" data-claire-element-id="648784">Voici un code de test :</p><pre id="r-648785" data-claire-element-id="648785"><code data-claire-semantic="java">import com.sdz.bean.Classe;
import com.sdz.bean.Eleve;
import com.sdz.bean.Matiere;
import com.sdz.bean.Professeur;
import com.sdz.connection.SdzConnection;
import com.sdz.dao.DAO;
import com.sdz.dao.implement.ClasseDAO;
import com.sdz.dao.implement.EleveDAO;
import com.sdz.dao.implement.ProfesseurDAO;


public class FirstTest {
        
        public static void main(String[] args) {
                
                //testons des élèves
                DAO&lt;Eleve&gt; eleveDao = new EleveDAO(SdzConnection.getInstance());
                for(int i = 1; i &lt; 5; i++){
                        Eleve eleve = eleveDao.find(i);
                        System.out.println(&quot;Elève N°&quot; + eleve.getId() + &quot;  - &quot; + eleve.getNom() + &quot; &quot; + eleve.getPrenom());
                }
                
                System.out.println(&quot;\n******************************************\n&quot;);
                
                //Voyons voir les professeurs
                DAO&lt;Professeur&gt; profDao = new ProfesseurDAO(SdzConnection.getInstance());
                for(int i = 4; i &lt; 8; i++){
                        Professeur prof = profDao.find(i);
                        System.out.println(prof.getNom() + &quot; &quot; + prof.getPrenom() + &quot; enseigne : &quot;);
                        for(Matiere mat : prof.getListMatiere())
                                System.out.println(&quot;\t * &quot; + mat.getNom());
                }
                
                System.out.println(&quot;\n******************************************\n&quot;);
                
                //Et là, c'est la classe
                DAO&lt;Classe&gt; classeDao = new ClasseDAO(SdzConnection.getInstance());
                Classe classe = classeDao.find(11);
                
                System.out.println(&quot;Classe de &quot; + classe.getNom());
                System.out.println(&quot;\nListe des élèves :&quot;);
                for(Eleve eleve : classe.getListEleve())
                        System.out.println(&quot;  - &quot; + eleve.getNom() + &quot; &quot; + eleve.getPrenom());
                
                System.out.println(&quot;\nListe des professeurs :&quot;);
                for(Professeur prof : classe.getListProfesseur())
                        System.out.println(&quot;  - &quot; + prof.getNom() + &quot; &quot; + prof.getPrenom());
                
        }

}</code></pre><p id="r-648786" data-claire-element-id="648786">Qui me donne :</p><figure id="r-648788" data-claire-element-id="648789"><img id="r-648787" data-claire-element-id="648787" src="medias/uploads.siteduzero.com_files_156001_157000_156926.png" alt="Image utilisateur"/></figure><p id="r-648790" data-claire-element-id="648790">Vous avez compris comment tout ça fonctionnait ? Ce n'est pas très dur en fin de compte. Je vous laisse quelques instants pour lire, tester, relire, tester à nouveau... <br/> Nous utilisons des objets spécifiques afin de rechercher dans la base des données qui nous servent à instancier des objets Java habituels. :)</p><p id="r-648791" data-claire-element-id="648791">Avant de poursuivre, nous allons faire un tour du côté du QCM...</p><p id="r-648792" data-claire-element-id="648792">Bon, vous voyez un peu comment on va procéder.<br/> Le truc, c'est que vous savez comment récupérer les données de votre base pour les utiliser dans des POJO, mais nous n'avons pas vu comment permettre l'utilisation de plusieurs systèmes de base de données, voire même de l'XML.</p><p id="r-648793" data-claire-element-id="648793">Ne prenez pas peur, le résultat sera à la hauteur de vos attentes... Même si ne connaissez rien à Java ni à XML (pour l'instant...). ;)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
<span class="arrow"></span>
<span class="next">Le pattern DAO : définition</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">
<span class="next">Le pattern DAO (2/2)</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="LepatternDAO2_2"></a><h2>Le pattern DAO (2/2)</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
<span class="arrow"></span>
<span class="next">Premier test</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
<span class="next">Le pattern factory</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-648796" data-claire-element-id="648796">Dans ce chapitre, nous allons voir comment peaufiner le pattern DAO afin que celui-ci puisse s'adapter à d'autres systèmes de sauvegarde...<br/> Le but du jeu étant d'avoir le moins possible de changements le cas échéant !</p>
</div><a name="Lepatternfactory"></a><h2>Le pattern factory</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">
<span class="arrow"></span>
<span class="next">Le pattern DAO (2/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
<span class="next">Fabriquer vos DAO</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-le-pattern-factory-1" data-claire-element-id="648810">Le pattern factory</h4><p id="r-648797" data-claire-element-id="648797">Nous allons aborder ici une notion importante : la fabrication d'objets !<br/> En effet, le pattern DAO implémente aussi ce qu'on appelle <strong>le pattern factory</strong>.<br/> Celui-ci consiste à déléguer l'instanciation d'objets à une classe.</p><p id="r-648798" data-claire-element-id="648798">En fait, une fabrique ne fait que ça ! ^^ <br/> En général, lorsque vous voyez ce genre de code dans une classe :</p><pre id="r-648799" data-claire-element-id="648799"><code data-claire-semantic="java">class A{
   public Object getData(int type){
     Object obj;
     
     //----------------------
     if(type == 0)
        obj = new B();
     else if(type == 1)
        obj = new C();
     else
        obj = new D();
     //----------------------
     obj.doSomething();
     obj.doSomethingElse();
   }
}</code></pre><p id="r-648800" data-claire-element-id="648800">vous constatez qu'il y a une création d'objet et que ceci est conditionné par une variable. En fait, selon celle-ci, l'objet instancié n'est pas le même. Nous allons donc extraire ce code (celui entre commentaires) pour le mettre dans une classe à part :</p><pre id="r-648801" data-claire-element-id="648801"><code data-claire-semantic="java">package com.sdz.transact;

public class Factory {

	public static Object getData(int type){
	     if(type == 0)
	        return new B();
	     else if(type == 1)
	    	 return new C();
	     else
	    	 return new D();
	}
}</code></pre><p id="r-648802" data-claire-element-id="648802">Du coup, maintenant, lorsque nous voudrons instancier les objets de la fabrique, nous utiliserons celle-ci.<br/> Comme ça :</p><pre id="r-648803" data-claire-element-id="648803"><code data-claire-semantic="java">B b = Factory.getData(0);
C c = Factory.getData(1);
//...</code></pre><div id="r-648805" data-claire-element-id="648805" data-claire-semantic="question"><p id="r-648804" data-claire-element-id="648804">Pourquoi faire tout ce ramdam ? Quel est le problème avec nos instances ?</p></div><p id="r-648806" data-claire-element-id="648806">C'est simple : en temps normal, nous travaillons avec des objets concrets, non soumis au changement. Cependant, dans le cas qui nous intéresse, nos objets peuvent être amenés à changer et j'irais même plus loin : le type d'objet utilisé peut changer !<br/> L'avantage d'utiliser une fabrique, c'est que les instances concrètes (utilisation du mot clé <strong>new</strong>) se fait à <strong>UN SEUL ENDROIT !</strong><br/><strong>Donc, si nous devons faire des changements, il ne se feront qu'à un seul endroit ! Si nous ajoutons un paramètre dans le constructeur, par exemple...</strong></p><div id="r-648808" data-claire-element-id="648808" data-claire-semantic="question"><p id="r-648807" data-claire-element-id="648807">D'accord, on commence à comprendre l'intérêt de cette fabrique.</p></div><p id="r-648809" data-claire-element-id="648809">Je savais que vous comprendriez vite. je vous propose maintenant de voir comment ce pattern est implémenté dans le pattern DAO.</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">
<span class="arrow"></span>
<span class="next">Le pattern DAO (2/2)</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
<span class="next">Fabriquer vos DAO</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="FabriquervosDAO"></a><h2>Fabriquer vos DAO</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
<span class="arrow"></span>
<span class="next">Le pattern factory</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
<span class="next">D&#039;une usine à une multinationale</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-fabriquer-vos-dao-1" data-claire-element-id="648827">Fabriquer vos DAO</h4><p id="r-648811" data-claire-element-id="648811">En fait, la factory dans le pattern DAO sert à construire nos instances d'objets d'accès aux données.<br/> Du coup, vu que nous avons un super-type d'objet pour ces objets, nous savons quel type d'objet va retourner notre fabrique.</p><figure id="r-648813" data-claire-element-id="648814"><img id="r-648812" data-claire-element-id="648812" src="medias/uploads.siteduzero.com_files_157001_158000_157288.png" alt="Image utilisateur"/></figure><p id="r-648815" data-claire-element-id="648815">Voici le code de notre fabrique :</p><pre id="r-648816" data-claire-element-id="648816"><code data-claire-semantic="java">package com.sdz.dao;

import java.sql.Connection;

import com.sdz.connection.SdzConnection;
import com.sdz.dao.implement.ClasseDAO;
import com.sdz.dao.implement.EleveDAO;
import com.sdz.dao.implement.MatiereDAO;
import com.sdz.dao.implement.ProfesseurDAO;

public class DAOFactory {

        protected static final Connection conn = SdzConnection.getInstance();        
        
        /**
         * Retourne un objet Classe interagissant avec la BDD
         * @return
         */
        public static DAO getClasseDAO(){
                return new ClasseDAO(conn);
        }
        /**
         * Retourne un objet Professeur interagissant avec la BDD
         * @return
         */
        public static DAO getProfesseurDAO(){
                return new ProfesseurDAO(conn);
        }
        /**
         * Retourne un objet Eleve interagissant avec la BDD
         * @return
         */
        public static DAO getEleveDAO(){
                return new EleveDAO(conn);
        }
        /**
         * Retourne un objet Matiere interagissant avec la BDD
         * @return
         */
        public static DAO getMatiereDAO(){
                return new MatiereDAO(conn);
        }        
}</code></pre><p id="r-648817" data-claire-element-id="648817">Et voici un code qui devrait vous plaire :</p><pre id="r-648818" data-claire-element-id="648818"><code data-claire-semantic="java">import com.sdz.bean.Classe;
import com.sdz.bean.Eleve;
import com.sdz.bean.Matiere;
import com.sdz.bean.Professeur;
import com.sdz.dao.DAO;
import com.sdz.dao.DAOFactory;


public class TestDAO {

        /**
         * @param args
         */
        public static void main(String[] args) {
                System.out.println(&quot;&quot;);
                
                //----------------------------------------------
                //On va rechercher des élèves
                //----------------------------------------------
                
                //On récupère un objet faisant le lien entre la base et nos objets 
                DAO&lt;Eleve&gt; eleveDao = DAOFactory.getEleveDAO();
                
                
                for(int i = 1; i &lt; 5; i++){
                        //On fait notre recherche
                        Eleve eleve = eleveDao.find(i);
                        System.out.println(&quot;\tELEVE N°&quot; + eleve.getId() + &quot; - NOM : &quot; + eleve.getNom() + &quot; - PRENOM : &quot; + eleve.getPrenom());
                }                
                
                System.out.println(&quot;\n\t************************************************&quot;);
                
                //On fait de même pour une classe
                DAO&lt;Classe&gt; classeDao = DAOFactory.getClasseDAO();
                //On cherche la classe ayant pour ID 10
                Classe classe = classeDao.find(10);
                
                System.out.println(&quot;\tCLASSE DE &quot; + classe.getNom());
                
                //On récupère la liste des élèves
                System.out.println(&quot;\n\tCelle-ci contient &quot; + classe.getListEleve().size() + &quot; élève(s)&quot;);
                for(Eleve eleve : classe.getListEleve())
                        System.out.println(&quot;\t\t - &quot; + eleve.getNom() + &quot; &quot; + eleve.getPrenom());
                
                
                //Ainsi que la liste des professeurs
                System.out.println(&quot;\n\tCelle-ci a &quot; + classe.getListProfesseur().size() + &quot; professeur(s)&quot;);                
                for(Professeur prof : classe.getListProfesseur()){
                        System.out.println(&quot;\t\t - Mr &quot; + prof.getNom() + &quot; &quot; + prof.getPrenom() + &quot; professeur de :&quot;);
                        
                        //Tant qu'à faire, on prend aussi les matières... ^^
                        for(Matiere mat : prof.getListMatiere())
                                System.out.println(&quot;\t\t\t * &quot; + mat.getNom());
                        
                }
                
                System.out.println(&quot;\n\t************************************************&quot;);
                
                //Un petit essai sur les matières
                DAO&lt;Matiere&gt; matiereDao = DAOFactory.getMatiereDAO();
                Matiere mat = matiereDao.find(2);
                System.out.println(&quot;\tMATIERE &quot; + mat.getId() + &quot; : &quot; + mat.getNom());
                
        }
}</code></pre><p id="r-648819" data-claire-element-id="648819">Et voilà le résultat que nous donne ce code :</p><figure id="r-648821" data-claire-element-id="648822"><img id="r-648820" data-claire-element-id="648820" src="medias/uploads.siteduzero.com_files_157001_158000_157469.png" alt="Image utilisateur"/></figure><p id="r-648823" data-claire-element-id="648823">Vous pouvez être fiers de vous ! Vous venez d'implémenter le pattern DAO utilisant une fabrique.<br/> C'était un peu effrayant, mais, au final ce n'est rien du tout... ^^</p><div id="r-648825" data-claire-element-id="648825" data-claire-semantic="question"><p id="r-648824" data-claire-element-id="648824">On a bien compris le principe du pattern DAO, même la combinaison DAO - factory.<br/> Cependant, on ne voit pas comment gérer plusieurs systèmes de sauvegarde de données ?<br/> Il faut modifier les DAO à chaque fois ?</p></div><p id="r-648826" data-claire-element-id="648826">Non, bien sûr... Le fait est que vous pouvez très bien avoir un type de DAO pour chaque type de gestion de données (PostgreSQL, XML, MySQL...). Le vrai problème, c'est de savoir comment récupérer les DAO puisque nous avons délégué leurs instanciations à une fabrique.<br/> Vous allez voir, les choses les plus compliquées peuvent être aussi les plus simples. :)</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
<span class="arrow"></span>
<span class="next">Le pattern factory</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
<span class="next">D&#039;une usine à une multinationale</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="D039uneusineunemultinationale"></a><h2>D&#039;une usine à une multinationale</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
<span class="arrow"></span>
<span class="next">Fabriquer vos DAO</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h4 id="r-d-une-usine-a-une-multinationale" data-claire-element-id="648881">D'une usine à une multinationale</h4><p id="r-648828" data-claire-element-id="648828">Faisons le topo de ce que nous avons :</p><ul id="r-648835" data-claire-element-id="648835"><li id="r-648830" data-claire-element-id="648830"><p id="r-648829" data-claire-element-id="648829">des objets métiers ;</p></li><li id="r-648832" data-claire-element-id="648832"><p id="r-648831" data-claire-element-id="648831">une implémentation d'accès aux données ;</p></li><li id="r-648834" data-claire-element-id="648834"><p id="r-648833" data-claire-element-id="648833">une classe permettant d'instancier les objets d'accès aux données.</p></li></ul><p id="r-648836" data-claire-element-id="648836">Le fait est que notre structure actuelle fonctionne pour notre système actuel... Ah ! Mais ! Qu'entends-je, qu'ouïe-je ?<br/><strong>Votre patron vient de trancher ! Vous allez utiliser PostgreSQL ET du XML !</strong></p><div id="r-648838" data-claire-element-id="648838" data-claire-semantic="question"><p id="r-648837" data-claire-element-id="648837">C'est bien ce qu'on disait plus haut... Comment gérer ça ? <br/> On ne va pas mettre des <strong>if(){...}else{}</strong> dans la fabrique, tout de même ?</p></div><p id="r-648839" data-claire-element-id="648839">Ah ! Je vous arrête !<br/> Vous entendez ce que vous dites :</p><p id="r-648840" data-claire-element-id="648840"><cite>Citation : Les ZérOs</cite></p><blockquote id="r-648842" data-claire-element-id="648842"><p id="r-648841" data-claire-element-id="648841">On ne va pas mettre des <strong>if(){...}else{}</strong> dans la fabrique, tout de même ?</p></blockquote><p id="r-648843" data-claire-element-id="648843">Vous voulez mettre des conditions afin de savoir quel type d'instance retourner : <strong>ça ressemble grandement à une portion de code pouvant être déclinée en fabrique !</strong></p><div id="r-648845" data-claire-element-id="648845" data-claire-semantic="question"><p id="r-648844" data-claire-element-id="648844">o_O <br/> Tu veux faire des fabriques de fabriques ? ?</p></div><p id="r-648846" data-claire-element-id="648846">Oui ! Notre fabrique actuelle nous permet de construire des objets accédant à des données se trouvant sur une base de données PostgreSQL. Mais la problématique maintenant est de pouvoir aussi utiliser des données provenant de fichiers XML...</p><p id="r-648847" data-claire-element-id="648847">Voici un petit schéma représentant la situation actuelle :</p><figure id="r-648849" data-claire-element-id="648850"><img id="r-648848" data-claire-element-id="648848" src="medias/uploads.siteduzero.com_files_157001_158000_157312.png" alt="Image utilisateur"/></figure><p id="r-648851" data-claire-element-id="648851">Et voilà ce à quoi on aspire :</p><figure id="r-648853" data-claire-element-id="648854"><img id="r-648852" data-claire-element-id="648852" src="medias/uploads.siteduzero.com_files_157001_158000_157313.png" alt="Image utilisateur"/></figure><p id="r-648855" data-claire-element-id="648855">Je pense que vous êtes tous d'accord pour dire que ces deux usines ont un processus de fabrication très similaire.<br/><strong>Par là, j'entends que nous allons utiliser les mêmes méthodes sur les objets sortant de ces deux usines.</strong><br/> Voyez ça un peu comme une grande marque de pain qui aurait beaucoup de boulangeries dans tous les pays du monde ! Cette firme a un savoir-faire évident, mais aussi des particularités : le pain ne se fait pas pareil dans tous les endroits du globe...<br/> Pour vous, c'est comme si vous passiez commande directement au siège social qui, lui, va déléguer à l'usine qui permet de répondre à vos attentes !<br/> Schématiquement, ça donne ceci :</p><figure id="r-648857" data-claire-element-id="648858"><img id="r-648856" data-claire-element-id="648856" src="medias/uploads.siteduzero.com_files_157001_158000_157317.png" alt="Image utilisateur"/></figure><p id="r-648859" data-claire-element-id="648859">Lorsque je vous dis ça, vous devez avoir une réaction quasi-immédiate : <strong>héritage - polymorphisme !</strong><br/> Ce qui va changer le plus, par rapport à notre ancienne fabrique, c'est que nous n'utiliserons plus de méthodes statiques, mais des méthodes d'une instance concrète, et pour cause : <strong>impossible de créer une classe abstraite ou une interface avec des méthodes statiques destinée à la redéfinition !</strong></p><p id="r-648860" data-claire-element-id="648860">Donc, nous allons créer une classe abstraite pour nos futurs fabriques, celle-ci devra avoir les méthodes permettant de récupérer les différents DAO <strong>ET une méthode permettant d'instancier la bonne fabrique !</strong><br/> Je vous ai préparé un diagramme de classe, vous verrez mieux comme ça :</p><figure id="r-648862" data-claire-element-id="648863"><img id="r-648861" data-claire-element-id="648861" src="medias/uploads.siteduzero.com_files_157001_158000_157296.png" alt="Image utilisateur"/></figure><p id="r-648864" data-claire-element-id="648864">Je vous ai même préparé les codes sources :</p><p id="r-648865" data-claire-element-id="648865"><em><strong>Classe AbstractDAOFactory.java :</strong></em></p><pre id="r-648866" data-claire-element-id="648866"><code data-claire-semantic="java">package com.sdz.dao;


public abstract class AbstractDAOFactory {

	public static final int DAO_FACTORY = 0;
	public static final int XML_DAO_FACTORY = 1;

	/**
	 * Retourne un objet Classe interagissant avec la BDD
	 * @return
	 */
	public abstract DAO getClasseDAO();
	/**
	 * Retourne un objet Professeur interagissant avec la BDD
	 * @return
	 */
	public abstract DAO getProfesseurDAO();
	/**
	 * Retourne un objet Eleve interagissant avec la BDD
	 * @return
	 */
	public abstract DAO getEleveDAO();
	/**
	 * Retourne un objet Matiere interagissant avec la BDD
	 * @return
	 */
	public abstract DAO getMatiereDAO();
	
	/**
	 * Méthode permettant de récupérer les Factory
	 * @param type
	 * @return AbstractDAOFactory
	 */
	public static AbstractDAOFactory getFactory(int type){
		switch(type){
			case DAO_FACTORY:
				return new DAOFactory();
			case XML_DAO_FACTORY: 
				return new XMLDAOFactory();
			default:
				return null;
		}
	}
}</code></pre><h6 id="r-classe-daofactory-java-1" data-claire-element-id="648868">Classe DAOFactory.java</h6><pre id="r-648867" data-claire-element-id="648867"><code data-claire-semantic="java">package com.sdz.dao;

import java.sql.Connection;

import com.sdz.connection.SdzConnection;
import com.sdz.dao.implement.ClasseDAO;
import com.sdz.dao.implement.EleveDAO;
import com.sdz.dao.implement.MatiereDAO;
import com.sdz.dao.implement.ProfesseurDAO;

public class DAOFactory extends AbstractDAOFactory{

	protected static final Connection conn = SdzConnection.getInstance();	
		
	public DAO getClasseDAO(){
		return new ClasseDAO(conn);
	}
	
	public DAO getProfesseurDAO(){
		return new ProfesseurDAO(conn);
	}
	
	public DAO getEleveDAO(){
		return new EleveDAO(conn);
	}
	
	public DAO getMatiereDAO(){
		return new MatiereDAO(conn);
	}	
}</code></pre><h6 id="r-classe-xmldaofactory-java-1" data-claire-element-id="648880">Classe XMLDAOFactory.java</h6><pre id="r-648869" data-claire-element-id="648869"><code data-claire-semantic="java">package com.sdz.dao;

public class XMLDAOFactory extends AbstractDAOFactory {
	
	public DAO getClasseDAO() {		
		return null;
	}
	
	public DAO getEleveDAO() {
		return null;
	}
	
	public DAO getMatiereDAO() {
		return null;
	}
	
	public DAO getProfesseurDAO() {
		return null;
	}
}</code></pre><p id="r-648870" data-claire-element-id="648870">Vous devez y voir plus clair ; même si la classe <strong>XMLDAOFactory</strong> ne fait rien du tout, vous voyez le principe de base et c'est l'important ! <br/> Nous avons maintenant une hiérarchie de classes capables de travailler ensemble. :magicien:</p><p id="r-648871" data-claire-element-id="648871">Je reprends le dernier exemple que nous avions réalisé, avec un peu de modifications...</p><pre id="r-648872" data-claire-element-id="648872"><code data-claire-semantic="java">import com.sdz.bean.Classe;
import com.sdz.bean.Eleve;
import com.sdz.bean.Matiere;
import com.sdz.bean.Professeur;
import com.sdz.dao.AbstractDAOFactory;
import com.sdz.dao.DAO;
import com.sdz.dao.DAOFactory;


public class TestDAO {

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		System.out.println(&quot;&quot;);
		
		//----------------------------------------------
		//On va rechercher des élèves
		//----------------------------------------------
		AbstractDAOFactory adf = AbstractDAOFactory.getFactory(AbstractDAOFactory.DAO_FACTORY);
		//On récupère un objet faisant le lien entre la base et nos objets 
		DAO&lt;Eleve&gt; eleveDao = adf.getEleveDAO();
		
		
		for(int i = 1; i &lt; 5; i++){
			//On fait notre recherche
			Eleve eleve = eleveDao.find(i);
			System.out.println(&quot;\tELEVE N°&quot; + eleve.getId() + &quot; - NOM : &quot; + eleve.getNom() + &quot; - PRENOM : &quot; + eleve.getPrenom());
		}		
		
		System.out.println(&quot;\n\t************************************************&quot;);
		
		//On fait de même pour une classe
		DAO&lt;Classe&gt; classeDao = adf.getClasseDAO();
		//On cherche la classe ayant pour ID 10
		Classe classe = classeDao.find(10);
		
		System.out.println(&quot;\tCLASSE DE &quot; + classe.getNom());
		
		//On récupère la liste des élèves
		System.out.println(&quot;\n\tCelle-ci contient &quot; + classe.getListEleve().size() + &quot; élève(s)&quot;);
		for(Eleve eleve : classe.getListEleve())
			System.out.println(&quot;\t\t - &quot; + eleve.getNom() + &quot; &quot; + eleve.getPrenom());
		
		
		//Ainsi que la liste des professeurs
		System.out.println(&quot;\n\tCelle-ci a &quot; + classe.getListProfesseur().size() + &quot; professeur(s)&quot;);		
		for(Professeur prof : classe.getListProfesseur()){
			System.out.println(&quot;\t\t - Mr &quot; + prof.getNom() + &quot; &quot; + prof.getPrenom() + &quot; professeur de :&quot;);
			
			//Tant qu'à faire, on prend aussi les matières... ^^
			for(Matiere mat : prof.getListMatiere())
				System.out.println(&quot;\t\t\t * &quot; + mat.getNom());
			
		}
		
		System.out.println(&quot;\n\t************************************************&quot;);
		
		//Un petit essai sur les matières
		DAO&lt;Matiere&gt; matiereDao = adf.getMatiereDAO();
		Matiere mat = matiereDao.find(2);
		System.out.println(&quot;\tMATIERE &quot; + mat.getId() + &quot; : &quot; + mat.getNom());
		
	}
}</code></pre><p id="r-648873" data-claire-element-id="648873">Et le résultat est le même qu'avant ! Tout fonctionne à merveille !<br/> Ainsi, si vous voulez utiliser l'usine de fabrication XML, vous pouvez faire ceci :<br/><code data-claire-semantic="java">AbstractDAOFactory adf = AbstractDAOFactory.getFactory(AbstractDAOFactory.XML_DAO_FACTORY); </code>.</p><p id="r-648874" data-claire-element-id="648874">Voilà, vous en savez plus sur ce pattern de conception et vous devriez être à même de coder le reste des méthodes (insertions, mise à jour et suppression), il n'y a rien de compliqué : ce sont juste des requêtes SQL... ;)</p><p id="r-648875" data-claire-element-id="648875">Allez, et si nous allions faire un tour vers notre QCM ?</p><p id="r-648876" data-claire-element-id="648876">Bon, je vous l'accorde, c'est plus difficile qu'il n'y paraît, mais ce n'était pas insurmontable...<br/> Vous avez appris à utiliser un nouvel outil de conception pour structurer vos programmes... Utilisez-le avec sagesse ! :)</p><p id="r-648877" data-claire-element-id="648877">Une partie somme toute assez simple et pratique !<br/> Je pense que vous devez apprécier tout ceci et que l'utilisation d'une base de données avec Java ne vous posera plus de problèmes majeurs. ^^</p><p id="r-648878" data-claire-element-id="648878">Ce tuto sur JDBC est maintenant terminé. <br/> J'espère que ce dernier vous a plu et que vous avez appris tout plein de choses...</p><p id="r-648879" data-claire-element-id="648879">Nous nous retrouverons bientôt pour une autre API Java à découvrir ! Je ne vous dis pas encore laquelle... :p</p>
<aside class="aside-menu">
<ul class="content-menu" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api">Programmation en Java (API)</a>
</li>
<li class="chapter">
 
<a class="chapterLink" onmouseover="$(this).addClass('box-shadow-summary').next().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').next().removeClass('box-shadow-summary');">
<span>Partie 1</span>
Java DataBase Connectivity
</a>
<a class="chapterOpen" href="#" onmouseover="$(this).addClass('box-shadow-summary').prev().addClass('box-shadow-summary');" onmouseout="$(this).removeClass('box-shadow-summary').prev().removeClass('box-shadow-summary');">
<span>+</span>
</a>
 
<ul class="subchapters">
<li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/en-premier-la-base-de-donnees">En premier : la base de données</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/une-base-de-donnees-quesaco">
Une base de données, quésaco ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/laquelle-utiliser">
Laquelle utiliser
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/installation-de-postgresql-2">
Installation de PostgreSQL
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/postgresql">PostgreSQL</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/preparer-sa-bdd">
Préparer sa BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-la-bdd">
Créer la BDD
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/creer-ses-tables">
Créer ses tables
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/se-connecter-a-sa-bdd">Se connecter à sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/faisons-le-point-3">
Faisons le point
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/connexion-es-tu-la">
Connexion ! Es-tu là ?
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fouiller-dans-sa-bdd">Fouiller dans sa BDD</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-couple-statement-resultset-1">
Le couple Statement - ResultSet
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/comment-ca-fonctionne-4">
Comment ça fonctionne
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/entrainons-nous-1">
Entraînons-nous
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/allons-un-peu-plus-loin-2">Allons un peu plus loin</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-1">
Statement
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/les-requetes-preparees-6">
Les requêtes préparées
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/resultset-2-le-retour">
ResultSet 2 : le retour
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/apres-la-lecture-l-edition">Après la lecture : l&#039;édition</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/modifier-des-donnees-1">
Modifier des données
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/statement-toujours-plus-fort-1">
Statement, toujours plus fort
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/gerer-les-transactions-manuellement-1">
Gérer les transactions manuellement
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/n-avoir-qu-une-instance-de-sa-connexion">N&#039;avoir qu&#039;une instance de sa connexion</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/pourquoi-se-connecter-qu-une-seule-fois">
Pourquoi se connecter qu&#039;une seule fois ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-singleton-1">
Le pattern singleton
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-singleton-dans-tous-ces-etats">
Le singleton dans tous ces états
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/tp-un-testeur-de-requete">TP : un testeur de requête</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/cahier-des-charges-39">
Cahier des charges
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/quelques-captures-d-ecran-1">
Quelques captures d&#039;écran
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/correction-226">
Correction
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-1-2">Le pattern DAO (1/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/avant-toute-chose-2">
Avant toute chose
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-definition">
Le pattern DAO : définition
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/premier-test-2">
Premier test
</a>
</li>
</ul> </li> <li class="subchapter">
<div>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-dao-2-2">Le pattern DAO (2/2)</a>
<a class="subchapterOpen" href="#">
<span>+</span>
</a>
</div>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/le-pattern-factory-1">
Le pattern factory
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
Fabriquer vos DAO
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/d-une-usine-a-une-multinationale">
D&#039;une usine à une multinationale
</a>
</li>
</ul>
</li>
</ul>
</li>
</li>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/programmation-en-java-api/fabriquer-vos-dao-1">
<span class="arrow"></span>
<span class="next">Fabriquer vos DAO</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/rogrammation-en-java-api.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 03:09:18 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/rogrammation-en-java-api.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:41:46 GMT -->
</html>