<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/bonnes-pratiques-javascript.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 07:31:36 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/bonnes-pratiques-javascript.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:23:11 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Bonnes pratiques javascript</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/bonnes-pratiques-javascript.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Bonnes pratiques javascript</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Bonnespratiquesjavascript">Bonnes pratiques javascript</a><br/><a href="#Oplacersoncodejavascript">Où placer son code javascript ?</a><br/><a href="#CommentairesHTMLetcodejavascript">Commentaires HTML et code javascript</a><br/><a href="#Bannireval">Bannir eval()</a><br/><a href="#AttentionsetTimeoutetsetInterval">Attention à setTimeout() et setInterval()</a><br/><a href="#Labaliseltagtetleprfixejavascript">La balise &lt;a&gt; et le préfixe javascript:</a><br/><a href="#Proscriredocument.write">Proscrire document.write()</a><br/><a href="#UtiliserinnerHTML">Utiliser innerHTML ?</a><br/><a href="#without">with()… out!</a><br/><a href="#Rglesdesyntaxe">Règles de syntaxe</a><br/><a href="#Lanotationlittrale">La notation « littérale »</a><br/><a href="#Toujoursutiliservar">Toujours utiliser var</a><br/><a href="#petitRcapitulatif">(petit) Récapitulatif</a><br/></div>
<a name="Bonnespratiquesjavascript"></a><h2>Bonnes pratiques javascript</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
<span class="next">Où placer son code javascript ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-418357" data-claire-element-id="418357">Un script javascript peut rapidement devenir une vraie boucherie impossible à débugger. Pour éviter ces situations, le meilleur moyen est de coder proprement. Voici donc une série de bonnes pratiques utilisées par des professionnels du web, connus et reconnus.</p><p id="r-418358" data-claire-element-id="418358">J'utilise probablement des concepts qui sont encore un peu abstraits (fonctions anonymes, DOM, etc.) ou inconnus (JSON, etc.) pour vous, ce n'est pas dramatique. Le plus important est de prendre connaissance de ces quelques directives et au moins de retenir les choses à ne pas faire, le reste viendra petit à petit. Plus tard ça fera tilt et les réflexes seront déjà là ;) .</p><p id="r-418359" data-claire-element-id="418359">Deux parties : les erreurs à éviter absolument et les bonnes pratiques proprement dites.</p><p id="r-418360" data-claire-element-id="418360">Pour la notation :</p><ul id="r-418367" data-claire-element-id="418367"><li id="r-418362" data-claire-element-id="418362"><p id="r-418361" data-claire-element-id="418361"><strong><code>rouge</code></strong> : tout ce qu'il ne faut jamais faire ni utiliser,</p></li><li id="r-418364" data-claire-element-id="418364"><p id="r-418363" data-claire-element-id="418363"><strong><code>orange</code></strong> : faire attention lors de l'utilisation de cette fonction ou propriété,</p></li><li id="r-418366" data-claire-element-id="418366"><p id="r-418365" data-claire-element-id="418365"><strong><code>vert</code></strong> : ce dont il faut user et abuser.</p></li></ul>
</div><a name="Oplacersoncodejavascript"></a><h2>Où placer son code javascript ?</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
<span class="next">Commentaires HTML et code javascript</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418368" data-claire-element-id="418368">Les scripts javascript doivent être placés dans un fichier externe à la page HTML. Habituellement on place la balise d'insertion des fichiers dans le <code data-claire-semantic="html">&lt;head&gt; </code>. Pour une question de performances on préférera la placer à la fin de la page, juste avant <code data-claire-semantic="html">&lt;/body&gt; </code> À noter que les deux méthodes sont valide du point de vue de la spécification HTML et XHTML.</p><p id="r-418369" data-claire-element-id="418369">L'attribut <code><strong>language</strong></code> est déprécié et ne doit pas figurer.</p><pre id="r-418370" data-claire-element-id="418370"><code data-claire-semantic="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Inclusion de fichier javascript dans une page&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;!-- 

        tout le contenu de la page 

    --&gt;



    &lt;script src=&quot;fichier.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-418371" data-claire-element-id="418371">Dans la page HTML peut éventuellement apparaitre quelques assignations de variables qui, pour une plus grande simplicité de codage, ne sont pas dans un fichier javascript externe.</p><pre id="r-418372" data-claire-element-id="418372"><code data-claire-semantic="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Configuration rapide de notre application javascript&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;!-- 

        tout le contenu de la page 

    --&gt;


    &lt;script src=&quot;fichier.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        var configuration = {
            id_mbr: 502,
            posts_par_page: 50
        };
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-418373" data-claire-element-id="418373">Le traitement d'une page web par un navigateur est séquentiel, de haut en bas. Placer les scripts au plus bas permet de charger les éléments importants de la page web (le contenu et la présentation) avant de s'occuper des paillettes que représente le script javascript. De plus en plaçant le javascript tout en bas, il est possible d'utiliser le DOM directement et <strong>avant</strong> l'habituel événement <code data-claire-semantic="javascript">onload </code> de la page HTML. Quelques centaines de millisecondes qui font une différence.</p><p id="r-418374" data-claire-element-id="418374">Lors de tests avec des pages très épurés, il est possible que le DOM ne soit pas encore prêt et que <code data-claire-semantic="javascript">document.getElementById </code> ne retourne rien et donc que le script «ne marche pas». Dans ce cas, il faut repasser par l'évènement <code data-claire-semantic="javascript">window.onload </code>. Cependant, sur un site ayant du contenu, il est rare de rencontrer ce problème.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
<span class="next">Commentaires HTML et code javascript</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="CommentairesHTMLetcodejavascript"></a><h2>Commentaires HTML et code javascript</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
<span class="arrow"></span>
<span class="next">Où placer son code javascript ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
<span class="next">Bannir eval()</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418376" data-claire-element-id="418376">Ici on va parler de cette pratique (et toutes les autres variantes sur le même principe) qui consiste à « cacher le code javascript aux &quot;vieux&quot; navigateurs » :</p><pre id="r-418377" data-claire-element-id="418377"><code data-claire-semantic="html">&lt;script type=&quot;text/javascript&quot;&gt;
&lt;!--


// --&gt;
&lt;/script&gt;</code></pre><p id="r-418378" data-claire-element-id="418378">Il y a 10 ans c'était une technique valable, plus maintenant. Un navigateur qui affiche le code javascript au lieu de l'exécuter ou de l'ignorer est buggé. De nos jours il faut placer les scripts dans un seul ou plusieurs fichiers externes inclus à la page avec la balise <code data-claire-semantic="html">&lt;script&gt; </code> comme on l'a vu au-dessus, ce qui contourne le problème des commentaires et permet de profiter du cache du navigateur.</p><p id="r-418379" data-claire-element-id="418379">De plus, la très grande incompréhension du XHTML1.0, du XHTML1.1, des doctypes et du type mime consacré aux pages XHTML rend toute tentative de «camouflage» bancale puisqu'une mauvaise utilisation des commentaires peut facilement rendre le code et/ou la page invalide (au sens du validateur W3C).</p><p id="r-418380" data-claire-element-id="418380">Pour être clair, s'il faut mettre du code javascript directement dans le (x)HTML :</p><ul id="r-418387" data-claire-element-id="418387"><li id="r-418382" data-claire-element-id="418382"><p id="r-418381" data-claire-element-id="418381"><strong>HTML 4+</strong> : pas de commentaires,</p></li><li id="r-418384" data-claire-element-id="418384"><p id="r-418383" data-claire-element-id="418383"><strong>XHTML 1.0 strict</strong> : envoyé avec le type mime <code><strong>application/xhtml+xml</strong></code> il faut placer le code javascript dans une balise <code>&lt;![CDATA[   ]]&gt;</code> pour que le code javascript contenant des &quot;&lt;&quot; soit ignoré par le parseur.</p></li><li id="r-418386" data-claire-element-id="418386"><p id="r-418385" data-claire-element-id="418385"><strong>XHTML 1.0</strong> : avec le type mime <code>text/html</code><a href="http://www.hixie.ch/advocacy/xhtml.fr/">c'est ridicule</a>. Il vaut mieux utiliser <strong>HTML 4</strong>.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
<span class="arrow"></span>
<span class="next">Où placer son code javascript ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
<span class="next">Bannir eval()</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Bannireval"></a><h2>Bannir eval()</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
<span class="arrow"></span>
<span class="next">Commentaires HTML et code javascript</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
<span class="next">Attention à setTimeout() et setInterval()</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418389" data-claire-element-id="418389">L'utilisation de <code><strong>eval()</strong></code> est à éviter absolument. Cette fonction <em>démarre le compilateur javascript</em>, ça mange de la mémoire et c'est lent à démarrer. Les performances sont donc mauvaises. De plus, le code contenu dans <code><strong>eval()</strong></code> ne peut pas être optimisé par le compilateur JS.</p><p id="r-418390" data-claire-element-id="418390">Quelques détails sur la sécurité : le script évalué (potentiellement malsain «<em>Never trust user input</em>») est exécuté avec les mêmes privilèges que le script où se trouve l'appel à la fonction <code><strong>eval()</strong></code>. Par exemple pour les extensions Firefox, qui ont accès à des méthodes spéciales du navigateur pour gérer les favoris et d'autres préférences, si on utilise <code><strong>eval()</strong></code> dans cette extension alors le code contenu dans <code><strong>eval()</strong></code> peut potentiellement utiliser les mêmes méthodes spéciales !</p><p id="r-418391" data-claire-element-id="418391">Pour ceux qui parsent encore leur JSON avec <code><strong>eval()</strong></code>, il est temps de passer à une vraie librairie : <a href="https://github.com/douglascrockford/JSON-js">json2.js</a>. Pour la petite histoires l'objet natif <code>JSON</code> — utilisé pour le parser — de IE8 est basé sur ce script précisément. Le plus merveilleux c'est que l'API est consistante sur IE8, FF et WebKit ! (Opera traîne). Cette librairie utilise l'objet natif s'il est présent et évalue le script d'une façon sécurisée dans le cas contraire. Une présentation sommaire de l'API :</p><pre id="r-418392" data-claire-element-id="418392"><code data-claire-semantic="javascript">// on veut transformer cet objet en chaine JSON
var objet = {
    variable1: &quot;une chaine&quot;,
    variable2: 5
};

var chaine = JSON.stringify(objet); // renvoie la chaine '{&quot;variable1&quot;:&quot;une chaine&quot;,&quot;variable2&quot;:5}'


// maintenant on veut un objet à partir d'une chaine JSON
var objet2 = JSON.parse(chaine); // renvoie un objet ayant la même structure que la variable objet ci-dessus

alert(objet2.variable1); // affiche : &quot;une chaine&quot;
alert(objet2.variable2); // affiche : 5</code></pre>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
<span class="arrow"></span>
<span class="next">Commentaires HTML et code javascript</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
<span class="next">Attention à setTimeout() et setInterval()</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="AttentionsetTimeoutetsetInterval"></a><h2>Attention à setTimeout() et setInterval()</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
<span class="arrow"></span>
<span class="next">Bannir eval()</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
<span class="next">La balise &lt;a&gt; et le préfixe javascript:</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418394" data-claire-element-id="418394">Ce sont deux fonctions très dangereuses : en passant une chaine de caractères en paramètre, ces fonctions appellent <code><strong>eval()</strong></code>. Mal. Très mal. Surtout qu'il est possible de passer des paramètres à ces fonctions naturellement.</p><pre id="r-418395" data-claire-element-id="418395"><code data-claire-semantic="javascript">// pour exécuter une fonction sans paramètre
setInterval(maFonction, 1000);

// si il faut passer des paramètres à notre fonction du futur, il faut l'englober 
// dans une fonction anonyme qui contient l'appel à notre fonction paramétré.
setInterval(function () { 
    maFonction(parametre1, parametre2); 
}, 5000);

// une méthode plus élégante qui malheureusement ne marche pas sous IE
setTimeout(maFonction, 5000, parametre1, parametre2 /*, etc. */);</code></pre><p id="r-418396" data-claire-element-id="418396">Il ne faut <strong>jamais</strong> passer de chaine de caractère en paramètre des fonctions <code><strong>setTimeout()</strong></code> et <code><strong>setInterval()</strong></code>.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
<span class="arrow"></span>
<span class="next">Bannir eval()</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
<span class="next">La balise &lt;a&gt; et le préfixe javascript:</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Labaliseltagtetleprfixejavascript"></a><h2>La balise &lt;a&gt; et le préfixe javascript:</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
<span class="arrow"></span>
<span class="next">Attention à setTimeout() et setInterval()</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
<span class="next">Proscrire document.write()</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418398" data-claire-element-id="418398">Ce préfixe <code><strong>javascript:</strong></code> est encore une relique honteuse d'une autre époque. Il ne doit jamais apparaitre. Il est inutile de l'utiliser sachant que le code javascript n'a rien à faire dans un attribut <code>href</code> d'une balise <code data-claire-semantic="html">&lt;a&gt; </code>. Dans l'attribut <code>href</code> d'un lien doit figurer une URI valide qui pointe effectivement sur une ressource, dans ce cas <code><strong>javascript:</strong></code> est traité comme un protocole ! Protocole qui n'existe pas ; le lien est alors invalide <strong>et</strong> inutile. À l'heure du web accessible, ça fait tâche. Remplacer l'URI par une ancre vide, le fameux <code data-claire-semantic="html">&lt;a href=&quot;#&quot; onclick=&quot;action();&quot;&gt;action&lt;/a&gt; </code>, est aussi mauvais.</p><p id="r-418399" data-claire-element-id="418399">La solution est simple. Il suffit d'utiliser les standards… Pour rajouter un évènement à un lien existant — par exemple une confirmation sur un lien de suppression ou la prise en charge par « AJAX » du chargement d'un lien — alors, il faut utiliser l'événement <code><strong>onclick</strong></code>. Pour confirmer une suppression, on peut par exemple utiliser :</p><pre id="r-418400" data-claire-element-id="418400"><code data-claire-semantic="html">&lt;a href=&quot;/supprimer/id&quot; onclick=&quot;return confirm('Supprimer cet objet ?');&quot;&gt;supprimer l'objet&lt;/a&gt;</code></pre><p id="r-418401" data-claire-element-id="418401">Maintenant pour les actions ne possédant pas d'url — le démarrage d'un compte à rebours, le changement de couleur d'un élément, cacher un élément (les &lt;secret&gt; et autre) — la balise consacrée est nommée <code data-claire-semantic="html">&lt;button&gt; </code> et possède un attribut <code>type</code> qui peut prendre les valeurs</p><ul id="r-418408" data-claire-element-id="418408"><li id="r-418403" data-claire-element-id="418403"><p id="r-418402" data-claire-element-id="418402"><code><strong>button</strong></code> il n'y a pas d'action par défaut, le bouton ne « fait rien »,</p></li><li id="r-418405" data-claire-element-id="418405"><p id="r-418404" data-claire-element-id="418404"><code><strong>submit</strong></code> c'est la valeur par défaut. Le bouton soumet le formulaire parent,</p></li><li id="r-418407" data-claire-element-id="418407"><p id="r-418406" data-claire-element-id="418406"><code><strong>reset</strong></code> remplace tous les champs par leurs valeurs par défaut.</p></li></ul><p id="r-418409" data-claire-element-id="418409">L'utilisation est simple :</p><pre id="r-418410" data-claire-element-id="418410"><code data-claire-semantic="html">&lt;button type=&quot;button&quot; onclick=&quot;cacher();&quot;&gt;Cachez moi !&lt;/button&gt;</code></pre><p id="r-418411" data-claire-element-id="418411">L'attribut <code data-claire-semantic="html">type=&quot;button&quot; </code> est très important. Si on ne précise pas le type, par défaut <code data-claire-semantic="html">&lt;button&gt; </code> envoie le formulaire parent. (Cependant <code data-claire-semantic="html">&lt;button&gt; </code> n'a pas besoin de se trouver dans un formulaire, il peut être n'importe où ou presque dans le HTML d'une page !).</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
<span class="arrow"></span>
<span class="next">Attention à setTimeout() et setInterval()</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
<span class="next">Proscrire document.write()</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Proscriredocument.write"></a><h2>Proscrire document.write()</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
<span class="arrow"></span>
<span class="next">La balise &lt;a&gt; et le préfixe javascript:</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
<span class="next">Utiliser innerHTML ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418413" data-claire-element-id="418413">Le comportement de cette fonction est problématique. Il n'est pas constant et induit les débutants en erreur. Lors du chargement d'une page HTML cette fonction <strong>ajoute</strong> la chaine passée en paramètre au contenu. Une fois la page chargée, cette fonction <strong>remplace totalement</strong> le HTML de la page par la chaine en paramètre.</p><p id="r-418414" data-claire-element-id="418414">On a vu plus haut que le chargement d'une page HTML est séquentiel, c'est un exercice périlleux pour le navigateur que de rajouter du contenu à une page en train de charger. Si c'est périlleux, les bugs ne sont pas loin. Pour éviter les comportements « étranges » il ne faut pas utiliser <code><strong>document.write()</strong></code> !</p><p id="r-418415" data-claire-element-id="418415">L'alternative est — encore une fois — d'utiliser les standards et plus précisément le DOM. Si on veut rajouter du contenu à une page HTML le plus simple est de placer un élément vide à l'endroit voulu et de le remplir une fois la page chargée. Si l'on applique les recommandations sur la place de <code data-claire-semantic="html">&lt;script&gt; </code>, c'est simple et direct :</p><pre id="r-418416" data-claire-element-id="418416"><code data-claire-semantic="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Une page web&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Titre de la page&lt;/h1&gt;

    &lt;p&gt;Du contenu?&lt;/p&gt;
    &lt;p id=&quot;dynamique&quot;&gt;&lt;/p&gt;
    &lt;p&gt;Encore plus de contenu&lt;/p&gt;

    &lt;script type=&quot;text/javascript&quot;&gt;
        document.getElementById(&quot;dynamique&quot;).innerHTML = &quot;ma chaine de caractères à rajouter avec javascript&quot;;
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-418417" data-claire-element-id="418417">Le html reste propre et le contenu est rajouté comme il faut, le javascript devrait se trouver dans une page séparée, il est ici dans le HTML pour simplifier.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
<span class="arrow"></span>
<span class="next">La balise &lt;a&gt; et le préfixe javascript:</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
<span class="next">Utiliser innerHTML ?</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="UtiliserinnerHTML"></a><h2>Utiliser innerHTML ?</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
<span class="arrow"></span>
<span class="next">Proscrire document.write()</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
<span class="next">with()… out!</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418419" data-claire-element-id="418419">On vient juste d'utiliser <code><strong>innerHTML</strong></code> or il convient de faire attention à son utilisation. Ce n'est pas une propriété standard du DOM mais elle est très utile pour les scripts nécessitant la performance (et les scripts simplistes). En bonus elle est disponible dans IE et tout navigateur digne de ce nom.</p><p id="r-418420" data-claire-element-id="418420">Pour rajouter des centaines d'éléments à une page, remplacer toute une zone de notre page avec du nouveau contenu ou quand on veut supprimer tous les enfants d'un élément, il est plus rapide — à écrire et à exécuter — de le faire avec <code><strong>innerHTML</strong></code> qu'avec le DOM. Mais il faut rester prudent sur son utilisation. En utilisant (mal) <code><strong>innerHTML</strong></code> on peut « casser » le (x)HTML et les performances auxquelles on s'attendait.</p><p id="r-418421" data-claire-element-id="418421">Voilà les quelques règles à suivre pour avoir le minimum de problème et le maximum d'efficacité :</p><ul id="r-418426" data-claire-element-id="418426"><li id="r-418423" data-claire-element-id="418423"><p id="r-418422" data-claire-element-id="418422">Toujours vérifier avec un outil adapté (en utilisant firebug — <code>console.log();</code> — ou un simple <code>alert();</code>) que le HTML que l'on cherche à rajouter est <strong>bien formé</strong> : toutes les balises ouvertes sont fermées, pas de caractère illégal dans les attributs, etc.</p></li><li id="r-418425" data-claire-element-id="418425"><p id="r-418424" data-claire-element-id="418424">Appeler <code><strong>innerHTML</strong></code><strong>une seule et unique fois</strong> par élément. Si on l'utilise dans une boucle et que l'on rajoute un bout de chaîne à la fois, les performances sont aussi mauvaises — voir pire ! — qu'en utilisant le DOM.</p></li></ul><p id="r-418427" data-claire-element-id="418427">Pour l'exemple on cherche à rajouter 100 éléments à notre liste HTML ayant un id <code>todo</code>.</p><pre id="r-418428" data-claire-element-id="418428"><code data-claire-semantic="javascript">// on oublie pas le mot-clef pour limiter la portée des variables
var 
    // une bonne habitude à prendre, garder une référence à l'objet dans une variable
    // pour éviter les document.getElementById consécutifs qui ralentissent le code
    liste = document.getElementById(&quot;todo&quot;),

    // la chaine a rajouter à notre liste
    taches = &quot;&quot;, 

    // on déclare la variable d'incrémentation au début de préférence.
    // décalarée ici ou dans la boucle, elle a la même portée.
    i; 


for (i = 0; i &lt; 100; i++) {

    // il est préférable d'utiliser des quotes simples quand on travaille avec du HTML
    // pas besoin d'échapper les innombrables &quot; dans les attributs HTML
    taches += '&lt;li id=&quot;tache_'+ (i+1) +'&quot;&gt;tâche n°:'+ (i+1) +'&lt;/li&gt;';
}


// une fois la chaine crée on la rajoute à la page. C'est l'opération la plus coûteuse du script.
liste.innerHTML = taches;</code></pre><p id="r-418429" data-claire-element-id="418429">Une erreur courante est de remplacer <code>taches</code>, dans la boucle, directement par <code data-claire-semantic="javascript"><strong>liste.innerHTML </strong></code>. Pour la rapidité du script, c'est fatal. Pour toute manipulation plus évoluée des nœuds du document HTML il faut utiliser le DOM.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
<span class="arrow"></span>
<span class="next">Proscrire document.write()</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
<span class="next">with()… out!</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="without"></a><h2>with()… out!</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
<span class="arrow"></span>
<span class="next">Utiliser innerHTML ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
<span class="next">Règles de syntaxe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418431" data-claire-element-id="418431">Après quelques recherches sur le javascript il se peut que l'on finisse par tomber sur <code><strong>with()</strong></code> qui peut paraître une bonne idée sur le moment. Grave Erreur. On parle d'une construction qui permet de « raccourcir » l'écriture lorsque l'on travaille avec des objets ayant beaucoup de « profondeur ». Tout de suite un exemple qui montre ce dont on parle et les imprécisions que cette construction entraîne :</p><pre id="r-418432" data-claire-element-id="418432"><code data-claire-semantic="javascript">function monAction () {
    var element = document.getElementById(&quot;idElement&quot;),
        color = &quot;yellow&quot;;

    // on ne veut pas avoir à réécrire &quot;element.style.&quot; pour chaque propriété
    // on utilise alors with() pour &quot;raccourcir&quot;.
    with (element.style) {
        color = &quot;red&quot;;
        zIndex = &quot;20&quot;;
        fontFamily = &quot;Verdana&quot;;
    }
}</code></pre><p id="r-418433" data-claire-element-id="418433">Maintenant, question : qu'est-ce que <code>color</code> modifie ? la variable <code>color</code> de la fonction ou <code data-claire-semantic="javascript">element.style.color </code> ? Impossible à savoir. Il est tout aussi impossible de savoir à quoi se réfère <code data-claire-semantic="javascript">this </code> à l'intérieur du <code><strong>with()</strong></code>. Pointe-t-il sur <code>element.style</code> ou fait-il référence à l'objet parent ? Mystère.</p><p id="r-418434" data-claire-element-id="418434">La bonne façon de faire est de créer une nouvelle variable pour lever les ambiguïtés.</p><pre id="r-418435" data-claire-element-id="418435"><code data-claire-semantic="javascript">function monAction () {
    var element = document.getElementById(&quot;idElement&quot;),
        style = element.style, // on crée une variable pour lever l'ambiguïté
        color = &quot;yellow&quot;;

    style.color = &quot;red&quot;;
    style.zIndex = &quot;20&quot;;
    style.fontFamily = &quot;Verdana&quot;;
}</code></pre><p id="r-418436" data-claire-element-id="418436">Là, tout est clair. On sait exactement ce que l'on modifie. Les radins des accolades iront voir plus bas les détails sur la notation « littérale » (qui est une bonne pratique, elle) pour « gagner » des caractères et « raccourcir » leurs scripts.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
<span class="arrow"></span>
<span class="next">Utiliser innerHTML ?</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
<span class="next">Règles de syntaxe</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Rglesdesyntaxe"></a><h2>Règles de syntaxe</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
<span class="arrow"></span>
<span class="next">with()… out!</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
<span class="next">La notation « littérale »</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418438" data-claire-element-id="418438">Maintenant des détails importants sur la syntaxe du javascript.</p><p id="r-418439" data-claire-element-id="418439">Quelques points noirs du langage :</p><ul id="r-418446" data-claire-element-id="418446"><li id="r-418441" data-claire-element-id="418441"><p id="r-418440" data-claire-element-id="418440">les accolades dans les conditions sont optionnelles,</p></li><li id="r-418443" data-claire-element-id="418443"><p id="r-418442" data-claire-element-id="418442">le compilateur « devine » où ajouter des points virgules en cas d'oublis,</p></li><li id="r-418445" data-claire-element-id="418445"><p id="r-418444" data-claire-element-id="418444">une variable est globale par défaut.</p></li></ul><p id="r-418447" data-claire-element-id="418447">Ça n'a pas l'air méchant de loin, mais ça l'est. C'est pourquoi il faut toujours déclarer ses variables avec <strong>var</strong> (voir plus bas) et ajouter un point virgule à la fin de chaque expression :</p><pre id="r-418448" data-claire-element-id="418448"><code data-claire-semantic="javascript">// on assigne une variable
var variable = &quot;une chaine&quot;;


// plus subtil, on assigne une fonction anonyme à une variable 
var maFonction = function () {
    // le code de la fonction 
    return &quot;valeur à retourner&quot;;
};

// on utilise plus souvent ce genre de chose
Date.prototype.maFonctionPerso = function (format) {
    // on formate la date comme on veut
};


// on crée un objet
var monObjet = {/* les propriétés et méthodes */};


// un appel de fonction
maFonction();


// ATTENTION : pour une déclaration de fonction pas besoin de point virgule !
function uneFonctionInnocente (param) {
    // code de la fonction
}</code></pre><p id="r-418449" data-claire-element-id="418449"><strong>Toujours</strong> mettre les accolades aux conditions et aux boucles, même (et surtout) pour une seule instruction. Un oubli est si vite arrivé. C'est un détail qui simplifie grandement la maintenance et réduit le temps passé à débugger le code — on a juste une instruction à rajouter sans avoir à s'occuper de savoir si les accolades sont présentes ou non.</p><pre id="r-418450" data-claire-element-id="418450"><code data-claire-semantic="javascript">if (valeur === &quot;un truc&quot;) {
    // exécuter du code
}
else if (valeur === &quot;un autre truc&quot;) {
    // exécuter du code
}
else {
    // executer du code
}


for (var i = 0; i &lt; 50; i++) {
    // instructions
}</code></pre><p id="r-418451" data-claire-element-id="418451">Il est crucial pour une application javascript qui commence à grossir d'avoir une syntaxe consistante. Les feintes d'écritures pour gagner 3 pauvres caractères et un saut de ligne ne valent pas la peine. D'ailleurs, il existe des outils <a href="http://developer.yahoo.com/yui/compressor/">dédiés au traitement du code final</a> pour en réduire au maximum la taille. Pour pouvoir les utiliser, il faut suivre scrupuleusement ces quelques règles (en particulier sur les points-virgules).</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
<span class="arrow"></span>
<span class="next">with()… out!</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
<span class="next">La notation « littérale »</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lanotationlittrale"></a><h2>La notation « littérale »</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
<span class="arrow"></span>
<span class="next">Règles de syntaxe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
<span class="next">Toujours utiliser var</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418453" data-claire-element-id="418453">C'est une façon élégante de créer des objets très courants (Array, Objet et RegExp). Avis aux radins des accolades du paragraphe précédent, si il y a des caractères à gagner dans un script c'est ici que ça se passe. Un effet bénéfique de cette notation est qu'elle limite l'utilisation du mot-clef <code><strong>new</strong></code>. Un petit oubli de ce mot-clef et les 7 plaies d'Égypte vont s'abattre sur votre script, causant des problèmes plus mystiques les uns que les autres (qui viennent juste du fait que l'objet original a été sauvagement modifié, au lieu d'une «copie» de celui-ci).</p><p id="r-418454" data-claire-element-id="418454">Voici donc la forme préférée pour la création de ces objets :</p><pre id="r-418455" data-claire-element-id="418455"><code data-claire-semantic="javascript">// Les tableaux
// constructeur: Array
var tab = [];// un nouveau tableau vide
var tab = ['zéro','un','deux','trois'];// avec du monde dedans


// Les objets
// constructeur: Object
var obj = {}; // un objet vide
var obj = { // avec du monde dedans
    propriete: &quot;valeur&quot;,
    methode:function () {}
};


// Les expressions régulières
// constructeur: RegExp
var reg = /\d+/ig; // une regex</code></pre><p id="r-418456" data-claire-element-id="418456">C'est pas plus sexy comme ça ?</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
<span class="arrow"></span>
<span class="next">Règles de syntaxe</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
<span class="next">Toujours utiliser var</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Toujoursutiliservar"></a><h2>Toujours utiliser var</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
<span class="arrow"></span>
<span class="next">La notation « littérale »</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
<span class="next">(petit) Récapitulatif</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-418458" data-claire-element-id="418458">On a vu plus haut que les variables en javascript sont globales par défaut. Ce qui peut très facilement entrainer des conflits.</p><p id="r-418459" data-claire-element-id="418459">Quand on déclare une variable avec le mot-clef <code><strong>var</strong></code> devant, on rend cette variable locale à la fonction parente — pour nos amis venus d'autres horizons (C/C++, etc.) les boucles ne peuvent pas avoir de variables locales en javascript, c'est un privilège des fonctions.</p><pre id="r-418460" data-claire-element-id="418460"><code data-claire-semantic="javascript">// dans ces deux fonctions la variable &quot;i&quot; a exactement la même portée


function uneBoucle () {
    // ici on déclare la variable dans la boucle, c'est pas le mieux
    for (var i = 0; i &lt; 100; i++) {
        // du code
    }
}


function uneAutreBoucle () {

    var i; // il est préférable de déclarer _toutes_ les variables en même temps au début de la fonction

    for (i = 0; i &lt; 100; i++) {
        // du code
    }
}</code></pre><p id="r-418461" data-claire-element-id="418461">Pour connaître la portée d'une variable, il suffit de trouver la première fonction parente : c'est à l'intérieur de cette fonction que la variable est définie. S'il n'y a pas de fonction parente alors la variable est globale au script.</p><pre id="r-418462" data-claire-element-id="418462"><code data-claire-semantic="javascript">// pas de &quot;var&quot; : donc c'est une variable globale
casper = &quot;variable globale&quot;; 


// il n'y a pas de fonction parente explicite alors c'est aussi une variable globale
var variableGlobale = true;


function topSecrete () {

    var casper = &quot;fantôme&quot;;

    alert(casper); 
}


topSecrete();  // affiche : fantôme
alert(casper); // affiche : variable globale</code></pre><p id="r-418463" data-claire-element-id="418463">On peut déclarer plusieurs variables locales à la suite avec un seul mot-clef <code><strong>var</strong></code> en séparant les assignations par des virgules — sans oublier de terminer par un point virgule final bien entendu :).</p><pre id="r-418464" data-claire-element-id="418464"><code data-claire-semantic="javascript">function maFonction () {

    var variable1 = &quot;&quot;,
        variable2 = [],
        variable3 = 0,
        variable4, variable5;

    function locale() {
        // dans cette fonction toutes les variables de la fonction parente
        // sont utilisables. De plus cette fonction est locale à «maFonction»
    }

    // ici variable4 et variable5 sont des variables locales de type &quot;undefined&quot;
}</code></pre><p id="r-418465" data-claire-element-id="418465">On n'a pas pollué l'espace global, tout le monde est content et personne ne se marche sur les pieds.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
<span class="arrow"></span>
<span class="next">La notation « littérale »</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
<span class="next">(petit) Récapitulatif</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="petitRcapitulatif"></a><h2>(petit) Récapitulatif</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
<span class="arrow"></span>
<span class="next">Toujours utiliser var</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<aside id="r-418479" data-claire-element-id="418479" data-claire-semantic="error"><p id="r-418467" data-claire-element-id="418467">Ne pas utiliser :</p><ul id="r-418478" data-claire-element-id="418478"><li id="r-418469" data-claire-element-id="418469"><p id="r-418468" data-claire-element-id="418468"><code>eval()</code></p></li><li id="r-418471" data-claire-element-id="418471"><p id="r-418470" data-claire-element-id="418470">le préfixe <code>javascript:</code></p></li><li id="r-418473" data-claire-element-id="418473"><p id="r-418472" data-claire-element-id="418472"><code>with()</code></p></li><li id="r-418475" data-claire-element-id="418475"><p id="r-418474" data-claire-element-id="418474"><code>document.write();</code></p></li><li id="r-418477" data-claire-element-id="418477"><p id="r-418476" data-claire-element-id="418476">Des commentaires pour « cacher » le code javascript</p></li></ul></aside><aside id="r-418486" data-claire-element-id="418486" data-claire-semantic="warning"><p id="r-418480" data-claire-element-id="418480">Faire attention avec :</p><ul id="r-418485" data-claire-element-id="418485"><li id="r-418482" data-claire-element-id="418482"><p id="r-418481" data-claire-element-id="418481"><code>setTimeout()</code> et <code>setInterval()</code></p></li><li id="r-418484" data-claire-element-id="418484"><p id="r-418483" data-claire-element-id="418483"><code>innerHTML</code></p></li></ul></aside><aside id="r-418497" data-claire-element-id="418497" data-claire-semantic="information"><p id="r-418487" data-claire-element-id="418487">Utiliser :</p><ul id="r-418496" data-claire-element-id="418496"><li id="r-418489" data-claire-element-id="418489"><p id="r-418488" data-claire-element-id="418488">le mot-clef <code><strong>var</strong></code> pour déclarer ses variables</p></li><li id="r-418491" data-claire-element-id="418491"><p id="r-418490" data-claire-element-id="418490">des accolades et des points-virgules partout où il en faut</p></li><li id="r-418493" data-claire-element-id="418493"><p id="r-418492" data-claire-element-id="418492">la syntaxe littérale pour créer des objets</p></li><li id="r-418495" data-claire-element-id="418495"><p id="r-418494" data-claire-element-id="418494">placer son code javascript après tout le contenu HTML de la page</p></li></ul></aside><pre id="r-418498" data-claire-element-id="418498"><code data-claire-semantic="html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html;charset=utf-8&quot;&gt;
    &lt;title&gt;Une page toute gentille&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;a href=&quot;/url/service/classique&quot; onclick=&quot;vaChercherAjax();&quot;&gt;Un vrai lien&lt;/a&gt;
    &lt;button type=&quot;button&quot; onclick=&quot;actionImmediate();&quot;&gt;Action !&lt;/button&gt;
    

    &lt;script src=&quot;mesScriptsExternes.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        var configuration = {
                utilisateur: &quot;nod_&quot;,
                id: &quot;fixe&quot;,
                age: &quot;&quot;
            };

        // ou si on a défini un objet global ailleurs dans le code
        MonObjetGlobal.configuration = {
            utilisateur: &quot;nod_&quot;,
            id: &quot;fixe&quot;,
            age: &quot;&quot;,
            sexe: &quot;oh oui&quot;
        };    
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre><p id="r-418499" data-claire-element-id="418499">En suivant cet ensemble de conseils, votre code sera bien plus robuste et facile à maintenir. Il faut bien être conscient que tout cela ne diminue en rien les possibilités du javascript. Bien au contraire.</p><p id="r-418500" data-claire-element-id="418500">Armé de ces conseils il est alors possible d'utiliser au mieux toute la puissance du langage et honnêtement c'est à ce moment-là que javascript devient franchement fun.</p><p id="r-418501" data-claire-element-id="418501">Avant de partir, quelques liens :</p><ul id="r-418510" data-claire-element-id="418510"><li id="r-418503" data-claire-element-id="418503"><p id="r-418502" data-claire-element-id="418502">quelques pages d'un très bon livre (c'est rare pour javascript !) en français : <a href="http://books.google.fr/books?id=60pe6dVJqEAC&amp;printsec=frontcover&amp;source=gbs_summary_r&amp;cad=0">Javascript : La référence (+ un rhino)</a>,</p></li><li id="r-418505" data-claire-element-id="418505"><p id="r-418504" data-claire-element-id="418504">des conférences géniales (en anglais) sur le bon javascript c'est sur <a href="http://developer.yahoo.com/yui/theater/">YUI theatre</a>. C'est comme le cochon : tout est bon,</p></li><li id="r-418507" data-claire-element-id="418507"><p id="r-418506" data-claire-element-id="418506">Une référence du javascript (c'est son job: «ingénieur javascript») : <a href="http://javascript.crockford.com/">Douglas crowford</a>,</p></li><li id="r-418509" data-claire-element-id="418509"><p id="r-418508" data-claire-element-id="418508"><a href="http://www.quirksmode.org/resources.html">quirksmode.org</a> et surtout les <a href="http://www.quirksmode.org/compatibility.html">tables de compatibilité</a> ! Toujours avoir sous la main.</p></li></ul><p id="r-418511" data-claire-element-id="418511">Aimez le javascript, il vous aimera (et moi aussi) en retour.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript">Bonnes pratiques javascript</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/ou-placer-son-code-javascript-1">
Où placer son code javascript ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/commentaires-html-et-code-javascript">
Commentaires HTML et code javascript
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/bannir-eval">
Bannir eval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/attention-a-settimeout-et-setinterval">
Attention à setTimeout() et setInterval()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-balise-a-et-le-prefixe-javascript">
La balise &lt;a&gt; et le préfixe javascript:
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/proscrire-document-write">
Proscrire document.write()
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/utiliser-innerhtml">
Utiliser innerHTML ?
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/with-out">
with()… out!
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/regles-de-syntaxe">
Règles de syntaxe
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/la-notation-litterale">
La notation « littérale »
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
Toujours utiliser var
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/petit-recapitulatif">
(petit) Récapitulatif
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/bonnes-pratiques-javascript/toujours-utiliser-var">
<span class="arrow"></span>
<span class="next">Toujours utiliser var</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/bonnes-pratiques-javascript.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 07:31:36 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/bonnes-pratiques-javascript.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 05:23:11 GMT -->
</html>