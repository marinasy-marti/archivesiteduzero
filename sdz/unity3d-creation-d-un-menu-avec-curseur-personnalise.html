<html>

<!-- Mirrored from 62.4.17.167/sdz/sdz/unity3d-creation-d-un-menu-avec-curseur-personnalise.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:51:18 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/unity3d-creation-d-un-menu-avec-curseur-personnalise.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:37:41 GMT -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Tutoriel : Unity3D : Création d&#039;un menu avec curseur personnalisé</title>
<link href="medias/sdz_main.css" type="text/css" rel="stylesheet" media="all"/>
</head>
        <body>
<a href="../www.siteduzero.com/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise.html" class="version_en_ligne">Version en ligne</a>
<h1>Tutoriel : Unity3D : Création d&#039;un menu avec curseur personnalisé</h1>
<h2>Table des matières</h2><div class="table_des_matieres"><a href="#Unity3DCrationd039unmenuaveccurseurpersonnalis">Unity3D : Création d&#039;un menu avec curseur personnalisé</a><br/><a href="#Avantdecommencer">Avant de commencer</a><br/><a href="#Leterrain">Le terrain</a><br/><a href="#Lesscripts">Les scripts</a><br/></div>
<a name="Unity3DCrationd039unmenuaveccurseurpersonnalis"></a><h2>Unity3D : Création d&#039;un menu avec curseur personnalisé</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/avant-de-commencer-23">
<span class="next">Avant de commencer</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div class="content">
<p id="r-535145" data-claire-element-id="535145">Bonjour les Zér0s !</p><p id="r-535146" data-claire-element-id="535146">Vous venez de finir votre jeu avec Unity3D et vous aimeriez faire un menu de jeu ? Ne cherchez plus ! Vous êtes tombés au bon endroit ;)</p><p id="r-535147" data-claire-element-id="535147">À la fin de ce cours, vous serez capable de :</p><ul id="r-535156" data-claire-element-id="535156"><li id="r-535149" data-claire-element-id="535149"><p id="r-535148" data-claire-element-id="535148">Créer un menu</p></li><li id="r-535151" data-claire-element-id="535151"><p id="r-535150" data-claire-element-id="535150">Charger une scène (depuis ce même menu)</p></li><li id="r-535153" data-claire-element-id="535153"><p id="r-535152" data-claire-element-id="535152">Ajouter un curseur personnalisé</p></li><li id="r-535155" data-claire-element-id="535155"><p id="r-535154" data-claire-element-id="535154">Jouer un son lors d'un évènement.</p></li></ul><p id="r-535157" data-claire-element-id="535157">N'attendons plus, c'est parti ! :pirate:</p>
</div><a name="Avantdecommencer"></a><h2>Avant de commencer</h2><div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/le-terrain-1">
<span class="next">Le terrain</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-535158" data-claire-element-id="535158">Avant de commencer, vous aurez besoin de quelques ressources. Je vous invite donc à télécharger et extraire l'archive ci-dessous :</p><p id="r-535159" data-claire-element-id="535159"><a href="http://devmath.free.fr/ressourceSDZ">Ressources du tutoriel</a></p><p id="r-535160" data-claire-element-id="535160">Cette archive contient :</p><ul id="r-535169" data-claire-element-id="535169"><li id="r-535162" data-claire-element-id="535162"><p id="r-535161" data-claire-element-id="535161">Une texture</p></li><li id="r-535164" data-claire-element-id="535164"><p id="r-535163" data-claire-element-id="535163">Deux polices d'écriture</p></li><li id="r-535166" data-claire-element-id="535166"><p id="r-535165" data-claire-element-id="535165">Un son</p></li><li id="r-535168" data-claire-element-id="535168"><p id="r-535167" data-claire-element-id="535167">Un curseur.</p></li></ul><aside id="r-535171" data-claire-element-id="535171" data-claire-semantic="information"><p id="r-535170" data-claire-element-id="535170">Pour installer les polices d'écriture, placez les dans le dossier <em>C:\Windows\Fonts</em>.</p></aside><p id="r-535172" data-claire-element-id="535172">Avec tout cela, voici donc le menu que nous allons réaliser durant ce cours :</p><p id="r-535173" data-claire-element-id="535175"><a href="medias/uploads.siteduzero.com_files_389001_390000_389456.png"><img id="r-535174" data-claire-element-id="535173" src="medias/uploads.siteduzero.com_thb_389001_390000_389456.png" alt="Image utilisateur"/></a><a href="medias/uploads.siteduzero.com_files_389001_390000_389457.png"><img id="r-535175" data-claire-element-id="535174" src="medias/uploads.siteduzero.com_thb_389001_390000_389457.png" alt="Image utilisateur"/></a></p><p id="r-535176" data-claire-element-id="535176">Les fonctions seront très simples :</p><ul id="r-535183" data-claire-element-id="535183"><li id="r-535178" data-claire-element-id="535178"><p id="r-535177" data-claire-element-id="535177">Lorsque la souris survolera l'une des options, celle-ci s’agrandira et changera de couleur.</p></li><li id="r-535180" data-claire-element-id="535180"><p id="r-535179" data-claire-element-id="535179">Un son se produira lorsque l'utilisateur souhaitera de jouer ou de quitter.</p></li><li id="r-535182" data-claire-element-id="535182"><p id="r-535181" data-claire-element-id="535181">Lancement d'une scène lorsque l'utilisateur souhaitera jouer.</p></li></ul>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise">Unity3D : Création d&#039;un menu avec curseur personnalisé</a>
</li>
<ul class="subchapter-parts">
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/avant-de-commencer-23">
Avant de commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/le-terrain-1">
Le terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/les-scripts">
Les scripts
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="after" href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/le-terrain-1">
<span class="next">Le terrain</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Leterrain"></a><h2>Le terrain</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/avant-de-commencer-23">
<span class="arrow"></span>
<span class="next">Avant de commencer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/les-scripts">
<span class="next">Les scripts</span>
<span class="arrow"></span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<h2 id="r-le-fond-5" data-claire-element-id="535216">Le fond</h2><p id="r-535185" data-claire-element-id="535185">Nous allons commencer par mettre en place le mur du brique qui servira de fond.<br/> Créez donc un nouveau <em>GameObject</em> en forme de cube et assignez lui la texture de brique.</p><figure id="r-535187" data-claire-element-id="535188"><img id="r-535186" data-claire-element-id="535186" src="medias/uploads.siteduzero.com_files_389001_390000_389466.png" alt="Image utilisateur"/></figure><p id="r-535189" data-claire-element-id="535189">Augmentez sa taille sur l'axe X de sorte à former un pavé.</p><figure id="r-535191" data-claire-element-id="535192"><img id="r-535190" data-claire-element-id="535190" src="medias/uploads.siteduzero.com_files_389001_390000_389465.png" alt="Image utilisateur"/></figure><aside id="r-535194" data-claire-element-id="535194" data-claire-semantic="warning"><p id="r-535193" data-claire-element-id="535193">N'oubliez pas de changer le <em>Tiling</em> X du <em>material</em> pour éviter l'étirement de la texture.</p></aside><figure id="r-535196" data-claire-element-id="535197"><img id="r-535195" data-claire-element-id="535195" src="medias/uploads.siteduzero.com_files_399001_400000_399203.png" alt="Image utilisateur"/></figure><p id="r-535198" data-claire-element-id="535198">Nous allons maintenant créer une lumière en forme de cercle qui se trouve au centre du mur.<br/> Sélectionnez donc la lumière dans <em>GameObject -&gt; Create Other -&gt; Spotlight</em>.</p><figure id="r-535200" data-claire-element-id="535201"><img id="r-535199" data-claire-element-id="535199" src="medias/uploads.siteduzero.com_files_399001_400000_399208.png" alt="Image utilisateur"/></figure><p id="r-535202" data-claire-element-id="535202">Le <em>Spotlight</em> est l'équivalent à une lampe torche, idéal pour créer notre lumière en forme de cercle. ;)</p><p id="r-535203" data-claire-element-id="535203">Dirigez le ensuite vers le centre du mur.<br/> Pour l'intensité et l'angle de la lumière, n'hésitez pas à utiliser l'<em>Inspector</em>.</p><figure id="r-535205" data-claire-element-id="535206"><img id="r-535204" data-claire-element-id="535204" src="medias/uploads.siteduzero.com_files_399001_400000_399212.png" alt="Image utilisateur"/></figure><p id="r-535207" data-claire-element-id="535207">Une fois placé, votre scène devrait ressembler à celle-ci :</p><figure id="r-535209" data-claire-element-id="535210"><img id="r-535208" data-claire-element-id="535208" src="medias/uploads.siteduzero.com_files_389001_390000_389468.png" alt="Image utilisateur"/></figure><p id="r-535211" data-claire-element-id="535211">N'oubliez pas aussi de placer la caméra face au mur. ^^</p><figure id="r-535213" data-claire-element-id="535214"><img id="r-535212" data-claire-element-id="535212" src="medias/uploads.siteduzero.com_files_389001_390000_389464.png" alt="Image utilisateur"/></figure><p id="r-535215" data-claire-element-id="535215">Le décors étant fini, nous allons maintenant mettre en place le texte !</p><h2 id="r-gui-text" data-claire-element-id="535237">GUI Text</h2><p id="r-535217" data-claire-element-id="535217">Nous allons maintenant nous attaquer au menu. Commençons par le titre. <br/> Tout d'abord, sélectionnez le police d'écriture <em>Ascent 2 Stardom</em>. Ensuite, nous allons créer un <em>GUI Text</em>. Pour se faire, ajouter en un en vous dirigeant dans le menu <em>GameObject -&gt; Create Other -&gt; GUI text</em>. <br/> Un texte devrait apparaître à l'écran avec la police d'écriture sélectionnée.</p><div id="r-535219" data-claire-element-id="535219" data-claire-semantic="question"><p id="r-535218" data-claire-element-id="535218">Mais c'est tout petit ! o_O</p></div><p id="r-535220" data-claire-element-id="535220">Deux secondes, j'y viens ^^ . Pour modifier la taille du texte, servez vous de l'<em>Inspector</em>, il vous suffit juste de modifier la valeur de <em>Font Size</em>.<br/> Ensuite, vous pourrez remplacer <em>Gui Text</em> par le titre de votre jeu.</p><p id="r-535221" data-claire-element-id="535221">Puis vous devez placer votre texte en changeant les valeurs X et Y de <em>Pixel Offset</em>.</p><figure id="r-535223" data-claire-element-id="535224"><img id="r-535222" data-claire-element-id="535222" src="medias/uploads.siteduzero.com_files_389001_390000_389480.png" alt="Image utilisateur"/></figure><p id="r-535225" data-claire-element-id="535225">Une fois tout cela fini, vous devriez obtenir quelque chose semblable à ceci :</p><figure id="r-535227" data-claire-element-id="535228"><img id="r-535226" data-claire-element-id="535226" src="medias/uploads.siteduzero.com_files_389001_390000_389481.png" alt="Image utilisateur"/></figure><p id="r-535229" data-claire-element-id="535229">Refaites cette manipulation pour les options <em>Jouer</em> et <em>Quitter</em>. <br/> Vous pourrez utiliser l'autre police nommée <em>Damned</em>. ;)</p><p id="r-535230" data-claire-element-id="535230">Si tout se passe bien, vous devriez avoir ceci :</p><figure id="r-535232" data-claire-element-id="535233"><img id="r-535231" data-claire-element-id="535231" src="medias/uploads.siteduzero.com_files_389001_390000_389456.png" alt="Image utilisateur"/></figure><aside id="r-535235" data-claire-element-id="535235" data-claire-semantic="information"><p id="r-535234" data-claire-element-id="535234">Pour les symboles, j'ai utilisé le signe $ et des apostrophes.</p></aside><p id="r-535236" data-claire-element-id="535236">Le design du menu étant terminé, nous allons maintenant passer aux scripts. :pirate:</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise">Unity3D : Création d&#039;un menu avec curseur personnalisé</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/avant-de-commencer-23">
Avant de commencer
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/le-terrain-1">
Le terrain
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/les-scripts">
Les scripts
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/avant-de-commencer-23">
<span class="arrow"></span>
<span class="next">Avant de commencer</span>
</a>
<a class="after" href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/les-scripts">
<span class="next">Les scripts</span>
<span class="arrow"></span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div><a name="Lesscripts"></a><h2>Les scripts</h2><div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/le-terrain-1">
<span class="arrow"></span>
<span class="next">Le terrain</span>
</a>
</div>
<hr class="top"/>
<div class="clear"></div> <div id="content" role="article">
<p id="r-535239" data-claire-element-id="535239">Passons maintenant aux scripts, nous allons donc créer trois scripts :</p><ul id="r-535246" data-claire-element-id="535246"><li id="r-535241" data-claire-element-id="535241"><p id="r-535240" data-claire-element-id="535240">Un pour les actions communes des options (couleur, taille et son)</p></li><li id="r-535243" data-claire-element-id="535243"><p id="r-535242" data-claire-element-id="535242">Un autre qui va gérer les actions spécifiques (charger ou quitter un niveau)</p></li><li id="r-535245" data-claire-element-id="535245"><p id="r-535244" data-claire-element-id="535244">Et enfin un pour gérer le curseur.</p></li></ul><h2 id="r-actions-communes" data-claire-element-id="535259">Actions communes</h2><p id="r-535247" data-claire-element-id="535247">Nous allons commencer par créer quatre variables :</p><pre id="r-535248" data-claire-element-id="535248"><code data-claire-semantic="javascript">var couleurEntrer : Color = Color.green;
var couleurSortie : Color = Color.white;
var tailleEntrer : float = 45;
var tailleSortie : float = 45;</code></pre><p id="r-535249" data-claire-element-id="535249">Les variables <em>couleurEntrer</em> et <em>couleurSortie</em> vont ainsi stocker la couleur à charger (ici vert et blanc) lorsque la souris va entrer ou sortir d'une option.<br/> Les variables <em>tailleEntrer</em> et <em>tailleSortie</em> vont, quant à elles, stocker la taille du <em>GUIText</em>.<br/> Maintenant que les variables sont déclarées, nous souhaitons faire en sorte que le texte change de couleur et s'élargisse lorsque la souris entre au dessus d'une option.</p><p id="r-535250" data-claire-element-id="535250">Nous allons donc faire appel à la fonction <em>OnMouseEnter</em> qui est l'équivalent à &quot;lorsque la souris entre ...&quot;</p><pre id="r-535251" data-claire-element-id="535251"><code data-claire-semantic="javascript">function OnMouseEnter() {
    guiText.material.color = couleurEntrer;
}</code></pre><p id="r-535252" data-claire-element-id="535252">Ici, lorsque la souris entrera dans le <em>GUIText</em>, la couleur du <em>material</em> prendra la couleur définie dans la variable <em>couleurEntrer</em>.<br/> La valeur par défaut étant le vert, la couleur du <em>GUIText </em>sera verte. Nous utiliserons donc le même principe pour la taille du <em>GUIText</em>.</p><pre id="r-535253" data-claire-element-id="535253"><code data-claire-semantic="javascript">function OnMouseEnter() {
    guiText.material.color = couleurEntrer;
    guiText.fontSize = tailleEntrer;
}</code></pre><p id="r-535254" data-claire-element-id="535254">Le <em>GUIText </em>prendra comme taille la valeur qui se trouve dans la variable <em>tailleEntrer</em>.<br/> Pour revenir aux options initiales lorsque la souris quittera le <em>GUIText</em>, nous utiliserons la fonction <em>OnMouseExit</em>. <br/> Je pense que vous aurez compris son principe. ;)</p><pre id="r-535255" data-claire-element-id="535255"><code data-claire-semantic="javascript">function OnMouseExit(){
	guiText.material.color = couleurSortie;
	guiText.fontSize = tailleSortie;
}</code></pre><p id="r-535256" data-claire-element-id="535256">Voici le code final :</p><pre id="r-535257" data-claire-element-id="535257"><code data-claire-semantic="javascript">#pragma strict

var couleurEntrer : Color = Color.green;
var couleurSortie : Color = Color.white;
var tailleEntrer : float = 45;
var tailleSortie : float = 45;

function OnMouseEnter() {
    guiText.material.color = couleurEntrer;
    guiText.fontSize = tailleEntrer;
}

function OnMouseExit() {
    guiText.material.color = couleurSortie;
    guiText.fontSize = tailleSortie;
}</code></pre><p id="r-535258" data-claire-element-id="535258"><em>#pragma strict</em> permet d'écrire du code <strong>static</strong>.<br/> Le <em>Javascript</em> est un langage dynamique, en le forçant à être <strong>static</strong>, ceci va économiser des ressources lors de l'exécution.</p><h2 id="r-actions-specifiques" data-claire-element-id="535279">Actions spécifiques</h2><p id="r-535260" data-claire-element-id="535260">Nous allons maintenant voir comment lancer une scène et quitter le jeu. Commencez par créer un nouveau script. Nommez-le comme bon vous semble. Nous allons créer deux nouvelles variables nommées <em>son</em> et <em>levelSuivant</em>.</p><ul id="r-535265" data-claire-element-id="535265"><li id="r-535262" data-claire-element-id="535262"><p id="r-535261" data-claire-element-id="535261">La variable <em>son</em> stockera le son qui sera joué lorsque l'on sélectionnera une des options du menu</p></li><li id="r-535264" data-claire-element-id="535264"><p id="r-535263" data-claire-element-id="535263">La variable <em>levelSuivant</em> sous forme de string contient la scène à charger.</p></li></ul><pre id="r-535266" data-claire-element-id="535266"><code data-claire-semantic="javascript">var son : AudioClip;
var levelSuivant : String = &quot;Quitter&quot;;</code></pre><p id="r-535267" data-claire-element-id="535267">Nous allons étudier une nouvelle fonction : <em>OnMouseUp</em>.<br/> Cette fonction se lancera automatiquement lorsque le bouton de la souris sera relâché après avoir effectué un clic sur l'une des options.</p><pre id="r-535268" data-claire-element-id="535268"><code data-claire-semantic="javascript">function OnMouseUp() { 

}</code></pre><p id="r-535269" data-claire-element-id="535269">Par exemple, nous souhaitons jouer un son lorsqu'une option sera sélectionnée. <br/> Nous allons donc utiliser la fonction <em>OnMouseUp</em>.</p><pre id="r-535270" data-claire-element-id="535270"><code data-claire-semantic="javascript">function OnMouseUp() { 
    audio.PlayOneShot(son);
}</code></pre><p id="r-535271" data-claire-element-id="535271"><em>audio.PlayOneShot()</em> permet de jouer un son une seule fois, d'où le nom de la fonction.<br/> Nous allons alors passer la variable <em>son </em>en paramètre pour indiquer quel son doit être joué par le composant <em>audio</em>.<br/> Pour savoir si l'option du menu est un bouton Quitter, nous allons vérifier si <em>levelSuivant</em> contient <em>&quot;Quitter&quot;</em>.</p><pre id="r-535272" data-claire-element-id="535272"><code data-claire-semantic="javascript">if (levelSuivant == &quot;Quitter&quot;)
    Application.Quit();</code></pre><p id="r-535273" data-claire-element-id="535273">Si <em>levelSuivant</em> contient <em>&quot;Quitter&quot;</em>, nous quittons l’application grâce à la fonction <em>Application.Quit()</em>.<br/> Dans le cas contraire, nous lancerons une scène dont le nom est défini dans la variable <em>levelSuivant</em>.</p><pre id="r-535274" data-claire-element-id="535274"><code data-claire-semantic="javascript">if (levelSuivant == &quot;Quitter&quot;)
    Application.Quit();
else
    Application.LoadLevel(levelSuivant);
}</code></pre><p id="r-535275" data-claire-element-id="535275"><em>Application.LoadLevel()</em> permet de charger et exécuter une scène. On lui assigne donc <em>levelSuivant</em> qui contient le nom de la scène à charger. Voici donc le code final :</p><pre id="r-535276" data-claire-element-id="535276"><code data-claire-semantic="javascript">var son : AudioClip;
var levelSuivant : String = &quot;Quitter&quot;;

function OnMouseUp() { 
     audio.PlayOneShot(son);
     if (levelSuivant == &quot;Quitter&quot;)
         Application.Quit();
     else
         Application.LoadLevel(levelSuivant);
}

@script RequireComponent (AudioSource)</code></pre><p id="r-535277" data-claire-element-id="535277">Lorsque que nous allons sélectionner une option, un son devra se produire.<br/> Nous devons nous assurer que l’objet possède bien un composant de type <em>AudioSource</em>. Nous allons donc vérifier la présence de ce composant en ajoutant à la fin du script :</p><pre id="r-535278" data-claire-element-id="535278"><code data-claire-semantic="javascript">@script RequireComponent(AudioSource)</code></pre><h2 id="r-le-curseur-2" data-claire-element-id="535290">Le curseur</h2><p id="r-535280" data-claire-element-id="535280">Il est possible sur Unity3D de cacher le curseur du système et de le remplacer. Nous allons, dans un premier temps, déclarer une variable qui contiendra la texture du curseur :</p><pre id="r-535281" data-claire-element-id="535281"><code data-claire-semantic="javascript">var curseur : Texture2D;</code></pre><p id="r-535282" data-claire-element-id="535282">Ensuite grâce à la propriété <em>Screen.showCursor</em>, nous allons cacher le curseur du système.</p><pre id="r-535283" data-claire-element-id="535283"><code data-claire-semantic="javascript">function Start() {
    Screen.showCursor = false; 
}</code></pre><p id="r-535284" data-claire-element-id="535284">Dans une fonction <em>OnGUI</em>, nous allons créer deux variables : <em>positionSouris</em> et <em>positionCurseur</em>.</p><pre id="r-535285" data-claire-element-id="535285"><code data-claire-semantic="javascript">function OnGUI() {
    var positionSouris : Vector3 = Input.mousePosition;
    var positionCurseur : Rect = Rect(positionSouris.x, Screen.height - positionSouris.y, curseur.width, curseur.height);
}</code></pre><p id="r-535286" data-claire-element-id="535286">La variable <em>positionSouris</em> contient la position de la souris sur l'écran.<br/> La variable <em>positionCurseur</em> contient, quant à elle, la position de la texture (du nouveau curseur) par rapport à la position de la souris.<br/> Globalement, elle repositionne la texture où doit normalement être le curseur du système.<br/> Une fois cela fait, nous devons afficher le nouveau curseur, nous allons donc faire appel à <em>GUI.Label</em>.<br/><em>GUI.label</em> prend en compte deux paramètres : la position et la texture. Dans notre exemple, le code ressemblera à ceci :</p><pre id="r-535287" data-claire-element-id="535287"><code data-claire-semantic="javascript">GUI.Label(positionCurseur, curseur);</code></pre><p id="r-535288" data-claire-element-id="535288">Voilà donc le script complet pour le curseur :</p><pre id="r-535289" data-claire-element-id="535289"><code data-claire-semantic="javascript">var curseur : Texture2D;

function Start() {
    Screen.showCursor = false; 
}

function OnGUI() {
    var positionSouris : Vector3 = Input.mousePosition;
    var positionCurseur : Rect = Rect(positionSouris.x,Screen.height - positionSouris.y,curseur.width,curseur.height);
    GUI.Label(positionCurseur,curseur);
}</code></pre><h2 id="r-assignation-des-scripts-et-variables" data-claire-element-id="535309">Assignation des scripts et variables</h2><p id="r-535291" data-claire-element-id="535291">Maintenant que les scripts sont entièrement codés, il faut associer ces scripts à chaque <em>GUIText </em>par <em>Drag and Drop</em>.<br/> Pour le script du curseur, je l'ai personnellement associé à la caméra.<br/> Si vous avez correctement lu le cours, vous devriez avoir ceci dans l'<em>Inspector </em>lorsque vous sélectionnez un <em>GUIText </em>:</p><figure id="r-535293" data-claire-element-id="535294"><img id="r-535292" data-claire-element-id="535292" src="medias/uploads.siteduzero.com_files_399001_400000_399706.png" alt="Image utilisateur"/></figure><p id="r-535295" data-claire-element-id="535295">Changer les couleurs et la taille comme bon vous semble.<br/> Assignez ensuite un son à la variable <em>son</em>. Si le composant <em>AudioSource </em>n'est pas présent, dirigez-vous vers <strong>Component -&gt; Audio -&gt; Audio Source</strong>. Cette option permettra d'ajouter un composant de type <em>AudioSource </em>à votre <em>GUIText</em>.<br/> N'oubliez pas aussi d'assigner le son à l'<em>AudioSource</em> depuis l'<em>Inspector </em>:</p><figure id="r-535297" data-claire-element-id="535298"><img id="r-535296" data-claire-element-id="535296" src="medias/uploads.siteduzero.com_files_399001_400000_399709.png" alt="Image utilisateur"/></figure><p id="r-535299" data-claire-element-id="535299">Pour charger une scène lors du clic de la souris, vous devez entrer le nom de la scène correspondante dans la variable <em>Level Suivant</em>.<br/> Assurez-vous aussi que la scène à charger est dans le <strong>Build</strong>.<br/> Pour charger une scène dans le <strong>Build</strong>, allez dans <strong>File -&gt; Build Settings</strong> et déplacez la scène à charger dans la première case.<br/> Si le <em>GUIText </em>est un bouton Quitter, ne modifiez pas le contenu de la variable.</p><p id="r-535300" data-claire-element-id="535300">Le cours s'achève ici. ^^</p><p id="r-535301" data-claire-element-id="535301">Vous savez dorénavant faire un menu sur Unity3D.</p><p id="r-535302" data-claire-element-id="535302">Voici quelques exemples de menus fait aussi avec unity3D :</p><p id="r-535303" data-claire-element-id="535306"><a href="medias/uploads.siteduzero.com_files_388001_389000_388603.jpg"><img id="r-535304" data-claire-element-id="535303" src="medias/uploads.siteduzero.com_thb_388001_389000_388603.jpg" alt="Image utilisateur"/></a><a href="medias/uploads.siteduzero.com_files_388001_389000_388602.jpg"><img id="r-535305" data-claire-element-id="535304" src="medias/uploads.siteduzero.com_thb_388001_389000_388602.jpg" alt="Image utilisateur"/></a><a href="medias/uploads.siteduzero.com_files_388001_389000_388600.jpg"><img id="r-535306" data-claire-element-id="535305" src="medias/uploads.siteduzero.com_thb_388001_389000_388600.jpg" alt="Image utilisateur"/></a></p><p id="r-535307" data-claire-element-id="535307">N'hésitez pas à laisser un commentaire et vos menus ! ;)</p><p id="r-535308" data-claire-element-id="535308">Un grand merci à L1ne pour son travail de relecture et ses conseils.</p>
<aside class="aside-menu">
<ul class="content-menu subchapter" role="navigation">
<li class="tuto">
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise">Unity3D : Création d&#039;un menu avec curseur personnalisé</a>
</li>
<ul class="subchapter-parts">
<li>
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/avant-de-commencer-23">
Avant de commencer
</a>
</li>
<li>
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/le-terrain-1">
Le terrain
</a>
</li>
<li class="active">
<a href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/les-scripts">
Les scripts
</a>
</li>
</ul>
</ul>
</aside>
</div>
<div id="content-bottom-menu"></div>
<hr/>
<div class="paginate-tuto">
<a class="before" href="http://62.4.17.167/informatique/tutoriels/unity3d-creation-d-un-menu-avec-curseur-personnalise/le-terrain-1">
<span class="arrow"></span>
<span class="next">Le terrain</span>
</a>
</div>
<hr class="bottom"/>
<div class="clear"></div> <div class="adBan">
<script type='text/javascript'>
    if (window.innerWidth >= 728)
    {
        document.write('<div id="div-gpt-ad-1350977194635-8" class="megaban"></div>');
        googletag.cmd.push(function() {
            googletag.display('div-gpt-ad-1350977194635-8');
        });
    }
            else
        {
            document.write('<div id="div-gpt-ad-1350977284180-8" class="miniban"></div>');
            googletag.cmd.push(function() {
                googletag.display('div-gpt-ad-1350977284180-8');
            });
        }
    </script>
</div>
<div class="clear"></div>
</body>
<!-- Mirrored from 62.4.17.167/sdz/sdz/unity3d-creation-d-un-menu-avec-curseur-personnalise.html by HTTrack Website Copier/3.x [XR&CO'2013], Sun, 27 Oct 2013 02:52:19 GMT -->

<!-- Mirrored from sdz.tdct.org/sdz/unity3d-creation-d-un-menu-avec-curseur-personnalise.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 30 Nov 2015 04:37:46 GMT -->
</html>